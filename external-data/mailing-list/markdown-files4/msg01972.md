---
title: "Re: Performance issues with small dataset"
description: ""
project: community
lastmod: 2011-01-13T14:31:56-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01972"
mailinglist_parent_id: "msg01971"
author_name: "Anthony Molinaro"
project_section: "mailinglistitem"
sent_date: 2011-01-13T14:31:56-08:00
---


Can you extrapolate what you mean by appending the keys? Is that specifying
a bucket as storing multiple values, or is there some other way to model a
list of things with fast read/write times?

-Anthony

On Thu, Jan 13, 2011 at 10:37:18AM -0500, nx wrote:
&gt; I think you can avoid listing all keys in a bucket by maintaining a
&gt; separate object that contains a list of the current keys. I usually
&gt; append the keys to a "/bucket/\_collection" object.
&gt; 
&gt; On Thu, Jan 13, 2011 at 9:27 AM, Sean Cribbs  wrote:
&gt; &gt;&gt;
&gt; &gt;&gt; Unfortunately, even if additional nodes yield linear performance
&gt; &gt;&gt; gains, the m/r overhead seems very large -- if I'm getting 1.5 seconds
&gt; &gt;&gt; to process 1,000 items on one node, it seems apparent that I should
&gt; &gt;&gt; get roughtly 1.5 seconds to process 3,000 items on 3 nodes, which
&gt; &gt;&gt; still is awfully slow.
&gt; &gt;&gt;
&gt; &gt;&gt; Do you know how Riak compares to HBase, MongoDB or Cassandra for large
&gt; &gt;&gt; dataset processing and analysis with m/r, when talking hundreds of
&gt; &gt;&gt; millions, or even billions of keys? It would seem that key traversal
&gt; &gt;&gt; performance would preventing Riak from competing in that space. Maybe
&gt; &gt;&gt; you could do something with Riak Search, but I'm not sure if it would
&gt; &gt;&gt; comparable.
&gt; &gt;
&gt; &gt; To be fair, you can't do a microbenchmark and then try to extrapolate it to 
&gt; &gt; large datasets; things change at scale. Also, key-listing has been a known 
&gt; &gt; limitation of Riak for a long time, and one we have been quite vocal about. 
&gt; &gt; There have been improvements recently, but it's still an O(N) computation 
&gt; &gt; where N is the total number of keys stored in the cluster. Therefore, it's 
&gt; &gt; important to structure your data such that you limit the use of key lists. 
&gt; &gt; Compare performance after you have done that, and run your benchmark on 
&gt; &gt; something other than a single node (4 or more in a cluster is best), with a 
&gt; &gt; dataset that approximates the target size.
&gt; &gt;
&gt; &gt; Sean Cribbs 
&gt; &gt; Developer Advocate
&gt; &gt; Basho Technologies, Inc.
&gt; &gt; http://basho.com/
&gt; &gt;
&gt; &gt;
&gt; &gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; &gt;
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

-- 
------------------------------------------------------------------------
Anthony Molinaro 

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

