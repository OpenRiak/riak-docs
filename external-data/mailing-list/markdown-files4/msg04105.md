---
title: "Re: best practices on data storage?"
description: ""
project: community
lastmod: 2011-07-28T00:04:18-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg04105"
mailinglist_parent_id: "msg04104"
author_name: "Antonio Rohman Fernandez"
project_section: "mailinglistitem"
sent_date: 2011-07-28T00:04:18-07:00
---


 

what about the use of Links?

Rohman 

On Wed, 27 Jul 2011 23:54:34
-0700, Aphyr wrote: 

&gt; If you don't delete the associated records, you
can use allow\_mult to 
&gt; handle concurrent writes. If you do need to
delete them consistently, 
&gt; you can use a statebox model to handle it
within certain size bounds.
&gt; 
&gt; --Kyle
&gt; 
&gt; On 07/27/2011 11:47 PM,
Antonio Rohman Fernandez wrote:
&gt; 
&gt;&gt; I also thought on that... but then
the "User" object could become really big... imagine i post 10 statuses
every day and thousands of friends comments all the time on them...
also... wouldn't be troublesome to update the "User" object when
"friends" comments on statuses? as you should have to retrieve the data
to insert the new comment nested and if several friends comment at the
same times i see data getting lost in the way... or i'm missing
something? thanks Rohman On Wed, 27 Jul 2011 23:40:30 -0700, Sylvain
Niles wrote: 
&gt;&gt; 
&gt;&gt;&gt; Hi Rohman, the conversation yesterday got us to
thinking and Basho confirmed that buckets are a form of key prefix. So
no matter how small the bucket it will traverse the whole key space for
a map reduce. We sat down and did some thinking of how to work our data
differently as we have a similar use case to you and decided on nested
docs using Ripple. In our case we had special buckets for each user like
you describe below. Now that bucket is a nested JSON struct inside the
user object instead of a separate bucket. In your use case you could
have all statuses as a nested struct on your user object and display
would be a matter of linkwalking all an user's friends and parsing
status content with some time/sorting. On Wed, Jul 27, 2011 at 11:26 PM,
Antonio Rohman Fernandez &gt; wrote: Yesterday, somebody suggested that not
for having the data distributed on smaller buckets, Riak's MapReduce
operations would be faster... while nobody at Basho confirmed that yet,
i'm now wondering which is the best way for storing data... lets imagine
this simple excercise: 1. We have entities users, friends, statuses and
comments in a web app 2. Users can make friends with other users 3.
Users can post statuses 4. Friends ( Users ) can comment on user's
statuses At first i thought on having a bucket called "users" with all
users and then for friend linkage i was thinking on having personal
buckets like "rohman\_friends", "fyodor\_friends", etc... with the keys to
the users instead of a big "friends" bucket for easy querying... but
seems i'm wrong... so... How would you distribute the data on buckets?
and how would you run MapReduce jobs? Would you use a support SQL
database to store relationship between keys? is possible on an only Riak
environment? thanks Rohman line logo \*Antonio Rohman Fernandez\* CEO,
Founder & Lead Engineer roh...@mahalostudio.com [3]
roh...@mahalostudio.com&gt; \*Projects\* MaruBatsu.es PupCloud.com Wedding
Album line \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_ riak-users
mailing list riak-users@lists.basho.com [7] riak-users@lists.basho.com&gt;
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
[8]
&gt;&gt; -- line logo \*Antonio Rohman Fernandez\* CEO, Founder & Lead
Engineer roh...@mahalostudio.com [10] roh...@mahalostudio.com&gt;
\*Projects\* MaruBatsu.es PupCloud.com Wedding Album line
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_ riak-users mailing list
riak-users@lists.basho.com [14]
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
[15]

-- 

 [16]

 ANTONIO ROHMAN FERNANDEZ
CEO, Founder & Lead
Engineer
roh...@mahalostudio.com [17] 
 PROJECTS
MaruBatsu.es
[18]
PupCloud.com [19]
Wedding Album [20] 

 

Links:
------
[1]
mailto:roh...@mahalostudio.com
[2] http://mahalostudio.com
[3]
mailto:roh...@mahalostudio.com
[4] http://marubatsu.es
[5]
http://pupcloud.com
[6] http://wedding.mahalostudio.com
[7]
mailto:riak-users@lists.basho.com
[8]
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
[9]
http://mahalostudio.com
[10] mailto:roh...@mahalostudio.com
[11]
http://marubatsu.es
[12] http://pupcloud.com
[13]
http://wedding.mahalostudio.com
[14]
mailto:riak-users@lists.basho.com
[15]
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
[16]
http://mahalostudio.com
[17] mailto:roh...@mahalostudio.com
[18]
http://marubatsu.es
[19] http://pupcloud.com
[20]
http://wedding.mahalostudio.com
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

