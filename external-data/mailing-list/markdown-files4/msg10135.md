---
title: "Re: find() Suddenly Works on Quorum Change"
description: ""
project: community
lastmod: 2013-02-14T20:38:33-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg10135"
mailinglist_parent_id: "msg10102"
author_name: "Brian Sparrow"
project_section: "mailinglistitem"
sent_date: 2013-02-14T20:38:33-08:00
---


Hi Ian, 

Did you retry the request with R=3 immediately after the failed read. What 
most likely happened was read-repair kicked in after the unsuccessful read and 
fixed all 3 replicas of the object. Generally it is a good idea to retry all 
r\_val\_unsatisfied requests as read-repair should fix the replicas resulting in 
a successful read on subsequent requests. 

-- 
Brian Sparrow
Developer Advocate
Basho Technologies


On Tuesday, February 12, 2013 at 2:29 PM, Ian Ha wrote:

&gt; Via the Ripple client library for Ruby, we were doing a User.find() call to 
&gt; our riak cluster and received the following error:
&gt; 
&gt; Riak::ProtobuffsFailedRequest: Expected success from Riak but received 0. 
&gt; {r\_val\_unsatisfied,3,0}
&gt; 
&gt; As a guess, we changed the read quorum to 2 from 3 and left the write quorum 
&gt; unchanged at 3; the change was done on the User object. As a result, the 
&gt; User.find() call worked. 
&gt; 
&gt; Strangely, when we changed the read quorum back to 3, the User.find() now 
&gt; worked, too. 
&gt; 
&gt; I searched in our logs and Google and couldn't find any clues as to what 
&gt; might be causing this. 
&gt; 
&gt; Does anyone have any suggestions here or can point me to documentation that 
&gt; might help explain this? 
&gt; 
&gt; Thanks 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com (mailto:riak-users@lists.basho.com)
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; 
&gt; 


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

