---
title: "Re: Periodically solr down issue."
description: ""
project: community
lastmod: 2017-02-04T07:32:26-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17915"
mailinglist_parent_id: "msg17914"
author_name: "Luke Bakken"
project_section: "mailinglistitem"
sent_date: 2017-02-04T07:32:26-08:00
---


Hi Alex -

What is in solr.log ?
--
Luke Bakken
Engineer
lbak...@basho.com


On Sat, Feb 4, 2017 at 3:37 AM, Alex Feng  wrote:
&gt; Hello Riak users,
&gt;
&gt; I recently found our solr system got down after running some time, it got
&gt; recovered after a restart. But then it happened again.
&gt;
&gt; Below is the error output, do you guys have any clue about this ?
&gt;
&gt;
&gt; 2017-02-04 18:12:22.329 [error] &lt;0.830.0&gt;@yz\_kv:index\_internal:237 failed to
&gt; index object
&gt; {{&lt;&lt;"process\_test\_result"&gt;&gt;,&lt;&lt;83,104,105,76,111,110,103,90,105,9
&gt; 5,77,66,80,65,67,75,45,231,148,159,228,186,167,232,189,166,233,151,180,50,48,49,55,50,52&gt;&gt;},&lt;&lt;"9H5AlII0OZm8xwnGbI"&gt;&gt;}
&gt; with error {"Failed to index docs",o
&gt; ther,{error,{conn\_failed,{error,econnrefused}}}} because
&gt; [{yz\_solr,index,3,[{file,"src/yz\_solr.erl"},{line,205}]},{yz\_kv,index,7,[{file,"src/yz\_kv.erl"},{
&gt; line,293}]},{yz\_kv,index\_internal,5,[{file,"src/yz\_kv.erl"},{line,224}]},{riak\_kv\_vnode,actual\_put,6,[{file,"src/riak\_kv\_vnode.erl"},{line,1619}]},{riak\_k
&gt; v\_vnode,perform\_put,3,[{file,"src/riak\_kv\_vnode.erl"},{line,1607}]},{riak\_kv\_vnode,do\_put,7,[{file,"src/riak\_kv\_vnode.erl"},{line,1398}]},{riak\_kv\_vnode,h
&gt; andle\_command,3,[{file,"src/riak\_kv\_vnode.erl"},{line,558}]},{riak\_core\_vnode,vnode\_command,3,[{file,"src/riak\_core\_vnode.erl"},{line,346}]}]
&gt;
&gt;
&gt;
&gt; restart node, got this&gt;
&gt;
&gt;
&gt; 2017-02-04 18:13:47.026 [error] &lt;0.4340.0&gt;@yz\_pb\_search:maybe\_process:111
&gt; {solr\_error,{500,"http://localhost:8093/internal\_solr/process\_test\_result/select
&gt; ",&lt;&lt;"{\"error\":{\"msg\":\"org.apache.solr.client.solrj.SolrServerException:
&gt; Server refused connection at:
&gt; http://nosql-3.dsdb:8093/internal\_solr/process\_
&gt; test\_result\",\"trace\":\"org.apache.solr.common.SolrException:
&gt; org.apache.solr.client.solrj.SolrServerException: Server refused connection
&gt; at: http://nos
&gt; ql-3.dsdb:8093/internal\_solr/process\_test\_result\\n\\tat
&gt; org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:308)\\n\\tat
&gt;
&gt; org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:135)\\n\\tat
&gt; org.apache.solr.core.SolrCore.execute(SolrCore.java:1916)\\
&gt; n\\tat
&gt; org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:780)\\n\\tat
&gt; org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDis
&gt; patchFilter.java:427)\\n\\tat
&gt; org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:217)\\n\\tat
&gt; org.eclipse.jetty.servlet.ServletHa
&gt; ndler$CachedChain.doFilter(ServletHandler.java:1419)\\n\\tat
&gt; org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:455)\\n\\tat
&gt; org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137)\\n\\tat
&gt; org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:557)\\n\\tat
&gt; org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231)\\n\\tat
&gt; org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1075)\\n\\tat
&gt; org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:384)\\n\\tat
&gt; org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:193)\\n\\tat
&gt; org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1009)\\n\\tat
&gt; org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)\\n\\tat
&gt; org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:255)\\n\\tat
&gt; org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:154)\\n\\tat
&gt; org.eclipse.jetty.server.handler.HandlerWrap..."&gt;&gt;}}
&gt; [{yz\_solr,search,3,[{file,"src/yz\_solr.erl"},{line,292}]},{yz\_pb\_search,maybe\_process,3,[{file,"src/yz\_pb\_search.erl"},{line,76}]},{riak\_api\_pb\_server,process\_message,4,[{file,"src/riak\_api\_pb\_server.erl"},{line,388}]},{riak\_api\_pb\_server,connected,2,[{file,"src/riak\_api\_pb\_server.erl"},{line,226}]},{riak\_api\_pb\_server,decode\_buffer,2,[{file,"src/riak\_api\_pb\_server.erl"},{line,364}]},{gen\_fsm,handle\_msg,7,[{file,"gen\_fsm.erl"},{line,505}]},{proc\_lib,init\_p\_do\_apply,3,[{file,"proc\_lib.erl"},{line,239}]}]
&gt; 2017-02-04 18:17:02.756 [error]
&gt; &lt;0.6871.0&gt;@riak\_core\_handoff\_receiver:handle\_info:97 Handoff receiver for
&gt; partition 0 exited abnormally after processing 0 objects from
&gt; {"192.168.9.247",39483}:
&gt; {error,{vnode\_timeout,60000,844,&lt;&lt;131,104,2,100,0,10,101,110,99,111,100,101,95,114,97,119,104,3,104,2,109,0,0,0,19,112,114,111,99,101,115,115,95,116,101,115,116,95,114,101,115,117,108,116,109,0,0,0,35,83,104,105,76,111,110,103,90,105,95,77,66,80,65,67,75,45,231,148,159,228,186,167,232,189,166,233,151,180,50,48,49,55,50,52,109,0,0,0,18,57,72,53,65,109,84,122,54,79,109,99,108,87,107,87,68,80,85,109,0,0,2,220,53,1,0,0,0,38,131,108,0,0,0,1,104,2,109,0&gt;&gt;}}
&gt;
&gt;
&gt; Br,
&gt;
&gt; Alex
&gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

