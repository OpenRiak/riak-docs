---
title: "Re: Deletion of keys in Riak doesn't decrease its RAM size"
description: ""
project: community
lastmod: 2012-01-04T06:24:31-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06126"
mailinglist_parent_id: "msg06125"
author_name: "Pronam Chatterjee"
project_section: "mailinglistitem"
sent_date: 2012-01-04T06:24:31-08:00
---


Oh I see! Thanks for the correction. 

-- 
Pronam Chatterjee
Sent with Sparrow (http://www.sparrowmailapp.com/?sig)


On Wednesday 4 January 2012 at 7:35 PM, Sean Cribbs wrote:

&gt; Pronam,
&gt; 
&gt; That is a different setting entirely and not related to normal delete 
&gt; operations.
&gt; 
&gt; On Wed, Jan 4, 2012 at 8:57 AM, Pronam Chatterjee  (mailto:pron...@yahoo.com)&gt; wrote:
&gt; &gt; If you are using bit cask, it takes a while before the space will be freed. 
&gt; &gt; I think the default is 24 hours. Below is a quote from the bit cask page on 
&gt; &gt; the wiki. 
&gt; &gt; 
&gt; &gt; 
&gt; &gt; Purging stale entries after a fixed period
&gt; &gt; 
&gt; &gt; 
&gt; &gt; To automatically purge stale values, set the expiry\_secs value to the 
&gt; &gt; desired cutoff time. Keys that are not modified for a period equal to or 
&gt; &gt; greater than expiry\_secs will become inaccessible. 
&gt; &gt; 
&gt; &gt; 
&gt; &gt; http://wiki.basho.com/Bitcask.html
&gt; &gt; 
&gt; &gt; 
&gt; &gt; 
&gt; &gt; 
&gt; &gt; 
&gt; &gt; 
&gt; &gt; 
&gt; &gt; 
&gt; &gt; -- 
&gt; &gt; Pronam Chatterjee
&gt; &gt; Sent with Sparrow (http://www.sparrowmailapp.com/?sig)
&gt; &gt; 
&gt; &gt; 
&gt; &gt; On Wednesday 4 January 2012 at 6:33 PM, Vicky Khanna wrote:
&gt; &gt; 
&gt; &gt; 
&gt; &gt; 
&gt; &gt; &gt; 
&gt; &gt; &gt; Hi, 
&gt; &gt; &gt; 
&gt; &gt; &gt; 
&gt; &gt; &gt; 
&gt; &gt; &gt; 
&gt; &gt; &gt; 
&gt; &gt; &gt; I had around 100 million entries in the riak cluster of 4 which was 
&gt; &gt; &gt; taking 9\*4 = 36 GB of RAM.
&gt; &gt; &gt; 
&gt; &gt; &gt; 
&gt; &gt; &gt; I deleted some 40 million keys from the cluster and still the size is 
&gt; &gt; &gt; same.
&gt; &gt; &gt; 
&gt; &gt; &gt; 
&gt; &gt; &gt; I restarted the cluster and still size is same.
&gt; &gt; &gt; 
&gt; &gt; &gt; 
&gt; &gt; &gt; Can anyone please tell why riak is still retaining its original size even 
&gt; &gt; &gt; after deletion.
&gt; &gt; &gt; 
&gt; &gt; &gt; 
&gt; &gt; &gt; 
&gt; &gt; &gt; 
&gt; &gt; &gt; 
&gt; &gt; &gt; Thanks in Advance
&gt; &gt; &gt; 
&gt; &gt; &gt; 
&gt; &gt; &gt; 
&gt; &gt; &gt; 
&gt; &gt; &gt; 
&gt; &gt; &gt; Vicky Khanna
&gt; &gt; &gt; 
&gt; &gt; &gt; 
&gt; &gt; &gt; 
&gt; &gt; &gt; 
&gt; &gt; &gt; 
&gt; &gt; &gt; 
&gt; &gt; &gt; 
&gt; &gt; &gt; 
&gt; &gt; &gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; &gt; &gt; riak-users mailing list
&gt; &gt; &gt; riak-users@lists.basho.com (mailto:riak-users@lists.basho.com)
&gt; &gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; &gt; &gt; 
&gt; &gt; &gt; 
&gt; &gt; &gt; 
&gt; &gt; &gt; 
&gt; &gt; 
&gt; &gt; 
&gt; &gt; 
&gt; &gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com (mailto:riak-users@lists.basho.com)
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; &gt; 
&gt; 
&gt; 
&gt; 
&gt; -- 
&gt; Sean Cribbs 
&gt; Software Engineer
&gt; Basho Technologies, Inc.
&gt; http://basho.com/
&gt; 

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

