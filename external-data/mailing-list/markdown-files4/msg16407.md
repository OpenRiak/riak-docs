---
title: "Re: X-Riak-Meta-* and Solr"
description: ""
project: community
lastmod: 2015-08-11T16:26:29-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16407"
mailinglist_parent_id: "msg16406"
author_name: "Zeeshan Lakhani"
project_section: "mailinglistitem"
sent_date: 2015-08-11T16:26:29-07:00
---


Hey Joe,

Yes, you are able to index with meta/tag fields. Hereâ€™s an example in one of 
our erlang tests using the riak\_erlang pb client: 
https://github.com/basho/yokozuna/blob/32d71135644a579943799ff9a70b67dee0201f80/riak\_test/yokozuna\_essential.erl#L306
 
.
 

`user\_s` is indexed, for example, b/c of 
https://github.com/basho/yokozuna/blob/develop/priv/default\_schema.xml#L36 
 in 
the default schema.

Hope this helps. Thanks.


Zeeshan Lakhani
programmer | 
software engineer at @basho | 
org. member/founder of @papers\_we\_love | paperswelove.org
twitter =&gt; @zeeshanlakhani

&gt; On Aug 11, 2015, at 5:34 PM, Joe Olson  wrote:
&gt; 
&gt; 
&gt; Is it possible to automatically index custom X-Riak-Meta-\* fields with Solr? 
&gt; Do I have to create a custom extractor or modify the default search schema as 
&gt; outlined at http://docs.basho.com/riak/latest/dev/search/custom-extractors/ ?
&gt; 
&gt; Here is my python code I am using to test:
&gt; 
&gt; # Create search index
&gt; client = RiakClient(protocol='pbc',nodes=[{ 'host': 'xxx.yyy.zzz.www', 
&gt; 'pb\_port': 8087 }])
&gt; client.create\_search\_index('testindex1', '\_yz\_default')
&gt; 
&gt; # On cluster: create bucket type, assign index 
&gt; # riak-admin bucket-type create solrindexed 
&gt; '{"props":{"search\_index":"testindex1"}}'
&gt; # riak-admin bucket-type activate solrindexed
&gt; 
&gt; # Create instance of bucket using bucket type
&gt; bucket = client.bucket\_type('solrindexed').bucket('myBucket')
&gt; 
&gt; # Create new key in bucket
&gt; obj = RiakObject(client, bucket, 'myKey')
&gt; 
&gt; # Create metadata in headers, integers not allowed here???
&gt; obj.usermeta = {"startTime":"1443506400000", "endTime":"1443507000000"}
&gt; 
&gt; # Jam some random bytes in there
&gt; obj.encoded\_data = open("/dev/urandom","rb").read(int(1258291)) 
&gt; obj.content\_type = 'application/octet-stream'
&gt; 
&gt; # Write it
&gt; obj.store()
&gt; 
&gt; # Now see if we can find it..what is the syntax here? Always returns 
&gt; 'num\_found': 0
&gt; results = client.fulltext\_search('testindex1', 
&gt; 'X-Riak-Meta-startTime:1443506400000')
&gt; print results
&gt; 
&gt; Also, according to the documentation at 
&gt; http://basho.github.io/riak-python-client/object.html, 'usermeta' can only 
&gt; have strings on the value side. Is there an explanation why integers aren't 
&gt; allowed?
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

