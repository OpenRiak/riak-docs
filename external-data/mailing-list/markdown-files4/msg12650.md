---
title: "Re: List buckets results in error: bad_utf8_character_code"
description: ""
project: community
lastmod: 2013-10-16T19:28:20-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12650"
mailinglist_parent_id: "msg12648"
author_name: "Toby Corkindale"
project_section: "mailinglistitem"
sent_date: 2013-10-16T19:28:20-07:00
---



On 17/10/13 11:54, Toby Corkindale wrote:

If I run curl -i "http://bld-riak/buckets?buckets=true" I receive this
error about a bad utf8 character code, and nothing else.

This is Riak version 1.4.2-1 (from the official apt repo)


HTTP/1.1 500 Internal Server Error
Vary: Accept-Encoding
Server: MochiWeb/1.1 WebMachine/1.10.0 (never breaks eye contact)
Date: Thu, 17 Oct 2013 00:51:03 GMT
Content-Type: text/html
Content-Length: 1103

500 Internal Server
ErrorInternal Server Error
=====================

The server
encountered an error while processing this
request:  

```
{error,{exit,{ucs,{bad_utf8_character_code}},
              [{xmerl_ucs,from_utf8,1,[{file,"xmerl_ucs.erl"},{line,185}]},
               {mochijson2,json_encode_string,2,
                           [{file,"src/mochijson2.erl"},{line,186}]},
               {mochijson2,'-json_encode_array/2-fun-0-',3,
                           [{file,"src/mochijson2.erl"},{line,157}]},
               {lists,foldl,3,[{file,"lists.erl"},{line,1197}]},
               {mochijson2,json_encode_array,2,
                           [{file,"src/mochijson2.erl"},{line,159}]},
               {mochijson2,'-json_encode_proplist/2-fun-0-',3,
                           [{file,"src/mochijson2.erl"},{line,167}]},
               {lists,foldl,3,[{file,"lists.erl"},{line,1197}]},
               {mochijson2,json_encode_proplist,2,

[{file,"src/mochijson2.erl"},{line,170}]}]}}
```


---

mochiweb+webmachine
web server





If I use the Java client over PBC to get the list, then there is no 
crash, but I can see that many of the bucket names look like garbage.

I'd guess that those were created by Riak CS?
Is that normal? It's a pity it breaks the HTTP interface.


buckets: java.util.Set[String] = [0o:����uT�?�p�B?�, 0b: ��J}��Ԭ����, 
0o:?i�!��?�?�/�.�, 0b:�^�?�e��?gl�'�|\_, moss.buckets, test-bucket, 
0o:�?TV�:X?�1�Y`�D�, 0o:H�?p�`��l�K�h?��, auth\_attr, 0o:s??���#�O� �, 
0o:���?�m�?�$w飋?, 0b:�?��I�7s C�d[\_4�, 0o:=�'=}?N�&?A f ??, 
0o:?bg���`c9� ??/I , 0b:�Ug���ǻ?7'?��3P, 0o:���TT��WP?��?֦, 1d:WebVal, 
0o:??�L?X�A���.ɝ�, 0b:�ݜ��l4�+؈�?�V�, 0o: H�v�R�K^?wu�H��, 1h:test, 
riak-cs-gc, 0b:� U�?!�ף?��R=?+, 0o:��K�a d���w�\_�zF, 0b:��@��8ۃ` ?w :��, 
0o:b��~��[fy��3?��, 0b:?��,�zS&lt;�`"|5J�?, 0b:?�i�� ?\_B�?§��,, 0o:��l�Q�鳾 
�~�%�, 0b:���q�u��k��1, 0b:���b���#?�hC�Ě%, 0o:��@��8ۃ` ?w :��, 
0b:-����-�?q�����, 0o:�?=u^��b�m�J���, 0o:���?��E?��?j9�`^, 
0o:?c�ZhRi��Z��`��?, 0o:V�U��\*:5VaG��?X�, 0o:��$��V���0?$�f, 
0o:|I��'�v�I]?MI-, 0o:v?vL� �d��M�M{, 0o:-����-�?q���...



\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

