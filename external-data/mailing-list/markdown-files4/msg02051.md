---
title: "Re: Search Indexing only specific content-types?"
description: ""
project: community
lastmod: 2011-01-21T19:12:02-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02051"
mailinglist_parent_id: "msg02048"
author_name: "Gary William Flake"
project_section: "mailinglistitem"
sent_date: 2011-01-21T19:12:02-08:00
---


I am new to all of this myself, so caveat emptor. However, I think know of at 
least two ways to do this. 

The first is to use two different buckets, but with the same key universe. One 
bucket is for the portion of the records that you want indexed, and the other 
is for everything else. Depending on the application, you may want there to be 
some duplication between the data that is stored, but this way you can insure 
that only the right bits are indexed. For example, I have an application where 
some source HTML is stored in one bucket (along with other fields that never 
change -- like creation date and source site), and another bucket stores the 
stuff that should be indexed and that also periodically changes (i.e., the text 
of the html that should be indexed and some user assigned tags).

The second approach is not one that I tried but is something that should work 
in principle. You could modify the precommit hooks to selectively index based 
on your criteria (in this case, MIME type).

-- GWF



On Jan 21, 2011, at 3:46 PM, Gordon Tillman wrote:

&gt; Howdy Folks,
&gt; 
&gt; Is there a way to configure Riak search so that only objects with certain 
&gt; content-types (e.g., application/json) are to be indexed?
&gt; 
&gt; I have installed a schema on a test bucket that contains field definitions 
&gt; for the (JSON) fields that I wish to have indexed. At then end I include a 
&gt; dynamic\_field definition that instructs search to skip everything else, like 
&gt; this:
&gt; 
&gt; %% anything left over is not indexed
&gt; {dynamic\_field, [
&gt; {name, "\*"},
&gt; {skip, true}
&gt; ]}
&gt; 
&gt; After populating my bucket with some test data and then dumping the contents 
&gt; of the corresponding index bucket (\_rsid\_test), I see that there are entries 
&gt; for every key that is in the test bucket, even for keys that correspond to 
&gt; objects that do not have a content-type of application/json and who do not 
&gt; contain any data that corresponds to one of the field definitions.
&gt; 
&gt; I would really like to avoid having any indexing information stored for 
&gt; objects that are not application/json. Is that possible?
&gt; 
&gt; Many thanks!
&gt; 
&gt; --gordon
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

