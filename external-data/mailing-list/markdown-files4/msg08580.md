---
title: "Re: What ever happened to delete support for post-commit hooks?"
description: ""
project: community
lastmod: 2012-09-17T22:16:17-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08580"
mailinglist_parent_id: "msg08577"
author_name: "Jon Meredith"
project_section: "mailinglistitem"
sent_date: 2012-09-17T22:16:17-07:00
---


That's odd. It should still be firing.

Are you seeing any increase in the postcommit\_fail stats? It may spew a
lot of logging at you, but you could enable debug logging to see if it is
being fired or not.

lager:set\_loglevel(lager\_file\_backend, "console.log", debug).


To reset back to info

lager:set\_loglevel(lager\_file\_backend, "console.log", info).


Please let us know what you find.

Jon.

On Mon, Sep 17, 2012 at 12:52 PM, David Goehrig  wrote:

&gt; Many moons ago (circa 0.14.0) when you did a curl -X DELETE to a riak
&gt; bucket with a post commit hook it would be invoked and you could use the
&gt; X-Riak-Deleted tag to process the file. I have just such a post commit
&gt; hook running on on a 0.14.0 build.
&gt;
&gt; We recently looked at upgrading to 1.2, but discovered that our post
&gt; commit hooks were no longer being fired at all on DELETE, only POST and
&gt; PUT. Looking through the offending bits of the code, it looks like the
&gt; entire hook invocation subsystem was rewritten since 0.14.0, but the
&gt; documentation wiki:
&gt; http://wiki.basho.com/Commit-Hooks.html#Post-Commit-Hooks
&gt;
&gt; Still states that:
&gt;
&gt; As with pre-commit hooks, deletes are considered writes so post-commit
&gt; hook functions will need to inspect object metadata for the presence of \*
&gt; X-Riak-Deleted\* to determine when a delete has occurred.
&gt;
&gt; Any idea why this would no longer be true?
&gt;
&gt; Dave
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
&gt;


-- 
Jon Meredith
Platform Engineering Manager
Basho Technologies, Inc.
jmered...@basho.com
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

