---
title: "Re: Yokozuna error during indexing"
description: ""
project: community
lastmod: 2014-11-21T14:16:00-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15203"
mailinglist_parent_id: "msg15200"
author_name: "Oleksiy Krivoshey"
project_section: "mailinglistitem"
sent_date: 2014-11-21T14:16:00-08:00
---


Got few results:

I don't see anything wrong with the first record, but the second record
mentions the key '/.Trash/MT03' which is not correct, the correct key that
exists in that bucket is

'/.Trash/MT03 348 plat frames'

(riak@127.0.0.1)1&gt; redbug:start("yz\_solr:to\_pair -&gt; return", [{time,
600000}]).
{3243,1}

00:09:05 &lt;0.5058.0&gt;(dead) {yz\_solr,to\_pair,
 [{struct,
 [{&lt;&lt;"vsn"&gt;&gt;,&lt;&lt;"1"&gt;&gt;},
 {&lt;&lt;"riak\_bucket\_type"&gt;&gt;,&lt;&lt;"fs\_files"&gt;&gt;},
 {&lt;&lt;"riak\_bucket\_name"&gt;&gt;,

 &lt;&lt;"0fnn2pklvjm5bz37xmlkaxl8k0v0wmrc.files"&gt;&gt;},
 {&lt;&lt;"riak\_key"&gt;&gt;,&lt;&lt;"/aaa/bbb"&gt;&gt;},
 {&lt;&lt;"base64\_hash"&gt;&gt;,&lt;&lt;"g2IC6J4E"&gt;&gt;}]}]}

00:09:05 &lt;0.5058.0&gt;(dead) yz\_solr:to\_pair/1 -&gt; {{{&lt;&lt;"fs\_files"&gt;&gt;,

&lt;&lt;"0fnn2pklvjm5bz37xmlkaxl8k0v0wmrc.files"&gt;&gt;},
 &lt;&lt;"/aaa/bbb"&gt;&gt;},
 &lt;&lt;131,98,2,232,158,4&gt;&gt;}

00:09:05 &lt;0.5058.0&gt;(dead) {yz\_solr,to\_pair,
 [{struct,
 [{&lt;&lt;"vsn"&gt;&gt;,&lt;&lt;"1"&gt;&gt;},
 {&lt;&lt;"riak\_bucket\_type"&gt;&gt;,&lt;&lt;"fs\_files"&gt;&gt;},
 {&lt;&lt;"riak\_bucket\_name"&gt;&gt;,

 &lt;&lt;"abtiuxzzzcyr6y6cat3fgvfuaff9veot.files"&gt;&gt;},
 {&lt;&lt;"riak\_key"&gt;&gt;,&lt;&lt;"/.Trash/MT03"&gt;&gt;},
 {&lt;&lt;"base64\_hash"&gt;&gt;,&lt;&lt;"348"&gt;&gt;}]}]}

00:09:05 &lt;0.5058.0&gt;(dead) yz\_solr:to\_pair/1 -&gt; {error,{badmatch,false}}



On 21 November 2014 22:34, Oleksiy Krivoshey  wrote:

&gt; I have really basic Erlang knowledge (just a few m/r tasks for Riak). But
&gt; I definitely would like to try. Give me some information to so that I can
&gt; start please. Btw, I also have the same problem on my local application
&gt; setup (on a laptop) with a single Riak node.
&gt;
&gt; On 21 November 2014 22:30, Ryan Zezeski  wrote:
&gt;
&gt;&gt;
&gt;&gt; Oleksiy Krivoshey writes:
&gt;&gt;
&gt;&gt; &gt;
&gt;&gt; &gt; ================================ Entropy Trees
&gt;&gt; &gt; ================================
&gt;&gt; &gt; Index Built (ago)
&gt;&gt; &gt;
&gt;&gt; -------------------------------------------------------------------------------
&gt;&gt; &gt; 11417981541647679048466287755595961091061972992 --
&gt;&gt; &gt; 57089907708238395242331438777979805455309864960 --
&gt;&gt; &gt; 102761833874829111436196589800363649819557756928 --
&gt;&gt; &gt; 148433760041419827630061740822747494183805648896 --
&gt;&gt; &gt; 194105686208010543823926891845131338548053540864 10.4 hr
&gt;&gt; &gt; 239777612374601260017792042867515182912301432832 --
&gt;&gt; &gt; 285449538541191976211657193889899027276549324800 --
&gt;&gt; &gt; 650824947873917705762578402068969782190532460544 --
&gt;&gt; &gt; 696496874040508421956443553091353626554780352512 --
&gt;&gt; &gt; 742168800207099138150308704113737470919028244480 --
&gt;&gt; &gt; 787840726373689854344173855136121315283276136448 --
&gt;&gt; &gt; 833512652540280570538039006158505159647524028416 --
&gt;&gt; &gt; 879184578706871286731904157180889004011771920384 --
&gt;&gt; &gt; 924856504873462002925769308203272848376019812352 --
&gt;&gt; &gt; 970528431040052719119634459225656692740267704320 --
&gt;&gt; &gt; 1016200357206643435313499610248040537104515596288 --
&gt;&gt; &gt; 1061872283373234151507364761270424381468763488256 9.4 hr
&gt;&gt; &gt; 1107544209539824867701229912292808225833011380224 --
&gt;&gt; &gt; 1153216135706415583895095063315192070197259272192 --
&gt;&gt; &gt; 1198888061873006300088960214337575914561507164160 12.1 hr
&gt;&gt; &gt; 1244559988039597016282825365359959758925755056128 --
&gt;&gt; &gt; 1290231914206187732476690516382343603290002948096 --
&gt;&gt; &gt; 1335903840372778448670555667404727447654250840064 11.4 hr
&gt;&gt; &gt; 1381575766539369164864420818427111292018498732032 --
&gt;&gt; &gt; 1427247692705959881058285969449495136382746624000 --
&gt;&gt; &gt;
&gt;&gt;
&gt;&gt; So it seems many of these trees are not building because of this issue.
&gt;&gt; The system will keep trying to build but it will fail every time because
&gt;&gt; of the bad base64 string. Trying to catch this with redbug will prove
&gt;&gt; difficult too because it automatically shuts itself off after X events.
&gt;&gt; That can be changed but then you have to dig through a mountain of
&gt;&gt; output. Not a fun way to do things.
&gt;&gt;
&gt;&gt; How comfortable are you with Erlang/Riak? Enough to write a bit of code
&gt;&gt; and hot-load it into your cluster?
&gt;&gt;
&gt;&gt; -Z
&gt;&gt;
&gt;
&gt;
&gt;
&gt; --
&gt; Oleksiy Krivoshey
&gt;



-- 
Oleksiy Krivoshey
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

