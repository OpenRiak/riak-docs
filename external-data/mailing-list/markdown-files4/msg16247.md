---
title: "Re: Riak crashing until I delete AEE folders"
description: ""
project: community
lastmod: 2015-06-15T10:58:49-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16247"
mailinglist_parent_id: "msg16246"
author_name: "Alex De la rosa"
project_section: "mailinglistitem"
sent_date: 2015-06-15T10:58:49-07:00
---


Hi Bryan,

Yeah, 2.0.1 is an old one. I normally use 2.1.1 on my own developments but
this exact one was for an in-house company competition they run last august
so I was not able to touch the implementation until the competition was
over last month (of course, my solution kicked everybody's else asses and
won!... lol)

Is also funny that after months of testing and competition the indexes had
to crash exactly when the competition was over! I remember about all issues
with AAE so I first upgraded to 2.1.1 to see if it would be fixed but
continued crashing; so as final resort I decided to delete the AAE folders
and it was back to normal (so far it didn't crash again until now)

However I was wondering why happened; seems clear now! and good to know I
don't have to worry about it in future releases : )

Thanks again for your help!
Alex

On Mon, Jun 15, 2015 at 7:36 PM, bryan hunt  wrote:

&gt; Hi Alex,
&gt;
&gt; Yes, I see the error messages, such as this:
&gt;
&gt; 2015-06-14 22:21:13.005 [error] emulator Error in process &lt;0.20175.11&gt; on
&gt; node ‘riak@x.x.x.x' with exit value:
&gt; {function\_clause,[{proplists,get\_value,[n\_val,{error,no\_type},undefined],[{file,"proplists.erl"},{line,225}]},{riak\_kv\_util,get\_index\_n,1,[{file,"src/riak\_kv\_util.erl"},{line,190}]},{yz\_index\_hashtree,'-fold\_keys/2-fun-0-'...
&gt;
&gt; It’s an old bug, a race condition related to the creation and activation
&gt; of bucket types.
&gt; https://github.com/basho/riak\_kv/issues/872
&gt;
&gt; It was fixed in the following commit, although it doesn’t have seem to
&gt; have made it into your 2.0.1 build.
&gt;
&gt;
&gt; https://github.com/basho/riak\_test/commit/7cd264556498a8e6ebdf1f383f5d59fbaecf7f0a?diff=split
&gt;
&gt; 2.0.1 is way, way, old. I’d recommend a jump to 2.0.6, it’s a much more
&gt; stable release, or 2.1.1 for the latest hotness.
&gt;
&gt; Best Regards,
&gt;
&gt; Bryan Hunt
&gt;
&gt;
&gt;
&gt;
&gt; On 15 Jun 2015, at 17:25, Alex De la rosa  wrote:
&gt;
&gt; Hi Bryan
&gt;
&gt; Thanks for your help : )
&gt;
&gt; Here you have the /var/logs/folder in a zip file.
&gt;
&gt; I was using Ubuntu 14.04 LTS, just 1 node with 3 replicas (not the best,
&gt; but just for testing purposes).
&gt;
&gt; I was curious on why deleting the AAE subfolders fixed it, and wondered if
&gt; in the future i found something similar if that could be a solution... but
&gt; what if you have massive amount of data, nodes, etc... would this be viable?
&gt;
&gt; Thanks!
&gt; Alex
&gt;
&gt; On Mon, Jun 15, 2015 at 5:12 PM, bryan hunt  wrote:
&gt;
&gt;&gt; Hi Alex,
&gt;&gt;
&gt;&gt; Slight confusion in the last response. Just zip up the log files from
&gt;&gt; that node and email them directly to me.
&gt;&gt;
&gt;&gt; We’ll take a look.
&gt;&gt;
&gt;&gt; B
&gt;&gt;
&gt;&gt; &gt; On 15 Jun 2015, at 15:50, Matthew Brender  wrote:
&gt;&gt; &gt;
&gt;&gt; &gt; Hey Alex,
&gt;&gt; &gt;
&gt;&gt; &gt; The best place to start on troubleshooting behaviors like the one you
&gt;&gt; &gt; saw is to run `riak-debug`, which is in `/bin`. There's a great deal
&gt;&gt; &gt; of data in there which you could upload to a Gist [1] and share with
&gt;&gt; &gt; us.
&gt;&gt; &gt;
&gt;&gt; &gt; [1] https://gist.github.com/
&gt;&gt; &gt;
&gt;&gt; &gt; Best,
&gt;&gt; &gt; Matt
&gt;&gt; &gt;
&gt;&gt; &gt; Developer Advocacy Lead
&gt;&gt; &gt; Basho Technologies
&gt;&gt; &gt; t: @mjbrender
&gt;&gt; &gt;
&gt;&gt; &gt; On Sun, Jun 14, 2015 at 3:52 AM, Alex De la rosa
&gt;&gt; &gt;  wrote:
&gt;&gt; &gt;&gt; My riak node (i was doing some tests with Riak 2.0.0-1 in Ubuntu
&gt;&gt; having just
&gt;&gt; &gt;&gt; 1 node) and after some time, out of a sudden started crashing and even
&gt;&gt; if i
&gt;&gt; &gt;&gt; start it again, it hold running only a few seconds before crashing
&gt;&gt; again.
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; Then I deleted the AEE folders within "anti\_entropy" and
&gt;&gt; "yz\_anti\_entropy"
&gt;&gt; &gt;&gt; and is working fine again... I would like to know the reason for that
&gt;&gt; : )
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; Thanks,
&gt;&gt; &gt;&gt; Alex
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; &gt;&gt; riak-users mailing list
&gt;&gt; &gt;&gt; riak-users@lists.basho.com
&gt;&gt; &gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;
&gt;&gt; &gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; &gt; riak-users mailing list
&gt;&gt; &gt; riak-users@lists.basho.com
&gt;&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;
&gt;&gt;
&gt; 
&gt;
&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

