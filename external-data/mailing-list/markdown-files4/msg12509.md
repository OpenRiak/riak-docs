---
title: "Re: OSX Riak 1.4 Internal Server Error on all map reduce jobs"
description: ""
project: community
lastmod: 2013-10-03T14:41:01-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12509"
mailinglist_parent_id: "msg12481"
author_name: "Luke Bakken"
project_section: "mailinglistitem"
sent_date: 2013-10-03T14:41:01-07:00
---


Homebrew installed Riak will use the Erlang located in this directory:

/usr/local/Cellar/riak/1.4.2/erts-5.9.1/bin/erl

Could you retry the code snippet using the erl located there? Also, the
output of which -a erl could be useful. I think you should uninstall your
homebrew-installed Erlang as it's a more recent version than the one
installed via homebrew for Riak. Personally I use kerl to manage Erlang
versions instead of homebrew.

Thanks
--
Luke Bakken
CSE
lbak...@basho.com


On Wed, Oct 2, 2013 at 7:25 PM, jeffrey k eliasen  wrote:

&gt; Thanks for looking into this!
&gt;
&gt; Same machine:
&gt;
&gt; escorpiao:programming\_in\_c seawolf$ date
&gt; Thu Oct 3 10:22:31 BNT 2013
&gt; escorpiao:programming\_in\_c seawolf$ erl
&gt; Erlang R16B01 (erts-5.10.2) [source] [64-bit] [smp:4:4] [async-threads:10]
&gt; [hipe] [kernel-poll:false] [dtrace]
&gt;
&gt; Eshell V5.10.2 (abort with ^G)
&gt; 1&gt; erlang:localtime\_to\_universaltime({{2013,9,28},{8,0,35}}, true).
&gt; {{2013,9,28},{0,0,35}}
&gt; 2&gt; q().
&gt; ok
&gt; escorpiao:programming\_in\_c seawolf$
&gt;
&gt; How do I know for sure that I'm using the same Erlang binary as Riak is? I
&gt; installed it via Homebrew and don't know off the top of my head how to
&gt; verify which Erlang it's picking up (or if I even have more than one).
&gt;
&gt; --
&gt;
&gt; jeffrey k eliasen
&gt;
&gt; Find and follow me on:
&gt; Blog: http://jeff.jke.net
&gt; Twitter: http://twitter.com/jeffreyeliasen
&gt; Facebook: http://facebook.com/jeffrey.eliasen
&gt;
&gt; On Oct 2, 2013, at 23:44 , Luke Bakken  wrote:
&gt;
&gt; Hi Jeff,
&gt;
&gt; Can you provide the output of the date command on the machine where Riak
&gt; is running as well as the one from which you're running curl? I'm
&gt; assuming it's the same workstation, but I'd like to be sure.
&gt;
&gt; Based on the stack traces you provide, the localtime\_to\_universaltimefunction 
&gt; is failing when called with
&gt; [{{2013,9,28},{8,0,35}},true] as the arguments, which really doesn't make
&gt; sense.
&gt;
&gt; Could you run that method via the erl command in the Erlang build used by
&gt; your Riak installation? I have built Riak from source so erl is in the
&gt; erts-5.9.1/bin directory, for instance:
&gt;
&gt; lbakken ~/Projects/basho/riak\_ee-1.4/dev/dev1/erts-5.9.1/bin
&gt; ((riak\_ee-1.4.2))
&gt; $ ./erl
&gt; Erlang R15B01 (erts-5.9.1) [source] [64-bit] [smp:8:8] [async-threads:0]
&gt; [kernel-poll:false]
&gt;
&gt; Eshell V5.9.1 (abort with ^G)
&gt; 1&gt; erlang:localtime\_to\_universaltime({{2013,9,28},{8,0,35}}, true).
&gt; {{2013,9,28},{15,0,35}}
&gt; 2&gt; q().
&gt; ok
&gt;
&gt; --
&gt; Luke Bakken
&gt; CSE
&gt; lbak...@basho.com
&gt;
&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

