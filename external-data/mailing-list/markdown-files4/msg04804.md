---
title: "Re: Dropping a search index"
description: ""
project: community
lastmod: 2011-09-20T12:20:03-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg04804"
mailinglist_parent_id: "msg04794"
author_name: "Elias Levy"
project_section: "mailinglistitem"
sent_date: 2011-09-20T12:20:03-07:00
---


On Tue, Sep 20, 2011 at 7:01 AM, Ryan Zezeski  wrote:

&gt; Index entries are removed by the Search hook during object deletion. It
&gt; sounds like you removed the Search hook, then removed the objects, and now
&gt; you have entires in your Search index for non-existing objects. If you
&gt; don't care about losing \*\*all\*\* of your indexes then you should be able to
&gt; take the cluster down, delete all the `data/merge\_index` dirs, and then
&gt; restart the cluster. At that point all your objects should be in tact but
&gt; the indexes should be gone. It's important that you take the cluster down
&gt; for this to work as merge\_index keeps some data in memory that can survive.
&gt;
&gt;

Ryan,

Thanks. Yes, this is what I ended up doing. That said, I think being able
to drop an index without deleting all other indexes or deleting your objects
from the KV store, should be a basic operations feature. I created an
enhancement request for it.


&gt; If you know the object ids then you could delete only the necessary indexes
&gt; via a small bit of Erlang at the riak console via `search:delete\_docs/1`.
&gt;
&gt; search:delete\_docs([{&lt;&lt;"bucket"&gt;&gt;, &lt;&lt;"key1"&gt;&gt;}, ...])
&gt;

That may come in handy. Thanks.

Elias Levy
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

