---
title: "Re: Question about counters"
description: ""
project: community
lastmod: 2014-07-01T06:25:34-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14434"
mailinglist_parent_id: "msg14431"
author_name: "Luke Bakken"
project_section: "mailinglistitem"
sent_date: 2014-07-01T06:25:34-07:00
---


Hi Alex,

Search in Riak 2.0 does require a JVM to be installed as you found.

create\_search\_index is part of the master branch of the Python client:

lbakken ~/Projects/basho/riak-python-client (master=)
$ git grep create\_search\_index
riak/client/operations.py:461: def create\_search\_index(self, transport,
index, schema=None, n\_val=None):

Could you make a clone of the git repository and use the code from there?

https://github.com/basho/riak-python-client

--
Luke Bakken
CSE
lbak...@basho.com


On Tue, Jul 1, 2014 at 2:10 AM, Alex De la rosa 
wrote:

&gt; I found out on http://docs.basho.com/riak/2.0.0beta1/dev/using/search
&gt; that in Riak 2.0 additional steps are needed... i fixed my code as follows,
&gt; but still crashing:
&gt;
&gt; -----+-----+-----+-----+-----+-----+-----+-----+-----+-----+
&gt; -----+-----+-----+-----+-----
&gt; import riak
&gt; client = riak.RiakClient(protocol='pbc',
&gt; nodes=[{'host':'127.0.0.1','http\_port':8098,'pb\_port':8087}])
&gt; client.create\_search\_index('men') # NEW: Creating a search index
&gt; bucket = client.bucket('accounts')
&gt; bucket.enable\_search()
&gt; bucket.set\_property('search\_index', 'men') # NEW: Setting the search index
&gt; to the bucket
&gt; key = bucket.new('alex', data={"username":"Alex","age":25,"sex":"male"},
&gt; content\_type='application/json')
&gt; key.store()
&gt; print bucket.search('sex=male')
&gt;
&gt; -----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----
&gt;
&gt; this time seems the Python client is not fully updated again and missing
&gt; functionality (like "counters"):
&gt;
&gt;
&gt; -----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----
&gt; Traceback (most recent call last):
&gt; File "test.py", line 3, in 
&gt; client.create\_search\_index('men')
&gt; AttributeError: 'RiakClient' object has no attribute 'create\_search\_index'
&gt;
&gt; -----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----
&gt;
&gt; Is a problem of the Python client? Or there is something wrong on my code?
&gt; When will it be a Python client update solving all these issues? is a bit
&gt; frustrating wanting to try the features and see you can not do it because
&gt; the client is not fully operational.
&gt;
&gt; Cheers,
&gt; Alex
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

