---
title: "Re: Error starting riak server"
description: ""
project: community
lastmod: 2014-05-20T10:08:19-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14248"
mailinglist_parent_id: "msg14245"
author_name: "bryan hunt"
project_section: "mailinglistitem"
sent_date: 2014-05-20T10:08:19-07:00
---


Rachana,

I recently had a similar problem. I solved it with the following.

On Ubuntu 12.04 I ran the following commands to compile and install Erlang from 
source.

sudo apt-get install libssl-dev
./configure --enable-m64-build
sudo make install

Now rebar runs without any problem.

I believe on Redhat variants the equivalent commands would be 

sudo yum install openssl-devel 
./configure --enable-m64-build
sudo make install

Regards,

Bryan

On 20 May 2014, at 17:06, Hector Castro  wrote:

&gt; Rachana,
&gt; 
&gt; This appears to be an issue with how the Erlang you are trying to run
&gt; was built. It looks like it did not build with OpenSSL support. Please
&gt; ensure that the `openssl-devel` package is installed before
&gt; recompiling Erlang.
&gt; 
&gt; --
&gt; Hector
&gt; 
&gt; 
&gt; On Tue, May 20, 2014 at 8:08 AM, Rachana Shroff  wrote:
&gt;&gt; Hi Hector,
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; I installed R16B02 as you suggested but still not working. Ending up with
&gt;&gt; below error message-
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; I have OTP 17 installed which is I guess overwriting R16B02. If yes, could
&gt;&gt; you please tell me steps to uninstalled it? I didnâ€™t find any such
&gt;&gt; uninstalling file.
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; If you can send me steps to follow from scratch to run basho-bench, that
&gt;&gt; would be great.
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; [root@fdxrhel6142 riak-1.4.8]# cd basho\_bench/
&gt;&gt; 
&gt;&gt; [root@fdxrhel6142 basho\_bench]# make all
&gt;&gt; 
&gt;&gt; ls: cannot access tests/: No such file or directory
&gt;&gt; 
&gt;&gt; ./rebar get-deps
&gt;&gt; 
&gt;&gt; Uncaught error in rebar\_core: {'EXIT',
&gt;&gt; 
&gt;&gt; {undef,
&gt;&gt; 
&gt;&gt; [{crypto,start,[],[]},
&gt;&gt; 
&gt;&gt; {rebar,run\_aux,2,[]},
&gt;&gt; 
&gt;&gt; {rebar,main,1,[]},
&gt;&gt; 
&gt;&gt; {escript,run,2,
&gt;&gt; 
&gt;&gt; [{file,"escript.erl"},{line,747}]},
&gt;&gt; 
&gt;&gt; {escript,start,1,
&gt;&gt; 
&gt;&gt; [{file,"escript.erl"},{line,277}]},
&gt;&gt; 
&gt;&gt; {init,start\_it,1,[]},
&gt;&gt; 
&gt;&gt; {init,start\_em,1,[]}]}}
&gt;&gt; 
&gt;&gt; make: \*\*\* [deps] Error 1
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; Thanks,
&gt;&gt; 
&gt;&gt; Rachana
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; From: Rachana Shroff [mailto:rshr...@tibco.com]
&gt;&gt; Sent: Tuesday, May 20, 2014 9:40 AM
&gt;&gt; To: Hector Castro
&gt;&gt; Cc: riak-users
&gt;&gt; Subject: Re: Error starting riak server
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; Hi Hector,
&gt;&gt; 
&gt;&gt; Thanks for prompt reply.
&gt;&gt; 
&gt;&gt; I would try installing R16B02 and check if things works.
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; IMT, could you please let me know any quick point of contact where i can
&gt;&gt; consult and get solution right away?
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; Thanks,
&gt;&gt; 
&gt;&gt; Rachana
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; On Tue, May 20, 2014 at 12:13 AM, Hector Castro  wrote:
&gt;&gt; 
&gt;&gt; Rachana,
&gt;&gt; 
&gt;&gt; What version of Erlang are you trying to build with? I do not think
&gt;&gt; that basho\_bench has support for OTP 17.
&gt;&gt; 
&gt;&gt; I built basho\_bench successfully with R16B02.
&gt;&gt; 
&gt;&gt; --
&gt;&gt; Hector
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; On Mon, May 19, 2014 at 5:23 AM, Rachana Shroff  wrote:
&gt;&gt;&gt; Hi Brian, Hector,
&gt;&gt;&gt; 
&gt;&gt;&gt; I want to run the riak benchmark tests and following below steps and stuck
&gt;&gt;&gt; at error below-
&gt;&gt;&gt; 
&gt;&gt;&gt; $ git clone git://github.com/basho/basho\_bench.git
&gt;&gt;&gt; $ cd basho\_bench
&gt;&gt;&gt; $ make [also tried make all]
&gt;&gt;&gt; 
&gt;&gt;&gt; I am hitting below error -
&gt;&gt;&gt; 
&gt;&gt;&gt; ERROR: compile failed while processing
&gt;&gt;&gt; /home/apps/AS/riak-1.4.8/basho\_bench/deps/riakc: rebar\_abort
&gt;&gt;&gt; make: \*\*\* [compile] Error 1
&gt;&gt;&gt; 
&gt;&gt;&gt; Could you please help me with some pointers to be try out?
&gt;&gt;&gt; 
&gt;&gt;&gt; Also based on this i have few queries like what kind od schema is been
&gt;&gt;&gt; used
&gt;&gt;&gt; in benchmarking, are there any multi-threadig feature enabled, can
&gt;&gt;&gt; multiple
&gt;&gt;&gt; clients be launched at same time, Is there any batch enabled on to and fro
&gt;&gt;&gt; data from cache?
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; Appreciate quick help.
&gt;&gt;&gt; 
&gt;&gt;&gt; Thanks,
&gt;&gt;&gt; Rachana
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; On Thu, May 15, 2014 at 4:02 PM, Rachana Shroff  wrote:
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; Hi Hector, Brian:
&gt;&gt;&gt;&gt; Thanks for your quick response and sorry couldn't get back to you.
&gt;&gt;&gt;&gt; I did installation using rpm earlier but didn't worked for me. So went
&gt;&gt;&gt;&gt; for
&gt;&gt;&gt;&gt; source installation.
&gt;&gt;&gt;&gt; Anyways, i did installation again using rpm and it worked.
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; I wanted to run the benchmark bundled with it.
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; Currently i am exploring this and would get back to you for any issues
&gt;&gt;&gt;&gt; running same.
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; Thanks & Regards,
&gt;&gt;&gt;&gt; Rachana
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; On Sat, May 10, 2014 at 12:31 AM, Brian Roach  wrote:
&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt; Looking at your logs, they all show:
&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt; Error loading "erlang\_js\_drv": "Driver compiled with incorrect version
&gt;&gt;&gt;&gt;&gt; of erl\_driver.h"
&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt; In your post you say you installed:
&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt; "Erlang - First otp\_src\_R14B02 and then otp\_src\_R15B01"
&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt; More than likely you've compiled Riak with the old version or erlang.
&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt; As Hector mentioned, you may want to use an RPM rather than building
&gt;&gt;&gt;&gt;&gt; from source. You also want to remove R14B02 or at the very least make
&gt;&gt;&gt;&gt;&gt; sure it's not in your path.
&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt; - Roach
&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt; On Fri, May 9, 2014 at 10:39 AM, Hector Castro  wrote:
&gt;&gt;&gt;&gt;&gt;&gt; Hi Rachana,
&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt; Is there any reason why you didn't elect to install via RPM? [0] That
&gt;&gt;&gt;&gt;&gt;&gt; path may be easier to get started with than compiling Erlang and Riak
&gt;&gt;&gt;&gt;&gt;&gt; from source, as we bundle Erlang into the RPM.
&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt; --
&gt;&gt;&gt;&gt;&gt;&gt; Hector
&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt; [0]
&gt;&gt;&gt;&gt;&gt;&gt; http://docs.basho.com/riak/latest/ops/building/installing/rhel-centos/
&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt; On Fri, May 9, 2014 at 5:47 AM, Rachana Shroff 
&gt;&gt;&gt;&gt;&gt;&gt; wrote:
&gt;&gt;&gt;&gt;&gt;&gt;&gt; Hi,
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; I am exploring Riak 1.4.8 and facing issue starting riak server.
&gt;&gt;&gt;&gt;&gt;&gt;&gt; Additional details are-
&gt;&gt;&gt;&gt;&gt;&gt;&gt; OS - Linux
&gt;&gt;&gt;&gt;&gt;&gt;&gt; Red Hat Enterprise Linux Server release 6.1 (Santiago)
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 2.6.32-131.0.15.el6.x86\_64
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; Erlang - First otp\_src\_R14B02 and then otp\_src\_R15B01
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; I followed all installations steps from
&gt;&gt;&gt;&gt;&gt;&gt;&gt; http://docs.basho.com/riak/1.3.0/tutorials/installation
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; steps used for Erlang-
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; wget http://erlang.org/download/otp\_src\_R15B01.tar.gz
&gt;&gt;&gt;&gt;&gt;&gt;&gt; tar zxvf otp\_src\_R15B01.tar.gz
&gt;&gt;&gt;&gt;&gt;&gt;&gt; cd otp\_src\_R15B01
&gt;&gt;&gt;&gt;&gt;&gt;&gt; ./configure && make && sudo make install
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; steps used for Riak-
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; tar zxvf riak-1.4.8.tar.gz
&gt;&gt;&gt;&gt;&gt;&gt;&gt; cd riak-1.4.8
&gt;&gt;&gt;&gt;&gt;&gt;&gt; make rel
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; After installation i am trying to start riak server but failing to do
&gt;&gt;&gt;&gt;&gt;&gt;&gt; so.
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; /../riak-1.4.8/rel/riak/bin&gt;riak start
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; Error Ouput - Node 'riak@127.0.0.1' not responding to pings.
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; I tried all the below workarounds suggested on the foroums but no
&gt;&gt;&gt;&gt;&gt;&gt;&gt; luck.
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 1-
&gt;&gt;&gt;&gt;&gt;&gt;&gt; ulimit -n
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 100000
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 2- change the ip to machine ip in vm.args and app.config.
&gt;&gt;&gt;&gt;&gt;&gt;&gt; riak stop # stop the node
&gt;&gt;&gt;&gt;&gt;&gt;&gt; riak-admin down riak@127.0.0.1 # take it down
&gt;&gt;&gt;&gt;&gt;&gt;&gt; sudo rm -rf /var/lib/riak/ring/\* # delete the riak ring
&gt;&gt;&gt;&gt;&gt;&gt;&gt; sudo sed -i "s/127.0.0.1/`hostname -i`/g" /etc/riak/vm.args # Change
&gt;&gt;&gt;&gt;&gt;&gt;&gt; the
&gt;&gt;&gt;&gt;&gt;&gt;&gt; name in config
&gt;&gt;&gt;&gt;&gt;&gt;&gt; riak-admin cluster force-replace riak@127.0.0.1 riak@"`hostname -i`"
&gt;&gt;&gt;&gt;&gt;&gt;&gt; #
&gt;&gt;&gt;&gt;&gt;&gt;&gt; replace the name
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; riak start # start the node
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 3- restart server
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; I have attached all log files.
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; Would appreciate your quick support on this.
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; Thanks & Regards,
&gt;&gt;&gt;&gt;&gt;&gt;&gt; Rachana
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt;&gt;&gt;&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt;&gt;&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt;&gt;&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt;&gt;&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt;&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt;&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

