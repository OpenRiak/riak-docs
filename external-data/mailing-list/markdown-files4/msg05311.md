---
title: "Re: Newline in Key Legal"
description: ""
project: community
lastmod: 2011-10-25T12:00:37-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05311"
mailinglist_parent_id: "msg05301"
author_name: "Jim Adler"
project_section: "mailinglistitem"
sent_date: 2011-10-25T12:00:37-07:00
---


Hi Bryan - Thanks for the info but no dice. app.config http\_url\_encoding
is "on" but the key shows as not found.

Anything else I can try?

Jim

On 10/25/11 8:26 AM, "Bryan Fink"  wrote:

&gt;On Tue, Oct 25, 2011 at 10:35 AM, Jim Adler  wrote:
&gt;&gt; Hi Bryan - I'm now running 1.0.1 but the keys were inserted under 0.14.
&gt;&gt; I
&gt;&gt; tried your test and it worked fine. So, maybe I'm caught between
&gt;&gt; inserting under an old version and now reading under another?
&gt;
&gt;It's possible that your upgraded nodes are operating in compatibility
&gt;mode wrt. key decoding, rather than using the 1.0 default behavior.
&gt;Look in the riak\_kv section of your app.config for the line:
&gt;
&gt; {http\_url\_encoding, on},
&gt;
&gt;If that's missing or set to 'compat' instead of 'on', then asking for
&gt;"foo%0Abar" over HTTP will attempt to look up "foo%0Abar", not
&gt;"foo\nbar". There are two ways to access this key in 1.0, one
&gt;request-level the other global.
&gt;
&gt;The request-level path is to use the X-Riak-URL-Encoding header:
&gt;
&gt; curl -H "X-Riak-URL-Encoding:on" http://.../foo%0Abar
&gt;
&gt;That will enable the 1.0 decoding behavior for just that request.
&gt;
&gt;The global path is to alter the aforementioned setting in your
&gt;app.config and bounce the node. Note that if you had any keys with
&gt;percent signs or other invalid URL characters in them, though, you'll
&gt;now have to encode those keys when requesting them (this is the reason
&gt;for leaving upgraded nodes in 'compat' mode by default).
&gt;
&gt;-Bryan



\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

