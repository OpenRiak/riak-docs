---
title: "Re: Riak 1.3.1 install from source on closed network"
description: ""
project: community
lastmod: 2013-04-15T14:41:45-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg10894"
mailinglist_parent_id: "msg10889"
author_name: "Hector Castro"
project_section: "mailinglistitem"
sent_date: 2013-04-15T14:41:45-07:00
---


Hi Peter,

Despite the fact that the instructions assume you're working with Riak
1.3.0, please follow the "Installation on Closed Networks" section on
the installing Riak from source page [0]. The steps there, combined
with Jared's instructions to alter line 79 of Makefile [1] so that it
reads:

 dev% : riaknostic

instead of:

 dev% : all riaknostic

should allow you to successfully complete an installation without a
network connection (after downloading the 1.3.0 zipball for LevelDB).

Please let us know if you encounter further issues.

[0] 
http://docs.basho.com/riak/1.3.0/tutorials/installation/Installing-Riak-from-Source/#Installation
[1] https://github.com/basho/riak/blob/riak-1.3.1/Makefile#L79

--
Hector


On Mon, Apr 15, 2013 at 9:28 AM, HARLOW Peter
 wrote:
&gt; From: Jared Morrow [mailto:ja...@basho.com]
&gt; Sent: Monday, April 15, 2013 2:10 PM
&gt;
&gt;
&gt; To: HARLOW Peter
&gt; Cc: riak-users@lists.basho.com
&gt; Subject: Re: Riak 1.3.1 install from source on closed network
&gt;
&gt;
&gt;
&gt; Peter,
&gt;
&gt; I see where you hit your problem. In the 'make devrel' step it did try to go
&gt; out to the network to re-clone all of the dependencies. To fix this, simply
&gt; change this line in the Makefile:
&gt; https://github.com/basho/riak/blob/riak-1.3.1/Makefile#L79 from
&gt;
&gt; dev% : all riaknostic
&gt;
&gt; to
&gt;
&gt; dev% : riaknostic
&gt;
&gt; Remove the 'dev' directory to make sure everything is clean and try to run
&gt; 'make devrel' again.
&gt;
&gt; Let me know how that goes.
&gt;
&gt; A devrel directory didn't seem to get generated - but I unpacked a new
&gt; source tree to be sure.
&gt;
&gt;
&gt;
&gt; Unfortunately there was no change.
&gt;
&gt;
&gt;
&gt; Make all completed, but make devrel produced the same errors as before.
&gt;
&gt;
&gt;
&gt; Regards,
&gt;
&gt;
&gt;
&gt;
&gt;
&gt; Peter Harlow
&gt;
&gt; Systems Engineer
&gt;
&gt; Thales Communications & Security S.A
&gt;
&gt; T&S-Billetique/Projets & Systemes/I&A
&gt;
&gt; Rue de la Mare aux Joncs
&gt;
&gt; 91229 Bretigny sur Orge Cedex
&gt;
&gt; Tel: +33 (0) 1 69 88 59 41
&gt;
&gt; Fax: +33 (0)1 69 88 57 35
&gt;
&gt; Email : peter.har...@thalesgroup.com
&gt;
&gt;
&gt;
&gt; From: Jared Morrow [mailto:ja...@basho.com]
&gt; Sent: Monday, April 15, 2013 2:10 PM
&gt;
&gt;
&gt; To: HARLOW Peter
&gt; Cc: riak-users@lists.basho.com
&gt; Subject: Re: Riak 1.3.1 install from source on closed network
&gt;
&gt;
&gt;
&gt; Peter,
&gt;
&gt; I see where you hit your problem. In the 'make devrel' step it did try to go
&gt; out to the network to re-clone all of the dependencies. To fix this, simply
&gt; change this line in the Makefile:
&gt; https://github.com/basho/riak/blob/riak-1.3.1/Makefile#L79 from
&gt;
&gt; dev% : all riaknostic
&gt;
&gt; to
&gt;
&gt; dev% : riaknostic
&gt;
&gt; Remove the 'dev' directory to make sure everything is clean and try to run
&gt; 'make devrel' again.
&gt;
&gt; Let me know how that goes.
&gt;
&gt; Sorry for the troubles,
&gt; Jared
&gt;
&gt;
&gt;
&gt;
&gt;
&gt; On Mon, Apr 15, 2013 at 3:25 AM, HARLOW Peter 
&gt; wrote:
&gt;
&gt; From: Jared Morrow [mailto:ja...@basho.com]
&gt; Sent: Friday, April 12, 2013 3:23 PM
&gt; To: HARLOW Peter
&gt; Cc: riak-users@lists.basho.com
&gt; Subject: Re: Riak 1.3.1 install from source on closed network
&gt;
&gt;
&gt;
&gt;&gt;Peter,
&gt;
&gt;
&gt;
&gt;&gt;For 1.3.0 & 1.3.1 of Riak, you use the "1.3.0" version of leveldb.
&gt;
&gt;
&gt;
&gt; Thanks, Jared.
&gt;
&gt;
&gt;
&gt; Unfortunately I am not getting very far with this. I can't find the
&gt; instructions I used with version 1.2.1, but copying the procedure from that
&gt; machine:
&gt;
&gt;
&gt;
&gt; tar -zxvf riak-1.3.1.tar.gz
&gt;
&gt; mv basho-leveldb-1.3.0-0-gdbb3e19.zip
&gt; riak-1.3.1/deps/eleveldb/c\_src/leveldb.zip
&gt;
&gt; cd riak-1.3.1/deps/eleveldb/c\_src/
&gt;
&gt; unzip leveldb.zip
&gt;
&gt; mv basho-leveldb-\* leveldb
&gt;
&gt; cd ../../../
&gt;
&gt; make all
&gt;
&gt; make devrel
&gt;
&gt;
&gt;
&gt; â€¦make all seems to run but make devrel finishes with the errors:
&gt;
&gt;
&gt;
&gt; make[1]: Entering directory `/home/riak/riak/riak-1.3.1/deps/riaknostic'
&gt;
&gt; ./rebar get-deps
&gt;
&gt; ==&gt; riaknostic (get-deps)
&gt;
&gt; Pulling lager from {git,"git://github.com/basho/lager",{tag,"1.2.2"}}
&gt;
&gt; fatal: Unable to look up github.com (port 9418) (Temporary failure in name
&gt; resolution)
&gt;
&gt; Initialized empty Git repository in
&gt; /home/riak/riak/riak-1.3.1/deps/riaknostic/deps/lager/.git/
&gt;
&gt; ERROR: git clone -n git://github.com/basho/lager lager failed with error:
&gt; 128 and output:
&gt;
&gt; fatal: Unable to look up github.com (port 9418) (Temporary failure in name
&gt; resolution)
&gt;
&gt; Initialized empty Git repository in
&gt; /home/riak/riak/riak-1.3.1/deps/riaknostic/deps/lager/.git/
&gt;
&gt;
&gt;
&gt; make[1]: \*\*\* [deps] Error 1
&gt;
&gt; make[1]: Leaving directory `/home/riak/riak/riak-1.3.1/deps/riaknostic'
&gt;
&gt; make: \*\*\* [riaknostic] Error 2
&gt;
&gt;
&gt;
&gt;
&gt;
&gt; OS: CentOS 6.4 64-bit
&gt;
&gt; Erlang: R15B01
&gt;
&gt;
&gt;
&gt; Regards,
&gt;
&gt;
&gt;
&gt; Peter Harlow
&gt;
&gt; Systems Engineer
&gt;
&gt; Thales Communications & Security S.A
&gt;
&gt; T&S-Billetique/Projets & Systemes/I&A
&gt;
&gt; Rue de la Mare aux Joncs
&gt;
&gt; 91229 Bretigny sur Orge Cedex
&gt;
&gt; Tel: +33 (0) 1 69 88 59 41
&gt;
&gt; Fax: +33 (0)1 69 88 57 35
&gt;
&gt; Email : peter.har...@thalesgroup.com
&gt;
&gt;
&gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

