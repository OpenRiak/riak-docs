---
title: "Re: A put is not put in Riak"
description: ""
project: community
lastmod: 2015-12-30T09:16:53-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16894"
mailinglist_parent_id: "msg16893"
author_name: "John Daily"
project_section: "mailinglistitem"
sent_date: 2015-12-30T09:16:53-08:00
---


This smells like a clock problem. Are you confident all of your serversâ€™ clocks 
are set to the same time?

Updates can be treacherous if clocks are not synchronized and multiple writes 
to the same key occur in a period of time short enough to fit within the clock 
skew.

I wrote about this after a similar question arose here: 
http://basho.com/posts/technical/clocks-are-bad-or-welcome-to-distributed-systems/

-John

&gt; On Dec 8, 2015, at 9:39 AM, Patrice Bruno  wrote:
&gt; 
&gt; Good-Evening everyone,
&gt; 
&gt; I'm reading this maling for minths now wioth great interest, and now we are 
&gt; using Riak, I have a question to not say an issue that I can not figure out.
&gt; 
&gt; We have migrated leveldb files from Riak 1.3.1 to Riak 2.1.1.
&gt; The clusters has 6 Nodes and 6 computers.
&gt; We are running now on CentOS Linux release 7.1.1503 (Core) (we were under 
&gt; Fedora when we are under Riak 1.3.1).
&gt; 
&gt; We have kept the default Riak paramaters. We are not using 'bucket\_type'. The 
&gt; only paramaters we have tuned are:
&gt; erlang.distribution\_buffer\_size = 128MB
&gt; erlang.async\_threads = 128
&gt; 
&gt; My issue is on a Bucket without sibling (default settings) I'm making a put 
&gt; and when I do the get the value has not been changed, and old value stayed 
&gt; under the key. So, I have made a test: I've made a put of an objet A, I can 
&gt; see in the precommit hook that it's well the object A, but in the postcommit 
&gt; the object (argument passed) is an old one.
&gt; I thought that I'm not sending the right object, but when I see it in 
&gt; precommit hook, I'm sure now that I send what I expect to send.
&gt; 
&gt; It's not for all the objects, but it appears time to time under load.
&gt; 
&gt; Do you already seen this issue ?
&gt; Do you have an idea or something I can enhance/tune ?
&gt; 
&gt; 
&gt; Help me mailing list, you are my only hope :-) (dixit Princess Leia).
&gt; 
&gt; -- 
&gt; 
&gt; Best Reagrds,
&gt; 
&gt; Patrice Bruno
&gt; Kuantic
&gt; ---
&gt; 
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

