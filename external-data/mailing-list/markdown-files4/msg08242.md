---
title: "Re: How to profile a cluster of Riak nodes"
description: ""
project: community
lastmod: 2012-08-09T09:12:54-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08242"
mailinglist_parent_id: "msg08240"
author_name: "Ryan Zezeski"
project_section: "mailinglistitem"
sent_date: 2012-08-09T09:12:54-07:00
---


Amir,

Are you using one node to run basho bench? If so, have you tried running
multiple basho bench instances on separate nodes (or tried other benchmark
tools)? There could be many reasons for your plateau but I would first
rule out that your not maxing out the basho bench instance or the node it
is running on.

It also would help to know the hardware, any modifications to your
app.config, and the basho bench config you are running.

As for profiling tools, everyone has there favorite but some that come to
mind:

1. boundary - We've had much success internally at Basho using Boundary to
view network traffic.

2. iostat - Run it continuously at 1s intervals and watch for spikes.

3. vmstat - Look for paging.

Finally, we've noticed that a lot of users run horrible OS settings such as
non-zero swappines and other such things which make a database server
unhappy. See this link: http://wiki.basho.com/LevelDB.html#Tuning-LevelDB

-Z

On Thu, Aug 9, 2012 at 10:32 AM, amir ghaffari wrote:

&gt; Hi there,
&gt;
&gt; I have done a scalability benchmark for Riak DBMS and we couldn't scale up
&gt; the throughput beyond 20 Riak nodes. The benchmarking with Basho\_Bench has
&gt; been run on a 31 node cluster and each node has its own hard disk but the
&gt; maximum throughput is on 20 nodes.
&gt;
&gt; I’d like to understand why Riak didn’t scale e.g. is it the connection, or
&gt; other network traffic. I’d like to use some profiling tools to get more
&gt; information. Please can you advise us a helpful profiling tool to use?
&gt;
&gt; Thanks in advance,
&gt;
&gt; Amir
&gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

