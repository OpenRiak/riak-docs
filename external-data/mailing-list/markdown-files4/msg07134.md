---
title: "Re: Alternative to Post-Commit in EDS"
description: ""
project: community
lastmod: 2012-04-04T09:21:06-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07134"
mailinglist_parent_id: "msg07132"
author_name: "Anthony Molinaro"
project_section: "mailinglistitem"
sent_date: 2012-04-04T09:21:06-07:00
---



On Wed, Apr 04, 2012 at 08:10:29AM -0600, Jon Meredith wrote:
&gt; Riak does have a last modified field, but it's last modified by client so
&gt; is deliberately left untouched on replication. Similarly the vclock is not
&gt; incremented either (the vclocks/siblings from both sides are resolved using
&gt; the two vclocks).

That's great, as I'd want to know on the far end when the client modified
it.

&gt; There are no obvious mechanisms for doing what you want currently. I'll
&gt; think about options and somebody will get back to you.

Is it not possible to use the last modified filed in a Map/Reduce? I've
not actually played with M/R in Riak yet (as I've only ever used it
previously as a Key/Value store). I'll try to dig into it a bit today
but I assumed I could do something to map over all records in a bucket
checking last modified, and return the set modified since a certain
time (or better yet put them in a rabbit queue to be consumed by my
systems which will cache the data).

Alternatively, I could maybe have a second bucket representing the changed
keys, where each time a key is changed in the primary bucket, I could
add an entry to the other bucket. I could then replicate that bucket
and just list keys on the remote side (maybe also deleting so subsequent
list keys only get changes, but then I think the replicator will replace
those keys, so I'd have to have some sort of bidirectional replication
for those buckets, sounds messy).

Anyway, hopefully someone will have an idea,

-Anthony

-- 
------------------------------------------------------------------------
Anthony Molinaro 

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

