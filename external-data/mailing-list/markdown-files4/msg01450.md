---
title: "Re: java client out of memory"
description: ""
project: community
lastmod: 2010-11-03T13:26:50-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01450"
mailinglist_parent_id: "msg01449"
author_name: "Andrea Campolonghi"
project_section: "mailinglistitem"
sent_date: 2010-11-03T13:26:50-07:00
---


Andy,

any more info about this?

Thanks

Andrea

2010/11/3 Andy Gross 

&gt;
&gt; Hi Andrea -
&gt;
&gt; It looks like you're trying to connect to the HTTP port with the protobufs
&gt; client. When I replace port 8098 with 8087 in this sample code, it works
&gt; fine.
&gt;
&gt; Hope that helps,
&gt;
&gt; Andy
&gt;
&gt; On Wed, Nov 3, 2010 at 12:50 PM, Andrea Campolonghi &lt;
&gt; acampolon...@gmail.com&gt; wrote:
&gt;
&gt;&gt; Hi,
&gt;&gt;
&gt;&gt; I am trying to use the riak-java-pb-client.
&gt;&gt; Sample very very basic code
&gt;&gt;
&gt;&gt; public static void main(String[] args) {
&gt;&gt; try{
&gt;&gt; RiakClient rc = new RiakClient("localhost",8098);
&gt;&gt; String bucket = "bucket";
&gt;&gt; String key = "key";
&gt;&gt; String val = "test";
&gt;&gt; RiakObject ro = new RiakObject(bucket,key,val);
&gt;&gt; rc.store(ro);
&gt;&gt;
&gt;&gt; RiakObject[] ros = rc.fetch(bucket, key);
&gt;&gt; for(RiakObject r : ros){
&gt;&gt; System.out.println(r.toString());
&gt;&gt; }
&gt;&gt;
&gt;&gt; }catch(IOException e){
&gt;&gt; e.printStackTrace();
&gt;&gt; }
&gt;&gt;
&gt;&gt;
&gt;&gt; Running this simple test code form eclipse rerquire at least 1.5 GB ram.
&gt;&gt; Lower than this I get an out of memory exception.
&gt;&gt;
&gt;&gt; While If I run the code with that huge memory I get this error:
&gt;&gt;
&gt;&gt; java.io.EOFException
&gt;&gt;
&gt;&gt; at java.io.DataInputStream.readFully(DataInputStream.java:180)
&gt;&gt;
&gt;&gt; at java.io.DataInputStream.readFully(DataInputStream.java:152)
&gt;&gt;
&gt;&gt; at com.trifork.riak.RiakConnection.receive(RiakConnection.java:89)
&gt;&gt;
&gt;&gt; at com.trifork.riak.RiakClient.store(RiakClient.java:384)
&gt;&gt;
&gt;&gt; at com.trifork.riak.RiakClient.store(RiakClient.java:363)
&gt;&gt;
&gt;&gt; at Runner.main(Runner.java:22)
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; Any suggestion???
&gt;&gt;
&gt;&gt;
&gt;&gt; Andrea
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; --
&gt;&gt; Andrea Campolonghi
&gt;&gt;
&gt;&gt; Cell : +39 347 2298435
&gt;&gt; and...@andreacfm.com
&gt;&gt; http://www.andreacfm.com
&gt;&gt;
&gt;&gt; Railo Team
&gt;&gt; and...@getrailo.org
&gt;&gt; http://getrailo.org
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;
&gt;&gt;
&gt;
&gt;
&gt;
&gt;


-- 
Andrea Campolonghi

Cell : +39 347 2298435
and...@andreacfm.com
http://www.andreacfm.com

Railo Team
and...@getrailo.org
http://getrailo.org
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

