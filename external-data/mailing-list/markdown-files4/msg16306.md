---
title: "Riak C example segmentation fault"
description: ""
project: community
lastmod: 2015-07-21T04:58:22-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16306"
author_name: "Tom Van Steenkiste"
project_section: "mailinglistitem"
sent_date: 2015-07-21T04:58:22-07:00
---


Dear all

 

I'm trying to interface a C application with a Riak cluster. To do this, I
have set up a small two node cluster with Riak to which I'm already able to
communicate with HTTP requests. My next step is trying to run the
riak-c-client  . However, there
are some problems with certain functions. If I execute the following
commands, the application never returns and gets stuck:

./riak\_c\_example --host hostname --port 8098 --server-info

./riak\_c\_example --host hostname --port 8098 --ping

 

These commands get stuck on the 'err = riak\_ping(cxn)' and the 'err =
riak\_serverinfo(cxn, &serverinfo\_response)' lines. However, when I execute
the following HTTP request, I get a perfect response:

curl http://hostname:8098/stats

curl http://hostname:8098/ping

If I try to put a key in the database via the c application, I get
segmentation faults. When executing the following command, I get a
segmentation fault upon execution of the line
'riak\_get\_response\_print(&print\_state, get\_response)'. 

./riak\_c\_example --host hostname --port 8098 --put --key "testKey" --value
"testValue" --bucket "testBucket"

The versions of the software I use are:

Riak 2.1.1 which runs on two CentOS 7 servers
OS of riak\_c\_example: Scientific Linux CERN SLC 6.6

gcc: 4.8.2 and 4.4.7 (tried both)

The configuration files all contain their default values, I only changed the
hostnames and restricted the ports with the following two lines as to not
have to open up the entire firewall:

 

erlang.distribution.port\_range.minimum = 6000
erlang.distribution.port\_range.maximum = 7000

 

If needed, I can give more information on the configuration. Do you have any
idea what might be the source of these problems and how to fix them?

Thank you in advance

Kind regards
Tom Van Steenkiste



\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

