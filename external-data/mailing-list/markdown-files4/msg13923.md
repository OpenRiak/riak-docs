---
title: "Re: link walking in the Riak 2.0 Ruby client?"
description: ""
project: community
lastmod: 2014-03-25T09:17:03-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13923"
mailinglist_parent_id: "msg13922"
author_name: "Paul Walk"
project_section: "mailinglistitem"
sent_date: 2014-03-25T09:17:03-07:00
---


Thanks Casey.

I had started to come to this realisation, although I am considering a slightly 
different approach of storing the links (as simple structured strings) in a set 
in a CRDT map object.

Thanks for the very useful response.

Cheers,

Paul

On 25 Mar 2014, at 16:08, Casey Rosenthal  wrote:

&gt; Hi Paul,
&gt; 
&gt; You would actually get the most predictable performance simply storing the 
&gt; edges as k/v pairs and 'following' the links client-side. This is especially 
&gt; helpful if you have a wide trees or a high crossing number, for example. In 
&gt; such cases, you can retrieve multiple edges simultaneously in parallel, which 
&gt; is a much more efficient query pattern than having Riak hop around the 
&gt; cluster finding those edges and queuing up the result set while the client 
&gt; application waits.
&gt; 
&gt; Another advantage of this approach is that you can keep your logic and tests 
&gt; in your native language, rather than going through Riak's m/r abstraction.
&gt; 
&gt; This is a different mindset from working with relational databases, where we 
&gt; were taught to always do as much calculation in the database layer as 
&gt; possible. With a database tuned for high concurrency and low latency like 
&gt; Riak, you will get the most bang for your buck if you keep the application 
&gt; close to the database, pre-calculate your desired results as much as 
&gt; possible, and perform the calculations and logic in the client application 
&gt; layer, not the database layer.
&gt; 
&gt; Thanks!
&gt; -Casey
&gt; 
&gt; 
&gt; On Tue, Mar 25, 2014 at 8:12 AM, Paul Walk  wrote:
&gt; Thanks - this is somewhat reassuring (the ability to do some basic graph-like 
&gt; operations is one reason I have been using Riak).
&gt; 
&gt; I have so far not had cause to use MapReduce. I wonder if you know of any 
&gt; examples/docs for using MapReduce to perform an operation similar to 
&gt; link\_walking that I could use to get a head start?
&gt; 
&gt; Thanks,
&gt; 
&gt; Paul
&gt; 
&gt; On 25 Mar 2014, at 15:08, Brian Roach  wrote:
&gt; 
&gt; &gt; Hi Paul,
&gt; &gt;
&gt; &gt; Link walking is being deprecated as Christian notes.
&gt; &gt;
&gt; &gt; We removed it from the official 2.0 clients for that reason, and also
&gt; &gt; that the new clients only use protocol buffers which on the Riak PB
&gt; &gt; API side never had that functionality directly.
&gt; &gt;
&gt; &gt; It is still possible to perform the operation, you just have to do it
&gt; &gt; through map-reduce (which is what our clients have always done when
&gt; &gt; using PB)
&gt; &gt;
&gt; &gt; Thanks,
&gt; &gt; - Roach
&gt; &gt;
&gt; &gt; On Tue, Mar 25, 2014 at 8:56 AM, Paul Walk  wrote:
&gt; &gt;&gt; I'm gradually getting up to speed with the technical release of Riak 2.0, 
&gt; &gt;&gt; and am appreciating CRDT and the seamless integration into search.
&gt; &gt;&gt;
&gt; &gt;&gt; I had just turned my attention to links, and started to wonder how I 
&gt; &gt;&gt; should implement links when the objects I will mostly be dealing with are 
&gt; &gt;&gt; CRDT 'map' objects, when I discovered that the link-walking functions 
&gt; &gt;&gt; appear to have been removed from the latest Ruby client!!
&gt; &gt;&gt;
&gt; &gt;&gt; Is link-walking deprecated and intentionally removed from Riak version 
&gt; &gt;&gt; 2.0? Or is it just missing from the Ruby client?
&gt; &gt;&gt;
&gt; &gt;&gt; Paul
&gt; &gt;&gt; -------------------------------------------
&gt; &gt;&gt; Paul Walk
&gt; &gt;&gt; http://www.paulwalk.net
&gt; &gt;&gt; -------------------------------------------
&gt; &gt;&gt;
&gt; &gt;&gt;
&gt; &gt;&gt;
&gt; &gt;&gt;
&gt; &gt;&gt;
&gt; &gt;&gt;
&gt; &gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; &gt;&gt; riak-users mailing list
&gt; &gt;&gt; riak-users@lists.basho.com
&gt; &gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; 
&gt; -------------------------------------------
&gt; Paul Walk
&gt; http://www.paulwalk.net
&gt; -------------------------------------------
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; 

-------------------------------------------
Paul Walk
http://www.paulwalk.net
-------------------------------------------






\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

