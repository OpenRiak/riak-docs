---
title: "Re: Riak problems on Ubuntu (novice user)"
description: ""
project: community
lastmod: 2012-03-06T14:21:26-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06910"
mailinglist_parent_id: "msg06909"
author_name: "Curtis Taylor"
project_section: "mailinglistitem"
sent_date: 2012-03-06T14:21:26-08:00
---


Alright, I am now SSH'd into a private network. I stopped the node and ran:
riak-admin reip riak@127.0.0.1 riak@10.0.0.1
Attempting to restart script through sudo -u riak
Backed up existing ring file to
"/var/lib/riak/ring/riak\_core\_ring.default.20120306221347.BAK"
New ring file written to
"/var/lib/riak/ring/riak\_core\_ring.default.20120306221830"

then

riak start
riak-admin status
Node is not running!

Ideas?

Thanks again



On Tue, Mar 6, 2012 at 5:05 PM, Aphyr  wrote:

&gt; First, for security reasons, don't run Riak on a public IP. Access it
&gt; through an application proxy, a VPN, or an SSH tunnel if you need.
&gt;
&gt; Second, when you change the name of a node, you need to run
&gt;
&gt; riak-admin reip r...@my.old.ip r...@my.new.ip
&gt;
&gt; ... to update the ring file with the new node name. Only change the name
&gt; and reip when the node is not running. You can also just delete
&gt; /var/lib/riak/ring if you don't care about the data on the node.
&gt;
&gt; --Kyle
&gt;
&gt;
&gt; On 03/06/2012 02:02 PM, Curtis Taylor wrote:
&gt;
&gt;&gt; All,
&gt;&gt;
&gt;&gt; Ubuntu versions 10.10 and 11.10.
&gt;&gt;
&gt;&gt; I'm new to Riak, but I have two machines with public IP addresses. I
&gt;&gt; installed started to install Riak from source but work blocks ports for
&gt;&gt; Git so I installed via Debian package:
&gt;&gt; wget 
&gt;&gt; http://downloads.basho.com/\*\*riak/riak-1.1.0/riak\_1.1.0-1\_\*\*i386.deb
&gt;&gt;
&gt;&gt; After installing on both machines I was able to do:
&gt;&gt; riak start
&gt;&gt; riak-admin status
&gt;&gt; riak stop
&gt;&gt;
&gt;&gt; with no issues. I wanted to cluster these two machines machines together
&gt;&gt; so I found I need to edit vm.args and app.config. In vm.args I changed
&gt;&gt; -name riak@127.0.0.1 
&gt;&gt; to
&gt;&gt; -name riak@1.2.3.4  (my public IP)
&gt;&gt;
&gt;&gt;
&gt;&gt; and in app.config I changed under riak\_core
&gt;&gt; {http, [ {"127.0.0.1", 8098 } ]},
&gt;&gt; to
&gt;&gt; {http, [ {"0.0.0.0", 8098 } ]},
&gt;&gt;
&gt;&gt; and under riak\_kv
&gt;&gt; {pb\_ip, "127.0.0.1" },
&gt;&gt; to
&gt;&gt; {pb\_ip, "0.0.0.0" },
&gt;&gt;
&gt;&gt; I think try
&gt;&gt; riak start
&gt;&gt; Riak failed to start within 15 seconds,
&gt;&gt; see the output of 'riak console' for more information.
&gt;&gt; If you want to wait longer, set the environment variable
&gt;&gt; WAIT\_FOR\_ERLANG to the number of seconds to wait.
&gt;&gt;
&gt;&gt; I've adjusted WAIT\_FOR\_ERLANG, but to no avail. Now, an interesting
&gt;&gt; point is that if I stop riak and change everything back to default, riak
&gt;&gt; will start successfully but riak-admin tools fail (saying node not
&gt;&gt; running). I have no idea where I'm going wrong. I'm not completely sure
&gt;&gt; on the riak cookie but it's the same on both machines. I've experience
&gt;&gt; the same behavior on 4 machines. Two on a private network, two on public
&gt;&gt; network.
&gt;&gt;
&gt;&gt; Any help is appreciated.
&gt;&gt; Thanks
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\*\*\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/\*\*mailman/listinfo/riak-users\_\*\*lists.basho.com
&gt;&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

