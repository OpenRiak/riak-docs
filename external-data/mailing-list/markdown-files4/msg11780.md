---
title: "Re: 2i timeouts in 1.4"
description: ""
project: community
lastmod: 2013-07-26T15:01:27-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11780"
mailinglist_parent_id: "msg11779"
author_name: "Sean McKibben"
project_section: "mailinglistitem"
sent_date: 2013-07-26T15:01:27-07:00
---


I should have mentioned that I also tried:
curl -H "X-Riak-Timeout: 260000" 
"http://127.0.0.1:8098/buckets/mybucket/index/test\_bin/myval?timeout=260000" -i
but still receive the 500 error below exactly at the 60 second mark. Is this a 
bug?

Secondary to getting this working at all, is this documented anywhere? and any 
way to set this timeout using the ruby riak client?

Stream may well work, but I'm going to have to make a number of changes on the 
client side to deal with the results.

Sean

On Jul 26, 2013, at 3:53 PM, Brian Roach  wrote:

&gt; Sean -
&gt; 
&gt; The timeout isn't via a header, it's a query param -&gt; &timeout=xxxx
&gt; 
&gt; You can also use stream=true to stream the results.
&gt; 
&gt; - Roach
&gt; 
&gt; Sent from my iPhone
&gt; 
&gt; On Jul 26, 2013, at 3:43 PM, Sean McKibben  wrote:
&gt; 
&gt;&gt; We just upgraded to 1.4 and are having a big problem with some of our larger 
&gt;&gt; 2i queries. We have a few key queries that takes longer than 60 seconds 
&gt;&gt; (usually about 110 seconds) to execute, but after going to 1.4 we can't seem 
&gt;&gt; to get around a 60 second timeout.
&gt;&gt; 
&gt;&gt; I've tried:
&gt;&gt; curl -H "X-Riak-Timeout: 260000" 
&gt;&gt; "http://127.0.0.1:8098/buckets/mybucket/index/test\_bin/myval?x-riak-timeout=260000"
&gt;&gt; -i
&gt;&gt; 
&gt;&gt; But I always get
&gt;&gt; HTTP/1.1 500 Internal Server Error
&gt;&gt; Vary: Accept-Encoding
&gt;&gt; Server: MochiWeb/1.1 WebMachine/1.10.0 (never breaks eye contact)
&gt;&gt; Date: Fri, 26 Jul 2013 21:41:28 GMT
&gt;&gt; Content-Type: text/html
&gt;&gt; Content-Length: 265
&gt;&gt; Connection: close
&gt;&gt; 
&gt;&gt; 500 Internal Server 
&gt;&gt; ErrorInternal Server Error
=====================

The server 
&gt;&gt; encountered an error while processing this 
&gt;&gt; request:  

```
{error,{error,timeout}}
```


---

mochiweb+webmachine
&gt;&gt; web server


&gt;&gt; 
&gt;&gt; Right at the 60 second mark. What can I set to give my secondary index 
&gt;&gt; queries more time??
&gt;&gt; 
&gt;&gt; This is causing major problems for us :(
&gt;&gt; 
&gt;&gt; Sean
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

