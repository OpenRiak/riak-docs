---
title: "Re: Ranking search results by relevancy"
description: ""
project: community
lastmod: 2016-05-25T09:54:53-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17417"
mailinglist_parent_id: "msg17416"
author_name: "Luke Bakken"
project_section: "mailinglistitem"
sent_date: 2016-05-25T09:54:53-07:00
---


Alex,

Here's what you asked in your original email, and why I mentioned OR:
"Can it be done all at once in just 1 search query? or should I
compile results from 3 queries?"

These documents indicate that the default sort is descending relevancy score:

\* 
https://wiki.apache.org/solr/SolrRelevancyFAQ#Why\_are\_search\_results\_returned\_in\_the\_order\_they\_are.3F
\* https://wiki.apache.org/solr/CommonQueryParameters#sort

The relevancy FAQ link I provided has useful information and links to
other documents that should be able to give you more information about
what kinds of sorting you can do.

--
Luke Bakken
Engineer
lbak...@basho.com


On Wed, May 25, 2016 at 9:33 AM, Alex De la rosa
 wrote:
&gt; Hi Luke,
&gt;
&gt; That was not the question... I know that I can use ORs, etc... I wanted to
&gt; know how to sort them by relevancy or higher equality score.
&gt;
&gt; Thanks,
&gt; Alex
&gt;
&gt; On Wed, May 25, 2016 at 8:08 PM, Luke Bakken  wrote:
&gt;&gt;
&gt;&gt; Hi Alex,
&gt;&gt;
&gt;&gt; You can use the HTTP search endpoint to see what information Riak
&gt;&gt; returns for Solr queries as well as to try out queries:
&gt;&gt; https://docs.basho.com/riak/kv/2.1.4/developing/usage/search/#querying
&gt;&gt;
&gt;&gt; Since you're indexing first and last name, I'm not sure what indexing
&gt;&gt; a full name buys you on top of that.
&gt;&gt;
&gt;&gt; It should be possible to combine your queries using OR.
&gt;&gt;
&gt;&gt; More info about Solr ranking can be found online (such as
&gt;&gt; https://wiki.apache.org/solr/SolrRelevancyFAQ).
&gt;&gt;
&gt;&gt; --
&gt;&gt; Luke Bakken
&gt;&gt; Engineer
&gt;&gt; lbak...@basho.com
&gt;&gt;
&gt;&gt;
&gt;&gt; On Wed, May 18, 2016 at 10:07 AM, Alex De la rosa
&gt;&gt;  wrote:
&gt;&gt; &gt; Hi all,
&gt;&gt; &gt;
&gt;&gt; &gt; I would like to perform a search on Riak/Solr of people given an input
&gt;&gt; &gt; containing its full name (or part of it), like when searching for
&gt;&gt; &gt; members in
&gt;&gt; &gt; Facebook's search bar.
&gt;&gt; &gt;
&gt;&gt; &gt; search input [ alex garcia ]
&gt;&gt; &gt;
&gt;&gt; &gt; results = client.fulltext\_search('people', 'firstname\_register:\*alex\* OR
&gt;&gt; &gt; lastname\_register:\*garcia\*')
&gt;&gt; &gt;
&gt;&gt; &gt; this would give me members like:
&gt;&gt; &gt;
&gt;&gt; &gt; alex garcia
&gt;&gt; &gt; alexis garcia
&gt;&gt; &gt; alex fernandez
&gt;&gt; &gt; jose garcia
&gt;&gt; &gt;
&gt;&gt; &gt; Is there any way to get these results ranked/ordered by the most precise
&gt;&gt; &gt; search? "alex garcia" would be the most relevant because matches equally
&gt;&gt; &gt; to
&gt;&gt; &gt; the search input... "alexis garcia" may come second as even not an exact
&gt;&gt; &gt; match is very similar pattern, the other two would come after as they
&gt;&gt; &gt; match
&gt;&gt; &gt; only 1 of the 2 search parameters.
&gt;&gt; &gt;
&gt;&gt; &gt; Would it be convenient to index also fullname\_register:alex garcia in
&gt;&gt; &gt; order
&gt;&gt; &gt; to find exact matches too?
&gt;&gt; &gt;
&gt;&gt; &gt; Can it be done all at once in just 1 search query? or should I compile
&gt;&gt; &gt; results from 3 queries?
&gt;&gt; &gt;
&gt;&gt; &gt; result\_1 = client.fulltext\_search('people', 'fullname\_register:alex
&gt;&gt; &gt; garcia')
&gt;&gt; &gt; result\_2 = client.fulltext\_search('people', 'firstname\_register:\*alex\*
&gt;&gt; &gt; AND
&gt;&gt; &gt; lastname\_register:\*garcia\*')
&gt;&gt; &gt; result\_3 = client.fulltext\_search('people', 'firstname\_register:\*alex\*
&gt;&gt; &gt; OR
&gt;&gt; &gt; lastname\_register:\*garcia\*')
&gt;&gt; &gt;
&gt;&gt; &gt; Thanks and Best Regards,
&gt;&gt; &gt; Alex
&gt;&gt; &gt;
&gt;&gt; &gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; &gt; riak-users mailing list
&gt;&gt; &gt; riak-users@lists.basho.com
&gt;&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt; &gt;
&gt;
&gt;

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

