---
title: "Re: tuning riak for 100s of concurrent connections"
description: ""
project: community
lastmod: 2011-02-24T20:07:48-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02450"
mailinglist_parent_id: "msg02427"
author_name: "Wilson MacGyver"
project_section: "mailinglistitem"
sent_date: 2011-02-24T20:07:48-08:00
---


We too are using haproxy, though we are using HTTP client instead of protocol
buffer. When we developed it, protobuf support didn't exist in java client yet.

server load isn't the issue, the issue is any GET seems to be taking around 80ms
to return data.

On Wed, Feb 23, 2011 at 3:08 PM, Bob Feldbauer  wrote:
&gt; After importing data into Riak, I'm in a basically 100% GET scenario. I
&gt; haven't done much load testing other than throwing live traffic at it, but
&gt; with that I've seen ~150 concurrent connections.
&gt;
&gt; I'm using Jetty app servers (Riak Java client) which are using protobufs to
&gt; hit an HAProxy server, which load balances my 7 Riak nodes. I really haven't
&gt; done anything special, other than using protobufs and fronting Riak with
&gt; HAProxy.
&gt;
&gt; Other than that, I would just say "use fast disks" and/or add nodes as
&gt; needed to hit your capacity targets -- because with that traffic and 7 nodes
&gt; with 1 1TB disk per node, I'm seeing ~0.5-&lt;1.0 load average on Riak nodes as
&gt; iowait.
&gt;
&gt; Feel free to hop on the #riak IRC channel and I'd be happy to try to answer
&gt; any other questions about our setup.
&gt;
&gt; - Bob Feldbauer
&gt;
&gt;&gt; ---------- Forwarded message ----------
&gt;&gt; From: Wilson MacGyver
&gt;&gt; Date: Tue, Feb 22, 2011 at 7:15 PM
&gt;&gt; Subject: tuning riak for 100s of concurrent connections
&gt;&gt; To: riak-users Users
&gt;&gt;
&gt;&gt;
&gt;&gt; Are there any guidelines/howtos on tuning riak nodes for 100s
&gt;&gt; (200-500) of concurrent connections
&gt;&gt; which are 99.9% HTTP GET?
&gt;&gt;
&gt;&gt; Thanks,
&gt;&gt;
&gt;&gt; --
&gt;&gt; Omnem crede diem tibi diluxisse supremum.
&gt;&gt;
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
&gt;



-- 
Omnem crede diem tibi diluxisse supremum.

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

