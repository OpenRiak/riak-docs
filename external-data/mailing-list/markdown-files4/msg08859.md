---
title: "Re: Riak JAVA Client Performance"
description: ""
project: community
lastmod: 2012-10-10T00:25:59-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08859"
mailinglist_parent_id: "msg08858"
author_name: "Pavel Kogan"
project_section: "mailinglistitem"
sent_date: 2012-10-10T00:25:59-07:00
---


1) Is it ok to share a single pbc client object between 50 threads? Should
it be protected by lock ?
2) I didn't do load balancing between nodes yet, cause I want to understand
better throughput limit. I am planning to do it for much higher throughput.

Pavel

On Wed, Oct 10, 2012 at 9:21 AM, kamiseq  wrote:

&gt; maybe the good start is to share pbclient object and only create
&gt; bucket per request, you will save few steps on client configuration.
&gt; have you tried balancing requests to cluster and distribute them over all
&gt; nodes?
&gt;
&gt; pozdrawiam
&gt; Paweł Kamiński
&gt;
&gt; kami...@gmail.com
&gt; pkaminski....@gmail.com
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;
&gt;
&gt; On 10 October 2012 06:18, Pavel Kogan  wrote:
&gt; &gt; Hi all,
&gt; &gt;
&gt; &gt; I have Riak cluster consisting of 5 nodes that contains about 30
&gt; millions of
&gt; &gt; keys (35% of capacity according to Riak Control).
&gt; &gt; Currently we have single JAVA client reading and writing records to same
&gt; &gt; node. I need some tips, how to use the client efficiently
&gt; &gt; to reach maximal throughput - I would like to be able to read/write up to
&gt; &gt; 100 records/sec on 1Gbit network. Currently I get a lot
&gt; &gt; of JAVA socket exceptions after a while (even for the much slower rate -
&gt; 10
&gt; &gt; records/sec), after which I need to restart client and node.
&gt; &gt;
&gt; &gt; Thanks,
&gt; &gt; Pavel
&gt; &gt;
&gt; &gt; P.S: My client using 50 threads and pbc client is created and shut-downed
&gt; &gt; per request.
&gt; &gt;
&gt; &gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; &gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

