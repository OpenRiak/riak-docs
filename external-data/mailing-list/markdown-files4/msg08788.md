---
title: "Re: Riak Memory Usage Constantly Growing"
description: ""
project: community
lastmod: 2012-10-02T08:20:04-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08788"
mailinglist_parent_id: "msg08785"
author_name: "John E. Vincent"
project_section: "mailinglistitem"
sent_date: 2012-10-02T08:20:04-07:00
---


On Tue, Oct 2, 2012 at 7:55 AM, Kelly McLaughlin  wrote:
&gt; John and Shane,
&gt;
&gt; I have been looking into some memory issues lately and I would be very 
&gt; interested in more
&gt; information about your particular problems. If either of you are able to get 
&gt; some output
&gt; from etop using the -sort memory option when you are having elevated memory 
&gt; usage it
&gt; would be very helpful to see. I know that sometimes you get the 
&gt; connection\_lost message
&gt; when trying to use etop, but I have found that sometimes if you keep trying 
&gt; it may succeed
&gt; after a few attempts.
&gt;
&gt; Are either of you using MapReduce? I see that John is using 2I. Shane, do you 
&gt; also use 2I?
&gt; Finally, do you notice a lot of messages to the console or console log that 
&gt; have the either the
&gt; phrase 'monitor large\_heap' or 'monitor long\_gc'?
&gt;
&gt; Kelly
&gt;

Kelly,

As it stands now, we're not seeing the problem anymore. If it crops up
again, I'll be ready to go. To answer your original question r.e. M/R,
internally we consider it a bug if our in-house ODM generates a MR
call but that's the fall back path it takes. And right now we ARE
generating considerable MR volume. When we upgraded to 1.2, we didn't
change any application code. We still get the following in the logs (I
haven't had the time to open a ticket on it) pretty frequently:

2012-10-02 15:12:37.190 [error]
&lt;0.344.0&gt;@riak\_pipe\_vnode:new\_worker:766 Pipe worker startup
failed:fitting was gone before startup
2012-10-02 15:12:37.190 [error]
&lt;0.356.0&gt;@riak\_pipe\_vnode:new\_worker:766 Pipe worker startup
failed:fitting was gone before startup
2012-10-02 15:12:37.191 [error]
&lt;0.354.0&gt;@riak\_pipe\_vnode:new\_worker:766 Pipe worker startup
failed:fitting was gone before startup
2012-10-02 15:12:37.236 [error]
&lt;0.344.0&gt;@riak\_pipe\_vnode:new\_worker:766 Pipe worker startup
failed:fitting was gone before startup
2012-10-02 15:13:13.718 [error]
&lt;0.340.0&gt;@riak\_pipe\_vnode:new\_worker:766 Pipe worker startup
failed:fitting was gone before startup
2012-10-02 15:13:13.719 [error]
&lt;0.332.0&gt;@riak\_pipe\_vnode:new\_worker:766 Pipe worker startup
failed:fitting was gone before startup

And that hasn't changed with the upgrade. There's other debugging
information as well that I'll need to do via ticket. I'd love to have
something to post back to the group though afterwards.



\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

