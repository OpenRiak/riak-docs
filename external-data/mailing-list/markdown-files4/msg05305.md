---
title: "Re: secondary indexes: how fast they are?"
description: ""
project: community
lastmod: 2011-10-25T09:25:15-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05305"
mailinglist_parent_id: "msg05303"
author_name: "Antonio Rohman Fernandez"
project_section: "mailinglistitem"
sent_date: 2011-10-25T09:25:15-07:00
---


Hi Rusty,

Thanks for the explanation! then secondary indexes perfectly matches my needs 
at the moment.
It could be good if more than one secondary index could be queried at the same 
time... maybe future feature?

Thanks,
Roman


 Antonio Rohman Fernandez
CEO, Founder & Lead Engineer
roh...@mahalostudio.com
 Projects
MaruBatsu.es
PupCloud.com
Wedding Album
 

On Oct 26, 2011, at 12:00 AM, Rusty Klophaus wrote:

&gt; Hi Antonio,
&gt; 
&gt; Yes, a Secondary Index query is much faster than using a bucket input or key 
&gt; filter. This is one of the reasons why we built Secondary Indexes, so this is 
&gt; definitely a recommended use case.
&gt; 
&gt; Behind the scenes, the bucket input or key filter must examine all keys in 
&gt; the system to pick out matching keys. Some backends do this more efficiently 
&gt; than others, but in the general case it's an expensive operation in terms of 
&gt; CPU and possibly disk, and not one we recommend you run frequently.
&gt; 
&gt; A Secondary Index query, on the other hand, simply needs to read from the 
&gt; index. This operation generally takes a few disk seeks, less if that section 
&gt; of disk is cached in memory, and it is an operation you can run within web 
&gt; response time.
&gt; 
&gt; Best,
&gt; Rusty
&gt; 
&gt; On Tue, Oct 25, 2011 at 2:14 AM, Antonio Rohman Fernandez 
&gt;  wrote:
&gt; Hi all,
&gt; 
&gt; I remember a previous discussion in the mailing-list about doing mapreduce 
&gt; over an entire bucket '{"inputs":"products","query":[...]}' being very slow 
&gt; independently of how many items that bucket would have stored in as Riak 
&gt; would have to scan all memory in search for the keys, etc... so... how about 
&gt; secondary indexes? are they a good alternative? faster? slow too?
&gt; 
&gt; if I want to get all products with category "sport" using secondary indexes 
&gt; like this:
&gt; http://xx.xx.xx.xx:8098/buckets/products/index/category\_bin/sport
&gt; =&gt; {"keys": ["productA","productB",...,"productN"]}
&gt; 
&gt; Will the keys array come in an speed-decent result? or wouldn't it be 
&gt; recommended?
&gt; 
&gt; Thanks,
&gt; Rohman
&gt; 
&gt; Antonio Rohman Fernandez
&gt; CEO, Founder & Lead Engineer
&gt; roh...@mahalostudio.com Projects
&gt; MaruBatsu.es
&gt; PupCloud.com
&gt; Wedding Album
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; 
&gt; 
&gt; 
&gt; 
&gt; -- 
&gt; Rusty Klophaus
&gt; 
&gt; Basho Technologies, Inc.
&gt; 11921 Freedom Drive, Suite 550
&gt; Reston, VA 20190
&gt; www.basho.com
&gt; 
&gt; 

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

