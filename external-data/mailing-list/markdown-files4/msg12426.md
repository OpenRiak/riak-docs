---
title: "Re: OSX Riak 1.4 Internal Server Error on all map reduce jobs"
description: ""
project: community
lastmod: 2013-09-27T13:00:18-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12426"
mailinglist_parent_id: "msg12424"
author_name: "jeffrey k eliasen"
project_section: "mailinglistitem"
sent_date: 2013-09-27T13:00:18-07:00
---


Well, that's embarrassing. I cleaned my data and introduced errors. The JSON 
that is in the node in question is laid out like you see, but all the " 
characters are preceded by '\' in the error output. I looked at that funny but 
presumed it was part of the Erlang dump, as the nodes themselves were created 
by the Python API and appear to be stored without the leading backslash. I'll 
try the mapValues when I get a chance today and report back.

-- 

jeffrey k eliasen

Find and follow me on:
Blog: http://jeff.jke.net
Twitter: http://twitter.com/jeffreyeliasen
Facebook: http://facebook.com/jeffrey.eliasen

On Sep 27, 2013, at 22:55 , Luke Bakken  wrote:

&gt;&gt; The query:
&gt;&gt; curl -X POST http://localhost:8098/mapred -H 'Content-Type:
&gt;&gt; application/json' -d
&gt;&gt; '{"inputs":"testfs","query":[{"map":{"language":"javascript","name":"Riak.mapValuesJson","keep":true}}]}'
&gt; 
&gt; Since you're using mapValuesJson, the data over which you're iterating
&gt; must be valid JSON. Do you have an example (or two) of the data you're
&gt; using?
&gt; 
&gt; This is the part of the output that I'm interested in - you'll notice
&gt; that it's not a valid string representation of JSON data:
&gt; 
&gt; {\"items\": {\"one": null, \"two": null}, \"status\": {\"time\":
&gt; 1379469049, \"size\": 0}}
&gt; 
&gt; Try changing "mapValuesJson" to just "mapValues" and check the output
&gt; there. I ran this query and saw the set of test data in my local
&gt; cluster:
&gt; 
&gt; curl -X POST http://localhost:10018/mapred -H 'Content-Type:
&gt; application/json' -d
&gt; '{"inputs":"test","query":[{"map":{"language":"javascript","name":"Riak.mapValues","keep":true}}]}'
&gt; 
&gt; --
&gt; Luke Bakken
&gt; CSE
&gt; lbak...@basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

