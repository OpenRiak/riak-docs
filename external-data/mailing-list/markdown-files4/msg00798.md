---
title: "Build fails on Solaris/SPARC"
description: ""
project: community
lastmod: 2010-07-29T03:38:24-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg00798"
author_name: "Antonio Toma"
project_section: "mailinglistitem"
sent_date: 2010-07-29T03:38:24-07:00
---


Hi Riak-Users,

I'm trying to build riak on a Solaris/SPARC machine but I'm stuck on a
compilation error. Every 'gmake rel' ends like this at the moment of
building SpiderMonkey

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

gunzip -c js-1.8.0-rc1.tar.gz | tar xf -
patching file js/src/Makefile.in
Hunk #1 succeeded at 214 with fuzz 2.
patching file js/src/Makefile.ref
patching file js/src/Makefile.ref
Hunk #1 succeeded at 340 (offset 4 lines).
patching file js/src/config/SunOS5.10.mk
patching file js/src/config/SunOS5.10\_i86pc.mk
patching file js/src/config/SunOS5.11.mk
patching file js/src/config/SunOS5.11\_i86pc.mk
patching file js/src/config/SunOS5.1x\_i86pc.mk
patching file js/src/config.mk
cat: cannot open ../../dist/SunOS5.10\_OPT.OBJ/nspr/Version
gmake[2]: Entering directory
`/export/home/etomant/riak-0.12.0/deps/erlang\_js/c\_src/js/src'
cd editline; gmake -f Makefile.ref all
gmake[3]: Entering directory
`/export/home/etomant/riak-0.12.0/deps/erlang\_js/c\_src/js/src/editline'
gcc -o SunOS5.10\_OPT.OBJ/editline.o -c -Wall -Wno-format -fPIC
-DULTRA\_SPARC -DXP\_UNIX -Os -DXP\_UNIX -DSVR4 -DSYSV -DSOLARIS
-DHAVE\_LOCALTIME\_R -fPIC -Wa,-xarch=v9,-DULTRA\_SPARC -UDEBUG -DNDEBUG
-UDEBUG\_etomant -DULTRA\_SPARC -I/usr/sfw/include/mozilla/nspr -DJSFILE
-DHAVE\_VA\_COPY -DVA\_COPY=va\_copy -DANSI\_ARROWS -DHAVE\_TCGETATTR
-DHIDE -DUSE\_DIRENT -DSYS\_UNIX -DHAVE\_STDLIB -DUNIQUE\_HISTORY
editline.c
editline.c: In function `readline':
editline.c:1038: warning: implicit declaration of function `getpid'
gcc -o SunOS5.10\_OPT.OBJ/sysunix.o -c -Wall -Wno-format -fPIC
-DULTRA\_SPARC -DXP\_UNIX -Os -DXP\_UNIX -DSVR4 -DSYSV -DSOLARIS
-DHAVE\_LOCALTIME\_R -fPIC -Wa,-xarch=v9,-DULTRA\_SPARC -UDEBUG -DNDEBUG
-UDEBUG\_etomant -DULTRA\_SPARC -I/usr/sfw/include/mozilla/nspr -DJSFILE
-DHAVE\_VA\_COPY -DVA\_COPY=va\_copy -DANSI\_ARROWS -DHAVE\_TCGETATTR
-DHIDE -DUSE\_DIRENT -DSYS\_UNIX -DHAVE\_STDLIB -DUNIQUE\_HISTORY
sysunix.c
ar rv SunOS5.10\_OPT.OBJ/libedit.a SunOS5.10\_OPT.OBJ/editline.o
SunOS5.10\_OPT.OBJ/sysunix.o
ar: creating SunOS5.10\_OPT.OBJ/libedit.a
ar: writing SunOS5.10\_OPT.OBJ/libedit.a
a - SunOS5.10\_OPT.OBJ/editline.o
a - SunOS5.10\_OPT.OBJ/sysunix.o
echo SunOS5.10\_OPT.OBJ/libedit.a
SunOS5.10\_OPT.OBJ/libedit.a
gmake[3]: Leaving directory
`/export/home/etomant/riak-0.12.0/deps/erlang\_js/c\_src/js/src/editline'
gmake -f Makefile.ref SunOS5.10\_OPT.OBJ/libjs.a
SunOS5.10\_OPT.OBJ/libjs.so SunOS5.10\_OPT.OBJ/js
SunOS5.10\_OPT.OBJ/jsautocfg.h SunOS5.10\_OPT.OBJ/jscpucfg
SunOS5.10\_OPT.OBJ/jscpucfg.o
cat: cannot open ../../dist/SunOS5.10\_OPT.OBJ/nspr/Version
gmake[3]: Entering directory
`/export/home/etomant/riak-0.12.0/deps/erlang\_js/c\_src/js/src'
gmake[3]: Circular jscpucfg.h &lt;- SunOS5.10\_OPT.OBJ/jsautocfg.h
dependency dropped.
gcc -o SunOS5.10\_OPT.OBJ/jscpucfg.o -c -Wall -Wno-format -fPIC
-DULTRA\_SPARC -Os -DXP\_UNIX -DSVR4 -DSYSV -DSOLARIS -DHAVE\_LOCALTIME\_R
-fPIC -Wa,-xarch=v9,-DULTRA\_SPARC -UDEBUG -DNDEBUG -UDEBUG\_etomant
-DULTRA\_SPARC -DJS\_THREADSAFE -DEDITLINE
-I/usr/sfw/include/mozilla/nspr -ISunOS5.10\_OPT.OBJ
-I/export/home/etomant/riak-0.12.0/deps/erlang\_js/c\_src/system/include/nspr
-DHAVE\_VA\_COPY -DVA\_COPY=va\_copy jscpucfg.c
gcc -o SunOS5.10\_OPT.OBJ/jscpucfg SunOS5.10\_OPT.OBJ/jscpucfg.o -lm
ld: fatal: file SunOS5.10\_OPT.OBJ/jscpucfg.o: wrong ELF class: ELFCLASS64
ld: fatal: File processing errors. No output written to
SunOS5.10\_OPT.OBJ/jscpucfg
collect2: ld returned 1 exit status
gmake[3]: \*\*\* [SunOS5.10\_OPT.OBJ/jscpucfg] Error 1
gmake[3]: Leaving directory
`/export/home/etomant/riak-0.12.0/deps/erlang\_js/c\_src/js/src'
gmake[2]: \*\*\* [all] Error 2
gmake[2]: Leaving directory
`/export/home/etomant/riak-0.12.0/deps/erlang\_js/c\_src/js/src'
gmake[1]: \*\*\* 
[/export/home/etomant/riak-0.12.0/deps/erlang\_js/c\_src/system/lib/libjs.a]
Error 2
gmake[1]: Leaving directory
`/export/home/etomant/riak-0.12.0/deps/erlang\_js/c\_src'
ERROR: gmake -C c\_src failed with error: 2
gmake: \*\*\* [rel] Error 1

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Any idea or direction to follow in order to successfully build riak on
Solaris/SPARC ?

Thank you and regards.
Antonio.

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

