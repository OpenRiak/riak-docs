---
title: "Re: Hard time with Riak 2.0.0pre5 features"
description: ""
project: community
lastmod: 2013-11-19T09:53:55-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13021"
mailinglist_parent_id: "msg13019"
author_name: "Valter Balegas"
project_section: "mailinglistitem"
sent_date: 2013-11-19T09:53:55-08:00
---


Great,
I pulled the develop branch and went back a few commits and it works. Thank!

Let's see if someone can help me with the strong consistency.

Looking forward for the new releases,

Valter
Em 19/11/2013 15:56, "Sean Cribbs"  escreveu:

&gt; Valter,
&gt;
&gt; Apologies for the issue with data types, that decoding bug has been fixed
&gt; since. If you pull down the latest riak\_pb from the 'develop' branch, the
&gt; bug should be gone. We'll have further prerelease builds until code freeze
&gt; that you could try.
&gt;
&gt; I hope the other engineers can address the other problems you ran into.
&gt;
&gt;
&gt; On Tue, Nov 19, 2013 at 9:33 AM, Valter Balegas  wrote:
&gt;
&gt;&gt; Hello,
&gt;&gt; I’ve been trying to use a couple features of Riak 2, but i cannot get
&gt;&gt; things to work.
&gt;&gt; I’m kinda new to Riak, but i’d like to try these features for a project.
&gt;&gt;
&gt;&gt; CRDTs:
&gt;&gt; I’m trying to run this code:
&gt;&gt; https://gist.github.com/russelldb/5da7d895cebc77dd38b8
&gt;&gt;
&gt;&gt; First i create the type, which i do not exactly understand what it means,
&gt;&gt; but i believe i’m creating a bucket that supports maps.
&gt;&gt;
&gt;&gt; ./riak-admin bucket-type create maps '{"props": {"datatype":"map",
&gt;&gt; "allow\_mult":true}}'
&gt;&gt; ./riak-admin bucket-type activate maps
&gt;&gt;
&gt;&gt; and then i run the following operations:
&gt;&gt;
&gt;&gt; f(Pid), {ok, Pid} = riakc\_pb\_socket:start\_link("localhost", 8087).
&gt;&gt; user:create\_user(Pid, &lt;&lt;"Key"&gt;&gt;, &lt;&lt;"Bob"&gt;&gt;, &lt;&lt;"Dobalina"&gt;&gt;, &lt;&lt;"bodo"&gt;&gt;).
&gt;&gt;
&gt;&gt; but always receive the error:
&gt;&gt; \*\* exception exit: function\_clause
&gt;&gt; in function riak\_pb\_dt\_codec:decode\_map\_field/2
&gt;&gt; called as riak\_pb\_dt\_codec:decode\_map\_field({mapentry,
&gt;&gt;
&gt;&gt; {mapfield,&lt;&lt;"views"&gt;&gt;,
&gt;&gt; 'COUNTER'},
&gt;&gt;
&gt;&gt; 0,[],undefined,undefined,
&gt;&gt; []},
&gt;&gt; [])
&gt;&gt; in call from
&gt;&gt; riak\_pb\_dt\_codec:'-decode\_update\_response/3-lc$^0/1-0-'/1
&gt;&gt; (src/riak\_pb\_dt\_codec.erl, line 500)
&gt;&gt; in call from riak\_pb\_dt\_codec:decode\_update\_response/3
&gt;&gt; (src/riak\_pb\_dt\_codec.erl, line 500)
&gt;&gt; in call from riakc\_pb\_socket:process\_response/3
&gt;&gt; (src/riakc\_pb\_socket.erl, line 1770)
&gt;&gt; in call from riakc\_pb\_socket:handle\_info/2
&gt;&gt; (src/riakc\_pb\_socket.erl, line 1303)
&gt;&gt; in call from gen\_server:handle\_msg/5 (gen\_server.erl, line
&gt;&gt; 607)
&gt;&gt; in call from proc\_lib:init\_p\_do\_apply/3 (proc\_lib.erl, line
&gt;&gt; 227)
&gt;&gt;
&gt;&gt;
&gt;&gt; Strong consistency:
&gt;&gt; How does one activate this? As i understand, either the pb or the http
&gt;&gt; clients do not accept the consistent property.
&gt;&gt;
&gt;&gt; Details about my environment:
&gt;&gt; -I’m running Mac OSX 10.9
&gt;&gt; -Erlang R15B01
&gt;&gt; -Compiling riak “develop” branch, from basho github
&gt;&gt; -Compiling riak-erlang-client “master” branch, from basho github.
&gt;&gt; -recompiled the latest versions of the branches just before writing this
&gt;&gt; email.
&gt;&gt;
&gt;&gt;
&gt;&gt; Thank you for your help,
&gt;&gt; Valter
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;
&gt;
&gt;
&gt;
&gt; --
&gt; Sean Cribbs 
&gt; Software Engineer
&gt; Basho Technologies, Inc.
&gt; http://basho.com/
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

