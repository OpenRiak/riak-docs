---
title: "Re: Riak S2 error"
description: ""
project: community
lastmod: 2016-01-08T10:17:14-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16933"
mailinglist_parent_id: "msg16932"
author_name: "Michael Walsh"
project_section: "mailinglistitem"
sent_date: 2016-01-08T10:17:14-08:00
---


That was the first thing I checked. Good thought though.

On Fri, Jan 8, 2016 at 9:07 AM, Luke Bakken  wrote:

&gt; Hi Michael,
&gt;
&gt; Please ensure that /usr/lib64/riak-cs/lib/riak\_cs-2.1.0/ebin actually
&gt; is the correct path to the \*.beam files. This is a
&gt; distribution-dependent path, and may be
&gt; /usr/lib/riak-cs/lib/riak\_cs-2.1.0/ebin
&gt;
&gt; --
&gt; Luke Bakken
&gt; Engineer
&gt; lbak...@basho.com
&gt;
&gt; On Fri, Jan 8, 2016 at 8:52 AM, Michael Walsh 
&gt; wrote:
&gt; &gt; That definitely fixed the configuration problem, but now its tossing a
&gt; &gt; riak\_cs\_kv\_multi\_backend is non-loadable. So I'll dig into riak\_cs some
&gt; more
&gt; &gt; to try to see what could be wrong there, although it is not reporting any
&gt; &gt; errors while running.
&gt; &gt;
&gt; &gt; On Thu, Jan 7, 2016 at 3:12 PM, Charlie Voiselle 
&gt; &gt; wrote:
&gt; &gt;&gt;
&gt; &gt;&gt; Michael:
&gt; &gt;&gt;
&gt; &gt;&gt; If that is the entire contents of your advanced.config file, you will
&gt; need
&gt; &gt;&gt; to wrap all of that in an erlang list delimiter. []. For example
&gt; &gt;&gt;
&gt; &gt;&gt; [
&gt; &gt;&gt; {riak\_kv, [
&gt; &gt;&gt; {add\_paths, "/usr/lib64/riak-cs/lib/riak\_cs-2.1.0/ebin"},
&gt; &gt;&gt; {storage\_backend, riak\_cs\_kv\_multi\_backend},
&gt; &gt;&gt; {multi\_backend\_prefix\_list, [{&lt;&lt;"0b:"&gt;&gt;, be\_blocks}]},
&gt; &gt;&gt; {multi\_backend\_default, be\_default},
&gt; &gt;&gt; {multi\_backend, [
&gt; &gt;&gt; {be\_default, riak\_kv\_eleveldb\_backend, [
&gt; &gt;&gt; {total\_leveldb\_mem\_percent, 30},
&gt; &gt;&gt; {data\_root, "/var/lib/riak/leveldb"}
&gt; &gt;&gt; ]},
&gt; &gt;&gt; {be\_blocks, riak\_kv\_bitcask\_backend, [
&gt; &gt;&gt; {data\_root, "/var/lib/riak/bitcask"}
&gt; &gt;&gt; ]}
&gt; &gt;&gt; ]}
&gt; &gt;&gt; ]}
&gt; &gt;&gt; ].
&gt; &gt;&gt;
&gt; &gt;&gt;
&gt; &gt;&gt; Give that a shot and let us know if it works for you!
&gt; &gt;&gt;
&gt; &gt;&gt; Thanks,
&gt; &gt;&gt; Charlie Voiselle
&gt; &gt;&gt;
&gt; &gt;&gt; On Jan 7, 2016, at 11:53 AM, Michael Walsh 
&gt; wrote:
&gt; &gt;&gt;
&gt; &gt;&gt; Sure thing.
&gt; &gt;&gt;
&gt; &gt;&gt; And thanks!
&gt; &gt;&gt;
&gt; &gt;&gt;
&gt; &gt;&gt; advanced.config:
&gt; &gt;&gt; {riak\_kv, [
&gt; &gt;&gt; {add\_paths, "/usr/lib64/riak-cs/lib/riak\_cs-2.1.0/ebin"},
&gt; &gt;&gt; {storage\_backend, riak\_cs\_kv\_multi\_backend},
&gt; &gt;&gt; {multi\_backend\_prefix\_list, [{&lt;&lt;"0b:"&gt;&gt;, be\_blocks}]},
&gt; &gt;&gt; {multi\_backend\_default, be\_default},
&gt; &gt;&gt; {multi\_backend, [
&gt; &gt;&gt; {be\_default, riak\_kv\_eleveldb\_backend, [
&gt; &gt;&gt; {total\_leveldb\_mem\_percent, 30},
&gt; &gt;&gt; {data\_root, "/var/lib/riak/leveldb"}
&gt; &gt;&gt; ]},
&gt; &gt;&gt; {be\_blocks, riak\_kv\_bitcask\_backend, [
&gt; &gt;&gt; {data\_root, "/var/lib/riak/bitcask"}
&gt; &gt;&gt; ]}
&gt; &gt;&gt; ]}
&gt; &gt;&gt; ]}.
&gt; &gt;&gt;
&gt; &gt;&gt; On Wed, Jan 6, 2016 at 5:44 PM, Shunichi Shinohara 
&gt; &gt;&gt; wrote:
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; Hi Michael,
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; Could you provide all the result of "riak config generate -l debug" as
&gt; &gt;&gt;&gt; well as
&gt; &gt;&gt;&gt; riak.conf and advanced.config?
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; Thanks,
&gt; &gt;&gt;&gt; Shino
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; 2016-01-07 9:05 GMT+09:00 Michael Walsh :
&gt; &gt;&gt;&gt; &gt; All,
&gt; &gt;&gt;&gt; &gt;
&gt; &gt;&gt;&gt; &gt; I'm trying to set up a RIak S2 instance to integrate with KV and I'm
&gt; &gt;&gt;&gt; &gt; getting
&gt; &gt;&gt;&gt; &gt; the following cuttlefish error out of advanced.config. Any
&gt; suggestions
&gt; &gt;&gt;&gt; &gt; on
&gt; &gt;&gt;&gt; &gt; where I'm going wrong?
&gt; &gt;&gt;&gt; &gt;
&gt; &gt;&gt;&gt; &gt; notes: erlang error was fixed. All paths are correct.
&gt; &gt;&gt;&gt; &gt;
&gt; &gt;&gt;&gt; &gt; Thanks!
&gt; &gt;&gt;&gt; &gt;
&gt; &gt;&gt;&gt; &gt; -Michael Walsh
&gt; &gt;&gt;&gt; &gt;
&gt; &gt;&gt;&gt; &gt; $riak config generate -l debug
&gt; &gt;&gt;&gt; &gt;
&gt; &gt;&gt;&gt; &gt; ...
&gt; &gt;&gt;&gt; &gt; {riak\_kv,
&gt; &gt;&gt;&gt; &gt; [{add\_paths,
&gt; &gt;&gt;&gt; &gt;
&gt; &gt;&gt;&gt; &gt; "/usr/lib64/riak-cs/lib/riak\_cs-2.1.0/ebin"},
&gt; &gt;&gt;&gt; &gt;
&gt; &gt;&gt;&gt; &gt; {storage\_backend,riak\_cs\_kv\_multi\_backend},
&gt; &gt;&gt;&gt; &gt; {multi\_backend\_prefix\_list,
&gt; &gt;&gt;&gt; &gt; [{&lt;&lt;"0b:"&gt;&gt;,be\_blocks}]},
&gt; &gt;&gt;&gt; &gt; {multi\_backend\_default,be\_default},
&gt; &gt;&gt;&gt; &gt; {multi\_backend,
&gt; &gt;&gt;&gt; &gt;
&gt; [{be\_default,riak\_kv\_eleveldb\_backend,
&gt; &gt;&gt;&gt; &gt; [{total\_leveldb\_mem\_percent,30},
&gt; &gt;&gt;&gt; &gt;
&gt; &gt;&gt;&gt; &gt; {data\_root,"/var/lib/riak/leveldb"}]},
&gt; &gt;&gt;&gt; &gt; {be\_blocks,riak\_kv\_bitcask\_backend,
&gt; &gt;&gt;&gt; &gt;
&gt; &gt;&gt;&gt; &gt; [{data\_root,"/var/lib/riak/bitcask"}]}]}]}) (lists.erl, line 1247)
&gt; &gt;&gt;&gt; &gt; in function cuttlefish\_escript:engage\_cuttlefish/1
&gt; &gt;&gt;&gt; &gt; (src/cuttlefish\_escript.erl, line 375)
&gt; &gt;&gt;&gt; &gt; in call from cuttlefish\_escript:generate/1
&gt; &gt;&gt;&gt; &gt; (src/cuttlefish\_escript.erl,
&gt; &gt;&gt;&gt; &gt; line 258)
&gt; &gt;&gt;&gt; &gt; in call from escript:run/2 (escript.erl, line 747)
&gt; &gt;&gt;&gt; &gt; in call from escript:start/1 (escript.erl, line 277)
&gt; &gt;&gt;&gt; &gt; in call from init:start\_it/1
&gt; &gt;&gt;&gt; &gt; in call from init:start\_em/1
&gt; &gt;&gt;&gt; &gt;
&gt; &gt;&gt;&gt; &gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; &gt;&gt;&gt; &gt; riak-users mailing list
&gt; &gt;&gt;&gt; &gt; riak-users@lists.basho.com
&gt; &gt;&gt;&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; &gt;&gt;&gt; &gt;
&gt; &gt;&gt;
&gt; &gt;&gt;
&gt; &gt;&gt;
&gt; &gt;&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; &gt;&gt; riak-users mailing list
&gt; &gt;&gt; riak-users@lists.basho.com
&gt; &gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; &gt;&gt;
&gt; &gt;&gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; &gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

