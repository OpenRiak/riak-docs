---
title: "Re: embedding riak_core into RabbitMQ"
description: ""
project: community
lastmod: 2011-05-23T10:47:19-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03387"
mailinglist_parent_id: "msg03371"
author_name: "Ryan Zezeski"
project_section: "mailinglistitem"
sent_date: 2011-05-23T10:47:19-07:00
---


Jon,

Sounds like a neat project. Out of curiosity, what use cases do you imagine
for something like this?

In regards to riak\_err you shouldn't have any troubles leaving it out. It's
purpose is to protect your VM from OOM issues related to error logging.
 What's the warning you see?

-Ryan

On Thu, May 19, 2011 at 2:49 PM, Jon Brisbin  wrote:

&gt; I've mentioned this a couple places, but I'm toying with embedding
&gt; riak\_core into RabbitMQ as a plugin. I already have a consumer that invokes
&gt; vnodes but I'm wondering (in code) whether or not it would be more efficient
&gt; to implement this behaviour as a custom exchange. This is also an exercise
&gt; for my Erlang Factory presentation.
&gt;
&gt; To that end, I've got riak\_core running as a plugin with a special script I
&gt; call from my Makefile to patch the riak\_core distro so it will go into
&gt; RabbitMQ's VM without complaining about extra .beam files (for things
&gt; already inside RabbitMQ).
&gt;
&gt; I'm getting a couple warnings related to cluster\_info and riak\_err not
&gt; being available. I've included cluster\_info to get rid of that warning, but
&gt; I'm not sure I want to include riak\_err because it seems to put my logging
&gt; output back into the console (I run my RabbitMQ broker in a terminal so I
&gt; can get an Erlang shell with it). It makes a mess in my terminal window, so
&gt; I'm considering leaving that out of my plugins directory.
&gt;
&gt; Will leaving riak\_err out cause problems with riak\_core? Other than this,
&gt; riak\_core was relatively easy to embed.
&gt;
&gt; Thanks!
&gt;
&gt; Jon Brisbin
&gt;
&gt; http://jbrisbin.com
&gt; Twitter: @j\_brisbin
&gt;
&gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

