---
title: "Re: LevelDB tuning questions."
description: ""
project: community
lastmod: 2013-11-07T11:28:33-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12880"
mailinglist_parent_id: "msg12877"
author_name: "Matthew Von-Maszewski"
project_section: "mailinglistitem"
sent_date: 2013-11-07T11:28:33-08:00
---


Kathleen,

This is a tricky question. On a new database, the cache\_size will help 
performance. As your database grows, the file cache (max\_open\_files) becomes 
more important than the cache\_size because a miss in the file cache is much 
more expensive (disk activity) than a miss in the block cache (cache\_size).

My thought at this time is to leave you cache\_size as is (50Mbytes), and reduce 
your max\_open\_files from 150 to 138.


Once your database is in production, go find a LOG file in the leveldb data 
directory every two weeks or so. Look for a line like this:

2013/11/06-16:32:06.853818 7f972437a700 compacted to: files[ 0 0 29 51 50 0 0 ]

Add the seven numbers between the '[' and ']'. When those total larger than 
138, it will be time to start rethinking the setting. 

Matthew



On Nov 7, 2013, at 2:05 PM, kzhang  wrote:

&gt; I am attaching my calculation based on our environment. Since I am getting
&gt; negative remainders, so my best bet is to change the number of
&gt; max\_open\_file? should I tweak cache\_size at all?
&gt; 
&gt; 
&gt; Copy\_of\_leveldb\_sizing\_1\_4\_(2).xls
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; --
&gt; View this message in context: 
&gt; http://riak-users.197444.n3.nabble.com/LevelDB-tuning-questions-tp4029246p4029721.html
&gt; Sent from the Riak Users mailing list archive at Nabble.com.
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

