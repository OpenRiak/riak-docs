---
title: "Re: May allow_mult cause DoS?"
description: ""
project: community
lastmod: 2013-12-20T15:07:15-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13314"
mailinglist_parent_id: "msg13313"
author_name: "John Daily"
project_section: "mailinglistitem"
sent_date: 2013-12-20T15:07:15-08:00
---


I could be wrong, but I believe there’s metadata overhead for each sibling, so 
even if all data in all siblings needs to be retained, it’s still more 
efficient to merge and save them as one object.

-John

On Dec 20, 2013, at 6:01 PM, Andrew Stone  wrote:

&gt; Think of an object with thousands of siblings. That's an object that has 1 
&gt; copy of the data for each sibling. That object could be on the order of 100s 
&gt; of megabytes. Everytime an object is read off disk and returned to the client 
&gt; 100mb is being transferred. Furthermore leveldb must rewrite the entire 100mb 
&gt; to disk everytime a new sibling is added. And it just got larger with that 
&gt; write. If a merge occurs, the amount of data is a single copy of the data at 
&gt; that key instead of what ammounts to approximately 10000 copies of the same 
&gt; sized data, when all you care about is one of those 10,000.
&gt; 
&gt; -Andrew
&gt; 
&gt; 
&gt; On Fri, Dec 20, 2013 at 5:41 PM, Jason Campbell  wrote:
&gt; 
&gt; From: "Sean Cribbs" 
&gt; To: "Jason Campbell" 
&gt; Sent: Saturday, 21 December, 2013 3:17:57 AM
&gt; 
&gt; Subject: Re: May allow\_mult cause DoS?
&gt; 
&gt; &gt; No, the behavior in LevelDB is no different than the behavior of any of our 
&gt; &gt; other backends, namely, all siblings occupy the same key. Every write 
&gt; &gt; involves a fetch from the backend so that the existing value can be 
&gt; &gt; superseded by or merged with the incoming write.
&gt; 
&gt; I'm confused then, why is reading hundreds or thousands of siblings a problem 
&gt; if they are stored in the same object anyway? What is the difference between 
&gt; reading a large number of siblings and a merged object?
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; 
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

