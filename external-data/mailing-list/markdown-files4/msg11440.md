---
title: "Re: Migration from memcachedb to riak"
description: ""
project: community
lastmod: 2013-07-10T03:45:59-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11440"
mailinglist_parent_id: "msg11434"
author_name: "damien krotkine"
project_section: "mailinglistitem"
sent_date: 2013-07-10T03:45:59-07:00
---


On 10 July 2013 11:03, Edgar Veiga  wrote:

&gt; Hi Guido.
&gt;
&gt; Thanks for your answer!
&gt;
&gt; Bitcask it's not an option due to the amount of ram needed.. We would need
&gt; a lot more of physical nodes so more money spent...
&gt;

Why is it not an option?

If you use Bitcask, then each node needs to store its keys in memory. It's
usually not a lot. In a precedent email I asked you the average lenght of
\*keys\*, but you gave us the average length of \*values\* :)

We have 1 billion keys and fits on a 5 nodes Ring. ( check out
http://docs.basho.com/riak/1.2.0/references/appendices/Bitcask-Capacity-Planning/).
Our bucket names are 1 letter, our keys are 10 chars long.

What does a typical key look like ? Also, what are you using to serialize
your php objects? Maybe you could paste a typical value somewhere as well

Damien


&gt;
&gt; Instead we're using less machines with SSD disks to improve elevelDB
&gt; performance.
&gt;
&gt; Best regards
&gt;
&gt;
&gt;
&gt; On 10 July 2013 09:58, Guido Medina  wrote:
&gt;
&gt;&gt; Well, I rushed my answer before, if you want performance, you probably
&gt;&gt; want Bitcask, if you want compression then LevelDB, the following links
&gt;&gt; should help you decide better:
&gt;&gt;
&gt;&gt; http://docs.basho.com/riak/1.2.0/tutorials/choosing-a-backend/Bitcask/
&gt;&gt; http://docs.basho.com/riak/1.2.0/tutorials/choosing-a-backend/LevelDB/
&gt;&gt;
&gt;&gt; Or multi, use one as default and then the other for specific buckets:
&gt;&gt;
&gt;&gt; http://docs.basho.com/riak/1.2.0/tutorials/choosing-a-backend/Multi/
&gt;&gt;
&gt;&gt; HTH,
&gt;&gt;
&gt;&gt; Guido.
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; On 10/07/13 09:53, Guido Medina wrote:
&gt;&gt;
&gt;&gt; Then you are better off with Bitcask, that will be the fastest in your
&gt;&gt; case (no 2i, no searches, no M/R)
&gt;&gt;
&gt;&gt; HTH,
&gt;&gt;
&gt;&gt; Guido.
&gt;&gt;
&gt;&gt; On 10/07/13 09:49, Edgar Veiga wrote:
&gt;&gt;
&gt;&gt; Hello all!
&gt;&gt;
&gt;&gt; I have a couple of questions that I would like to address all of you
&gt;&gt; guys, in order to start this migration the best as possible.
&gt;&gt;
&gt;&gt; Context:
&gt;&gt; - I'm responsible for the migration of a pure key/value store that for
&gt;&gt; now is being stored on memcacheDB.
&gt;&gt; - We're serializing php objects and storing them.
&gt;&gt; - The total size occupied it's ~2TB.
&gt;&gt;
&gt;&gt; - The idea it's to migrate this data to a riak cluster with elevelDB
&gt;&gt; backend (starting with 6 nodes, 256 partitions. This thing is scaling very
&gt;&gt; fast).
&gt;&gt; - We only need to access the information by key. \*We won't need neither
&gt;&gt; map/reduces, searches or secondary indexes\*. It's a pure key/value store!
&gt;&gt;
&gt;&gt; My questions are:
&gt;&gt; - Do you have any riak fine tunning tip regarding this use case (due to
&gt;&gt; the fact that we will only use the key/value capabilities of riak)?
&gt;&gt; - It's expected that those 2TB would be reduced due to the levelDB
&gt;&gt; compression. Do you think we should compress our objects to on the client?
&gt;&gt;
&gt;&gt; Best regards,
&gt;&gt; Edgar Veiga
&gt;&gt;
&gt;&gt;
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing 
&gt;&gt; listriak-users@lists.basho.comhttp://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;
&gt;&gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

