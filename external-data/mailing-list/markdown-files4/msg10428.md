---
title: "Re: Error interpretation"
description: ""
project: community
lastmod: 2013-03-13T20:15:41-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg10428"
mailinglist_parent_id: "msg10419"
author_name: "Jeremiah Peschka"
project_section: "mailinglistitem"
sent_date: 2013-03-13T20:15:41-07:00
---


This is gold! Thanks for sharing the ultimate cause of Kevin's error.

On Wednesday, March 13, 2013, Tony Schwartz wrote:

&gt; The combination of allow\_mult: true and the precommit
&gt; "riak\_search\_kv\_hook" is the issue. But this is only true if its set in
&gt; the default props.
&gt;
&gt; Search and conflict resolution can work together, but apparently search
&gt; creates hidden buckets behind the scenes that go off the default bucket
&gt; properties specified in app.config.
&gt;
&gt; So if those buckets have allow\_mult, there will be there problem.
&gt;
&gt; So basically, if you have search enabled, you need to have allow\_mult =
&gt; false as the default.
&gt;
&gt; You can enable allow\_mult = true on individual buckets, in an ad hoc
&gt; manner.
&gt;
&gt; This isn't to say that search and conflict resolution is incompatible, it
&gt; just means that allow\_mult must be set dynamically in that case.
&gt;
&gt; On Wed, Mar 13, 2013 at 7:22 PM, Kevin Burton 
&gt;  'rkevinbur...@charter.net');&gt;
&gt; &gt; wrote:
&gt;
&gt;&gt; Thanks again. You solved it!!. I am not sure how the bucket properties
&gt;&gt; were set in this way but I changed back to the default and it works again.
&gt;&gt; The key property in this case was ‘precommit’. Now that this property is
&gt;&gt; suspect can we offer an explanation? I have highlighted the changed
&gt;&gt; properties and the one that certainly jumped out is ‘precommit’. How does
&gt;&gt; that get set? What are the conditions that setting it in this way would
&gt;&gt; case such an error?\*\*\*\*
&gt;&gt;
&gt;&gt; \*\* \*\*
&gt;&gt;
&gt;&gt; Here are the original bucket properties:\*\*\*\*
&gt;&gt;
&gt;&gt; \*\* \*\*
&gt;&gt;
&gt;&gt; {\*\*\*\*
&gt;&gt;
&gt;&gt; "props" : {\*\*\*\*
&gt;&gt;
&gt;&gt; "allow\_mult" : true,\*\*\*\*
&gt;&gt;
&gt;&gt; "basic\_quorum" : false,\*\*\*\*
&gt;&gt;
&gt;&gt; "big\_vclock" : 50,\*\*\*\*
&gt;&gt;
&gt;&gt; "chash\_keyfun" : {\*\*\*\*
&gt;&gt;
&gt;&gt; "mod" : "riak\_core\_util",\*\*\*\*
&gt;&gt;
&gt;&gt; "fun" : "chash\_std\_keyfun"\*\*\*\*
&gt;&gt;
&gt;&gt; },\*\*\*\*
&gt;&gt;
&gt;&gt; "dw" : "quorum",\*\*\*\*
&gt;&gt;
&gt;&gt; "last\_write\_wins" : false,\*\*\*\*
&gt;&gt;
&gt;&gt; "linkfun" : {\*\*\*\*
&gt;&gt;
&gt;&gt; "mod" : "riak\_kv\_wm\_link\_walker",\*\*\*\*
&gt;&gt;
&gt;&gt; "fun" : "mapreduce\_linkfun"\*\*\*\*
&gt;&gt;
&gt;&gt; },\*\*\*\*
&gt;&gt;
&gt;&gt; "n\_val" : 4,\*\*\*\*
&gt;&gt;
&gt;&gt; "name" : "buyseasons-orders",\*\*\*\*
&gt;&gt;
&gt;&gt; "notfound\_ok" : true,\*\*\*\*
&gt;&gt;
&gt;&gt; "old\_vclock" : 86400,\*\*\*\*
&gt;&gt;
&gt;&gt; "postcommit" : [ ],\*\*\*\*
&gt;&gt;
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com &gt; 'riak-users@lists.basho.com');&gt;
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;
&gt;&gt;
&gt;

-- 
---
Jeremiah Peschka - Founder, Brent Ozar Unlimited
MCITP: SQL Server 2008, MVP
Cloudera Certified Developer for Apache Hadoop
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

