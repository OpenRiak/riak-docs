---
title: "Re: Partitions repair isn't working anymore?"
description: ""
project: community
lastmod: 2018-06-01T01:39:02-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg18553"
mailinglist_parent_id: "msg18536"
author_name: "Russell Brown"
project_section: "mailinglistitem"
sent_date: 2018-06-01T01:39:02-07:00
---


I don’t see a call to `riak\_search\_vnode:repair` in those docs

Do you still run legacy riak search (i.e. not yokozuna/solr)?

&gt; On 1 Jun 2018, at 09:35, Guido Medina  wrote:
&gt; 
&gt; Sorry, not repairing a single partition but all partitions per node:
&gt; https://docs.basho.com/riak/kv/2.2.3/using/repair-recovery/repairs/#repairing-all-partitions-on-a-node
&gt; 
&gt; On 01/06/18 09:34, Guido Medina wrote:
&gt;&gt; Hi Russell,
&gt;&gt; 
&gt;&gt; I was repairing each node as specified in this guide 
&gt;&gt; https://docs.basho.com/riak/kv/2.2.3/using/repair-recovery/repairs/#repairing-a-single-partition
&gt;&gt; 
&gt;&gt; Guido.
&gt;&gt; 
&gt;&gt; On 01/06/18 09:16, Russell Brown wrote:
&gt;&gt;&gt; riak\_search has been removed from riak-2.2.5. Looks like some vestige 
&gt;&gt;&gt; survived. 
&gt;&gt;&gt; 
&gt;&gt;&gt; Can you tell me what command you ran, it looks to me from the output below 
&gt;&gt;&gt; that you’re connected to node and typing commands in the console?
&gt;&gt;&gt; 
&gt;&gt;&gt; Is this some snippet that you attach and run?
&gt;&gt;&gt; 
&gt;&gt;&gt; Cheers
&gt;&gt;&gt; 
&gt;&gt;&gt; Russell
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; On 1 Jun 2018, at 09:07, Guido Medina 
&gt;&gt;&gt;&gt; wrote:
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; Hi all,
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; We started the partitions repair a couple of weeks ago, so far so good (3 
&gt;&gt;&gt;&gt; nodes out of 7 done), then we started getting this error:
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt; (r...@node4.domain.com
&gt;&gt;&gt;&gt;&gt; )3&gt; [riak\_search\_vnode:repair(P) || P &lt;- Partitions].
&gt;&gt;&gt;&gt;&gt; \*\* exception error: undefined function riak\_search\_vnode:repair/1
&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; The first two steps for the node repair executed fine:
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt; {ok, Ring} = riak\_core\_ring\_manager:get\_my\_ring().
&gt;&gt;&gt;&gt;&gt; Partitions = [P || {P, '
&gt;&gt;&gt;&gt;&gt; r...@node4.domain.com
&gt;&gt;&gt;&gt;&gt; '} &lt;- riak\_core\_ring:all\_owners(Ring)].
&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; We are running on 2.2.5
&gt;&gt;&gt;&gt; Guido.
&gt;&gt;&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt; 
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

