---
title: "Re: Retrieve Score - MapReduce over Search"
description: ""
project: community
lastmod: 2011-08-08T19:17:34-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg04269"
mailinglist_parent_id: "msg04198"
author_name: "Ryan Zezeski"
project_section: "mailinglistitem"
sent_date: 2011-08-08T19:17:34-07:00
---


Barron,

The score is indeed in the KeyData parameter when running a mapred job with
a Search query as input. In Erlang the KeyData variable would hold a value
something like `{struct, [{score, [1.0]}, {p, [4,16]}, ...]}`. Taking a
look at the Java client it seems the functionality doesn't currently exist
but a PR is in the works [1]. If I feel ambitious after dinner perhaps I'll
see if I can get it working.

-Ryan

[1]: https://github.com/basho/riak-java-client/pull/32

On Wed, Aug 3, 2011 at 1:55 PM, Barron Logan  wrote:

&gt; hello,
&gt;
&gt; we are using riak search in our project via the riak-java client.
&gt;
&gt; using mapreduce over search; we are getting back bucket-key pairs but need
&gt; to get the search-related scores for each returned object as well.
&gt;
&gt; we believe that the score may be in KeyData parameter but are unsure of how
&gt; to retrieve it?
&gt;
&gt; can someone give an example of how to write a custom map function (js?) to
&gt; retrieve the score, or give some additional guidance please?
&gt;
&gt; advTHANKSance,
&gt;
&gt; -barron
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

