---
title: "Re: Unable to store certain documents in Riak - child_terminated	errors"
description: ""
project: community
lastmod: 2012-02-02T11:59:19-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06506"
mailinglist_parent_id: "msg06502"
author_name: "Michael Jakl"
project_section: "mailinglistitem"
sent_date: 2012-02-02T11:59:19-08:00
---


As it turns out, the 1.0.3 upgrade has nothing to do with the problem,
I've downgraded to 1.0.2 yielding the same errors.

2012-02-02 20:56:47.405 [error] &lt;0.352.0&gt; gen\_fsm &lt;0.352.0&gt; in state
active terminated with reason: no function clause matching
riak\_kv\_vnode:put\_merge(true, &lt;&lt;"true"&gt;&gt;,
{r\_object,&lt;&lt;"documents"&gt;&gt;,&lt;&lt;"Twitter\_164711056936144897"&gt;&gt;,[{r\_content,{dict,7,16,16,8,80,48,{[]...}...}...}]...},
{r\_object,&lt;&lt;"documents"&gt;&gt;,&lt;&lt;"Twitter\_164711056936144897"&gt;&gt;,[{r\_content,{dict,7,16,16,8,80,48,{[]...}...}...}]...},
&lt;&lt;202,121,10,114,78,248,151,255&gt;&gt;, 63495431807)
2012-02-02 20:56:47.407 [error] &lt;0.352.0&gt; CRASH REPORT Process
&lt;0.352.0&gt; with 0 neighbours crashed with reason: no function clause
matching riak\_kv\_vnode:put\_merge(true, &lt;&lt;"true"&gt;&gt;,
{r\_object,&lt;&lt;"documents"&gt;&gt;,&lt;&lt;"Twitter\_164711056936144897"&gt;&gt;,[{r\_content,{dict,7,16,16,8,80,48,{[]...}...}...}]...},
{r\_object,&lt;&lt;"documents"&gt;&gt;,&lt;&lt;"Twitter\_164711056936144897"&gt;&gt;,[{r\_content,{dict,7,16,16,8,80,48,{[]...}...}...}]...},
&lt;&lt;202,121,10,114,78,248,151,255&gt;&gt;, 63495431807)
2012-02-02 20:56:47.409 [error] &lt;0.95.0&gt; Supervisor
riak\_core\_vnode\_sup had child undefined started with
{riak\_core\_vnode,start\_link,undefined} at &lt;0.352.0&gt; exit with reason
no function clause matching riak\_kv\_vnode:put\_merge(true, &lt;&lt;"true"&gt;&gt;,
{r\_object,&lt;&lt;"documents"&gt;&gt;,&lt;&lt;"Twitter\_164711056936144897"&gt;&gt;,[{r\_content,{dict,7,16,16,8,80,48,{[]...}...}...}]...},
{r\_object,&lt;&lt;"documents"&gt;&gt;,&lt;&lt;"Twitter\_164711056936144897"&gt;&gt;,[{r\_content,{dict,7,16,16,8,80,48,{[]...}...}...}]...},
&lt;&lt;202,121,10,114,78,248,151,255&gt;&gt;, 63495431807) in context
child\_terminated

Anyone got an idea what I could try to get it working?

Cheers,
Michael


On Thu, Feb 2, 2012 at 17:40, Michael Jakl  wrote:
&gt; Hi, I've recently upgraded to Riak 1.0.3, now Riak won't accept
&gt; certain documents anymore.
&gt;
&gt; I'm running Riak 1.0.3 in a three node configuration on Linux Debian
&gt; 6.0 with increased file-handle-limit and the eleveldb backend.
&gt; On the client side I use the java client, also version 1.0.3. I've
&gt; tried the protocol buffer and the HTTP connection, both with the same
&gt; result.
&gt;
&gt; Is there something obvious in the logs I haven't seen? Other types of
&gt; documents are accepted as always.
&gt;
&gt; Is it possible that the document is malformed since the error message
&gt; contains "no function clause matching riak\_kv\_vnode:put\_merge"?
&gt;
&gt; I'm not 100% sure it has to do with the upgrade, but the times seem to
&gt; correlate.
&gt;
&gt; Please help,
&gt; Michael
&gt;
&gt; console.log:
&gt; 2012-02-02 17:22:09.445 [error] &lt;0.402.0&gt; gen\_fsm &lt;0.402.0&gt; in state
&gt; active terminated with reason: no function clause matching
&gt; riak\_kv\_vnode:put\_merge(true, &lt;&lt;"true"&gt;&gt;,
&gt; {r\_object,&lt;&lt;"documents"&gt;&gt;,&lt;&lt;"Twitter\_164708349135433728"&gt;&gt;,[{r\_content,{dict,7,16,16,8,80,48,{[]...}...}...}]...},
&gt; {r\_object,&lt;&lt;"documents"&gt;&gt;,&lt;&lt;"Twitter\_164708349135433728"&gt;&gt;,[{r\_content,{dict,7,16,16,8,80,48,{[]...}...}...}]...},
&gt; &lt;&lt;202,121,10,114,78,248,151,237&gt;&gt;, 63495418929)
&gt; 2012-02-02 17:22:09.447 [error] &lt;0.402.0&gt; CRASH REPORT Process
&gt; &lt;0.402.0&gt; with 0 neighbours crashed with reason: no function clause
&gt; matching riak\_kv\_vnode:put\_merge(true, &lt;&lt;"true"&gt;&gt;,
&gt; {r\_object,&lt;&lt;"documents"&gt;&gt;,&lt;&lt;"Twitter\_164708349135433728"&gt;&gt;,[{r\_content,{dict,7,16,16,8,80,48,{[]...}...}...}]...},
&gt; {r\_object,&lt;&lt;"documents"&gt;&gt;,&lt;&lt;"Twitter\_164708349135433728"&gt;&gt;,[{r\_content,{dict,7,16,16,8,80,48,{[]...}...}...}]...},
&gt; &lt;&lt;202,121,10,114,78,248,151,237&gt;&gt;, 63495418929)
&gt; 2012-02-02 17:22:09.449 [error] &lt;0.105.0&gt; Supervisor
&gt; riak\_core\_vnode\_sup had child undefined started with
&gt; {riak\_core\_vnode,start\_link,undefined} at &lt;0.402.0&gt; exit with reason
&gt; no function clause matching riak\_kv\_vnode:put\_merge(true, &lt;&lt;"true"&gt;&gt;,
&gt; {r\_object,&lt;&lt;"documents"&gt;&gt;,&lt;&lt;"Twitter\_164708349135433728"&gt;&gt;,[{r\_content,{dict,7,16,16,8,80,48,{[]...}...}...}]...},
&gt; {r\_object,&lt;&lt;"documents"&gt;&gt;,&lt;&lt;"Twitter\_164708349135433728"&gt;&gt;,[{r\_content,{dict,7,16,16,8,80,48,{[]...}...}...}]...},
&gt; &lt;&lt;202,121,10,114,78,248,151,237&gt;&gt;, 63495418929) in context
&gt; child\_terminated
&gt; 2012-02-02 17:26:09.477 [error] &lt;0.2494.0&gt; gen\_fsm &lt;0.2494.0&gt; in state
&gt; active terminated with reason: no function clause matching
&gt; riak\_kv\_vnode:put\_merge(true, &lt;&lt;"true"&gt;&gt;,
&gt; {r\_object,&lt;&lt;"documents"&gt;&gt;,&lt;&lt;"Twitter\_164708349135433728"&gt;&gt;,[{r\_content,{dict,7,16,16,8,80,48,{[]...}...}...}]...},
&gt; {r\_object,&lt;&lt;"documents"&gt;&gt;,&lt;&lt;"Twitter\_164708349135433728"&gt;&gt;,[{r\_content,{dict,7,16,16,8,80,48,{[]...}...}...}]...},
&gt; &lt;&lt;202,121,10,114,78,248,151,237&gt;&gt;, 63495419169)
&gt; 2012-02-02 17:26:09.480 [error] &lt;0.2494.0&gt; CRASH REPORT Process
&gt; &lt;0.2494.0&gt; with 0 neighbours crashed with reason: no function clause
&gt; matching riak\_kv\_vnode:put\_merge(true, &lt;&lt;"true"&gt;&gt;,
&gt; {r\_object,&lt;&lt;"documents"&gt;&gt;,&lt;&lt;"Twitter\_164708349135433728"&gt;&gt;,[{r\_content,{dict,7,16,16,8,80,48,{[]...}...}...}]...},
&gt; {r\_object,&lt;&lt;"documents"&gt;&gt;,&lt;&lt;"Twitter\_164708349135433728"&gt;&gt;,[{r\_content,{dict,7,16,16,8,80,48,{[]...}...}...}]...},
&gt; &lt;&lt;202,121,10,114,78,248,151,237&gt;&gt;, 63495419169)
&gt; 2012-02-02 17:26:09.483 [error] &lt;0.105.0&gt; Supervisor
&gt; riak\_core\_vnode\_sup had child undefined started with
&gt; {riak\_core\_vnode,start\_link,undefined} at &lt;0.2494.0&gt; exit with reason
&gt; no function clause matching riak\_kv\_vnode:put\_merge(true, &lt;&lt;"true"&gt;&gt;,
&gt; {r\_object,&lt;&lt;"documents"&gt;&gt;,&lt;&lt;"Twitter\_164708349135433728"&gt;&gt;,[{r\_content,{dict,7,16,16,8,80,48,{[]...}...}...}]...},
&gt; {r\_object,&lt;&lt;"documents"&gt;&gt;,&lt;&lt;"Twitter\_164708349135433728"&gt;&gt;,[{r\_content,{dict,7,16,16,8,80,48,{[]...}...}...}]...},
&gt; &lt;&lt;202,121,10,114,78,248,151,237&gt;&gt;, 63495419169) in context
&gt; child\_terminated
&gt;
&gt; crash.log
&gt; 2012-02-02 17:26:09 =SUPERVISOR REPORT====
&gt;     Supervisor: {local,riak\_core\_vnode\_sup}
&gt;     Context:    child\_terminated
&gt;     Reason:
&gt; {function\_clause,[{riak\_kv\_vnode,put\_merge,[true,&lt;&lt;"true"&gt;&gt;,{r\_object,&lt;&lt;"documents"&gt;&gt;,&lt;&lt;"Twitter\_164708349135433728"&gt;&gt;,[{r\_content,{dict,7,16,16,8,80,48,{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},{{[],[],[[&lt;&lt;"Links"&gt;&gt;]],[],[],[],[],[],[],[],[[&lt;&lt;"content-type"&gt;&gt;,116,101,120,116,47,112,108,97,105,110],[&lt;&lt;"X-Riak-VTag"&gt;&gt;,51,52,68,86,115,119,97,66,70,115,48,88,71,87,82,90,52,106,109,48,88,99]],[[&lt;&lt;"index"&gt;&gt;]],[],[[&lt;&lt;"X-Riak-Last-Modified"&gt;&gt;|{1328,199729,299974}]],[],[[&lt;&lt;"charset"&gt;&gt;,85,84,70,45,56],[&lt;&lt;"X-Riak-Meta"&gt;&gt;]]}}},&lt;&lt;"{"\_original":{"contributors":null,"truncated":false,"text":"#Health
&gt; Chinese workers kidnapped in Egypt freed: BEIJING (Reuters) -
&gt; Twenty-five Chinese kidnapped in Egypt wer...
&gt; http://t.co/bJ3gberQ","in\_reply\_to\_status\_id":null,"id":164708349135433728,"source":"href=\"http://twitterfeed.com\"
&gt; rel=\"nofollow\"&gt;twitterfeed","retweeted":false,"coordinates":null,"entities":{"user\_mentions":[],"hashtags":[{"indices":[0,7],"text":"Health"}],"urls":[{"indices":[116,136],"url":"http://t.co/bJ3gberQ","expanded\_url":"http://j.mp/wvSByE","display\_url":"j.mp/wvSByE"}]},"in\_reply\_to\_screen\_name":null,"id\_str":"164708349135433728","retweet\_count":0,"in\_reply\_to\_user\_id":null,"favorited":false,"user":{"follow\_request\_sent":null,"profile\_use\_background\_image":true,"id":242603575,"verified":false,"profile\_image\_url\_https":"https://si0.twimg.com/profile\_images/1225118000/Lean\_Fit\_Lifestyle2\_normal.jpg","profile\_sidebar\_fill\_color":"DDEEF6","geo\_enabled":false,"profile\_text\_color":"333333","followers\_count":4872,"protected":false,"location":"72829
&gt; Engstingen","default\_profile\_image":false,"id\_str":"242603575","utc\_offset":null,"statuses\_count":6642,"description":"Health
&gt; & Fitness is your source for health articles and information about
&gt; nutrition, diseases, medical conditions, weight loss, exercise and
&gt; more... 
&gt; ","friends\_count":5238,"profile\_link\_color":"0084B4","profile\_image\_url":"http://a3.twimg.com/profile\_images/1225118000/Lean\_Fit\_Lifestyle2\_normal.jpg","notifications":null,"show\_all\_inline\_media":false,"profile\_background\_image\_url\_https":"https://si0.twimg.com/profile\_background\_images/324146416/TwitterBG\_1.jpg","profile\_background\_color":"737479","profile\_background\_image\_url":"http://a3.twimg.com/profile\_background\_images/324146416/TwitterBG\_1.jpg","screen\_name":"HealthzFitness","lang":"en","following":null,"profile\_background\_tile":false,"favourites\_count":0,"name":"Health
&gt; Fitness","url":"http://j.mp/v9pTtf","created\_at":"Tue Jan 25 04:39:46
&gt; +0000 
&gt; 2011","contributors\_enabled":false,"time\_zone":null,"profile\_sidebar\_border\_color":"C0DEED","default\_profile":false,"is\_translator":false,"listed\_count":20},"geo":null,"in\_reply\_to\_user\_id\_str":null,"possibly\_sensitive":false,"created\_at":"Wed
&gt; Feb 01 13:55:05 +0000
&gt; 2012","possibly\_sensitive\_editable":true,"in\_reply\_to\_status\_id\_str":null,"place":null},"contentType":"text","language":"EN","title":"@HealthzFitness:
&gt; #Health Chinese workers kidnapped in Egypt freed: BEIJING (Reuters) -
&gt; Twenty-five Chinese kidnapped in Egypt wer...
&gt; http://t.co/bJ3gberQ","sourceName":"Twitter
&gt; @HealthzFitness","country":"--","author":"HealthzFitness","mediaType":"Microblog","publishDate":"2012-02-01T13:55:05Z","content":"#Health
&gt; Chinese workers kidnapped in Egypt freed: BEIJING (Reuters) -
&gt; Twenty-five Chinese kidnapped in Egypt wer... http://t.co/bJ3gberQ
&gt; ","link":"https://twitter.com/#!/HealthzFitness/status/164708349135433728","provider":"Twitter","homepage":"http://twitter.com/HealthzFitness","id":"Twitter\_164708349135433728","tags":{"Topic":["Twenty-Five","Workers","Egypt"],"Location":["Egypt","BEIJING"]}}"&gt;&gt;}],[{&lt;&lt;115,130,209,154,78,248,151,255&gt;&gt;,{1,63495418929}}],{dict,1,16,16,8,80,48,{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[[clean|true]],[]}}},undefined},{r\_object,&lt;&lt;"documents"&gt;&gt;,&lt;&lt;"Twitter\_164708349135433728"&gt;&gt;,[{r\_content,{dict,7,16,16,8,80,48,{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},{{[],[],[[&lt;&lt;"Links"&gt;&gt;]],[],[],[],[],[],[],[],[[&lt;&lt;"content-type"&gt;&gt;,116,101,120,116,47,112,108,97,105,110],[&lt;&lt;"X-Riak-VTag"&gt;&gt;,55,102,102,103,56,122,49,48,79,66,88,70,122,75,88,72,85,79,79,70,101,68]],[[&lt;&lt;"index"&gt;&gt;]],[],[[&lt;&lt;"X-Riak-Last-Modified"&gt;&gt;|{1328,199969,482660}]],[],[[&lt;&lt;"charset"&gt;&gt;,85,84,70,45,56],[&lt;&lt;"X-Riak-Meta"&gt;&gt;]]}}},&lt;&lt;"{"\_original":{"contributors":null,"truncated":false,"text":"#Health
&gt; Chinese workers kidnapped in Egypt freed: BEIJING (Reuters) -
&gt; Twenty-five Chinese kidnapped in Egypt wer...
&gt; http://t.co/bJ3gberQ","in\_reply\_to\_status\_id":null,"id":164708349135433728,"source":"href=\"http://twitterfeed.com\"
&gt; rel=\"nofollow\"&gt;twitterfeed","retweeted":false,"coordinates":null,"entities":{"user\_mentions":[],"hashtags":[{"indices":[0,7],"text":"Health"}],"urls":[{"indices":[116,136],"url":"http://t.co/bJ3gberQ","expanded\_url":"http://j.mp/wvSByE","display\_url":"j.mp/wvSByE"}]},"in\_reply\_to\_screen\_name":null,"id\_str":"164708349135433728","retweet\_count":0,"in\_reply\_to\_user\_id":null,"favorited":false,"user":{"follow\_request\_sent":null,"profile\_use\_background\_image":true,"id":242603575,"verified":false,"profile\_image\_url\_https":"https://si0.twimg.com/profile\_images/1225118000/Lean\_Fit\_Lifestyle2\_normal.jpg","profile\_sidebar\_fill\_color":"DDEEF6","geo\_enabled":false,"profile\_text\_color":"333333","followers\_count":4872,"protected":false,"location":"72829
&gt; Engstingen","default\_profile\_image":false,"id\_str":"242603575","utc\_offset":null,"statuses\_count":6642,"description":"Health
&gt; & Fitness is your source for health articles and information about
&gt; nutrition, diseases, medical conditions, weight loss, exercise and
&gt; more... 
&gt; ","friends\_count":5238,"profile\_link\_color":"0084B4","profile\_image\_url":"http://a3.twimg.com/profile\_images/1225118000/Lean\_Fit\_Lifestyle2\_normal.jpg","notifications":null,"show\_all\_inline\_media":false,"profile\_background\_image\_url\_https":"https://si0.twimg.com/profile\_background\_images/324146416/TwitterBG\_1.jpg","profile\_background\_color":"737479","profile\_background\_image\_url":"http://a3.twimg.com/profile\_background\_images/324146416/TwitterBG\_1.jpg","screen\_name":"HealthzFitness","lang":"en","following":null,"profile\_background\_tile":false,"favourites\_count":0,"name":"Health
&gt; Fitness","url":"http://j.mp/v9pTtf","created\_at":"Tue Jan 25 04:39:46
&gt; +0000 
&gt; 2011","contributors\_enabled":false,"time\_zone":null,"profile\_sidebar\_border\_color":"C0DEED","default\_profile":false,"is\_translator":false,"listed\_count":20},"geo":null,"in\_reply\_to\_user\_id\_str":null,"possibly\_sensitive":false,"created\_at":"Wed
&gt; Feb 01 13:55:05 +0000
&gt; 2012","possibly\_sensitive\_editable":true,"in\_reply\_to\_status\_id\_str":null,"place":null},"contentType":"text","language":"EN","title":"@HealthzFitness:
&gt; #Health Chinese workers kidnapped in Egypt freed: BEIJING (Reuters) -
&gt; Twenty-five Chinese kidnapped in Egypt wer...
&gt; http://t.co/bJ3gberQ","sourceName":"Twitter
&gt; @HealthzFitness","country":"--","author":"HealthzFitness","mediaType":"Microblog","publishDate":"2012-02-01T13:55:05Z","content":"#Health
&gt; Chinese workers kidnapped in Egypt freed: BEIJING (Reuters) -
&gt; Twenty-five Chinese kidnapped in Egypt wer... http://t.co/bJ3gberQ
&gt; ","link":"https://twitter.com/#!/HealthzFitness/status/164708349135433728","provider":"Twitter","homepage":"http://twitter.com/HealthzFitness","id":"Twitter\_164708349135433728","tags":{"Topic":["Twenty-Five","Workers","Egypt"],"Location":["Egypt","BEIJING"]}}"&gt;&gt;}],[{&lt;&lt;115,130,209,154,78,248,151,255&gt;&gt;,{1,63495418929}}],{dict,1,16,16,8,80,48,{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[[clean|true]],[]}}},undefined},&lt;&lt;202,121,10,114,78,248,151,237&gt;&gt;,63495419169]},{riak\_kv\_vnode,prepare\_put,2},{riak\_kv\_vnode,do\_put,7},{riak\_kv\_vnode,handle\_command,3},{riak\_core\_vnode,vnode\_command,3},{gen\_fsm,handle\_msg,7},{proc\_lib,init\_p\_do\_apply,3}]}
&gt;     Offender:
&gt; [{pid,&lt;0.2494.0&gt;},{name,undefined},{mfargs,{riak\_core\_vnode,start\_link,undefined}},{restart\_type,temporary},{shutdown,300000},{child\_type,worker}]

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

