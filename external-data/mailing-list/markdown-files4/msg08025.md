---
title: "Re: 2i with the riakc client"
description: ""
project: community
lastmod: 2012-07-22T14:05:46-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08025"
mailinglist_parent_id: "msg08024"
author_name: "Jeremy Ong"
project_section: "mailinglistitem"
sent_date: 2012-07-22T14:05:46-07:00
---


Ah perfect that works thanks.

I saw the github issue asking for documentation on this. I feel woefully
unqualified to write this up, but would be happy to for the benefit of
other users running into similar issues as I.

Thanks,
Jeremy

On Sun, Jul 22, 2012 at 2:02 PM, Sean Cribbs  wrote:

&gt; Jeremy,
&gt;
&gt; Your index field must have a "\_bin" or "\_int" suffix on it to signify
&gt; whether it is a binary or an integer. Add "\_bin" to the field name you have
&gt; in your example, e.g.
&gt;
&gt; MetaData = dict:store(&lt;&lt;"index"&gt;&gt;, [{&lt;&lt;"afield\_bin"&gt;&gt;, &lt;&lt;"avalue"&gt;&gt;}],
&gt; dict:new())
&gt;
&gt; On Sun, Jul 22, 2012 at 4:49 PM, Jeremy Ong  wrote:
&gt;
&gt;&gt; I am trying to store objects with indexed metadata but am running into
&gt;&gt; various difficulties (commands in bold).
&gt;&gt;
&gt;&gt; \*Obj = riakc\_obj:new(&lt;&lt;"foo"&gt;&gt;, &lt;&lt;"bar"&gt;&gt;, &lt;&lt;"zing"&gt;&gt;).\*
&gt;&gt; {riakc\_obj,&lt;&lt;"foo"&gt;&gt;,&lt;&lt;"bar"&gt;&gt;,undefined,[],undefined,
&gt;&gt; &lt;&lt;"zing"&gt;&gt;}
&gt;&gt; \*
&gt;&gt; \*
&gt;&gt; \*MetaData = dict:store(&lt;&lt;"index"&gt;&gt;, [{"afield", "avalue"}], dict:new()).\*
&gt;&gt; {dict,1,16,16,8,80,48,
&gt;&gt; {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
&gt;&gt; {{[],[],[],[],[],[],[],[],[],[],[],
&gt;&gt; [[&lt;&lt;"index"&gt;&gt;,{"afield","avalue"}]],
&gt;&gt; [],[],[],[]}}}
&gt;&gt;
&gt;&gt; \*Obj1 = riakc\_obj:update\_metadata(Obj, MetaData).\*
&gt;&gt; {riakc\_obj,&lt;&lt;"foo"&gt;&gt;,&lt;&lt;"bar"&gt;&gt;,undefined,[],
&gt;&gt; {dict,1,16,16,8,80,48,
&gt;&gt; {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],...},
&gt;&gt; {{[],[],[],[],[],[],[],[],[],[],[],[[...]],[],...}}},
&gt;&gt; &lt;&lt;"zing"&gt;&gt;}
&gt;&gt;
&gt;&gt; \*{ok, Pid} = riakc\_pb\_socket:start\_link("127.0.0.1", 8087).\*
&gt;&gt; {ok,&lt;0.103.0&gt;}
&gt;&gt;
&gt;&gt; \*riakc\_pb\_socket:put(Pid, Obj1).\*
&gt;&gt; \*
&gt;&gt; \*
&gt;&gt; {error,{0,
&gt;&gt; &lt;&lt;"{precommit\_fail,[{unknown\_field\_type,&lt;&lt;\"afield\"&gt;&gt;}]}"&gt;&gt;}}
&gt;&gt;
&gt;&gt;
&gt;&gt; I get this error when I try other things for the field name too. Any
&gt;&gt; ideas? I tried to look for documentation but nothing seems to be coming up.
&gt;&gt;
&gt;&gt; Thanks,
&gt;&gt; Jeremy
&gt;&gt;
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;
&gt;&gt;
&gt;
&gt;
&gt; --
&gt; Sean Cribbs 
&gt; Software Engineer
&gt; Basho Technologies, Inc.
&gt; http://basho.com/
&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

