---
title: "Re: CorrugatedIron v0.1.3 Released"
description: ""
project: community
lastmod: 2011-09-30T14:06:33-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg04956"
mailinglist_parent_id: "msg04946"
author_name: "OJ Reeves"
project_section: "mailinglistitem"
sent_date: 2011-09-30T14:06:33-07:00
---


Hi Kyle,

Thanks for the feedback on our .NET client. I'm sorry to hear that you've
had issues with it. I'm very keen on hearing more about the issues and
details of the level of complexity you're struggling with so that Jeremiah
and I can work on making it better.

Configuration is one of those things that annoys everyone :) It's incredibly
hard to provide power, flexibility and simplicity all at the same time when
dealing with configuration. One thing that I think is important to bear in
mind is the target of the library is .NET. For many years this kind of
configuration has be done using app.config or web.config settings when
building .NET applications and that it something that we didn't want to fly
in the face of. While I do feel it's important to be able to configure the
library through code (in case you're using a REPL like FSI), I felt it was
more important to support the idiomatic .NET approach to configuration. Yes
that does come with a bit of XML configuration (which I also hate) but is in
many ways a necessary evil.

We had feedback on github and on HN from people indicating that they had
different preferences for the configuration and we sat up and listened. We
have since made some changes to the way you can configure CI, which can
completely do away with using the XML configuration if you so wish. This
does, however, mean you have to configure the client in code. If that's what
you decide to do you may have issues as you deploy to different
environments. I would still recommend using the XML configuration if you can
as managing that configuration for multiple environments is much easier.
YMMV :)

I'm not sure about the state of other clients, but CI supports talking to a
cluster both directly or via a proxy/loadbalancer and also has built-in
connection pooling. Having support for all of these things adds complexity.
This is the typical features vs simplicity tradeoff. Our feelings on the
topic were that we didn't want to limit .NET developers in their options. We
also felt that, at least in the short term, that .NET developers might not
want to deal with deploying a load balancer in front of their development
clusters, and hence built-in support for talking to a cluster was a must.
I'm fairly certain that there is at least one other client (for another
language) that doesn't have cluster/connection pooling support built-in and
the people in that community have asked for on a few occasions. A classic
case of damned if you do, damned if you don't :)

May I ask what issues in particular you have with getting the configuration
to work? Do you feel that the documentation on the topic is lacking? Are the
sample applications and code snippets not clear enough? Are the required
fields confusing in some way? Error handling is certainly something that we
can put a bit more work into.

As far as the API or object model is concerned, could you please elaborate
on what you found difficult or complicated? Is this another case of poor
documentation and bad examples? Do you feel that it doesn't do a good job of
being a .NET library and using the features of the languages where
appropriate? Jeremiah and I are obviously very keen to remove unnecessary
complexity and reduce the friction that people feel when using the lib, so
any detail here would be greatly appreciated.

Have you had a look at the Riak clients written in strongly-typed languages?
How do they compare for complexity? One of the "pains" when dealing with the
likes of .NET is dealing with types. The nature of the platform adds
constraints that languages like Ruby and dynamic languages like
Erlang/Python don't have. This is another thing that's hard to juggle while
building a Riak client. Any thoughts that you might have on this topic would
be well received.

&gt; My suggestion for anybody trying to design a new client library is to
mimic the API of
&gt; the existing official libraries first and then add fancy features :-)

While this sounds sensible and nice in theory, in practice it's actually not
that simple (or the right approach) for a few reasons. Languages vary a
great deal and not just in syntax. Attempting to "port" an existing client
to a language doesn't do the target language justice and can often fly in
the face of convention for that language. I would be rather disturbed if I
saw a direct port of the Erlang API in the .NET world. Why? Because they're
vastly different beasts and the .NET version of the API would be horrible
and nothing like any other .NET API. Also, it just wouldn't be possible
given the nature of Erlang's dynamic typing vs .NET strong typing. In short:
a library should fit the technical ecosystem of the language it's written
in. That, in my humble opinion, would be more of a negative influence on the
uptake of the library than anything else. I feel that a library should
respect the platform it's written for. Happy to hear your thoughts on this
too!

&gt; If it's too complicated (to understand and to setup) then
&gt; people will simply give up and go somewhere else.

Absolutely agree, which is why I'm very keen to hear about the issues you've
had and to figure out how we can make them better. So far the uptake of CI
has been quite strong and the feedback very positive. I'm super keen to help
you so that you become one of the happy users :)

One last question: are you aware of any other .NET clients which have a
similar set of features? I can only find two and they haven't been touched
for over a year.

Thanks again for the feedback, I look forward to hearing more and working
with you to make your experience with CI much better!
All the best.
OJ

On 1 October 2011 04:14, Kyle Quest  wrote:

&gt; I looked at a lot of different Riak libraries in different languages
&gt; for my work with Riak and CorrugatedIron was one of them. This gave me
&gt; an opportunity to compare how each of them worked. CorrugatedIron was
&gt; one of the more complicated ones :-) It was also one of the hardest to
&gt; make it work because of the app config design (the library generated
&gt; exception when it tried to load the config data). My suggestion for
&gt; anybody trying to design a new client library is to mimic the API of
&gt; the existing official libraries first and then add fancy features :-)
&gt; This will help the adoption. If it's too complicated (to understand
&gt; and to setup) then people will simply give up and go somewhere else.
&gt;
&gt; On Fri, Sep 30, 2011 at 10:45 AM, Jeremiah Peschka
&gt;  wrote:
&gt; &gt; Thanks. I can't take all the credit/blame - OJ Reeves has written massive
&gt; amounts of code, too.
&gt; &gt;
&gt; &gt; We're aware that many people like to complain about our use of config
&gt; files. When you write a piece of software, you make the choice between
&gt; shipping software or adding more features. We chose to ship CorrugatedIron
&gt; and see then what people liked and what they didn't like.
&gt; &gt;
&gt; &gt; People didn't like our use of .NET's crusty old config system that they
&gt; even created a github issue about it:
&gt; https://github.com/DistributedNonsense/CorrugatedIron/issues/4
&gt; &gt;
&gt; &gt; We hear you and will be moving to get this out as soon as we can after we
&gt; get the Riak 1.0 feature compatibility ironed out.
&gt; &gt;
&gt; &gt; Is our use of .NET configuration files blocking adoption of
&gt; CorrugatedIron in your organization?
&gt; &gt; ---
&gt; &gt; Jeremiah Peschka - Founder, Brent Ozar PLF, LLC
&gt; &gt; Microsoft SQL Server MVP
&gt; &gt;
&gt; &gt; On Sep 30, 2011, at 1:40 PM, Kyle Quest wrote:
&gt; &gt;
&gt; &gt;&gt; Jeremiah, really nice job on CorrugatedIron! Some of it is a bit too
&gt; &gt;&gt; over-engineered and more complicated than it has to be. For example,
&gt; &gt;&gt; you can't just create a RiakClient object and interact with Riak (like
&gt; &gt;&gt; you can do with the official Riak client libraries)... To create a
&gt; &gt;&gt; RiakClient (in CorrugatedIron) you need to have a RiakCluster object
&gt; &gt;&gt; to pass to the RiakClient object constructor. And you can't easily
&gt; &gt;&gt; create a RiakCluster object either. You can only create it from a
&gt; &gt;&gt; config section (there's no way to explicitly provide the config values
&gt; &gt;&gt; directly in the API). Not every app uses .NET app config files and
&gt; &gt;&gt; it's also not uncommon for the app config code to cause exceptions
&gt; &gt;&gt; because it can be brittle...
&gt; &gt;&gt;
&gt; &gt;&gt; On Thu, Sep 22, 2011 at 3:33 PM, Jeremiah Peschka
&gt; &gt;&gt;  wrote:
&gt; &gt;&gt;&gt; I just finished up v0.1.3 of CorrugatedIron, everyone's favorite .NET
&gt; 4.0 Riak client. There is no new functionality in this release, just a fix
&gt; from Matthew Whitfield:
&gt; https://github.com/DistributedNonsense/CorrugatedIron/issues/18
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; Thanks Matt for helping us make CorrugatedIron better!
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; Binaries have been pushed to NuGet (
&gt; http://nuget.org/List/Packages/CorrugatedIron) and source is available on
&gt; github (
&gt; https://github.com/DistributedNonsense/CorrugatedIron/commit/e9c0af10465176f117bbbf04724087063f9b7fd2
&gt; )
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; Enjoy!
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; ---
&gt; &gt;&gt;&gt; Jeremiah Peschka - Founder, Brent Ozar PLF, LLC
&gt; &gt;&gt;&gt; Microsoft SQL Server MVP
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; &gt;&gt;&gt; riak-users mailing list
&gt; &gt;&gt;&gt; riak-users@lists.basho.com
&gt; &gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; &gt;&gt;&gt;
&gt; &gt;
&gt; &gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;



-- 

OJ Reeves
http://buffered.io/
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

