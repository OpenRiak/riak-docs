---
title: "Re: Controlling order of results from link phase"
description: ""
project: community
lastmod: 2011-06-26T15:36:09-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03831"
mailinglist_parent_id: "msg03830"
author_name: "Andrew Berman"
project_section: "mailinglistitem"
sent_date: 2011-06-26T15:36:09-07:00
---


I think I found the answer and it is no, I cannot control the sort. I
found the code here in riak\_kv\_wm\_link\_walker.erl:

links(Object) -&gt;
 MDs = riak\_object:get\_metadatas(Object),
 lists:umerge(
 [ case dict:find(?MD\_LINKS, MD) of
 {ok, L} -&gt;
 [ [B,K,T] || {{B,K},T} &lt;- lists:sort(L) ];
 error -&gt; []
 end
 || MD &lt;- MDs ]).

Why run lists:sort? Shouldn't the sort be up to the user after he
gets the actual object? I don't understand why the sort processing is
necessary at the link phase. Thoughts?

--Andrew

On Sun, Jun 26, 2011 at 3:15 PM, Andrew Berman  wrote:
&gt; I've noticed that when I run the link function, it automatically
&gt; orders the links based on Id.  Is there a way to tell it not to sort
&gt; the links?  In other words, I want the links in the order in which
&gt; they were put in the list (most recent at the head of the list) and I
&gt; see from Rekon that that is how they are being stored.  Basically, I'm
&gt; running a reduce\_slice on the result of the link phase so that Riak
&gt; doesn't load up all the objects with which the links are pointing.  If
&gt; the answer is no, I cannot control the order of the links, is the only
&gt; option to prepend something like the time (e.g. millis since
&gt; 1-1-1970)?
&gt;
&gt; Thanks,
&gt;
&gt; Andrew
&gt;

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

