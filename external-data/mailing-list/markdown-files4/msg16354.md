---
title: "Fwd: riak-users post from wang.changmao@gmail.com requires approval"
description: ""
project: community
lastmod: 2015-08-04T18:02:13-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16354"
author_name: "changmao wang"
project_section: "mailinglistitem"
sent_date: 2015-08-04T18:02:13-07:00
---


---------- Forwarded message ----------
From: changmao wang 
Date: Tue, Aug 4, 2015 at 6:37 PM
Subject: Re: riak-users post from wang.chang...@gmail.com requires approval
To: Matthew Brender 


Hi riak-users,

Thanks for your reply. However, I have some problems with my riak cluster.
It's pending on leaving status for 7 days after I removed 4 new added nodes.

root@cluster-s3-hd1:~# riak-admin member-status
================================= Membership
==================================
Status Ring Pending Node
-------------------------------------------------------------------------------
leaving 10.9% 10.9% 'riak@10.21.136.91'
leaving 9.4% 10.9% 'riak@10.21.136.92'
leaving 7.8% 10.9% 'riak@10.21.136.93'
leaving 7.8% 10.9% 'riak@10.21.136.94'
valid 10.9% 10.9% 'riak@10.21.136.66'
valid 10.9% 10.9% 'riak@10.21.136.71'
valid 14.1% 10.9% 'riak@10.21.136.76'
valid 17.2% 12.5% 'riak@10.21.136.81'
valid 10.9% 10.9% 'riak@10.21.136.86'

below is error log from riak@10.21.136.81
2015-08-04 01:04:03.883 [error]
&lt;0.27021.262&gt;@riak\_core\_handoff\_sender:start\_fold:262 ownership\_transfer
transfer of riak\_kv\_vnode from 'riak@10.21.136.81'
296867520082839655260123481645494988367611297792 to 'riak@10.21.136.92'
296867520082839655260123481645494988367611297792 failed because of enotconn
2015-08-04 01:04:03.883 [error]
&lt;0.195.0&gt;@riak\_core\_handoff\_manager:handle\_info:289 An outbound handoff of
partition riak\_kv\_vnode 296867520082839655260123481645494988367611297792
was terminated for reason: {shutdown,{error,enotconn}}
2015-08-04 04:38:39.512 [error] &lt;0.15702.1&gt; Trailing data, discarding (2753
bytes)
2015-08-04 08:06:39.080 [error]
&lt;0.26581.272&gt;@riak\_core\_handoff\_sender:start\_fold:262 ownership\_transfer
transfer of riak\_kv\_vnode from 'riak@10.21.136.81'
411047335499316445744786359201454599278231027712 to 'riak@10.21.136.93'
411047335499316445744786359201454599278231027712 failed because of enotconn
2015-08-04 08:06:39.081 [error]
&lt;0.195.0&gt;@riak\_core\_handoff\_manager:handle\_info:289 An outbound handoff of
partition riak\_kv\_vnode 411047335499316445744786359201454599278231027712
was terminated for reason: {shutdown,{error,enotconn}}
2015-08-04 18:07:53.040 [error]
&lt;0.6973.342&gt;@riak\_api\_pb\_server:handle\_info:141 Unrecognized message
{63685090,{error,timeout}}

Today I detached the network bond(we used the bond mode 6/0) in several
nodes of the riak cluster. After that, "ifconfig" command show decreased
"dropped" packages,
There're only 1~2 dropped network packages during the last four hours.

However, I want to know what's the status of the Riak cluster?
Currently I started riak-cs service on four new nodes. That's ok, they can
service.
how many hours those four node will take to leave the cluster?






On Tue, Aug 4, 2015 at 4:54 AM, Matthew Brender  wrote:

&gt; Hey Amao,
&gt;
&gt; Excuse the delay on this message being posted. You hit our upper limit on
&gt; size (see below). When possible, please link to a gist or another external
&gt; service to prevent this from being filtered.
&gt;
&gt; Thanks for your patience!
&gt; Matt
&gt;
&gt; \*Matt Brender | Developer Advocacy Lead\*
&gt; Basho Technologies
&gt; t: @mjbrender 
&gt;
&gt;
&gt; On Thu, Jul 30, 2015 at 5:35 AM,  wrote:
&gt;
&gt;&gt; As list administrator, your authorization is requested for the
&gt;&gt; following mailing list posting:
&gt;&gt;
&gt;&gt; List: riak-users@lists.basho.com
&gt;&gt; From: wang.chang...@gmail.com
&gt;&gt; Subject: riak handoff of partition error
&gt;&gt; Reason: Message body is too big: 3105110 bytes with a limit of 40 KB
&gt;&gt;
&gt;&gt; At your convenience, visit:
&gt;&gt;
&gt;&gt; http://lists.basho.com/mailman/admindb/riak-users\_lists.basho.com
&gt;&gt;
&gt;&gt; to approve or deny the request.
&gt;&gt;
&gt;&gt;
&gt;&gt; ---------- Forwarded message ----------
&gt;&gt; From: changmao wang 
&gt;&gt; To: riak-users@lists.basho.com
&gt;&gt; Cc:
&gt;&gt; Date: Thu, 30 Jul 2015 17:35:13 +0800
&gt;&gt; Subject: riak handoff of partition error
&gt;&gt; Hi Riak-users group,
&gt;&gt;
&gt;&gt; I have found some errors related to handoff of partition in
&gt;&gt; /etc/riak/log/errors.
&gt;&gt; Details are as below:
&gt;&gt;
&gt;&gt; 2015-07-30 16:04:33.643 [error]
&gt;&gt; &lt;0.12872.15&gt;@riak\_core\_handoff\_sender:start\_fold:262 ownership\_transfer
&gt;&gt; transfer of riak\_kv\_vnode from 'riak@10.21.136.76'
&gt;&gt; 45671926166590716193865151022383844364247891968 to 'riak@10.21.136.93'
&gt;&gt; 45671926166590716193865151022383844364247891968 failed because of enotconn
&gt;&gt; 2015-07-30 16:04:33.643 [error]
&gt;&gt; &lt;0.197.0&gt;@riak\_core\_handoff\_manager:handle\_info:289 An outbound handoff of
&gt;&gt; partition riak\_kv\_vnode 45671926166590716193865151022383844364247891968 was
&gt;&gt; terminated for reason: {shutdown,{error,enotconn}}
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; I have searched it with google and found related articles. However,
&gt;&gt; there's no solution.
&gt;&gt;
&gt;&gt; http://lists.basho.com/pipermail/riak-users\_lists.basho.com/2014-October/016052.html
&gt;&gt;
&gt;&gt; Attached is my riak-diag command log.
&gt;&gt;
&gt;&gt; Could you take a look at it?
&gt;&gt; --
&gt;&gt; Amao Wang
&gt;&gt; Best & Regards
&gt;&gt;
&gt;&gt;
&gt;&gt; ---------- Forwarded message ----------
&gt;&gt; From: riak-users-requ...@lists.basho.com
&gt;&gt; To:
&gt;&gt; Cc:
&gt;&gt; Date: Thu, 30 Jul 2015 05:35:17 -0400
&gt;&gt; Subject: confirm b09ffff9d9fa46d5152e206982a2e36734079f42
&gt;&gt; If you reply to this message, keeping the Subject: header intact,
&gt;&gt; Mailman will discard the held message. Do this if the message is
&gt;&gt; spam. If you reply to this message and include an Approved: header
&gt;&gt; with the list password in it, the message will be approved for posting
&gt;&gt; to the list. The Approved: header can also appear in the first line
&gt;&gt; of the body of the reply.
&gt;&gt;
&gt;
&gt;


-- 
Amao Wang
Best & Regards



-- 
Amao Wang
Best & Regards
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

