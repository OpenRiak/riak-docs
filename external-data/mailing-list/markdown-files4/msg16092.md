---
title: "Manipulating CRDTs inside commit hooks/mapreduces"
description: ""
project: community
lastmod: 2015-05-02T02:14:11-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16092"
author_name: "Cezary Kosko"
project_section: "mailinglistitem"
sent_date: 2015-05-02T02:14:11-07:00
---


Hi,

I've got a situation where I'd like to create a new map record with some
data inside a commit hook or a mapreduce job and then push it into Riak.

Some questions here:
1. Do I call riak\_kv\_crdt:new with the proper Bucket, Key & to\_mod("map")?
Does that overwrite what's in Riak, by any chance?
2. Can some1 give me an example of how to use riak\_kv\_crdt:update\_crdt? I
assume I'm supposed to use that one.
3. To upload the data, do I treat the worked on map as regular data and
then store it using riak\_client:put?

Or perhaps is there a more-recommended way to do that?

Kind regards,
Cezary
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

