---
title: "Re: @RiakIndex annotated field is not stored as part of value"
description: ""
project: community
lastmod: 2015-01-26T08:49:57-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15597"
mailinglist_parent_id: "msg15593"
author_name: "Santi Kumar"
project_section: "mailinglistitem"
sent_date: 2015-01-26T08:49:57-08:00
---


Yes. I'm using POJO and annotating one of the field with RiakIndex. When
I'm reading the object with the key, as the tag field is not part of the
object, while writing I dont have the tag value while writing the object.

Class Foo {

private String fooId;

@RiakIndex(name="barid")

private String barid;

.....

}

When I'm storing the object, I set the barid for the object and storing the
object. Annotation is taking care of tagging the object with barid.

When I query the object with barId, I have the barId value so I'm setting
barId to object and writing it. But If I lookup the object with fooId, as
barId value is not part of the object I cant tag the object with barid. SO
when I'm writing the object I'm losing the association .

So Is there any thing I'm missing to make it part of the object state. That
way as you said, When I read-modify-write, the tag value exist all the time.


Thanks

Santi


On Jan 26, 2015 7:46 PM, "Christopher Meiklejohn" 
wrote:

&gt;
&gt; &gt; On Jan 26, 2015, at 09:45, Santi Kumar  wrote:
&gt; &gt;
&gt; &gt; Hi
&gt; &gt; I'm defining a field of an object as 2i index with @RiakIndex. While
&gt; creating the object I initialised both the values and stored the object
&gt; against the key of that object and stored against the index.
&gt; &gt;
&gt; &gt; In a separate thread another field of the object is updated where I dont
&gt; have handle to the 2i field. So I simply updated the field and stored back.
&gt; As the 2i indexed field is not part of the object, that is gone as null and
&gt; 2i index is removed from that object.
&gt; &gt;
&gt; &gt; After this, any search method on the original index key is failing to
&gt; return this object. Is there any way to access 2i index corresponding to
&gt; the key of object or storing the 2i index field as part of the object.
&gt; &gt;
&gt; &gt; When I fetch the object with the key, I'm not able to see the filed
&gt; which is definied as 2i field?
&gt; &gt;
&gt; &gt; Please give me some clues on that.
&gt;
&gt; Hi Santi,
&gt;
&gt; When writing tags on objects for use with the 2i mechanism, it's required
&gt; that you write all tags for the object each write; most client libraries
&gt; will handle this if you perform a read-modify-write. Does this help
&gt; clarify?
&gt;
&gt; Thanks,
&gt; Chris
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

