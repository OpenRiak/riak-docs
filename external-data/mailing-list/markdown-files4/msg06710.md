---
title: "Re: Faster way to store a lot of small data?"
description: ""
project: community
lastmod: 2012-02-23T06:59:51-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06710"
mailinglist_parent_id: "msg06709"
author_name: "Russell Brown"
project_section: "mailinglistitem"
sent_date: 2012-02-23T06:59:51-08:00
---



On 23 Feb 2012, at 14:37, Jeremiah Peschka wrote:

&gt; Out of interest, to those of us who are rusty on their shell scripting, could 
&gt; you share the aforementioned script?


 find png\_test -name "\*.png" -print0 | xargs -0 -P 4 -I file curl -X PUT 
localhost:8098/riak/file --data-binary @file -H"Content-Type: image/png"

I'm a shell scripting n00b so there is probably a much better way. In this case 
png\_test is a directory I created with 1000\*10k pngs. So the bucket name is the 
directory name 'png\_test'. Only works for a flat dir, it was just something to 
check the times that Eric mentioned, please don't think it is like a working 
script or anything.

Cheers

Russell


&gt; ---
&gt; Jeremiah Peschka
&gt; Managing Director, Brent Ozar PLF, LLC
&gt; 
&gt; 
&gt; On Thu, Feb 23, 2012 at 2:02 AM, Russell Brown  wrote:
&gt; Hi Eric,
&gt; 
&gt; On 23 Feb 2012, at 08:45, Eric Fong wrote:
&gt; 
&gt; &gt; Hi
&gt; &gt;
&gt; &gt; Help. I want to store few thousands of small png (each of them will just be 
&gt; &gt; 10K) into riak.
&gt; &gt; But I find that is really slow (1 to 2 second for one png).
&gt; &gt;
&gt; &gt; Currently, I use a bash script to find and loop the directory
&gt; &gt; And curl PUT the png onto riak.
&gt; &gt;
&gt; &gt; Do we have a bulk upload or will it be faster if I use erlang or or driver?
&gt; &gt; I need to upload 1000 small png within one minute. Can it be done?
&gt; 
&gt; I imagine it is possible. I just managed to do it in 10seconds on my laptop, 
&gt; single node with n=3 and r=2 using xargs and curl to put in parallel.
&gt; 
&gt; How many nodes do you have? What is your n-val?
&gt; 
&gt; cheers
&gt; 
&gt; Russell
&gt; 
&gt; &gt;
&gt; &gt; Currently, I am on riak 1.01 and levelDB backend.
&gt; &gt;
&gt; &gt; Thanks a lot!
&gt; &gt; --
&gt; &gt; Best Regards,
&gt; &gt; Eric Fong
&gt; &gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; 
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

