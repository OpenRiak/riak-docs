---
title: "transfers failing lookup_timeout"
description: ""
project: community
lastmod: 2012-09-24T12:09:39-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08677"
author_name: "Rich Sutton"
project_section: "mailinglistitem"
sent_date: 2012-09-24T12:09:39-07:00
---


Hi,

I've got a two node riak cluster set up for testing. After joining the
second node to the cluster, I've got some failing transfers. Restarts on
both nodes don't resolve the situation. Any ideas?

&gt;From error.log on transferrer node (sylvester.soiq.net):

2012-09-24 12:06:35.598 [error] &lt;0.3180.0&gt; gen\_server &lt;0.3180.0&gt; terminated
with reason: bad return value: lookup\_timeout
2012-09-24 12:06:35.599 [error]
&lt;0.3276.0&gt;@riak\_core\_handoff\_sender:start\_fold:215 ownership\_handoff
transfer of riak\_search\_vnode from 'r...@sylvester.soiq.net'
1004782375664995756265033322492444576013453623296 to '
r...@daffyduck.soiq.net' 1004782375664995756265033322492444576013453623296
failed because of
error:{badmatch,{error,{worker\_crash,{bad\_return\_value,lookup\_timeout},{fold,#Fun,#Fun}}}}
[{riak\_core\_handoff\_sender,start\_fold,5,[{file,"src/riak\_core\_handoff\_sender.erl"},{line,161}]}]
2012-09-24 12:06:35.617 [error]
&lt;0.3277.0&gt;@riak\_core\_handoff\_sender:start\_fold:215 ownership\_handoff
transfer of riak\_search\_vnode from 'r...@sylvester.soiq.net'
1096126227998177188652763624537212264741949407232 to '
r...@daffyduck.soiq.net' 1096126227998177188652763624537212264741949407232
failed because of
error:{badmatch,{error,{worker\_crash,{bad\_return\_value,lookup\_timeout},{fold,#Fun,#Fun}}}}
[{riak\_core\_handoff\_sender,start\_fold,5,[{file,"src/riak\_core\_handoff\_sender.erl"},{line,161}]}]
2012-09-24 12:06:35.618 [error] &lt;0.3180.0&gt; CRASH REPORT Process &lt;0.3180.0&gt;
with 0 neighbours exited with reason: bad return value: lookup\_timeout in
gen\_server:terminate/6 line 747
2012-09-24 12:06:35.709 [error] &lt;0.1293.0&gt; Supervisor poolboy\_sup had child
riak\_core\_vnode\_worker started with
{riak\_core\_vnode\_worker,start\_link,undefined} at &lt;0.3180.0&gt; exit with
reason bad return value: lookup\_timeout in context child\_terminated
2012-09-24 12:06:35.730 [error] &lt;0.3181.0&gt; gen\_server &lt;0.3181.0&gt; terminated
with reason: bad return value: lookup\_timeout
2012-09-24 12:06:35.753 [error] &lt;0.3181.0&gt; CRASH REPORT Process &lt;0.3181.0&gt;
with 0 neighbours exited with reason: bad return value: lookup\_timeout in
gen\_server:terminate/6 line 747
2012-09-24 12:06:35.773 [error] &lt;0.1310.0&gt; Supervisor poolboy\_sup had child
riak\_core\_vnode\_worker started with
{riak\_core\_vnode\_worker,start\_link,undefined} at &lt;0.3181.0&gt; exit with
reason bad return value: lookup\_timeout in context child\_terminated


rich@daffyduck:~$ sudo riak-admin member-status
Attempting to restart script through sudo -H -u riak
================================= Membership
==================================
Status Ring Pending Node
-------------------------------------------------------------------------------
valid 37.5% 50.0% 'r...@daffyduck.soiq.net'
valid 62.5% 50.0% 'r...@sylvester.soiq.net'
-------------------------------------------------------------------------------
Valid:2 / Leaving:0 / Exiting:0 / Joining:0 / Down:0

rich@daffyduck:~$ sudo riak-admin transfers
Attempting to restart script through sudo -H -u riak
'r...@daffyduck.soiq.net' waiting to handoff 8 partitions

Active Transfers:

transfer type: ownership\_handoff
vnode type: riak\_search\_vnode
partition: 1004782375664995756265033322492444576013453623296
started: 2012-09-24 18:24:41 [-81984015.00 us ago]
last update: no updates seen
objects transferred: unknown

 unknown
riak@sylvester.s =======================&gt; riak@daffyduck.s
 unknown

transfer type: ownership\_handoff
vnode type: riak\_search\_vnode
partition: 1096126227998177188652763624537212264741949407232
started: 2012-09-24 18:24:51 [-91982788.00 us ago]
last update: no updates seen
objects transferred: unknown

 unknown
riak@sylvester.s =======================&gt; riak@daffyduck.s
 unknown

Rich
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

