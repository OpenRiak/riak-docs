---
title: "Quering Riaksearch on Second Node"
description: ""
project: community
lastmod: 2011-07-07T11:29:05-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03958"
author_name: "Muhammad Yousaf"
project_section: "mailinglistitem"
sent_date: 2011-07-07T11:29:05-07:00
---



Hi,

I have 2 node Riaksearch cluster. My first node is working perfectly with that 
stats

curl -H "Accept: text/plain" http://192.168.1.182:8098/stats
{
 "vnode\_gets": 0,
 "vnode\_puts": 0,
 "read\_repairs": 0,
 "vnode\_gets\_total": 480294,
 "vnode\_puts\_total": 106564,
 "node\_gets": 0,
 "node\_gets\_total": 341810,
 "node\_get\_fsm\_time\_mean": "undefined",
 "node\_get\_fsm\_time\_median": "undefined",
 "node\_get\_fsm\_time\_95": "undefined",
 "node\_get\_fsm\_time\_99": "undefined",
 "node\_get\_fsm\_time\_100": "undefined",
 "node\_puts": 0,
 "node\_puts\_total": 34671,
 "node\_put\_fsm\_time\_mean": "undefined",
 "node\_put\_fsm\_time\_median": "undefined",
 "node\_put\_fsm\_time\_95": "undefined",
 "node\_put\_fsm\_time\_99": "undefined",
 "node\_put\_fsm\_time\_100": "undefined",
 "read\_repairs\_total": 1711,
 "cpu\_nprocs": 472,
 "cpu\_avg1": 374,
 "cpu\_avg5": 479,
 "cpu\_avg15": 502,
 "mem\_total": 4002107392.0,
 "mem\_allocated": 3946246144.0,
 "nodename": "riaksearch@192.168.1.182",
 "connected\_nodes": [
 "riaksearch@192.168.1.167"
 ],
 "sys\_driver\_version": "1.5",
 "sys\_global\_heaps\_size": 0,
 "sys\_heap\_type": "private",
 "sys\_logical\_processors": 4,
 "sys\_otp\_release": "R14B01",
 "sys\_process\_count": 387,
 "sys\_smp\_support": true,
 "sys\_system\_version": "Erlang R14B01 (erts-5.8.2) [source] [64-bit] 
[smp:4:4] [rq:4] [async-threads:64] [hipe] [kernel-poll:true]",
 "sys\_system\_architecture": "x86\_64-unknown-linux-gnu",
 "sys\_threads\_enabled": true,
 "sys\_thread\_pool\_size": 64,
 "sys\_wordsize": 8,
 "ring\_members": [
 "riaksearch@192.168.1.167",
 "riaksearch@192.168.1.182"
 ],
 "ring\_num\_partitions": 64,
 "ring\_ownership": 
"[{'riaksearch@192.168.1.182',32},{'riaksearch@192.168.1.167',32}]",
 "ring\_creation\_size": 64,
 "storage\_backend": "riak\_kv\_bitcask\_backend",
 "pbc\_connects\_total": 505,
 "pbc\_connects": 0,
 "pbc\_active": 0,
 "riak\_err\_version": "1.0.0",
 "runtime\_tools\_version": "1.8.4.1",
 "riak\_search\_version": "0.14.0",
 "riak\_search\_core\_version": "0.14.0",
 "qilr\_version": "0.14.0",
 "riak\_solr\_version": "0.14.0",
 "merge\_index\_version": "0.14.0",
 "luwak\_version": "1.0.0",
 "skerl\_version": "1.0.0",
 "riak\_kv\_version": "0.14.0",
 "bitcask\_version": "1.1.5",
 "riak\_core\_version": "0.14.0",
 "luke\_version": "0.2.3",
 "erlang\_js\_version": "0.5.0",
 "mochiweb\_version": "1.7.1",
 "webmachine\_version": "1.8.0",
 "crypto\_version": "2.0.2",
 "os\_mon\_version": "2.2.5",
 "cluster\_info\_version": "1.0.0",
 "sasl\_version": "2.1.9.2",
 "stdlib\_version": "1.17.2",
 "kernel\_version": "2.14.2",
 "executing\_mappers": 0

my query from first node works fine

(riak1@127.0.0.1)3&gt; {ok,Client} 
=riakc\_pb\_socket:start\_link('192.168.1.182',8087).
{ok,&lt;0.46.0&gt;}
(riak1@127.0.0.1)4&gt; riakc\_pb\_socket:search(Client, &lt;&lt;"player"&gt;&gt;, 
"playername:yousaf"). 
{ok,[[&lt;&lt;"player"&gt;&gt;,&lt;&lt;"yousaf"&gt;&gt;]]}

also 

curl http://192.168.1.182:8098/solr/player/select?q=playername:yousaf
xml version="1.0" encoding="UTF-8"?


0
2

on
0
playername:yousaf
or
value
standard
1.1
1




yousaf
 
1
 
20110705
 
muhammad
 
1
 
snowball
 
100
 
yousaf
 
yousaf
 
world1
 
100
 






but on my second node i can get list of keys but cannot search it 

(riak1@127.0.0.1)6&gt; {ok,Client} 
=riakc\_pb\_socket:start\_link('192.168.1.167',8087).
{ok,&lt;0.53.0&gt;}
(riak1@127.0.0.1)7&gt; riakc\_pb\_socket:search(Client, &lt;&lt;"player"&gt;&gt;, 
"playername:yousaf").
{ok,[]}

and 

curl http://192.168.1.167:8098/solr/player/select?q=playername:yousaf.
xml version="1.0" encoding="UTF-8"?


0
1

on
0
playername:yousaf.
or
value
standard
1.1
0






but data is replicating properly. Any idea's how to fix it only searching is 
causing problem??



Regards,
Muhammad Yousaf \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

