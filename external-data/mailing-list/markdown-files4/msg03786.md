---
title: "Re: Concurrency hazard when updating links"
description: ""
project: community
lastmod: 2011-06-22T08:23:49-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03786"
mailinglist_parent_id: "msg03785"
author_name: "Mathias Meyer"
project_section: "mailinglistitem"
sent_date: 2011-06-22T08:23:49-07:00
---


And here's the link I neatly forgot to include:

http://wiki.basho.com/Vector-Clocks.html

Mathias Meyer
Developer Advocate, Basho Technologies


On Mittwoch, 22. Juni 2011 at 17:18, Mathias Meyer wrote:

&gt; Manuel,
&gt; 
&gt; what you're seeing is not specific to links, it's generally how concurrent 
&gt; updates to a single object are handled in Riak, links are no exception. If 
&gt; you want to handle that properly you need to enable the allow\_mult property 
&gt; on the bucket in question.
&gt; 
&gt; Now, whenever two clients update the same object based on the same origin 
&gt; (i.e. vector clock) they'll cause siblings to be created. The next time you 
&gt; fetch the object you'll get both siblings and you can then reconcile the 
&gt; difference, e.g. merging all links together, checking if they're still valid, 
&gt; etc., and then store back the updated value using the vector clock you got 
&gt; when requesting the object including the siblings.
&gt; 
&gt; We have wiki page [1] dedicated to vector clocks and conflict resolution, 
&gt; explaining the process in more detail.
&gt; 
&gt; Mathias Meyer
&gt; Developer Advocate, Basho Technologies
&gt; 
&gt; [1] 
&gt; 
&gt; On Mittwoch, 22. Juni 2011 at 11:14, Manuel Astudillo wrote:
&gt; 
&gt; &gt; 
&gt; &gt; Hello,
&gt; &gt; 
&gt; &gt; 
&gt; &gt; Probably I have some miss understating on whats the best way to update 
&gt; &gt; links in Riak, but I am wondering if you know about this hazard when 
&gt; &gt; updating links:
&gt; &gt; 
&gt; &gt; 
&gt; &gt; client A: getLinks(X)
&gt; &gt; client B: getLinks(X)
&gt; &gt; 
&gt; &gt; 
&gt; &gt; clientB:updateLinks(X)
&gt; &gt; clientA:updateLinks(X)
&gt; &gt; 
&gt; &gt; 
&gt; &gt; where the update made by B is cleaned by A, and it seems like there is not 
&gt; &gt; even any way to get a notification about it or detect it somehow... 
&gt; &gt; 
&gt; &gt; 
&gt; &gt; 
&gt; &gt; Manuel Astudillo, M.Sc.C.E
&gt; &gt; Chief Executive Officer, founder.
&gt; &gt; 
&gt; &gt; Optimal Bits
&gt; &gt; Skolskeppsgatan 26
&gt; &gt; SE-23443, Lomma, Sweden.
&gt; &gt; mobile:+46 (0) 733 329536
&gt; &gt; @optimalbits
&gt; &gt; 
&gt; &gt; www.optimalbits.com (http://www.optimalbits.com)
&gt; &gt; 
&gt; &gt; 
&gt; &gt; 
&gt; &gt; 
&gt; &gt; 
&gt; &gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com (mailto:riak-users@lists.basho.com)
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com



\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

