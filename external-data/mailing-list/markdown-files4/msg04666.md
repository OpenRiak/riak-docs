---
title: "Re: riaksearch 0.14.2 via solr: sort desc"
description: ""
project: community
lastmod: 2011-09-12T06:53:42-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg04666"
mailinglist_parent_id: "msg04665"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2011-09-12T06:53:42-07:00
---


Fredrik,

Unfortunately, because of limitations in Riak Search 0.14.x, it can only
(pre-)sort reliably on the document ID. However, it seems like OrderNumber
might be a natural ID for this document? If so, you could do something like
the following:

http://riak/solr/order/select?rows=1&presort=key&q=
Order\_Contact\_Email:firstname.lastn...@company.com

However, this query will also return in ascending order. If you just want
the highest order number, then feeding this query to MapReduce and
processing it there would seem appropriate.

2011/9/12 Fredrik Lindstr√∂m 

&gt; Hi everyone,
&gt; does the "sort=myfieldname desc" parameter in riaksearch 0.14.2 (via solr)
&gt; only sort within the current result set dictated by rows=x and start =y?
&gt;
&gt; I can get my search results in the correct ASC order regardless of the rows
&gt; and start parameters.
&gt; Sorting in DESC with rows=1 and start=0 I get one (obviously) result but
&gt; the result actually appears to be in ASC order. The doc returned in the
&gt; search result is the one with the lowest integer value in the field used for
&gt; sorting.
&gt;
&gt; I'm quite new to Riak and Riak Search and therefore I assume that the error
&gt; is on my part.
&gt;
&gt; Some technical details:
&gt;
&gt; Total objects in "order" bucket: 187
&gt;
&gt; Query with DESC sort:
&gt;
&gt; http://riak/solr/order/select?rows=1&start=0&sort=Order\_OrderNumber%20desc&q=Order\_Contact\_Email:firstname.lastn...@company.com
&gt; Result: 1 doc with Order\_OrderNumber = 362982 (Expected result in my world
&gt; of fantasy would be 621738 which is currently the highest value)
&gt;
&gt; Query with ASC sort:
&gt;
&gt; http://riak/solr/order/select?rows=1&start=0&sort=Order\_OrderNumber%20asc&q=Order\_Contact\_Email:firstname.lastn...@company.com
&gt; Result: 1 doc with Order\_OrderNumber = 362982
&gt;
&gt; I have a custom schema where I have defined the field I want to sort by in
&gt; the following way:
&gt; {field, [
&gt; {name, "Order\_OrderNumber"},
&gt; {type, integer},
&gt; {analyzer\_factory, {erlang, text\_analyzers,
&gt; integer\_analyzer\_factory}}
&gt; ]},
&gt;
&gt; If I run the DESC query with rows=187 the results are ordered in the
&gt; correct descending order.
&gt;
&gt; /F
&gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
&gt;


-- 
Sean Cribbs 
Developer Advocate
Basho Technologies, Inc.
http://www.basho.com/
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

