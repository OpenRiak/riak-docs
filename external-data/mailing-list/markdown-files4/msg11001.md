---
title: "For Those Using Riak CS + aws-sdk"
description: ""
project: community
lastmod: 2013-05-02T18:33:01-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11001"
author_name: "Dave Finster"
project_section: "mailinglistitem"
sent_date: 2013-05-02T18:33:01-07:00
---


Hi Everyone

Just a quick note for anyone using the aws-sdk ruby gem for interfacing with 
Riak CS. Today I did a test update to version 1.9.5 and found that setting the 
s3\_endpoint through AWS.config didn't work anymore and only setting it on a per 
connection basis did. I reverted to 1.8.5 and that functionality came back.

On the same note, there was a pull done into the aws-sdk Github 
(https://github.com/aws/aws-sdk-ruby/pull/224) that shows the s3\_endpoint 
argument is up for deprecation in favour of regions. Digging into the changes, 
AWS have created new classes - Region and RegionCollection which pull their 
listings from aws-sdk-configurations.amazonwebservices.com/endpoints.json. 
They've also extended the region naming to the endpoint address calculation. 
Namely, this bit of code:

add\_service 'S3', 's3' do |region|
 if region == 'us-east-1'
 's3.amazonaws.com'
 else
 's3-%s.amazonaws.com' % region
 end
end

which gets eval'd into AWS::Core::Configuration

I'll hopefully get a patch together at some point that allows custom regions to 
be added.

Cheers,
Dave
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

