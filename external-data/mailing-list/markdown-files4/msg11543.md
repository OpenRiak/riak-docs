---
title: "Re: Quickly deleting + recreating item in Riak deletes new item"
description: ""
project: community
lastmod: 2013-07-15T15:13:46-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11543"
mailinglist_parent_id: "msg11539"
author_name: "Jeremiah Peschka"
project_section: "mailinglistitem"
sent_date: 2013-07-15T15:13:46-07:00
---


This is what we do for CorrugatedIron integration testing. Test buckets
typically have a test name + UUID. Which makes it interesting when I try to
verify data via curl while I'm debugging. But it also keeps me from
polluting my testing buckets with the output of other failed tests.

---
Jeremiah Peschka - Founder, Brent Ozar Unlimited
MCITP: SQL Server 2008, MVP
Cloudera Certified Developer for Apache Hadoop


On Mon, Jul 15, 2013 at 2:16 PM, Gabriel Littman  wrote:

&gt; Hi,
&gt;
&gt; Another posibility is to create a new bucket for each test run.
&gt;
&gt; Gabe
&gt;
&gt; On Mon, Jul 15, 2013 at 12:06 PM, Matthew Dawson wrote:
&gt;
&gt;&gt; Hi Seth,
&gt;&gt; On July 14, 2013 02:25:02 PM Seth Bunce wrote:
&gt;&gt; &gt; I had a similar problem. I mitigated the problem by appending a
&gt;&gt; &gt; current timestamp (in nanoseconds) to the keys I'm using in my tests.
&gt;&gt; &gt; This way I don't have to worry about waiting for Riak to reap
&gt;&gt; &gt; tombstones after 3 seconds and I don't have to use
&gt;&gt; &gt; delete\_mode=immediate. I still do a list keys + delete before each
&gt;&gt; &gt; test.
&gt;&gt; I think this is what I'm going to have to do. I tried all the different
&gt;&gt; delete\_mode settings, but none of them seemed to help. Thanks for the
&gt;&gt; suggestion!
&gt;&gt; --
&gt;&gt; Matthew
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;
&gt;&gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

