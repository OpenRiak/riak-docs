---
title: "Re: benchmark results on my $75/month 5 node cluster :)"
description: ""
project: community
lastmod: 2013-10-02T11:37:36-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12462"
mailinglist_parent_id: "msg12460"
author_name: "Tom Santero"
project_section: "mailinglistitem"
sent_date: 2013-10-02T11:37:36-07:00
---


Yeah, I noticed the "bitcask" in the dropbox url after I sent the email. Be
sure to keep an eye on memory utilization on each node.

Best of luck generating revenue!


On Wed, Oct 2, 2013 at 2:29 PM, Alex Rice  wrote:

&gt; On Wed, Oct 2, 2013 at 12:21 PM, Tom Santero  wrote:
&gt; &gt; Nice.
&gt; &gt;
&gt; &gt; Can you share your bb config? Is this against leveldb or bitcask? I'm
&gt; &gt; assuming leveldb, considering the limited RAM on these instances. If
&gt; thats
&gt; &gt; the case, I suggest running your benchmarks for longer than 20 minutes
&gt; (i.e.
&gt; &gt; several hours) if possible, just to get a feel for how well riak will
&gt; &gt; perform after a few rounds of compactions.
&gt; &gt;
&gt; &gt; Lastly, do you plan on using these instances in production...or is this
&gt; just
&gt; &gt; a sandbox environment?
&gt; &gt;
&gt;
&gt; Tom, sure I will append the basho\_bench config. This is with bitcask.
&gt; I did some tests with leveldb and the performance was also very good,
&gt; but not as good as bitcask obviously. I will try benchmarking for a
&gt; few hours as you suggested.
&gt;
&gt; I am using this in a production environment (for a multiplayer game
&gt; with just about zero $ budget to work with). I know with bitcask I
&gt; might run up against not-enough-ram for the keyspace so I will have to
&gt; keep an eye on things. But I would be able to upgrade the vms to the
&gt; larger size with a simple reboot of each node in the cluster.
&gt;
&gt; {mode, max}.
&gt;
&gt; {duration, 20}.
&gt;
&gt; {concurrent, 5}.
&gt;
&gt; {driver, basho\_bench\_driver\_riakc\_pb}.
&gt;
&gt; {key\_generator, {int\_to\_str, {uniform\_int, 1000000}}}.
&gt;
&gt; {value\_generator, {fixed\_bin, 2000}}.
&gt;
&gt; {riakc\_pb\_ips, [
&gt; {10,0,0,6},
&gt; {10,0,0,7},
&gt; {10,0,0,8},
&gt; {10,0,0,9},
&gt; {10,0,0,10}
&gt; ]}.
&gt;
&gt; {riakc\_pb\_replies, 1}.
&gt;
&gt; {operations, [{get, 2}, {update, 1}]}.
&gt;
&gt; %% Use {auto\_reconnect, false} to get "old" behavior (prior to April 2013).
&gt; %% See deps/riakc/src/riakc\_pb\_socket.erl for all valid socket options.
&gt; {pb\_connect\_options, [{auto\_reconnect, true}]}.
&gt;
&gt; %% Overrides for the PB client\'s default 60 second timeout, on a
&gt; %% per-type-of-operation basis. All timeout units are specified in
&gt; %% milliseconds. The pb\_timeout\_general config item provides a
&gt; %% default timeout if the read/write/listkeys/mapreduce timeout is not
&gt; %% specified.
&gt;
&gt; {pb\_timeout\_general, 30000}.
&gt; {pb\_timeout\_read, 5000}.
&gt; {pb\_timeout\_write, 5000}.
&gt; {pb\_timeout\_listkeys, 50000}.
&gt; %% The general timeout will be used because this specific item is
&gt; commented:
&gt; %% {pb\_timeout\_mapreduce, 50000}.
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

