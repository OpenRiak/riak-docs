---
title: "Re: atomically updating multiple keys"
description: ""
project: community
lastmod: 2011-10-29T10:32:45-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05366"
mailinglist_parent_id: "msg05364"
author_name: "Justin Karneges"
project_section: "mailinglistitem"
sent_date: 2011-10-29T10:32:45-07:00
---


On Saturday, October 29, 2011 08:42:52 AM Jeremiah Peschka wrote:
&gt; 1) Use an RDBMS. Since you're here, I'm guessing that you're already using
&gt; Riak or else that Riak has qualities that you want for your application.

Right. This is early on in the app's lifetime and the data storage is not 
terribly complicated. I just need some parent/child relationships and when I 
saw the Links feature I figured this was an expected usage of Riak.

&gt; 2) As Alex suggests, you can implement this in your application.

Yes, this I am ready for. As I understand it, using Riak successfully 
generally means designing your application with its limitations in mind. So, 
let's go write some funky app code!

&gt; This could also be difficult: the application must be aware of activity going
&gt; on with objects in your database AND be able to roll them back. In
&gt; pseudocode you'd do this:
&gt;
&gt; orig = Riak.get('whatevs')
&gt; child = new Child(orig)
&gt; 
&gt; 
&gt; if Riak.put(child)
&gt; if !Riak.link(orig, child)
&gt; Riak.delete(child)
&gt; // error up the stack
&gt; else
&gt; // we don't care, the child didn't save. error up the stack
&gt; 
&gt; This is probably naive and is definitely tedious, even if you do implement
&gt; your own application layer to handle read/write operations.

See, to me, this looks exactly like what you're supposed to do. How is it 
naive and tedious? I would assume that everyone writing a serious app with 
Riak has to do things like this.

Justin

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

