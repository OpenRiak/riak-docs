---
title: "Re: Cluster aware clients"
description: ""
project: community
lastmod: 2014-08-15T08:34:54-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14662"
mailinglist_parent_id: "msg14660"
author_name: "Daniel Simms"
project_section: "mailinglistitem"
sent_date: 2014-08-15T08:34:54-07:00
---


&lt; 2.0 the java cluster client was actively unhelpful (in that it didn't
track node health, so if one node was down, the client would regularly try
it still, IIRC), and a client-local haproxy (or such) is the way to go.

&gt;= 2.0 the java cluster client looks like it's smarter about tracking node
health (but I'm not using it in anger and therefore don't know if it's
otherwise suitable and would be curious if anyone is happily using it
without haproxy)


On Fri, Aug 15, 2014 at 6:18 AM, Paul Barry  wrote:

&gt; We’ve been using Riak with Java client for more than two years in
&gt; production, and best solution is ha-proxy.
&gt; Your Java client connects to one ha-proxy, configured for round-robin to
&gt; all the nodes. We run ha-proxy on our front-ends, so clients always connect
&gt; to localhost.
&gt;
&gt; If you’re planning to add or remove a node, just reconfigure ha-proxy and
&gt; reload it (instant with no down-time).
&gt; ha-proxy also gives you much better control over how unexpected failures
&gt; are dealt with automatically.
&gt;
&gt; pb
&gt;
&gt; On 15 Aug 2014, at 13:19, Simon Hartley 
&gt; wrote:
&gt;
&gt; Hi,
&gt;
&gt; So I’m writing a Java client app. I’m running a 5 node Riak cluster and I
&gt; want my client to know about all the nodes to avoid single points of
&gt; failure.
&gt;
&gt; Is there a best practice for automatically updating clients when new nodes
&gt; are added to a cluster?
&gt;
&gt;
&gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

