---
title: "Re: Removing link from children to parent object"
description: ""
project: community
lastmod: 2011-02-05T23:33:54-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02207"
mailinglist_parent_id: "msg02206"
author_name: "Alexander Sicular"
project_section: "mailinglistitem"
sent_date: 2011-02-05T23:33:54-08:00
---


Oh hell no. But in practice that all depends on the client (you could 
theoretically have a client that understood some SQL dialect and 
translated it to riak speak). You would have to do an m/r to get a 
list of all keys that have that link (which hopefully you have already 
been maintaining) and then update each key individually.


But what you should really do is update your application to 
accommodate dead links. They will return 404 via http and you can 
update your m/r's to also skip non existent keys. Key management, 
which link management really boils down to is a bit of a beast in 
riak. Best left to other devices. I've said it before and I'll say it 
again: do key management in redis and periodically dump keys to riak. 
Mark and sweep is a good protocol for doing this stuff via a right 
proper queue stack... or redis.


-Alexander

@siculars on twitter
http://siculars.posterous.com

Sent from my iPhone

On Feb 6, 2011, at 2:01, Joshua Partogi  wrote:


Thanks Alexander,

Is there any facility in riak that enables me to do something like 
this:


UPDATE obj set link=nil where link='Blah';

Kind regards,
Joshua

On Sun, Feb 6, 2011 at 5:51 PM, Alexander Sicular 
 wrote:

Riak links are unidirectional and non-reciprocal. If you did not
explixitly set a link on the child to the parent then it does not
exist. If you did set links on the children then a traversal/loop will
work but remember to include the body (value) in the rewrite. Write
links + body or you lose the body.

-alexander

On 2011-02-06, Joshua Partogi  wrote:
&gt; Hi all,
&gt;
&gt; I have a link between Parent object and Child objects
&gt; e.g:
&gt;
&gt; Parent
&gt; -- Child1
&gt; -- Child2
&gt; -- Child3
&gt;
&gt; Now when I delete Parent, I want the links from Child to Parent to 
be

&gt; removed as well.
&gt;
&gt; I can traverse/loop through all the Children that Parent have and 
remove the
&gt; link one by one, but I was thinking if there is a more elegant way 
to do it

&gt; in Riak that I don't know.
&gt;
&gt; I am using the Ruby Riak/Ripple library.
&gt;
&gt; Thanks for your help.
&gt;
&gt; Kind regards,
&gt; Joshua.
&gt;
&gt; --
&gt; http://twitter.com/jpartogi
&gt;

--
Sent from my mobile device



--
http://twitter.com/jpartogi
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

