---
title: "Re: use Siblings to implement a message queue?"
description: ""
project: community
lastmod: 2013-09-11T16:45:02-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12241"
mailinglist_parent_id: "msg12240"
author_name: "Jeremiah Peschka"
project_section: "mailinglistitem"
sent_date: 2013-09-11T16:45:02-07:00
---


Siblings don't have to be limited to terrible scenarios - they're a feature
that makes sense for many workloads using an eventually consistent,
distributed database like Riak.

Siblings are being used under the covers in Riak 2.0 to implement sets,
maps, and counters. Riak 1.4.x implements counters using siblings, too.

There's a whole set of data types called CRDTs that can be used to
implement rich data types in a system like Riak. There's work already in
place to do this with some of the existing clients and I started a project
to implement CRDTs through CorrugatedIron:
https://github.com/peschkaj/MoarDT/

The only tricky bit is that you can never be quite sure if you've read
everything. Oh, and garbage collecting the CRDT can be tricky if you're
using a client generated CRDT - you can end up with a large number of
siblings if you aren't careful.


---
Jeremiah Peschka - Founder, Brent Ozar Unlimited
MCITP: SQL Server 2008, MVP
Cloudera Certified Developer for Apache Hadoop


On Wed, Sep 11, 2013 at 4:29 PM, Alex Rice  wrote:

&gt; Hi I'm very new to Riak. The allow\_mult = true / Siblings feature is
&gt; very interesting. Could it be used to implement a high performance
&gt; collection like a Queue or Set, in a lock free manner? The Riak docs
&gt; make it sound like allow\_mult is mainly for confict resolution and
&gt; degenerate cases, rather than a feature which a data structure could
&gt; be designed around. Does anyone have any links to share, or thoughts
&gt; about this broader issue?
&gt; Thanks much!
&gt; Alex
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

