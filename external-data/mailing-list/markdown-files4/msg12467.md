---
title: "C# client (CI) questions re: IfNotModified"
description: ""
project: community
lastmod: 2013-10-02T13:54:58-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12467"
author_name: "Alex Rice"
project_section: "mailinglistitem"
sent_date: 2013-10-02T13:54:58-07:00
---


Just trying to make sure I understand what is the proper usage of this
option IfNotModified in CI.

// (first do a Get of the object)
// do a SetObject on the riakobject with my changes
var putOpts = new RiakPutOptions () { IfNotModified = true };
// do a Put with those Options

When the put fails, because I have forced another client to have
modified the key, I get a result back with:

resultCode = CommunicationError
message = Riak returned an error. Code '0'. Message: modified

So the actual condition is kind of buried in the message string which
is not ideal. Maybe there could be a first-class resultCode named
Modified?

Also I then seem to get subsequently
 ClusterOffline: Unable to access functioning Riak node

Is it possible that CI is interpreting the CommunicationError
internally to think the node is down or something? Just curious- maybe
the unable to access functioning Riak node is because I'm running
basho\_bench simultaneously? Could be a co-incidence, but it doesn't
seem like it.
Thanks,
Alex

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

