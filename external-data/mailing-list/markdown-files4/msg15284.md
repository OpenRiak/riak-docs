---
title: "Re: Yokozuna - inconsistent number of documents found for the same	query"
description: ""
project: community
lastmod: 2014-12-01T10:37:15-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15284"
mailinglist_parent_id: "msg15283"
author_name: "Oleksiy Krivoshey"
project_section: "mailinglistitem"
sent_date: 2014-12-01T10:37:15-08:00
---


Thank you!

p.s.
That github issue mentions 5 node cluster, however I can replicate it on a
single node Riak setup.

On 1 December 2014 at 20:26, Eric Redmond  wrote:

&gt; This is a known issue, and we're still working on a fix.
&gt;
&gt; https://github.com/basho/yokozuna/issues/426
&gt;
&gt; Eric
&gt;
&gt;
&gt; On Nov 29, 2014, at 9:26 AM, Oleksiy Krivoshey  wrote:
&gt;
&gt; Hi,
&gt;
&gt; I get inconsistent number of documents returned for the same search query
&gt; when index keys are repaired by search AAE. The prerequisites are:
&gt;
&gt; 1. Create a bucket, insert some keys (10 keys - KeysA)
&gt; 2. Create Yokozuna Index, associate it with the bucket
&gt; 3. Add or update some new keys in the bucket (10 keys - KeysB)
&gt; 4. Wait for Search AAE to build and exchange the trees
&gt;
&gt; Now when I issue a search query I will always get all 10 KeysB but a
&gt; random amount of KeysA, for example the same query repeated 5 times may
&gt; return:
&gt;
&gt; 10 KeysB + 2 KeysA
&gt; 10 KeysB + 0 KeysA
&gt; 10 KeysB + 7 KeysA
&gt; 10 KeysB + 1 KeysA
&gt; 10 KeysB + 10 KeysA
&gt;
&gt; Why is this happening?
&gt;
&gt; --
&gt; Oleksiy Krivoshey
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
&gt;
&gt;


-- 
Oleksiy Krivoshey
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

