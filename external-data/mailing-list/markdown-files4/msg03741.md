---
title: "Re: OpenStruct equivalent in Ripple"
description: ""
project: community
lastmod: 2011-06-17T14:47:23-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03741"
mailinglist_parent_id: "msg03740"
author_name: "Dan Reverri"
project_section: "mailinglistitem"
sent_date: 2011-06-17T14:47:23-07:00
---


You can use Ripple::EmbeddedDocument to achieve something similar. Here is a
sample model, Authorization, that embeds UserInfo as an association:
https://github.com/dreverri/favorite\_color/blob/master/server/lib/favorite\_color/models/authorization.rb
https://github.com/dreverri/favorite\_color/blob/master/server/lib/favorite\_color/models/user\_info.rb

UserInfo is stored inside the Authorization model in Riak.

Thanks,
Dan

Daniel Reverri
Developer Advocate
Basho Technologies, Inc.
d...@basho.com


On Fri, Jun 17, 2011 at 2:21 PM, Thomas Fee  wrote:

&gt; Hello, Ripple users.
&gt;
&gt; One thing nice about OpenStruct in Ruby - you can use the same class for
&gt; many "types" of instances. I desire the same for Ripple - something like
&gt; OpenStruct, with ability to subclass and specialize, then "embed inline",
&gt; i.e. to nest.
&gt;
&gt; To illustrate, something like the following, with a custom class
&gt; (ExtProperty) analogous to a subclass of OpenStruct...
&gt;
&gt; class ExtProperty
&gt; include Ripple::NestedDocument ## New thingy
&gt; property :text, String
&gt; property :source, String
&gt; property :code, Integer
&gt; end
&gt;
&gt; class Contract
&gt; include Ripple::Document
&gt; property :product\_code, ExtProperty
&gt; property :contract\_unit, ExtProperty
&gt; property :price\_quotation\_unit, ExtProperty
&gt; property :floating\_price\_definition, ExtProperty
&gt; end
&gt;
&gt; I can currently get part of this with the Ripple::NestedAttributes
&gt; construct, but it lacks a defined class. I would have to explicitly convert
&gt; a hash to a desired class, and vice versa. And also, the top-level class
&gt; wouldn't specify the nested class, if you were to think of the class
&gt; definition as a data model definition.
&gt;
&gt; Any plans for something like what I described?
&gt;
&gt; - Tom
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

