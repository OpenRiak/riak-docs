---
title: "Re: rocksdb (fb leveldb fork) as riak backend?"
description: ""
project: community
lastmod: 2014-01-27T18:04:24-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13506"
mailinglist_parent_id: "msg13505"
author_name: "Alexander Sicular"
project_section: "mailinglistitem"
sent_date: 2014-01-27T18:04:24-08:00
---


Awesome. I knew there were basho optimizations. Just wondering if there was 
parity. Cool!


@siculars
http://siculars.posthaven.com

Sent from my iRotaryPhone

&gt; On Jan 27, 2014, at 17:53, Matthew Von-Maszewski  wrote:
&gt; 
&gt; 
&gt; P.S. I failed to include the link to the wiki page that discusses each of 
&gt; Basho's optimizations for the Riak environment:
&gt; 
&gt; https://github.com/basho/leveldb/wiki
&gt; 
&gt; 
&gt;&gt; On Jan 27, 2014, at 8:49 PM, Matthew Von-Maszewski  
&gt;&gt; wrote:
&gt;&gt; 
&gt;&gt; Basho's leveldb requirements have lead to different optimizations. Facebook 
&gt;&gt; has a captive hardware environment and usage case that does not match ours. 
&gt;&gt; I am not saying their changes are better or worse, only different.
&gt;&gt; 
&gt;&gt; Basho needs:
&gt;&gt; 
&gt;&gt; - multiple databases running simultaneously: 6 to 64
&gt;&gt; - support for slow solitary SATA drives all the way to rocking' fast 
&gt;&gt; FusionIO PCI arrays
&gt;&gt; - fast disaster recovery / repair
&gt;&gt; - aggressive delete logic to help remove large chunks of deleted data now 
&gt;&gt; instead of next year
&gt;&gt; - (and a few things still not unleashed in Riak 2.0)
&gt;&gt; 
&gt;&gt; So our compaction strategy has come a long way: from Google's original 
&gt;&gt; single thread to a thread pool that can run simultaneous companions on the 
&gt;&gt; same database as well as other databases. We have a dedicated thread that 
&gt;&gt; constantly computes the speed of the local array and gradually manipulates 
&gt;&gt; each write request to prevent Google's designed stall â€¦ maximizing total 
&gt;&gt; throughput for the simultaneous databases while maintaining a constant user 
&gt;&gt; experience. And in between all that, we have retuned the skip list, the 
&gt;&gt; bloom filter, and integrated Intel's hardware CRC assembly code.
&gt;&gt; 
&gt;&gt; That is what meets Riak's needs. 
&gt;&gt; 
&gt;&gt; Matthew
&gt;&gt; 
&gt;&gt; 
&gt;&gt;&gt; On Jan 27, 2014, at 6:05 PM, Alexander Sicular  wrote:
&gt;&gt;&gt; 
&gt;&gt;&gt; Hey Basho gang,
&gt;&gt;&gt; 
&gt;&gt;&gt; Have you all taken any sort of look at FB's leveldb fork, rocksdb, 
&gt;&gt;&gt; http://rocksdb.org/? Just watching Dhruba's video it seems like it may be a 
&gt;&gt;&gt; useful upgrade, 
&gt;&gt;&gt; https://code.facebook.com/videos/174548089418739/rocksdb-a-high-performance-embedded-key-value-store-for-flash-storage-data-scale/.
&gt;&gt;&gt; The main talking points seems to be that rocksdb upgrades leveldb such 
&gt;&gt;&gt; that it is more efficient when storing data more than system ram, has more 
&gt;&gt;&gt; efficient access patternsto take advantage of ssd's and has a better 
&gt;&gt;&gt; compaction story.
&gt;&gt;&gt; 
&gt;&gt;&gt; Care to share your thoughts?
&gt;&gt;&gt; 
&gt;&gt;&gt; Thanks,
&gt;&gt;&gt; 
&gt;&gt;&gt; -Alexander Sicular
&gt;&gt;&gt; 
&gt;&gt;&gt; @siculars
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; 

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

