---
title: "Re: Continuous HTTP POSTs to Riak"
description: ""
project: community
lastmod: 2016-03-03T18:48:11-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17107"
mailinglist_parent_id: "msg17104"
author_name: "Sargun Dhillon"
project_section: "mailinglistitem"
sent_date: 2016-03-03T18:48:11-08:00
---


So, if you pass back the vclock while pr=pw=quorum, and sloppy\_quorum
= false you should get RYOW consistency.

On Thu, Mar 3, 2016 at 6:25 PM, Christopher Mancini  wrote:
&gt; If you don't need strong consistency for all Riak requests, just certain
&gt; ones, then explore the use of R and N vals that can be passed along with the
&gt; request or on a bucket-type level.
&gt;
&gt; On Thu, Mar 3, 2016 at 9:23 PM Mark Schmidt  wrote:
&gt;&gt;
&gt;&gt; Hi Qiang,
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; Other more skilled folks can correct me if I am wrong, but I believe you
&gt;&gt; can enforce strong consistency on your nodes:
&gt;&gt; http://docs.basho.com/riak/latest/theory/concepts/strong-consistency/
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; If I recall, you will take a performance hit as all nodes must receive the
&gt;&gt; data.
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; Thanks,
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; - Mark Schmidt
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; From: riak-users [mailto:riak-users-boun...@lists.basho.com] On Behalf Of
&gt;&gt; Qiang Cao
&gt;&gt; Sent: Thursday, March 03, 2016 6:13 PM
&gt;&gt; To: Dave King 
&gt;&gt; Cc: riak-users 
&gt;&gt; Subject: Re: Continuous HTTP POSTs to Riak
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; Thanks, Dave! I'm aware of Riak's eventual consistency. I wonder how I can
&gt;&gt; get Riak work in the way as I need. I'm in a situation where I expect the
&gt;&gt; immediate GET reads the value I've just posted. And the GET request isn't
&gt;&gt; sent out until the POST is done.
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; Thanks,
&gt;&gt;
&gt;&gt; -Qiang
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; On Thu, Mar 3, 2016 at 6:53 PM, Dave King  wrote:
&gt;&gt;
&gt;&gt; You need to google 'Eventual consistency'.
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; - Peace
&gt;&gt;
&gt;&gt; Dave
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; On Thu, Mar 3, 2016 at 4:23 PM, Qiang Cao  wrote:
&gt;&gt;
&gt;&gt; Hi All,
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; I use Riak as a KV store and send http requests to its REST API to update
&gt;&gt; entries. Instead of using curl, I use Apache HttpClient to send requests.
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; One thing bothering me is that sometimes I find the entry isn't properly
&gt;&gt; updated after an HTTP POST/PUT. For example, if I do an HTTP GET on the same
&gt;&gt; key immediately after an HTTP POST, the chance is good that I get a stale
&gt;&gt; value. This happens when I continuously POST to a multi-node Riak, and some
&gt;&gt; of the posts target the same key.
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; Also, I find I don't have this issue if I use a single-node Riak. So I
&gt;&gt; think something wasn't correct with my multi-node Riak cluster (I set
&gt;&gt; "allow\_mult" to false). Any thoughts?
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; Thanks in advance!
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; Qiang
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
&gt; --
&gt; Sincerely,
&gt;
&gt; Christopher Mancini
&gt; -----------------------------
&gt;
&gt; employee = {
&gt; purpose: solve problems with code,
&gt; phone: 7164625591,
&gt; email: cmanc...@basho.com,
&gt; github: http://www.github.com/christophermancini
&gt; }
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

