---
title: "Re: Do not expose Riak to the Internet"
description: ""
project: community
lastmod: 2011-10-19T16:37:53-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05198"
mailinglist_parent_id: "msg05196"
author_name: "Eric Redmond"
project_section: "mailinglistitem"
sent_date: 2011-10-19T16:37:53-07:00
---


There's exposing and then there's exposing (like celebrity nip-slip versus 
leaked sex tape... yes, my mind went there). A DB like Postgres is fairly 
harmless to expose, since it has so much built-in security there's not much 
danger in it. Of course you still need to secure your server, but to offer 
accounts and databases to multiples users is fairly safe, since you can lock 
down a lot.

Even other KVs like Redis can be largely exposed, you can just route requests 
to a block of DBs per account and globally suppress some of the more 
destructive commands like FLUSHALL.

MongoHQ makes a living offering exposed mongo instances to people. You need to 
monitor for over-utilization, sure, but support is robust.

Riak offers little in the way of multitenancy. I've hacked a solution in 
node.js to control per-account bucket access, but Kyle points out interesting 
issue. The fact that one can execute arbitrary erlang poses another layer of 
security risk, and anyone who dreams of being a Riak host (ala MongoHQ) must 
deal with the issue.

Eric

On Oct 19, 2011, at 4:18 PM, Paul Fisher wrote:

&gt; Generally I would never put any database open on the Internet... Is there 
&gt; something special about Riak that would cause people to change this rule of 
&gt; thumb?
&gt; 
&gt; --
&gt; paul
&gt; 
&gt; On Oct 19, 2011, at 4:50 PM, "Aphyr"  wrote:
&gt; 
&gt;&gt; With Eric Redmond's permission\*, I am releasing a proof-of-concept 
&gt;&gt; exploit which uses Riak's mapreduce API to execute arbitrary Erlang code 
&gt;&gt; and obtain shell access.
&gt;&gt; 
&gt;&gt; http://aphyr.com/journals/show/do-not-expose-riak-directly-to-the-internet
&gt;&gt; 
&gt;&gt; Please stop doing this.
&gt;&gt; 
&gt;&gt; --Kyle
&gt;&gt; 
&gt;&gt; \* Eric (http://crudcomic.com/post/11656603627/downside-of-crowdsourcing) 
&gt;&gt; announced a publicly accessible Riak cluster today; with his 
&gt;&gt; permission/supervision I used this exploit to gain shell access to his 
&gt;&gt; server. He's taken down that cluster and encouraged me to release this 
&gt;&gt; information.
&gt;&gt; 
&gt;&gt; I love the idea of a public sandbox for Riak--but it should be wrapped 
&gt;&gt; in a rate-limiting HTTP proxy that only allows certain URLs, object 
&gt;&gt; sizes, and methods. And limits the number of keys. :)
&gt;&gt; 
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

