---
title: "Can't update some keys"
description: ""
project: community
lastmod: 2012-07-13T07:49:05-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07922"
author_name: "Fabio Sato"
project_section: "mailinglistitem"
sent_date: 2012-07-13T07:49:05-07:00
---


Hello all,

I'm using Riak to store images, acting as a cache backend for a web map server.

We started using it in with just one node and we have run into problems with 
corruption of data files, so we decided
to set up a new clean installation.

Now we have 2 servers with 4 riak instances each (8 node cluster) and we are 
having trouble updating some of our keys.

Trying to update a key with curl returns a http timeout error:
 
curl: (28) Operation timed out after 10005 milliseconds with 0 bytes received

Checking logfiles, it seems that we are facing file data corruption again so I 
would like to ask you if we have something wrong in our configuration:

2012-07-13 11:14:12.284 [error] &lt;0.31160.14&gt; CRASH REPORT Process &lt;0.31160.14&gt; 
with 0 neighbours exited with reason: no case clause matching 
{error,bad\_crc,{state,#Ref&lt;0.0.38.40765&gt;,"570899077082383952423314387779798054553098649600",[{async\_folds,true},{vnode\_vclocks,true},{included\_applications,[]},{allow\_strfun,false},{reduce\_js\_vm\_count,6},{storage\_backend,riak\_kv\_bitcask\_backend},{legacy\_keylisting,false},{hook\_js\_vm\_count,2},{listkeys\_backpressure,true},{mapred\_name,"mapred"},{stats\_urlpath,"stats"},{legacy\_stats,true},{js\_thread\_stack,16},{riak\_kv\_stat,true},{add\_paths,[]},{http\_url\_encoding,on},{map\_js\_vm\_count,8},{mapred\_2i\_pipe,...},...],...}}
 in riak\_kv\_vnode:prepare\_put/3 in gen\_server:terminate/6

We are using bitcask on a xfs filesystem. Our riak version is commit hash 
0c49d24e8ea5d3cf9d41427b6b9cdac69bb99135 and we are running it on a Debian 
Squeeze 3.2.0-2 kernel.



Thanks,
FÃ¡bio Sato



\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

