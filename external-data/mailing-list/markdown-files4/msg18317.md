---
title: "Re: Model design and atomic transactions"
description: ""
project: community
lastmod: 2017-07-06T16:22:36-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg18317"
mailinglist_parent_id: "msg18312"
author_name: "Christopher Meiklejohn"
project_section: "mailinglistitem"
sent_date: 2017-07-06T16:22:36-07:00
---


Referring to ACID: ACID is a property of transactions.

Riak doesn't provide any transactional facilities: there's no notion
of isolation (the 'I' in ACID; a concurrency control mechanism, such
as serializability), nor the ability to perform multiple updates
atomically against the database in an all-or-nothing fashion (the 'A'
in ACID.)

The closest you can get to having something with similar, but weaker,
guarantees in Riak, is to use the strong consistency mechanism that
provides an atomic compare-and-swap for a single register: by reading
and supplying your read context with your write you can ensure a form
of isolation (or, concurrency control) by failing write operations
that have been invalidated by a concurrent writer operating on the
same register. These operations are CP, not AP, and will not be
available if a majority of the cluster is not reachable by the node
performing the operation.

Thanks,
Christopher

On Wed, Jul 5, 2017 at 2:55 PM, Fred Dushin  wrote:
&gt; Okay, I'll bite, but I don't know if anything I say will be satisfying.
&gt;
&gt; In general Riak doesn't make any assumptions about ordering of data,
&gt; particularly around back ends. While Riak does support levelDB as a back
&gt; end, and does order keys (and other data, such as secondary indices), until
&gt; very recently not much leveraged this ordering. We did a little work in
&gt; Riak/KV to leverage ordering to optimize bucket and key listing, but that
&gt; work was never released. If you are interested, the work is on a few PRs
&gt; and branches [1]
&gt;
&gt; Riak data is generally schema-less. Eventually-consistent Key, value, get,
&gt; put, delete, with some more advanced features around the edges (secondary
&gt; indexing, CRDTs, semi-structured search), as well a "enterprise-level"
&gt; features, mostly focused around multi-datacenter replication. I am sure I
&gt; am butchering the feature set of Riak, the product. But at it's core,
&gt; that's the way I look at it.
&gt;
&gt; Re: writes during network partitions, yes, of course, this part of the
&gt; motivation of DynamoDB (not necessarily the product), and Riak faithfully
&gt; implements the architecture, along with what guarantees can be provided for
&gt; write availability in the presence of machine|network|software failure.
&gt;
&gt; I can't really speak to ACID properties, except to say there is no
&gt; transactional integrity in Riak, other than some tunable guarantees around
&gt; reads and writes.
&gt;
&gt; Can't say much about mnesia, except that Riak can store 100s of terabytes of
&gt; data across a cluster (if not more).
&gt;
&gt; Hope that helps.
&gt;
&gt; -Fred
&gt;
&gt; [1] https://github.com/basho/riak\_kv/pull/1634 and
&gt; https://github.com/basho/riak\_kv/compare/jv-optimize\_list\_buckets...develop
&gt;
&gt; On Jul 4, 2017, at 1:49 PM, Amirouche  wrote:
&gt;
&gt; HÃ©llo,
&gt;
&gt; At work, we are studying the offering in the distributed database
&gt; space and my eyes stumbled upon riak (via erlang).
&gt;
&gt; I am wondering how does riak compare to leveldb (bsddb, wiredtiger
&gt; and the like) when it comes down to schema design.
&gt;
&gt; Does riak support orderred records based on the key?
&gt;
&gt; If the records are ordered, is it possible to change the 'order'
&gt; function/procedure?
&gt;
&gt; Regarding CAP I understand, that Riak is AP which means that some
&gt; time, some node can see old version the database. During a partition,
&gt; is it possible to do writes at this point?
&gt;
&gt; I don't understand what ACID guarantees riak does provide. What's
&gt; the position of riak regarding ACID?
&gt;
&gt; How do you compare riak and mnesia?
&gt;
&gt; Thanks!
&gt;
&gt;
&gt; Amirouche ~ http://hyperdev.fr
&gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
&gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

