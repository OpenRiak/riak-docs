---
title: "Re: Search and Erlang client"
description: ""
project: community
lastmod: 2012-02-27T15:52:54-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06762"
mailinglist_parent_id: "msg06757"
author_name: "Dan Reverri"
project_section: "mailinglistitem"
sent_date: 2012-02-27T15:52:54-08:00
---


Hi Doug,

The Erlang client will use whatever content-type is set by the user. Can
you provide an example of how you are creating your objects?

The following worked for me:
{ok, Pid} = riakc\_pb\_socket:start\_link("127.0.0.1", 8087).
O = riakc\_obj:new(&lt;&lt;"bucket"&gt;&gt;, &lt;&lt;"key"&gt;&gt;, &lt;&lt;"{\"foo\":\"bar\"}"&gt;&gt;,
&lt;&lt;"application/json"&gt;&gt;).
riakc\_pb\_socket:put(Pid, O).

Thanks,
Dan

Daniel Reverri
Developer Advocate
Basho Technologies, Inc.
d...@basho.com


On Mon, Feb 27, 2012 at 11:17 AM, Doug Selph  wrote:

&gt; Hi Dan,
&gt;
&gt; Well, I'm stumped. When creating the object, I pass "application/json" as
&gt; content-type, but all my objects have content-type set to
&gt; "application/octet-stream"
&gt;
&gt; Does the erlang client save everything as a binary?
&gt;
&gt; Thanks,
&gt; Doug
&gt;
&gt;
&gt; On Mon, Feb 27, 2012 at 12:10 PM, Dan Reverri  wrote:
&gt;
&gt;&gt; Hi Doug,
&gt;&gt;
&gt;&gt; Can you confirm the "Content-Type" header is set to "application/json" by
&gt;&gt; reading the JSON objects you stored?
&gt;&gt;
&gt;&gt; Can you share an example JSON object as well as an example query you are
&gt;&gt; running with "search-cmd"?
&gt;&gt;
&gt;&gt; Thank you,
&gt;&gt; Dan
&gt;&gt;
&gt;&gt; Daniel Reverri
&gt;&gt; Developer Advocate
&gt;&gt; Basho Technologies, Inc.
&gt;&gt; d...@basho.com
&gt;&gt;
&gt;&gt;
&gt;&gt; On Sun, Feb 26, 2012 at 9:01 PM, Doug Selph  wrote:
&gt;&gt;
&gt;&gt;&gt; I'm having trouble with riak-search. If I use the seach-cmd command
&gt;&gt;&gt; line tool to index text files, I can search the index using both search-cmd
&gt;&gt;&gt; and the sold interface. However, when I store JSON objects via the erlang
&gt;&gt;&gt; protocol buffers client, in a bucket which has the search pre-commit
&gt;&gt;&gt; trigger installed, searches in that index always return 0 matches for
&gt;&gt;&gt; search terms which have matches in the bucket. (I have saved these objects
&gt;&gt;&gt; to the bucket after the pre-commit trigger was installed.)
&gt;&gt;&gt;
&gt;&gt;&gt; Is there a trick to this? It is my understanding that there is a default
&gt;&gt;&gt; schema for JSON objects, which should be sufficient as a starting point.
&gt;&gt;&gt;
&gt;&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

