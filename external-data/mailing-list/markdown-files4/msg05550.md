---
title: "Re: Consistency in riak/luwak"
description: ""
project: community
lastmod: 2011-11-11T00:49:17-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05550"
mailinglist_parent_id: "msg05473"
author_name: "vuleetu"
project_section: "mailinglistitem"
sent_date: 2011-11-11T00:49:17-08:00
---


On Tue, Nov 8, 2011 at 10:28 PM, Jeremiah Peschka &lt;
jeremiah.pesc...@gmail.com&gt; wrote:

&gt; A couple of things:
&gt;
&gt; I may be wrong on this (no being specifically familiar with Luwak's
&gt; internals), but when using RIak there's no guarantee that the data is
&gt; actually written to the node you connect to. If you connect to Node3, the
&gt; data may be written to Node6, Node9, and Node1.
&gt;
&gt; As far as the failures, you're most likely seeing a Luwak error because
&gt; it's still replicating data across the ring. I have no idea how you're
&gt; actually going to get around this because the Luwak API doesn't seem to
&gt; offer a way to tune eventual consistency and say that a read is good if
&gt; only 1 node responds.
&gt;
&gt; The question I'd ask is "What is the likelihood that a user will
&gt; immediately try to access an object that they have just uploaded from their
&gt; own device?"
&gt;
&gt;
&gt; ---
&gt; Jeremiah Peschka - Founder, Brent Ozar PLF, LLC
&gt; Microsoft SQL Server MVP
&gt;


Hello,

Regarding your question, the likelihook is extemely high because once we
put a file into Luwak, we fire off an event to several other connected
devices telling them to grab the file. It's part of our design goals.

After a file is put into luwak, luwak says it's done and we fire of an
event for other clients to request this information. Is there any way to
wait for the file to really be ready before we fire off this notification
to client applications to download the file?



On Tue, Nov 8, 2011 at 11:14 PM, Alexander Sicular 
 wrote:

&gt; Build a retry into your client.
&gt;

We do have a retry in the client, but having it trigger all the time is not
as efficient as we'd like.


Any further insight into this would be helpful.

Thanks,

Fisher


&gt; On Nov 8, 2011, at 12:11 AM, vuleetu wrote:
&gt;
&gt; &gt; Hi, guys
&gt; &gt;
&gt; &gt; I am using luwak as dfs, right now we have couple riak nodes like 10
&gt; there. Here is the problem we encountered, after write file success, the
&gt; next read operation always fail. it happens when that is a little bit big
&gt; file size. is there any way to get rid of that. because we want the user
&gt; can get that file which is uploaded by him real time. For example, write
&gt; file to riak node 3 should always guarantee the next read operation on that
&gt; file to riak node 3 should be success.
&gt; &gt;
&gt; &gt; thanks
&gt; &gt;
&gt; &gt; Fisher
&gt; &gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

