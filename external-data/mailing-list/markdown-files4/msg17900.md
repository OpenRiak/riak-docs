---
title: "1022 error in RiakTS"
description: ""
project: community
lastmod: 2017-01-29T18:18:07-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17900"
author_name: "C.S. Natarajan"
project_section: "mailinglistitem"
sent_date: 2017-01-29T18:18:07-08:00
---


Hi All, I have a 3 node cluster hosting a Riak TS database. During a query
I run into a 1022 error. The characteristics of my data and other setup is
below. I am trying to understand

1) the error and remedy
2) what are good conf setting for my case.

Data:
1 minute interval with 30 columns per minute. Indexed on time (quantum of
1d) and two other columns.

Query:
 avg() where time &gt; t1 and time &lt; t2 and key1=
and key2 =

Strangely enough, the query works when t2-t1 &lt;= 5 days; however, for any
duration longer than that I get a 1022 error (projected result of query is
too big). I am using RiakTS v1.5 and it seems in this version this setting
is controlled by riak\_kv.query.timeseries.max\_quanta\_span (set to 5K/(1K
actual?) ); so, is the result purely a coincidence?

w.r.t 1022 error: Docs say that max\_returned\_data\_size is the parameter I
can tune to fix this issue.
However, it seems this parameter controls the size of the result; so, Is
there any reason I get this error code on a avg calculation?

I have not changed the max\_returned\_data\_size setting to see if it will fix
the issue; just trying to understand whether this is the size of the data
scanned or size of the data returned

Finally, I have 1m interval data for a year and in a production setting I
would like to go to 10s data for 3 years; Are there any recommended value
for quanta I should be using?

I would really appreciate any insight/input into the issue and any
recommendation on how to configure the table.

Best,
C.S.N
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

