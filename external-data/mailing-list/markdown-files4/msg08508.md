---
title: "Re: Cloning a cluster / copying all cluster data"
description: ""
project: community
lastmod: 2012-09-11T17:18:52-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08508"
mailinglist_parent_id: "msg08507"
author_name: "Matthew Tovbin"
project_section: "mailinglistitem"
sent_date: 2012-09-11T17:18:52-07:00
---


Matt,

We copied all the data key by key, since we used incorrect
'ring\_creation\_size' value.
(
http://riak-users.197444.n3.nabble.com/Cluster-migration-due-to-incorrect-quot-ring-creation-size-quot-value-td4024509.html
)

So, you can use this copy tool - https://github.com/tovbinm/riak-tools,
which proved itself copying 200m+ items for us.

-Matthew



On Tue, Sep 11, 2012 at 5:09 PM, Kresten Krab Thorup wrote:

&gt; Simply copying the riak/data and riak/etc directories should do the trick.
&gt; You can use tar, rsync or simply cp as you feel like, and you can do all
&gt; that while Riak is running at full throttle. The beauty of log structured
&gt; storage (Bitcask, LevelDB, HainoiDB)
&gt;
&gt; At least that's the idea. I seem to remember that there was an issue with
&gt; LevelDB that made basho recommend that you stop a node before doing backup,
&gt; I dunno if that was fixed.
&gt;
&gt; If its just for debugging/dev purposes you can just stop sending requests
&gt; to riak while doing the backup and you should definitively be fine.
&gt;
&gt; Kresten, Trifork
&gt;
&gt; Den 12/09/2012 kl. 01.59 skrev "Matt Black" :
&gt;
&gt; &gt; Hey again list,
&gt; &gt;
&gt; &gt; Can anyone recommend a process for either cloning a cluster, or backing
&gt; up a whole cluster's data to restore elsewhere? This would be incredibly
&gt; useful for creating a new environment to test upgrades and run application
&gt; regression testing.
&gt; &gt;
&gt; &gt; In the dark old days, it would be a simple combination of mysqldump &
&gt; mysql..
&gt; &gt;
&gt; &gt; Cheers
&gt; &gt; Matt
&gt; &gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

