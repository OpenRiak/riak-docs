---
title: "Re: Minimal number of nodes for production"
description: ""
project: community
lastmod: 2013-04-11T05:07:12-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg10848"
mailinglist_parent_id: "msg10847"
author_name: "Christian Dahlqvist"
project_section: "mailinglistitem"
sent_date: 2013-04-11T05:07:12-07:00
---


Hi Daniel,

If you have 3 nodes in the cluster, you should not lose any data if one node 
goes down, but you may experience that some records, for which 2 replicas are 
gone, will return false not founds before read-repair can fix it. If you 
therefore retry whenever you do not find a key that you expect, you should be 
fine.

The other issue with having few nodes in the cluster is that each of the 
remaining nodes will need to manage a significant number of fallback partitions 
during node failure, which can quickly increase the load on these nodes. There 
is also a risk that the fallback partitions may not be divided equally between 
the remaining two nodes, leading to the load on one node increasing even 
further.

It is in order to avoid this and be able to ensure that nodes are reasonably 
evenly loaded in case of a failure that we recommend at least 5 nodes in any 
production cluster.

Best regards,

Christian



On 11 Apr 2013, at 12:01, ivenhov  wrote:

&gt; With 3 nodes only if one of the nodes is down I should still be able to read
&gt; write if I'm doing that with default setting (quorum). Am I wrong.
&gt; I appreciate there is a case that SHA key space does not divide equally by 3
&gt; so there is a slim possibility that replicas for some keys would be on the
&gt; same physical hardware. But still, 99% of keys should be available. Right?
&gt; 
&gt; Daniel
&gt; 
&gt; 
&gt; 
&gt; --
&gt; View this message in context: 
&gt; http://riak-users.197444.n3.nabble.com/Minimal-number-of-nodes-for-production-tp4027625p4027635.html
&gt; Sent from the Riak Users mailing list archive at Nabble.com.
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

