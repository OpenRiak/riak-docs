---
title: "Re: Custom data-types"
description: ""
project: community
lastmod: 2014-09-06T02:22:14-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14872"
mailinglist_parent_id: "msg14807"
author_name: "Alex De la rosa"
project_section: "mailinglistitem"
sent_date: 2014-09-06T02:22:14-07:00
---


Hi there,

Can somebody explain the use for custom search schemas? I still don't get
why would I want to have a custom schema if the default schema seems to be
able to get me the info of all the fields i have in my object.

Thanks!
Alex


On Fri, Aug 29, 2014 at 4:48 PM, Alex De la rosa 
wrote:

&gt; Hi Sean,
&gt;
&gt; Seems I was wrong, that makes total sense now that you exposed it, looked
&gt; a "too good" feature to me, but seems is not that easy.
&gt;
&gt; By the way, how does "schemas" really work for Riak Search? I went back
&gt; and read the documentation but didn't see a real difference from using the
&gt; default schema.
&gt;
&gt; Thanks!
&gt; Alex
&gt;
&gt;
&gt; On Fri, Aug 29, 2014 at 3:36 PM, Sean Cribbs  wrote:
&gt;
&gt;&gt; Alex,
&gt;&gt;
&gt;&gt; In short, no, you can't create custom types through schemas. Schemas
&gt;&gt; currently only refer to Riak Search 2.
&gt;&gt;
&gt;&gt; We would love that too, but it hasn't happened yet. The problem is not
&gt;&gt; conceiving of a data type but making its behavior both sensible and
&gt;&gt; convergent in the face of concurrent activity or network partitions.
&gt;&gt; For instance, say that two tweets come in around the same time. Who
&gt;&gt; goes first in the "stack" you described? How can multiple independent
&gt;&gt; copies reason about which ones to drop from the bottom of the stack to
&gt;&gt; keep it bounded to 100? What happens if a replica is separated from
&gt;&gt; the others for a while and has really stale entries, is it valid to
&gt;&gt; serve those to a user? What happens when one replica pushes an element
&gt;&gt; and another one pops it at the same time?
&gt;&gt;
&gt;&gt; These sound like they might be trivial problems, but they are
&gt;&gt; incredibly hard to reason about in the general case. You have to
&gt;&gt; reason about the ordering of events, the scope of their effects, and
&gt;&gt; decide on a least-surprising behavior to expose to the user. Although
&gt;&gt; we have given a pretty familiar/friendly interface to the data types
&gt;&gt; shipping in 2.0, their behavior is strictly different from the types
&gt;&gt; you would use in a single-threaded program in local memory.
&gt;&gt;
&gt;&gt; On Thu, Aug 28, 2014 at 4:47 PM, Alex De la rosa
&gt;&gt;  wrote:
&gt;&gt; &gt; Hi there,
&gt;&gt; &gt;
&gt;&gt; &gt; Correct me if I'm wrong, but I think I read somewhere that custom
&gt;&gt; data-types
&gt;&gt; &gt; can be created through schemas or something like that. So, apart from
&gt;&gt; &gt; COUNTERS, SETS and MAPS we could have some custom defined ones.
&gt;&gt; &gt;
&gt;&gt; &gt; I would love to have a STACKS data-type that would work like a FIFO
&gt;&gt; stack,
&gt;&gt; &gt; so I could save the last 100 objects for some action. Imagine we are
&gt;&gt; &gt; building Twitter where millions of tweets are sent all the time, but we
&gt;&gt; want
&gt;&gt; &gt; to quickly know the last 100 tweets for a user. Imagine something like:
&gt;&gt; &gt;
&gt;&gt; &gt; obj.stacks['last\_tweets'].add(id\_of\_last\_tweet)
&gt;&gt; &gt;
&gt;&gt; &gt; IN: last\_tweet ---&gt; STACK\_OF\_100\_TWEETS ---&gt; OUT: older than the 100th
&gt;&gt; goes
&gt;&gt; &gt; out
&gt;&gt; &gt;
&gt;&gt; &gt; Is this possible? If so, how to do it?
&gt;&gt; &gt;
&gt;&gt; &gt; Thanks and Best Regards,
&gt;&gt; &gt; Alex
&gt;&gt; &gt;
&gt;&gt; &gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; &gt; riak-users mailing list
&gt;&gt; &gt; riak-users@lists.basho.com
&gt;&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt; &gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; --
&gt;&gt; Sean Cribbs 
&gt;&gt; Software Engineer
&gt;&gt; Basho Technologies, Inc.
&gt;&gt; http://basho.com/
&gt;&gt;
&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

