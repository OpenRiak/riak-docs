---
title: "Invalid hintfiles (was: Riak CS 1.4.1 bug? InvalidAccessKeyId reported	for deletion calls)"
description: ""
project: community
lastmod: 2013-09-18T16:31:32-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12313"
mailinglist_parent_id: "msg12311"
author_name: "Toby Corkindale"
project_section: "mailinglistitem"
sent_date: 2013-09-18T16:31:32-07:00
---



I found one Riak server was reporting a lot of errors like
[error] &lt;0.808.0&gt; Hintfile 
'/var/lib/riak/bitcask/68507889249886074290797726533575766546371837952/3.bitcask.hint' 
invalid


And the Riak CS logs contained a lot of messages about being unable to 
retrieve s3 user details because "error: disconnected"


I think I've blown away the bad hintfiles and have had them repaired 
from other replicas now, and I haven't seen any more errors for a little 
while.


I'm not sure what caused those to become invalid.
Just a thought, but would be good if Riak could automatically repair 
them rather than failing requests.


Cheer,s
Toby

On 19/09/13 08:42, Toby Corkindale wrote:

Ah, hold on.. have just discovered that rather than it being deletion
calls, it seems to just be every X calls of any sort.. sounds like one
of the servers in the load-balancer pool must be misconfigured somehow,
but the rest are OK.

On 19/09/13 08:34, Toby Corkindale wrote:

I've just upgraded from Riak CS 1.3.1 to 1.4.1

Using s3cmd to test a few things, I've found some odd behaviour.
Creating a bucket and putting a file works just fine, eg:

s3cmd mb s3://test
s3cmd put README s3://test
s3cmd get s3://test/README

However if I try to delete a file or bucket, it throws an error:

s3cmd del s3://test/README
ERROR: S3 error: 403 (InvalidAccessKeyId): The AWS Access Key Id you
provided does not exist in our records.

s3cmd rb s3://test
ERROR: S3 error: 403 (InvalidAccessKeyId): The AWS Access Key Id you
provided does not exist in our records.


Have I messed something up during the upgrade, or is this a bug in 1.4.1?

ta
Toby

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com



\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com



\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

