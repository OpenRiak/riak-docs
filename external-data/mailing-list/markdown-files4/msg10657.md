---
title: "Re: Warning \"Can not start proc_lib:init_p\""
description: ""
project: community
lastmod: 2013-04-03T08:17:26-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg10657"
mailinglist_parent_id: "msg10654"
author_name: "Evan Vigil-McClanahan"
project_section: "mailinglistitem"
sent_date: 2013-04-03T08:17:26-07:00
---


Ingo,

riak-admin status | grep sys\_process\_count

will tell you how many processes are running. The default process
limit on erlang is a little low, and we'd suggest raising in
(especially with your extra-large ring\_size). Erlang processes are
cheap, so 65535 or even double that will be fine.

Busy dist ports are still worrying. Are you monitoring object sizes?
Are there any spikes there associated with performance drops?

On Wed, Apr 3, 2013 at 8:03 AM, Ingo Rockel
 wrote:
&gt; Hi Evan,
&gt;
&gt; I set swt very\_low and zdbbl to 64MB, setting this params helped reducing
&gt; the busy\_dist\_port and Monitor got {suppressed,... Messages a lot. But when
&gt; the performance of the cluster suddenly drops we still see these messages.
&gt;
&gt; The cluster was updated to 1.3 in the meantime.
&gt;
&gt; The eleveldb section:
&gt;
&gt; %% eLevelDB Config
&gt; {eleveldb, [
&gt; {data\_root, "/var/lib/riak/leveldb"},
&gt; {cache\_size, 33554432},
&gt; {write\_buffer\_size\_min, 67108864}, %% 64 MB in bytes
&gt; {write\_buffer\_size\_max, 134217728}, %% 128 MB in bytes
&gt; {max\_open\_files, 4000}
&gt; ]},
&gt;
&gt; the ring size is 1024 and the machines have 48GB of memory. Concerning the
&gt; params from vm.args:
&gt;
&gt; -env ERL\_MAX\_PORTS 4096
&gt; -env ERL\_MAX\_ETS\_TABLES 8192
&gt;
&gt; +P isn't set
&gt;
&gt; Ingo
&gt;
&gt; Am 03.04.2013 16:53, schrieb Evan Vigil-McClanahan:
&gt;
&gt;&gt; For your prior mail, I thought that someone had answered. Our initial
&gt;&gt; suggestion was to add +swt very\_low to your vm.args, as well as
&gt;&gt; setting the +zdbbl setting that Jon recommended in the list post you
&gt;&gt; pointed to. If those help, moving to 1.3 should help more.
&gt;&gt;
&gt;&gt; Other limits in vm.args that can cause problems are +P, ERL\_MAX\_PORTS,
&gt;&gt; and ERL\_MAX\_ETS\_TABLES. Are any of these set? If so, to what?
&gt;&gt;
&gt;&gt; Can you also pate the eleveldb section of your app.config?
&gt;&gt;
&gt;&gt; On Wed, Apr 3, 2013 at 7:41 AM, Ingo Rockel
&gt;&gt;  wrote:
&gt;&gt;&gt;
&gt;&gt;&gt; Hi Evan,
&gt;&gt;&gt;
&gt;&gt;&gt; I'm not sure, I find a lot of these:
&gt;&gt;&gt;
&gt;&gt;&gt; 2013-03-30 23:27:52.992 [error]
&gt;&gt;&gt; &lt;0.8036.323&gt;@riak\_api\_pb\_server:handle\_info:141 Unrecognized message
&gt;&gt;&gt; {22243034,{error,timeout}}
&gt;&gt;&gt;
&gt;&gt;&gt; and some of these at the same time one of the kind below gets logged
&gt;&gt;&gt; (although the one has a different time stamp):
&gt;&gt;&gt;
&gt;&gt;&gt; 2013-03-30 23:27:53.056 [error] &lt;0.9457.323&gt;@riak\_kv\_console:status:178
&gt;&gt;&gt; Status failed error:terminated
&gt;&gt;&gt;
&gt;&gt;&gt; Ingo
&gt;&gt;&gt;
&gt;&gt;&gt; Am 03.04.2013 16:24, schrieb Evan Vigil-McClanahan:
&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Resending to the list:
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Ingo,
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; That is an indication that the protocol buffers server can't spawn a
&gt;&gt;&gt;&gt; put fsm, which means that a put cannot be done for some reason or
&gt;&gt;&gt;&gt; another. Are there any other messages that appear around this time
&gt;&gt;&gt;&gt; that might indicate why?
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; On Wed, Apr 3, 2013 at 12:09 AM, Ingo Rockel
&gt;&gt;&gt;&gt;  wrote:
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Hi,
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; we have some performance issues with our riak cluster, from time to
&gt;&gt;&gt;&gt;&gt; time
&gt;&gt;&gt;&gt;&gt; we
&gt;&gt;&gt;&gt;&gt; have a sudden drop in performance (already asked the list about this,
&gt;&gt;&gt;&gt;&gt; no-one
&gt;&gt;&gt;&gt;&gt; had an idea though). Although not the same time but on the problematic
&gt;&gt;&gt;&gt;&gt; nodes
&gt;&gt;&gt;&gt;&gt; we have a lot of these messages from time to time:
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; 2013-04-02 21:41:11.173 [warning] &lt;0.25646.475&gt; \*\* Can not start
&gt;&gt;&gt;&gt;&gt; proc\_lib:init\_p
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; ,[&lt;0.14556.474&gt;,[&lt;0.9519.474&gt;,riak\_api\_pb\_sup,riak\_api\_sup,&lt;0.1291.0&gt;],riak\_kv\_p
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; ut\_fsm,start\_link,[{raw,65032165,&lt;0.9519.474&gt;},{r\_object,&lt;&lt;109&gt;&gt;,&lt;&lt;77,115,124,49
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; ,53,55,57,56,57,56,50,124,49,51,54,52,57,51,49,54,49,49,53,49,50,52,53,54&gt;&gt;,[{r\_
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; content,{dict,0,16,16,8,80,48,{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},&lt;&lt;&gt;&gt;}],[],{dict,2,16,16,8,8
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; 0,48,{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},{{[],[],[],[],[],[],[],[]
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; ,[],[],[[&lt;&lt;99,111,110,116,101,110,116,45,116,121,112,101&gt;&gt;,97,112,112,108,105,99
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; ,97,116,105,111,110,47,106,115,111,110]],[],[],[],[],[[&lt;&lt;99,104,97,114,115,101,1
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; 16&gt;&gt;,85,84,70,45,56]]}}},&lt;&lt;123,34,115,116,34,58,50,44,34,116,34,58,49,44,34,99,3
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; 4,58,34,66,117,116,32,115,104,101,32,105,115,32,103,111,110,101,44,32,110,32,101
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; ,118,101,110,32,116,104,111,117,103,104,32,105,109,32,110,111,116,32,105,110,32,
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; 117,114,32,99,105,116,121,32,105,32,108,111,118,101,32,117,32,110,100,32,105,32,
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; 109,101,97,110,32,105,116,32,58,39,40,34,44,34,114,34,58,49,52,51,52,54,52,51,57
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; ,44,34,115,34,58,49,53,55,57,56,57,56,50,44,34,99,116,34,58,49,51,54,52,57,51,49
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; ,54,49,49,53,49,50,44,34,97,110,34,58,102,97,108,115,101,44,34,115,107,34,58,49,
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; 51,54,52,57,51,49,54,49,49,53,49,50,52,53,54,44,34,115,117,34,58,48,125&gt;&gt;},[{tim
&gt;&gt;&gt;&gt;&gt; eout,60000}]]] on 'riak@172.22.3.12' \*\*
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Can anyone explain to me what these messages mean and if I need to do
&gt;&gt;&gt;&gt;&gt; something about it? Could these messages be in any way related to the
&gt;&gt;&gt;&gt;&gt; performance issues?
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Ingo
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt;&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; --
&gt;&gt;&gt; Software Architect
&gt;&gt;&gt;
&gt;&gt;&gt; Blue Lion mobile GmbH
&gt;&gt;&gt; Tel. +49 (0) 221 788 797 14
&gt;&gt;&gt; Fax. +49 (0) 221 788 797 19
&gt;&gt;&gt; Mob. +49 (0) 176 24 87 30 89
&gt;&gt;&gt;
&gt;&gt;&gt; ingo.roc...@bluelionmobile.com
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt; qeep: Hefferwolf
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; www.bluelionmobile.com
&gt;&gt;&gt; www.qeep.net
&gt;
&gt;
&gt;
&gt; --
&gt; Software Architect
&gt;
&gt; Blue Lion mobile GmbH
&gt; Tel. +49 (0) 221 788 797 14
&gt; Fax. +49 (0) 221 788 797 19
&gt; Mob. +49 (0) 176 24 87 30 89
&gt;
&gt; ingo.roc...@bluelionmobile.com
&gt;&gt;&gt;&gt; qeep: Hefferwolf
&gt;
&gt; www.bluelionmobile.com
&gt; www.qeep.net

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

