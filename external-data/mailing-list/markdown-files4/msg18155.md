---
title: "Re: How Riak Handle Request?"
description: ""
project: community
lastmod: 2017-04-17T19:45:06-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg18155"
mailinglist_parent_id: "msg18154"
author_name: "Fred Dushin"
project_section: "mailinglistitem"
sent_date: 2017-04-17T19:45:06-07:00
---


What do you mean by 'process'?

If you mean operating system process, then, No. A Riak instance runs in a 
single OS process. There is a Riak instance per "node" in the cluster, where a 
"node" is a machine, container, etc. Probably what the OMG guys used to call a 
"capsule" (cute) There are typically many nodes in a Riak cluster; hence 
multiple OS processes, but in general it only makes sense to run each process 
on a separate node or machine, because things break.

If you mean a lightweight Erlang process, then yes, there is an Erlang process 
per connection. From that point on, it gets ... complicated. There are 
process corresponding to coordinating finite state machines, processes (plural) 
corresponding to vnodes, and there is a long list of processes that run support 
for all things between. But all of these Erlang processes (or "actors") run in 
a single operating system process, the Erlang virtual machine, or abstract 
machine, if you learned how to computer before Java.

Does that help?

-Fred

&gt; On Apr 17, 2017, at 9:19 PM, Jing Liu  wrote:
&gt; 
&gt; Hey,
&gt; 
&gt; I'm specifically concerned about connection reading, data sending,
&gt; data encoding and decoding. Is that done by a single process, a
&gt; fixed-size process pool or does Riak spawns a new process for every
&gt; incoming request/connection?
&gt; 
&gt; Thanks very much !
&gt; Jing
&gt; 
&gt; On Mon, Apr 17, 2017 at 12:36 PM, Christopher Meiklejohn
&gt;  wrote:
&gt;&gt; On Sat, Apr 15, 2017 at 2:16 PM, Jing Liu  wrote:
&gt;&gt;&gt; Hi, I'm learning Riak. I'm wondering that if this is the case that on
&gt;&gt;&gt; each physical node, a single process is reading the connection,
&gt;&gt;&gt; decoding the buffer, spawning a new process to process the request and
&gt;&gt;&gt; then be able to handle next request from client?
&gt;&gt; 
&gt;&gt; Hi Jing,
&gt;&gt; 
&gt;&gt; Depending on what you're looking it, it might be handled differently.
&gt;&gt; Typically, a process pool is used to handle incoming requests, but
&gt;&gt; processing of the request itself is handled by several processes that
&gt;&gt; operate concurrently.
&gt;&gt; 
&gt;&gt; What specific operation are you referring to?
&gt;&gt; 
&gt;&gt; Thanks,
&gt;&gt; Christopher
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

