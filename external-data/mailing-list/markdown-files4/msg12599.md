---
title: "Re: Corrugated Iron for Riak- WCF Performance Issue"
description: ""
project: community
lastmod: 2013-10-10T20:14:54-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12599"
mailinglist_parent_id: "msg12596"
author_name: "Jeremiah Peschka"
project_section: "mailinglistitem"
sent_date: 2013-10-10T20:14:54-07:00
---


I think you may be running into some issues from your Riak cluster size.
The Basho recommendation for a Riak cluster [1] is a minimum 5 servers with
4GB of RAM and multi-core CPUs.

Before anything else, though, I recommend running basho\_bench to see what
kind of numbers you get from your cluster. For reference - I can get about
1500 operations / second with single digits of latency on a 5 node Riak
cluster running on a 2012 Retina MacBook Pro. Alex Rice recently posted
some numbers for a 5 node cluster running in Azure [2] where he was able to
sustain 400 operations / second with &lt; 50ms of latency.

I'm able to get similar numbers to basho\_bench using our CorrugatedIron
stress tests - can you verify the performance of both Riak using
basho\_bench as well as grabbing some metrics from your WCF code? You can
instrument it using metrics-net [3] which you can also download from NuGet
[4]

[1]:
http://docs.basho.com/riak/latest/ops/building/planning/system-planning/#Hardware
[2]: http://markmail.org/message/nsr2an6ztwcjtopb
[3]: https://github.com/danielcrenna/metrics-net
[4]: http://www.nuget.org/packages/Metrics

---
Jeremiah Peschka - Founder, Brent Ozar Unlimited
MCITP: SQL Server 2008, MVP
Cloudera Certified Developer for Apache Hadoop


On Thu, Oct 10, 2013 at 2:44 PM, Pandiarajan Subramani &lt;
psubram...@americanlogistics.com&gt; wrote:

&gt; Hi OJ,\*\*\*\*
&gt;
&gt; I apologize for delayed response. Please find my answer for your
&gt; questions inline in red color.\*\*\*\*
&gt;
&gt; \*\* \*\*
&gt;
&gt; Thanks and Regards\*\*\*\*
&gt;
&gt; \*Pandiarajan Subramani\*\*\*\*\*
&gt;
&gt; American Logistics Company (ALC) | Office: 866.999.3371 x132 | Mobile:
&gt; 575.915.2325 | www.AmericanLogistics.com
&gt; \*\*\*\*
&gt;
&gt; \*Coordinating Passenger Transportation\*\*\*\*\*
&gt;
&gt; \*Confidentiality Notice: \*This message is intended only for the use of
&gt; the individual or entity to whom it is addressed. The message may contain
&gt; confidential or legally privileged information. If you are not the intended
&gt; recipient you are hereby notified that any disclosure, copying,
&gt; distribution of this information is strictly prohibited and may be
&gt; unlawful. If you have received this communication in error, please notify
&gt; us immediately by responding to this email and then delete it from your
&gt; system.\*\*\*\*
&gt;
&gt; \*\* \*\*
&gt;
&gt; \*From:\* OJ Reeves [mailto:o...@buffered.io]
&gt; \*Sent:\* Wednesday, October 9, 2013 5:28 PM
&gt; \*To:\* Pandiarajan Subramani
&gt; \*Cc:\* riak-users@lists.basho.com
&gt; \*Subject:\* Re: Corrugated Iron for Riak- WCF Performance Issue\*\*\*\*
&gt;
&gt; \*\* \*\*
&gt;
&gt; oops! hit send too early.\*\*\*\*
&gt;
&gt; \*\* \*\*
&gt;
&gt; 4. What is your Riak cluster setup? (eg. how many nodes, configuration
&gt; setteings, etc).\*\*\*\*
&gt;
&gt; We have 4 nodes installed in a virtual machine each having 1 core and
&gt; 2 GB RAM. \*\*\*\*
&gt;
&gt; On Thu, Oct 10, 2013 at 9:26 AM, OJ Reeves  wrote:\*\*\*\*
&gt;
&gt; Pandiarajan,\*\*\*\*
&gt;
&gt; \*\* \*\*
&gt;
&gt; Can you please answer some questions for me:\*\*\*\*
&gt;
&gt; 1. What is your application architecture? Are you consuming CI as a
&gt; transport from WCF or are you calling CI from a RESTful server?\*\*\*\*
&gt;
&gt; My application has multi-tier architecture. I do have web service tier,
&gt; Business tier and then the Data tier. In the Data tier, I have the
&gt; Corrugated iron reference and from this tier I communicate with Riak which
&gt; is installed in another server. So in the WCF web service as a part of the
&gt; solution I have CI.\*\*\*\*
&gt;
&gt; 1. Prior to adding CI, how were you talking to Riak?\*\*\*\*
&gt;
&gt; I wasn’t communicating with Riak before adding CI.\*\*\*\*
&gt;
&gt; 1. Have you ran basho\_bench against your application before and after
&gt; implementing CI? Can you please share your results?\*\*\*\*
&gt;
&gt; Nope. I haven’t run basho\_bench ever.\*\*\*\*
&gt;
&gt; Thanks.\*\*\*\*
&gt;
&gt; OJ\*\*\*\*
&gt;
&gt; \*\* \*\*
&gt;
&gt; \*\* \*\*
&gt;
&gt; On Thu, Oct 10, 2013 at 8:52 AM, Pandiarajan Subramani &lt;
&gt; psubram...@americanlogistics.com&gt; wrote:\*\*\*\*
&gt;
&gt; Hi Everyone,\*\*\*\*
&gt;
&gt; I am using Corrugated Iron(CI) for Riak in my
&gt; WCF REST application. After adding CI, the web services started to send
&gt; response very slow. All immediate consecutive request to the REST end
&gt; points get queued up and the responses are delayed more. If anyone has
&gt; implemented CI in the WCF project. Please advise me how to fix this issue.
&gt; \*\*\*\*
&gt;
&gt; \*\*\*\*
&gt;
&gt; Thanks and Regards\*\*\*\*
&gt;
&gt; \*Pandiarajan Subramani\*\*\*\*\*
&gt;
&gt; American Logistics Company (ALC) | Office: 866.999.3371 x132 | Mobile:
&gt; 575.915.2325 | www.AmericanLogistics.com
&gt; \*\*\*\*
&gt;
&gt; \*Coordinating Passenger Transportation\*\*\*\*\*
&gt;
&gt; \*Confidentiality Notice: \*This message is intended only for the use of
&gt; the individual or entity to whom it is addressed. The message may contain
&gt; confidential or legally privileged information. If you are not the intended
&gt; recipient you are hereby notified that any disclosure, copying,
&gt; distribution of this information is strictly prohibited and may be
&gt; unlawful. If you have received this communication in error, please notify
&gt; us immediately by responding to this email and then delete it from your
&gt; system.\*\*\*\*
&gt;
&gt; \*\*\*\*
&gt;
&gt; \*\* \*\*
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com\*\*\*\*
&gt;
&gt;
&gt;
&gt; \*\*\*\*
&gt;
&gt; \*\* \*\*
&gt;
&gt; --
&gt;
&gt; OJ Reeves\*\*\*\*
&gt;
&gt; +61 431 952 586
&gt; http://buffered.io/\*\*\*\*
&gt;
&gt;
&gt;
&gt; \*\*\*\*
&gt;
&gt; \*\* \*\*
&gt;
&gt; --
&gt;
&gt; OJ Reeves\*\*\*\*
&gt;
&gt; +61 431 952 586
&gt; http://buffered.io/\*\*\*\*
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

