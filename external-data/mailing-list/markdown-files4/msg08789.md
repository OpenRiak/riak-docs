---
title: "Re: Riak Memory Usage Constantly Growing"
description: ""
project: community
lastmod: 2012-10-02T08:22:53-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08789"
mailinglist_parent_id: "msg08785"
author_name: "John E. Vincent"
project_section: "mailinglistitem"
sent_date: 2012-10-02T08:22:53-07:00
---


Forgot to paste this in the last email. We ARE seeing the long\_gc
messages (but no large\_heap):

erlang.log.3:10:43:21.406 [info] monitor long\_gc &lt;0.29654.5763&gt;
[{initial\_call,{riak\_pipe\_fitting,init,1}},{almost\_current\_function,{gen\_fsm,loop,7}},{message\_queue\_len,0}]
[{timeout,102},{old\_heap\_block\_size,0},{heap\_block\_size,610},{mbuf\_size,0},{stack\_size,24},{old\_heap\_size,0},{heap\_size,150}]
erlang.log.3:12:50:06.214 [info] monitor long\_gc &lt;0.2047.5836&gt;
[{initial\_call,{riak\_pipe\_vnode\_worker,init,1}},{almost\_current\_function,{gen\_fsm,loop,7}},{message\_queue\_len,0}]
[{timeout,113},{old\_heap\_block\_size,0},{heap\_block\_size,1597},{mbuf\_size,0},{stack\_size,50},{old\_heap\_size,0},{heap\_size,688}]
erlang.log.3:14:39:06.280 [info] monitor long\_gc &lt;0.336.0&gt;
[{initial\_call,{riak\_core\_vnode,init,1}},{almost\_current\_function,{gen\_fsm,loop,7}},{message\_queue\_len,0}]
[{timeout,150},{old\_heap\_block\_size,0},{heap\_block\_size,4181},{mbuf\_size,0},{stack\_size,11},{old\_heap\_size,0},{heap\_size,2093}]
erlang.log.3:14:44:45.888 [info] monitor long\_gc &lt;0.672.0&gt;
[{name,riak\_kv\_stat},{initial\_call,{riak\_kv\_stat,init,1}},{almost\_current\_function,{gen\_server,loop,6}},{message\_queue\_len,0}]
[{timeout,155},{old\_heap\_block\_size,0},{heap\_block\_size,233},{mbuf\_size,0},{stack\_size,9},{old\_heap\_size,0},{heap\_size,55}]

On Tue, Oct 2, 2012 at 7:55 AM, Kelly McLaughlin  wrote:
&gt; John and Shane,
&gt;
&gt; I have been looking into some memory issues lately and I would be very 
&gt; interested in more
&gt; information about your particular problems. If either of you are able to get 
&gt; some output
&gt; from etop using the -sort memory option when you are having elevated memory 
&gt; usage it
&gt; would be very helpful to see. I know that sometimes you get the 
&gt; connection\_lost message
&gt; when trying to use etop, but I have found that sometimes if you keep trying 
&gt; it may succeed
&gt; after a few attempts.
&gt;
&gt; Are either of you using MapReduce? I see that John is using 2I. Shane, do you 
&gt; also use 2I?
&gt; Finally, do you notice a lot of messages to the console or console log that 
&gt; have the either the
&gt; phrase 'monitor large\_heap' or 'monitor long\_gc'?
&gt;
&gt; Kelly
&gt;

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

