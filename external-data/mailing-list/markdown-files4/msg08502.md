---
title: "Re: Reip in Riak 1.2 vs 1.1.4"
description: ""
project: community
lastmod: 2012-09-11T14:08:33-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08502"
mailinglist_parent_id: "msg08368"
author_name: "Mark Phillips"
project_section: "mailinglistitem"
sent_date: 2012-09-11T14:08:33-07:00
---


Hello again :)

On Mon, Aug 27, 2012 at 4:45 AM, Yousuf Fauzan  wrote:
&gt; Hello,
&gt;
&gt; My riak setup is on EC2 with EBS volumes storing data and ring state. This
&gt; ensures that I can teardown the cluster and restart it with all the data
&gt; intact. When I restart the cluster, I do a reip of all nodes on all nodes.
&gt;
&gt; This used to work with Riak 1.1.4 but ever since I shifted to 1.2,
&gt; riak-admin member\_status shows all the nodes except one to be in legacy
&gt; mode. ring\_status reports that nodes are "Currently in legacy gossip mode"
&gt;
&gt; Any ideas?

1.2 introduced overhauled cluster administration [1] via "riak-admin
cluster" [2]. In this specific scenario you'll want to "join" the
renamed nodes and "force-replace" the old nodes with the new ones
(though I suspect that you've moved on to more pressing matters at
this point).

On a general note, while we didn't deprecate reip, try to avoid using
it. The new commands are much more elegant.

As far as "legacy" goes, that looks like something related to running
pre 1.0 Riak...

Hope that helps.

Mark

[1] 
https://github.com/basho/riak/blob/master/RELEASE-NOTES.md#overhauled-cluster-adminstration
[2] http://wiki.basho.com/Command-Line-Tools---riak-admin.html#cluster


&gt;
&gt; --
&gt; Yousuf
&gt; http://fauzism.co,
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

