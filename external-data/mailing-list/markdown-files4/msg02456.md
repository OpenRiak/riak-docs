---
title: "Re: tuning riak for 100s of concurrent connections"
description: ""
project: community
lastmod: 2011-02-25T06:14:21-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02456"
mailinglist_parent_id: "msg02451"
author_name: "Jeremiah Peschka"
project_section: "mailinglistitem"
sent_date: 2011-02-25T06:14:21-08:00
---


Here's where the infrastructure guy in me kicks in:

What kind of drives are you using in your machines? What kind of NICs do you 
have? Are the switches and NICs all forced to full duplex or are they set to 
auto-configure?

Theoretically, you should be seeing performance much faster than 80ms on GETs, 
or so I'd think. 
-- 
Jeremiah Peschka
Microsoft SQL Server MVP
MCITP: Database Developer, DBA
On Thursday, February 24, 2011 at 10:12 PM, Wilson MacGyver wrote: 
&gt; did you change the size of the thread pool? on the default setting of
&gt; 64, I've noticed
&gt; some high startup time with the GET.
&gt; 
&gt; On Wed, Feb 23, 2011 at 3:08 PM, Bob Feldbauer  
&gt; wrote:
&gt; &gt; After importing data into Riak, I'm in a basically 100% GET scenario. I
&gt; &gt; haven't done much load testing other than throwing live traffic at it, but
&gt; &gt; with that I've seen ~150 concurrent connections.
&gt; &gt; 
&gt; &gt; I'm using Jetty app servers (Riak Java client) which are using protobufs to
&gt; &gt; hit an HAProxy server, which load balances my 7 Riak nodes. I really haven't
&gt; &gt; done anything special, other than using protobufs and fronting Riak with
&gt; &gt; HAProxy.
&gt; &gt; 
&gt; &gt; Other than that, I would just say "use fast disks" and/or add nodes as
&gt; &gt; needed to hit your capacity targets -- because with that traffic and 7 nodes
&gt; &gt; with 1 1TB disk per node, I'm seeing ~0.5-&lt;1.0 load average on Riak nodes as
&gt; &gt; iowait.
&gt; &gt; 
&gt; &gt; Feel free to hop on the #riak IRC channel and I'd be happy to try to answer
&gt; &gt; any other questions about our setup.
&gt; &gt; 
&gt; &gt; - Bob Feldbauer
&gt; &gt; 
&gt; &gt; &gt; ---------- Forwarded message ----------
&gt; &gt; &gt; From: Wilson MacGyver
&gt; &gt; &gt; Date: Tue, Feb 22, 2011 at 7:15 PM
&gt; &gt; &gt; Subject: tuning riak for 100s of concurrent connections
&gt; &gt; &gt; To: riak-users Users
&gt; &gt; &gt; 
&gt; &gt; &gt; 
&gt; &gt; &gt; Are there any guidelines/howtos on tuning riak nodes for 100s
&gt; &gt; &gt; (200-500) of concurrent connections
&gt; &gt; &gt; which are 99.9% HTTP GET?
&gt; &gt; &gt; 
&gt; &gt; &gt; Thanks,
&gt; &gt; &gt; 
&gt; &gt; &gt; --
&gt; &gt; &gt; Omnem crede diem tibi diluxisse supremum.
&gt; &gt; &gt; 
&gt; &gt; &gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; &gt; &gt; riak-users mailing list
&gt; &gt; &gt; riak-users@lists.basho.com
&gt; &gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; 
&gt; 
&gt; 
&gt; -- 
&gt; Omnem crede diem tibi diluxisse supremum.
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; 
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

