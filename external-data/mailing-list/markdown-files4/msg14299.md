---
title: "Re: Cost of many PBC connections held open?"
description: ""
project: community
lastmod: 2014-06-05T23:17:28-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14299"
mailinglist_parent_id: "msg14298"
author_name: "Alain Rodriguez"
project_section: "mailinglistitem"
sent_date: 2014-06-05T23:17:28-07:00
---


Hi Toby,

It should be fine to keep many connections PCB connections open. To give
you an idea, we connect to a nine (9) node cluster over Protobuf, with up
to 2k concurrent connections per node.

Cheers,

Alain


On Thu, Jun 5, 2014 at 10:44 PM, Toby Corkindale  wrote:

&gt; Hi,
&gt; Just looking for a bit of guidance on good practice when using Riak
&gt; via the PBC interface.
&gt;
&gt; To keep request latency low, it's good to keep the connection open
&gt; between requests, rather than making a new connection for just a few
&gt; requests and then dropping it again, right?
&gt;
&gt; In the JVM client, pools of connections are shared between large
&gt; numbers of threads. However it's harder to do that in Perl, which some
&gt; of our codebase is written in.
&gt; It'd be a lot easier to have one connection per process, but that's
&gt; potentially quite a lot of connections, albeit ones that are idle most
&gt; of the time.
&gt;
&gt; I'd like to get a feeling for how expensive is it for the Erlang VM to
&gt; hold those connections open. Does it consume a lot of resources or is
&gt; it negligible?
&gt;
&gt; Thanks,
&gt; Toby
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

