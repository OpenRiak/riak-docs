---
title: "Re: How to use erlang riak client with Riak Search?"
description: ""
project: community
lastmod: 2011-08-07T16:13:46-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg04253"
mailinglist_parent_id: "msg04252"
author_name: "Ryan Zezeski"
project_section: "mailinglistitem"
sent_date: 2011-08-07T16:13:46-07:00
---


Atrem,

A PR is in place for this.

https://github.com/basho/riak\_search/pull/76

-Ryan

On Sun, Aug 7, 2011 at 6:38 PM, Ryan Zezeski  wrote:

&gt; Reply-all in case anyone else hits this problem.
&gt;
&gt;
&gt; On Sun, Aug 7, 2011 at 6:36 PM, Ryan Zezeski  wrote:
&gt;
&gt;&gt; Artem,
&gt;&gt;
&gt;&gt; It looks like this has to do with our recent move to Pipe as the new
&gt;&gt; mapred engine. The Search code doesn't speak Pipe, yet. I'm working on a
&gt;&gt; fix but in the meantime you could change the `mapred\_system` entry in
&gt;&gt; app.config to `legacy`.
&gt;&gt;
&gt;&gt; -Ryan
&gt;&gt;
&gt;&gt;
&gt;&gt; On Sun, Aug 7, 2011 at 4:52 PM, Artem Golovinsky &lt;
&gt;&gt; artemgolovin...@gmail.com&gt; wrote:
&gt;&gt;
&gt;&gt;&gt; Ryan,
&gt;&gt;&gt; Thanks for quick answer.
&gt;&gt;&gt; Yes, I have tried it before. In spec of riakc\_pb\_socket:search/3 this
&gt;&gt;&gt; parameter is defined as string().
&gt;&gt;&gt; With binary it doesn't work too.
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; 2011/8/8 Ryan Zezeski 
&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Artem,
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Try making that 3rd param a binary.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; -Ryan
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; [Sent from my iPhone]
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; On Aug 7, 2011, at 1:15 PM, Artem Golovinsky 
&gt;&gt;&gt;&gt; wrote:
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Hi,
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; I try to make request to Riak Search, but I get error bad\_mapred\_inputs.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Some examles:
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; ( slinode@127.0.0.1)32&gt; {ok,Pid} =
&gt;&gt;&gt;&gt; riakc\_pb\_socket:start\_link('127.0.0.1', 8087).
&gt;&gt;&gt;&gt; ( slinode@127.0.0.1)32&gt; riakc\_pb\_socket:search(Pid,
&gt;&gt;&gt;&gt; &lt;&lt;"sl"&gt;&gt;,"got:[00000000000 TO 9000000000]").
&gt;&gt;&gt;&gt; {error,&lt;&lt;"bad\_mapred\_inputs"&gt;&gt;}
&gt;&gt;&gt;&gt; ( slinode@127.0.0.1)33&gt; riakc\_pb\_socket:search(Pid,
&gt;&gt;&gt;&gt; &lt;&lt;"sl"&gt;&gt;,"short:cKCAn5").
&gt;&gt;&gt;&gt; {error,&lt;&lt;"bad\_mapred\_inputs"&gt;&gt;}
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; This queries are valid and work through Solr interface:
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; http://localhost:8098/solr/sl/select?q=got:[00000000000 TO 90000000000]
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; and
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; http://localhost:8098/solr/sl/select?q=short:cKCAn5
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Could you please describe format of third parameter(query)
&gt;&gt;&gt;&gt; for riakc\_pb\_socket:search/2?
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; --
&gt;&gt;&gt;&gt; Best regards,
&gt;&gt;&gt;&gt; Artem Golovinsky
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; --
&gt;&gt;&gt; Best regards,
&gt;&gt;&gt; Artem Golovinsky
&gt;&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

