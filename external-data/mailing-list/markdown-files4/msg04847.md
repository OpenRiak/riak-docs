---
title: "Re: riak with leveldb timeouts when retrieving bucket keys"
description: ""
project: community
lastmod: 2011-09-23T09:39:49-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg04847"
mailinglist_parent_id: "msg04841"
author_name: "Artem Kozarezov"
project_section: "mailinglistitem"
sent_date: 2011-09-23T09:39:49-07:00
---


Hi, Kelly!

I'm using
http://downloads.basho.com/riak/riak-1.0.0rc1/riak\_1.0.0rc1-1\_amd64.deb
There are approximately 1400000 objects in the bucket, 153 GiB in 59645
leveldb files (find leveldb/ -type f | wc -l) .

On Fri, Sep 23, 2011 at 18:31, Kelly McLaughlin  wrote:

&gt; Artem,
&gt;
&gt; Are you using a riak package or have you built from source? Which version
&gt; or branch are you using? Also do you know how many objects are in the
&gt; bucket. Thanks.
&gt;
&gt; Kelly
&gt;
&gt; On Sep 23, 2011, at 2:23 AM, Artem Kozarezov wrote:
&gt;
&gt; &gt; Riak becomes unavailable when fetching bucket keys.
&gt; &gt; wget "http://127.0.0.1:8098/riak/bucket?keys=stream"
&gt; &gt;
&gt; &gt; 2011-09-23 12:13:21.924 [error] &lt;0.1110.0&gt; CRASH REPORT Process [] with 0
&gt; neighbours crashed with reason:
&gt; {timeout,{gen\_server,call,[&lt;0.1116.0&gt;,{work,&lt;0.1111.0&gt;,{fold,#Fun,#Fun},{fsm,{33509606,{1278813932664540053428224228626747642198940975104,'
&gt; riak@188.138.84.236'}},&lt;0.14780.226&gt;}}]}}
&gt; &gt; 2011-09-23 12:13:31.198 [error] &lt;0.907.0&gt; gen\_fsm &lt;0.907.0&gt; in state
&gt; ready terminated with reason:
&gt; {timeout,{gen\_server,call,[&lt;0.916.0&gt;,{work,&lt;0.908.0&gt;,{fold,#Fun,#Fun},{fsm,{33509606,{1187470080331358621040493926581979953470445191168,'
&gt; riak@188.138.84.236'}},&lt;0.14780.226&gt;}}]}}
&gt; &gt; 2011-09-23 12:14:22.196 [error] &lt;0.1512.0&gt; gen\_fsm &lt;0.1512.0&gt; in state
&gt; ready terminated with reason:
&gt; {timeout,{gen\_fsm,sync\_send\_all\_state\_event,[&lt;0.1513.0&gt;,stop]}}
&gt; &gt;
&gt; &gt; Would be nice to have a configurable bandwidth limit for the keys
&gt; retrieval (e.g. "please give me no more than 1000 keys per second"), so that
&gt; one could fetch the keys without making Riak unresponsive.
&gt; &gt;
&gt; &gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

