---
title: "Re: Ruby eventmachine async client"
description: ""
project: community
lastmod: 2012-03-16T13:50:20-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06992"
mailinglist_parent_id: "msg06988"
author_name: "graphex"
project_section: "mailinglistitem"
sent_date: 2012-03-16T13:50:20-07:00
---


You just had to throw that out there, eh Cribbs?... now I'm debating about
tossing the last week and a half spent watching conference videos about
eventMachine and debating if I should implement celluloid instead. I've been
to a couple of happy hours with Tony Arcieri and now I feel like nobody told
me what the cool kids were using for their nonblocking, threaded systems.


Sean Cribbs-2 wrote
&gt; 
&gt; I would love to see a Celluloid::IO-based HTTP/PBC client almost more than
&gt; an EM or em-synchrony client. I seem to remember looking at
&gt; em-http-request
&gt; and found its capabilities as an HTTP client lacking in a few important
&gt; areas.
&gt; 
&gt; On Fri, Mar 16, 2012 at 3:55 PM, graphex &lt;gfxlists@&gt; wrote:
&gt; 
&gt;&gt;
&gt;&gt; Elias Levy wrote
&gt;&gt; &gt;
&gt;&gt; &gt; If you look at the list archive's you'll see that a while ago I posted
&gt;&gt; &gt; some
&gt;&gt; &gt; code to monkey patch the Ruby client to use EM Synchrony's TCPSocket so
&gt;&gt; as
&gt;&gt; &gt; to support EM.
&gt;&gt; &gt;
&gt;&gt; &gt; You'll find it at
&gt;&gt; &gt;
&gt;&gt; http://lists.basho.com/pipermail/riak-users\_lists.basho.com/2011-November/006308.html
&gt;&gt; &gt;
&gt;&gt;
&gt;&gt; Ah, I had read that before but didn't notice it was on synchrony. My
&gt;&gt; issue
&gt;&gt; is that I've had trouble with riak-ruby-client using PBC with 2i, so I
&gt;&gt; sort
&gt;&gt; of wrote it off (see: 
&gt;&gt; https://github.com/basho/riak-ruby-client/issues/17
&gt;&gt; https://github.com/basho/riak-ruby-client/issues/17 )
&gt;&gt;
&gt;&gt; That combined with the short reads issue sort of put me off on that
&gt;&gt; front.
&gt;&gt;
&gt;&gt;
&gt;&gt; Mathias Meyer wrote
&gt;&gt; &gt;
&gt;&gt; &gt; I'd recommend looking at #2, it looks like an easy path and should make
&gt;&gt; &gt; for a great addition to the riak-ruby-client too. In my ideal world,
&gt;&gt; &gt; there'd be a backend based on Faraday [2], so that the Ruby client
&gt;&gt; &gt; wouldn't even have to worry about the underlying implementation, but
&gt;&gt; you
&gt;&gt; &gt; need to punch Sean Cribbs (very nicely) about that. Or you could just
&gt;&gt; use
&gt;&gt; &gt; Faraday instead of em-synchrony all along, since Faraday has a backend
&gt;&gt; for
&gt;&gt; &gt; em-http/synchrony already.
&gt;&gt; &gt;
&gt;&gt;
&gt;&gt; That would certainly be nice though I'm unfortunately too low on time to
&gt;&gt; take a stab... and I've only looked at Faraday a bit... and synchrony is
&gt;&gt; kind of hurting my mind (actually more comfortable with callbacks and
&gt;&gt; -gasp-
&gt;&gt; curly braces!) Sounds like the best solution, though, and hopefully I can
&gt;&gt; circle back on that once I can delegate some of my other tasks to
&gt;&gt; someone.
&gt;&gt; For now, i will try out a fiber/iterator approach and fall back to a
&gt;&gt; defer
&gt;&gt; if it doesn't go well.
&gt;&gt;
&gt;&gt; I'm also secretly hoping that someone at basho can hook up the client to
&gt;&gt; an
&gt;&gt; em-style backend so it just works like -cough- mongo does.
&gt;&gt;
&gt;&gt; Thanks for the help guys!
&gt;&gt;
&gt;&gt; --
&gt;&gt; View this message in context:
&gt;&gt; http://riak-users.197444.n3.nabble.com/Ruby-eventmachine-async-client-tp3830975p3832985.html
&gt;&gt; Sent from the Riak Users mailing list archive at Nabble.com.
&gt;&gt;
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@.basho
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;
&gt; 
&gt; 
&gt; 
&gt; -- 
&gt; Sean Cribbs &lt;sean@&gt;
&gt; Software Engineer
&gt; Basho Technologies, Inc.
&gt; http://basho.com/
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@.basho
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; 


--
View this message in context: 
http://riak-users.197444.n3.nabble.com/Ruby-eventmachine-async-client-tp3830975p3833132.html
Sent from the Riak Users mailing list archive at Nabble.com.

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

