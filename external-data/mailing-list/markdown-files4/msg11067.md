---
title: "Re: riak crash"
description: ""
project: community
lastmod: 2013-05-14T03:30:28-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11067"
mailinglist_parent_id: "msg11065"
author_name: "Christian Dahlqvist"
project_section: "mailinglistitem"
sent_date: 2013-05-14T03:30:28-07:00
---


Hi Alexander,

The node appears to be crashing due to it hitting the Erlang process limit. You 
can increase this from the default value of 32768 to e.g. the double by setting 
adding the line +P 65536 to the vm.args file. Having said that I am wondering 
what is causing you to hit this limit. What ring size are you using? How are 
you querying your data?

Best regards,

Christian



On 14 May 2013, at 09:35, Alexander Ilyin  wrote:

&gt; Hi all,
&gt; 
&gt; I have my riak node crashed and can't figure out why this has happened. Any 
&gt; help would be appreciated.
&gt; 
&gt; I'm using riak 1.3.1 and running a single node on CentOS 6.3 (availability is 
&gt; not critical right now).
&gt; This node uses Bitcask backend with the default configuration except for 
&gt; expiry\_secs property which is set to 15552000.
&gt; The properties of a single bucket used are the following:
&gt; {"props":{"allow\_mult":false," basic\_quorum":false,"big\_
&gt; vclock":50,"chash\_keyfun":{"mod":"riak\_core\_util","fun":"chash\_std\_keyfun"},"dw":"quorum","last\_write\_wins":false,"linkfun":{"mod":"riak\_kv\_wm\_link\_walker","fun":"mapreduce\_linkfun"},"n\_val":2,"name":"c","notfound\_ok":true,"old\_vclock":86400,"postcommit":[],"pr":0,"precommit":[],"pw":0,"r":"one","rw":"quorum","small\_vclock":50,"w":"one","young\_vclock":20}}
&gt; There is enough disk space and RAM on the server.
&gt; At the moment of the crash size of the most partitions was about 1.1Gb, but 
&gt; few of them were smaller.
&gt; Attaching error.log and crash.log
&gt; 
&gt; Thanks in advance.
&gt; 
&gt; Alexander
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

