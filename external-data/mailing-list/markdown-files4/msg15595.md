---
title: "Re: using g-counter for sequence number synchronization"
description: ""
project: community
lastmod: 2015-01-26T08:07:53-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15595"
mailinglist_parent_id: "msg15589"
author_name: "Hristo Asenov"
project_section: "mailinglistitem"
sent_date: 2015-01-26T08:07:53-08:00
---


Thanks Mark and Chris, I see now that I need to use a strongly consistent 
framework of some kind for this operation. 

- Hristo

&gt; On Jan 26, 2015, at 3:56 AM, Christopher Meiklejohn  
&gt; wrote:
&gt; 
&gt;&gt; 
&gt;&gt; On Jan 23, 2015, at 5:32 PM, Hristo Asenov &gt; &gt; wrote:
&gt;&gt; 
&gt;&gt; Hello everyone,
&gt;&gt; 
&gt;&gt; I have noticed that in latest documentation on Riak data types 
&gt;&gt; (http://docs.basho.com/riak/latest/theory/concepts/crdts/#Counters 
&gt;&gt; ), for 
&gt;&gt; Counters it is not recommended to use them for ordered IDs (UUIDs). Can I 
&gt;&gt; implement g-counters (as described in the CRDT paper) using Riak’s Set 
&gt;&gt; datatype? I am wondering whether that will work out well for my use case.
&gt;&gt; 
&gt;&gt; What I would like to do is to have synchronization of sequence numbers 
&gt;&gt; between multiple src processes that send their inputs to a single 
&gt;&gt; centralized process. I want all the sequence numbers to be unique so that 
&gt;&gt; the centralized process can create an ordering of the input messages based 
&gt;&gt; on the sequence numbers. Thus I would have an integer entry for each src 
&gt;&gt; process in the set, and the sum of all the integers would be my unique id. 
&gt;&gt; After the src process writes a value to the DHT for its corresponding entry, 
&gt;&gt; would it then have to read the value from the DHT in order to make sure it 
&gt;&gt; got committed without conflicts?
&gt; 
&gt; Hi Hristo,
&gt; 
&gt; I’m not sure if I completely followed your use case, but I believe that you 
&gt; probably want strongly consistent operations if you want to generate a total 
&gt; order over a series of operations.
&gt; 
&gt; Using the sum of the integers of a G-Counter (or a G-Counter built on Riak’s 
&gt; set data structure) does not guarantee a globally unique number; given these 
&gt; counters are designed (and therefore allowed) to diverge, imagine the 
&gt; following scenario, possible due to delays in replication:
&gt; 
&gt; Replica A, G-Counter:
&gt; [{pid1, 2}, {pid2, 1}], Sum: 3
&gt; 
&gt; Replica B, G-Counter:
&gt; [{pid1, 1}, {pid2, 2}], Sum: 3
&gt; 
&gt; These both share the same sum, but should represent unique operations, right? 
&gt; Did I understand correctly?
&gt; 
&gt; Thanks,
&gt; - Chris
&gt; 
&gt; Christopher Meiklejohn
&gt; Senior Software Engineer
&gt; Basho Technologies, Inc.
&gt; cmeiklej...@basho.com 
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

