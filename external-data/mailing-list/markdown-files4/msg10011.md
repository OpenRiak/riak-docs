---
title: "Re: Bucket creation."
description: ""
project: community
lastmod: 2013-02-06T04:48:22-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg10011"
mailinglist_parent_id: "msg10006"
author_name: "Kevin Burton"
project_section: "mailinglistitem"
sent_date: 2013-02-06T04:48:22-08:00
---


The set properties method returns without error on the "illegally named" bucket 
as do all of the put operations. It is just the get properties operation that 
returns an error. If the bucket is indeed improperly named then the bug is in 
the operations that allow the bucket name. Right?

On Feb 5, 2013, at 10:44 PM, Alexander Moore  wrote:

&gt; I think the problem you are having here is that you are using an invalid 
&gt; bucket name.
&gt; 
&gt; "buyseasons/products" would actually refer to a bucket/key pair. Riak 
&gt; doesn't have nested buckets. 
&gt; 
&gt; If you change your bucket name to "buyseasons-products" or 
&gt; "buyseasons%20products" it should work.
&gt; 
&gt; As for the weird/misleading exception, I'll report it to CorrugatedIron. 
&gt; 
&gt; Thanks,
&gt; Alex Moore
&gt; 
&gt; 
&gt;&gt; I still have a question. Based on your input I modified the code slightly as 
&gt;&gt; follows:
&gt;&gt; 
&gt;&gt; 
&gt;&gt; RiakBucketProperties bucketProperties = new 
&gt;&gt; RiakBucketProperties();
&gt;&gt; 
&gt;&gt; bucketProperties.SetNVal(4);
&gt;&gt; 
&gt;&gt; bucketProperties.SetSearch(true);
&gt;&gt; 
&gt;&gt; bucketProperties.SetAllowMultiple(true);
&gt;&gt; 
&gt;&gt; bucketProperties.SetWVal("all");
&gt;&gt; 
&gt;&gt; bucketProperties.SetRVal("quorum");
&gt;&gt; 
&gt;&gt; if (!client.SetBucketProperties("buyseasons/products", 
&gt;&gt; bucketProperties).IsSuccess)
&gt;&gt; 
&gt;&gt; {
&gt;&gt; 
&gt;&gt; Console.WriteLine("Setting bucket properties failed");
&gt;&gt; 
&gt;&gt; }
&gt;&gt; 
&gt;&gt; RiakResult riakBuckpropertiesResult = 
&gt;&gt; client.GetBucketProperties("buyseasons/products", true);
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; But I get a NullReferenceException
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; at CorrugatedIron.Models.RiakBucketProperties.ReadQuorum(JObject props, 
&gt;&gt; String key, Action`1 setter)
&gt;&gt; 
&gt;&gt; at CorrugatedIron.Models.RiakBucketProperties..ctor(RiakRestResponse 
&gt;&gt; response)
&gt;&gt; 
&gt;&gt; at CorrugatedIron.RiakClient.GetBucketProperties(String bucket, Boolean 
&gt;&gt; extended)
&gt;&gt; 
&gt;&gt; . . . . .
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; So the bucket should have been created when I set the properties. But then I 
&gt;&gt; tried to read the properties back and I get the exception.
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; From: Alexander Sicular [mailto:sicul...@gmail.com] 
&gt;&gt; Sent: Tuesday, February 05, 2013 5:17 PM
&gt;&gt; To: Kevin Burton
&gt;&gt; Cc: riak-users
&gt;&gt; Subject: Re: Bucket creation.
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; "buckets" are a virtual concept. you dont need to "create" them. just write 
&gt;&gt; a key to any bucket. also by modifying the default bucket parameters, by 
&gt;&gt; adding the search hook on a bucket, let's say, you are also "creating" the 
&gt;&gt; bucket.
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; -alexander
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; On Tue, Feb 5, 2013 at 6:09 PM, Kevin Burton  
&gt;&gt; wrote:
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; I have filed to find code that would create a bucket. It must be in the past 
&gt;&gt; I have just put objects into a bucket and Riak must construct the bucket if 
&gt;&gt; it does not exist. Now I would like to create the bucket and set some 
&gt;&gt; properties on that bucket. But I donâ€™t know how to create the bucket.
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; So I have code like:
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; BuildProduct(source, destination);
&gt;&gt; 
&gt;&gt; RiakObject value = new RiakObject("products", 
&gt;&gt; keySku, JsonConvert.SerializeObject(destination))
&gt;&gt; 
&gt;&gt; {
&gt;&gt; 
&gt;&gt; ContentType = "application/json"
&gt;&gt; 
&gt;&gt; };
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; RiakResult response = 
&gt;&gt; client.Put(value, new RiakPutOptions { W = 2 });
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; But I would like to create the bucket and set properties on the bucket 
&gt;&gt; before I put things into the bucket. Like:
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; RiakResult riakBuckpropertiesResult = 
&gt;&gt; client.GetBucketProperties("products", true);
&gt;&gt; 
&gt;&gt; if (riakBuckpropertiesResult.IsSuccess)
&gt;&gt; 
&gt;&gt; {
&gt;&gt; 
&gt;&gt; riakBuckpropertiesResult.Value
&gt;&gt; 
&gt; 
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

