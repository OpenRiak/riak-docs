---
title: "Re: riak ubuntu 11 building problems"
description: ""
project: community
lastmod: 2011-11-09T17:50:02-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05531"
mailinglist_parent_id: "msg05486"
author_name: "Ivan Trajkovic"
project_section: "mailinglistitem"
sent_date: 2011-11-09T17:50:02-08:00
---


so I upgraded to Ubuntu 11.10 from 11.04
same errors



is there some way to specify when doing a build to use erts-5.8.4? because
for some reason its using 5.9 which is having trouble starting.

On Wed, Nov 9, 2011 at 4:18 PM, Ivan Trajkovic  wrote:

&gt; Im definitely using R14B3
&gt; running "riak console" gives me the same errors
&gt;
&gt;
&gt; On Wed, Nov 9, 2011 at 1:49 PM, Jared Morrow  wrote:
&gt;
&gt;&gt; Like I said, you seem to be using R15 in your building of riak, that's
&gt;&gt; why you have a erts-5.9 directory instead of erts-5.8.4. Please uninstall
&gt;&gt; your erlang version, and try using erlang-r14b03. Using something like
&gt;&gt; kerl  will make it easier to manage
&gt;&gt; multiple versions of erlang.
&gt;&gt;
&gt;&gt; Good luck,
&gt;&gt; Jared
&gt;&gt;
&gt;&gt;
&gt;&gt; On Wed, Nov 9, 2011 at 12:59 AM, Ivan Trajkovic wrote:
&gt;&gt;
&gt;&gt;&gt; @Andrew
&gt;&gt;&gt; erlang builds fine every time, never had a problem with that.
&gt;&gt;&gt; following the riak build sequence to the letter that you listed riak
&gt;&gt;&gt; builds fine like last time
&gt;&gt;&gt; but the same message comes up:
&gt;&gt;&gt;
&gt;&gt;&gt; //------------------------------------------------------------------------------------------------
&gt;&gt;&gt; ~/Desktop/riak/rel/riak$ bin/riak start
&gt;&gt;&gt; escript: Failed to open file:
&gt;&gt;&gt; ~/Desktop/riak/rel/riak/erts-5.9/bin/nodetoolbellowescript: Failed to open
&gt;&gt;&gt; file: ~/Desktop/riak/rel/riak/erts-5.9/bin/nodetool
&gt;&gt;&gt; Error reading ~/Desktop/riak/rel/riak/etc/app.config
&gt;&gt;&gt;
&gt;&gt;&gt; //------------------------------------------------------------------------------------------------
&gt;&gt;&gt; so then I went ahead and tried out to see what happens if I move
&gt;&gt;&gt; "nodetool" from erts-5.8.4 to erts-5-9, which is where it seems to be
&gt;&gt;&gt; looking for it at, only to get further new errors:
&gt;&gt;&gt;
&gt;&gt;&gt; //------------------------------------------------------------------------------------------------
&gt;&gt;&gt; ~/Desktop/riak/rel/riak$ mv erts-5.8.4/bin/nodetool erts-5.9/bin/
&gt;&gt;&gt; ~/Desktop/riak/rel/riak$ bin/riak start
&gt;&gt;&gt;
&gt;&gt;&gt; Crash dump was written to: erl\_crash.dump
&gt;&gt;&gt; init terminating in do\_boot ()
&gt;&gt;&gt;
&gt;&gt;&gt; Crash dump was written to: erl\_crash.dump
&gt;&gt;&gt; init terminating in do\_boot ()
&gt;&gt;&gt; Error reading ~/Desktop/riak/rel/riak/etc/app.config
&gt;&gt;&gt; {"init terminating in do\_boot",{'cannot get
&gt;&gt;&gt; bootfile','start\_clean.boot'}}
&gt;&gt;&gt;
&gt;&gt;&gt; //------------------------------------------------------------------------------------------------
&gt;&gt;&gt;
&gt;&gt;&gt; thanks
&gt;&gt;&gt;
&gt;&gt;&gt; On Tue, Nov 8, 2011 at 11:44 PM, Andrew Musselman &lt;
&gt;&gt;&gt; andrew.mussel...@gmail.com&gt; wrote:
&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Have you tried this series of commands?
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; wget http://erlang.org/download/otp\_src\_R14B03.tar.gz
&gt;&gt;&gt;&gt; tar xzvf otp\_src\_R14B03.tar.gz
&gt;&gt;&gt;&gt; cd otp\_src\_R14B03/
&gt;&gt;&gt;&gt; ./configure && make && sudo make install
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; git clone https://github.com/basho/riak.git
&gt;&gt;&gt;&gt; cd riak/
&gt;&gt;&gt;&gt; git checkout 1.0.1-release
&gt;&gt;&gt;&gt; git fetch
&gt;&gt;&gt;&gt; git pull
&gt;&gt;&gt;&gt; make rel
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; If that fails please answer with relevant errors along the way..
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Best
&gt;&gt;&gt;&gt; Andrew
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; On 11/08/2011 06:23 PM, Ivan Trajkovic wrote:
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; I have ubuntu 11.04, not 11.10
&gt;&gt;&gt;&gt; could that be an issue
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; On Tue, Nov 8, 2011 at 8:14 PM, Andrew Musselman &lt;
&gt;&gt;&gt;&gt; andrew.mussel...@gmail.com&gt; wrote:
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; I can confirm building both erlang and riak from source on Ubuntu
&gt;&gt;&gt;&gt;&gt; 11.10 works.
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; That is, everything builds without any complaints or editing config
&gt;&gt;&gt;&gt;&gt; files, and then I'm able to add an object to a riak client.
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; wget http://erlang.org/download/otp\_src\_R14B03.tar.gz
&gt;&gt;&gt;&gt;&gt; tar xzvf otp\_src\_R14B03.tar.gz
&gt;&gt;&gt;&gt;&gt; cd otp\_src\_R14B03/
&gt;&gt;&gt;&gt;&gt; ./configure && make && sudo make install
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; git clone https://github.com/basho/riak.git
&gt;&gt;&gt;&gt;&gt; cd riak/
&gt;&gt;&gt;&gt;&gt; git checkout 1.0.1-release
&gt;&gt;&gt;&gt;&gt; git fetch
&gt;&gt;&gt;&gt;&gt; git pull
&gt;&gt;&gt;&gt;&gt; make rel
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Thanks all for the advice.
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Best
&gt;&gt;&gt;&gt;&gt; Andrew
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; On 11/08/2011 04:49 PM, Ivan Trajkovic wrote:
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; yep encountered that issue already and made sure Im using whats
&gt;&gt;&gt;&gt;&gt; supported
&gt;&gt;&gt;&gt;&gt; so R14B3, and checking out riak-1.0.1
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; On Tue, Nov 8, 2011 at 7:17 PM, Jared Morrow  wrote:
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt; When you say you are building from source (github) 1.0.1, are you
&gt;&gt;&gt;&gt;&gt;&gt; doing a 'git checkout riak-1.0.1' or building from 'master'? One note,
&gt;&gt;&gt;&gt;&gt;&gt; based on your erts version, you are using a newer erlang than we support.
&gt;&gt;&gt;&gt;&gt;&gt; We have not built or tested Riak against erlang R15. Try using R14B02 
&gt;&gt;&gt;&gt;&gt;&gt; or
&gt;&gt;&gt;&gt;&gt;&gt; R14B03 for Riak 1.0.1. If you are building Riak off of master, you can
&gt;&gt;&gt;&gt;&gt;&gt; use R14B04 as well.
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt; -Jared
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt; On Tue, Nov 8, 2011 at 3:45 PM, Ivan Trajkovic 
&gt;&gt;&gt;&gt;&gt;&gt; wrote:
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt; hi Jared, thank you for your fast response...
&gt;&gt;&gt;&gt;&gt;&gt;&gt; interestingly riak 1.0.1 does build now, from source (github)...
&gt;&gt;&gt;&gt;&gt;&gt;&gt; unlike before... not really sure what changed.
&gt;&gt;&gt;&gt;&gt;&gt;&gt; but the old errors are coming up again, when trying to start riak:
&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt; ~/Desktop/riak/rel/riak$ bin/riak start
&gt;&gt;&gt;&gt;&gt;&gt;&gt; escript: Failed to open file:
&gt;&gt;&gt;&gt;&gt;&gt;&gt; ~/Desktop/riak/rel/riak/erts-5.9/bin/nodetool
&gt;&gt;&gt;&gt;&gt;&gt;&gt; escript: Failed to open file:
&gt;&gt;&gt;&gt;&gt;&gt;&gt; ~/Desktop/riak/rel/riak/erts-5.9/bin/nodetool
&gt;&gt;&gt;&gt;&gt;&gt;&gt; Error reading ~/Desktop/riak/rel/riak/etc/app.config
&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt; erts-5.9/bin/nodetool really isnt there
&gt;&gt;&gt;&gt;&gt;&gt;&gt; app.config however is present, but Im guessing that error is
&gt;&gt;&gt;&gt;&gt;&gt;&gt; dependent on the nodetool failure error coming up
&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt;&gt;&gt;&gt; riak-users mailing 
&gt;&gt;&gt;&gt;&gt; listriak-users@lists.basho.comhttp://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt;&gt;&gt; riak-users mailing 
&gt;&gt;&gt;&gt; listriak-users@lists.basho.comhttp://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

