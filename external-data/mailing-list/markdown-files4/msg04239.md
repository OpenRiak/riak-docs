---
title: "Re: Crashed node has Bitcask merge errors on restart"
description: ""
project: community
lastmod: 2011-08-05T07:08:00-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg04239"
mailinglist_parent_id: "msg04235"
author_name: "David Smith"
project_section: "mailinglistitem"
sent_date: 2011-08-05T07:08:00-07:00
---


On Fri, Aug 5, 2011 at 6:49 AM, Jeff Pollard  wrote:
&gt; Update: now the node has crashed, due to the following lines in the
&gt; sasl-error.log (see below).  I've also attached the crash dump to this
&gt; email.
&gt; Real quickly though, just to confirm - If we wanted to restore the node from
&gt; a recent backup, the procedure is as simple as:
&gt;
&gt; Stop the node.
&gt; Restore the bitcask and ring directories from a recent backup (~12 hours
&gt; old) to the node
&gt; Start the node
&gt;
&gt; That correct?  Any gotchas or anything else I should know about that
&gt; process?

You really only need to do the bitcask dirs, not the ring; also make
sure you move aside the bitcask files created interstitially.

The {error, emfile} problem shows that you're hitting the ulimit -n
for your process. Make sure your ulimit is set appropriately. It can
also be helpful to remove any 0-length \*.bitcask.data files.

D.

-- 
Dave Smith
Director, Engineering
Basho Technologies, Inc.
diz...@basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

