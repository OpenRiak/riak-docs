---
title: "Re: Rolling upgrade from 1.4.2 to 2.0.5"
description: ""
project: community
lastmod: 2015-08-06T05:41:16-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16370"
mailinglist_parent_id: "msg16368"
author_name: "Sujay Mansingh"
project_section: "mailinglistitem"
sent_date: 2015-08-06T05:41:16-07:00
---


Thanks Magnus & John.

Yes certainly I will test it on a separate cluster first! Which is related
to another question I have.

If I want to backup I can archive the directories on the nodes as described
here:
http://docs.basho.com/riak/latest/ops/running/backups/#OS-Specific-Directory-Locations

But in order to verify the backup (or perform operations on the cluster in
'offline' mode), can I simply bring up a separate 5 node cluster and untar
the backup files?
(Probably not the /etc/riak directory, but the data and ring directories.)

I want to do that, and then try adding a riak 2.0.6 node to the test riak
1.4.2 cluster and see if things are ok.

Thanks,

Sujay

On Thu, Aug 6, 2015 at 9:31 AM, Magnus Kessler  wrote:

&gt;
&gt;
&gt; On 5 August 2015 at 18:53, John Daily  wrote:
&gt;
&gt;&gt; That’s correct: upgrades to either 2.0.x or 2.1.x are supported from the
&gt;&gt; 1.4 series.
&gt;&gt;
&gt;&gt; Side note: I definitely recommend testing the upgrade process in a QA
&gt;&gt; environment first.
&gt;&gt;
&gt;&gt; -John
&gt;&gt;
&gt;
&gt; Hi Sujay,
&gt;
&gt; The latest release in the 2.0 series is 2.0.6 [0]. Please use this version
&gt; if you upgrade to 2.0.
&gt;
&gt; Please also review the documentation about the new 'riak.conf'
&gt; configuration file [1][2]. 2.x installations should use the new format, but
&gt; you can continue to use the 'app.config' format from Riak 1.x. To maintain
&gt; complete backwards compatibility when using 'app.config', please add
&gt;
&gt; [{default\_bucket\_props,
&gt; [{allow\_mult,false}, %% have Riak resolve conflicts and do not return 
&gt; siblings
&gt; {dvv\_enabled,false}]}, %% use vector clocks for conflict resolution
&gt; %% other settings
&gt; ]
&gt;
&gt; to 'app.config'. This will ensure that your existing application continues
&gt; to work exactly as before. When using 'riak.conf', these settings will be
&gt; applied automatically.
&gt;
&gt;
&gt; Magnus
&gt;
&gt; [0] http://docs.basho.com/riak/2.0.6/downloads/
&gt; [1]
&gt; http://docs.basho.com/riak/latest/intro-v20/#Simplified-Configuration-Management
&gt; [2]
&gt; http://docs.basho.com/riak/latest/ops/advanced/configs/configuration-files/
&gt;
&gt; On Aug 5, 2015, at 12:13 PM, Sujay Mansingh  wrote:
&gt;&gt;
&gt;&gt;
&gt;&gt; Hello all, I have a 5 node riak cluster, all nodes running 1.4.2.
&gt;&gt;
&gt;&gt; I want to upgrade to riak 2.x
&gt;&gt;
&gt;&gt; According to this:
&gt;&gt; http://docs.basho.com/riak/latest/ops/upgrading/rolling-upgrades/ I can
&gt;&gt; perform a rolling upgrade (a mixed cluster)
&gt;&gt; as long as the versions aren't more than 2 versions apart.
&gt;&gt;
&gt;&gt; There is no riak 1.5 so would riak 1.4.2 -&gt; 2.0.5 count as 1 version
&gt;&gt; apart?
&gt;&gt;
&gt;&gt; Sujay
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;
&gt;&gt;
&gt;
&gt;
&gt; --
&gt; Magnus Kessler
&gt; Client Services Engineer @ Basho
&gt;
&gt; Registered Office - 8 Lincoln’s Inn Fields London WC2A 3BP Reg 07970431
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

