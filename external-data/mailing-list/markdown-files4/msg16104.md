---
title: "Re: [Riak-Users]Why riak search only return 1 result every query,	how to return all results at once"
description: ""
project: community
lastmod: 2015-05-04T12:31:42-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16104"
mailinglist_parent_id: "msg16103"
author_name: "Zeeshan Lakhani"
project_section: "mailinglistitem"
sent_date: 2015-05-04T12:31:42-07:00
---


To include with Chris’s questions, are you using a custom or the “default” 
bucket type?

Thanks.

Zeeshan Lakhani
programmer | 
software engineer at @basho | 
org. member/founder of @papers\_we\_love | paperswelove.org
twitter =&gt; @zeeshanlakhani

&gt; On May 5, 2015, at 4:22 AM, Christopher Meiklejohn  
&gt; wrote:
&gt; 
&gt;&gt; 
&gt;&gt; On Apr 21, 2015, at 4:07 PM, 寂寂 &lt;44290...@qq.com&gt; wrote:
&gt;&gt; 
&gt;&gt; And I create the bucket type by myself:
&gt;&gt; 
&gt;&gt; riak-admin bucket-type create video '{"props":{"search\_index":"videos"}}'
&gt;&gt; riak-admin bucket-type activate vide
&gt;&gt; 
&gt;&gt; 
&gt;&gt; ------------------ Original ------------------
&gt;&gt; From: "寂寂 ";&lt;44290...@qq.com&gt;;
&gt;&gt; Send time: Tuesday, Apr 21, 2015 9:49 PM
&gt;&gt; To: "riak-users";
&gt;&gt; Subject: [Riak-Users]Why riak search only return 1 result every query,how 
&gt;&gt; to return all results at once
&gt;&gt; 
&gt;&gt; Dear All,
&gt;&gt; 
&gt;&gt; I have many objects with the same "tag:hot" stored in Riak cluster with two 
&gt;&gt; nodes, all with "leveldb" backend.
&gt;&gt; 
&gt;&gt; When I try to search with the same query condition, I just got one result 
&gt;&gt; returned, and everytime with different result:
&gt;&gt; curl -v "http://192.168.1.102:10028/search/query/videos?wt=json&q=tag:hot"
&gt;&gt; {"responseHeader":{"status":0,"QTime":18,"params":{"shards":"127.0.0.1:10014/internal\_solr/videos,127.0.0.1:10024/internal\_solr/videos","q":"tag:hot","127.0.0.1:10014":"\_yz\_pn:64
&gt;&gt; OR (\_yz\_pn:61 AND (\_yz\_fpn:61)) OR \_yz\_pn:60 OR \_yz\_pn:57 OR \_yz\_pn:48 OR 
&gt;&gt; \_yz\_pn:45 OR \_yz\_pn:36 OR \_yz\_pn:33 OR \_yz\_pn:24 OR \_yz\_pn:21 OR \_yz\_pn:12 
&gt;&gt; OR \_yz\_pn:9","wt":"json","127.0.0.1:10024":"\_yz\_pn:54 OR \_yz\_pn:51 OR 
&gt;&gt; \_yz\_pn:42 OR \_yz\_pn:39 OR \_yz\_pn:30 OR \_yz\_pn:27 OR \_yz\_pn:18 OR \_yz\_pn:15 
&gt;&gt; OR \_yz\_pn:6 OR 
&gt;&gt; \_yz\_pn:3"}},"response":{"numFound":1,"start":0,"maxScore":0.71231794,"docs":[{"title":"Love
&gt;&gt; 
&gt;&gt; Story","code":"8vBcw6rJCS6D6til2u","\_yz\_id":"1\*video\*movie\*8vBcw6rJCS6D6til2u\*48","\_yz\_rk":"8vBcw6rJCS6D6til2u","\_yz\_rt":"video","\_yz\_rb":"movie"}]}}
&gt;&gt; 
&gt;&gt; 
&gt;&gt; curl -v "http://192.168.1.102:10028/search/query/videos?wt=json&q=tag:hot"
&gt;&gt; {"responseHeader":{"status":0,"QTime":14,"params":{"shards":"127.0.0.1:10014/internal\_solr/videos,127.0.0.1:10024/internal\_solr/videos","q":"tag:hot","127.0.0.1:10014":"(\_yz\_pn:60
&gt;&gt; AND (\_yz\_fpn:60)) OR \_yz\_pn:56 OR \_yz\_pn:53 OR \_yz\_pn:44 OR \_yz\_pn:41 OR 
&gt;&gt; \_yz\_pn:32 OR \_yz\_pn:29 OR \_yz\_pn:20 OR \_yz\_pn:17 OR \_yz\_pn:8 OR 
&gt;&gt; \_yz\_pn:5","wt":"json","127.0.0.1:10024":"\_yz\_pn:63 OR \_yz\_pn:59 OR \_yz\_pn:50 
&gt;&gt; OR \_yz\_pn:47 OR \_yz\_pn:38 OR \_yz\_pn:35 OR \_yz\_pn:26 OR \_yz\_pn:23 OR 
&gt;&gt; \_yz\_pn:14 OR \_yz\_pn:11 OR 
&gt;&gt; \_yz\_pn:2"}},"response":{"numFound":1,"start":0,"maxScore":0.71231794,"docs":[{"title":"Forest
&gt;&gt; 
&gt;&gt; Gan","code":"8vBhSeP2Q2hCEEGmsC","\_yz\_id":"1\*video\*movie\*8vBhSeP2Q2hCEEGmsC\*20","\_yz\_rk":"8vBhSeP2Q2hCEEGmsC","\_yz\_rt":"video","\_yz\_rb":"movie"}]}}
&gt;&gt; 
&gt;&gt; How can I get all at once query?
&gt; 
&gt; Hi there,
&gt; 
&gt; Can you clarify how you are writing the values? Are you writing with a w=1 
&gt; or using the defaults? Given the index delay on Riak Search, subsequent 
&gt; queries may return different values given on when you query and if you are 
&gt; using majority write quorums.
&gt; 
&gt; When are you writing the values and how are you performing the writes?
&gt; 
&gt; Thanks,
&gt; Chris
&gt; 
&gt; Christopher Meiklejohn
&gt; Senior Software Engineer
&gt; Basho Technologies, Inc.
&gt; cmeiklej...@basho.com 
&gt; 
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com 
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com 
&gt; 
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

