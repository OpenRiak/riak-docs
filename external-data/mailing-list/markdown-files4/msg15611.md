---
title: "question reg. delayed relocation of nodes in the new cluster."
description: ""
project: community
lastmod: 2015-01-29T12:40:59-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15611"
author_name: "ROMAN SHESTAKOV"
project_section: "mailinglistitem"
sent_date: 2015-01-29T12:40:59-08:00
---


hello,

I am new to riak\_core and currently I am evaluating riak\_core for one of the 
potential projects. I am facing the following oddity and I am not sure if it is 
by design or because I misconfigured something.

I have a riak\_core ring with 3 physical nodes. When I joined first two nodes in 
the cluster( by riak\_admin cluster plan; risk\_admin cluster commit) the 
risk\_admin member-status showed that cluster is in valid state but all the 
nodes (100%) were still sitting on the first node and both nodes showing 
pending 50%.

I was expecting the cluster to rebalance relatively quickly but nothing was 
happening until I restarted one of the nodes. When the node came up, 
member-status showed that 25% of the nodes being moved to the second node. 
Another restart resulted in complete rebalance 50% - 50% between nodes.

I removed data/ring dir on both nodes and tried to join all 3 available nodes 
into a new cluster - the same thing happened but this time the split of pending 
nodes was roughly 33%/33%/34% (as expected). The cluster rebalanced only after 
I bounced the nodes few times.

Is this expected behaviour? I was expecting that the act of committing the 
cluster plan would trigger the vnode relocation between the physical nodes?

to clarify - this is brand new riak\_core app without \*any\* of custom 
functionality for handoff implemented. 

apologies if this is a stupid question - as I said I am just starting with 
playing with riak\_core.

Regards, Roman



\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

