---
title: "Re: Reaping Tombstones"
description: ""
project: community
lastmod: 2017-01-03T10:34:16-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17826"
mailinglist_parent_id: "msg17820"
author_name: "Nick Marino"
project_section: "mailinglistitem"
sent_date: 2017-01-03T10:34:16-08:00
---


We have new tombstone reaping functionality in the works for Riak KV 2.3,
which should allow for safe and automatic removal of old leftover
tombstones. In the mean time, you can potentially trigger the deletion of
old, leftover tombstones by doing reads to those keys; if all the primary
replicas return the tombstone then Riak will automatically try and remove
it.

Note, however, that this will not immediately reclaim disk space. Deletion
of the tombstone by Riak will still leave behind a backend tombstone for
some amount of time. See the docs here for more info on this:
http://docs.basho.com/riak/kv/2.2.0/using/reference/object-deletion/#deletion-from-backends

As for estimating disk space used by tombstones, I'm afraid I don't know of
any easy way to do that. Hopefully someone else may have a good suggestion
here.

Cheers,
Nick

On Fri, Dec 30, 2016 at 9:55 AM, Arun Rajagopalan &lt;
arun.v.rajagopa...@gmail.com&gt; wrote:

&gt; Hello Riakers
&gt;
&gt; I wonder if there is anyway to delete all tombstones that were left behind
&gt; when delete\_mode was set to 'keep'
&gt;
&gt; Also how do I estimate how much space the tombstones take ? We have a ton
&gt; of large scale and frequent delete operations and I suspect some space is
&gt; used by Tombstones. I would like to find out if it is significant enough to
&gt; warrant some cleanup. If it does, how do I remove them?
&gt;
&gt; Thanks and wish you all Happy, Peaceful and Prosperous 2017 !
&gt;
&gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

