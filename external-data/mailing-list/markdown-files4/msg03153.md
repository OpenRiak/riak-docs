---
title: "Re: Extracting data during link walking using PBC"
description: ""
project: community
lastmod: 2011-04-27T23:47:09-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03153"
mailinglist_parent_id: "msg03152"
author_name: "Russell Brown"
project_section: "mailinglistitem"
sent_date: 2011-04-27T23:47:09-07:00
---


Hi OJ!

I'm just working through this myself at the moment as I'm trying to make the 
Java PB client behave the same way as the REST client .

On 28 Apr 2011, at 04:23, OJ Reeves wrote:

&gt; Hi everyone,
&gt; 
&gt; I'm currently using Riak to store some user/account/oauth information and I 
&gt; have a need to pull some data while link-walking using the Erlang PBC.
&gt; 
&gt; I have read the post on the Basho blog about how to do link walking using the 
&gt; REST API, and I can see that data for the individual nodes comes back as the 
&gt; nodes are being walked (by specifying 1 at the end of the URI). 
&gt; Unfortunately, after reading the docs, I can't see how to achieve the same 
&gt; result using the PBC. The samples demonstrate how to get information from the 
&gt; links using map/reduce, and I can see how I would use that information to hit 
&gt; Riak again and ask for the content.
&gt; 
&gt; So my question: Is this how link walking should work when using the PBC? Or 
&gt; is there some way of getting the PBC to return the content at the same time 
&gt; as doing the link walking?

I asked yesterday and the answer I received was: no.

&gt; 
&gt; In practice, what I have it a relationship between three entities (a, b and 
&gt; c) that live in different buckets (A, B and C). a has a link to b, and b has 
&gt; a link to c. What I want to do is walk from a to c while taking the following 
&gt; information:
&gt; The value stored in a.
&gt; The key of b and, if b still exists in B, the value stored in b, otherwise 
&gt; nothing/false/failure.
&gt; The key of c and an indication of whether c currently exists in C.
&gt; Currently I link walk and do each step manually and I was wondering if there 
&gt; was a better or more optimal way of performing these actions.
&gt; 

At the moment the plan is running an initial m/r job for the link phases then 
making a second m/r job with all the intermediate results as inputs. So maximum 
2 jobs is my target.

I should think this is a common problem so if you come up with an optimal 
solution you'll make a few friends!

How do you satisfy your requirement with the REST link walker? Specifically how 
do you get the value of \*a\* returned as part of the result?

Cheers

Russell

&gt; I hope I'm clear!
&gt; 
&gt; Many thanks for any insights you may have.
&gt; Best regards
&gt; OJ
&gt; 
&gt; -- 
&gt; 
&gt; OJ Reeves
&gt; http://buffered.io/
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

