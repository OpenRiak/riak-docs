---
title: "Re: Riak 1.3.1 high swap usage"
description: ""
project: community
lastmod: 2015-02-19T07:26:26-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15745"
mailinglist_parent_id: "msg15743"
author_name: "John Daily"
project_section: "mailinglistitem"
sent_date: 2015-02-19T07:26:26-08:00
---


Daniel, you may be aware of this, but a 3-node Riak cluster is not
recommended and may be playing a minor role in your resource problems.
Every request will hit every server (except for some requests that are
being made twice against a single server, making I/O that much worse), and
depending on your request parameters the loss of a single node may result
in failed reads and/or writes.

-John

On Thu, Feb 19, 2015 at 10:01 AM, Christopher Meiklejohn &lt;
cmeiklej...@basho.com&gt; wrote:

&gt;
&gt; &gt; On Feb 19, 2015, at 9:05 AM, Daniel Iwan  wrote:
&gt; &gt;
&gt; &gt; Hi
&gt; &gt; On 3 node cluster Ubuntu 12.04, nodes 8GB RAM all nodes show 6GB taken
&gt; &gt; beam.smp, 2GB by our process.
&gt; &gt; beam started swapping and currently is using 23GB of swap space.
&gt; &gt; vm.swappiness is set to 1
&gt; &gt; We are using ring 128. /var/lib/riak is 37GB in size 11GB of which is
&gt; used
&gt; &gt; by anti-entropy
&gt; &gt;
&gt; &gt; Is there a way to find out why there is so much memory required by Riak
&gt; &gt; process?
&gt;
&gt; Hi Daniel,
&gt;
&gt; Which backend are you using? Have you looked at our tuning documents?
&gt;
&gt; Also, if possible, you should consider moving to one of the later Riak
&gt; releases, which have better performance characteristics.
&gt;
&gt; - Chris
&gt;
&gt; Christopher Meiklejohn
&gt; Senior Software Engineer
&gt; Basho Technologies, Inc.
&gt; cmeiklej...@basho.com
&gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

