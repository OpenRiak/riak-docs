---
title: "Re: Streaming a binary file from riak via node.js to client"
description: ""
project: community
lastmod: 2011-05-21T04:01:19-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03376"
mailinglist_parent_id: "msg03375"
author_name: "francisco treacy"
project_section: "mailinglistitem"
sent_date: 2011-05-21T04:01:19-07:00
---


That should work, but i'll take a look at it. Which versions of
riak-js and Riak are you using?


2011/5/21 Max :
&gt; After watching the presentation about how to use node.js with riak, I
&gt; built some small application on node.js using the express framework.
&gt;
&gt; In riak files are stored via a PHP frontend but they should be served
&gt; via a node.js backend. Anyway, connecting to riak via node.js is not
&gt; that hard and sending the response is also rather easy. But it seems,
&gt; somewhere the buffer I get via the client.get operation is truncated.
&gt; I am using this code:
&gt;
&gt; app.get('/images/', function(req, res){
&gt;    riakClient.get('images', 'some.jpg', function(err, image, meta) {
&gt;        if (err) {
&gt;            throw err;
&gt;        }
&gt;
&gt;        res.send(image, {
&gt;            'Content-Type': meta.contentType
&gt;        });
&gt;    });
&gt; });
&gt;
&gt; To test if the image is served, but whenn I access the node.js url,
&gt; the browser tells me that the image cannot be displayed as it contains
&gt; errors. The filesize of the served image is too small compared to the
&gt; original. If I access the url /images/some.jpg directly via rest
&gt; interface on the command line, the correct image is returned.
&gt;
&gt; Has anyone experience in how to stream binary data from riak?
&gt;
&gt; Thanks in advance!
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

