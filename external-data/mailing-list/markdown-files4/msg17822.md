---
title: "Re: Reaping Tombstones"
description: ""
project: community
lastmod: 2016-12-30T07:12:56-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17822"
mailinglist_parent_id: "msg17821"
author_name: "Luca Favatella"
project_section: "mailinglistitem"
sent_date: 2016-12-30T07:12:56-08:00
---


On 30 December 2016 at 15:06, Matthew Von-Maszewski  wrote:
&gt; Greetings,
&gt;
&gt; I am not able to answer your tombstone questions. That question needs a
&gt; better expert.
&gt;
&gt; Just wanted to point out that Riak now has global expiry in both the leveldb
&gt; and bitcask backends. That might be a quicker solution for your frequent
&gt; delete operations:
&gt;
&gt; http://basho.com/products/riak-kv/global-object-expiration/
&gt;
&gt; Technical details for the leveldb expiry are found here:
&gt; https://github.com/basho/leveldb/wiki/mv-expiry
&gt;
&gt; Matthew
&gt;
&gt; On Dec 30, 2016, at 9:55 AM, Arun Rajagopalan 
&gt; wrote:
&gt;
&gt; Hello Riakers
&gt;
&gt; I wonder if there is anyway to delete all tombstones that were left behind
&gt; when delete\_mode was set to 'keep'

Hi Arun,

Brute-force rate-limited map-reduce custom application code looking
for `X-Riak-Deleted` in object metadata and then deleting? Refs:
\* 
http://docs.basho.com/riak/kv/2.2.0/developing/app-guide/advanced-mapreduce/#map-phase
\* 
https://github.com/basho/basho\_docs/blob/6b2f42a7243bfded737bd62eed12c490376c67e2/content/riak/kv/2.2.0/developing/app-guide/advanced-mapreduce.md#map-phase

Interested to hear if you come up with a better way though.


&gt; Also how do I estimate how much space the tombstones take ? We have a ton of
&gt; large scale and frequent delete operations and I suspect some space is used
&gt; by Tombstones. I would like to find out if it is significant enough to
&gt; warrant some cleanup.

I understand this is a separate question - I am not sure about the answer.


&gt; If it does, how do I remove them?

I believe I proposed an answer above.


Regards
Luca

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

