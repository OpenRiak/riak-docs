---
title: "Re: Java Library - best practice"
description: ""
project: community
lastmod: 2014-05-27T20:25:18-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14270"
mailinglist_parent_id: "msg14264"
author_name: "Brian Roach"
project_section: "mailinglistitem"
sent_date: 2014-05-27T20:25:18-07:00
---


Henning,

Yes, the Java client is designed to be used across multiple threads.
Instantiate it once and share it.

As you noted, there's options in the configuration for tuning the
internal connection pool. The client maintains a pool of connections
to the Riak node so that multi-threaded applications aren't creating a
new connection every time an operation is performed.

Thanks,
- Roach

On Mon, May 26, 2014 at 4:44 AM, Henning Verbeek  wrote:
&gt; I'd like to get some advice how best to handle clients in a
&gt; multi-threaded Java application. Riak is 1.4.8, java client library is
&gt; 1.4.4, using the protocol buffers clients.
&gt;
&gt; I'm referring specifically to
&gt; http://basho.github.io/riak-java-client/1.4.4/com/basho/riak/client/RiakFactory.html#newClient(com.basho.riak.client.raw.config.Configuration).
&gt; Should I use one single instance of IRiakClient per JVM and share it
&gt; between all threads that access Riak? Or should each thread obtain its
&gt; own, new client instance when needed and terminate it again
&gt; afterwards?
&gt;
&gt; If the PBConfiguration specifies a poolSize, is that being handled in
&gt; the Factory?
&gt;
&gt; Thanks, Henning
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

