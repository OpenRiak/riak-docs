---
title: "Re: setting n_val"
description: ""
project: community
lastmod: 2013-06-10T09:28:30-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11242"
mailinglist_parent_id: "msg11240"
author_name: "Eric Redmond"
project_section: "mailinglistitem"
sent_date: 2013-06-10T09:28:30-07:00
---


Alexander,

The simplest answer is that we never recommend running Riak on one node. The 
recommended minimum is 5, but you could possibly get away with 3 (the default 
repl value).

There is a blog post about this from last year, explaining why:
http://basho.com/why-your-riak-cluster-should-have-at-least-five-nodes/

Eric

On Jun 10, 2013, at 9:01 AM, Alexander Ilyin  wrote:

&gt; Hi all,
&gt; 
&gt; I have a question regarding setting the n\_val.
&gt; In the documentation 
&gt; (http://docs.basho.com/riak/latest/tutorials/fast-track/Tunable-CAP-Controls-in-Riak/)
&gt; it is stated that:
&gt; 
&gt; n\_val must be greater than 0 and less than or equal to the number of actual 
&gt; nodes in your cluster to get all the benefits of replication. 
&gt; And, we advise against modifying the n\_val of a bucket after its initial 
&gt; creation as this may result in failed reads because the new 
&gt; value may not be replicated to all the appropriate partitions.
&gt; 
&gt; But this seems contradictory to me. Which value I have to set if I'm setting 
&gt; up one node right now but planning to add second one later?
&gt; Setting n\_val=2 means this value will be greater than actual number of nodes. 
&gt; But setting n\_val=1 is also not advisable since
&gt; I will have to change it later to n\_val=2 (I'm planning to have two replicas 
&gt; in the end).
&gt; 
&gt; I'm also concerned about the performance in case of one node and n\_val=2. 
&gt; Will it degrade since both replicas are stored on the same server?
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

