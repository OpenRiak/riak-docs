---
title: "Re: 330 Errors"
description: ""
project: community
lastmod: 2010-12-05T20:02:20-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01729"
mailinglist_parent_id: "msg01727"
author_name: "David Smith"
project_section: "mailinglistitem"
sent_date: 2010-12-05T20:02:20-08:00
---


This issue is now fixed in riak\_kv HEAD:

https://github.com/basho/riak\_kv/commit/7dda1073e2c3cc3c020c08974441e803eb967714

You'll need to update deps/riak\_kv to make sure your build uses this
updated version.

Sorry for the inconvenience.

D.

On Sun, Dec 5, 2010 at 8:27 PM, David Smith  wrote:
&gt; This was discussed earlier today:
&gt;
&gt; http://lists.basho.com/pipermail/riak-users\_lists.basho.com/2010-December/002602.html
&gt;
&gt; D.
&gt;
&gt; On Sun, Dec 5, 2010 at 7:26 PM, Jeremiah Peschka
&gt;  wrote:
&gt;&gt; Just a quick update - this works beautifully in 0.13.0, so I'm even more
&gt;&gt; confused than ever before. I realize, too, that you'd probably like to see
&gt;&gt; the output of riak-admin status:
&gt;&gt; 1-minute stats for 'd...@127.0.0.1'
&gt;&gt; -------------------------------------------
&gt;&gt; vnode gets : 0
&gt;&gt; vnode\_puts : 0
&gt;&gt; read\_repairs : 0
&gt;&gt; vnode\_gets\_total : 0
&gt;&gt; vnode\_puts\_total : 0
&gt;&gt; node\_gets : 0
&gt;&gt; node\_gets\_total : 0
&gt;&gt; node\_get\_fsm\_time\_mean : undefined
&gt;&gt; node\_get\_fsm\_time\_median : undefined
&gt;&gt; node\_get\_fsm\_time\_95 : undefined
&gt;&gt; node\_get\_fsm\_time\_99 : undefined
&gt;&gt; node\_get\_fsm\_time\_100 : undefined
&gt;&gt; node\_puts : 0
&gt;&gt; node\_puts\_total : 0
&gt;&gt; node\_put\_fsm\_time\_mean : undefined
&gt;&gt; node\_put\_fsm\_time\_median : undefined
&gt;&gt; node\_put\_fsm\_time\_95 : undefined
&gt;&gt; node\_put\_fsm\_time\_99 : undefined
&gt;&gt; node\_put\_fsm\_time\_100 : undefined
&gt;&gt; read\_repairs\_total : 0
&gt;&gt; cpu\_nprocs : 116
&gt;&gt; cpu\_avg1 : 108
&gt;&gt; cpu\_avg5 : 95
&gt;&gt; cpu\_avg15 : 90
&gt;&gt; mem\_total : 6809560000
&gt;&gt; mem\_allocated : 4084760000
&gt;&gt; disk : [{"/",249723184,35},
&gt;&gt;         {"/Volumes/InternalStorage",379584512,64},
&gt;&gt;         {"/Volumes/XStorage",488050672,61}]
&gt;&gt; nodename : 'd...@127.0.0.1'
&gt;&gt; connected\_nodes : []
&gt;&gt; sys\_driver\_version : &lt;&lt;"1.5"&gt;&gt;
&gt;&gt; sys\_global\_heaps\_size : 0
&gt;&gt; sys\_heap\_type : private
&gt;&gt; sys\_logical\_processors : 4
&gt;&gt; sys\_otp\_release : &lt;&lt;"R14B"&gt;&gt;
&gt;&gt; sys\_process\_count : 169
&gt;&gt; sys\_smp\_support : true
&gt;&gt; sys\_system\_version : &lt;&lt;"Erlang R14B (erts-5.8.1) [source] [64-bit] [smp:4:4]
&gt;&gt; [rq:4] [async-threads:64] [hipe] [kernel-poll:true]"&gt;&gt;
&gt;&gt; sys\_system\_architecture : &lt;&lt;"i386-apple-darwin10.5.0"&gt;&gt;
&gt;&gt; sys\_threads\_enabled : true
&gt;&gt; sys\_thread\_pool\_size : 64
&gt;&gt; sys\_wordsize : 8
&gt;&gt; ring\_members : ['d...@127.0.0.1','d...@127.0.0.1','d...@127.0.0.1']
&gt;&gt; ring\_num\_partitions : 64
&gt;&gt; ring\_ownership :
&gt;&gt; &lt;&lt;"[{'d...@127.0.0.1',21},{'d...@127.0.0.1',21},{'d...@127.0.0.1',22}]"&gt;&gt;
&gt;&gt; ring\_creation\_size : 64
&gt;&gt; storage\_backend : riak\_kv\_bitcask\_backend
&gt;&gt; pbc\_connects\_total : 0
&gt;&gt; pbc\_connects : 0
&gt;&gt; pbc\_active : 0
&gt;&gt; riak\_err\_version : &lt;&lt;"0.1.0"&gt;&gt;
&gt;&gt; runtime\_tools\_version : &lt;&lt;"1.8.4.1"&gt;&gt;
&gt;&gt; luwak\_version : &lt;&lt;"1.0"&gt;&gt;
&gt;&gt; skerl\_version : &lt;&lt;"0.1"&gt;&gt;
&gt;&gt; riak\_kv\_version : &lt;&lt;"0.13.0"&gt;&gt;
&gt;&gt; bitcask\_version : &lt;&lt;"1.1.4"&gt;&gt;
&gt;&gt; riak\_core\_version : &lt;&lt;"0.13.0"&gt;&gt;
&gt;&gt; luke\_version : &lt;&lt;"0.2.2"&gt;&gt;
&gt;&gt; erlang\_js\_version : &lt;&lt;"0.4.1"&gt;&gt;
&gt;&gt; mochiweb\_version : &lt;&lt;"1.7.1"&gt;&gt;
&gt;&gt; webmachine\_version : &lt;&lt;"1.7.3"&gt;&gt;
&gt;&gt; crypto\_version : &lt;&lt;"2.0.1"&gt;&gt;
&gt;&gt; os\_mon\_version : &lt;&lt;"2.2.5"&gt;&gt;
&gt;&gt; sasl\_version : &lt;&lt;"2.1.9.2"&gt;&gt;
&gt;&gt; stdlib\_version : &lt;&lt;"1.17.1"&gt;&gt;
&gt;&gt; kernel\_version : &lt;&lt;"2.14.1"&gt;&gt;
&gt;&gt; executing\_mappers : 0
&gt;&gt; Jeremiah Peschka
&gt;&gt; Microsoft SQL Server MVP
&gt;&gt; MCITP: Database Developer, DBA
&gt;&gt;
&gt;&gt;
&gt;&gt; On Sun, Dec 5, 2010 at 9:09 PM, Jeremiah Peschka
&gt;&gt;  wrote:
&gt;&gt;&gt;
&gt;&gt;&gt; I recently switched from 0.12 to the latest and greatest from github and
&gt;&gt;&gt; I'm running into an HTTP 330 error when I attempt to read from a bucket. I
&gt;&gt;&gt; uploaded this picture using `curl -X PUT
&gt;&gt;&gt; HTTP://127.0.0.1:8091/riak/images/1.jpg -H "Content-type: image/jpeg"
&gt;&gt;&gt; --data-binary @nixon.jpg`
&gt;&gt;&gt; when I go to view the image, I get "Error 330
&gt;&gt;&gt; (net::ERR\_CONTENT\_DECODING\_FAILED): Unknown error."
&gt;&gt;&gt; When I use `riak attach` to take a look at what's going on, I can see that
&gt;&gt;&gt; the image is in there:
&gt;&gt;&gt; (d...@127.0.0.1)5&gt; C:get(&lt;&lt;"images"&gt;&gt;, &lt;&lt;"1.jpg"&gt;&gt;, 1).
&gt;&gt;&gt; {ok,{r\_object,&lt;&lt;"images"&gt;&gt;,&lt;&lt;"1.jpg"&gt;&gt;,
&gt;&gt;&gt;               [{r\_content,{dict,5,16,16,8,80,48,
&gt;&gt;&gt;                                 {[],[],[],[],[],[],[],[],[],[],[],[],...},
&gt;&gt;&gt;                                 {{[],[],
&gt;&gt;&gt;                                   [[&lt;&lt;"Links"&gt;&gt;]],
&gt;&gt;&gt;                                   [],[],
&gt;&gt;&gt;                                   [[&lt;&lt;"X-Riak-T"...&gt;&gt;,49,75|...]],
&gt;&gt;&gt;                                   [],[],[],[],...}}},
&gt;&gt;&gt;
&gt;&gt;&gt;  &lt;&lt;255,216,255,224,0,16,74,70,73,70,0,1,2,1,0,72,0,
&gt;&gt;&gt;                             72,0,...&gt;&gt;}],
&gt;&gt;&gt;               [{&lt;&lt;5,249,52,160&gt;&gt;,{1,63458817684}},
&gt;&gt;&gt;                {&lt;&lt;131,98,5,150,94,114&gt;&gt;,{1,63458818215}},
&gt;&gt;&gt;                {&lt;&lt;5,248,163,2&gt;&gt;,{1,63458818215}},
&gt;&gt;&gt;                {&lt;&lt;4,211,21,247&gt;&gt;,{1,63458818516}},
&gt;&gt;&gt;                {&lt;&lt;131,98,7,237,200,144&gt;&gt;,{1,63458818532}},
&gt;&gt;&gt;                {&lt;&lt;131,98,4,225,148,161&gt;&gt;,{1,63458818532}},
&gt;&gt;&gt;                {&lt;&lt;131,98,0,18,233,187&gt;&gt;,{1,63458818532}},
&gt;&gt;&gt;                {&lt;&lt;5,113,110,142&gt;&gt;,{1,63458819383}},
&gt;&gt;&gt;                {&lt;&lt;131,98,5,43,155,126&gt;&gt;,{1,63458819383}}],
&gt;&gt;&gt;               {dict,1,16,16,8,80,48,
&gt;&gt;&gt;                     {[],[],[],[],[],[],[],[],[],[],[],[],[],...},
&gt;&gt;&gt;                     {{[],[],[],[],[],[],[],[],[],[],[],...}}},
&gt;&gt;&gt;               undefined}}
&gt;&gt;&gt;
&gt;&gt;&gt; However, I end up with this error streaming across the console:
&gt;&gt;&gt; =ERROR REPORT==== 5-Dec-2010::21:04:25 ===
&gt;&gt;&gt; webmachine error: path="/riak/images/1.jpg"
&gt;&gt;&gt; [{webmachine\_util,escape\_quotes,
&gt;&gt;&gt;      [{error,
&gt;&gt;&gt;           {error,badarg,
&gt;&gt;&gt;               [{dict,fetch,
&gt;&gt;&gt;                    [&lt;&lt;"X-Riak-VTag"&gt;&gt;,
&gt;&gt;&gt;                     {dict,5,16,16,8,80,48,
&gt;&gt;&gt;                         {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
&gt;&gt;&gt;                         {{[],[],
&gt;&gt;&gt;                           [[&lt;&lt;"Links"&gt;&gt;]],
&gt;&gt;&gt;                           [],[],
&gt;&gt;&gt;
&gt;&gt;&gt;  [[&lt;&lt;"X-Riak-Tag"&gt;&gt;,49,75,109,90,107,122,79,79,120,
&gt;&gt;&gt;                             86,102,56,75,110,53,68,80,82,68,70,101,49]],
&gt;&gt;&gt;                           [],[],[],[],
&gt;&gt;&gt;
&gt;&gt;&gt;  [[&lt;&lt;"content-type"&gt;&gt;,105,109,97,103,101,47,106,112,
&gt;&gt;&gt;                             101,103]],
&gt;&gt;&gt;                           [],[],
&gt;&gt;&gt;
&gt;&gt;&gt;  [[&lt;&lt;"X-Riak-Last-Modified"&gt;&gt;|{1291,600183,525348}]],
&gt;&gt;&gt;                           [],
&gt;&gt;&gt;                           [[&lt;&lt;"X-Riak-Meta"&gt;&gt;]]}}}]},
&gt;&gt;&gt;                {riak\_kv\_wm\_raw,generate\_etag,2},
&gt;&gt;&gt;                {webmachine\_resource,resource\_call,3},
&gt;&gt;&gt;                {webmachine\_resource,do,3},
&gt;&gt;&gt;                {webmachine\_decision\_core,resource\_call,1},
&gt;&gt;&gt;                {webmachine\_decision\_core,decision,1},
&gt;&gt;&gt;                {webmachine\_decision\_core,handle\_request,2},
&gt;&gt;&gt;                {webmachine\_mochiweb,loop,1}]}},
&gt;&gt;&gt;       "\""]},
&gt;&gt;&gt;  {webmachine\_decision\_core,decision,1},
&gt;&gt;&gt;  {webmachine\_decision\_core,handle\_request,2},
&gt;&gt;&gt;  {webmachine\_mochiweb,loop,1},
&gt;&gt;&gt;  {mochiweb\_http,headers,5},
&gt;&gt;&gt;  {proc\_lib,init\_p\_do\_apply,3}]
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; Jeremiah Peschka
&gt;&gt;&gt; Microsoft SQL Server MVP
&gt;&gt;&gt; MCITP: Database Developer, DBA
&gt;&gt;
&gt;&gt;
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;
&gt;&gt;
&gt;

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

