---
title: "Re: Object not found after successful PUT on S3 API"
description: ""
project: community
lastmod: 2017-01-25T14:14:04-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17878"
mailinglist_parent_id: "msg17876"
author_name: "Daniel Miller"
project_section: "mailinglistitem"
sent_date: 2017-01-25T14:14:04-08:00
---


Thanks for the quick response, Luke.

There is nothing unusual about the keys. The format is a name + UUID + some
other random URL-encoded charaters, like most other keys in our cluster.

There are no errors near the time of the incident in any of the logs (the
last [error] is from over a month before). I see lots of messages like this
in console.log:

/var/log/riak/console.log
2017-01-20 15:38:10.184 [info]
&lt;0.22902.1193&gt;@riak\_kv\_exchange\_fsm:key\_exchange:263
Repaired 2 keys during active anti-entropy exchange of {
776422744832042175295707567380525354192214163456,3} between {
776422744832042175295707567380525354192214163456,'riak-fa...@fake3.fake.com'}
and {822094670998632891489572718402909198556462055424,'riak-
fa...@fake9.fake.com'}
2017-01-20 15:40:39.640 [info]
&lt;0.21789.1193&gt;@riak\_kv\_exchange\_fsm:key\_exchange:263
Repaired 1 keys during active anti-entropy exchange of {
936274486415109681974235595958868809467081785344,3} between {
959110449498405040071168171470060731649205731328,'riak-fa...@fake3.fake.com'}
and {981946412581700398168100746981252653831329677312,'riak-
fa...@fake5.fake.com'}
2017-01-20 15:46:40.918 [info]
&lt;0.13986.1193&gt;@riak\_kv\_exchange\_fsm:key\_exchange:263
Repaired 2 keys during active anti-entropy exchange of {
662242929415565384811044689824565743281594433536,3} between {
685078892498860742907977265335757665463718379520,'riak-fa...@fake3.fake.com'}
and {707914855582156101004909840846949587645842325504,'riak-
fa...@fake6.fake.com'}
2017-01-20 15:48:25.597 [info]
&lt;0.29943.1193&gt;@riak\_kv\_exchange\_fsm:key\_exchange:263
Repaired 2 keys during active anti-entropy exchange of {
776422744832042175295707567380525354192214163456,3} between {
776422744832042175295707567380525354192214163456,'riak-fa...@fake3.fake.com'}
and {799258707915337533392640142891717276374338109440,'riak-
fa...@fake0.fake.com'}

Thanks!
Daniel


On Wed, Jan 25, 2017 at 9:45 AM, Luke Bakken  wrote:

&gt; Hi Daniel -
&gt;
&gt; This is a strange scenario. I recommend looking at all of the log
&gt; files for "[error]" or other entries at about the same time as these
&gt; PUTs or 404 responses.
&gt;
&gt; Is there anything unusual about the key being used?
&gt; --
&gt; Luke Bakken
&gt; Engineer
&gt; lbak...@basho.com
&gt;
&gt;
&gt; On Wed, Jan 25, 2017 at 6:40 AM, Daniel Miller  wrote:
&gt; &gt; I have a 9-node Riak CS cluster that has been working flawlessly for
&gt; about 3
&gt; &gt; months. The cluster configuration, including backend and bucket
&gt; parameters
&gt; &gt; such as N-value are using default settings. I'm using the S3 API to
&gt; &gt; communicate with the cluster.
&gt; &gt;
&gt; &gt; Within the past week I had an issue where two objects were PUT resulting
&gt; in
&gt; &gt; a 200 (success) response, but all subsequent GET requests for those two
&gt; keys
&gt; &gt; return status of 404 (not found). Other than the fact that they are now
&gt; &gt; missing, there was nothing out of the ordinary with these particular to
&gt; &gt; PUTs. Maybe I'm missing something, but this seems like a scenario that
&gt; &gt; should never happen. All information included here about PUTs and GETs
&gt; comes
&gt; &gt; from reviewing the CS access logs. Both objects were PUT on the same
&gt; node,
&gt; &gt; however GET requests returning 404 have been observed on all nodes.
&gt; There is
&gt; &gt; plenty of other traffic on the cluster involving GETs and PUTs that are
&gt; not
&gt; &gt; failing. I'm unsure of how to troubleshoot further to find out what may
&gt; have
&gt; &gt; happened to those objects and why they are now missing. What is the best
&gt; &gt; approach to figure out why an object that was successfully PUT seems to
&gt; be
&gt; &gt; missing?
&gt; &gt;
&gt; &gt; Thanks!
&gt; &gt; Daniel Miller
&gt; &gt;
&gt; &gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; &gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

