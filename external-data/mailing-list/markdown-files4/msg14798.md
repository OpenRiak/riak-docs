---
title: "Re: A question about Riak search 2 delete values from index"
description: ""
project: community
lastmod: 2014-08-26T16:23:12-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14798"
mailinglist_parent_id: "msg14797"
author_name: "Luke Bakken"
project_section: "mailinglistitem"
sent_date: 2014-08-26T16:23:12-07:00
---


Hi Kevin -

Notice that your PUT statement uses the bucket type "animals" and
"cats" bucket within that type:

curl -XPUT "$RIAK\_HOST/types/animals/buckets/cats/keys/liono"

The corresponding delete would be this statement:

curl -XDELETE "$RIAK\_HOST/types/animals/buckets/cats/keys/liono"

--
Luke Bakken
CSE
lbak...@basho.com

On Tue, Aug 26, 2014 at 4:16 PM, Kevin Chan  wrote:
&gt;
&gt; Thank you, Luke! I inserted values followed examples in 
&gt; http://docs.basho.com/riak/2.0.0/dev/using/search/
&gt;
&gt; curl -XPUT "$RIAK\_HOST/types/animals/buckets/cats/keys/liono" \ 
&gt; -H'content-type:application/json' \ -d'{"name\_s":"Lion-o", "age\_i":30, 
&gt; "leader\_b":true}'
&gt;
&gt; However, it is not clear to remove this key. I tried this:
&gt;
&gt; curl -v -X DELETE http://127.0.0.1:8098/buckets/cats/keys/liono
&gt;
&gt; &lt; HTTP/1.1 404 Object Not Found
&gt; \* Server MochiWeb/1.1 WebMachine/1.10.5 (jokes are better explained) is not 
&gt; blacklisted
&gt; &lt; Server: MochiWeb/1.1 WebMachine/1.10.5 (jokes are better explained)
&gt; &lt; Date: Tue, 26 Aug 2014 23:14:40 GMT
&gt; &lt; Content-Type: text/plain
&gt; &lt; Content-Length: 10
&gt;
&gt;
&gt;
&gt;
&gt; On Tue, Aug 26, 2014 at 3:44 PM, Luke Bakken  wrote:
&gt;&gt;
&gt;&gt; Hi Kevin,
&gt;&gt;
&gt;&gt; The top of the document you reference has this disclaimer:
&gt;&gt;
&gt;&gt; "This document refers to the now deprecated Riak Search."
&gt;&gt;
&gt;&gt; Please use this document as a reference (you link to it earlier in your 
&gt;&gt; email):
&gt;&gt;
&gt;&gt; http://docs.basho.com/riak/2.0.0/dev/using/search/
&gt;&gt;
&gt;&gt; Finally, if you inserted objects using Riak's Key/Value operations,
&gt;&gt; you should delete them that way as well. Have you tried that?
&gt;&gt;
&gt;&gt; --
&gt;&gt; Luke Bakken
&gt;&gt; CSE
&gt;&gt; lbak...@basho.com
&gt;&gt;
&gt;&gt;
&gt;&gt; On Tue, Aug 26, 2014 at 3:30 PM, Kevin Chan  wrote:
&gt;&gt; &gt; Hi there,
&gt;&gt; &gt;
&gt;&gt; &gt; I am trying riak search 2, and have followed instructions on
&gt;&gt; &gt; http://docs.basho.com/riak/2.0.0/dev/using/search/
&gt;&gt; &gt; to create an index and query an index without any problems.
&gt;&gt; &gt;
&gt;&gt; &gt; However, I could not delete values from the index by either i) using the
&gt;&gt; &gt; solr interface, or ii) search-cmd, I followed instructions on
&gt;&gt; &gt; http://docs.basho.com/riak/2.0.0/dev/references/search-indexing/
&gt;&gt; &gt;
&gt;&gt; &gt; Could you please help?
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt; The error from the solr interface is as follows:
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt; curl -XPOST http://localhost:8098/solr/famous/update -H
&gt;&gt; &gt; 'content-type:text/xml' --data-binary @delete.xml
&gt;&gt; &gt;
&gt;&gt; &gt; 404 Not FoundNot Found
=========

The
&gt;&gt; &gt; requested document was not found on this
&gt;&gt; &gt; server.

---

mochiweb+webmachine web
&gt;&gt; &gt; server


&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt; The following is the error by search-cmd:
&gt;&gt; &gt;
&gt;&gt; &gt; search-cmd show-schema famous
&gt;&gt; &gt; \*\* The search-cmd tool is for a deprecated version of Riak Search.
&gt;&gt; &gt; \*\* Please upgrade to the new version of Riak Search.
&gt;&gt; &gt;
&gt;&gt; &gt; %% Schema for 'famous'
&gt;&gt; &gt; RPC to 'riak@127.0.0.1' failed: {'EXIT',
&gt;&gt; &gt; {noproc,
&gt;&gt; &gt; {gen\_server,call,
&gt;&gt; &gt; [riak\_search\_config,
&gt;&gt; &gt; {get\_raw\_schema,&lt;&lt;"famous"&gt;&gt;},
&gt;&gt; &gt; infinity]}}}
&gt;&gt; &gt;
&gt;&gt; &gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; &gt; riak-users mailing list
&gt;&gt; &gt; riak-users@lists.basho.com
&gt;&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt; &gt;
&gt;
&gt;

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

