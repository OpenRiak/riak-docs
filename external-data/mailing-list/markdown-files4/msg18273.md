---
title: "Re: Continuous Crash Report"
description: ""
project: community
lastmod: 2017-06-22T01:31:38-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg18273"
mailinglist_parent_id: "msg18272"
author_name: "Johan Sommerfeld"
project_section: "mailinglistitem"
sent_date: 2017-06-22T01:31:38-07:00
---


Hi,

I'm not sure but looking at the exception and the code you get function
clause error because you have the first argument being '$deleted' and the
function guard expects lists as arguments

https://github.com/basho/riak\_core/blob/master/src/riak\_core\_bucket\_props.erl#L129

The reason for it being '$deleted' I don't know, have you done anything to
bucket properties or is it just replacing a node?

Regards
Johan Sommerfeld

On 22 June 2017 at 10:11, Mark Richard Thomas 
wrote:

&gt; Hello
&gt;
&gt;
&gt;
&gt; My crash.log is continually filling up with the following message after
&gt; replacing a node:
&gt;
&gt;
&gt;
&gt; 2017-06-22 08:06:05 =CRASH REPORT====
&gt;
&gt; crasher:
&gt;
&gt; initial call: riak\_kv\_index\_hashtree:init/1
&gt;
&gt; pid: &lt;0.16663.2&gt;
&gt;
&gt; registered\_name: []
&gt;
&gt; exception exit: {{function\_clause,[{riak\_core\_bucket\_props,resolve,['$
&gt; deleted',[{active,true},{allow\_mult,false},{basic\_
&gt; quorum,true},{big\_vclock,50},{chash\_keyfun,{riak\_core\_util,
&gt; chash\_std\_keyfun}},{claimant,'r...@udcu1lc9a009.app.c9.test.com
&gt; '},{dvv\_enabled,false},{dw,quorum},{last\_write\_wins,true}
&gt; ,{linkfun,{modfun,riak\_kv\_wm\_link\_walker,mapreduce\_linkfun}
&gt; },{n\_val,3},{name,{&lt;&lt;"commercial"&gt;&gt;,&lt;&lt;"commercial\_
&gt; systest"&gt;&gt;}},{notfound\_ok,false},{old\_vclock,86400},{
&gt; postcommit,[]},{pr,0},{precommit,[]},{pw,0},{r,
&gt; quorum},{rw,quorum},{search\_index,&lt;&lt;"commercial\_systest"&gt;&gt;
&gt; },{small\_vclock,50},{w,quorum},{young\_vclock,20}]],[{file,"
&gt; src/riak\_core\_bucket\_props.erl"},{line,129}]},{riak\_core\_
&gt; metadata\_object,'-resolve/2-fun-1-',3,[{file,"src/riak\_
&gt; core\_metadata\_object.erl"},{line,116}]},{lists,foldl,3,[{
&gt; file,"lists.erl"},{line,1248}]},{dvvset,reconcile,2,[{file,"
&gt; src/dvvset.erl"},{line,243}]},{riak\_core\_metadata\_object,
&gt; resolve,2,[{file,"src/riak\_core\_metadata\_object.erl"},{
&gt; line,118}]},{riak\_core\_metadata,maybe\_resolve,5,[{
&gt; file,"src/riak\_core\_metadata.erl"},{line,355}]},{riak\_core\_
&gt; metadata,itr\_key\_values,1,[{file,"src/riak\_core\_metadata.
&gt; erl"},{line,226}]},{riak\_core\_metadata,fold\_it,3,[{file,"
&gt; src/riak\_core\_metadata.erl"},{line,130}]}]},[{gen\_server,
&gt; init\_it,6,[{file,"gen\_server.erl"},{line,328}]},{proc\_lib,
&gt; init\_p\_do\_apply,3,[{file,"proc\_lib.erl"},{line,239}]}]}
&gt;
&gt; ancestors: [&lt;0.1742.0&gt;,riak\_core\_vnode\_sup,riak\_core\_sup,&lt;0.240.0&gt;]
&gt;
&gt; messages: []
&gt;
&gt; links: []
&gt;
&gt; dictionary: []
&gt;
&gt; trap\_exit: false
&gt;
&gt; status: running
&gt;
&gt; heap\_size: 2586
&gt;
&gt; stack\_size: 27
&gt;
&gt; reductions: 3015
&gt;
&gt;
&gt;
&gt; And in error.log:
&gt;
&gt;
&gt;
&gt; 2017-06-22 08:07:38.284 [error] &lt;0.3955.4&gt; CRASH REPORT Process &lt;0.3955.4&gt;
&gt; with 0 neighbours exited with reason: no function clause matching
&gt; riak\_core\_bucket\_props:resolve('$deleted', [{active,true},{allow\_mult,
&gt; false},{basic\_quorum,true},{big\_vclock,50},{chash\_keyfun,{riak\_core\_util,...}},...])
&gt; line 129 in gen\_server:init\_it/6 line 328
&gt;
&gt;
&gt;
&gt;
&gt;
&gt; 'r...@udcu1lc9a009.app.c9.test.com' is a dead node.
&gt;
&gt;
&gt;
&gt;
&gt; \*Mark Thomas \*Technical Lead\*, \*UK IT
&gt; Equifax Inc.
&gt;
&gt;
&gt;
&gt; O +44 (0)7908 798 270 &lt;+44%207908%20798270&gt;
&gt;
&gt; mark.tho...@equifax.com
&gt;
&gt; 
&gt;
&gt; [image: cid:image005.png@01D2C8D0.9963C110]
&gt;  [image:
&gt; cid:image006.png@01D2C8D0.9963C110]
&gt; 
&gt;
&gt;
&gt;
&gt;
&gt; Equifax Limited is registered in England with Registered No. 2425920. 
&gt; Registered
&gt; Office: Capital House, 25 Chapel Street, London NW1 5DS. Equifax Limited is
&gt; authorised and regulated by the Financial Conduct Authority.
&gt;
&gt; Equifax Touchstone Limited is registered in Scotland with Registered No.
&gt; SC113401. Registered Office: Exchange Tower,19 Canning Street, Edinburgh,
&gt; EH3 8EH.
&gt;
&gt; Equifax Commercial Services Limited is registered in the Republic of
&gt; Ireland with Registered No. 215393. Registered Office: IDA Business &
&gt; Technology Park, Rosslare Road, Drinagh, Wexford.
&gt;
&gt;
&gt;
&gt; This message contains information from Equifax which may be confidential
&gt; and privileged. If you are not an intended recipient, please refrain from
&gt; any disclosure, copying, distribution or use of this information and note
&gt; that such actions are prohibited. If you have received this transmission in
&gt; error, please notify by e-mail postmas...@equifax.com.
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
&gt;


-- 
Johan Sommerfeld
tel: +46 (0) 70 769 15 73
S2HC Sweden AB
Litsbyvägen 56
187 46 Täby
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

