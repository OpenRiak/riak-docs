---
title: "Re: Correct way to use pbc/mapreduce to do multiget where keys and	bucket names are binary values?"
description: ""
project: community
lastmod: 2011-06-16T05:05:02-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03706"
mailinglist_parent_id: "msg03556"
author_name: "Russell Brown"
project_section: "mailinglistitem"
sent_date: 2011-06-16T05:05:02-07:00
---


Hi Jaques, 
Sorry for the slow reply. I think this one just slipped by me.

Ok. answers inline below:

On 14 Jun 2011, at 18:26, Jacques wrote:

&gt; Does anybody have any insight on my questions below? 
&gt; 
&gt; Thanks,
&gt; Jacques
&gt; 
&gt; 
&gt; On Tue, Jun 7, 2011 at 6:12 PM, Jacques  wrote:
&gt; I've been working on this. I have it working with an anonymous javascript 
&gt; function. I was hoping to move it to using the "map\_object\_value" built-in 
&gt; erlang function. However, when I attempt to use this function, I get 
&gt; failures if any of my keys don't exist. Is there a way to construct my map 
&gt; phase so that it gracefully handles not founds and just returns what it 
&gt; finds? 

Yes. riak\_kv\_mapreduce:map\_object\_value accepts an arg value of either 
"filter\_notfound", "include\_notfound" or "include\_keydata", so your not found 
values can be omitted by passing "filter\_notfound" as the arg value for the map 
phase (instead of ATOM\_NONE in your construction.)

&gt; 
&gt; Also, using this function, is there a way to return the bucket and key names? 
&gt; 

No not using riak\_kv\_mapreduce:map\_object\_value, you could use 
riak\_kv\_mapreduce:map\_identity to get the whole riak object (meta data, key and 
value) or just write your own map reduce function that returns the data you 
want (and can filter out the not founds just like map\_object\_value)

&gt; Or can one assume the response order is identical to the order of inputs?

No.

&gt; deletia

Cheers

Russell

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

