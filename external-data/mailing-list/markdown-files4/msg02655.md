---
title: "Re: riak search"
description: ""
project: community
lastmod: 2011-03-15T15:52:30-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02655"
mailinglist_parent_id: "msg02652"
author_name: "Ryan Zezeski"
project_section: "mailinglistitem"
sent_date: 2011-03-15T15:52:30-07:00
---


Saurabh,

No, your data doesn't need to reside on the filesystem before you can index
it. If you haven't already figured it out, riak-search is a superset of
riak-kv. That means that you have all the features of riak-kv along with
the ability to index your data. That means you really don't need to deploy
both. Although, if you want to do it that way it's certainly possible--I
just want to make sure you are clear on this fact.

One way to index data is to parse documents on the filesystem to be indexed
and stored by riak-search. Another way is to index data as it flows into a
bucket which seems to be what you are after. To do that you need to add a
pre-commit hook specific to riak-search. If you haven't already, please
take a look at
http://wiki.basho.com/Riak-Search---Indexing-and-Querying-Riak-KV-Data.html.
 If you have specific questions after reading that I'll be glad to
help.

-Ryan


On Tue, Mar 15, 2011 at 12:53 PM, Saurabh Sehgal wrote:

&gt; Hi Sean,
&gt;
&gt; Please let me know if I am wrong - but according to my understanding, the
&gt; documents to index should reside on disk (the example on the wiki indexes
&gt; \*.txt files in a directory). What if my data is not written to files, but
&gt; exists in a riak bucket. Do I have to pull it out and store it in a file on
&gt; disk to be able to index it ?
&gt;
&gt; Also, do you know if there are any erlang clients/helper libs for solr. I
&gt; could not find any. Can the post commit hooks in riak be written in Java ?
&gt;
&gt; Thank you,
&gt;
&gt; Saurabh
&gt;
&gt;
&gt; On Tue, Mar 15, 2011 at 5:27 AM, Sean Cribbs  wrote:
&gt;
&gt;&gt; Saurabh,
&gt;&gt;
&gt;&gt; If you want to go with Solr, you have a few options:
&gt;&gt;
&gt;&gt; 1) Use application code to post an  document to Solr when saving your
&gt;&gt; data into Riak.
&gt;&gt; 2) Implement a Riak post-commit hook in Erlang to do the same, or to queue
&gt;&gt; the additions to another process that can submit them to Solr.
&gt;&gt;
&gt;&gt; I think you'll find that while on-disk indexes sound bad, that's actually
&gt;&gt; how Solr does them too, and not every index query will hit disk on either
&gt;&gt; system. The primary difference is that Riak Search is tightly integrated
&gt;&gt; with Riak KV and so you get a lot for free when you choose Riak Search,
&gt;&gt; including auto-indexing and MapReduce queries that start with a search.
&gt;&gt;
&gt;&gt; Sean Cribbs 
&gt;&gt; Developer Advocate
&gt;&gt; Basho Technologies, Inc.
&gt;&gt; http://basho.com/
&gt;&gt;
&gt;&gt; On Mar 15, 2011, at 2:08 AM, Saurabh Sehgal wrote:
&gt;&gt;
&gt;&gt; Hi,
&gt;&gt;
&gt;&gt; Since riak search is marked as "Beta Software" on the wiki, I am skeptical
&gt;&gt; to use it in production.
&gt;&gt;
&gt;&gt; Does riak offer any APIs or integration points that would allow me to
&gt;&gt; index data into Solr ?
&gt;&gt; Specifically, I am storing key/value pairs in riak, where the value is a
&gt;&gt; binary erlang term containing a tuple of text I would like to index.
&gt;&gt;
&gt;&gt; Also, going through the riak search documentation, the erlang API seems to
&gt;&gt; only have the capability of indexing documents
&gt;&gt; on disk as files (please correct me if this isn't true). Is there
&gt;&gt; functionality to automatically retrieve and index documents already stored
&gt;&gt; in riak ?
&gt;&gt; --
&gt;&gt;
&gt;&gt; Saurabh
&gt;&gt;
&gt;&gt;
&gt;&gt; --
&gt;&gt; Saurabh Sehgal
&gt;&gt; E-mail: saurabh....@gmail.com
&gt;&gt; Phone: &lt;425-269-1324&gt;425-269-1324
&gt;&gt; LinkedIn: http://www.linkedin.com/pub/1/7a3/436
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;
&gt;
&gt; --
&gt; Saurabh Sehgal
&gt; E-mail: saurabh....@gmail.com
&gt; Phone: 425-269-1324
&gt; LinkedIn: http://www.linkedin.com/pub/1/7a3/436
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

