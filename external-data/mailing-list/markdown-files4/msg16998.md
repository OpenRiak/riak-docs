---
title: "Re: High CPU usage by beam.smp"
description: ""
project: community
lastmod: 2016-01-28T02:25:50-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16998"
mailinglist_parent_id: "msg16997"
author_name: "Magnus Kessler"
project_section: "mailinglistitem"
sent_date: 2016-01-28T02:25:50-08:00
---


On 28 January 2016 at 09:05, Fasil K  wrote:

&gt;
&gt; Hello, I am using riak 2.1.1 for saving some datas (50000 datas).
&gt; I am running riak with a single node so far. my problem is riak is
&gt; consuming almost 40% of CPU in idle state. Can any one help me to solve
&gt; this issue.?
&gt;
&gt;
&gt; With Regards,
&gt;
&gt; Fasil K
&gt;


Hi Fasil,

The CPU usage you observe is due to the way Erlang schedulers work. When
they run out of work, they don't go to sleep immediately, but perform a
busy wait for some time instead. This increases responsiveness. For a nice,
detailed discussion of this please see
http://jlouisramblings.blogspot.co.uk/2013/01/how-erlang-does-scheduling.html

On a single node with the default ring size of 64, you also have a lot more
VNodes than on a typical production node. A VNode is handled by an Erlang
process, and all these processes require their own share of CPU and memory.

I hope this answers your question.

Regards,

Magnus

-- 
Magnus Kessler
Client Services Engineer
Basho Technologies Limited

Registered Office - 8 Lincolnâ€™s Inn Fields London WC2A 3BP Reg 07970431
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

