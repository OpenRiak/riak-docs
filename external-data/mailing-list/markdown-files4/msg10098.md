---
title: "Re: Node unreachable even though the nodes are pingable"
description: ""
project: community
lastmod: 2013-02-12T07:55:40-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg10098"
mailinglist_parent_id: "msg10091"
author_name: "Richard Shaw"
project_section: "mailinglistitem"
sent_date: 2013-02-12T07:55:40-08:00
---


Hi Shrikar,

I'd like to confirm there isn't underlying network weirdness going on.

You said in your mail that "During this time the latency increases to 1
second or more than that." can you elaborate, was that from running ping
$node manually that you saw the latency increase?

What network monitoring do you have in place on your network at the moment?
If nothing formal, leave mtr[0] running in a screen/tmux session between
your nodes then review the latency and loss.

[0]http://www.bitwizard.nl/mtr/

Regards

Richard

On Tue, Feb 12, 2013 at 6:46 AM, Shrikar archak  wrote:

&gt; Sorry guys for the delay in response.
&gt;
&gt; To answer dimitry's question
&gt; This is what I observed
&gt;
&gt; Actual nodes ping : Works ( I literally mean ping riak1 , ping riak2 ....)
&gt; I didnt try riak ping .. But from each Riak node I tried riak-admin
&gt; ring-status , this is were I saw the some nodes not reachable.
&gt;
&gt; Example
&gt; from riak6(192.168.8.136) I tried the above command and it replied back
&gt; saying riak4(192.168.8.134) was not reachable
&gt;
&gt; And the same command from riak4( 192.168.8.134) replied back saying riak6
&gt; not reachable.. So I assume the riak ping on those nodes would
&gt; have returned with pong reply.
&gt;
&gt; To answer Mark's question .. That was a typo in the mail I gave the actual
&gt; ip correctly.
&gt; Thanks,
&gt; Shrikar
&gt;
&gt;
&gt; On Mon, Feb 11, 2013 at 3:45 PM, Mark Phillips  wrote:
&gt;
&gt;&gt; Hi Shrikar,
&gt;&gt;
&gt;&gt; I suspect you've gotten to the bottom of this (as we haven't heard
&gt;&gt; from you in a few days), but upon re-reading this I noticed the
&gt;&gt; following:
&gt;&gt;
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; The following nodes are unreachable: ['riak@192.168.8.134',
&gt;&gt; 'riak@192.168.8.135']
&gt;&gt;
&gt;&gt; electic@riak-6:/var/lib/riak/leveldb$ ping 92.168.8.134
&gt;&gt; PING 92.168.8.134 (92.168.8.134) 56(84) bytes of data.
&gt;&gt; ^C
&gt;&gt; --- 92.168.8.134 ping statistics ---
&gt;&gt; 1 packets transmitted, 0 received, 100% packet loss, time 0ms
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt;
&gt;&gt; It looks like you're trying to ping "92.168.8.134", which is different
&gt;&gt; from the "192.168.8.134" address above.
&gt;&gt;
&gt;&gt; That may not solve the issue, but it might not be a bad place to start.
&gt;&gt;
&gt;&gt; Hope that helps. Let us know if you're still chasing this.
&gt;&gt;
&gt;&gt; Mark
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; On Mon, Feb 4, 2013 at 4:20 PM, Shrikar archak 
&gt;&gt; wrote:
&gt;&gt; &gt; Hi All,
&gt;&gt; &gt; We have a 6 node riak cluster running on riak 1.2.1
&gt;&gt; &gt; I am often seeing this issue where the nodes become unreachable
&gt;&gt; &gt; when I run the riak-admin command
&gt;&gt; &gt;
&gt;&gt; &gt; electic@riak-6:/var/lib/riak/leveldb$ riak-admin ring-status
&gt;&gt; &gt; Attempting to restart script through sudo -H -u riak
&gt;&gt; &gt; ================================== Claimant
&gt;&gt; &gt; ===================================
&gt;&gt; &gt; Claimant: 'riak@192.168.8.132'
&gt;&gt; &gt; Status: up
&gt;&gt; &gt; Ring Ready: true
&gt;&gt; &gt;
&gt;&gt; &gt; ============================== Ownership Handoff
&gt;&gt; &gt; ==============================
&gt;&gt; &gt; No pending changes.
&gt;&gt; &gt;
&gt;&gt; &gt; ============================== Unreachable Nodes
&gt;&gt; &gt; ==============================
&gt;&gt; &gt; The following nodes are unreachable: ['riak@192.168.8.134',
&gt;&gt; &gt; 'riak@192.168.8.135']
&gt;&gt; &gt;
&gt;&gt; &gt; electic@riak-6:/var/lib/riak/leveldb$ ping 92.168.8.134
&gt;&gt; &gt; PING 92.168.8.134 (92.168.8.134) 56(84) bytes of data.
&gt;&gt; &gt; ^C
&gt;&gt; &gt; --- 92.168.8.134 ping statistics ---
&gt;&gt; &gt; 1 packets transmitted, 0 received, 100% packet loss, time 0ms
&gt;&gt; &gt;
&gt;&gt; &gt; electic@riak-6:/var/lib/riak/leveldb$ ping 192.168.8.134
&gt;&gt; &gt; PING 192.168.8.134 (192.168.8.134) 56(84) bytes of data.
&gt;&gt; &gt; 64 bytes from 192.168.8.134: icmp\_req=1 ttl=64 time=0.062 ms
&gt;&gt; &gt; 64 bytes from 192.168.8.134: icmp\_req=2 ttl=64 time=0.057 ms
&gt;&gt; &gt;
&gt;&gt; &gt; electic@riak-6:/var/lib/riak/leveldb$ ping 192.168.8.135
&gt;&gt; &gt; PING 192.168.8.135 (192.168.8.135) 56(84) bytes of data.
&gt;&gt; &gt; 64 bytes from 192.168.8.135: icmp\_req=1 ttl=64 time=0.065 ms
&gt;&gt; &gt; 64 bytes from 192.168.8.135: icmp\_req=2 ttl=64 time=0.057 ms
&gt;&gt; &gt;
&gt;&gt; &gt; Has anyone faced similar problems like these?
&gt;&gt; &gt;
&gt;&gt; &gt; During this time the latency increases to 1 second or more than that.
&gt;&gt; &gt;
&gt;&gt; &gt; Please let me know if there is a way to get around this problem.
&gt;&gt; &gt;
&gt;&gt; &gt; Thanks,
&gt;&gt; &gt; Shrikar
&gt;&gt; &gt;
&gt;&gt; &gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; &gt; riak-users mailing list
&gt;&gt; &gt; riak-users@lists.basho.com
&gt;&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt; &gt;
&gt;&gt;
&gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

