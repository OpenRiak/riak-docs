---
title: "Re: Riak crashing after server reboot"
description: ""
project: community
lastmod: 2012-07-02T22:56:55-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07855"
mailinglist_parent_id: "msg07838"
author_name: "Mark Phillips"
project_section: "mailinglistitem"
sent_date: 2012-07-02T22:56:55-07:00
---


Hey Roberto,

Looks like you're hitting an issue with bad hintfiles that was fixed about
five months back [1] (just after your one node [2] went live).

Upgrading to the latest Riak [3] should take care of this. Let us know if
it doesn't.

Mark

[1] https://github.com/basho/bitcask/pull/35
[2] Any chance I can convince you to bump things up to ... three nodes? :)
[3] http://downloads.basho.com/riak/CURRENT/


On Fri, Jun 29, 2012 at 11:25 AM, Roberto Oliveira Santos &lt;
robertosime...@gmail.com&gt; wrote:

&gt; Dear all,
&gt;
&gt; I have a riak running in only one node for about 6 months without
&gt; problems. Yesterday the riak's server was power off without previous halt.
&gt; Now riak is crashing in few seconds/minutes after start. In log files I can
&gt; see problems with merge and maybe corruption of some data. Is there an
&gt; option to recover the data or exclude what is corrupted?
&gt;
&gt; The kind of message that is in log files is:
&gt;
&gt; 2012-06-29 15:18:45.385 [error] &lt;0.3733.0&gt; Hintfile
&gt; '/pgdata/riak/bitcask/296867520082839655260123481645494988367611297792/1340890104.bitcask.hint'
&gt; contains pointer 2707583 10324 that is greater than total data size 2707583
&gt; 2012-06-29 15:18:45.402 [error] &lt;0.3733.0&gt; gen\_fsm &lt;0.3733.0&gt; in state
&gt; active terminated with reason: no match of right hand value
&gt; &lt;&lt;0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0...&gt;&gt;
&gt; in bitcask\_fileops:read/3
&gt;
&gt; Kind regards,
&gt;
&gt; Roberto
&gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

