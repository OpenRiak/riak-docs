---
title: "Re: Incorect Input to Reduce"
description: ""
project: community
lastmod: 2011-11-30T07:13:47-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05808"
mailinglist_parent_id: "msg05807"
author_name: "Jonathan Langevin"
project_section: "mailinglistitem"
sent_date: 2011-11-30T07:13:47-08:00
---


n/m, I just need to modify my args from [0,15] to
{"reduce\_phase\_only\_1":true,0:10,1:15}\*

 
 Jonathan Langevin
Manager, Information Technology
Loom Inc.
Wilmington, NC: (910) 241-0433 - jlange...@loomlearning.com -
www.loomlearning.com - Skype: intel352
\*


On Wed, Nov 30, 2011 at 10:11 AM, Jonathan Langevin &lt;
jlange...@loomlearning.com&gt; wrote:

&gt; Excellent tip Sean, works great for a similar issue I was having.
&gt; If I already had args being passed to my reduce phase though (such as when
&gt; calling Riak.reduceSlice), is it possible to specify only\_1 and still
&gt; ensure that my regular args pass through to the function as expected? For
&gt; instance, reduceSlice expects [int,int], which conflicts with
&gt; {"somearg":blah}.
&gt; My thought is to now encapsulate my original function call, but I want to
&gt; make sure I'm not missing something in Riak that already handles this issue.
&gt;
&gt; 
&gt; \* Jonathan Langevin
&gt; Manager, Information Technology
&gt; Loom Inc.
&gt; Wilmington, NC: (910) 241-0433 - jlange...@loomlearning.com -
&gt; www.loomlearning.com - Skype: intel352 \*
&gt;
&gt;
&gt;
&gt; On Wed, Nov 30, 2011 at 10:01 AM, Sean Cribbs  wrote:
&gt;
&gt;&gt; Hi Yehuda,
&gt;&gt;
&gt;&gt; Your reduce function is not guaranteed to run across all inputs in the
&gt;&gt; first application, but may be applied many times as new inputs come in.
&gt;&gt; Riak will batch up reduce inputs until a certain number or timeout is
&gt;&gt; reached, then apply the function and take its output to be part of the
&gt;&gt; inputs for the next application. If it is absolutely necessary to run the
&gt;&gt; reduce function only once, use "reduce\_phase\_only\_1" as the "arg" (only
&gt;&gt; works on Riak 1.0.x, example in Ruby):
&gt;&gt;
&gt;&gt; mr.reduce("function(v){...}", :arg =&gt; {:reduce\_phase\_only\_1 =&gt; true},
&gt;&gt; :keep =&gt; true)
&gt;&gt;
&gt;&gt; Hope that helps!
&gt;&gt;
&gt;&gt; On Wed, Nov 30, 2011 at 9:03 AM, Yehuda Zargrov wrote:
&gt;&gt;
&gt;&gt;&gt; Hi,\*\*\*\*
&gt;&gt;&gt;
&gt;&gt;&gt; \*\* \*\*
&gt;&gt;&gt;
&gt;&gt;&gt; I’ve posted a mail on this few days ago, but went a bit further since
&gt;&gt;&gt; then.\*\*\*\*
&gt;&gt;&gt;
&gt;&gt;&gt; \*\* \*\*
&gt;&gt;&gt;
&gt;&gt;&gt; I’m using ripple, running a map function on some input and getting a
&gt;&gt;&gt; list of about 50 items.\*\*\*\*
&gt;&gt;&gt;
&gt;&gt;&gt; \*\* \*\*
&gt;&gt;&gt;
&gt;&gt;&gt; Right after that, I’m running a reduce function. The first thing I do in
&gt;&gt;&gt; it is putting the length of v (the input) as an item in a list.\*\*\*\*
&gt;&gt;&gt;
&gt;&gt;&gt; \*\* \*\*
&gt;&gt;&gt;
&gt;&gt;&gt; When printing the result I see that the length is 13.\*\*\*\*
&gt;&gt;&gt;
&gt;&gt;&gt; \*\* \*\*
&gt;&gt;&gt;
&gt;&gt;&gt; It’s like something has happened between the map and reduce phases.\*\*\*\*
&gt;&gt;&gt;
&gt;&gt;&gt; \*\* \*\*
&gt;&gt;&gt;
&gt;&gt;&gt; Any ideas?\*\*\*\*
&gt;&gt;&gt;
&gt;&gt;&gt; \*\* \*\*
&gt;&gt;&gt;
&gt;&gt;&gt; \*\*\*\*
&gt;&gt;&gt;
&gt;&gt;&gt; [image: Description:
&gt;&gt;&gt; C:\Users\Yehuda\AppData\Roaming\Microsoft\Signatures\logo.gif]\*\*\*\*
&gt;&gt;&gt;
&gt;&gt;&gt; \*Yehuda Zargrov\*\*
&gt;&gt;&gt; \*Software Engineer\*\*\*\*
&gt;&gt;&gt;
&gt;&gt;&gt; \*Conduit Your Site\* \*\*\*\*
&gt;&gt;&gt;
&gt;&gt;&gt; \*t:\* 972.8.9461713 ext +314 | \*m:\* +972503473119 | \*f:\*
&gt;&gt;&gt; +97286382140 \*\*\*\*
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; This message may contain confidential and/or privileged information. It
&gt;&gt;&gt; is intended to be read only by the individual or entity to whom it is
&gt;&gt;&gt; addressed or by their designee.
&gt;&gt;&gt; If the reader of this message is not the intended recipient, you are on
&gt;&gt;&gt; notice that any uses, copy, disclose or distribution of this message, in
&gt;&gt;&gt; any form, is strictly prohibited.
&gt;&gt;&gt; If you have received this message in error, please notify the sender by
&gt;&gt;&gt; reply email or by telephone and delete or destroy any copy of this message.
&gt;&gt;&gt; Thank you.
&gt;&gt;&gt;
&gt;&gt;&gt; \*\*\*\*
&gt;&gt;&gt;
&gt;&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; --
&gt;&gt; Sean Cribbs 
&gt;&gt; Developer Advocate
&gt;&gt; Basho Technologies, Inc.
&gt;&gt; http://www.basho.com/
&gt;&gt;
&gt;&gt;
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;
&gt;&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

