---
title: "Re: Wiping Riak 2.0 data"
description: ""
project: community
lastmod: 2015-01-04T05:09:08-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15438"
mailinglist_parent_id: "msg15437"
author_name: "Cosmin Marginean"
project_section: "mailinglistitem"
sent_date: 2015-01-04T05:09:08-08:00
---


Excellent. Will give this a shot.

Thanks 
Cos

PS&gt; Yes, it’s Bitcask (default) 


On Sunday, 4 January 2015 at 12:51, Sargun Dhillon wrote:

&gt; Assuming your storage engine is bitcask:
&gt; 1. Turn off all your Riak nodes
&gt; 2. rm -rf --verbose /var/lib/riak/bitcask/\*/\*
&gt; 3. rm -rf --verbose /var/lib/riak/anti\_entropy/\*/\*
&gt; 4. Turn Riak back on
&gt; 
&gt; This will preserve your buckets and bucket types in in cluster
&gt; metadata. You can also automate that, but it's a little more
&gt; complicated.
&gt; 
&gt; On Sun, Jan 4, 2015 at 4:25 AM, Cosmin Marginean  (mailto:cosmin...@gmail.com)&gt; wrote:
&gt; &gt; Hi,
&gt; &gt; 
&gt; &gt; I’m running Riak 2.0.2 on Centos 6.5 installed from an RPM
&gt; &gt; (http://s3.amazonaws.com/downloads.basho.com/riak/2.0/2.0.2/rhel/6/riak-2.0.2-1.el6.x86\_64.rpm)
&gt; &gt; 
&gt; &gt; I’m interested in wiping the entire storage (in order to re-run tests, etc).
&gt; &gt; I have a script that traverses buckets/keys but I’m aware that this process
&gt; &gt; is costly, plus I might be dealing with some eventual-consistency issues.
&gt; &gt; 
&gt; &gt; Consequently, I would prefer to wipe the “data” directory entirely if that’s
&gt; &gt; in any way possible, and re-start Riak. However, the structure seems to be
&gt; &gt; scattered in several directories and is not entirely clear which one needs
&gt; &gt; to be wiped for a “clean data reset” without corrupting anything:
&gt; &gt; 
&gt; &gt; # ll /var/lib/riak/
&gt; &gt; total 28
&gt; &gt; drwxrwxr-x. 66 riak riak 4096 Jan 3 17:29 anti\_entropy
&gt; &gt; drwxrwxr-x. 66 riak riak 4096 Jan 3 17:29 bitcask
&gt; &gt; drwxrwxr-x. 3 riak riak 4096 Jan 3 17:28 cluster\_meta
&gt; &gt; drwxrwxr-x. 2 riak riak 4096 Jan 3 20:07 generated.configs
&gt; &gt; drwxrwxr-x. 2 riak riak 4096 Jan 3 17:29 kv\_vnode
&gt; &gt; drwxrwxr-x. 2 riak riak 4096 Jan 4 07:23 riak\_kv\_exchange\_fsm
&gt; &gt; drwxr-xr-x. 2 riak riak 4096 Jan 3 20:07 ring
&gt; &gt; 
&gt; &gt; Thank you
&gt; &gt; Cos
&gt; &gt; 
&gt; &gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com (mailto:riak-users@lists.basho.com)
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; &gt; 
&gt; 
&gt; 
&gt; 


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

