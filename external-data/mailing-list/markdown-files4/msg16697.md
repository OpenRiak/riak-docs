---
title: "Re: Riak in Docker - Error folding keys - incomplete_hint"
description: ""
project: community
lastmod: 2015-10-22T06:03:14-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16697"
mailinglist_parent_id: "msg16696"
author_name: "Hector Castro"
project_section: "mailinglistitem"
sent_date: 2015-10-22T06:03:14-07:00
---


Can't say I've paid enough attention to the logs in my single-machine
Riak within Docker setups to confirm.

Do you have the container image definitions somewhere public? That may
help someone reproduce the issue. Also, did you ensure that the Riak
data directory is setup as a Docker volume?

Other things that come to mind:

- What OS is the Docker host running?
- What storage driver are you using for Docker?
- What file system is the Docker data directory using?

--
Hector


On Thu, Oct 22, 2015 at 2:27 AM, Toby Corkindale  wrote:
&gt; Anyone?
&gt;
&gt; I note that after 24 hours (on a very lightly loaded test cluster) I'm still
&gt; seeing these scroll by a lot - 600 an hour per node.
&gt; Really curious to know if this is expected behaviour or if this is resulting
&gt; from some kind of node corruption.
&gt;
&gt; Cheers
&gt; Toby
&gt;
&gt;
&gt;
&gt; On Wed, 21 Oct 2015 at 12:23 Toby Corkindale  wrote:
&gt;&gt;
&gt;&gt; Hi,
&gt;&gt; I've been working on getting Riak to run inside Docker containers - in a
&gt;&gt; multi-machine cluster. (Previous work I've seen has only run Riak as a
&gt;&gt; cluster all on the same machine.)
&gt;&gt; I thought I had it cracked, although I tripped up on the existing issue
&gt;&gt; with Riak and lockfiles[1]. But the nodes have been generating an awful lot
&gt;&gt; of errors like the below, and I wondered if anyone here can give me an
&gt;&gt; explanation? (And, is it a problem?)
&gt;&gt;
&gt;&gt; 2015-10-21 01:19:23.567 [error] &lt;0.24495.0&gt; Error folding keys for
&gt;&gt; "/var/lib/riak/bitcask.1h/2283596
&gt;&gt; 30832953580969325755111919221821239459840/2.bitcask.data":
&gt;&gt; {incomplete\_hint,4}
&gt;&gt;
&gt;&gt; 1: Related issues to the lockfiles --
&gt;&gt; I note that many are closed, but the problem still exists, and is
&gt;&gt; particularly triggered by using Docker and stopping/killing Riak more
&gt;&gt; violently than it likes.
&gt;&gt; https://github.com/basho/bitcask/issues/163 (closed)
&gt;&gt; https://github.com/basho/riak/issues/535 (open)
&gt;&gt; https://github.com/basho/bitcask/issues/167 (closed)
&gt;&gt; https://github.com/basho/bitcask/issues/99 (closed)
&gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

