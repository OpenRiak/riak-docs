---
title: "riak search and solr/lucene"
description: ""
project: community
lastmod: 2010-11-04T00:50:30-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01454"
author_name: "Joseph Lambert"
project_section: "mailinglistitem"
sent_date: 2010-11-04T00:50:30-07:00
---


I am using the PHP library for a project and was looking through the code to
see what differentiates the Solr HTTP interface query versus the Lucene
search (besides the syntax and the interface, etc) as paging is very useful
for my code. From the PHP library with lucene I can do a search with lucene,
then a reduce job to sort, then another reduce to slice the results. With
Solr, we can just do a cURL with the parameters to do the same thing.

I scanned the Erlang code, and in the end, both call stream\_search(), but
the Lucene query will pass the results back to luke for possibly another MR
phase, and the Solr query simply sorts and truncates the list. So:

1. Does anyone have a general idea at what point the Solr query will start
to get really slow as far as number of keys in a bucket and other factors? I
know this is dependent on many things, just looking for a rough idea of when
it's a bad idea to use the Solr interface.
2. Also, I see that Riak will cache the map phase of a map reduce, so will
it cache the initial search? Or does it use some other mechanism I'm not
seeing to cache search results?
3. Finally, for the Solr query, why not automatically add a sort and/or
slice phase if the user passes in sort, start or count parameters in the
Solr query?

Please correct me if any of the assumptions I made are wrong, as usually
when I ask these questions I end up with my foot in my mouth.

- Joe Lambert

joseph.g.lamb...@gmail.com
+86 13656213284
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

