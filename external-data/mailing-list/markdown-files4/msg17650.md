---
title: "Re: Riak cluster protected by firewall"
description: ""
project: community
lastmod: 2016-09-18T01:02:12-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17650"
mailinglist_parent_id: "msg17648"
author_name: "DeadZen"
project_section: "mailinglistitem"
sent_date: 2016-09-18T01:02:12-07:00
---


Looks right, jmx not imx ;),
and yes provided the erlang kernel options are given to limit dist
comm range to 6000-7999

you can check this from the node (to make sure) with:
&gt; [ application:get\_env(kernel, X) || X &lt;- 
&gt; [inet\_dist\_listen\_min,inet\_dist\_listen\_max] ].
[{ok,6000},{ok,7999}]

On Sun, Sep 18, 2016 at 2:42 AM, Alex De la rosa
 wrote:
&gt; So mainly the ports are:
&gt;
&gt; epmd listener: TCP:4369
&gt; handoff\_port listener: TCP:8099
&gt; http: TCP:8098
&gt; protocol buffers: TCP: 8087
&gt; solr: TCP:8093
&gt; solr imx: TCP:8985
&gt; erlang range: TCP:6000~7999 (if configured in riak's configuration)
&gt;
&gt; Is that alright? am I missing any? or is there any of them that is not
&gt; needed to add in the firewall?
&gt;
&gt; Thanks,
&gt; Alex
&gt;
&gt; On Sun, Sep 18, 2016 at 5:57 AM, John Daily  wrote:
&gt;&gt;
&gt;&gt; You should find most of what you need here:
&gt;&gt; http://docs.basho.com/riak/kv/2.1.4/using/security/
&gt;&gt;
&gt;&gt; Sent from my iPhone
&gt;&gt;
&gt;&gt; On Sep 17, 2016, at 1:26 PM, Alex De la rosa 
&gt;&gt; wrote:
&gt;&gt;
&gt;&gt; Hi all,
&gt;&gt;
&gt;&gt; I have a cluster of 5 nodes connected to each other and now I want to use
&gt;&gt; UFW to deny any external incoming traffic into them but i will allow each
&gt;&gt; node to access between themselves. Which ports should i open
&gt;&gt; (pb\_port,http\_port,solr,...)? I connect via pbc but i may need more ports
&gt;&gt; open i guess.
&gt;&gt;
&gt;&gt; A configurations like this (assuming is node\_1):
&gt;&gt;
&gt;&gt; ufw default deny incoming
&gt;&gt; ufw default allow outgoing
&gt;&gt; ufw allow 22 --&gt; SSH (private keys)
&gt;&gt; ufw allow from  to any port 443 --&gt; HTTPS (API that talks
&gt;&gt; with Riak locally via Python client)
&gt;&gt;
&gt;&gt; ufw allow from  to any port 
&gt;&gt; ufw allow from  to any port 
&gt;&gt; ufw allow from  to any port 
&gt;&gt; ufw allow from  to any port 
&gt;&gt;
&gt;&gt; Thanks!
&gt;&gt; Alex
&gt;&gt;
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
&gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

