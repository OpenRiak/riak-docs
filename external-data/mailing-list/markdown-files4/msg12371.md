---
title: "Re: Debugging mapreduce"
description: ""
project: community
lastmod: 2013-09-24T18:46:42-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12371"
mailinglist_parent_id: "msg12370"
author_name: "Toby Corkindale"
project_section: "mailinglistitem"
sent_date: 2013-09-24T18:46:42-07:00
---



On 25/09/13 11:20, Charl Matthee wrote:

Hi,

I am trying to run the following mapreduce query across my cluster:

# curl -XPOST http://10.179.229.209:8098/mapred -H "Content-Type:
application/json" -d '{"inputs":"tweets",
"query":[{"map":{"language":"javascript", "source":"function(value,
keyData, arg) {t = JSON.parse(value.values[0].data)[0]; if ((new Date
- new Date(t.created\_at)) / 1000 &gt; 2592000) return [t.id]; else return
[]}", "keep":true}}]}'
{"lineno":466,"message":"SyntaxError: syntax error","source":"()"}


Have you tried executing your javascript outside of Riak?
ie. paste the function into the Chrome debugger, then call it with a 
Riak-like data structure.


Also, consider wrapping the code in your function with an eval so you 
can catch errors that occur. (Then either ejslog them or return them as 
results of the map phase)




\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

