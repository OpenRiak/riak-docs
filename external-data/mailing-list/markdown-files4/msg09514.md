---
title: "Re: Cluster setup"
description: ""
project: community
lastmod: 2012-12-10T13:23:13-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg09514"
author_name: "rkevinburton"
project_section: "mailinglistitem"
sent_date: 2012-12-10T13:23:13-08:00
---




I cannot see the problem it is 10.79.110.52. Isn't that the address of 
this node?


I looked at the end of erlang.log.a and see the following errors:

=====
===== LOGGING STARTED Mon Dec 10 21:03:57 UTC 2012
=====

Exec: /usr/lib64/riak/erts-5.9.1/bin/erlexec -boot 
/usr/lib64/riak/releases/1.2.1/riak -embedded -config 
/etc/riak/app.config
 -pa /usr/lib64/riak/lib/basho-patches -args\_file 
/etc/riak/vm.args -- console


Root: /usr/lib64/riak
Erlang R15B01 (erts-5.9.1) [source] [64-bit] [smp:6:4] 
[async-threads:64] [kernel-poll:true]


\*\* /usr/lib64/riak/lib/basho-patches/etop\_txt.beam hides 
/usr/lib64/riak/lib/observer-1.1/ebin/etop\_txt.beam

\*\* Found 1 name clashes in code paths
21:03:59.136 [info] Application lager started on node 
'riak@10.79.110.52'

21:03:59.307 [warning] No ring file available.
21:03:59.408 [error] CRASH REPORT Process &lt;0.170.0&gt; with 0 neighbours 
exited with reason: eaddrinuse in gen\_server:init\_it/6 line 320


Is this "clashes in code paths' a possible problem?

On Mon, Dec 10, 2012 at 3:12 PM, Sean Carey wrote:

 Look at the section in your config called pb\_ip. The ip is wrong.

On Monday, December 10, 2012 at 4:02 PM, rkevinbur...@charter.net wrote:
I moved on to the next step and from the "seed node" I execute 'sudo 
riak-admin cluster join riak@10.79.110.52 
 ' and 
I get


Attempting to restart script through sudo -H -u riak
Node riak@10.79.110.52 
 is not 
reachable!


I can ping the node:

PING 10.79.110.52 (10.79.110.52) 56(84) bytes of data.
64 bytes from 10.79.110.52: icmp\_seq=1 ttl=63 time=1.08 ms
64 bytes from 10.79.110.52: icmp\_seq=2 ttl=63 time=1.77 ms
64 bytes from 10.79.110.52: icmp\_seq=3 ttl=63 time=2.67 ms
64 bytes from 10.79.110.52: icmp\_seq=4 ttl=63 time=0.663 ms

Any ideas what this problem is?

I went to node2 and could not start riak

The vm.args on the second node looks like:

## Name of the riak node
-name riak@10.79.110.52 



ifconfig looks like:

eth0 Link encap:Ethernet HWaddr 00:15:5D:50:3B:27
 inet addr:10.79.110.52 Bcast:10.79.111.255 
Mask:255.255.254.0

 inet6 addr: fe80::215:5dff:fe50:3b27/64 Scope:Link
 UP BROADCAST RUNNING MULTICAST MTU:1500 Metric:1
 RX packets:345671 errors:0 dropped:0 overruns:0 frame:0
 TX packets:136590 errors:0 dropped:0 overruns:0 carrier:0
 collisions:0 txqueuelen:1000
 RX bytes:480181840 (457.9 MiB) TX bytes:13833066 (13.1 MiB)

lo Link encap:Local Loopback
 inet addr:127.0.0.1 Mask:255.0.0.0
 inet6 addr: ::1/128 Scope:Host
 UP LOOPBACK RUNNING MTU:16436 Metric:1
 RX packets:1555 errors:0 dropped:0 overruns:0 frame:0
 TX packets:1555 errors:0 dropped:0 overruns:0 carrier:0
 collisions:0 txqueuelen:0
 RX bytes:90413 (88.2 KiB) TX bytes:90413 (88.2 KiB)

netstat -tln

Proto Recv-Q Send-Q Local Address Foreign Address 
State
tcp 0 0 0.0.0.0:111 0.0.0.0:\* 
LISTEN
tcp 0 0 0.0.0.0:4369 0.0.0.0:\* 
LISTEN
tcp 0 0 0.0.0.0:46130 0.0.0.0:\* 
LISTEN
tcp 0 0 0.0.0.0:22 0.0.0.0:\* 
LISTEN
tcp 0 0 127.0.0.1:631 0.0.0.0:\* 
LISTEN
tcp 0 0 127.0.0.1:25 0.0.0.0:\* 
LISTEN
tcp 0 0 10.79.110.52:16001 0.0.0.0:\* 
LISTEN
tcp 0 0 0.0.0.0:5672 0.0.0.0:\* 
LISTEN
tcp 0 0 :::38381 :::\* 
LISTEN
tcp 0 0 :::111 :::\* 
LISTEN
tcp 0 0 :::22 :::\* 
LISTEN
tcp 0 0 ::1:631 :::\* 
LISTEN
tcp 0 0 ::1:25 :::\* 
LISTEN
tcp 0 0 :::5672 :::\* 
LISTEN


app.config looks like:
%% -\*- mode: erlang;erlang-indent-level: 4;indent-tabs-mode: nil -\*-

%% ex: ft=erlang ts=4 sw=4 et

[
 %% Riak Client APIs config
 {riak\_api, [

 %% pb\_backlog is the maximum length to which the queue of 
pending
 %% connections may grow. If set, it must be an integer &gt;= 
0.
 %% By default the value is 5. If you anticipate a huge 
number of
 %% connections being initialised \*simultaneously\*, set this 
number

 %% higher.
 %% {pb\_backlog, 64},

 %% pb\_ip is the IP address that the Riak Protocol Buffers 
interface
 %% will bind to. If this is undefined, the interface will 
not run.

 {pb\_ip, "10.79.110.52" },

 %% pb\_port is the TCP port that the Riak Protocol Buffers 
interface

 %% will bind to
 {pb\_port, 8089 }
 ]},

 %% Riak Core config
 {riak\_core, [
 %% Default location of ringstate
 {ring\_state\_dir, "/var/lib/riak/ring"},

 %% Default ring creation size. Make sure it is a power 
of 2,

 %% e.g. 16, 32, 64, 128, 256, 512 etc
 %{ring\_creation\_size, 64},

 %% http is a list of IP addresses and TCP ports that the 
Riak

 %% HTTP interface will bind.
 {http, [ {"10.79.110.52", 8099 } ]},


Finally the error.log

2012-12-10 18:56:02.030 [error] &lt;0.170.0&gt; CRASH REPORT Process &lt;0.170.0&gt; 
with 0 neighbours exited with reason: eaddrinuse in gen\_server:ini

t\_it/6 line 320
2012-12-10 18:56:50.745 [error] &lt;0.165.0&gt; CRASH REPORT Process &lt;0.165.0&gt; 
with 0 neighbours exited with reason: eaddrinuse in gen\_server:ini

t\_it/6 line 320
2012-12-10 18:58:47.013 [error] &lt;0.170.0&gt; CRASH REPORT Process &lt;0.170.0&gt; 
with 0 neighbours exited with reason: eaddrinuse in gen\_server:ini

t\_it/6 line 320
2012-12-10 20:29:02.745 [error] &lt;0.170.0&gt; CRASH REPORT Process &lt;0.170.0&gt; 
with 0 neighbours exited with reason: eaddrinuse in gen\_server:ini

t\_it/6 line 320
2012-12-10 20:52:21.908 [error] &lt;0.170.0&gt; CRASH REPORT Process &lt;0.170.0&gt; 
with 0 neighbours exited with reason: eaddrinuse in gen\_server:ini

t\_it/6 line 320
2012-12-10 20:53:53.694 [error] &lt;0.170.0&gt; CRASH REPORT Process &lt;0.170.0&gt; 
with 0 neighbours exited with reason: eaddrinuse in gen\_server:ini

t\_it/6 line 320


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

