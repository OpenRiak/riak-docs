---
title: "Re: MapReduce Weird Issue"
description: ""
project: community
lastmod: 2011-11-29T04:52:29-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05782"
mailinglist_parent_id: "msg05774"
author_name: "Bryan Fink"
project_section: "mailinglistitem"
sent_date: 2011-11-29T04:52:29-08:00
---


On Tue, Nov 29, 2011 at 3:56 AM, Yehuda Zargrov 
wrote:&gt;      .reduce("function(v) {var s={}; for(var i in v)  { var
date=''; var&gt; sum=0; for(var n in v[i]) { if (n === \"date\")
date=v[i][n]; if (n ===&gt; \"sum\") sum=v[i][n]; } if (date in s)
s[date] += sum; else s[date] = sum; }&gt; return[v]; }", :keep =&gt;
true).run
Hi, Yehuda.  I think one of the troubles you're seeing may be
becausethe last statement in your reduce function is "return[v]".  It
lookslike you actually wanted "return[s]".  The function is returning
itsinputs instead of its computation result.
As for why you only see 13 entries instead of hundreds, I'd bet
thateither an error or timeout occurred, and caused a known bug
(whereinputs are returned instead of outputs) to raise its
head:https://issues.basho.com/show\_bug.cgi?id=1185
There may be more information in Riak's logs.  Please write back
withwhat you find, and include the version numbers you're using for
Riakand Ripple.

-Bryan

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

