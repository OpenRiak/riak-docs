---
title: "Re: Banging head against wall with erlang pb client"
description: ""
project: community
lastmod: 2011-04-01T06:24:41-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02830"
mailinglist_parent_id: "msg02817"
author_name: "Jon Brisbin"
project_section: "mailinglistitem"
sent_date: 2011-04-01T06:24:41-07:00
---


I knew it was something simple and that I was trying to barrel through it too 
quickly. I think I've even asked this before and couldn't figure out why what I 
was doing wasn't working.

I had to go through the list of custom properties with keys like ("test") and 
turn them into keys like "X-Riak-Meta-test" and stick those in a proplist 
hanging off the "X-Riak-Meta" key.

Thanks for setting me straight. ;)

jb


On Mar 31, 2011, at 6:18 PM, Dan Reverri wrote:

&gt; Hi Jon,
&gt; 
&gt; The value for content-type should be a string.
&gt; 
&gt; For custom meta data the client expects a proplist of custom headers under 
&gt; the &lt;&lt;"X-Riak-Meta"&gt;&gt; key. Check out the following test to get an idea of 
&gt; what the metadata would look like:
&gt; https://github.com/basho/riak-erlang-client/blob/master/src/riakc\_pb.erl#L311
&gt; 
&gt; Thanks,
&gt; Dan
&gt; 
&gt; Daniel Reverri
&gt; Developer Advocate
&gt; Basho Technologies, Inc.
&gt; d...@basho.com
&gt; 
&gt; 
&gt; On Thu, Mar 31, 2011 at 3:58 PM, Jon Brisbin  wrote:
&gt; I know I'm doing something obvious wrong, but I can't seem to make this:
&gt; 
&gt; {riakc\_obj,&lt;&lt;"riak"&gt;&gt;,&lt;&lt;"test"&gt;&gt;,undefined,[],
&gt; {dict,2,16,16,8,80,48,
&gt; {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
&gt; {{[],[],
&gt; [[&lt;&lt;"test"&gt;&gt;|&lt;&lt;"header"&gt;&gt;]],
&gt; [],[],[],[],[],[],[],
&gt; [[&lt;&lt;"content-type"&gt;&gt;|&lt;&lt;"text/plain"&gt;&gt;]],
&gt; [],[],[],[],[]}}},
&gt; &lt;&lt;"Hello World!"&gt;&gt;}
&gt; 
&gt; appear correctly in the database. It has the wrong content-type:
&gt; 
&gt; HTTP/1.1 200 OK
&gt; X-Riak-Vclock: a85hYGBgzGDKBVIsDJYbJTOYEhnzWBkymjiP82UBAA==
&gt; Vary: Accept-Encoding
&gt; Server: MochiWeb/1.1 WebMachine/1.7.3 (participate in the frantic)
&gt; Link: ; rel="up"
&gt; Last-Modified: Thu, 31 Mar 2011 22:55:36 GMT
&gt; Etag: "5Pkvq3UKB5dl5ltv1YtcdD"
&gt; Date: Thu, 31 Mar 2011 22:55:43 GMT
&gt; Content-Type: application/octet-stream
&gt; Content-Length: 12
&gt; 
&gt; Hello World!
&gt; 
&gt; The custom headers are also not showing up.
&gt; 
&gt; What am I not doing here?
&gt; 
&gt; Thanks!
&gt; 
&gt; Jon Brisbin
&gt; 
&gt; http://jbrisbin.com
&gt; Twitter: @j\_brisbin
&gt; 
&gt; 
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; 


Thanks!

Jon Brisbin

http://jbrisbin.com
Twitter: @j\_brisbin


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

