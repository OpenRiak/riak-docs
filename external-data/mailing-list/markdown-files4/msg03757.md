---
title: "Re: Riak crash on 0.14.2 riak_kv_stat terminating"
description: ""
project: community
lastmod: 2011-06-21T06:50:50-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03757"
mailinglist_parent_id: "msg03755"
author_name: "Jeremy Raymond"
project_section: "mailinglistitem"
sent_date: 2011-06-21T06:50:50-07:00
---


Ok thanks. Where do I increase the timeout? Would the timeout cause the node
to crash?

- Jeremy


On Tue, Jun 21, 2011 at 9:27 AM, Mathias Meyer  wrote:

&gt; Jeremy,
&gt;
&gt; looks like you're hitting the timeout for the MapReduce job you're running,
&gt; so the issue isn't memory-related. You could either increase the timeout for
&gt; the whole job, or split up the single MapReduce request in multiple,
&gt; ensuring a shorter runtime of a single job, then collecting the results on
&gt; your application's side.
&gt;
&gt; Mathias Meyer
&gt; Developer Advocate, Basho Technologies
&gt;
&gt;
&gt; On Dienstag, 21. Juni 2011 at 14:25, Jeremy Raymond wrote:
&gt;
&gt; &gt; I increased the memory to 3GB on the VMs I'm using for Riak and also
&gt; replaced a JavaScript reduce function I had missed converting to Erlang with
&gt; the Erlang version. Monitoring the memory on the machines indicates that
&gt; Riak is not running out of memory. There is lots of disk space on the
&gt; machines (~30GB free).
&gt; &gt;
&gt; &gt; Riak crashed again this morning with a {error, flow\_timeout} (below). My
&gt; use case is I have ~75 map/reduce jobs that run about every 10 minutes over
&gt; about 8700 items in a bucket. Once an hour the 8700 items get updated with a
&gt; write to each item.
&gt; &gt;
&gt; &gt; =SUPERVISOR REPORT==== 21-Jun-2011::02:34:34 ===
&gt; &gt; Supervisor: {local,luke\_phase\_sup}
&gt; &gt; Context: child\_terminated
&gt; &gt; Reason: {error,flow\_timeout}
&gt; &gt; Offender: [{pid,&lt;0.7243.26&gt;},{name,undefined},{mfa,{luke\_phase,start\_lin\
&gt; &gt;
&gt; k,[riak\_kv\_reduce\_phase,3,[accumulate,converge],undefined,&lt;0.7241.26&gt;,66000,[{e\
&gt; &gt; rlang,{reduce, ...
&gt; &gt;
&gt; &gt;
&gt; &gt; =ERROR REPORT==== 21-Jun-2011::02:34:34 ===
&gt; &gt; \*\* State machine &lt;0.7274.26&gt; terminating
&gt; &gt; \*\* Last message in was {'EXIT',&lt;0.7241.26&gt;,{error,flow\_timeout}}
&gt; &gt; \*\* When State == waiting\_kl
&gt; &gt; \*\* Data == {state,&lt;0.7241.26&gt;,mapred,&lt;&lt;&gt;&gt;,
&gt; &gt; [[{639406966332270026714112114313373821099470487552,
&gt; &gt; 'riak@x.x.x.x (mailto:riak@x.x.x.x)'},
&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

