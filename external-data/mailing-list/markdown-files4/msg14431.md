---
title: "Re: Question about counters"
description: ""
project: community
lastmod: 2014-07-01T02:32:27-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14431"
mailinglist_parent_id: "msg14430"
author_name: "Alex De la rosa"
project_section: "mailinglistitem"
sent_date: 2014-07-01T02:32:27-07:00
---


I found out on http://docs.basho.com/riak/2.0.0beta1/dev/using/search that
in Riak 2.0 additional steps are needed... i fixed my code as follows, but
still crashing:

-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+
-----+-----+-----+-----+-----
import riak
client = riak.RiakClient(protocol='pbc',
nodes=[{'host':'127.0.0.1','http\_port':8098,'pb\_port':8087}])
client.create\_search\_index('men') # NEW: Creating a search index
bucket = client.bucket('accounts')
bucket.enable\_search()
bucket.set\_property('search\_index', 'men') # NEW: Setting the search index
to the bucket
key = bucket.new('alex', data={"username":"Alex","age":25,"sex":"male"},
content\_type='application/json')
key.store()
print bucket.search('sex=male')
-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----

this time seems the Python client is not fully updated again and missing
functionality (like "counters"):

-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----
Traceback (most recent call last):
 File "test.py", line 3, in 
 client.create\_search\_index('men')
AttributeError: 'RiakClient' object has no attribute 'create\_search\_index'
-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----

Is a problem of the Python client? Or there is something wrong on my code?
When will it be a Python client update solving all these issues? is a bit
frustrating wanting to try the features and see you can not do it because
the client is not fully operational.

Cheers,
Alex

On Tue, Jul 1, 2014 at 10:38 AM, Alex De la rosa 
wrote:

&gt; Hi there,
&gt;
&gt; I found out why Riak was not starting when I enabled it... JAVA was not
&gt; installed!!... However, after installing Java and successfully started Riak
&gt; with search enabled, when trying to use "search" it crashes very badly,
&gt; this is the Java Version I have under Ubuntu Server 14.04 LTS:
&gt;
&gt; java version "1.7.0\_60"
&gt; Java(TM) SE Runtime Environment (build 1.7.0\_60-b19)
&gt; Java HotSpot(TM) 64-Bit Server VM (build 24.60-b09, mixed mode)
&gt;
&gt; This is my testing code using Python library:
&gt;
&gt; -----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----
&gt;
&gt; import riak
&gt; client = riak.RiakClient(protocol='pbc',
&gt; nodes=[{'host':'127.0.0.1','http\_port':8098,'pb\_port':8087}])
&gt; bucket = client.bucket('accounts')
&gt; bucket.enable\_search()
&gt; key = bucket.new('alex', data={"username":"Alex","age":25,"sex":"male"},
&gt; content\_type='application/json')
&gt; key.store()
&gt; print bucket.search('sex=male')
&gt;
&gt; # Code following example in:
&gt; http://basho.github.io/riak-python-client/query.html#fulltext-search
&gt;
&gt;
&gt; -----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----
&gt; This is the error that Riak Search is giving to me:
&gt;
&gt; -----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----
&gt;
&gt; Traceback (most recent call last):
&gt; File "test.py", line 7, in 
&gt; bucket.search('sex=male')
&gt; File
&gt; "/usr/local/lib/python2.7/dist-packages/riak-2.0.3-py2.7.egg/riak/bucket.py",
&gt; line 446, in search
&gt; File
&gt; "/usr/local/lib/python2.7/dist-packages/riak-2.0.3-py2.7.egg/riak/client/transport.py",
&gt; line 127, in wrapper
&gt; File
&gt; "/usr/local/lib/python2.7/dist-packages/riak-2.0.3-py2.7.egg/riak/client/transport.py",
&gt; line 69, in \_with\_retries
&gt; File
&gt; "/usr/local/lib/python2.7/dist-packages/riak-2.0.3-py2.7.egg/riak/client/transport.py",
&gt; line 125, in thunk
&gt; File
&gt; "/usr/local/lib/python2.7/dist-packages/riak-2.0.3-py2.7.egg/riak/client/operations.py",
&gt; line 428, in fulltext\_search
&gt; File
&gt; "/usr/local/lib/python2.7/dist-packages/riak-2.0.3-py2.7.egg/riak/transports/pbc/transport.py",
&gt; line 453, in search
&gt; File
&gt; "/usr/local/lib/python2.7/dist-packages/riak-2.0.3-py2.7.egg/riak/transports/pbc/connection.py",
&gt; line 43, in \_request
&gt; File
&gt; "/usr/local/lib/python2.7/dist-packages/riak-2.0.3-py2.7.egg/riak/transports/pbc/connection.py",
&gt; line 55, in \_recv\_msg
&gt; riak.RiakError: 'No index &lt;&lt;"accounts"&gt;&gt; found.'
&gt;
&gt; -----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----
&gt;
&gt; Cheers,
&gt; Alex
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

