---
title: "Re: Link walking with Erlang riak client"
description: ""
project: community
lastmod: 2012-06-20T05:01:00-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07719"
mailinglist_parent_id: "msg07714"
author_name: "Morgan Segalis"
project_section: "mailinglistitem"
sent_date: 2012-06-20T05:01:00-07:00
---


Hi Eric,

Thank you for your answer.

Yeah apparently, Links are not the Eldorado I though it was.
In my head it was a pointer to another record, and accessing it would be faster 
than regular requests…

I'm not really looking for more than 100 friends in one user's list really. 
(Except the rare user that will have 1000 or more friends).
When you say "a limited length", I'm not sure what you are referring… ?

Actually, more than checking if A and B are friends, I was looking for getting 
fast Information about friends, e.g. :

- retrieve all friend's information by Link Walking, like : A/B/name A/C/name 
A/D/name …

But it seems that I would not be as fast as I though ?

Thank you,

Morgan.

Le 19 juin 2012 à 19:48, Eric Moritz a écrit :

&gt; Links may not be the most appropriate way to model a set of associated
&gt; users. They have a limited length and both the user data and the
&gt; links have to be saved at the same time.
&gt; 
&gt; What you can do is emulate a set using a separate bucket and secondary 
&gt; indexes.
&gt; 
&gt; So basically the bucket would look like this:
&gt; 
&gt; So if I'm a friend of yours,
&gt; 
&gt; PUT /buckets/friends/keys/eric-morgan
&gt; x-riak-index-friend\_id\_bin: morgan
&gt; x-riak-index-user\_id\_bin: eric
&gt; Content-Type: application/json
&gt; 
&gt; {"user\_id": "eric", "friend\_id": "morgan"}
&gt; 
&gt; Then you can fetch a set of my friends by doing a 2i query for the
&gt; bucket friends and the index
&gt; user\_id.
&gt; 
&gt; If you want to a set of all the people that have friended you, do a 2i
&gt; query on friend\_id with the value "morgan".
&gt; 
&gt; You can quickly see if we're mutual friends by fetching:
&gt; 
&gt; /buckets/friends/keys/eric-morgan and /buckets/friends/keys/morgan-eric.
&gt; 
&gt; If both are found, then we're mutual friends.
&gt; 
&gt; Eric.
&gt; 
&gt; On Tue, Jun 19, 2012 at 12:35 PM, Morgan Segalis  wrote:
&gt;&gt; Hi everyone !
&gt;&gt; 
&gt;&gt; I'm looking for a NoSQL solution to get ride of MySQL.
&gt;&gt; In this particular issue, I think that Riak is one of the top of my choices 
&gt;&gt; in order to do what I'm looking for.
&gt;&gt; 
&gt;&gt; I would like to store all my users into Riak.
&gt;&gt; I understand that Riak is document oriented, so that's great for getting 
&gt;&gt; every information really fast from one user.
&gt;&gt; One of the feature I'm really interested in, are Links.
&gt;&gt; 
&gt;&gt; Links seems to be a great way for me to create association between users…
&gt;&gt; 
&gt;&gt; When A adds B, I create a link from A to B.
&gt;&gt; When B accepts A's invitation, I create a link from B to A.
&gt;&gt; 
&gt;&gt; If links are not both ways, e.g. A to B to A, message can not go through (B 
&gt;&gt; who didn't accept A should not get its message yet)
&gt;&gt; 
&gt;&gt; My server is coded in Erlang, I have checked the Erlang riak client, and I 
&gt;&gt; didn't see something as simple as the HTTP use of Links in the demo.
&gt;&gt; 
&gt;&gt; 1 - Are Link walking in Erlang fast & easy ?
&gt;&gt; 2 - Is it possible to check fast if A -&gt; B -&gt; A (still in Erlang)? ('-&gt;' 
&gt;&gt; represents Links)
&gt;&gt; 
&gt;&gt; Thank you for your help !
&gt;&gt; 
&gt;&gt; Morgan.
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

