---
title: "riaksearch crashing with \"memsup: Erlang has closed\""
description: ""
project: community
lastmod: 2010-11-08T03:10:51-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01486"
author_name: "Pablo Borges"
project_section: "mailinglistitem"
sent_date: 2010-11-08T03:10:51-08:00
---


Hey there,

While running a really query that's supposed to return a big (more than 10
million) results, I've seen riaksearch crash with this on erlang.log:

=INFO REPORT==== 7-Nov-2010::23:32:12 ===
Pid &lt;0.448.0&gt; compacted 5 segments for 6825517 bytes in 3.438322 seconds,
1.89 MB/sec

=INFO REPORT==== 7-Nov-2010::23:32:19 ===
 alarm\_handler: {set,{process\_memory\_high\_watermark,&lt;0.18557.73&gt;}}

=INFO REPORT==== 7-Nov-2010::23:32:20 ===
Pid &lt;0.428.0&gt; compacted 6 segments for 13988230 bytes in 7.663749 seconds,
1.74 MB/sec

=INFO REPORT==== 7-Nov-2010::23:32:22 ===
Pid &lt;0.468.0&gt; compacted 5 segments for 4049726 bytes in 1.367522 seconds,
2.82 MB/sec
/opt/riaksearch/lib/os\_mon-2.2.5/priv/bin/memsup: Erlang has closed
Erlang has closed.

Crash dump was written to: erl\_crash.dump
eheap\_alloc: Cannot allocate 13593774640 bytes of memory (of type "heap").

The system has 24GB of RAM, so probably memory is not an issue, but maybe
the process\_memory\_high\_watermark is. Any hints ? :)

[]'s
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

