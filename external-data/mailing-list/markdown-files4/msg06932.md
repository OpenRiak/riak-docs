---
title: "Re: Solving \"bad_utf8_character_code\" error returned by Riak MR"
description: ""
project: community
lastmod: 2012-03-10T09:59:14-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06932"
mailinglist_parent_id: "msg06928"
author_name: "Samuel Elliott"
project_section: "mailinglistitem"
sent_date: 2012-03-10T09:59:14-08:00
---


On Fri, Mar 9, 2012 at 8:32 PM, Matthew Tovbin  wrote:
&gt; Thanks, Sean!
&gt;
&gt; What are the suggestions for solving this issue, except of cleaning data
&gt; before putting it to Riak?

pre- or post-commit hook maybe? That means your clients won't need to
do an explicit clean, but the data will still be clean once it gets
stored (presumably). Others on this list will know far better than me
though, it's just an idea.

Sam

&gt;
&gt;
&gt; -Matthew
&gt;
&gt;
&gt;
&gt; On Fri, Mar 9, 2012 at 10:38, Sean Cribbs  wrote:
&gt;&gt;
&gt;&gt; Matthew,
&gt;&gt;
&gt;&gt; Even if your map function doesn't use the object, the Erlang side doesn't
&gt;&gt; know that (Javascript funargs are exceptionally lazy anyway). It will still
&gt;&gt; try to serialize the object into JSON to send marshal it into the VM. That's
&gt;&gt; where the error is generated.
&gt;&gt;
&gt;&gt; On Fri, Mar 9, 2012 at 12:20 PM, Matthew Tovbin 
&gt;&gt; wrote:
&gt;&gt;&gt;
&gt;&gt;&gt;  Good day!
&gt;&gt;&gt;
&gt;&gt;&gt;   As previously discussed here
&gt;&gt;&gt; (https://github.com/basho/riak\_kv/pull/252#issuecomment-4415767) I am unable
&gt;&gt;&gt; to perform MR on my cluster due to wrong encoding in some of my values.
&gt;&gt;&gt;
&gt;&gt;&gt; What are the suggestions for solving this issue, except of cleaning data
&gt;&gt;&gt; before putting it to Riak?
&gt;&gt;&gt;
&gt;&gt;&gt; Why does even this map function fail "function map () { return [1]; }"
&gt;&gt;&gt; ? It's not supposed to parse the value.
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; Thanks in advance for any tips.
&gt;&gt;&gt;
&gt;&gt;&gt; -Matthew
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; --
&gt;&gt; Sean Cribbs 
&gt;&gt; Software Engineer
&gt;&gt; Basho Technologies, Inc.
&gt;&gt; http://basho.com/
&gt;&gt;
&gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;



-- 
Samuel Elliott
s...@lenary.co.uk
http://lenary.co.uk/
+44 (0)7891 993 664

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

