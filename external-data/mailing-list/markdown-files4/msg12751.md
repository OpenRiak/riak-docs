---
title: "Re: Riak occasionally not storing objects"
description: ""
project: community
lastmod: 2013-10-24T07:32:00-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12751"
mailinglist_parent_id: "msg12745"
author_name: "David Greenstein"
project_section: "mailinglistitem"
sent_date: 2013-10-24T07:32:00-07:00
---


It does in fact appear that the out of synch system clocks across the nodes was 
causing the issue with vclock auto conflict resolution. The nodes don’t have 
internet access so I set up an internal ntp server to keep them in synch from 
now on. Thanks again for all the help!

Dave

On Oct 23, 2013, at 6:44 PM, David Greenstein  wrote:

&gt; 
&gt; The nodes were a bit out of synch (up to 30 seconds… looking into why ntp 
&gt; wasn’t working!). So far it appears this was the issue. I’ll let you know as 
&gt; I continue testing. Thank you!
&gt; 
&gt; Dave
&gt; 
&gt; 
&gt; On Oct 23, 2013, at 6:01 PM, John Daily  wrote:
&gt; 
&gt;&gt; How well-synchronized are your system clocks?
&gt;&gt; 
&gt;&gt; Sent from my iPhone
&gt;&gt; 
&gt;&gt;&gt; On Oct 23, 2013, at 5:00 PM, David Greenstein  wrote:
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; We’re doing new puts with a blank vector clock. There are several seconds 
&gt;&gt;&gt; between updates to the object though.
&gt;&gt;&gt; 
&gt;&gt;&gt; Dave
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; On Oct 23, 2013, at 5:32 PM, Andrew Thompson  wrote:
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt; On Wed, Oct 23, 2013 at 04:57:12PM -0400, David Greenstein wrote:
&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt; One other thing that might be worth mentioning here is the writes I’m 
&gt;&gt;&gt;&gt;&gt; mentioning are actually updates to existing objects. The object exists, 
&gt;&gt;&gt;&gt;&gt; an attempt to write an update for the object appears to be received by a 
&gt;&gt;&gt;&gt;&gt; node, but the object maintains it’s original value.
&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt; Any help you can provide to debug this would be greatly appreciated. 
&gt;&gt;&gt;&gt;&gt; thank you!
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; Ok, that changes things a lot. You're running with allow\_mult=false, so
&gt;&gt;&gt;&gt; Riak will automatically resolve siblings for you if you create them. Are
&gt;&gt;&gt;&gt; you doing 'get before put' for your updates? That is, doing the PUT with
&gt;&gt;&gt;&gt; the vclock of the old value, or are you doing 'new' puts with a blank
&gt;&gt;&gt;&gt; vector clock?
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; Andrew
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; 


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

