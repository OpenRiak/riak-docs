---
title: "Re: Running MapReduce when deleting record is causing	bad_utf8_character_code error"
description: ""
project: community
lastmod: 2014-10-29T11:09:01-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15091"
mailinglist_parent_id: "msg15051"
author_name: "Luke Bakken"
project_section: "mailinglistitem"
sent_date: 2014-10-29T11:09:01-07:00
---


Hi Naveen,

What is your map reduce query?
--
Luke Bakken
Engineer / CSE
lbak...@basho.com


On Mon, Oct 20, 2014 at 11:59 AM, Naveen Tamanam
 wrote:
&gt; Hi,
&gt;
&gt; Running map-reduce when deleting the record causing the
&gt; bad\_utf8\_character\_code
&gt; error. I mean doing both things simultaneously causing the error
&gt;
&gt; Here is the traceback
&gt;
&gt; Error running MapReduce operation. Headers: {'content-length': '1312',
&gt; 'server': 'MochiWeb/1.1 WebMachine/1.10.0 (never breaks eye contact)',
&gt; 'connection': 'close', 'date': 'Mon, 20 Oct 2014 18:23:08 GMT',
&gt; 'content-type': 'text/html', 'http\_code': 500} Body: '500
&gt; Internal Server ErrorInternal Server Error
=====================

The
&gt; server encountered an error while processing this
&gt; request:  

```
{error,{exit,{ucs,{bad_utf8_character_code}},\n
&gt;  [{xmerl_ucs,from_utf8,1,[{file,"xmerl_ucs.erl"},{line,185}]},
&gt;  {mochijson2,json_encode_string,2,
&gt;  [{file,"src/mochijson2.erl"},{line,186}]},
&gt;    {mochijson2,\'-json_encode_proplist/2-fun-0-\',3,
&gt;  [{file,"src/mochijson2.erl"},{line,167}]},
&gt;    {lists,foldl,3,[{file,"lists.erl"},{line,1197}]},
&gt;  {mochijson2,json_encode_proplist,2,
&gt;   [{file,"src/mochijson2.erl"},{line,170}]},
&gt;  {riak_kv_wm_mapred,send_error,2,
&gt;    [{file,"src/riak_kv_wm_mapred.erl"},\n
&gt; {line,70}]},\n              {riak_kv_wm_mapred,pipe_mapred_nonchunked,3,\n
&gt; [{file,"src/riak_kv_wm_mapred.erl"},\n
&gt; {line,214}]},\n              {webmachine_resource,resource_call,3,\n
&gt; [{file,"src/webmachine_resource.erl"},\n
&gt;                 {line,186}]}]}}
```


---

mochiweb+webmachine web
&gt; server

'
&gt;
&gt;
&gt;
&gt; I have observed that, every time I do both things simultaneously casing the
&gt; error. But later on after a while map-reduce query is working fine.
&gt; Is this mean, can't I run the map-reduce queries while deleting keys from
&gt; other client?
&gt;
&gt;
&gt; --
&gt; Thanks & Regards,
&gt; Naveen Tamanam
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

