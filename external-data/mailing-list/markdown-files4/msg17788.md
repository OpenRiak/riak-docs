---
title: "Re: Exporting data from Riak KV in order to let Android read it	offline"
description: ""
project: community
lastmod: 2016-11-29T03:13:45-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17788"
mailinglist_parent_id: "msg17735"
author_name: "Luca Favatella"
project_section: "mailinglistitem"
sent_date: 2016-11-29T03:13:45-08:00
---


On 7 November 2016 at 16:07, Luca Favatella
 wrote:
&gt;
&gt; Hi All,
&gt;
&gt; What file format easy to read on an Android mobile device would you recommend 
&gt; for representing a snapshot of part of a live Riak KV store? The main aim is 
&gt; minimizing development effort on the Android device while keeping battery 
&gt; consumption reasonable.
&gt;
&gt;
&gt; As Riak KV can be defined as a key-value store with key being any arbitrary 
&gt; byte sequence and value being any [MIME-typed][1] arbitrary byte sequence, I 
&gt; see that any Android-friendly file format / library for reading any such 
&gt; export needs to:
&gt; \* Be key-value; and
&gt; \* Be able to return the value and its MIME type.
&gt;
&gt; [1]: Even values with siblings [can][2] be represented with MIME type.
&gt; [2]: 
&gt; http://docs.basho.com/riak/kv/2.1.4/developing/api/http/fetch-object/#get-all-siblings-in-one-request
&gt;
&gt; Some of the alternative file formats include:
&gt; \* A. SQLite, with columns key (the same as in Riak KV), mime type and value - 
&gt; respectively of types TEXT, TEXT and BLOB;
&gt; \* B. Archive (e.g. tar, zip) containing file paths corresponding to exported 
&gt; Riak KV keys, with file content being the Riak KV [HTTP GET response][3] - 
&gt; that includes MIME type and body;
&gt; \* C. Archived (because potentially multi-file) LevelDB database, with the key 
&gt; being the Riak KV key and the value being the Riak KV [HTTP GET response][3] 
&gt; - that includes MIME type and body. (Based on a quick search there is some 
&gt; code for LevelDB on Android.)
&gt; Storing the HTTP GET response require the Android application to parse it for 
&gt; extracting the MIME type and the actual value. (I assume there is some HTTP 
&gt; parser Android library).
&gt;
&gt; [3]: 
&gt; http://docs.basho.com/riak/kv/2.1.4/developing/api/http/fetch-object/#simple-example

Hi,

Just an update for letting you know that my current plan is exploiting
the HTTP 1.1 standardized caching semantics (RFC 7234) and an HTTP
cache on Android (initially class `HttpResponseCache`).

The mobile device would send HTTP GET request to a front-end HTTP
service hiding Riak KV (HTTP or PB), and would cache the responses
locally for offline reading.

(This solution requires changes to the functional specifications of
the project I am working on so I had not listed it as an alternative.)

Regards
Luca

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

