---
title: "Re: Problem with deleting keys"
description: ""
project: community
lastmod: 2011-06-16T10:10:03-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03721"
mailinglist_parent_id: "msg03711"
author_name: "Andrew Thompson"
project_section: "mailinglistitem"
sent_date: 2011-06-16T10:10:03-07:00
---


On Thu, Jun 16, 2011 at 06:09:37PM +0200, Kresten Krab Thorup wrote:
&gt; 
&gt; On Jun 16, 2011, at 5:53 PM, Andrew Thompson wrote:
&gt; 
&gt; &gt; I've also
&gt; &gt; added a 'deletedvclock' GET option to change the return behaviour for
&gt; &gt; when a tombstone is found to instead return {deleted, VClock} so you can
&gt; &gt; safely override a tombstone, instead of triggering a merge (or creating
&gt; &gt; siblings).
&gt; 
&gt; On master ... Is this reflected in the REST API, so that e.g. when you get a 
&gt; 404 you may also get a VClock header if the object was previously deleted, 
&gt; but Riak hasn't been able to effectuate that because a primary is down?

Yes, the REST interface will \*always\* send a X-Riak-Vclock header if it
encounters a tombstone and 404s. This was the only API that I could
change to make this new option always on without breaking compatability.

Andrew

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

