---
title: "Re: Yokozuna kv write timeouts on 1.4 (yz-merge-1.4.0)"
description: ""
project: community
lastmod: 2013-07-19T12:22:21-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11639"
mailinglist_parent_id: "msg11615"
author_name: "Dave Martorana"
project_section: "mailinglistitem"
sent_date: 2013-07-19T12:22:21-07:00
---


Looks great so far. Importing lots of data now, will let you know if I run
in to anything else. Thanks!


On Thu, Jul 18, 2013 at 5:06 PM, Ryan Zezeski  wrote:

&gt; Okay. Yokozuna has been targeted to Riak 1.4.0. Please notice the
&gt; integration branch names changed to rz-yz-merge-1.4.0 (notice the addition
&gt; of rz- prefix and different version).
&gt;
&gt;
&gt; https://github.com/basho/yokozuna/blob/master/docs/INSTALL.md#install-from-github
&gt;
&gt; Make sure to do a fresh checkout to avoid any lingering old dependencies.
&gt; Let me know if you run into more issues.
&gt;
&gt; -Z
&gt;
&gt;
&gt; On Thu, Jul 18, 2013 at 9:33 AM, Ryan Zezeski  wrote:
&gt;
&gt;&gt; Dave,
&gt;&gt;
&gt;&gt; I'm currently in the process re-targeting Yokozuna to 1.4.0 for the 0.8.0
&gt;&gt; release. I'll ping this thread when the transition is complete.
&gt;&gt;
&gt;&gt; -Z
&gt;&gt;
&gt;&gt;
&gt;&gt; On Wed, Jul 17, 2013 at 8:53 PM, Eric Redmond  wrote:
&gt;&gt;
&gt;&gt;&gt; Dave,
&gt;&gt;&gt;
&gt;&gt;&gt; Your initial line was correct. Yokozuna is not yet compatible with 1.4.
&gt;&gt;&gt;
&gt;&gt;&gt; Eric
&gt;&gt;&gt;
&gt;&gt;&gt; On Jul 15, 2013, at 1:00 PM, Dave Martorana  wrote:
&gt;&gt;&gt;
&gt;&gt;&gt; Hi everyone. First post, if I leave anything out just let me know.
&gt;&gt;&gt;
&gt;&gt;&gt; I have been using vagrant in testing Yokozuna with 1.3.0 (the official
&gt;&gt;&gt; 0.7.0 “release") and it runs swimmingly. When 1.4 was released and someone
&gt;&gt;&gt; pointed me to the YZ integration branch, I decided to give it a go.
&gt;&gt;&gt;
&gt;&gt;&gt; I realize that YZ probably doesn’t support 1.4 yet, but here are my
&gt;&gt;&gt; experiences.
&gt;&gt;&gt;
&gt;&gt;&gt; - Installs fine
&gt;&gt;&gt; - Using default stagedevrel with 5 node setup
&gt;&gt;&gt; - Without yz enabled in app.config, kv accepts writes and reads
&gt;&gt;&gt; - With yz enabled on dev1 and nowhere else, kv accepts writes and reads,
&gt;&gt;&gt; creates yz index, associates index with bucket, does not index content
&gt;&gt;&gt; - With yz enabled on 4/5 nodes, kv stops accepting writes (timeout)
&gt;&gt;&gt;
&gt;&gt;&gt; Ex:
&gt;&gt;&gt;
&gt;&gt;&gt; (env)➜ curl -v -H 'content-type: text/plain' -XPUT '
&gt;&gt;&gt; http://localhost:10018/buckets/players/keys/name' -d "Ryan Zezeski"
&gt;&gt;&gt; \* Adding handle: conn: 0x7f995a804000
&gt;&gt;&gt; \* Adding handle: send: 0
&gt;&gt;&gt; \* Adding handle: recv: 0
&gt;&gt;&gt; \* Curl\_addHandleToPipeline: length: 1
&gt;&gt;&gt; \* - Conn 0 (0x7f995a804000) send\_pipe: 1, recv\_pipe: 0
&gt;&gt;&gt; \* About to connect() to localhost port 10018 (#0)
&gt;&gt;&gt; \* Trying 127.0.0.1...
&gt;&gt;&gt; \* Connected to localhost (127.0.0.1) port 10018 (#0)
&gt;&gt;&gt; &gt; PUT /buckets/players/keys/name HTTP/1.1
&gt;&gt;&gt; &gt; User-Agent: curl/7.30.0
&gt;&gt;&gt; &gt; Host: localhost:10018
&gt;&gt;&gt; &gt; Accept: \*/\*
&gt;&gt;&gt; &gt; content-type: text/plain
&gt;&gt;&gt; &gt; Content-Length: 12
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; \* upload completely sent off: 12 out of 12 bytes
&gt;&gt;&gt; &lt; HTTP/1.1 503 Service Unavailable
&gt;&gt;&gt; &lt; Vary: Accept-Encoding
&gt;&gt;&gt; \* Server MochiWeb/1.1 WebMachine/1.9.2 (someone had painted it blue) is
&gt;&gt;&gt; not blacklisted
&gt;&gt;&gt; &lt; Server: MochiWeb/1.1 WebMachine/1.9.2 (someone had painted it blue)
&gt;&gt;&gt; &lt; Date: Mon, 15 Jul 2013 19:54:50 GMT
&gt;&gt;&gt; &lt; Content-Type: text/plain
&gt;&gt;&gt; &lt; Content-Length: 18
&gt;&gt;&gt; &lt;
&gt;&gt;&gt; request timed out
&gt;&gt;&gt; \* Connection #0 to host localhost left intact
&gt;&gt;&gt;
&gt;&gt;&gt; Here are my Vagrant file:
&gt;&gt;&gt;
&gt;&gt;&gt; https://gist.github.com/themartorana/460a52bb3f840010ecde
&gt;&gt;&gt;
&gt;&gt;&gt; and build script for the server:
&gt;&gt;&gt;
&gt;&gt;&gt; https://gist.github.com/themartorana/e2e0126c01b8ef01cc53
&gt;&gt;&gt;
&gt;&gt;&gt; Hope this helps.
&gt;&gt;&gt;
&gt;&gt;&gt; Dave
&gt;&gt;&gt;
&gt;&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

