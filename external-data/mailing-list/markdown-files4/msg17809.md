---
title: "Re: Error creating bucket with LevelDB bucket-type"
description: ""
project: community
lastmod: 2016-12-15T06:42:53-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17809"
mailinglist_parent_id: "msg17808"
author_name: "Felipe Esteves"
project_section: "mailinglistitem"
sent_date: 2016-12-15T06:42:53-08:00
---


Hi,

I've managed to correct this error of mine, using the correct backend name,
that is, \*leveldb\_mult\* instead of \*leveldb\*

Now I have another problem: the python client returns no error, the riak
log is also clean.
But I can find the created bucket when I run buckets?buckets=true
Seems to me it isn't being persisted, I'm investigating.

Felipe Esteves

Tecnologia

felipe.este...@b2wdigital.com 



2016-12-15 11:45 GMT-02:00 Felipe Esteves :

&gt; Hi,
&gt;
&gt; I'm running some tests with riak-kv official container (riak
&gt; version 2.1.4), to create a leveldb backend bucket-type.
&gt;
&gt; I'm following riak and python riak client documentation, as follow:
&gt;
&gt; Riak conf has:
&gt;
&gt; storage\_backend = multi
&gt; multi\_backend.bitcask\_mult.storage\_backend = bitcask
&gt; multi\_backend.bitcask\_mult.bitcask.data\_root = /var/lib/riak/bitcask\_mult
&gt; multi\_backend.leveldb\_mult.storage\_backend = leveldb
&gt; multi\_backend.leveldb\_mult.leveldb.data\_root = /var/lib/riak/leveldb\_mult
&gt; multi\_backend.default = bitcask\_mult
&gt;
&gt; After riak start, I run:
&gt; riak-admin bucket-type create leveldb\_backend
&gt; '{"props":{"backend":"leveldb"}}'
&gt; riak-admin bucket-type activate leveldb\_backend
&gt;
&gt; \*riak-admin bucket-type status leveldb\_backend\*
&gt; \*leveldb\_backend is active\*
&gt;
&gt; \*.....\*
&gt;
&gt; \*backend: &lt;&lt;"leveldb"&gt;&gt;\*
&gt; \*.....\*
&gt;
&gt; \*active: true\*
&gt; \*...\*
&gt;
&gt; In Python, I run:
&gt; myClient = riak.RiakClient(http\_port=8098, protocol='http',
&gt; host='127.0.1.1')
&gt; myBucket = myClient.bucket('foo', bucket\_type='leveldb\_backend')
&gt; key1 = myBucket.new('barr', data='foobar')
&gt; key1.store()
&gt;
&gt; However, I'm getting this error in riak:
&gt; 2016-12-15 13:13:48.598 [error] &lt;0.1408.0&gt; gen\_fsm &lt;0.1408.0&gt; in state
&gt; active terminated with reason: \*no case clause matching {riak\_kv\_\*
&gt; \*multi\_backend,undefined\_backend,&lt;&lt;"leveldb"&gt;&gt;}\* in
&gt; riak\_core\_vnode:vnode\_command/3 line 346
&gt; 2016-12-15 13:13:48.598 [error] &lt;0.1408.0&gt; CRASH REPORT Process &lt;0.1408.0&gt;
&gt; with 2 neighbours exited with reason: no case clause matchin
&gt; g {riak\_kv\_multi\_backend,undefined\_backend,&lt;&lt;"leveldb"&gt;&gt;} in
&gt; riak\_core\_vnode:vnode\_command/3 line 346 in gen\_fsm:terminate/7 line 622
&gt; 2016-12-15 13:13:48.598 [error] &lt;0.165.0&gt; Supervisor riak\_core\_vnode\_sup
&gt; had child undefined started with {riak\_core\_vnode,start\_link,undefined}
&gt; at &lt;0.1408.0&gt; exit with reason no case clause matching
&gt; {riak\_kv\_multi\_backend,undefined\_backend,&lt;&lt;"leveldb"&gt;&gt;} in
&gt; riak\_core\_vnode:vnode\_command/3 line 346 in context child\_terminated
&gt;
&gt; Am I missing some point in this configuration? Seems to me that I've
&gt; followed all the official docs but with no success.
&gt;
&gt;
&gt; Felipe Esteves
&gt;
&gt; Tecnologia
&gt;
&gt; felipe.este...@b2wdigital.com 
&gt;
&gt;
&gt;

-- 

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

