---
title: "Re: Compaction errors when new node is added"
description: ""
project: community
lastmod: 2014-11-23T05:48:08-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15218"
mailinglist_parent_id: "msg15217"
author_name: "Matthew Von-Maszewski"
project_section: "mailinglistitem"
sent_date: 2014-11-23T05:48:08-08:00
---


Timo,

You need to upgrade to 1.4.10. There is a known leveldb bug in 1.4.9 that fits 
your symptoms:

- 1.4.10 Release Notes: https://github.com/basho/riak/blob/1.4/RELEASE-NOTES.md

- leveldb bug: https://github.com/basho/leveldb/issues/135

Matthew

 
On Nov 23, 2014, at 8:36 AM, Timo Gatsonides  wrote:

&gt; Hi,
&gt; 
&gt; I have recently added a 7th node to an existing cluster of 6 nodes. Standard 
&gt; ring size. Riak 1.4.9, the new node is on Ubuntu 14, I used the Ubuntu 12 
&gt; package.
&gt; 
&gt; It seems like the progress of transferring data is really, really slow. The 
&gt; disks are continuously reading and writing data (50+Mb/s), but the total 
&gt; amount of data is growing slowly.
&gt; 
&gt; In the leveldb logs I see a lot of error messages like these:
&gt; 
&gt; 7fec9efb5700 Compaction error: IO error: 
&gt; /bigdata/riak/bigleveldb/479555224749202520035584085735030365824602865664/sst\_0/001432.sst:
&gt; No such file or directory
&gt; 
&gt; I have already stopped the node once, ran leveldb:repair on all the 
&gt; partitions and then restarted Riak. Now again these messages are appearing.
&gt; 
&gt; Can someone please explain the cause of this and if this is normal?
&gt; 
&gt; Background info: the new node is using ZFS, all the other nodes have around 
&gt; 3TB of data in the /bigdata/riak/bigleveldb directories and there are a lot 
&gt; of relatively large values that are 2-10Mb in size.
&gt; 
&gt; Kind regards,
&gt; Timo
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

