---
title: "Re: Riak Cluster Behavior - Clarification"
description: ""
project: community
lastmod: 2016-05-24T13:10:31-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17407"
mailinglist_parent_id: "msg17406"
author_name: "Vikram Lalit"
project_section: "mailinglistitem"
sent_date: 2016-05-24T13:10:31-07:00
---


It's returning no object at all for the relevant key. That too is random -
every few calls it returns but then it doesn't.
On May 24, 2016 4:06 PM, "Sargun Dhillon"  wrote:

&gt; What do you mean it's not returning? It's returning stale data? Or
&gt; it's erroring?
&gt;
&gt; On Tue, May 24, 2016 at 7:34 AM, Vikram Lalit 
&gt; wrote:
&gt; &gt; Hi - I'd appreciate if someone can opine on the below behavior of Riak
&gt; that
&gt; &gt; I am observing... is that expected, or something wrong in my set-up /
&gt; &gt; understanding?
&gt; &gt;
&gt; &gt; To summarize, I have a 3-node Riak cluster (separate EC2 AWS instances)
&gt; with
&gt; &gt; a separate chat server connecting to them. When I write data on the Riak
&gt; &gt; nodes, the process is successful and I can read all data correctly.
&gt; However,
&gt; &gt; as part of my testing, if I deliberately bring down one node (and then
&gt; &gt; remove it from the cluster using riak-admin cluster force-remove / plan /
&gt; &gt; commit), the client API is not able to fetch all the written data. In
&gt; fact,
&gt; &gt; there is an alternation of success and failure which happens rather
&gt; &gt; randomly.
&gt; &gt;
&gt; &gt; My initial suspicion was that it would be happening only during the time
&gt; the
&gt; &gt; rebalancing is occurring (i.e. riak-admin ring-status is not fully
&gt; settled)
&gt; &gt; but I've seen this sporadic behavior post the same too.
&gt; &gt;
&gt; &gt; Does this have to do with the n and r values for the cluster and given
&gt; that
&gt; &gt; 1 node is down, the cluster does not succeed in returning results
&gt; reliably?
&gt; &gt; Also, does this mean that during the time a cluster is being rebalanced
&gt; &gt; (even incl. addition of new nodes), the results could be arbitrary - that
&gt; &gt; doesn't sound correct to me?
&gt; &gt;
&gt; &gt; Appreciate if someone can throw some light here? Also, the HTTP API
&gt; calls to
&gt; &gt; retrieve and set the n / r / w values for a specific bucket - couldn't
&gt; &gt; locate the same!
&gt; &gt;
&gt; &gt; Thanks much!
&gt; &gt; Vikram
&gt; &gt;
&gt; &gt;
&gt; &gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; &gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

