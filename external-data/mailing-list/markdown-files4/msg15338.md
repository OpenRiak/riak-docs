---
title: "Re: How you are dealing with spikes?"
description: ""
project: community
lastmod: 2014-12-09T06:47:32-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15338"
mailinglist_parent_id: "msg15336"
author_name: "Luke Bakken"
project_section: "mailinglistitem"
sent_date: 2014-12-09T06:47:32-08:00
---


Hi Alexander,

Can you comment on the read vs. write load of this cluster/

Could you please run the following command and reply with the output?

sysctl -a | fgrep vm.dirty\_

We've seen cases where dirty pages get written in a synchronous manner
all at once, causing latency spikes due to I/O blocking.
--
Luke Bakken
Engineer / CSE
lbak...@basho.com


On Tue, Dec 9, 2014 at 4:58 AM, Alexander Popov  wrote:
&gt; I have Riak 2.0.1 cluster with 5 nodes ( ec2 m3-large ) with elnm in front
&gt; sometimes I got spikes up to 10 seconds
&gt;
&gt; I can't say that I have huge load at this time, max 200 requests per
&gt; second for all 5 nodes.
&gt;
&gt; Most expensive queries is
&gt; \* list by secondary index ( usually returns from 0 to 100 records )
&gt; \* and solr queries( max 10 records )
&gt;
&gt; save operations is slowdown sometimes but not so much ( up to 1 sec )
&gt;
&gt; It's slowdown not for specific requests, same one work pretty fast later.
&gt;
&gt; Does it any possibilities to profile|log somehow to determine reason
&gt; why this happen?
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

