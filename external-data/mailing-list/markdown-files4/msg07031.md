---
title: "Re: Pass keyarg from one map phase to another?"
description: ""
project: community
lastmod: 2012-03-23T09:18:40-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07031"
mailinglist_parent_id: "msg07029"
author_name: "Daniel Reverri"
project_section: "mailinglistitem"
sent_date: 2012-03-23T09:18:40-07:00
---


Hi Mat, 

Yes, a map function may return a three element array with the third element 
being used as keydata to a subsequent map phase. A quick example:

# create an object
curl http://localhost:8098/riak/bucket/key -XPUT -d 'hello' -H 
'content-type:text/plain'

# example MapReduce query
curl http://localhost:8098/mapred -XPOST -H 'content-type:application/json' -d 
'{"inputs":[["bucket","key"]],"query":[{"map":{"language":"javascript","source":"function(v)
 { return [[\"bucket\",\"key\",\"keyarg\"]] 
}"}},{"map":{"language":"javascript","source":"function(v, keyData) { return 
[keyData] }"}}]}'

Thanks,
Dan

-- 
Daniel Reverri
Developer Advocate
Basho Technologies, Inc.
d...@basho.com
Sent with Sparrow (http://www.sparrowmailapp.com/?sig)


On Friday, March 23, 2012 at 8:37 AM, Matthew A. Brown wrote:

&gt; For situations in which one map phase passes output to a subsequent
&gt; map phase, the documentation states:
&gt; 
&gt; These map functions filter their inputs based on the arg and
&gt; return bucket-key pairs for a subsequent map phase
&gt; 
&gt; Is it possible to also return a keyarg? So a three-element array?
&gt; 
&gt; Thanks!
&gt; Mat
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com (mailto:riak-users@lists.basho.com)
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com




\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

