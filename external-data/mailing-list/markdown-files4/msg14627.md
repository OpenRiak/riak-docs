---
title: "Re: Optimistic Locking with Riak Search / is _version_ required in	schema.xml?"
description: ""
project: community
lastmod: 2014-08-08T13:02:11-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14627"
mailinglist_parent_id: "msg14622"
author_name: "David James"
project_section: "mailinglistitem"
sent_date: 2014-08-08T13:02:11-07:00
---


Thanks for the detailed answers!


On Thu, Aug 7, 2014 at 5:57 PM, Ryan Zezeski  wrote:

&gt;
&gt; On Aug 7, 2014, at 5:46 PM, David James  wrote:
&gt;
&gt;
&gt; - Is \_version\_ required?
&gt;
&gt;
&gt; It should not be required as the documentation says it is only needed for
&gt; real-time GET which Riak Search (Yokozuna) disables since Riak KV provides
&gt; the get/put implementation.
&gt;
&gt;
&gt; - I see SolrCloud mentioned in some documentation (see below)? Does
&gt; Riak Search use it?
&gt;
&gt;
&gt; RS does not make use of SolrCloud at all. It uses Solr’s Distributed
&gt; Search but that is something that existed well before SolrCloud. All
&gt; routing and replica administration is handled by Riak. Each Solr instance
&gt; (one per node) has no awareness of the other nodes except for the explicit
&gt; distributed queries sent by Riak.
&gt;
&gt;
&gt; - How does Riak Search handle optimistic locking?
&gt;
&gt;
&gt; It doesn’t use Solr’s optimistic locking at all. All key-value semantics
&gt; come from Riak itself. RS simply indexes an object’s values.
&gt;
&gt;
&gt;
&gt; See this comment on the default\_schema.xml on Github:
&gt;
&gt; 
&gt; 
&gt;
&gt;
&gt; https://raw.githubusercontent.com/basho/yokozuna/develop/priv/default\_schema.xml
&gt;
&gt;
&gt; Yes, I wrote that TODO. It is one of many that founds its way into 2.0.0
&gt; :). You should run fine without this field if you create a custom schema.
&gt;
&gt;
&gt;
&gt; P.S. Per https://wiki.apache.org/solr/SchemaXml
&gt;
&gt; - \_version\_ [image: ] Solr4.0  -
&gt; This field is used for optimistic locking in SolrCloud
&gt;  and it enables Real Time Get
&gt; . If you remove it you must
&gt; also remove the transaction logging from solrconfig.xml, see Real Time
&gt; Get .
&gt;
&gt;
&gt; Just to reiterate what I said above, RS disables the transaction logging
&gt; and thus there is no real time get. There is no reason for it since that
&gt; is what Riak itself provides.
&gt;
&gt; -Z
&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

