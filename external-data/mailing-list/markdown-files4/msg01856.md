---
title: "Re: problem with Riak search while searching with ruby client."
description: ""
project: community
lastmod: 2010-12-29T17:40:02-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01856"
mailinglist_parent_id: "msg01855"
author_name: "Rusty Klophaus"
project_section: "mailinglistitem"
sent_date: 2010-12-29T17:40:02-08:00
---


Hi Krishna,

Yes, you have encountered a known bug (
https://issues.basho.com/show\_bug.cgi?id=864). To summarize, the Solr
interface has problems outputting date fields in JSON, but works just fine
in XML.

This is fixed in the upcoming 0.14 release.

Best,
Rusty



On Wed, Dec 29, 2010 at 8:04 PM, Krishna Krishnamaneni &lt;
kkrishnaman...@attinteractive.com&gt; wrote:

&gt; Hi,
&gt; I am using Riak search and I am trying to run a search using ruby client
&gt; but i get back an error :
&gt;
&gt; &gt;&gt; c.search("tipdt", "t:restaurant")
&gt; Riak::FailedRequest: Expected 200 from Riak but received 500.
&gt; 500 Internal Server
&gt; ErrorInternal Server Error
=====================

The server
&gt; encountered an error while processing this
&gt; request:  

```
{error,{throw,{unhandled_type,date},
&gt;              [{riak_solr_output,convert_type,2},
&gt;               {riak_indexed_doc,'-to_mochijson2/2-lc$^0/1-0-',2},
&gt;               {riak_indexed_doc,'-to_mochijson2/2-lc$^0/1-0-',2},
&gt;               {riak_indexed_doc,to_mochijson2,2},
&gt;               {riak_solr_output,'-json_response/7-lc$^0/1-0-',2},
&gt;               {riak_solr_output,json_response,7},
&gt;               {riak_solr_searcher_wm,to_json,2},
&gt;
&gt; {webmachine_resource,resource_call,3}]}}
```


---

mochiweb+webmachine
&gt; web server


&gt; from
&gt; /Library/Ruby/Gems/1.8/gems/riak-client-0.8.2/lib/riak/client/curb\_backend.rb:70:in
&gt; `perform'
&gt; from
&gt; /Library/Ruby/Gems/1.8/gems/riak-client-0.8.2/lib/riak/client/http\_backend.rb:72:in
&gt; `get'
&gt; from
&gt; /Library/Ruby/Gems/1.8/gems/riak-client-0.8.2/lib/riak/search.rb:53:in
&gt; `search'
&gt; from (irb):3
&gt;
&gt; Did anyone see this before, when i run a query through http it works with
&gt; xml response, but if i ask for json format it gives me the same error as
&gt; above, I have 4 fields in the document, 2 of them are string type and 1 of
&gt; them is date type and the other one if of number type. any thoughts?
&gt;
&gt; Thanks in advance,
&gt; Krishna.
&gt;
&gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

