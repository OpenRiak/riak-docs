---
title: "Re: Loosing data with bucket types,	custom backend and active data entropy"
description: ""
project: community
lastmod: 2014-05-21T10:54:12-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14256"
mailinglist_parent_id: "msg14255"
author_name: "Luc Perkins"
project_section: "mailinglistitem"
sent_date: 2014-05-21T10:54:12-07:00
---


Oleksiy and Matthew,

I actually just started working on some documentation on vector clocks and
deleted objects the other day: https://github.com/basho/basho\_docs/pull/1096
.

It's still very much a work in progress, but hopefully this will keep
others from encountering the same issue going forward.

Glad to hear you found a solution!

Luc


On Wed, May 21, 2014 at 7:45 PM, Oleksiy Krivoshey wrote:

&gt; Thanks!
&gt; The problem indeed was with missing vclock (obtained with deletedvclock:
&gt; true) in the write operation immediately following delete.
&gt;
&gt; On 21 May 2014 17:23, Matthew Dawson  wrote:
&gt;
&gt;&gt; I've seen a similar failure case when I was playing around with Riak. I
&gt;&gt; found
&gt;&gt; the solution is to do a read before 5 with r=n (r=3 in the default case),
&gt;&gt; and
&gt;&gt; then do the write with the returned vclock, if any is returned. Try that
&gt;&gt; and
&gt;&gt; see if it helps.
&gt;&gt; --
&gt;&gt; Matthew
&gt;&gt;
&gt;&gt;
&gt; --
&gt; Oleksiy Krivoshey
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

