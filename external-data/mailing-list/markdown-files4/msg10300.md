---
title: "Re: Wiping data directory break vnodes with read_block_error"
description: ""
project: community
lastmod: 2013-03-01T09:20:50-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg10300"
mailinglist_parent_id: "msg10282"
author_name: "Brian Shumate"
project_section: "mailinglistitem"
sent_date: 2013-03-01T09:20:50-08:00
---


Hi Jonas,

One more thing to add; if you are using Riak version 1.3.0 you'll also want
to remove the contents of the Active Anti Entropy directory in addition to
the contents of the backend directory, so a complete example for doing
so with Riak 1.3.0 using the Bitcask backend would look like this:

riak stop
sudo rm -rf /var/lib/riak/bitcask/\*
sudo rm -rf /var/lib/riak/anti\_entropy/\*
riak start

Regards,

Brian Shumate


On Feb 28, 2013, at 3:47 AM, Jonas Lindmark wrote:

&gt; I realize now that read\_block\_error, &lt;&lt;"0"&gt;&gt; means that there was not an 
&gt; error...
&gt; 
&gt; I still get problems when running my integration tests: 
&gt; {insufficient\_vnodes,0,need,2} status code 0
&gt; 
&gt; Could it be a timing issue where I start my integration tests too early after 
&gt; 'riak start'?
&gt; 
&gt; 
&gt; On 28 February 2013 08:55, Jonas Lindmark  wrote:
&gt; Hi,
&gt; 
&gt; I'm looking for a way to manually wipe the data off of a single-node riak 
&gt; installation. I'm using riak (1.3.0 2013-02-19) Debian x86\_64 with the 
&gt; riak\_kv\_eleveldb\_backend.
&gt; 
&gt; What I'm currently doing is:
&gt; 
&gt; • riak stop
&gt; • rm -rf /var/lib/riak
&gt; • mkdir riak
&gt; • chown riak:riak riak
&gt; • start riak
&gt; Riak starts ok but a riak-admin vnode-status gives me:
&gt; 
&gt; Backend: riak\_kv\_eleveldb\_backend
&gt; Status: 
&gt; [{stats,&lt;&lt;" Compactions\nLevel Files Size(MB) 
&gt; Time(sec) Read(MB) 
&gt; Write(MB)\n--------------------------------------------------\n"&gt;&gt;},
&gt; {read\_block\_error,&lt;&lt;"0"&gt;&gt;}]
&gt; 
&gt; For each vnode.
&gt; 
&gt; It seems to me that there is something more I need to wipe for this to work 
&gt; but I can't find which files that would be.
&gt; 
&gt; /Jonas
&gt; 
&gt; 
&gt; 
&gt; -- 
&gt; /Jonas
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

