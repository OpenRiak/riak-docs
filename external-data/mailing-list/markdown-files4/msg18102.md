---
title: "Re: Does RiakKV require a lot of memory?"
description: ""
project: community
lastmod: 2017-03-27T08:50:05-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg18102"
mailinglist_parent_id: "msg18101"
author_name: "Alexander Sicular"
project_section: "mailinglistitem"
sent_date: 2017-03-27T08:50:05-07:00
---


Also, when using default setting Riak will write three copies of your data to 
your cluster - even if you only have a cluster of one machine. 

-Alexander 


@siculars
http://siculars.posthaven.com

Sent from my iRotaryPhone

&gt; On Mar 27, 2017, at 11:25, Luke Bakken  wrote:
&gt; 
&gt; Hi Tsutomu,
&gt; 
&gt; You should only use objects up to a maximum of 1MiB in size with Riak
&gt; KV. If you wish to store larger objects or files, please use Riak CS.
&gt; 
&gt; --
&gt; Luke Bakken
&gt; Engineer
&gt; lbak...@basho.com
&gt; 
&gt;&gt; On Sun, Mar 26, 2017 at 5:38 PM,  wrote:
&gt;&gt; Hello.
&gt;&gt; 
&gt;&gt; The following problem occurred, Please give me on solution.
&gt;&gt; 
&gt;&gt; (Problem)
&gt;&gt; I registered a 10mb to 1000mb file.
&gt;&gt; Then RiakKV hung up when the batch program was accessing files from 100 MB 
&gt;&gt; to 600 MB.
&gt;&gt; RiakKV hung up due to insufficient memory.
&gt;&gt; 
&gt;&gt; (Question)
&gt;&gt; 1.The problem that occurred this time is the effect of data accessed to a 
&gt;&gt; 20-1000 MB file?
&gt;&gt; Or is it another problem?
&gt;&gt; 
&gt;&gt; 2.During RiakKV data update, when you want to access RiakKV data,
&gt;&gt; do you need to do something special?
&gt;&gt; Do you need a lot of memory?
&gt;&gt; 
&gt;&gt; (Objects)
&gt;&gt; file: 3,882,892
&gt;&gt; file size(total): 332.46GB(346,243,500,913byte)
&gt;&gt; file objects:
&gt;&gt; 1- 10MB = 3,800,000(all)
&gt;&gt; 20- 50MB = 40 to 100
&gt;&gt; 100-1000MB = 50
&gt;&gt; 
&gt;&gt; (Riak Sever)
&gt;&gt; OS:Red Hat Enterprise Linux Server release 6.7 (Santiago)
&gt;&gt; 　（Linux patdevsrv02 2.6.32-573.el6.x86\_64）
&gt;&gt; CPU:Intel(R) Xeon(R) CPU E5640 @2.67GHz \* 2
&gt;&gt; Memory:12GB
&gt;&gt; Swap:14GB
&gt;&gt; Network:1Gbps
&gt;&gt; Disk:
&gt;&gt; Filesystem Size Used Avail Use% Mounted on
&gt;&gt; /dev/sda3 261G 67G 182G 27% /
&gt;&gt; tmpfs 5.9G 300K 5.9G 1% /dev/shm
&gt;&gt; /dev/sda1 477M 71M 381M 16% /boot
&gt;&gt; /dev/sdb1 275G 243G 19G 93% /USR1
&gt;&gt; /dev/sdc1 1.7T 1.5T 76G 96% /USR2
&gt;&gt; /dev/sdd1 1.1T 736G 309G 71% /USR3 &lt;&lt;&lt; Store
&gt;&gt; /dev/sde1 1.1T 1.1T 18G 99% /USR4
&gt;&gt; /dev/sdf1 1.4T 1.1T 365G 74% /media/USB-HDD1
&gt;&gt; 
&gt;&gt; (Riak)
&gt;&gt; RiakKV 2.2.0 (riak-2.2.0-1.el6.x86\_64.rpm)
&gt;&gt; 
&gt;&gt; (Riak Node)
&gt;&gt; 1 Node.
&gt;&gt; 
&gt;&gt; !!!We plan to add two nodes to the cluster at a later date.!!!
&gt;&gt; 
&gt;&gt; (Java)
&gt;&gt; Java1.8 (jre-8u121-linux-x64.rpm)
&gt;&gt; 
&gt;&gt; (riak setting)
&gt;&gt; /etc/riak/riak.conf
&gt;&gt; storage\_backend = leveldb
&gt;&gt; leveldb.maximum\_memory.percent = 50
&gt;&gt; object.size.maximum = 2GB
&gt;&gt; listener.http.internal = 0.0.0.0:8098
&gt;&gt; listener.http.internal = 0.0.0.0:8098
&gt;&gt; platform\_data\_dir = /USR3/riak
&gt;&gt; nodename = riak@...
&gt;&gt; riak\_control = on
&gt;&gt; 
&gt;&gt; !!!Settings other than these remain the default.!!!
&gt;&gt; 
&gt;&gt; (linux setting)
&gt;&gt; /etc/security/limits.conf
&gt;&gt; \* soft nofile 65536
&gt;&gt; \* hard nofile 65536
&gt;&gt; 
&gt;&gt; Thank you.
&gt;&gt; 
&gt;&gt; Tsutomu Wakuda
&gt;&gt; 
&gt;&gt; 
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

