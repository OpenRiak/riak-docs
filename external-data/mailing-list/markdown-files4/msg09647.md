---
title: "Re: CRASH REPORT Process <<\"TypeError: reduce of empty array with no	initial value\">>},{<<\"source\">>,<<\"unknown\">>}]}"
description: ""
project: community
lastmod: 2012-12-20T07:07:55-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg09647"
mailinglist_parent_id: "msg09644"
author_name: "Bryan Fink"
project_section: "mailinglistitem"
sent_date: 2012-12-20T07:07:55-08:00
---


On Thu, Dec 20, 2012 at 8:52 AM, David Montgomery
 wrote:
&gt; {fitting\_exited\_abnormally,[{&lt;&lt;"lineno"&gt;&gt;,3},{&lt;&lt;"message"&gt;&gt;,&lt;&lt;"TypeError:
&gt; reduce of empty array with no initial value"&gt;&gt;}

Hi, David. The error is occurring on line three of your reduce
function, where it calls `values.reduce`:

&gt; query.reduce('''
&gt; function(values, arg){
&gt; return [ values.reduce( function(acc, item) {
...

It's complaining about the fact that `values` is an empty array, so
`values.reduce` doesn't know what to do. You will need to either
include an initial value as a second parameter, like:

 values.reduce(function(acc, item) { ... },
 {}) //initial empty object

Or check to see if `values` is empty before reducing, like the Riak JS
reduce builtins do:

https://github.com/basho/riak\_kv/blob/master/priv/mapred\_builtins.js#L68

Cheers,
Bryan

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

