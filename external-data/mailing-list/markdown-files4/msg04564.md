---
title: "Re: changing bucket default settings"
description: ""
project: community
lastmod: 2011-09-01T09:27:11-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg04564"
mailinglist_parent_id: "msg04562"
author_name: "Giancarlo Frison"
project_section: "mailinglistitem"
sent_date: 2011-09-01T09:27:11-07:00
---


Thank you so much.

The snippet contains an error, but now it's working n\_val=1.

Thank you for the help to all,

Giancarlo Frison



On Thu, Sep 1, 2011 at 5:47 PM, Jonathan Langevin &lt;
jlange...@loomlearning.com&gt; wrote:

&gt; Appears you have the props in the wrong location.
&gt; Haven't tested, but try this:
&gt;
&gt; https://gist.github.com/1186453
&gt; \*
&gt;
&gt; 
&gt; Jonathan Langevin
&gt; Systems Administrator
&gt; Loom Inc.
&gt; Wilmington, NC: (910) 241-0433 - jlange...@loomlearning.com -
&gt; www.loomlearning.com - Skype: intel352
&gt; \*
&gt;
&gt;
&gt; On Thu, Sep 1, 2011 at 11:28 AM, Giancarlo Frison wrote:
&gt;
&gt;&gt; Sure, I've just added the default\_bucket\_props to the default app.config
&gt;&gt;
&gt;&gt; https://gist.github.com/1186421
&gt;&gt;
&gt;&gt; Giancarlo Frison
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; On Thu, Sep 1, 2011 at 5:21 PM, Dan Reverri  wrote:
&gt;&gt;
&gt;&gt;&gt; What does your app.config file look like? Can you provide a pastie/gist
&gt;&gt;&gt; of it?
&gt;&gt;&gt;
&gt;&gt;&gt; Thanks,
&gt;&gt;&gt; Dan
&gt;&gt;&gt;
&gt;&gt;&gt; Daniel Reverri
&gt;&gt;&gt;
&gt;&gt;&gt; Developer Advocate
&gt;&gt;&gt; Basho Technologies, Inc.
&gt;&gt;&gt; d...@basho.com
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; On Thu, Sep 1, 2011 at 7:48 AM, Giancarlo Frison wrote:
&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Hi Alexander,
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; I shutdown riak, delete data/ folder, add default settings entity on
&gt;&gt;&gt;&gt; app.config, finally started riak.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; I assumed that deleting data/ folder erase everything, isn't it?
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Thanks,
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Giancarlo Frison
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; On Thu, Sep 1, 2011 at 4:21 PM, Alexander Sicular 
&gt;&gt;&gt;&gt; wrote:
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Did you write to test before you changed the default?
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; @siculars
&gt;&gt;&gt;&gt;&gt; http://siculars.posterous.com
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Sent from my rotary phone.
&gt;&gt;&gt;&gt;&gt; On Sep 1, 2011 9:51 AM, "Giancarlo Frison"  wrote:
&gt;&gt;&gt;&gt;&gt; &gt; Hi Sean,
&gt;&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt;&gt; &gt; I setup only default\_bucket\_props. no custom buckets settings.
&gt;&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt;&gt; &gt; any hints?
&gt;&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt;&gt; &gt; Thanks!
&gt;&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt;&gt; &gt; Giancarlo Frison
&gt;&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt;&gt; &gt; On Thu, Sep 1, 2011 at 2:24 PM, Sean Cribbs  wrote:
&gt;&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt;&gt; &gt;&gt; Giancarlo,
&gt;&gt;&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt;&gt;&gt; &gt;&gt; Did you set a bucket property on the 'test' bucket before setting
&gt;&gt;&gt;&gt;&gt; the
&gt;&gt;&gt;&gt;&gt; &gt;&gt; defaults? If so, then the defaults at that time got merged with the
&gt;&gt;&gt;&gt;&gt; property
&gt;&gt;&gt;&gt;&gt; &gt;&gt; you set and stored in the ring state, making the new default props
&gt;&gt;&gt;&gt;&gt; have no
&gt;&gt;&gt;&gt;&gt; &gt;&gt; effect on them.
&gt;&gt;&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt;&gt;&gt; &gt;&gt; On Thu, Sep 1, 2011 at 4:02 AM, Giancarlo Frison &lt;
&gt;&gt;&gt;&gt;&gt; gfri...@chelab.com&gt;wrote:
&gt;&gt;&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt; Hi all,
&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt; I'm trying to change the bucket default settings on app.config, I
&gt;&gt;&gt;&gt;&gt; insert
&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt; these row find on http://wiki.basho.com/Configuration-Files.html :
&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt; {default\_bucket\_props, [{n\_val,1},
&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt; {allow\_mult,false},
&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt; {last\_write\_wins,false},
&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt; {precommit, []},
&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt; {postcommit, []},
&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt; {chash\_keyfun, {riak\_core\_util, chash\_std\_keyfun}},
&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt; {linkfun, {modfun, riak\_kv\_wm\_link\_walker, mapreduce\_linkfun}}]}
&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt; I just update n\_val to 1.
&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt; I shutdown riak, drop the data/ folder and start riak. Seems the
&gt;&gt;&gt;&gt;&gt; new
&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt; config isn't apply because I get n\_val=3 again:
&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt; curl http://localhost:8098/riak/test
&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; {"props":{"name":"test","n\_val":3,"allow\_mult":false,"last\_write\_wins":false,"precommit":[],"postcommit":[],"chash\_keyfun":{"mod":"riak\_core\_util","fun":"chash\_std\_keyfun"},"linkfun":{"mod":"riak\_kv\_wm\_link\_walker","fun":"mapreduce\_linkfun"},"old\_vclock":86400,"young\_vclock":20,"big\_vclock":50,"small\_vclock":10,"r":"quorum","w":"quorum","dw":"quorum","rw":"quorum"}}
&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt; How I can change the bucket settings?
&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt; Thanks
&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt; @gfrison
&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt;&gt;&gt; &gt;&gt; --
&gt;&gt;&gt;&gt;&gt; &gt;&gt; Sean Cribbs 
&gt;&gt;&gt;&gt;&gt; &gt;&gt; Developer Advocate
&gt;&gt;&gt;&gt;&gt; &gt;&gt; Basho Technologies, Inc.
&gt;&gt;&gt;&gt;&gt; &gt;&gt; http://www.basho.com/
&gt;&gt;&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;
&gt;&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

