---
title: "Re: 1.4.8, memory_backend max_memory not honored?"
description: ""
project: community
lastmod: 2014-06-24T10:28:54-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14366"
mailinglist_parent_id: "msg14365"
author_name: "Christian Dahlqvist"
project_section: "mailinglistitem"
sent_date: 2014-06-24T10:28:54-07:00
---


Hi Allen,

Apart from the memory backend, AAE will also be consuming memory as you
currently have it enabled. I would recommend running the test again with
anti entropy turned off to see how much impact that has.

Best regards,

Christian





On Tue, Jun 24, 2014 at 5:29 PM, Allen Landsidel 
wrote:

&gt; Sure Luke.
&gt;
&gt; The app.config is attached.
&gt;
&gt; Does that riak\_kv/940 sound like it could be responsible?
&gt;
&gt;
&gt; On 6/24/2014 12:15, Luke Bakken wrote:
&gt;
&gt;&gt; Hi Allen,
&gt;&gt;
&gt;&gt; There were some fixes to the memory backend in 1.4.9:
&gt;&gt; https://github.com/basho/riak/blob/1.4/RELEASE-NOTES.md
&gt;&gt;
&gt;&gt; Could you please provide your app.config file? I'd like to check it and
&gt;&gt; test out your scenario locally.
&gt;&gt;
&gt;&gt; --
&gt;&gt; Luke Bakken
&gt;&gt; CSE
&gt;&gt; lbak...@basho.com 
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; On Tue, Jun 24, 2014 at 8:59 AM, Allen Landsidel
&gt;&gt; &gt; wrote:
&gt;&gt;
&gt;&gt; Test cluster with 2 machines running 1.4.8 with the memory backend.
&gt;&gt; app\_config has ring\_creation\_size 64, max\_memory 4. If I understand
&gt;&gt; the documentation correctly this should result in a maximum memory
&gt;&gt; footprint (minus overhead) of 256M. Each node has 2G RAM, 2G of
&gt;&gt; swap. After running for a while constantly adding data, without
&gt;&gt; ever explicitly removing any, the memory footprint outstrips
&gt;&gt; physical ram and will eventually consume all available swap space
&gt;&gt; and be killed.
&gt;&gt;
&gt;&gt; Is this a known issue in 1.4.8 that's fixed in 1.4.9, or is there
&gt;&gt; other configuration settings that need adjusted to reduce the
&gt;&gt; footprint?
&gt;&gt;
&gt;&gt; Initially I had set it up to top out at 1GB but when it started
&gt;&gt; exhausting swap, I progressively reduced max\_memory until I arrived
&gt;&gt; where I am now, with no difference at all.
&gt;&gt;
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com 
&gt;&gt; http://lists.basho.com/\_\_mailman/listinfo/riak-users\_\_\_
&gt;&gt; lists.basho.com
&gt;&gt; 
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

