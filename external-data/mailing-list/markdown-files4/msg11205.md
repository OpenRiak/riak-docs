---
title: "Re: riak (1.3.1), increasing response times over time"
description: ""
project: community
lastmod: 2013-06-03T03:00:49-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11205"
mailinglist_parent_id: "msg11204"
author_name: "Denis Zhdanov"
project_section: "mailinglistitem"
sent_date: 2013-06-03T03:00:49-07:00
---


Hi Stefan,

Yes, we faced same issue after upgrade to 1.3.1.
I made rolling restart today - and ... it's a magic - PUT time was dropped
from 150 ms to 2 ms! - http://s15.postimg.org/3lrl036yz/put.png

Thanks for pointing to right direction, I hope that will be fixed soon -
it's not very comfortable to do rolling restarts...


2013/6/3 Stefan Mees 

&gt; We found a possible reason for this issue, please see
&gt; https://github.com/basho/bitcask/issues/85.
&gt;
&gt; /stefan
&gt;
&gt;
&gt; On Fri, May 31, 2013 at 12:01 PM, Stefan Mees wrote:
&gt;
&gt;&gt; One small addition, this is how a riak-admin top looks like on both nodes
&gt;&gt; (interval 60 seconds), the file\_server\_2 is mostly on top on the node
&gt;&gt; running since days (not the case for the restarted node).
&gt;&gt;
&gt;&gt;
&gt;&gt; 'riak@192.168.1.3'
&gt;&gt; 09:59:17
&gt;&gt; Load: cpu 154 Memory: total 515897 binary
&gt;&gt; 8979
&gt;&gt; procs 2254 processes 18506 code
&gt;&gt; 10245
&gt;&gt; runq 0 atom 493 ets
&gt;&gt; 54588
&gt;&gt;
&gt;&gt; Pid Name or Initial Func Time Reds
&gt;&gt; Memory MsgQ Current Function
&gt;&gt;
&gt;&gt; -------------------------------------------------------------------------------------------------------------------------------
&gt;&gt; &lt;6124.25.0&gt; file\_server\_2 '-' 24019408
&gt;&gt; 5760 0 gen\_server:loop/6
&gt;&gt; &lt;6124.765.0&gt; proc\_lib:init\_p/5 '-' 10355467
&gt;&gt; 152144 0 gen\_fsm:loop/7
&gt;&gt; &lt;6124.762.0&gt; proc\_lib:init\_p/5 '-' 7832373
&gt;&gt; 239928 0 gen\_fsm:loop/7
&gt;&gt; &lt;6124.2541.0&gt; proc\_lib:init\_p/5 '-' 5828045
&gt;&gt; 239856 0 gen\_fsm:loop/7
&gt;&gt; &lt;6124.2414.0&gt; proc\_lib:init\_p/5 '-' 5707701
&gt;&gt; 239496 0 gen\_fsm:loop/7
&gt;&gt; &lt;6124.2520.0&gt; proc\_lib:init\_p/5 '-' 5697744
&gt;&gt; 239928 0 gen\_fsm:loop/7
&gt;&gt; &lt;6124.2482.0&gt; proc\_lib:init\_p/5 '-' 5648096
&gt;&gt; 152072 0 gen\_fsm:loop/7
&gt;&gt; &lt;6124.774.0&gt; proc\_lib:init\_p/5 '-' 5605494
&gt;&gt; 239928 0 gen\_fsm:loop/7
&gt;&gt; &lt;6124.770.0&gt; proc\_lib:init\_p/5 '-' 5574736
&gt;&gt; 239784 0 gen\_fsm:loop/7
&gt;&gt; &lt;6124.817.0&gt; proc\_lib:init\_p/5 '-' 5546001
&gt;&gt; 152072 0 gen\_fsm:loop/7
&gt;&gt;
&gt;&gt;
&gt;&gt; 'riak@192.168.1.6'
&gt;&gt; 09:58:28
&gt;&gt; Load: cpu 115 Memory: total 450116 binary
&gt;&gt; 7790
&gt;&gt; procs 1979 processes 17254 code
&gt;&gt; 10234
&gt;&gt; runq 0 atom 493 ets
&gt;&gt; 36768
&gt;&gt;
&gt;&gt; Pid Name or Initial Func Time Reds
&gt;&gt; Memory MsgQ Current Function
&gt;&gt;
&gt;&gt; -------------------------------------------------------------------------------------------------------------------------------
&gt;&gt; &lt;6124.719.0&gt; proc\_lib:init\_p/5 '-' 3980782
&gt;&gt; 233736 0 gen\_fsm:loop/7
&gt;&gt; &lt;6124.2693.0&gt; proc\_lib:init\_p/5 '-' 3839931
&gt;&gt; 2546752 0 gen\_fsm:loop/7
&gt;&gt; &lt;6124.744.0&gt; proc\_lib:init\_p/5 '-' 3760570
&gt;&gt; 233736 0 gen\_fsm:loop/7
&gt;&gt; &lt;6124.745.0&gt; proc\_lib:init\_p/5 '-' 3683748
&gt;&gt; 233880 0 gen\_fsm:loop/7
&gt;&gt; &lt;6124.738.0&gt; proc\_lib:init\_p/5 '-' 3588014
&gt;&gt; 233736 0 gen\_fsm:loop/7
&gt;&gt; &lt;6124.2673.0&gt; proc\_lib:init\_p/5 '-' 3580173
&gt;&gt; 145880 0 gen\_fsm:loop/7
&gt;&gt; &lt;6124.2722.0&gt; proc\_lib:init\_p/5 '-' 3457024
&gt;&gt; 233736 0 gen\_fsm:loop/7
&gt;&gt; &lt;6124.748.0&gt; proc\_lib:init\_p/5 '-' 3384883
&gt;&gt; 233664 0 gen\_fsm:loop/7
&gt;&gt; &lt;6124.725.0&gt; proc\_lib:init\_p/5 '-' 3300414
&gt;&gt; 145952 0 gen:do\_call/4
&gt;&gt; &lt;6124.741.0&gt; proc\_lib:init\_p/5 '-' 3158177
&gt;&gt; 233736 0 gen\_fsm:loop/7
&gt;&gt;
&gt;
&gt;
&gt;
&gt; --
&gt; Stefan Mees | Software Engineer
&gt; www.wooga.com | stefan.m...@wooga.com
&gt;
&gt; Wooga GmbH | Saarbruecker Str. 38 | D-10405 Berlin
&gt; Sitz der Gesellschaft: Berlin; HRB 117846 B
&gt; Registergericht Berlin-Charlottenburg
&gt; Geschaeftsfuehrung: Jens Begemann, Philipp Moeser
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

