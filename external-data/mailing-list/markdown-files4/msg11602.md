---
title: "Re: riak_kv_memory_backend in production"
description: ""
project: community
lastmod: 2013-07-18T10:52:22-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11602"
mailinglist_parent_id: "msg11600"
author_name: "Jared Morrow"
project_section: "mailinglistitem"
sent_date: 2013-07-18T10:52:22-07:00
---


Dave,

Since Redis was designed with that use more in mind, I would guess a single
node of Redis would be faster than a single node of RIak with N=1. If you
still want to run Riak, you'd want to lower the ring size to maybe 8 so you
weren't running 64 vnodes on a single node. This would obviously make it
more difficult down the road to add nodes, but not impossible.

The only downside I can think of is what you already mentioned, dataloss
and availability loss if that node goes down.

-Jared




On Thu, Jul 18, 2013 at 11:32 AM, Dave Martorana  wrote:

&gt; In using riak\_kv\_memory\_backend as a replacement of sorts for Redis or
&gt; memcached, is there any serious problem with using a single node and an
&gt; n\_val of 1? I can’t (yet) afford 5 high-RAM servers for a caching layer,
&gt; and was looking to replace our memcached box with a Redis one. In the
&gt; interest of reducing disparate-technology reliance, running a single-node
&gt; riak\_kv\_memory\_backend instance would be preferable, unless there are
&gt; serious concerns \*aside\* from data loss.
&gt;
&gt; For us, it’s it’s still a LRU-destroy-model cache, and losing it to
&gt; machine failure is only a minor, temporary impediment. Any reason not to
&gt; run a single-node memory-only “cluster” as a replacement for a
&gt; single-machine memcached or Redis instance?
&gt;
&gt;
&gt; On Thu, Jul 18, 2013 at 11:23 AM, Guido Medina 
&gt; wrote:
&gt;
&gt;&gt; Forgot to mention, with N=2 should he be able to have only 4 nodes and
&gt;&gt; focus on RAM per node rather than 5?
&gt;&gt;
&gt;&gt; I know is not recommended but shouldn't N=2 reduce the minimum
&gt;&gt; recommended nodes to 4?
&gt;&gt;
&gt;&gt; Guido.
&gt;&gt;
&gt;&gt;
&gt;&gt; On 18/07/13 16:21, Guido Medina wrote:
&gt;&gt;
&gt;&gt; Since the data he is requiring to store is only "transient", would it
&gt;&gt; make sense to set N=2 for performance? Or will N=2 have the opposite effect
&gt;&gt; due to amount of nodes having such replica?
&gt;&gt;
&gt;&gt; Guido.
&gt;&gt;
&gt;&gt; On 18/07/13 16:15, Jared Morrow wrote:
&gt;&gt;
&gt;&gt; Kumar,
&gt;&gt;
&gt;&gt; We have a few customers who use the memory backend. The first example
&gt;&gt; I could find (with the help of our CSE team) uses the memory backend on 8
&gt;&gt; machines with 12gb of ram each.
&gt;&gt;
&gt;&gt; I know you are just testing right now, but we'd suggest using 5 node
&gt;&gt; minimum. With N=3 on a 3-node cluster you could be writing multiple
&gt;&gt; replicas to the same machine.
&gt;&gt;
&gt;&gt; Good luck in your testing,
&gt;&gt; -Jared
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; On Thu, Jul 18, 2013 at 8:38 AM, kpandey  wrote:
&gt;&gt;
&gt;&gt;&gt; Are there known production installation of riak that uses
&gt;&gt;&gt; riak\_kv\_memory\_backend. We have a need to store transient data just in
&gt;&gt;&gt; memory ( never hitting persistent store). I'm testing riak on aws with 3
&gt;&gt;&gt; node cluster and looks good so far. Just wanted to find out what kind
&gt;&gt;&gt; of
&gt;&gt;&gt; setup people are using in production.
&gt;&gt;&gt;
&gt;&gt;&gt; Thanks
&gt;&gt;&gt; Kumar
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; --
&gt;&gt;&gt; View this message in context:
&gt;&gt;&gt; http://riak-users.197444.n3.nabble.com/riak-kv-memory-backend-in-production-tp4028393.html
&gt;&gt;&gt; Sent from the Riak Users mailing list archive at Nabble.com.
&gt;&gt;&gt;
&gt;&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing 
&gt;&gt; listriak-users@lists.basho.comhttp://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;
&gt;&gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

