---
title: "Fwd: Errors when using basho_bench"
description: ""
project: community
lastmod: 2010-06-08T08:55:32-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg00528"
mailinglist_parent_id: "msg00526"
author_name: "Dan Reverri"
project_section: "mailinglistitem"
sent_date: 2010-06-08T08:55:32-07:00
---


Forwarding my reply to the mailing list.

---------- Forwarded message ----------
From: Dan Reverri 
Date: Tue, Jun 8, 2010 at 8:45 AM
Subject: Re: Errors when using basho\_bench
To: Germain Maurice 


Hi Germain,

The first error "{'function not exported',[{riak\_core\_bucket,defaults,[]},"
would occur when a bucket does not have a "chash\_keyfun" property defined.
This could occur if you have specified default bucket properties in your
app.config. There is a known issue where bucket properties defined in the
app.config file are not merged with the hard coded defaults:
http://issues.basho.com/show\_bug.cgi?id=123

I'm not sure why this issue would only occur when increasing the partition
size. Were other changes made to app.config?


The second error "{case\_clause,{error,timeout}},
[{riak\_kv\_wm\_raw,content\_types\_provided,2}"
occurs when a key/value pair has been inserted into Riak without a
content-type and retrieved via the REST interface. This can happen when
inserting key/value pairs with the native Erlang client or the protobuffs
client. These clients don't require that a content-type be set. I assume the
values in question were inserted by the basho bench utility so I will look
into how those values are inserted by basho bench.

Thanks,
Dan



On Tue, Jun 8, 2010 at 7:38 AM, Germain Maurice &lt;
germain.maur...@linkfluence.net&gt; wrote:

&gt; After viewing the demonstration of basho\_bench during the webinar of the
&gt; last week, we led some tests.
&gt; Here are some errors we are meeting while doing a benchmark with
&gt; basho\_bench.
&gt;
&gt; Big notice : when the ring partition size was 64, i never got this kind of
&gt; error (excepting a crash of a node, due to not enough memory i think, 1,5GB
&gt; RAM). But now, i have 128 partitions (see my other message on the riak ML
&gt; about the ring partition size) and these errors occurs.
&gt;
&gt;
&gt; This error occured multiple times :
&gt;
&gt; =ERROR REPORT==== 8-Jun-2010::16:21:06 ===
&gt; \*\* State machine &lt;0.937.0&gt; terminating
&gt; \*\* Last event in was timeout
&gt; \*\* When State == initialize
&gt; \*\* Data ==
&gt; {state,&lt;0.932.0&gt;,undefined,2,undefined,undefined,undefined,
&gt; 8594018,undefined,undefined,undefined,undefined,
&gt; undefined,undefined,60000,undefined,
&gt; {&lt;&lt;"test"&gt;&gt;,&lt;&lt;"25500"&gt;&gt;},
&gt; {chstate,'r...@10.0.0.40',
&gt; [{'r...@10.0.0.40',{64,63443225844}}],
&gt; {128,
&gt; [{0,'r...@10.0.0.40'},
&gt; {11417981541647679048466287755595961091061972992,
&gt; 'r...@10.0.0.41'},
&gt; {22835963083295358096932575511191922182123945984,
&gt; 'r...@10.0.0.40'},
&gt; {34253944624943037145398863266787883273185918976,
&gt; 'r...@10.0.0.41'},
&gt; {45671926166590716193865151022383844364247891968,
&gt; 'r...@10.0.0.40'},
&gt; {57089907708238395242331438777979805455309864960,
&gt; 'r...@10.0.0.41'},
&gt; [...]
&gt;
&gt; {1415829711164312202009819681693899175291684651008,
&gt; 'r...@10.0.0.40'},
&gt;
&gt; {1427247692705959881058285969449495136382746624000,
&gt; 'r...@10.0.0.41'},
&gt;
&gt; {1438665674247607560106752257205091097473808596992,
&gt; 'r...@10.0.0.40'},
&gt;
&gt; {1450083655789255239155218544960687058564870569984,
&gt; 'r...@10.0.0.41'}]},
&gt; {dict,0,16,16,8,80,48,
&gt;
&gt; {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
&gt; {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],
&gt; []}}}},
&gt; undefined}
&gt; \*\* Reason for termination =
&gt; \*\* {'function not exported',[{riak\_core\_bucket,defaults,[]},
&gt; {riak\_core\_util,chash\_key,1},
&gt; {riak\_kv\_get\_fsm,initialize,2},
&gt; {gen\_fsm,handle\_msg,7},
&gt; {proc\_lib,init\_p\_do\_apply,3}]}
&gt;
&gt;
&gt; After shutting down the benchmark we also got this following error,
&gt; multiple times too :
&gt;
&gt;
&gt; =ERROR REPORT==== 8-Jun-2010::16:19:28 ===
&gt; webmachine error: path="/riak/test/16028"
&gt; [{webmachine\_decision\_core,'-decision/1-lc$^1/1-1-',
&gt; [{error,
&gt; {error,
&gt; {case\_clause,{error,timeout}},
&gt; [{riak\_kv\_wm\_raw,content\_types\_provided,2},
&gt; {webmachine\_resource,resource\_call,3},
&gt; {webmachine\_resource,do,3},
&gt; {webmachine\_decision\_core,resource\_call,1},
&gt; {webmachine\_decision\_core,decision,1},
&gt; {webmachine\_decision\_core,handle\_request,2},
&gt; {webmachine\_mochiweb,loop,1},
&gt; {mochiweb\_http,headers,5}]}}]},
&gt; {webmachine\_decision\_core,decision,1},
&gt; {webmachine\_decision\_core,handle\_request,2},
&gt; {webmachine\_mochiweb,loop,1},
&gt; {mochiweb\_http,headers,5},
&gt; {proc\_lib,init\_p\_do\_apply,3}]
&gt;
&gt;
&gt; Any idea about these errors ?
&gt; No problem with Webmachine ?
&gt;
&gt; --
&gt; Germain Maurice
&gt; Administrateur Système/Réseau
&gt; Tel : +33.(0)1.42.43.54.33
&gt;
&gt; http://www.linkfluence.net
&gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

