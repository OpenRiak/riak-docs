---
title: "Re: Pros/Cons to not storing JSON"
description: ""
project: community
lastmod: 2011-06-14T09:51:21-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03694"
mailinglist_parent_id: "msg03693"
author_name: "Jonathan Langevin"
project_section: "mailinglistitem"
sent_date: 2011-06-14T09:51:21-07:00
---


How would we tell the m/r that the data type is BSON? Does the js engine
already have BSON support included?

- Jon Langevin -- sent from my Android phone
On Jun 14, 2011 12:47 PM, "Will Moss"  wrote:
&gt; I still haven't had a chance to try out using BSON for a map-reduce, but
in
&gt; general, parsing BSON is faster than parsing JSON and I'd imagine that's
&gt; true in Erlang as well. So, I'd assume using BSON is faster, but you know
&gt; what they say about assumptions...
&gt;
&gt; Will
&gt;
&gt;
&gt; On Tue, Jun 14, 2011 at 9:40 AM, Jonathan Langevin &lt;
&gt; jlange...@loomlearning.com&gt; wrote:
&gt;
&gt;&gt; Would the Riak standard map/reduce be able to deal with BSON properly, or
&gt;&gt; would map/reduce functionality be less efficient than if it were
inspecting
&gt;&gt; JSON objects?
&gt;&gt;
&gt;&gt; 
&gt;&gt; \* Jonathan Langevin
&gt;&gt; Systems Administrator
&gt;&gt; Loom Inc.
&gt;&gt; Wilmington, NC: (910) 241-0433 - jlange...@loomlearning.com -
&gt;&gt; www.loomlearning.com - Skype: intel352 \*
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; On Thu, Jun 9, 2011 at 5:26 PM, Will Moss  wrote:
&gt;&gt;
&gt;&gt;&gt; Hey Andrew,
&gt;&gt;&gt;
&gt;&gt;&gt; We're using BSON (bsonspec.org), because it stores binary (and other)
&gt;&gt;&gt; data types better than JSON and is also faster and more wire efficient
&gt;&gt;&gt; (sounds like about the same reasons you're considering leaving JSON).
There
&gt;&gt;&gt; are also libraries to parse BSON it in just about every language.
&gt;&gt;&gt;
&gt;&gt;&gt; I haven't tried using it in a Erlang map-reduce yet (we don't do
&gt;&gt;&gt; map-reduces for any of our production work), but there is a library out
&gt;&gt;&gt; there so it shouldn't be too hard.
&gt;&gt;&gt;
&gt;&gt;&gt; Will
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; On Thu, Jun 9, 2011 at 2:24 PM, Sean Cribbs  wrote:
&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Andrew,
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; I think you're on the right track here, but I might add that you'll
want
&gt;&gt;&gt;&gt; to have upgrade paths available if you're using records -- that is,
version
&gt;&gt;&gt;&gt; them -- so that you can evolve their structure over time. That could be
a
&gt;&gt;&gt;&gt; little hairy unless done carefully.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; That said, you could use BERT as the serialization format, making
&gt;&gt;&gt;&gt; implementing JavaScript M/R functions a little easier, and interop with
&gt;&gt;&gt;&gt; other languages.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Sean Cribbs 
&gt;&gt;&gt;&gt; Developer Advocate
&gt;&gt;&gt;&gt; Basho Technologies, Inc.
&gt;&gt;&gt;&gt; http://basho.com/
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; On Jun 9, 2011, at 5:14 PM, Andrew Berman wrote:
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; &gt; I am using Riak using the Erlang Client API (PB) and I was storing my
&gt;&gt;&gt;&gt; documents as JSON and then converting them to records when I pull them
out
&gt;&gt;&gt;&gt; of Riak, but I got to thinking that maybe this isn't the greatest
approach.
&gt;&gt;&gt;&gt; I'm thinking that maybe it's better to store documents just as the
record
&gt;&gt;&gt;&gt; itself (Erlang binary) and then just converting the binary back to the
&gt;&gt;&gt;&gt; record when I pull them from Riak. I was wondering what the pros/cons
are
&gt;&gt;&gt;&gt; to this approach. Here's my list so far:
&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt; &gt; Pros:
&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt; &gt; Native Erlang is stored, so less time to convert to the record
&gt;&gt;&gt;&gt; &gt; Better support for nested records
&gt;&gt;&gt;&gt; &gt; Smaller storage requirements and hence faster on the wire (?)
&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt; &gt; Cons:
&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt; &gt; Not readable through Rekon (or other utils) without modification
&gt;&gt;&gt;&gt; &gt; Can't use standard M/R functions which analyze the document (have to
&gt;&gt;&gt;&gt; write all custom functions using Erlang)
&gt;&gt;&gt;&gt; &gt; Not portable across languages
&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt; &gt; Thanks,
&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt; &gt; Andrew
&gt;&gt;&gt;&gt; &gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt;&gt;&gt; &gt; riak-users mailing list
&gt;&gt;&gt;&gt; &gt; riak-users@lists.basho.com
&gt;&gt;&gt;&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

