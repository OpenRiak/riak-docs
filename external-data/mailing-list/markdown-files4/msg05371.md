---
title: "Re: Python Client Protocol Buffers Error"
description: ""
project: community
lastmod: 2011-10-29T12:58:37-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05371"
mailinglist_parent_id: "msg05369"
author_name: "Jim Adler"
project_section: "mailinglistitem"
sent_date: 2011-10-29T12:58:37-07:00
---


Ried, 

Riak 1.0.1 from package, Ubuntu 11.04

Jim

From: Reid Draper 
Date: Sat, 29 Oct 2011 13:47:02 -0400
To: Jim Adler 
Cc: "riak-users@lists.basho.com" 
Subject: Re: Python Client Protocol Buffers Error

Jim,

What version of Riak are you using? Are you using a package or did you build
from source? If you built from source, what version of Erlang are you using?

Reid

On Sat, Oct 29, 2011 at 1:38 PM, Jim Adler  wrote:
&gt; I'm consistently seeing a key filter query fail with protocol buffers that
&gt; works fine with http. I've seen similar problems reported
&gt; (http://lists.basho.com/pipermail/riak-users\_lists.basho.com/2011-April/004
&gt; 002.html 
&gt;  .html&gt; ,
&gt; http://lists.basho.com/pipermail/riak-users\_lists.basho.com/2011-October/00
&gt; 6056.html 
&gt;  56.html&gt; ,
&gt; http://lists.basho.com/pipermail/riak-users\_lists.basho.com/2011-January/00
&gt; 3015.html 
&gt;  15.html&gt; ). I am using the latest python client 1.3.0 which should have
&gt; fixed some of the earlier reported problems.
&gt; 
&gt; Any ideas?
&gt; 
&gt; Jim
&gt; 
&gt; Here's the stack trace:
&gt; 
&gt; 2011-10-29 10:32:03 ERROR \_\_main\_\_,545 'Socket returned short packet
&gt; length \x00\x00\x00 - expected 4' Traceback (most recent call last):
&gt; File
&gt; "/Users/jadler/projects/dg/usr/jadler/projects/score/twitter/twitter\_crawl.
&gt; py", line 270, in main for result in query.run(timeout=6000000):
&gt; File
&gt; "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packa
&gt; ges/riak/mapreduce.py", line 211, in run result = t.mapred(self.\_inputs,
&gt; query, timeout)
&gt; File
&gt; "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packa
&gt; ges/riak/transports/pbc.py", line 311, in mapred msg\_code, resp =
&gt; self.recv\_msg()
&gt; File
&gt; "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packa
&gt; ges/riak/transports/pbc.py", line 365, in recv\_msg self.recv\_pkt()
&gt; File
&gt; "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packa
&gt; ges/riak/transports/pbc.py", line 410, in recv\_pkt format(nmsglen))
&gt; RiakError: 'Socket returned short packet length \x00\x00\x00 - expected 4'
&gt; 
&gt; 
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com



\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

