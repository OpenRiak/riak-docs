---
title: "Re: mr_queue gone wild"
description: ""
project: community
lastmod: 2011-06-29T00:59:56-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03859"
mailinglist_parent_id: "msg03850"
author_name: "Mathias Meyer"
project_section: "mailinglistitem"
sent_date: 2011-06-29T00:59:56-07:00
---


Sylvain,

you should not be using riak HEAD for anything that's close to your production 
environment. Development in Riak is in big flux right now, and it'll be hard 
for us to help you find the specific problem.

Could you please install Riak Search 0.14.2, best with a fresh installation, 
and try running this setup again to see if you get the same erroneous results? 
If you do, some more details on your data and the MapReduce jobs you're running 
would be great to reproduce and figure out the problem.

Mathias Meyer
Developer Advocate, Basho Technologies


On Mittwoch, 29. Juni 2011 at 00:41, Sylvain Niles wrote:

&gt; We recently started trying to move our production environment over to
&gt; riak and we're seeing some weird behavior that's preventing us from
&gt; doing so:
&gt; 
&gt; Running: riak HEAD from github as of last Friday, riak\_search turned
&gt; on with indexing of the problem bucket "events".
&gt; When we turn on our processes that start creating objects in the
&gt; bucket "events", the mr\_queue directory starts growing massively and
&gt; the riak process starts spending most of its time in io\_wait. With a
&gt; total of about 7000 objects (each is a ripple document that's got
&gt; maybe 10-20 lines of text in it) in the events bucket out bitcask dir
&gt; was ~240MB and the mr\_queue dir was 1.2GB. Something is going horribly
&gt; wrong.. Our logs only show flow\_timeouts for normal requests trying to
&gt; do simple map/reduce lookups. Any ideas where to look?
&gt; 
&gt; Thanks in advance,
&gt; Sylvain
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com (mailto:riak-users@lists.basho.com)
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com



\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

