---
title: "Re: Riak shuts down itself after couple of minutes"
description: ""
project: community
lastmod: 2015-08-07T09:00:31-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16381"
mailinglist_parent_id: "msg16380"
author_name: "Alex Moore"
project_section: "mailinglistitem"
sent_date: 2015-08-07T09:00:31-07:00
---


Hi Hao,

Looks like you might be running into an EMFILE error: 
http://docs.basho.com/riak/latest/community/faqs/logs/#riak-logs-contain-error-emfile-in-the-message
 


What’s the open files limit on your nodes?

Thanks,
Alex

&gt; On Aug 7, 2015, at 11:55 AM, 王昊  wrote:
&gt; 
&gt; I am running it on a single node.
&gt; 
&gt; Using Erlang riak client. I added a map bucket type, create a new index, set 
&gt; the index on a bucket, saved a few map data into the bucket. Then I did some 
&gt; search. All good. Then I can remember I tried a invalid search query like 
&gt; "title\_s\_register:[New movie one]" which shuts down Riak. But it may or may 
&gt; not be the first time Riak starts to shut down. I can't remember.
&gt; 
&gt; Now Riak itself shut down after running a few minutes. I must have done 
&gt; something really wrong. Any idea what I can do? I have tired to restore 
&gt; bitcask data folder from a backup from days ago. It didn't help. It still 
&gt; crashes.
&gt; 
&gt; The console.log is here : http://www.pastebin.ca/3092510 
&gt; 
&gt; The error begins at Line 172
&gt; 
&gt; Anyone can help? Much appreciated.
&gt; 
&gt; -Hao
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com



signature.asc
Description: Message signed with OpenPGP using GPGMail
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

