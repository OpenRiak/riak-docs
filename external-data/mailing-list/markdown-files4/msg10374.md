---
title: "Re: Keys not listed during vnode transfers"
description: ""
project: community
lastmod: 2013-03-11T16:08:31-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg10374"
mailinglist_parent_id: "msg10371"
author_name: "Daniel Iwan"
project_section: "mailinglistitem"
sent_date: 2013-03-11T16:08:31-07:00
---


I'm aware that listing keys is not for production.
I'm using it mainly during testing, which started to be unreliable after
changes described above.

What I was not expecting at all was that some of the keys won't be listed.
I'm not sure if that is stated in documentation to tell the truth.
To me it looks like it should be called 'listSomeKeys'

About alternatives.
Some time ago I did comparison of listing and 2i and MapReduce and
surprisingly listing was quickest.
I'm not sure why it was happening. I did similar tests today and what I got
is:

1000 keys, grouped with 2i into 10 equal groups, each value &lt; 1kB
Listing:
- via listkeys 276ms
- via keyindex $key: 255ms
- via 2i (10 calls), total 2480ms

So for that simple case 2i is 10 times slower.
Further test shows that 100k keys (100 groups, 1000 each) gives query
response between 250-5500ms.
Not good. It's almost silly NOT to use listing keys.

I may need to do that test on different hardware to compare. At the moment
I'm using just one 7200rpm HDD for Riak db.

Daniel
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

