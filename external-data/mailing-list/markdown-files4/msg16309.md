---
title: "Re: Riak C example segmentation fault"
description: ""
project: community
lastmod: 2015-07-23T18:01:15-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16309"
mailinglist_parent_id: "msg16306"
author_name: "Christopher Mancini"
project_section: "mailinglistitem"
sent_date: 2015-07-23T18:01:15-07:00
---


Hi Tom,

Unfortunately, I believe the C client was a project that was started with
the intention of knocking down two birds with one stone, official support
for C and wrap it as a C extension for PHP. The project has not been
updated in about a year, while other clients have seen a lot of updates in
that time.

I'm aware that we do not have any Basho resources towards moving this
client forward in the near future, which leaves me with essentially three
options: 1) Submit GH issues for each problem you encounter we can try to
queue up time to review them. 2) Submit contributions to the project by
fixing the issues and submitting a PR for each fix. 3) If time is of the
essence, consider using one of our officially supported clients [1] or this
C client that seems to have some recent momentum [2]

[1] http://docs.basho.com/riak/latest/dev/using/libraries/
[2] https://github.com/algernon/riack

I hope this helps.

Chris

On Tue, Jul 21, 2015 at 7:58 AM Tom Van Steenkiste &lt;
tdvsteen.vansteenki...@ugent.be&gt; wrote:

&gt; Dear all
&gt;
&gt;
&gt;
&gt; I’m trying to interface a C application with a Riak cluster. To do this, I
&gt; have set up a small two node cluster with Riak to which I’m already able to
&gt; communicate with HTTP requests. My next step is trying to run the
&gt; riak-c-client . However,
&gt; there are some problems with certain functions. If I execute the following
&gt; commands, the application never returns and gets stuck:
&gt;
&gt; ./riak\_c\_example --host hostname --port 8098 --server-info
&gt;
&gt; ./riak\_c\_example --host hostname --port 8098 --ping
&gt;
&gt;
&gt;
&gt; These commands get stuck on the ‘err = riak\_ping(cxn)’ and the ‘err =
&gt; riak\_serverinfo(cxn, &serverinfo\_response)’ lines. However, when I execute
&gt; the following HTTP request, I get a perfect response:
&gt;
&gt; curl http://hostname:8098/stats
&gt;
&gt; curl http://hostname:8098/ping
&gt;
&gt; If I try to put a key in the database via the c application, I get
&gt; segmentation faults. When executing the following command, I get a
&gt; segmentation fault upon execution of the line
&gt; ‘riak\_get\_response\_print(&print\_state, get\_response)’.
&gt;
&gt; ./riak\_c\_example --host hostname --port 8098 --put --key “testKey” --value
&gt; “testValue” --bucket “testBucket”
&gt;
&gt; The versions of the software I use are:
&gt;
&gt; Riak 2.1.1 which runs on two CentOS 7 servers
&gt; OS of riak\_c\_example: Scientific Linux CERN SLC 6.6
&gt;
&gt; gcc: 4.8.2 and 4.4.7 (tried both)
&gt;
&gt; The configuration files all contain their default values, I only changed
&gt; the hostnames and restricted the ports with the following two lines as to
&gt; not have to open up the entire firewall:
&gt;
&gt;
&gt;
&gt; erlang.distribution.port\_range.minimum = 6000
&gt; erlang.distribution.port\_range.maximum = 7000
&gt;
&gt;
&gt;
&gt; If needed, I can give more information on the configuration. Do you have
&gt; any idea what might be the source of these problems and how to fix them?
&gt;
&gt; Thank you in advance
&gt;
&gt; Kind regards
&gt; Tom Van Steenkiste
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

