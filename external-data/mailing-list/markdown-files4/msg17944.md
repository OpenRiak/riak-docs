---
title: "Re: cluster clear without stopping node"
description: ""
project: community
lastmod: 2017-02-09T06:29:06-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17944"
mailinglist_parent_id: "msg17940"
author_name: "Magnus Kessler"
project_section: "mailinglistitem"
sent_date: 2017-02-09T06:29:06-08:00
---


On 8 February 2017 at 21:33, Daniel Miller  wrote:

&gt; According to the docs
&gt; 
&gt; “Running [riak-admin cluster clear] will also stop the current node in
&gt; addition to clearing any staged changes.
&gt;
&gt; Is there a way to clear the current cluster plan without stopping the
&gt; current node?
&gt;
Hi Daniel,

That statement from the docs is wrong. [riak-admin cluster clear] does not
stop the current node in general. It may stop the node if the command is
run on a joining node, and the join is cancelled, but should be safe to run
on all other nodes. I have reached out to the documentation team to get
this fixed.

Even better (shameless feature request) would be to have a way to “replan”
&gt; the current plan. That is, clear the plan and then redo the currently
&gt; planned actions with a single command. Often I have a plan that ends up
&gt; with an uneven ring allocation and I’ve noticed that I can sometimes get a
&gt; better allocation if I clear and re-plan several times, but this is tedious.
&gt;
You can run [riak-admin cluster plan] more than once before [riak-admin
cluster commit], and it may generate a different transition plan every time
depending on cluster state.


&gt; Thanks!
&gt; Daniel​
&gt;
Kind Regards,

Magnus


-- 
Magnus Kessler
Client Services Engineer
Basho Technologies Limited

Registered Office - 8 Lincoln’s Inn Fields London WC2A 3BP Reg 07970431
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

