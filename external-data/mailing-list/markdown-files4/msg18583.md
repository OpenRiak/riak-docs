---
title: "Re: [ANN] Riak 2.9.0 - Release Candidate 1 Available"
description: ""
project: community
lastmod: 2019-02-01T05:47:23-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg18583"
mailinglist_parent_id: "msg18582"
author_name: "Fred Dushin"
project_section: "mailinglistitem"
sent_date: 2019-02-01T05:47:23-08:00
---


Wouldn't it be better to do a `riak-admin replace`? Leave could be problematic 
if there are other nodes in the cluster that are under-provisioned (disk space, 
for example). Plus a leave and add would move the data around the cluster 
twice, for each node in the cluster, whereas a replace would just move the data 
to the new node once, no?

-Fred

&gt; On Feb 1, 2019, at 8:32 AM, Nicholas Adams  wrote:
&gt; 
&gt; Hi Guido,
&gt; Although Martin would be the most qualified to comment on this, I believe you 
&gt; should be able to do a slow migration.
&gt; 
&gt; Choose target node.
&gt; Make target node leave cluster as in a full “riak-admin cluster leave”, 
&gt; commit and wait for transfers to finish.
&gt; Set up target node with leveled and TicTac AAE.
&gt; Have node rejoin cluster and wait for transfers to finish.
&gt; Repeat with every single node in the cluster until all have been done.
&gt; 
&gt; Unless you are using specific features restricted to your current backend 
&gt; then Riak will usually put up with multiple backends in the same cluster.
&gt; 
&gt; Failing that, I’d go with Bryan’s suggestion to use MDC to replicate from 
&gt; your existing cluster to a separate cluster that is using the leveled backend 
&gt; and TicTac AAE.
&gt; 
&gt; Either way, be sure to try in a dev environment first and only proceed when 
&gt; you are happy with the process.
&gt; 
&gt; Best regards,
&gt; 
&gt; Nicholas
&gt; 
&gt; From: riak-users  On Behalf Of Bryan Hunt
&gt; Sent: 01 February 2019 19:22
&gt; To: Guido Medina 
&gt; Cc: riak-users@lists.basho.com
&gt; Subject: Re: [ANN] Riak 2.9.0 - Release Candidate 1 Available
&gt; 
&gt; Replication would be the optimum solution - in theory anything can be 
&gt; implemented - but it would be enormously painful in comparison to simply 
&gt; standing up a new cluster.
&gt; 
&gt; 
&gt; On 1 Feb 2019, at 10:14, Guido Medina  &gt; wrote:
&gt; 
&gt; Hi all,
&gt; 
&gt; Nice work on the upcoming 2.9.0 release, I have a quick question:
&gt; Will it be possible to switch from the eleveldb to the new leveled backend 
&gt; and Tictac AAE for an existing cluster?
&gt; 
&gt; In case it is not possible we are thinking to use the new replication and 
&gt; move to a brand new cluster.
&gt; 
&gt; Kind regards,
&gt; Guido.
&gt; 
&gt; On 30/01/2019 15:23, Nicholas Adams wrote:
&gt; Dear All,
&gt; Following on from Martin’s email, the initial builds of the KV 2.9.0rc1 
&gt; packages are complete. Currently we are limited to Redhat/CentOS 6 and 7 as 
&gt; well as Ubuntu Bionic. We shall be adding more packages over the next few 
&gt; days. Please see https://files.tiot.jp/riak/kv/2.9/2.9.0rc1/ 
&gt;  to download.
&gt; 
&gt; Disclaimer: This is a release candidate. Please do not use in production as 
&gt; we expect bugs and abnormal functionality may occur in certain conditions. 
&gt; However, please test this lots and place any issues on github so that they 
&gt; can be fixed before the final release.
&gt; 
&gt; Best regards,
&gt; 
&gt; Nicholas
&gt; 
&gt; From: riak-users  
&gt;  On Behalf Of Martin Sumner
&gt; Sent: 30 January 2019 21:07
&gt; To: riak-users@lists.basho.com 
&gt; Subject: [ANN] Riak 2.9.0 - Release Candidate 1 Available
&gt; 
&gt; All,
&gt; 
&gt; There is now a publicly available release candidate for Riak 2.9.0 for users 
&gt; to test in their own environment. The release candidate is available to 
&gt; build from source here - https://github.com/basho/riak/tree/riak-2.9.0rc1 
&gt; 
&gt; 
&gt; There is only one significant change to Riak 2.2.6 for users maintaining 
&gt; existing configuration settings. The release adds the `vnode\_soft\_limits` 
&gt; feature that aims to reduce high percentile PUT latency, by checking the 
&gt; outstanding work queue for a vnode before selecting it as a coordinator of a 
&gt; PUT.
&gt; 
&gt; With additional configuration, there are two major features added in riak 
&gt; 2.9.0:
&gt; 
&gt; - Support for the leveled backend (as an alternative to bitcask or eleveldb), 
&gt; to provide for improved throughput in some use cases and lower tail latency 
&gt; in some use cases 
&gt; -https://github.com/martinsumner/riak\_testing\_notes/blob/master/Release%202.9%20-%20Choosing%20a%20Backend.md
&gt; 
&gt; ;
&gt; - Support for a new anti-entropy mechanism (Tictac AAE) as an alternative for 
&gt; the existing anti-entropy mechanism (to provide both intra-cluster and 
&gt; inter-cluster data repair, with greater flexibility and reliability).
&gt; 
&gt; The release also adds support for:
&gt; - The riak\_core node\_worker\_pool - which provides a mechanism for queueing 
&gt; background jobs and queries to control the resource consumed on the node by 
&gt; different queries. No pre-existing features will use the node-worker\_pool.
&gt; - AAE folds which allow for both cluster-wide AAE queries (e.g. produce a 
&gt; merkle tree representing all or a partial range of the cluster data), and 
&gt; administrative queries (e.g. discovering object sizes and sibling counts 
&gt; within the database depending on bucket name, key range and last modified 
&gt; date). AAE folds depend on the Tictac AAE feature being activated.
&gt; - An interface to request re-replication of an object (where variances 
&gt; between clusters have been discovered).
&gt; 
&gt; Further details of the release, and the release plan in general can be found 
&gt; here - 
&gt; https://github.com/basho/riak/blob/develop-2.9/doc/Release%202.9%20Series%20-%20Overview.md
&gt; 
&gt; .
&gt; 
&gt; It is hoped that there will be a short period of about 1 month before the 
&gt; release candidate will be converted into a formal release. The period will 
&gt; allow for more testing by Riak users, and also there will be further enhanced 
&gt; testing of the new modules with the help of Quviq (http://www.quviq.com/ 
&gt; ). 
&gt; 
&gt; There will follow additional releases under the 2.9 banner, targeted at 
&gt; enhancing both new and existing inter-cluster replication features. In 
&gt; parallel to this, work will continue on Release 3.0 which is intended to 
&gt; modernise the OTP/rebar platform used by Riak.
&gt; 
&gt; Thanks to all those who contributed to the release. Apologies to those who 
&gt; have been kept waiting over the past few months as finalising the changes and 
&gt; completing the testing has dragged on.
&gt; 
&gt; Regards
&gt; 
&gt; Martin
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com 
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com 
&gt; 
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com 
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com 
&gt; 
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

