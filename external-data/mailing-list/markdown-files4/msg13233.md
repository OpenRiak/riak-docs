---
title: "Re: How to handle a failed drive"
description: ""
project: community
lastmod: 2013-12-12T11:49:28-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13233"
mailinglist_parent_id: "msg13232"
author_name: "Luke Bakken"
project_section: "mailinglistitem"
sent_date: 2013-12-12T11:49:28-08:00
---


Hi Timo,

Since you have the original ring from the node, all you should have to
do is replace the drive, bring Riak up using the same settings as
before (in app.config/vm.args), and use the method here to force
read-repair to repopulate the data:

http://docs.basho.com/riak/latest/ops/running/recovery/repairing-indexes/#Running-a-Repair

Note that this operation could be expensive so it's best to do it
during an off-peak time. If transfers are taking too much time, you
can use the "riak-admin transfer-limit" command to increase transfer
rate.
--
Luke Bakken
CSE
lbak...@basho.com


On Thu, Dec 12, 2013 at 10:59 AM, Timo Gatsonides  wrote:
&gt;
&gt; I’m looking for advice what the best way forward would be with a failed 
&gt; drive. I have a cluster of 6 machines. The data partition (not including the 
&gt; ring file, only the LevelDB data) is on a separate drive. On one of the 
&gt; servers that drive has crashed and is replaced by a new drive.
&gt;
&gt; What would be the best way to recover (the server still thinks it’s part of 
&gt; the cluster but obviously doesn’t really have any partitions)? Do a 
&gt; “force-remove”, immediately (or some? time later) followed by a “join” again?
&gt;
&gt; Kind regards,
&gt; Timo
&gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

