---
title: "Re: Riak / Search via Python Client, no Results from Server"
description: ""
project: community
lastmod: 2012-05-23T11:25:24-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07515"
mailinglist_parent_id: "msg07512"
author_name: "Shuhao Wu"
project_section: "mailinglistitem"
sent_date: 2012-05-23T11:25:24-07:00
---


Yes. You have to do search-cmd install bucketname I believe

Shuhao
On May 23, 2012 11:20 AM,  wrote:

&gt; Thanks Sean for the hint .. sure, you right, that wildcard syntax was too
&gt; short !
&gt;
&gt; Still like this, the main issue remains. The search function is not yet
&gt; activated at the server side, even having the parameter set to true in the
&gt; /etc/app.config file. Whatever syntax sent to the server is not
&gt; checked, nor validated, nor executed. I've restarted the server with bin/riak
&gt; stop and bin/riak start .
&gt;
&gt; The same error also shows up at the sample bucket 'user' throwing 0
&gt; results (with no error message). I'm using the git version built from
&gt; source.
&gt;
&gt; \*at rel/riak/etc/app.config \*
&gt; %% Riak Search Config
&gt; {riak\_search, [
&gt; %% To enable Search functionality set this 'true'.
&gt; {enabled, true}
&gt; ]},
&gt;
&gt; Any further settings required to activate the server-side search function?
&gt;
&gt; \*Log\*
&gt; C:\Python\myprojects\riak&gt;python basic\_search.py
&gt; starts at : 2012-05-23 12:12:31.718000
&gt; How many keys in the bucket: 500
&gt; Resultset: []
&gt;
&gt; \*Source\*:
&gt; search\_string = 'cEDO:[aaaa TO ZZZZ]'
&gt; bucketname = 'ramtest'
&gt; startd = datetime.now()
&gt; print "starts at : " + str(startd)
&gt; start = time()
&gt; #
&gt; try:
&gt; client = riak.RiakClient(host='zbra')
&gt; data\_bucket = client.bucket(bucketname)
&gt; mykeys = data\_bucket.get\_keys()
&gt; howmany = len(mykeys)
&gt; print "How many keys in the bucket: "+ str(howmany)
&gt; resultset = client.search(bucketname,
&gt; search\_string).map('Riak.mapValuesJson').run()
&gt; print "Resultset: " + str(resultset)
&gt;
&gt;
&gt; Regards,
&gt; Claude
&gt;
&gt; \*
&gt; Claude Falbriard
&gt; Certified IT Specialist L2 - Middleware
&gt; AMS Hortolândia / SP - Brazil
&gt; phone: +55 19 9837 0789
&gt; cell: +55 13 8117 3316
&gt; e-mail: clau...@br.ibm.com
&gt; \*
&gt;
&gt;
&gt;
&gt; From: Sean Cribbs 
&gt; To: clau...@br.ibm.com
&gt; Cc: riak-users@lists.basho.com
&gt; Date: 22/05/2012 17:52
&gt; Subject: Re: Riak / Search via Python Client, no Results from
&gt; Server
&gt; ------------------------------
&gt;
&gt;
&gt;
&gt; Claude,
&gt;
&gt; Generally your terms in wildcard queries need to be at least two or three
&gt; characters (I don't remember which), so either way A\* is not going to work
&gt; as a search.
&gt;
&gt; On Tue, May 22, 2012 at 4:46 PM, &lt;\*clau...@br.ibm.com\*&gt;
&gt; wrote:
&gt; Dear colleagues.
&gt;
&gt; Not able to run a pattern search through the Python query. The server
&gt; search option was enabled with the\* true\* setting in the app.config file
&gt; (line 165) and the server was restarted. Checking the Riak console log
&gt; below, I see the search being started, but no results are returned to the
&gt; client. My version is "git" built from source.
&gt; \*
&gt; Console Log\*
&gt; 2012-05-22 15:07:50.853 [info] &lt;0.7.0&gt; Application riak\_search started on
&gt; node '\*riak@172.24.200.158\* '
&gt; 2012-05-22 15:07:50.854 [info] &lt;0.7.0&gt; Application basho\_stats started on
&gt; node '\*riak@172.24.200.158\* '
&gt; 2012-05-22 15:07:50.865 [info] &lt;0.7.0&gt; Application runtime\_tools started
&gt; on node '\*riak@172.24.200.158\* '
&gt; 2012-05-22 15:07:50.866 [info] &lt;0.7.0&gt; Application public\_key started on
&gt; node '\*riak@172.24.200.158\* '
&gt; 2012-05-22 15:07:50.882 [info] &lt;0.7.0&gt; Application ssl started on node '\*
&gt; riak@172.24.200.158\* '
&gt; 2012-05-22 15:07:50.944 [info]
&gt; &lt;0.1558.0&gt;@riak\_core:wait\_for\_application:390 Wait complete for application
&gt; riak\_search (0 seconds)
&gt; 2012-05-22 15:07:51.034 [info] &lt;0.1490.0&gt;@riak\_core:wait\_for\_service:410
&gt; Wait complete for service riak\_search (0 seconds)
&gt; \*
&gt; Source code: Read all data starting with Capital Letter A, cEDO is the
&gt; data field name \*
&gt; try:
&gt; client = riak.RiakClient(host='xxxxxxxx')
&gt; data\_bucket = client.bucket(bucketname)
&gt; mykeys = data\_bucket.get\_keys()
&gt; howmany = len(mykeys)
&gt; print "How many keys in the bucket: "+ str(howmany)
&gt; search\_query = client.search(bucketname, 'cEDO:A\*')
&gt; print "search query built"
&gt; resultset = search\_query.run()
&gt; print "result entries found: " + str(len(resultset))
&gt; \*
&gt; Processing log: \*
&gt; How many keys in the bucket: 500
&gt; search query built
&gt; result entries found: 0
&gt;
&gt; No further error message is thrown.
&gt;
&gt; ps .. Also the basic sample from the Python client documentation (bucket=
&gt; 'user') shows the same results, 0 entries found by the serach.
&gt; \*
&gt; http://basho.github.com/riak-python-client/tutorial.html#using-search\*
&gt;
&gt; Thanks in advance for your insights.\* What's missing to start the Search
&gt; feature, or is something missing in the Lucene syntax ? \*
&gt;
&gt; Regards,
&gt; Claude
&gt; \*
&gt;
&gt; Claude Falbriard
&gt; Certified IT Specialist L2 - Middleware
&gt; AMS Hortolândia / SP - Brazil
&gt; phone: \*\*+55 19 9837 0789\* &lt;%2B55%2019%209837%200789&gt;\*
&gt; cell: \*\*+55 13 8117 3316\* &lt;%2B55%2013%208117%203316&gt;\*
&gt; e-mail: \*\*clau...@br.ibm.com\* 
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list\*
&gt; \*\*riak-users@lists.basho.com\* \*
&gt; \*\*http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com\*
&gt;
&gt;
&gt;
&gt;
&gt; --
&gt; Sean Cribbs &lt;\*s...@basho.com\* &gt;
&gt; Software Engineer
&gt; Basho Technologies, Inc.
&gt; \*http://basho.com/\* 
&gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

