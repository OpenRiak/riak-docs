---
title: "Re: riak crash"
description: ""
project: community
lastmod: 2010-11-29T10:56:41-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01665"
mailinglist_parent_id: "msg01657"
author_name: "francisco treacy"
project_section: "mailinglistitem"
sent_date: 2010-11-29T10:56:41-08:00
---


2010/11/29 David Smith :
&gt; It looks like you had an interrupted syscall (!!) that wasn't handled
&gt; by Erlang (which I find rather hard to believe). What version of Riak
&gt; and what operating system are you using, please?

 =&gt; bin/riaksearch-admin status
1-minute stats for 'riaksea...@127.0.0.1'
-------------------------------------------
vnode gets : 0
vnode\_puts : 0
read\_repairs : 0
vnode\_gets\_total : 23751
vnode\_puts\_total : 16458
node\_gets : 0
node\_gets\_total : 7997
node\_get\_fsm\_time\_mean : undefined
node\_get\_fsm\_time\_median : undefined
node\_get\_fsm\_time\_95 : undefined
node\_get\_fsm\_time\_99 : undefined
node\_get\_fsm\_time\_100 : undefined
node\_puts : 0
node\_puts\_total : 5526
node\_put\_fsm\_time\_mean : undefined
node\_put\_fsm\_time\_median : undefined
node\_put\_fsm\_time\_95 : undefined
node\_put\_fsm\_time\_99 : undefined
node\_put\_fsm\_time\_100 : undefined
read\_repairs\_total : 0
cpu\_nprocs : 89
cpu\_avg1 : 228
cpu\_avg5 : 120
cpu\_avg15 : 77
mem\_total : 3827992000
mem\_allocated : 3392196000
disk : [{"/",155954992,88},{"/Volumes/backup",243862672,47}]
nodename : 'riaksea...@127.0.0.1'
connected\_nodes : []
sys\_driver\_version : &lt;&lt;"1.5"&gt;&gt;
sys\_global\_heaps\_size : 0
sys\_heap\_type : private
sys\_logical\_processors : 2
sys\_otp\_release : &lt;&lt;"R13B04"&gt;&gt;
sys\_process\_count : 468
sys\_smp\_support : true
sys\_system\_version : &lt;&lt;"Erlang R13B04 (erts-5.7.5) [source] [64-bit]
[smp:2:2] [rq:2] [async-threads:64] [hipe] [kernel-poll:true]"&gt;&gt;
sys\_system\_architecture : &lt;&lt;"i386-apple-darwin10.3.0"&gt;&gt;
sys\_threads\_enabled : true
sys\_thread\_pool\_size : 64
sys\_wordsize : 8
ring\_members : ['riaksea...@127.0.0.1']
ring\_num\_partitions : 64
ring\_ownership : &lt;&lt;"[{'riaksea...@127.0.0.1',64}]"&gt;&gt;
ring\_creation\_size : 64
storage\_backend : riak\_kv\_bitcask\_backend
pbc\_connects\_total : 0
pbc\_connects : 0
pbc\_active : 0
luwak\_version : &lt;&lt;"1.0"&gt;&gt;
skerl\_version : &lt;&lt;"0.1"&gt;&gt;
riak\_solr\_version : &lt;&lt;"0.13.0"&gt;&gt;
riak\_search\_version : &lt;&lt;"0.13.0"&gt;&gt;
merge\_index\_version : &lt;&lt;"0.13.0"&gt;&gt;
riak\_search\_core\_version : &lt;&lt;"0.13.0"&gt;&gt;
riak\_kv\_version : &lt;&lt;"0.13.0"&gt;&gt;
bitcask\_version : &lt;&lt;"1.1.4"&gt;&gt;
riak\_core\_version : &lt;&lt;"0.13.0"&gt;&gt;
qilr\_version : &lt;&lt;"0.13.0"&gt;&gt;
luke\_version : &lt;&lt;"0.2.1"&gt;&gt;
webmachine\_version : &lt;&lt;"1.7.2"&gt;&gt;
mochiweb\_version : &lt;&lt;"1.7.1"&gt;&gt;
erlang\_js\_version : &lt;&lt;"0.4.1"&gt;&gt;
runtime\_tools\_version : &lt;&lt;"1.8.3"&gt;&gt;
crypto\_version : &lt;&lt;"1.6.4"&gt;&gt;
os\_mon\_version : &lt;&lt;"2.2.5"&gt;&gt;
sasl\_version : &lt;&lt;"2.1.9"&gt;&gt;
stdlib\_version : &lt;&lt;"1.16.5"&gt;&gt;
kernel\_version : &lt;&lt;"2.13.5"&gt;&gt;

That is, a plain Riak Search (0.13) downloaded from the Basho
downloads section (not any particular commit on Github).

&gt;
&gt; Also, this could be related to ulimit -n -- what do you set that to?
&gt;

 =&gt; ulimit -n
2048

I cranked it up to prevent those errors caused by not enough available
open fds...

About the disk warning, I think it's safe to ignore?

 =&gt; df -h
Filesystem Size Used Avail Capacity Mounted on
/dev/disk0s2 149Gi 129Gi 19Gi 88% /

Thanks,

Francisco


&gt;
&gt; On Mon, Nov 29, 2010 at 11:28 AM, francisco treacy
&gt;  wrote:
&gt;&gt; Some days ago, Riak crashed on my dev machine. All I know is that
&gt;&gt; several concurrent writes could have been happening at the time of the
&gt;&gt; crash (possibly around 30).
&gt;&gt;
&gt;&gt; https://gist.github.com/717015
&gt;&gt;
&gt;&gt; Could somebody enlighten me here... what exactly went wrong?
&gt;&gt;
&gt;&gt; Thanks,
&gt;&gt; Francisco
&gt;&gt;
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;
&gt;

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

