---
title: "Re: Rebalancing (newbie alert)"
description: ""
project: community
lastmod: 2010-05-18T16:23:50-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg00413"
mailinglist_parent_id: "msg00410"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2010-05-18T16:23:50-07:00
---


&gt; 
&gt; 1. I vaguely recall one of Riak authors replying to someone here that it is 
&gt; not possible to know where particular bucket resides, i.e. at which vnode.
&gt; 
&gt; If so, how can one say after one physical node crashed & burned (say, its 
&gt; hard drive failed totally) or another physical node was added that key/bucket 
&gt; pairs have indeed rebalanced across entire logical "ring"?
&gt; 

Riak automatically replicates your data across the cluster, so if a node goes 
down, the data should still be available (assuming you are making more than one 
replica). To the application you build that uses Riak, where the data is stored 
in the cluster is opaque. You can treat one node the same as any other. In 
addition, hinted handoff and sloppy quorums ensure that Riak can still function 
despite node failures.

When adding or removing nodes from the cluster, it starts a state called 
"handoff" in which ownership/claim of the various partitions is transferred to 
the new node (or from the leaving node to the remaining ones). This may take 
time depending on the amount of data in the cluster.

&gt; Is it possible to watch such process of rebalancing via some interface?
&gt; 
&gt; 2. is it possible to obtain information how many "copies" particular bucket 
&gt; has in the ring? I don't mean configuration information, but in fact the 
&gt; situation when one physical node has crashed.
&gt; 

No, you cannot directly. In general, you should not worry about how many 
replicas are available, unless you're in a situation where you have massive 
failures. Riak's standard operating mode is to remain available for reads and 
writes, even in the case of node outages. If you receive a "not found" 
response where you don't expect one (in the case of a failure), lower the R 
value (read quorum) to get a successful read.

&gt; 3. Backups. Is it safe to just dump a live filesystem (e.g. using 
&gt; dump/restore) of a physical riak node and that means that I have a reliable 
&gt; backup? Or is like files of an opened relational database - might work but 
&gt; this is not the way it should be done?
&gt; 
&gt; Is there some backup & restore utility for a physical riak node that allows 
&gt; to quickly dump its buckets into, say, one huge backup file?
&gt; 


Quickly is relative, of course. You can dump the data from a node or an entire 
cluster via `riak-admin backup`.

Sean Cribbs 
Developer Advocate
Basho Technologies, Inc.
http://basho.com/

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

