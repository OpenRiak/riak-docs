---
title: "Re: Structure of Erlang MR Arg"
description: ""
project: community
lastmod: 2013-02-26T06:17:35-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg10244"
author_name: "Bryan Fink"
project_section: "mailinglistitem"
sent_date: 2013-02-26T06:17:35-08:00
---


Doh … sorry this thread ended up lost in the stack. Response below…

On Feb 14, 2013, at 10:58 AM, Jeremiah Peschka  
wrote:
&gt; In the MapReduce Implementation docs [1], it looks like the Arg parameter of 
&gt; an Erlang MR phase is not a single argument but is, in fact, a proplist of 
&gt; Erlang terms, am I correct in assuming that this is the case?
&gt; 
&gt; And, if this is the case, would the JSON submitted to Riak look something 
&gt; like this:
&gt; 
&gt; {"reduce":{"language":"erlang",
&gt; "module":"riak\_kv\_mapreduce",
&gt; "function":"reduce\_count\_inputs", 
&gt; "arg":{"do\_prereduce":true,
&gt; "reduce\_phase\_batch\_size": 250
&gt; }
&gt; }
&gt; }

Your read of the doc is mostly correct. The arg is whatever you want it to be. 
However, the MR interface has recently begun to inspect the arg itself to find 
tuning parameters. What it's looking for is exactly what you suggested: a JSON 
object with those fields in it. The idea is that the object could also contain 
other fields, allowing other data to be passed to the function, as usual. Some 
of the built-in functions in riak\_kv\_mapreduce.erl need to be updated to 
support an arg in this format; sorry for the mixed message.

HTH,
Bryan


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

