---
title: "Re: Riak and no of clients limit?"
description: ""
project: community
lastmod: 2010-09-04T15:37:58-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01025"
mailinglist_parent_id: "msg01024"
author_name: "OJ Reeves"
project_section: "mailinglistitem"
sent_date: 2010-09-04T15:37:58-07:00
---


Hi everyone,

Excuse me jumping on the bandwagon, but I was thinking of doing something
slightly different and would be keen to hear everyone's thoughts.

The plan was to create a Riak client connection for every request coming in
(maintained for the lifetime of the request). That connection would connect
to any one of the nodes in the Riak cluster (via some simple algo such
round-robin). I was also thinking of building something into this mechanism
which would be able to manage an open list of potential target nodes to
connect to and handle when new nodes join the cluster or when nodes go
offline in an effort to make sure that the web application will "always"
know of a valid node to connect to.

Does this seem like overkill? Would the effort in implementing such
behaviour be worth the reward?

Many thanks for any insights.

OJ


On Sun, Sep 5, 2010 at 7:59 AM, Seth Falcon  wrote:

&gt; On Sat, Sep 4, 2010 at 7:18 AM, Justin Sheehy  wrote:
&gt; &gt; Hello, Senthilkumar.
&gt; &gt;
&gt; &gt; On Fri, Sep 3, 2010 at 4:28 PM, Senthilkumar Peelikkampatti wrote:
&gt; &gt;
&gt; &gt;&gt; I am using Riak with distributed Erlang and I wanted to know
&gt; what's
&gt; &gt;&gt; the limit on # of riak clients (I used it before erlang pb client, so
&gt; yet to
&gt; &gt;&gt; migrate). I am using single client to talk to Riak, is it better? or in
&gt; web,
&gt; &gt;&gt; is it ok to create a client per request? I looked riak\_kv\_wm\_raw.erl
&gt; which
&gt; &gt;&gt; seems using a connection per request but it is a erlang local\_client.
&gt; &gt;
&gt; &gt; There is not a fixed limit imposed by Riak, but it is a general good
&gt; &gt; practice to re-use clients for subsequent (non-concurrent) requests.
&gt;
&gt; I'm working on a project where we have a webmachine-backed service
&gt; that talks to Riak. I currently initialize one pb client for each
&gt; node in the cluster as part of the webmachine startup. Then the
&gt; resources in the webmachine app ask for one of these clients for each
&gt; request.
&gt;
&gt; Your comment above about reusing clients for non-concurrent requests
&gt; makes me wonder if this is the wrong approach. Comments or
&gt; suggestions?
&gt;
&gt; Thanks,
&gt;
&gt; + seth
&gt;
&gt; --
&gt; Seth Falcon | @sfalcon | http://userprimary.net/
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;



-- 

OJ Reeves
http://buffered.io/
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

