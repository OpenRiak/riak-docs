---
title: "Re: order of siblings"
description: ""
project: community
lastmod: 2012-03-25T05:46:50-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07036"
mailinglist_parent_id: "msg07035"
author_name: "Nico Meyer"
project_section: "mailinglistitem"
sent_date: 2012-03-25T05:46:50-07:00
---



Hello Michael,

the siblings returned by the Protobuf API have two properties calles 
'last\_mod' and 'last\_mod\_usec', which contain the (unix-)timestamp and 
the microsend part for the time on which the sibling was last modified. 
allow\_mult\_=true actually uses the contents of this field to return the 
newest sibling.


If the client you are using does not expose these values, you should 
complain to the authors. I know the official(?) python client exposes 
these values as metadata entries, using the constants 
riak.metadata.MD\_LASTMOD(\_USECS). After a cursory glance at the Java 
client, there seems to be a 'getLastModified()' method as well, which 
returns a Date object.


Cheers,
Nico

On 24.03.2012 19:24, Michael Radford wrote:

Is there a way to determine what Riak thinks is the last-written
sibling (or one of them), when reading from Riak with allow\_mult=true
(via the erlang protobufs api)?

I'm writing some conflict resolution code, which in many cases should
fall back to the default strategy of last-writer-wins, and it would be
nice to use Riak's default ordering instead of embedding an extra
timestamp in the value.

It looks like something like the unpacking of the vclock here might work:
https://gist.github.com/1380896

...assuming the vclock entries are 1-1 with the siblings, but that's
not clear to me. Or maybe the siblings already come in a particular
order, oldest or newest first?

Thanks,
Mike

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com



\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

