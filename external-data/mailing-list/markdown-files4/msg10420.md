---
title: "Re: Error interpretation"
description: ""
project: community
lastmod: 2013-03-13T17:42:44-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg10420"
mailinglist_parent_id: "msg10419"
author_name: "Jeremiah Peschka"
project_section: "mailinglistitem"
sent_date: 2013-03-13T17:42:44-07:00
---


I ran the sample code you sent over on my local machine and it ran without
error. I did have to enable riak search on an individual bucket by setting
bucket properties, but you can see the changes I made here:
http://clientresources.brentozar.com.s3.amazonaws.com/CITest.zip

You may not get the search results that you want from your JSON document
because it doesn't conform to the default Riak Search schema -
http://docs.basho.com/riak/latest/cookbooks/Riak-Search---Schema/#The-Default-Schema

---
Jeremiah Peschka - Founder, Brent Ozar Unlimited
MCITP: SQL Server 2008, MVP
Cloudera Certified Developer for Apache Hadoop


On Wed, Mar 13, 2013 at 5:32 PM, Kevin Burton wrote:

&gt; Instead of using a binary file I tried a file that contains serialized
&gt; JSON data. I am getting pretty much the same error:\*\*\*\*
&gt;
&gt; \*\* \*\*
&gt;
&gt; 500 Internal Server
&gt; ErrorInternal Se\*\*\*\*
&gt;
&gt; rver Error
==================================

The server encountered an error while processing this
&gt; request:
&gt; &gt;
```
{error,****
&gt;
&gt;     {error,badarg,****
&gt;
&gt;         [{erlang,iolist_to_binary,****
&gt;
&gt;              [{hook_crashed,{riak_search_kv_hook,precommit,error,badarg}}],
&gt; ****
&gt;
&gt;              []},****
&gt;
&gt;          {wrq,append_to_response_body,2,[{file,"src/wrq.erl"},{line,205}]},
&gt; ****
&gt;
&gt;          {riak_kv_wm_object,handle_common_error,3,****
&gt;
&gt;              [{file,"src/riak_kv_wm_object.erl"},{line,998}]},****
&gt;
&gt;          {webmachine_resource,resource_call,3,****
&gt;
&gt;              [{file,"src/webmachine_resource.erl"},{line,183}]},****
&gt;
&gt;          {webmachine_resource,do,3,****
&gt;
&gt;              [{file,"src/webmachine_resource.erl"},{line,141}]},****
&gt;
&gt;          {webmachine_decision_core,resource_call,1,****
&gt;
&gt;              [{file,"src/webmachine_decision_core.erl"},{line,48}]},****
&gt;
&gt;          {webmachine_decision_core,accept_helper,0,****
&gt;
&gt;              [{file,"src/webmachine_decision_core.erl"},{line,606}]},****
&gt;
&gt;          {webmachine_decision_core,decision,1,****
&gt;
&gt;
&gt; [{file,"src/webmachine_decision_core.erl"},{line,577}]}]}}
```
\*\*\*\*
&gt;
&gt; 

---

mochiweb+webmachine web server

\*\*\*\*
&gt;
&gt; \*\* \*\*
&gt;
&gt; From\*\*\*\*
&gt;
&gt; \*\* \*\*
&gt;
&gt; curl -XPUT http://devUBuntu01:8098/riak/buyseasons-orders/1 -H
&gt; "Content-type:application/json" --data-binary @test.json\*\*\*\*
&gt;
&gt; \*\* \*\*
&gt;
&gt; So given this error any suggestions as to the meaning?\*\*\*\*
&gt;
&gt; \*\* \*\*
&gt;
&gt; I can put the JSON file on dropbox or someother media if it is needed. \*\*\*
&gt; \*
&gt;
&gt; \*\* \*\*
&gt;
&gt; Thank you.\*\*\*\*
&gt;
&gt; \*\* \*\*
&gt;
&gt; \*From:\* Kevin Burton [mailto:rkevinbur...@charter.net]
&gt; \*Sent:\* Wednesday, March 13, 2013 9:28 AM
&gt; \*To:\* 'Jeremiah Peschka'; 'riak-users'
&gt; \*Subject:\* RE: Error interpretation\*\*\*\*
&gt;
&gt; \*\* \*\*
&gt;
&gt; So the question remains in my mind why\*\*\*\*
&gt;
&gt; \*\* \*\*
&gt;
&gt; curl -XPUT http://devUbuntu01:8098/riak/images/1.jpg -H "Content-type:
&gt; image/jpeg" --data-binary @test.jpg\*\*\*\*
&gt;
&gt; \*\* \*\*
&gt;
&gt; and the corresponding read\*\*\*\*
&gt;
&gt; \*\* \*\*
&gt;
&gt; curl -v http://devUbuntu01:8098/riak/images/1.jpg &gt;test-read.jpg\*\*\*\*
&gt;
&gt; \*\* \*\*
&gt;
&gt; work without error but the CI call to put fails? How are these different?\*
&gt; \*\*\*
&gt;
&gt; \*\* \*\*
&gt;
&gt; \*\* \*\*
&gt;
&gt; \*From:\* riak-users 
&gt; [mailto:riak-users-boun...@lists.basho.com]
&gt; \*On Behalf Of \*Jeremiah Peschka
&gt; \*Sent:\* Tuesday, March 12, 2013 8:35 PM
&gt;
&gt; \*To:\* riak-users
&gt; \*Subject:\* Re: Error interpretation\*\*\*\*
&gt;
&gt; \*\* \*\*
&gt;
&gt; Default leveldb config is (when built using `make devrel`): \*\*\*\*
&gt;
&gt; \*\* \*\*
&gt;
&gt; %% eLevelDB Config\*\*\*\*
&gt;
&gt; {eleveldb, [\*\*\*\*
&gt;
&gt; {data\_root, "./data/leveldb"}\*\*\*\*
&gt;
&gt; ]},\*\*\*\*
&gt;
&gt; \*\* \*\*
&gt;
&gt; Drop everything but the data\_root. Also: simplify your set up. You're
&gt; running into timeout errors in a networked environment. Test your
&gt; functionality on a local cluster (either 1 node or a devrel setup with 4
&gt; nodes). Validate your logic and functionality there.\*\*\*\*
&gt;
&gt; \*\* \*\*
&gt;
&gt; I wish I could promise that I can help out at all, but I just got back
&gt; from 12 days out of the country and I'm booked solid for the next two
&gt; weeks. In short - my responses will be hit or miss at best.\*\*\*\*
&gt;
&gt; \*\* \*\*
&gt;
&gt; Good luck and godspeed.\*\*\*\*
&gt;
&gt;
&gt; \*\*\*\*
&gt;
&gt; ---\*\*\*\*
&gt;
&gt; Jeremiah Peschka - Founder, Brent Ozar Unlimited\*\*\*\*
&gt;
&gt; MCITP: SQL Server 2008, MVP\*\*\*\*
&gt;
&gt; Cloudera Certified Developer for Apache Hadoop\*\*\*\*
&gt;
&gt; \*\* \*\*
&gt;
&gt; \*\* \*\*
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

