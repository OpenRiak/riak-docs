---
title: "Re: Building and packaging riak from source"
description: ""
project: community
lastmod: 2011-12-23T09:51:34-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06064"
mailinglist_parent_id: "msg06063"
author_name: "Ultrabug"
project_section: "mailinglistitem"
sent_date: 2011-12-23T09:51:34-08:00
---


On 23/12/2011 18:10, Jared Morrow wrote:

Thanks for your reply

&gt; 1. The link you have is the most detailed one we have so far for
&gt; installing from source. I'm not really familiar with gentoo packaging,
&gt; but if you can package from a source file, doing a 'make rel' in the
&gt; riak repository will get you a .tar.gz with the proper files included.
&gt; 

That's what I think I've been doing and I "only" get a rel/riak
directory. It's fine tho I'd like to be able to choose where those files
get written instead (and then their actual "tree" to match those
standard in Gentoo).

I tried to patch the Makefile to change the target\_dir= of the rel
target with no notable effect, am I missing something ?

&gt; 2. We aren't using a system-wide js library because we need it
&gt; integrated into erlang as part of our erlang-js library. That library
&gt; at one point in time needed to work on solaris sparc, which was a
&gt; supported platform at the time. This significantly limited the number
&gt; of javascipt libraries we could use. Since javascript is such a
&gt; fundamental part of how we function, it is important that we test
&gt; against a fixed library. Using a system wide one instead of an
&gt; integrated one is currently not possible. In the future, we have plans
&gt; to update our JS runtime now that there are better options out there
&gt; that can run on multiple platforms, but it won't be for the 1.1 release
&gt; unfortunately.
&gt; 

I'm happy to hear that this is a goal of yours. I may submit a patch
because some of the bundled libs don't respect users' {C,LD}FLAGS.

&gt; 3. Riak master (https://github.com/basho/riak) has the R14B04
&gt; inclusion, but at the time of release of 1.0.2, 14B04 was not available.
&gt; This is why packaged source from our downloads site will not include
&gt; 14b04 and was tested only against 14b03. 
&gt; 

Alrighty, thanks.

&gt; -Jared
&gt; 
&gt; On Fri, Dec 23, 2011 at 8:23 AM, Ultrabug  &gt; wrote:
&gt; 
&gt; Hi,
&gt; 
&gt; I'm interested in packaging riak for Gentoo Linux but I'm running in
&gt; some troubles having a clean build of riak (I'm not used to erlang
&gt; building tbh) so I'll start with a few questions if I may.
&gt; 
&gt; 1/ Is there a more detailed article I failed to find about how to build
&gt; "properly" riak (I mean like choosing the target installation
&gt; directories etc) ? [1]
&gt; 
&gt; 2/ Why are you not using system-wide nspr/spidermonkey libraries instead
&gt; of bundling them ? Is there a way somewhere to specify we want to use
&gt; the system ones at build time ?
&gt; 
&gt; 3/ Installation instructions says "Riak requires Erlang R14B03 or
&gt; later." but when trying to get it working with R14B04 it failed. You may
&gt; want to adjust your regular expression in rebar.config to at least
&gt; R14B0[234].
&gt; 
&gt; Thanks in advance for your answers and help.
&gt; 
&gt; Regards,
&gt; 
&gt; [1] http://wiki.basho.com/Installing-Riak-from-Source.html
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com 
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; 
&gt; 


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

