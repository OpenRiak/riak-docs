---
title: "Re: Issues with high node load and very slow response"
description: ""
project: community
lastmod: 2014-07-27T19:32:19-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14556"
mailinglist_parent_id: "msg14554"
author_name: "Jordan West"
project_section: "mailinglistitem"
sent_date: 2014-07-27T19:32:19-07:00
---


On Sat, Jul 26, 2014 at 8:54 PM, Chaim Solomon 
wrote:

&gt;
&gt; And on almost all other nodex I am getting a lot of these:
&gt; 2014-07-26 23:50:58.796 [info] &lt;0.12268.221&gt;@yz\_kv:should\_handoff:157
&gt; waiting for bucket types prefix and indexes to agree between '
&gt; riak@10.128.138.25' and 'riak@10.128.137.185'
&gt;
&gt;
This error is indicating that 'riak@10.128.138.25' is unable to handoff
data to 'riak@10.128.137.185'. The former is delaying handoff until the
latter has met some requirements necessary to index the data sent to it.

Unfortunately, there are several conditions that could cause this. To rule
out the obvious ones can you verify that `riak@10.128.137.185` has search
enabled. If it is the case that search is enabled we can try a few
different things to debug further.

Attaching to 'riak@10.128.138.25' (via "riak attach") and using the shell,
if you could provide the output of:

```
rpc:multicall([node() | nodes()], app\_helper, get\_env, [yokozuna, enabled,
false], 5000).
```

As well as:

```
[riak\_core\_node\_watcher:services(N) || N &lt;- [node() | nodes()]].
```

And finally:

```
yz\_kv:is\_metadata\_consistent('riak@10.127.137.185').
```

Based on the output of those we can debug further.

Additionally, its entirely possible that when we get rid of that error it
will not resolve the primary issue (CPU usage/request slowness). However,
the check that is the source of that log message can block in the request
path, so something funky could certainly be going on.

Jordan
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

