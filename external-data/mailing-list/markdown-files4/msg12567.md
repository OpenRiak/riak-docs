---
title: "Re: Unable to configure Riak-CS-Control to manage users"
description: ""
project: community
lastmod: 2013-10-09T08:04:47-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12567"
mailinglist_parent_id: "msg12566"
author_name: "Dmitri Zagidulin"
project_section: "mailinglistitem"
sent_date: 2013-10-09T08:04:47-07:00
---


Thanks Siddhu,
Couple more questions.

1) Can you include a couple more sections from the Riak CS config
(specifically, the anonymous\_user\_creation section and the admin\_key).

2) Just to double-check, can you re-include the Riak CS Control config?
(the whole riak\_cs\_control section).

3) Describe again exactly which parts are working and which aren't. What do
you see when you open the Riak CS Control web interface? (And which
commands are working with s3cmd?)



On Wed, Oct 9, 2013 at 10:50 AM, Siddhu Warrier (siwarrie) &lt;
siwar...@cisco.com&gt; wrote:

&gt; Hi Dimitri,
&gt;
&gt; Thank you for your email. I just tried this. I still have the same
&gt; problem, except that I no longer get 403 errors in my Riak CS error log (as
&gt; a matter of fact, I get nothing at all in my Riak CS, Riak CS Control,
&gt; Stanchion, and Riak error logs).
&gt;
&gt; I've put the basic config section of my riak-cs/app.config here for your
&gt; reference.
&gt;
&gt; %% Riak CS http/https port and IP address to listen at
&gt; %% for object storage activity
&gt; {cs\_ip, "10.0.1.202"},
&gt; {cs\_port, 8080 } ,
&gt;
&gt; %% Riak node to which Riak CS accesses
&gt; {riak\_ip, "10.0.1.202"},
&gt; {riak\_pb\_port, 8087 } ,
&gt;
&gt; %% Configuration for access to request
&gt; %% serialization service
&gt; {stanchion\_ip, "10.0.1.202"},
&gt; {stanchion\_port, 8085 },
&gt; {stanchion\_ssl, false },
&gt;
&gt; Thanks,
&gt;
&gt; Siddhu
&gt;
&gt; From: Dmitri Zagidulin 
&gt; Date: Wednesday, 9 October 2013 15:38
&gt; To: Siddhu Warrier 
&gt; Cc: "riak-users@lists.basho.com" 
&gt; Subject: Re: Unable to configure Riak-CS-Control to manage users
&gt;
&gt; (Just to be extra clear, that's meant to be a comma at the end of that
&gt; directive, not a period. Also, don't forget to restart Riak CS Control,
&gt; after changing the proxy host).
&gt;
&gt;
&gt; On Wed, Oct 9, 2013 at 10:36 AM, Dmitri Zagidulin wrote:
&gt;
&gt;&gt; Hi Siddhu,
&gt;&gt;
&gt;&gt; Can you try changing 'cs\_proxy\_host' to localhost? So:
&gt;&gt;
&gt;&gt; {cs\_proxy\_host, "127.0.0.1" }.
&gt;&gt;
&gt;&gt; and retry.
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; On Wed, Oct 9, 2013 at 9:55 AM, Siddhu Warrier (siwarrie) &lt;
&gt;&gt; siwar...@cisco.com&gt; wrote:
&gt;&gt;
&gt;&gt;&gt; Hi,
&gt;&gt;&gt;
&gt;&gt;&gt; I have a two node Riak CS (1.4) cluster set up on two nodes (node-1
&gt;&gt;&gt; and node-2 henceforth). Node-1 is the headnode. Both node-1 and node-2 are
&gt;&gt;&gt; running CentOS-6.4.
&gt;&gt;&gt;
&gt;&gt;&gt; \*N\*\*ode-1\*
&gt;&gt;&gt;
&gt;&gt;&gt; - Riak 1.4.2
&gt;&gt;&gt; - Stanchion 1.4.1
&gt;&gt;&gt; - Riak-CS 1.4.1
&gt;&gt;&gt; - Riak-CS-Control 1.0.2
&gt;&gt;&gt;
&gt;&gt;&gt; \*N\*\*ode-2\*
&gt;&gt;&gt;
&gt;&gt;&gt; - Riak 1.4.2
&gt;&gt;&gt; - Riak-CS 1.4.1
&gt;&gt;&gt;
&gt;&gt;&gt; I have got Riak CS working, and have created admin credentials that I've
&gt;&gt;&gt; set correctly on stanchion, riak-cs, and riak-cs-control on node 1, and on
&gt;&gt;&gt; riak-cs on node 2. I am able to use the admin credentials to perform
&gt;&gt;&gt; operations on the bucket using s3cmd.
&gt;&gt;&gt;
&gt;&gt;&gt; However, when I try to list riak-cs users using the riak-cs-control, I
&gt;&gt;&gt; get no results. The error that comes up in /var/log/riak-cs.log is:
&gt;&gt;&gt;
&gt;&gt;&gt; 10.0.1.202 - - [09/Oct/2013:13:09:31 +0000] "GET /buckets/users/objects 
&gt;&gt;&gt; HTTP/1.1" 403 160 "" ""
&gt;&gt;&gt;
&gt;&gt;&gt; I also receive a 403 when I try to create an admin user.
&gt;&gt;&gt;
&gt;&gt;&gt; I saw https://github.com/basho/riak\_cs\_control/issues/31 and set my
&gt;&gt;&gt; /etc/riak-cs-control/app.config file up to use the cs\_proxy\_host parameter
&gt;&gt;&gt; as well, though I'm not using proxies, but to no avail. I have reproduced
&gt;&gt;&gt; the relevant section of my riak-cs-control/app.config here:
&gt;&gt;&gt; {riak\_cs\_control, [
&gt;&gt;&gt; %% What port to run the application on.
&gt;&gt;&gt; {port, 8000 },
&gt;&gt;&gt;
&gt;&gt;&gt; %% Instance of Riak CS you wish to talk to.
&gt;&gt;&gt; {cs\_hostname, "10.0.1.202" },
&gt;&gt;&gt; {cs\_port, 8080 },
&gt;&gt;&gt; {cs\_protocol, "http" },
&gt;&gt;&gt;
&gt;&gt;&gt; %% Proxy information; necessary if you are using
&gt;&gt;&gt; s3.amazonaws.com as
&gt;&gt;&gt; %% your hostname.
&gt;&gt;&gt; {cs\_proxy\_host, "10.0.1.202" },
&gt;&gt;&gt; {cs\_proxy\_port, 8080 },
&gt;&gt;&gt;
&gt;&gt;&gt; %% Credentials you want the application to run as.
&gt;&gt;&gt; {cs\_admin\_key, "5VI-NIFLNIHKRNGKPBVX" },
&gt;&gt;&gt; {cs\_admin\_secret, "xxxxxxx" },
&gt;&gt;&gt;
&gt;&gt;&gt; %% Specify the bucket name for administration options.
&gt;&gt;&gt; {cs\_administration\_bucket, "riak-cs" }
&gt;&gt;&gt; ]},
&gt;&gt;&gt;
&gt;&gt;&gt; Is there something I am missing/doing wrong?
&gt;&gt;&gt;
&gt;&gt;&gt; Thanks,
&gt;&gt;&gt;
&gt;&gt;&gt; Siddhu
&gt;&gt;&gt;
&gt;&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

