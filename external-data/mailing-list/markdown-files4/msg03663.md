---
title: "Re: Moving mapred* functions out of riak_client?"
description: ""
project: community
lastmod: 2011-06-13T12:41:24-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03663"
mailinglist_parent_id: "msg03641"
author_name: "Bryan Fink"
project_section: "mailinglistitem"
sent_date: 2011-06-13T12:41:24-07:00
---


On Fri, Jun 10, 2011 at 11:18 AM, Kresten Krab Thorup  wrote:
&gt; We are using those APIs in our new stuff for riak sync/mobile. My problem 
&gt; with your change would be that we have a mock riak\_client which is super 
&gt; convenient for unit testing, and it would be good to still be able to have 
&gt; that somehow. Â Our mock is just an eta-backed parameterized module which has 
&gt; put/get/mapred\_bucket/etc. ....

Hi, Kresten. I can see how unit tests like you describe could be more
challenging with the breakup I proposed.

In case the link isn't obvious now, this is the driver behind my
desire to move things around (Riak Pipe):
http://lists.basho.com/pipermail/riak-users\_lists.basho.com/2011-June/004550.html

My main thought was that keeping all of the code separate, right up to
the external interface layer, would reduce confusion during any
transition from the legacy system to the pipe-based system.

Would you mind taking a look at the changes I was thinking about to
support this inside Riak? I have a branch + [unreviewed] pull request
going here: https://github.com/beerriot/riak\_kv/pull/8

Or if I could take a look at your mock system, maybe I could help with
some suggestions for moving in the direction I proposed? We are
generally trying to move toward more well-defined APIs (such as
PBC/HTTP) and to discourage people from using distributed Erlang to
interact with Riak.

Thanks,
Bryan

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

