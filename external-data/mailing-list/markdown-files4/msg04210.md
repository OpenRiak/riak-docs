---
title: "Re: Attempting to use secondary indexes"
description: ""
project: community
lastmod: 2011-08-03T21:47:23-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg04210"
mailinglist_parent_id: "msg04209"
author_name: "Antonio Rohman Fernandez"
project_section: "mailinglistitem"
sent_date: 2011-08-03T21:47:23-07:00
---


Another question... the old problem of querying smaller buckets with MapReduce is resolved with secondary indexes?following this pattern =&gt; curl http://127.0.0.1:8098/buckets/loot/index/category\_bin/eq/armor i think Riak doesn't have to check all the buckets/keys in memory to match the one you look for as it happened on a MapReduce, right? so http://127.0.0.1:8098/buckets/rohman\_messages/index/date\_int/eq/20110801 would give me all messages from Rohman ( in a personalized bucket ) for the day 1st of August of 2011 in a much faster way, right?thanksRohman
On Thu, 04 Aug 2011 12:38:17 +0800, Antonio Rohman Fernandez wrote:

seeing OSCON's PDF... when will we be able to have Riak 1.0 with secondary indexes out? This is an improvement that can help me pretty well out on my project. Any ETA?thanksRohman
On Wed, 3 Aug 2011 22:02:53 -0600, Kelly McLaughlin wrote:
Craig,
The default backend is bit cask and if you want to use the indexes you'll need to look in etc/app.config in the release directory and change the value for the storage\_backend setting to riak\_kv\_index\_backend instead of riak\_kv\_bitcask\_backend. I suspect that's the problem. Cheers.
Kelly


On Aug 3, 2011, at 9:42 PM, Craig Muth wrote:

I'm running the code example from http://rusty.basho.com.s3.amazonaws.com/Presentations/2011-OSCONData-Portland.pdf

This succeeds:
curl \
  -X PUT \
  -d "OPAQUE\_VALUE" \
  -H "x-riak-index-category\_bin: armor" \
  -H "x-riak-index-price\_int: 400" \
  http://127.0.0.1:8098/buckets/loot/keys/gauntlet24

This verifies it's getting there:
curl http://127.0.0.1:8098/riak/loot/gauntlet24
  =&gt; OPAQUE\_VALUE
However, this finds nothing:
curl http://127.0.0.1:8098/buckets/loot/index/category\_bin/eq/armor
  =&gt; {"keys":[]}
Whereas in the presentation it says it should return {"keys":["gauntlet24"]}
Any ideas?  Just grabbed the latest from github master.
--Craig
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_riak-users mailing listriak-users@lists.basho.comhttp://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com



-- 





 
Antonio Rohman FernandezCEO, Founder & Lead Engineerroh...@mahalostudio.com
 
ProjectsMaruBatsu.esPupCloud.comWedding Album






-- 





 
Antonio Rohman FernandezCEO, Founder & Lead Engineerroh...@mahalostudio.com
 
ProjectsMaruBatsu.esPupCloud.comWedding Album





\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

