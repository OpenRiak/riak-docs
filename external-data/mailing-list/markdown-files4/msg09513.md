---
title: "Re: Cluster setup"
description: ""
project: community
lastmod: 2012-12-10T13:12:51-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg09513"
mailinglist_parent_id: "msg09512"
author_name: "Sean Carey"
project_section: "mailinglistitem"
sent_date: 2012-12-10T13:12:51-08:00
---


Look at the section in your config called pb\_ip. The ip is wrong. 


On Monday, December 10, 2012 at 4:02 PM, rkevinbur...@charter.net wrote:

&gt; I moved on to the next step and from the "seed node" I execute 'sudo 
&gt; riak-admin cluster join riak@10.79.110.52 (mailto:riak@10.79.110.52)' and I 
&gt; get
&gt; 
&gt; Attempting to restart script through sudo -H -u riak
&gt; Node riak@10.79.110.52 (mailto:riak@10.79.110.52) is not reachable!
&gt; 
&gt; I can ping the node:
&gt; PING 10.79.110.52 (10.79.110.52) 56(84) bytes of data.
&gt; 64 bytes from 10.79.110.52: icmp\_seq=1 ttl=63 time=1.08 ms
&gt; 64 bytes from 10.79.110.52: icmp\_seq=2 ttl=63 time=1.77 ms
&gt; 64 bytes from 10.79.110.52: icmp\_seq=3 ttl=63 time=2.67 ms
&gt; 64 bytes from 10.79.110.52: icmp\_seq=4 ttl=63 time=0.663 ms
&gt; 
&gt; Any ideas what this problem is?
&gt; I went to node2 and could not start riak
&gt; The vm.args on the second node looks like:
&gt; ## Name of the riak node
&gt; -name riak@10.79.110.52 (mailto:riak@10.79.110.52)
&gt; 
&gt; 
&gt; ifconfig looks like:
&gt; eth0 Link encap:Ethernet HWaddr 00:15:5D:50:3B:27
&gt; inet addr:10.79.110.52 Bcast:10.79.111.255 Mask:255.255.254.0
&gt; inet6 addr: fe80::215:5dff:fe50:3b27/64 Scope:Link
&gt; UP BROADCAST RUNNING MULTICAST MTU:1500 Metric:1
&gt; RX packets:345671 errors:0 dropped:0 overruns:0 frame:0
&gt; TX packets:136590 errors:0 dropped:0 overruns:0 carrier:0
&gt; collisions:0 txqueuelen:1000
&gt; RX bytes:480181840 (457.9 MiB) TX bytes:13833066 (13.1 MiB)
&gt; 
&gt; lo Link encap:Local Loopback
&gt; inet addr:127.0.0.1 Mask:255.0.0.0
&gt; inet6 addr: ::1/128 Scope:Host
&gt; UP LOOPBACK RUNNING MTU:16436 Metric:1
&gt; RX packets:1555 errors:0 dropped:0 overruns:0 frame:0
&gt; TX packets:1555 errors:0 dropped:0 overruns:0 carrier:0
&gt; collisions:0 txqueuelen:0
&gt; RX bytes:90413 (88.2 KiB) TX bytes:90413 (88.2 KiB)
&gt; 
&gt; netstat -tln
&gt; Proto Recv-Q Send-Q Local Address Foreign Address 
&gt; State
&gt; tcp 0 0 0.0.0.0:111 0.0.0.0:\* 
&gt; LISTEN
&gt; tcp 0 0 0.0.0.0:4369 0.0.0.0:\* 
&gt; LISTEN
&gt; tcp 0 0 0.0.0.0:46130 0.0.0.0:\* 
&gt; LISTEN
&gt; tcp 0 0 0.0.0.0:22 0.0.0.0:\* 
&gt; LISTEN
&gt; tcp 0 0 127.0.0.1:631 0.0.0.0:\* 
&gt; LISTEN
&gt; tcp 0 0 127.0.0.1:25 0.0.0.0:\* 
&gt; LISTEN
&gt; tcp 0 0 10.79.110.52:16001 0.0.0.0:\* 
&gt; LISTEN
&gt; tcp 0 0 0.0.0.0:5672 0.0.0.0:\* 
&gt; LISTEN
&gt; tcp 0 0 :::38381 :::\* 
&gt; LISTEN
&gt; tcp 0 0 :::111 :::\* 
&gt; LISTEN
&gt; tcp 0 0 :::22 :::\* 
&gt; LISTEN
&gt; tcp 0 0 ::1:631 :::\* 
&gt; LISTEN
&gt; tcp 0 0 ::1:25 :::\* 
&gt; LISTEN
&gt; tcp 0 0 :::5672 :::\* 
&gt; LISTEN
&gt; 
&gt; app.config looks like:
&gt; [
&gt; 
&gt; %% Riak Client APIs config
&gt; {riak\_api, [
&gt; %% pb\_backlog is the maximum length to which the queue of pending
&gt; %% connections may grow. If set, it must be an integer &gt;= 0.
&gt; %% By default the value is 5. If you anticipate a huge number of
&gt; %% connections being initialised \*simultaneously\*, set this number
&gt; %% higher.
&gt; %% {pb\_backlog, 64},
&gt; %% pb\_ip is the IP address that the Riak Protocol Buffers 
&gt; interface
&gt; %% will bind to. If this is undefined, the interface will not 
&gt; run.
&gt; {pb\_ip, "10.79.110.52" },
&gt; %% pb\_port is the TCP port that the Riak Protocol Buffers 
&gt; interface
&gt; %% will bind to
&gt; {pb\_port, 8089 }
&gt; ]},
&gt; %% Riak Core config
&gt; {riak\_core, [
&gt; %% Default location of ringstate
&gt; {ring\_state\_dir, "/var/lib/riak/ring"},
&gt; 
&gt; %% Default ring creation size. Make sure it is a power of 2,
&gt; %% e.g. 16, 32, 64, 128, 256, 512 etc
&gt; %{ring\_creation\_size, 64},
&gt; 
&gt; %% http is a list of IP addresses and TCP ports that the Riak
&gt; %% HTTP interface will bind.
&gt; {http, [ {"10.79.110.52", 8099 } ]},
&gt; 
&gt; 
&gt; %% pb\_ip is the IP address that the Riak Protocol Buffers 
&gt; interface 
&gt; %% will bind to. If this is undefined, the interface will not 
&gt; run. 
&gt; {pb\_ip, "10.79.80.11" }, 
&gt; 
&gt; %% pb\_port is the TCP port that the Riak Protocol Buffers 
&gt; interface 
&gt; %% will bind to 
&gt; {pb\_port, 8090 } 
&gt; ]}, 
&gt; 
&gt; Finally the error.log
&gt; 2012-12-10 18:56:02.030 [error] &lt;0.170.0&gt; CRASH REPORT Process &lt;0.170.0&gt; with 
&gt; 0 neighbours exited with reason: eaddrinuse in gen\_server:ini
&gt; t\_it/6 line 320
&gt; 2012-12-10 18:56:50.745 [error] &lt;0.165.0&gt; CRASH REPORT Process &lt;0.165.0&gt; with 
&gt; 0 neighbours exited with reason: eaddrinuse in gen\_server:ini
&gt; t\_it/6 line 320
&gt; 2012-12-10 18:58:47.013 [error] &lt;0.170.0&gt; CRASH REPORT Process &lt;0.170.0&gt; with 
&gt; 0 neighbours exited with reason: eaddrinuse in gen\_server:ini
&gt; t\_it/6 line 320
&gt; 2012-12-10 20:29:02.745 [error] &lt;0.170.0&gt; CRASH REPORT Process &lt;0.170.0&gt; with 
&gt; 0 neighbours exited with reason: eaddrinuse in gen\_server:ini
&gt; t\_it/6 line 320
&gt; 2012-12-10 20:52:21.908 [error] &lt;0.170.0&gt; CRASH REPORT Process &lt;0.170.0&gt; with 
&gt; 0 neighbours exited with reason: eaddrinuse in gen\_server:ini
&gt; t\_it/6 line 320
&gt; 2012-12-10 20:53:53.694 [error] &lt;0.170.0&gt; CRASH REPORT Process &lt;0.170.0&gt; with 
&gt; 0 neighbours exited with reason: eaddrinuse in gen\_server:ini
&gt; t\_it/6 line 320
&gt; 
&gt; 

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

