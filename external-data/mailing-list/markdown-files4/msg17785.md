---
title: "Re: Java client -- slow to shutdown"
description: ""
project: community
lastmod: 2016-11-28T04:53:17-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17785"
mailinglist_parent_id: "msg17784"
author_name: "Luke Bakken"
project_section: "mailinglistitem"
sent_date: 2016-11-28T04:53:17-08:00
---


Hi Toby -

Thanks for reporting this. We can continue the discussion via GH issue #689.

--
Luke Bakken
Engineer
lbak...@basho.com

On Wed, Nov 23, 2016 at 9:58 PM, Toby Corkindale  wrote:
&gt; Hi,
&gt; I'm using the Java client via protocol buffers to Riak.
&gt; (Actually I'm using it via Scala 2.11.8 on OpenJDK 8)
&gt;
&gt; After calling client.shutdown(), there is always a delay of 4 seconds before
&gt; the app actually exits. Why is this, and what can I do about it?
&gt;
&gt; To demonstrate the issue, use these files:
&gt; https://gist.github.com/TJC/9a6a174cb1419a7c32e8018c5a495e3d
&gt;
&gt; If you put both of them in a fresh directory and then run "sbt", it should
&gt; grab various dependencies and stuff, and then you can use "compile" and
&gt; "run" commands.
&gt; (You'll need to do "export RIAK\_SERVER=my.riak.cluster.net" in the shell
&gt; before you run sbt)
&gt;
&gt; If you do "run" a few times, you'll see it always takes four seconds to get
&gt; back to the sbt prompt. If you comment out the two riak statements in the
&gt; source code (the connection and shutdown), then "run" a few times, it takes
&gt; zero seconds.
&gt;
&gt; I've tested this outside of sbt and the same issue exists.. it's just easier
&gt; to make a quick demo that works inside sbt.
&gt;
&gt; Also reported as https://github.com/basho/riak-java-client/issues/689
&gt;
&gt; Cheers
&gt; Toby

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

