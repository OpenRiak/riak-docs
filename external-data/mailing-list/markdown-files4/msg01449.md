---
title: "Re: java client out of memory"
description: ""
project: community
lastmod: 2010-11-03T13:12:47-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01449"
mailinglist_parent_id: "msg01448"
author_name: "Andy Gross"
project_section: "mailinglistitem"
sent_date: 2010-11-03T13:12:47-07:00
---


Hi Andrea -

It looks like you're trying to connect to the HTTP port with the protobufs
client. When I replace port 8098 with 8087 in this sample code, it works
fine.

Hope that helps,

Andy

On Wed, Nov 3, 2010 at 12:50 PM, Andrea Campolonghi
wrote:

&gt; Hi,
&gt;
&gt; I am trying to use the riak-java-pb-client.
&gt; Sample very very basic code
&gt;
&gt; public static void main(String[] args) {
&gt; try{
&gt; RiakClient rc = new RiakClient("localhost",8098);
&gt; String bucket = "bucket";
&gt; String key = "key";
&gt; String val = "test";
&gt; RiakObject ro = new RiakObject(bucket,key,val);
&gt; rc.store(ro);
&gt;
&gt; RiakObject[] ros = rc.fetch(bucket, key);
&gt; for(RiakObject r : ros){
&gt; System.out.println(r.toString());
&gt; }
&gt;
&gt; }catch(IOException e){
&gt; e.printStackTrace();
&gt; }
&gt;
&gt;
&gt; Running this simple test code form eclipse rerquire at least 1.5 GB ram.
&gt; Lower than this I get an out of memory exception.
&gt;
&gt; While If I run the code with that huge memory I get this error:
&gt;
&gt; java.io.EOFException
&gt;
&gt; at java.io.DataInputStream.readFully(DataInputStream.java:180)
&gt;
&gt; at java.io.DataInputStream.readFully(DataInputStream.java:152)
&gt;
&gt; at com.trifork.riak.RiakConnection.receive(RiakConnection.java:89)
&gt;
&gt; at com.trifork.riak.RiakClient.store(RiakClient.java:384)
&gt;
&gt; at com.trifork.riak.RiakClient.store(RiakClient.java:363)
&gt;
&gt; at Runner.main(Runner.java:22)
&gt;
&gt;
&gt;
&gt; Any suggestion???
&gt;
&gt;
&gt; Andrea
&gt;
&gt;
&gt;
&gt; --
&gt; Andrea Campolonghi
&gt;
&gt; Cell : +39 347 2298435
&gt; and...@andreacfm.com
&gt; http://www.andreacfm.com
&gt;
&gt; Railo Team
&gt; and...@getrailo.org
&gt; http://getrailo.org
&gt;
&gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

