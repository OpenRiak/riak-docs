---
title: "Re: 50-100 ops/sec on a 5 Node cluster"
description: ""
project: community
lastmod: 2012-06-26T09:29:17-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07790"
mailinglist_parent_id: "msg07789"
author_name: "Jeremiah Peschka"
project_section: "mailinglistitem"
sent_date: 2012-06-26T09:29:17-07:00
---


Not being familiar with basho bench, these might seem like stupid
questions, but here goes:

What are the sizes of the operations that you're performing?
How have you configured your EBS storage?

A single EBS volume can only perform about 100 I/O operations per second,
give or take. A single host in AWS has a 1 gigabit ethernet connection.
That means every guest on the host has, at most, a theoretical maximum of
125MB/s of throughput for both incoming \*and\* outgoing data transfer. Due
to TCP/IP overhead, this is closer to 70-80MB/s.

If you're writing a lot of small items and causing flushes to disk (DW &gt;
0), then there's your problem.
If you're writing a lot of large items, there's your problem.

If not, please see the previous emails from Basho employees, who are much
smarter than me. :)
---
Jeremiah Peschka
Managing Director, Brent Ozar PLF, LLC


On Tue, Jun 26, 2012 at 9:00 AM, Reid Draper  wrote:

&gt;
&gt; On Jun 26, 2012, at 11:48 AM, David Smith wrote:
&gt;
&gt; &gt; What does your basho\_bench config file look like?
&gt; &gt;
&gt; &gt; Seeing a low number of ops/sec is usually an indicator that you're
&gt; &gt; hitting a bottleneck on the I/O path -- typically due to random reads.
&gt; &gt; LevelDB has a number of characteristics that can make this worse --
&gt; &gt; what happens if you use bitcask?
&gt; &gt;
&gt; &gt; D.
&gt; &gt;
&gt; &gt; On Tue, Jun 26, 2012 at 4:57 AM, Yousuf Fauzan 
&gt; wrote:
&gt; &gt;&gt; Hello,
&gt; &gt;&gt;
&gt; &gt;&gt; Here is my setup of Riak 1.1.4
&gt; &gt;&gt;
&gt; &gt;&gt; 5 Nodes
&gt; &gt;&gt; ami-a29943cb (EC2 AMI)
&gt; &gt;&gt; m1.large (7.5GB Ram, 4 EC2 compute instances)
&gt; &gt;&gt; EBS storage
&gt; I'd recommend giving ephemeral storage a shot as well. It tends to have
&gt; significantly less variable performance than EBS.
&gt; &gt;&gt; LevelDB backend
&gt; &gt;&gt; Python Client with Protobuf (on a separate machine)
&gt; &gt;&gt;
&gt; &gt;&gt; While loading data I am getting around 50 ops/sec.
&gt; &gt;&gt;
&gt; &gt;&gt; I tried running basho benchmark on the setup and it showed 100 ops/sec
&gt; &gt;&gt; throughput.
&gt; &gt;&gt;
&gt; &gt;&gt; After talking to people or Riak IRC, I realized that upwards of 1.5K
&gt; ops/sec
&gt; &gt;&gt; is what I should be getting.
&gt; &gt;&gt;
&gt; &gt;&gt; Could anyone help me in figuring out what I am doing wrong?
&gt; &gt;&gt;
&gt; &gt;&gt;
&gt; &gt;&gt; Thanks,
&gt; &gt;&gt;
&gt; &gt;&gt; Yousuf
&gt; &gt;&gt;
&gt; &gt;&gt;
&gt; &gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; &gt;&gt; riak-users mailing list
&gt; &gt;&gt; riak-users@lists.basho.com
&gt; &gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; &gt;&gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; --
&gt; &gt; Dave Smith
&gt; &gt; VP, Engineering
&gt; &gt; Basho Technologies, Inc.
&gt; &gt; diz...@basho.com
&gt; &gt;
&gt; &gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

