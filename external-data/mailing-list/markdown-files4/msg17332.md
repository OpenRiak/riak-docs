---
title: "Riak - deleted objects not going away"
description: ""
project: community
lastmod: 2016-05-11T12:49:18-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17332"
author_name: "AWS"
project_section: "mailinglistitem"
sent_date: 2016-05-11T12:49:18-07:00
---



I have a test database with 158 items in it. Some keys are Riak generated and 
some are explicitly set. I have two methods. One does a single delete of an 
object whilst the other goes through a loop and deletes all of them.

When I run the deleteAllFromBucket: aBucket it loops through all 158. If I then 
look at the number of keys, there are still 158. If I run the 
deleteAllFromBucket: aBucket again, it still loops over 158 but I get a 404 
response for each.

If I do a single delete and specify the key, the next time I run 
deleteAllFromBucket: aBucket, I get one less in the count.

Why would a single delete remove the objects entirely when the loop doesn't?

The loop calls the single delete so I am using the same code for both.

I am a newby to Riak (1 week) so any explanation would be helpful.

Long Haired David AKA David Pennington 

Message sent using Winmail Mail Server
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

