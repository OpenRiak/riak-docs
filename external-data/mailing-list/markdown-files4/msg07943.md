---
title: "Re: REST query returns JSON properties as strings?"
description: ""
project: community
lastmod: 2012-07-14T08:32:25-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07943"
mailinglist_parent_id: "msg07938"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2012-07-14T08:32:25-07:00
---


Hi (what's your name?),

What a search query returns to you is the "index document", or the result
of transforming the input before adding it to the search indexes; this also
means that deeply nested fields will be flattened. If you want the
original, you can use MapReduce to retrieve the documents resulting from a
search query.

On Fri, Jul 13, 2012 at 8:54 PM, 7zark7 &lt;7za...@gmail.com&gt; wrote:

&gt; I would like to store JSON documents in a Riak 1.1.x bucket (using
&gt; bitcask), and would like to search for them via REST using JSON property
&gt; values.
&gt;
&gt; E.g. JSON docs with typed properties like this:
&gt;
&gt; {
&gt; "type": "whatever",
&gt; "owner": 123456,
&gt; "text": "Blah blah blah",
&gt; "enabled": true
&gt; }
&gt;
&gt; However, the query response (/solr/mybucket/select?q=enabled:true&wt=json)
&gt; returns each doc's properties as JSON strings, and not the original JSON
&gt; type:
&gt;
&gt; {"responseHeader":{
&gt; "status":0,
&gt; "QTime":1,
&gt; "params":{
&gt; "q":"enabled:true",
&gt; "q.op":"or",
&gt; "filter":"",
&gt; "wt":"json"
&gt; }
&gt; },"response":{
&gt; "numFound":1,
&gt; "start":0,
&gt; "maxScore":"0.353553",
&gt; "docs":[
&gt; {
&gt; "id":"Obdoy3XbJe3kdh1T2bfxJgISCCL",
&gt; "index":"rest",
&gt; \* "fields":{\*
&gt; \* "enabled": "true",\*
&gt; \* "owner": "123456",\*
&gt; \* "text": "Blah blah blah",\*
&gt; \* "type": "whatever"\*
&gt; \* },\*
&gt; "props":{}
&gt; }
&gt; ]
&gt; }}
&gt;
&gt; This makes the results unusable for me, and I'm concerned I'd have to fall
&gt; back to N calls back to retrieve each original doc, which is not feasible.
&gt;
&gt;
&gt; I'm used to CouchDB+Lucene which behaves "correctly" to me.
&gt;
&gt; Is there some way to do what I'd like? E.g. another query method or
&gt; option?
&gt;
&gt; Thanks
&gt;
&gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
&gt;


-- 
Sean Cribbs 
Software Engineer
Basho Technologies, Inc.
http://basho.com/
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

