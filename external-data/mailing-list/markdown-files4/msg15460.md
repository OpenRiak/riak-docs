---
title: "Re: Riak Search having issues with custom schema"
description: ""
project: community
lastmod: 2015-01-09T09:25:35-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15460"
mailinglist_parent_id: "msg15459"
author_name: "Santi Kumar"
project_section: "mailinglistitem"
sent_date: 2015-01-09T09:25:35-08:00
---


I ran the command as shown below but I was getting wierd errors. In the
place of @object.json, I used the actual json content. Output was

curl -XPUT http://localhost:8098/search/extract -H 'Content-Type:
application/json' --data-binary
@{"id":null,"tenantId":"eb0a1917-9762-3dd3-a48f-a681d3061212","createdById":null,"createdBy":"SYSTEM","created":1420801439932,"lastUpdatedById":null,"lastUpdatedBy":"SYSTEM","lastUpdated":1420801439932,"policyId":"2d29e759-8e30-499a-8ecc-98eb09eeaa9f","searchId":"557134f2-3589-3fdb-927f-6a71e8098eee","name":"Collaborate","description":"Allow
editing of file
content","isDefault":true,"enable\_edit":true,"disable\_auth\_on\_open":true,"enable\_copy\_paste":"DISALLOW","enable\_printing":false,"enable\_offline":true,"offline\_timeout":null,"time\_bomb\_duration":null,"enable\_save\_as":false,"disable\_watermark":true,"disable\_spotlight":true,"enable\_screen\_capture":false,"disable\_onetime\_use":true}


Output is like this

500 Internal Server
ErrorInternal Server Error
=====================

The server
encountered an error while processing this request:  

```
{error,

    {error,

        {case_clause,&lt;&lt;"tenantId:eb0a1917-9762-3dd3-a48f-a681d3061212"&gt;&gt;},

        [{mochijson2,tokenize,2,[{file,"src/mochijson2.erl"},{line,529}]},

         {mochijson2,decode1,2,[{file,"src/mochijson2.erl"},{line,312}]},


{mochijson2,json_decode,2,[{file,"src/mochijson2.erl"},{line,307}]},

         {yz_json_extractor,extract_fields,2,

             [{file,"src/yz_json_extractor.erl"},{line,63}]},


{yz_wm_extract,extract,2,[{file,"src/yz_wm_extract.erl"},{line,91}]},

         {webmachine_resource,resource_call,3,

             [{file,"src/webmachine_resource.erl"},{line,186}]},

         {webmachine_resource,do,3,

             [{file,"src/webmachine_resource.erl"},{line,142}]},

         {webmachine_decision_core,resource_call,1,


[{file,"src/webmachine_decision_core.erl"},{line,48}]}]}}
```


---

mochiweb+webmachine
web server

curl: (6) Could not resolve host:
createdById

curl: (6) Could not resolve host: createdBy

curl: (3) Port number too large: 1420801439932

curl: (6) Could not resolve host: lastUpdatedById

curl: (6) Could not resolve host: lastUpdatedBy

curl: (3) Port number too large: 1420801439932





On Fri, Jan 9, 2015 at 10:29 PM, Luke Bakken  wrote:

&gt; Please run your JSON document through the extractor to ensure that
&gt; it's being parsed correctly:
&gt;
&gt; http://docs.basho.com/riak/latest/dev/advanced/search/#Extractors
&gt;
&gt; curl -XPUT http://localhost:8098/search/extract \
&gt; -H 'Content-Type: application/json' \
&gt; --data-binary @object.json
&gt;
&gt; If that works correctly, your schema may not have all of the required
&gt; fields:
&gt;
&gt; http://docs.basho.com/riak/latest/dev/advanced/search-schema/
&gt;
&gt; http://docs.basho.com/riak/latest/dev/advanced/search-schema/#Custom-Schemas
&gt;
&gt; --
&gt; Luke Bakken
&gt; Engineer
&gt; lbak...@basho.com
&gt;
&gt;
&gt; On Fri, Jan 9, 2015 at 8:55 AM, Santi Kumar  wrote:
&gt; &gt; Luke
&gt; &gt; It's application/json
&gt; &gt;
&gt; &gt; Here is the curl command and output dump with content-type in bold
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

