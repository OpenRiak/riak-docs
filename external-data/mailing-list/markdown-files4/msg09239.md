---
title: "RE: Cluster on startup."
description: ""
project: community
lastmod: 2012-11-07T09:02:48-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg09239"
mailinglist_parent_id: "msg09231"
author_name: "Kevin Burton"
project_section: "mailinglistitem"
sent_date: 2012-11-07T09:02:48-08:00
---


In the "Quick Start" documentation it states the 'join' should be done like:

$ dev2/bin/riak-admin cluster join dev1@127.0.0.1
$ dev3/bin/riak-admin cluster join dev1@127.0.0.1
$ dev4/bin/riak-admin cluster join dev1@127.0.0.1

Where does 'dev1' name come from? I have started all of the Riak instances
but I have not joined them to a cluster. Each instance is not listening to
'127.0.0.1' but to an IP address that will serve as the cluster IP address
(the IP address of the server machine). The IP address and the port are
specified in the app.config for each riak instance.

-----Original Message-----
From: Jeremiah Peschka [mailto:jeremiah.pesc...@gmail.com] 
Sent: Wednesday, November 07, 2012 10:29 AM
To: Kevin Burton
Cc: Shane McEwan; 
Subject: Re: Cluster on startup.

You should only issue the join command once - when you create the cluster.
After that happens, the nodes will join the cluster at start.

---
Jeremiah Peschka
Founder, Brent Ozar Unlimited

On Nov 7, 2012, at 8:13 AM, "Kevin Burton"  wrote:

&gt; Thank you. This is very helpful. Two more questions. One, my dev[1234] 
&gt; has about 6Mb of data in the directory. What are the bare minimum 
&gt; required files and directories? Two, would I issue the 'join' command 
&gt; here also to form the cluster?
&gt; 
&gt; -----Original Message-----
&gt; From: riak-users [mailto:riak-users-boun...@lists.basho.com] On Behalf 
&gt; Of Shane McEwan
&gt; Sent: Wednesday, November 07, 2012 9:54 AM
&gt; To: riak-users@lists.basho.com
&gt; Subject: Re: Cluster on startup.
&gt; 
&gt; If you edit /etc/init.d/riak you should see a line like:
&gt; 
&gt; su - riak -c "$DAEMON $DAEMON\_ARGS" || return 2
&gt; 
&gt; in the "do\_start" function.
&gt; 
&gt; If you change that line into the following 4 lines:
&gt; 
&gt; su - riak -c "/path/to/your/riak/dev1/bin/riak $DAEMON\_ARGS" 
&gt; || return 2
&gt; su - riak -c "/path/to/your/riak/dev2/bin/riak $DAEMON\_ARGS" 
&gt; || return 2
&gt; su - riak -c "/path/to/your/riak/dev3/bin/riak $DAEMON\_ARGS" 
&gt; || return 2
&gt; su - riak -c "/path/to/your/riak/dev4/bin/riak $DAEMON\_ARGS" 
&gt; || return 2
&gt; 
&gt; it should start all your Riak nodes on boot.
&gt; 
&gt; On 07/11/12 15:28, Kevin Burton wrote:
&gt;&gt; The problem I see is that since this script is just functions if I 
&gt;&gt; run it then it will do nothing as the functions are not called. Is 
&gt;&gt; there some kind of "include" that I am missing?
&gt;&gt; 
&gt;&gt; Thank you for the link for the tutorial. I am still not sure what the 
&gt;&gt; sequence should be for calling your script on startup. All of the 
&gt;&gt; examples that I have seen startup a single executable. It looks like 
&gt;&gt; I need to either include your script into another script and start it or
.
&gt;&gt; . . .
&gt; 
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; 
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

