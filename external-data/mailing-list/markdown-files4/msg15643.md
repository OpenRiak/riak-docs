---
title: "Re: Riak Search Production Configuration"
description: ""
project: community
lastmod: 2015-02-05T11:05:15-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15643"
mailinglist_parent_id: "msg15641"
author_name: "Luc Perkins"
project_section: "mailinglistitem"
sent_date: 2015-02-05T11:05:15-08:00
---


Nirav,

Could you possibly detail the steps you used to upload the schema, adjust
the bucket properties, etc.? That would help us identify the issue.

Luc

On Thu, Feb 5, 2015 at 9:42 AM, Nirav Shah  wrote:

&gt; Hi Shawn,
&gt; Thanks for the response. To give you some background
&gt;
&gt; 1. We are using custom schema with default bucket type
&gt; 2. I have the search set to on:)
&gt; 3. I have associated BucketProperties/Index to my buckets..
&gt; 4. What i am seeing is, i am getting data back, but for some reason i am
&gt; not getting the entire set. When i query RIAK i see the data, however when
&gt; i query the solr indexes, its missing that data. At this point, i don't
&gt; know what can cause this and am looking for people who might have faced
&gt; similar issues.
&gt;
&gt; My default config is just changing search=on in riak.conf, changed the JVM
&gt; settings in riak.conf for Solr.
&gt;
&gt;
&gt; Would appreciate any pointers and best practice around settings for Riak
&gt; Search and AAE in production cluster that i should add that folks have
&gt; running in production cluster.
&gt;
&gt;
&gt;
&gt; Regards,
&gt; Nirav
&gt;
&gt;
&gt; ------------------------------
&gt; \*From:\* Shawn Debnath 
&gt; \*To:\* Nirav Shah ; "riak-users@lists.basho.com" &lt;
&gt; riak-users@lists.basho.com&gt;
&gt; \*Sent:\* Thursday, February 5, 2015 9:13 AM
&gt;
&gt; \*Subject:\* Re: Riak Search Production Configuration
&gt;
&gt; Hi Nirav,
&gt;
&gt; About your last point. Just yesterday I started playing with Search 2.0
&gt; (solr) and riak. Basho did a good job at integrating the solr platform but
&gt; docs are sometimes misleading. One thing I found out was the using the
&gt; default schema provided by Basho, if you are using CRDTs, your fields are
&gt; suffixed with \_register, \_counter, \_set. This link (
&gt; http://docs.basho.com/riak/latest/dev/search/search-data-types/) has a
&gt; good set of examples but best is to experiment. I ended up diving into the
&gt; data dir of solar and grep’ed for parts of my field names to figure out
&gt; what it actually was. When running queries, solr/riak will not let you know
&gt; that fields are incorrect, it just doesn’t have any data for those so it
&gt; returns no search results.
&gt;
&gt; Good luck.
&gt;
&gt; Shawn
&gt;
&gt; PS. Be sure to have search=on in riak.conf :)
&gt;
&gt;
&gt;
&gt; On 2/5/15, 7:34 AM, "Nirav Shah"  wrote:
&gt;
&gt; Hi All,
&gt; Just wanted to check what kind of configuration settings does everyone use
&gt; in production clustered environment for Riak Search/AAE and if someone can
&gt; share some experience over it? We currently have a 2g memory allocated to
&gt; Solr and are currently just using the default parameters from riak.conf.
&gt;
&gt; What we have seen so far is that there is data in RIAK but somehow,
&gt; Solr/Riak search does not return it. I am trying to find out what can cause
&gt; this and am i missing some kind of configuration settings.
&gt;
&gt;
&gt;
&gt; Any response would be appreciated.
&gt;
&gt;
&gt; Regards,
&gt; Nirav
&gt;
&gt;
&gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

