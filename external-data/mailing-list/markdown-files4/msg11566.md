---
title: "Re: Lots of sparse columns. Efficient like Cassandra? Some measures	of my dataset"
description: ""
project: community
lastmod: 2013-07-17T05:27:21-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11566"
mailinglist_parent_id: "msg11565"
author_name: "Jeremiah Peschka"
project_section: "mailinglistitem"
sent_date: 2013-07-17T05:27:21-07:00
---




--
Jeremiah Peschka - Founder, Brent Ozar Unlimited
MCITP: SQL Server 2008, MVP
Cloudera Certified Developer for Apache Hadoop

On Jul 17, 2013, at 4:38 AM, gbrits  wrote:

&gt; Somewhere (can't find it now) I've read that Riak, like Cassandra could be
&gt; classified as a column store. 

That is incorrect. Riak is a key value database where the value is an opaque 
blob.

&gt; 
&gt; This is just a name of course but what I understand from Cassandra is that
&gt; this allows for space-efficient encoding of column-values. Basically storage
&gt; is surrounded around columns instead of rows, allowing for different
&gt; persistence strategies on a per-column, or column-family, basis. Moreover,
&gt; it would allow for zero storage overhead for non-existent column values.
&gt; I.e: basically allowing for efficient storage of sparse data-sets.
&gt; 
&gt; Does Riak have this property as well?

No. Riak will happily store whatever you throw at it. That being said, most 
good serialization libraries will leave off nullable properties.

&gt; 
&gt; More specifically, I've got a datastructure on paper with the following
&gt; properties, when mapped to riak nomenclature:
&gt; 
&gt; - ~ 1.000.000 keys (will not grow)
&gt; - ~ 1.000 columns. (may grow)
&gt; - 1 particular key has a median of ~50 columns. In other words the entire
&gt; set is ~ 95% sparse.
&gt; - Wherever a key has a value for a particular column, that value is always
&gt; exactly a String (base 255) of 4KB length.
&gt; - the 4KB values themselves are pretty 'sparse' so would benefit a lot from
&gt; run-length encoding. Is this supported out of the box?

See above.

&gt; 
&gt; Given these properties how would Riak hold up? Hard to say of course, but
&gt; I'm looking for some general advice. 

Riak objects should be no more than ~10MB for performance reasons. You should 
be safe. 

&gt; 
&gt; Thanks. 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; --
&gt; View this message in context: 
&gt; http://riak-users.197444.n3.nabble.com/Lots-of-sparse-columns-Efficient-like-Cassandra-Some-measures-of-my-dataset-tp4028367.html
&gt; Sent from the Riak Users mailing list archive at Nabble.com.
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

