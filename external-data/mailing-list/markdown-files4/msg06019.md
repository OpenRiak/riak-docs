---
title: "Re: Delete operation not allowed. How to change it?"
description: ""
project: community
lastmod: 2011-12-21T10:57:01-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06019"
mailinglist_parent_id: "msg06016"
author_name: "Ryan Zezeski"
project_section: "mailinglistitem"
sent_date: 2011-12-21T10:57:01-08:00
---


Jammy,

The reason why is an implementation detail but is done to protect users from 
unknowingly performing a potentially costly operation. The root issue is that 
buckets are a logical idea in Riak, not physical. Deleting a bucket requires 
traversing all keys in the DB and performing a delete on each match 
individually. It's not a simple nor atomic operation.

HTH,
-Ryan 

[Sent from my iPhone]

On Dec 21, 2011, at 1:03 AM, Jammy  wrote:

&gt; Thanks Alexander.
&gt; 
&gt; But can someone tell me why? Isn't it a good way to do purge operation based 
&gt; on bucket?
&gt; 
&gt; 
&gt; On 21 Dec, 2011, at 1:38 PM, Alexander Sicular wrote:
&gt; 
&gt;&gt; You can't delete a bucket. Period. You have to iterate over each key in a 
&gt;&gt; bucket. 
&gt;&gt; 
&gt;&gt; Cheers, Alexander 
&gt;&gt; 
&gt;&gt; @siculars on twitter
&gt;&gt; http://siculars.posterous.com
&gt;&gt; 
&gt;&gt; Sent from my iRotaryPhone
&gt;&gt; 
&gt;&gt; On Dec 21, 2011, at 0:25, Jammy  wrote:
&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; Hi~@list,
&gt;&gt;&gt; 
&gt;&gt;&gt; I'm new to riak. When I use HTTP API to delete a bucket, I got a response 
&gt;&gt;&gt; as following.
&gt;&gt;&gt; HTTP/1.1 405 Method Not Allowed [Server: MochiWeb/1.1 WebMachine/1.9.0 
&gt;&gt;&gt; (someone had painted it blue), Date: Wed, 21 Dec 2011 05:24:33 GMT, 
&gt;&gt;&gt; Content-Length: 0, Allow: HEAD, GET, PUT]
&gt;&gt;&gt; 
&gt;&gt;&gt; Is there a way to make Delete operation allowed?
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; Thanks
&gt;&gt;&gt; Jammy
&gt;&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; 
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

