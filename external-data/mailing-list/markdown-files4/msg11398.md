---
title: "RE: http access to Riak objects"
description: ""
project: community
lastmod: 2013-07-03T22:58:14-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11398"
mailinglist_parent_id: "msg11397"
author_name: "Sanjeev Neelarapu"
project_section: "mailinglistitem"
sent_date: 2013-07-03T22:58:14-07:00
---


Thanks Hector,

I was trying to download with QSA but there was something went wrong in 
generating the signature. After correcting it I could download it.

Thanks,
Sanjeev

-----Original Message-----
From: Hector Castro [mailto:hec...@basho.com] 
Sent: Wednesday, July 03, 2013 10:29 PM
To: Sanjeev Neelarapu
Cc: Alexander Moore; riak-users@lists.basho.com
Subject: Re: http access to Riak objects

Sanjeev,

Is your goal to have the resource be accessible via query string 
authentication, or just publicly accessible? Asking because your example URL 
contains the query string authentication parameters.

http://docs.basho.com/riakcs/latest/cookbooks/Authentication/#Query-String-Authentication

Either way, I attempted to reproduce your steps locally and could download the 
file from CS via curl. Can you take a look and see if I did anything 
differently?

https://gist.github.com/hectcastro/5920366

--
Hector


On Wed, Jul 3, 2013 at 2:41 AM, Sanjeev Neelarapu 
 wrote:
&gt; Thanks Alex for your quick response.
&gt;
&gt; I have made the object as public as per your instructions:
&gt;
&gt; [root@Rhel63-Sanjeev ~]# s3cmd setacl -P
&gt; s3://imagestore/template/tmpl/1/5/centos56-x86\_64-xen/centos56-x86\_64.
&gt; vhd.bz2
&gt;
&gt; s3://imagestore/template/tmpl/1/5/centos56-x86\_64-xen/centos56-x86\_64.vhd.bz2:
&gt; ACL set to Public [1 of 1]
&gt;
&gt;
&gt;
&gt; However downloading this object still says "Access Denied". URL being 
&gt; fired
&gt; is:
&gt;
&gt; http://10.147.29.57:8080/imagestore/template/tmpl/1/5/centos56-x86\_64-
&gt; xen/centos56-x86\_64.vhd.bz2?Expires=1372856948&AWSAccessKeyId=9M7I6JPY
&gt; ZHDNLG43TWCD&Signature=fQNuyFYMnNdLwv64XTj+WsC2U7s=
&gt;
&gt;
&gt;
&gt; Thanks,
&gt;
&gt; Sanjeev
&gt;
&gt;
&gt;
&gt; From: Alexander Moore [mailto:moore.a...@gmail.com]
&gt; Sent: Tuesday, July 02, 2013 7:20 PM
&gt; To: Sanjeev Neelarapu
&gt; Cc: riak-users@lists.basho.com
&gt; Subject: Re: http access to Riak objects
&gt;
&gt;
&gt;
&gt; Hi Sanjeev,
&gt;
&gt;
&gt;
&gt; By default, uploaded objects will not be publicly available. To make 
&gt; them available you have to set the Access Control List to allow public 
&gt; reads for all users.
&gt;
&gt; If you are using s3cmd you can do this with: s3cmd -c .s3cfgfile 
&gt; setacl --acl-public s3://BUCKET/OBJECT
&gt;
&gt;
&gt;
&gt; If you need to do this for everything in a bucket, you should then 
&gt; look into using "Bucket Policies" to automatically set public access.
&gt;
&gt; Your bucket policy would look something like 
&gt; https://gist.github.com/alexmoore/5909408, and then you could apply 
&gt; the policy using s3cmd: s3cmd -c .s3cfg setpolicy 
&gt; public-access-bucket-policy.json s3://BUCKET
&gt;
&gt;
&gt;
&gt; Thanks,
&gt;
&gt; Alex
&gt;
&gt;
&gt;
&gt;
&gt;
&gt; On Tue, Jul 2, 2013 at 8:32 AM, Sanjeev Neelarapu 
&gt;  wrote:
&gt;
&gt; Hi,
&gt;
&gt;
&gt;
&gt; Could someone help me in providing http access to objects stored in 
&gt; the bucket?
&gt;
&gt;
&gt;
&gt; I have Riak and Riak-CS installed on a linux machine. Created bucket 
&gt; and pushed some files to the bucket using s3cmd. However downloading 
&gt; the objects using http URL is failing.
&gt;
&gt;
&gt;
&gt; Following is the object path stored in the bucket "imagestore":
&gt;
&gt; s3://imagestore/template/tmpl/1/5/centos56-x86\_64-xen/centos56-x86\_64.
&gt; vhd.bz2
&gt;
&gt;
&gt;
&gt; Could anyone specify the way to download it using http access?
&gt;
&gt;
&gt;
&gt; ACL on the bucket:
&gt;
&gt;
&gt;
&gt; [root@Rhel63-Sanjeev ~]# s3cmd info s3://imagestore
&gt;
&gt; s3://imagestore/ (bucket):
&gt;
&gt; Location: us-east-1
&gt;
&gt; ACL: admin: FULL\_CONTROL
&gt;
&gt;
&gt;
&gt;
&gt;
&gt; Thanks,
&gt;
&gt; Sanjeev
&gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
&gt;
&gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

