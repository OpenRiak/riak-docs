---
title: "Problem with Solr Search"
description: ""
project: community
lastmod: 2017-03-31T21:40:29-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg18113"
author_name: "Nguyễn Văn Nghĩa Em"
project_section: "mailinglistitem"
sent_date: 2017-03-31T21:40:29-07:00
---


Dear All,

I use Riak for my company's production, this is my environment:
- Server: cluster of 5 Riak nodes.
- Each node have the same hardware resource: c4.2xlarge amazon instance
- Riak version: 2.1.1
- Backend: Bitcask
- Search enabled via yokozuna
- Bucket type setting:

&gt; young\_vclock: 20
&gt; w: quorum
&gt; small\_vclock: 50
&gt; rw: quorum
&gt; r: quorum
&gt; pw: 0
&gt; precommit: []
&gt; pr: 0
&gt; postcommit: []
&gt; old\_vclock: 86400
&gt; notfound\_ok: true
&gt; n\_val: 3
&gt; linkfun: {modfun,riak\_kv\_wm\_link\_walker,mapreduce\_linkfun}
&gt; last\_write\_wins: false
&gt; dw: quorum
&gt; dvv\_enabled: true
&gt; chash\_keyfun: {riak\_core\_util,chash\_std\_keyfun}
&gt; big\_vclock: 50
&gt; basic\_quorum: false
&gt; backend: &lt;&lt;"bitcask\_mult"&gt;&gt;
&gt; allow\_mult: true
&gt; datatype: map
&gt; active: true
&gt;

I have met some problems:
1. Create search index with error: "Can not create search index on all
nodes". This error appear after 30 seconds timeout. I opened the index
folder in /var/lib/riak/yz, I found that there are some folder without
core.properties file. I don't know whether it is normal or not.

2. When I make a searching load test with Riak Benchmark tool with about
1000 Request Per second. I see about 5-10% error which relate to "Failed to
search". But when I make a load test with Solr HTTP API, the throuput is
about 2000 Request Per Second without any error. It may be the problem in
Riak config. I hope someone can show me why this error happend


Thanks for any help.
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

