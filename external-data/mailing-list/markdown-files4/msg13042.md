---
title: "Re: [Confusing search docs] Enabling search on bucket in Riak 2.0"
description: ""
project: community
lastmod: 2013-11-20T12:49:29-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13042"
mailinglist_parent_id: "msg13025"
author_name: "Kartik Thakore"
project_section: "mailinglistitem"
sent_date: 2013-11-20T12:49:29-08:00
---


Thank you.

I am creating indexes with:

curl -i -XPUT http://192.168.1.10:8098/yz/index/allLogs \
 -H 'content-type: application/json' \
 -d '{"schema" : "\_yz\_default", "bucket" : "logs" }'


But when I check the index with:

 curl -i http://192.168.1.10:8098/yz/index/allLogs

It drops the bucket association

HTTP/1.1 200 OK
Server: MochiWeb/1.1 WebMachine/1.10.5 (jokes are better explained)
Date: Wed, 20 Nov 2013 20:45:21 GMT
Content-Type: application/json
Content-Length: 41

{"name":"allLogs","schema":"\_yz\_default"}

Also

what is going on here

curl -XPUT -H'content-type:application/json'
http://localhost:8098/buckets/people/keys/me \
-d'{ "name\_s" : "kartik" }'

Why not:
curl -XPUT -H'content-type:application/json'
http://localhost:8098/rial/people/me
 \
-d'{ "name\_s" : "kartik" }'



On Tue, Nov 19, 2013 at 5:32 PM, Eric Redmond  wrote:

&gt; Kartik,
&gt;
&gt; Your confusion is understandable, since our docs are not up to date yet
&gt; (and they won't be until closer to the final 2.0 release date). Because of
&gt; this, the docs you're reading correspond to the old version of RiakSearch,
&gt; and not the new Search (codenamed yokozuna). Thus, you cannot rely on the
&gt; docs just yet.
&gt;
&gt; The good news is, we do have some docs for yokozuna on github:
&gt;
&gt; https://github.com/basho/yokozuna/tree/develop/docs
&gt;
&gt; You do have yokozuna enabled by setting `yokozuna = on`. Don't worry about
&gt; those links going to 404, because they aren't relevant at this time.
&gt;
&gt; You do not need to add postcommit hooks. In 2.0.0pre5 you merely need to
&gt; create an index, then associate that index with a bucket (you can
&gt; optionally create a custom solr schema and use that for the index, or you
&gt; can simply use the default schema):
&gt;
&gt; https://github.com/basho/yokozuna/blob/develop/docs/ADMIN.md#index-creation
&gt;
&gt; (note that this will change in the 2.0.0 final release, but it sufficient
&gt; to get started in pre5).
&gt;
&gt; After you've created an index and associated it with a bucket, then you
&gt; need only insert json, xml, or plain text, which will be extracted based on
&gt; the field. If you suffix your json or xml field named with a dynamic field
&gt; parameter, it will be indexed as that type (the list can be found here
&gt; https://github.com/basho/yokozuna/blob/develop/priv/default\_schema.xml).
&gt;
&gt; eg, assuming the bucket "people" has an index associated with the same
&gt; name:
&gt;
&gt; # Add a JSON value:
&gt; curl -XPUT -H'content-type:application/json'
&gt; http://localhost:8098/buckets/people/keys/me \
&gt; -d'{ "name\_s" : "kartik" }'
&gt;
&gt; # perform a search
&gt; curl "http://localhost:8098/search/people?q=name\_s:kar\*"
&gt;
&gt; Hope that helps. We'll updating the docs in the next month.
&gt;
&gt; Eric
&gt;
&gt; On Nov 19, 2013, at 7:28 AM, Kartik Thakore 
&gt; wrote:
&gt;
&gt; Hello,
&gt;
&gt; I am reviewing Riak 2.0pre5 for use and I am confused with the search
&gt; documentation provided here:
&gt;
&gt; http://docs.basho.com/riak/2.0.0pre5/dev/using/search/
&gt;
&gt; It tells me to enable search:
&gt;
&gt; http://docs.basho.com/riak/2.0.0pre5/ops/advanced/configs/search/
&gt;
&gt; But there is no such file in etc anymore after I use make rel to build
&gt; Riak 2.0
&gt;
&gt; So I enabled yokozuna = on and I think I have it enabled
&gt;
&gt; [RIAK MACHINE]:8098 is showing:
&gt;
&gt; yz\_wm\_extract
&gt; yz\_wm\_index
&gt; yz\_wm\_schema
&gt; yz\_wm\_search
&gt; yz\_wm\_search
&gt; yz\_wm\_search
&gt;
&gt; But these links go to 404 pages
&gt;
&gt; Now how do I set up search on a bucket? Do I still need to do post commit
&gt; hooks on the buckets?
&gt;
&gt; Thank You for your help
&gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
&gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

