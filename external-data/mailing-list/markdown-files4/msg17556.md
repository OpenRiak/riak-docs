---
title: "Re: How to best store arbitrarily large Java objects"
description: ""
project: community
lastmod: 2016-07-22T01:23:25-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17556"
mailinglist_parent_id: "msg17555"
author_name: "Russell Brown"
project_section: "mailinglistitem"
sent_date: 2016-07-22T01:23:25-07:00
---



On 22 Jul 2016, at 09:12, Henning Verbeek  wrote:

&gt; Alex,
&gt; thanks for the very quick response.
&gt; 
&gt; On Thu, Jul 21, 2016 at 5:36 PM, Alex Moore  wrote:
&gt;&gt;&gt; I'm beginning to think that I'll need to remodel my data and use CRDTs
&gt;&gt;&gt; for individual fields such as the `TreeMap`. Would that be a better
&gt;&gt;&gt; way?
&gt;&gt; 
&gt;&gt; 
&gt;&gt; This sounds like a plausible idea. If you do a lot of possibly conflicting
&gt;&gt; updates to the Tree, then a CRDT map would be the way to go. You could
&gt;&gt; reuse the key from the main object, and just put it in the new
&gt;&gt; buckettype/bucket.
&gt; 
&gt; Looking at the 
&gt; [documentation](http://docs.basho.com/riak/kv/2.1.4/developing/data-types/maps/)
&gt; I assume there are no limits to the amount of entries, right?

There is a size limit as a map is just a riak object like any other. We’re 
working on decomposed CRDTs, where the Set/Map/etc are split across many keys. 
We expect Sets are coming soon, Maps are a little further out.

&gt; 
&gt;&gt; If you don't need to update the tree much, you could also just serialize the
&gt;&gt; tree into it's own object - split up the static data and the often updated
&gt;&gt; data, and put them in different buckets that share the same key.
&gt; 
&gt; The tree is built once and read often, rarely appended to. The problem
&gt; with splitting up the object is that the tree makes up about 95% of
&gt; the size, so unless I can split up the tree, it wont help much.

Splitting up CRDTs that are related is probably going to be a problem too, as 
they need to share some common causal information to merge correctly. See above.

&gt; 
&gt; Thanks again!
&gt; Henning
&gt; 
&gt; PS: It'd be great to have a `Converter` that can be instructed to map
&gt; fields to CRDT through annotations :)

Is there not a java converter that maps an object to a CRDT map already? That 
would seem like a nice thing to have, though you’d be limited in the types of 
your fields to sets/registers/booleans/counters/maps it should work nicely.

&gt; 
&gt; -- 
&gt; My other signature is a regular expression.
&gt; http://www.pray4snow.de
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

