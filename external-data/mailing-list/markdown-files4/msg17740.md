---
title: "Re: throughput test & connection fail"
description: ""
project: community
lastmod: 2016-11-14T04:28:27-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17740"
mailinglist_parent_id: "msg17739"
author_name: "Magnus Kessler"
project_section: "mailinglistitem"
sent_date: 2016-11-14T04:28:27-08:00
---


On 12 November 2016 at 03:00, Jing Liu  wrote:

&gt; Hi,
&gt;
&gt; When I try to simply test the throughput of Risk in the setting that
&gt; just start a single node and utilize two clients to issue requests, I
&gt; got connection refused after the client's thread of sending GET
&gt; request overcome about 400. Actually the server crashed. Why is it and
&gt; how can I fix?
&gt;
&gt; Thanks
&gt; J.
&gt;

Hi Jing,

You do not specify exactly how you perform your throughput test, so let me
first ask a few questions. How many concurrent requests are active against
the server at any given time? Can you clarify what you mean by "the server
crashed"? Did the riak process actually terminate?

What hardware environment does Riak run on? Please provide some information
about CPU, memory and most importantly your disk IO subsystem.

How big are the objects that you send to / request from Riak?

Even on moderate hardware, a single node should be able to serve hundreds
of requests per second. However, every system can be pushed to the limits
of what the hardware can support, and Riak is no exception. Depending on
the bottlenecks, an overload can manifest itself in a multitude of
different ways.

For load tests, I recommend to start with a small, sustainable load and
ramp it up to establish which subsystem is the bottleneck. Please monitor
the OS and Riak's performance carefully during the test. Riak exposes many
performance metrics as JSON through its HTTP stats endpoint
(http://:8098/stats).
Consider ingesting these into your favourite monitoring solution. OS
metrics like CPU, network and IO usage should also be collected and
graphed. One easy open source solution that's gaining traction recently is
netdata (https://github.com/firehol/netdata).

Kind Regards,

Magnus

-- 
Magnus Kessler
Client Services Engineer
Basho Technologies Limited

Registered Office - 8 Lincolnâ€™s Inn Fields London WC2A 3BP Reg 07970431
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

