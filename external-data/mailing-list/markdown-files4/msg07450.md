---
title: "Re: Riak Overload Behavior"
description: ""
project: community
lastmod: 2012-05-14T16:48:17-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07450"
mailinglist_parent_id: "msg07449"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2012-05-14T16:48:17-07:00
---


Hi Sean,

Are you running your test suite against 1.1.x? We have seen 400 errors in
the past where the client in a keep-alive connection emitted additional
CRLFs or other whitespace beyond the ones required for the request. The
next time a request was made, the 400 error was already on the wire because
the HTTP parser failed to recognize the (non-existent) request in the
additional whitespace. This error should be fixed already in 1.1.x.

On Mon, May 14, 2012 at 5:45 PM, Sean O'Connor  wrote:

&gt; Hello,
&gt;
&gt; I've been seeing some strange behavior from Riak and any help or feedback
&gt; would be very welcome.
&gt;
&gt; In particular, we've been seeing pseudo-radom 400 errors from Riak when we
&gt; run our test suite. Our test suite hits riak pretty hard to test various
&gt; queries and situations in our app and the errors seem to happen a few
&gt; seconds after the CPUs on the testing machine get saturated. I say
&gt; psuodo-random as the errors tends to happen in a particularly riak heavy
&gt; portion of our test suite but the specific call to riak that errors is
&gt; often different (reads, writes, map/reduce jobs, 2i queries). The thing
&gt; that is really baffling about these errors is there doesn't seem to be any
&gt; information attached other than the 400 message and nothing shows up in any
&gt; of the riak logs.
&gt;
&gt; If we introduce a 2 second delay between tests in our test suite, the
&gt; problem goes away but obviously slows down our test suite quite a bit.
&gt; Aside from that, I am concerned about this potentially happening in our
&gt; production cluster.
&gt;
&gt; Is this more or less the expected behavior of Riak when it gets
&gt; overwhelmed or does it sound like there is something that should be
&gt; investigated further here? I suspect that I can create a script to
&gt; replicate the problem but if this is somewhat expected then I won't waste
&gt; the time writing it.
&gt;
&gt; Thanks!
&gt;
&gt; --
&gt; Sean O'Connor
&gt; Co-Founder/CTO
&gt; FocusLab 
&gt; (845)669-0883
&gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
&gt;


-- 
Sean Cribbs 
Software Engineer
Basho Technologies, Inc.
http://basho.com/
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

