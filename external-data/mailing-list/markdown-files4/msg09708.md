---
title: "Re: Riak startup failing."
description: ""
project: community
lastmod: 2012-12-28T19:59:58-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg09708"
mailinglist_parent_id: "msg09707"
author_name: "Kevin Burton"
project_section: "mailinglistitem"
sent_date: 2012-12-28T19:59:58-08:00
---


Thank you for the tips. This definitely gives me something to go on. Some 
questions though. 
One, what is the path to the data/ring directory that is to be removed? Two, I 
don't understand what step 4 is trying to accomplish. Mark down? Riak-admin 
down? Finally, I also need some elaboration on 'Force-remove'.

On Dec 28, 2012, at 8:55 PM, Eric Redmond  wrote:

&gt; It's not documented well, but hopefully these more specific steps will help.
&gt; 
&gt; https://github.com/basho/basho\_docs/issues/28
&gt; 
&gt; Eric
&gt; 
&gt; On Dec 28, 2012, at 12:57 PM, rkevinbur...@charter.net wrote:
&gt; 
&gt;&gt; I am trying to get a cluster going and I have successfully renamed all of 
&gt;&gt; the listening addresses and the names of the riak nodes but it appears that 
&gt;&gt; none of the node will start. I get the following error in console.log. Any 
&gt;&gt; idea what this means?
&gt;&gt; 
&gt;&gt; 2012-12-28 14:41:29.912 [info] &lt;0.7.0&gt; Application lager started on node 
&gt;&gt; 'riak@172.16.33.107'
&gt;&gt; 2012-12-28 14:41:30.048 [info] 
&gt;&gt; &lt;0.151.0&gt;@riak\_core\_ring\_manager:reload\_ring:226 Upgrading legacy ring
&gt;&gt; 2012-12-28 14:41:30.281 [error] &lt;0.164.0&gt; gen\_server riak\_core\_capability 
&gt;&gt; terminated with reason: no function clause matching 
&gt;&gt; orddict:fetch('riak@172.16.33.107', []) line 72
&gt;&gt; 
&gt;&gt; The crash.log
&gt;&gt; 
&gt;&gt; 2012-12-28 14:41:30 =ERROR REPORT====
&gt;&gt; \*\* Generic server riak\_core\_capability terminating
&gt;&gt; \*\* Last message in was 
&gt;&gt; {register,{riak\_core,vnode\_routing},{capability,[proxy,legacy],legacy,{riak\_core,legacy\_vnode\_routing,[{true,legacy},{false,proxy}]}}}
&gt;&gt; \*\* When Server state == {state,[],[],[],[]}
&gt;&gt; \*\* Reason for termination ==
&gt;&gt; \*\* 
&gt;&gt; {function\_clause,[{orddict,fetch,['riak@172.16.33.107',[]],[{file,"orddict.erl"},{line,72}]},{riak\_core\_capability,renegotiate\_capabilities,1,[{file,"src/riak\_core\_capability.erl"},{line,415}]},{riak\_core\_capability,handle\_call,3,[{file,"src/riak\_core\_capability.erl"},{line,208}]},{gen\_server,handle\_msg,5,[{file,"gen\_server.erl"},{line,588}]},{proc\_lib,init\_p\_do\_apply,3,[{file,"proc\_lib.erl"},{line,227}]}]}
&gt;&gt; 
&gt;&gt; Erlang,log.1
&gt;&gt; 
&gt;&gt; =====
&gt;&gt; ===== LOGGING STARTED Fri Dec 28 14:41:28 CST 2012
&gt;&gt; =====
&gt;&gt; Exec: /usr/lib/riak/erts-5.9.1/bin/erlexec -boot 
&gt;&gt; /usr/lib/riak/releases/1.2.1/riak -embedded -config 
&gt;&gt; /etc/riak/app.config -pa /usr/lib/riak/lib/basho-patches 
&gt;&gt; -args\_file /etc/riak/vm.args -- console
&gt;&gt; 
&gt;&gt; Root: /usr/lib/riak
&gt;&gt; 
&gt;&gt; Erlang R15B01 (erts-5.9.1) [source] [64-bit] [async-threads:64] 
&gt;&gt; [kernel-poll:true]
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; \*\* /usr/lib/riak/lib/basho-patches/etop\_txt.beam hides 
&gt;&gt; /usr/lib/riak/lib/observer-1.1/ebin/etop\_txt.beam
&gt;&gt; 
&gt;&gt; \*\* Found 1 name clashes in code paths
&gt;&gt; 
&gt;&gt; 14:41:29.912 [info] Application lager started on node 'riak@172.16.33.107'
&gt;&gt; 
&gt;&gt; 14:41:30.048 [info] Upgrading legacy ring
&gt;&gt; 
&gt;&gt; 14:41:30.281 [error] gen\_server riak\_core\_capability terminated with reason: 
&gt;&gt; no function clause matching orddict:fetch('riak@172.16.33.107', []) line 72
&gt;&gt; 
&gt;&gt; /usr/lib/riak/lib/os\_mon-2.2.9/priv/bin/memsup: Erlang has closed.
&gt;&gt; Erlang has closed
&gt;&gt; {"Kernel pid 
&gt;&gt; terminated",application\_controller,"{application\_start\_failure,riak\_core,{bad\_return,{{riak\_core\_app,start,[normal,[]]},{'EXIT',{{function\_clause,[{orddict,fetch,['riak@172.16.33.107',[]],[{file,[111,114,100,100,105,99,116,46,101,114,108]},{line,72}]},{riak\_core\_capability,renegotiate\_capabilities,1,[{file,[115,114,99,47,114,105,97,107,95,99,111,114,101,95,99,97,112,97,98,105,108,105,116,121,46,101,114,108]},{line,415}]},{riak\_core\_capability,handle\_call,3,[{file,[115,114,99,47,114,105,97,107,95,99,111,114,101,95,99,97,112,97,98,105,108,105,116,121,46,101,114,108]},{line,208}]},{gen\_server,handle\_msg,5,[{file,[103,101,110,95,115,101,114,118,101,114,46,101,114,108]},{line,588}]},{proc\_lib,init\_p\_do\_apply,3,[{file,[112,114,111,99,95,108,105,98,46,101,114,108]},{line,227}]}]},{gen\_server,call,[riak\_core\_capability,{register,{riak\_core,vnode\_routing},{capability,[proxy,legacy],legacy,{riak\_core,legacy\_vnode\_routing,[{true,legacy},{false,proxy}]}}},infinity]}}}}}}"}
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; Crash dump was written to: /var/log/riak/erl\_crash.dump
&gt;&gt; 
&gt;&gt; 
&gt;&gt; Kernel pid terminated (application\_controller) 
&gt;&gt; ({application\_start\_failure,riak\_core,{bad\_return,{{riak\_core\_app,start,[normal,[]]},{'EXIT',{{function\_clause,[{orddict,fetch,['riak@172.16.33.107',[]
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; 
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

