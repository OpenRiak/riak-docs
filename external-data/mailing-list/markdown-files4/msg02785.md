---
title: "Re: PBC client doesn't stop"
description: ""
project: community
lastmod: 2011-03-29T12:11:59-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02785"
mailinglist_parent_id: "msg02784"
author_name: "Russell Brown"
project_section: "mailinglistitem"
sent_date: 2011-03-29T12:11:59-07:00
---


On 29 Mar 2011, at 19:36, Keith Dreibelbis  wrote:

&gt; Hi Russel,
&gt; 
&gt; I know a System.exit() would work, but I always feel like that's overkill for 
&gt; working around rogue threads. 
&gt; A shutdown/stop/close on the client would be better, or mark the timer thread 
&gt; as a daemon thread like Kresten suggested. 

Daemonize is probably the simplest for this case. Might be able to sneak it 
into the 0.14.1 release that as coming up soon. 
&gt; 
&gt; Keith
&gt; 
&gt; On Tue, Mar 29, 2011 at 12:01 AM, Russell Brown  wrote:
&gt; On 29 Mar 2011, at 03:17, Keith Dreibelbis wrote:
&gt; 
&gt; &gt; Hi riak-users,
&gt; &gt;
&gt; &gt; I'm trying out the java protocol buffers client, and it works fine. 
&gt; &gt; However, it is preventing my process from exiting. When I used the http 
&gt; &gt; client from the same spot in code, the process exited, but switching to PBC 
&gt; &gt; caused it to hang on exit. Usually this behavior means there is a thread 
&gt; &gt; being spawned that is still running in the background. I wonder if there's 
&gt; &gt; a way to tell the PBC RiakClient that I'm done with it, and it can close? 
&gt; &gt; I don't see anything like that in the available methods.
&gt; 
&gt; There is a Timer that shuts down any open and inactive sockets. It will stop 
&gt; if you issue a System.exit(0) at the end of your program. I could add an 
&gt; explicit "shutdown" method to the protocol buffers client, too.
&gt; 
&gt; &gt;
&gt; &gt;
&gt; &gt; Keith
&gt; &gt;
&gt; &gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; 
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

