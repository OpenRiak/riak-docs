---
title: "Re: Maybe a bug of riak_core?"
description: ""
project: community
lastmod: 2014-04-18T01:40:26-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14113"
mailinglist_parent_id: "msg14112"
author_name: "chuang"
project_section: "mailinglistitem"
sent_date: 2014-04-18T01:40:26-07:00
---


Sorry,I miss up,since Last and [{\_, N}|Rest] is not the same list.


On Fri, Apr 18, 2014 at 4:06 PM, chuang  wrote:

&gt; In the source of riak\_core\_gossip(version 1.4.8),there is a function
&gt; source below:
&gt;
&gt; 451 attempt\_simple\_transfer(Seed, Ring, [{\_, N}|Rest], TargetN, Exit, Idx,
&gt; Last) -&gt;
&gt; 452 %% just keep track of seeing this node
&gt; 453 attempt\_simple\_transfer(Seed, Ring, Rest, TargetN, Exit, Idx+1,
&gt; 454 lists:keyreplace(N, 1, Last, {N, Idx}));
&gt;
&gt; I think the source
&gt; 451 attempt\_simple\_transfer(Seed, Ring, [{\_, N}|Rest], TargetN, Exit, Idx,
&gt; Last) -&gt;
&gt;
&gt; should be:
&gt; 451 attempt\_simple\_transfer(Seed, Ring, [{N, \_}|Rest], TargetN, Exit, Idx,
&gt; Last) -&gt;
&gt;
&gt; since in line 454,the lists:keyreplace function operate key on position 1.
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

