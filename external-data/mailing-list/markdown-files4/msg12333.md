---
title: "Riak cluster all nodes down"
description: ""
project: community
lastmod: 2013-09-20T07:49:07-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12333"
author_name: "Edgar Veiga"
project_section: "mailinglistitem"
sent_date: 2013-09-20T07:49:07-07:00
---


Hello everyone,

Please lend me a hand here... I'm running a riak cluster of 6 machines
(version 1.4.1).

Suddenly all the nodes in the cluster went down and they are refusing to go
up again. It keeps crashing all the the time, this is just a sample of what
I get when starting a node:

2013-09-20 15:16:14.016 [info] &lt;0.7.0&gt; Application lager started on node '
riak@192.168.20.107'
2013-09-20 15:16:14.024 [info] &lt;0.7.0&gt; Application sasl started on node '
riak@192.168.20.107'
2013-09-20 15:16:14.026 [info] &lt;0.7.0&gt; Application crypto started on node '
riak@192.168.20.107'
2013-09-20 15:16:14.026 [info] &lt;0.7.0&gt; Application public\_key started on
node 'riak@192.168.20.107'
2013-09-20 15:16:14.029 [info] &lt;0.7.0&gt; Application ssl started on node '
riak@192.168.20.107'
2013-09-20 15:16:14.031 [info] &lt;0.7.0&gt; Application riak\_sysmon started on
node 'riak@192.168.20.107'
2013-09-20 15:16:14.036 [info] &lt;0.7.0&gt; Application os\_mon started on node '
riak@192.168.20.107'
2013-09-20 15:16:14.044 [info] &lt;0.7.0&gt; Application runtime\_tools started on
node 'riak@192.168.20.107'
2013-09-20 15:16:14.047 [info] &lt;0.7.0&gt; Application erlang\_js started on
node 'riak@192.168.20.107'
2013-09-20 15:16:14.058 [info] &lt;0.7.0&gt; Application inets started on node '
riak@192.168.20.107'
2013-09-20 15:16:14.059 [info] &lt;0.7.0&gt; Application mochiweb started on node
'riak@192.168.20.107'
2013-09-20 15:16:14.063 [info] &lt;0.7.0&gt; Application webmachine started on
node 'riak@192.168.20.107'
2013-09-20 15:16:14.064 [info] &lt;0.7.0&gt; Application basho\_stats started on
node 'riak@192.168.20.107'
2013-09-20 15:16:14.067 [info] &lt;0.7.0&gt; Application bitcask started on node '
riak@192.168.20.107'
2013-09-20 15:16:14.152 [info]
&lt;0.162.0&gt;@riak\_core\_capability:process\_capability\_changes:530 New
capability: {riak\_core,vnode\_routing} = proxy
2013-09-20 15:16:14.160 [info]
&lt;0.162.0&gt;@riak\_core\_capability:process\_capability\_changes:530 New
capability: {riak\_core,staged\_joins} = true
2013-09-20 15:16:14.166 [info]
&lt;0.162.0&gt;@riak\_core\_capability:process\_capability\_changes:530 New
capability: {riak\_core,resizable\_ring} = true
2013-09-20 15:16:14.172 [info] &lt;0.7.0&gt; Application riak\_core started on
node 'riak@192.168.20.107'
2013-09-20 15:16:14.177 [info]
&lt;0.162.0&gt;@riak\_core\_capability:process\_capability\_changes:530 New
capability: {riak\_pipe,trace\_format} = ordsets
2013-09-20 15:16:14.270 [info] &lt;0.522.0&gt;@riak\_kv\_env:doc\_env:42 Environment
and OS variables:
2013-09-20 15:16:14.446 [notice] &lt;0.41.0&gt;@lager\_app:119 Deprecated
lager\_file\_backend config detected, please consider updating it
2013-09-20 15:16:14.786 [info] &lt;0.573.0&gt;@riak\_core:wait\_for\_service:470
Waiting for service riak\_kv to start (0 seconds)
2013-09-20 15:16:14.821 [info] &lt;0.590.0&gt;@riak\_kv\_js\_vm:init:76 Spidermonkey
VM (thread stack: 16MB, max heap: 8MB, pool: riak\_kv\_js\_map) host starting
(&lt;0.590.0&gt;)
2013-09-20 15:16:14.823 [info] &lt;0.591.0&gt;@riak\_kv\_js\_vm:init:76 Spidermonkey
VM (thread stack: 16MB, max heap: 8MB, pool: riak\_kv\_js\_map) host starting
(&lt;0.591.0&gt;)
2013-09-20 15:16:14.825 [info] &lt;0.592.0&gt;@riak\_kv\_js\_vm:init:76 Spidermonkey
VM (thread stack: 16MB, max heap: 8MB, pool: riak\_kv\_js\_map) host starting
(&lt;0.592.0&gt;)
2013-09-20 15:16:14.826 [info] &lt;0.593.0&gt;@riak\_kv\_js\_vm:init:76 Spidermonkey
VM (thread stack: 16MB, max heap: 8MB, pool: riak\_kv\_js\_map) host starting
(&lt;0.593.0&gt;)
2013-09-20 15:16:14.827 [info] &lt;0.594.0&gt;@riak\_kv\_js\_vm:init:76 Spidermonkey
VM (thread stack: 16MB, max heap: 8MB, pool: riak\_kv\_js\_map) host starting
(&lt;0.594.0&gt;)
2013-09-20 15:16:14.829 [info] &lt;0.595.0&gt;@riak\_kv\_js\_vm:init:76 Spidermonkey
VM (thread stack: 16MB, max heap: 8MB, pool: riak\_kv\_js\_map) host starting
(&lt;0.595.0&gt;)
2013-09-20 15:16:14.831 [info] &lt;0.596.0&gt;@riak\_kv\_js\_vm:init:76 Spidermonkey
VM (thread stack: 16MB, max heap: 8MB, pool: riak\_kv\_js\_map) host starting
(&lt;0.596.0&gt;)
2013-09-20 15:16:14.833 [info] &lt;0.597.0&gt;@riak\_kv\_js\_vm:init:76 Spidermonkey
VM (thread stack: 16MB, max heap: 8MB, pool: riak\_kv\_js\_map) host starting
(&lt;0.597.0&gt;)
2013-09-20 15:16:14.837 [info] &lt;0.600.0&gt;@riak\_kv\_js\_vm:init:76 Spidermonkey
VM (thread stack: 16MB, max heap: 8MB, pool: riak\_kv\_js\_reduce) host
starting (&lt;0.600.0&gt;)
2013-09-20 15:16:14.841 [info] &lt;0.601.0&gt;@riak\_kv\_js\_vm:init:76 Spidermonkey
VM (thread stack: 16MB, max heap: 8MB, pool: riak\_kv\_js\_reduce) host
starting (&lt;0.601.0&gt;)
2013-09-20 15:16:14.845 [info] &lt;0.602.0&gt;@riak\_kv\_js\_vm:init:76 Spidermonkey
VM (thread stack: 16MB, max heap: 8MB, pool: riak\_kv\_js\_reduce) host
starting (&lt;0.602.0&gt;)
2013-09-20 15:16:14.848 [info] &lt;0.603.0&gt;@riak\_kv\_js\_vm:init:76 Spidermonkey
VM (thread stack: 16MB, max heap: 8MB, pool: riak\_kv\_js\_reduce) host
starting (&lt;0.603.0&gt;)
2013-09-20 15:16:14.850 [info] &lt;0.605.0&gt;@riak\_kv\_js\_vm:init:76 Spidermonkey
VM (thread stack: 16MB, max heap: 8MB, pool: riak\_kv\_js\_reduce) host
starting (&lt;0.605.0&gt;)
2013-09-20 15:16:14.852 [info] &lt;0.606.0&gt;@riak\_kv\_js\_vm:init:76 Spidermonkey
VM (thread stack: 16MB, max heap: 8MB, pool: riak\_kv\_js\_reduce) host
starting (&lt;0.606.0&gt;)
2013-09-20 15:16:14.853 [info] &lt;0.608.0&gt;@riak\_kv\_js\_vm:init:76 Spidermonkey
VM (thread stack: 16MB, max heap: 8MB, pool: riak\_kv\_js\_hook) host starting
(&lt;0.608.0&gt;)
2013-09-20 15:16:14.855 [info] &lt;0.609.0&gt;@riak\_kv\_js\_vm:init:76 Spidermonkey
VM (thread stack: 16MB, max heap: 8MB, pool: riak\_kv\_js\_hook) host starting
(&lt;0.609.0&gt;)
2013-09-20 15:16:14.855 [info]
&lt;0.162.0&gt;@riak\_core\_capability:process\_capability\_changes:530 New
capability: {riak\_kv,vnode\_vclocks} = true
2013-09-20 15:16:14.867 [info]
&lt;0.162.0&gt;@riak\_core\_capability:process\_capability\_changes:530 New
capability: {riak\_kv,legacy\_keylisting} = false
2013-09-20 15:16:14.873 [info]
&lt;0.162.0&gt;@riak\_core\_capability:process\_capability\_changes:530 New
capability: {riak\_kv,listkeys\_backpressure} = true
2013-09-20 15:16:14.884 [info]
&lt;0.162.0&gt;@riak\_core\_capability:process\_capability\_changes:530 New
capability: {riak\_kv,index\_backpressure} = true
2013-09-20 15:16:14.889 [info]
&lt;0.162.0&gt;@riak\_core\_capability:process\_capability\_changes:530 New
capability: {riak\_kv,mapred\_system} = pipe
2013-09-20 15:16:14.900 [info]
&lt;0.162.0&gt;@riak\_core\_capability:process\_capability\_changes:530 New
capability: {riak\_kv,mapred\_2i\_pipe} = true
2013-09-20 15:16:14.905 [info]
&lt;0.162.0&gt;@riak\_core\_capability:process\_capability\_changes:530 New
capability: {riak\_kv,anti\_entropy} = enabled\_v1
2013-09-20 15:16:14.911 [info]
&lt;0.162.0&gt;@riak\_core\_capability:process\_capability\_changes:530 New
capability: {riak\_kv,handoff\_data\_encoding} = encode\_raw
2013-09-20 15:16:14.917 [info]
&lt;0.162.0&gt;@riak\_core\_capability:process\_capability\_changes:530 New
capability: {riak\_kv,object\_format} = v1
2013-09-20 15:16:14.927 [info]
&lt;0.162.0&gt;@riak\_core\_capability:process\_capability\_changes:530 New
capability: {riak\_kv,secondary\_index\_version} = v2
2013-09-20 15:16:14.943 [info]
&lt;0.162.0&gt;@riak\_core\_capability:process\_capability\_changes:530 New
capability: {riak\_kv,vclock\_data\_encoding} = encode\_zlib
2013-09-20 15:16:14.953 [info]
&lt;0.162.0&gt;@riak\_core\_capability:process\_capability\_changes:530 New
capability: {riak\_kv,crdt} = [pncounter]
2013-09-20 15:16:15.011 [warning] &lt;0.6.0&gt; lager\_error\_logger\_h dropped 17
messages in the last second that exceeded the limit of 100 messages/sec
2013-09-20 15:16:15.012 [info]
&lt;0.162.0&gt;@riak\_core\_capability:process\_capability\_changes:530 New
capability: {riak\_control,member\_info\_version} = v1
2013-09-20 15:16:15.022 [info] &lt;0.7.0&gt; Application riak\_control started on
node 'riak@192.168.20.107'
2013-09-20 15:16:15.022 [info] &lt;0.7.0&gt; Application erlydtl started on node '
riak@192.168.20.107'
2013-09-20 15:16:16.013 [error] &lt;0.1209.0&gt; gen\_fsm &lt;0.1209.0&gt; in state
started terminated with reason: no function clause matching
riak\_kv\_vnode:terminate({badarg,[{lists,split,[&lt;&lt;"3"&gt;&gt;,[376793390874373408599387495934666716005045108736,371084400103549569075154352056868735459514122240,...]],...},...]},
undefined) line 851
2013-09-20 15:16:16.013 [error] &lt;0.1209.0&gt; CRASH REPORT Process &lt;0.1209.0&gt;
with 0 neighbours exited with reason: no function clause matching
riak\_kv\_vnode:terminate({badarg,[{lists,split,[&lt;&lt;"3"&gt;&gt;,[376793390874373408599387495934666716005045108736,371084400103549569075154352056868735459514122240,...]],...},...]},
undefined) line 851 in gen\_fsm:terminate/7 line 589
2013-09-20 15:16:16.014 [error] &lt;0.140.0&gt; Supervisor riak\_core\_vnode\_sup
had child undefined started with {riak\_core\_vnode,start\_link,undefined} at
&lt;0.1209.0&gt; exit with reason no function clause matching
riak\_kv\_vnode:terminate({badarg,[{lists,split,[&lt;&lt;"3"&gt;&gt;,[376793390874373408599387495934666716005045108736,371084400103549569075154352056868735459514122240,...]],...},...]},
undefined) line 851 in context child\_terminated
2013-09-20 15:16:16.014 [error] &lt;0.739.0&gt; CRASH REPORT Process
proxy\_riak\_kv\_vnode\_376793390874373408599387495934666716005045108736 with 0
neighbours exited with reason:
{{{function\_clause,[{riak\_kv\_vnode,terminate,[{badarg,[{lists,split,[&lt;&lt;"3"&gt;&gt;,[376793390874373408599387495934666716005045108736,371084400103549569075154352056868735459514122240,365375409332725729550921208179070754913983135744,359666418561901890026688064301272774368452149248,353957427791078050502454920423474793822921162752,348248437020254210978221776545676813277390176256,342539446249430371453988632667878832731859189760,336830455478606531929755488790080852186328203264,331121464707782692405522344912282871640797216768,...]],...},...]},...],...},...]},...},...}
in gen\_server:call/3 line 188
2013-09-20 15:16:16.014 [error] &lt;0.146.0&gt; Supervisor
riak\_core\_vnode\_proxy\_sup had child
{riak\_kv\_vnode,376793390874373408599387495934666716005045108736} started
with riak\_core\_vnode\_proxy:start\_link(riak\_kv\_vnode,
376793390874373408599387495934666716005045108736) at &lt;0.739.0&gt; exit with
reason
{{{function\_clause,[{riak\_kv\_vnode,terminate,[{badarg,[{lists,split,[&lt;&lt;"3"&gt;&gt;,[376793390874373408599387495934666716005045108736,371084400103549569075154352056868735459514122240,365375409332725729550921208179070754913983135744,359666418561901890026688064301272774368452149248,353957427791078050502454920423474793822921162752,348248437020254210978221776545676813277390176256,342539446249430371453988632667878832731859189760,336830455478606531929755488790080852186328203264,331121464707782692405522344912282871640797216768,...]],...},...]},...],...},...]},...},...}
in context child\_terminated
2013-09-20 15:16:16.015 [error] &lt;0.138.0&gt; Supervisor riak\_core\_sup had
child riak\_core\_vnode\_manager started with
riak\_core\_vnode\_manager:start\_link() at &lt;0.161.0&gt; exit with reason
{{function\_clause,[{riak\_kv\_vnode,terminate,[{badarg,[{lists,split,[&lt;&lt;"3"&gt;&gt;,[376793390874373408599387495934666716005045108736,371084400103549569075154352056868735459514122240,365375409332725729550921208179070754913983135744,359666418561901890026688064301272774368452149248,353957427791078050502454920423474793822921162752,348248437020254210978221776545676813277390176256,342539446249430371453988632667878832731859189760,336830455478606531929755488790080852186328203264,331121464707782692405522344912282871640797216768,...]],...},...]},...],...},...]},...}
in context child\_terminated
2013-09-20 15:16:24.147 [error] &lt;0.2034.0&gt; gen\_fsm &lt;0.2034.0&gt; in state
started terminated with reason: no function clause matching
riak\_kv\_vnode:terminate({badarg,[{lists,split,[&lt;&lt;"3"&gt;&gt;,[445301280124259482890185222468242482551416946688,439592289353435643365952078590444502005885960192,...]],...},...]},
undefined) line 851
2013-09-20 15:16:24.147 [error] &lt;0.2034.0&gt; CRASH REPORT Process &lt;0.2034.0&gt;
with 0 neighbours exited with reason: no function clause matching
riak\_kv\_vnode:terminate({badarg,[{lists,split,[&lt;&lt;"3"&gt;&gt;,[445301280124259482890185222468242482551416946688,439592289353435643365952078590444502005885960192,...]],...},...]},
undefined) line 851 in gen\_fsm:terminate/7 line 589
2013-09-20 15:16:24.147 [error] &lt;0.2019.0&gt; gen\_fsm &lt;0.2019.0&gt; in state
started terminated with reason: no function clause matching
riak\_kv\_vnode:terminate({badarg,[{lists,split,[&lt;&lt;"3"&gt;&gt;,[34253944624943037145398863266787883273185918976,28544953854119197621165719388989902727654932480,...]],...},...]},
undefined) line 851
2013-09-20 15:16:24.147 [error] &lt;0.2019.0&gt; CRASH REPORT Process &lt;0.2019.0&gt;
with 0 neighbours exited with reason: no function clause matching
riak\_kv\_vnode:terminate({badarg,[{lists,split,[&lt;&lt;"3"&gt;&gt;,[34253944624943037145398863266787883273185918976,28544953854119197621165719388989902727654932480,...]],...},...]},
undefined) line 851 in gen\_fsm:terminate/7 line 589
2013-09-20 15:16:24.153 [error] &lt;0.2029.0&gt; gen\_fsm &lt;0.2029.0&gt; in state
started terminated with reason: no function clause matching
riak\_kv\_vnode:terminate({badarg,[{lists,split,[&lt;&lt;"3"&gt;&gt;,[308285501624487334308589769401090949458673270784,302576510853663494784356625523292968913142284288,...]],...},...]},
undefined) line 851
2013-09-20 15:16:24.153 [error] &lt;0.2029.0&gt; CRASH REPORT Process &lt;0.2029.0&gt;
with 0 neighbours exited with reason: no function clause matching
riak\_kv\_vnode:terminate({badarg,[{lists,split,[&lt;&lt;"3"&gt;&gt;,[308285501624487334308589769401090949458673270784,302576510853663494784356625523292968913142284288,...]],...},...]},
undefined) line 851 in gen\_fsm:terminate/7 line 589
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

