---
title: "Re: +zdbbl recommended value"
description: ""
project: community
lastmod: 2013-07-15T08:09:23-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11532"
mailinglist_parent_id: "msg11531"
author_name: "Guido Medina"
project_section: "mailinglistitem"
sent_date: 2013-07-15T08:09:23-07:00
---



Thanks for the quick answers Jared & Kelly,

+zdbbl 16384 is working ok for our production cluster (5 nodes), but for 
development for some large 2i (a list of keys of 4m+) I get some 
time-outs so I asked the question, cause there are memory implications, 
I will try 32768 at our dev cluster (4 nodes) and leave production alone 
until needed.


Regards,

Guido.

On 15/07/13 15:58, Jared Morrow wrote:

Guido,

So higher +zdbbl numbers will allow for larger message buffers, but at 
the expense of memory usage. We've actually added better wording in 
the default vm.args file for 1.4+ 
https://github.com/basho/riak/blob/master/rel/files/vm.args#L40


So I guess the best answer is trial & error. We added 32MB commented 
out in the vm.args, but it can go much higher than that (around 2gb is 
the true max). I think most people have found setting it to 32768 
helps without too much memory usage penalty.


-Jared




On Mon, Jul 15, 2013 at 8:38 AM, Guido Medina 
&gt; wrote:


 Hi,

 We had an issue in 1.4 where 2i operations were timing out, after
 going through support we were suggested to use "+zdbbl 16384", on
 the "Configuring Riak Docs" it is strongly suggested (unless doc
 need to be re-phrased) it should be higher:

 \*Source:\*
 
http://docs.basho.com/riakcs/latest/cookbooks/configuration/Configuring-Riak/

 At the end of such doc there is the following fragment and we
 would like to know if there is a kind of all situations balanced
 value and the implications:


 Performance & Capacity settings

 It is strongly recommended that the following values be set in the
 Riak |vm.args| configuration file, which is located in the
 |/etc/riak| or |/opt/riak/etc| folder.

 ## This setting is not present in default Riak installations, so
 ## it should be added. In some cases, a value of 128000 may be
 ## appropriate.
 +zdbbl96000

 ## This setting is present in default Riak installations, so
 ## its value should be edited.
 -env ERL\_MAX\_PORTS16384



 Kind regards,

 Guido.

 \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
 riak-users mailing list
 riak-users@lists.basho.com 
 http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com




\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

