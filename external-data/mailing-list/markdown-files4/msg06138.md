---
title: "Re: Absolute consistency"
description: ""
project: community
lastmod: 2012-01-05T12:12:40-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06138"
mailinglist_parent_id: "msg06137"
author_name: "Tim Robinson"
project_section: "mailinglistitem"
sent_date: 2012-01-05T12:12:40-08:00
---


Thank you for this info. I'm still somewhat confused.

Why would anyone ever want 2 copies on one physical PC? Correct me if I am 
wrong, but part of the sales pitch for Riak is that the cost of hardware is 
lessened by distributing your data across a cluster of less expensive machines 
as opposed to having it all one reside on an enormous server with very little 
redundancy.

The 2 copies of data on one physical PC provides no redundancy, but increases 
hardware costs quite a bit. 

Right?

Thanks,
Tim

-----Original Message-----
From: "Aphyr" 
Sent: Thursday, January 5, 2012 1:01pm
To: "Tim Robinson" 
Cc: "Runar Jordahl" , riak-users@lists.basho.com
Subject: Re: Absolute consistency

On 01/05/2012 11:44 AM, Tim Robinson wrote:
&gt; Ouch.
&gt;
&gt; I'm shocked that is not considered a major bug. At minimum that kind of stuff 
&gt; should be front and center in their wiki/docs. Here I am thinking n 2 on a 3 
&gt; node cluster means I'm covered when in fact I am not. It's the whole reason I 
&gt; gave Riak consideration.
&gt;
&gt; Tim

I think you may have this backwards. N=3 and 2 nodes would mean one node 
has 1 copy, and 1 node has 2 copies, of any given piece. For n=2 and 3 
nodes, there should be no overlap.

The other thing to consider is that for certain combinations of 
partition number P and node number N, distributing partitions mod N can 
result in overlaps at the edge of the ring. This means zero to n 
preflists can overlap on some nodes. That means n=3 can, \*with the wrong 
choice of N and P\*, result in minimum 2 machines having copies of any 
given key, assuming P &gt; N.

There are also failure modes to consider. I haven't read the new key 
balancing algo, so my explanation may be out of date.

--Kyle


Tim Robinson



\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

