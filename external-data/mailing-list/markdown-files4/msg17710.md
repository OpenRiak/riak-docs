---
title: "Re: Riak nodes constantly crashing"
description: ""
project: community
lastmod: 2016-10-24T15:25:42-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17710"
mailinglist_parent_id: "msg17709"
author_name: "Ricardo Mayerhofer"
project_section: "mailinglistitem"
sent_date: 2016-10-24T15:25:42-07:00
---


Hi Alexander,
Thanks for your response. We use multi-backend with bitcask and leveldb.

- File descriptors seems to be ok, at least the config.

ubuntu@ip-10-2-58-5:/var/log/riak$ sudo su riak
sudo: unable to resolve host ip-10-2-58-5
riak@ip-10-2-58-5:/var/log/riak$ ulimit -n
65535

- Memory seems to be ok as well:

KiB Mem: \* 15400916 \*total,\* 14493744 \*used,\* 907172 \*free,\* 36244 \*
buffers

- Disk is ok

/dev/xvda1 20G 4.1G 15G 22% / # root device
/dev/xvdb 148G 69G 72G 49% /mnt/riak-data # bitcask and riak
data disk
/dev/xvdc 296G 23G 258G 8% /mnt/riak-data/leveldb #leveldb disk

Any other idea? Thanks.

On Mon, Oct 24, 2016 at 8:06 PM, Alexander Sicular 
wrote:

&gt; Disk, memory or file descriptors would be my guess. Bitcask?
&gt;
&gt;
&gt; On Monday, October 24, 2016, Ricardo Mayerhofer 
&gt; wrote:
&gt;
&gt;&gt; Hi all,
&gt;&gt; I have a Riak 1.4 where the nodes seems to be constantly crashing. All 5
&gt;&gt; nodes are affected.
&gt;&gt;
&gt;&gt; However it seems Riak manage to get them up again.
&gt;&gt;
&gt;&gt; Any idea on whats going on? Erros logs below.
&gt;&gt;
&gt;&gt; Thanks.
&gt;&gt;
&gt;&gt; error.log
&gt;&gt; ...
&gt;&gt; 2016-10-24 21:57:29.185 [error] &lt;0.24570.1174&gt; CRASH REPORT Process
&gt;&gt; &lt;0.24570.1174&gt; with 0 neighbours crashed with reason: no case clause
&gt;&gt; matching {ok,{http\_error,"exit\r\n"},&lt;&lt;&gt;&gt;} in mochiweb\_http:request/3
&gt;&gt; line 107
&gt;&gt; 2016-10-24 21:58:29.187 [error] &lt;0.7109.1175&gt; CRASH REPORT Process
&gt;&gt; &lt;0.7109.1175&gt; with 0 neighbours crashed with reason: no case clause
&gt;&gt; matching {ok,{http\_error,"exit\r\n"},&lt;&lt;&gt;&gt;} in mochiweb\_http:request/3
&gt;&gt; line 107
&gt;&gt; 2016-10-24 21:59:29.228 [error] &lt;0.19612.1175&gt; CRASH REPORT Process
&gt;&gt; &lt;0.19612.1175&gt; with 0 neighbours crashed with reason: no case clause
&gt;&gt; matching {ok,{http\_error,"exit\r\n"},&lt;&lt;&gt;&gt;} in mochiweb\_http:request/3
&gt;&gt; line 107
&gt;&gt; 2016-10-24 22:00:29.218 [error] &lt;0.1356.1176&gt; CRASH REPORT Process
&gt;&gt; &lt;0.1356.1176&gt; with 0 neighbours crashed with reason: no case clause
&gt;&gt; matching {ok,{http\_error,"exit\r\n"},&lt;&lt;&gt;&gt;} in mochiweb\_http:request/3
&gt;&gt; line 107
&gt;&gt; 2016-10-24 22:01:29.197 [error] &lt;0.11380.1176&gt; CRASH REPORT Process
&gt;&gt; &lt;0.11380.1176&gt; with 0 neighbours crashed with reason: no case clause
&gt;&gt; matching {ok,{http\_error,"exit\r\n"},&lt;&lt;&gt;&gt;} in mochiweb\_http:request/3
&gt;&gt; line 107
&gt;&gt; 2016-10-24 22:02:29.231 [error] &lt;0.24279.1176&gt; CRASH REPORT Process
&gt;&gt; &lt;0.24279.1176&gt; with 0 neighbours crashed with reason: no case clause
&gt;&gt; matching {ok,{http\_error,"exit\r\n"},&lt;&lt;&gt;&gt;} in mochiweb\_http:request/3
&gt;&gt; line 107
&gt;&gt;
&gt;&gt; crash.log
&gt;&gt; 2016-10-24 21:51:56 =CRASH REPORT====
&gt;&gt; crasher:
&gt;&gt; initial call: mochiweb\_acceptor:init/3
&gt;&gt; pid: &lt;0.28136.1621&gt;
&gt;&gt; registered\_name: []
&gt;&gt; exception error: {{case\_clause,{ok,{http\_error,
&gt;&gt; "exit\r\n"},&lt;&lt;&gt;&gt;}},[{mochiweb\_http,request,3,[{file,"src/moc
&gt;&gt; hiweb\_http.erl"},{line,107}]},{proc\_lib,init\_p\_do\_apply,3,[{
&gt;&gt; file,"proc\_lib.erl"},{line,227}]}]}
&gt;&gt; ancestors: ['http\_0.0.0.0:8098\_mochiweb',riak\_core\_sup,&lt;0.148.0&gt;]
&gt;&gt; messages: []
&gt;&gt; links: [&lt;0.201.0&gt;,#Port&lt;0.235869290&gt;]
&gt;&gt; dictionary: []
&gt;&gt; trap\_exit: false
&gt;&gt; status: running
&gt;&gt; heap\_size: 377
&gt;&gt; stack\_size: 24
&gt;&gt; reductions: 423
&gt;&gt; neighbours:
&gt;&gt; 2016-10-24 21:52:56 =CRASH REPORT====
&gt;&gt; crasher:
&gt;&gt; initial call: mochiweb\_acceptor:init/3
&gt;&gt; pid: &lt;0.7845.1622&gt;
&gt;&gt; registered\_name: []
&gt;&gt; exception error: {{case\_clause,{ok,{http\_error,
&gt;&gt; "exit\r\n"},&lt;&lt;&gt;&gt;}},[{mochiweb\_http,request,3,[{file,"src/moc
&gt;&gt; hiweb\_http.erl"},{line,107}]},{proc\_lib,init\_p\_do\_apply,3,[{
&gt;&gt; file,"proc\_lib.erl"},{line,227}]}]}
&gt;&gt; ancestors: ['http\_0.0.0.0:8098\_mochiweb',riak\_core\_sup,&lt;0.148.0&gt;]
&gt;&gt; messages: []
&gt;&gt; links: [&lt;0.201.0&gt;,#Port&lt;0.235879110&gt;]
&gt;&gt; dictionary: []
&gt;&gt; trap\_exit: false
&gt;&gt; status: running
&gt;&gt; heap\_size: 377
&gt;&gt; stack\_size: 24
&gt;&gt; reductions: 406
&gt;&gt; --
&gt;&gt; Ricardo Mayerhofer
&gt;&gt;
&gt;
&gt;
&gt; --
&gt;
&gt;
&gt; Alexander Sicular
&gt; Solutions Architect
&gt; Basho Technologies
&gt; 9175130679
&gt; @siculars
&gt;
&gt;


-- 
Ricardo Mayerhofer
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

