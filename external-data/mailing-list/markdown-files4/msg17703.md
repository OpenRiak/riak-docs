---
title: "Re: Inconsistency in Querying Riak TS?"
description: ""
project: community
lastmod: 2016-10-17T19:01:59-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17703"
mailinglist_parent_id: "msg17702"
author_name: "John Daily"
project_section: "mailinglistitem"
sent_date: 2016-10-17T19:01:59-07:00
---


One of the catches regarding the quantum limit is that unless the
query starts exactly on a boundary, the effective limit is one fewer
because it is determined by the number of partitions the query has to
touch.

I suspect that's the behavior you're seeing.

Sent from my iPhone

&gt; On Oct 17, 2016, at 9:38 PM, Joe Olson  wrote:
&gt;
&gt; According to the documentation at
&gt;
&gt; https://docs.basho.com/riak/ts/1.4.0/using/querying/guidelines/
&gt;
&gt; "A query covering more than a certain number of quanta (5 by default) will 
&gt; generate the error too\_many\_subqueries and the query system will refuse to 
&gt; run it. Assuming a default quantum of 15 minutes, the maximum query time 
&gt; range is 75 minutes."
&gt;
&gt; However, the example shows a table of quantum 15 seconds. After the example:
&gt;
&gt; "The maximum time range we can query is 60s, anything beyond will fail."
&gt;
&gt; ....which seems to contradict the first assertion.
&gt;
&gt; Furthermore, I have been getting inconsistant behavior using the quantum.
&gt;
&gt; I have a code snippet placed here, demonstrating this behavior:
&gt;
&gt; https://gist.github.com/anonymous/a4a4ccb8617a00d38fb47a6b11571d81
&gt;
&gt; In this example, I set up two tables, one with a quantum of 6 hours, another 
&gt; with a quantum of 12 days.
&gt;
&gt; I am using the default range (5) on my cluster.
&gt;
&gt; A query spanning 5 quantum partitions is allowed on the 6 hour table, a query 
&gt; spanning 5 quantum partitions
&gt; on the 12 day table fails with the 'too many subqueries' error.
&gt;
&gt; Are the number of allowed subqueries different depending on the quantum size?
&gt;
&gt; If so, is there more detailed documentation on the subject?
&gt;
&gt; Thanks!
&gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

