---
title: "Re: Cluster start problem"
description: ""
project: community
lastmod: 2012-09-11T08:22:24-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08494"
mailinglist_parent_id: "msg08493"
author_name: "Wolf Iem"
project_section: "mailinglistitem"
sent_date: 2012-09-11T08:22:24-07:00
---


Hi Sean,

Ignore my last reply. It ok now. It was IP address as you said.

Thank you. 


On 11 Eyl 2012, at 18:11, Wolf Iem  wrote:

&gt; Hi Sean,
&gt; 
&gt; Thank you for your reply. 
&gt; We are using default ports, 8098 - 8069 and IP addresses are correct. But 
&gt; still it doesn't start.
&gt; 
&gt; 
&gt; On 11 Eyl 2012, at 15:19, Sean Cribbs  wrote:
&gt; 
&gt;&gt; Hi Wolf,
&gt;&gt; 
&gt;&gt; eaddrnotavail in that error means that it can't bind to the network
&gt;&gt; interface you specified. Verify that your HTTP and PB interfaces are
&gt;&gt; bound to real IPs assigned to the machine and that the ports are not
&gt;&gt; in the privileged range (1-1024).
&gt;&gt; 
&gt;&gt; On Tue, Sep 11, 2012 at 4:08 AM, Wolf Iem  wrote:
&gt;&gt;&gt; Hi all,
&gt;&gt;&gt; 
&gt;&gt;&gt; We have 4 nodes Riak installation. They are running on Ubuntu 12.04 LTS
&gt;&gt;&gt; Precise installed servers.
&gt;&gt;&gt; We have installed 1.1.4 at August 1st 2012 and upgraded 1.2.0 when its
&gt;&gt;&gt; available.
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; Server names are:
&gt;&gt;&gt; 
&gt;&gt;&gt; f1 - 10.10.0.12 - This is the first installed server. We have joined other
&gt;&gt;&gt; ones to this server. This also serves Riak control.
&gt;&gt;&gt; s2 - 10.10.0.22 -
&gt;&gt;&gt; s3 - 10.10.0.23 -
&gt;&gt;&gt; s4 - 10.10.0.24 - This server also serves Riak control.
&gt;&gt;&gt; 
&gt;&gt;&gt; This morning we've seen "insufficient nodes available" error at our
&gt;&gt;&gt; applications log and restarted all nodes. 3 of them became available except
&gt;&gt;&gt; "f1"
&gt;&gt;&gt; 
&gt;&gt;&gt; UPDATE : while I prepare this message live 3 nodes became unavailable and
&gt;&gt;&gt; need restart Riak.
&gt;&gt;&gt; 
&gt;&gt;&gt; wolfiem@f01:~$ sudo /etc/init.d/riak start
&gt;&gt;&gt; Riak failed to start within 15 seconds,
&gt;&gt;&gt; see the output of 'riak console' for more information.
&gt;&gt;&gt; If you want to wait longer, set the environment variable
&gt;&gt;&gt; WAIT\_FOR\_ERLANG to the number of seconds to wait.
&gt;&gt;&gt; 
&gt;&gt;&gt; I've tried to set WAIT\_FOR\_ERLANG value to 60 seconds but I can't.
&gt;&gt;&gt; 
&gt;&gt;&gt; adding this line in vm.args didn't work:
&gt;&gt;&gt; -env WAIT\_FOR\_ERLANG 60
&gt;&gt;&gt; 
&gt;&gt;&gt; I also tried to set this from terminal but it didn't work either.
&gt;&gt;&gt; wofliem@f01:~$ export WAIT\_FOR\_ERLANG=60
&gt;&gt;&gt; 
&gt;&gt;&gt; It still says "Riak failed to start within 15 seconds"
&gt;&gt;&gt; 
&gt;&gt;&gt; This is the console.log output:
&gt;&gt;&gt; 
&gt;&gt;&gt; 2012-09-11 10:58:02.532 [info] &lt;0.7.0&gt; Application lager started on node
&gt;&gt;&gt; 'riak@10.10.0.12'
&gt;&gt;&gt; 2012-09-11 10:58:02.560 [warning]
&gt;&gt;&gt; &lt;0.148.0&gt;@riak\_core\_ring\_manager:reload\_ring:231 No ring file available.
&gt;&gt;&gt; 2012-09-11 10:58:02.585 [error] &lt;0.164.0&gt; CRASH REPORT Process &lt;0.164.0&gt;
&gt;&gt;&gt; with 0 neighbours exited with reason: eaddrnotavail in gen\_server:init\_it/6
&gt;&gt;&gt; line 320
&gt;&gt;&gt; 
&gt;&gt;&gt; This is the error.log output
&gt;&gt;&gt; 2012-09-11 10:58:02.585 [error] &lt;0.164.0&gt; CRASH REPORT Process &lt;0.164.0&gt;
&gt;&gt;&gt; with 0 neighbours exited with reason: eaddrnotavail in gen\_server:init\_it/6
&gt;&gt;&gt; line 320
&gt;&gt;&gt; 
&gt;&gt;&gt; This is the crash.log output:
&gt;&gt;&gt; 2012-09-11 10:58:02 =CRASH REPORT====
&gt;&gt;&gt; crasher:
&gt;&gt;&gt; initial call: mochiweb\_socket\_server:init/1
&gt;&gt;&gt; pid: &lt;0.164.0&gt;
&gt;&gt;&gt; registered\_name: []
&gt;&gt;&gt; exception exit:
&gt;&gt;&gt; {eaddrnotavail,[{gen\_server,init\_it,6,[{file,"gen\_server.erl"},{line,320}]},{proc\_lib,init\_p\_do\_apply,3,[{file,"proc\_lib.erl"},{line,227}]}]}
&gt;&gt;&gt; ancestors: [riak\_core\_sup,&lt;0.135.0&gt;]
&gt;&gt;&gt; messages: []
&gt;&gt;&gt; links: [&lt;0.136.0&gt;]
&gt;&gt;&gt; dictionary: []
&gt;&gt;&gt; trap\_exit: true
&gt;&gt;&gt; status: running
&gt;&gt;&gt; heap\_size: 377
&gt;&gt;&gt; stack\_size: 24
&gt;&gt;&gt; reductions: 403
&gt;&gt;&gt; neighbours:
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; You can find the riak console output below:
&gt;&gt;&gt; 
&gt;&gt;&gt; wolfiem@f01:~$ riak console
&gt;&gt;&gt; Attempting to restart script through sudo -H -u riak
&gt;&gt;&gt; Exec: /usr/lib/riak/erts-5.9.1/bin/erlexec -boot
&gt;&gt;&gt; /usr/lib/riak/releases/1.2.0/riak -embedded -config
&gt;&gt;&gt; /etc/riak/app.config -pa /usr/lib/riak/basho-patches
&gt;&gt;&gt; -args\_file /etc/riak/vm.args -- console
&gt;&gt;&gt; Root: /usr/lib/riak
&gt;&gt;&gt; Erlang R15B01 (erts-5.9.1) [source] [64-bit] [smp:8:8] [async-threads:64]
&gt;&gt;&gt; [kernel-poll:true]
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; =INFO REPORT==== 11-Sep-2012::10:44:18 ===
&gt;&gt;&gt; alarm\_handler: {set,{system\_memory\_high\_watermark,[]}}
&gt;&gt;&gt; \*\* /usr/lib/riak/lib/observer-1.1/ebin/etop\_txt.beam hides
&gt;&gt;&gt; /usr/lib/riak/lib/basho-patches/etop\_txt.beam
&gt;&gt;&gt; \*\* Found 1 name clashes in code paths
&gt;&gt;&gt; 10:44:19.099 [info] Application lager started on node 'riak@10.10.0.12'
&gt;&gt;&gt; 10:44:19.130 [warning] No ring file available.
&gt;&gt;&gt; 10:44:19.158 [error] CRASH REPORT Process &lt;0.164.0&gt; with 0 neighbours exited
&gt;&gt;&gt; with reason: eaddrnotavail in gen\_server:init\_it/6 line 320
&gt;&gt;&gt; /usr/lib/riak/lib/os\_mon-2.2.9/priv/bin/memsup: Erlang has closed.
&gt;&gt;&gt; 
&gt;&gt;&gt; =INFO REPORT==== 11-Sep-2012::10:44:19 ===
&gt;&gt;&gt; alarm\_handler: {clear,system\_memory\_high\_watermark}
&gt;&gt;&gt; Erlang has closed
&gt;&gt;&gt; {"Kernel pid
&gt;&gt;&gt; terminated",application\_controller,"{application\_start\_failure,riak\_core,{shutdown,{riak\_core\_app,start,[normal,[]]}}}"}
&gt;&gt;&gt; 
&gt;&gt;&gt; Crash dump was written to: /var/log/riak/erl\_crash.dump
&gt;&gt;&gt; Kernel pid terminated (application\_controller)
&gt;&gt;&gt; ({application\_start\_failure,riak\_core,{shutdown,{riak\_core\_app,start,[normal,[]]}}})
&gt;&gt;&gt; 
&gt;&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; -- 
&gt;&gt; Sean Cribbs 
&gt;&gt; Software Engineer
&gt;&gt; Basho Technologies, Inc.
&gt;&gt; http://basho.com/
&gt; 


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

