---
title: "Re: Does RiakKV require a lot of memory?"
description: ""
project: community
lastmod: 2017-03-27T08:26:42-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg18101"
mailinglist_parent_id: "msg18100"
author_name: "Luke Bakken"
project_section: "mailinglistitem"
sent_date: 2017-03-27T08:26:42-07:00
---


Hi Tsutomu,

You should only use objects up to a maximum of 1MiB in size with Riak
KV. If you wish to store larger objects or files, please use Riak CS.

--
Luke Bakken
Engineer
lbak...@basho.com

On Sun, Mar 26, 2017 at 5:38 PM,  wrote:
&gt; Hello.
&gt;
&gt; The following problem occurred, Please give me on solution.
&gt;
&gt; (Problem)
&gt; I registered a 10mb to 1000mb file.
&gt; Then RiakKV hung up when the batch program was accessing files from 100 MB to 
&gt; 600 MB.
&gt; RiakKV hung up due to insufficient memory.
&gt;
&gt; (Question)
&gt; 1.The problem that occurred this time is the effect of data accessed to a 
&gt; 20-1000 MB file?
&gt; Or is it another problem?
&gt;
&gt; 2.During RiakKV data update, when you want to access RiakKV data,
&gt; do you need to do something special?
&gt; Do you need a lot of memory?
&gt;
&gt; (Objects)
&gt; file: 3,882,892
&gt; file size(total): 332.46GB(346,243,500,913byte)
&gt; file objects:
&gt; 1- 10MB = 3,800,000(all)
&gt; 20- 50MB = 40 to 100
&gt; 100-1000MB = 50
&gt;
&gt; (Riak Sever)
&gt; OS:Red Hat Enterprise Linux Server release 6.7 (Santiago)
&gt; 　（Linux patdevsrv02 2.6.32-573.el6.x86\_64）
&gt; CPU:Intel(R) Xeon(R) CPU E5640 @2.67GHz \* 2
&gt; Memory:12GB
&gt; Swap:14GB
&gt; Network:1Gbps
&gt; Disk:
&gt; Filesystem Size Used Avail Use% Mounted on
&gt; /dev/sda3 261G 67G 182G 27% /
&gt; tmpfs 5.9G 300K 5.9G 1% /dev/shm
&gt; /dev/sda1 477M 71M 381M 16% /boot
&gt; /dev/sdb1 275G 243G 19G 93% /USR1
&gt; /dev/sdc1 1.7T 1.5T 76G 96% /USR2
&gt; /dev/sdd1 1.1T 736G 309G 71% /USR3 &lt;&lt;&lt; Store
&gt; /dev/sde1 1.1T 1.1T 18G 99% /USR4
&gt; /dev/sdf1 1.4T 1.1T 365G 74% /media/USB-HDD1
&gt;
&gt; (Riak)
&gt; RiakKV 2.2.0 (riak-2.2.0-1.el6.x86\_64.rpm)
&gt;
&gt; (Riak Node)
&gt; 1 Node.
&gt;
&gt; !!!We plan to add two nodes to the cluster at a later date.!!!
&gt;
&gt; (Java)
&gt; Java1.8 (jre-8u121-linux-x64.rpm)
&gt;
&gt; (riak setting)
&gt; /etc/riak/riak.conf
&gt; storage\_backend = leveldb
&gt; leveldb.maximum\_memory.percent = 50
&gt; object.size.maximum = 2GB
&gt; listener.http.internal = 0.0.0.0:8098
&gt; listener.http.internal = 0.0.0.0:8098
&gt; platform\_data\_dir = /USR3/riak
&gt; nodename = riak@...
&gt; riak\_control = on
&gt;
&gt; !!!Settings other than these remain the default.!!!
&gt;
&gt; (linux setting)
&gt; /etc/security/limits.conf
&gt; \* soft nofile 65536
&gt; \* hard nofile 65536
&gt;
&gt; Thank you.
&gt;
&gt; Tsutomu Wakuda
&gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

