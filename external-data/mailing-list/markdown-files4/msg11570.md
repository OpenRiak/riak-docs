---
title: "Re: Lots of sparse columns. Efficient like Cassandra? Some measures	of my dataset"
description: ""
project: community
lastmod: 2013-07-17T07:07:09-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11570"
mailinglist_parent_id: "msg11568"
author_name: "gbrits"
project_section: "mailinglistitem"
sent_date: 2013-07-17T07:07:09-07:00
---


Each key-column value actually already is a rollup of a sparse matrix
(which is why the uncompressed key-column values are always exactly the
same length when they exist)
Having just watched that great talk (thanks) it's extremely similar to how
the guys at Boundary are rolling up their data. Validates the approach
which is awesome!

Having just learned from that same talk that when using LevelDB keys don't
have to remain in mem, I'm just going with the logical 
as my new aggregated keys, each having a rolledup sparse matrix as a value.
Hope that made any sense.

Anyway, this feels great!


2013/7/17 Sean Cribbs-2 [via Riak Users] &lt;
ml-node+s197444n4028370...@n3.nabble.com&gt;

&gt; Just to add to Jeremiah's comments, I think you should consider whether
&gt; you will be mostly retrieving:
&gt;
&gt; 1) all 1000 columns
&gt; 2) some subset of columns
&gt; 3) single columns
&gt;
&gt; That will greatly influence how you design your keyspace. Remember, with
&gt; Riak it's just key-value in the end. This is one of my favorite examples of
&gt; building a column-like system on top of pure key-value, Boundary's
&gt; "Kobayashi" system: https://vimeo.com/42902962
&gt;
&gt;
&gt; On Wed, Jul 17, 2013 at 7:25 AM, Jeremiah Peschka &lt;[hidden 
&gt; email]
&gt; &gt; wrote:
&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; --
&gt;&gt; Jeremiah Peschka - Founder, Brent Ozar Unlimited
&gt;&gt; MCITP: SQL Server 2008, MVP
&gt;&gt; Cloudera Certified Developer for Apache Hadoop
&gt;&gt;
&gt;&gt; On Jul 17, 2013, at 4:38 AM, gbrits &lt;[hidden 
&gt;&gt; email]&gt;
&gt;&gt; wrote:
&gt;&gt;
&gt;&gt; &gt; Somewhere (can't find it now) I've read that Riak, like Cassandra could
&gt;&gt; be
&gt;&gt; &gt; classified as a column store.
&gt;&gt;
&gt;&gt; That is incorrect. Riak is a key value database where the value is an
&gt;&gt; opaque blob.
&gt;&gt;
&gt;&gt; &gt;
&gt;&gt; &gt; This is just a name of course but what I understand from Cassandra is
&gt;&gt; that
&gt;&gt; &gt; this allows for space-efficient encoding of column-values. Basically
&gt;&gt; storage
&gt;&gt; &gt; is surrounded around columns instead of rows, allowing for different
&gt;&gt; &gt; persistence strategies on a per-column, or column-family, basis.
&gt;&gt; Moreover,
&gt;&gt; &gt; it would allow for zero storage overhead for non-existent column values.
&gt;&gt; &gt; I.e: basically allowing for efficient storage of sparse data-sets.
&gt;&gt; &gt;
&gt;&gt; &gt; Does Riak have this property as well?
&gt;&gt;
&gt;&gt; No. Riak will happily store whatever you throw at it. That being said,
&gt;&gt; most good serialization libraries will leave off nullable properties.
&gt;&gt;
&gt;&gt; &gt;
&gt;&gt;
&gt;

&gt; &gt; More specifically, I've got a datastructure on paper with the following
&gt;&gt; &gt; properties, when mapped to riak nomenclature:
&gt;&gt; &gt;
&gt;&gt; &gt; - ~ 1.000.000 keys (will not grow)
&gt;&gt; &gt; - ~ 1.000 columns. (may grow)
&gt;&gt; &gt; - 1 particular key has a median of ~50 columns. In other words the
&gt;&gt; entire
&gt;&gt; &gt; set is ~ 95% sparse.
&gt;&gt; &gt; - Wherever a key has a value for a particular column, that value is
&gt;&gt; always
&gt;&gt; &gt; exactly a String (base 255) of 4KB length.
&gt;&gt; &gt; - the 4KB values themselves are pretty 'sparse' so would benefit a lot
&gt;&gt; from
&gt;&gt; &gt; run-length encoding. Is this supported out of the box?
&gt;&gt;
&gt;&gt; See above.
&gt;&gt;
&gt;&gt; &gt;
&gt;&gt; &gt; Given these properties how would Riak hold up? Hard to say of course,
&gt;&gt; but
&gt;&gt; &gt; I'm looking for some general advice.
&gt;&gt;
&gt;&gt; Riak objects should be no more than ~10MB for performance reasons. You
&gt;&gt; should be safe.
&gt;&gt;
&gt;&gt; &gt;
&gt;&gt; &gt; Thanks.
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt; --
&gt;&gt; &gt; View this message in context:
&gt;&gt; http://riak-users.197444.n3.nabble.com/Lots-of-sparse-columns-Efficient-like-Cassandra-Some-measures-of-my-dataset-tp4028367.html
&gt;&gt; &gt; Sent from the Riak Users mailing list archive at Nabble.com.
&gt;&gt; &gt;
&gt;&gt; &gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; &gt; riak-users mailing list
&gt;&gt; &gt; [hidden email] 
&gt;&gt;
&gt;&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; [hidden email] 
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;
&gt;
&gt;
&gt;
&gt; --
&gt; Sean Cribbs &lt;[hidden 
&gt; email]
&gt; &gt;
&gt; Software Engineer
&gt; Basho Technologies, Inc.
&gt; http://basho.com/
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; [hidden email] 
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
&gt;
&gt; ------------------------------
&gt; If you reply to this email, your message will be added to the discussion
&gt; below:
&gt;
&gt; http://riak-users.197444.n3.nabble.com/Lots-of-sparse-columns-Efficient-like-Cassandra-Some-measures-of-my-dataset-tp4028367p4028370.html
&gt; To unsubscribe from Lots of sparse columns. Efficient like Cassandra?
&gt; Some measures of my dataset, click 
&gt; here
&gt; .
&gt; NAML
&gt;




--
View this message in context: 
http://riak-users.197444.n3.nabble.com/Lots-of-sparse-columns-Efficient-like-Cassandra-Some-measures-of-my-dataset-tp4028367p4028373.html
Sent from the Riak Users mailing list archive at Nabble.com.\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

