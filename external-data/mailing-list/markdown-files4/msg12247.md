---
title: "Re: Resetting bucket properties"
description: ""
project: community
lastmod: 2013-09-11T17:46:01-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12247"
mailinglist_parent_id: "msg12246"
author_name: "Jeremiah Peschka"
project_section: "mailinglistitem"
sent_date: 2013-09-11T17:46:01-07:00
---


Will do.

--
Jeremiah Peschka - Founder, Brent Ozar Unlimited
MCITP: SQL Server 2008, MVP
Cloudera Certified Developer for Apache Hadoop

On Sep 11, 2013, at 5:38 PM, Sean Cribbs  wrote:

&gt; Sounds like a bug to me, would you file an issue on riak\_kv?
&gt; 
&gt; Sean Cribbs
&gt; 
&gt; On Sep 11, 2013, at 6:59 PM, Jeremiah Peschka  
&gt; wrote:
&gt; 
&gt;&gt; Here's a fun one that Alex Rice just brought to my attention:
&gt;&gt; 
&gt;&gt; Starting with a new bucket, I have bucket properties like so:
&gt;&gt; 
&gt;&gt; {"props":{"search":false,"allow\_mult":false,"basic\_quorum":false,"big\_vclock":50,"chash\_keyfun":{"mod":"riak\_core\_util","fun":"chash\_std\_keyfun"},"dw":"quorum","last\_write\_wins":false,"linkfun":{"mod":"riak\_kv\_wm\_link\_walker","fun":"mapreduce\_linkfun"},"n\_val":3,"name":"players","notfound\_ok":true,"old\_vclock":86400,"postcommit":[],"pr":0,"precommit":[],"pw":0,"r":"quorum","rw":"quorum","small\_vclock":50,"w":"quorum","young\_vclock":20}}
&gt;&gt; Setting allow\_mult = true and last\_write\_wins = false results in the 
&gt;&gt; following:
&gt;&gt; {"props":{"allow\_mult":true,"basic\_quorum":false,"big\_vclock":50,"chash\_keyfun":{"mod":"riak\_core\_util","fun":"chash\_std\_keyfun"},"dw":"quorum","last\_write\_wins":false,"linkfun":{"mod":"riak\_kv\_wm\_link\_walker","fun":"mapreduce\_linkfun"},"n\_val":3,"name":"players","notfound\_ok":true,"old\_vclock":86400,"postcommit":[],"pr":0,"precommit":[],"pw":0,"r":1,"rw":"quorum","search":false,"small\_vclock":50,"w":1,"young\_vclock":20}}
&gt;&gt; 
&gt;&gt; 
&gt;&gt; So far so good, right?
&gt;&gt; Flipping the values around so that allow\_mult = false and LWW = true 
&gt;&gt; actually ends up with allow\_mult = true and LWW = true:
&gt;&gt; 
&gt;&gt; {"props":{"allow\_mult":true,"basic\_quorum":false,"big\_vclock":50,"chash\_keyfun":{"mod":"riak\_core\_util","fun":"chash\_std\_keyfun"},"dw":"quorum","last\_write\_wins":true,"linkfun":{"mod":"riak\_kv\_wm\_link\_walker","fun":"mapreduce\_linkfun"},"n\_val":3,"name":"players","notfound\_ok":true,"old\_vclock":86400,"postcommit":[],"pr":0,"precommit":[],"pw":0,"r":1,"rw":"quorum","search":false,"small\_vclock":50,"w":1,"young\_vclock":20}}
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; Resetting bucket properties at this point puts the bucket back where it 
&gt;&gt; should be.
&gt;&gt; Is this behavior expected or have I missed something subtle?
&gt;&gt; ---
&gt;&gt; Jeremiah Peschka - Founder, Brent Ozar Unlimited
&gt;&gt; MCITP: SQL Server 2008, MVP
&gt;&gt; Cloudera Certified Developer for Apache Hadoop
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

