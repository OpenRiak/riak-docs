---
title: "Re: include mapByFields in riak by default"
description: ""
project: community
lastmod: 2010-06-12T06:53:58-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg00577"
mailinglist_parent_id: "msg00576"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2010-06-12T06:53:58-07:00
---


Best thing is to open a Bugzilla issue so it can get scheduled for a release. 
I for one am in favor of it. 

Sean Cribbs 
Developer Advocate
Basho Technologies, Inc.
http://basho.com/

On Jun 12, 2010, at 9:44 AM, francisco treacy wrote:

&gt; So what do you guys think? It is a bad idea?
&gt; 
&gt; 2010/6/6 francisco treacy :
&gt;&gt; I find myself using a lot this kind of functions (this one
&gt;&gt; inspired/borrowed from Sean Cribbs) - a sort of SQL's conditions
&gt;&gt; ("where").
&gt;&gt; 
&gt;&gt; Riak.mapByFields = function(value, keyData, fields) {
&gt;&gt; if(!value.not\_found){
&gt;&gt; var object = Riak.mapValuesJson(value)[0];
&gt;&gt; for(field in fields) {
&gt;&gt; if(object[field] != fields[field])
&gt;&gt; return [];
&gt;&gt; }
&gt;&gt; return [object];
&gt;&gt; } else {
&gt;&gt; return [];
&gt;&gt; }
&gt;&gt; }
&gt;&gt; 
&gt;&gt; Usage:
&gt;&gt; {"inputs":"test",
&gt;&gt; "query":[{"map":{"language":"javascript",
&gt;&gt; "name":"Riak.mapByFields",
&gt;&gt; "arg": { "city": "Paris" },
&gt;&gt; "keep":true}}]
&gt;&gt; }
&gt;&gt; 
&gt;&gt; Any real-world app \*always\* needs to query data by fields.
&gt;&gt; 
&gt;&gt; Would it be a good idea to ship this by default in Riak? I do believe
&gt;&gt; so because it is sufficiently general purpose (just as
&gt;&gt; Riak.mapValuesJson).
&gt;&gt; 
&gt;&gt; A lot of libraries (for instance devise-ripple) could build upon this
&gt;&gt; function without forcing clients/users to alter their app.config,
&gt;&gt; define a js\_source, and include the function in all their nodes.
&gt;&gt; 
&gt;&gt; What do you think?
&gt;&gt; 
&gt;&gt; Francisco
&gt;&gt; 
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

