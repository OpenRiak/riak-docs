---
title: "Re: secondary indexes for timestamp"
description: ""
project: community
lastmod: 2012-03-01T04:44:34-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06804"
mailinglist_parent_id: "msg06800"
author_name: "Ryan Zezeski"
project_section: "mailinglistitem"
sent_date: 2012-03-01T04:44:34-08:00
---


Hi Norman,

I see a couple of things potentially confusing you here. The first thing
to understand is that Riak currently provides two methods for
indexing/querying your data: Search and secondary indices (2i). They are
not the same and are not compatible with each other. I'm going to assume
you know which one you want to use (or you can actually use both if you
really want to but Search can do everything 2i can and more) and make some
comments inline...

On Thu, Mar 1, 2012 at 4:56 AM, Norman Khine  wrote:

&gt;
&gt; 500 Internal Server
&gt; ErrorInternal Server Error
=====================

The server
&gt; encountered an error while processing this
&gt;
&gt; request:  

```
{error,{error,{indexes_not_supported,riak_kv_bitcask_backend}}}
```


---

mochiweb+webmachine
&gt; web server

%
&gt;

This is telling you that 2i indexes are not supported because you are using
a backend that doesn't support them. If you didn't already know Riak
supports multiple backends and 2i is only compatible with the
`riak\_kv\_eleveldb\_backend` [1].



&gt;
&gt; curl http://localhost:8098/solr/users/select?q=timestamp:1330593323542
&gt;
&gt; 
&gt; 
&gt; 0
&gt; 4
&gt; 
&gt; on
&gt; 0
&gt; timestamp:1330593323542
&gt; or
&gt; 
&gt; value
&gt; standard
&gt; 1.1
&gt; 0
&gt; 
&gt; 
&gt; 
&gt; 
&gt;
&gt;
&gt;
In this case you are running a query against Search. This will only return
results if you a) have search enabled [2], b) you install the search hook
on the 'users' bucket [3], and c) you have the schema setup correctly [4].
 I realize this isn't entirely straightforward and am willing to help if
you decide you want to use the search functionality.

-Ryan

[1]: http://wiki.basho.com/Secondary-Indexes.html#Configuration

[2]: https://github.com/basho/riak\_search/blob/master/README.org

[3]:
http://wiki.basho.com/Riak-Search---Indexing-and-Querying-Riak-KV-Data.html#Setting-up-Indexing

[4]: http://wiki.basho.com/Riak-Search---Schema.html
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

