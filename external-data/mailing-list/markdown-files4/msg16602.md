---
title: "Re: adding auth user not valid"
description: ""
project: community
lastmod: 2015-10-02T20:30:02-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16602"
mailinglist_parent_id: "msg16572"
author_name: "Outback Dingo"
project_section: "mailinglistitem"
sent_date: 2015-10-02T20:30:02-07:00
---


On Tue, Sep 29, 2015 at 11:01 AM, Shunichi Shinohara 
wrote:

&gt; Hi Outback,
&gt;
&gt; Sorry for very late response.
&gt; It seems that riak-cs doesn't/can't communicate with stanchion node.
&gt; There are a couple of possible reasons:
&gt;
&gt; - admin.key and admin.secret should be set both in riak-cs and stanchion
&gt; - stanchion\_host should be set properly as stanchion node's listen
&gt; configuration
&gt; - servers that riak-cs node and stanchion nodes are running should be
&gt; communicate by TCP.
&gt;
&gt; I think packet capture (by tcpdump or wireshark or...) is useful to
&gt; investigate the communication between riak-cs and stanchion.
&gt;
&gt; Thanks,
&gt; Shino
&gt;


more like ENOTENOUGHNODES..... pretty perplexing to chase down when you
think somethings running and its not....
anyway i got it sorted out thanks,.



&gt;
&gt; 2015-09-15 13:21 GMT+09:00 Outback Dingo :
&gt; &gt; seems the docs with auth creds is invalid... or im still broken...
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; curl -XPOST http://localhost:8080/riak-cs/user \
&gt; &gt; -H 'Content-Type: application/json' \
&gt; &gt; -d '{"email":"ad...@admin.com", "name":"admin"}'
&gt; &gt;
&gt; &gt;
&gt; &gt; returns
&gt; &gt;
&gt; &gt; curl -H 'Content-Type: application/json' -X POST
&gt; &gt; http://localhost:8080/riak-cs/user --data '{"email":"ad...@admin.com",
&gt; &gt; "name":"admin"}'
&gt; &gt;
&gt; &gt; 500 Internal Server
&gt; &gt; ErrorInternal Server Error
=====================

The server
&gt; &gt; encountered an error while processing this
&gt; &gt; requestroot@vmbsd:/usr/local/etc/riak-cs #
&gt; &gt;
&gt; &gt; and the log shows
&gt; &gt; 2015-09-15 14:20:33.678 [error] &lt;0.9846.4&gt; Webmachine error at path
&gt; &gt; "/riak-cs/user" :
&gt; &gt;
&gt; {error,{error,{badmatch,{error,malformed\_xml}},[{riak\_cs\_s3\_response,xml\_error\_code,1,[{file,"src/riak\_cs\_s3\_response.erl"},{line,335}]},{riak\_cs\_s3\_r
&gt; &gt;
&gt; esponse,error\_response,1,[{file,"src/riak\_cs\_s3\_response.erl"},{line,249}]},{riak\_cs\_wm\_user,accept\_json,2,[{file,"src/riak\_cs\_wm\_user.erl"},{line,119}]},{webmachine\_resource,resource\_call,3,[{file,"src/webmachine\_resource.erl"},{line,1
&gt; &gt;
&gt; 86}]},{webmachine\_resource,do,3,[{file,"src/webmachine\_resource.erl"},{line,142}]},{webmachine\_decision\_core,resource\_call,...},...]}}
&gt; &gt; in riak\_cs\_s3\_response:xml\_error\_code/1 line 335
&gt; &gt;
&gt; &gt;
&gt; &gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; &gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

