---
title: "Re: Riak crashed and crashed again when recovering"
description: ""
project: community
lastmod: 2010-05-05T04:56:06-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg00256"
mailinglist_parent_id: "msg00255"
author_name: "Germain Maurice"
project_section: "mailinglistitem"
sent_date: 2010-05-05T04:56:06-07:00
---


I got other informations when I launched "riak console" on the both 
nodes, as you can see here.

I hope this will be useful for you and then for me :)

10.0.0.40:$ riak console
[...]
=INFO REPORT==== 5-May-2010::13:04:48 ===
Starting handoff of partition 
479555224749202520035584085735030365824602865664 to 'r...@10.0.0.41'
dets: file 
"/reiser/riak/dets/639406966332270026714112114313373821099470487552" not 
properly closed, repairing ...


=INFO REPORT==== 5-May-2010::13:05:48 ===
Dropping partition 479555224749202520035584085735030365824602865664

=INFO REPORT==== 5-May-2010::13:08:47 ===
 alarm\_handler: {set,{system\_memory\_high\_watermark,[]}}

=INFO REPORT==== 5-May-2010::13:19:32 ===
"dets:open\_file failed"

=ERROR REPORT==== 5-May-2010::13:19:32 ===
\*\* Generic server riak\_kv\_vnode\_master terminating
\*\* Last message in was {'$gen\_cast',
 {start\_vnode,

639406966332270026714112114313373821099470487552}}

\*\* When Server state == {state,12307,[]}
\*\* Reason for termination ==
\*\* {{badmatch,
 {error,
 {{badmatch,
 {error,
 {no\_more\_space\_on\_file,

"/reiser/riak/dets/639406966332270026714112114313373821099470487552.TMP"}}},

 [{riak\_kv\_vnode,init,1},
 {gen\_fsm,init\_it,6},
 {proc\_lib,init\_p\_do\_apply,3}]}}},
 [{riak\_kv\_vnode\_master,get\_vnode,2},
 {riak\_kv\_vnode\_master,handle\_cast,2},
 {gen\_server,handle\_msg,5},
 {proc\_lib,init\_p\_do\_apply,3}]}

=INFO REPORT==== 5-May-2010::13:19:32 ===
Spidermonkey VM host stopping (&lt;0.117.0&gt;)

=INFO REPORT==== 5-May-2010::13:19:32 ===
Spidermonkey VM host stopping (&lt;0.115.0&gt;)

=INFO REPORT==== 5-May-2010::13:19:32 ===
Spidermonkey VM host stopping (&lt;0.119.0&gt;)

=INFO REPORT==== 5-May-2010::13:19:32 ===
Spidermonkey VM host stopping (&lt;0.112.0&gt;)

=INFO REPORT==== 5-May-2010::13:19:32 ===
Spidermonkey VM host stopping (&lt;0.114.0&gt;)
Erlang has closed

=INFO REPORT==== 5-May-2010::13:19:32 ===
 alarm\_handler: {clear,system\_memory\_high\_watermark}
/usr/lib/riak/lib/os\_mon-2.2.5/priv/bin/memsup: Erlang has closed.



==========================================================

10.0.0.41:$ riak console
[...]
=INFO REPORT==== 5-May-2010::13:03:41 ===
Spidermonkey VM host starting (&lt;0.120.0&gt;)
Eshell V5.7.5 (abort with ^G)
(r...@10.0.0.41)1&gt; dets: file 
"/reiser/riak/dets/616571003248974668617179538802181898917346541568" not 
properly closed, repairing ...


=INFO REPORT==== 5-May-2010::13:04:48 ===
Receiving handoff data for partition 
479555224749202520035584085735030365824602865664


=ERROR REPORT==== 5-May-2010::13:05:48 ===
\*\* Generic server &lt;0.189.0&gt; terminating
\*\* Last message in was {tcp,#Port&lt;0.2936&gt;,

[0|&lt;&lt;84,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0&gt;&gt;]}

\*\* When Server state == {state,#Port&lt;0.2936&gt;,undefined,undefined,0}
\*\* Reason for termination ==
\*\* {timeout,{gen\_server2,call,
 [riak\_kv\_vnode\_master,

{get\_vnode,479555224749202520035584085735030365824602865664},

 60000]}}

=INFO REPORT==== 5-May-2010::13:06:41 ===
 alarm\_handler: {set,{system\_memory\_high\_watermark,[]}}

=ERROR REPORT==== 5-May-2010::13:07:41 ===
webmachine error: 
path="/riak/blog\_content\_temp/1714432724f7f975610be47146fec6c7e74bf4bbccdbeea5208ac6e3540e6f4b"

[{webmachine\_decision\_core,'-decision/1-lc$^1/1-1-',
 [{error,
 {error,
 {case\_clause,{error,timeout}},
 [{riak\_kv\_wm\_raw,content\_types\_provided,2},
 {webmachine\_resource,resource\_call,3},
 {webmachine\_resource,do,3},
 {webmachine\_decision\_core,resource\_call,1},
 {webmachine\_decision\_core,decision,1},
 {webmachine\_decision\_core,handle\_request,2},
 {webmachine\_mochiweb,loop,1},
 {mochiweb\_http,headers,5}]}}]},
 {webmachine\_decision\_core,decision,1},
 {webmachine\_decision\_core,handle\_request,2},
 {webmachine\_mochiweb,loop,1},
 {mochiweb\_http,headers,5},
 {proc\_lib,init\_p\_do\_apply,3}]

=INFO REPORT==== 5-May-2010::13:16:54 ===
"dets:open\_file failed"

=ERROR REPORT==== 5-May-2010::13:16:54 ===
\*\* Generic server riak\_kv\_vnode\_master terminating
\*\* Last message in was {'$gen\_cast',
 {start\_vnode,

616571003248974668617179538802181898917346541568}}

\*\* When Server state == {state,12307,[]}
\*\* Reason for termination ==
\*\* {{badmatch,
 {error,
 {{badmatch,
 {error,
 {no\_more\_space\_on\_file,

"/reiser/riak/dets/616571003248974668617179538802181898917346541568.TMP"}}},

 [{riak\_kv\_vnode,init,1},
 {gen\_fsm,init\_it,6},
 {proc\_lib,init\_p\_do\_apply,3}]}}},
 [{riak\_kv\_vnode\_master,get\_vnode,2},
 {riak\_kv\_vnode\_master,handle\_cast,2},
 {gen\_server,handle\_msg,5},
 {proc\_lib,init\_p\_do\_apply,3}]}

=INFO REPORT==== 5-May-2010::13:16:54 ===
Spidermonkey VM host stopping (&lt;0.113.0&gt;)

=INFO REPORT==== 5-May-2010::13:16:54 ===
Spidermonkey VM host stopping (&lt;0.115.0&gt;)

=INFO REPORT==== 5-May-2010::13:16:54 ===
Spidermonkey VM host stopping (&lt;0.114.0&gt;)

=INFO REPORT==== 5-May-2010::13:16:54 ===
Spidermonkey VM host stopping (&lt;0.117.0&gt;)

=INFO REPORT==== 5-May-2010::13:16:54 ===
Spidermonkey VM host stopping (&lt;0.119.0&gt;)

=INFO REPORT==== 5-May-2010::13:16:54 ===
Spidermonkey VM host stopping (&lt;0.118.0&gt;)

=INFO REPORT==== 5-May-2010::13:16:54 ===
Spidermonkey VM host stopping (&lt;0.116.0&gt;)

=INFO REPORT==== 5-May-2010::13:16:54 ===
Spidermonkey VM host stopping (&lt;0.120.0&gt;)

=INFO REPORT==== 5-May-2010::13:16:54 ===
 alarm\_handler: {clear,system\_memory\_high\_watermark}
/usr/lib/riak/lib/os\_mon-2.2.5/priv/bin/memsup: Erlang has closed.

Erlang has closed





Le 05/05/10 11:35, Germain Maurice a écrit :

Hi all,
I am testing Riak for my document base and i got a problem when i was 
migrating documents from my previous

system to Riak.
I have two nodes and one bucket for the beginning.
There are more than 480 000 documents in the bucket and the documents 
are html pages.


In the following you'll find all the files and informations after a 
node was restarted.

After a while, riak crashed again for the two nodes I restarted ... :(

[...]



--
Germain Maurice
Administrateur Système/Réseau
Tel : +33.(0)1.42.43.54.33

http://www.linkfluence.net


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

