---
title: "Re: http 400 while addings links(and python client bug)"
description: ""
project: community
lastmod: 2010-04-25T03:29:08-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg00165"
mailinglist_parent_id: "msg00161"
author_name: "alexander krohn"
project_section: "mailinglistitem"
sent_date: 2010-04-25T03:29:08-07:00
---



hi.

sorry for replying myself ;)

the header hits the 8k size mark, that causes the 400.

is there a way to configure the max header length for the rest api's 
http server? like apache's LimitRequestFieldsize?


also there's a bug in the python client lib, the links are qouted but 
not unquoted. this leads to "growing" and wrong tag names.


patch for \_\_init\_\_.py:

1650c1650,1653
&lt; link = RiakLink(matches.group(2), 
matches.group(3), matches.group(4))

---
&gt; bucket = 
urllib.unquote\_plus(matches.group(2))
&gt; key = 
urllib.unquote\_plus(matches.group(3))
&gt; tag = 
urllib.unquote\_plus(matches.group(4))

&gt; link = RiakLink(bucket, key, tag)


cheers,

alexander

alexander krohn wrote:

hi.

(i already posted this yesterday in irc, mailing-list subscribe was 
pending)


i'm using python to insert several items to riak. the code i'm using[1] 
receives an http 400 exactly while inserting the 238th link to an object.


the response tells no additional errors, also the erlang-log doesn't 
show anything.


something wrong on my side or bug?

can anyone reproduce this 400?

thanks in advance.

cheers,

alexander

[1] used code:

import riak

client = riak.RiakClient('127.0.0.1',
 8098,
 transport\_class=riak.RiakHttpTransport)

print "client alive: ", client.is\_alive()

bucket = client.bucket('t1')

a = bucket.new('a', (1, 2, 3))

for i in range(1000):
 x = bucket.new('x\_%i' % i, i)
 x.store()
 print "stored", i + 1, "items"
 a.add\_link(x, 'dings').store()
 print "stored", i + 1, "links"

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com



\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

