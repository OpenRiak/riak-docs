---
title: "Re: RFC: Let's Make Riak-Core Easier to Use"
description: ""
project: community
lastmod: 2013-11-01T13:12:01-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12826"
mailinglist_parent_id: "msg12796"
author_name: "Alexander Gunin"
project_section: "mailinglistitem"
sent_date: 2013-11-01T13:12:01-07:00
---


Hi. We have two system based on riak-core. Simple distributed database for
storing time-series data, we don't use riak\_kv for this because we need
batch insert,our data are small(16 byte key and 12 byte value) and we need
less consistence guarantee but lowest latency. The second is framework
named Zont for soft real-time data processing, like twitter storm,in which
vnode play role standart erlang supervisor that allow for us build
distributed process for process data. Zont used in one our application for
processing financial data and it's run in production in Sberbank(One of the
largest Russian Bank) and It's used in another application for processing
large amount data from sensors that in production too.
I will tell you about some problems in current riak-core and feature that
will be usefull for us.
1. By default when riak\_core app started on some node it try start all
vnode(include those that must be start on another node). It's good
behaviour for riak\_kv or our time-series database but not for our second
application. In our callback for riak\_core\_vnode first we check is it good
place for this node at this time,if it's not we wait hadoff request and
periodically check maybe it's already right place for this vnode. It will
be good to have both behaviour in riak-core.
2. If some node in cluster fail riak\_core don't restart vnode that owned by
this node, vnodes start only if riak\_core receive some request to it. It's
not good for our second app too:) We write monitoring process that start
vnodes if some node goes down. It will be good to have option that turn it
in riak\_core
3. We must have option for use master coordinator(like zoo-keeper) for
update ring information and have consistence view on cluster for all
node(states and down node etc.). Yes it's point of failure but wee really
need it for CA. Currently we use many hack for release this on
riak\_core,it's work but it's not good solution (kill minor island, ...,etc.)
4. Try don't use riak\_core\_mochiglobal for save ring info it's don't work
this standard erlang release upgrade procedure or we must have some option
for recompile ring module that was built at runtime by
riak\_core\_mochiglobal during upgrade procedure.
5. May be Include API for send multiple requests to VNodes by optimal way.
6. DOCUMENTATION!!!!!!!!

That all that remembered.


May be remember something else latter.

 Please let me know if you need some additional information about our use
case.



On Wed, Oct 30, 2013 at 4:13 AM, Sam Elliott  wrote:

&gt; Hey Riak-Users (and Riak-Core)
&gt;
&gt; Some time ago, Basho released riak\_core as a framework for building
&gt; distributed applications [1].
&gt; One of the key pieces of guidance that was given at the time was that you
&gt; should use the features
&gt; of riak\_kv if your app needed to do any persistence. With the new features
&gt; we'll be releasing in
&gt; 2.0 [2], we want to make riak\_core the best toolkit for building complex
&gt; distributed applications
&gt; with both CP and AP semantics.
&gt;
&gt; As I see it, the main thing that is preventing most people from writing
&gt; their own riak\_core
&gt; application is that there's not an API that allows people to easily do so.
&gt; There's a basic internal
&gt; KV client at the moment, but there are some features that it doesn't cover.
&gt;
&gt; Post-RICON (and almost certainly after the 2.0 release), I'm going to
&gt; focus on making riak\_core
&gt; applications really easy to make, and riak\_kv easy to use from a riak\_core
&gt; application.
&gt;
&gt; I'd love any feedback that you all have. How can we improve the current
&gt; APIs? How can we make it
&gt; really easy for people to create riak\_core apps? How can we nicely expose
&gt; the newest features of
&gt; riak\_kv for people to use in their riak\_core applications?
&gt;
&gt; Bonus points for feedback from anyone who has built and run a riak\_core
&gt; application in production.
&gt;
&gt; Sam
&gt;
&gt; PS: I have some swag to give to anyone who's helpful
&gt;
&gt; [1]: http://basho.com/where-to-start-with-riak-core/
&gt; [2]: http://basho.com/introducing-riak-2-0/
&gt;
&gt;
&gt;
&gt; --
&gt; Sam Elliott
&gt; Engineer
&gt; sam.elli...@basho.com
&gt; --
&gt;
&gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

