---
title: "Re:"
description: ""
project: community
lastmod: 2013-08-10T16:47:22-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11954"
mailinglist_parent_id: "msg11947"
author_name: "Jeremy Ong"
project_section: "mailinglistitem"
sent_date: 2013-08-10T16:47:22-07:00
---


Just a quick follow up, I did this exact approach and things went
smoothly as expected. I had forgotten that stopping a node does not
mark the node as "down" indicating that vnodes should be handed off.

One last step I would add is that the log directory also needs to be
changed in the vm.args file as that is where the erl\_crash.dump file
gets written (if the log dir is moved as well).

Thanks,
Jeremy

On Fri, Aug 9, 2013 at 7:57 PM, Jeremiah Peschka
 wrote:
&gt; You \*should\* be able to
&gt;
&gt; 1) stop the node
&gt; 2) change platform\_data\_dir and ring\_state\_dir in the app.config file
&gt; 3) move data to the new platform\_data\_dir
&gt; 4) move ring state to the new ring\_state\_dir
&gt; 5) restart the node
&gt;
&gt; This should avoid having to re-write all of your data one node at a time.
&gt;
&gt; ---
&gt; Jeremiah Peschka - Founder, Brent Ozar Unlimited
&gt; MCITP: SQL Server 2008, MVP
&gt; Cloudera Certified Developer for Apache Hadoop
&gt;
&gt;
&gt; On Fri, Aug 9, 2013 at 7:23 PM, Jeremy Ong  wrote:
&gt;&gt;
&gt;&gt; Hi Riak users,
&gt;&gt;
&gt;&gt; I'm wondering what the best approach to this is. The scenario is that
&gt;&gt; I have mounted a new drive to the machine and want to have the node
&gt;&gt; leverage that drive to save data as opposed to the mount point it is
&gt;&gt; currently writing to.
&gt;&gt;
&gt;&gt; My current plan is to start a second instance of riak (by changing the
&gt;&gt; name in the vm.args file) and having it join the cluster, followed by
&gt;&gt; removing the previous node. Then to repeat this for all nodes for
&gt;&gt; which the upgrade applies while monitoring the dashboard to see if the
&gt;&gt; handoffs are occurring appropriately.
&gt;&gt;
&gt;&gt; Is there an easier way or better way, and are they any potential
&gt;&gt; issues with this approach?
&gt;&gt;
&gt;&gt; Thanks,
&gt;&gt; Jeremy
&gt;&gt;
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
&gt;

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

