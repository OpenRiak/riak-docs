---
title: "Re: Faceted Queries via Solr Interface"
description: ""
project: community
lastmod: 2011-12-28T10:42:53-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06085"
mailinglist_parent_id: "msg06084"
author_name: "Ryan Zezeski"
project_section: "mailinglistitem"
sent_date: 2011-12-28T10:42:53-08:00
---


Simeon,

I think the assumption is that if it's a precommit hook you "know" that if
an object was written then it has also been indexed. Whereas if it's a
postcommit the object may be written but the indexing fails. I think the
guiding decision would probably be what you favor, 1) that for any object
it's index will exist first, therefore your query results are "consistent"
with your data or 2) that data persistence is the foremost priority and
inconsistent or eventually consistent query results are acceptable (because
maybe objects are constantly updated and eventually they will get indexed).
 The thing to keep in mind is that the precommit will block the write, and
if you're using a persistent backend like bitcask or level you may not want
your data sitting in memory waiting for the indexing to finish. Another
thing to think about is using a postcommit that fires off into a queue that
is indexed thus reducing latency on your clients writes to Riak. My point
is that there are many factors and if you are going to go down the
Riak/Solr route you should take your applications requirements into
consideration.

HTH,
-Ryan

On Wed, Dec 28, 2011 at 12:56 PM, Simeon F. Willbanks &lt;
s...@simeonfosterwillbanks.com&gt; wrote:

&gt; Ryan,
&gt;
&gt; Thanks for the timely answer.
&gt;
&gt; Yea, faceting in code doesn't sound like the right solution. :)
&gt;
&gt; In the talk 'Riak Search Explained,' Daniel Reverri described how Riak
&gt; Search integrates with Riak KV via a Pre-Commit Hook. If you were to
&gt; roll your own search (Solr Cluster), is the recommendation to initiate
&gt; a indexing process from a Pre-Commit Hook as opposed to a Post-Commit
&gt; Hook?
&gt;
&gt; Thanks again,
&gt; Simeon
&gt;
&gt;
&gt; On Wed, Dec 28, 2011 at 8:04 AM, Ryan Zezeski  wrote:
&gt; &gt; Simeon,
&gt; &gt;
&gt; &gt; There are currently no plans to implement faceted queries. The first
&gt; &gt; thought is that you pull back all results and do the faceting yourself,
&gt; but
&gt; &gt; what's the point of that, right? I think other than that some Erlang
&gt; would
&gt; &gt; need to be written for Search to properly support faceting.
&gt; &gt;
&gt; &gt; -Ryan
&gt; &gt;
&gt; &gt; On Tue, Dec 27, 2011 at 4:54 PM, Simeon F. Willbanks
&gt; &gt;  wrote:
&gt; &gt;&gt;
&gt; &gt;&gt; Are there plans to implement Faceted Queries?
&gt; &gt;&gt;
&gt; &gt;&gt; "Facet querying through the Solr interface is not yet supported."
&gt; &gt;&gt;
&gt; &gt;&gt;
&gt; http://wiki.basho.com/Riak-Search---Querying.html#Faceted-Queries-via-the-Solr-Interface
&gt; &gt;&gt;
&gt; &gt;&gt; In the meantime, is there a recommended alternative way to build
&gt; &gt;&gt; facets with Riak-Search?
&gt; &gt;&gt;
&gt; &gt;&gt; Thanks,
&gt; &gt;&gt; Simeon
&gt; &gt;&gt;
&gt; &gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; &gt;&gt; riak-users mailing list
&gt; &gt;&gt; riak-users@lists.basho.com
&gt; &gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; &gt;
&gt; &gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

