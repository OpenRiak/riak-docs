---
title: "Re: Get all keys from an bucket"
description: ""
project: community
lastmod: 2016-02-29T00:03:52-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17094"
mailinglist_parent_id: "msg17092"
author_name: "Russell Brown"
project_section: "mailinglistitem"
sent_date: 2016-02-29T00:03:52-08:00
---


Use “max\_size” to set a limit on how many results you receive, as documented 
here:

http://docs.basho.com/riak/latest/dev/using/2i/#Querying

pass the parameter “stream=true” to stream.

Do you want the object bodies back too? There is a super secret interface in PB 
to achieve this, have a look at 
https://github.com/basho/riak-erlang-client/blob/master/src/riakc\_pb\_socket.erl#L1111.
 It at least illustrates the use of the query parameters for a $bucket index 
that uses streaming, pagination, etc

Russell

On 26 Feb 2016, at 17:17, Markus Geck  wrote:

&gt; 
&gt; Anyone?
&gt; 
&gt; Saturday, January 30, 2016 1:42 AM +03:00 from Markus Geck 
&gt; :
&gt; 
&gt; Do you have an example how to stream them? The url I've posted in my initial 
&gt; mail explains how to use that index, but not how to stream the results. 
&gt; Unfortunately accessing the keys that way overloads the node.
&gt; 
&gt; 
&gt; Friday, January 29, 2016 2:06 PM UTC from Russell Brown 
&gt; :
&gt; 
&gt; With leveldb you can use the special $bucket index. You can also stream the 
&gt; keys, and paginate them, meaning you can get them in smaller lumps, hopefully 
&gt; this will appear faster and avoid the timeout you're seeing.
&gt; 
&gt; 
&gt; On 29 Jan 2016, at 14:03, Markus Geck  wrote:
&gt; 
&gt;&gt; Yes, sorry I forgot to mention that.
&gt;&gt; 
&gt;&gt; 
&gt;&gt; Monday, January 25, 2016 10:10 AM UTC from Russell Brown 
&gt;&gt; :
&gt;&gt; 
&gt;&gt; Hi Markus,
&gt;&gt; Are you using leveldb backend?
&gt;&gt; 
&gt;&gt; Russell
&gt;&gt; 
&gt;&gt; On 22 Jan 2016, at 19:05, Markus Geck  wrote:
&gt;&gt; 
&gt;&gt; &gt; Hello,
&gt;&gt; &gt; 
&gt;&gt; &gt; is there any way to get all keys from an bucket?
&gt;&gt; &gt; 
&gt;&gt; &gt; I've already tried this guide: 
&gt;&gt; &gt; http://www.paperplanes.de/2011/12/13/list-all-of-the-riak-keys.html But 
&gt;&gt; &gt; riak always wents unresponsive with a huge server load.
&gt;&gt; &gt; 
&gt;&gt; &gt; and "GET /buckets/bucket/keys?keys=stream" returns an timeout error.
&gt;&gt; &gt; 
&gt;&gt; &gt; Is there any other way?
&gt;&gt; &gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; &gt; riak-users mailing list
&gt;&gt; &gt; riak-users@lists.basho.com
&gt;&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt; 
&gt;&gt; 
&gt; 
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

