---
title: "Re: Resetting bucket properties"
description: ""
project: community
lastmod: 2013-09-11T17:40:19-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12246"
mailinglist_parent_id: "msg12244"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2013-09-11T17:40:19-07:00
---


Sounds like a bug to me, would you file an issue on riak\_kv?

Sean Cribbs

On Sep 11, 2013, at 6:59 PM, Jeremiah Peschka  
wrote:

&gt; Here's a fun one that Alex Rice just brought to my attention:
&gt; 
&gt; Starting with a new bucket, I have bucket properties like so:
&gt; 
&gt; 
&gt; {"props":{"search":false,"allow\_mult":false,"basic\_quorum":false,"big\_vclock":50,"chash\_keyfun":{"mod":"riak\_core\_util","fun":"chash\_std\_keyfun"},"dw":"quorum","last\_write\_wins":false,"linkfun":{"mod":"riak\_kv\_wm\_link\_walker","fun":"mapreduce\_linkfun"},"n\_val":3,"name":"players","notfound\_ok":true,"old\_vclock":86400,"postcommit":[],"pr":0,"precommit":[],"pw":0,"r":"quorum","rw":"quorum","small\_vclock":50,"w":"quorum","young\_vclock":20}}
&gt; Setting allow\_mult = true and last\_write\_wins = false results in the 
&gt; following:
&gt; 
&gt; {"props":{"allow\_mult":true,"basic\_quorum":false,"big\_vclock":50,"chash\_keyfun":{"mod":"riak\_core\_util","fun":"chash\_std\_keyfun"},"dw":"quorum","last\_write\_wins":false,"linkfun":{"mod":"riak\_kv\_wm\_link\_walker","fun":"mapreduce\_linkfun"},"n\_val":3,"name":"players","notfound\_ok":true,"old\_vclock":86400,"postcommit":[],"pr":0,"precommit":[],"pw":0,"r":1,"rw":"quorum","search":false,"small\_vclock":50,"w":1,"young\_vclock":20}}
&gt; 
&gt; 
&gt; So far so good, right?
&gt; Flipping the values around so that allow\_mult = false and LWW = true actually 
&gt; ends up with allow\_mult = true and LWW = true:
&gt; 
&gt; 
&gt; {"props":{"allow\_mult":true,"basic\_quorum":false,"big\_vclock":50,"chash\_keyfun":{"mod":"riak\_core\_util","fun":"chash\_std\_keyfun"},"dw":"quorum","last\_write\_wins":true,"linkfun":{"mod":"riak\_kv\_wm\_link\_walker","fun":"mapreduce\_linkfun"},"n\_val":3,"name":"players","notfound\_ok":true,"old\_vclock":86400,"postcommit":[],"pr":0,"precommit":[],"pw":0,"r":1,"rw":"quorum","search":false,"small\_vclock":50,"w":1,"young\_vclock":20}}
&gt; 
&gt; 
&gt; 
&gt; Resetting bucket properties at this point puts the bucket back where it 
&gt; should be.
&gt; Is this behavior expected or have I missed something subtle?
&gt; 
&gt; ---
&gt; Jeremiah Peschka - Founder, Brent Ozar Unlimited
&gt; MCITP: SQL Server 2008, MVP
&gt; Cloudera Certified Developer for Apache Hadoop
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

