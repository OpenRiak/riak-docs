---
title: "Re: /riak-cs/stats broken"
description: ""
project: community
lastmod: 2013-12-18T08:18:24-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13284"
mailinglist_parent_id: "msg13231"
author_name: "Hector Castro"
project_section: "mailinglistitem"
sent_date: 2013-12-18T08:18:24-08:00
---


Hi Dan,

Apologizes for the delayed response.

I reproduced the HTTP 403 when `admin\_auth\_enabled` is set to `false`,
but successfully retrieved stats with it set to `true`:

$ riak-cs version
1.4.2
$ grep "admin\_auth\_enabled" /etc/riak-cs/app.config
 {admin\_auth\_enabled, true},
$ ./s3curl.pl --id admin --contentType application/json -- -s
--proxy1.0 localhost:8080 http://s3.amazonaws.com/riak-cs/stats
{"legend":["meter\_count","meter\_rate","latency\_mean","latency\_median","latency\_95","latency\_99"],"block\_get":[0,0.0,0.0,0.0,0.0,0.0],"block\_get\_retry":[0,0.0,0.0,0.0,0.0,0.0],"block\_put":[0,0.0,0.0,0.0,0.0,0.0],"block\_delete":[0,0.0,0.0,0.0,0.0,0.0],"service\_get\_buckets":[0,0.0,0.0,0.0,0.0,0.0],"bucket\_list\_keys":[0,0.0,0.0,0.0,0.0,0.0],"bucket\_create":[0,0.0,0.0,0.0,0.0,0.0],"bucket\_delete":[0,0.0,0.0,0.0,0.0,0.0],"bucket\_get\_acl":[0,0.0,0.0,0.0,0.0,0.0],"bucket\_put\_acl":[0,0.0,0.0,0.0,0.0,0.0],"object\_get":[0,0.0,0.0,0.0,0.0,0.0],"object\_put":[0,0.0,0.0,0.0,0.0,0.0],"object\_head":[0,0.0,0.0,0.0,0.0,0.0],"object\_delete":[0,0.0,0.0,0.0,0.0,0.0],"object\_get\_acl":[0,0.0,0.0,0.0,0.0,0.0],"object\_put\_acl":[0,0.0,0.0,0.0,0.0,0.0],"legend":["workers","overflow","size"],"request\_pool":[127,0,1],"bucket\_list\_pool":[5,0,0]}%

The following issue can be used to track the scenario where
`admin\_auth\_enabled` returns a 403 when set to `false`:

https://github.com/basho/riak\_cs/issues/719

--
Hector


On Thu, Dec 12, 2013 at 12:30 PM, Sajner, Daniel G  wrote:
&gt; Hi.
&gt;
&gt;
&gt;
&gt; Running riak-cs-1.4.2 here and the /riak-cs/stats endpoint appears to be
&gt; broken. I get 403 error regardless of the configuration settings.
&gt;
&gt;
&gt;
&gt; Here’s a snippet from app.config:
&gt;
&gt;
&gt;
&gt; %% Port and IP address to listen on for system
&gt;
&gt; %% administration tasks. Uncomment the following lines
&gt;
&gt; %% to use a separate IP and port for administrative
&gt;
&gt; %% API calls.
&gt;
&gt; {admin\_ip, "127.0.0.1"},
&gt;
&gt; {admin\_port, 8000 } ,
&gt;
&gt; {admin\_auth\_enabled, false }, ß This should let me access the
&gt; /riak-cs/stats endpoint without an authorization
&gt;
&gt;
&gt;
&gt;
&gt;
&gt; I’ve changed admin\_auth\_enabled to true, but get the same results passing an
&gt; authorization header.
&gt;
&gt;
&gt;
&gt; Anyone else run into this issue?
&gt;
&gt;
&gt;
&gt; Thanks,
&gt;
&gt; Dan
&gt;
&gt;
&gt;
&gt; Confidentiality Notice: This electronic message transmission, including any
&gt; attachment(s), may contain confidential, proprietary, or privileged
&gt; information from Chemical Abstracts Service (“CAS”), a division of the
&gt; American Chemical Society (“ACS”). If you have received this transmission in
&gt; error, be advised that any disclosure, copying, distribution, or use of the
&gt; contents of this information is strictly prohibited. Please destroy all
&gt; copies of the message and contact the sender immediately by either replying
&gt; to this message or calling 614-447-3600.
&gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

