---
title: "Re: Riak search and secondary indices in 1.0 clarification"
description: ""
project: community
lastmod: 2011-09-23T10:20:28-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg04848"
mailinglist_parent_id: "msg04846"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2011-09-23T10:20:28-07:00
---


Replies inline.


&gt; - Riak search will work regardless of which backend your data is in because
&gt; it keeps its data in a separate bucket which uses merge\_index as the backend
&gt;

Not really a separate bucket - more like an entirely differently-shaped
storage system. Riak Search has its own vnodes, for instance.

- In order for data to have a secondary index the backend for that bucket
&gt; needs to be leveldb because index data is kept in the same bucket as
&gt; key/value data[0]
&gt;

Again, not really the same bucket, but the same storage system. Before the
1.0 stabilization branch, there was a storage backend that used bitcask for
k/v and merge\_index for 2I. It was too brittle and confusing, so we
simplified things by requiring backends that are capable of 2I to support it
directly. The only one that was feasible for this release was LevelDB.


&gt; - in order for you to be able to use leveldb, you need to do one of the
&gt; following:
&gt; - either direct riak to use leveldb as the default backend here:
&gt; https://github.com/basho/riak/blob/riak-1.0.0rc1/rel/files/app.config#L46
&gt; - or enable multiple backends in the config file
&gt; - or specifically indicate the backend in the bucket prop (which still
&gt; requires the backend to be made available in app.config)
&gt;
&gt;
Your last two points there are the same thing - multi\_backend. Either way,
whichever backend receives the object, only the items stored in LevelDB will
be available via indexes.


&gt;
&gt; In short, is there a canonical reference somewhere that I'm jut missing?
&gt;
&gt;
We're working on getting the docs up-to-date now that the feature set has
been frozen. Watch for them over the next week.
 --
Sean Cribbs 
Developer Advocate
Basho Technologies, Inc.
http://www.basho.com/
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

