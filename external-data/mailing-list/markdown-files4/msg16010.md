---
title: "Re: Need help getting riak started"
description: ""
project: community
lastmod: 2015-04-15T23:30:07-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16010"
mailinglist_parent_id: "msg16009"
author_name: "Shawn Debnath"
project_section: "mailinglistitem"
sent_date: 2015-04-15T23:30:07-07:00
---


Just to add to this, seems like even after waiting for 15 mins, the start 
script fails because it is unable to ping the node. Tracing through the 
scripts, we arrive at the nodetool in /usr/lib/riak/erts-5.10.3/bin which is 
calling {net\_kernel:hidden\_connect\_node(TargetNode), net\_adm:ping(TargetNode)} 
to check the status of the node and is getting {\_, pang} in return. Results in 
printing out "Node 'ria...@riak.prod.pryvy.com' not responding to pings." At 
this stage riak console is still unable to connect and still nothing in error 
or crash logs. Any hints on how to proceed, or ways to collect more debug info 
appreciated.

On 4/15/15, 7:39 PM, "Shawn Debnath" 
&gt; wrote:

System: Ubuntu 14.04.2 LTS.

From a different vm (10.IP.IP.IP2) after exposing 8087 on 10.IP.IP.IP1:
1&gt; {ok, Pid} = riakc\_pb\_socket:start(“10.IP.IP.IP1", 8087).
{ok,&lt;0.35.0&gt;}
2&gt; riakc\_pb\_socket:is\_connected(Pid).
true
3&gt;


On 4/15/15, 5:53 PM, "Jon Meredith" 
&gt; wrote:

What distribution/ version of Linux are you running on the VM Shawn?

On Wed, Apr 15, 2015 at 5:11 PM, Shawn Debnath 
&gt; wrote:
Hi there,

Building out a new cluster (for the first time) and package cloud pushed down 
2.1.0-1. I have gone through and installed all the necessary packages, 
configured riak through riak.conf and attempting to start the first node in the 
cluster. Unfortunately, even though the processes are running, riak-admin 
reports that no nodes are running.

root@riak-01:/etc/riak# riak-admin diag
Node is not running!
root@riak-01:/etc/riak# riak-admin status
Node is not running!

12538 ? S 0:00 /usr/lib/riak/erts-5.10.3/bin/epmd -daemon
13799 ? S 0:00 /usr/lib/riak/erts-5.10.3/bin/run\_erl -daemon 
/tmp/riak// /var/log/riak exec /usr/sbin/riak console
13802 pts/2 Ssl+ 0:26 /usr/lib/riak/erts-5.10.3/bin/beam.smp -scl false 
-sfwi 500 -P 256000 -e 256000 -Q 65536 -A 64 -K true -W w -zdbbl 32768 -- -root 
/usr/lib/riak -progname riak -- -home /var/lib/riak -- -boot 
/usr/lib/riak/releases/2.1.0/riak -config 
/var/lib/riak/generated.configs/app.2015.04.15.22.17.00.config -setcookie riak 
-name riak...@riak.prod.pryvy.com -smp 
enable -vm\_args /var/lib/riak/generated.configs/vm.2015.04.15.22.17.00.args -pa 
/usr/lib/riak/lib/basho-patches -- console
14047 ? Ss 0:00 sh -s disksup
14050 ? Ss 0:00 /usr/lib/riak/lib/os\_mon-2.2.13/priv/bin/memsup
14052 ? Ss 0:00 /usr/lib/riak/lib/os\_mon-2.2.13/priv/bin/cpu\_sup

The config states that it should be listening on:

listener.http.internal = 127.0.0.1:8098
##listener.protobuf.internal = 10.IP.IP.IP:8087
listener.protobuf.internal = 127.0.0.1:8087

I initially had it listening to our internal network IP, but as part of 
testing, switched to localhost to see if it resolves it but alas, that’s not 
the case.

In the log directory, files crash.log and error.log are empty and the 
console.log reports things are ok:

[snip]
2015-04-15 22:17:03.386 [info] &lt;0.7.0&gt; Application riak\_kv started on node 
'riak...@riak.prod.pryvy.com'
2015-04-15 22:17:03.402 [info] &lt;0.7.0&gt; Application merge\_index started on node 
'riak...@riak.prod.pryvy.com'
2015-04-15 22:17:03.406 [info] &lt;0.7.0&gt; Application riak\_search started on node 
'riak...@riak.prod.pryvy.com'
2015-04-15 22:17:03.421 [info] &lt;0.7.0&gt; Application ibrowse started on node 
'riak...@riak.prod.pryvy.com'
2015-04-15 22:17:03.429 [info] &lt;0.7.0&gt; Application yokozuna started on node 
'riak...@riak.prod.pryvy.com'
2015-04-15 22:17:03.434 [info] &lt;0.7.0&gt; Application cluster\_info started on node 
'riak...@riak.prod.pryvy.com'
2015-04-15 22:17:03.443 [info] 
&lt;0.192.0&gt;@riak\_core\_capability:process\_capability\_changes:555 New capability: 
{riak\_control,member\_info\_version} = v1
2015-04-15 22:17:03.461 [info] &lt;0.7.0&gt; Application riak\_control started on node 
'riak...@riak.prod.pryvy.com'
2015-04-15 22:17:03.462 [info] &lt;0.7.0&gt; Application erlydtl started on node 
'riak...@riak.prod.pryvy.com'
2015-04-15 22:17:03.485 [info] &lt;0.7.0&gt; Application riak\_auth\_mods started on 
node 'riak...@riak.prod.pryvy.com'
2015-04-15 22:17:19.618 [info] 
&lt;0.369.0&gt;@riak\_kv\_entropy\_manager:perhaps\_log\_throttle\_change:853 Changing AAE 
throttle from undefined -&gt; 0 msec/key, based on maximum vnode mailbox size 0 
from 'riak...@riak.prod.pryvy.com'
2015-04-15 22:17:19.672 [info] &lt;0.352.0&gt;@riak\_core:wait\_for\_service:483 Wait 
complete for service riak\_kv (16 seconds)

Full log @ http://pastebin.com/8hb43MwP

Any help will be greatly appreciated.

Thanks,
Shawn


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com




--
Jon Meredith
Chief Architect
Basho Technologies, Inc.
jmered...@basho.com
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

