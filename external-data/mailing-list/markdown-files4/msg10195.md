---
title: "Re: Tuning a Riak cluster."
description: ""
project: community
lastmod: 2013-02-21T19:14:28-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg10195"
mailinglist_parent_id: "msg10193"
author_name: "Jeremiah Peschka"
project_section: "mailinglistitem"
sent_date: 2013-02-21T19:14:28-08:00
---


In AWS you have an option in a VPC to get dedicated gear. In a local DC, your 
VMware admin should be able to set up rules to make sure that groups of VMs 
only land on the same host in the event of a catastrophic multi-host failure.

You'll have difficulties getting predictable performance while sharing VM hosts.

--
Jeremiah Peschka - Founder, Brent Ozar Unlimited
MCITP: SQL Server 2008, MVP
Cloudera Certified Developer for Apache Hadoop

On Feb 21, 2013, at 6:54 PM, Alexander Sicular  wrote:

&gt; Well, I would say in any circumstance where you care about performance or the 
&gt; availability of your data. Obviously the gold standard is bare metal. A 
&gt; search on google for "aws guaranteed different physical machines" yielded 
&gt; this aws forum thread from 2006, 
&gt; https://forums.aws.amazon.com/message.jspa?messageID=55112. Things may have 
&gt; changed since then. But I use linode which tells you which physical hardware 
&gt; your vm is on.
&gt; 
&gt; 
&gt; On Feb 21, 2013, at 9:43 PM, Kevin Burton  wrote:
&gt; 
&gt;&gt; How strict is this “Under no circumstances should you have more than one VM 
&gt;&gt; (one logical node in a Riak cluster) on the same physical hardware” rule? It 
&gt;&gt; doesn’t fit my situation but there has to be some leniency because Riak has 
&gt;&gt; to work in a cloud and you are not guaranteed that your provisioned VM will 
&gt;&gt; be on different physical hardware than the other nodes.
&gt;&gt; 
&gt;&gt; From: Alexander Sicular [mailto:sicul...@gmail.com] 
&gt;&gt; Sent: Thursday, February 21, 2013 8:27 PM
&gt;&gt; To: Kevin Burton
&gt;&gt; Cc: 'Sean Carey'; riak-users@lists.basho.com
&gt;&gt; Subject: Re: Tuning a Riak cluster.
&gt;&gt; 
&gt;&gt; It can't be said enough times but the number one thing you can do to ensure 
&gt;&gt; that you are getting true performance (not to mention redundancy) is to use 
&gt;&gt; different physical hardware for each of your nodes. Under no circumstances 
&gt;&gt; should you have more than one VM (one logical node in a Riak cluster) on the 
&gt;&gt; same physical hardware. Also, use multiple 
&gt;&gt; connections/threads/parallelism/whatever on client side and be sure to hit 
&gt;&gt; all the nodes in the cluster haproxy roundrobin-esque when writing to Riak. 
&gt;&gt; Everything else is in the noise.
&gt;&gt; 
&gt;&gt; -Alexander Sicular
&gt;&gt; 
&gt;&gt; @siculars
&gt;&gt; 
&gt;&gt; On Feb 21, 2013, at 9:04 PM, Kevin Burton  wrote:
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; There each has about 20-30GB of disk space. They each are a VM so I am not 
&gt;&gt; sure how to specify the CPU. They all seem to be 64 bit Intel processors but 
&gt;&gt; I could tell you the clock speed. The network is 1Gb Ethernet.
&gt;&gt; 
&gt;&gt; From: Sean Carey [mailto:ca...@basho.com] 
&gt;&gt; Sent: Thursday, February 21, 2013 7:59 PM
&gt;&gt; To: Kevin Burton
&gt;&gt; Cc: riak-users@lists.basho.com
&gt;&gt; Subject: Re: Tuning a Riak cluster.
&gt;&gt; 
&gt;&gt; Kevin,
&gt;&gt; Disk and CPU, and Network?
&gt;&gt; 
&gt;&gt; 
&gt;&gt; Sean Carey
&gt;&gt; @densone
&gt;&gt; 
&gt;&gt; On Thursday, February 21, 2013 at 20:31, Kevin Burton wrote:
&gt;&gt; 
&gt;&gt; 
&gt;&gt; I have a cluster of 4 machines (4 Linux VM machines each allocated about 1 
&gt;&gt; Gb of memory – yea I know it isn’t a lot). I would like to get some pointers 
&gt;&gt; on getting the fastest query time possible given these meager resources. 
&gt;&gt; Thank you.
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt; 
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

