---
title: "Re: Riak 2.0.2 issues"
description: ""
project: community
lastmod: 2015-01-20T13:23:42-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15534"
mailinglist_parent_id: "msg15490"
author_name: "Luke Bakken"
project_section: "mailinglistitem"
sent_date: 2015-01-20T13:23:42-08:00
---


Hi Claudio,

The "indexes\_not\_supported" error means you attempted to write
secondary index information to a bucket that is stored in a backend
that does not support indexes.

Could you please confirm that the bucket you're using for this data is
set to use the "eleveldb\_mult" backend? You will have to check the
bucket's properties, or the parent bucket type's properties. The
property name is "backend".

For instance, if your bucket is named my\_bucket and you are not using
bucket types, this will get the properties:

curl riak-host:8098/buckets/my\_bucket/props

--
Luke Bakken
Engineer
lbak...@basho.com

On Wed, Jan 14, 2015 at 10:56 AM, Claudio Cesar Sanchez Tejeda
 wrote:
&gt; Hi,
&gt;
&gt; I upgraded Riak from 1.4.12 to 2.0.2. The tomcat application doesn't
&gt; work correctly...
&gt;
&gt; We have 2 issues:
&gt;
&gt; - We are using mapreduce with javascript. The meta data is saved in
&gt; Riak with low case, for example: x-test-lala, but the javascript
&gt; object that the mapreduce function returns is in camel case
&gt; (X-Test-Lala).
&gt;
&gt; - Some internal functions are failing with this error:
&gt; Caused by: java.io.IOException:
&gt; {"phase":"index","error":"{indexes\_not\_supported,riak\_kv\_multi\_backend}"
&gt;
&gt; This is the configuration file:
&gt;
&gt; log.console = file
&gt; log.console.level = info
&gt; log.console.file = /var/log/riak/console.log
&gt; log.error.file = /var/log/riak/error.log
&gt; log.syslog = off
&gt; log.crash.file = /var/log/riak/crash.log
&gt; log.crash.maximum\_message\_size = 64KB
&gt; log.crash.size = 10MB
&gt; log.crash.rotation.keep = 5
&gt; log.crash.rotation = $D0
&gt; log.crash = on
&gt; nodename = r...@riak0.example.com
&gt; distributed\_cookie = riak
&gt; erlang.async\_threads = 64
&gt; erlang.max\_ports = 65536
&gt; erlang.schedulers.force\_wakeup\_interval = 500
&gt; erlang.schedulers.compaction\_of\_load = false
&gt; ring\_size = 64
&gt; transfer\_limit = 2
&gt; dtrace = off
&gt; platform\_bin\_dir = /usr/sbin
&gt; platform\_data\_dir = /var/lib/riak
&gt; platform\_etc\_dir = /etc/riak
&gt; platform\_lib\_dir = /usr/lib/riak/lib
&gt; platform\_log\_dir = /var/log/riak
&gt; strong\_consistency = off
&gt; listener.http.internal = 10.8.5.41:8098
&gt; listener.protobuf.internal = 10.8.5.41:8087
&gt; protobuf.backlog = 128
&gt; anti\_entropy = active
&gt; storage\_backend = multi
&gt; object.format = 1
&gt; object.size.warning\_threshold = 5MB
&gt; object.size.maximum = 50MB
&gt; object.siblings.warning\_threshold = 25
&gt; object.siblings.maximum = 100
&gt; bitcask.data\_root = $(platform\_data\_dir)/bitcask
&gt; bitcask.io\_mode = erlang
&gt; riak\_control = on
&gt; riak\_control.auth.mode = off
&gt; leveldb.maximum\_memory.percent = 70
&gt; search = off
&gt; search.solr.start\_timeout = 30s
&gt; search.solr.port = 8093
&gt; search.solr.jmx\_port = 8985
&gt; search.solr.jvm\_options = -d64 -Xms1g -Xmx1g -XX:+UseStringCache
&gt; -XX:+UseCompressedOops
&gt; multi\_backend.default = bitcask\_mult
&gt; multi\_backend.bitcask\_mult.storage\_backend = bitcask
&gt; multi\_backend.bitcask\_mult.bitcask.data\_root = /var/lib/riak/bitcask\_mult
&gt; multi\_backend.eleveldb\_mult.storage\_backend = leveldb
&gt; multi\_backend.eleveldb\_mult.leveldb.data\_root = /var/lib/riak/eleveldb\_mult
&gt; multi\_backend.bitcask\_expiry\_mult.storage\_backend = bitcask
&gt; multi\_backend.bitcask\_expiry\_mult.bitcask.data\_root =
&gt; /var/lib/riak/bitcask\_expiry\_mult
&gt; multi\_backend.bitcask\_expiry\_mult.bitcask.expiry = 1h
&gt; multi\_backend.memory\_expiry\_mult.storage\_backend = memory
&gt; multi\_backend.memory\_expiry\_mult.memory\_backend.max\_memory\_per\_vnode = 16MB
&gt; multi\_backend.memory\_expiry\_mult.memory\_backend.ttl = 1h
&gt;
&gt; Do you have any clue how I can resolve these issues?
&gt;
&gt; The only solution that I have now is downgrade Riak to 1.4.12...
&gt;
&gt; Regards.
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

