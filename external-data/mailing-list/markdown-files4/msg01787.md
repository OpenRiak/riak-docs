---
title: "Re: How to enabled a riak-search KV bucket from the erlang library"
description: ""
project: community
lastmod: 2010-12-14T11:22:48-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01787"
mailinglist_parent_id: "msg01784"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2010-12-14T11:22:48-08:00
---


Carson,

Unfortunately the PB interface, as you discovered, doesn't support all the 
bucket properties. You could, however, also use the riak-erlang-http-client 
which has full support for all bucket properties. We realize this is a pain 
point and will be working to improve the PB interface in the near future. To 
enable the precommit hook, do something like this with the HTTP client:

Client = rhc:create(), %% use create/4 if you're not connecting to localhost
rhc:set\_bucket(Client, "my\_bucket", [{&lt;&lt;"precommit"&gt;&gt;, [
 {struct, [{&lt;&lt;"mod"&gt;&gt;, &lt;&lt;"riak\_search\_kv\_hook"&gt;&gt;}, {&lt;&lt;"fun"&gt;&gt;, 
&lt;&lt;"precommit"&gt;&gt;}]}
 ]}]).

Sean Cribbs 
Developer Advocate
Basho Technologies, Inc.
http://basho.com/

On Dec 14, 2010, at 12:39 PM, carson li wrote:

&gt; hey everyone,
&gt; 
&gt; i'm trying to figure out if it's possible to enable the precommit hook for a 
&gt; riak bucket using the erlang library. i know you can do it from a curl 
&gt; statement, or using the "search-cmd install". it also states on the 
&gt; pb-client that there's only suport for modifying 2 bucket properties, which 
&gt; is n\_val, and allow\_multi. 
&gt; 
&gt; i was just wondering if you guys know of, or have found any work arounds to 
&gt; turn on riak search for a KV bucket. (i'm trying to create a bucket and then 
&gt; turn on the indexing from my application) 
&gt; 
&gt; Please let me know. Thanks in advance.
&gt; 
&gt; -- 
&gt; Carson Li
&gt; Liquid Analytics
&gt; carson...@liquidanalytics.com
&gt; 647-273-1024
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

