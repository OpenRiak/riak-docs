---
title: "Re: benchmark results on my $75/month 5 node cluster :)"
description: ""
project: community
lastmod: 2013-10-27T23:29:50-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12774"
mailinglist_parent_id: "msg12772"
author_name: "Alex Rice"
project_section: "mailinglistitem"
sent_date: 2013-10-27T23:29:50-07:00
---


Sounds pretty respectable for commodity hardware! That consistently
low latency seems unachievable in the cloud- I guess because of the
slower disk and memory I/O too.

On Sun, Oct 27, 2013 at 6:37 PM, Toby Corkindale
 wrote:
&gt; Thanks,
&gt; it's interesting to hear of what performance other people are achieving with
&gt; Riak.
&gt;
&gt; With a not-too-dissimilarly-configured[1] basho\_bench test, we see
&gt; throughput between 6000-7000 ops/sec. get/put latencies are under 2/4ms
&gt; respectively for mean values, and under 6/12ms for 99th percentile.
&gt;
&gt; This is on real (non-virtual) hardware, but not high-end gear.
&gt; Hopefully we're not too too far off what can reasonably be achieved.
&gt;
&gt; -T
&gt;
&gt; [1: Test parameters:
&gt; {concurrent, 16}.
&gt; {driver, basho\_bench\_driver\_riakc\_pb}.
&gt; {key\_generator, {int\_to\_bin, {uniform\_int, 10000}}}.
&gt; {value\_generator, {fixed\_bin, 10000}}.
&gt; {riakc\_pb\_replies, 1}.
&gt; {operations, [{get, 3}, {put, 1} ]}.
&gt; ]
&gt;
&gt;
&gt; On 28/10/13 06:35, Alex Rice wrote:
&gt;&gt;
&gt;&gt; Here is an updated 2 hour graph of the same "X-Small" 5-node cluster,
&gt;&gt; after having performed all the Linux tuning steps I had missed first
&gt;&gt; time around. Also added ntpd service to all nodes. Looks like slightly
&gt;&gt; better throughput & latency, but a much cleaner graph overall, and it
&gt;&gt; should "burst" much better:
&gt;&gt;
&gt;&gt; https://dl.dropboxusercontent.com/u/22076075/summary-xsmall-bitcask-5nodes-2hr-tuned-vm.png
&gt;&gt;
&gt;&gt; Here is the same cluster rebooted as "Medium" Azure VMs, same
&gt;&gt; benchmark settings except: 8 workers, shorter duration. Not sure why
&gt;&gt; it has errors, yet:
&gt;&gt;
&gt;&gt; https://dl.dropboxusercontent.com/u/22076075/summary-medium-bitcask-5nodes-30-min.png
&gt;&gt;
&gt;&gt; Anyways- back to work for me!!!
&gt;&gt; :)
&gt;&gt;
&gt;&gt; On Wed, Oct 2, 2013 at 12:14 PM, Alex Rice  wrote:
&gt;&gt;&gt;
&gt;&gt;&gt; Hey, something that is impressive about Riak is how well it performs
&gt;&gt;&gt; even on super low end cloud virtualization (unlike for example,
&gt;&gt;&gt; couchbase, which hardly runs at all unless you have quad cores per
&gt;&gt;&gt; each node)
&gt;&gt;&gt;
&gt;&gt;&gt; Having so much fun benchmarking, it's really distracting me from coding!
&gt;&gt;&gt;
&gt;&gt;&gt; the cluster : 5 nodes on Windows Azure cloud
&gt;&gt;&gt; Ubuntu 12.04, Riak 1.2.4
&gt;&gt;&gt; node are xsmall vm (1 shared cpu core, 768 mb ram)
&gt;&gt;&gt;
&gt;&gt;&gt; The xmall vms are only $15/month and they are not recommended for
&gt;&gt;&gt; "production". but in a 5 node riak cluster, it's really nothing to
&gt;&gt;&gt; scoff at!
&gt;&gt;&gt;
&gt;&gt;&gt; I suspect the main bottleneck is not the cpu or disk, rather I think
&gt;&gt;&gt; it's the each xsmall node is allowed only 5Mbit/sec on the ethernet.
&gt;&gt;&gt;
&gt;&gt;&gt; Here is a basho\_bench graph, if anyone feels like viewing it
&gt;&gt;&gt;
&gt;&gt;&gt; https://dl.dropboxusercontent.com/u/22076075/summary-xsmall-bitcask-5nodes-20min.png
&gt;&gt;&gt;
&gt;&gt;&gt; note the basho bench was running on a quad core machine on the same
&gt;&gt;&gt; vlan with 5 workers.
&gt;&gt;
&gt;&gt;
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;
&gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

