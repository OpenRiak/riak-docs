---
title: "Re: combining Riak (CS) and Spark/shark by speaking over s3 protocol"
description: ""
project: community
lastmod: 2013-07-31T02:10:22-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11835"
mailinglist_parent_id: "msg11824"
author_name: "gbrits"
project_section: "mailinglistitem"
sent_date: 2013-07-31T02:10:22-07:00
---


Thanks for the links Mark. Certainly looks possible to me. A Riak +
Spark/Shark setup almost looks like a match made in heaven. So i'm doing my
due diligence before getting too excited, since there's not too much work
around combining the two, suggesting I might be overlooking something.
Going to try the setup and see what comes out.


2013/7/31 Mark Hamstra [via Riak Users] &lt;
ml-node+s197444n402862...@n3.nabble.com&gt;

&gt; Others have certainly found benefits in combining Spark/Shark with a
&gt; Dynamo-type KV-store. With robust Hadoop Input/OutputFormats it's not too
&gt; difficult (e.g. see 
&gt; thisand
&gt; this ), and It may be possible to
&gt; do as you suggest with the s3 API of Riak CS. What also may be worth
&gt; exploring is if Riak and Spark/Shark can rendezvous via 
&gt; Tachyon.
&gt; That would be more of a research project right now, but it could end up
&gt; someplace interesting.
&gt;
&gt;
&gt; On Tue, Jul 30, 2013 at 1:24 PM, Dan Kerrigan &lt;[hidden 
&gt; email]
&gt; &gt; wrote:
&gt;
&gt;&gt; Geert-Jan -
&gt;&gt;
&gt;&gt; We're currently working on a somewhat similar project to integrate Flume
&gt;&gt; to ingest data into Riak CS for later processing using Hadoop. The
&gt;&gt; limitations of HDFS/S3, when using the s3:// or s3n:// URIs, seem to
&gt;&gt; revolve around renaming objects (copy/delete) in Riak CS. If you can avoid
&gt;&gt; that, this link should work fine.
&gt;&gt;
&gt;&gt; Regarding how data is stored in Riak CS, the data block storage is
&gt;&gt; Bitcask with manifest storage being held in LevelDB. Riak CS is optimized
&gt;&gt; for larger object sizes and I believe smaller object sizes would not be
&gt;&gt; nearly as efficient as working with plain Riak if only because of the
&gt;&gt; overhead incurred by Riak CS. The benefits of Riak generally carry over to
&gt;&gt; Riak CS so there shouldn't be any need to worry about losing raw power.
&gt;&gt;
&gt;&gt; Respectfully -
&gt;&gt; Dan Kerrigan
&gt;&gt;
&gt;&gt;
&gt;&gt; On Tue, Jul 30, 2013 at 2:21 PM, gbrits &lt;[hidden 
&gt;&gt; email]
&gt;&gt; &gt; wrote:
&gt;&gt;
&gt;&gt;&gt; This may be totally missing the mark but I've been reading up on ways to
&gt;&gt;&gt; do
&gt;&gt;&gt; fast iterative processing in Storm or Spark/shark, with the ultimate
&gt;&gt;&gt; goal of
&gt;&gt;&gt; results ending up in Riak for fast multi-key retrieval.
&gt;&gt;&gt;
&gt;&gt;&gt; I want this setup to be as lean as possible for obvious reasons so I've
&gt;&gt;&gt; started to look more closely at the possible Riak CS / Spark combo.
&gt;&gt;&gt;
&gt;&gt;&gt; Apparently, please correct if wrong, Riak CS sits on top of Riak and is
&gt;&gt;&gt; S3-api compliant. Underlying the db for the objects is levelDB (which
&gt;&gt;&gt; would
&gt;&gt;&gt; have been my choice anyway, bc of the low in-mem key overhead) Apparently
&gt;&gt;&gt; Bitcask is also used, although it's not clear to me what for exactly.
&gt;&gt;&gt;
&gt;&gt;&gt; At the same time Spark (with Shark on top, which is what Hive is for
&gt;&gt;&gt; Hadoop
&gt;&gt;&gt; if that in any way makes things clearer) can use HDFS or S3 as it's so
&gt;&gt;&gt; called 'deep store'.
&gt;&gt;&gt;
&gt;&gt;&gt; Combining this it seems, Riak CS and Spark/Shark could be a nice pretty
&gt;&gt;&gt; tight combo providing interative and adhoc quering through Shark + all
&gt;&gt;&gt; the
&gt;&gt;&gt; excellent stuff of Riak through the S3 protocol which they both speak .
&gt;&gt;&gt;
&gt;&gt;&gt; Is this correct?
&gt;&gt;&gt; Would I loose any of the raw power of Riak when going with Riak CS?
&gt;&gt;&gt; Anyone
&gt;&gt;&gt; ever tried this combo?
&gt;&gt;&gt;
&gt;&gt;&gt; Thanks,
&gt;&gt;&gt; Geert-Jan
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; --
&gt;&gt;&gt; View this message in context:
&gt;&gt;&gt; http://riak-users.197444.n3.nabble.com/combining-Riak-CS-and-Spark-shark-by-speaking-over-s3-protocol-tp4028621.html
&gt;&gt;&gt; Sent from the Riak Users mailing list archive at Nabble.com.
&gt;&gt;&gt;
&gt;&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt; [hidden email] 
&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; [hidden email] 
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;
&gt;&gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; [hidden email] 
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
&gt;
&gt; ------------------------------
&gt; If you reply to this email, your message will be added to the discussion
&gt; below:
&gt;
&gt; http://riak-users.197444.n3.nabble.com/combining-Riak-CS-and-Spark-shark-by-speaking-over-s3-protocol-tp4028621p4028629.html
&gt; To unsubscribe from combining Riak (CS) and Spark/shark by speaking over
&gt; s3 protocol, click 
&gt; here
&gt; .
&gt; NAML
&gt;




--
View this message in context: 
http://riak-users.197444.n3.nabble.com/combining-Riak-CS-and-Spark-shark-by-speaking-over-s3-protocol-tp4028621p4028640.html
Sent from the Riak Users mailing list archive at Nabble.com.\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

