---
title: "Re: Hard time with Riak 2.0.0pre5 features"
description: ""
project: community
lastmod: 2013-11-19T10:11:53-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13023"
mailinglist_parent_id: "msg13018"
author_name: "Jordan West"
project_section: "mailinglistitem"
sent_date: 2013-11-19T10:11:53-08:00
---


On Tue, Nov 19, 2013 at 7:33 AM, Valter Balegas  wrote:

&gt;
&gt; Strong consistency:
&gt; How does one activate this? As i understand, either the pb or the http
&gt; clients do not accept the consistent property.
&gt;
&gt;
Using strong consistency in the Tech Preview is a two-step process. First,
turn on the feature in your riak.conf (the following command assumes you
are using a devrel):

for d in dev/dev\*; do sed -e 's/## enable\_consensus = true/enable\_consensus
= true/' -i $d/etc/riak.conf; done

Then re(start) the cluster.

With the enable\_consensus=true un-commented and the cluster running create
a strongly consistent bucket type:

riak-admin bucket-type create  '{"props": {"consistent": true}}'
riak-admin bucket-type activate 

You can create and activate the bucket type without having
enabled\_consensus=true but both must be done to work with strongly
consistent data.

Once that is done you can make requests, just like you would to eventually
consistent data in Riak, but the semantics will be different. For example,
if you make two PUT requests to the same key, w/ no vector clock\*, the
second request will fail because the data already exists. More details on
semantics of strongly consistent requests can be found in this PR:
https://github.com/basho/riak\_kv/pull/710

Hope that helps get you started,

Jordan

\* in strong consistency, the "vector clock" is not really a vector clock.
its called such for familiarity, but like any real vector clock exposed to
the client, should be treated like an opaque context.


&gt; Details about my environment:
&gt; -I’m running Mac OSX 10.9
&gt; -Erlang R15B01
&gt; -Compiling riak “develop” branch, from basho github
&gt; -Compiling riak-erlang-client “master” branch, from basho github.
&gt; -recompiled the latest versions of the branches just before writing this
&gt; email.
&gt;
&gt;
&gt; Thank you for your help,
&gt; Valter
&gt;
&gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

