---
title: "RE: [IE] Re: [IE] Re: merge_contents error"
description: ""
project: community
lastmod: 2017-06-26T03:33:07-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg18292"
mailinglist_parent_id: "msg18290"
author_name: "Mark Richard Thomas"
project_section: "mailinglistitem"
sent_date: 2017-06-26T03:33:07-07:00
---


Hello

The number of crashes has dropped dramatically with the property (dvv\_enabled) 
updated. Now, I'm periodically seeing crash messages like:

2017-06-26 10:05:56 =CRASH REPORT====
 crasher:
 initial call: riak\_kv\_get\_fsm:init/1
 pid: &lt;0.20060.107&gt;
 registered\_name: []
 exception exit: 
{{function\_clause,[{riak\_object,merge\_contents,[{r\_object,{&lt;&lt;"commercial"&gt;&gt;,&lt;&lt;"commercial\_danda"&gt;&gt;},&lt;&lt;"02565069"&gt;&gt;,[{r\_content,{dict,7,16,16,8,80,48,{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},{{[],[],[[&lt;&lt;"Links"&gt;&gt;]],[],[],[],[],[],[],[],[[&lt;&lt;"content-type"&gt;&gt;,97,112,112,108,105,99,97,116,105,111,110,47,106,115,111,110],[&lt;&lt;"X-Riak-VTag"&gt;&gt;,54,110,74,113,77,100,117,79,84,109,119,78,110,119,120,84,48,51,106,119,79,103]],[[&lt;&lt;"index"&gt;&gt;]],[],[[&lt;&lt;"X-Riak-Last-Modified"&gt;&gt;|{1494,930206,640553}]],[],[[&lt;&lt;"charset"&gt;&gt;,117,116,102,45,56],[&lt;&lt;"X-Riak-Meta"&gt;&gt;]]}}},&lt;&lt;"{\"company\":\"02565069\",\"identification\":{\"companyNo\":\"02565069\",\"name\":\"TCS
 0\",\"alpha\":\"TCS\",\"roAddress\":{\"line1\":\"st cross street 
C\",\"line2\":\"ross Road T\",\"line3\":\"hiruvanmayur 
C\",\"line4\":\"hennai\",\"postCode\":\"cb6 
1ad\",\"kpostcode\":\"cb61ad\"},\"accountReferenceDate\":\"3004\",\"incorporationDate\":\"2009-01-01\",\"returnMadeUpDate\":\"2009-03-03\",\"latestAccountsFiledDate\
 
":\"2009-02-02\",\"accountsType\":5,\"latestAnalysedAccountDate\":\"2008-04-30\",\"nextAnnualReturnDue\":\"2010-03-31\",\"companyType\":\"0\",\"companyTypeDescription\":\"Other\",\"dissolved\":false}}"&gt;&gt;}],[{&lt;&lt;90,0,32,188,84,53,62,41&gt;&gt;,{1,63662149406}}],{dict,1,16,16,8,80,48,{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[[clean|true]],[]}}},undefined},{r\_object,{&lt;&lt;"commercial"&gt;&gt;,&lt;&lt;"commercial\_danda"&gt;&gt;},&lt;&lt;"02565069"&gt;&gt;,[{r\_content,{dict,7,16,16,8,80,48,{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},{{[],[],[[&lt;&lt;"Links"&gt;&gt;]],[],[],[],[],[],[],[],[[&lt;&lt;"content-type"&gt;&gt;,97,112,112,108,105,99,97,116,105,111,110,47,106,115,111,110],[&lt;&lt;"X-Riak-VTag"&gt;&gt;,54,110,74,113,77,100,117,79,84,109,119,78,110,119,120,84,48,51,106,119,79,103]],[[&lt;&lt;"index"&gt;&gt;]],[],[[&lt;&lt;"X-Riak-Last-Modified"&gt;&gt;|{1494,930206,640553}]],[],[[&lt;&lt;"X-Riak-Meta"&gt;&gt;],[&lt;&lt;"charset"&gt;&gt;,117,116,102,45,56]]}}},&lt;&lt;"{\"company\":\"02565069\",\"identification\":{\"companyNo\":\"02565069\",\"name\":
 \"TCS 0\",\"alpha\":\"TCS\",\"roAddress\":{\"line1\":\"st cross street 
C\",\"line2\":\"ross Road T\",\"line3\":\"hiruvanmayur 
C\",\"line4\":\"hennai\",\"postCode\":\"cb6 
1ad\",\"kpostcode\":\"cb61ad\"},\"accountReferenceDate\":\"3004\",\"incorporationDate\":\"2009-01-01\",\"returnMadeUpDate\":\"2009-03-03\",\"latestAccountsFiledDate\":\"2009-02-02\",\"accountsType\":5,\"latestAnalysedAccountDate\":\"2008-04-30\",\"nextAnnualReturnDue\":\"2010-03-31\",\"companyType\":\"0\",\"companyTypeDescription\":\"Other\",\"dissolved\":false}}"&gt;&gt;}],[{&lt;&lt;90,0,32,188,84,53,62,41&gt;&gt;,{1,63662149406}}],{dict,1,16,16,8,80,48,{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[[clean|true]],[]}}},undefined},&lt;&lt;"false"&gt;&gt;],[{file,"src/riak\_object.erl"},{line,306}]},{timer,tc,2,[{file,"timer.erl"},{line,179}]},{riak\_object,merge,2,[{file,"src/riak\_object.erl"},{line,279}]},{lists,foldl,3,[{file,"lists.erl"},{line,1248}]},{riak\_object,reconcile,2,[{file,"src/riak\_obje
 
ct.erl"},{line,208}]},{riak\_kv\_get\_core,merge,2,[{file,"src/riak\_kv\_get\_core.erl"},{line,262}]},{riak\_kv\_get\_core,response,1,[{file,"src/riak\_kv\_get\_core.erl"},{line,140}]},{riak\_kv\_get\_fsm,waiting\_vnode\_r,2,[{file,"src/riak\_kv\_get\_fsm.erl"},{line,334}]}]},[{gen\_fsm,terminate,7,[{file,"gen\_fsm.erl"},{line,622}]},{proc\_lib,init\_p\_do\_apply,3,[{file,"proc\_lib.erl"},{line,239}]}]}
 ancestors: 
[riak\_kv\_get\_fsm\_sj\_4,riak\_kv\_get\_fsm\_sj\_worker\_sup,riak\_kv\_get\_fsm\_sj,sidejob\_sup,&lt;0.372.0&gt;]
 messages: 
[{'$gen\_event',{r,{ok,{r\_object,{&lt;&lt;"commercial"&gt;&gt;,&lt;&lt;"commercial\_danda"&gt;&gt;},&lt;&lt;"02565069"&gt;&gt;,[{r\_content,{dict,7,16,16,8,80,48,{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},{{[],[],[[&lt;&lt;"Links"&gt;&gt;]],[],[],[],[],[],[],[],[[&lt;&lt;"content-type"&gt;&gt;,97,112,112,108,105,99,97,116,105,111,110,47,106,115,111,110],[&lt;&lt;"X-Riak-VTag"&gt;&gt;,54,110,74,113,77,100,117,79,84,109,119,78,110,119,120,84,48,51,106,119,79,103]],[[&lt;&lt;"index"&gt;&gt;]],[],[[&lt;&lt;"X-Riak-Last-Modified"&gt;&gt;|{1494,930206,640553}]],[],[[&lt;&lt;"X-Riak-Meta"&gt;&gt;],[&lt;&lt;"charset"&gt;&gt;,117,116,102,45,56]]}}},&lt;&lt;"{\"company\":\"02565069\",\"identification\":{\"companyNo\":\"02565069\",\"name\":\"TCS
 0\",\"alpha\":\"TCS\",\"roAddress\":{\"line1\":\"st cross street 
C\",\"line2\":\"ross Road T\",\"line3\":\"hiruvanmayur 
C\",\"line4\":\"hennai\",\"postCode\":\"cb6 
1ad\",\"kpostcode\":\"cb61ad\"},\"accountReferenceDate\":\"3004\",\"incorporationDate\":\"2009-01-01\",\"returnMadeUpDate\":\"2009-03-03\",\"latestAccountsFiledDate\":\"2009-02-02\",\"accountsType\
 
":5,\"latestAnalysedAccountDate\":\"2008-04-30\",\"nextAnnualReturnDue\":\"2010-03-31\",\"companyType\":\"0\",\"companyTypeDescription\":\"Other\",\"dissolved\":false}}"&gt;&gt;}],[{&lt;&lt;90,0,32,188,84,53,62,41&gt;&gt;,{1,63662149406}}],{dict,1,16,16,8,80,48,{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[[clean|true]],[]}}},undefined}},433883298582611803841718934712646521460354973696,17576867}}]
 links: [&lt;0.476.0&gt;]
 dictionary: []
 trap\_exit: false
 status: running
 heap\_size: 4185
 stack\_size: 27
 reductions: 2002
 neighbours:


-----Original Message-----
From: Russell Brown [mailto:russell.br...@icloud.com]
Sent: 26 June 2017 10:54
To: Mark Richard Thomas
Cc: riak-users
Subject: [IE] Re: [IE] Re: merge\_contents error

The crash report is for the same reason, the 3rd argument to 
riak\_object:merge\_contents/3 is &lt;&lt;"false"&gt;&gt; when it should be the atom 'false'.

Is that crash report from \_after\_ you updated the bucket properties?

Cheers

Russell

On 26 Jun 2017, at 10:50, Mark Richard Thomas  wrote:

&gt; Hello
&gt;
&gt; Riak version 2.2.3
&gt;
&gt; Yes, this is related to a cluster restore from backup.
&gt;
&gt; .../types/commercial/props
&gt;
&gt; {"props":{"name":"commercial\_systest","active":true,"allow\_mult":false,"basic\_quorum":true,"big\_vclock":50,"chash\_keyfun":{"mod":"riak\_core\_util","fun":"chash\_std\_keyfun"},"claimant":"r...@wrkd1lrkd002.app.c9.equifax.com","dvv\_enabled":false,"dw":"quorum","last\_write\_wins":true,"linkfun":{"mod":"riak\_kv\_wm\_link\_walker","fun":"mapreduce\_linkfun"},"n\_val":3,"notfound\_ok":false,"old\_vclock":86400,"postcommit":[],"pr":0,"precommit":[],"pw":0,"r":"quorum","rw":"quorum","small\_vclock":50,"w":"quorum","young\_vclock":20}}
&gt;
&gt;
&gt; I modified the commercial bucket properties. Good spot on the dvv\_enabled. I 
&gt; updated with:
&gt;
&gt; riak-admin bucket-type update commercial '{"props":{"last\_write\_wins":true, 
&gt; "allow\_mult":false, "dvv\_enabled":false, "basic\_quorum":true, 
&gt; "notfound\_ok":false}}'
&gt;
&gt; Any idea on what this crash report means?
&gt;
&gt; And how do I merge locally?
&gt;
&gt; 2017-06-26 09:39:17 =CRASH REPORT====
&gt; crasher:
&gt; initial call: riak\_kv\_get\_fsm:init/1
&gt; pid: &lt;0.29113.100&gt;
&gt; registered\_name: []
&gt; exception exit: 
&gt; {{function\_clause,[{riak\_object,merge\_contents,[{r\_object,{&lt;&lt;"commercial"&gt;&gt;,&lt;&lt;"commercial\_danda"&gt;&gt;},&lt;&lt;"SC412063"&gt;&gt;,[{r\_content,{dict,7,16,16,8,80,48,{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},{{[],[],[[&lt;&lt;"Links"&gt;&gt;]],[],[],[],[],[],[],[],[[&lt;&lt;"content-type"&gt;&gt;,97,112,112,108,105,99,97,116,105,111,110,47,106,115,111,110],[&lt;&lt;"X-Riak-VTag"&gt;&gt;,50,51,118,107,78,122,101,98,57,52,73,81,65,87,100,112,109,86,102,99,97,82]],[[&lt;&lt;"index"&gt;&gt;]],[],[[&lt;&lt;"X-Riak-Last-Modified"&gt;&gt;|{1494,933827,646892}]],[],[[&lt;&lt;"charset"&gt;&gt;,117,116,102,45,56],[&lt;&lt;"X-Riak-Meta"&gt;&gt;]]}}},&lt;&lt;"{\"company\":\"SC412063\",\"identification\":{\"companyNo\":\"SC412063\",\"name\":\"TCS
&gt; 0\",\"alpha\":\"TCS\",\"roAddress\":{\"line1\":\"st cross street 
&gt; C\",\"line2\":\"ross Road T\",\"line3\":\"hiruvanmayur 
&gt; C\",\"line4\":\"hennai\",\"postCode\":\"cb6 
&gt; 1ad\",\"kpostcode\":\"cb61ad\"},\"accountReferenceDate\":\"3004\",\"incorporationDate\":\"2009-01-01\",\"returnMadeUpDate\":\"2009-03-03\",\"latestAccountsFiledDate\":\
 
"2009-02-02\",\"accountsType\":5,\"latestAnalysedAccountDate\":\"2008-04-30\",\"nextAnnualReturnDue\":\"2010-03-31\",\"companyType\":\"0\",\"companyTypeDescription\":\"Other\",\"dissolved\":false},
 \"groupstructure\": {\"shareholder\": [{\"shareholderType\": 
\"P\",\"title\": \"MR\",\"forename\": \"Veronica\",\"initial\": 
\"J\",\"surname\": \"DEF\",\"percentageOfOrdinary\": 
15.5},{\"shareholderType\": \"P\",\"title\": \"MR\",\"forename\": \"NICHOLAS 
ANTHONY\",\"initial\": \"J\",\"surname\": \"VIS\",\"percentageOfOrdinary\": 
15.5}]}}"&gt;&gt;}],[{&lt;&lt;90,0,32,188,84,53,62,38&gt;&gt;,{1,63662153027}}],{dict,1,16,16,8,80,48,{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[[clean|true]],[]}}},undefined},{r\_object,{&lt;&lt;"commercial"&gt;&gt;,&lt;&lt;"commercial\_danda"&gt;&gt;},&lt;&lt;"SC412063"&gt;&gt;,[{r\_content,{dict,7,16,16,8,80,48,{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},{{[],[],[[&lt;&lt;"Links"&gt;&gt;]],[],[],[],[],[],[],[],[[&lt;&lt;"content-type"&gt;&gt;,97,112,112,108,105,99,97,116,105,111,11
 
0,47,106,115,111,110],[&lt;&lt;"X-Riak-VTag"&gt;&gt;,50,51,118,107,78,122,101,98,57,52,73,81,65,87,100,112,109,86,102,99,97,82]],[[&lt;&lt;"index"&gt;&gt;]],[],[[&lt;&lt;"X-Riak-Last-Modified"&gt;&gt;|{1494,933827,646892}]],[],[[&lt;&lt;"X-Riak-Meta"&gt;&gt;],[&lt;&lt;"charset"&gt;&gt;,117,116,102,45,56]]}}},&lt;&lt;"{\"company\":\"SC412063\",\"identification\":{\"companyNo\":\"SC412063\",\"name\":\"TCS
 0\",\"alpha\":\"TCS\",\"roAddress\":{\"line1\":\"st cross street 
C\",\"line2\":\"ross Road T\",\"line3\":\"hiruvanmayur 
C\",\"line4\":\"hennai\",\"postCode\":\"cb6 
1ad\",\"kpostcode\":\"cb61ad\"},\"accountReferenceDate\":\"3004\",\"incorporationDate\":\"2009-01-01\",\"returnMadeUpDate\":\"2009-03-03\",\"latestAccountsFiledDate\":\"2009-02-02\",\"accountsType\":5,\"latestAnalysedAccountDate\":\"2008-04-30\",\"nextAnnualReturnDue\":\"2010-03-31\",\"companyType\":\"0\",\"companyTypeDescription\":\"Other\",\"dissolved\":false},
 \"groupstructure\": {\"shareholder\": [{\"shareholderType\": 
\"P\",\"title\": \"MR\",\"forename\": \"Veronica\",\"initial\":
 \"J\",\"surname\": \"DEF\",\"percentageOfOrdinary\": 
15.5},{\"shareholderType\": \"P\",\"title\": \"MR\",\"forename\": \"NICHOLAS 
ANTHONY\",\"initial\": \"J\",\"surname\": \"VIS\",\"percentageOfOrdinary\": 
15.5}]}}"&gt;&gt;}],[{&lt;&lt;90,0,32,188,84,53,62,38&gt;&gt;,{1,63662153027}}],{dict,1,16,16,8,80,48,{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[[clean|true]],[]}}},undefined},&lt;&lt;"false"&gt;&gt;],[{file,"src/riak\_object.erl"},{line,306}]},{timer,tc,2,[{file,"timer.erl"},{line,179}]},{riak\_object,merge,2,[{file,"src/riak\_object.erl"},{line,279}]},{lists,foldl,3,[{file,"lists.erl"},{line,1248}]},{riak\_object,reconcile,2,[{file,"src/riak\_object.erl"},{line,208}]},{riak\_kv\_get\_core,merge,2,[{file,"src/riak\_kv\_get\_core.erl"},{line,262}]},{riak\_kv\_get\_core,final\_action,1,[{file,"src/riak\_kv\_get\_core.erl"},{line,193}]},{riak\_kv\_get\_fsm,finalize,1,[{file,"src/riak\_kv\_get\_fsm.erl"},{line,415}]}]},[{gen\_fsm,terminate,7,[{file,"gen\_fsm.erl"},{line,622}]},{proc\_lib
 ,init\_p\_do\_apply,3,[{file,"proc\_lib.erl"},{line,239}]}]}
&gt; ancestors: 
&gt; [riak\_kv\_get\_fsm\_sj\_6,riak\_kv\_get\_fsm\_sj\_worker\_sup,riak\_kv\_get\_fsm\_sj,sidejob\_sup,&lt;0.372.0&gt;]
&gt; messages: []
&gt; links: [&lt;0.478.0&gt;]
&gt; dictionary: []
&gt; trap\_exit: false
&gt; status: running
&gt; heap\_size: 4185
&gt; stack\_size: 27
&gt; reductions: 2574
&gt; neighbours:
&gt;
&gt; Thanks
&gt;
&gt; Mark
&gt; Equifax Limited is registered in England with Registered No. 2425920. 
&gt; Registered Office: Capital House, 25 Chapel Street, London NW1 5DS. Equifax 
&gt; Limited is authorised and regulated by the Financial Conduct Authority.
&gt; Equifax Touchstone Limited is registered in Scotland with Registered No. 
&gt; SC113401. Registered Office: Exchange Tower,19 Canning Street, Edinburgh, EH3 
&gt; 8EH.
&gt; Equifax Commercial Services Limited is registered in the Republic of Ireland 
&gt; with Registered No. 215393. Registered Office: IDA Business & Technology 
&gt; Park, Rosslare Road, Drinagh, Wexford.
&gt;
&gt; This message contains information from Equifax which may be confidential and 
&gt; privileged. If you are not an intended recipient, please refrain from any 
&gt; disclosure, copying, distribution or use of this information and note that 
&gt; such actions are prohibited. If you have received this transmission in error, 
&gt; please notify by e-mail postmas...@equifax.com.

Equifax Limited is registered in England with Registered No. 2425920. 
Registered Office: Capital House, 25 Chapel Street, London NW1 5DS. Equifax 
Limited is authorised and regulated by the Financial Conduct Authority.
Equifax Touchstone Limited is registered in Scotland with Registered No. 
SC113401. Registered Office: Exchange Tower,19 Canning Street, Edinburgh, EH3 
8EH.
Equifax Commercial Services Limited is registered in the Republic of Ireland 
with Registered No. 215393. Registered Office: IDA Business & Technology Park, 
Rosslare Road, Drinagh, Wexford.

This message contains information from Equifax which may be confidential and 
privileged. If you are not an intended recipient, please refrain from any 
disclosure, copying, distribution or use of this information and note that such 
actions are prohibited. If you have received this transmission in error, please 
notify by e-mail postmas...@equifax.com.

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

