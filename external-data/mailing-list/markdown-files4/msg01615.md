---
title: "Re: innostore and multi_backend"
description: ""
project: community
lastmod: 2010-11-23T18:02:34-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01615"
mailinglist_parent_id: "msg01612"
author_name: "Joseph Lambert"
project_section: "mailinglistitem"
sent_date: 2010-11-23T18:02:34-08:00
---


Hi Dan,

I'm using riak\_search 0.13.0 and innostore 1.0.2, btw.

If I add the default innostore configuration like on the configuration page,
and also add an entry for innostore in the multi\_backend I get this error on
startup:

{{{badmatch,
 {error,
 {eagain,
 [{erlang,open\_port,
 [{spawn,innostore\_drv},[binary]]},
 {innostore,connect,0},
 {riak\_kv\_innostore\_backend,start,2},
 {riak\_kv\_multi\_backend,'-start/2-lc$^0/1-0-',2},
 {riak\_kv\_multi\_backend,'-start/2-lc$^0/1-0-',2},
 {riak\_kv\_multi\_backend,start,2},
 {riak\_kv\_vnode,init,1},
 {riak\_core\_vnode,init,1}]}}},
 [{riak\_core\_vnode\_master,get\_vnode,2},
 {riak\_core\_vnode\_master,handle\_call,3},
 {gen\_server,handle\_msg,5},
 {proc\_lib,init\_p\_do\_apply,3}]},
 {gen\_server,call,
 [riak\_kv\_vnode\_master,
 {1096126227998177188652763624537212264741949407232,
 get\_vnode},
 infinity]}}

If I take out the innostore configuration from multi\_backend, I get an error
about the backend not existing.


- Joe Lambert

joseph.g.lamb...@gmail.com
+86 13656213284


On Wed, Nov 24, 2010 at 2:34 AM, Dan Reverri  wrote:

&gt; You are correct, the innostore backend is not using the parameters passed
&gt; to it by multi\_backend:
&gt; https://issues.basho.com/show\_bug.cgi?id=890
&gt;
&gt; Rather than modifying the innostore.app file you can configure the default
&gt; innostore settings in your Riak app.config file:
&gt; [
&gt; {riak\_core, [...riak\_core settings...]},
&gt; {riak\_kv, [...riak\_kv settings...]},
&gt; {innostore, [{buffer\_pool\_size, 8589934592}, ...other settings...]}
&gt; ]
&gt;
&gt; Thanks,
&gt; Dan
&gt; 
&gt; Daniel Reverri
&gt; Developer Advocate
&gt; Basho Technologies, Inc.
&gt; d...@basho.com
&gt;
&gt;
&gt; On Tue, Nov 23, 2010 at 2:02 AM, Joseph Lambert &lt;
&gt; joseph.g.lamb...@gmail.com&gt; wrote:
&gt;
&gt;&gt; Hello,
&gt;&gt;
&gt;&gt; Does anyone have innostore set up under multi\_backend? I can't seem to get
&gt;&gt; it to work properly with multi\_backend.
&gt;&gt;
&gt;&gt; I tried adding it under the multi\_backend, but it won't use any parameters
&gt;&gt; passed in in the third parameter. If I set it up as an application, you
&gt;&gt; can't select it as a backend. If I use both, I get an error with the erlang
&gt;&gt; open\_port command (guess it's trying to spawn it twice if I have it under
&gt;&gt; multi\_backend and configured as an app).
&gt;&gt;
&gt;&gt; Is the solution here to modify the innostore.app file to give me the
&gt;&gt; defaults I want, build it then install innostore (if I set it up only under
&gt;&gt; multi\_backend, it will work, but with the default app settings)?
&gt;&gt;
&gt;&gt; If I've just completely missed the mark, don't be afraid to mock me :).
&gt;&gt;
&gt;&gt; - Joe Lambert
&gt;&gt;
&gt;&gt; joseph.g.lamb...@gmail.com
&gt;&gt; +86 13656213284
&gt;&gt;
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;
&gt;&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

