---
title: "Re: riak search - creating many indexes for one inserted object"
description: ""
project: community
lastmod: 2012-10-23T10:43:36-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg09025"
mailinglist_parent_id: "msg08984"
author_name: "kamiseq"
project_section: "mailinglistitem"
sent_date: 2012-10-23T10:43:36-07:00
---


thanks for replying,
and yes i meant something like multiple cores in solr. right now we
are indexing each core manually. I know we could try different
approach.

the example is my pure imagination to demonstrate more or less the
logic we have.

pozdrawiam
Paweł Kamiński

kami...@gmail.com
pkaminski....@gmail.com
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_


On 19 October 2012 18:21, Ryan Zezeski  wrote:
&gt; Pawel,
&gt;
&gt; On Tue, Oct 9, 2012 at 5:21 PM, kamiseq  wrote:
&gt;&gt;
&gt;&gt; hi all,
&gt;&gt;
&gt;&gt; right now we are using solr as search index and we are inserting data
&gt;&gt; manually. so there is nothing to stop us from creating many indexes
&gt;&gt; (sort of views) on same entity, aggregate data and so on.
&gt;&gt; can something like that be achieved with riak search??
&gt;
&gt;
&gt; Just to be sure I understand you. When you say "many indexes" do you mean
&gt; something like writing to multiple Solr cores? If so, no, Riak Search
&gt; cannot do that. It writes to an index named after the bucket you have the
&gt; hook on.
&gt;
&gt;&gt;
&gt;&gt; I think that commit hooks are good point to start with but as I read
&gt;&gt; search index is kept in different format than bucket data and I would
&gt;&gt; love to still use solr-like api to search the index.
&gt;
&gt;
&gt; Yes, Riak Search stores index data in a backend called Merged Index. Riak
&gt; Search has a Solr \_like\_ interface but it lacks many features, and doesn't
&gt; have the same semantics or performance characteristics.
&gt;
&gt; There is a new project underway called Yokozuna which tightly integrates
&gt; Riak and Solr. If you like Solr then keep an eye on this. I'm looking for
&gt; people who want to prototype on it so if that interests you please email me
&gt; directly.
&gt;
&gt; https://github.com/rzezeski/yokozuna
&gt;
&gt;&gt;
&gt;&gt; example
&gt;&gt;
&gt;&gt; I have two entities cars and parking\_lots, each car references parking
&gt;&gt; lot it belongs to.
&gt;&gt; when I create/update/delete car object I would like to not only update
&gt;&gt; car index (so I can search by car type, name, number plates, etc) but
&gt;&gt; also update parking index to easily check how many cars given lot has
&gt;&gt; (plus search lots by cars, or search cars with given property).
&gt;
&gt;
&gt; Why have a separate index at all? Is it not good enough to have just the
&gt; car index. Each doc would have a 'parking\_lot\_s' field.
&gt;
&gt; "How many cars a given lot has" -- would be numFound on q=parking\_lot\_s:foo.
&gt;
&gt; "Search lots by cars" -- I'm guessing you mean something like "tell me what
&gt; lots have cars like this", sounds like a facet on 'parking\_lot\_s', right?
&gt;
&gt; "Search cars with a given property" -- like the last query but no facet.
&gt;
&gt;&gt;
&gt;&gt; probably all this can be achieved in many other ways. I can imagine
&gt;&gt; storing array of direct references in parking object and update this
&gt;&gt; object when car object also changed. but this way I need to issue two
&gt;&gt; asynchronous write request with no guaranties that both will be
&gt;&gt; persisted.
&gt;
&gt;
&gt; Yes. This is a problem with two Solr cores as well. I'm not sure if this
&gt; is a toy example but I don't see the need for 2 indexes. I potentially see
&gt; 2 buckets: 'cars' and 'lots'. But that doesn't mean it has to be two
&gt; indexes. Does that make sense?
&gt;
&gt; -Z
&gt;

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

