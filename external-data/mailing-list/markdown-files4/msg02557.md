---
title: "Re: problem with RiakClient streamBucket method"
description: ""
project: community
lastmod: 2011-03-04T01:17:16-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02557"
mailinglist_parent_id: "msg02556"
author_name: "Russell Brown"
project_section: "mailinglistitem"
sent_date: 2011-03-04T01:17:16-08:00
---


Hi Santosh,
On Fri, 2011-03-04 at 12:46 +0530, santhosh venkat wrote:
&gt; Hi , 
&gt; streamBucket method of RiakClient throws this exception when i
&gt; tried using it .
&gt; 
&gt; Exception in thread "main" java.lang.NoSuchMethodError:
&gt; org.json.JSONTokener.end()

&gt; I used it exactly in the same way as said in github wiki . 
&gt; 
&gt; Later reading the source Code of riak , Later reading the source Code
&gt; of riak , I found that the problem lies in StreamedKeysCollection
&gt; Class of package com.basho.riak.client.response. 

&gt; while (!tokens.end()) { // -&gt; Method end() is not defined in
&gt; JSONTokener Class 
&gt; 
&gt; There is a method named more() defined in JSONTokener Class , I was
&gt; able to successfully retrieve all the keys when i replaced end()
&gt; method with more() . 
&gt; 
&gt; Please throw some light if i am using the api's wrongly . 
&gt; 

This looks like a classpath thing. 

Do you have another version of JSON-java on your classpath?

There is an older version of JSON-java available from maven central (eg
json-20090211.jar) in which JSONTokener has the more() method.

The riak-java-client actually bundles a more recent set of JSON-java
classes (from Douglas Crockford's githb repo) with the riak client jar,
this version of JSONTokener has the end() method.

Just to be sure, please can you let me know which version of the
RiakClient you are using? (And just for good measure, Java version?)

Going forward, I'm debating whether to use maven to manage this
dependency, or to stay the way things are. Including the JSON classes in
the jar makes it more standalone, but of course it can lead to exactly
this sort of issue. Opinions appreciated.


&gt; 
&gt; --
&gt; Santhosh 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com



\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

