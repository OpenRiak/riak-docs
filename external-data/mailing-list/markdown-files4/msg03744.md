---
title: "Re: OpenStruct equivalent in Ripple"
description: ""
project: community
lastmod: 2011-06-17T22:30:07-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03744"
mailinglist_parent_id: "msg03741"
author_name: "Thomas Fee"
project_section: "mailinglistitem"
sent_date: 2011-06-17T22:30:07-07:00
---


You're right. Your method does achieve the desired effect. Thanks.

e.g.

 one :product\_code, :class\_name =&gt; 'ExtProperty'
 one :contract\_unit, :class\_name =&gt; 'ExtProperty'


On Fri, Jun 17, 2011 at 3:46 PM, Dan Reverri  wrote:

&gt; You can use Ripple::EmbeddedDocument to achieve something similar. Here is
&gt; a sample model, Authorization, that embeds UserInfo as an association:
&gt;
&gt; https://github.com/dreverri/favorite\_color/blob/master/server/lib/favorite\_color/models/authorization.rb
&gt;
&gt; https://github.com/dreverri/favorite\_color/blob/master/server/lib/favorite\_color/models/user\_info.rb
&gt;
&gt; UserInfo is stored inside the Authorization model in Riak.
&gt;
&gt; Thanks,
&gt; Dan
&gt;
&gt; Daniel Reverri
&gt; Developer Advocate
&gt; Basho Technologies, Inc.
&gt; d...@basho.com
&gt;
&gt;
&gt; On Fri, Jun 17, 2011 at 2:21 PM, Thomas Fee  wrote:
&gt;
&gt;&gt; Hello, Ripple users.
&gt;&gt;
&gt;&gt; One thing nice about OpenStruct in Ruby - you can use the same class for
&gt;&gt; many "types" of instances. I desire the same for Ripple - something like
&gt;&gt; OpenStruct, with ability to subclass and specialize, then "embed inline",
&gt;&gt; i.e. to nest.
&gt;&gt;
&gt;&gt; To illustrate, something like the following, with a custom class
&gt;&gt; (ExtProperty) analogous to a subclass of OpenStruct...
&gt;&gt;
&gt;&gt; class ExtProperty
&gt;&gt; include Ripple::NestedDocument ## New thingy
&gt;&gt; property :text, String
&gt;&gt; property :source, String
&gt;&gt; property :code, Integer
&gt;&gt; end
&gt;&gt;
&gt;&gt; class Contract
&gt;&gt; include Ripple::Document
&gt;&gt; property :product\_code, ExtProperty
&gt;&gt; property :contract\_unit, ExtProperty
&gt;&gt; property :price\_quotation\_unit, ExtProperty
&gt;&gt; property :floating\_price\_definition, ExtProperty
&gt;&gt; end
&gt;&gt;
&gt;&gt; I can currently get part of this with the Ripple::NestedAttributes
&gt;&gt; construct, but it lacks a defined class. I would have to explicitly convert
&gt;&gt; a hash to a desired class, and vice versa. And also, the top-level class
&gt;&gt; wouldn't specify the nested class, if you were to think of the class
&gt;&gt; definition as a data model definition.
&gt;&gt;
&gt;&gt; Any plans for something like what I described?
&gt;&gt;
&gt;&gt; - Tom
&gt;&gt;
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;
&gt;&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

