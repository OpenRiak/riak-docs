---
title: "Re: Riak crashed and crashed again when recovering"
description: ""
project: community
lastmod: 2010-05-05T12:14:54-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg00263"
mailinglist_parent_id: "msg00262"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2010-05-05T12:14:54-07:00
---


We haven't often dealt with repartitioning clusters, which is why I
recommended a complete backup and restore. The behavior when trying to
dynamically change the partition quantity is undefined. Honestly I
don't know how the backend would affect it at all. As always, however,
adding nodes will increase performance and fault tolerance. If you
intend to grow your cluster, a larger partition count will ease the
transition and provide a more even spread.

On Wednesday, May 5, 2010, Garrett Smith  wrote:
&gt; Sean,
&gt;
&gt; I apologize if this is readily available in the docs, faq, etc. (I
&gt; obviously missed if it is).
&gt;
&gt; When a cluster is repartitioned, e.g. as a result of adding or
&gt; removing vnodes, is one backend preferable to another? Does keeping
&gt; node size down help/hurt in terms of performance, reliability, etc?
&gt;
&gt; Garrett
&gt;
&gt; On Wed, May 5, 2010 at 7:05 AM, Sean Cribbs  wrote:
&gt;&gt; Germain,
&gt;&gt;
&gt;&gt; It looks like you're filling up the dets tables -- which have a 2GB limit 
&gt;&gt; per file, although Riak uses multiple files, one per vnode.  Have you tried 
&gt;&gt; the innostore backend?  Also if you continue to use dets, try increasing the 
&gt;&gt; number of partitions, which will make more, smaller files.
&gt;&gt;
&gt;&gt; Sean Cribbs 
&gt;&gt; Developer Advocate
&gt;&gt; Basho Technologies, Inc.
&gt;&gt; http://basho.com/
&gt;

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

