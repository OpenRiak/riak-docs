---
title: "Re: Riak consumes too much memory"
description: ""
project: community
lastmod: 2013-10-18T09:35:54-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12689"
mailinglist_parent_id: "msg12687"
author_name: "Dave Martorana"
project_section: "mailinglistitem"
sent_date: 2013-10-18T09:35:54-07:00
---


Matthew,

For we who don't quite understand, can you explain - does this mean
mv-flexcache is a feature that just comes with 2.0, or is it something that
will need to be turned on, etc?

Thanks!

Dave


On Thu, Oct 17, 2013 at 9:45 PM, Matthew Von-Maszewski
wrote:

&gt; It is already in test and available for your download now:
&gt;
&gt; https://github.com/basho/leveldb/tree/mv-flexcache
&gt;
&gt; Discussion is here:
&gt;
&gt; https://github.com/basho/leveldb/wiki/mv-flexcache
&gt;
&gt; This code is slated for Riak 2.0. Enjoy!!
&gt;
&gt; Matthew
&gt;
&gt; On Oct 17, 2013, at 20:50, darren  wrote:
&gt;
&gt; But why isn't riak smart enough to adjust itself to the available memory
&gt; or lack thereof?
&gt;
&gt; No serious enterprise technology should just consume everything and crash.
&gt;
&gt;
&gt; Sent from my Verizon Wireless 4G LTE Smartphone
&gt;
&gt;
&gt;
&gt; -------- Original message --------
&gt; From: Matthew Von-Maszewski 
&gt; Date: 10/17/2013 8:38 PM (GMT-05:00)
&gt; To: ZhouJianhua 
&gt; Cc: riak-users@lists.basho.com
&gt; Subject: Re: Riak consumes too much memory
&gt;
&gt;
&gt; Greetings,
&gt;
&gt; The default config targets 5 servers and 16 to 32G of RAM. Yes, the
&gt; app.config needs some adjustment to achieve happiness for you:
&gt;
&gt; - change ring\_creation\_size from 64 to 16 (remove the % from the beginning
&gt; of the line)
&gt; - add this line before "{data\_root, }" in eleveldb section:
&gt; "{max\_open\_files, 40}," (be sure the comma is at the end of this line).
&gt;
&gt; Good luck,
&gt; Matthew
&gt;
&gt;
&gt; On Oct 17, 2013, at 8:23 PM, ZhouJianhua  wrote:
&gt;
&gt; Hi
&gt;
&gt; I installed riak v1.4.2 on ubuntu12.04(64bit, 4G RAM) with apt-get, run
&gt; it with default app.conf but change the backend to leveldb, and test it
&gt; with https://github.com/tpjg/goriakpbc .
&gt;
&gt; Just keep putting (key, value) to an bucket, the memory always increasing,
&gt; and in the end it crashed, as it cannot allocate memory.
&gt;
&gt; Should i change the configuration or other?
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
&gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

