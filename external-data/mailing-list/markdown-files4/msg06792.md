---
title: "Re: Inconsistency while writing and reading in quorum level."
description: ""
project: community
lastmod: 2012-02-29T15:34:19-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06792"
mailinglist_parent_id: "msg06788"
author_name: "Brian Roach"
project_section: "mailinglistitem"
sent_date: 2012-02-29T15:34:19-08:00
---


Vijayakumar,

I'm not able to reproduce any odd behavior using the same calls with a 3 node 
cluster and storing/retrieving a String (tested both HTTP and ProtocolBuffers). 

When you say "records are not reflected", what do you mean exactly? 

Is the value in your returned IRiakObject null (meaning the key was not found), 
 just an empty String / Byte[], or there's something there but it's not the 
value you expected?

Also, what release version of Riak are you using?

Thank You,
Brian Roach



On Feb 29, 2012, at 11:02 AM, vijayakumar wrote:

&gt; Records inserted into a bucket are not reflected when read in a different 
&gt; request while using java riak client (even when both read and write are in 
&gt; quorum level).
&gt; 
&gt; Code fragment for Write:
&gt; Bucket bucket = .fetchBucket(table).execute();
&gt; IRiakObject riakObject = 
&gt; RiakObjectBuilder.newBuilder(table,key).withValue(new 
&gt; JSONObject(valueMap).toString()).build();
&gt; riakObject.setContentType("application/json");
&gt; bucket.store(riakObject).dw(Quora.QUORUM).execute();
&gt; 
&gt; 
&gt; Code fragment for Read:
&gt; Bucket bucket = .fetchBucket(table).execute();
&gt; IRiakObject fetched = bucket.fetch(key).r(Quora.QUORUM).execute();
&gt; 
&gt; Number of nodes in riak-server-cluster:3
&gt; Riak Client Version : 1.4.0
&gt; 
&gt; All the default properties of the buckets are retained as it is.
&gt; 
&gt; Am I missing anything else? Kindly help me out.
&gt; 
&gt; 
&gt; Regards,
&gt; Vijayakumar.
&gt; 
&gt; 
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

