---
title: "eleveldb make test failure"
description: ""
project: community
lastmod: 2011-10-28T12:09:34-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05349"
author_name: "Phil Sorber"
project_section: "mailinglistitem"
sent_date: 2011-10-28T12:09:34-07:00
---


I am trying to do some benchmarking with eleveldb but even getting the
basic 'make test' going is failing. Am I doing something obviously
wrong here?

Also, I tried to put the eleveldb driver into basho bench, but not
sure if that is the intent there.

$ make test
./rebar compile
==&gt; eleveldb (compile)
make[1]: Entering directory `/home/phil/git/basho/eleveldb/c\_src/leveldb'
g++ -fPIC -c -I. -I./include -fno-builtin-memcmp
-DLEVELDB\_PLATFORM\_POSIX -pthread -DOS\_LINUX -O2 -DNDEBUG
-DSNAPPY db/builder.cc -o db/builder.o
g++ -fPIC -c -I. -I./include -fno-builtin-memcmp
-DLEVELDB\_PLATFORM\_POSIX -pthread -DOS\_LINUX -O2 -DNDEBUG
-DSNAPPY db/c.cc -o db/c.o
g++ -fPIC -c -I. -I./include -fno-builtin-memcmp
-DLEVELDB\_PLATFORM\_POSIX -pthread -DOS\_LINUX -O2 -DNDEBUG
-DSNAPPY db/db\_impl.cc -o db/db\_impl.o
g++ -fPIC -c -I. -I./include -fno-builtin-memcmp
-DLEVELDB\_PLATFORM\_POSIX -pthread -DOS\_LINUX -O2 -DNDEBUG
-DSNAPPY db/db\_iter.cc -o db/db\_iter.o
g++ -fPIC -c -I. -I./include -fno-builtin-memcmp
-DLEVELDB\_PLATFORM\_POSIX -pthread -DOS\_LINUX -O2 -DNDEBUG
-DSNAPPY db/filename.cc -o db/filename.o
g++ -fPIC -c -I. -I./include -fno-builtin-memcmp
-DLEVELDB\_PLATFORM\_POSIX -pthread -DOS\_LINUX -O2 -DNDEBUG
-DSNAPPY db/dbformat.cc -o db/dbformat.o
g++ -fPIC -c -I. -I./include -fno-builtin-memcmp
-DLEVELDB\_PLATFORM\_POSIX -pthread -DOS\_LINUX -O2 -DNDEBUG
-DSNAPPY db/log\_reader.cc -o db/log\_reader.o
g++ -fPIC -c -I. -I./include -fno-builtin-memcmp
-DLEVELDB\_PLATFORM\_POSIX -pthread -DOS\_LINUX -O2 -DNDEBUG
-DSNAPPY db/log\_writer.cc -o db/log\_writer.o
g++ -fPIC -c -I. -I./include -fno-builtin-memcmp
-DLEVELDB\_PLATFORM\_POSIX -pthread -DOS\_LINUX -O2 -DNDEBUG
-DSNAPPY db/memtable.cc -o db/memtable.o
g++ -fPIC -c -I. -I./include -fno-builtin-memcmp
-DLEVELDB\_PLATFORM\_POSIX -pthread -DOS\_LINUX -O2 -DNDEBUG
-DSNAPPY db/repair.cc -o db/repair.o
g++ -fPIC -c -I. -I./include -fno-builtin-memcmp
-DLEVELDB\_PLATFORM\_POSIX -pthread -DOS\_LINUX -O2 -DNDEBUG
-DSNAPPY db/table\_cache.cc -o db/table\_cache.o
g++ -fPIC -c -I. -I./include -fno-builtin-memcmp
-DLEVELDB\_PLATFORM\_POSIX -pthread -DOS\_LINUX -O2 -DNDEBUG
-DSNAPPY db/version\_edit.cc -o db/version\_edit.o
g++ -fPIC -c -I. -I./include -fno-builtin-memcmp
-DLEVELDB\_PLATFORM\_POSIX -pthread -DOS\_LINUX -O2 -DNDEBUG
-DSNAPPY db/version\_set.cc -o db/version\_set.o
g++ -fPIC -c -I. -I./include -fno-builtin-memcmp
-DLEVELDB\_PLATFORM\_POSIX -pthread -DOS\_LINUX -O2 -DNDEBUG
-DSNAPPY db/write\_batch.cc -o db/write\_batch.o
g++ -fPIC -c -I. -I./include -fno-builtin-memcmp
-DLEVELDB\_PLATFORM\_POSIX -pthread -DOS\_LINUX -O2 -DNDEBUG
-DSNAPPY port/port\_posix.cc -o port/port\_posix.o
g++ -fPIC -c -I. -I./include -fno-builtin-memcmp
-DLEVELDB\_PLATFORM\_POSIX -pthread -DOS\_LINUX -O2 -DNDEBUG
-DSNAPPY table/block.cc -o table/block.o
g++ -fPIC -c -I. -I./include -fno-builtin-memcmp
-DLEVELDB\_PLATFORM\_POSIX -pthread -DOS\_LINUX -O2 -DNDEBUG
-DSNAPPY table/block\_builder.cc -o table/block\_builder.o
g++ -fPIC -c -I. -I./include -fno-builtin-memcmp
-DLEVELDB\_PLATFORM\_POSIX -pthread -DOS\_LINUX -O2 -DNDEBUG
-DSNAPPY table/format.cc -o table/format.o
g++ -fPIC -c -I. -I./include -fno-builtin-memcmp
-DLEVELDB\_PLATFORM\_POSIX -pthread -DOS\_LINUX -O2 -DNDEBUG
-DSNAPPY table/iterator.cc -o table/iterator.o
g++ -fPIC -c -I. -I./include -fno-builtin-memcmp
-DLEVELDB\_PLATFORM\_POSIX -pthread -DOS\_LINUX -O2 -DNDEBUG
-DSNAPPY table/merger.cc -o table/merger.o
g++ -fPIC -c -I. -I./include -fno-builtin-memcmp
-DLEVELDB\_PLATFORM\_POSIX -pthread -DOS\_LINUX -O2 -DNDEBUG
-DSNAPPY table/table.cc -o table/table.o
g++ -fPIC -c -I. -I./include -fno-builtin-memcmp
-DLEVELDB\_PLATFORM\_POSIX -pthread -DOS\_LINUX -O2 -DNDEBUG
-DSNAPPY table/table\_builder.cc -o table/table\_builder.o
g++ -fPIC -c -I. -I./include -fno-builtin-memcmp
-DLEVELDB\_PLATFORM\_POSIX -pthread -DOS\_LINUX -O2 -DNDEBUG
-DSNAPPY table/two\_level\_iterator.cc -o table/two\_level\_iterator.o
g++ -fPIC -c -I. -I./include -fno-builtin-memcmp
-DLEVELDB\_PLATFORM\_POSIX -pthread -DOS\_LINUX -O2 -DNDEBUG
-DSNAPPY util/arena.cc -o util/arena.o
g++ -fPIC -c -I. -I./include -fno-builtin-memcmp
-DLEVELDB\_PLATFORM\_POSIX -pthread -DOS\_LINUX -O2 -DNDEBUG
-DSNAPPY util/cache.cc -o util/cache.o
g++ -fPIC -c -I. -I./include -fno-builtin-memcmp
-DLEVELDB\_PLATFORM\_POSIX -pthread -DOS\_LINUX -O2 -DNDEBUG
-DSNAPPY util/coding.cc -o util/coding.o
g++ -fPIC -c -I. -I./include -fno-builtin-memcmp
-DLEVELDB\_PLATFORM\_POSIX -pthread -DOS\_LINUX -O2 -DNDEBUG
-DSNAPPY util/comparator.cc -o util/comparator.o
g++ -fPIC -c -I. -I./include -fno-builtin-memcmp
-DLEVELDB\_PLATFORM\_POSIX -pthread -DOS\_LINUX -O2 -DNDEBUG
-DSNAPPY util/crc32c.cc -o util/crc32c.o
g++ -fPIC -c -I. -I./include -fno-builtin-memcmp
-DLEVELDB\_PLATFORM\_POSIX -pthread -DOS\_LINUX -O2 -DNDEBUG
-DSNAPPY util/env.cc -o util/env.o
g++ -fPIC -c -I. -I./include -fno-builtin-memcmp
-DLEVELDB\_PLATFORM\_POSIX -pthread -DOS\_LINUX -O2 -DNDEBUG
-DSNAPPY util/env\_posix.cc -o util/env\_posix.o
g++ -fPIC -c -I. -I./include -fno-builtin-memcmp
-DLEVELDB\_PLATFORM\_POSIX -pthread -DOS\_LINUX -O2 -DNDEBUG
-DSNAPPY util/hash.cc -o util/hash.o
g++ -fPIC -c -I. -I./include -fno-builtin-memcmp
-DLEVELDB\_PLATFORM\_POSIX -pthread -DOS\_LINUX -O2 -DNDEBUG
-DSNAPPY util/histogram.cc -o util/histogram.o
g++ -fPIC -c -I. -I./include -fno-builtin-memcmp
-DLEVELDB\_PLATFORM\_POSIX -pthread -DOS\_LINUX -O2 -DNDEBUG
-DSNAPPY util/logging.cc -o util/logging.o
g++ -fPIC -c -I. -I./include -fno-builtin-memcmp
-DLEVELDB\_PLATFORM\_POSIX -pthread -DOS\_LINUX -O2 -DNDEBUG
-DSNAPPY util/options.cc -o util/options.o
g++ -fPIC -c -I. -I./include -fno-builtin-memcmp
-DLEVELDB\_PLATFORM\_POSIX -pthread -DOS\_LINUX -O2 -DNDEBUG
-DSNAPPY util/status.cc -o util/status.o
rm -f libleveldb.a
ar -rs libleveldb.a ./db/builder.o ./db/c.o ./db/db\_impl.o
./db/db\_iter.o ./db/filename.o ./db/dbformat.o ./db/log\_reader.o
./db/log\_writer.o ./db/memtable.o ./db/repair.o ./db/table\_cache.o
./db/version\_edit.o ./db/version\_set.o ./db/write\_batch.o
./port/port\_posix.o ./table/block.o ./table/block\_builder.o
./table/format.o ./table/iterator.o ./table/merger.o ./table/table.o
./table/table\_builder.o ./table/two\_level\_iterator.o ./util/arena.o
./util/cache.o ./util/coding.o ./util/comparator.o ./util/crc32c.o
./util/env.o ./util/env\_posix.o ./util/hash.o ./util/histogram.o
./util/logging.o ./util/options.o ./util/status.o
ar: creating libleveldb.a
make[1]: Leaving directory `/home/phil/git/basho/eleveldb/c\_src/leveldb'
Compiled src/eleveldb.erl
Compiling c\_src/eleveldb.cc
./rebar eunit
==&gt; eleveldb (eunit)
Compiled test/basho\_bench\_driver\_eldb.erl
Compiled src/eleveldb.erl
undefined

=ERROR REPORT==== 28-Oct-2011::14:52:58 ===
The on\_load function for module eleveldb returned {error,
 {load\_failed,
 "Failed to load
NIF library: '/home/phil/git/basho/eleveldb/priv/eleveldb.so:
undefined symbol: \_ZN6snappy13RawUncompressEPKcmPc'"}}
\*\*\* test module not found \*\*\*
::eleveldb

=======================================================
 Failed: 0. Skipped: 0. Passed: 0.
One or more tests were cancelled.
ERROR: One or more eunit tests failed.
make: \*\*\* [test] Error 1

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

