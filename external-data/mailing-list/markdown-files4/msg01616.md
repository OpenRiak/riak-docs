---
title: "Re: innostore and multi_backend"
description: ""
project: community
lastmod: 2010-11-23T18:19:03-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01616"
mailinglist_parent_id: "msg01615"
author_name: "Dan Reverri"
project_section: "mailinglistitem"
sent_date: 2010-11-23T18:19:03-08:00
---


Can you provide the different app.configs you are using?

Thanks,
Dan

Daniel Reverri
Developer Advocate
Basho Technologies, Inc.
d...@basho.com


On Tue, Nov 23, 2010 at 5:59 PM, Joseph Lambert
wrote:

&gt; Hi Dan,
&gt;
&gt; I'm using riak\_search 0.13.0 and innostore 1.0.2, btw.
&gt;
&gt; If I add the default innostore configuration like on the configuration
&gt; page, and also add an entry for innostore in the multi\_backend I get this
&gt; error on startup:
&gt;
&gt; {{{badmatch,
&gt; {error,
&gt; {eagain,
&gt; [{erlang,open\_port,
&gt; [{spawn,innostore\_drv},[binary]]},
&gt; {innostore,connect,0},
&gt; {riak\_kv\_innostore\_backend,start,2},
&gt;
&gt; {riak\_kv\_multi\_backend,'-start/2-lc$^0/1-0-',2},
&gt;
&gt; {riak\_kv\_multi\_backend,'-start/2-lc$^0/1-0-',2},
&gt; {riak\_kv\_multi\_backend,start,2},
&gt; {riak\_kv\_vnode,init,1},
&gt; {riak\_core\_vnode,init,1}]}}},
&gt; [{riak\_core\_vnode\_master,get\_vnode,2},
&gt; {riak\_core\_vnode\_master,handle\_call,3},
&gt; {gen\_server,handle\_msg,5},
&gt; {proc\_lib,init\_p\_do\_apply,3}]},
&gt; {gen\_server,call,
&gt; [riak\_kv\_vnode\_master,
&gt; {1096126227998177188652763624537212264741949407232,
&gt; get\_vnode},
&gt; infinity]}}
&gt;
&gt; If I take out the innostore configuration from multi\_backend, I get an
&gt; error about the backend not existing.
&gt;
&gt;
&gt; - Joe Lambert
&gt;
&gt; joseph.g.lamb...@gmail.com
&gt; +86 13656213284
&gt;
&gt;
&gt; On Wed, Nov 24, 2010 at 2:34 AM, Dan Reverri  wrote:
&gt;
&gt;&gt; You are correct, the innostore backend is not using the parameters passed
&gt;&gt; to it by multi\_backend:
&gt;&gt; https://issues.basho.com/show\_bug.cgi?id=890
&gt;&gt;
&gt;&gt; Rather than modifying the innostore.app file you can configure the default
&gt;&gt; innostore settings in your Riak app.config file:
&gt;&gt; [
&gt;&gt; {riak\_core, [...riak\_core settings...]},
&gt;&gt; {riak\_kv, [...riak\_kv settings...]},
&gt;&gt; {innostore, [{buffer\_pool\_size, 8589934592}, ...other settings...]}
&gt;&gt; ]
&gt;&gt;
&gt;&gt; Thanks,
&gt;&gt; Dan
&gt;&gt; 
&gt;&gt; Daniel Reverri
&gt;&gt; Developer Advocate
&gt;&gt; Basho Technologies, Inc.
&gt;&gt; d...@basho.com
&gt;&gt;
&gt;&gt;
&gt;&gt; On Tue, Nov 23, 2010 at 2:02 AM, Joseph Lambert &lt;
&gt;&gt; joseph.g.lamb...@gmail.com&gt; wrote:
&gt;&gt;
&gt;&gt;&gt; Hello,
&gt;&gt;&gt;
&gt;&gt;&gt; Does anyone have innostore set up under multi\_backend? I can't seem to
&gt;&gt;&gt; get it to work properly with multi\_backend.
&gt;&gt;&gt;
&gt;&gt;&gt; I tried adding it under the multi\_backend, but it won't use any
&gt;&gt;&gt; parameters passed in in the third parameter. If I set it up as an
&gt;&gt;&gt; application, you can't select it as a backend. If I use both, I get an error
&gt;&gt;&gt; with the erlang open\_port command (guess it's trying to spawn it twice if I
&gt;&gt;&gt; have it under multi\_backend and configured as an app).
&gt;&gt;&gt;
&gt;&gt;&gt; Is the solution here to modify the innostore.app file to give me the
&gt;&gt;&gt; defaults I want, build it then install innostore (if I set it up only under
&gt;&gt;&gt; multi\_backend, it will work, but with the default app settings)?
&gt;&gt;&gt;
&gt;&gt;&gt; If I've just completely missed the mark, don't be afraid to mock me :).
&gt;&gt;&gt;
&gt;&gt;&gt; - Joe Lambert
&gt;&gt;&gt;
&gt;&gt;&gt; joseph.g.lamb...@gmail.com
&gt;&gt;&gt; +86 13656213284
&gt;&gt;&gt;
&gt;&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

