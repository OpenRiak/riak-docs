---
title: "Re: Setting read quorum for map reduce jobs"
description: ""
project: community
lastmod: 2010-05-04T07:27:33-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg00243"
mailinglist_parent_id: "msg00242"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2010-05-04T07:27:33-07:00
---


The read quorum doesn't apply to map-reduce - the value from the first vnode in 
the preflist will be tried, followed by the others if it is not available. If 
an input is completely unavailable (as may be the case with 1/2 of the nodes 
down), the job will fail. 2 nodes is a bit of degenerate case anyway - 
especially if you use the default N value of 3. When the size of the cluster 
smaller than N, there's a chance that some data could become unavailable when a 
node goes down.

Sean Cribbs 
Developer Advocate
Basho Technologies, Inc.
http://basho.com/

On May 4, 2010, at 10:13 AM, Johnathan Loggie wrote:

&gt; Hi,
&gt; 
&gt; I’m struggling to find how to set the the read quorum for a map reduce job 
&gt; via the REST api.
&gt; 
&gt; The documentation doesn’t mention that this is even possible.
&gt; I’m using ripple, and tried forcing r=1 onto the end of the query string (e.g 
&gt; with @client = Riak::Client.new(:mapred = ‘/mapred?r=1’)) to see if this 
&gt; resource worked like the others, but had no luck.
&gt; 
&gt; I have 2 riak nodes and have deliberately stopped one as if it were down or 
&gt; disconnected.
&gt; In this state my map reduce jobs fail to run on the node that is up and 
&gt; running.
&gt; 
&gt; Can anybody help?
&gt; Have I completely got the wrong end of the stick on this one?
&gt; 
&gt; Johnno
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

