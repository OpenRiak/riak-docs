---
title: "Riak Python Client: How to properly use/re-use the client object?"
description: ""
project: community
lastmod: 2014-05-07T00:55:29-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14183"
author_name: "Finkle Mcgraw"
project_section: "mailinglistitem"
sent_date: 2014-05-07T00:55:29-07:00
---


Hi fellow Riak users,

Background:

I have a website project in which I'm using a set-up of a few stateless
webservers which talk to the riak cluster via HAProxy over HTTP. Each
webserver has a HAProxy instance locally which knows about the nodes in the
riak cluster, so the application itself only talks to localhost, i.e., the
python riak client is instantiated with only one "node" (localhost).

The app is implemented using Flask and Gunicorn, and each webserver has
four gunicorn processes handling incoming requests.

Question:

Should I re-create a client object the first thing I do when processing a
request, or can I re-use the client object in between requests?

Currently I'm using the latter approach, which is not working very well,
especially if one of the nodes goes offline (the python client then raises
an exception instead of retrying internally).

BR Finkle
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

