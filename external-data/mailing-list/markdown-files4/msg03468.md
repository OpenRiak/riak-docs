---
title: "Re: riaksearch memory growth issues"
description: ""
project: community
lastmod: 2011-05-27T19:22:51-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03468"
mailinglist_parent_id: "msg03467"
author_name: "Dan Reverri"
project_section: "mailinglistitem"
sent_date: 2011-05-27T19:22:51-07:00
---


What are the steps to reproduce the issue?

Thanks,
Dan

Daniel Reverri
Developer Advocate
Basho Technologies, Inc.
d...@basho.com


On Fri, May 27, 2011 at 6:44 PM, Gordon Tillman  wrote:

&gt; Gilbert I will do that and post the results. Have restarted the cluster
&gt; but it is really easy to reproduce the issue.
&gt;
&gt; Thanks!
&gt;
&gt; --gordon
&gt;
&gt;
&gt; On May 27, 2011, at 20:10 , Gilbert Gl√•ns wrote:
&gt;
&gt; &gt; Gordon,
&gt; &gt; Could you try:
&gt; &gt;
&gt; &gt; erlang:process\_info(list\_to\_pid("&lt;0.16614.32&gt;"), [messages,
&gt; &gt; current\_function, initial\_call, links, memory, status]).
&gt; &gt;
&gt; &gt; in a riak search console for one/some of those mailboxes and share the
&gt; &gt; results? I am curious to see if you are having the same systemic
&gt; &gt; memory consumption I am experiencing.
&gt; &gt;
&gt; &gt; Gilbert
&gt; &gt;
&gt; &gt; On Fri, May 27, 2011 at 5:15 PM, Gordon Tillman 
&gt; wrote:
&gt; &gt;&gt;
&gt; &gt;&gt; Howdy Gang,
&gt; &gt;&gt;
&gt; &gt;&gt; We are having a bit of an issue with our 3-node riaksearch cluster.
&gt; What is happing is this:
&gt; &gt;&gt;
&gt; &gt;&gt; Cluster is up and running. We start testing our application against it.
&gt; As the application runs the erlang process consumes more and more memory
&gt; without ever releasing it.
&gt; &gt;&gt;
&gt; &gt;&gt; In trying to investigate the issue we ran the riaksearch-admin
&gt; cluster\_info command. It appears that the bulk of this memory is being
&gt; consumed by a bunch of mailboxes.
&gt; &gt;&gt;
&gt; &gt;&gt; I have posted both the output of the cluster\_info command and the
&gt; app.config from one of the nodes here:
&gt; &gt;&gt;
&gt; &gt;&gt; https://gist.github.com/996419
&gt; &gt;&gt;
&gt; &gt;&gt; I would be very grateful if someone from Basho would take a look at the
&gt; cluster\_info and see if they can spot anything obvious.
&gt; &gt;&gt;
&gt; &gt;&gt; Each machine in the cluster has an 8-core Xeon and 16GB RAM. I believe
&gt; all of the platform details, etc., are in the cluster\_info dump.
&gt; &gt;&gt;
&gt; &gt;&gt; Many thanks,
&gt; &gt;&gt;
&gt; &gt;&gt; --gordon
&gt; &gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; &gt;&gt; riak-users mailing list
&gt; &gt;&gt; riak-users@lists.basho.com
&gt; &gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

