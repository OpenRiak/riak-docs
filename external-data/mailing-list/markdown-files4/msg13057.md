---
title: "Re: [Confusing search docs] Enabling search on bucket in Riak 2.0"
description: ""
project: community
lastmod: 2013-11-21T10:27:04-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13057"
mailinglist_parent_id: "msg13042"
author_name: "Ryan Zezeski"
project_section: "mailinglistitem"
sent_date: 2013-11-21T10:27:04-08:00
---


On Wed, Nov 20, 2013 at 3:48 PM, Kartik Thakore  wrote:

&gt; Thank you.
&gt;
&gt; I am creating indexes with:
&gt;
&gt; curl -i -XPUT http://192.168.1.10:8098/yz/index/allLogs \
&gt; -H 'content-type: application/json' \
&gt; -d '{"schema" : "\_yz\_default", "bucket" : "logs" }'
&gt;
&gt;
&gt; But when I check the index with:
&gt;
&gt; curl -i http://192.168.1.10:8098/yz/index/allLogs
&gt;
&gt; It drops the bucket association
&gt;
&gt; HTTP/1.1 200 OK
&gt; Server: MochiWeb/1.1 WebMachine/1.10.5 (jokes are better explained)
&gt; Date: Wed, 20 Nov 2013 20:45:21 GMT
&gt; Content-Type: application/json
&gt; Content-Length: 41
&gt;
&gt; {"name":"allLogs","schema":"\_yz\_default"}
&gt;

Sorry, that documentation is out of date.

To associate an index to a bucket you need to set the bucket's properties.

curl -XPUT -H 'content-type: application/json' '
http://localhost:8098/buckets/logs/props' -d
'{"props":{"yz\_index":"allLogs"}}'

You can perform a GET on that same resource to check the yz\_index property
is set.


&gt; Also
&gt;
&gt; what is going on here
&gt;
&gt; curl -XPUT -H'content-type:application/json'
&gt; http://localhost:8098/buckets/people/keys/me \
&gt; -d'{ "name\_s" : "kartik" }'
&gt;
&gt; Why not:
&gt; curl -XPUT -H'content-type:application/json'
&gt; http://localhost:8098/rial/people/me
&gt; \
&gt; -d'{ "name\_s" : "kartik" }'
&gt;


In Riak 1.0.0 we changed the resource from '/riak//' to
'/buckets//keys/'. We were supposed to deprecate and
eventually remove the old resource but we never did. You can still use the
old style but I would recommend using the new style as it is what we use in
official docs and there is a chance perhaps the old resources don't stay up
to date with the latest features.


-Z
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

