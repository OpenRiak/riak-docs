---
title: "Re: Issues with high node load and very slow response"
description: ""
project: community
lastmod: 2014-07-27T02:13:26-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14555"
mailinglist_parent_id: "msg14554"
author_name: "Bryan Hunt"
project_section: "mailinglistitem"
sent_date: 2014-07-27T02:13:26-07:00
---


Hello Chaim,

How big is the object you are trying to index? Are siblings (allow\_mult)
enabled? What type of object is it? CRDT, binary blob, text? Can you paste
the output from riak-admin member-status and ring-status. Also riak status.
Thanks,

Bryan
On 27 Jul 2014 04:55, "Chaim Solomon"  wrote:

&gt; Hi,
&gt;
&gt; I've been having issues for some days with the cluster I am running (or
&gt; now - trying to run). The last major operation was going through all items
&gt; of a bucket and doing a read/update operation on them from Python code -
&gt; nothing fancy, just modifying some data.
&gt;
&gt; I got issues with one node being VERY busy - 2 CPUs fully loaded - and the
&gt; requests were timing out or at least VERY slow.
&gt; I took the node out of the cluster and added another node - then after
&gt; clearing the node brought it back. After some days of waiting for AAE and
&gt; the migration of data to finish, I am still having one node at 2 CPUs at
&gt; 100% and one node with one CPU at 100% and the requests are still VERY
&gt; slow. I am getting a lot of these in the console.log:
&gt;
&gt; 2014-07-26 23:37:33.459 [error] &lt;0.7427.266&gt;@yz\_kv:index:206 failed to
&gt; index object {&lt;&lt;"linkmeta"&gt;&gt;,&lt;&lt;"..."&gt;&gt;} with error {"Failed to index
&gt; docs",{error,req\_timedout}} because
&gt; [{yz\_solr,index,3,[{file,"src/yz\_solr.erl"},{line,192}]},{yz\_kv,index,7,[{file,"src/yz\_kv.erl"},{line,258}]},{yz\_kv,index,3,[{file,"src/yz\_kv.erl"},{line,193}]},{riak\_kv\_vnode,actual\_put,6,[{file,"src/riak\_kv\_vnode.erl"},{line,1416}]},{riak\_kv\_vnode,perform\_put,3,[{file,"src/riak\_kv\_vnode.erl"},{line,1404}]},{riak\_kv\_vnode,do\_put,7,[{file,"src/riak\_kv\_vnode.erl"},{line,1199}]},{riak\_kv\_vnode,handle\_command,3,[{file,"src/riak\_kv\_vnode.erl"},{line,485}]},{riak\_core\_vnode,vnode\_command,3,[{file,"src/riak\_core\_vnode.erl"},{line,345}]}]
&gt;
&gt; And on almost all other nodex I am getting a lot of these:
&gt; 2014-07-26 23:50:58.796 [info] &lt;0.12268.221&gt;@yz\_kv:should\_handoff:157
&gt; waiting for bucket types prefix and indexes to agree between '
&gt; riak@10.128.138.25' and 'riak@10.128.137.185'
&gt;
&gt; How can I get the cluster to work again?
&gt;
&gt; It is a 2.0.0rc1 cluster.
&gt;
&gt; Chaim Solomon
&gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

