---
title: "Re: Riak init script ordering issues Reply-To:"
description: ""
project: community
lastmod: 2014-07-21T09:59:29-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14518"
mailinglist_parent_id: "msg14374"
author_name: "Luke Bakken"
project_section: "mailinglistitem"
sent_date: 2014-07-21T09:59:29-07:00
---


Hi Matthew,

Thanks for pointing this out. I'm going to bring it up for discussion
internally. At this point your best bet would be to manually edit the init
scripts on machines running more than one service to create dependencies to
prevent this issue. For instance, you can edit the riak init script to
check for the existence of the riak-cs init script and, if present, run
"/etc/init.d/riak-cs stop" to stop Riak CS before Riak.

--
Luke Bakken
CSE
lbak...@basho.com


On Wed, Jun 25, 2014 at 5:45 PM, Matthew Hall  wrote:

&gt; Hello,
&gt;
&gt; I'm using recent versions of Riak on CentOS 6.5 and I ran into some issues
&gt; which are similar to these ones reported on Debian:
&gt;
&gt; https://github.com/basho/riak\_cs/issues/718
&gt;
&gt; In my case, instead of having problems during startup, I get problems
&gt; during
&gt; shutdown, because for some reason riak and stanchion are shutting down
&gt; before
&gt; riak-cs. It causes very long timeouts of 30-60+ seconds or more every time
&gt; you
&gt; try to reboot the machine involved.
&gt;
&gt; So I wanted to ask how I could modify the scripts or dependency ordering
&gt; manually, on the local system, to prevent this problem, even if it can't be
&gt; done globally due to the "all parts of Riak can go on arbitrary nodes"
&gt; issue
&gt; mentioned in the bug above.
&gt;
&gt; Thanks,
&gt; Matthew.
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

