---
title: "Re: Reindexing solr after backup restore"
description: ""
project: community
lastmod: 2015-04-23T22:35:07-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16071"
mailinglist_parent_id: "msg16070"
author_name: "Jason Campbell"
project_section: "mailinglistitem"
sent_date: 2015-04-23T22:35:07-07:00
---


I think I figured it out.

I followed this guide: 
http://docs.basho.com/riak/latest/ops/running/nodes/renaming/#Clusters-from-Backups

The first Riak node (changed with riak-admin reip) kept it's Solr index. 
However, the other nodes when joined via riak-admin cluster force-replace, 
dropped their Solr indexes.

Is this expected? If so, it should really be in the docs, and there should be 
another way to restore a cluster keeping Solr intact.

Also, is there a way to rebuild a Solr index?

Thanks,
Jason

&gt; On 24 Apr 2015, at 15:16, Jason Campbell  wrote:
&gt; 
&gt; I've just done a backup and restore of our production Riak cluster, and 
&gt; Yokozuna has dropped from around 125 million records to 25million. Obviously 
&gt; the IPs have changed, and although the Riak cluster is stable, I'm not sure 
&gt; Solr handled the transition as nicely.
&gt; 
&gt; Is there a way to force Solr to rebuild the indexes, or at least get back to 
&gt; the state it was in before the backup?
&gt; 
&gt; Also, is this expected behaviour?
&gt; 
&gt; Thanks,
&gt; Jason
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

