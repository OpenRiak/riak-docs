---
title: "Re: Map/Reduce data order"
description: ""
project: community
lastmod: 2010-04-15T07:55:35-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg00049"
mailinglist_parent_id: "msg00046"
author_name: "Jimmy Thrasher"
project_section: "mailinglistitem"
sent_date: 2010-04-15T07:55:35-07:00
---


Hey Sean,

After reading and trying a bit more, I was reminded of the idempotency
requirement for reduce functions, so even if the results ended up in order,
I wouldn't be "allowed" to count on it.

Thanks for the clarification,

Jimmy

On Thu, Apr 15, 2010 at 9:13 AM, Sean Cribbs  wrote:

&gt; Jimmy,
&gt;
&gt; Consider map phases to be completely parallel and unordered. When a map
&gt; phase completes, the results are sent back to the coordinating node, which
&gt; -- assuming the next phase is also a map phase -- will send them out to the
&gt; vnodes that own the new set, which will perform their map phases and send
&gt; the results back again.
&gt;
&gt; Sean Cribbs 
&gt; Developer Advocate
&gt; Basho Technologies, Inc.
&gt; http://basho.com/
&gt;
&gt; On Apr 14, 2010, at 3:20 PM, Jimmy Thrasher wrote:
&gt;
&gt; &gt; Hi folks,
&gt; &gt;
&gt; &gt; I have a query where one of the map steps spits out the original entry
&gt; (via [v.bucket, v.key]) and a derivative bucket,key pair.
&gt; &gt;
&gt; &gt; If the original key is "asdf" the result of the map step would look like
&gt; this:
&gt; &gt; [["events", "asdf"], ["asdf,annotation", "some-annotation-key"]]
&gt; &gt;
&gt; &gt; Future map steps would ensure existence, extract data, etc.
&gt; &gt;
&gt; &gt; What I'm wondering is: if the annotation is local to a different node,
&gt; how does that affect the map step? Am I guaranteed to process the original
&gt; event again before the annotation, or is that not guaranteed?
&gt; &gt;
&gt; &gt; Jimmy
&gt; &gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

