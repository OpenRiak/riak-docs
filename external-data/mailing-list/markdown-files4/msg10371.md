---
title: "RE: Keys not listed during vnode transfers"
description: ""
project: community
lastmod: 2013-03-10T13:52:06-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg10371"
mailinglist_parent_id: "msg10365"
author_name: "Rune Skou Larsen"
project_section: "mailinglistitem"
sent_date: 2013-03-10T13:52:06-07:00
---


You should never use the 'list keys' function in production. This is also 
stated in the documentation.

Your observation could be related to Riak doing a coverage search during 
transfer based on (wrong) assumptions about which vnodes it needs to query.

Have you tried doing a 2i range search on $key to list the keys?

-Rune
Trifork

Daniel Iwan  skrev:
Right after setting up the cluster of 3 nodes before riak finishes vnode 
transfers (ring 512)
I store 3000 keys
On some occasions instead of having 3000 keys listed I have 2999 or 2989.
After transfer is finished we have 3000 keys visible via listing.

Why is that happening and what's the best way to approach that?

I assume it will happen also when new node attached to the cluster in 
production...

Riak 1.2.1

Regards
Daniel

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

