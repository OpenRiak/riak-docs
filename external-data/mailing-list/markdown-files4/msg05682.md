---
title: "Re: Can't start second node in local machine"
description: ""
project: community
lastmod: 2011-11-19T11:59:18-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05682"
mailinglist_parent_id: "msg05679"
author_name: "Jeremiah Peschka"
project_section: "mailinglistitem"
sent_date: 2011-11-19T11:59:18-08:00
---


There are no books about Riak, yet. Mathias Meyer wrote a NoSQL handbook that 
has a chapter about Riak, but I've never read it. Seven Databases in Seven 
Weeks is rumored to contain a chapter about Riak, but it's just in a planning 
stage, I believe. You can search the mailing list archives through markmail: 
http://markmail.org/search/?q=list%3Acom.basho.lists.riak-users

The Fast Track doesn't do anything hidden, it uses `make` and `rebar` to create 
a 4 node cluster by copying the configuration and binary folders. You can see 
what happens by looking in the Makefile for the devrel section. It's pretty 
dull and it just copies configuration around with some magic to change the port 
numbers.

I can appreciate wanting to manually configure Riak and all, but keep in mind 
that having multiple Riak nodes on the same physical machine is not recommended 
for production use. The only thing that you're going to be change is the name 
you're using for the node. When in doubt, take the path of least resistance.

If you're still intent on doing all of this by hand, you need to make sure that 
you also change the handoff\_port and pb\_port in the node configuration file. 
When I run a diff on my node1 and node2 config files, I see the following:

$ diff dev1/etc/app.config dev2/etc/app.config 
11c11
&lt; {http, [ {"0.0.0.0", 8091 } ]},
---
&gt; {http, [ {"0.0.0.0", 8092 } ]},
15c15
&lt; %{https, [{ "0.0.0.0", 8091 }]},
---
&gt; %{https, [{ "0.0.0.0", 8092 }]},
26c26
&lt; {handoff\_port, 8101 },
---
&gt; {handoff\_port, 8102 },
55c55
&lt; {pb\_port, 8081 },
---
&gt; {pb\_port, 8082 },

HTH

---
Jeremiah Peschka - Founder, Brent Ozar PLF, LLC
Microsoft SQL Server MVP

On Nov 19, 2011, at 1:14 AM, yozloy wrote:

&gt; Hey Jeremiah,
&gt; 
&gt; I change the port that RIak listening on by changing the {http, 
&gt; [{"127.0.0.1",8098}]} to {http, [{127.0.0.1}, 8099]} in the etc/app.config, 
&gt; but the Node 'riak2@127.0.0.1' not responding to pings. 
&gt; 
&gt; And the fast track seems to me use some sh file hidden some command, I want 
&gt; do manually configure RIak.
&gt; 
&gt; Could you recommend some books or any reading material about Riak besides the 
&gt; online official documentation? 
&gt; 
&gt; Thanks
&gt; 
&gt; On Nov 19, 2011, at 12:08 PM, Jeremiah Peschka wrote:
&gt; 
&gt;&gt; 
&gt;&gt; Did you change the ports that Risk is listening on for the second instance?
&gt;&gt; 
&gt;&gt; If you follow the Riak fast track, it explains how to set up a 4 node 
&gt;&gt; cluster.
&gt;&gt; 
&gt;&gt; Jeremiah Peschka
&gt;&gt; Founder, Brent Ozar PLF
&gt;&gt; 
&gt;&gt; On Nov 18, 2011 7:24 PM, "yozloy"  wrote:
&gt;&gt; I copied the riak-1.0.2 folder, and change the node name to riak2@127.0.0.1 
&gt;&gt; in the vm.args file. But the changed node refused to start, it returned
&gt;&gt; 
&gt;&gt; Argo:bin yozloy$ ./riak start
&gt;&gt; !!!!
&gt;&gt; !!!! WARNING: ulimit -n is 256; 1024 is the recommended minimum.
&gt;&gt; !!!!
&gt;&gt; Riak failed to start within 15 seconds,
&gt;&gt; see the output of 'riak console' for more information.
&gt;&gt; If you want to wait longer, set the environment variable
&gt;&gt; WAIT\_FOR\_ERLANG to the number of seconds to wait.
&gt;&gt; Argo:bin yozloy$ ls
&gt;&gt; 
&gt;&gt; 
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; 


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

