---
title: "Re: File corruption after power cut"
description: ""
project: community
lastmod: 2019-09-04T05:15:25-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg18637"
mailinglist_parent_id: "msg18634"
author_name: "Fred Dushin"
project_section: "mailinglistitem"
sent_date: 2019-09-04T05:15:25-07:00
---


Just remember if you are not running AAE, you will want to do a manual repair 
on that partition, in order to ensure you have adequate replication:

https://docs.riak.com/riak/kv/2.2.3/using/repair-recovery/repairs.1.html#repairing-partitions

&gt; On Sep 4, 2019, at 5:19 AM, Bryan Hunt  
&gt; wrote:
&gt; 
&gt; Easiest solution is to just delete the vnode - and let it recover from 
&gt; replicas - vnode directory will be 
&gt; 844930634081928249586505293914101120738586001408
&gt; 
&gt; 
&gt; 
&gt;&gt; On 4 Sep 2019, at 10:01, Guido Medina &gt; &gt; wrote:
&gt;&gt; 
&gt;&gt; Hi all,
&gt;&gt; 
&gt;&gt; We had a power cut which caused one of the nodes to corrupt one of the 
&gt;&gt; LevelDB files, after this that node doesn't even want to start, here is the 
&gt;&gt; error we are seeing:
&gt;&gt;&gt; 2019-09-04 08:46:41.584 [error] &lt;0.2329.0&gt;@riak\_kv\_vnode:init:527 Failed to 
&gt;&gt;&gt; start riak\_kv\_eleveldb\_backend backend for index 
&gt;&gt;&gt; 844930634081928249586505293914101120738586001408 error: 
&gt;&gt;&gt; {db\_open,"Corruption: CURRENT file does not end with newline"}
&gt;&gt; 
&gt;&gt; Thanks in advance for your help ;-)
&gt;&gt; Guido.
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com 
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; 
&gt; 
&gt; Code Sync & Erlang Solutions Conferences
&gt; Code BEAM Lite  
&gt; - Budapest: 20 September 2019
&gt; Code BEAM Lite  
&gt; - New York City: 01 October 2019
&gt; Code BEAM Lite  
&gt; - Berlin: 11 October 2019
&gt; RabbitMQ Summit  
&gt; - London: 4 November 2019
&gt; Code Mesh LDN  - 
&gt; London: 7-8 November 2019
&gt; Code BEAM Lite  
&gt; - Bangalore: 14 November 2019
&gt; Code BEAM Lite  
&gt; - Amsterdam: 29 November 2019
&gt; Lambda Days  - 
&gt; Krak√≥w: 13-14 February 2020
&gt; Code BEAM SF  - 
&gt; San Francisco: 5-6 March 2020
&gt; Code BEAM STO - Stockholm: 28-29 May 2020
&gt; 
&gt; Erlang Solutions cares about your data and privacy; please find all details 
&gt; about the basis for communicating with you and the way we process your data 
&gt; in our Privacy Policy 
&gt; .You can update your 
&gt; email preferences or opt-out from receiving Marketing emails here 
&gt; .
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

