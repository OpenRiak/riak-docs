---
title: "Re: riak failure on concurrent writes"
description: ""
project: community
lastmod: 2012-10-03T10:38:17-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08799"
mailinglist_parent_id: "msg08796"
author_name: "Alexander Sicular"
project_section: "mailinglistitem"
sent_date: 2012-10-03T10:38:17-07:00
---


I have also used the unix command "split" to split large csv files for easier 
management and parallel loading. 

-Alexander Sicular

@siculars

On Oct 3, 2012, at 12:08 PM, Evan Vigil-McClanahan wrote:

&gt; For fastest loading, you might try hitting more than one node, just
&gt; round-robining around the cluster should work.
&gt; 
&gt; Additionally, make sure that you've done basic tunings to the cluster,
&gt; and try adjusting max\_open\_files in the eleveldb config section to a
&gt; higher value (but not too high, as you don't have a lot of memory on
&gt; those nodes). Once you get past the first level in leveldb, you can
&gt; run into file handle contention at low values.
&gt; 
&gt; Basic sysctl tuning values:
&gt; 
&gt; net.core.wmem\_default=8388608
&gt; net.core.rmem\_default=8388608
&gt; net.core.wmem\_max=8388608
&gt; net.core.rmem\_max=8388608
&gt; net.core.netdev\_max\_backlog=10000
&gt; net.core.somaxconn=4000
&gt; net.ipv4.tcp\_max\_syn\_backlog=40000
&gt; net.ipv4.tcp\_fin\_timeout=15
&gt; net.ipv4.tcp\_tw\_reuse=1
&gt; vm.swappiness=0
&gt; 
&gt; Also try changing your scheduler to deadline or noop (noop is for SSDs, 
&gt; mostly):
&gt; 
&gt; http://doc.opensuse.org/products/draft/SLES/SLES-tuning\_sd\_draft/cha.tuning.io.html
&gt; 
&gt; On Wed, Oct 3, 2012 at 5:42 AM, Venki Yedidha
&gt;  wrote:
&gt;&gt; Hi All,
&gt;&gt; 
&gt;&gt; Now that I have a 5 node riak cluster of which all are running on
&gt;&gt; eleveldb backend(4 GB ram for each node), I am trying to insert appr: 34000
&gt;&gt; objects on one of the riak node in the cluster through riak-erlang client
&gt;&gt; asynchronously...Its failing after some time to accept inserts...Do I need
&gt;&gt; to change any settings in the config files so that riak runs stable to
&gt;&gt; handle concurrent writes upto 35k with out failure?
&gt;&gt; 
&gt;&gt; 
&gt;&gt; Please help me on the above..
&gt;&gt; 
&gt;&gt; Thanks,
&gt;&gt; Venkatesh
&gt;&gt; 
&gt;&gt; 
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt; 
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

