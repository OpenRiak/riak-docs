---
title: "Re: How does Riak full-text search compare to SolrCloud?"
description: ""
project: community
lastmod: 2013-10-30T18:52:37-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12808"
mailinglist_parent_id: "msg12801"
author_name: "Eric Redmond"
project_section: "mailinglistitem"
sent_date: 2013-10-30T18:52:37-07:00
---


That's pretty much it, with a small correction: there's a 1-1 mapping between a 
Solr shard and Riak node (not vnode). Yokozuna attaches a partition number to 
each index document which specifies it's riak object's vnode. Then at query 
time, partitions are specified to filter out replicated values across nodes.

Eric

On Oct 30, 2013, at 7:14 AM, Sean Cribbs  wrote:

&gt; Underneath the hood, Yokozuna (Riak Search 2.0) uses Solr's distributed 
&gt; queries. However, instead of relying on Solr Cloud to distributed indexes and 
&gt; determine which shards to include, it uses a variant of Riak's "coverage" 
&gt; computation to determine which shards are queried, and then just passes it 
&gt; off to Solr to perform. Unlike Riak Search 1.4 and earlier, Yokozuna is 
&gt; document-partitioned, not term-partitioned, meaning that there is a 1-1 
&gt; mapping between Solr shard and Riak partition/vnode. Yokozuna also does 
&gt; active anti-entropy so that any discrepancies between the index and the 
&gt; key-value data get repaired.
&gt; 
&gt; I'm sure I'm missing some details; perhaps Ryan or Eric could chime in when 
&gt; they come online.
&gt; 
&gt; 
&gt; On Wed, Oct 30, 2013 at 8:18 AM, Jeremiah Peschka 
&gt;  wrote:
&gt; Riak 2.0's search is Solr and has the same functionality as SolrCloud. As I 
&gt; understand it, you'll have the same functionality available to you between 
&gt; the two. 
&gt; 
&gt; Looking at the history of the source, it looks like the current Solr version 
&gt; in Riak 2.0 Search is Solr 4.4... so, no, block joins aren't there.
&gt; 
&gt; ---
&gt; Jeremiah Peschka - Founder, Brent Ozar Unlimited
&gt; MCITP: SQL Server 2008, MVP
&gt; Cloudera Certified Developer for Apache Hadoop
&gt; 
&gt; 
&gt; On Wed, Oct 30, 2013 at 2:48 AM, Andy  wrote:
&gt; Hi,
&gt; 
&gt; I saw in the announcement of Riak 2.0 that Solr is now integrated into Riak: 
&gt; http://basho.com/introducing-riak-2-0/. The announcement mentions "highly 
&gt; available" and "built for scale". Those seem to be characteristics similar to 
&gt; SolrCloud. For someone looking for a distributed search server, is there any 
&gt; reason to choose Riak over SolrCloud? What are the pros and cons of the two 
&gt; solutions?
&gt; 
&gt; Also, is every Solr functionality available in Riak? Do the various Solr 
&gt; analyzers and stemmers for different languages work in Riak? What about the 
&gt; newly added Block Join feature 
&gt; (https://issues.apache.org/jira/browse/SOLR-3076)?
&gt; 
&gt; Thanks.
&gt; Andy
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; 
&gt; 
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; 
&gt; 
&gt; 
&gt; 
&gt; -- 
&gt; Sean Cribbs 
&gt; Software Engineer
&gt; Basho Technologies, Inc.
&gt; http://basho.com/
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

