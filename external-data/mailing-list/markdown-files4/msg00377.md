---
title: "Re: Number of nodes and links"
description: ""
project: community
lastmod: 2010-05-15T15:59:26-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg00377"
mailinglist_parent_id: "msg00375"
author_name: "Alexander Sicular"
project_section: "mailinglistitem"
sent_date: 2010-05-15T15:59:26-07:00
---


Hi Chris,

Some things I keep in mind re. links:

-not specifically the total number of links but the total size in kb should be 
considered specifically in regards to the webmachine http interface. i think 
there are problems around 8KB.
-links are unidirectional. a &gt; b != b &gt; a
-links are singular 1 to 1 relationships

Regarding changing links... Riak does not have any multi transaction 
transactional semantics. Meaning each operation is atomic in and of itself and 
can not be made to be dependent on another operation. The catch to this rule is 
pre and post hooks which will trigger at the bucket level and not at the key 
level so you could do certain things. So if you have an architecture where 
links in one object need to be reflected in another object then you either need 
to account for that in your application or augment your application with some 
sort of message queue.

Regarding changing objects (keys) frequently you should familiarize yourself 
with the W and DW parameters which are all beholden to your N val set at the 
bucket level.

I would probably run multiple nodes on one physical machine. As with most 
databases, the bottleneck is usually in the I/O so keep that in mind contention 
wise. But be warned that as per some recent posts, Riak keeps multiple physical 
copies of your data on multiple vnodes. And there are some number of vnodes 
associated with physical nodes. So your data on disk will reflect that 
redundancy.

To the Basho people, it wasn't clear, but are there ways to ensure that 
duplicate copies are not housed on the same physical host?

-Alexander

On May 15, 2010, at 6:05 PM, Chris Hicks wrote:

&gt; For the project I am working on there are going to be a lot of individual 
&gt; objects, eventually into the millions, with the vast majority of them being 
&gt; linked as (poorly) depicted below.
&gt; 
&gt; Overly simplified data model:
&gt; 
&gt; B &lt;==========&gt;B
&gt; \_\_\_\_|\_\_\_ \_\_\_|\_\_\_
&gt; / \ / \
&gt; C C C C
&gt; / / \ \ / / \ \ / / \ \ / / \ \
&gt; | | | | | | | | | | | | | | | |
&gt; D D D D D D D D D D D D D D D D
&gt; 
&gt; Where some of the B level objects (each level separated into different 
&gt; buckets) are linked to each other but in very limited numbers. In some of 
&gt; these areas there will be a ton of rapid updates and in others much more rare 
&gt; updates. Since a decent portion of my data modifications involve nothing more 
&gt; than shifting which C level object a D level object is associated with, is 
&gt; there anything I should keep in mind when planning for a lot of link-changing 
&gt; operations? For example, though for some reason I can't find it now, I 
&gt; remember reading that the amount of links one could have per object was 
&gt; something like 170K links, is that correct? I understand performance would 
&gt; degrade quite a bit when one has that amount of data for a single object and 
&gt; my project won't call for anywhere near that but just want to understand the 
&gt; nuances of the whole process.
&gt; 
&gt; Also, sort of related, I plan on running this whole thing on a single 
&gt; dedicated server machine (unless I get major usage and get the money to 
&gt; upgrade) that will have multiple CPU's. Should I just operate one physical 
&gt; node on that machine or should I match the number of CPU's with the number of 
&gt; nodes, essentially dedicating each physical CPU to handling a hardware node 
&gt; (if that is possible)? What would the pros and cons be to a single or 
&gt; multi-node system on that sort of hardware?
&gt; 
&gt; Chris Hicks.
&gt; 
&gt; The New Busy is not the old busy. Search, chat and e-mail from your inbox. 
&gt; Get started.\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

