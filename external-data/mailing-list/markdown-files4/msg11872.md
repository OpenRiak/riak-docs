---
title: "Re: Using MapReduce with Counters"
description: ""
project: community
lastmod: 2013-08-02T13:58:30-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11872"
mailinglist_parent_id: "msg11871"
author_name: "João Machado"
project_section: "mailinglistitem"
sent_date: 2013-08-02T13:58:30-07:00
---


Hi Sean,

Thanks for your quick response. If I follow the steps from Sam, it works as
expected. I tried the same steps but with my own bucket (and data) and it
worked too. The difference between what I was trying and what Sam did was
because I used JavaScript and Sam Erlang.

Is there any trick to use Javascript?


[]'s


[image: Ideais Tecnologia]
\*João Machado\*joao.mach...@ideais.com.brTel.: 55 21 3553 1301 R: 215Cel.:
55 21 8124 3531Site: www.ideais.com.br


On Fri, Aug 2, 2013 at 5:09 PM, Sean Cribbs  wrote:

&gt; Hi João,
&gt;
&gt; You might want to try the steps shown in Sam Elliott's "cookbook":
&gt; https://github.com/basho/riak\_crdt\_cookbook/blob/master/counters/README.md
&gt;
&gt;
&gt; On Fri, Aug 2, 2013 at 2:56 PM, João Machado 
&gt; wrote:
&gt;
&gt;&gt; Hello,
&gt;&gt;
&gt;&gt; Anyone tried to use MR with counters?
&gt;&gt;
&gt;&gt; I'm trying with the following steps:
&gt;&gt;
&gt;&gt; Increment the counter:
&gt;&gt; -&gt; curl -X POST http://localhost:8098/buckets/BUCKET/counters/MY\_COUNTER-d 1
&gt;&gt;
&gt;&gt; Confirm the actual value:
&gt;&gt; -&gt; curl http://localhost:8098/buckets/BUCKET/counters/MY\_COUNTER
&gt;&gt; \*1\*
&gt;&gt;
&gt;&gt; Execute mapreduce:
&gt;&gt; -&gt; curl -X POST -H "content-type: application/json"
&gt;&gt; http://127.0.0.1:8098/mapred -d @map\_red.js
&gt;&gt; \*{"error":"bad\_utf8\_character\_code"}
&gt;&gt; \*
&gt;&gt;
&gt;&gt; Where the map\_red.js is:
&gt;&gt;
&gt;&gt; {
&gt;&gt; "inputs":"BUCKET",
&gt;&gt; "query":[
&gt;&gt; {"map":{"language":"javascript","name":"Riak.mapValues"}}
&gt;&gt; ,{"reduce":{"language":"javascript","name":"Riak.reduceSum"}}
&gt;&gt;
&gt;&gt; ]
&gt;&gt; }
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; []'s
&gt;&gt;
&gt;&gt;
&gt;&gt; [image: Ideais Tecnologia]
&gt;&gt; \*João Machado\*joao.mach...@ideais.com.brTel.: 55 21 3553 1301 R: 215Cel.:
&gt;&gt; 55 21 8124 3531Site: www.ideais.com.br
&gt;&gt;
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;
&gt;&gt;
&gt;
&gt;
&gt; --
&gt; Sean Cribbs 
&gt; Software Engineer
&gt; Basho Technologies, Inc.
&gt; http://basho.com/
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

