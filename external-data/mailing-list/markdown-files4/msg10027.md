---
title: "Re: CorrugatedIron Link Walking"
description: ""
project: community
lastmod: 2013-02-07T01:25:46-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg10027"
mailinglist_parent_id: "msg10026"
author_name: "OJ Reeves"
project_section: "mailinglistitem"
sent_date: 2013-02-07T01:25:46-08:00
---


Kevin,

A few points:

 - It's recommended that you avoid passing in a whole bucket as an
 argument to a map/reduce query as this results in keys for the bucket being
 listed, which as you know is an expensive operation.
 - The .Link() function is a function that says "please extract links
 from the objects specified by the .Inputs() function".
 - The lambda function that is passed to the .Link() function in the
 example you listed says "please look for links that are called "friend"
 that point at the "people" bucket.
 - .ReduceErlang() says "perform a reduce phase on the results from the
 previous phase using an Erlang module". The inputs to this phase are the
 outputs from the link thanks to the use of the .Link() function.
 - When using .ReduceErlang() you use the lambda to specify which module
 and function you want called on the inputs. The example below says "filter
 out duplicates using the reduce\_set\_union function that comes with Riak's
 riak\_kv\_mapreduce module".

I hope that clears things up a bit. I would recommend reading Basho's
documentation on map/reduces phases to help you get your head around what
they are and how they work.

Best of luck
OJ

On Thu, Feb 7, 2013 at 4:46 PM, Kevin Burton wrote:

&gt; I am trying out link walking with CorrugatedIron. I see in the
&gt; documentation (http://corrugatediron.org/documentation/MapReduce.html):\*\*\*
&gt; \*
&gt;
&gt; \*\* \*\*
&gt;
&gt; \*var\* query1 = \*new\* RiakMapReduceQuery()\*\*\*\*
&gt;
&gt; .Inputs("people")\*\*\*\*
&gt;
&gt; .Link(l =&gt; l.Tag("friend").Bucket("people"))\*\*\*\*
&gt;
&gt; .ReduceErlang(r =&gt; r.ModFun("riak\_kv\_mapreduce",
&gt; "reduce\_set\_union").Keep(\*true\*));\*\*\*\*
&gt;
&gt; \*\* \*\*
&gt;
&gt; I am unclear what the function of the last ‘ReduceErlang’ method is?\*\*\*\*
&gt;
&gt; \*\* \*\*
&gt;
&gt; Also I want all links of a certain tag. Isn’t the bucket and key specified
&gt; in the link? What is the purpose of the ‘Bucket’?\*\*\*\*
&gt;
&gt; \*\* \*\*
&gt;
&gt; Finally this is probably my ignorance on Map/Reduce but I don’t understand
&gt; the different phase results.\*\*\*\*
&gt;
&gt; \*\* \*\*
&gt;
&gt; Thank you.\*\*\*\*
&gt;
&gt; \*\* \*\*
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
&gt;


-- 

OJ Reeves
+61 431 952 586
http://buffered.io/
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

