---
title: "Re: CRDT on Riak 2.0"
description: ""
project: community
lastmod: 2014-03-06T14:50:25-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13761"
author_name: "EmiNarcissus"
project_section: "mailinglistitem"
sent_date: 2014-03-06T14:50:25-08:00
---



Hi Sean,

Thanks very much, that’s very helpful. Anyways, I’ve noticed in update\_dt 
function they are preferred to apply a context dict, which in the mail list 
described as a encoded version of original object(dict,set, so to say on a 
single update action, each time a new record is being added/removed it will 
apply the full original object to the server?), so for frequently operations, 
how much performance difference is between batch/single actions?

I’m only thinking about the possibilities on large dataset, but really in fact 
the dataset I’m planning to use at most contains 1-2k records is already big 
enough. currently I’m working on a project which using Riak Link to hold the 
identical items,also need to update the object data itself a lot(inside have a 
few counters(but indeed currently is just a number,didn’t put it into a 
separated counter yet), so is very non-efficient to update when new record is 
being inserted, don’t know if CRDT will provide more efficiency on that.

On 2014年3月4日 at 下午11:12:03, Sam Elliott (sam.elli...@basho.com) wrote:
&gt; To answer another thing brought up in your message:
&gt; 
&gt; When you say "big enough" set sizes of 10k, be very careful. Riak Data Types 
&gt; should not 
&gt; be larger than you would make a normal Riak Object. There's more guidance in 
&gt; this thread: 
&gt; http://lists.basho.com/pipermail/riak-users\_lists.basho.com/2014-February/014722.html
&gt; 
&gt; 
&gt; Sam
&gt; 
&gt; --
&gt; Sam Elliott
&gt; Engineer
&gt; sam.elli...@basho.com
&gt; --
&gt; 
&gt; 
&gt; On Tuesday, 4 March 2014 at 10:02AM, Sean Cribbs wrote:
&gt; 
&gt; &gt; Hi Tim,
&gt; &gt;
&gt; &gt; We punted on sub-type queries for 2.0. We intend to address them in 2.1, so 
&gt; &gt; yes you must 
&gt; fetch the entire set or map in order to find out things like membership and 
&gt; cardinality. 
&gt; &gt;
&gt; &gt;
&gt; &gt; On Tue, Mar 4, 2014 at 8:01 AM, EmiNarcissus 
&gt; wrote:
&gt; &gt; &gt; Hi,
&gt; &gt; &gt;
&gt; &gt; &gt; I’m now porting the riak 2.0 driver for twisted, it works beautifully now 
&gt; &gt; &gt; with what 
&gt; Yokozuna provides, also have a great back-port ability,really appreciate 
&gt; everything 
&gt; what this team have brought us XD. But because it still in lacks of document, 
&gt; I must read 
&gt; the implementation both from ruby and riakc-erl repo to get it started(erlang 
&gt; is okay 
&gt; for me, but I’m not quite familiar with ruby,sadly looks like only ruby’s 
&gt; client implementation 
&gt; is throughly right now).
&gt; &gt; &gt;
&gt; &gt; &gt; So here is my question on the datatype implementation on CRDT system.
&gt; &gt; &gt;
&gt; &gt; &gt; From the code I can tell , fetch\_dt/update\_dt/modify\_dt is what have been 
&gt; &gt; &gt; exposed 
&gt; from the pbc interface. Now I’m more focused on Set object, so each time 
&gt; client will fetch 
&gt; the whole set(fetch\_dt) from the server and build the set on the local end, 
&gt; and maintain 
&gt; a add/remove operation list to send to the server when user does a 
&gt; update/add/remove 
&gt; action.
&gt; &gt; &gt;
&gt; &gt; &gt; But I’m a little bit confused here, like what redis provides, a set have 
&gt; &gt; &gt; a ismember function 
&gt; is being done on the server instead of fetch/test manner. Does this available 
&gt; for Riak 
&gt; 2.0 Set datatype(just like what Riak1.4 Counter object provided, it will do 
&gt; the operation 
&gt; on the server side,MISMEMBER a b, it will either return True/False). 
&gt; Currently I only 
&gt; can see add/update/delete operation on pbc proto file, and don’t have 
&gt; something alike, 
&gt; is that in a Todo list ? or will not implement at all(I will reconsider how 
&gt; the data should 
&gt; be structured if so). This feature will be really helpful when the dataset is 
&gt; big enough(like 
&gt; more than 10k values in it.)
&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; Best,
&gt; &gt; &gt; Tim Lee
&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; &gt; &gt; riak-users mailing list
&gt; &gt; &gt; riak-users@lists.basho.com (mailto:riak-users@lists.basho.com)
&gt; &gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; --
&gt; &gt; Sean Cribbs 
&gt; &gt; Software Engineer
&gt; &gt; Basho Technologies, Inc.
&gt; &gt; http://basho.com/
&gt; &gt;
&gt; &gt;
&gt; &gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com (mailto:riak-users@lists.basho.com)
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; 
&gt; 
&gt; 
&gt; 
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

