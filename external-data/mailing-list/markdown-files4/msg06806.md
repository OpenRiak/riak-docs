---
title: "Re: secondary indexes for timestamp"
description: ""
project: community
lastmod: 2012-03-01T05:47:11-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06806"
mailinglist_parent_id: "msg06805"
author_name: "Norman Khine"
project_section: "mailinglistitem"
sent_date: 2012-03-01T05:47:11-08:00
---


OK, i got it, i did not enable in the conf file the backend

☺ curl http://localhost:8098/buckets/mybucket/index/field1\_bin/val1
{"keys":["mykey1"]}%

 ☺ curl
http://localhost:8098/buckets/mybucket/index/field2\_int/1001
{"keys":["mykey1"]}%

 ☺

thanks for your help and time

On Thu, Mar 1, 2012 at 2:35 PM, Norman Khine  wrote:
&gt; Hi Ryan,
&gt; Thanks for the reply.
&gt;  I will need to go an learn more before i take up any more of your time.
&gt;
&gt; On Thu, Mar 1, 2012 at 1:44 PM, Ryan Zezeski  wrote:
&gt;&gt; Hi Norman,
&gt;&gt;
&gt;&gt; I see a couple of things potentially confusing you here.  The first thing to
&gt;&gt; understand is that Riak currently provides two methods for indexing/querying
&gt;&gt; your data: Search and secondary indices (2i).  They are not the same and are
&gt;&gt; not compatible with each other.  I'm going to assume you know which one you
&gt;&gt; want to use (or you can actually use both if you really want to but Search
&gt;&gt; can do everything 2i can and more) and make some comments inline...
&gt;&gt;
&gt;&gt; On Thu, Mar 1, 2012 at 4:56 AM, Norman Khine  wrote:
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; 500 Internal Server
&gt;&gt;&gt; ErrorInternal Server Error
=====================

The server
&gt;&gt;&gt; encountered an error while processing this
&gt;&gt;&gt;
&gt;&gt;&gt; request:  

```
{error,{error,{indexes_not_supported,riak_kv_bitcask_backend}}}
```


---

mochiweb+webmachine
&gt;&gt;&gt; web server

%
&gt;&gt;
&gt;&gt;
&gt;&gt; This is telling you that 2i indexes are not supported because you are using
&gt;&gt; a backend that doesn't support them.  If you didn't already know Riak
&gt;&gt; supports multiple backends and 2i is only compatible with the
&gt;&gt; `riak\_kv\_eleveldb\_backend` [1].
&gt;&gt;
&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; curl http://localhost:8098/solr/users/select?q=timestamp:1330593323542
&gt;&gt;&gt;
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; 0
&gt;&gt;&gt; 4
&gt;&gt;&gt; 
&gt;&gt;&gt; on
&gt;&gt;&gt; 0
&gt;&gt;&gt; timestamp:1330593323542
&gt;&gt;&gt; or
&gt;&gt;&gt; 
&gt;&gt;&gt; value
&gt;&gt;&gt; standard
&gt;&gt;&gt; 1.1
&gt;&gt;&gt; 0
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;
&gt;&gt; In this case you are running a query against Search.  This will only return
&gt;&gt; results if you a) have search enabled [2], b) you install the search hook on
&gt;&gt; the 'users' bucket [3], and c) you have the schema setup correctly [4].  I
&gt;&gt; realize this isn't entirely straightforward and am willing to help if you
&gt;&gt; decide you want to use the search functionality.
&gt;&gt;
&gt;&gt; -Ryan
&gt;&gt;
&gt;&gt; [1]: http://wiki.basho.com/Secondary-Indexes.html#Configuration
&gt;&gt;
&gt;&gt; [2]: https://github.com/basho/riak\_search/blob/master/README.org
&gt;&gt;
&gt;&gt; [3]: http://wiki.basho.com/Riak-Search---Indexing-and-Querying-Riak-KV-Data.html#Setting-up-Indexing
&gt;&gt;
&gt;&gt; [4]: http://wiki.basho.com/Riak-Search---Schema.html
&gt;&gt;
&gt;
&gt;
&gt;
&gt; --
&gt; %&gt;&gt;&gt; "".join( [ {'\*':'@','^':'.'}.get(c,None) or
&gt; chr(97+(ord(c)-83)%26) for c in ",adym,\*)&uzq^zqf" ] )



-- 
%&gt;&gt;&gt; "".join( [ {'\*':'@','^':'.'}.get(c,None) or
chr(97+(ord(c)-83)%26) for c in ",adym,\*)&uzq^zqf" ] )

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

