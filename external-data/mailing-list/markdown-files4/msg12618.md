---
title: "Re: Memory Backend TTL doesn't work"
description: ""
project: community
lastmod: 2013-10-14T05:37:28-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12618"
mailinglist_parent_id: "msg12617"
author_name: "Alex Moore"
project_section: "mailinglistitem"
sent_date: 2013-10-14T05:37:28-07:00
---


Hi Chan,

Instead of:
{storage\_backend, riak\_kv\_memory\_backend}, 
{memory\_backend, [ 
{max\_memory, 8192}, 
{ttl, 1} 
]}, 


Try:

 {multi\_backend\_default, &lt;&lt;"expiring\_memory\_backend"&gt;&gt;},
 {multi\_backend, [
 {&lt;&lt;"expiring\_memory\_backend"&gt;&gt;, riak\_kv\_memory\_backend, [
 {max\_memory, 8192}, %% 8GB
 {ttl, 1}
 ]}
 ]},
Also, for future reference, the max\_memory field is in MB per vnode, so your 
current setting is 8GB per vnode.  Unless you have a ridiculous amount of RAM, 
you might want to reduce that setting a bit :)

Thanks, 

Alex

-- 
Alex Moore
Sent with Airmail

On October 14, 2013 at 7:32:03 AM, 성동찬\_Chan (c...@kakao.com) wrote:

Hi~! 

I'm checking riak to use as a cache like memcached. 
But I found some strange situation. 
I set "ttl" like this to expire data, but failed. 
--------------------------------------------- 
{riak\_kv, [ 
... 
{storage\_backend, riak\_kv\_memory\_backend}, 
{memory\_backend, [ 
{max\_memory, 8192}, 
{ttl, 1} 
]}, 
... 
]}, 

--------------------------------------------- 

TTL isn't supported on riak\_kv\_memory\_backend? 
I changed riak\_kv\_memory\_backend to riak\_kv\_bitcask\_backend, that's fine. 

Thanks. 
Chan. 
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_ 
riak-users mailing list 
riak-users@lists.basho.com 
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

