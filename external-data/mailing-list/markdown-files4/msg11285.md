---
title: "Re: 403 forbidden while creating admin user in Riak-CS"
description: ""
project: community
lastmod: 2013-06-16T21:10:47-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11285"
mailinglist_parent_id: "msg11284"
author_name: "Kelly McLaughlin"
project_section: "mailinglistitem"
sent_date: 2013-06-16T21:10:47-07:00
---


The {tcp,econnrefused} errors mean that RiakCS is unable to connect to
Riak.
Riak must be running when you start RiakCS. Also make sure your settings in
the RiakCS app.config for riak\_ip and riak\_pb\_port match the settings that
your
Riak instance is actually listening on. Hope that helps.

Kelly


On Sat, Jun 15, 2013 at 5:53 PM, De Bunge  wrote:

&gt; Thank you the response.
&gt;
&gt; Checking whether ip is correct:
&gt;
&gt; root@q092:~# cat /etc/riak-cs/app.config | grep stanchion
&gt; {stanchion\_ip, "127.0.0.1"},
&gt; {stanchion\_port, 8085 },
&gt; {stanchion\_ssl, false },
&gt; %% the admin credentials specified in the stanchion
&gt; root@q092:~# cat /etc/riak-cs/app.config | grep stanchion
&gt; {stanchion\_ip, "127.0.0.1"},
&gt; {stanchion\_port, 8085 },
&gt; {stanchion\_ssl, false },
&gt; %% the admin credentials specified in the stanchion
&gt; root@q092:~# cat /etc/stanchion/app.config | grep stanchion
&gt; {stanchion, [
&gt; {stanchion\_ip, "127.0.0.1"},
&gt; {stanchion\_port, 8085 } ,
&gt;
&gt; {"/var/log/stanchion/error.log", error, 10485760, "$D0", 5},
&gt;
&gt; {"/var/log/stanchion/console.log", info, 10485760, "$D0", 5}
&gt; {crash\_log, "/var/log/stanchion/crash.log"},
&gt; root@q092:~# cat /var/log/stanchion/error.log
&gt;
&gt; pinging stanchion:
&gt;
&gt; root@q092:~# stanchion ping
&gt; pong
&gt;
&gt; The riak-cs error log is more interesting:
&gt;
&gt; cat /var/log/riak-cs/error.log.0
&gt; 2013-06-14 19:41:22.285 [error] &lt;0.131.0&gt; CRASH REPORT Process
&gt; &lt;0.131.0&gt; with 0 neighbours exited with reason: {tcp,econnrefused} in
&gt; gen\_server:init\_it/6 line 320
&gt; 2013-06-14 19:42:06.562 [error] &lt;0.129.0&gt; CRASH REPORT Process
&gt; &lt;0.129.0&gt; with 0 neighbours exited with reason: {tcp,econnrefused} in
&gt; gen\_server:init\_it/6 line 320
&gt; 2013-06-14 19:43:55.024 [error] &lt;0.131.0&gt; CRASH REPORT Process
&gt; &lt;0.131.0&gt; with 0 neighbours exited with reason: {tcp,econnrefused} in
&gt; gen\_server:init\_it/6 line 320
&gt; 2013-06-14 19:43:59.664 [error] &lt;0.131.0&gt; CRASH REPORT Process
&gt; &lt;0.131.0&gt; with 0 neighbours exited with reason: {tcp,econnrefused} in
&gt; gen\_server:init\_it/6 line 320
&gt; 2013-06-14 20:00:46.381 [error] &lt;0.131.0&gt; CRASH REPORT Process
&gt; &lt;0.131.0&gt; with 0 neighbours exited with reason: {tcp,econnrefused} in
&gt; gen\_server:init\_it/6 line 320
&gt; 2013-06-14 20:01:14.355 [error] &lt;0.129.0&gt; CRASH REPORT Process
&gt; &lt;0.129.0&gt; with 0 neighbours exited with reason: {tcp,econnrefused} in
&gt; gen\_server:init\_it/6 line 320
&gt; 2013-06-14 20:02:03.254 [error] &lt;0.131.0&gt; CRASH REPORT Process
&gt; &lt;0.131.0&gt; with 0 neighbours exited with reason: {tcp,econnrefused} in
&gt; gen\_server:init\_it/6 line 320
&gt; 2013-06-14 21:07:21.845 [error] &lt;0.262.0&gt; Supervisor poolboy\_sup had
&gt; child riak\_cs\_riakc\_pool\_worker started with
&gt;
&gt; riak\_cs\_riakc\_pool\_worker:start\_link([{name,{local,bucket\_list\_pool}},{worker\_module,riak\_cs\_riakc\_pool\_worker},{size,5},{max\_overflow,...},...])
&gt; at undefined exit with reason shutdown in context shutdown\_error
&gt;
&gt; But have no idea that this means.
&gt;
&gt;
&gt; Сб. 15 июня 2013 21:00:07, Hector Castro писал:
&gt; &gt; Hi,
&gt; &gt;
&gt; &gt; Borrowing from a response to a similar thread a few days ago regarding
&gt; &gt; CS, this particular error message is misleading. In general it can be
&gt; &gt; treated as a 500 error.
&gt; &gt;
&gt; &gt; Generally, it translates to Riak CS inability to speak to Stanchion
&gt; &gt; (which is used for creating users and buckets). Please confirm that
&gt; &gt; Stanchion is running with:
&gt; &gt;
&gt; &gt; sudo stanchion ping
&gt; &gt;
&gt; &gt; Also, ensure that `stanchion\_ip` is the same within Riak CS and
&gt; &gt; Stanchion's app.config.
&gt; &gt;
&gt; &gt; --
&gt; &gt; Hector
&gt; &gt;
&gt; &gt;
&gt; &gt; On Sat, Jun 15, 2013 at 7:06 AM, De Bunge  wrote:
&gt; &gt;&gt; I'm following guidelines and set up anomimous user creation
&gt; &gt;&gt;
&gt; &gt;&gt; cat /etc/riak-cs/app.config | grep anonymous\_user\_creation
&gt; &gt;&gt; {anonymous\_user\_creation, true},
&gt; &gt;&gt;
&gt; &gt;&gt; and using post request to create admin user:
&gt; &gt;&gt;
&gt; &gt;&gt;&gt; curl -H 'Content-Type: application/json' \
&gt; &gt;&gt;&gt; -X POST `http://localhost:8080/riak-cs/user` \
&gt; &gt;&gt;&gt; --data '{"email":"foo...@example.com", "name":"admin user"}'
&gt; &gt;&gt;
&gt; &gt;&gt; The response always is
&gt; &gt;&gt;
&gt; &gt;&gt; xml version="1.0"
 &gt;&gt; encoding="UTF-8"?&gt;`ServiceUnavailable`Please
&gt; &gt;&gt; reduce your request
&gt; &gt;&gt;
&gt; rate./riak-cs/user
&gt; &gt;&gt;
&gt; &gt;&gt; No matter how long I wait (hours) between requests. What's wrong? How
&gt; &gt;&gt; sould I create admin user?
&gt; &gt;&gt;
&gt; &gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; &gt;&gt; riak-users mailing list
&gt; &gt;&gt; riak-users@lists.basho.com
&gt; &gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
&gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

