---
title: "Re: Cluster security"
description: ""
project: community
lastmod: 2014-06-30T03:12:26-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14420"
mailinglist_parent_id: "msg14419"
author_name: "Alex De la rosa"
project_section: "mailinglistitem"
sent_date: 2014-06-30T03:12:26-07:00
---


Hi guys,

Thanks for the info about the "erlang cookie", will take a look at it :)

Yeah, of course that i will have firewalls and restrict access, that's also
why i will limit the querying to the localhost and have a middleman API to
talk to the node itself, just i was worried in the fact that somebody would
just find out an IP or domain and try to hook-up a node itself.

Cheers,
Alex


On Mon, Jun 30, 2014 at 12:08 PM, Sargun Dhillon  wrote:

&gt; You really should have some level of IP filtering to prevent people
&gt; from connecting directly to your BEAM / EPM instances, but even if
&gt; they do have the ability to make a TCP/IP connection, they have to
&gt; know the distributed Erlang cookie in order to connect. More on this:
&gt; http://www.erlang.org/doc/reference\_manual/distributed.html - See,
&gt; section 13.7. You can actually use inet\_tls for communication between
&gt; your VMs to ensure authenticity of clients, as well as
&gt; confidentiality.
&gt;
&gt; On Mon, Jun 30, 2014 at 2:47 AM, Alex De la rosa
&gt;  wrote:
&gt; &gt; Hi there,
&gt; &gt;
&gt; &gt; Imaging the following IP configuration for Riak 2.0:
&gt; &gt;
&gt; &gt; # /etc/riak/riak.conf
&gt; &gt;
&gt; &gt; nodename = riak@111.222.333.1
&gt; &gt; listener.http.internal = 127.0.0.1:8098
&gt; &gt; listener.protobuf.internal = 127.0.0.1:8087
&gt; &gt; listener.https.internal = 127.0.0.1:8098
&gt; &gt;
&gt; &gt; I put the server's real IP in the nodename so they can join/communicate
&gt; with
&gt; &gt; each other but then I limit any HTTP/PB communication to the localhost so
&gt; &gt; nobody can mess with the node from outside (we assume I have an own
&gt; Python
&gt; &gt; API in each node doing the security and being a middleman between the
&gt; &gt; cluster and the webapp).
&gt; &gt;
&gt; &gt; But how can I avoid 3rd-parties to just build a Riak server themselves
&gt; and
&gt; &gt; join my cluster without permission... they can freely join like this:
&gt; &gt;
&gt; &gt; # riak-admin join riak@111.222.333.1
&gt; &gt;
&gt; &gt; Of course, they will have to find out the IP address, but if they do,
&gt; they
&gt; &gt; can simply put a server themselves in the cluster and do whatever they
&gt; want
&gt; &gt; with it.
&gt; &gt;
&gt; &gt; Maybe a solution is creating subdomains on my domain just for the
&gt; riak-ring
&gt; &gt; in a way that is extremely hard to find out to be able to do the JOIN,
&gt; &gt; something like: nodename = r...@rk001blahblahblah.mydomain.com
&gt; &gt;
&gt; &gt; Is this approach reasonable? Am I doing/thinking something very wrong?
&gt; What
&gt; &gt; would be the suggested way to prevent undesired JOINs?
&gt; &gt;
&gt; &gt; Cheers,
&gt; &gt; Alex
&gt; &gt;
&gt; &gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; &gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

