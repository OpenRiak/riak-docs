---
title: "Re: Python: More problems with counters"
description: ""
project: community
lastmod: 2014-08-17T11:05:55-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14680"
mailinglist_parent_id: "msg14679"
author_name: "Eric Redmond"
project_section: "mailinglistitem"
sent_date: 2014-08-17T11:05:55-07:00
---


Alex,

looking through your previous emails, it looked like you created a bucket type 
named "likes". If that's the case, you'd swap the function params:

bucket = client.bucket\_type('likes').bucket('counter\_bucket')

Hope that helps,
Eric


On Aug 17, 2014, at 10:33 AM, Alex De la rosa  wrote:

&gt; Hi there,
&gt; 
&gt; I was able to install the latest python client version with "pip install 
&gt; riak==2.1.0rc1", however, counters still fails to work... I used the 
&gt; following code ( that is the same as in the documentation ):
&gt; 
&gt; bucket = client.bucket\_type('counter\_bucket').bucket('likes')
&gt; 
&gt; however I get the following error:
&gt; 
&gt; Traceback (most recent call last):
&gt; File "x.py", line 18, in 
&gt; counter = bucket.new('Barcelona')
&gt; File "/usr/local/lib/python2.7/dist-packages/riak/bucket.py", line 159, in 
&gt; new
&gt; if self.bucket\_type.datatype:
&gt; File "/usr/local/lib/python2.7/dist-packages/riak/util.py", line 78, in 
&gt; \_\_get\_\_
&gt; value = self.fget(obj)
&gt; File "/usr/local/lib/python2.7/dist-packages/riak/bucket.py", line 618, in 
&gt; datatype
&gt; return self.get\_properties().get('datatype')
&gt; File "/usr/local/lib/python2.7/dist-packages/riak/bucket.py", line 557, in 
&gt; get\_properties
&gt; return self.\_client.get\_bucket\_type\_props(self)
&gt; File "/usr/local/lib/python2.7/dist-packages/riak/client/transport.py", 
&gt; line 184, in wrapper
&gt; return self.\_with\_retries(pool, thunk)
&gt; File "/usr/local/lib/python2.7/dist-packages/riak/client/transport.py", 
&gt; line 126, in \_with\_retries
&gt; return fn(transport)
&gt; File "/usr/local/lib/python2.7/dist-packages/riak/client/transport.py", 
&gt; line 182, in thunk
&gt; return fn(self, transport, \*args, \*\*kwargs)
&gt; File "/usr/local/lib/python2.7/dist-packages/riak/client/operations.py", 
&gt; line 265, in get\_bucket\_type\_props
&gt; return transport.get\_bucket\_type\_props(bucket\_type)
&gt; File 
&gt; "/usr/local/lib/python2.7/dist-packages/riak/transports/pbc/transport.py", 
&gt; line 381, in get\_bucket\_type\_props
&gt; MSG\_CODE\_GET\_BUCKET\_RESP)
&gt; File 
&gt; "/usr/local/lib/python2.7/dist-packages/riak/transports/pbc/connection.py", 
&gt; line 50, in \_request
&gt; return self.\_recv\_msg(expect)
&gt; File 
&gt; "/usr/local/lib/python2.7/dist-packages/riak/transports/pbc/connection.py", 
&gt; line 142, in \_recv\_msg
&gt; raise RiakError(err.errmsg)
&gt; riak.RiakError: 'Invalid bucket type: &lt;&lt;"counter\_bucket"&gt;&gt;'
&gt; 
&gt; It says the bucket type is wrong (but is the same as in the documentation)... 
&gt; I tried other combinations and all of them failed too:
&gt; 
&gt; riak.RiakError: 'Invalid bucket type: &lt;&lt;"counters\_bucket"&gt;&gt;'
&gt; riak.RiakError: 'Invalid bucket type: &lt;&lt;"counters"&gt;&gt;'
&gt; riak.RiakError: 'Invalid bucket type: &lt;&lt;"counter"&gt;&gt;'
&gt; 
&gt; so... no plural, no singular, not isolated... which is the correct 
&gt; "bucket\_type" to use then??
&gt; 
&gt; Thanks!
&gt; Alex
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

