---
title: "riak-admin status & /stats very slow"
description: ""
project: community
lastmod: 2012-07-29T04:56:39-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08113"
author_name: "Sebastian Cohnen"
project_section: "mailinglistitem"
sent_date: 2012-07-29T04:56:39-07:00
---


Hey list,

I just noticed that riak-admin status is very slow on my local machine and 
contains "{error,timeout}" for cpu\_\* fields. To verify that my homebrew 
installation isn't messed up, I downloaded riak-1.1.4 for OS X in 32 and 64 bit 
and started riak from there without changing anything in the config files. 
Everything seems to work fine (e.g. riak-admin test) and the node seems to be 
accessible.

riak-admin status however takes up to 50-60sec to complete (see [0] for its 
output), and the http://localhost:8098/stats times out every single time (also 
see [0]). The logs (and also the riak-admin status output) indicate that there 
is a problem reading the CPU usage, see [1].

I'm on OS X (10.8), MacBook Pro Retina (MacBookPro10,1), 16GB RAM and, as I 
said, riak 1.1.4. As far as I can tell, I get the same error from the 32 and 
64bit version.



Best

Sebastian


[0] https://gist.github.com/3197626

[1] crash.log

2012-07-29 13:12:39 =ERROR REPORT====
Error in process &lt;0.3246.0&gt; on node 'riak@127.0.0.1' with exit value: 
{{badmatch,{error,{fread,float}}},[{cpu\_sup,get\_uint32\_measurement,2},{cpu\_sup,measurement\_server\_loop,1}]}

console.log

2012-07-29 13:12:59.068 [error] &lt;0.1748.0&gt; webmachine error: path="/stats"
{error,{exit,{json\_encode,{bad\_term,{error,timeout}}},[{mochijson2,json\_encode,2},{mochijson2,'-json\_encode\_proplist/2-fun-0-',3},{lists,foldl,3},{mochijson2,json\_encode\_proplist,2},{riak\_kv\_wm\_stats,produce\_body,2},{webmachine\_resource,resource\_call,3},{webmachine\_resource,do,3},{webmachine\_decision\_core,resource\_call,1}]}}
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

