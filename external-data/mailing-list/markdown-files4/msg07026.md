---
title: "Re: Issues with Riak Control"
description: ""
project: community
lastmod: 2012-03-22T13:50:28-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07026"
mailinglist_parent_id: "msg07022"
author_name: "Jeffrey Massung"
project_section: "mailinglistitem"
sent_date: 2012-03-22T13:50:28-07:00
---


Replying now for posterity:

Riak Control uses pjax for templating and dynamic updating of page elements. 
It's a great tool. However, it also has a very small default ajax timeout for 
page requests, and when there's a timeout, the ajax callback returns a success 
code, but with an empty document. The Riak Control code makes an assumption 
about empty pages (to-be fixed), which then performs a redirect to the document 
in question.

Charles' issue has been corrected by modifying some JavaScript in Riak Control. 
We're going to be fixing this issue with something a bit more robust and and 
pushing it to GitHub.

Note: while we saw the reason for the problem quickly, Armon's email about 
timeouts is what led us down that path. A hearty thanks goes out to him for 
that insight! ;-)

--
Jeffrey Massung
Software Engineer
j...@basho.com

On Mar 22, 2012, at 9:28 AM, Jeffrey Massung wrote:

&gt; Charles, I've emailed you off-list with a whole set of things to test. We 
&gt; have an idea what the problem might be. For posterity, once a solution is 
&gt; arrived at, I'll post it back to the mailing list.
&gt; 
&gt; --
&gt; Jeffrey Massung
&gt; Software Engineer
&gt; j...@basho.com
&gt; 
&gt; On Mar 21, 2012, at 9:13 PM, char...@contentomni.com wrote:
&gt; 
&gt;&gt; Yes, it does return the css file.
&gt;&gt; 
&gt;&gt; The way I've setup my cluster is that I am using my private ip address 
&gt;&gt; (remember I'm using Rackspace Cloud Servers) for my riak\_core-&gt;http setting 
&gt;&gt; in app.config, and I am using my public ip address for the riak\_core-&gt;https 
&gt;&gt; setting.
&gt;&gt; 
&gt;&gt; Everything is working ok on the cluster, everything looks ok from riak-admin 
&gt;&gt; status. I just have the problem with riak control.
&gt;&gt; 
&gt;&gt; -----Original Message-----
&gt;&gt; From: "Jeffrey Massung" 
&gt;&gt; Sent: Wednesday, 21 March, 2012 11:59pm
&gt;&gt; To: char...@contentomni.com
&gt;&gt; Cc: "riak-users" 
&gt;&gt; Subject: Re: Issues with Riak Control
&gt;&gt; 
&gt;&gt; Charles,
&gt;&gt; 
&gt;&gt; A quick test... on the command prompt, does the following return the CSS 
&gt;&gt; file?
&gt;&gt; 
&gt;&gt; curl -k https://user:pass@localhost:8069/admin/ui/style.css
&gt;&gt; 
&gt;&gt; Note: change the credentials, ip, and port appropriately for your cluster 
&gt;&gt; setup. I'll look at something else for the URL redirection to the template 
&gt;&gt; folder - that shouldn't be happening (obviously).
&gt;&gt; 
&gt;&gt; --
&gt;&gt; Jeffrey Massung
&gt;&gt; Software Engineer
&gt;&gt; j...@basho.com
&gt;&gt; 
&gt;&gt; On Mar 21, 2012, at 4:32 PM, char...@contentomni.com wrote:
&gt;&gt; 
&gt;&gt;&gt; I tried Firefox 9, Safari 5, and the latest Chrome. I would hardly consider 
&gt;&gt;&gt; these old browsers. 
&gt;&gt;&gt; 
&gt;&gt;&gt; -----Original Message-----
&gt;&gt;&gt; From: "Jeffrey Massung" 
&gt;&gt;&gt; Sent: Wednesday, 21 March, 2012 11:22pm
&gt;&gt;&gt; To: char...@contentomni.com
&gt;&gt;&gt; Cc: "riak-users" 
&gt;&gt;&gt; Subject: Re: Issues with Riak Control
&gt;&gt;&gt; 
&gt;&gt;&gt; This is very much the behavior of older browsers not loading the CSS 
&gt;&gt;&gt; properly and displaying it. IE7, old versions of FireFox, etc. Have you 
&gt;&gt;&gt; tried Chrome, Safari, a latest FireFox, IE8+, etc?
&gt;&gt;&gt; 
&gt;&gt;&gt; --
&gt;&gt;&gt; Jeffrey Massung
&gt;&gt;&gt; Software Engineer
&gt;&gt;&gt; j...@basho.com
&gt;&gt;&gt; 
&gt;&gt;&gt; On Mar 21, 2012, at 4:09 PM, char...@contentomni.com wrote:
&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; I recently installed a Riak (1.1.1) Cluster on Rackspace Cloud Servers. 
&gt;&gt;&gt;&gt; Everything seems to be working ok.
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; I set up the configuration to enable Riak Control. However, I am having a 
&gt;&gt;&gt;&gt; few issues using it.
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; As soon as I login in it shows me the home page briefly and then it just 
&gt;&gt;&gt;&gt; displays the following in only text:
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; Current Snapshot...
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; Your cluster is healthy.
&gt;&gt;&gt;&gt; You currently have...
&gt;&gt;&gt;&gt; 0 Unreachable nodes
&gt;&gt;&gt;&gt; 0 Nodes marked as 'down'
&gt;&gt;&gt;&gt; 0 Nodes experiencing low memory
&gt;&gt;&gt;&gt; Nothing to worry about because Riak is your friend
&gt;&gt;&gt;&gt; Your cluster has problems.
&gt;&gt;&gt;&gt; The following nodes are currently unreachable:
&gt;&gt;&gt;&gt; The following nodes are currently marked as 'down':
&gt;&gt;&gt;&gt; The following nodes are currently experiencing low memory:
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; The URL has also changed from https://:8069/admin/ui/index.html to 
&gt;&gt;&gt;&gt; https://:8069/admin/ui/templates/snapshot.pjax. It's like it's 
&gt;&gt;&gt;&gt; forcing some kind of redirection and I don't know why.
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; Kindly assist,
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; Charles.
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt; 

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

