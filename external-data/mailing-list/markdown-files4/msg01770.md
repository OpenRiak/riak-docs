---
title: "Re: Install question about riak-erlang-client"
description: ""
project: community
lastmod: 2010-12-10T23:26:52-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01770"
mailinglist_parent_id: "msg01768"
author_name: "Xiaopong Tran"
project_section: "mailinglistitem"
sent_date: 2010-12-10T23:26:52-08:00
---


After upgrading R14B, I can now compile the client package, 
but I still get the same error when trying to write the object.

Could someone tell what's going on here?

Thanks

Xiaopong

On Fri, 2010-12-10 at 16:37 +0800, Xiaopong Tran wrote:
&gt; I have been working on MongoDB, and wanted to try out Riak as our
&gt; system is also in Erlang. But the first installation got me stuck
&gt; with an unusable client. 
&gt; 
&gt; The server is started and seems to run. So I grabbed the 
&gt; riakc-1.0.1 package, and it didn't even compile:
&gt; 
&gt; x...@shanghai:~/project-workspace/erlang/basho-riak-erlang-client-a1545e5$
&gt; make
&gt; ./rebar get-deps
&gt; ==&gt; basho-riak-erlang-client-a1545e5 (get-deps)
&gt; Pulling protobuffs from {hg,"http://bitbucket.org/basho/protobuffs",
&gt; "protobuffs-0.5.0"}
&gt; requesting all changes
&gt; adding changesets
&gt; adding manifests
&gt; adding file changes
&gt; added 91 changesets with 243 changes to 93 files (+2 heads)
&gt; 29 files updated, 0 files merged, 0 files removed, 0 files unresolved
&gt; ==&gt; protobuffs (get-deps)
&gt; ./rebar compile
&gt; ==&gt; protobuffs (compile)
&gt; Compiled src/pokemon\_pb.erl
&gt; Compiled src/protobuffs.erl
&gt; Compiled src/protobuffs\_parser.erl
&gt; Compiled src/protobuffs\_compile.erl
&gt; ==&gt; basho-riak-erlang-client-a1545e5 (compile)
&gt; Compiling src/riakclient.proto
&gt; src/riakc\_pb\_socket.erl:73: type ctx() undefined
&gt; src/riakc\_pb\_socket.erl:73: type rpb\_req() undefined
&gt; src/riakc\_pb\_socket.erl:78: type option() undefined
&gt; src/riakc\_pb\_socket.erl:79: Warning: type option() is unused
&gt; src/riakc\_pb\_socket.erl:87: Warning: type rpb\_req() is unused
&gt; src/riakc\_pb\_socket.erl:88: Warning: type ctx() is unused
&gt; make: \*\*\* [compile] Error 1
&gt; 
&gt; 
&gt; 
&gt; So I grabbed the repository with the command
&gt; 
&gt; hg clone http://bitbucket.org/basho/riak-erlang-client
&gt; 
&gt; and compiled it. Everything seemed to be ok, until I started
&gt; running a connection, and here's I got:
&gt; 
&gt; 
&gt; 
&gt; x...@shanghai:~/project-workspace/erlang/riak-erlang-client/ebin$ erl -pa
&gt; `pwd`
&gt; Erlang R13B03 (erts-5.7.4) [source] [64-bit] [smp:2:2] [rq:2]
&gt; [async-threads:0] [hipe] [kernel-poll:false]
&gt; 
&gt; Eshell V5.7.4 (abort with ^G)
&gt; 1&gt; code:which(riakc\_pb\_socket).
&gt; "/home/xp/project-workspace/erlang/riak-erlang-client/ebin/riakc\_pb\_socket.beam"
&gt; 2&gt; {ok, Pid} = riakc\_pb\_socket:start\_link("127.0.0.1", 8087).
&gt; {ok,&lt;0.38.0&gt;}
&gt; 3&gt; riakc\_pb\_socket:ping(Pid).
&gt; pong
&gt; 4&gt; Object = riakc\_obj:new(&lt;&lt;"groceries"&gt;&gt;, &lt;&lt;"mine"&gt;&gt;, &lt;&lt;"egg &
&gt; bacon"&gt;&gt;).
&gt; {riakc\_obj,&lt;&lt;"groceries"&gt;&gt;,&lt;&lt;"mine"&gt;&gt;,undefined,[],
&gt; undefined,&lt;&lt;"egg & bacon"&gt;&gt;}
&gt; 5&gt; riakc\_pb\_socket:put(Pid, Object).
&gt; 
&gt; =ERROR REPORT==== 10-Dec-2010::15:45:55 ===
&gt; \*\* Generic server &lt;0.38.0&gt; terminating 
&gt; \*\* Last message in was {req,
&gt; 
&gt; {rpbputreq,&lt;&lt;"groceries"&gt;&gt;,&lt;&lt;"mine"&gt;&gt;,undefined,
&gt; {rpbcontent,&lt;&lt;"egg & bacon"&gt;&gt;,undefined,
&gt; 
&gt; undefined,undefined,undefined,undefined,
&gt; undefined,undefined,undefined},
&gt; undefined,undefined,undefined},
&gt; 60000}
&gt; \*\* When Server state ==
&gt; {state,"127.0.0.1",8087,false,false,#Port&lt;0.627&gt;,
&gt; undefined,
&gt; {[],[]},
&gt; 1,[],infinity,100}
&gt; \*\* Reason for termination == 
&gt; \*\* {'module could not be loaded',
&gt; [{protobuffs,encode,[1,&lt;&lt;"groceries"&gt;&gt;,bytes]},
&gt; {riakclient\_pb,iolist,2},
&gt; {riakc\_pb,encode,1},
&gt; {riakc\_pb\_socket,send\_request,2},
&gt; {riakc\_pb\_socket,handle\_call,3},
&gt; {gen\_server,handle\_msg,5},
&gt; {proc\_lib,init\_p\_do\_apply,3}]}
&gt; \*\* exception exit: undef
&gt; in function protobuffs:encode/3
&gt; called as protobuffs:encode(1,&lt;&lt;"groceries"&gt;&gt;,bytes)
&gt; in call from riakclient\_pb:iolist/2
&gt; in call from riakc\_pb:encode/1
&gt; in call from riakc\_pb\_socket:send\_request/2
&gt; in call from riakc\_pb\_socket:handle\_call/3
&gt; in call from gen\_server:handle\_msg/5
&gt; in call from proc\_lib:init\_p\_do\_apply/3
&gt; 6&gt; {ok, O} = riakc\_pb\_socket:get(Pid, &lt;&lt;"groceries"&gt;&gt;, &lt;&lt;"mine"&gt;&gt;).
&gt; \*\* exception exit: {noproc,
&gt; {gen\_server,call,
&gt; [&lt;0.38.0&gt;,
&gt; 
&gt; {req,{rpbgetreq,&lt;&lt;"groceries"&gt;&gt;,&lt;&lt;"mine"&gt;&gt;,undefined},60000},
&gt; infinity]}}
&gt; in function gen\_server:call/3
&gt; 7&gt; Object.
&gt; {riakc\_obj,&lt;&lt;"groceries"&gt;&gt;,&lt;&lt;"mine"&gt;&gt;,undefined,[],
&gt; undefined,&lt;&lt;"egg & bacon"&gt;&gt;}
&gt; 8&gt; riakc\_obj:get\_value(Object).
&gt; \*\* exception throw: no\_value
&gt; in function riakc\_obj:get\_value/1
&gt; 9&gt; riakc\_obj:get\_content\_type(Object).
&gt; \*\* exception throw: no\_metadata
&gt; in function riakc\_obj:get\_metadata/1
&gt; in call from riakc\_obj:get\_content\_type/1
&gt; 10&gt; 
&gt; 
&gt; 
&gt; 
&gt; So, connection to the server seemed to be fine, but then nothing
&gt; else worked.
&gt; 
&gt; What gives? I'm running Ubuntu 10.10.
&gt; 
&gt; Xiaopong
&gt; 
&gt; 



\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

