---
title: "Re: Riak mapreduce error"
description: ""
project: community
lastmod: 2017-02-08T08:15:47-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17939"
mailinglist_parent_id: "msg17942"
author_name: "Magnus Kessler"
project_section: "mailinglistitem"
sent_date: 2017-02-08T08:15:47-08:00
---


On 7 February 2017 at 03:50, raghuveer sj  wrote:

&gt; Hi Magnus,
&gt;
&gt; Previously i had used developer branch as master build was failing. Now
&gt; with the latest changes i see :
&gt;
&gt; 10&gt; riakc\_pb\_socket:mapred\_bucket(Riak, &lt;&lt;"training"&gt;&gt;, [{map, {qfun,
&gt; ReFun}, Re, true}]).
&gt; {error,&lt;&lt;"{\"phase\":0,\"error\":\"{badfun,#Fun 50752066&gt;}\",\"input\":\"{ok,{r\_object,&lt;&lt;\\\"training\\\"&gt;&gt;,
&gt; &lt;&lt;\\\"bar\\\"&gt;&gt;"...&gt;&gt;}
&gt;
&gt; Please help me out.
&gt;
&gt; Regards,
&gt; Raghuveer
&gt;
&gt;
&gt;
Hi Raghuveer,

I have been able to reproduce the error message you are seeing after I
built riak-erlang-client with OTP-19. It appears that there are some
incompatibilities between newer OTP versions and the map-reduce code. I
haven't yet had the time to dig deeper, but suspect that changes in
Erlang's string handling may play a role.

Please try to re-compile the Erlang client with OTP-16, and let me know if
you can successfully run the example code you posted earlier under OTP-16
(e.g. start Erlang with "$(riak ertspath)/erl").

Kind Regards,

Magnus


-- 
Magnus Kessler
Client Services Engineer
Basho Technologies Limited

Registered Office - 8 Lincolnâ€™s Inn Fields London WC2A 3BP Reg 07970431
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

