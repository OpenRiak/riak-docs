---
title: "Re: [SOLR] different number of result on same query"
description: ""
project: community
lastmod: 2014-10-22T11:52:44-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15067"
mailinglist_parent_id: "msg15066"
author_name: "Eric Redmond"
project_section: "mailinglistitem"
sent_date: 2014-10-22T11:52:44-07:00
---


Yes, that should resolve the issue. Thanks for the feedback.



On Oct 22, 2014, at 11:50 AM, Alexander Popov  wrote:

&gt; Initially it was 1 node, upgraded from 1.4.8.
&gt; Than I add second node, and than added another 3 nodes before transfer to 
&gt; second is finished.
&gt; 
&gt; There was several hangs while transferring between nodes, and I was restart 
&gt; they several times.
&gt; 
&gt; Should re-save problematic records helps with this issue?
&gt; 
&gt; On Wed, Oct 22, 2014 at 10:42 PM, Eric Redmond  wrote:
&gt; Have you added/removed nodes from the cluster, or did you start populating 
&gt; data before the cluster was done being built? You may have ran into a known 
&gt; handoff bug that we're currently working on.
&gt; 
&gt; Eric
&gt; 
&gt; 
&gt; On Oct 22, 2014, at 11:32 AM, Alexander Popov  wrote:
&gt; 
&gt;&gt; Also if run query with specific id, on internal\_solr directly on each host, 
&gt;&gt; for this problematic id it founds only on 2 hosts, but other id's found on 3 
&gt;&gt; of them.
&gt;&gt; 
&gt;&gt; On Wed, Oct 22, 2014 at 10:18 PM, Alexander Popov  
&gt;&gt; wrote:
&gt;&gt; RIAK 2.0.1, 5 nodes on different hosts
&gt;&gt; 
&gt;&gt; query: 
&gt;&gt; comments\_index?q=owner:6d87f18a3dca4a60b0fc385b1f46c165%20AND%20target:35975db44af44b2494751abddfcfe466&fl=id&wt=json&rows=15
&gt;&gt; 
&gt;&gt; RESULT1:
&gt;&gt; {
&gt;&gt; responseHeader: {
&gt;&gt; status: 0,
&gt;&gt; QTime: 3,
&gt;&gt; params: {
&gt;&gt; 10.0.0.150:8093: "\_yz\_pn:56 OR \_yz\_pn:41 OR \_yz\_pn:26 OR \_yz\_pn:11",
&gt;&gt; shards: 
&gt;&gt; "10.0.0.150:8093/internal\_solr/comments\_index,10.0.0.151:8093/internal\_solr/comments\_index,10.0.0.152:8093/internal\_solr/comments\_index,10.0.0.153:8093/internal\_solr/comments\_index,10.0.0.218:8093/internal\_solr/comments\_index",
&gt;&gt; fl: "id",
&gt;&gt; 10.0.0.152:8093: "\_yz\_pn:63 OR \_yz\_pn:53 OR \_yz\_pn:38 OR \_yz\_pn:23 OR 
&gt;&gt; \_yz\_pn:8",
&gt;&gt; q: "owner:6d87f18a3dca4a60b0fc385b1f46c165 AND 
&gt;&gt; target:35975db44af44b2494751abddfcfe466",
&gt;&gt; 10.0.0.218:8093: "(\_yz\_pn:60 AND (\_yz\_fpn:60)) OR \_yz\_pn:50 OR \_yz\_pn:35 OR 
&gt;&gt; \_yz\_pn:20 OR \_yz\_pn:5",
&gt;&gt; wt: "json",
&gt;&gt; 10.0.0.153:8093: "\_yz\_pn:59 OR \_yz\_pn:44 OR \_yz\_pn:29 OR \_yz\_pn:14",
&gt;&gt; 10.0.0.151:8093: "\_yz\_pn:47 OR \_yz\_pn:32 OR \_yz\_pn:17 OR \_yz\_pn:2",
&gt;&gt; rows: "15"
&gt;&gt; }
&gt;&gt; },
&gt;&gt; response: {
&gt;&gt; numFound: 12,
&gt;&gt; start: 0,
&gt;&gt; maxScore: 6.72534,
&gt;&gt; docs: [
&gt;&gt; .....
&gt;&gt; 
&gt;&gt; 
&gt;&gt; RESULT2:
&gt;&gt; {
&gt;&gt; responseHeader: {
&gt;&gt; status: 0,
&gt;&gt; QTime: 3,
&gt;&gt; params: {
&gt;&gt; 10.0.0.150:8093: "\_yz\_pn:61 OR \_yz\_pn:46 OR \_yz\_pn:31 OR \_yz\_pn:16 OR 
&gt;&gt; \_yz\_pn:1",
&gt;&gt; shards: 
&gt;&gt; "10.0.0.150:8093/internal\_solr/comments\_index,10.0.0.151:8093/internal\_solr/comments\_index,10.0.0.152:8093/internal\_solr/comments\_index,10.0.0.153:8093/internal\_solr/comments\_index,10.0.0.218:8093/internal\_solr/comments\_index",
&gt;&gt; fl: "id",
&gt;&gt; 10.0.0.152:8093: "\_yz\_pn:58 OR \_yz\_pn:43 OR \_yz\_pn:28 OR \_yz\_pn:13",
&gt;&gt; q: "owner:6d87f18a3dca4a60b0fc385b1f46c165 AND 
&gt;&gt; target:35975db44af44b2494751abddfcfe466",
&gt;&gt; 10.0.0.218:8093: "\_yz\_pn:55 OR \_yz\_pn:40 OR \_yz\_pn:25 OR \_yz\_pn:10",
&gt;&gt; wt: "json",
&gt;&gt; 10.0.0.153:8093: "\_yz\_pn:49 OR \_yz\_pn:34 OR \_yz\_pn:19 OR \_yz\_pn:4",
&gt;&gt; 10.0.0.151:8093: "(\_yz\_pn:62 AND (\_yz\_fpn:62)) OR \_yz\_pn:52 OR \_yz\_pn:37 OR 
&gt;&gt; \_yz\_pn:22 OR \_yz\_pn:7",
&gt;&gt; rows: "15"
&gt;&gt; }
&gt;&gt; },
&gt;&gt; response: {
&gt;&gt; numFound: 11,
&gt;&gt; start: 0,
&gt;&gt; maxScore: 6.72534,
&gt;&gt; docs: [
&gt;&gt; ....
&gt;&gt; 
&gt;&gt; 
&gt;&gt; Does it not guaranteed that all records will be found each time? 
&gt;&gt; also, seems not random record missed, each time specific one
&gt;&gt; if I run query for this specific record with 
&gt;&gt; q=id:50473c1239934ef29f24b87f5a6d1ca2
&gt;&gt; it is random return or not return this record
&gt;&gt; 
&gt;&gt; 
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; 
&gt; 

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

