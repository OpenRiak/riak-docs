---
title: "Re: Performance issues with small dataset"
description: ""
project: community
lastmod: 2011-01-13T07:37:27-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01971"
mailinglist_parent_id: "msg01970"
author_name: "nx"
project_section: "mailinglistitem"
sent_date: 2011-01-13T07:37:27-08:00
---


I think you can avoid listing all keys in a bucket by maintaining a
separate object that contains a list of the current keys. I usually
append the keys to a "/bucket/\_collection" object.

On Thu, Jan 13, 2011 at 9:27 AM, Sean Cribbs  wrote:
&gt;&gt;
&gt;&gt; Unfortunately, even if additional nodes yield linear performance
&gt;&gt; gains, the m/r overhead seems very large -- if I'm getting 1.5 seconds
&gt;&gt; to process 1,000 items on one node, it seems apparent that I should
&gt;&gt; get roughtly 1.5 seconds to process 3,000 items on 3 nodes, which
&gt;&gt; still is awfully slow.
&gt;&gt;
&gt;&gt; Do you know how Riak compares to HBase, MongoDB or Cassandra for large
&gt;&gt; dataset processing and analysis with m/r, when talking hundreds of
&gt;&gt; millions, or even billions of keys? It would seem that key traversal
&gt;&gt; performance would preventing Riak from competing in that space. Maybe
&gt;&gt; you could do something with Riak Search, but I'm not sure if it would
&gt;&gt; comparable.
&gt;
&gt; To be fair, you can't do a microbenchmark and then try to extrapolate it to 
&gt; large datasets; things change at scale. Also, key-listing has been a known 
&gt; limitation of Riak for a long time, and one we have been quite vocal about. 
&gt; There have been improvements recently, but it's still an O(N) computation 
&gt; where N is the total number of keys stored in the cluster. Therefore, it's 
&gt; important to structure your data such that you limit the use of key lists. 
&gt; Compare performance after you have done that, and run your benchmark on 
&gt; something other than a single node (4 or more in a cluster is best), with a 
&gt; dataset that approximates the target size.
&gt;
&gt; Sean Cribbs 
&gt; Developer Advocate
&gt; Basho Technologies, Inc.
&gt; http://basho.com/
&gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

