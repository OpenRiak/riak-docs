---
title: "Re: Riak Search and Yokozuna Backup Strategy"
description: ""
project: community
lastmod: 2014-01-27T12:07:52-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13495"
mailinglist_parent_id: "msg13494"
author_name: "Elias Levy"
project_section: "mailinglistitem"
sent_date: 2014-01-27T12:07:52-08:00
---


On Mon, Jan 27, 2014 at 11:57 AM, Matthew Von-Maszewski
wrote:

&gt;
&gt; Google's designed leveldb to always assume it was not cleanly shutdown.
&gt; If the startup can read the most recent MANIFEST file, leveldb cleans up
&gt; the rest of the mess.
&gt;
&gt; However, using the backup strategy previously discussed (backup sst\_?
&gt; directories numerically … rsync or tar) creates a scenario where the
&gt; MANIFEST file is likely incorrect in a manner that leveldb will not detect
&gt; (hmm … maybe it could detect it but no one thought to add a test). That is
&gt; why we always recommend (require!) that you manually run repair after a
&gt; restore.
&gt;

So, yes, but its not sufficient. Got it. Thanks.

And I assume that currently requires attaching to the Riak console and
executing something like:

eleveldb:repair("/var/db/riak/leveldb/442446784738847563128068650529343492278651453440",
[]).

for every vnode LevelDB in any eleveldb backend?
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

