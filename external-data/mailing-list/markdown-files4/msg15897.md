---
title: "Re: putObjectPolicy fails due to wrong Content-Type"
description: ""
project: community
lastmod: 2015-03-13T10:48:15-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15897"
mailinglist_parent_id: "msg15896"
author_name: "Patrick F. Marques"
project_section: "mailinglistitem"
sent_date: 2015-03-13T10:48:15-07:00
---


As far as I can see there is no way to do that, and I think that is a bug
of SDK... to temporarily fix that was support a "fake member" on method
(here
https://github.com/aws/aws-sdk-js/blob/master/apis/s3-2006-03-01.min.json#L2094)
just like this one (
https://github.com/aws/aws-sdk-js/blob/master/apis/s3-2006-03-01.min.json#L157).
Is just a simple trick while there is no official solution.
Maybe I should open an issue on AWS NodeJS SDK I lets see what they say
about this.

On Fri, Mar 13, 2015 at 5:38 PM, Matthew Brender  wrote:

&gt; Hi Patrick,
&gt;
&gt; You'll need to investigate whether you can define a content type through
&gt; the SDK. The use of application/octet-stream is defined as "arbitrary
&gt; binary data" in RFC 2046 as explained well here [1]. I'm not sure if you
&gt; have the ability to define the content type and have not done so or whether
&gt; the SDK is at fault.
&gt;
&gt; [1]
&gt; http://stackoverflow.com/questions/20508788/do-i-need-content-type-application-octet-stream-for-file-download
&gt; ᐧ
&gt;
&gt; \*Matt Brender | Developer Advocacy Lead\*
&gt; Basho Technologies
&gt; t: @mjbrender 
&gt; c: +1 617.817.3195
&gt;
&gt; On Fri, Mar 13, 2015 at 10:52 AM, Patrick F. Marques &lt;
&gt; patrickfmarq...@gmail.com&gt; wrote:
&gt;
&gt;&gt; Just the link to the issue https://github.com/basho/riak\_cs/issues/1091
&gt;&gt;
&gt;&gt; @Mathew do you know if AWS NodeJS SDK is doing it wrong so I
&gt;&gt; can also open an issue on amazon repo?
&gt;&gt;
&gt;&gt; On Fri, Mar 13, 2015 at 2:41 PM, Matthew Brender 
&gt;&gt; wrote:
&gt;&gt;
&gt;&gt;&gt; Hi Patrick,
&gt;&gt;&gt;
&gt;&gt;&gt; I'm glad you figured out the root cause here. You bring up a great
&gt;&gt;&gt; opportunity to improve on error responses too. Please open a GitHub issue
&gt;&gt;&gt; for this and any similar observations so PM can keep track of it.
&gt;&gt;&gt;
&gt;&gt;&gt; Thanks,
&gt;&gt;&gt; Matt
&gt;&gt;&gt;
&gt;&gt;&gt; ᐧ
&gt;&gt;&gt;
&gt;&gt;&gt; \*Matt Brender | Developer Advocacy Lead\*
&gt;&gt;&gt; Basho Technologies
&gt;&gt;&gt; t: @mjbrender 
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; On Wed, Mar 11, 2015 at 2:32 PM, Patrick F. Marques &lt;
&gt;&gt;&gt; patrickfmarq...@gmail.com&gt; wrote:
&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Hi,
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Hi, I'm trying to use node-aws-sdk to set bucket policies but the SDK
&gt;&gt;&gt;&gt; sends the request with the wrong Content-Type, "application/octet-stream".
&gt;&gt;&gt;&gt; I'm not sure if there is something wrong on my side or if AWS S3 also
&gt;&gt;&gt;&gt; supports this since it is its SDK.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; To find the problem I was digging in the SDK code because the server
&gt;&gt;&gt;&gt; response is just a 500 Internal Server Error. It could be nice to return at
&gt;&gt;&gt;&gt; least something like "Unaccepted Content-Type in request".
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Regards,
&gt;&gt;&gt;&gt; Patrick Marques
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

