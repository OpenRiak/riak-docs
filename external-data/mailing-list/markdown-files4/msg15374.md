---
title: "Re: Memory-backend TTL"
description: ""
project: community
lastmod: 2014-12-16T12:52:48-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15374"
mailinglist_parent_id: "msg15373"
author_name: "Luke Bakken"
project_section: "mailinglistitem"
sent_date: 2014-12-16T12:52:48-08:00
---


Hi Juan,

Please see: https://github.com/basho/riak\_kv/issues/1064

I have also forwarded this on internally.

--
Luke Bakken
Engineer / CSE
lbak...@basho.com


On Tue, Dec 16, 2014 at 10:52 AM, Juan Luis Francés
 wrote:
&gt; Hello.
&gt;
&gt; Do you have any update about this issue? I am affected by the same memory 
&gt; leak. Sadly, this problem does the Riak memory backend useless in production.
&gt;
&gt; You can reproduce it with this dirty script (be careful, it is resource 
&gt; intensive):
&gt;
&gt; https://gist.github.com/indpnday/76d99c5852e0100c5a04
&gt;
&gt; - 1 Riak node 2.0.1.
&gt; - riak.conf:
&gt;
&gt; buckets.default.n\_val = 1
&gt; buckets.default.last\_write\_wins = true
&gt; buckets.default.r = 1
&gt; buckets.default.w = 1
&gt; multi\_backend.memory.storage\_backend = memory
&gt; multi\_backend.memory.memory\_backend.ttl = 90s
&gt; multi\_backend.memory.memory\_backend.max\_memory\_per\_vnode = 250MB
&gt;
&gt;
&gt; # curl http://127.0.0.1:8098/buckets/memory/props
&gt; {"props":{"allow\_mult":false,"backend”:"memory","basic\_quorum":false,"big\_vclock":50,"chash\_keyfun":{"mod":"riak\_core\_util","fun":"chash\_std\_keyfun"},"dvv\_enabled":false,"dw":"quorum","last\_write\_wins":true,"linkfun":{"mod":"riak\_kv\_wm\_link\_walker","fun":"mapreduce\_linkfun"},"n\_val":1,"name”:"memory","notfound\_ok":true,"old\_vclock":86400,"postcommit":[],"pr":0,"precommit":[],"pw":0,"r":1,"rw":"quorum","small\_vclock":50,"w":1,"young\_vclock":20}}
&gt;
&gt;
&gt; Is there any bug report opened in github where to follow this issue?
&gt;
&gt; Best regards,
&gt; Juan Luis Francés

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

