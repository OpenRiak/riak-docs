---
title: "Re: Computing value size"
description: ""
project: community
lastmod: 2013-04-26T04:15:48-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg10984"
mailinglist_parent_id: "msg10983"
author_name: "Olav Frengstad"
project_section: "mailinglistitem"
sent_date: 2013-04-26T04:15:48-07:00
---


Hey Julien,

You can get a rough size pr object by using the map\_datasize/3 function in
riak\_mapreduce\_utils[1].
You need to take into account things like siblings, bucket related data if
you want a more precise estimate.

[1] https://github.com/whitenode/riak\_mapreduce\_utils

Olav


2013/4/26 Julien Genestoux 

&gt; Hello,
&gt;
&gt; We (Superfeedr) are currently diving into Riak to make it our key value
&gt; store for our Google Reader API
&gt; replacement.
&gt;
&gt; So far, so good. However, as we're doing tests, we're trying to evaluate
&gt; the size that we'll need from Riak.
&gt; For that, we obviously need the average size of a value stored.
&gt;
&gt; Of course we can run "estimates", but the data we store is actually quite
&gt; diverse and don't have a consistent
&gt; schema, so we thought it's probably easier/better to take "real" data into
&gt; account rather than theoretical one.
&gt;
&gt; We tried the top down approach: size of disk space/(n\_val \* number of
&gt; keys) but that's not ideal because
&gt; we store different types of objects too...
&gt;
&gt; Is there any way to do that from a bottom up approach with a map/reduce
&gt; job?
&gt;
&gt;
&gt; Thanks!
&gt;
&gt;
&gt; --
&gt; \*Got a blog? Make following it simple: https://www.subtome.com/
&gt; \*
&gt;
&gt; Julien Genestoux,
&gt; http://twitter.com/julien51
&gt;
&gt; +1 (415) 830 6574
&gt; +33 (0)9 70 44 76 29
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
&gt;


-- 
Med Vennlig Hilsen
Olav Frengstad

Systemutvikler // FWT
+47 920 42 090
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

