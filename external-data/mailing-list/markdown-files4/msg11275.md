---
title: "Re: Riak will not work remote from ec2"
description: ""
project: community
lastmod: 2013-06-13T18:52:56-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11275"
mailinglist_parent_id: "msg11274"
author_name: "David Montgomery"
project_section: "mailinglistitem"
sent_date: 2013-06-13T18:52:56-07:00
---


The below does to make sense to me.

root@ip-10-204-150-22:/var/log/riak# riak console
Attempting to restart script through sudo -H -u riak
!!!!
!!!! WARNING: ulimit -n is 1024; 4096 is the recommended minimum.
!!!!
Exec: /usr/lib/riak/erts-5.9.1/bin/erlexec -boot
/usr/lib/riak/releases/1.3.1/riak -embedded -config
/etc/riak/app.config -pa
/usr/lib/riak/lib/basho-patches -args\_file /etc/riak/vm.args --
console
Root: /usr/lib/riak
{error\_logger,{{2013,6,14},{1,49,23}},"Protocol: ~p: register error:
~p~n",["inet\_tcp",{{badmatch,{error,duplicate\_name}},[{inet\_tcp\_dist,listen,1,[{file,"inet\_tcp\_dist.erl"},{line,70}]},{net\_kernel,start\_protos,4,[{file,"net\_kernel.erl"},{line,1314}]},{net\_kernel,start\_protos,3,[{file,"net\_kernel.erl"},{line,1307}]},{net\_kernel,init\_node,2,[{file,"net\_kernel.erl"},{line,1197}]},{net\_kernel,init,1,[{file,"net\_kernel.erl"},{line,357}]},{gen\_server,init\_it,6,[{file,"gen\_server.erl"},{line,304}]},{proc\_lib,init\_p\_do\_apply,3,[{file,"proc\_lib.erl"},{line,227}]}]}]}
{error\_logger,{{2013,6,14},{1,49,23}},crash\_report,[[{initial\_call,{net\_kernel,init,['Argument\_\_1']}},{pid,&lt;0.21.0&gt;},{registered\_name,[]},{error\_info,{exit,{error,badarg},[{gen\_server,init\_it,6,[{file,"gen\_server.erl"},{line,320}]},{proc\_lib,init\_p\_do\_apply,3,[{file,"proc\_lib.erl"},{line,227}]}]}},{ancestors,[net\_sup,kernel\_sup,&lt;0.10.0&gt;]},{messages,[]},{links,[#Port&lt;0.197&gt;,&lt;0.18.0&gt;]},{dictionary,[{longnames,true}]},{trap\_exit,true},{status,running},{heap\_size,610},{stack\_size,24},{reductions,528}],[]]}
{error\_logger,{{2013,6,14},{1,49,23}},supervisor\_report,[{supervisor,{local,net\_sup}},{errorContext,start\_error},{reason,{'EXIT',nodistribution}},{offender,[{pid,undefined},{name,net\_kernel},{mfargs,{net\_kernel,start\_link,[['
riak@184.73.64.170
',longnames]]}},{restart\_type,permanent},{shutdown,2000},{child\_type,worker}]}]}
{error\_logger,{{2013,6,14},{1,49,23}},supervisor\_report,[{supervisor,{local,kernel\_sup}},{errorContext,start\_error},{reason,shutdown},{offender,[{pid,undefined},{name,net\_sup},{mfargs,{erl\_distribution,start\_link,[]}},{restart\_type,permanent},{shutdown,infinity},{child\_type,supervisor}]}]}
{error\_logger,{{2013,6,14},{1,49,23}},std\_info,[{application,kernel},{exited,{shutdown,{kernel,start,[normal,[]]}}},{type,permanent}]}
{"Kernel pid
terminated",application\_controller,"{application\_start\_failure,kernel,{shutdown,{kernel,start,[normal,[]]}}}"}

Crash dump was written to: /var/log/riak/erl\_crash.dump
Kernel pid terminated (application\_controller)
({application\_start\_failure,kernel,{shutdown,{kernel,start,[normal,[]]}}})



On Fri, Jun 14, 2013 at 9:26 AM, David Montgomery  wrote:

&gt; Ps
&gt;
&gt; Wen i did riak-admin reip riak@127.0.0.1 r...@xxx.xxx.xxx.xxx
&gt;
&gt; Attempting to restart script through sudo -H -u riak
&gt; Backed up existing ring file to
&gt; "/var/lib/riak/ring/riak\_core\_ring.default.20130614011624.BAK"
&gt; New ring file written to
&gt; "/var/lib/riak/ring/riak\_core\_ring.default.20130614012331"
&gt;
&gt;
&gt;
&gt; riak ping
&gt; Attempting to restart script through sudo -H -u riak
&gt; !!!!
&gt; !!!! WARNING: ulimit -n is 1024; 4096 is the recommended minimum.
&gt; !!!!
&gt; Node 'r...@xxx.xxx.xxx.xxx' not responding to pings.
&gt;
&gt;
&gt; riak start
&gt; Attempting to restart script through sudo -H -u riak
&gt; !!!!
&gt; !!!! WARNING: ulimit -n is 1024; 4096 is the recommended minimum.
&gt; !!!!
&gt; Riak failed to start within 15 seconds,
&gt; see the output of 'riak console' for more information.
&gt; If you want to wait longer, set the environment variable
&gt; WAIT\_FOR\_ERLANG to the number of seconds to wait.
&gt;
&gt;
&gt; Where is the missing documentation?
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt; On Fri, Jun 14, 2013 at 9:02 AM, David Montgomery &lt;
&gt; davidmontgom...@gmail.com&gt; wrote:
&gt;
&gt;&gt; Hi,
&gt;&gt;
&gt;&gt; Why will riak not work on ec2 with a single node?
&gt;&gt;
&gt;&gt; 1) I have my sec groups open for all ports. This should be a no brainier.
&gt;&gt;
&gt;&gt; 2) Using the python client =
&gt;&gt; riak.RiakClient(host=riak\_host,port=8087,transport\_class=riak.transports.pbc.RiakPbcTransport)
&gt;&gt; where riak\_host is the public ip address of the machine
&gt;&gt;
&gt;&gt; 3) I when into app.config vm.args and replaces 127.0.0.1 in the relevant
&gt;&gt; places with the public ip address
&gt;&gt;
&gt;&gt; 4) I restarted riak
&gt;&gt;
&gt;&gt; 5) Yet..I cant remote write to riak.
&gt;&gt;
&gt;&gt; I am using the latest version of rial for ubuntu 12.04 installed wit the
&gt;&gt; deb package.
&gt;&gt;
&gt;&gt; So...what is the issue?
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; Thanks
&gt;&gt;
&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

