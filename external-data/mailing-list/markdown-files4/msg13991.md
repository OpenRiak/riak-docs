---
title: "Re: http connections and CLOSE_WAIT"
description: ""
project: community
lastmod: 2014-04-03T12:23:18-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13991"
mailinglist_parent_id: "msg13988"
author_name: "Matthew Von-Maszewski"
project_section: "mailinglistitem"
sent_date: 2014-04-03T12:23:18-07:00
---


Here we go, better description of SO\_LINGER â€¦ this rings a bell. Lets you set 
the time allowed for clean versus abrupt connection close. The side effect is 
that your connection structures can get cleaned up quicker.

Still looking for validation of Squid / Apache using this to manage poorly 
behaving clients.

Matthew

On Apr 3, 2014, at 11:10 AM, Sean Cribbs  wrote:

&gt; This is likely something you can tweak with sysctl. The HTTP interface 
&gt; already has SO\_REUSEADDR on. This may be of help:
&gt; 
&gt; http://tux.hk/index.php?m=05&y=09&entry=entry090521-111844
&gt; 
&gt; 
&gt; On Thu, Apr 3, 2014 at 10:02 AM, Sean Allen  
&gt; wrote:
&gt; We are using pre11 right now.
&gt; 
&gt; When we open http connections, they hang around for a long time in CLOSE\_WAIT 
&gt; which results in really spiky performance. When the connections close, its 
&gt; fast, then they build up again,
&gt; 
&gt; Is there something that needs to be configured w/ riak to get it to reuse the 
&gt; sockets and not sit in close wait?
&gt; 
&gt; 
&gt; -- 
&gt; 
&gt; Ce n'est pas une signature
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; 
&gt; 
&gt; 
&gt; 
&gt; -- 
&gt; Sean Cribbs 
&gt; Software Engineer
&gt; Basho Technologies, Inc.
&gt; http://basho.com/
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

