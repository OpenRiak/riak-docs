---
title: "Re: Custom hashing (partitioning) functions"
description: ""
project: community
lastmod: 2014-01-21T07:28:19-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13425"
mailinglist_parent_id: "msg13417"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2014-01-21T07:28:19-08:00
---


Sargun,

That might indeed be a bug. Would you file it on the issue tracker?
https://github.com/basho/riak\_kv/issues


On Mon, Jan 20, 2014 at 3:08 PM, Sargun Dhillon  wrote:

&gt; So, I don't know how many people are aware of if, but Riak supports
&gt; custom hashing (partitioning) functions. It's exposed as a bucket
&gt; property (chash\_keyfun), in which you can deploy your own code to hash
&gt; keys to ensure data locality to specific vnodes. This can come in
&gt; handy when doing custom mapreduce jobs, riak\_pipe, or riak\_core
&gt; applications.
&gt;
&gt; After playing around with this feature set quite a bit recently, it
&gt; seems like there are some places that don't entirely respect this.
&gt; Specifically, the place where I'm looking at right now is
&gt; riak\_kv\_pipe\_get, when try\_preflist gets called (if try\_partition
&gt; falls through), it falls back to riak\_core\_util:chash\_key (L188), as
&gt; opposed to looking at the riak\_pipe chashfun, or the bucket chashfun.
&gt; What's the approach that most people have taken here with custom hash
&gt; functions?
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;



-- 
Sean Cribbs 
Software Engineer
Basho Technologies, Inc.
http://basho.com/
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

