---
title: "Re: building riak on FreeBSD9"
description: ""
project: community
lastmod: 2012-03-01T04:29:28-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06803"
mailinglist_parent_id: "msg06802"
author_name: "Peta Bogdan"
project_section: "mailinglistitem"
sent_date: 2012-03-01T04:29:28-08:00
---


Hello,

I had a similar issue with OpenBSD 5.0/amd64/riak-1.1.0

But I have took a manual approach on this situation, namely:

1. got to riak top level dir
2. cd deps/eleveldb/c\_src/leveldb
3. sh build\_detect\_platform
 this will generate build\_config.mk for your platform
4. edit build\_config.mk and add -fPIC to the end of the first line unless
is not there
5. comment out all lines in Makefile that generate those errors - we don't
need them as they try to detect other platforms, and try to figure out if
snappy is there or not - i ignored snappy altogether, but that depends on
your needs
6. gmake
7. and see what happens next

I might have had done some other things (apart form OpenBSD specific ones)
but I should remember them as the problems arise.

hope this helps,

Bogdan
On Thu, Mar 1, 2012 at 1:22 PM, Norman Khine  wrote:

&gt; Hello again,
&gt; sorry to keep posting new threads, but i don't see the original post i
&gt; made for this.
&gt;
&gt; anyhow, i followed couple of suggestions from the mailing list and
&gt; this blog post: http://blog.harperdog.com/2010/12/17/riak-on-freebsd/,
&gt; make rel work, but now get this error after doing:
&gt;
&gt; 282 git clone git://github.com/basho/riak.git
&gt; 283 cd riak
&gt; 292 git branch adt-bsd-support origin/adt-bsd-support
&gt; 293 git checkout adt-bsd-support
&gt; 294 git log
&gt; 295 make rel
&gt;
&gt; ./rebar compile generate
&gt; ==&gt; cluster\_info (compile)
&gt; ==&gt; skerl (compile)
&gt; ERROR: OTP release R14B04 does not match required regex R14B0[23]
&gt;
&gt; i changed the rebar.config so that:
&gt;
&gt; diff --git a/rebar.config b/rebar.config
&gt; index 9a4890a..11eca1d 100644
&gt; --- a/rebar.config
&gt; +++ b/rebar.config
&gt; @@ -1,6 +1,6 @@
&gt; {sub\_dirs, ["rel"]}.
&gt;
&gt; -{require\_otp\_vsn, "R14B0[23]"}.
&gt; +{require\_otp\_vsn, "R14B0[234]"}.
&gt;
&gt; then run again the make rel, but hit
&gt;
&gt; ==&gt; eleveldb (compile)
&gt; exec: c\_src/build\_deps.sh: not found
&gt; ERROR: Command [compile] failed!
&gt; make: \*\*\* [rel] Error 1
&gt;
&gt; any pointers, much appreciated
&gt;
&gt;
&gt; --
&gt; %&gt;&gt;&gt; "".join( [ {'\*':'@','^':'.'}.get(c,None) or
&gt; chr(97+(ord(c)-83)%26) for c in ",adym,\*)&uzq^zqf" ] )
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

