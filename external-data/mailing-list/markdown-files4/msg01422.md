---
title: "Re: RiakSearch Reached Its Limit and gave below Error .."
description: ""
project: community
lastmod: 2010-10-31T03:13:45-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01422"
mailinglist_parent_id: "msg01421"
author_name: "Prometheus WillSurvive"
project_section: "mailinglistitem"
sent_date: 2010-10-31T03:13:45-07:00
---


I put the ERL\_MAX\_ETS\_TABLES in vm.args and restart riaksearch its ok now..

thanks..



On Oct 31, 2010, at 11:38 AM, Ulf Wiger wrote:

&gt; 
&gt; It looks as if it is the ets:new/2 operation that fails due to system\_limit.
&gt; 
&gt; Like with the number of concurrently running processes, the system limit
&gt; is by default pretty low (1400 tables), but can be increased by setting the 
&gt; OS environment variable ERL\_MAX\_ETS\_TABLES.
&gt; 
&gt; Now, I have no idea if Riak Search is supposed to need tons of ets 
&gt; tables. I know of situations where reaching the ets system limit can be a
&gt; symptom of growing backlog in the system - e.g. if mnesia is falling behind,
&gt; since every pending mnesia transaction keeps at least one ets table for 
&gt; the temporary transaction store.
&gt; 
&gt; BR,
&gt; Ulf W
&gt; 
&gt; On 31 Oct 2010, at 09:23, Prometheus WillSurvive wrote:
&gt; 
&gt;&gt; Hi,
&gt;&gt; 
&gt;&gt; We started a batch index test (wikipedia) when we reached around 600K docs 
&gt;&gt; system gave below error.. Any idea ? 
&gt;&gt; 
&gt;&gt; We can not index any more doc in this index.
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; =ERROR REPORT==== 31-Oct-2010::10:22:42 ===
&gt;&gt; \*\* Too many db tables \*\*
&gt;&gt; 
&gt;&gt; DEBUG: riak\_search\_dir\_indexer:197 - "{ error , Type , Error , erlang : 
&gt;&gt; get\_stacktrace ( ) }"
&gt;&gt; 
&gt;&gt; {error,error,system\_limit,
&gt;&gt; [{ets,new,[batch,[protected,duplicate\_bag]]},
&gt;&gt; {riak\_search\_client,process\_terms\_1,5},
&gt;&gt; {riak\_search\_client,process\_terms\_1,5},
&gt;&gt; {riak\_search\_client,index\_docs,3},
&gt;&gt; {riak\_search\_client,index\_docs,2},
&gt;&gt; {riak\_solr\_search\_client,run\_solr\_command,4},
&gt;&gt; {solr\_search,'-index\_dir/2-lc$^0/1-0-',2},
&gt;&gt; {riak\_search\_dir\_indexer,worker\_loop,5}]}
&gt;&gt; 
&gt;&gt; 
&gt;&gt; =ERROR REPORT==== 31-Oct-2010::10:22:44 ===
&gt;&gt; Error in process &lt;0.22187.14&gt; on node 'riaksea...@192.168.250.154' with exit 
&gt;&gt; value: {system\_limit,[{riak\_search\_dir\_indexer,worker\_loop,5}]}
&gt;&gt; 
&gt;&gt; RPC to 'riaksea...@192.168.250.154' failed: {'EXIT',
&gt;&gt; {system\_limit,
&gt;&gt; [{riak\_search\_dir\_indexer,
&gt;&gt; worker\_loop,5}]}}
&gt;&gt; 
&gt;&gt; 
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; 
&gt; Ulf Wiger, CTO, Erlang Solutions, Ltd.
&gt; http://erlang-solutions.com
&gt; 
&gt; 
&gt; 


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

