---
title: "Re: what about millions of buckets"
description: ""
project: community
lastmod: 2012-07-11T20:54:09-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07910"
mailinglist_parent_id: "msg07893"
author_name: "Scott Lystig Fritchie"
project_section: "mailinglistitem"
sent_date: 2012-07-11T20:54:09-07:00
---


Wu Ray  wrote:

wr&gt; Thanks. what's more, I want to know if there is best practice for
wr&gt; performance in this special situation, such as avoiding to do
wr&gt; something, etc.

With Riak right now, the best choice is to avoid arbitrary bucket names
and use a small (or one) bucket that can support the bucket properties
that you need (e.g., secondary indexes).

If you don't mind writing a little Erlang code, there's nothing that
says that bucket properties must be specified by exact bucket name. A
modest amount of modfied code could apply certain properties to all
buckets that had "FOO2I" as a prefix. The simplest would be to hardcode
those properties, but it would be quite easily to use the &lt;&lt;"FOO2I"&gt;&gt;
bucket's properties in the ring (using the existing Riak code) and apply
those props to all "FOO2I"-prefixed keys. Sorry that prefixing scheme
isn't baked-in today.

-Scott

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

