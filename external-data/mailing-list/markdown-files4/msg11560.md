---
title: "Re: Expire feature doesn't seem to work in Riak 1.4.0"
description: ""
project: community
lastmod: 2013-07-16T16:28:53-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11560"
mailinglist_parent_id: "msg11559"
author_name: "Shrikar archak"
project_section: "mailinglistitem"
sent_date: 2013-07-16T16:28:53-07:00
---


Hi Hector,
My bad..Thanks for the quick response it helped.

Thanks,
Shrikar


On Tue, Jul 16, 2013 at 4:14 PM, Hector Castro  wrote:

&gt; Hi Shrikar,
&gt;
&gt; It appears that you may be using incorrect expiry settings. You want
&gt; `expiry\_secs` and `expiry\_grace\_time`, not `expire\_secs` and
&gt; `expire\_grace\_time`. [0]
&gt;
&gt; --
&gt; Hector
&gt;
&gt; [0]
&gt; http://docs.basho.com/riak/latest/tutorials/choosing-a-backend/Bitcask/
&gt;
&gt; On Tue, Jul 16, 2013 at 6:52 PM, Shrikar archak 
&gt; wrote:
&gt; &gt; Hi All,
&gt; &gt;
&gt; &gt;
&gt; &gt; I am looking at the auto expire feature in Riak and it seems that it
&gt; doesn't
&gt; &gt; work.
&gt; &gt; Am I missing something here??
&gt; &gt;
&gt; &gt; Here is the app config for the bitcask section
&gt; &gt;
&gt; &gt; {bitcask, [
&gt; &gt; %% Configure how Bitcask writes data to disk.
&gt; &gt; %% erlang: Erlang's built-in file API
&gt; &gt; %% nif: Direct calls to the POSIX C API
&gt; &gt; %%
&gt; &gt; %% The NIF mode provides higher throughput for certain
&gt; &gt; %% workloads, but has the potential to negatively impact
&gt; &gt; %% the Erlang VM, leading to higher worst-case latencies
&gt; &gt; %% and possible throughput collapse.
&gt; &gt; {io\_mode, erlang},
&gt; &gt;
&gt; &gt; {data\_root, "/var/lib/riak/bitcask"},
&gt; &gt; {expire\_secs, 30},
&gt; &gt; {expire\_grace\_time, 3600},
&gt; &gt; {merge\_window, {0, 6}}
&gt; &gt; ]},
&gt; &gt;
&gt; &gt; Also my backend is bitcask.
&gt; &gt;
&gt; &gt;
&gt; &gt; Test :
&gt; &gt;
&gt; &gt; curl -XPOST http://192.168.8.61:8098/riak/test/hello -d
&gt; '{"shrikar":"test"}'
&gt; &gt;
&gt; &gt; wait for more than 30 seconds in my case I waited for upto a minute.
&gt; &gt;
&gt; &gt; Shrikars-MacBook-Pro:~ shrikar$ curl -v
&gt; &gt; http://192.168.8.61:8098/riak/test/hello
&gt; &gt; \* About to connect() to 192.168.8.61 port 8098 (#0)
&gt; &gt; \* Trying 192.168.8.61...
&gt; &gt; \* connected
&gt; &gt; \* Connected to 192.168.8.61 (192.168.8.61) port 8098 (#0)
&gt; &gt;&gt; GET /riak/test/hello HTTP/1.1
&gt; &gt;&gt; User-Agent: curl/7.24.0 (x86\_64-apple-darwin12.0) libcurl/7.24.0
&gt; &gt;&gt; OpenSSL/0.9.8x zlib/1.2.5
&gt; &gt;&gt; Host: 192.168.8.61:8098
&gt; &gt;&gt; Accept: \*/\*
&gt; &gt;&gt;
&gt; &gt; &lt; HTTP/1.1 200 OK
&gt; &gt; &lt; X-Riak-Vclock: a85hYGBgzGDKBVIcHpu2/Al8euxyBlMiax4rQ7Jn1Gm+LAA=
&gt; &gt; &lt; Vary: Accept-Encoding
&gt; &gt; &lt; Server: MochiWeb/1.1 WebMachine/1.10.0 (never breaks eye contact)
&gt; &gt; &lt; Link: ; rel="up"
&gt; &gt; &lt; Last-Modified: Tue, 16 Jul 2013 22:46:59 GMT
&gt; &gt; &lt; ETag: "7ZFMTDwc4re4Z7v3RIaDFE"
&gt; &gt; &lt; Date: Tue, 16 Jul 2013 22:52:13 GMT
&gt; &gt; &lt; Content-Type: application/x-www-form-urlencoded
&gt; &gt; &lt; Content-Length: 18
&gt; &gt; &lt;
&gt; &gt; \* Connection #0 to host 192.168.8.61 left intact
&gt; &gt; {"shrikar":"test"}\* Closing connection #0
&gt; &gt;
&gt; &gt; Am I missing something here??
&gt; &gt;
&gt; &gt;
&gt; &gt; Thanks,
&gt; &gt; Shrikar
&gt; &gt;
&gt; &gt;
&gt; &gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; &gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

