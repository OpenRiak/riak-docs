---
title: "Re: map function for link-walking"
description: ""
project: community
lastmod: 2010-07-12T08:16:17-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg00715"
mailinglist_parent_id: "msg00704"
author_name: "Nicolas Fouché"
project_section: "mailinglistitem"
sent_date: 2010-07-12T08:16:17-07:00
---


Discussing about this with danoyoung and seancribbs on IRC, I created
two Ruby gists which implement this "custom-link"-walking solution.

http://gist.github.com/472547
http://gist.github.com/472565

-Nicolas

On Sun, Jul 11, 2010 at 5:03 PM, Bryan Fink  wrote:
&gt; On Sun, Jul 11, 2010 at 9:19 AM, Nicolas Fouché  wrote:
&gt;&gt; I did not find any doc about preloading javascript functions. Is it
&gt;&gt; the same as storing JS files in a bucket and load them thanks to the
&gt;&gt; "bucket" and "key" fields, as described in the "Map" paragraph of the
&gt;&gt; Fast Track ? 
&gt;&gt; https://wiki.basho.com/display/RIAK/Loading+Data+and+Running+MapReduce+Queries
&gt;
&gt; Oops.  You're right - we haven't documented this feature well.  The
&gt; best I've found is Kevin Smith's reply to another thread on this list:
&gt;
&gt; http://markmail.org/message/bc7ufl2z42yu6dmg
&gt;
&gt; It involves modifying your app.config file to set the js\_source\_dir
&gt; variable for the riak\_kv app.  For a good example of how to structure
&gt; a preloaded-JS file, check out the one that ships with Riak:
&gt;
&gt; http://bitbucket.org/basho/riak/src/tip/apps/riak\_kv/priv/mapred\_builtins.js
&gt;
&gt; All of the functions in that file are available to Javascript
&gt; map/reduce functions as Riak..  Those functions will
&gt; still be available even after you set js\_source\_dir.  You might
&gt; consider wrapping your application's useful functions in a MyApp class
&gt; or some such.
&gt;
&gt; It's also useful to know about "bin/riak-admin js\_reload" if you're
&gt; doing this.  That command will re-read all of your preloaded
&gt; Javascript files.
&gt;
&gt; -Bryan
&gt;

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

