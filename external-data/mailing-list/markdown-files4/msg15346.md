---
title: "Re: issues with bucket types and corrugatediron"
description: ""
project: community
lastmod: 2014-12-10T09:52:55-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15346"
mailinglist_parent_id: "msg15345"
author_name: "Paige Thompson"
project_section: "mailinglistitem"
sent_date: 2014-12-10T09:52:55-08:00
---


Just a heads up, we figured out I had some consistency/misconfiguration
issues with my riak.conf and the names I had specified for the backends:

Konsole output
storage\_backend = multi

multi\_backend.bitcask\_mult.storage\_backend = bitcask
multi\_backend.bitcask\_mult.bitcask.data\_root = ../data/riak/bitcask\_mult

multi\_backend.leveldb\_mult.storage\_backend = leveldb
multi\_backend.leveldb\_mult.leveldb.data\_root = ../data/riak/leveldb\_mult

#was: multi\_backend.leveldb\_mult.storage\_backend = memory
multi\_backend.memory\_mult.storage\_backend = memory

multi\_backend.default = bitcask\_mult


Also the names of the storage backends in the bucket type definitions
were inconsistent with the riak.conf (were: memory, leveldb, and
bitcask) (changed to memory\_mult, leveldb\_mult, and bitcask\_mult) now it
works fine.


On 12/10/14 15:43, Paige Thompson wrote:
&gt; https://github.com/basho-labs/CorrugatedIron/issues/212
&gt;
&gt; I may not be understanding this correctly but I'm about to test this in
&gt; a sec, maybe I can create the bucket with a shell script to make sure
&gt; its created with the specified bucket type, but thats assuming that it
&gt; won't maintain two different buckets with the same name "Sessions" when
&gt; I try to put objects (IE if I don't put objects and specify the bucket
&gt; type in Corrugated Iron.)
&gt;
&gt; As for the rest of the config stuff:
&gt;
&gt; Konsole output
&gt; storage\_backend = multi
&gt;
&gt; multi\_backend.bitcask\_mult.storage\_backend = bitcask
&gt; multi\_backend.bitcask\_mult.bitcask.data\_root = ../data/riak/bitcask\_mult
&gt;
&gt; multi\_backend.leveldb\_mult.storage\_backend = leveldb
&gt; multi\_backend.leveldb\_mult.leveldb.data\_root = ../data/riak/leveldb\_mult
&gt;
&gt; multi\_backend.leveldb\_mult.storage\_backend = memory
&gt;
&gt; multi\_backend.default = bitcask\_mult
&gt;
&gt;
&gt; Because of the amount of trouble I had to go through to get that
&gt; configuration figured out in the first place, I want to say it's
&gt; probably better if I just have 3 different riak servers, one for memory,
&gt; one for bitcask, and one for leveldb. This way I wouldn't even have to
&gt; mess with bucket types, but I can't even begin to tell you how
&gt; unacceptable that is for someone trying to setup riak for development
&gt; purposes;
&gt;
&gt; - yeah ok sure just start 3 docker instances because docker totally
&gt; doesn't have problems either.
&gt;
&gt; - I guess I could also just have 3 instances of riak running all of
&gt; which use different listening ports but thats... fughhhhgly.
&gt;
&gt; I'm having logistical hangups about this in terms of what I have to
&gt; support in order to facilitate development efforts led by other people.
&gt; I could use some advice as maybe just reading the documentation isn't
&gt; doing me any favors? I do have a purpose in in wanting to use all 3 of
&gt; these backends, let me describe why I want these things, feel free to
&gt; tell me where I'm wrong:
&gt;
&gt; Memory:
&gt; session: self expiring objects, fast. Object footprint is predictably
&gt; measurable (has a sane maximum size, small)
&gt;
&gt;
&gt; Bitcask:
&gt; user account: no secondary indexes required, items are always retrieved
&gt; by the same key, object footprint is predictably measurable (has a sane
&gt; maximum size, only needs to be accessed once and the name and location
&gt; of the user's data bucket is cached in the session object.) Since keys
&gt; are in memory this would mean that authentication should be pretty fast,
&gt; and the overhead on the server should be pretty minimal since it's only
&gt; needed once every time the user logs in.
&gt;
&gt;
&gt; leveldb:
&gt; user account data buckets: each user has it's own bucket, may have
&gt; secondary indexes for searching, bucket/data size is somewhat
&gt; invariable; I'm also planning to index each bucket (as per the
&gt; documentation for solr, indexing can be done on bucket types and I would
&gt; like to set up solr so that it finds all user data buckets by bucket
&gt; type.) I've established creating a bucket per user is an ok way to
&gt; manage stuff, though I'm wondering what sort of implications this will
&gt; have in how partitioning works/doesn't work; will each buckets data be
&gt; "partitioned" (seems like in the context of replicas partitioning just
&gt; means that each node is responsible for queries to specific items in the
&gt; bucket vs specific items only exist in those parititons.)
&gt;
&gt; Any advice appreciated,
&gt;
&gt; -Paige
&gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

