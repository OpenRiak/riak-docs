---
title: "Re: Key Expiry in Riak"
description: ""
project: community
lastmod: 2011-03-02T09:30:59-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02516"
mailinglist_parent_id: "msg02515"
author_name: "Alexander Sicular"
project_section: "mailinglistitem"
sent_date: 2011-03-02T09:30:59-08:00
---


i know i remember seeing a filed issue on issues.basho.com regarding
key expiration via headers. the comments debated a mark and sweep
approach versus a delete on read. tried searching for it but i cant
find it via 'expire' 'expiration' or 'ttl'. maybe someone from basho
knows which issue number i'm referring to here?

-alexander

On Wed, Mar 2, 2011 at 12:22, Jason J. W. Williams
 wrote:
&gt; Are there any plans to make expiry setable via an HTTP header?
&gt;
&gt; -J
&gt;
&gt; On Wed, Mar 2, 2011 at 9:57 AM, Sean Cribbs  wrote:
&gt;&gt; Innostore does not have an expiration option.  In general, you'll want to
&gt;&gt; use bitcask unless your operational requirements specifically call for
&gt;&gt; innostore.
&gt;&gt; Sean Cribbs 
&gt;&gt; Developer Advocate
&gt;&gt; Basho Technologies, Inc.
&gt;&gt; http://basho.com/
&gt;&gt; On Mar 2, 2011, at 11:53 AM, Tristan Sloughter wrote:
&gt;&gt;
&gt;&gt; Is this possible when using innodb? Or would I use innodb for my persistent
&gt;&gt; data and a bitcask backend (like your sessions example) for data I want to
&gt;&gt; expire?
&gt;&gt; Thanks,
&gt;&gt; Tristan
&gt;&gt;
&gt;&gt; On Wed, Mar 2, 2011 at 8:13 AM, Sean Cribbs  wrote:
&gt;&gt;&gt;
&gt;&gt;&gt; Abhishek,
&gt;&gt;&gt;
&gt;&gt;&gt; Mostly answered here:
&gt;&gt;&gt; https://help.basho.com/entries/466512-how-can-i-automatically-expire-a-key-from-riak
&gt;&gt;&gt;
&gt;&gt;&gt; If you use multi\_backend with several bitcask setups you can have both
&gt;&gt;&gt; expiring data and normal persistent data. Here's an example of what you
&gt;&gt;&gt; might put in app.config (inside the riak\_kv section):
&gt;&gt;&gt;
&gt;&gt;&gt; {storage\_backend, riak\_kv\_multi\_backend},
&gt;&gt;&gt; {multi\_backend\_default, &lt;&lt;"bitcask"&gt;&gt;},
&gt;&gt;&gt; {multi\_backend, [
&gt;&gt;&gt;        {&lt;&lt;"bitcask"&gt;&gt;, riak\_kv\_bitcask\_backend, []},
&gt;&gt;&gt;        {&lt;&lt;"sessions&gt;&gt;, riak\_kv\_bitcask\_backend, [{expiry\_secs, 7200},
&gt;&gt;&gt; {data\_root, "data/sessions"}]}
&gt;&gt;&gt; ]},
&gt;&gt;&gt;
&gt;&gt;&gt; The key pieces there is expiry\_secs = 7200 (2 hours), and the separate
&gt;&gt;&gt; root for the data files.
&gt;&gt;&gt;
&gt;&gt;&gt; Sean Cribbs 
&gt;&gt;&gt; Developer Advocate
&gt;&gt;&gt; Basho Technologies, Inc.
&gt;&gt;&gt; http://basho.com/
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; P.S. If you haven't seen the Knowledge Base yet, check it out:
&gt;&gt;&gt; https://help.basho.com/forums/270314-riak. You can also search the KB from
&gt;&gt;&gt; the #riak IRC channel using "!kb ".
&gt;&gt;&gt;
&gt;&gt;&gt; On Mar 2, 2011, at 8:21 AM, Abhishek Kona wrote:
&gt;&gt;&gt;
&gt;&gt;&gt; &gt; Hi
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; Is it possible to have a expiry (ttl) on RIAK keys per bucket (or per
&gt;&gt;&gt; &gt; key).
&gt;&gt;&gt; &gt; Or is there any other way that I am missing.
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; This would be greatly useful for maintaining Session data in RIAK, as
&gt;&gt;&gt; &gt; expired session data can be auto cleared.
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; -Abhishek Kona
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt;&gt; &gt; riak-users mailing list
&gt;&gt;&gt; &gt; riak-users@lists.basho.com
&gt;&gt;&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;
&gt;&gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

