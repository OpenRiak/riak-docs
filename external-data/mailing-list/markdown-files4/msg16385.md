---
title: "How to fix an stale index situation after a bitcask data restore"
description: ""
project: community
lastmod: 2015-08-07T10:49:08-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16385"
author_name: "Hao"
project_section: "mailinglistitem"
sent_date: 2015-08-07T10:49:08-07:00
---


Single node with search=on, I previously indexed 2 map objects. Then I did a 
restore of my previous bitcask folder. I can see newly created bucket type 
still there. And when I search by index, the index data are also there. So I 
removed the index folder (under /var/lib/riak/yz/todoriak\_main\_movie\_idx/data ) 
, riak should start to index anew. But it turned out, no.The index folder was 
re-created by Riak though.


When I search by index, I still see the old 2 map objects. And when I add new 
objects, they are not indexed at all. Always the old 2 map objects only.

I thought AAE will fix index. No? Is the AAE only for cluster?
What can I do now? Delete index and re-create? What's the business of re-attach?

Thank you
-Hao
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

