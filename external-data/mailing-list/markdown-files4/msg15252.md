---
title: "Re: RiakCS poor s3 upload speeds 2MB/s"
description: ""
project: community
lastmod: 2014-11-25T16:23:03-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15252"
mailinglist_parent_id: "msg15230"
author_name: "Heinz Nikolaus Gies"
project_section: "mailinglistitem"
sent_date: 2014-11-25T16:23:03-08:00
---


If you’re evaluating RiakCS vs. Ceph you might want to toss LeoFS[1] in the mix 
and give it a run. Just as RiakCS it is a dynamo inspired system build in 
Erlang and comes with the same advantages and disadvantages. But unlike RiakCS 
it is pretty much exclusive a Object Store so can take a few different 
optimizations for this kind of work that might not be possible in a general 
purpose database as Riak (this is my personal guess not a research founded 
conclusion). The team is (much) smaller then bash (obviously) but they’re a 
very nice and responsive bunch. I ended up using it as a s3 backend for 
Project-FiFo due to it’s performance characteristics. With current releases I 
manage to get a sigle file upload speed of ~1.2GB/s using gof3r[2] (this might 
be a client limitation but I haven’t had time to investigate the details).

[1] http://leo-project.net/leofs/ 
[2] https://github.com/rlmcpherson/s3gof3r/tree/master/gof3r 

---
Cheers,
Heinz Nikolaus Gies
he...@licenser.net



&gt; On Nov 25, 2014, at 6:08, Toby Corkindale  wrote:
&gt; 
&gt; Hi,
&gt; I wondered if you managed to significantly improve your Riak CS
&gt; performance, or not?
&gt; 
&gt; I just ask as we've been getting not-dissimilar performance out of
&gt; Riak CS too (4-5 mbyte/sec max per client, on bare metal hardware),
&gt; for quite a long time. (I swear it was faster originally, when there
&gt; was a lot less data in the whole system.)
&gt; This is after applying all the tweaks available -- networking stack,
&gt; filesystem mount options, assorted Erlang vm.args, and increased put
&gt; concurrency/buffer options.
&gt; 
&gt; We put up with it because it's been just-about sufficient enough for
&gt; our needs and Riak CS has been reliable and easy to administer -- but
&gt; it's becoming more of an issue, and so I'm curious to know if other
&gt; people \*do\* manage to achieve \*good\* per-client speeds out of Riak CS
&gt; or if this is just how things always are?
&gt; And we're way off the mark, maybe we can find out why..
&gt; 
&gt; Details of our setup:
&gt; 6 node cluster. RIng size of 64.
&gt; Riak 1.4.10
&gt; Riak CS 1.5.2
&gt; (installed from official Basho repos)
&gt; 
&gt; Tests conducted using both multi-part and non-multi-part upload mode;
&gt; performance is similar with both. Tested against cluster when very
&gt; lightly loaded.
&gt; For the sake of testing, a 100M file is being used, that contains
&gt; random (hard to compress) data.
&gt; 
&gt; Cheers,
&gt; Toby
&gt; 
&gt; On 8 November 2014 at 01:41, David Meekin  
&gt; wrote:
&gt;&gt; Hi,
&gt;&gt; I’ve setup a test 4 node RiakCS cluster on HP BL460c hardware and I can’t 
&gt;&gt; seem to get S3 upload speeds above 2MB/s
&gt;&gt; I’m connecting direct to RiackCS on one of the nodes so there is no load 
&gt;&gt; balancing software in place.
&gt;&gt; I have also installed s3cmd locally onto one of the nodes and the speeds 
&gt;&gt; locally are the same.
&gt;&gt; These 4 nodes also run a test CEPH cluster with RadosGW and s3 uploads to 
&gt;&gt; CEPH achieve 125MB/s
&gt;&gt; Any help would be appreciated as I’m currently evaluating both CEPH and 
&gt;&gt; RiakCS.
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

