---
title: "Re: Trying to understand map/reduce of meta-data"
description: ""
project: community
lastmod: 2013-12-30T13:21:44-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13346"
mailinglist_parent_id: "msg13345"
author_name: "Nooby Doo"
project_section: "mailinglistitem"
sent_date: 2013-12-30T13:21:44-08:00
---


Hi Bryce:

Guess I thought it would be something along the lines of the sample code:
"source":"function(riakObject) {
 var val = riakObject.values[0].data.match(/pizza/g);
 return [[riakObject.key, (val ? val.length : 0 )]];
 }"}}]}'

Except that riakObject.values would be replaced by riakObject.metadata (except 
I'd not yet determined the proper terminology).
-nd


----- Original Message -----
&gt; From: "Bryce Verdier" 
&gt; To: riak-users@lists.basho.com
&gt; Sent: Monday, December 30, 2013 3:43:52 PM
&gt; Subject: Re: Trying to understand map/reduce of meta-data
&gt; 
&gt; Hi,
&gt; 
&gt; I'm still new to the underpinnings of working with MapReduce in Riak.
&gt; That being said I think what you're looking for is possible, though
&gt; I'm
&gt; sure someone else might be able to share a better way with you.
&gt; 
&gt; Using some custom code(
&gt; http://docs.basho.com/riak/latest/ops/advanced/install-custom-code/)
&gt; you
&gt; could write what you're looking for.
&gt; 
&gt; \_NOTE\_, this is untested... you've been warned!
&gt; 
&gt; getMetaData(RiakObject, \_KeyData, \_Arg) -&gt;
&gt; Key = riak\_object:key(RiakObject),
&gt; Data = riak\_object:get\_metadata(RiakObject),
&gt; [ {Key, Data} ].
&gt; 
&gt; On 12/30/2013 12:10 PM, Nooby Doo wrote:
&gt; &gt; Hello:
&gt; &gt;
&gt; &gt; I'm trying to understand how to do a map/reduce referring to
&gt; &gt; meta-data.
&gt; &gt; Example (I'm using JavaScript).
&gt; &gt;
&gt; &gt; I have a meta-data field called X-Riak-Meta-start-time; the
&gt; &gt; contents of which are a Unix timestamp.
&gt; &gt; I'd like to find all keys with a timestamp older than now() - 30
&gt; &gt; days ago.
&gt; &gt; Reading through the documentation this seems to be straight forward
&gt; &gt; if I was looking at the actual data being stored, however, I'm
&gt; &gt; simply unclear as to how to do while looking at a MetaData field.
&gt; &gt;
&gt; &gt; Appreciate any help you can provide.
&gt; &gt; -nd
&gt; &gt;
&gt; &gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; 
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; 

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

