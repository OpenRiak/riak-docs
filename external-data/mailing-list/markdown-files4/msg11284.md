---
title: "Re: 403 forbidden while creating admin user in Riak-CS"
description: ""
project: community
lastmod: 2013-06-15T16:56:27-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11284"
mailinglist_parent_id: "msg11283"
author_name: "De Bunge"
project_section: "mailinglistitem"
sent_date: 2013-06-15T16:56:27-07:00
---


Thank you the response.

Checking whether ip is correct:

root@q092:~# cat /etc/riak-cs/app.config | grep stanchion
 {stanchion\_ip, "127.0.0.1"},
 {stanchion\_port, 8085 },
 {stanchion\_ssl, false },
 %% the admin credentials specified in the stanchion
root@q092:~# cat /etc/riak-cs/app.config | grep stanchion
 {stanchion\_ip, "127.0.0.1"},
 {stanchion\_port, 8085 },
 {stanchion\_ssl, false },
 %% the admin credentials specified in the stanchion
root@q092:~# cat /etc/stanchion/app.config | grep stanchion
 {stanchion, [
 {stanchion\_ip, "127.0.0.1"},
 {stanchion\_port, 8085 } ,
 
{"/var/log/stanchion/error.log", error, 10485760, "$D0", 5},
 
{"/var/log/stanchion/console.log", info, 10485760, "$D0", 5}
 {crash\_log, "/var/log/stanchion/crash.log"},
root@q092:~# cat /var/log/stanchion/error.log

pinging stanchion:

root@q092:~# stanchion ping
pong

The riak-cs error log is more interesting:

cat /var/log/riak-cs/error.log.0
2013-06-14 19:41:22.285 [error] &lt;0.131.0&gt; CRASH REPORT Process 
&lt;0.131.0&gt; with 0 neighbours exited with reason: {tcp,econnrefused} in 
gen\_server:init\_it/6 line 320
2013-06-14 19:42:06.562 [error] &lt;0.129.0&gt; CRASH REPORT Process 
&lt;0.129.0&gt; with 0 neighbours exited with reason: {tcp,econnrefused} in 
gen\_server:init\_it/6 line 320
2013-06-14 19:43:55.024 [error] &lt;0.131.0&gt; CRASH REPORT Process 
&lt;0.131.0&gt; with 0 neighbours exited with reason: {tcp,econnrefused} in 
gen\_server:init\_it/6 line 320
2013-06-14 19:43:59.664 [error] &lt;0.131.0&gt; CRASH REPORT Process 
&lt;0.131.0&gt; with 0 neighbours exited with reason: {tcp,econnrefused} in 
gen\_server:init\_it/6 line 320
2013-06-14 20:00:46.381 [error] &lt;0.131.0&gt; CRASH REPORT Process 
&lt;0.131.0&gt; with 0 neighbours exited with reason: {tcp,econnrefused} in 
gen\_server:init\_it/6 line 320
2013-06-14 20:01:14.355 [error] &lt;0.129.0&gt; CRASH REPORT Process 
&lt;0.129.0&gt; with 0 neighbours exited with reason: {tcp,econnrefused} in 
gen\_server:init\_it/6 line 320
2013-06-14 20:02:03.254 [error] &lt;0.131.0&gt; CRASH REPORT Process 
&lt;0.131.0&gt; with 0 neighbours exited with reason: {tcp,econnrefused} in 
gen\_server:init\_it/6 line 320
2013-06-14 21:07:21.845 [error] &lt;0.262.0&gt; Supervisor poolboy\_sup had 
child riak\_cs\_riakc\_pool\_worker started with 
riak\_cs\_riakc\_pool\_worker:start\_link([{name,{local,bucket\_list\_pool}},{worker\_module,riak\_cs\_riakc\_pool\_worker},{size,5},{max\_overflow,...},...])
 
at undefined exit with reason shutdown in context shutdown\_error

But have no idea that this means.


Сб. 15 июня 2013 21:00:07, Hector Castro писал:
&gt; Hi,
&gt;
&gt; Borrowing from a response to a similar thread a few days ago regarding
&gt; CS, this particular error message is misleading. In general it can be
&gt; treated as a 500 error.
&gt;
&gt; Generally, it translates to Riak CS inability to speak to Stanchion
&gt; (which is used for creating users and buckets). Please confirm that
&gt; Stanchion is running with:
&gt;
&gt; sudo stanchion ping
&gt;
&gt; Also, ensure that `stanchion\_ip` is the same within Riak CS and
&gt; Stanchion's app.config.
&gt;
&gt; --
&gt; Hector
&gt;
&gt;
&gt; On Sat, Jun 15, 2013 at 7:06 AM, De Bunge  wrote:
&gt;&gt; I'm following guidelines and set up anomimous user creation
&gt;&gt;
&gt;&gt; cat /etc/riak-cs/app.config | grep anonymous\_user\_creation
&gt;&gt; {anonymous\_user\_creation, true},
&gt;&gt;
&gt;&gt; and using post request to create admin user:
&gt;&gt;
&gt;&gt;&gt; curl -H 'Content-Type: application/json' \
&gt;&gt;&gt; -X POST `http://localhost:8080/riak-cs/user` \
&gt;&gt;&gt; --data '{"email":"foo...@example.com", "name":"admin user"}'
&gt;&gt;
&gt;&gt; The response always is
&gt;&gt;
&gt;&gt; xml version="1.0"
&gt; encoding="UTF-8"?&gt;`ServiceUnavailable`Please
&gt;&gt; reduce your request
&gt;&gt; rate./riak-cs/user
&gt;&gt;
&gt;&gt; No matter how long I wait (hours) between requests. What's wrong? How
&gt;&gt; sould I create admin user?
&gt;&gt;
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com



\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

