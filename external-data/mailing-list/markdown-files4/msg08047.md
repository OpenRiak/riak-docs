---
title: "Re: Informal survey about Python client API changes"
description: ""
project: community
lastmod: 2012-07-24T09:15:53-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08047"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2012-07-24T09:15:53-07:00
---


On a slightly related note, the next release of the Python client will
extract the Protocol Buffers messages into a separate package with an
explicit dependency on the 2.4.1 protobuf package. These are generated from
the same riak\_pb project from which we generate the Erlang code. You can
already download 2.6 and 2.7 eggs from PyPI:
http://pypi.python.org/pypi?:action=display&name=riak\_pb&version=1.2.0

On Tue, Jul 24, 2012 at 9:53 AM, Sean Cribbs  wrote:

&gt; Hey riak-users,
&gt;
&gt; I've begun adding Riak 1.2-related features to the Python client. As I am
&gt; doing so, I am reminded about how much technical debt exists in the client,
&gt; as discussed at length previously on Github and this mailing list. Because
&gt; I know some of you are using the client in production or as a component of
&gt; another library, I'd like to assess what risks there are in removing or
&gt; changing certain features. Here's my plan:
&gt;
&gt; 1. Remove all the set\_r/get\_r-style methods for quorums. Instead,
&gt; RiakBucket will have custom object-properties for these that let you set
&gt; the corresponding quorums in the bucket-properties, but will not be the
&gt; sort of cascading-preference behavior that it is currently. If you want to
&gt; change a quorum when fetching, storing, or deleting a key, you can pass it
&gt; with keyword arguments to the appropriate method.
&gt; 2. Remove the edge-case-ridden ConnectionManager for a pair of
&gt; resource pools for each protocol, like what is available in the Ruby
&gt; client. Access to a connection would be granted via a 'with' statement,
&gt; naturally, and the protocol selected would be based on the stated
&gt; preference of the user, or on whether the transport supports the given
&gt; feature. For example, stats would always use HTTP. We could also take this
&gt; opportunity to add error-sensitive host selection and automatic retries to
&gt; the client.
&gt; 3. Merge the RiakSearch class into the RiakClient class and push some
&gt; of its functionality down into the connection classes.
&gt;
&gt; I intend to make the Python client ready for the 1.2 release without these
&gt; refactorings, but I would greatly appreciate your feedback before starting
&gt; the above items.
&gt;
&gt; --
&gt; Sean Cribbs 
&gt; Software Engineer
&gt; Basho Technologies, Inc.
&gt; http://basho.com/
&gt;
&gt;


-- 
Sean Cribbs 
Software Engineer
Basho Technologies, Inc.
http://basho.com/
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

