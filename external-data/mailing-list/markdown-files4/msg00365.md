---
title: "Re: CAP controls"
description: ""
project: community
lastmod: 2010-05-13T15:42:25-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg00365"
mailinglist_parent_id: "msg00362"
author_name: "Jeremy Hinegardner"
project_section: "mailinglistitem"
sent_date: 2010-05-13T15:42:25-07:00
---


Thanks Jon,

I was thinking in terms of what we have right now, which is many processes per
physical machine, each one of them managing a dedicated disk to optimize I/O
throughput.

If I get a chance to do some prototyping on this, I'll try out the RAID0 option.
Although I'm a bit suspect at the moment because something like that, with 
say a 3TB RAID0 partition, it seems would store the data linearlly down that
stripe, instead of across all the disks evenly. Altough the RAID controller
might take care of that, not sure.

good idea, I appreciate it.

-jeremy

On Thu, May 13, 2010 at 03:11:43PM -0600, Jon Meredith wrote:
&gt; Hi Jeremy,
&gt;
&gt; If it were me I would start off with the simplest set up possible - one 
&gt; riak node per physical machine. It'll be easier to see what is going on and 
&gt; reason about performance if there are less moving parts.
&gt;
&gt; For the storage configuration - if you are using innostore then keep one 
&gt; for disk for logging (or use the drive the o/s is on if it is doing little 
&gt; else) and create a RAID0 disk out of the remaining disks. Similar set up 
&gt; for bitcask except you don't need to worry about the log data.
&gt;
&gt; Try that as a baseline and benchmark it. If it isn't up to the task then 
&gt; you can explore more complex options.
&gt;
&gt; Jon.
&gt;
&gt;
&gt; On 5/13/10 2:57 PM, Jeremy Hinegardner wrote:
&gt;&gt; I am thinking about how to possibly replace an existing system that has 
&gt;&gt; heavy
&gt;&gt; I/O load, low CPU usage, with riak. Its a file storage system, with 
&gt;&gt; smallish
&gt;&gt; files, a few K normally, but billions of them.
&gt;&gt;
&gt;&gt; The architecture, I think, would be one riak node per disk on the 
&gt;&gt; hardware,
&gt;&gt; and probably run about 16 riak nodes per physical machine. Say I had
&gt;&gt; 4 of these machines, which would be 64 riak nodes.
&gt;&gt;
&gt;&gt; With something like this, if I set W=3 as a CAP tuning, I would want to 
&gt;&gt; make
&gt;&gt; sure that at least 2 of those writes where on 2 physically different 
&gt;&gt; machines,
&gt;&gt; so in case I had a hardware failure, and it took out a physical machine, I 
&gt;&gt; could
&gt;&gt; still operate with the other 3 machines.
&gt;&gt;
&gt;&gt; Is something like this possible with riak?
&gt;&gt;
&gt;&gt; enjoy,
&gt;&gt;
&gt;&gt; -jeremy
&gt;&gt;
&gt;&gt; 
&gt;
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

-- 
========================================================================
 Jeremy Hinegardner jer...@hinegardner.org 


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

