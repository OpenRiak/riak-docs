---
title: "Re: Stalled handoffs on a prod cluster after server crash"
description: ""
project: community
lastmod: 2013-12-10T13:04:25-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13197"
mailinglist_parent_id: "msg13196"
author_name: "Ivaylo Panitchkov"
project_section: "mailinglistitem"
sent_date: 2013-12-10T13:04:25-08:00
---


Hello,
Below is the transfers info:

~# riak-admin transfers
Attempting to restart script through sudo -u riak
'r...@ccc.ccc.ccc.ccc' waiting to handoff 7 partitions
'r...@bbb.bbb.bbb.bbb' waiting to handoff 7 partitions
'r...@aaa.aaa.aaa.aaa' waiting to handoff 5 partitions

~# riak-admin member\_status
Attempting to restart script through sudo -u riak
================================= Membership
==================================
Status Ring Pending Node
-------------------------------------------------------------------------------
valid 45.3% 34.4% 'r...@aaa.aaa.aaa.aaa'
valid 26.6% 32.8% 'r...@bbb.bbb.bbb.bbb'
valid 28.1% 32.8% 'r...@ccc.ccc.ccc.ccc'
-------------------------------------------------------------------------------

It's stuck with all those handoffs for few days now.
riak-admin ring\_status gives me the same info like the one I mentioned when
opened the case.
I noticed AAA.AAA.AAA.AAA experience more load than other servers as it's
responsible for almost half of the data.
Is it safe to add another machine to the cluster in order to relief
AAA.AAA.AAA.AAA even when the issue with handoffs is not yet resolved?

Thanks,
Ivaylo



On Tue, Dec 10, 2013 at 3:04 PM, Jeppe Toustrup wrote:

&gt; What does "riak-admin transfers" tell you? Are there any transfers in
&gt; progress?
&gt; You can try to set the amount of allowed transfers per host to 0 and
&gt; then back to 2 (the default) or whatever you want, in order to restart
&gt; any transfers which may be in progress. You can do that with the
&gt; "riak-admin transfer-limit " command.
&gt;
&gt; --
&gt; Jeppe Fihl Toustrup
&gt; Operations Engineer
&gt; Falcon Social
&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

