---
title: "Re: 2i API Questions"
description: ""
project: community
lastmod: 2011-09-29T13:56:29-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg04928"
mailinglist_parent_id: "msg04927"
author_name: "Jeffrey Kirkell"
project_section: "mailinglistitem"
sent_date: 2011-09-29T13:56:29-07:00
---


Bill

Both Urls work when sending with indexes.

As for the formatting, tehnically it is valid and others are mentioning the 
pains in the format differences

Jeff

Sent from my iPhone

On Sep 29, 2011, at 4:29 PM, bill robertson  wrote:

&gt; Love the new feature, I have a couple of questions though.
&gt; 
&gt; First is the URL to PUT to, The example from the oscon presentation says to 
&gt; PUT to
&gt; 
&gt; http://whatever:port/buckets/bucket\_name/keys/key\_name 
&gt; 
&gt; rather than the old style URL e.g.
&gt; 
&gt; http://whatever:port/riak/bucket\_name/key\_name
&gt; 
&gt; I've noticed that after doing the put to the new style URL I can still get 
&gt; from the old style URL, can I still PUT to the old style URL with an index? I 
&gt; can easily accept that doing a query on an index would involve a different 
&gt; URL, but having the PUT URL be potentially different from the GET URL is an 
&gt; inconstancy I'd like to avoid if possible.
&gt; 
&gt; Second is the return value of get\_index in the erlang pb client. It returns 
&gt; in the format of...
&gt; 
&gt; [[&lt;&lt;"bucket"&gt;&gt;,&lt;&lt;"key1"&gt;&gt;],
&gt; [&lt;&lt;"bucket"&gt;&gt;,&lt;&lt;"key2"&gt;&gt;],
&gt; [&lt;&lt;"bucket"&gt;&gt;,&lt;&lt;"key3"&gt;&gt;],
&gt; ...
&gt; 
&gt; But map reduce takes keys in a different format:
&gt; 
&gt; [{&lt;&lt;"bucket"&gt;&gt;,&lt;&lt;"key1"&gt;&gt;},
&gt; {&lt;&lt;"bucket"&gt;&gt;,&lt;&lt;"key2"&gt;&gt;},
&gt; {&lt;&lt;"bucket"&gt;&gt;,&lt;&lt;"key3"&gt;&gt;}
&gt; ...
&gt; 
&gt; Its not that its difficult to convert from one format to the other, but its 
&gt; inconsistent, and it seems like a waste of time (i.e. have to run through 
&gt; list of keys to convert). My first question is, am I missing something? i.e. 
&gt; will the first format work anyway? 
&gt; 
&gt; If not, then can get\_index() be changed to generate its results as a list of 
&gt; bucket/key tuples instead of a list of lists in the first place?
&gt; 
&gt; Thanks!
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

