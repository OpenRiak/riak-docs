---
title: "Re: C# client (CI) questions re: IfNotModified"
description: ""
project: community
lastmod: 2013-10-02T15:23:20-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12477"
mailinglist_parent_id: "msg12476"
author_name: "Jeremiah Peschka"
project_section: "mailinglistitem"
sent_date: 2013-10-02T15:23:20-07:00
---


Issue created to track this!
https://github.com/DistributedNonsense/CorrugatedIron/issues/180

We definitely need to clean these up.

---
Jeremiah Peschka - Founder, Brent Ozar Unlimited
MCITP: SQL Server 2008, MVP
Cloudera Certified Developer for Apache Hadoop


On Wed, Oct 2, 2013 at 5:17 PM, Alex Rice  wrote:

&gt; Hmm so so I cannot replicate anything causal between the
&gt; CommunicationError and the C lusterOffline: Unable to access
&gt; functioning Riak node. I guess the cluster really was going offline
&gt; from my benchmarking!
&gt;
&gt; However, I do always a CommunicationError when Put-ing a key that has
&gt; changed, when using IfNotModified = true. Just wondering if that is to
&gt; be expected or maybe worth filing an enhancement request on github?
&gt; Because it's not really a CommunicationError :)
&gt;
&gt; Alex
&gt;
&gt; On Wed, Oct 2, 2013 at 2:52 PM, Alex Rice  wrote:
&gt; &gt; Just trying to make sure I understand what is the proper usage of this
&gt; &gt; option IfNotModified in CI.
&gt; &gt;
&gt; &gt; // (first do a Get of the object)
&gt; &gt; // do a SetObject on the riakobject with my changes
&gt; &gt; var putOpts = new RiakPutOptions () { IfNotModified = true };
&gt; &gt; // do a Put with those Options
&gt; &gt;
&gt; &gt; When the put fails, because I have forced another client to have
&gt; &gt; modified the key, I get a result back with:
&gt; &gt;
&gt; &gt; resultCode = CommunicationError
&gt; &gt; message = Riak returned an error. Code '0'. Message: modified
&gt; &gt;
&gt; &gt; So the actual condition is kind of buried in the message string which
&gt; &gt; is not ideal. Maybe there could be a first-class resultCode named
&gt; &gt; Modified?
&gt; &gt;
&gt; &gt; Also I then seem to get subsequently
&gt; &gt; ClusterOffline: Unable to access functioning Riak node
&gt; &gt;
&gt; &gt; Is it possible that CI is interpreting the CommunicationError
&gt; &gt; internally to think the node is down or something? Just curious- maybe
&gt; &gt; the unable to access functioning Riak node is because I'm running
&gt; &gt; basho\_bench simultaneously? Could be a co-incidence, but it doesn't
&gt; &gt; seem like it.
&gt; &gt; Thanks,
&gt; &gt; Alex
&gt;
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

