---
title: "Re: riak ubuntu 11 building problems"
description: ""
project: community
lastmod: 2011-11-08T12:38:18-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05483"
mailinglist_parent_id: "msg05391"
author_name: "Ivan Trajkovic"
project_section: "mailinglistitem"
sent_date: 2011-11-08T12:38:18-08:00
---


any idea on why this might be happening?
for now Im using Ubuntu 10.04 for my riak development, but would really
love to have it running on my Ubuntu 11.04 machines...


ps. by accident I see I sent the last email reply to Jared personally
instead of to the riak list...

On Wed, Nov 2, 2011 at 4:05 PM, Ivan Trajkovic  wrote:

&gt; hello Jared
&gt; thank you for getting back to me
&gt;
&gt; Im compiling against erlang R14B03
&gt; here is the output of running "make rel" in the riak source base dir.
&gt;
&gt; $ make rel
&gt; ./rebar get-deps
&gt; ==&gt; cluster\_info (get-deps)
&gt; ==&gt; rel (get-deps)
&gt; ==&gt; riak (get-deps)
&gt; ERROR: Dependency dir /media/data/installs/riak/deps/luwak failed
&gt; application validation with reason:
&gt; {version\_mismatch,{"/media/data/installs/riak/deps/luwak/ebin/luwak.app",
&gt; {expected,"1.1.1"},
&gt; {has,"1.1.0"}}}.
&gt; make: \*\*\* [deps] Error 1
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt; I think I got passed these errors a few days ago by manually
&gt; 1. "git fetch"
&gt; 2. "git reset --hard origin/master"
&gt; in each of the dependency sub-folders(repos)...
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt; On Mon, Oct 31, 2011 at 2:30 PM, Jared Morrow  wrote:
&gt;
&gt;&gt; Ivan,
&gt;&gt;
&gt;&gt; We build the Riak 1.0 packages with Erlang R14B03 currently. We build
&gt;&gt; on both Ubuntu 10 and Ubuntu 11 based machines with erlang compiled from
&gt;&gt; source from erlang.org. I can take a look at your issues, can you put
&gt;&gt; the following output in a gist or pastebin for me?
&gt;&gt;
&gt;&gt; $ which erl
&gt;&gt; $ erl -version
&gt;&gt; $ git clone g...@github.com:basho/riak
&gt;&gt; $ cd riak
&gt;&gt; $ make rel
&gt;&gt;
&gt;&gt; Thanks,
&gt;&gt; Jared
&gt;&gt;
&gt;&gt; On Mon, Oct 31, 2011 at 12:06 PM, Ivan Trajkovic wrote:
&gt;&gt;
&gt;&gt;&gt; so yes the build on ubuntu 11.04 is definitely broken. I tried multiple
&gt;&gt;&gt; machines.
&gt;&gt;&gt; ubuntu 10.04 builds without a glitch.
&gt;&gt;&gt;
&gt;&gt;&gt; online I see no tutorials on building on 11.04
&gt;&gt;&gt; is this something thats not a common case?
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; On Sat, Oct 29, 2011 at 2:08 AM, Ivan Trajkovic wrote:
&gt;&gt;&gt;
&gt;&gt;&gt;&gt; hello all
&gt;&gt;&gt;&gt; Im having some problems with building riak from the github sources, on
&gt;&gt;&gt;&gt; ubuntu 11
&gt;&gt;&gt;&gt; Ive reproduced this issue on one of my home computers and a linode
&gt;&gt;&gt;&gt; virtual server, both running ubuntu 11
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; first of all riak 1.0.1 checkout requires me to have erlang R14B3,
&gt;&gt;&gt;&gt; which is confusing to me since the riak\_1.0.1\_i386.deb seems to be working
&gt;&gt;&gt;&gt; off of erlang R15A.
&gt;&gt;&gt;&gt; the requirement is manifested in a message being spit out half way
&gt;&gt;&gt;&gt; through the riak "make rel", about erlang not being of the correct version.
&gt;&gt;&gt;&gt; so I compiled a older R14B3 version of erlang and restarted the riak
&gt;&gt;&gt;&gt; build process...
&gt;&gt;&gt;&gt; it does finish "make rel" then but goes on to require "nodetools" which
&gt;&gt;&gt;&gt; are not present in the erts-5.9 which is whats being checked, and is
&gt;&gt;&gt;&gt; instead hiding in erts-5.8.4 folder (which is not whats used by riak). so I
&gt;&gt;&gt;&gt; went ahead and copied nodetools from 5.8.4 and put it in 5.9... it doesnt
&gt;&gt;&gt;&gt; complain about that anymore after that... however then the new memsup
&gt;&gt;&gt;&gt; issues pop up, with the Erlang VM dying each time I run "riak start"
&gt;&gt;&gt;&gt; without any messages except mentioning memsup as the final issue...
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; for the memsup issue I did check that ulimit is allowing 1024 file
&gt;&gt;&gt;&gt; handles, and have increased that limit further as well, but no luck.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; please let me know if you need some more info about my setup, or
&gt;&gt;&gt;&gt; thoughts/ideas about what I might be dealing with.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; help is appreciated
&gt;&gt;&gt;&gt; thanks
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

