---
title: "Re: Custom data-types"
description: ""
project: community
lastmod: 2014-08-29T07:50:40-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14807"
mailinglist_parent_id: "msg14804"
author_name: "Alex De la rosa"
project_section: "mailinglistitem"
sent_date: 2014-08-29T07:50:40-07:00
---


Hi Sean,

Seems I was wrong, that makes total sense now that you exposed it, looked a
"too good" feature to me, but seems is not that easy.

By the way, how does "schemas" really work for Riak Search? I went back and
read the documentation but didn't see a real difference from using the
default schema.

Thanks!
Alex


On Fri, Aug 29, 2014 at 3:36 PM, Sean Cribbs  wrote:

&gt; Alex,
&gt;
&gt; In short, no, you can't create custom types through schemas. Schemas
&gt; currently only refer to Riak Search 2.
&gt;
&gt; We would love that too, but it hasn't happened yet. The problem is not
&gt; conceiving of a data type but making its behavior both sensible and
&gt; convergent in the face of concurrent activity or network partitions.
&gt; For instance, say that two tweets come in around the same time. Who
&gt; goes first in the "stack" you described? How can multiple independent
&gt; copies reason about which ones to drop from the bottom of the stack to
&gt; keep it bounded to 100? What happens if a replica is separated from
&gt; the others for a while and has really stale entries, is it valid to
&gt; serve those to a user? What happens when one replica pushes an element
&gt; and another one pops it at the same time?
&gt;
&gt; These sound like they might be trivial problems, but they are
&gt; incredibly hard to reason about in the general case. You have to
&gt; reason about the ordering of events, the scope of their effects, and
&gt; decide on a least-surprising behavior to expose to the user. Although
&gt; we have given a pretty familiar/friendly interface to the data types
&gt; shipping in 2.0, their behavior is strictly different from the types
&gt; you would use in a single-threaded program in local memory.
&gt;
&gt; On Thu, Aug 28, 2014 at 4:47 PM, Alex De la rosa
&gt;  wrote:
&gt; &gt; Hi there,
&gt; &gt;
&gt; &gt; Correct me if I'm wrong, but I think I read somewhere that custom
&gt; data-types
&gt; &gt; can be created through schemas or something like that. So, apart from
&gt; &gt; COUNTERS, SETS and MAPS we could have some custom defined ones.
&gt; &gt;
&gt; &gt; I would love to have a STACKS data-type that would work like a FIFO
&gt; stack,
&gt; &gt; so I could save the last 100 objects for some action. Imagine we are
&gt; &gt; building Twitter where millions of tweets are sent all the time, but we
&gt; want
&gt; &gt; to quickly know the last 100 tweets for a user. Imagine something like:
&gt; &gt;
&gt; &gt; obj.stacks['last\_tweets'].add(id\_of\_last\_tweet)
&gt; &gt;
&gt; &gt; IN: last\_tweet ---&gt; STACK\_OF\_100\_TWEETS ---&gt; OUT: older than the 100th
&gt; goes
&gt; &gt; out
&gt; &gt;
&gt; &gt; Is this possible? If so, how to do it?
&gt; &gt;
&gt; &gt; Thanks and Best Regards,
&gt; &gt; Alex
&gt; &gt;
&gt; &gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; &gt;
&gt;
&gt;
&gt;
&gt; --
&gt; Sean Cribbs 
&gt; Software Engineer
&gt; Basho Technologies, Inc.
&gt; http://basho.com/
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

