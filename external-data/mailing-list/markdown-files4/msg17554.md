---
title: "RE: riak bitcask calculation"
description: ""
project: community
lastmod: 2016-07-22T00:16:46-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17554"
mailinglist_parent_id: "msg17553"
author_name: "Travis Kirstine"
project_section: "mailinglistitem"
sent_date: 2016-07-22T00:16:46-07:00
---


Thanks Luke for your help!

-----Original Message-----
From: Luke Bakken [mailto:lbak...@basho.com] 
Sent: July-21-16 1:55 PM
To: Travis Kirstine 
Cc: riak-users@lists.basho.com; ac...@jdbarnes.com
Subject: Re: riak bitcask calculation

Hi Travis,

The memory used by Riak (beam.smp) is for more than key storage, of course.

You can assume that in your case RES will get to about the same amount after a 
reboot, given a similar workload in Riak.

--
Luke Bakken
Engineer
lbak...@basho.com

On Mon, Jul 18, 2016 at 8:54 AM, Travis Kirstine 
 wrote:
&gt; Yes, the reason I'm concerned is that we projected much lower memory usage 
&gt; based on the calculations. We originally provisioned 2x the required memory 
&gt; and it appears that this will not be enough.
&gt;
&gt; Am I correct in that the top cmd's RES memory for the beam.smp command is the 
&gt; memory being used by riak for "key storage", if the server was to be rebooted 
&gt; the memory would eventually climb back to this level?
&gt;
&gt; Thanks for your help
&gt;
&gt; -----Original Message-----
&gt; From: Luke Bakken [mailto:lbak...@basho.com]
&gt; Sent: July-18-16 11:35 AM
&gt; To: Travis Kirstine 
&gt; Cc: riak-users@lists.basho.com; ac...@jdbarnes.com
&gt; Subject: Re: riak bitcask calculation
&gt;
&gt; Hi Travis -
&gt;
&gt; The calculation provided for bitcask memory consumption is only a rough 
&gt; guideline. Using more memory than the calculation suggests is normal and 
&gt; expected with Riak. As you increase load on this cluster memory use may go up 
&gt; further as the operating system manges disk operations and buffers.
&gt;
&gt; Is there a reason you're concerned about this usage?
&gt;
&gt; On Mon, Jul 18, 2016 at 8:28 AM, Travis Kirstine 
&gt;  wrote:
&gt;&gt; Yes from the free command
&gt;&gt;
&gt;&gt; [root@riak1 ~]# free -g
&gt;&gt; total used free shared buff/cache 
&gt;&gt; available
&gt;&gt; Mem: 45 9 0 0 36 
&gt;&gt; 35
&gt;&gt; Swap: 23 0 22
&gt;&gt;
&gt;&gt; Or from top
&gt;&gt;
&gt;&gt; PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND
&gt;&gt; 24421 riak 20 0 16.391g 8.492g 41956 S 82.7 18.5 10542:10 beam.smp
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

