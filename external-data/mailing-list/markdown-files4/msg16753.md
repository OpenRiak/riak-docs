---
title: "Re: Error on crash.log"
description: ""
project: community
lastmod: 2015-11-09T15:58:16-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16753"
mailinglist_parent_id: "msg14894"
author_name: "Jorge Garrido gomez"
project_section: "mailinglistitem"
sent_date: 2015-11-09T15:58:16-08:00
---


Hello,

Recently we upgrade our core application written in erlang that uses riak 
erlang client with protobuffs, before this upgrade we use a simple load 
balancer between nodes, so in a simple gen\_server a pid is created and keep 
into the state, but some times the pid will be disconnected and we must connect 
again.

So for that reason we decide use other strategy, we fork the project 
riak-erlang-client and decide to make a small change, we add in the options of 
the start\_link function (where pid is created) a new option called: 
mod\_callback, with this we send back the response of the pid, so the callback 
module knows that a pid was created and then added to the load balancer, all 
pids are managed by a supervisor, so when a problem occurs the supervisor 
restart a child and then the option mod\_callback notifies to our load balancer 
so we can keep it into the state.

This change is here: 
https://github.com/zgbjgg/riak-erlang-client/commit/a531cd98cbaf119becc6c85091b2242cb08cbc0a
 


If you consider that this commit will be into your main repo, we can open a 
pull request, 

Than you very much!

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

