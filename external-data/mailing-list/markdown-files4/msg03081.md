---
title: "Re: This sure looks like a bug...?"
description: ""
project: community
lastmod: 2011-04-18T17:37:20-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03081"
mailinglist_parent_id: "msg03080"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2011-04-18T17:37:20-07:00
---


Yes, but vector clocks are for resolution of race-conditions and network 
partitions, not to provide an SCM history. Imagine how much space would be 
consumed by the history long enough to disambiguate an object that has been 
updated normally 1000 times, followed by one bad client that decides write to 
it without fetching the vector clock first.

Coda Hale put it well in his talk at the recent Riak Meetup: your data needs to 
be logically monotonic so that writes (and reads) can be retried until 
resolution is reached.

Also, we've found that assigning the client id to something that is relevant to 
your domain, e.g. real people, will help reduce surprises (and degenerate cases 
like sibling explosion) when it comes to vector-clock resolution.

Sean Cribbs 
Developer Advocate
Basho Technologies, Inc.
http://basho.com/

On Apr 18, 2011, at 8:15 PM, Aphyr wrote:

&gt;&gt; I actually had a question about that page. Why is it that when there
&gt;&gt; is a conflict we can only get the conflicting versions of the data?
&gt;&gt; If I'm going to try to resolve the conflict intelligently, I really
&gt;&gt; want the common ancestor as well so that I can try to do a 3-way
&gt;&gt; merge.
&gt; 
&gt; Good call. If an ancestor were available it would make counting and merging 
&gt; orthogonal changes \*much\* simpler.
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

