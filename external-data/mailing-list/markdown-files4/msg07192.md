---
title: "Re: Using PBClusterConfig with RiakClient"
description: ""
project: community
lastmod: 2012-04-11T13:39:24-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07192"
mailinglist_parent_id: "msg07191"
author_name: "Russell Brown"
project_section: "mailinglistitem"
sent_date: 2012-04-11T13:39:24-07:00
---



On 11 Apr 2012, at 21:20, Ahmed Bashir wrote:

&gt; Thanks Russell!
&gt; 
&gt; Any benefit to using IRiakClient vs RawClient other than what's
&gt; apparent in the API spec?
&gt; 

RawClient leaves you to deal with all the trade-offs that are consequences of 
using fault-tolerant, distributed databases like Riak, IRiakClient offers one 
set of possible well-behaved approaches.

With RawClient, you need to retry a failure, IRiakClient has a default retrier 
and lets you provide a custom one of your own to handle faults. RawClient will 
give you an array of Riak Objects and a vector clock where IRiakClient makes it 
easy to convert the payload to a domain type to simplify sibling resolution. 
IRiakClient will always fetch before a store and will pass the vector clock for 
you.

Which you chose depends on what code you want to write and the style you prefer 
to code in. IRiakClient is there to make it harder for people to shoot 
themselves in the foot and to incorporate some best practices for being a well 
behaved Riak client, RawClient is used by IRiakClient, and can certainly be 
used to build your own interactions with Riak.

I hope that helps explain why there are there 2 layers that you can use, one 
building on the other.

Please feel free to ask away if I can clear it up any more,

Cheers

Russell

&gt; On Wed, Apr 11, 2012 at 12:09 PM, Russell Brown  wrote:
&gt;&gt; Hi Ahmed,
&gt;&gt; 
&gt;&gt; On 11 Apr 2012, at 19:45, Ahmed Bashir wrote:
&gt;&gt; 
&gt;&gt; Thanks for the link; this is precisely what led me to believe that
&gt;&gt; PBClusterConfig only supports IRiakClient, so I thought I'd ask around
&gt;&gt; 
&gt;&gt; 
&gt;&gt; PBClusterConfig is used to produce a RawClient. IRiakClient is just a
&gt;&gt; wrapper around RawClient. The cluster client is a RawClient. RawClient is
&gt;&gt; more like that legacy RiakClient/RiakObject classes you're using.
&gt;&gt; 
&gt;&gt; See 
&gt;&gt; http://basho.github.com/riak-java-client/1.0.5/com/basho/riak/client/raw/pbc/PBRiakClientFactory.html
&gt;&gt; for
&gt;&gt; details.
&gt;&gt; 
&gt;&gt; Cheers
&gt;&gt; 
&gt;&gt; Russell
&gt;&gt; 
&gt;&gt; 
&gt;&gt; ...
&gt;&gt; 
&gt;&gt; Also, if we create a RiakClient with a single host (and others exist),
&gt;&gt; is there any auto-dicovery that goes on to balance the requests across
&gt;&gt; ll ring members, or will that one host process all the app requests?
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; On Wed, Apr 11, 2012 at 11:32 AM, Sean Cribbs  wrote:
&gt;&gt; 
&gt;&gt; Ahmed,
&gt;&gt; 
&gt;&gt; 
&gt;&gt; I think you'll find this resource useful, it contains some examples of how
&gt;&gt; 
&gt;&gt; to use
&gt;&gt; 
&gt;&gt; PBClusterConfig: https://github.com/basho/riak-java-client/wiki/ClientFactory
&gt;&gt; 
&gt;&gt; 
&gt;&gt; On Wed, Apr 11, 2012 at 2:29 PM, Ahmed Bashir 
&gt;&gt; 
&gt;&gt; wrote:
&gt;&gt; 
&gt;&gt; 
&gt;&gt; Hey guys,
&gt;&gt; 
&gt;&gt; 
&gt;&gt; I currently have an app that uses the RiakClient/RiakObject interface
&gt;&gt; 
&gt;&gt; (fetch(),store(),etc) in lieu of the
&gt;&gt; 
&gt;&gt; IRiakClient/IRiakObject/FetchObject interface.
&gt;&gt; 
&gt;&gt; 
&gt;&gt; Is there any way for me to continue using my code with
&gt;&gt; 
&gt;&gt; PBClusterConfig? It looks like I need to move to using IRiakClient in
&gt;&gt; 
&gt;&gt; order to take advantage of PBClusterConfig, is that so?
&gt;&gt; 
&gt;&gt; 
&gt;&gt; Any insight would be appreciated, thanks!
&gt;&gt; 
&gt;&gt; 
&gt;&gt; Ahmed
&gt;&gt; 
&gt;&gt; 
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; 
&gt;&gt; riak-users mailing list
&gt;&gt; 
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; 
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; --
&gt;&gt; 
&gt;&gt; Sean Cribbs 
&gt;&gt; 
&gt;&gt; Software Engineer
&gt;&gt; 
&gt;&gt; Basho Technologies, Inc.
&gt;&gt; 
&gt;&gt; http://basho.com/
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt; 
&gt;&gt; 
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

