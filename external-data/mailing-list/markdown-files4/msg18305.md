---
title: "Re: Changing Bitcask Expiry Policy"
description: ""
project: community
lastmod: 2017-06-29T07:30:38-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg18305"
mailinglist_parent_id: "msg18298"
author_name: "Felipe Esteves"
project_section: "mailinglistitem"
sent_date: 2017-06-29T07:30:38-07:00
---


Thanks a lot for this brief explanation, Martin!

Felipe Esteves

Tecnologia

felipe.este...@b2wdigital.com 

Tel.: (21) 3504-7162 ramal 57162

Skype: felipe2esteves

2017-06-27 13:55 GMT-03:00 Martin Sumner :

&gt; Felipe,
&gt;
&gt; I've not played around with this myself. However, after a brief look at
&gt; the bitcask code, it looks like a timestamp is given to each object as it
&gt; is written to bitcask - to represent the time it was written, not the time
&gt; it will expire. The expiry\_time is part of the state of the bitcask
&gt; process passed on startup, and is not looked at during the PUT flow.
&gt;
&gt; Bitcask checks to see if an object is expired when it is read (and also
&gt; when merging files), by comparing the write\_time timestamp with the current
&gt; time (less the expiry time in seconds) - and the object is then deleted as
&gt; part of the GET operation. So if the expiry time is disabled, these reads
&gt; will be forever valid once bitcask has that new state, as no knowledge of
&gt; the old expiry time is retained in the store. I don't think the object
&gt; itself has any sense of when it will expire, so I would expect that in your
&gt; case your data will be preserved.
&gt;
&gt; I would recommend testing this before relying on my quick read through.
&gt;
&gt; Regards
&gt;
&gt; Martin
&gt;
&gt; Hi,
&gt;
&gt; any hint on this question?
&gt;
&gt; Felipe Esteves
&gt;
&gt; Tecnologia
&gt; felipe.esteves at b2wdigital.com 
&gt;  
&gt;  &gt;
&gt;
&gt; Tel.: (21) 3504-7162 ramal 57162
&gt;
&gt; Skype: felipe2esteves
&gt;
&gt; 2017-06-21 16:35 GMT-03:00 Felipe Esteves  &gt;:
&gt;
&gt; &gt;\* Hi,
&gt; \*&gt;&gt;\* If I have a Riak cluster with bitcask expiry turned on, let's say, 14
&gt; \*&gt;\* days, and then change it to \*bitcask.expiry=off\* before any expiration
&gt; \*&gt;\* occurs, all my data will be preserved? Or all data prior to the parameter
&gt; \*&gt;\* change could still expiries based on the previous deadline?
&gt; \*&gt;&gt;\* Riak is version 2.2.3
&gt; \*&gt;&gt;\* thanks,
&gt; \*&gt;&gt;\* Felipe Esteves
&gt; \*&gt;&gt;\* Tecnologia
&gt; \*&gt;&gt;\* felipe.esteves at b2wdigital.com 
&gt;  
&gt;  &gt;
&gt; \*&gt;&gt;&gt;
&gt;
&gt;
&gt; ------------------------------
&gt;
&gt; Esta mensagem pode conter informações confidenciais e somente o indivíduo
&gt; ou entidade a quem foi destinada pode utilizá-la. A transmissão incorreta
&gt; da mensagem não acarreta a perda de sua confidencialidade. Caso esta
&gt; mensagem tenha sido recebida por engano, solicitamos que o fato seja
&gt; comunicado ao remetente e que a mensagem seja eliminada de seu sistema
&gt; imediatamente. É vedado a qualquer pessoa que não seja o destinatário usar,
&gt; revelar, distribuir ou copiar qualquer parte desta mensagem. Ambiente de
&gt; comunicação sujeito a monitoramento.
&gt;
&gt; This message may include confidential information and only the intended
&gt; addresses have the right to use it as is, or any part of it. A wrong
&gt; transmission does not break its confidentiality. If you've received it
&gt; because of a mistake or erroneous transmission, please notify the sender
&gt; and delete it from your system immediately. This communication environment
&gt; is controlled and monitored.
&gt;
&gt; B2W Digital
&gt;
&gt;
&gt;

-- 

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

