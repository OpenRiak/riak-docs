---
title: "Re: have a new node take over the role of a downed,	unrecoverable node?"
description: ""
project: community
lastmod: 2010-10-16T13:39:10-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01313"
mailinglist_parent_id: "msg01312"
author_name: "Jesse Newland"
project_section: "mailinglistitem"
sent_date: 2010-10-16T13:39:10-07:00
---


The description of leave on the wiki mentions that it "causes the node to leave 
the cluster it participates in" - I assume "the node" refers to the node this 
command is run on? How would I "leave" a node that I can't run this command on 
anymore?

Regards -

Jesse Newland
---
je...@railsmachine.com
404.216.1093

On Oct 16, 2010, at 3:16 PM, Sean Cribbs wrote:

&gt; `leave` is exactly what you want to do then. Once the old node has left (use 
&gt; `ringready` to track its exit), add the new neode. 
&gt; 
&gt; If the EBS volume containing the node's data was not lost, you could mount it 
&gt; onto the new node to save some recovery time, and then reip. However, you'll 
&gt; need to reip on all machines.
&gt; 
&gt; Sean Cribbs 
&gt; Developer Advocate
&gt; Basho Technologies, Inc.
&gt; http://basho.com/
&gt; 
&gt; On Oct 16, 2010, at 2:54 PM, Jesse Newland wrote:
&gt; 
&gt;&gt; I'm running through some disaster scenarios before bringing a riak cluster 
&gt;&gt; into production, and have run into a scenario that I can't work through the 
&gt;&gt; proper resolution for just yet:
&gt;&gt; 
&gt;&gt; Say an ec2 instance that was a part of a ring went away quickly, and data 
&gt;&gt; from it was unrecoverable.
&gt;&gt; 
&gt;&gt; How might I go about telling the rest of the ring that a new instance that 
&gt;&gt; I've brought up should take over the vnodes that were on that old instance? 
&gt;&gt; This sounds like a job for `riak-admin reip`, but after running `reip 
&gt;&gt; downed\_node new\_node`, `riak-admin ringready` still shows that the old nodes 
&gt;&gt; are a part of the ring and down. I guess what I'd like to do is a 
&gt;&gt; posthumeous `leave`?
&gt;&gt; 
&gt;&gt; Thoughts?
&gt;&gt; 
&gt;&gt; Regards -
&gt;&gt; 
&gt;&gt; Jesse Newland
&gt;&gt; ---
&gt;&gt; je...@railsmachine.com
&gt;&gt; 404.216.1093
&gt;&gt; 
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; 

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

