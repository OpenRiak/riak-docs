---
title: "Re: Query on Riak Search in a cluster of 3 nodes behind ELB is giving	different result everytime"
description: ""
project: community
lastmod: 2015-03-05T06:38:29-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15834"
mailinglist_parent_id: "msg15831"
author_name: "Zeeshan Lakhani"
project_section: "mailinglistitem"
sent_date: 2015-03-05T06:38:29-08:00
---


Hello Santi, 

Have you deleted an object in that bucket/index at some point? 

Please make sure AAE is running by checking searchâ€™s AAE status, `riak-admin 
search aae-status`, and that data exists in the correct directory, 
`./data/yz\_anti\_entropy` 
(http://docs.basho.com/riak/latest/ops/advanced/configs/search/). 

You may just need to perform a read-repair by performing a fetch of the object 
itself first, before performing search queries again.

Thanks.

Zeeshan Lakhani
programmer | 
software engineer at @basho | 
org. member/founder of @papers\_we\_love | paperswelove.org
twitter =&gt; @zeeshanlakhani

&gt; On Mar 4, 2015, at 9:06 PM, Santi Kumar  wrote:
&gt; 
&gt; But in our case we didnt have spaces in keys. All our keys are UUID's so I 
&gt; wouldn't suspect that. AAE I haven't verified .
&gt; 
&gt; On Thu, Mar 5, 2015 at 7:16 AM, John O'Brien  &gt; wrote:
&gt; I'd lean towards AAE issues on Yokozuna... Same problems we were having with 
&gt; our 'spaces-in-keys' issue... Once we cleaned those up, things were great 
&gt; again.
&gt; 
&gt; On Wed, Mar 4, 2015 at 8:36 PM, Santi Kumar  &gt; wrote:
&gt; Raik 2.0.0
&gt; 
&gt; On Mar 5, 2015 12:31 AM, "Christopher Meiklejohn"  &gt; wrote:
&gt; 
&gt; &gt; On Mar 4, 2015, at 1:15 PM, Santi Kumar  &gt; &gt; wrote:
&gt; &gt;
&gt; &gt; Hi,
&gt; &gt; We are running into a strange issue with Riak Search. Our setup is with 3 
&gt; &gt; nodes of Riak (with search enabled) in 3 different ec2 instances behind 
&gt; &gt; ELB. App server talks to the cluster through ELB. We are querying for list 
&gt; &gt; of objects through \*:\* query instead of list bucket keys and every time the 
&gt; &gt; result is different. We have only 4 objects in that bucket / index, only 
&gt; &gt; few times it's giving all 4 but ofther it returns 2 or 3.
&gt; &gt;
&gt; &gt; This wasn't happening when we have one instance of Riak. Any insight?
&gt; 
&gt; Hi Santi,
&gt; 
&gt; Can you provide information regarding what versions of Riak you are running?
&gt; 
&gt; - Chris
&gt; 
&gt; Christopher Meiklejohn
&gt; Senior Software Engineer
&gt; Basho Technologies, Inc.
&gt; cmeiklej...@basho.com 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com 
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

