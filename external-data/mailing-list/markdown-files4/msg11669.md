---
title: "Re: reducing n_val"
description: ""
project: community
lastmod: 2013-07-21T17:46:19-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11669"
mailinglist_parent_id: "msg11552"
author_name: "Chris Meiklejohn"
project_section: "mailinglistitem"
sent_date: 2013-07-21T17:46:19-07:00
---


On Fri, Jul 19, 2013 at 7:35 AM, Simon Effenberg
wrote:

&gt; On Tue, 16 Jul 2013 10:31:07 -0400
&gt; Chris Meiklejohn  wrote:
&gt;
&gt; &gt; On Tue, Jul 16, 2013 at 10:02 AM, Simon Effenberg &lt;
&gt; seffenb...@team.mobile.de
&gt; &gt; &gt; wrote:
&gt; &gt;
&gt; &gt; &gt; Changing the n\_val setting in the default bucket properties will only
&gt; &gt; &gt; affect new PUT operations moving forward. Older replicas will not be
&gt; &gt; &gt; removed, and the AAE process will not purge older, unneeded replicas.
&gt; &gt; &gt;
&gt; &gt; &gt; Is there a way to get rid of this? Or only by
&gt; &gt; &gt; decommissioning/re-commissioning a node?
&gt; &gt;
&gt; &gt;
&gt; &gt; There isn't a good solution for doing this. Can I ask why you are
&gt; changing
&gt; &gt; the default n\_val for this particular bucket?
&gt;
&gt; because we have some storage problems (it turns out that we have to
&gt; store much more data and at the moment we have not that amount of disk
&gt; space).
&gt;

I would recommend against reducing this value, as you're going to lose
availability
and could risk potential data loss in the event of node failures.


&gt; So is it possible or should it definitely be avoided? Also what is with
&gt; increasing the n\_val? Would this lead to many read-repairs through the
&gt; AAE? Or what happens then?
&gt;

If you raise the n\_val, read repair and active anti-entropy will handle
creating the
missing replicas.

- Chris
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

