---
title: "Re: Riak KV ETS Backend?"
description: ""
project: community
lastmod: 2011-06-22T09:18:53-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03787"
mailinglist_parent_id: "msg03783"
author_name: "Jordan West"
project_section: "mailinglistitem"
sent_date: 2011-06-22T09:18:53-07:00
---


Ryan,

Thanks for the info. Yea, it turned out Riak wasn't exactly what I was
looking for in my use case (although I did build a prototype on it). Ended
up going with Redis (probably could have used memcache or membase instead)
and implemented a partial (not all commands supported) slave in Erlang to
handle propagating the data to ETS tables around the cluster. Essentially, I
was twisting Riak mainly for its clustering/distribution abilities. Ideally,
I would like to write something in Riak Core, but when I have the time.

Jordan

On Wed, Jun 22, 2011 at 7:43 AM, Ryan Zezeski  wrote:

&gt; Jordon,
&gt;
&gt; I used the ETS backend with success while working @ AOL. In my case I was
&gt; using it to cache ~100K, short lived (hours), largish objects.
&gt;
&gt; I'm confused because you said you don't care if you lose data, but one of
&gt; Riak's main strengths is to do everything possible to avoid data loss.
&gt; Perhaps something like memcached is more suitable?
&gt;
&gt; -Ryan
&gt;
&gt;
&gt; On Thu, Jun 2, 2011 at 1:20 PM, Jordan West  wrote:
&gt;
&gt;&gt; Mark,
&gt;&gt;
&gt;&gt; Thanks for the reply. I saw couple other postings related to the ETS
&gt;&gt; backend on the list so I decided to start prototyping a bit with it but I
&gt;&gt; haven't decided if its the solution I'm looking for yet. I'll see you
&gt;&gt; tuesday at the IGN offices for the meetup.
&gt;&gt;
&gt;&gt; Jordan
&gt;&gt;
&gt;&gt;
&gt;&gt; On Thu, Jun 2, 2011 at 9:58 AM, Mark Phillips  wrote:
&gt;&gt;
&gt;&gt;&gt; Hey Jordan,
&gt;&gt;&gt;
&gt;&gt;&gt; To address a few of your questions:
&gt;&gt;&gt;
&gt;&gt;&gt; While it's not the most optimal memory-only backend, ETS is certainly
&gt;&gt;&gt; usable in production. That said, if it runs out of gas on you at
&gt;&gt;&gt; larger scales, it wouldn't be that hard to write a better one using
&gt;&gt;&gt; the NIF interface.
&gt;&gt;&gt;
&gt;&gt;&gt; Hope that helps.
&gt;&gt;&gt;
&gt;&gt;&gt; Mark
&gt;&gt;&gt;
&gt;&gt;&gt; On Thu, May 26, 2011 at 11:15 AM, Jordan West 
&gt;&gt;&gt; wrote:
&gt;&gt;&gt; &gt; Hi all,
&gt;&gt;&gt; &gt; I'm posting to the list for the first time after talking with Mark
&gt;&gt;&gt; &gt; (ironically, at MongoSF the other day), about a use-case I'm
&gt;&gt;&gt; considering
&gt;&gt;&gt; &gt; Riak for. Quickly, I should probably say I've only played with Riak on
&gt;&gt;&gt; a
&gt;&gt;&gt; &gt; side project or two, and dabbled with Riak Core thanks to the new
&gt;&gt;&gt; GitHub
&gt;&gt;&gt; &gt; blog. Part of the reason I'm writing the list is to determine if for my
&gt;&gt;&gt; &gt; use-case its worth investing significant time learning and prototyping
&gt;&gt;&gt; some
&gt;&gt;&gt; &gt; possible implementations with Riak(-Core). Anyways, on to the question:
&gt;&gt;&gt; &gt; Is the ETS Backend in the riak\_kv repo something maintained and
&gt;&gt;&gt; endorsed for
&gt;&gt;&gt; &gt; use by the Basho team? I have a dataset which is well suited for a k/v
&gt;&gt;&gt; store
&gt;&gt;&gt; &gt; and needs to be eventually consistent across a cluster of Erlang
&gt;&gt;&gt; nodes. Riak
&gt;&gt;&gt; &gt; crossed my mind because of those reasons. Also, being able to embed it
&gt;&gt;&gt; into
&gt;&gt;&gt; &gt; my application like Mnesia is a plus. However, I could care less in
&gt;&gt;&gt; this
&gt;&gt;&gt; &gt; case about losing data. The data is ephemeral anyways as its a map of a
&gt;&gt;&gt; &gt; string assigned per connection to a couple erlang process ids, and
&gt;&gt;&gt; hence I
&gt;&gt;&gt; &gt; want to store it in-memory (also want it in memory for performance
&gt;&gt;&gt; reasons).
&gt;&gt;&gt; &gt; This data is very read-heavy, but must be available for writes or new
&gt;&gt;&gt; &gt; connections will begin to fail. I know this is not a typical use for
&gt;&gt;&gt; Riak,
&gt;&gt;&gt; &gt; since one of its most touted benefits is not losing data but would it
&gt;&gt;&gt; be too
&gt;&gt;&gt; &gt; far of a stretch to use Riak as an eventually consistent, in-memory
&gt;&gt;&gt; &gt; key-value store embedded into an Erlang application? If not, I figure
&gt;&gt;&gt; this
&gt;&gt;&gt; &gt; is something I could build with Riak Core. Does anyone know if there
&gt;&gt;&gt; already
&gt;&gt;&gt; &gt; is a OSS project I could contribute to instead of starting from scratch
&gt;&gt;&gt; in
&gt;&gt;&gt; &gt; that case?
&gt;&gt;&gt; &gt; Thanks for your help,
&gt;&gt;&gt; &gt; Jordan West
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt;&gt; &gt; riak-users mailing list
&gt;&gt;&gt; &gt; riak-users@lists.basho.com
&gt;&gt;&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt;
&gt;&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;
&gt;&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

