---
title: "Map phase timeout"
description: ""
project: community
lastmod: 2013-04-07T16:51:19-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg10740"
author_name: "Matt Black"
project_section: "mailinglistitem"
sent_date: 2013-04-07T16:51:19-07:00
---


Dear list,

I'm currently getting a timeout during a single phase of a multi-phase map
reduce query. Is there anything I can do to assist this in running?

It's purpose is to backup and remove objects from Riak, so it will run
periodically during quiet times moving old data out of Riak into file
storage.

Traceback (most recent call last):
 File "./tools/rolling\_backup.py", line 185, in 
 main()
 File "./tools/rolling\_backup.py", line 181, in main
 args.func(\*\*kwargs)
 File "/srv/backup/tools/mapreduce.py", line 295, in do\_map\_reduce
 raise e
Exception:
{"phase":2,"error":"timeout","input":"[&lt;&lt;\"cart-products\"&gt;&gt;,&lt;&lt;\"cd67d7f6e2688bc2089e6fa79506ac05-2\"&gt;&gt;,{struct,[{&lt;&lt;\"uid\"&gt;&gt;,&lt;&lt;\"cd67d7f6e2688bc2089e6fa79506ac05\"&gt;&gt;},{&lt;&lt;\"cart\"&gt;&gt;,{struct,[{&lt;&lt;\"expired\_ts\"&gt;&gt;,&lt;&lt;\"2013-03-05T19:12:23.906228\"&gt;&gt;},{&lt;&lt;\"last\_updated\"&gt;&gt;,&lt;&lt;\"2013-03-05T19:12:23.906242\"&gt;&gt;},{&lt;&lt;\"tags\"&gt;&gt;,{struct,[{&lt;&lt;\"type\"&gt;&gt;,&lt;&lt;\"AB\"&gt;&gt;}]}},{&lt;&lt;\"completed\"&gt;&gt;,false},{&lt;&lt;\"created\"&gt;&gt;,&lt;&lt;\"2013-03-04T02:10:18.638413\"&gt;&gt;},{&lt;&lt;\"products\"&gt;&gt;,[{struct,[{&lt;&lt;\"cost\"&gt;&gt;,0},{&lt;&lt;\"bundleName\"&gt;&gt;,&lt;&lt;\"Product\"&gt;&gt;},...]},...]},...]}},...]}]","type":"exit","stack":"[{riak\_kv\_w\_reduce,'-js\_runner/1-fun-0-',3,[{file,\"src/riak\_kv\_w\_reduce.erl\"},{line,283}]},{riak\_kv\_w\_reduce,reduce,3,[{file,\"src/riak\_kv\_w\_reduce.erl\"},{line,206}]},{riak\_kv\_w\_reduce,maybe\_reduce,2,[{file,\"src/riak\_kv\_w\_reduce.erl\"},{line,157}]},{riak\_pipe\_vnode\_worker,process\_input,3,[{file,\"src/riak\_pipe\_vnode\_worker.erl\"},{line,444}]},{riak\_pipe\_vnode\_worker,wait\_for\_input,2,[{file,\"src/riak\_pipe\_vnode\_worker.erl\"},{line,376}]},{gen\_fsm,handle\_msg,7,[{file,\"gen\_fsm.erl\"},{line,494}]},{proc\_lib,...}]"}
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

