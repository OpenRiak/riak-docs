---
title: "Re: riakkit, a python riak object mapper, has hit beta!"
description: ""
project: community
lastmod: 2012-03-02T05:22:53-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06842"
mailinglist_parent_id: "msg06837"
author_name: "Andrey V. Martyanov"
project_section: "mailinglistitem"
sent_date: 2012-03-02T05:22:53-08:00
---


I'm sorry for the repost, but my gmail client by default sends an email to
a specific subscriber, not to riak-users.

Hi Shuhao,

I don't have enough time to write my own implementation and to see how it
works in practice. But I share my thoughts about that.
It's possible to save the current API, it's common now and used in
SQLAlchemy and Django ORM. But underlying implementation I see a bit
different. The simple workflow:
1. Define the models with specific fields and properties;
2. Generate the JSON Schema [1] based on these fields;
3. Create an instances of our models;
4. Validate against the schema;
5. Generate the optimal sequence of actions we need to do to store the
data, based on the meta information of our models;
6. Store the data, resolve the conflicts if occur.

Also it should be possible to deserialize the JSON objects into python
objects.

[1] - http://json-schema.org/

Best regards,
Andrey Martyanov

On Fri, Mar 2, 2012 at 6:17 PM, Andrey V. Martyanov wrote:

&gt; Hi Shuhao,
&gt;
&gt; I don't have enough time to write my own implementation and to see how it
&gt; works in practice. But I share my thoughts about that.
&gt; It's possible to save the current API, it's common now and used in
&gt; SQLAlchemy and Django ORM. But underlying implementation I see a bit
&gt; different. The simple workflow:
&gt; 1. Define the models with specific fields and properties;
&gt; 2. Generate the JSON Schema [1] based on these fields;
&gt; 3. Create an instances of our models;
&gt; 4. Validate against the schema;
&gt; 5. Generate the optimal sequence of actions we need to do to store the
&gt; data, based on the meta information of our models;
&gt; 6. Store the data, resolve the conflicts if occur.
&gt;
&gt; Also it should be possible to deserialize the JSON objects into python
&gt; objects.
&gt;
&gt; [1] - http://json-schema.org/
&gt;
&gt; Best regards,
&gt; Andrey Martyanov
&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; On Fri, Mar 2, 2012 at 5:47 PM, Shuhao Wu  wrote:
&gt;&gt;
&gt;&gt;&gt; Yeah. You're looking at something like dictshield. As riakkit is more a
&gt;&gt;&gt; RAD tool in its current state. You bring in an excellent point,
&gt;&gt;&gt; nonetheless, which gave me some intuition and ideas about the next step.
&gt;&gt;&gt;
&gt;&gt;&gt; Cheers,
&gt;&gt;&gt; Shuhao
&gt;&gt;&gt; Sent from my phone.
&gt;&gt;&gt; On Mar 1, 2012 11:41 PM, "Andrey V. Martyanov" 
&gt;&gt;&gt; wrote:
&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Riakkit in its current implementation has a lot of overhead. But what
&gt;&gt;&gt;&gt; I get for this price? Almost nothing. Only field validation make sense.
&gt;&gt;&gt;&gt; Simple key-value mapping is about 50-70 lines of code, not a big deal, even
&gt;&gt;&gt;&gt; for small project. Riak used mostly in web-based projects. Almost all
&gt;&gt;&gt;&gt; modern projects use JSON. The simple workflow is get JSON from the client,
&gt;&gt;&gt;&gt; validate, store in the database, query the database, send JSON to the
&gt;&gt;&gt;&gt; client. If our mapper doesn't understand the JSON and cannot operate on it
&gt;&gt;&gt;&gt; then it's not useful. We can use jsonpickle with a lot more profit. Just
&gt;&gt;&gt;&gt; jsonpickle.encode the object and store it in Riak. I'm sorry, this is my
&gt;&gt;&gt;&gt; position!
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Best regards,
&gt;&gt;&gt;&gt; Andrey Martyanov
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; On Fri, Mar 2, 2012 at 9:01 AM, Andrey V. Martyanov &gt;&gt;&gt; &gt; wrote:
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; I'm just saying that to efficiently store and get the data user should
&gt;&gt;&gt;&gt;&gt; have ability to customize the relationship. Riak has several options to 
&gt;&gt;&gt;&gt;&gt; get
&gt;&gt;&gt;&gt;&gt; related data: secondary indexes, map-reduce etc. I think that the most
&gt;&gt;&gt;&gt;&gt; important task of mapper is to validate the data and to track these
&gt;&gt;&gt;&gt;&gt; dependencies. When you have enough meta information about objects storing
&gt;&gt;&gt;&gt;&gt; these objects is not a big problem.
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; On Fri, Mar 2, 2012 at 8:39 AM, Shuhao Wu  wrote:
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt; The thing about riak-python-client is that it's already pretty high
&gt;&gt;&gt;&gt;&gt;&gt; level, but not high level enough to be that simple.
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt; From what I understand, tracking relationship between models will
&gt;&gt;&gt;&gt;&gt;&gt; still involve a certain level of magic. Right now the magic is that when
&gt;&gt;&gt;&gt;&gt;&gt; you save any document, all the related document will be saved into the
&gt;&gt;&gt;&gt;&gt;&gt; database as well. You're saying that just tracking those relationship
&gt;&gt;&gt;&gt;&gt;&gt; change is good enough and saving will be up to the user?
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt; Shuhao
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt; On Thu, Mar 1, 2012 at 10:20 PM, Andrey V. Martyanov &lt;
&gt;&gt;&gt;&gt;&gt;&gt; reald...@gmail.com&gt; wrote:
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt; I'm not sure about forking the riak-python-client. The the whole
&gt;&gt;&gt;&gt;&gt;&gt;&gt; idea of separation the low-level client library from the high-level 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; mapper
&gt;&gt;&gt;&gt;&gt;&gt;&gt; and the like is quite good. Some sort of SQLAlchemy does.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt; Best regards,
&gt;&gt;&gt;&gt;&gt;&gt;&gt; Andrey Martyanov
&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt; On Fri, Mar 2, 2012 at 8:15 AM, Shuhao Wu  wrote:
&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Another thing I was considering is forking riak-python-client. Some
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; of the stuff in there could use some fixing as well, and maybe just 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; take
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; out the core transports and such and plug that right into riakkit and 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; skip
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; the notion of RiakObject all together as those API is also somewhat 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; weird.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; (such as add\_link and remove\_link)
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Shuhao
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; On Thu, Mar 1, 2012 at 10:02 PM, Shuhao Wu wrote:
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Hi!
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; First off, the code is \*LGPL\* licensed, not GPL. So you're free
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; to put this into any code you want, it's just that when you want to 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; modify
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; riakkit, you have to release your modified version.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; I just went over your idea and it would be a valid solution to
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; some of the problems I'm having right now with my own projects with
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; riakkit. When I initially started writing riakkit, I needed something 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; to do
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; RAD with, which would make sense to have an all-in-one, very simple 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; to use
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; framework, rather than working with serialization and what not. 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; However,
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; now I'm beginning to see problems in this approach when it comes to
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; scalability as I'm slowing moving out of the RAD phase. I haven't done
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; anything as I have not encountered any major issues yet (though I 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; probably
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; will).
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; So here's what I'm thinking for the next branch ( I still have to
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; maintain the master branch due to some code i've written and need ): 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; I'm
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; going to break riakkit into 2 pieces. The first piece is the 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; underlying
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; piece, which will do what you said, serialize/deserialize objects,
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; validation, track relationships and what not, however, it doesn't 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; load it
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; those references up nor does it try to accomplish everything all in 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; one
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; shot, and a RAD layer that's compatible with the current API that will
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; allow RAD to work with it, but still reserve the flexibility of 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; having that
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; underlying API that's relatively easy (as oppose to dead simple) to 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; work
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; with and not as messy as what's going on right now.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; I do agree that the code is messy.. Most of the time it's me
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; fixing bugs I didn't anticipate as I go along and hacking everything 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; into
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; place..
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; One thing I'm not too clear about is what you mean by "Track
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; dependencies between models". I'm not sure how you think I should go 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; about
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; approaching this (which right now is a pretty big disaster.. though
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; relatively stable)
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Cheers,
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Shuhao
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; P.S. I don't want to go into the whole PEP8 discussion and 4
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; spaces vs whatever.. I just like the 2 spaces and the style guide that
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Google uses. Is that really a big deal if you're using it as a 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; library?
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; On Thu, Mar 1, 2012 at 9:35 PM, Andrey V. Martyanov &lt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; reald...@gmail.com&gt; wrote:
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Hi!
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Two things force me to avoid using Riakkit: the code is GPL
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; licensed and non pep8 compliant. So, I cannot fork it and make 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; changes. The
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; code needs clean up, for example, json module is imported in 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; document.py,
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; but not used. Riakkit has no conflict resolution logic, it's 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; basically
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; delegate the work to underlying python client. If I'd like to 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; implement my
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; save method I need to copy and rewrite more than 150 lines of code 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; mess.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; What I think the mapper should do:
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 1. Serialize the objects to valid json;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 2. Deserialize the data back to class instances;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 3. Validate the fields data;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 4. Track dependencies between models;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Simple example using Riakkit-like syntax;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; class Post(Document):
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; bucket\_name = 'posts'
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; title = types.StringProperty(required=True)
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; content = types.StringProperty(required=True)
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; class Comment(Document):
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; bucket\_name = 'comments'
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; text = types.StringProperty(required=True)
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; post = types.IndexReferenceProperty(reference\_class=Post,
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; collection\_name='comments')
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt; post = Post('title', 'content')
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt; comment1 = ('comment1', post=post)
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt; comment2 = ('comment2', post=post)
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt; post.is\_valid()
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; True
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt; post.serialize()
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; {
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; "key": "post\_key",
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; "title": "title",
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; "content": "content",
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; "comments": [
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; {
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; "key": "comment1\_key",
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; "text": "comment1"
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; },
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; {
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; "key": "comment2\_key",
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; "text": "comment2"
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; },
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; ]
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; }
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt; post.store()
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; True
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt; post = Post.get\_with\_key('post\_key')
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt; post.comments
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; ['Post comment1', 'Post comment2']
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt; post\_json\_data = get\_json\_data\_from\_request()
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt; post = Post.deserialize(post\_json\_data)
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt; post.title
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 'title'
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt; post.comments
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; ['Post comment1', 'Post comment2']
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Something like that.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Best regards,
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Andrey Martyanov
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; On Fri, Mar 2, 2012 at 5:39 AM, Sean Carey wrote:
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Keep up the great work Shuhao!
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; On Mar 1, 2012, at 7:36 PM, Shuhao Wu  wrote:
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Hey guys,
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; I started writing riakkit approximately 3 months ago and
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; announced it here. In case you missed that, Riakkit is basically an 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; object
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; mapper for python and riak, which seemed to be lacking in at the 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; time. Now
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; that 3 months has passed and I have developed this project into 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; much more
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; than what I had envisioned to begin with. It's currently also being 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; used
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; and tested in a project of mine (web application) as well and 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; functioning
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; quite nicely. I would say that currently this is the only object 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; mapper
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; that can compete with their counterparts in other languages for 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Riak in
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Python, although a lot of work still needs to be done before it 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; could fully
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; compete.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; So today I felt that riakkit is "stable" and "clean" enough to
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; deserve the first beta release. So I whipped up a website and it's 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; released
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; to pypi. Here's (again), a demo (the full tutorial can be found on 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; the
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; links below)
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; class User(Document):
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; client = riak.RiakClient()
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; bucket\_name = "users"
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; name = StringProperty(required=True)
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt; user = User(name="foo")
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt; user.save()
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; &gt;&gt;&gt; print user.name
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; foo
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; If anyone is interested, you can find the website here:
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; http://ultimatebuster.github.com/riakkit and the code at
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; http://github.com/ultimatebuster/riakkit
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Cheers!
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Shuhao
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;
&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

