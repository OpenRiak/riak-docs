---
title: "Re: installing index on pre11"
description: ""
project: community
lastmod: 2014-02-06T08:20:05-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13604"
mailinglist_parent_id: "msg13595"
author_name: "Kartik Thakore"
project_section: "mailinglistitem"
sent_date: 2014-02-06T08:20:05-08:00
---


Ah ok .. I had an older Riak installed. Then didn't purge the config before
installing the new Riak deb. Do'h


On Thu, Feb 6, 2014 at 11:11 AM, Eric Redmond  wrote:

&gt; Ahhh there's your problem. You don't have the new search activated. You
&gt; have old search. Are you configuring with riak.conf, or app.config?
&gt; On Feb 6, 2014 8:06 AM, "Kartik Thakore"  wrote:
&gt;
&gt;&gt; root@demo:~/riak-book/foo# curl http://localhost:8098/
&gt;&gt; * &gt; href="/types"&gt;riak\_kv\_wm\_bucket\_type
* &gt; href="/buckets"&gt;riak\_kv\_wm\_buckets
* &gt; href="/riak"&gt;riak\_kv\_wm\_buckets
* &gt; href="/types"&gt;riak\_kv\_wm\_buckets
* &gt; href="/buckets"&gt;riak\_kv\_wm\_counter
* &gt; href="/types"&gt;riak\_kv\_wm\_crdt
* &gt; href="/buckets"&gt;riak\_kv\_wm\_index
* &gt; href="/types"&gt;riak\_kv\_wm\_index
* &gt; href="/buckets"&gt;riak\_kv\_wm\_keylist
* &gt; href="/types"&gt;riak\_kv\_wm\_keylist
* &gt; href="/buckets"&gt;riak\_kv\_wm\_link\_walker
* &gt; href="/riak"&gt;riak\_kv\_wm\_link\_walker
* &gt; href="/types"&gt;riak\_kv\_wm\_link\_walker
* &gt; href="/mapred"&gt;riak\_kv\_wm\_mapred
* &gt; href="/buckets"&gt;riak\_kv\_wm\_object
* &gt; href="/riak"&gt;riak\_kv\_wm\_object
* &gt; href="/types"&gt;riak\_kv\_wm\_object
* &gt; href="/ping"&gt;riak\_kv\_wm\_ping
* &gt; href="/buckets"&gt;riak\_kv\_wm\_props
* &gt; href="/types"&gt;riak\_kv\_wm\_props
* &gt; href="/stats"&gt;riak\_kv\_wm\_stats
* &gt; href="/solr"&gt;riak\_solr\_indexer\_wm
* &gt; href="/solr"&gt;riak\_solr\_searcher\_wm

&gt;&gt;
&gt;&gt;
&gt;&gt; On Wed, Feb 5, 2014 at 7:26 PM, Eric Redmond  wrote:
&gt;&gt;
&gt;&gt;&gt; Are you certain you're running pre11, and also that search is activated
&gt;&gt;&gt; in the riak.conf file (search=on)?
&gt;&gt;&gt;
&gt;&gt;&gt; This error doesn't make any sense, and I can't replicate it :/ . It
&gt;&gt;&gt; looks like webmachine doesn't believe the path is correct, which should
&gt;&gt;&gt; only happen if yokozuna isn't registered.
&gt;&gt;&gt;
&gt;&gt;&gt; Can you curl http://localhost:8089/
&gt;&gt;&gt;
&gt;&gt;&gt; You should see at the bottom a list like this:
&gt;&gt;&gt;
&gt;&gt;&gt; \* yz\_wm\_extract
&gt;&gt;&gt; \* yz\_wm\_index
&gt;&gt;&gt; \* yz\_wm\_schema
&gt;&gt;&gt; \* yz\_wm\_search
&gt;&gt;&gt; \* yz\_wm\_search
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; On Feb 5, 2014, at 3:56 PM, Kartik Thakore  wrote:
&gt;&gt;&gt;
&gt;&gt;&gt; http://demo.aimedstat.com/foo2
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; On Wed, Feb 5, 2014 at 5:33 PM, Eric Redmond  wrote:
&gt;&gt;&gt;
&gt;&gt;&gt;&gt; How about adding the json content type header?
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; curl -XPUT "$RIAK\_HOST/search/index/famous"
&gt;&gt;&gt;&gt; -H'content-type:application/json'
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; On Feb 5, 2014, at 2:04 PM, Kartik Thakore 
&gt;&gt;&gt;&gt; wrote:
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; http://demo.aimedstat.com/foo
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; On Wed, Feb 5, 2014 at 4:44 PM, Eric Redmond wrote:
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Can you run:
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; curl -v -XPUT "$RIAK\_HOST/search/index/famous
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; To get all of the output?
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; On Feb 5, 2014, at 1:37 PM, Kartik Thakore 
&gt;&gt;&gt;&gt;&gt; wrote:
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Hmm I am running:
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; export RIAK\_HOST="http://localhost:8098"
&gt;&gt;&gt;&gt;&gt; curl -XPUT "$RIAK\_HOST/search/index/famous"
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; and I get:
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; 404 Not FoundNot
&gt;&gt;&gt;&gt;&gt; Found
===============

The requested document was not found on this
&gt;&gt;&gt;&gt;&gt; server.

---

mochiweb+webmachine web
&gt;&gt;&gt;&gt;&gt; server


&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; On Wed, Feb 5, 2014 at 1:14 PM, Eric Redmond 
&gt;&gt;&gt;&gt;&gt; wrote:
&gt;&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt;&gt; &gt; Sorry, clicked send too fast.
&gt;&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt;&gt; &gt; After creating the index, then you add the bucket property, pointing
&gt;&gt;&gt;&gt;&gt; to the search\_index.
&gt;&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt;&gt; &gt; curl -XPUT "$RIAK\_HOST/buckets/cats/props"
&gt;&gt;&gt;&gt;&gt; -H'content-type:application/json' 
&gt;&gt;&gt;&gt;&gt; -d'{"props":{"search\_index":"famous"}}'
&gt;&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt;&gt; &gt; Eric
&gt;&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt;&gt; &gt; On Feb 5, 2014, at 10:12 AM, Eric Redmond 
&gt;&gt;&gt;&gt;&gt; wrote:
&gt;&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt;&gt; &gt; http://docs.basho.com/riak/2.0.0pre11/dev/using/search/#Simple-Setup
&gt;&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt;&gt; &gt; curl -XPUT "$RIAK\_HOST/search/index/famous"
&gt;&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt;&gt; &gt; Eric
&gt;&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt;&gt; &gt; On Feb 5, 2014, at 10:08 AM, Kartik Thakore &lt;
&gt;&gt;&gt;&gt;&gt; thakore.kar...@gmail.com&gt; wrote:
&gt;&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt;&gt; &gt; What is the url to install search bucket indexes hooks on pre11?
&gt;&gt;&gt;&gt;&gt; &gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt;&gt;&gt;&gt; &gt; riak-users mailing list
&gt;&gt;&gt;&gt;&gt; &gt; riak-users@lists.basho.com
&gt;&gt;&gt;&gt;&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt;&gt; &gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt;&gt;&gt;&gt; &gt; riak-users mailing list
&gt;&gt;&gt;&gt;&gt; &gt; riak-users@lists.basho.com
&gt;&gt;&gt;&gt;&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt;&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

