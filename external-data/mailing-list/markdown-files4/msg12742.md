---
title: "Re: Riak occasionally not storing objects"
description: ""
project: community
lastmod: 2013-10-23T12:26:37-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12742"
mailinglist_parent_id: "msg12741"
author_name: "David Greenstein"
project_section: "mailinglistitem"
sent_date: 2013-10-23T12:26:37-07:00
---


Thank you for your quick responses.

Here are the bucket properties (using the default):

{"props":{"name”:"test","allow\_mult":false,"basic\_quorum":false,"big\_vclock":50,"chash\_keyfun":{"mod":"riak\_core\_util","fun":"chash\_std\_keyfun"},"dw":"quorum","last\_write\_wins":false,"linkfun":{"mod":"riak\_kv\_wm\_link\_walker","fun":"mapreduce\_linkfun"},"n\_val":3,"notfound\_ok":true,"old\_vclock":86400,"postcommit":[],"pr":0,"precommit":[],"pw":0,"r":"quorum","rw":"quorum","small\_vclock":50,"w":"quorum","young\_vclock":20}}

From the client perspective, the write call receives a success. There are no 
console or error log messages on the riak nodes at the time the issue occurs. 
Is there a lower level way to debug if the write succeeded?

The meta returned from the client:
{ host: '10.0.1.10',
 port: '8098',
 links: [],
 resource: 'riak',
 clientId: 'riak-js',
 contentEncoding: 'utf8',
 accept: 'multipart/mixed,application/json;q=0.7, \*/\*;q=0.5',
 callback: [Function],
 logger: undefined,
 encodeUri: false,
 bucket: ’test',
 key: '1382538564S9420',
 contentType: 'application/json',
 clientStream: undefined,
 \_headers: 
 { vary: 'Accept-Encoding',
 server: 'MochiWeb/1.1 WebMachine/1.10.0 (never breaks eye contact)',
 date: 'Wed, 23 Oct 2013 19:17:28 GMT',
 'content-type': 'application/json',
 'content-length': '0' },
 \_cacheHeaders: false,
 contentLength: '0',
 transferEncoding: undefined,
 vclock: undefined,
 lastMod: undefined,
 contentRange: undefined,
 acceptRanges: undefined,
 date: 'Wed, 23 Oct 2013 19:17:28 GMT',
 statusCode: 204 }

Thanks again!
Dave


On Oct 23, 2013, at 2:42 PM, Brian Sparrow  wrote:

&gt; In addition to Andrew’s question, what are the bucket properties for the 
&gt; bucket you are doing the writes against?
&gt; 
&gt; Thanks,
&gt; 
&gt; -- 
&gt; Brian Sparrow
&gt; Developer Advocate
&gt; Basho Technologies
&gt; 
&gt; Sent with Sparrow
&gt; 
&gt; On Wednesday, October 23, 2013 at 2:40 PM, Andrew Thompson wrote:
&gt; 
&gt;&gt; On Wed, Oct 23, 2013 at 02:36:11PM -0400, David Greenstein wrote:
&gt;&gt;&gt; 
&gt;&gt;&gt; Hello All,
&gt;&gt;&gt; 
&gt;&gt;&gt; I have a Riak cluster with 5 nodes on AWS m1.large instances, all using EBS 
&gt;&gt;&gt; deadline scheduling. The cluster is accessed via node.js and the riak-js 
&gt;&gt;&gt; library using the HTTP protocol. I’ve tried it with and without connection 
&gt;&gt;&gt; pooling. All software has been updated to the latest versions.
&gt;&gt;&gt; 
&gt;&gt;&gt; Occasionally, riak seems to not store an object I try to save. I have run 
&gt;&gt;&gt; tcpdump on the node receiving the request to ensure it is receiving the 
&gt;&gt;&gt; http packets with the correct JSON from the client. When the issue occurs 
&gt;&gt;&gt; the node is in fact receiving the request with the correct JSON.
&gt;&gt;&gt; 
&gt;&gt;&gt; Has anyone else experienced an issue like this? Any hints on how to debug 
&gt;&gt;&gt; the situation would be greatly appreciated.
&gt;&gt; 
&gt;&gt; What are your read and write quorums, and does the write report that it
&gt;&gt; suceeded?
&gt;&gt; 
&gt;&gt; Andrew
&gt;&gt; 
&gt;&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
&gt; 
&gt; \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

