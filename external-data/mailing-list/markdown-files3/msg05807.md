---
title: "Re: Incorect Input to Reduce"
description: ""
project: community
lastmod: 2011-11-30T07:11:30-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05807"
mailinglist_parent_id: "msg05804"
author_name: "Jonathan Langevin"
project_section: "mailinglistitem"
sent_date: 2011-11-30T07:11:30-08:00
---


Excellent tip Sean, works great for a similar issue I was having.
If I already had args being passed to my reduce phase though (such as when
calling Riak.reduceSlice), is it possible to specify only\_1 and still
ensure that my regular args pass through to the function as expected? For
instance, reduceSlice expects [int,int], which conflicts with
{"somearg":blah}.
My thought is to now encapsulate my original function call, but I want to
make sure I'm not missing something in Riak that already handles this issue.

 
\* Jonathan Langevin
Manager, Information Technology
Loom Inc.
Wilmington, NC: (910) 241-0433 - jlange...@loomlearning.com -
www.loomlearning.com - Skype: intel352 \*



On Wed, Nov 30, 2011 at 10:01 AM, Sean Cribbs  wrote:

> Hi Yehuda,
>
> Your reduce function is not guaranteed to run across all inputs in the
> first application, but may be applied many times as new inputs come in.
> Riak will batch up reduce inputs until a certain number or timeout is
> reached, then apply the function and take its output to be part of the
> inputs for the next application. If it is absolutely necessary to run the
> reduce function only once, use "reduce\_phase\_only\_1" as the "arg" (only
> works on Riak 1.0.x, example in Ruby):
>
> mr.reduce("function(v){...}", :arg => {:reduce\_phase\_only\_1 => true},
> :keep => true)
>
> Hope that helps!
>
> On Wed, Nov 30, 2011 at 9:03 AM, Yehuda Zargrov wrote:
>
>> Hi,\*\*\*\*
>>
>> \*\* \*\*
>>
>> I’ve posted a mail on this few days ago, but went a bit further since
>> then.\*\*\*\*
>>
>> \*\* \*\*
>>
>> I’m using ripple, running a map function on some input and getting a list
>> of about 50 items.\*\*\*\*
>>
>> \*\* \*\*
>>
>> Right after that, I’m running a reduce function. The first thing I do in
>> it is putting the length of v (the input) as an item in a list.\*\*\*\*
>>
>> \*\* \*\*
>>
>> When printing the result I see that the length is 13.\*\*\*\*
>>
>> \*\* \*\*
>>
>> It’s like something has happened between the map and reduce phases.\*\*\*\*
>>
>> \*\* \*\*
>>
>> Any ideas?\*\*\*\*
>>
>> \*\* \*\*
>>
>> \*\*\*\*
>>
>> [image: Description:
>> C:\Users\Yehuda\AppData\Roaming\Microsoft\Signatures\logo.gif]\*\*\*\*
>>
>> \*Yehuda Zargrov\*\*
>> \*Software Engineer\*\*\*\*
>>
>> \*Conduit Your Site\* \*\*\*\*
>>
>> \*t:\* 972.8.9461713 ext +314 | \*m:\* +972503473119 | \*f:\*
>> +97286382140 \*\*\*\*
>>
>>
>> This message may contain confidential and/or privileged information. It
>> is intended to be read only by the individual or entity to whom it is
>> addressed or by their designee.
>> If the reader of this message is not the intended recipient, you are on
>> notice that any uses, copy, disclose or distribution of this message, in
>> any form, is strictly prohibited.
>> If you have received this message in error, please notify the sender by
>> reply email or by telephone and delete or destroy any copy of this message.
>> Thank you.
>>
>> \*\*\*\*
>>
>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>> riak-users mailing list
>> riak-users@lists.basho.com
>> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>>
>>
>
>
> --
> Sean Cribbs 
> Developer Advocate
> Basho Technologies, Inc.
> http://www.basho.com/
>
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

