---
title: "Re: Cant load data after enabling indexing on bucket with precommit	hook"
description: ""
project: community
lastmod: 2012-01-25T07:44:12-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06408"
mailinglist_parent_id: "msg06405"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2012-01-25T07:44:12-08:00
---


Also note that on 1.0 and later you can set the "search" bucket property to
true and that will install the hook for you.

On Wed, Jan 25, 2012 at 9:51 AM, charlesugwuh wrote:

> I figured this out.
>
> So I'm using the https://github.com/basho/riak-php-client PHP Riak
> Client .
> I was using the setProperties method to set the commit hooks for the bucket
> to enable search.
>
> However, I was defining the bucket properties like so: '$prop\_arr =
> array('precommit' => array('mod' => 'riak\_search\_kv\_hook', 'fun' =>
> 'precommit'));' instead of like so: '$prop\_arr = array('precommit' =>
> array(array('mod' => 'riak\_search\_kv\_hook', 'fun' => 'precommit')));'.
>
> It's a very subtle difference but the first one creates this:
> '{"props":{"precommit":{"mod":"riak\_search\_kv\_hook","fun":"precommit"}}}'
> while the second creates this
>
> '{"props":{"precommit":[{"mod":"riak\_search\_kv\_hook","fun":"precommit"}]}}'.
> The difference is the square bracket and this threw the whole thing out of
> whack when it wasn't present.
>
> So now everything is working ok.
>
> --
> View this message in context:
> http://riak-users.197444.n3.nabble.com/Cant-load-data-after-enabling-indexing-on-bucket-with-precommit-hook-tp3686584p3687878.html
> Sent from the Riak Users mailing list archive at Nabble.com.
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>



-- 
Sean Cribbs 
Software Engineer
Basho Technologies, Inc.
http://basho.com/
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

