---
title: "Re: Receiving ulimit warning despite setting it"
description: ""
project: community
lastmod: 2013-05-15T21:25:25-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11086"
mailinglist_parent_id: "msg11085"
author_name: "Jared Morrow"
project_section: "mailinglistitem"
sent_date: 2013-05-15T21:25:25-07:00
---


Well the riak-cs / riak / stanchion scripts all drop privileges using sudo.
 On RHEL/Centos this sudo exec carries the settings from the calling user
(in the case of init.d, root) so things are fine there. On Ubuntu/Debian
that does not always work. So if you set the ulimit for the root user, it
might not propagate through to the riak-cs / riak / stanchion users.

So to change that, you should try to change it in /etc/security/limits.conf.


Good luck.
-Jared



On Wed, May 15, 2013 at 9:54 PM, Toby Corkindale <
toby.corkind...@strategicdata.com.au> wrote:

> I added some debugging to the /etc/init.d/riak-cs script.
> As far as it's concerned the ulimit has been successfully increased in
> there, right before it calls start-stop-daemon.
>
> Is it possible that part of the Debian infrastructure is dropping
> privileges?
>
>
> On 16/05/13 12:34, Toby Corkindale wrote:
>
>> I'm confused -- I'm still seeing some warnings from Riak/RiakCS about
>> the ulimit being set too low, even though I \*am\* increasing it.
>>
>> What am I doing wrong here?
>>
>>
>> # cat /etc/default/riak-cs
>> ulimit -n 32000
>>
>> # ulimit -n 8192
>> # service riak-cs start
>> !!!!
>> !!!! WARNING: ulimit -n is 1024; 4096 is the recommended minimum.
>> !!!!
>>
>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\*\*\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>> riak-users mailing list
>> riak-users@lists.basho.com
>> http://lists.basho.com/\*\*mailman/listinfo/riak-users\_\*\*lists.basho.com
>>
>
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\*\*\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/\*\*mailman/listinfo/riak-users\_\*\*lists.basho.com
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

