---
title: "Re: Question about Hooks & Nodes"
description: ""
project: community
lastmod: 2013-10-17T11:30:43-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12674"
mailinglist_parent_id: "msg12671"
author_name: "Sam Elliott"
project_section: "mailinglistitem"
sent_date: 2013-10-17T11:30:43-07:00
---


On Thursday, 17 October 2013 at 12:45PM, Eric Redmond wrote:
> Apologies that it's unclear, and I'll update the docs to correct this.
> 
> http://docs.basho.com/riak/latest/ops/advanced/install-custom-code/
> 
> When you install custom code, you must install that code on every node.
> 
> Eric
> 
> On Oct 17, 2013, at 9:17 AM, Tristan Foureur  (mailto:e...@me.com)> wrote:
> > Hi,
> > 
> > My question is simple, but really I cannot find a clear answer anywhere in 
> > the documentation. I understand how a cluster works, and how a hook works, 
> > but if you have a hook on a certain bucket and commit to a node on that 
> > bucket, is the hook triggered only on that node, on all the nodes, or only 
> > on the nodes that will actually host that key?
The hook is only triggered on one node, the write coordinator. 

This is not always the exact same node that you sent the request to. 

Because you can't predict which node the coordinator will be on, the code must 
be loaded on every single node, as Eric pointed out.

Sam 
> > 
> > I ask this because I deployed my pre-commit hook to one node only, and then 
> > sometimes the insert failed telling me my precommit hook was "undef", and 
> > it was fixed by deploying the hook to all vnodes.
> > 
> > Thanks! \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> > riak-users mailing list
> > riak-users@lists.basho.com (mailto:riak-users@lists.basho.com)
> > http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
> 
> 
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com (mailto:riak-users@lists.basho.com)
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com




\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

