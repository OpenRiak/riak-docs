---
title: "Re: riak-1.0.0pre2 segfaults"
description: ""
project: community
lastmod: 2011-09-12T18:42:33-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg04677"
mailinglist_parent_id: "msg04675"
author_name: "Mark Phillips"
project_section: "mailinglistitem"
sent_date: 2011-09-12T18:42:33-07:00
---


Thanks for the thorough report, Henrik!

We're looking into it and will let you know if we need any more info.

Mark

On Mon, Sep 12, 2011 at 1:09 PM, Henrik Johansen  wrote:
> Hello list,
>
> I have been playing with single node riak-1.0.0pre2 cluster & riaktant today
> and somehow I managed to get riak to segfault every time I tried using the
> MapReduce functions in riaktant.
>
> Riak-1.0.0pre2 was installed using the 64-bit Debian package on my
> Ubuntu 11.04 laptop - riaktant was pulled form GitHub.
>
> I have gathered some relevant info below - if I can assist in any way
> please let me know ...
>
> dmesg :
> [10488.941750] beam.smp[1496]: segfault at 7f4d61d73ff8 ip 00007f4d5ea7a83e
> sp 00007f4d61d74000 error 6 in erlang\_js\_drv.so[7f4d5ea35000+e6000]
> [10944.335495] beam.smp[4681]: segfault at 7fcda9892ff8 ip 00007fcda386783e
> sp 00007fcda9893000 error 6 in erlang\_js\_drv.so[7fcda3822000+e6000]
> [11658.589251] beam.smp[6604]: segfault at 7fee7166eff8 ip 00007fee6dc4983e
> sp 00007fee7166f000 error 6 in erlang\_js\_drv.so[7fee6dc04000+e6000]
>
> crash.log :
> 2011-09-12 21:49:03 =SUPERVISOR REPORT====
>     Supervisor: {local,riak\_pipe\_builder\_sup}
>     Context:    child\_terminated
>     Reason:
>
> {{modfun,riak\_search,mapred\_search,[<<"syslog">>,<<>>]},error,{badmatch,{error,{lucene\_parse,"syntax
>     error before:
>
> "}}},[{riak\_search\_client,parse\_query,3},{riak\_search,parse\_query,3},{riak\_search,mapred\_search,3},{riak\_kv\_mrc\_pipe,send\_inputs,3},{riak\_kv\_mrc\_pipe,'-send\_inputs\_async/3-fun-0-',3}]}
>     Offender:
>
> [{pid,<0.1556.0>},{name,undefined},{mfargs,{riak\_pipe\_builder,start\_link,undefined}},{restart\_type,temporary},{shutdown,brutal\_kill},{child\_type,worker}]
>
> 2011-09-12 21:49:03 =SUPERVISOR REPORT====
>     Supervisor: {local,riak\_pipe\_fitting\_sup}
>     Context:    child\_terminated
>     Reason:
>
> {{modfun,riak\_search,mapred\_search,[<<"syslog">>,<<>>]},error,{badmatch,{error,{lucene\_parse,"syntax
>     error before:
>
> "}}},[{riak\_search\_client,parse\_query,3},{riak\_search,parse\_query,3},{riak\_search,mapred\_search,3},{riak\_kv\_mrc\_pipe,send\_inputs,3},{riak\_kv\_mrc\_pipe,'-send\_inputs\_async/3-fun-0-',3}]}
>     Offender:
>
> [{pid,<0.1558.0>},{name,undefined},{mfargs,{riak\_pipe\_fitting,start\_link,undefined}},{restart\_type,temporary},{shutdown,2000},{child\_type,worker}]
>
> 2011-09-12 21:49:03 =SUPERVISOR REPORT====
>     Supervisor: {local,riak\_pipe\_fitting\_sup}
>     Context:    child\_terminated
>     Reason:
>
> {{modfun,riak\_search,mapred\_search,[<<"syslog">>,<<>>]},error,{badmatch,{error,{lucene\_parse,"syntax
>     error before:
>
> "}}},[{riak\_search\_client,parse\_query,3},{riak\_search,parse\_query,3},{riak\_search,mapred\_search,3},{riak\_kv\_mrc\_pipe,send\_inputs,3},{riak\_kv\_mrc\_pipe,'-send\_inputs\_async/3-fun-0-',3}]}
>     Offender:
>
> [{pid,<0.1559.0>},{name,undefined},{mfargs,{riak\_pipe\_fitting,start\_link,undefined}},{restart\_type,temporary},{shutdown,2000},{child\_type,worker}]
>
> 2011-09-12 21:49:03 =SUPERVISOR REPORT====
>     Supervisor: {local,riak\_pipe\_fitting\_sup}
>     Context:    child\_terminated
>     Reason:
>
> {{modfun,riak\_search,mapred\_search,[<<"syslog">>,<<>>]},error,{badmatch,{error,{lucene\_parse,"syntax
>     error before:
>
> "}}},[{riak\_search\_client,parse\_query,3},{riak\_search,parse\_query,3},{riak\_search,mapred\_search,3},{riak\_kv\_mrc\_pipe,send\_inputs,3},{riak\_kv\_mrc\_pipe,'-send\_inputs\_async/3-fun-0-',3}]}
>     Offender:
>
> [{pid,<0.1557.0>},{name,undefined},{mfargs,{riak\_pipe\_fitting,start\_link,undefined}},{restart\_type,temporary},{shutdown,2000},{child\_type,worker}]
>
> error.log :
> 2011-09-12 21:49:03.025 [error] <0.132.0> Supervisor riak\_pipe\_builder\_sup
> had child at module undefined at <0.1556.0> exit with reason
> {{modfun,riak\_search,mapred\_search,[<<"syslog">>,<<>>]},error,{badmatch,{error,{lucene\_parse,"syntax
> error before:
> "}}},[{riak\_search\_client,parse\_query,3},{riak\_search,parse\_query,3},{riak\_search,mapred\_search,3},{riak\_kv\_mrc\_pipe,send\_inputs,3},{riak\_kv\_mrc\_pipe,'-send\_inputs\_async/3-fun-0-',3}]}
> in context child\_terminated
> 2011-09-12 21:49:03.028 [error] <0.133.0> Supervisor riak\_pipe\_fitting\_sup
> had child at module undefined at <0.1558.0> exit with reason
> {{modfun,riak\_search,mapred\_search,[<<"syslog">>,<<>>]},error,{badmatch,{error,{lucene\_parse,"syntax
> error before:
> "}}},[{riak\_search\_client,parse\_query,3},{riak\_search,parse\_query,3},{riak\_search,mapred\_search,3},{riak\_kv\_mrc\_pipe,send\_inputs,3},{riak\_kv\_mrc\_pipe,'-send\_inputs\_async/3-fun-0-',3}]}
> in context child\_terminated
> 2011-09-12 21:49:03.031 [error] <0.133.0> Supervisor riak\_pipe\_fitting\_sup
> had child at module undefined at <0.1559.0> exit with reason
> {{modfun,riak\_search,mapred\_search,[<<"syslog">>,<<>>]},error,{badmatch,{error,{lucene\_parse,"syntax
> error before:
> "}}},[{riak\_search\_client,parse\_query,3},{riak\_search,parse\_query,3},{riak\_search,mapred\_search,3},{riak\_kv\_mrc\_pipe,send\_inputs,3},{riak\_kv\_mrc\_pipe,'-send\_inputs\_async/3-fun-0-',3}]}
> in context child\_terminated
> 2011-09-12 21:49:03.033 [error] <0.133.0> Supervisor riak\_pipe\_fitting\_sup
> had child at module undefined at <0.1557.0> exit with reason
> {{modfun,riak\_search,mapred\_search,[<<"syslog">>,<<>>]},error,{badmatch,{error,{lucene\_parse,"syntax
> error before:
> "}}},[{riak\_search\_client,parse\_query,3},{riak\_search,parse\_query,3},{riak\_search,mapred\_search,3},{riak\_kv\_mrc\_pipe,send\_inputs,3},{riak\_kv\_mrc\_pipe,'-send\_inputs\_async/3-fun-0-',3}]}
> in context child\_terminated
>
> /HenrikJ
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

