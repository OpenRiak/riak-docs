---
title: "Re: riak is not starting but no error is logged"
description: ""
project: community
lastmod: 2012-09-24T06:24:21-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08670"
mailinglist_parent_id: "msg08667"
author_name: "kamiseq"
project_section: "mailinglistitem"
sent_date: 2012-09-24T06:24:21-07:00
---


ok

as for double name I already look at that before writing here and I
really couldnt find another machine running riak with same name within
my subnet. I guess if I change default riak@my\_ip to something like
riak12345@my\_ip it should be fine and part before @ has nothing to do
with system user, right?

I ll try to change cookie.

thanks for replay

pozdrawiam
Paweł Kamiński

kami...@gmail.com
pkaminski....@gmail.com
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_


On 24 September 2012 15:11, Kresten Krab Thorup  wrote:
> You got two errors.
>
> 1. "too short cookie", try deleting your ~/.erlang.cookie and retry. Perhaps 
> if you edited your etc/vm.args -setcookie parameter, you can try to change 
> that.
> 2. duplicate\_name is because you have two erlang instances running with the 
> same -name parameter, each erlang vm is registered with a name server, and 
> this error says that you have two erlang vms running that register them 
> selves using the same name,
>
> Kresten
> Trifork
>
> On Sep 24, 2012, at 2:32 PM, kamiseq 
> > wrote:
>
> hej,
> I would really appreciate any feedback on this.
> maybe im missing something in official tutorials.
>
> google search result shows very basic scenarios.
>
> I had no problem running pre-configured 4 nodes on one machine.
>
> pozdrawiam
> Paweł Kamiński
>
> kami...@gmail.com
> pkaminski....@gmail.com
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>
>
> On 22 September 2012 12:49, kamiseq  wrote:
> hej,
> I couldn't find much about error i have so Im bit frustrated
>
> the bacground is :
> Im using centos 6.3 hosted locally on virtualbox, I ve followed
> instructions how to install riak from
> http://wiki.basho.com/Installing-on-RHEL-and-CentOS.html#From-source
> and compiled riak from sources because I use 32bit machine.
>
> I ve also followed instructions how to run cluster on one machine from
> dev directory and it worked for me.
> on clean system image I ve installed erlang and riak again but this
> time I issued make rel command only. I ve installed erlang and riak
> using my, no-root user, same as setting dev environment.
>
> I ve followed http://wiki.basho.com/Basic-Cluster-Setup.html
> firstly I tried to stop node issuing bin/riak stop and I got
> [squid@localhost riak]$ bin/riak stop
>
> =ERROR REPORT==== 22-Sep-2012::11:57:53 ===
> Too short cookie stringescript: exception error: no match of right
> hand side value
> {error,
> {shutdown,
> {child,undefined,net\_sup\_dynamic,
> {erl\_distribution,start\_link,
> [['riak\_maint\_3920@192.168.0.103',
> longnames]]},
> permanent,1000,supervisor,
> [erl\_distribution]}}}
>
> anyway I ve updated app.config to my machine ip. (I can connect to
> this machine using the ip from utside so I guess this is not a
> problem.) I have change vm.args and changes -name to name
> riak@192.168.0.103
>
> now when I try to start riak issuing bin/riak start it tells that
> # bin/riak start
> Riak failed to start within 15 seconds,
> see the output of 'riak console' for more information.
> If you want to wait longer, set the environment variable
> WAIT\_FOR\_ERLANG to the number of seconds to wait.
>
> and yes
>
> # bin/riak-admin status
> Node is not running!
>
> but greping ps # ps aux | grep riak I got this
>
> myuser 3501 0.0 0.0 2260 384 ? S 11:30 0:00
> /usr/local/riak/riak/erts-5.9.1/bin/epmd -daemon
> myuser 3518 0.4 3.2 31672 19736 pts/2 Ssl+ 11:30 0:07
> /usr/local/riak/riak/erts-5.9.1/bin/beam -K true -A 64 -W w -- -root
> /usr/local/riak/riak -progname riak -- -home /home/myuser -- -boot
> /usr/local/riak/riak/releases/1.2.0/riak -embedded -config
> /usr/local/riak/riak/etc/app.config -pa ./lib/basho-patches -name
> riak@192.168.0.103 -setcookie riak -- console
> myuser 5074 0.0 0.0 1996 488 ? Ss 12:27 0:00
> /usr/local/riak/riak/lib/os\_mon-2.2.9/priv/bin/memsup
> myuser 5075 0.0 0.0 1992 364 ? Ss 12:27 0:00
> /usr/local/riak/riak/lib/os\_mon-2.2.9/priv/bin/cpu\_sup
>
> in console.log I have found only this
> 2012-09-22 12:00:01.418 [info] <0.7.0> Application lager started on
> node 'riak@192.168.0.103'
> 2012-09-22 12:00:01.549 [info]
> <0.148.0>@riak\_core\_ring\_manager:reload\_ring:226 Upgrading legacy ring
> 2012-09-22 12:00:01.737 [info]
> <0.154.0>@riak\_core\_capability:process\_capability\_changes:528 New
> capability: {riak\_core,vnode\_routing} = proxy
> 2012-09-22 12:00:01.748 [info]
> <0.154.0>@riak\_core\_capability:process\_capability\_changes:528 New
> capability: {riak\_core,staged\_joins} = true
> 2012-09-22 12:00:01.752 [info] <0.7.0> Application riak\_core started
> on node 'riak@192.168.0.103'
> 2012-09-22 12:00:01.815 [info]
> <0.263.0>@riak\_core:wait\_for\_application:425 Waiting for application
> riak\_pipe to start (0 seconds).
> 2012-09-22 12:00:01.817 [info] <0.7.0> Application riak\_pipe started
> on node 'riak@192.168.0.103'
> 2012-09-22 12:00:01.871 [info]
> <0.272.0>@riak\_core:wait\_for\_service:445 Waiting for service riak\_kv
> to start (0 seconds)
> 2012-09-22 12:00:01.918 [info]
> <0.263.0>@riak\_core:wait\_for\_application:419 Wait complete for
> application riak\_pipe (0 seconds)
> 2012-09-22 12:00:01.963 [info] <0.284.0>@riak\_kv\_js\_vm:init:76
> Spidermonkey VM (thread stack: 16MB, max heap: 8MB, pool:
> riak\_kv\_js\_map) host starting (<0.284.0>)
> 2012-09-22 12:00:01.970 [info] <0.299.0>@riak\_kv\_js\_vm:init:76
> Spidermonkey VM (thread stack: 16MB, max heap: 8MB, pool:
> riak\_kv\_js\_map) host starting (<0.299.0>)
> 2012-09-22 12:00:01.982 [info] <0.306.0>@riak\_kv\_js\_vm:init:76
> Spidermonkey VM (thread stack: 16MB, max heap: 8MB, pool:
> riak\_kv\_js\_map) host starting (<0.306.0>)
> 2012-09-22 12:00:01.999 [info] <0.333.0>@riak\_kv\_js\_vm:init:76
> Spidermonkey VM (thread stack: 16MB, max heap: 8MB, pool:
> riak\_kv\_js\_map) host starting (<0.333.0>)
> 2012-09-22 12:00:02.007 [info] <0.389.0>@riak\_kv\_js\_vm:init:76
> Spidermonkey VM (thread stack: 16MB, max heap: 8MB, pool:
> riak\_kv\_js\_map) host starting (<0.389.0>)
> 2012-09-22 12:00:02.020 [info] <0.395.0>@riak\_kv\_js\_vm:init:76
> Spidermonkey VM (thread stack: 16MB, max heap: 8MB, pool:
> riak\_kv\_js\_map) host starting (<0.395.0>)
> 2012-09-22 12:00:02.029 [info] <0.418.0>@riak\_kv\_js\_vm:init:76
> Spidermonkey VM (thread stack: 16MB, max heap: 8MB, pool:
> riak\_kv\_js\_map) host starting (<0.418.0>)
> 2012-09-22 12:00:02.037 [info] <0.419.0>@riak\_kv\_js\_vm:init:76
> Spidermonkey VM (thread stack: 16MB, max heap: 8MB, pool:
> riak\_kv\_js\_map) host starting (<0.419.0>)
> 2012-09-22 12:00:02.053 [info] <0.421.0>@riak\_kv\_js\_vm:init:76
> Spidermonkey VM (thread stack: 16MB, max heap: 8MB, pool:
> riak\_kv\_js\_reduce) host starting (<0.421.0>)
> 2012-09-22 12:00:02.070 [info] <0.422.0>@riak\_kv\_js\_vm:init:76
> Spidermonkey VM (thread stack: 16MB, max heap: 8MB, pool:
> riak\_kv\_js\_reduce) host starting (<0.422.0>)
> 2012-09-22 12:00:02.082 [info] <0.423.0>@riak\_kv\_js\_vm:init:76
> Spidermonkey VM (thread stack: 16MB, max heap: 8MB, pool:
> riak\_kv\_js\_reduce) host starting (<0.423.0>)
> 2012-09-22 12:00:02.093 [info] <0.424.0>@riak\_kv\_js\_vm:init:76
> Spidermonkey VM (thread stack: 16MB, max heap: 8MB, pool:
> riak\_kv\_js\_reduce) host starting (<0.424.0>)
> 2012-09-22 12:00:02.106 [info] <0.425.0>@riak\_kv\_js\_vm:init:76
> Spidermonkey VM (thread stack: 16MB, max heap: 8MB, pool:
> riak\_kv\_js\_reduce) host starting (<0.425.0>)
> 2012-09-22 12:00:02.119 [info] <0.426.0>@riak\_kv\_js\_vm:init:76
> Spidermonkey VM (thread stack: 16MB, max heap: 8MB, pool:
> riak\_kv\_js\_reduce) host starting (<0.426.0>)
> 2012-09-22 12:00:02.130 [info] <0.428.0>@riak\_kv\_js\_vm:init:76
> Spidermonkey VM (thread stack: 16MB, max heap: 8MB, pool:
> riak\_kv\_js\_hook) host starting (<0.428.0>)
> 2012-09-22 12:00:02.141 [info] <0.429.0>@riak\_kv\_js\_vm:init:76
> Spidermonkey VM (thread stack: 16MB, max heap: 8MB, pool:
> riak\_kv\_js\_hook) host starting (<0.429.0>)
> 2012-09-22 12:00:02.258 [info]
> <0.154.0>@riak\_core\_capability:process\_capability\_changes:528 New
> capability: {riak\_kv,vnode\_vclocks} = true
> 2012-09-22 12:00:02.277 [info]
> <0.154.0>@riak\_core\_capability:process\_capability\_changes:528 New
> capability: {riak\_kv,legacy\_keylisting} = false
> 2012-09-22 12:00:02.303 [info]
> <0.154.0>@riak\_core\_capability:process\_capability\_changes:528 New
> capability: {riak\_kv,listkeys\_backpressure} = true
> 2012-09-22 12:00:02.328 [info]
> <0.154.0>@riak\_core\_capability:process\_capability\_changes:528 New
> capability: {riak\_kv,mapred\_system} = pipe
> 2012-09-22 12:00:02.351 [info]
> <0.154.0>@riak\_core\_capability:process\_capability\_changes:528 New
> capability: {riak\_kv,mapred\_2i\_pipe} = true
> 2012-09-22 12:00:02.430 [info]
> <0.530.0>@riak\_core:wait\_for\_application:425 Waiting for application
> riak\_kv to start (0 seconds).
> 2012-09-22 12:00:02.474 [info] <0.7.0> Application riak\_kv started on
> node 'riak@192.168.0.103'
> 2012-09-22 12:00:02.514 [info] <0.7.0> Application merge\_index started
> on node 'riak@192.168.0.103'
> 2012-09-22 12:00:02.529 [info] <0.7.0> Application riak\_search started
> on node 'riak@192.168.0.103'
> 2012-09-22 12:00:02.544 [info]
> <0.530.0>@riak\_core:wait\_for\_application:419 Wait complete for
> application riak\_kv (0 seconds)
> 2012-09-22 12:00:02.632 [info] <0.7.0> Application riak\_api started on
> node 'riak@192.168.0.103'
> 2012-09-22 12:00:02.660 [info] <0.7.0> Application cluster\_info
> started on node 'riak@192.168.0.103'
> 2012-09-22 12:00:02.706 [info] <0.7.0> Application riak\_control
> started on node 'riak@192.168.0.103'
> 2012-09-22 12:00:02.707 [info] <0.7.0> Application erlydtl started on
> node 'riak@192.168.0.103'
> 2012-09-22 12:00:03.200 [info]
> <0.272.0>@riak\_core:wait\_for\_service:439 Wait complete for service
> riak\_kv (1 seconds)
>
> and in erlang.log.1
>
> =====
> ===== LOGGING STARTED Sat Sep 22 11:59:59 CEST 2012
> =====
> Exec: /usr/local/riak/riak/erts-5.9.1/bin/erlexec -boot
> /usr/local/riak/riak/releases/1.2.0/riak -embedded
> -config
> /usr/local/riak/riak/etc/app.config -pa
> ./lib/basho-patches -args\_file /usr/local/riak/
> riak/etc/vm.args -- console
> Root: /usr/local/riak/riak
> Erlang R15B01 (erts-5.9.1) [source] [async-threads:64] [hipe] 
> [kernel-poll:true]
>
> \*\* ./lib/basho-patches/etop\_txt.beam hides
> /usr/local/riak/riak/lib/observer-1.1/ebin/etop\_txt.beam
> \*\* /usr/local/riak/riak/lib/observer-1.1/ebin/etop\_txt.beam hides
> /usr/local/riak/riak/lib/basho-patches/etop\_txt.beam
> \*\* Found 2 name clashes in code paths
> 12:00:01.418 [info] Application lager started on node 'riak@192.168.0.103'
> 12:00:01.549 [info] Upgrading legacy ring
> 12:00:01.737 [info] New capability: {riak\_core,vnode\_routing} = proxy
> 12:00:01.748 [info] New capability: {riak\_core,staged\_joins} = true
> 12:00:01.752 [info] Application riak\_core started on node 'riak@192.168.0.103'
> 12:00:01.815 [info] Waiting for application riak\_pipe to start (0 seconds).
> 12:00:01.817 [info] Application riak\_pipe started on node 'riak@192.168.0.103'
> 12:00:01.871 [info] Waiting for service riak\_kv to start (0 seconds)
> 12:00:01.918 [info] Wait complete for application riak\_pipe (0 seconds)
> 12:00:01.963 [info] Spidermonkey VM (thread stack: 16MB, max heap:
> 8MB, pool: riak\_kv\_js\_map) host starting (<0.284.0>)
> 12:00:01.970 [info] Spidermonkey VM (thread stack: 16MB, max heap:
> 8MB, pool: riak\_kv\_js\_map) host starting (<0.299.0>)
> 12:00:01.982 [info] Spidermonkey VM (thread stack: 16MB, max heap:
> 8MB, pool: riak\_kv\_js\_map) host starting (<0.306.0>)
> 12:00:01.999 [info] Spidermonkey VM (thread stack: 16MB, max heap:
> 8MB, pool: riak\_kv\_js\_map) host starting (<0.333.0>)
> 12:00:02.007 [info] Spidermonkey VM (thread stack: 16MB, max heap:
> 8MB, pool: riak\_kv\_js\_map) host starting (<0.389.0>)
> 12:00:02.020 [info] Spidermonkey VM (thread stack: 16MB, max heap:
> 8MB, pool: riak\_kv\_js\_map) host starting (<0.395.0>)
> 12:00:02.029 [info] Spidermonkey VM (thread stack: 16MB, max heap:
> 8MB, pool: riak\_kv\_js\_map) host starting (<0.418.0>)
> 12:00:02.037 [info] Spidermonkey VM (thread stack: 16MB, max heap:
> 8MB, pool: riak\_kv\_js\_map) host starting (<0.419.0>)
> 12:00:02.053 [info] Spidermonkey VM (thread stack: 16MB, max heap:
> 8MB, pool: riak\_kv\_js\_reduce) host starting (<0.421.0>)
> 12:00:02.070 [info] Spidermonkey VM (thread stack: 16MB, max heap:
> 8MB, pool: riak\_kv\_js\_reduce) host starting (<0.422.0>)
> 12:00:02.082 [info] Spidermonkey VM (thread stack: 16MB, max heap:
> 8MB, pool: riak\_kv\_js\_reduce) host starting (<0.423.0>)
> 12:00:02.093 [info] Spidermonkey VM (thread stack: 16MB, max heap:
> 8MB, pool: riak\_kv\_js\_reduce) host starting (<0.424.0>)
> 12:00:02.106 [info] Spidermonkey VM (thread stack: 16MB, max heap:
> 8MB, pool: riak\_kv\_js\_reduce) host starting (<0.425.0>)
> 12:00:02.119 [info] Spidermonkey VM (thread stack: 16MB, max heap:
> 8MB, pool: riak\_kv\_js\_reduce) host starting (<0.426.0>)
> 12:00:02.130 [info] Spidermonkey VM (thread stack: 16MB, max heap:
> 8MB, pool: riak\_kv\_js\_hook) host starting (<0.428.0>)
> 12:00:02.141 [info] Spidermonkey VM (thread stack: 16MB, max heap:
> 8MB, pool: riak\_kv\_js\_hook) host starting (<0.429.0>)
> 12:00:02.258 [info] New capability: {riak\_kv,vnode\_vclocks} = true
> 12:00:02.277 [info] New capability: {riak\_kv,legacy\_keylisting} = false
> 12:00:02.303 [info] New capability: {riak\_kv,listkeys\_backpressure} = true
> 12:00:02.328 [info] New capability: {riak\_kv,mapred\_system} = pipe
> 12:00:02.351 [info] New capability: {riak\_kv,mapred\_2i\_pipe} = true
> 12:00:02.430 [info] Waiting for application riak\_kv to start (0 seconds).
> 12:00:02.474 [info] Application riak\_kv started on node 'riak@192.168.0.103'
> 12:00:02.514 [info] Application merge\_index started on node 
> 'riak@192.168.0.103'
> 12:00:02.529 [info] Application riak\_search started on node 
> 'riak@192.168.0.103'
> 12:00:02.544 [info] Wait complete for application riak\_kv (0 seconds)
> 12:00:02.632 [info] Application riak\_api started on node 'riak@192.168.0.103'
> 12:00:02.660 [info] Application cluster\_info started on node
> 'riak@192.168.0.103'
> 12:00:02.706 [info] Application riak\_control started on node
> 'riak@192.168.0.103'
> 12:00:02.707 [info] Application erlydtl started on node 'riak@192.168.0.103'
> Eshell V5.9.1 (abort with ^G)
>
> \*\* Found 2 name clashes in code paths is something suspicious but I
> cannot find anything on this :/
>
> when I run bin/riak-admin chkconfig it tells me it is ok
> when I run bin/riak ping I get again
> Too short cookie stringescript: exception error: no match of right
> hand side value
> {error,
> {shutdown,
> {child,undefined,net\_sup\_dynamic,
> {erl\_distribution,start\_link,
> [['riak\_maint\_3920@192.168.0.103',
> longnames]]},
> permanent,1000,supervisor,
> [erl\_distribution]}}}
>
> I tried to run bin/riak console and this time I got
> # bin/riak console
> Exec: /usr/local/riak/riak/erts-5.9.1/bin/erlexec -boot
> /usr/local/riak/riak/releases/1.2.0/riak -embedded -config
> /usr/local/riak/riak/etc/app.config -pa
> ./lib/basho-patches -args\_file
> /usr/local/riak/riak/etc/vm.args -- console
> Root: /usr/local/riak/riak
> {error\_logger,{{2012,9,22},{12,24,23}},"Protocol: ~p: register error:
> ~p~n",["inet\_tcp",{{badmatch,{error,duplicate\_name}},[{inet\_tcp\_dist,listen,1,[{file,"inet\_tcp\_dist.erl"},{line,70}]},{net\_kernel,start\_protos,4,[{file,"net\_kernel.erl"},{line,1314}]},{net\_kernel,start\_protos,3,[{file,"net\_kernel.erl"},{line,1307}]},{net\_kernel,init\_node,2,[{file,"net\_kernel.erl"},{line,1197}]},{net\_kernel,init,1,[{file,"net\_kernel.erl"},{line,357}]},{gen\_server,init\_it,6,[{file,"gen\_server.erl"},{line,304}]},{proc\_lib,init\_p\_do\_apply,3,[{file,"proc\_lib.erl"},{line,227}]}]}]}
> {error\_logger,{{2012,9,22},{12,24,23}},crash\_report,[[{initial\_call,{net\_kernel,init,['Argument\_\_1']}},{pid,<0.20.0>},{registered\_name,[]},{error\_info,{exit,{error,badarg},[{gen\_server,init\_it,6,[{file,"gen\_server.erl"},{line,320}]},{proc\_lib,init\_p\_do\_apply,3,[{file,"proc\_lib.erl"},{line,227}]}]}},{ancestors,[net\_sup,kernel\_sup,<0.10.0>]},{messages,[]},{links,[#Port<0.229>,<0.17.0>]},{dictionary,[{longnames,true}]},{trap\_exit,true},{status,running},{heap\_size,987},{stack\_size,24},{reductions,492}],[]]}
> {error\_logger,{{2012,9,22},{12,24,23}},supervisor\_report,[{supervisor,{local,net\_sup}},{errorContext,start\_error},{reason,{'EXIT',nodistribution}},{offender,[{pid,undefined},{name,net\_kernel},{mfargs,{net\_kernel,start\_link,[['riak@192.168.0.103',longnames]]}},{restart\_type,permanent},{shutdown,2000},{child\_type,worker}]}]}
> {error\_logger,{{2012,9,22},{12,24,23}},supervisor\_report,[{supervisor,{local,kernel\_sup}},{errorContext,start\_error},{reason,shutdown},{offender,[{pid,undefined},{name,net\_sup},{mfargs,{erl\_distribution,start\_link,[]}},{restart\_type,permanent},{shutdown,infinity},{child\_type,supervisor}]}]}
> {error\_logger,{{2012,9,22},{12,24,23}},std\_info,[{application,kernel},{exited,{shutdown,{kernel,start,[normal,[]]}}},{type,permanent}]}
> {"Kernel pid 
> terminated",application\_controller,"{application\_start\_failure,kernel,{shutdown,{kernel,start,[normal,[]]}}}"}
>
> and again there is an information that
> "inet\_tcp",{{badmatch,{error,duplicate\_name}} but I cannot figure it
> out what is causing the problem
>
> when I killed -9 all process related to riak and start again riak with
> bin/riak console then I get the same output that I have in
> log/erlang.log.1 with
> \*\* Found 2 name clashes in code paths at begining
>
> any idea what I am doing wrong?? maybe this is because of VM??
> thanks for any ideas
>
> pozdrawiam
> Paweł Kamiński
>
> kami...@gmail.com
> pkaminski....@gmail.com
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>
>
>
> Mobile: + 45 2343 4626 | Skype: krestenkrabthorup | Twitter: @drkrab
> Trifork A/S | Margrethepladsen 4 | DK- 8000 Aarhus C | Phone : +45 8732 
> 8787 | www.trifork.com
>
>
>
>

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

