---
title: "Riak crashing with {lucene_parse,"syntax error before: "AND""}"
description: ""
project: community
lastmod: 2011-11-07T10:13:54-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05453"
author_name: "Spike Gronim"
project_section: "mailinglistitem"
sent_date: 2011-11-07T10:13:54-08:00
---


Hello,

My Riak servers are misbehaving when users enter invalid queries. The 
gen\_server erlang process for the PB transport dies but the overall OS level 
process is still alive. I am exclusively using PB to access Riak, so everything 
grinds to a halt. I plan to work around this by writing a Riak nanny that 
verifies that somebody is listening on the PB port every 60s, but I think that 
this is actually a bug in Riak. I have tried to find other references to this 
bug in the mailing list archive and bugzilla but haven't found any. If this is 
really a bug I will write up a more detailed repro in bugzilla. Thanks.


Crash report: https://gist.github.com/82eaaa8fa8a994999872

Spike Gronim
sp...@wavii.com



\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

