---
title: "Re: has_many :through"
description: ""
project: community
lastmod: 2011-02-11T13:01:06-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02284"
mailinglist_parent_id: "msg02283"
author_name: "Mat Ellis"
project_section: "mailinglistitem"
sent_date: 2011-02-11T13:01:06-08:00
---


We're using the links and was going to implement pretty much what you 
recommend. It wouldn't seem to hard to implement this kind feature via some 
meta-programming in Ripple, another one for the feature backlog maybe.

Thanks

M.

On Feb 11, 2011, at 12:56 PM, Sean Cribbs wrote:

> Mat,
> 
> In Riak you would implement this pattern with links. Ripple helps you do 
> similar queries to has\_many :through, but there is no automatic thing for it 
> yet (it needs some more thought). In the meantime, do this:
> 
> class Publisher
> include Ripple::Document
> many :authors
> 
> def books
> authors.map {|a| a.books }.flatten
> end
> end
> 
> Sean Cribbs 
> Developer Advocate
> Basho Technologies, Inc.
> http://basho.com/
> 
> On Feb 11, 2011, at 3:39 PM, Mat Ellis wrote:
> 
>> We're still thoroughly in an ActiveRecord mindset over here. Before we go 
>> and build some simple collect statements to replace a few has\_many :through 
>> statements, is there some Ripple or Riak goodness we should be using instead?
>> 
>> Example:
>> 
>> \* A Publisher has many Authors who have many Books
>> \* We want to get a set of books for a given publisher
>> \* In ActiveRecord we would say:
>> 
>> # publisher.rb
>> class Publisher < ActiveRecord::Base
>> has\_many :authors
>> has\_many :books, :through => authors
>> end
>> 
>> # author.rb
>> class Author < ActiveRecord::Base
>> belongs\_to :publisher
>> has\_many :books
>> end
>> 
>> # book.rb
>> class Book < ActiveRecord::Base
>> belongs\_to :author
>> end
>> 
>> Thanks
>> 
>> M.
>> 
>> 
>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>> riak-users mailing list
>> riak-users@lists.basho.com
>> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
> 


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

