---
title: "Re: Very slow acquisition time (99 percentile) while fast median times"
description: ""
project: community
lastmod: 2016-05-02T08:55:35-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17276"
mailinglist_parent_id: "msg17275"
author_name: "Luke Bakken"
project_section: "mailinglistitem"
sent_date: 2016-05-02T08:55:35-07:00
---


Guillaume -

Some colleagues had me carefully re-read those stats. You'll notice
that those "put" stats are only for consistent or write\_once
operations, so they don't apply to you.

Your read stats show objects well within Riak's recommended object size:

node\_get\_fsm\_objsize\_100 : 10916
node\_get\_fsm\_objsize\_95 : 7393
node\_get\_fsm\_objsize\_99 : 8845
node\_get\_fsm\_objsize\_mean : 4098
node\_get\_fsm\_objsize\_median : 3891

So that is not the issue.

Are you using Bitcask? If so, please apply these sysctl settings:

http://docs.basho.com/riak/kv/2.1.4/using/performance/#optional-i-o-settings

If you are using the default "vm.dirty\_\*" settings Linux will appear
to pause as it flushes disk buffers to the underlying device. The
settings in the document change this so that flushes happen more often
and asynchronously.

--
Luke Bakken
Engineer
lbak...@basho.com


On Mon, May 2, 2016 at 8:43 AM, Guillaume Boddaert
 wrote:
> Here we go for a complete round of my hosts, all are objsize : 0
>
> Here is a sample answer (headers only, that are followed by the full set of
> JSON content) from the RIAK5 host
>
> HTTP/1.1 200 OK
> X-Riak-Vclock: a85hYGBgzGDKBVI8xTxKnGbpn7QYuPafyWBKZMxjZXjyYfYFviwA
> Vary: Accept-Encoding
> Server: MochiWeb/1.1 WebMachine/1.10.8 (that head fake, tho)
> Link: ; rel="up"
> Last-Modified: Mon, 02 May 2016 15:40:20 GMT
> ETag: "2l2QODpewyBZQFqDnyEy3F"
> Date: Mon, 02 May 2016 15:40:20 GMT
> Content-Type: application/json
> Content-Length: 10722
>
> Below the riak-admin status output.
>
>
> admin@riak1:~$ sudo riak-admin status | grep -e 'objsize' | grep 'put'
> consistent\_put\_objsize\_100 : 0
> consistent\_put\_objsize\_95 : 0
> consistent\_put\_objsize\_99 : 0
> consistent\_put\_objsize\_mean : 0
> consistent\_put\_objsize\_median : 0
> write\_once\_put\_objsize\_100 : 0
> write\_once\_put\_objsize\_95 : 0
> write\_once\_put\_objsize\_99 : 0
> write\_once\_put\_objsize\_mean : 0
> write\_once\_put\_objsize\_median : 0
>
> admin@riak2:~$ sudo riak-admin status | grep -e 'objsize' | grep 'put'
> consistent\_put\_objsize\_100 : 0
> consistent\_put\_objsize\_95 : 0
> consistent\_put\_objsize\_99 : 0
> consistent\_put\_objsize\_mean : 0
> consistent\_put\_objsize\_median : 0
> write\_once\_put\_objsize\_100 : 0
> write\_once\_put\_objsize\_95 : 0
> write\_once\_put\_objsize\_99 : 0
> write\_once\_put\_objsize\_mean : 0
> write\_once\_put\_objsize\_median : 0
>
> admin@riak3:~$ sudo riak-admin status | grep -e 'objsize' | grep 'put'
> consistent\_put\_objsize\_100 : 0
> consistent\_put\_objsize\_95 : 0
> consistent\_put\_objsize\_99 : 0
> consistent\_put\_objsize\_mean : 0
> consistent\_put\_objsize\_median : 0
> write\_once\_put\_objsize\_100 : 0
> write\_once\_put\_objsize\_95 : 0
> write\_once\_put\_objsize\_99 : 0
> write\_once\_put\_objsize\_mean : 0
> write\_once\_put\_objsize\_median : 0
>
> admin@riak4:~$ sudo riak-admin status | grep -e 'objsize' | grep 'put'
>
> consistent\_put\_objsize\_100 : 0
> consistent\_put\_objsize\_95 : 0
> consistent\_put\_objsize\_99 : 0
> consistent\_put\_objsize\_mean : 0
> consistent\_put\_objsize\_median : 0
> write\_once\_put\_objsize\_100 : 0
> write\_once\_put\_objsize\_95 : 0
> write\_once\_put\_objsize\_99 : 0
> write\_once\_put\_objsize\_mean : 0
> write\_once\_put\_objsize\_median : 0
>
> admin@riak5:~$ sudo riak-admin status | grep -e 'objsize' | grep 'put'
>
> consistent\_put\_objsize\_100 : 0
> consistent\_put\_objsize\_95 : 0
> consistent\_put\_objsize\_99 : 0
> consistent\_put\_objsize\_mean : 0
> consistent\_put\_objsize\_median : 0
> write\_once\_put\_objsize\_100 : 0
> write\_once\_put\_objsize\_95 : 0
> write\_once\_put\_objsize\_99 : 0
> write\_once\_put\_objsize\_mean : 0
> write\_once\_put\_objsize\_median : 0
>
> On 02/05/2016 17:32, Luke Bakken wrote:
>>
>> Could you please check the objsize stats on every Riak node? If they
>> are all zero then ... ????
>> --
>> Luke Bakken
>> Engineer
>> lbak...@basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

