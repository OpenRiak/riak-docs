---
title: "Cluster security"
description: ""
project: community
lastmod: 2014-06-30T02:49:21-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14418"
author_name: "Alex De la rosa"
project_section: "mailinglistitem"
sent_date: 2014-06-30T02:49:21-07:00
---


Hi there,

Imaging the following IP configuration for Riak 2.0:

# /etc/riak/riak.conf

nodename = riak@111.222.333.1
listener.http.internal = 127.0.0.1:8098
listener.protobuf.internal = 127.0.0.1:8087
listener.https.internal = 127.0.0.1:8098

I put the server's real IP in the nodename so they can join/communicate
with each other but then I limit any HTTP/PB communication to the localhost
so nobody can mess with the node from outside (we assume I have an own
Python API in each node doing the security and being a middleman between
the cluster and the webapp).

But how can I avoid 3rd-parties to just build a Riak server themselves and
join my cluster without permission... they can freely join like this:

# riak-admin join riak@111.222.333.1

Of course, they will have to find out the IP address, but if they do, they
can simply put a server themselves in the cluster and do whatever they want
with it.

Maybe a solution is creating subdomains on my domain just for the riak-ring
in a way that is extremely hard to find out to be able to do the JOIN,
something like: nodename = r...@rk001blahblahblah.mydomain.com

Is this approach reasonable? Am I doing/thinking something very wrong? What
would be the suggested way to prevent undesired JOINs?

Cheers,
Alex
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

