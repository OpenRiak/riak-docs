---
title: "Re: Help: Riak Search on Counters"
description: ""
project: community
lastmod: 2014-08-18T13:10:27-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14707"
mailinglist_parent_id: "msg14703"
author_name: "Eric Redmond"
project_section: "mailinglistitem"
sent_date: 2014-08-18T13:10:27-07:00
---


That's a Solr query, which you can find in the Solr documentation. But my 
initial through would be:

bucket.search("counter:\*" sort="counter desc", rows=5)

Eric


On Aug 18, 2014, at 12:06 PM, Alex De la rosa  wrote:

> Hi Sean,
> 
> Thank you for the "counter" field trick :)
> 
> What id you don't know the max value and you want the top 5 cities? In your 
> example you assume 3 or upper.
> 
> Thanks!
> Alex
> 
> On Monday, August 18, 2014, Sean Cribbs  wrote:
> Hi Alex,
> 
> Bare counters become the "counter" field in the Solr index. For counts
> greater than 3 you might query with "counter:[3 TO \*]".
> 
> Hope that helps!
> 
> On Mon, Aug 18, 2014 at 8:01 AM, Alex De la rosa
>  wrote:
> > Hi there,
> >
> > Can somebody help me with Riak Search 2.0 on Counters? Imagine we have a
> > counter called "visitors" to store how many people visits certain cities:
> >
> > ---- ---- ---- ---- ---- ---- ---- ---- ---- ---- ---- ---- ---- ---- ----
> > ---- ---- ---- ---- ---- ---- ---- ---- ----
> >
> > client.create\_search\_index('testing')
> > bucket = client.bucket\_type('visitors').bucket('counter\_bucket')
> > bucket.enable\_search()
> > bucket.set\_property('search\_index', 'testing')
> >
> > c = bucket.new('Barcelona')
> > c.increment(5)
> > c.store()
> >
> > c = bucket.new('Tokyo')
> > c.increment(2)
> > c.store()
> >
> > c = bucket.new('Paris')
> > c.increment(4)
> > c.store()
> >
> > ---- ---- ---- ---- ---- ---- ---- ---- ---- ---- ---- ---- ---- ---- ----
> > ---- ---- ---- ---- ---- ---- ---- ---- ----
> >
> > How would we use Riak Search 2.0 in this "visitors" bucket to get which city
> > has more visitors? (in this case Barcelona)
> >
> > ---- ---- ---- ---- ---- ---- ---- ---- ---- ---- ---- ---- ---- ---- ----
> > ---- ---- ---- ---- ---- ---- ---- ---- ----
> >
> > r = bucket.search('?????') # <--- Pattern to fill up
> >
> > ---- ---- ---- ---- ---- ---- ---- ---- ---- ---- ---- ---- ---- ---- ----
> > ---- ---- ---- ---- ---- ---- ---- ---- ----
> >
> > Thanks!
> > Alex
> >
> > \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> > riak-users mailing list
> > riak-users@lists.basho.com
> > http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
> >
> 
> 
> 
> --
> Sean Cribbs 
> Software Engineer
> Basho Technologies, Inc.
> http://basho.com/
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

