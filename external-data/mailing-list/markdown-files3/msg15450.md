---
title: "Re: Deleting a strongly consistent key"
description: ""
project: community
lastmod: 2015-01-07T15:33:38-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15450"
mailinglist_parent_id: "msg15448"
author_name: "Drew Pirrone-Brusse"
project_section: "mailinglistitem"
sent_date: 2015-01-07T15:33:38-08:00
---


Hello Igor,

Deletions should be a strongly consistent operation, yes. If after a
successful strongly consistent delete a GET of that key returns stale
data something is likely wrong, be it with your application, the
cluster, or Riak itself.

That said, deletions don't actually remove keys from Riak. Strongly
consistent deletions should behave identically to conditional PUTs,
where the value put is a tombstone. When Riak is running in an
eventually consistent mode, those tombstones are (sometimes)
eventually harvested and removed from disk. In the strongly consistent
mode (as with `delete\_mode = keep`) Riak will never harvest those
tombstones, so they will remain on disk indefinitely.
Our documentation has lots of good information, if you're looking for
some implementation details[1].

Generally speaking, if you know you're going to immediately re-use a
key, it's better to simply overwrite values than issuing an
intermittent delete.

Best regards,
-Drew

[1]: 
http://docs.basho.com/riak/latest/ops/advanced/strong-consistency/#Implementation-Details

On Wed, Jan 7, 2015 at 10:01 AM, Igor Birman  wrote:
> Is deleting a strongly consistent key a consistent operation? I have found
> in testing that if I delete a key and then attempt to immediately reuse it,
> sometimes the delete completes after I have reused it. Should I expect that
> when I get a 204 from a delete that I can immediately create a new key with
> the same id?
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

