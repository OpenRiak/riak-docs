---
title: "riak_core_vnode gets overloaded"
description: ""
project: community
lastmod: 2013-05-11T06:58:12-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11051"
author_name: "Evgeniy Khramtsov"
project_section: "mailinglistitem"
sent_date: 2013-05-11T06:58:12-07:00
---


I'm trying to benchmark my application which uses Riak. At some point 
riak\_core\_vnode processes message queues get overloaded. Here is the 
detailed process\_info information: http://kuku.jabber.ru/~xram/riak.log. 
This leads to request timeouts on a client side.


Is it possible to tune Riak in order to avoid such situation?

I'm running Riak 1.3.1 (deb packet from basho.com) with mostly default 
config. The difference is:


...
+ {riak\_pipe, [
+ {worker\_limit, 100},
+ {worker\_queue\_limit, 10000}
+ ]},
...
- {storage\_backend, riak\_kv\_bitcask\_backend},
+ {storage\_backend, riak\_kv\_eleveldb\_backend},

I'm using riakc (riak-erlang-client) with protobuffers as a client 
library. I have the only one Riak node. Open files limit (ulimit -n) is 
10000.


--
Regards,
Evgeniy Khramtsov, ProcessOne.
xmpp:x...@jabber.ru.


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

