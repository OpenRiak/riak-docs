---
title: "Re: Banging head against wall with erlang pb client"
description: ""
project: community
lastmod: 2011-03-31T16:18:13-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02817"
mailinglist_parent_id: "msg02816"
author_name: "Dan Reverri"
project_section: "mailinglistitem"
sent_date: 2011-03-31T16:18:13-07:00
---


Hi Jon,

The value for content-type should be a string.

For custom meta data the client expects a proplist of custom headers under
the <<"X-Riak-Meta">> key. Check out the following test to get an idea of
what the metadata would look like:
https://github.com/basho/riak-erlang-client/blob/master/src/riakc\_pb.erl#L311

Thanks,
Dan

Daniel Reverri
Developer Advocate
Basho Technologies, Inc.
d...@basho.com


On Thu, Mar 31, 2011 at 3:58 PM, Jon Brisbin  wrote:

> I know I'm doing something obvious wrong, but I can't seem to make this:
>
> {riakc\_obj,<<"riak">>,<<"test">>,undefined,[],
> {dict,2,16,16,8,80,48,
> {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
> {{[],[],
> [[<<"test">>|<<"header">>]],
> [],[],[],[],[],[],[],
> [[<<"content-type">>|<<"text/plain">>]],
> [],[],[],[],[]}}},
> <<"Hello World!">>}
>
> appear correctly in the database. It has the wrong content-type:
>
> HTTP/1.1 200 OK
> X-Riak-Vclock: a85hYGBgzGDKBVIsDJYbJTOYEhnzWBkymjiP82UBAA==
> Vary: Accept-Encoding
> Server: MochiWeb/1.1 WebMachine/1.7.3 (participate in the frantic)
> Link: ; rel="up"
> Last-Modified: Thu, 31 Mar 2011 22:55:36 GMT
> Etag: "5Pkvq3UKB5dl5ltv1YtcdD"
> Date: Thu, 31 Mar 2011 22:55:43 GMT
> Content-Type: application/octet-stream
> Content-Length: 12
>
> Hello World!
>
> The custom headers are also not showing up.
>
> What am I not doing here?
>
> Thanks!
>
> Jon Brisbin
>
> http://jbrisbin.com
> Twitter: @j\_brisbin
>
>
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

