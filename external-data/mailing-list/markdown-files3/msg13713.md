---
title: "Re: [ANN] Riak 1.4.8"
description: ""
project: community
lastmod: 2014-02-26T10:00:38-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13713"
mailinglist_parent_id: "msg13710"
author_name: "Engel Sanchez"
project_section: "mailinglistitem"
sent_date: 2014-02-26T10:00:38-08:00
---


Toby,

Since data inserted into the AAE trees while versions 1.4.4 -> 1.4.7 of
Riak were running was incorrect, they should be discarded before the
upgrade. You are seeing them valiantly trying to repair themselves based
on the incoming writes, but that activity is wasted since they require a
full scan of the data to be useful again. We are going to add a paragraph
to the release notes to warn others about this and make sure the
anti\_entropy directories are cleared before Riak is updated to 1.4.8 and
AAE is enabled again. We recommend you disable AAE, remove all AAE trees
(the contents of the anti\_entropy directory) and enable it again during a
period of low cluster activity. They will all be built again and you
should be back in business once that the new trees are ready.

Engel


On Tue, Feb 25, 2014 at 11:02 PM, Toby Corkindale  wrote:

> Hi,
> After upgrading to 1.4.8 in staging, last week, we've been seeing a
> fairly constant extra amount of riak hits in the stats. Consistently
> 300-400 a minute. Can get lost in the much higher, varying levels
> during busy hours, but outside of that it's quite visible as a
> baseline.
> The logs show a lot of AAE work going on.
>
> I wondered if this was normal behaviour of Riak cleaning up the
> AAE-related bug from earlier versions, and will go away eventually? Or
> that unlikely?
> I emphasize that there's no significant server load resulting from
> this -- I'm just curious if it's something I need to look into or not.
>
> Cheers,
> Toby
>
>
> On 21 February 2014 04:00, Tom Santero  wrote:
> > Hi,
> >
> > Today, Basho released a minor update of Riak and Riak Enterprise Edition,
> > version 1.4.8. This bug-fix release addresses a regression[0] in Riak's
> > active anti-entropy (AAE) system. The regression existed in versions
> 1.4.3
> > through 1.4.7.
> >
> > The complete release notes[1] and package downloads[2] are now available.
> >
> > Thanks for being the best community ever.
> >
> > Regards,
> > The Basho Team
> >
> > [0]
> >
> http://lists.basho.com/pipermail/riak-users\_lists.basho.com/2014-January/014551.html
> > [1] https://github.com/basho/riak/blob/1.4/RELEASE-NOTES.md
> > [2] http://docs.basho.com/riak/latest/downloads/
> >
> >
> > \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> > riak-users mailing list
> > riak-users@lists.basho.com
> > http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
> >
>
>
>
> --
> Turning and turning in the widening gyre
> The falcon cannot hear the falconer
> Things fall apart; the center cannot hold
> Mere anarchy is loosed upon the world
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

