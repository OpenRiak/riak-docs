---
title: "Re: No more disk space on a node of my Riak cluster"
description: ""
project: community
lastmod: 2013-03-22T09:54:32-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg10562"
author_name: "Evan Vigil-McClanahan"
project_section: "mailinglistitem"
sent_date: 2013-03-22T09:54:32-07:00
---


OK, so there's a lot going on there.

> 2013-03-22 12:02:18.719 [error] <0.16959.2526> gen\_server <0.16959.2526>
> terminated with reason: no function clause matching
> riak\_core\_pb:encode({ts,{1363,205559,674898}},
> {{ts,{1363,205559,674898}},<<131,104,7,100,0,8,114,95,111,98,106,101,99,116,109,0,0,0,14,101,...>>})
> line 40

This one is usually because you have different settings on the memory
backend on two nodes (one with a ttl, the other without). Typically
the solution here is to make sure that the settings are the same
across the cluster and then do a rolling restart of the cluster.


> 2013-03-22 11:28:53.379 [error] <0.28559.1189> gen\_fsm <0.28559.1189> in
> state active terminated with reason: no case clause matching
> {error,bad\_crc,{state,[{<<"cache">>,riak\_kv\_memory\_backend,{state,57458783,57450590,57442397,10737418240,31415183,43200}},{<<"storage-kazeo">>,riak\_kv\_bitcask\_backend,{state,#Ref<0.0.461.178788>,"79925870791533753339264014289171727637433810944",[{data\_root,"/data/riak/bitcask/storage-kazeo"},{read\_write,true}],79925870791533753339264014289171727637433810944,"/data/riak/bitcask/storage-kazeo"}},{<<"storage-laprovence">>,riak\_kv\_bitcask\_backend,{state,#Ref<0.0.461.178779>,"79925870791533753339...",...}},...],...}}
> in riak\_kv\_vnode:do\_diffobj\_put/3 line 1059
> 2013-03-22 11:28:53.379 [error]
> <0.15853.1198>@riak\_core\_handoff\_receiver:handle\_info:80 Handoff receiver
> for partition 79925870791533753339264014289171727637433810944 exited
> abnormally after processing 5337 objects:
> {{{case\_clause,{error,bad\_crc,{state,[{<<"cache">>,riak\_kv\_memory\_backend,{

This one looks like it might be because of some bad data left over
from your filling up of the disk. It's possible that upgrading to 1.3
will help here, it has better handling of corrupted data in bitcask.

If that isn't an option right now, let me know, there may be some
other ways to get the corrupted values out of the cluster.

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

