---
title: "Re: Dynamic default bucket props"
description: ""
project: community
lastmod: 2011-10-03T13:44:26-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05003"
mailinglist_parent_id: "msg04850"
author_name: "Ryan Zezeski"
project_section: "mailinglistitem"
sent_date: 2011-10-03T13:44:26-07:00
---


Andy,

Not crazy at all. Another issue with adding the hook for each foo\* bucket
is that you increase the size of the ring which must be gossiped between
nodes. We recently added something called "bucket fixups" to 1.0 that sorta
do what you want but only for buckets with custom properties. ATM, there is
no way to do this for all buckets across the board.

If you're just talking about a precommit hook you could put the logic in the
hook itself and match against the bucket name there. Care to elaborate more
on your use case? Maybe there is another way.

-Ryan


On Fri, Sep 23, 2011 at 5:22 PM, Andy Skelton  wrote:

> I would like to use bucket names to determine default bucket props
> such as hooks. For example, if all buckets matching foo\* should have a
> certain post-commit hook, I don't want to have to set those bucket
> props before I can put keys in the buckets.
>
> My preferred solution would be a config option that takes a mod/fun
> instead of a proplist.
>
> In riak\_core\_bucket, instead of always treating
> app\_helper:get\_env(riak\_core, default\_bucket\_props) as a list it would
> also look for a tuple {M, F} and in that case call M:F(Name) which
> would return a list.
>
> Sound crazy? :)
>
> Andy Skelton
> Automattic
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

