---
title: "Phase 2 Timeout"
description: ""
project: community
lastmod: 2013-10-20T20:05:26-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12705"
author_name: "Matt Black"
project_section: "mailinglistitem"
sent_date: 2013-10-20T20:05:26-07:00
---


Following on from some earlier errors I was getting, I’m now kind of stuck
between a rock and a hard place.

One of our statistics reports fails with a timeout during a
query.filter\_not\_found() phase:

Exception: 
{"phase":2,"error":"timeout","input":"[<<\"users\">>,<<\"33782eee0470cac583b136fd063decdc\">>,{struct,[{<<\"brid\">>,<<\"33782eee0470cac583b136fd063decdc\">>},{<<\"field1\">>,<<\"2012-11-19T04:53:00Z\">>},{<<\"field2\">>,..
SNIP 
,...]}]","type":"exit","stack":"[{riak\_kv\_w\_reduce,'-js\_runner/1-fun-0-',3,[{file,\"src/riak\_kv\_w\_reduce.erl\"},{line,283}]},{riak\_kv\_w\_reduce,reduce,3,[{file,\"src/riak\_kv\_w\_reduce.erl\"},{line,206}]},{riak\_kv\_w\_reduce,maybe\_reduce,2,[{file,\"src/riak\_kv\_w\_reduce.erl\"},{line,157}]},{riak\_pipe\_vnode\_worker,process\_input,3,[{file,\"src/riak\_pipe\_vnode\_worker.erl\"},{line,445}]},{riak\_pipe\_vnode\_worker,wait\_for\_input,2,[{file,\"src/riak\_pipe\_vnode\_worker.erl\"},{line,377}]},{gen\_fsm,handle\_msg,7,[{file,\"gen\_fsm.erl\"},{line,494}]},{proc\_lib,...}]"}

This is exactly the same problem discussed way back on this very list:


https://groups.google.com/forum/#!topic/nosql-databases/iHYDyqyidkM

Unfortunately this time I’m unable to rewrite the query to work in a
different way - removing the query.filter\_not\_found() phase I receive a
different error - exit:{json\_encode, {bad\_term, {not\_found (which was
covered in more detail in my previous emails).

Any thoughts on how I can attempt to work around this?
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

