---
title: "Re: key garbage collection"
description: ""
project: community
lastmod: 2011-11-03T11:02:45-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05436"
mailinglist_parent_id: "msg05434"
author_name: "Justin Karneges"
project_section: "mailinglistitem"
sent_date: 2011-11-03T11:02:45-07:00
---


On Thursday, November 03, 2011 02:46:39 AM Erik SÃ¸e SÃ¸rensen wrote:
> On 03-11-2011 07:39, Justin Karneges wrote:
> > I wonder if anyone else is doing something like this. I also wonder if
> > there is a flaw in this design. Since the lack of the cleanup key can
> > indicate a successful commit, I wonder if there might be a problem with
> > eventual consistency whereby some other node sees A and B but not the
> > cleanup key because it hasn't propagated yet, and therefore thinks the
> > keys are valid when in reality they aren't. Maybe causal consistency
> > ensures this isn't a problem, since the cleanup key is written before A
> > and B?
> 
> If cluster-to-cluster replication is in play, there will be a problem
> here, because the replication order (for full syncs at least) is
> independent of the write order.

You're talking about a W + R <= N case? I am not sure, but my proposal 
probably only works if causal consistency can be guaranteed (provided it works 
the way I think it does).

Justin

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

