---
title: "Re: benchmark results on my $75/month 5 node cluster :)"
description: ""
project: community
lastmod: 2013-10-27T23:29:50-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12774"
mailinglist_parent_id: "msg12772"
author_name: "Alex Rice"
project_section: "mailinglistitem"
sent_date: 2013-10-27T23:29:50-07:00
---


Sounds pretty respectable for commodity hardware! That consistently
low latency seems unachievable in the cloud- I guess because of the
slower disk and memory I/O too.

On Sun, Oct 27, 2013 at 6:37 PM, Toby Corkindale
 wrote:
> Thanks,
> it's interesting to hear of what performance other people are achieving with
> Riak.
>
> With a not-too-dissimilarly-configured[1] basho\_bench test, we see
> throughput between 6000-7000 ops/sec. get/put latencies are under 2/4ms
> respectively for mean values, and under 6/12ms for 99th percentile.
>
> This is on real (non-virtual) hardware, but not high-end gear.
> Hopefully we're not too too far off what can reasonably be achieved.
>
> -T
>
> [1: Test parameters:
> {concurrent, 16}.
> {driver, basho\_bench\_driver\_riakc\_pb}.
> {key\_generator, {int\_to\_bin, {uniform\_int, 10000}}}.
> {value\_generator, {fixed\_bin, 10000}}.
> {riakc\_pb\_replies, 1}.
> {operations, [{get, 3}, {put, 1} ]}.
> ]
>
>
> On 28/10/13 06:35, Alex Rice wrote:
>>
>> Here is an updated 2 hour graph of the same "X-Small" 5-node cluster,
>> after having performed all the Linux tuning steps I had missed first
>> time around. Also added ntpd service to all nodes. Looks like slightly
>> better throughput & latency, but a much cleaner graph overall, and it
>> should "burst" much better:
>>
>> https://dl.dropboxusercontent.com/u/22076075/summary-xsmall-bitcask-5nodes-2hr-tuned-vm.png
>>
>> Here is the same cluster rebooted as "Medium" Azure VMs, same
>> benchmark settings except: 8 workers, shorter duration. Not sure why
>> it has errors, yet:
>>
>> https://dl.dropboxusercontent.com/u/22076075/summary-medium-bitcask-5nodes-30-min.png
>>
>> Anyways- back to work for me!!!
>> :)
>>
>> On Wed, Oct 2, 2013 at 12:14 PM, Alex Rice  wrote:
>>>
>>> Hey, something that is impressive about Riak is how well it performs
>>> even on super low end cloud virtualization (unlike for example,
>>> couchbase, which hardly runs at all unless you have quad cores per
>>> each node)
>>>
>>> Having so much fun benchmarking, it's really distracting me from coding!
>>>
>>> the cluster : 5 nodes on Windows Azure cloud
>>> Ubuntu 12.04, Riak 1.2.4
>>> node are xsmall vm (1 shared cpu core, 768 mb ram)
>>>
>>> The xmall vms are only $15/month and they are not recommended for
>>> "production". but in a 5 node riak cluster, it's really nothing to
>>> scoff at!
>>>
>>> I suspect the main bottleneck is not the cpu or disk, rather I think
>>> it's the each xsmall node is allowed only 5Mbit/sec on the ethernet.
>>>
>>> Here is a basho\_bench graph, if anyone feels like viewing it
>>>
>>> https://dl.dropboxusercontent.com/u/22076075/summary-xsmall-bitcask-5nodes-20min.png
>>>
>>> note the basho bench was running on a quad core machine on the same
>>> vlan with 5 workers.
>>
>>
>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>> riak-users mailing list
>> riak-users@lists.basho.com
>> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>>
>
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

