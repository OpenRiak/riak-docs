---
title: "Re: Riak consumes too much memory"
description: ""
project: community
lastmod: 2013-10-17T17:53:13-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12685"
mailinglist_parent_id: "msg12681"
author_name: "darren"
project_section: "mailinglistitem"
sent_date: 2013-10-17T17:53:13-07:00
---


But why isn't riak smart enough to adjust itself to the available memory or 
lack thereof?

No serious enterprise technology should just consume everything and crash.


Sent from my Verizon Wireless 4G LTE Smartphone

-------- Original message --------
From: Matthew Von-Maszewski  
Date: 10/17/2013 8:38 PM (GMT-05:00) 
To: ZhouJianhua  
Cc: riak-users@lists.basho.com 
Subject: Re: Riak consumes too much memory 
 
Greetings,

The default config targets 5 servers and 16 to 32G of RAM.  Yes, the app.config 
needs some adjustment to achieve happiness for you:

- change ring\_creation\_size from 64 to 16 (remove the % from the beginning of 
the line)
- add this line before "{data\_root, }" in eleveldb section: 
"{max\_open\_files, 40}," (be sure the comma is at the end of this line).

Good luck,
Matthew


On Oct 17, 2013, at 8:23 PM, ZhouJianhua  wrote:

Hi

I installed riak v1.4.2 on ubuntu12.04(64bit, 4G RAM) with apt-get,  run it 
with default app.conf but change the backend to leveldb, and test it with 
https://github.com/tpjg/goriakpbc . 

Just keep putting (key, value) to an bucket,  the memory always increasing, and 
in the end it crashed, as it cannot allocate memory. 

Should i change the configuration or other?
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

