---
title: "RE: missing keys?"
description: ""
project: community
lastmod: 2012-09-14T09:18:01-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08543"
mailinglist_parent_id: "msg08542"
author_name: "Pat Lynch"
project_section: "mailinglistitem"
sent_date: 2012-09-14T09:18:01-07:00
---


Hi,
thanks for that. Is the default on dw not also quorum though?? so, in my case 
it should be 2 (since I have 2 nodes)??

thanks,
Pat.

Date: Fri, 14 Sep 2012 12:11:25 -0400
Subject: Re: missing keys?
From: rzeze...@basho.com
To: plynch1...@hotmail.com
CC: s...@basho.com; riak-users@lists.basho.com

Pat,

On Fri, Sep 14, 2012 at 11:08 AM, Pat Lynch  wrote:

So, if I write a key to a cluster and then try to query that key, it may not 
find it unless I retry? Even if r=2 & w=2 ? I thought that at least 2 systems 
had to have that key (either in memory or disk) for the write to have succeeded 
with those settings? If I had w=3, would you expect any missed keys ?? (note 
that I didn't try that because I expected performance issues).


It's important to note that `w` is considered complete once the value is queued 
in-memory waiting to be written do disk [1]. A read does not check the queue 
but only on-disk data. The `dw` flag is what you want to know that the value 
has made it to disk and can be seen by a read.

-Z
[1]: https://github.com/basho/riak\_kv/blob/master/src/riak\_kv\_vnode.erl#L284 
 \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

