---
title: "Re: 500 Internal Server Error when performing link walking"
description: ""
project: community
lastmod: 2011-09-27T11:15:05-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg04892"
mailinglist_parent_id: "msg04891"
author_name: "Ivaylo Panitchkov"
project_section: "mailinglistitem"
sent_date: 2011-09-27T11:15:05-07:00
---




Hi Bryan,

I know the request we are talking about doesn't have any sense but in a 
theory could be performed.
The server should not respond with 500 and it's not even mentioned on 
http://wiki.basho.com/HTTP-Link-Walking.html.
Also if you run curl http://192.168.1.69:8098/riak/hb/first/\_,\_,0 the 
result is the same as if you put 1 (return result from this phase).
My own opinion is that you should return 400 (Bad request) if keep = 0 
in the final phase or something that explains the case.
You rock guys. Riak is so amazing. Already deployed few apps with it 
handling millions of records.


Regards,
Ivaylo



On 11-09-27 01:14 PM, Bryan Fink wrote:

On Tue, Sep 27, 2011 at 10:51 AM, Ivaylo Panitchkov
 wrote:

http://192.168.1.69:8098/riak/hb/first/\_,\_,1/\_,\_,0

Hi, Ivaylo. What Riak is trying to tell you (though it's being rather
obtuse about it) is that the query you sent doesn't make sense to it.
The problem is that '0' on the final link step. The link walker
resource doesn't know why that query would be sent, because it's doing
extra work for nothing.

That is, asking for keep=false (\_,\_,0) on the last phase would cause
riak to traverse those links, but then do nothing with the results it
found. This wasn't an expected use case, so it ends in error. I've
filed a bug to make this error more friendly:

https://issues.basho.com/show\_bug.cgi?id=1223

If you really do want only the objects found in the first step of the
walk, chop off the second step:

 http://192.168.1.69:8098/riak/hb/first/\_,\_,1

If you want the object from the final step as well, set that keep to
either 1 or \_:

 http://192.168.1.69:8098/riak/hb/first/\_,\_,1/\_,\_,1

-Bryan



\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

