---
title: "Re: Riak Search timeout when searching from erlang command line"
description: ""
project: community
lastmod: 2011-04-04T12:04:55-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02875"
mailinglist_parent_id: "msg02871"
author_name: "Mike Huffman"
project_section: "mailinglistitem"
sent_date: 2011-04-04T12:04:55-07:00
---


Hi Rusty,

Thanks for the response.

I should have mentioned that I also tried the search case sensitive with the
same results:

(dev1@127.0.0.1)19> search:search(<<"my\_index">>, <<"title:Title">>).

=ERROR REPORT==== 4-Apr-2011::13:48:48 ===

range\_loop timed out!\*\* exception throw: {timeout,range\_loop}
 in function riak\_search\_backend:collect\_info\_response/3
 in call from riak\_search\_op\_term:info/3
 in call from riak\_search\_op\_term:preplan/2
 in call from riak\_search\_op\_scope:preplan/2
 in call from riak\_search\_client:parse\_query/3
 in call from search:search/2



In answer to the questions:

It produces the same results if run on a single node (which is what this
example is from) or the 3-node devrel setup.

Mac OS X 10.6.7 (Macbook Pro, 2.8 GHz Intel Core 2 Duo, 8 GB Ram), Erlang
R14B02, riaksearch from git repository

ulimit -n returns 400000


Like wise if it run:
 ./bin/search-cmd shell my\_index
s(<<"title:Title">>)

I get:

Error: {timeout,range\_loop}


On Mon, Apr 4, 2011 at 10:42 AM, Rusty Klophaus  wrote:

> Hi Mike,
>
> The Whitespace tokenizer (the default) is case sensitive, so the query
> should be:
>
> search:search(<<"my\_index">>, <<"title:Title">>)
>
> If you want a tokenizer that is case-insensitive and also filters out
> stopwords (basically, something more appropriate for prose) you can use the
> Standard analyzer factory. Details are here:
> http://wiki.basho.com/Riak-Search---Schema.html
>
> I'm not sure why you see a range\_loop exception. That's odd. You should
> just see zero results returned.
>
> Some diagnostic questions:
>
> - Are you running on a single node?
> - What platform are you running?
> - If you run the command "ulimit -n", what does it return?
>
> Best,
> Rusty
>
>
>
> On Mon, Apr 4, 2011 at 2:18 AM, Mike Huffman wrote:
>
>> Hi Everyone!
>>
>> I am having the following problem and google is not helping as far as a
>> solution.
>>
>> From a fresh built of riak search from git source, I try the following
>> commands:
>>
>> make rel
>> cd rel/riaksearch
>> ./bin/riaksearch start
>> ./bin/riaksearch attach
>>
>> now I try the following commands from the erlang command line:
>>
>> (next line directly from
>> http://wiki.basho.com/Riak-Search---Indexing.html )
>>
>> search:index\_doc(<<"my\_index">>, <<"my\_doc">>, [{<<"title">>, <<"The
>> Title">>}, {<<"content">>, <<"The Content">>}]).
>>
>> response is "ok"
>>
>> (next line directly from
>> http://wiki.basho.com/Riak-Search---Querying.html )
>>
>> search:search\_doc(<<"my\_index">>, <<"title:title">>). or search:search
>> (<<"my\_index">>, <<"title:title">>).
>>
>> response is:
>>
>> =ERROR REPORT==== 4-Apr-2011::02:13:32 ===
>> range\_loop timed out!\*\* exception throw: {timeout,range\_loop}
>> in function riak\_search\_backend:collect\_info\_response/3
>> in call from riak\_search\_op\_term:info/3
>> in call from riak\_search\_op\_term:preplan/2
>> in call from riak\_search\_op\_scope:preplan/2
>> in call from riak\_search\_client:parse\_query/3
>> in call from search:search\_doc/2
>>
>>
>> Am I using the erlang commands incorrectly?
>>
>> Any help pointing me in the right direction would be greatly appreciated.
>>
>> Thanks.
>>
>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>> riak-users mailing list
>> riak-users@lists.basho.com
>> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>>
>>
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

