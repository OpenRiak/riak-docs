---
title: "Solr Indexing and required fields."
description: ""
project: community
lastmod: 2012-05-16T07:43:25-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07464"
mailinglist_parent_id: "msg07458"
author_name: "Eric Boyer"
project_section: "mailinglistitem"
sent_date: 2012-05-16T07:43:25-07:00
---


Hey all,

They summary of the problem is: 'required' fields are only honoured
when the field exists in the Solr document with no value, not when the
field doesn't even exist in the POST content.

We've implemented solr search on a bucket called 'objectmetadata'
which has a schema close to the following:

{
   schema,
   [
       {version, "1.1"},
       {default\_field, "text"},
       {default\_op, "or"},
       {n\_val, 3},
       {analyzer\_factory, {erlang, text\_analyzers,
whitespace\_analyzer\_factory}}
   ],
               %%unique id of this object, probably something like tag-{objid}
               {field, [
                       {name, "id"},
                       {required, true},
                       {analyzer\_factory, {erlang, text\_analyzers,
noop\_analyzer\_factory}}
                       ]},
               %%primary id
               {field, [
                       {name, "objid"},
                       {type, integer},
                       {required, true},
                       {padding\_size, 10}
                       ]},
               {field, [
                       {name, "projectid"},
                       {type, integer},
                       {required, true},
                       {inline, true},
                       {padding\_size, 10}
                       ]},

.... }

When posting documents (with "Content-Type: text/xml" header) without
the field :
POST http://riak.local/solr/objectmetadata/update


tag\_\_1
1


Results in 200 OK

When posting documents with the field but without a value results in:
POST http://riak.local/solr/objectmetadata/update


tag\_1\_1
1



Results in 400 Bad Request: "Unable to parse request:
{expected\_binaries,<<"projectid">>,[]}"

I would have expected these 2 scenarios to result in the same error.

Anything that I'm missing or is it just my assumption about how
required fields are handled is flawed?

Thanks,
Eric Boyer
Platform Developer
Firmex

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

