---
title: "Re: cannot query bucket when a node is down"
description: ""
project: community
lastmod: 2010-05-31T10:46:55-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg00471"
mailinglist_parent_id: "msg00470"
author_name: "Johan Harjono"
project_section: "mailinglistitem"
sent_date: 2010-05-31T10:46:55-07:00
---


Hi,

Thanks for the tip! Using keys=false work (though r=1 does not work). So I
gather that if I want to figure out all the keys a bucket has I'm not
supposed to GET bucket/? In that case, how does one figure out which keys a
bucket contains in riak?

thanks,
Johan

On Mon, May 31, 2010 at 1:00 PM, Alexander Sicular wrote:

> Mabe it's tring to get all keys? Try with keys=false... Mabe try with r=1?
>
> On 2010-05-31, Johan Harjono  wrote:
> > Hi,
> >
> > I'm having a trouble querying a bucket when one of the nodes in the
> cluster
> > is down. This is what I did
> >
> > 1. Set up a cluster of two nodes, call them node1 and node2
> > 2. Use curl to create a bucket "users" and key "user1" with value "Hello
> > World"
> > 3. Test that I can use curl to fetch the bucket and key from both node1
> and
> > node2 (i.e. GET /bucket/ and GET /bucket/key)
> > 4. use `riak stop` to stop one of the nodes from running
> > 5. Use curl to GET bucket/key - this works (and of course, the request is
> > directed at the node that is still running)
> > 6. Use curl to GET bucket/ - at this point it just hangs
> >
> > What I do not understand is how it is possible that when one of the nodes
> is
> > down, GET on a bucket/key works, but GET on a bucket/ does not. Any
> thoughts
> > on this?
> >
> > thank you,
> > Johan
> >
>
> --
> Sent from my mobile device
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

