---
title: "Re: Riak riak_kv_vnode worker pool crashed"
description: ""
project: community
lastmod: 2012-10-11T10:00:38-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08884"
mailinglist_parent_id: "msg08883"
author_name: "Mikhail Kuznetsov"
project_section: "mailinglistitem"
sent_date: 2012-10-11T10:00:38-07:00
---


We use localhost:8087 for connection. I take this port number from example code 
in readme to erlang protobuffs client. 
I guess if it is port for ring coordination we would never get several days of 
proper response for our queries from it. 
-- 
Sincerely yours,
Mikhail Kuznetsov

When best practices meet everyday life and lead to perfection...

Oct 11, 2012, в 20:50 , Mike Oxford написал(а):

> Check that you have your ports correct. If you connect your client up to the 
> ring distribution ports you can get these kinds of errors.
> 
> -mox
> 
> On Wed, Oct 10, 2012 at 10:29 PM, Mikhail Kuznetsov 
>  wrote:
> I deploy a test stand for server app demo for clients. Riak 1.2.0 on debian 
> compiled and run with erlang 15b01. Client uses riak erlang protobuf client 
> 1.2. I have to use only one node with almost default config. For storage 
> backend I use eleveldb\_backend (we use second indexing very often). After 
> several dais of mostly standby wiating (demo application showed once in day 
> or two) riak server start dropping connections (erlang pb client is not 
> notified and show that connection is ok). I look at riak log and find that 
> entries:
> 
> 2012-09-20 00:10:10.976 [error] <0.803.0>@riak\_core\_vnode:handle\_info:510 
> 296867520082839655260123481645494988367611297792 riak\_kv\_vnode worker pool 
> crashed 
> {timeout,{gen\_server,call,[<0.819.0>,{work,<0.806.0>,{fold,#Fun,#Fun},{raw,59205031,<0.28969.11>}}]}}
> 2012-09-20 00:10:10.976 [error] <0.862.0>@riak\_core\_vnode:handle\_info:510 
> 365375409332725729550921208179070754913983135744 riak\_kv\_vnode worker pool 
> crashed 
> {timeout,{gen\_fsm,sync\_send\_event,[<0.866.0>,{checkout,false,5000},5000]}}
> 
> ...
> 
> 2012-09-20 00:17:14.234 [error] <0.1645.0> CRASH REPORT Process <0.1645.0> 
> with 0 neighbours exited with reason: 
> {timeout,{gen\_fsm,sync\_send\_event,[<0.1646.0>,{checkout,false,5000},5000]}} 
> in gen\_fsm:terminate/7 line 611 2012-09-20 00:17:14.639 [error] 
> <0.2337.0>@riak\_api\_pb\_server:handle\_info:171 Unrecognized message 
> {pipe\_log,#Ref<0.0.17.19772>,index,{trace,[error],{vnode,{fitting\_died,1118962191081472546749696200048404186924073353216}}}}
> 2012-09-20 00:17:15.106 [error] <0.1596.0> gen\_fsm <0.1596.0> in state ready 
> terminated with reason: 
> {timeout,{gen\_fsm,sync\_send\_event,[<0.1597.0>,{checkout,false,5000},5000]}}
> 
> If client make request it gets {error, disconnected}. If we try reconnect it 
> successfully connected and work.
> 
> What should I change in config file or tune client connection to make it work 
> stable? I fully understand that ring is good and haproxy can check nodes(and 
> maybe break connection in this case), but I have only one node for riak on 
> demo server and haproxy is not installed. Can you advise something?
> 
> 
> 
> 
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
> 
> 

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

