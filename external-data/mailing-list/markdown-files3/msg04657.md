---
title: "Re: Riak 1.0 pre2 legacy_keylisting crash"
description: ""
project: community
lastmod: 2011-09-11T11:40:03-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg04657"
mailinglist_parent_id: "msg04654"
author_name: "Ryan Caught"
project_section: "mailinglistitem"
sent_date: 2011-09-11T11:40:03-07:00
---


console.log and error.log at that time:


> 2011-09-11 07:15:44.043 [error] <0.142.0> Supervisor riak\_pipe\_builder\_sup
> had child at module undefined at <0.2724.0> exit with reason killed in
> context child\_terminated
> 2011-09-11 07:15:44.051 [error] <0.143.0> Supervisor riak\_pipe\_fitting\_sup
> had child at module undefined at <0.2726.0> exit with reason killed in
> context child\_terminated
> 2011-09-11 07:15:44.053 [error] <0.143.0> Supervisor riak\_pipe\_fitting\_sup
> had child at module undefined at <0.2725.0> exit with reason killed in
> context child\_terminated


On Sun, Sep 11, 2011 at 1:49 PM, Daniel Reverri  wrote:

> Hi Ryan
>
> Were there any errors in the error.log or console.log files?
>
> Thanks
> Dan
>
> Sent from my iPad
>
> On Sep 11, 2011, at 10:43 AM, Ryan Caught  wrote:
>
> Yeah, I did upgrade all nodes first, then changed the setting.
>
> On Sun, Sep 11, 2011 at 10:32 AM, Sean Cribbs < 
> s...@basho.com> wrote:
>
>> AFAIK you need to make sure that all nodes are upgraded first, and then
>> turn legacy\_keylisting off. The crash you see is not (necessarily) related
>> to keylisting, but MapReduce. I hope to push out a new version of the Ruby
>> client in the next few weeks to support the new features.
>>
>> On Sun, Sep 11, 2011 at 3:38 AM, Ryan Caught < 
>> rcau...@gmail.com> wrote:
>>
>>> Hi,
>>> I'm testing out a rolling upgrade with 1.0 pre2 and found that when I
>>> turn off legacy\_keylisting Riak crashes on me. Things work fine when
>>> legacy\_keylisting is turned on.
>>>
>>> Here is what I found in the crash log.
>>>
>>> 2011-09-11 07:15:44 =SUPERVISOR REPORT====
>>>> Supervisor: {local,riak\_pipe\_fitting\_sup}
>>>> Context: child\_terminated
>>>> Reason: killed
>>>> Offender:
>>>> [{pid,<0.2725.0>},{name,undefined},{mfargs,{riak\_pipe\_fitting,start\_link,undefined}},{restart\_type,temporary},{shutdown,2000},{child\_type,worker}]
>>>
>>>
>>> I'm using Ubuntu with Ripple (0.9.5).
>>>
>>>
>>> Ryan
>>>
>>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>>> riak-users mailing list
>>> riak-users@lists.basho.com
>>> 
>>> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>>>
>>>
>>
>>
>> --
>> Sean Cribbs < s...@basho.com>
>> Developer Advocate
>> Basho Technologies, Inc.
>> http://www.basho.com/
>>
>>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

