---
title: "bug after ~10K get/store requests"
description: ""
project: community
lastmod: 2011-01-27T13:58:00-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02135"
author_name: "Paco NATHAN"
project_section: "mailinglistitem"
sent_date: 2011-01-27T13:58:00-08:00
---


We're seeing a repeatable error -- running some tests with Riak
0.14.0-1 on Ubuntu, with PHP 5.3.3-1ubuntu9.3

We have a load test, using the PHP client, which stores then gets 1MM
objects. This is being run against both Riak and MySQL as part of a
performance evaluation suite. The MySQL side runs fine, so the test
script seems fine.

On the Riak side, we generally get an exception from
RiakObject::populate() which throws 'Could not contact Riak Server..'
after having done between 10-20K store/get pairs, each with different
keys. It doesn't always happen.

There's nothing else running on this system, and we see it both on our
VMware instances and on an EC2 m1.xlarge

I get the sense that our Riak client is causing a temporary DoS on our
Riak server...
Has anyone else seen this?

Maybe adding some retry logic into the client would resolve it?

Thanks,

Paco
IMVU

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

