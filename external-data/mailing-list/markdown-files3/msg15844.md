---
title: "Re: Query on Riak Search in a cluster of 3 nodes behind ELB is giving	different result everytime"
description: ""
project: community
lastmod: 2015-03-05T09:16:48-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15844"
mailinglist_parent_id: "msg15839"
author_name: "Zeeshan Lakhani"
project_section: "mailinglistitem"
sent_date: 2015-03-05T09:16:48-08:00
---


Hello Santi, Baskar. Please keep your messages on the user group mailing list, 
btw. Thanks.

Here’s an example of our testing harness’s wait\_for\_index function, 
https://github.com/basho/yokozuna/blob/develop/riak\_test/yz\_rt.erl#L420 
. We 
check for the index on each of the nodes, which is an approach you can take. 

And, as I mentioned, I’m currently working on making Index creation synchronous 
to make this easier.

If your logs are not pointing to any errors and being that your bucket, index 
contains so few objects, I’d delete or mv the search-root/index directory 
(./data/yz/<>) and let AAE resync the data, which should then give 
you consistent results.

Thanks.
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

