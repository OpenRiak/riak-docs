---
title: "Re: No message in sasl-error.log for wrong post commit erlang hook"
description: ""
project: community
lastmod: 2012-02-03T05:45:20-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06522"
mailinglist_parent_id: "msg06521"
author_name: "Alin Popa"
project_section: "mailinglistitem"
sent_date: 2012-02-03T05:45:20-08:00
---


I've also looked in all the logs for that problem (even lowering the log
level) and still, no trace of it ...
In fact, this is the problem: if something is wrong in my function/module
(runtime problem, as the compilation passed), I'm not able to know.
There is other recommended way of looking for such things ?

Thanks,
Alin

On Fri, Feb 3, 2012 at 3:36 PM, Sean Cribbs  wrote:

> Alin,
>
> Riak no longer uses the default sasl error\_logger, but our own logging
> library, lager. You can find the output in crash.log (and probably a
> transformed version of it in console.log).
>
> On Fri, Feb 3, 2012 at 5:53 AM, Alin Popa  wrote:
>
>> Forgot to mention that I've also configured the bucket to be using the
>> postcommit hook:
>>
>> curl -v -X PUT -H "Content-Type: application/json" -d
>> '{"props":{"postcommit":[{"mod":"post\_commit\_hooks","fun":"log"}]}}'
>> http://127.0.0.1:8098/riak/mybucket
>>
>> Alin
>>
>>
>> On Fri, Feb 3, 2012 at 12:37 PM, Alin Popa  wrote:
>>
>>> Hi guys,
>>>
>>> I've worked a bit with the Riak's post commit hooks:
>>>
>>> 1. Create a post commit module/function:
>>>
>>> \*-module(post\_commit\_hooks).\*
>>> \*
>>> \*
>>> \*-export([log/1]).\*
>>> \*
>>> \*
>>> \*log(Object) ->\*
>>> \* error\_logger:info\_msg("OBJECT: ~p~n",[Object]).\*
>>>
>>> 2. Updated the app.conf file in order to pick it up
>>> 3. Compiled the file using the erts that's embedded into the riak
>>> distribution (which is 1.0.3 btw)
>>> 4. Started the riak node
>>> 5. Done some simple operations (get and save of objects) and I was able
>>> to see the object being dumped to the console.log file.
>>>
>>> For the failing scenario:
>>> 1. Changed the function a bit in order to call an inexistent function
>>>
>>> \*-module(post\_commit\_hooks).\*
>>> \*
>>> \*
>>> \*-export([log/1]).\*
>>> \*
>>> \*
>>> \*log(Object) ->\*
>>> \* error\_loggerrrrr:info\_msg("OBJECT: ~p~n",[Object]).\*
>>>
>>> 2. Stop riak
>>> 3. Enabled sasl logging {sasl,[{error\_logger\_mf\_maxfiles,
>>> 5},{sasl\_error\_logger, {file,
>>> "/Users/alin/riak/log/sasl-error.log"}},{error\_logger\_mf\_maxbytes,
>>> 10485760},{errorlog\_type, error},{error\_logger\_mf\_dir,
>>> "/Users/alin/riak/log"}]}
>>> 4. Recompile the file, using the same erts version
>>> 5. Start riak
>>> 6. Read and save of the riak objects, but this time, can't see any error
>>> to the log files (especially sasl-error.log, as basho's wiki is suggesting
>>> [1], even though I can see different kind of messages to sasl-error.log
>>> that are not related to the failing execution).
>>>
>>> Is it something that I'm missing, or is this a bug ?
>>>
>>> Thanks,
>>> Alin
>>>
>>> [1] http://wiki.basho.com/Commit-Hooks.html
>>>
>>
>>
>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>> riak-users mailing list
>> riak-users@lists.basho.com
>> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>>
>>
>
>
> --
> Sean Cribbs 
> Software Engineer
> Basho Technologies, Inc.
> http://basho.com/
>
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

