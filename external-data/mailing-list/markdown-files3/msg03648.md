---
title: "Re: Index support in Ripple"
description: ""
project: community
lastmod: 2011-06-11T15:08:09-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03648"
mailinglist_parent_id: "msg03647"
author_name: "Jeremiah Peschka"
project_section: "mailinglistitem"
sent_date: 2011-06-11T15:08:09-07:00
---


I think that slide is a list of features that need to be implemented. Indexes 
are "coming soon" and will be announced(ish) at OSCON: 
http://www.oscon.com/oscon2011/public/schedule/detail/19806

It's possible to roll your own secondary indexes. There are a few good blog 
posts that have been written up recently in the Riak Recap, I want to say that 
Kresten Thorup (sorry if I butchered your name) even wrote a library to do 
build secondary indexes on the fly as objects are saved in Riak. But, in short, 
to roll your own indexes you create an inverted index. On people, indexing by 
last name (with email address as the key) might look like this:

'peschka': ['jeremiah.pesc...@gmail.com']
'smith': ['john.sm...@gmail.com', 'jsmith...@yahoo.com']
...
etc

Then, to follow the index, you'd look up a user in your index bucket, in this 
case it might be called users\_by\_last\_name. Once you've found all of the users 
that match your criteria, you have a list of users to display. If you need to 
search on multiple terms you can either build your own multi-level index or 
else use bitmap comparisons between the keys that are indexed to figure out 
which keys meet your criteria.

Ripple supports properties as keys through key\_on. 
https://github.com/seancribbs/ripple/blob/master/ripple/lib/ripple/document/key.rb#L11
https://github.com/seancribbs/ripple/blob/master/ripple/spec/ripple/key\_spec.rb#L19

HTH 
--- 
Jeremiah Peschka
Founder, Brent Ozar PLF


On Saturday, June 11, 2011 at 1:55 PM, Thomas Fee wrote:

> Hi all, but mainly directed at Sean Cribbs ...
> 
> From the slides at 
> http://www.slideshare.net/seancribbs/introducing-riak-and-ripple , slide 
> number 143 in particular, it seems that Ripple already supports indexes, 
> because that item is highlighted on the slide. However, I can't see any 
> mention of it in the documentation, mainly, the list of modules and methods.
> 
> Since Ripple currently doesn't support using a property as a key, I am 
> searching for a way to efficiently work around that. I'm sure this has been 
> dealt with by somebody already.
> 
> Thanks,
> Tom
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com (mailto:riak-users@lists.basho.com)
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

