---
title: "Buckets with different expiry_secs value"
description: ""
project: community
lastmod: 2011-05-16T23:58:36-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03348"
author_name: "Dmitry Demeshchuk"
project_section: "mailinglistitem"
sent_date: 2011-05-16T23:58:36-07:00
---


Greetings.

I'm looking for a way to set expiry\_secs for specific buckets. For
example, if some buckets need to have object expiration time and some
buckets need to have unlimited lifetime.

I've tried to do this using multi\_backend:

{storage\_backend, riak\_kv\_multi\_backend},
{multi\_backend\_default, <<"default">>},
{multi\_backend, [
 {<<"default">>, riak\_kv\_bitcask\_backend, []},
 {<<"cache">>, riak\_kv\_bitcask\_backend, [
 {expiry\_secs, 60},
 ]}
]},

But when I call

riakc\_pb\_socket:set\_bucket(<<"test">>, [{backend, <<"cache">>}]),

this setting isn't applied to the bucket. Tried to set different data
directories for both backends – with the same result.

Is such thing possible at all, and if it's possible, what am I doing wrong?

Also, looks like riak\_kv\_multi\_backend.erl has documentation a bit
different with wiki. At wiki backends aliases are binaries, and at the
module's docs they are atoms. Probably, both of them work, but neither
of them worked for me :(

-- 
Best regards,
Dmitry Demeshchuk

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

