---
title: "Re: JSON Map/Reduce on binary data types"
description: ""
project: community
lastmod: 2011-12-20T07:37:13-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06011"
mailinglist_parent_id: "msg06010"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2011-12-20T07:37:13-08:00
---


Adam,

Because Protocol Buffers (or gzipped-JSON for that matter) is a binary
format, it's unlikely that it will conform with the UTF-8 charset, which is
currently required to send the data over into the Javascript VM. Our
version of Spidermonkey doesn't yet have support for Buffer or any other
means of working directly with binary data, so it must be UTF-8 (since we
convert the riak\_object record into a JSON form before invoking).

On Tue, Dec 20, 2011 at 9:57 AM, Adam Schepis wrote:

> We're having a debate internally on my team about the final format that we
> should store our objects in Riak. Some are voting for protobuf (because we
> use it pretty heavily in house) and i'm advocating for JSON or gzipped JSON
> because i feel like it would be easier to traverse and analyze with the
> javascript M/R built into Riak when we want to do analysis.
>
> I want to make sure i do my due dilligence, though... If we were to store
> as protobuf (or any binary format) but are the possibilities for analyzing
> the data with Riak Map Reduce? Would we need to include all of the
> functions needed to deserialize the PB in our javascript code we send to
> the server?
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>
>


-- 
Sean Cribbs 
Developer Advocate
Basho Technologies, Inc.
http://www.basho.com/
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

