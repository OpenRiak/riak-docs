---
title: "Re: Cost of many PBC connections held open?"
description: ""
project: community
lastmod: 2014-06-05T23:17:28-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14299"
mailinglist_parent_id: "msg14298"
author_name: "Alain Rodriguez"
project_section: "mailinglistitem"
sent_date: 2014-06-05T23:17:28-07:00
---


Hi Toby,

It should be fine to keep many connections PCB connections open. To give
you an idea, we connect to a nine (9) node cluster over Protobuf, with up
to 2k concurrent connections per node.

Cheers,

Alain


On Thu, Jun 5, 2014 at 10:44 PM, Toby Corkindale  wrote:

> Hi,
> Just looking for a bit of guidance on good practice when using Riak
> via the PBC interface.
>
> To keep request latency low, it's good to keep the connection open
> between requests, rather than making a new connection for just a few
> requests and then dropping it again, right?
>
> In the JVM client, pools of connections are shared between large
> numbers of threads. However it's harder to do that in Perl, which some
> of our codebase is written in.
> It'd be a lot easier to have one connection per process, but that's
> potentially quite a lot of connections, albeit ones that are idle most
> of the time.
>
> I'd like to get a feeling for how expensive is it for the Erlang VM to
> hold those connections open. Does it consume a lot of resources or is
> it negligible?
>
> Thanks,
> Toby
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

