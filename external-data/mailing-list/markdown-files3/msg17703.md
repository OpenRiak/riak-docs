---
title: "Re: Inconsistency in Querying Riak TS?"
description: ""
project: community
lastmod: 2016-10-17T19:01:59-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17703"
mailinglist_parent_id: "msg17702"
author_name: "John Daily"
project_section: "mailinglistitem"
sent_date: 2016-10-17T19:01:59-07:00
---


One of the catches regarding the quantum limit is that unless the
query starts exactly on a boundary, the effective limit is one fewer
because it is determined by the number of partitions the query has to
touch.

I suspect that's the behavior you're seeing.

Sent from my iPhone

> On Oct 17, 2016, at 9:38 PM, Joe Olson  wrote:
>
> According to the documentation at
>
> https://docs.basho.com/riak/ts/1.4.0/using/querying/guidelines/
>
> "A query covering more than a certain number of quanta (5 by default) will 
> generate the error too\_many\_subqueries and the query system will refuse to 
> run it. Assuming a default quantum of 15 minutes, the maximum query time 
> range is 75 minutes."
>
> However, the example shows a table of quantum 15 seconds. After the example:
>
> "The maximum time range we can query is 60s, anything beyond will fail."
>
> ....which seems to contradict the first assertion.
>
> Furthermore, I have been getting inconsistant behavior using the quantum.
>
> I have a code snippet placed here, demonstrating this behavior:
>
> https://gist.github.com/anonymous/a4a4ccb8617a00d38fb47a6b11571d81
>
> In this example, I set up two tables, one with a quantum of 6 hours, another 
> with a quantum of 12 days.
>
> I am using the default range (5) on my cluster.
>
> A query spanning 5 quantum partitions is allowed on the 6 hour table, a query 
> spanning 5 quantum partitions
> on the 12 day table fails with the 'too many subqueries' error.
>
> Are the number of allowed subqueries different depending on the quantum size?
>
> If so, is there more detailed documentation on the subject?
>
> Thanks!
>
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

