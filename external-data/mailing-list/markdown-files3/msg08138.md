---
title: "Re: Cant remote write to riak"
description: ""
project: community
lastmod: 2012-07-31T11:21:04-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08138"
mailinglist_parent_id: "msg08125"
author_name: "Mark Phillips"
project_section: "mailinglistitem"
sent_date: 2012-07-31T11:21:04-07:00
---


On Mon, Jul 30, 2012 at 5:55 PM, Mark Phillips  wrote:

> Hey David,
>
> On Thu, Jul 26, 2012 at 9:52 PM, David Montgomery <
> davidmontgom...@gmail.com> wrote:
>
>> I found what the problem was. As a newbie I followed the instructions
>> for a basic cluster setup to the T. Then meant I did not change the
>> defualt {pb\_ip, "127.0.0.1" }.
>>
>> Great if that would be added in the wiki to change both http and pb\_ip
>> if desired.
>>
>>
> Would you mind opening an issue for that against the wiki repo[1]? Bonus
> points for sending us a pull request.
>
> Thanks for your help.
>
> Mark
>
> [1] https://github.com/basho/riak\_wiki
>
>
>
Actually, no need. Clint Shryock took care of it.

https://github.com/basho/riak\_wiki/pull/334

Thanks, Clint. Put another drink on the Basho tab :)

Mark


>
>
>> thanks
>>
>>
>> On Fri, Jul 27, 2012 at 11:59 AM, David Montgomery
>>  wrote:
>> > As a note, from a remote machine, this command worked curl -v
>> > http://111.222.333.444:8098/riak/test and returned the expected
>> > output.
>> >
>> >
>> > \* About to connect() to 111.222.333.444 port 8098 (#0)
>> > \* Trying 111.222.333.444... connected
>> > \* Connected to 111.222.333.444 (111.222.333.444) port 8098 (#0)
>> >> GET /riak/test HTTP/1.1
>> >> User-Agent: curl/7.21.3 (x86\_64-pc-linux-gnu) libcurl/7.21.3
>> OpenSSL/0.9.8o zlib/1.2.3.4 libidn/1.18
>> >> Host: 111.222.333.444:8098
>> >> Accept: \*/\*
>> >>
>> > < HTTP/1.1 200 OK
>> > < Vary: Accept-Encoding
>> > < Server: MochiWeb/1.1 WebMachine/1.9.0 (someone had painted it blue)
>> > < Date: Fri, 27 Jul 2012 03:58:22 GMT
>> > < Content-Type: application/json
>> > < Content-Length: 422
>> > <
>> > \* Connection #0 to host 111.222.333.444 left intact
>> > \* Closing connection #0
>> >
>> {"props":{"name":"test","allow\_mult":false,"basic\_quorum":false,"big\_vclock":50,"chash\_keyfun":{"mod":"riak\_core\_util","fun":"chash\_std\_keyfun"},"dw":"quorum","last\_write\_wins":false,"linkfun":{"mod":"riak\_kv\_wm\_link\_walker","fun":"mapreduce\_linkfun"},"n\_val":3,"notfound\_ok":true,"old\_vclock":86400,"postcommit":[],"pr":0,"precommit":[],"pw":0,"r":"quorum","rw":"quorum","small\_vclock":50,"w":"quorum","young\_vclock":20}}
>> >
>> >
>> >
>> >
>> >
>> > On Fri, Jul 27, 2012 at 11:40 AM, David Montgomery
>> >  wrote:
>> >> Hi,
>> >>
>> >> I have one node installed on my cloud provider and tried to remote
>> >> write using a python client but I get a connection failure.
>> >>
>> >> On the riak node:
>> >>
>> >> riak-admin status | grep ring\_members
>> >> ring\_members : ['r...@xxx.xxx.xxx.xxx]
>> >>
>> >> service riak ping
>> >> Attempting to restart script through sudo -u riak
>> >> pong
>> >>
>> >> So, I did update the vm.args and app.config with the nodes ip address,
>> >> restarted and set the seed as a ring member.
>> >>
>> >> Services are running. I can also telnet into other open ports e.g.
>> >> 22. I have all ports open to the appropriate servers..
>> >>
>> >> I am also able to write when using localhost to a bucket on the node.
>> >> I just cant use a remote client.
>> >>
>> >> Is there a step I missed with being able to remote write?
>> >>
>> >> On the riak node, this works:
>> >> client =
>> riak.RiakClient(host='127.0.0.1',port=8087,transport\_class=riak.transports.pbc.RiakPbcTransport)
>> >>
>> >> This does not work when I write to a bucket on the riak node or any
>> other node:
>> >> client =
>> riak.RiakClient(host='111.222.333.444',port=8087,transport\_class=riak.transports.pbc.RiakPbcTransport)
>>
>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>> riak-users mailing list
>> riak-users@lists.basho.com
>> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>>
>
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

