---
title: "JMX/SNMP in upcoming OS Riak release"
description: ""
project: community
lastmod: 2017-12-19T08:28:45-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg18502"
author_name: "Russell Brown"
project_section: "mailinglistitem"
sent_date: 2017-12-19T08:28:45-08:00
---


Hi,
Luckily some riak\_tests failed when upgrading from riak\_ee to riak OS next. JMX 
config was why.

Basho's old Riak EE came with replication, JMX, and SNMP. bet365 opensourced 
all these, and have added replication to open source Riak. Running the 
replication riak\_test suite leads to node start up failures when upgrading in 
place from Riak EE to OS Riak >= 2.2.4. The failures are caused by existing JMX 
properties from cuttlefish's inclusion of the JMX schema file when it generated 
the Riak EE riak.conf. I have no idea if this would be an issue in a real life 
upgrade scenario (do people keep their riak.conf between upgrades?) Here are 
the options as I see it, if you think of more and better, say so, please.

 • Do not add JMX and SNMP to OS Riak, and document that you need to 
remove all JMX/SNMP properties from riak.conf files before starting up. People 
will notice if their nodes don't start.

 • Do not add JMX and SNMP to OS Riak and add a bunch of dummy JMX/SNMP 
properties to riak\_kv's schema file. On start up, detect these properties and 
log an ERROR that JMX/SNMP are not supported.

 • Add JMX and SNMP to OS Riak and both document and log a warning that 
they're deprecated. Remove after 2.2.5

I prefer solution 1. Let me know what you think.

Cheers

Russell
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

