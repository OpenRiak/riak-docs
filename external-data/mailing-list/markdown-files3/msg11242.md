---
title: "Re: setting n_val"
description: ""
project: community
lastmod: 2013-06-10T09:28:30-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11242"
mailinglist_parent_id: "msg11240"
author_name: "Eric Redmond"
project_section: "mailinglistitem"
sent_date: 2013-06-10T09:28:30-07:00
---


Alexander,

The simplest answer is that we never recommend running Riak on one node. The 
recommended minimum is 5, but you could possibly get away with 3 (the default 
repl value).

There is a blog post about this from last year, explaining why:
http://basho.com/why-your-riak-cluster-should-have-at-least-five-nodes/

Eric

On Jun 10, 2013, at 9:01 AM, Alexander Ilyin  wrote:

> Hi all,
> 
> I have a question regarding setting the n\_val.
> In the documentation 
> (http://docs.basho.com/riak/latest/tutorials/fast-track/Tunable-CAP-Controls-in-Riak/)
> it is stated that:
> 
> n\_val must be greater than 0 and less than or equal to the number of actual 
> nodes in your cluster to get all the benefits of replication. 
> And, we advise against modifying the n\_val of a bucket after its initial 
> creation as this may result in failed reads because the new 
> value may not be replicated to all the appropriate partitions.
> 
> But this seems contradictory to me. Which value I have to set if I'm setting 
> up one node right now but planning to add second one later?
> Setting n\_val=2 means this value will be greater than actual number of nodes. 
> But setting n\_val=1 is also not advisable since
> I will have to change it later to n\_val=2 (I'm planning to have two replicas 
> in the end).
> 
> I'm also concerned about the performance in case of one node and n\_val=2. 
> Will it degrade since both replicas are stored on the same server?
> 
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

