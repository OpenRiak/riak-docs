---
title: "Re: ListKeys or MapReduce"
description: ""
project: community
lastmod: 2013-02-14T00:02:27-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg10120"
mailinglist_parent_id: "msg10101"
author_name: "Christian Dahlqvist"
project_section: "mailinglistitem"
sent_date: 2013-02-14T00:02:27-08:00
---


Hi Jeremiah,

It does indeed not seem to be documented on the main docs site, and I will try 
to correct this. The only place I have found it described is on the wiki for 
the Ruby client 
(https://github.com/basho/riak-ruby-client/wiki/Secondary-Indexes).
 
Below is also an example of a simple mapreduce job that shows how to count the 
number of records in the 'goog' bucket based on the $bucket secondary index:

curl -XPOST http://localhost:8098/mapred 
 -H 'Content-Type: application/json' 
 -d '{"inputs":{
 "bucket":"goof",
 "index":"$bucket",
 "key":"goof"
 },
 "query":[{"reduce":{"language":"erlang",
 "module":"riak\_kv\_mapreduce",
 "function":"reduce\_count\_inputs"}}]}'

I hope this helps.

Best regards,

Christian


On 13 Feb 2013, at 18:12, Jeremiah Peschka  wrote:

> Is this documented anywhere on the docs.basho.com site? 
> 
> Searching for $bucket produces search results just for "bucket" and Google 
> says "No results found for site:docs.basho.com $bucket."
> 
> ---
> Jeremiah Peschka - Founder, Brent Ozar Unlimited
> MCITP: SQL Server 2008, MVP
> Cloudera Certified Developer for Apache Hadoop
> 
> 
> On Wed, Feb 13, 2013 at 10:08 AM, Christian Dahlqvist  
> wrote:
> Hi,
> 
> In addition to the $key index, there is also a $bucket index available by 
> default. This contains the name of the bucket, and can be used to get all 
> keys in a specific bucket.
> 
> Best regards,
> 
> Christian
> 

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

