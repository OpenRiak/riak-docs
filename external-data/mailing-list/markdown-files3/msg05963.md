---
title: "Re: Secondary Index Query across multiple buckets"
description: ""
project: community
lastmod: 2011-12-15T08:42:26-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05963"
mailinglist_parent_id: "msg05961"
author_name: "Rusty Klophaus"
project_section: "mailinglistitem"
sent_date: 2011-12-15T08:42:26-08:00
---


Hi Jeremy,

Yes, in this scenario, a single query under a large bucket will be faster,
for all of the reasons that you mentioned... connection setup/teardown,
query processing overhead, and seeking to/reading index information from
disk.

Best,
Rusty

On Thu, Dec 15, 2011 at 11:07 AM, Jeremy Raymond wrote:

> Thanks Rusty. What would perform better, running multiple queries across
> several buckets or a single query under one large one? I'd guess the later
> because of whatever overhead is involved in setting up the connection to
> Riak and whatever Riak does to setup and run a mapred/index query.
>
> --
> Jeremy
>
>
>
> On Thu, Dec 15, 2011 at 10:59 AM, Rusty Klophaus  wrote:
>
>> Hi Jeremy,
>>
>> Currently, Secondary Indexes are scoped per bucket. There is no good way
>> to run a Secondary Index query across multiple buckets, short of running
>> multiple queries.
>>
>> You are correct in that you could store the items in a single bucket
>> provided that they all have unique keys. In the LevelDB backend (and most
>> backends), buckets are a logical separation, not a physical separation, so
>> either approach will use the same amount of resources. (The Innostore
>> backend is the exception to this rule, it splits buckets into separate
>> files.)
>>
>> Best,
>> Rusty
>>
>> On Thu, Dec 15, 2011 at 8:29 AM, Jeremy Raymond wrote:
>>
>>> Let me pose the question a different way. What is a good way to pull out
>>> objects across multiple buckets based upon some secondary data that is not
>>> their key?
>>>
>>> The items in the buckets all have unique keys. Maybe move them all into
>>> a single bucket (millions of items) and then I could use secondary indexes
>>> to pull the find them?
>>>
>>> If the keys of my objects are unique does organizing them into buckets
>>> really gain me anything over just putting them all in a single bucket and
>>> using secondary indexes to find them?
>>>
>>> --
>>> Jeremy
>>>
>>>
>>>
>>> On Sat, Dec 10, 2011 at 2:05 PM, Jeremy Raymond wrote:
>>>
>>>> Hello,
>>>>
>>>> Is it possible to run an index query across multiple buckets at once?
>>>> Something similar to how you can feed a map query with bucket/key pairs,
>>>> I'm looking to run an index query with bucket/index pairs.
>>>>
>>>> --
>>>> Jeremy
>>>>
>>>
>>>
>>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>>> riak-users mailing list
>>> riak-users@lists.basho.com
>>> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>>>
>>>
>>
>>
>> --
>> Rusty Klophaus (@rustyio)
>> \*Basho Technologies, Inc.\*
>> www.basho.com
>>
>>
>>
>


-- 
Rusty Klophaus (@rustyio)
\*Basho Technologies, Inc.\*
www.basho.com
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

