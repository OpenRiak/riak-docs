---
title: "Re: first time user setting up a cluster"
description: ""
project: community
lastmod: 2013-02-09T17:50:40-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg10063"
mailinglist_parent_id: "msg10062"
author_name: "tech topcis"
project_section: "mailinglistitem"
sent_date: 2013-02-09T17:50:40-08:00
---


yes, I was following the flow of the documentation.

## Name of the riak node
-name riak@192.168.1.9

I removed four files from /var/lib/riak/ring.

That appears to have worked.

Thank you!

On 02/09/2013 04:31 PM, Brian Sparrow wrote:
> Did you change the node name in vm.args after the node had been
> started once? Remove the ring file in the riak data directory and
> start the node again.
>
> -Brian
>
>
> On Sat, Feb 9, 2013 at 11:30 AM, tech topcis  > wrote:
>
> Hi,
>
> I am following the set-up instructions and ran into a problem
> when I
> switched from the loop back ip to the LAN IP.
>
> I followed this page:
> http://docs.basho.com/riak/1.2.1/cookbooks/Basic-Cluster-Setup/
>
> I was able to edit the two files. Once I tried to start again,
> I had
> an error (below).
>
> Please help me see what I need to change.
>
> Thank you, Michael
>
> log/console output:
> Exec: /usr/lib/riak/erts-5.9.1/bin/erlexec -boot
> /usr/lib/riak/releases/1.2.1/riak -embedded -config
> /etc/riak/app.config -pa
> /usr/lib/riak/lib/basho-patches -args\_file
> /etc/riak/vm.args
> -- console
> Root: /usr/lib/riak
> Erlang R15B01 (erts-5.9.1) [source] [64-bit] [smp:6:6]
> [async-threads:64] [kernel-poll:true]
>
> \*\* /usr/lib/riak/lib/basho-patches/etop\_txt.beam hides
> /usr/lib/riak/lib/observer-1.1/ebin/etop\_txt.beam
> \*\* Found 1 name clashes in code paths
> 10:28:50.822 [info] Application lager started on node
> 'riak@192.168.1.9 '
> 10:28:50.904 [info] Upgrading legacy ring
> 10:28:51.043 [error] gen\_server riak\_core\_capability terminated with
> reason: no function clause matching
> orddict:fetch('riak@192.168.1.9 ',
> []) line 72
> /usr/lib/riak/lib/os\_mon-2.2.9/priv/bin/memsup: Erlang has closed.
>
> Erlang has closed
>
> {"Kernel pid
> 
> terminated",application\_controller,"{application\_start\_failure,riak\_core,{bad\_return,{{riak\_core\_app,start,[normal,[]]},{'EXIT',{{function\_clause,[{orddict,fetch,['riak@192.168.1.9
> 
> ',[]],[{file,[111,114,100,100,105,99,116,46,101,114,108]},{line,72}]},{riak\_core\_capability,renegotiate\_capabilities,1,[{file,[115,114,99,47,114,105,97,107,95,99,111,114,101,95,99,97,112,97,98,105,108,105,116,121,46,101,114,108]},{line,415}]},{riak\_core\_capability,handle\_call,3,[{file,[115,114,99,47,114,105,97,107,95,99,111,114,101,95,99,97,112,97,98,105,108,105,116,121,46,101,114,108]},{line,208}]},{gen\_server,handle\_msg,5,[{file,[103,101,110,95,115,101,114,118,101,114,46,101,114,108]},{line,588}]},{proc\_lib,init\_p\_do\_apply,3,[{file,[112,114,111,99,95,108,105,98,46,101,114,108]},{line,227}]}]},{gen\_server,call,[riak\_core\_capability,{register,{riak\_core,vnode\_routing},{capability,[proxy,legacy],legacy,{riak\_core,legacy\_vnode\_routing,[{true,legacy},{false,proxy}]}}},infinity]}}}}}}"}
>
> Crash dump was written to: /var/log/riak/erl\_crash.dump
> Kernel pid terminated (application\_controller)
> 
> ({application\_start\_failure,riak\_core,{bad\_return,{{riak\_core\_app,start,[normal,[]]},{'EXIT',{{function\_clause,[{orddict,fetch,['riak@192.168.1.9
> ',[]],
>
>
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com 
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>
>

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

