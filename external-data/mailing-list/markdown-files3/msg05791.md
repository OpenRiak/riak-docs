---
title: "Re: Question: {error,{error,insufficient_vnodes_available}}"
description: ""
project: community
lastmod: 2011-11-29T11:32:51-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05791"
mailinglist_parent_id: "msg05765"
author_name: "Dan Reverri"
project_section: "mailinglistitem"
sent_date: 2011-11-29T11:32:51-08:00
---


Hi Walter,

It is not recommended to run more than 1 node per machine. Also, creating a
new node by copying/pasting an existing node is not a good idea.

Were you seeing "insufficient vnodes" before you tried adding nodes?
Was the node under any load? MapReduce, ListKeys, etc.
What does "riak-admin status" return on the original node?
What does "riak-admin ring\_status" return on the original node?
What does "riak-admin "member\_status" return on the original node?

I am concerned that the addition of copied nodes may be creating additional
issues. I would recommend getting the cluster back to a steady state with a
single node. Once this is complete we can review the issues and determine
what the problem might be.

Thanks,
Dan

Daniel Reverri
Developer Advocate
Basho Technologies, Inc.
d...@basho.com


On Mon, Nov 28, 2011 at 3:06 PM, Chung-Hung (Walter) Tsai <
waltert...@gmail.com> wrote:

> Hi Dan,
>
> Yes, I use non-default name parameter and reip it.
>
> Please find my setting and setup info as below:
>
> Version: 1.0.2, .deb
> Linux: Unbuntu 10.4, 64bits
> Vnode: I didn't specify the other 2 nodes specifically, just used
> default setting and did riak start.
> The DB has a bumping due to insufficient file descriptor and got
> resolved after I set ulimit and sysctl for system-wide parameters.
> It ran ok for several days but since yesterday, it gave us the error
> message regarding insufficient vnodes errors.
>
> I'm trying to setup 2 additional nodes by copying and modding
> necessary files (e.g. /usr/sbin/riak to /usr/sbin/riakN) manually now.
> But they each become a single cluster with just a single member in it
> and doesn't allow other vnodes to join.
> When I launch "riak-admin", it shows something like " ... 100% ...
> riak@MY-IP-ADDRESS"
>
>
> Thanks,
> Walter
>
> 2011/11/29 Dan Reverri :
> > Hi Walter,
> > Have you made any changes to your configuration recently such as changing
> > the "-name" parameter in vm.args?
> > Thanks,
> > Dan
> > Daniel Reverri
> > Developer Advocate
> > Basho Technologies, Inc.
> > d...@basho.com
> >
> >
> > On Mon, Nov 28, 2011 at 1:04 AM, Chung-Hung (Walter) Tsai
> >  wrote:
> >>
> >> Hello everyone,
> >>
> >> We just saw many errors like this:
> >>
> >> 2011-11-27 23:02:01.129 [error] <0.700.0> webmachine error:
> >> path="/buckets/.. (SKIPPED).....ui"
> >> {error,{error,insufficient\_vnodes\_available}}
> >>
> >> The DB went well for several days, but now our riak cannot be
> >> connected from our code since the errors appear.
> >> Does anyone know how to resolve the issue?
> >>
> >>
> >> Thanks,
> >> Walter
> >>
> >> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> >> riak-users mailing list
> >> riak-users@lists.basho.com
> >> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
> >
> >
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

