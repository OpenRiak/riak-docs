---
title: "Re: Riak YZ/Solr creating invalid segments"
description: ""
project: community
lastmod: 2016-01-11T11:40:19-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16937"
mailinglist_parent_id: "msg16935"
author_name: "Jason Voegele"
project_section: "mailinglistitem"
sent_date: 2016-01-11T11:40:19-08:00
---


> On Jan 11, 2016, at 2:06 AM, Josh Yudaken  wrote:
> […]
> Unfortunately the standard Lucene CheckIndex is unable to recover this
> error, but there is a patch available at:
> https://issues.apache.org/jira/browse/LUCENE-6762
> 
> After modifying the patch to run on Lucene 4.7 [any plans on
> upgrading?] we managed to bring our nodes back up and they seem to be
> functioning fine.
> 
> Have you seen these issues anywhere else? Any advice on how to try
> solve them besides continually running the updated CheckIndex script
> after each failure?

Hi Josh,

Can you please specify the version of Riak you are running?

We had a fix for a similar (but not identical) issue here:
https://github.com/basho/yokozuna/blob/3e749512d2df07c81def3c9c592615fd8d2d1234/docs/RELEASE\_NOTES.md#bugsmisc
 


We are planning on upgrading to Solr 4.10 in our next release, but the patch 
that you linked to does not appear to have been applied to any Lucene version 
that ships with Solr 4.10 or Solr 5. I’ve created an issue to track that patch:
https://github.com/basho/yokozuna/issues/607 


-- 
Jason Voegele
audophile, n:
 Someone who listens to the equipment instead of the music.\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

