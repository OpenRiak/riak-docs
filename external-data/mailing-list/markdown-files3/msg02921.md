---
title: "Retrying requests to Riak"
description: ""
project: community
lastmod: 2011-04-07T18:47:48-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02921"
author_name: "Greg Nelson"
project_section: "mailinglistitem"
sent_date: 2011-04-07T18:47:48-07:00
---


Hello, 

I have a simple three node cluster that I have been using for testing and 
benchmarking Riak. Lately I've been simulating various failure scenarios -- 
like a node going down, disk going bad, etc.

My application talks to Riak through an haproxy instance running locally on 
each application server. It's configured to round-robin over the nodes in the 
cluster for both HTTP and PBC interfaces, and uses the HTTP /ping health check. 
I assume this is a rather typical setup. 

I'm only using the HTTP interface right now... When there's a failure and a 
node returns a 5XX error, I'd like to have my application retry the request on 
a different node. I could of course build this retry logic into my application, 
but what I'm wondering is if there's another way that people are typically 
doing this. Is there a way to configure haproxy to do this? Do any of the Riak 
client libraries have this logic built-in?

Thanks!

Greeg \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

