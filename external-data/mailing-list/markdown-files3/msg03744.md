---
title: "Re: OpenStruct equivalent in Ripple"
description: ""
project: community
lastmod: 2011-06-17T22:30:07-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03744"
mailinglist_parent_id: "msg03741"
author_name: "Thomas Fee"
project_section: "mailinglistitem"
sent_date: 2011-06-17T22:30:07-07:00
---


You're right. Your method does achieve the desired effect. Thanks.

e.g.

 one :product\_code, :class\_name => 'ExtProperty'
 one :contract\_unit, :class\_name => 'ExtProperty'


On Fri, Jun 17, 2011 at 3:46 PM, Dan Reverri  wrote:

> You can use Ripple::EmbeddedDocument to achieve something similar. Here is
> a sample model, Authorization, that embeds UserInfo as an association:
>
> https://github.com/dreverri/favorite\_color/blob/master/server/lib/favorite\_color/models/authorization.rb
>
> https://github.com/dreverri/favorite\_color/blob/master/server/lib/favorite\_color/models/user\_info.rb
>
> UserInfo is stored inside the Authorization model in Riak.
>
> Thanks,
> Dan
>
> Daniel Reverri
> Developer Advocate
> Basho Technologies, Inc.
> d...@basho.com
>
>
> On Fri, Jun 17, 2011 at 2:21 PM, Thomas Fee  wrote:
>
>> Hello, Ripple users.
>>
>> One thing nice about OpenStruct in Ruby - you can use the same class for
>> many "types" of instances. I desire the same for Ripple - something like
>> OpenStruct, with ability to subclass and specialize, then "embed inline",
>> i.e. to nest.
>>
>> To illustrate, something like the following, with a custom class
>> (ExtProperty) analogous to a subclass of OpenStruct...
>>
>> class ExtProperty
>> include Ripple::NestedDocument ## New thingy
>> property :text, String
>> property :source, String
>> property :code, Integer
>> end
>>
>> class Contract
>> include Ripple::Document
>> property :product\_code, ExtProperty
>> property :contract\_unit, ExtProperty
>> property :price\_quotation\_unit, ExtProperty
>> property :floating\_price\_definition, ExtProperty
>> end
>>
>> I can currently get part of this with the Ripple::NestedAttributes
>> construct, but it lacks a defined class. I would have to explicitly convert
>> a hash to a desired class, and vice versa. And also, the top-level class
>> wouldn't specify the nested class, if you were to think of the class
>> definition as a data model definition.
>>
>> Any plans for something like what I described?
>>
>> - Tom
>>
>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>> riak-users mailing list
>> riak-users@lists.basho.com
>> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>>
>>
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

