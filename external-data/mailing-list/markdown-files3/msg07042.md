---
title: "Re: order of siblings"
description: ""
project: community
lastmod: 2012-03-25T13:34:26-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07042"
mailinglist_parent_id: "msg07039"
author_name: "Michael Radford"
project_section: "mailinglistitem"
sent_date: 2012-03-25T13:34:26-07:00
---


You are right, I was assuming it would keep the vclock that was used
to write each sibling.

In any case, as others pointed out, I think the timestamps are
available from riakc\_obj:get\_metadatas.

Mike

On Sun, Mar 25, 2012 at 1:15 PM, Erik Søe Sørensen  wrote:
> I'm not sure what you mean by "assuming the vclock entries are 1-1 with the 
> siblings".
> That sounds rather like a misunderstanding of either what the vclock is, or 
> of how the vclock is stored in the case of siblings.
> (As for the latter, only the merged vclock is stored for the entire 
> key/value-pair; the length of that vclock is unrelated to the number of 
> siblings.)
>
> Mobile: + 45 2636 1755 | Skype: eriksoesorensen | Twitter: @eriksoe
> Trifork A/S  |  Margrethepladsen 4  | DK- 8000 Aarhus C |  Phone : +45 8732 
> 8787  |  www.trifork.com
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> From: riak-users-boun...@lists.basho.com [riak-users-boun...@lists.basho.com] 
> On Behalf Of Michael Radford [m...@blorf.com]
> Sent: 24 March 2012 19:24
> To: riak-users@lists.basho.com
> Subject: order of siblings
>
> Is there a way to determine what Riak thinks is the last-written
> sibling (or one of them), when reading from Riak with allow\_mult=true
> (via the erlang protobufs api)?
>
> I'm writing some conflict resolution code, which in many cases should
> fall back to the default strategy of last-writer-wins, and it would be
> nice to use Riak's default ordering instead of embedding an extra
> timestamp in the value.
>
> It looks like something like the unpacking of the vclock here might work:
> https://gist.github.com/1380896
>
> ...assuming the vclock entries are 1-1 with the siblings, but that's
> not clear to me. Or maybe the siblings already come in a particular
> order, oldest or newest first?
>
> Thanks,
> Mike
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

