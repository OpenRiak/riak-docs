---
title: "Re: where did my data go when I write to riak?"
description: ""
project: community
lastmod: 2012-12-19T08:46:31-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg09632"
mailinglist_parent_id: "msg09630"
author_name: "Bryan Fink"
project_section: "mailinglistitem"
sent_date: 2012-12-19T08:46:31-08:00
---


On Wed, Dec 19, 2012 at 2:50 AM, David Montgomery
 wrote:
> I am writing to riak and i get no errors. Then again....given a key...,I
> also get no data. Where did it go? How does one debug riak when you write
> to riak..it looks like a success, get no data when get by key and get no
> errors.

Hi, David. I interpolated around your description, and saw this behavior:

>>> from riak import RiakClient
>>> client = RiakClient()
>>> impression\_bucket = client.bucket('impressions')
>>> impression\_bucket.set\_n\_val(2)
>>> impression\_bucket.set\_dw(1)

>>> id = "foo"
>>> qs = "bar=baz"
>>> worker\_bucket = impression\_bucket.new(id, data=qs)
>>> print worker\_bucket.store()

>>> impression\_bucket.get(id)


That answer looked like something was cheating to me, so I also
restarted the node, and tried again:

>>> impression\_bucket.get(id)

>>> o1 = impression\_bucket.get(id)
>>> o1.get\_data()
u'bar=baz'

That looks like things are working on my setup. Could you let me know
whether this is exactly what you did, or at which step we diverged, so
I can check with your exact process?

> I have data stored on an external device. Data is stored in /data/riak and
> riak is total permissions. In that dir I see these folders. kv\_vnode
> lost+found mr\_queue.
>
> Only option I changed was {platform\_data\_dir, "/data/riak"}, in app.config.

I agree that this does look suspicious, but it's actually normal. The
`platform\_data\_dir` setting controls where generic vnode operational
data is stored. The setting controlling where your application's data
is stored is controlled by the `data\_root` setting in the `bitcask` or
`eleveldb` section of app.config, depending on which backend you're
using.

Hope that helps,
Bryan

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

