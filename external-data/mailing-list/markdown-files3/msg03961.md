---
title: "Re: Node crash badmatch enoent"
description: ""
project: community
lastmod: 2011-07-08T08:44:21-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03961"
mailinglist_parent_id: "msg03954"
author_name: "Jon Meredith"
project_section: "mailinglistitem"
sent_date: 2011-07-08T08:44:21-07:00
---


Hi Carlo,

>From the error report it looks like riak was having problems opening a file
in the /tmp/riak/slide-data directory. Do you have any processes that clean
up temporary files / dirs while riak is running?

BR, Jon.

On Thu, Jul 7, 2011 at 2:32 AM, Carlo Bertoldi
wrote:

> Hello everybody,
> I'm following the fast track to learn something about Riak. I've
> installed, from source, riak 0.14.2, ran make all and make devrel.
> I've changed this line in app.config of each node {http, [
> {"192.168.0.186", 809x } ]}, and -name devX@192.168.0.186 in vm.args.
>
> Now I'm trying to insert the goog.csv for the MapReduce experiment, but
> after 11 insertions, the dev1 node crashes.
> I also ran riak-admin test on all 3 nodes, and it was successful on all 3
> of them:
>
> =INFO REPORT==== 7-Jul-2011::10:28:14 ===
> Successfully completed 1 read/write cycle to 'dev1@192.168.0.186'
>
> Am I missing something?
> Thanks,
> Carlo
>
> Some log:
>
> riak-admin status:
> 1-minute stats for 'dev1@192.168.0.186'
> ------------------------------\*\*-------------
> vnode gets : 0
> vnode\_puts : 0
> read\_repairs : 0
> vnode\_gets\_total : 0
> vnode\_puts\_total : 0
> node\_gets : 0
> node\_gets\_total : 0
> node\_get\_fsm\_time\_mean : 0
> node\_get\_fsm\_time\_median : 0
> node\_get\_fsm\_time\_95 : 0
> node\_get\_fsm\_time\_99 : 0
> node\_get\_fsm\_time\_100 : 0
> node\_puts : 0
> node\_puts\_total : 0
> node\_put\_fsm\_time\_mean : 0
> node\_put\_fsm\_time\_median : 0
> node\_put\_fsm\_time\_95 : 0
> node\_put\_fsm\_time\_99 : 0
> node\_put\_fsm\_time\_100 : 0
> read\_repairs\_total : 0
> cpu\_nprocs : 657
> cpu\_avg1 : 164
> cpu\_avg5 : 108
> cpu\_avg15 : 97
> mem\_total : 3396595712
> mem\_allocated : 3262820352
> disk : [{"/",148004296,39},
> {"/dev",1654272,1},
> {"/dev/shm",1658492,1},
> {"/var/run",1658492,1},
> {"/var/lock",1658492,0},
> {"/lib/init/rw",1658492,0},
> {"/var/lib/ureadahead/debugfs"\*\*,148004296,39}]
> nodename : 'dev1@192.168.0.186'
> connected\_nodes : 
> ['dev2@192.168.0.186','dev3@\*\*192.168.0.186
> ']
> sys\_driver\_version : <<"1.5">>
> sys\_global\_heaps\_size : 0
> sys\_heap\_type : private
> sys\_logical\_processors : 2
> sys\_otp\_release : <<"R13B04">>
> sys\_process\_count : 177
> sys\_smp\_support : true
> sys\_system\_version : <<"Erlang R13B04 (erts-5.7.5) [source] [smp:2:2]
> [rq:2] [async-threads:64] [kernel-poll:true]">>
> sys\_system\_architecture : <<"i686-pc-linux-gnu">>
> sys\_threads\_enabled : true
> sys\_thread\_pool\_size : 64
> sys\_wordsize : 4
> ring\_members : ['dev1@192.168.0.186','dev2@\*\*192.168.0.186
> ',
> 'dev3@192.168.0.186']
> ring\_num\_partitions : 64
> ring\_ownership : <<"[{'dev3@192.168.0.186',21},\*\*\n 
> {'dev2@192.168.0.186',21},\n
> {'dev1@192.168.0.186',22}]">>
> ring\_creation\_size : 64
> storage\_backend : riak\_kv\_bitcask\_backend
> pbc\_connects\_total : 0
> pbc\_connects : 0
> pbc\_active : 0
> cluster\_info\_version : <<"1.1.0">>
> luwak\_version : <<"1.0.0">>
> skerl\_version : <<"1.0.0">>
> riak\_kv\_version : <<"0.14.2">>
> riak\_core\_version : <<"0.14.2">>
> bitcask\_version : <<"1.1.6">>
> luke\_version : <<"0.2.4">>
> webmachine\_version : <<"1.8.0">>
> mochiweb\_version : <<"1.7.1">>
> erlang\_js\_version : <<"0.6.1">>
> runtime\_tools\_version : <<"1.8.3">>
> crypto\_version : <<"1.6.4">>
> os\_mon\_version : <<"2.2.5">>
> riak\_err\_version : <<"1.0.1">>
> sasl\_version : <<"2.1.9">>
> stdlib\_version : <<"1.16.5">>
> kernel\_version : <<"2.13.5">>
> executing\_mappers : 0
>
> This is an extract from riak-0.14.2/dev/dev1/log
>
> =ERROR REPORT==== 6-Jul-2011::17:11:51 ===
> \*\* Generic server riak\_kv\_stat terminating
> \*\* Last message in was {'$gen\_cast',{update,{get\_fsm\_\*\*
> time,14310},63477191511}}
> \*\* When Server state == {state,
> {spiral,63477191511,
> [1,0,0,0,0,0,0,0,0,0,0,0,0,1,\*\*
> 0,0,0,0,0,0,0,0,
> 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\*\*
> 0,0,0,0,0,0,0,
> 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\*\*
> 0,0,0,0,0,0,0,
> 0,0,0,0,0,0,0,0,0,0,0,0,0,0]},
> {spiral,63477184231,
> [0,0,0,0,0,0,0,0,0,0,0,0,0,0,\*\*
> 0,0,0,0,0,0,0,0,
> 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\*\*
> 0,0,0,0,0,0,0,
> 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\*\*0]},
> 2,0,0,0,
> {slide,undefined,60,60,
> "/tmp/riak/slide-data/11493/\*\*
> 1309.965031.33105",
> undefined,undefined},
> {slide,undefined,60,60,
> "/tmp/riak/slide-data/11493/\*\*
> 1309.965031.33299",
> undefined,undefined},
> {spiral,63477184231,
> [0,0,0,0,0,0,0,0,0,0,0,0,0,0,\*\*
> 0,0,0,0,0,0,0,0,
> 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\*\*
> 0,0,0,0,0,0,0,
> 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\*\*0]},
> 0,0,
> {spiral,63477184231,
> [0,0,0,0,0,0,0,0,0,0,0,0,0,0,\*\*
> 0,0,0,0,0,0,0,0,
> 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\*\*
> 0,0,0,0,0,0,0,
> 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\*\*0]},
> 0,0}
> \*\* Reason for termination ==
> \*\* {{badmatch,{error,enoent}},
> [{slide,update,3},
> {riak\_kv\_stat,slide\_incr,4},
> {riak\_kv\_stat,handle\_cast,2},
> {gen\_server2,handle\_msg,7},
> {proc\_lib,init\_p\_do\_apply,3}]}
>
>
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\*\*\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/\*\*mailman/listinfo/riak-users\_\*\*lists.basho.com
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

