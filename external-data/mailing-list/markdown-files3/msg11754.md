---
title: "Re: Dangling keys/objects after a batch of sequential inserts (for	going on 3 days)"
description: ""
project: community
lastmod: 2013-07-25T08:12:29-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11754"
mailinglist_parent_id: "msg11668"
author_name: "Siraaj Khandkar"
project_section: "mailinglistitem"
sent_date: 2013-07-25T08:12:29-07:00
---



On 07/22/2013 07:52 PM, Siraaj Khandkar wrote:

On 07/22/2013 10:29 AM, Andrew Thompson wrote:

You should be doing a GET before the PUT with the deletedvclock option.

Here is an example I used to originally test (and fix) this bug:

https://gist.github.com/Vagabond/965376#file-delete\_bug-erl-L48

Sadly, because of backwards compatability issues, it was not possible to
default deletedvclock to be 'on'. Perhaps enough time has passed to
revisit that now. All the client libraries should understand the
message now.



Ah! This makes total sense now - how can there be a resolution without a
vclock? There cannot.



So, why the objects got deleted makes sense, but it still bothers me 
that it took ~3 days for the indices to reach consistency.


There are no other buckets on that cluster and the network load was 
pretty minuscule during that time - 1-2 requests per second, if that.


Can you guys shed some light there for me?

Thanks!

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

