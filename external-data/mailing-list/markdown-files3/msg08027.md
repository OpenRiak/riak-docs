---
title: "Re: Riak Crashing Constantly"
description: ""
project: community
lastmod: 2012-07-23T02:47:05-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08027"
mailinglist_parent_id: "msg08026"
author_name: "Kresten Krab Thorup"
project_section: "mailinglistitem"
sent_date: 2012-07-23T02:47:05-07:00
---


Hi,

It looks like you have some disk corruption of your one or more of riak search 
index files.

The error badarg for erlang:term\_to\_binary says that the contents of a binary 
(which I guess was read from disk) does not parse, so it cannot turn it into an 
erlang data structure.

If you can post the corresponding crash.log file entries, then perhaps there is 
a stack trace that can tell us more; perhaps even which specific file is 
corrupt.

Kresten

On Jul 23, 2012, at 4:04 AM, idmartin wrote:

Hello,

Recent I have run into an issue where if I do almost anything to Riak (
ping, get, put, ect ) riak shuts down, wont respond to anything. I have to
Riak Start it again.

If anyone could give me an suggestions id really appreciate it. Thanks!

heres error.log last few lines:

2012-07-22 21:50:56.102 [error] <0.2355.0> CRASH REPORT Process <0.2355.0>
with 0 neighbours crashed with reason: no match of right hand value
{error,{badarg,[{erlang,binary\_to\_term,[<<131,108,0,0,0,9,104,4,104,3,109,0,0,0,4,112,111,115,116,109,0,0,0,9,112,111,115,116,95,116,101,120,116,109,0,0,0,5,116,105,109,101,115,109,0,0,0,22,56,57,55,45,56,56,45,49,51,52,48,49,51,51,51,51,53,45,49,52,49,51,110,7,1,90,161,115,27,216,194,4,108,0,0,0,1,104,2,100,0,1,112,107,0,2,8,193,106,104,4,104,3,109,0,0,0,4,112,111,115,116,109,0,0,0,9,112,111,115,116,95,116,101,120,116,109,0,0,0,5,99,105,118,105,108,109,0,0,0,22,56,57,55,45,56,56,45,49,...>>]},...]}}
in merge\_index\_backend:start/2
2012-07-22 21:50:56.177 [error] <0.97.0> Supervisor riak\_core\_vnode\_sup had
child undefined started with {riak\_core\_vnode,start\_link,undefined} at
<0.2355.0> exit with reason no match of right hand value
{error,{badarg,[{erlang,binary\_to\_term,[<<131,108,0,0,0,9,104,4,104,3,109,0,0,0,4,112,111,115,116,109,0,0,0,9,112,111,115,116,95,116,101,120,116,109,0,0,0,5,116,105,109,101,115,109,0,0,0,22,56,57,55,45,56,56,45,49,51,52,48,49,51,51,51,51,53,45,49,52,49,51,110,7,1,90,161,115,27,216,194,4,108,0,0,0,1,104,2,100,0,1,112,107,0,2,8,193,106,104,4,104,3,109,0,0,0,4,112,111,115,116,109,0,0,0,9,112,111,115,116,95,116,101,120,116,109,0,0,0,5,99,105,118,105,108,109,0,0,0,22,56,57,55,45,56,56,45,49,...>>]},...]}}
in merge\_index\_backend:start/2 in context child\_terminated
2012-07-22 21:50:56.209 [error] <0.2352.0> gen\_server
riak\_core\_vnode\_manager terminated with reason: no match of right hand value
{error,{{badmatch,{error,{badarg,[{erlang,binary\_to\_term,[<<131,108,0,0,0,9,104,4,104,3,109,0,0,0,4,112,111,115,116,109,0,0,0,9,112,111,115,116,95,116,101,120,116,109,0,0,0,5,116,105,109,101,115,109,0,0,0,22,56,57,55,45,56,56,45,49,51,52,48,49,51,51,51,51,53,45,49,52,49,51,110,7,1,90,161,115,27,216,194,4,108,0,0,0,1,104,2,100,0,1,112,107,0,2,8,193,106,104,4,104,3,109,0,0,0,4,112,111,115,116,109,0,0,0,9,112,111,115,116,95,116,101,120,116,109,0,0,0,5,99,105,118,105,108,109,0,0,0,22,56,57,...>>]},...]}}},...}}
in riak\_core\_vnode\_manager:get\_vnode/3
2012-07-22 21:50:56.276 [error] <0.2352.0> CRASH REPORT Process
riak\_core\_vnode\_manager with 0 neighbours crashed with reason: no match of
right hand value
{error,{{badmatch,{error,{badarg,[{erlang,binary\_to\_term,[<<131,108,0,0,0,9,104,4,104,3,109,0,0,0,4,112,111,115,116,109,0,0,0,9,112,111,115,116,95,116,101,120,116,109,0,0,0,5,116,105,109,101,115,109,0,0,0,22,56,57,55,45,56,56,45,49,51,52,48,49,51,51,51,51,53,45,49,52,49,51,110,7,1,90,161,115,27,216,194,4,108,0,0,0,1,104,2,100,0,1,112,107,0,2,8,193,106,104,4,104,3,109,0,0,0,4,112,111,115,116,109,0,0,0,9,112,111,115,116,95,116,101,120,116,109,0,0,0,5,99,105,118,105,108,109,0,0,0,22,56,57,...>>]},...]}}},...}}
in riak\_core\_vnode\_manager:get\_vnode/3
2012-07-22 21:50:56.309 [error] <0.94.0> Supervisor riak\_core\_sup had child
riak\_core\_vnode\_manager started with riak\_core\_vnode\_manager:start\_link() at
<0.2352.0> exit with reason no match of right hand value
{error,{{badmatch,{error,{badarg,[{erlang,binary\_to\_term,[<<131,108,0,0,0,9,104,4,104,3,109,0,0,0,4,112,111,115,116,109,0,0,0,9,112,111,115,116,95,116,101,120,116,109,0,0,0,5,116,105,109,101,115,109,0,0,0,22,56,57,55,45,56,56,45,49,51,52,48,49,51,51,51,51,53,45,49,52,49,51,110,7,1,90,161,115,27,216,194,4,108,0,0,0,1,104,2,100,0,1,112,107,0,2,8,193,106,104,4,104,3,109,0,0,0,4,112,111,115,116,109,0,0,0,9,112,111,115,116,95,116,101,120,116,109,0,0,0,5,99,105,118,105,108,109,0,0,0,22,56,57,...>>]},...]}}},...}}
in riak\_core\_vnode\_manager:get\_vnode/3 in context child\_terminated
2012-07-22 21:50:56.370 [error] <0.2369.0> CRASH REPORT Process <0.2369.0>
with 0 neighbours crashed with reason: bad argument in call to
erlang:binary\_to\_term(<<131,108,0,0,0,9,104,4,104,3,109,0,0,0,4,112,111,115,116,109,0,0,0,9,112,111,115,116,95,116,...>>)
in mi\_buffer:read\_value/2
2012-07-22 21:50:57.740 [error] <0.2368.0> CRASH REPORT Process <0.2368.0>
with 0 neighbours crashed with reason: no match of right hand value
{error,{badarg,[{erlang,binary\_to\_term,[<<131,108,0,0,0,9,104,4,104,3,109,0,0,0,4,112,111,115,116,109,0,0,0,9,112,111,115,116,95,116,101,120,116,109,0,0,0,5,116,105,109,101,115,109,0,0,0,22,56,57,55,45,56,56,45,49,51,52,48,49,51,51,51,51,53,45,49,52,49,51,110,7,1,90,161,115,27,216,194,4,108,0,0,0,1,104,2,100,0,1,112,107,0,2,8,193,106,104,4,104,3,109,0,0,0,4,112,111,115,116,109,0,0,0,9,112,111,115,116,95,116,101,120,116,109,0,0,0,5,99,105,118,105,108,109,0,0,0,22,56,57,55,45,56,56,45,49,...>>]},...]}}
in merge\_index\_backend:start/2



--
View this message in context: 
http://riak-users.197444.n3.nabble.com/Riak-Crashing-Constantly-tp4024737.html
Sent from the Riak Users mailing list archive at Nabble.com.

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com



Mobile: + 45 2343 4626 | Skype: krestenkrabthorup | Twitter: @drkrab
Trifork A/S | Margrethepladsen 4 | DK- 8000 Aarhus C | Phone : +45 8732 
8787 | www.trifork.com





\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

