---
title: "Re: riakc doesn't save metadata properly?"
description: ""
project: community
lastmod: 2012-10-22T14:08:05-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg09005"
author_name: "David Parfitt"
project_section: "mailinglistitem"
sent_date: 2012-10-22T14:08:05-07:00
---


Hello Metin -

 Sorry for the delay. At the moment, all metadata needs to be stored
under the <<"X-Riak-Meta">> dict key. The following example
illustrates how this works:

%% To store metadata:
Object = riakc\_obj:new(<<"groceries">>, <<"mine">>, <<"eggs & bacon">>).
MetaData = dict:from\_list([{<<"X-Riak-Meta">>, [{"Foo", "Bar"}]}]),
Object2 = riakc\_obj:update\_metadata(Object, MetaData).
riakc\_pb\_socket:put(Pid, Object2).

%% To retrieve metadata:
{ok, O} = riakc\_pb\_socket:get(Pid, <<"groceries">>, <<"mine">>).
{ok, MD} = dict:find(<<"X-Riak-Meta">>, riakc\_obj:get\_metadata(O)).

We're kicking around ways to improve this in the future.

Cheers -
Dave

On Fri, Oct 19, 2012 at 8:31 AM, Metin Akat  wrote:
> I am trying to do something like:
>
> Meta1 = dict:store(<<"ver">>, Ver, Meta0),
> Obj1 = riakc\_obj:update\_metadata(Obj, Meta1),
>
> and then save the object. But on a subsequent read, the metadata k/v pair is
> not there.
>
> Is there anything special that needs to be done for this to work, or is this
> illegal way to use Riak?
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

