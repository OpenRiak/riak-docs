---
title: "Error while importing data"
description: ""
project: community
lastmod: 2011-11-19T04:22:22-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05681"
author_name: "Nitish Sharma"
project_section: "mailinglistitem"
sent_date: 2011-11-19T04:22:22-08:00
---


Hi,
To give my Riak setup a good stress testing, I decided to import a large
dataset (consisting of around 160 million records). But before importing
the whole thing, I tested the import python script (using protocol buffers)
using 1 million records, which was successful with ~2200 writes/sec. The
script, essentially, puts the data into a queue and couple of threads gets
the data from the queue and store it in Riak.
When started with full dataset, after storing several million objects, I
get thread exception with timeout errors.
Following is the traceback:

 File "/usr/lib/python2.7/threading.py", line 552, in \_\_bootstrap\_inner
 self.run()
 File "/usr/lib/python2.7/threading.py", line 505, in run
 self.\_\_target(\*self.\_\_args, \*\*self.\_\_kwargs)
 File "python\_load\_data.py", line 23, in worker
 new\_obj.store()
 File 
"/usr/local/lib/python2.7/dist-packages/riak-1.3.0-py2.7.egg/riak/riak\_object.py",
line 296, in store
 Result = t.put(self, w, dw, return\_body)
 File 
"/usr/local/lib/python2.7/dist-packages/riak-1.3.0-py2.7.egg/riak/transports/pbc.py",
line 188, in put
 msg\_code, resp = self.recv\_msg()
 File 
"/usr/local/lib/python2.7/dist-packages/riak-1.3.0-py2.7.egg/riak/transports/pbc.py",
line 370, in recv\_msg
 raise Exception(msg.errmsg)
Exception: timeout

The cluster consists of 3 nodes (Ubuntu 10.04). The nodes have enough disk
space; number of file handles used (~2500) are also within limit (32768);
number of concurrent ports 32768. I cant figure out what else could be the
possible reason for the exceptions.

Any Suggestions?

Cheers
Nitish
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

