---
title: "RE: riak failed to start up"
description: ""
project: community
lastmod: 2012-08-07T21:26:26-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08210"
mailinglist_parent_id: "msg08209"
author_name: "Sangeetha.PattabiRaman2"
project_section: "mailinglistitem"
sent_date: 2012-08-07T21:26:26-07:00
---


Hi Richard,

[hadoop@CTSINGMRGTO thrift-0.7.0]$ ldd /bin/sed
 linux-vdso.so.1 => (0x00007fff80560000)
 libselinux.so.1 => /lib64/libselinux.so.1 (0x000000380a200000)
 libc.so.6 => /lib64/libc.so.6 (0x0000003808e00000)
 libdl.so.2 => /lib64/libdl.so.2 (0x0000003808a00000)
 /lib64/ld-linux-x86-64.so.2 (0x0000003808600000)
[hadoop@CTSINGMRGTO thrift-0.7.0]$ which sed
/bin/sed

 I am getting the same ...no lib is missing..please else tell me 
...actually I have a 2 node riak cluster (10.232.5.169 ,10.232.5.170)....riak 
start on 170 is fine ...i am able to see the whole process on ps -ef | grep 
riak on 170 machine ...

[hadoop@CTSINGMRGTO1 ~]$ ps -ef | grep riak
riak 17782 1 0 May09 ? 00:00:26 
/usr/lib64/riak/erts-5.8.5/bin/epmd -daemon
riak 24054 1 0 02:16 ? 00:00:00 
/usr/lib64/riak/erts-5.9.1/bin/run\_erl -daemon /tmp/riak/ /var/log/riak exec 
/usr/sbin/riak console
riak 24057 24054 99 02:16 pts/1 00:00:10 
/usr/lib64/riak/erts-5.9.1/bin/beam.smp -K true -A 64 -W w -- -root 
/usr/lib64/riak -progname riak -- -home /var/lib/riak -- -boot 
/usr/lib64/riak/releases/1.2.0/riak -embedded -config /etc/riak/app.config -pa 
/usr/lib64/riak/basho-patches -name riak@10.232.5.170 -setcookie riak -- console


iam still suffering with 169 machine only...the other node 170 is fine ..please 
tell me hw to resume the cluster back wit hone machine up and other down...
Thanks
Sangeetha





-----Original Message-----
From: riak-users-boun...@lists.basho.com 
[mailto:riak-users-boun...@lists.basho.com] On Behalf Of Richard Heycock
Sent: Wednesday, August 08, 2012 9:31 AM
To: riak-users
Subject: RE: riak failed to start up

Excerpts from Sangeetha.PattabiRaman2's message of 2012-08-08 13:33:25 +1000:
> [root@CTSINGMRGTO riak]# sudo -u riak sh -c 'echo $PATH'
> /sbin:/bin:/usr/sbin:/usr/bin

That's what I would expect.

> [root@CTSINGMRGTO riak]# sudo -u riak -i
> -bash: id: command not found
> -bash: tty: command not found
> -bash: grep: command not found
> -bash: sed: command not found

This is very odd! Given that your path looks fine & without getting on the 
machine it looks as if it's completely and utterly screwed.

My initial thoughts are it's one of the following:

\* /bin or /usr/bin has had files deleted - but I assume the machine
 behaves properly when you are normally logged in so this would be
 unlikely.
\* Some of the shared libraries are missing or corrupt but the above
 caveat applies.

As any user other than riak what happens when you type:

 which sed

it should return /bin/sed (I'm checking this on a debian machine so it may be 
different on yours).

You might want to run

 ls /bin
 ls /usr/bin

and see what that returns. It should be a whole load of stuff including sed, 
tty, etc

If sed exists (I'll assume it's path is /bin/sed) try running ldd

 ldd /bin/sed

is should return:
 linux-vdso.so.1 => (0x00007fff6f1ff000)
 libselinux.so.1 => /lib/x86\_64-linux-gnu/libselinux.so.1 
(0x00007fcb57137000)
 libc.so.6 => /lib/x86\_64-linux-gnu/libc.so.6 (0x00007fcb56db0000)
 libdl.so.2 => /lib/x86\_64-linux-gnu/libdl.so.2 (0x00007fcb56bab000)
 /lib64/ld-linux-x86-64.so.2 (0x00007fcb57377000)

If any shared libs are missing you'll get (from the top of my head):

 libdl.so.2 => missing

it might not be "missing" but it won't be a path.


rgh

> Still the same .unable to start
>
> -----Original Message-----
> From: riak-users-boun...@lists.basho.com
> [mailto:riak-users-boun...@lists.basho.com] On Behalf Of Richard
> Heycock
> Sent: Wednesday, August 08, 2012 9:00 AM
> To: riak-users
> Subject: Re: riak failed to start up
>
> Excerpts from Sangeetha.PattabiRaman2's message of 2012-08-07 21:15:16 +1000:
> > Hi ,
> >
> > Can any one help me on the start up error ..thx in advance
> > [root@CTSINGMRGTO riak]# cat console.log
> > 2012-08-07 09:13:54.260 [error] <0.164.0> CRASH REPORT Process
> > riak\_core\_capability with 0 neighbours exited with reason: no
> > function clause matching orddict:fetch('riak@127.0.0.1', []) line 72
> > in
> > gen\_server:terminate/6 line 747
> >
> > [root@CTSINGMRGTO riak]# riak start
> > Attempting to restart script through sudo -u riak
> > /etc/profile: line 31: id: command not found
> > /usr/sbin/riak: line 6: uname: command not found
> > /usr/sbin/riak: line 6: [: too many arguments
> > /usr/sbin/riak: line 30: whoami: command not found sudo doesn't
> > appear to be installed and your EUID isn't riak
>
> This looks like your PATH isn't being set. Is "sudo -u riak"
>
> sudo -u riak sh -c 'echo $PATH'
>
> should show something like:
>
> /usr/local/bin:/usr/bin:/bin
>
> try getting a shell as riak:
>
> sudo -u riak -i
>
> checking the path is ok and run it from there.
>
> rgh
>
> >
> > on running as service
> >
> > [root@CTSINGMRGTO riak]# service riak start Starting Riak: Riak
> > failed to start within 15 seconds, see the output of 'riak console'
> > for more information.
> > If you want to wait longer, set the environment variable
> > WAIT\_FOR\_ERLANG to the number of seconds to wait.
> > [FAILED]
> >
> > Thanks & regards
> > sangeetha
> >
> > This e-mail and any files transmitted with it are for the sole use of the 
> > intended recipient(s) and may contain confidential and privileged 
> > information. If you are not the intended recipient(s), please reply to the 
> > sender and destroy all copies of the original message. Any unauthorized 
> > review, use, disclosure, dissemination, forwarding, printing or copying of 
> > this email, and/or any action taken in reliance on the contents of this 
> > e-mail is strictly prohibited and may be unlawful.
> --
> [e]: r...@roughage.com.au
> [im]: r...@jabber.org
>
> You're worried criminals will continue to penetrate into cyberspace,
> and I'm worried complexity, poor design and mismanagement will be
> there to meet them - Marcus Ranum
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
> This e-mail and any files transmitted with it are for the sole use of the 
> intended recipient(s) and may contain confidential and privileged 
> information. If you are not the intended recipient(s), please reply to the 
> sender and destroy all copies of the original message. Any unauthorized 
> review, use, disclosure, dissemination, forwarding, printing or copying of 
> this email, and/or any action taken in reliance on the contents of this 
> e-mail is strictly prohibited and may be unlawful.
--
[e]: r...@roughage.com.au
[im]: r...@jabber.org

You're worried criminals will continue to penetrate into cyberspace, and I'm 
worried complexity, poor design and mismanagement will be there to meet them - 
Marcus Ranum

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
This e-mail and any files transmitted with it are for the sole use of the 
intended recipient(s) and may contain confidential and privileged information. 
If you are not the intended recipient(s), please reply to the sender and 
destroy all copies of the original message. Any unauthorized review, use, 
disclosure, dissemination, forwarding, printing or copying of this email, 
and/or any action taken in reliance on the contents of this e-mail is strictly 
prohibited and may be unlawful.

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

