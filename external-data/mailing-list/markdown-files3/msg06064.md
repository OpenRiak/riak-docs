---
title: "Re: Building and packaging riak from source"
description: ""
project: community
lastmod: 2011-12-23T09:51:34-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06064"
mailinglist_parent_id: "msg06063"
author_name: "Ultrabug"
project_section: "mailinglistitem"
sent_date: 2011-12-23T09:51:34-08:00
---


On 23/12/2011 18:10, Jared Morrow wrote:

Thanks for your reply

> 1. The link you have is the most detailed one we have so far for
> installing from source. I'm not really familiar with gentoo packaging,
> but if you can package from a source file, doing a 'make rel' in the
> riak repository will get you a .tar.gz with the proper files included.
> 

That's what I think I've been doing and I "only" get a rel/riak
directory. It's fine tho I'd like to be able to choose where those files
get written instead (and then their actual "tree" to match those
standard in Gentoo).

I tried to patch the Makefile to change the target\_dir= of the rel
target with no notable effect, am I missing something ?

> 2. We aren't using a system-wide js library because we need it
> integrated into erlang as part of our erlang-js library. That library
> at one point in time needed to work on solaris sparc, which was a
> supported platform at the time. This significantly limited the number
> of javascipt libraries we could use. Since javascript is such a
> fundamental part of how we function, it is important that we test
> against a fixed library. Using a system wide one instead of an
> integrated one is currently not possible. In the future, we have plans
> to update our JS runtime now that there are better options out there
> that can run on multiple platforms, but it won't be for the 1.1 release
> unfortunately.
> 

I'm happy to hear that this is a goal of yours. I may submit a patch
because some of the bundled libs don't respect users' {C,LD}FLAGS.

> 3. Riak master (https://github.com/basho/riak) has the R14B04
> inclusion, but at the time of release of 1.0.2, 14B04 was not available.
> This is why packaged source from our downloads site will not include
> 14b04 and was tested only against 14b03. 
> 

Alrighty, thanks.

> -Jared
> 
> On Fri, Dec 23, 2011 at 8:23 AM, Ultrabug  > wrote:
> 
> Hi,
> 
> I'm interested in packaging riak for Gentoo Linux but I'm running in
> some troubles having a clean build of riak (I'm not used to erlang
> building tbh) so I'll start with a few questions if I may.
> 
> 1/ Is there a more detailed article I failed to find about how to build
> "properly" riak (I mean like choosing the target installation
> directories etc) ? [1]
> 
> 2/ Why are you not using system-wide nspr/spidermonkey libraries instead
> of bundling them ? Is there a way somewhere to specify we want to use
> the system ones at build time ?
> 
> 3/ Installation instructions says "Riak requires Erlang R14B03 or
> later." but when trying to get it working with R14B04 it failed. You may
> want to adjust your regular expression in rebar.config to at least
> R14B0[234].
> 
> Thanks in advance for your answers and help.
> 
> Regards,
> 
> [1] http://wiki.basho.com/Installing-Riak-from-Source.html
> 
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com 
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
> 
> 


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

