---
title: "Re: Connection Pool with Erlang PB Client Necessary?"
description: ""
project: community
lastmod: 2011-08-15T00:24:30-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg04372"
mailinglist_parent_id: "msg04073"
author_name: "Andrew Berman"
project_section: "mailinglistitem"
sent_date: 2011-08-15T00:24:30-07:00
---


So I looked at a bunch of pooling applications and none of them really
have the functionality and flexibility I'm used to with Java
connection pools. So, I created my own OTP pooling application,
Pooly. It allows multiple pools to be configured, has flexibility on
configuring the pool (idle timeout, max age of processes, initial
count, acquire increment, max pool size, and min pool size) and
reduces the size of the pool based on the configuration parameters.

Feel free to check it out: https://github.com/aberman/pooly

--Andrew

On Tue, Jul 26, 2011 at 12:20 PM, Justin Sheehy  wrote:
> Yes, Andrew -- that is a fine approach to using a connection pool.
>
> Go for it.
>
> -Justin
>
>
>
> On Tue, Jul 26, 2011 at 3:18 PM, Andrew Berman  wrote:
>> Thanks for all the replies guys!
>>
>> I just want to make sure I'm totally clear on this.  Bob's solution
>> would work well with my design.  So basically, this would be the
>> workflow?
>>
>> 1.  check out connection from the pool
>> 2.  set client id on connection (which would have some static and some
>> random component)
>> 3.  perform multiple operations (gets, puts, etc.) which would be seen
>> as a single "transaction"
>> 4.  check in the connection to the pool
>>
>> This way once the connection is checked out from the pool, if another
>> user comes along he cannot get that same connection until it has been
>> checked back in, which would meet Justin's requirements.  However,
>> each time it's checked out, a new client id is created.
>>
>> Does this sound reasonable and in line with proper client id usage?
>>
>> Thanks again!
>>
>> Andrew
>>
>>
>> On Tue, Jul 26, 2011 at 11:55 AM, Justin Sheehy  wrote:
>>> The simplest guidance on client IDs that I can give:
>>>
>>> If two mutation (PUT) operations could occur concurrently or without
>>> awareness of each other, then they should have different client IDs.
>>>
>>> As a result of the above: if you are sharing a connection, then you
>>> should use a different client ID for each separate user of that
>>> connection.
>>>
>>> -Justin
>>>
>>
>

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

