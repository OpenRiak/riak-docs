---
title: "MapReduce paging result"
description: ""
project: community
lastmod: 2012-08-09T11:46:07-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08246"
author_name: "郎咸武"
project_section: "mailinglistitem"
sent_date: 2012-08-09T11:46:07-07:00
---


Hi guys,
 How to do a paging in MapReduce queries?
 I try to write some method in the module(trend\_riak.erl, Add -pa
/home/jason/work/server/trunk/trend\_riak to vm.args).
 I thought it will well, but unfortunately it does not work. Becase the
"Reduce" ,the result is wrong.
 Is there the other methods? Thanks.

 Cheers Jason

121 get\_reduce\_bucket\_values(Records, {Start, Max}) ->
122 Skip = get\_skip\_num(Start, Max),
123 io:format("get\_reduce\_bucket\_values Records=~p Skip= ~p~n",
[length(Records), Skip]),

124 if length(Records) >= Skip ->
125 %%NewList = lists:keysort(#pubsub\_item.published, Records),
126 F = fun(#pubsub\_item{published=Published1, level=Level1},
127 #pubsub\_item{published=Published2, level=Level2}) ->
128 if Level1 > Level2 -> true;
129 Level1 == Level2 ->
130 if Published1 > Published2 -> true;
131 true -> false
132 end;
133 true -> false
134 end
135 end,
136 NewList = lists:sort(F, Records),
137 R = lists:sublist(NewList, Skip, Max),
138 io:format("get\_reduce\_bucket\_value R=~p Skip= ~p~n",
[length(R), skip]),
139 R;
140 true ->
141 []
142 %Records
143 end.


-- 
只为成功找方法，不为失败找理由
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

