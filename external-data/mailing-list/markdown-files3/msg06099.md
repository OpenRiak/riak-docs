---
title: "Re: Best practices for using the PB client"
description: ""
project: community
lastmod: 2011-12-30T11:32:15-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06099"
mailinglist_parent_id: "msg06096"
author_name: "Andrew Berman"
project_section: "mailinglistitem"
sent_date: 2011-12-30T11:32:15-08:00
---


You should look into using HAProxy in front of your nodes. Let HAProxy
load balance between all your nodes and then if one goes down, HAProxy just
pulls it out of the load balancing cluster automatically until it is
restored. Then your pooler can just pool connections from HAProxy instead
so it doesn't have to worry at all about failed nodes.

Also, shameless plug, I have a pooler as well which has a few more options
than pooler. You can check it out here: https://github.com/aberman/pooly

--Andrew

On Fri, Dec 30, 2011 at 9:58 AM, Marc Campbell  wrote:

> Hey all,
>
> I'm looking for some best practices in handling connections when using the
> protocol buffer client. Specifically, I have 3 nodes in my cluster, and
> need to figure out how to handle the situation when one of the nodes is
> down.
>
> I'm currently using a pooler app (https://github.com/seth/pooler) and
> this helps me distribute the load to all of the nodes, but when one goes
> down, the app doesn't recover nicely.
>
> I'm about to write some code in my app to handle this, but before I do, I
> thought I'd check for existing solutions and best practices:
>
> - Is there an existing connection pooling mechanism that someone has
> created which handles node failures automatically?
>
> If not, then I'm looking forward to writing it!
>
> Thank in advance,
> Marc
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

