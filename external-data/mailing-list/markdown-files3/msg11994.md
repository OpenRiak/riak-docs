---
title: "Re: different versions in upgrade"
description: ""
project: community
lastmod: 2013-08-13T05:51:50-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11994"
mailinglist_parent_id: "msg11993"
author_name: "Guido Medina"
project_section: "mailinglistitem"
sent_date: 2013-08-13T05:51:50-07:00
---


Same here, except that Riak 1.3.2 did that for me automatically. As 
Jeremiah mentioned, you should go first to 1.3.2 on all nodes, per node 
the first time Riak starts it will take some time upgrading the 2i 
indexes storage format, if you see any weirdness then execute 
"riak-admin reformat-indexes" as soon as you upgrade a node, 1 by 1.


Before you even start read the release notes for each major version 
besides the rolling upgrade doc:


\*Riak 1.3.2:\* https://github.com/basho/riak/blob/1.3/RELEASE-NOTES.md
\*Riak 1.4.1:\* https://github.com/basho/riak/blob/1.4/RELEASE-NOTES.md

HTH,

Guido.

On 13/08/13 13:41, Bhuwan Chawla wrote:

Having done a similar upgrade, a gotcha to keep in mind:


"Note for Secondary Index users
If you use Riak's Secondary Indexes and are upgrading from a version 
prior to Riak version 1.3.1, you need to reformat the indexes using 
the riak-admin reformat-indexes command"




On Tue, Aug 13, 2013 at 8:36 AM, Jeremiah Peschka 
> wrote:


 From
 http://docs.basho.com/riak/latest/ops/running/rolling-upgrades/ it
 looks like you should upgrade to 1.3.2 and then 1.4.1

 Depending on how badly you need the extra capacity, it would
 probably be better to start by upgrading all nodes and then adding
 the new one.

 -- 
 Jeremiah Peschka - Founder, Brent Ozar Unlimited

 MCITP: SQL Server 2008, MVP
 Cloudera Certified Developer for Apache Hadoop

 On Aug 13, 2013, at 5:06 AM, Louis-Philippe Perron
 > wrote:


 Hi riak peoples,
 I'm in the process of adding a new node to a aging (1 node)
 cluster. I would like to know what would be the prefered
 incrementing upgrade to get all my nodes on the latest riak
 version. The best scenario would also have the least downtime.
 The old node is at riak version 1.2.1.

 My actual plan is:

 - install riak 1.4.1 on the new node
 - add the new 1.4.1 node to the old 1.2.1 cluster.
 - bring the 1.2.1 node offline
 - upgrade the 1.2.1 node to 1.4.1
 - put the upgraded node back online

 will this work?
 thanks!


 \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
 riak-users mailing list
 riak-users@lists.basho.com 
 http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com


 \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
 riak-users mailing list
 riak-users@lists.basho.com 
 http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com




\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

