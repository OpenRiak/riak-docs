---
title: "Re: reads/writes during node replacement"
description: ""
project: community
lastmod: 2016-11-14T05:08:27-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17741"
mailinglist_parent_id: "msg17738"
author_name: "Magnus Kessler"
project_section: "mailinglistitem"
sent_date: 2016-11-14T05:08:27-08:00
---


On 12 November 2016 at 00:08, Johnny Tan  wrote:

> When doing a node replace (http://docs.basho.com/riak/1.
> 4.12/ops/running/nodes/replacing/), after commit-ing the plan, how does
> the cluster handle reads/writes? Do I include the new node in my app's
> config as soon as I commit, and let riak internally handle which node(s)
> will do the reads/writes? Or do I wait until the ringready on the new node
> before being able to do reads/writes to it?
>
> johnny
>
>
Hi Johnny,

As soon as a node has been joined to the cluster it is capable of taking on
requests. `riak-admin ringready` returns true after a join or leave
operation when the new ring state has been communicated successfully to all
nodes in the cluster.

During a replacement operation, the leaving node will hand off [0] all its
partitions to the joining node. Both nodes can handle requests during this
phase and store data in the partitions they own. Once the leaving node has
handed off all its partitions, it will automatically shut down. Please keep
this in mind when configuring your clients or load balancers. Clients
should deal with nodes being temporarily or permanently unavailable.

Kind Regards,

Magnus

[0]: http://docs.basho.com/riak/kv/2.1.4/using/reference/handoff/

-- 
Magnus Kessler
Client Services Engineer
Basho Technologies Limited

Registered Office - 8 Lincolnâ€™s Inn Fields London WC2A 3BP Reg 07970431
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

