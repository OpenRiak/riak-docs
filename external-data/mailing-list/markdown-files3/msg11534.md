---
title: "Re: Quickly deleting + recreating item in Riak deletes new item"
description: ""
project: community
lastmod: 2013-07-15T12:07:06-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11534"
mailinglist_parent_id: "msg11527"
author_name: "Matthew Dawson"
project_section: "mailinglistitem"
sent_date: 2013-07-15T12:07:06-07:00
---


On July 15, 2013 09:55:05 AM Andrew Thompson wrote:
> See this old post:
> 
> http://lists.basho.com/pipermail/riak-users\_lists.basho.com/2011-June/004601
> .html
> 
> Effectively, you should be doing a GET before ANY PUT, and using the
> deletedvclock option if you're using PB or checking for the
> X-Riak-VClock header on the 404 response. If you get back a tombstone,
> you should be doing the new PUT with that tombstone so you don't
> accidentally create a sibling with that tombstone.
> 
> Alternatively, turn off allow\_mult=false, so you can resolve the
> siblings yourself.
> 
> Andrew
Hi Andrew,

Thanks for the response! I read through that mailing list thread, and tried 
doing as you said by fetching the object before storing the newly created 
value. However, I'm still seeing objects that are disappearing.

I'm running with all my buckets having allow\_mult set to true, so I'm not sure 
if that would have fixed the issue. I already resolve conflicts on all 
fetches, so I'm pretty sure I'm not just seeing a single tombstone and 
assuming the data is dead based upon that.
-- 
Matthew

signature.asc
Description: This is a digitally signed message part.
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

