---
title: "Re: Riak Search Map Reduce error"
description: ""
project: community
lastmod: 2013-11-18T15:09:45-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13009"
mailinglist_parent_id: "msg13004"
author_name: "Alexander Sicular"
project_section: "mailinglistitem"
sent_date: 2013-11-18T15:09:45-08:00
---


More info please...

Version
Current config
Hardware
Data size
Search Schema
Etc. 

But I would probably say that your search is returning too many keys to your 
mr. More inline. 

@siculars
http://siculars.posthaven.com

Sent from my iRotaryPhone

> On Nov 18, 2013, at 13:59, Roger Diller  wrote:
> 
> Using the Riak Java client, I am executing a search map reduce like this:
> 
> MapReduceResult result = riakClient.mapReduce(SEARCH\_BUCKET, 
> search).execute(); 

^is this part a typo. Cause otherwise it looks like you do a s>mr, set the 
search and then another s>mr. 

> 
> String search = "systemId:" + systemName + " AND indexId:" + indexId;
> 
> MapReduceResult result = riakClient.mapReduce(SEARCH\_BUCKET, 
> search).execute(); 
> 
> This worked fine when the bucket contained a few thousand keys. Now that we 
> have far more data stored in the bucket (at least 250K keys), it's throwing 
> this generic error:
> 
> com.basho.riak.client.RiakException: java.io.IOException: 
> {"error":"map\_reduce\_error"}
> 
> We've also noticed that storing new key/values in the bucket has slowed WAY 
> down.
> 
> Any idea what's going on?

Your data set is incorrectly sized to your production config. 

> Are there limitations to Search Map Reduce?

Certainly

> Are there configuration options that need changed?

Possibly

> Any help would be greatly appreciated.
> 
> 
> -- 
> Roger Diller
> Flex Rental Solutions, LLC
> Email: ro...@flexrentalsolutions.com
> Skype: rogerdiller
> Time Zone: Eastern Time
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

