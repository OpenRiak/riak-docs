---
title: "RE: Can't create first user"
description: ""
project: community
lastmod: 2013-07-02T00:51:04-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11367"
mailinglist_parent_id: "msg11334"
author_name: "Guy Morton"
project_section: "mailinglistitem"
sent_date: 2013-07-02T00:51:04-07:00
---


Hi Hector,

I successfully created the admin user after fixing the riak/app.config to use 
the proper backend, but I am still struggling to configure the system to work 
properly. 

What I need to know is what IPs should I be using for each component when all 
components are running on a single machine? Ie, it's a single node at this 
stage.

I also want to be able to access the riak-cs services (the riak-cs-control UI 
etc) from a web browser on another machine, create buckets, store files etc.

The documentation is very confusing on this point. This seems like it would be 
a common first use case for people testing RiakCS out, and I can't figure out 
how to make it work. 

Do I need to use SSL? What is the difference between using 127.0.0.1 and the 
external IP on the machine in the config files? Sometimes using the external IP 
seems to make the system non-functional. It's also confusing as to when host 
names (eg s3.blah.com) are the right choice and when IPs are.

A clear bit of documentation showing how to set up this particular use case 
would be very helpful!

Thanks.

--
Guy Morton
Web Development Manager
Brüel & Kjær EMS

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
From: Hector Castro [hec...@basho.com]
Sent: Tuesday, 25 June 2013 12:17 AM
To: Guy Morton
Cc: Riak Users Mailing List [riak-users@lists.basho.com]
Subject: Re: Can't create first user

On Mon, Jun 24, 2013 at 1:33 AM, Guy Morton  wrote:
> Hi people. I've seen posts where others have had this same issue, 
> specifically this on the riak\_cs issues list - 
> https://github.com/basho/riak\_cs/issues/529
>
> Unfortunately the solution is not posted, if there is one. I have followed 
> the instructions to be found here: 
> http://docs.basho.com/riakcs/latest/tutorials/fast-track/Building-a-Local-Test-Environment/
> but that didn't help. I am still stuck with the same issue.

The 3 most common causes of Riak CS installation issues I've seen so far:

\* Riak's `app.config` is not configured with the proper backend [0]
\* `anonymous\_user\_creation` is not set to `true` in the Riak CS `app.config` [1]
\* `stanchion\_ip` is misconfigured in either the Riak CS or Stanchion
`app.config` [2] [3]

My recommendation would be to check these, and after restarting all of
the services, test that they're up using:

 sudo riak ping
 sudo riak-cs ping
 sudo stanchion ping

[0] 
http://docs.basho.com/riakcs/latest/cookbooks/configuration/Configuring-Riak/#Setting-up-the-Proper-Riak-Backend
[1] 
http://docs.basho.com/riakcs/latest/cookbooks/configuration/Configuring-Riak-CS/#Specifying-the-Admin-User
[2] 
http://docs.basho.com/riakcs/latest/cookbooks/configuration/Configuring-Riak-CS/#Specifying-the-Stanchion-Node
[3] 
http://docs.basho.com/riakcs/latest/cookbooks/configuration/Configuring-Stanchion/#Specifying-the-Stanchion-IP-Address-and-Port

> Help, please?
>
> # curl -H 'Content-Type: application/json' -X POST 
> http://localhost:8080/riak-cs/user -v --data '{"email":"guy.mor...@bksv.com", 
> "name":"guy"}'
> \* About to connect() to localhost port 8080 (#0)
> \* Trying 127.0.0.1... connected
> \* Connected to localhost (127.0.0.1) port 8080 (#0)
>> POST /riak-cs/user HTTP/1.1
>> User-Agent: curl/7.21.0 (x86\_64-pc-linux-gnu) libcurl/7.21.0 OpenSSL/0.9.8o 
>> zlib/1.2.3.4 libidn/1.15 libssh2/1.2.6
>> Host: localhost:8080
>> Accept: \*/\*
>> Content-Type: application/json
>> Content-Length: 45
>>
> < HTTP/1.1 503 Service Unavailable
> < Vary: Accept
> < Server: Riak CS
> < Location: http://localhost:8080/riak-cs/user
> < Date: Mon, 24 Jun 2013 05:21:13 GMT
> < Content-Type: application/xml
> < Content-Length: 192
> <
> \* Connection #0 to host localhost left intact
> \* Closing connection #0
> xml version="1.0" 
 encoding="UTF-8"?>`ServiceUnavailable`Please 
> reduce your request 
> rate./riak-cs/user
>
> --
> Guy Morton
> Web Development Manager
> Brüel & Kjær EMS
>
> This e-mail is confidential and may be read, copied and used only by the 
> intended recipient. If you have received it in error, please contact the 
> sender immediately by return e-mail. Please then delete the e-mail and do not 
> disclose its contents to any other person.
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

This e-mail is confidential and may be read, copied and used only by the 
intended recipient. If you have received it in error, please contact the sender 
immediately by return e-mail. Please then delete the e-mail and do not disclose 
its contents to any other person.

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

