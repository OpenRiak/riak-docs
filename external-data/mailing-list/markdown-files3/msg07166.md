---
title: "Re: slow mapred_search key lookups for single terms"
description: ""
project: community
lastmod: 2012-04-06T13:03:37-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07166"
mailinglist_parent_id: "msg07153"
author_name: "Bryan Fink"
project_section: "mailinglistitem"
sent_date: 2012-04-06T13:03:37-07:00
---


On Fri, Apr 6, 2012 at 11:00 AM, Michael Radford  wrote:
> Calling riak\_kv\_mrc\_pipe directly from the console is just as slow as
> using the pb interface.

Thank you for confirming that. Much appreciated.

> it seemed to be encoding one PB message per search result and
> spending quite a bit of time doing it
> …snip…
> So if there's an opportunity
> for batching the search results, that seems like it would be a big
> improvement as well.
>
> (It looks like that is currently up to whatever process is sending the
> results in the first place. But maybe it would be a good idea for the
> pb socket to accumulate M/R results until it reaches some threshold of
> bytes to send...calling term\_to\_binary to estimate is pretty fast.)

Indeed, you're correct here as well. I think there was a TODO about
just this at some point, but it seems to have been lost in an
issue-tracker shuffle. I've refiled it at
https://github.com/basho/riak\_kv/issues/312

Thanks,
Bryan

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

