---
title: "Re: Mapreduce zero out counters"
description: ""
project: community
lastmod: 2013-12-13T16:34:40-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13240"
mailinglist_parent_id: "msg13239"
author_name: "Bryce Verdier"
project_section: "mailinglistitem"
sent_date: 2013-12-13T16:34:40-08:00
---


Thank you for the response Sam. I'll just delete the keys, that seems 
like an easier way to go.


Bryce

On 12/13/2013 03:26 PM, Sam Elliott wrote:

Bryce,

You have two options.

The first is just to delete the keys. As long as they are deleted at every 
replica and there are no concurrent increments, then no counters will make a 
return and change what you're counting. Counters are initialised to zero.

The other option is to decrement/increment the counter back to zero. Here's 
some code that should do so (using the 1.4 counters API) [1]. Please test it 
out before running it in production. This of course keeps updates around, and 
will also be affected by concurrent updates (the zeroing will decrement by 
however much it observes the counter to be). The code provided won't work with 
2.0, but i can talk you through re-writing it.

Sam

[1] https://gist.github.com/lenary/334978ac1df0c21c4cc2




\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

