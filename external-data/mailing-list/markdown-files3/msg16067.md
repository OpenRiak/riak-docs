---
title: "Re: scaling up vertically upgrading HD"
description: ""
project: community
lastmod: 2015-04-23T08:04:19-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16067"
mailinglist_parent_id: "msg16066"
author_name: "Alex De la rosa"
project_section: "mailinglistitem"
sent_date: 2015-04-23T08:04:19-07:00
---


Awesome! Thank you very much :)

On Thursday, April 23, 2015, Alexander Sicular  wrote:

> Hi Alex!
>
> Yes, each node would use an even amount of space regardless of maximum
> disk space available.
>
> The "evenness" has to do with Riak's uniform data distribution due to the
> sha1 consistent hashing algorithm. The output of sha1 is a number in the
> range of 0 to 2^160. That range is partitioned into segments called
> "vnodes" in Riak parlance (see ring\_size configuration option). Vnodes, or
> virtual nodes, in turn are equally allocated to physical machines in the
> cluster. Thus, each node in a Riak cluster can be thought of as being
> responsible for 1/n of data stored and 1/n performance where n is the
> number of machines in the cluster.
>
> I think I use some more and or better words to describe it here
> https://basho.com/why-riak-just-works/
>
> -Alexander
>
> @siculars
> http://siculars.posthaven.com
>
> Sent from my iRotaryPhone
>
> On Apr 23, 2015, at 10:42, Alex De la rosa  > wrote:
>
> Cool, thank you :) however, is true that if 4 nodes are 1TB and the other
> one is 2TB; the 5 nodes will act as having 1TB each, right? (I guess that's
> what you mean with "Riak allocates data to nodes evenly")
>
> Thanks,
> Alex
>
> On Thu, Apr 23, 2015 at 4:40 PM, Jon Meredith  > wrote:
>
>> Hi Alex,
>>
>> Riak allocates data to nodes evenly - it doesn't take into account free
>> space. You should just be able to upgrade all nodes to 1Tb and Riak will
>> use the space, without needing to take any additional actions.
>>
>> Jon
>>
>> On Thu, Apr 23, 2015 at 7:17 AM, Alex De la rosa > > wrote:
>>
>>> Hi there,
>>>
>>> I have the following question about scaling up vertically upgrading HDs
>>> to get more space. I have the understanding that if HDs are of different
>>> sizes on ring creation, they get the smallest size of them all and make all
>>> nodes even, for example:
>>>
>>> Node 1: 500GB
>>> Node 2: 500GB
>>> Node 3: 750GB
>>> Node 4: 500GB
>>> Node 5: 750GB
>>>
>>> In this case riak would make a parity of 500GB per node... so... how
>>> could we scale up the HDs? Imagine I want to turn them into the following:
>>>
>>> Node 1: 1TB
>>> Node 2: 1TB
>>> Node 3: 1TB
>>> Node 4: 1TB
>>> Node 5: 1TB
>>>
>>> How can you rebalance the cluster in the way their partitions grow to
>>> fit this new setup? (using Riak 2.1)
>>>
>>> Thanks,
>>> Alex
>>>
>>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>>> riak-users mailing list
>>> riak-users@lists.basho.com
>>> 
>>> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>>>
>>>
>>
>>
>> --
>> Jon Meredith
>> Chief Architect
>> Basho Technologies, Inc.
>> jmered...@basho.com 
>>
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> 
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

