---
title: "Re: [Confusing search docs] Enabling search on bucket in Riak 2.0"
description: ""
project: community
lastmod: 2013-11-19T14:34:12-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13025"
mailinglist_parent_id: "msg13017"
author_name: "Eric Redmond"
project_section: "mailinglistitem"
sent_date: 2013-11-19T14:34:12-08:00
---


Kartik,

Your confusion is understandable, since our docs are not up to date yet (and 
they won't be until closer to the final 2.0 release date). Because of this, the 
docs you're reading correspond to the old version of RiakSearch, and not the 
new Search (codenamed yokozuna). Thus, you cannot rely on the docs just yet.

The good news is, we do have some docs for yokozuna on github:

https://github.com/basho/yokozuna/tree/develop/docs

You do have yokozuna enabled by setting `yokozuna = on`. Don't worry about 
those links going to 404, because they aren't relevant at this time.

You do not need to add postcommit hooks. In 2.0.0pre5 you merely need to create 
an index, then associate that index with a bucket (you can optionally create a 
custom solr schema and use that for the index, or you can simply use the 
default schema):

https://github.com/basho/yokozuna/blob/develop/docs/ADMIN.md#index-creation

(note that this will change in the 2.0.0 final release, but it sufficient to 
get started in pre5).

After you've created an index and associated it with a bucket, then you need 
only insert json, xml, or plain text, which will be extracted based on the 
field. If you suffix your json or xml field named with a dynamic field 
parameter, it will be indexed as that type (the list can be found here 
https://github.com/basho/yokozuna/blob/develop/priv/default\_schema.xml).

eg, assuming the bucket "people" has an index associated with the same name:

# Add a JSON value:
curl -XPUT -H'content-type:application/json' 
http://localhost:8098/buckets/people/keys/me \
-d'{ "name\_s" : "kartik" }'

# perform a search
curl "http://localhost:8098/search/people?q=name\_s:kar\*"

Hope that helps. We'll updating the docs in the next month.

Eric

On Nov 19, 2013, at 7:28 AM, Kartik Thakore  wrote:

> Hello,
> 
> I am reviewing Riak 2.0pre5 for use and I am confused with the search 
> documentation provided here: 
> 
> http://docs.basho.com/riak/2.0.0pre5/dev/using/search/
> 
> It tells me to enable search:
> 
> http://docs.basho.com/riak/2.0.0pre5/ops/advanced/configs/search/
> 
> But there is no such file in etc anymore after I use make rel to build Riak 
> 2.0
> 
> So I enabled yokozuna = on and I think I have it enabled
> 
> [RIAK MACHINE]:8098 is showing:
> 
> yz\_wm\_extract
> yz\_wm\_index
> yz\_wm\_schema
> yz\_wm\_search
> yz\_wm\_search
> yz\_wm\_search
> 
> But these links go to 404 pages
> 
> Now how do I set up search on a bucket? Do I still need to do post commit 
> hooks on the buckets?
> 
> Thank You for your help
> 
> 
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

