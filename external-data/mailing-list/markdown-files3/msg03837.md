---
title: "Re: Controlling order of results from link phase"
description: ""
project: community
lastmod: 2011-06-27T00:04:30-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03837"
mailinglist_parent_id: "msg03831"
author_name: "Andrew Berman"
project_section: "mailinglistitem"
sent_date: 2011-06-27T00:04:30-07:00
---


Nevermind on the lists:sort issue below as I realized that list:umerge
requires that the lists be sorted.

Thanks anyway,

Andrew


On Sun, Jun 26, 2011 at 3:36 PM, Andrew Berman  wrote:
> I think I found the answer and it is no, I cannot control the sort.  I
> found the code here in riak\_kv\_wm\_link\_walker.erl:
>
> links(Object) ->
>    MDs = riak\_object:get\_metadatas(Object),
>    lists:umerge(
>      [ case dict:find(?MD\_LINKS, MD) of
>            {ok, L} ->
>                [ [B,K,T] || {{B,K},T} <- lists:sort(L) ];
>            error -> []
>        end
>        || MD <- MDs ]).
>
> Why run lists:sort?  Shouldn't the sort be up to the user after he
> gets the actual object?  I don't understand why the sort processing is
> necessary at the link phase.  Thoughts?
>
> --Andrew
>
> On Sun, Jun 26, 2011 at 3:15 PM, Andrew Berman  wrote:
>> I've noticed that when I run the link function, it automatically
>> orders the links based on Id.  Is there a way to tell it not to sort
>> the links?  In other words, I want the links in the order in which
>> they were put in the list (most recent at the head of the list) and I
>> see from Rekon that that is how they are being stored.  Basically, I'm
>> running a reduce\_slice on the result of the link phase so that Riak
>> doesn't load up all the objects with which the links are pointing.  If
>> the answer is no, I cannot control the order of the links, is the only
>> option to prepend something like the time (e.g. millis since
>> 1-1-1970)?
>>
>> Thanks,
>>
>> Andrew
>>
>

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

