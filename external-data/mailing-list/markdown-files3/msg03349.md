---
title: "Re: Buckets with different expiry_secs value"
description: ""
project: community
lastmod: 2011-05-17T00:32:30-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03349"
mailinglist_parent_id: "msg03348"
author_name: "Mathias Meyer"
project_section: "mailinglistitem"
sent_date: 2011-05-17T00:32:30-07:00
---


Dmitry,

the Protocol Buffer interface doesn't yet support setting most of the available 
bucket properties. Support for doing that was added just recently though.

For now the easiest workaround is to just use the REST API, for which you'll 
need the binaries. Both binaries and atoms work, but for the REST API it's best 
to use binaries as it doesn't handle atoms.

Mathias Meyer
Developer Advocate, Basho Technologies

On Dienstag, 17. Mai 2011 at 08:58, Dmitry Demeshchuk wrote: 
> Greetings.
> 
> I'm looking for a way to set expiry\_secs for specific buckets. For
> example, if some buckets need to have object expiration time and some
> buckets need to have unlimited lifetime.
> 
> I've tried to do this using multi\_backend:
> 
> {storage\_backend, riak\_kv\_multi\_backend},
> {multi\_backend\_default, <<"default">>},
> {multi\_backend, [
> {<<"default">>, riak\_kv\_bitcask\_backend, []},
> {<<"cache">>, riak\_kv\_bitcask\_backend, [
> {expiry\_secs, 60},
> ]}
> ]},
> 
> But when I call
> 
> riakc\_pb\_socket:set\_bucket(<<"test">>, [{backend, <<"cache">>}]),
> 
> this setting isn't applied to the bucket. Tried to set different data
> directories for both backends â€“ with the same result.
> 
> Is such thing possible at all, and if it's possible, what am I doing wrong?
> 
> Also, looks like riak\_kv\_multi\_backend.erl has documentation a bit
> different with wiki. At wiki backends aliases are binaries, and at the
> module's docs they are atoms. Probably, both of them work, but neither
> of them worked for me :(
> 
> -- 
> Best regards,
> Dmitry Demeshchuk
> 
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
> 


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

