---
title: "Re: badarg ets delete"
description: ""
project: community
lastmod: 2010-09-16T16:38:39-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01090"
mailinglist_parent_id: "msg01089"
author_name: "Andy Gross"
project_section: "mailinglistitem"
sent_date: 2010-09-16T16:38:39-07:00
---


Hi Michael,

These errors are almost certainly harmless and being thrown when empty,
non-owned vnodes get shut down.

It appears that in some cases, the underlying ets table might already be
deleted/GC'd by the time BackendModule:stop tries to explicitly delete it.
 I've opened this bug to track the issue:
http://issues.basho.com/show\_bug.cgi?id=723

- Andy

--
Andy Gross 
VP, Engineering
Basho Technologies, Inc.
http://basho.com




On Thu, Sep 16, 2010 at 3:59 PM, Michael Colussi  wrote:

>
> Hey guys I have an application using Riak 0.12 that does puts, gets, and
> updates. It works fine but I get these random error reports in my logs.
> Any ideas?
>
> ERROR <0.149.0> \*\* Generic server <0.149.0> terminating
> \*\* Last message in was stop
> \*\* When Server state == {state,139315}
> \*\* Reason for termination ==
> \*\* {badarg,[{ets,delete,[139315]},
> {riak\_kv\_ets\_backend,srv\_stop,1},
> {riak\_kv\_ets\_backend,handle\_call,3},
> {gen\_server,handle\_msg,5},
> {proc\_lib,init\_p\_do\_apply,3}]}
> ERROR <0.149.0> crash\_report [[{initial\_call,
>
> {riak\_kv\_ets\_backend,init,['Argument\_\_1']}},
> {pid,<0.149.0>},
> {registered\_name,[]},
> {error\_info,
> {exit,
> {badarg,
> [{ets,delete,[139315]},
> {riak\_kv\_ets\_backend,srv\_stop,1},
> {riak\_kv\_ets\_backend,handle\_call,3},
> {gen\_server,handle\_msg,5},
> {proc\_lib,init\_p\_do\_apply,3}]},
> [{gen\_server,terminate,6},
> {proc\_lib,init\_p\_do\_apply,3}]}},
> {ancestors,
>
> [<0.148.0>,riak\_core\_vnode\_sup,riak\_core\_sup,
> <0.58.0>]},
> {messages,[]},
> {links,[<0.148.0>]},
> {dictionary,[]},
> {trap\_exit,false},
> {status,running},
> {heap\_size,377},
> {stack\_size,24},
> {reductions,243}],
> []]
> ERROR <0.148.0> \*\* State machine <0.148.0> terminating
> \*\* Last event in was timeout
> \*\* When State == active
> \*\* Data == {state,159851741583067506678528028578343455274867621888,
> riak\_kv\_vnode,
>
> {state,159851741583067506678528028578343455274867621888,
> riak\_kv\_ets\_backend,<0.149.0>,
> {kv\_lru,100,147509,143412,151606},
> {dict,0,16,16,8,80,48,
>
> {[],[],[],[],[],[],[],[],[],[],[],[],[],
> [],[],[]},
>
> {{[],[],[],[],[],[],[],[],[],[],[],[],[],
> [],[],[]}}},
> true},
> undefined,none}
> \*\* Reason for termination =
> \*\* {{badarg,[{ets,delete,[139315]},
> {riak\_kv\_ets\_backend,srv\_stop,1},
> {riak\_kv\_ets\_backend,handle\_call,3},
> {gen\_server,handle\_msg,5},
> {proc\_lib,init\_p\_do\_apply,3}]},
> {gen\_server,call,[<0.149.0>,stop]}}
> ERROR <0.148.0> crash\_report [[{initial\_call,
> {riak\_core\_vnode,init,['Argument\_\_1']}},
> {pid,<0.148.0>},
> {registered\_name,[]},
> {error\_info,
> {exit,
> {{badarg,
> [{ets,delete,[139315]},
> {riak\_kv\_ets\_backend,srv\_stop,1},
> {riak\_kv\_ets\_backend,handle\_call,3},
> {gen\_server,handle\_msg,5},
> {proc\_lib,init\_p\_do\_apply,3}]},
> {gen\_server,call,[<0.149.0>,stop]}},
> [{gen\_fsm,terminate,7},
> {proc\_lib,init\_p\_do\_apply,3}]}},
> {ancestors,
>
> [riak\_core\_vnode\_sup,riak\_core\_sup,<0.58.0>]},
> {messages,
> [{'EXIT',<0.149.0>,
> {badarg,
> [{ets,delete,[139315]},
> {riak\_kv\_ets\_backend,srv\_stop,1},
> {riak\_kv\_ets\_backend,handle\_call,3},
> {gen\_server,handle\_msg,5},
> {proc\_lib,init\_p\_do\_apply,3}]}}]},
> {links,[<0.60.0>]},
> {dictionary,[]},
> {trap\_exit,true},
> {status,running},
> {heap\_size,377},
> {stack\_size,24},
> {reductions,952}],
> []]
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

