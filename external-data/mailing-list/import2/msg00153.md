---
title: "m/r error "All nodes failed""
description: ""
project: community
lastmod: 2010-04-24T04:32:08-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg00153"
author_name: "Alexander Sicular"
project_section: "mailinglistitem"
sent_date: 2010-04-24T04:32:08-07:00
---


Hi,

Here is some curl output that should get me a 200 OK, but instead I'm getting a 
500:

macpro1:dev siculars$ curl -i http://localhost:8098/riak/test-bucket-1/10
HTTP/1.1 200 OK
X-Riak-Vclock: a85hYGBgymDKBVIsbLoK3hlMiYx5rAytlu5H+SDCbM1JbOZG+VCJXpBEFgA=
Vary: Accept-Encoding
Server: MochiWeb/1.1 WebMachine/1.6 (eat around the stinger)
Link: ; rel="up"
Last-Modified: Sat, 24 Apr 2010 09:44:45 GMT
ETag: 5RdHI4GyS3P3d9BovqQEcs
Date: Sat, 24 Apr 2010 11:19:04 GMT
Content-Type: application/json
Content-Length: 84

{"numVal":65486915222,"staticStringVal":"test\_string","dynStringVal":"'roeNiGNJCS'"}

macpro1:dev siculars$ curl -v -d '{"inputs":"test-bucket-1", 
"query":[{"map":{"language":"javascript","bucket":"test-bucket-1","key":"10", 
"keep":true}}]}' -H "Content-Type: application/json" 
http://127.0.0.1:8098/mapred
\* About to connect() to 127.0.0.1 port 8098 (#0)
\* Trying 127.0.0.1... connected
\* Connected to 127.0.0.1 (127.0.0.1) port 8098 (#0)
> POST /mapred HTTP/1.1
> User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 
> OpenSSL/0.9.8l zlib/1.2.3
> Host: 127.0.0.1:8098
> Accept: \*/\*
> Content-Type: application/json
> Content-Length: 120
> 
< HTTP/1.1 500 Internal Server Error
< Server: MochiWeb/1.1 WebMachine/1.6 (eat around the stinger)
< Date: Sat, 24 Apr 2010 11:19:18 GMT
< Content-Type: application/json
< Content-Length: 16
< 
\* Connection #0 to host 127.0.0.1 left intact
\* Closing connection #0
All nodes failed
macpro1:dev siculars$ 

Here are the sasl and console dumps: http://pastebin.org/173041

So, this started by checking out the airport-test.js test in riak-js nodejs 
library. Noticed it there, then tried it out in some of my code. Then regressed 
to just running the curl commands directly against riak. gets/puts/deletes 
work. I'm running one riak node on localhost, vs 0.10, on a 10.6.3/64b mac with 
the latest innostore backend. These tests used to work on 0.9x. Trying to 
figure out what changed. 

Thanks, Alexander


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

