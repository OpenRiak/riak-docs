---
title: "Re: Deleting items from search index increases disk usage"
description: ""
project: community
lastmod: 2012-10-26T05:40:47-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg09064"
mailinglist_parent_id: "msg09063"
author_name: "Vladimir Shapovalov"
project_section: "mailinglistitem"
sent_date: 2012-10-26T05:40:47-07:00
---


Hi Jeremy,

As far I'm concerned, delete operation doesn't delete the data physically,
just mark it as deleted. I've encountered that problem a while ago and was
also surprised about that fact that the data grows instead of reduce.

Cheers
Vladimir

On Fri, Oct 26, 2012 at 2:26 PM, Jeremy Raymond  wrote:

> Hello,
>
> I had Riak search enabled on a bucket containing millions of items. I
> no longer need these items to be searchable so I uninstalled search on
> the bucket via search-cmd. I'm looking to free the space consumed by
> the search index for this bucket. Following a previous post [1] on
> this list I'm deleting the items from the search index by running
> search:delete\_docs/1. After getting through about 1 million items I'm
> seeing a noticeable increase in disk usage across the 3 node cluster,
> an increase of about 7GB per node.
>
> Any ideas on why my disk usage would be increasing rather than
> decreasing? The data in the cluster is static, the only activity is me
> deleting the items from the search index.
>
> I'm running riak 1.1.2 with leveldb as the backend.
>
> [1]:
> http://lists.basho.com/pipermail/riak-users\_lists.basho.com/2011-September/005696.html
>
> --
> Jeremy
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

