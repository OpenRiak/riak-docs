---
title: "Re: consistency impact on performance"
description: ""
project: community
lastmod: 2014-01-19T21:42:31-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13409"
mailinglist_parent_id: "msg13408"
author_name: "Luke Bakken"
project_section: "mailinglistitem"
sent_date: 2014-01-19T21:42:31-08:00
---


Hi Satoshi,

When using Riak, your object sizes should ideally be 1MB or less. A
330MB object will never result in acceptable Riak performance.

If you intend to store large objects like this I strongly recommend
using Riak CS, which will break up the object for you into chunks that
can be managed by Riak. It also provides an S3-compatible API.

Please read more about Riak CS here: http://docs.basho.com/riakcs/latest/

Thanks
--
Luke Bakken
CSE
lbak...@basho.com


On Sun, Jan 19, 2014 at 9:29 PM, Satoshi Yamada  wrote:
> Hi, i'm Satoshi, new to riak.
>
> I would like to check how consistency changes impacts on the performance of
> riak cluster. I used w=1 and w=3, and I expected at least two times more of
> execution time, but there seems no significant change. I saw more difference
> in Cassandra, so I wonder if it's normal in riak or there is something wrong
> in my testing. Can anyone give me some advice on it?
>
> I simply checked as shown below.
>
> w=1
> $ time curl -v -XPUT
> http://mycluster.com:8098/buckets/w1/keys/data.tar.gz?w=1 -H "X-Riak-Vclock:
> a85hYGB.........." -H "Content-Type: text/plain" --data-binary @data.tar.gz
> ...
> ...
> ...
> real 0m27.501s
> user 0m0.378s
> sys 0m0.674s
>
> w=3
> $ time curl -v -XPUT
> http://mycluster.com:8098/buckets/w3/keys/data.tar.gz?w=3 -H "X-Riak-Vclock:
> a85hYGB.........." -H "Content-Type: text/plain" --data-binary @data.tar.gz
> ...
> ...
> ...
> real 0m29.278s
> user 0m0.398s
> sys 0m0.674s
>
> My cluster consists of 40, all active and healthy machines and running
> riak-1.4.1.
> The data I use is 330MB.
>
> Thanks in advance,
> Satoshi
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

