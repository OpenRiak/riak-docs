---
title: "Re: Unable to compile Riak on Raspberry Pi 3"
description: ""
project: community
lastmod: 2017-04-01T09:27:17-0700
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg18116"
mailinglist_parent_id: "msg18115"
author_name: "Alex Moore"
project_section: "mailinglistitem"
sent_date: 2017-04-01T09:27:17-0700
---


Hi cocos,

I recently did some testing around this and journaled the steps needed to
build KV and TS on Raspbian:

https://gist.github.com/alexmoore/7bbdece19223cea1e144e4d23a5ed7ec

This includes building Basho's flavor of Erlang, and the fix that Matthew
mentioned.

Thanks,
Alex

On Sat, Apr 1, 2017 at 7:41 AM, Matthew Von-Maszewski 
wrote:

> A fix for that problem in leveldb/util/perf\_count.cc already exists on the
> "develop" branch of the github repository basho/leveldb. Download it and
> rebuild.
>
> Sent from my iPad
>
> On Apr 1, 2017, at 4:08 AM, cocos  wrote:
>
> Hello,
>
> currenty I'm trying to install Riak on the Raspberry Pi 3 for testing
> purposes. I used the following instruction from basho:
>
> http://docs.basho.com/riak/kv/2.2.2/setup/installing/source/
>
> I'm having problems compiling it from source. I tried to compile it on
> Raspbian Jessie and then switched to Ubuntu Server 16.04. Both times with
> the same result. It is not compiling and aborts at a certain point. I don't
> know what causes the problem since it only says: `recipe for target
> 'util/perf\_count.o' failed`. Searching Google and the mailing list from
> basho weren't successful.
>
> The version of `gcc` is `gcc (Raspbian 4.9.2-10) 4.9.2`. The version of
> `Erlang` is `Erlang R16B02\_basho8 (erts-5.10.3)`
>
> The commands i used are the following:
>
> \*Installing Erlang:\*
>
> wget http://s3.amazonaws.com/downloads.basho.com/erlang/
> otp\_src\_R16B02basho10.tar.gz
>
> tar zxvf otp\_src\_R16B02-basho10.tar.gz
>
> cd OTP\_R16B02\_basho10
> ./otp\_build autoconf
> ./configure && make && sudo make install
>
> \*Installing Riak:\*
>
> wget http://s3.amazonaws.com/downloads.basho.com/riak/2.2/
> 2.2.1/riak-2.2.1.tar.gz
>
> tar zxvf riak-2.2.1.tar.gz
>
> cd riak-2.2.1
> make locked-deps
> make rel
>
> Any suggestions are welcome.
>
> ## \*Output:\* ##
>
> `./include/leveldb/atomics.h:155:15: note:
> template argument deduction/substitution failed
> util/perf\_count.cc:439:40:
> note: deduced conflicting types for parameter ‘ValueT’
> (‘unsigned int’ and‘int’ add\_and\_fetch(ptr\_32, 1);`
>
>
> `Makefile:190: recipe for target 'util/perf\_count.o' failed
> make[1]: \*\*\* [util/perf\_count.o] Error 1
> make[1]: \*\*\* Waiting for unfinished jobs....
> make[1]: Leaving directory '/home/pi/Riak/riak/deps/
> eleveldb/c\_src/leveldb'
> ERROR: Command [compile] failed!
> Makefile:23: recipe for target 'compile' failed
> make: \*\*\* [compile] Error 1`
>
> Von meinem Samsung Galaxy Smartphone gesendet.
>
> 
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

