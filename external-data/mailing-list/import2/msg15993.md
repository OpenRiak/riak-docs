---
title: "Riak 2.0.0 Pre/Post commit error"
description: ""
project: community
lastmod: 2015-04-08T03:57:04-0700
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15993"
mailinglist_parent_id: "msg15990"
author_name: "Humberto Rodriguez"
project_section: "mailinglistitem"
sent_date: 2015-04-08T03:57:04-0700
---


Hello everyone, I have been trying to follow the examples of hooks http://docs.basho.com/riak/2.0.0/dev/using/commit-hooks/, but allways obtained an error (see below). 
I am using Riak 2.0.0. These are the commands that I am using.curl -XPUT -H "Content-Type: application/json" -d '{"props":{"precommit":[{"mod": "validate\_demo", "fun": "validate"}]}}' http://127.0.0.1:8090/buckets/demo/props curl http://localhost:8090/buckets/demo/props curl -XPUT -H "Content-Type: application/json" -d '{scorew": 5}' http://127.0.0.1:8090/buckets/demo/keys/1  
I checked list of precommit of the bucket and it is there, nevertheless obtained an error. I also checked the configuration (chkconfig) of my node (I'm using a single node) and is OK.
 
I'm using Mac OS X 10.10 (14A389a)
Any suggestion? 
Thanks in advance,
Humberto
 
This is the structure directory
 
riak-2.0.0
 -> bin
 -> data
 -> erts-5.10.3
 -> etc
 -> riak.conf
 -> advanced.config
 -> solr-log4j.properties
 -> lib 
 -> log
 -> releases
 -> tmp
 -> beams
 ->validate\_demo.beam
 

validate\_demo.erl
Description: Binary data


riak.conf
Description: Binary data


advanced.config
Description: Binary data
Title: 500 Internal Server Error
Internal Server ErrorThe server encountered an error while processing this request:{error,
 {error,badarg,
 [{erlang,iolist\_to\_binary,
 [{hook\_crashed,{validate\_demo,validate,error,undef}}],
 []},
 {wrq,append\_to\_response\_body,2,[{file,"src/wrq.erl"},{line,215}]},
 {riak\_kv\_wm\_object,handle\_common\_error,3,
 [{file,"src/riak\_kv\_wm\_object.erl"},{line,1144}]},
 {webmachine\_resource,resource\_call,3,
 [{file,"src/webmachine\_resource.erl"},{line,186}]},
 {webmachine\_resource,do,3,
 [{file,"src/webmachine\_resource.erl"},{line,142}]},
 {webmachine\_decision\_core,resource\_call,1,
 [{file,"src/webmachine\_decision\_core.erl"},{line,48}]},
 {webmachine\_decision\_core,accept\_helper,1,
 [{file,"src/webmachine\_decision\_core.erl"},{line,612}]},
 {webmachine\_decision\_core,decision,1,
 [{file,"src/webmachine\_decision\_core.erl"},{line,580}]}]}}mochiweb+webmachine web server
 riak.config Raw
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

