---
title: "Re: LevelDB Question"
description: ""
project: community
lastmod: 2015-08-05T07:11:03-0700
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16360"
mailinglist_parent_id: "msg16359"
author_name: "Matthew Von-Maszewski"
project_section: "mailinglistitem"
sent_date: 2015-08-05T07:11:03-0700
---


All,

The “Implementation Details” section of the referenced webpage is about 2 years 
behind Basho’s changes to leveldb. I already have the action item to rewrite 
it. Apologies for any confusion. The tiered storage section has an accurate, 
cumulative table.

Matthew


> On Aug 5, 2015, at 10:04 AM, xia...@xiaclo.net wrote:
> 
> From the Riak docs 
> (http://docs.basho.com/riak/latest/ops/advanced/backends/leveldb/#Tiered-Storage),
> under "selecting a level", it appears ‎the 10x rule doesn't apply to the 
> lower levels, and oddly looks more like 20x for the higher ones. Keep in 
> mind that data can exist in multiple levels at the same time and there is 
> overhead for metadata and headers. Also, having AAE enabled greatly 
> increases those storage sizes.
> 
> I would judge the ideal level based on that table, as well as the maximum 
> number of vnodes you will have on a single node since those numbers are for a 
> single vnode.
> 
> I hope this helps.
> 
> PS. level 6 is unlimited, and only bound by the amount of data you store in 
> Riak.
> 
> From: Joe Olson
> Sent: Wednesday, 5 August 2015 23:33
> To: riak-users@lists.basho.com
> Subject: LevelDB Question
> 
> 
> Suppose I have come to the conclusion each of my LevelDB backed Riak nodes 
> needs to hold 2TB of data.
> 
> Also suppose I have the ability to store data on more expensive SSD drives, 
> and less expensive magnetic drives.
> 
> My question: What should leveldb.tiered be set to in /etc/riak/riak.conf?
> 
> I know from the LevelDB docs on the Basho Riak site 
> (http://docs.basho.com/riak/latest/ops/advanced/backends/leveldb/), each 
> level holds 10x the data the level above it holds, starting at level 1 with 
> 10MB.
> 
> If this is correct, the data capacities of each level should be:
> 
> Level 1: 10MB
> Level 2: 100 MB
> Level 3: 1 GB
> Level 4: 10 GB
> Level 5: 100 GB
> Level 6: 1 TB
> 
> If this is this case, I would assume using leveldb.tiered = 5 (100GB) or 
> leveldb.tiered = 6 (1 TB) of SSD capacity needed. The remainder (either 1.9 
> TB or 1 TB) will be stored on the magnetic drives on a different mount point.
> 
> Am I reasoning this out correctly?
> 
> If so, will my SSD drives ever \*exceed\* 100GB or 1TB of data? Not that I'd 
> just it that close, anyway....
> 
> 
> 
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

