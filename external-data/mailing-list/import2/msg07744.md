---
title: "Riak ruby client runtime error"
description: ""
project: community
lastmod: 2012-06-22T06:49:11-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07744"
author_name: "Anand Hegde"
project_section: "mailinglistitem"
sent_date: 2012-06-22T06:49:11-07:00
---


Hello , I just installed riak on my OS X machine and got the 4 node cluster
working.

Here is my output for the command

$ ps aux | grep beam

anandhegde 1075 0.1 0.9 2519676 37548 s002 Ss+ 10:49AM
1:34.84 /Users/anandhegde/dev/dev2/libexec/erts-5.8.5/bin/beam.smp -K true
-A 64 -W w -- -root /Users/anandhegde/dev/dev2/libexec -progname riak --
-home /Users/anandhegde -- -boot
/Users/anandhegde/dev/dev2/libexec/releases/1.1.2/riak -embedded -config
/Users/anandhegde/dev/dev2/libexec/etc/app.config -pa ./lib/basho-patches
-name dev2@127.0.0.1 -setcookie riak -- console
anandhegde 938 0.1 0.9 2519524 38152 s001 Ss+ 10:49AM
1:36.31 /Users/anandhegde/dev/dev1/libexec/erts-5.8.5/bin/beam.smp -K true
-A 64 -W w -- -root /Users/anandhegde/dev/dev1/libexec -progname riak --
-home /Users/anandhegde -- -boot
/Users/anandhegde/dev/dev1/libexec/releases/1.1.2/riak -embedded -config
/Users/anandhegde/dev/dev1/libexec/etc/app.config -pa ./lib/basho-patches
-name dev1@127.0.0.1 -setcookie riak -- console
anandhegde 1295 0.0 0.9 2519188 37416 s004 Ss+ 10:49AM
1:40.47 /Users/anandhegde/dev/dev4/libexec/erts-5.8.5/bin/beam.smp -K true
-A 64 -W w -- -root /Users/anandhegde/dev/dev4/libexec -progname riak --
-home /Users/anandhegde -- -boot
/Users/anandhegde/dev/dev4/libexec/releases/1.1.2/riak -embedded -config
/Users/anandhegde/dev/dev4/libexec/etc/app.config -pa ./lib/basho-patches
-name dev4@127.0.0.1 -setcookie riak -- console
anandhegde 1185 0.0 0.9 2519576 36764 s003 Ss+ 10:49AM
1:39.91 /Users/anandhegde/dev/dev3/libexec/erts-5.8.5/bin/beam.smp -K true
-A 64 -W w -- -root /Users/anandhegde/dev/dev3/libexec -progname riak --
-home /Users/anandhegde -- -boot
/Users/anandhegde/dev/dev3/libexec/releases/1.1.2/riak -embedded -config
/Users/anandhegde/dev/dev3/libexec/etc/app.config -pa ./lib/basho-patches
-name dev3@127.0.0.1 -setcookie riak -- console
anandhegde 7115 0.0 0.0 2434892 540 s000 R+ 7:13PM
0:00.00 grep beam


After this I installed the riak-ruby-client gem as given here -
https://github.com/basho/riak-ruby-client/

I am trying to run a simple script based on the documentation provided at
the github page. This is my script -

require 'riak'

client = Riak::Client.new

bucket=client.bucket("doc")
object = bucket.get\_or\_new("index.html")
object.data="some body content here"
object.content\_type="text/html"
object.store

puts client['doc']['index.html']


and when I run this using $ ruby script.rb

I get the following error -

/Users/anandhegde/.rvm/gems/ruby-1.9.3-p0/gems/riak-client-1.0.3/lib/riak/client.rb:450:in
`rescue in recover\_from': Connection refused - connect(2) (RuntimeError)
from
/Users/anandhegde/.rvm/gems/ruby-1.9.3-p0/gems/riak-client-1.0.3/lib/riak/client.rb:422:in
`recover\_from'
from
/Users/anandhegde/.rvm/gems/ruby-1.9.3-p0/gems/riak-client-1.0.3/lib/riak/client.rb:284:in
`http'
from
/Users/anandhegde/.rvm/gems/ruby-1.9.3-p0/gems/riak-client-1.0.3/lib/riak/client.rb:129:in
`backend'
from
/Users/anandhegde/.rvm/gems/ruby-1.9.3-p0/gems/riak-client-1.0.3/lib/riak/client.rb:277:in
`get\_object'
from
/Users/anandhegde/.rvm/gems/ruby-1.9.3-p0/gems/riak-client-1.0.3/lib/riak/bucket.rb:88:in
`get'
from
/Users/anandhegde/.rvm/gems/ruby-1.9.3-p0/gems/riak-client-1.0.3/lib/riak/bucket.rb:106:in
`get\_or\_new'
from riak\_client.rb:6:in `'
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

