---
title: "Pending handoff when node offline"
description: ""
project: community
lastmod: 2016-01-05T02:09:08-0800
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16917"
author_name: "Daniel Iwan"
project_section: "mailinglistitem"
sent_date: 2016-01-05T02:09:08-0800
---


Hi all

Am I right thinking that when node goes offline \*riak-admin transfers\* will
always show transfers to be done? E.g.

riak-admin transfers
Attempting to restart script through sudo -H -u riak
[sudo] password for myuser: 
Nodes ['riak@10.173.240.12'] are currently down.
'riak@10.173.240.9' waiting to handoff 18 partitions
'riak@10.173.240.11' waiting to handoff 13 partitions
'riak@10.173.240.10' waiting to handoff 13 partitions

Active Transfers:


Node 'riak@10.173.240.12' could not be contacted


Even when I mark node as down with \*riak-admin down\* transfers are still
waiting.
Is that normal?

The reason I ask is because our services before they start are checking if
all transfers are complete (normal process during riak startup). This is
because in the past we've had issues with using 2i queries when Riak.

Unfortunately this means that after e.g. reboot our services won't start
until timeout expires or missing node comes back and handoff finishes.

Maybe there is a better way to check if Riak cluster is ready for 2i
queries?
We are still on Riak 1.3.1

Regards
Daniel




--
View this message in context: 
http://riak-users.197444.n3.nabble.com/Pending-handoff-when-node-offline-tp4033844.html
Sent from the Riak Users mailing list archive at Nabble.com.

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

