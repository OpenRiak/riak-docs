---
title: "Re: riak_kv_memory_backend in production"
description: ""
project: community
lastmod: 2013-07-18T10:52:22-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11602"
mailinglist_parent_id: "msg11600"
author_name: "Jared Morrow"
project_section: "mailinglistitem"
sent_date: 2013-07-18T10:52:22-07:00
---


Dave,

Since Redis was designed with that use more in mind, I would guess a single
node of Redis would be faster than a single node of RIak with N=1. If you
still want to run Riak, you'd want to lower the ring size to maybe 8 so you
weren't running 64 vnodes on a single node. This would obviously make it
more difficult down the road to add nodes, but not impossible.

The only downside I can think of is what you already mentioned, dataloss
and availability loss if that node goes down.

-Jared




On Thu, Jul 18, 2013 at 11:32 AM, Dave Martorana  wrote:

> In using riak\_kv\_memory\_backend as a replacement of sorts for Redis or
> memcached, is there any serious problem with using a single node and an
> n\_val of 1? I can’t (yet) afford 5 high-RAM servers for a caching layer,
> and was looking to replace our memcached box with a Redis one. In the
> interest of reducing disparate-technology reliance, running a single-node
> riak\_kv\_memory\_backend instance would be preferable, unless there are
> serious concerns \*aside\* from data loss.
>
> For us, it’s it’s still a LRU-destroy-model cache, and losing it to
> machine failure is only a minor, temporary impediment. Any reason not to
> run a single-node memory-only “cluster” as a replacement for a
> single-machine memcached or Redis instance?
>
>
> On Thu, Jul 18, 2013 at 11:23 AM, Guido Medina 
> wrote:
>
>> Forgot to mention, with N=2 should he be able to have only 4 nodes and
>> focus on RAM per node rather than 5?
>>
>> I know is not recommended but shouldn't N=2 reduce the minimum
>> recommended nodes to 4?
>>
>> Guido.
>>
>>
>> On 18/07/13 16:21, Guido Medina wrote:
>>
>> Since the data he is requiring to store is only "transient", would it
>> make sense to set N=2 for performance? Or will N=2 have the opposite effect
>> due to amount of nodes having such replica?
>>
>> Guido.
>>
>> On 18/07/13 16:15, Jared Morrow wrote:
>>
>> Kumar,
>>
>> We have a few customers who use the memory backend. The first example
>> I could find (with the help of our CSE team) uses the memory backend on 8
>> machines with 12gb of ram each.
>>
>> I know you are just testing right now, but we'd suggest using 5 node
>> minimum. With N=3 on a 3-node cluster you could be writing multiple
>> replicas to the same machine.
>>
>> Good luck in your testing,
>> -Jared
>>
>>
>>
>>
>> On Thu, Jul 18, 2013 at 8:38 AM, kpandey  wrote:
>>
>>> Are there known production installation of riak that uses
>>> riak\_kv\_memory\_backend. We have a need to store transient data just in
>>> memory ( never hitting persistent store). I'm testing riak on aws with 3
>>> node cluster and looks good so far. Just wanted to find out what kind
>>> of
>>> setup people are using in production.
>>>
>>> Thanks
>>> Kumar
>>>
>>>
>>>
>>> --
>>> View this message in context:
>>> http://riak-users.197444.n3.nabble.com/riak-kv-memory-backend-in-production-tp4028393.html
>>> Sent from the Riak Users mailing list archive at Nabble.com.
>>>
>>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>>> riak-users mailing list
>>> riak-users@lists.basho.com
>>> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>>>
>>
>>
>>
>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>> riak-users mailing 
>> listriak-users@lists.basho.comhttp://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>>
>>
>>
>>
>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>> riak-users mailing list
>> riak-users@lists.basho.com
>> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>>
>>
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

