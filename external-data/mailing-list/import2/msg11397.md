---
title: "Re: http access to Riak objects"
description: ""
project: community
lastmod: 2013-07-03T10:01:28-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11397"
mailinglist_parent_id: "msg11395"
author_name: "Hector Castro"
project_section: "mailinglistitem"
sent_date: 2013-07-03T10:01:28-07:00
---


Sanjeev,

Is your goal to have the resource be accessible via query string
authentication, or just publicly accessible? Asking because your
example URL contains the query string authentication parameters.

http://docs.basho.com/riakcs/latest/cookbooks/Authentication/#Query-String-Authentication

Either way, I attempted to reproduce your steps locally and could
download the file from CS via curl. Can you take a look and see if I
did anything differently?

https://gist.github.com/hectcastro/5920366

--
Hector


On Wed, Jul 3, 2013 at 2:41 AM, Sanjeev Neelarapu
 wrote:
> Thanks Alex for your quick response.
>
> I have made the object as public as per your instructions:
>
> [root@Rhel63-Sanjeev ~]# s3cmd setacl -P
> s3://imagestore/template/tmpl/1/5/centos56-x86\_64-xen/centos56-x86\_64.vhd.bz2
>
> s3://imagestore/template/tmpl/1/5/centos56-x86\_64-xen/centos56-x86\_64.vhd.bz2:
> ACL set to Public [1 of 1]
>
>
>
> However downloading this object still says “Access Denied”. URL being fired
> is:
>
> http://10.147.29.57:8080/imagestore/template/tmpl/1/5/centos56-x86\_64-xen/centos56-x86\_64.vhd.bz2?Expires=1372856948&AWSAccessKeyId=9M7I6JPYZHDNLG43TWCD&Signature=fQNuyFYMnNdLwv64XTj+WsC2U7s=
>
>
>
> Thanks,
>
> Sanjeev
>
>
>
> From: Alexander Moore [mailto:moore.a...@gmail.com]
> Sent: Tuesday, July 02, 2013 7:20 PM
> To: Sanjeev Neelarapu
> Cc: riak-users@lists.basho.com
> Subject: Re: http access to Riak objects
>
>
>
> Hi Sanjeev,
>
>
>
> By default, uploaded objects will not be publicly available. To make them
> available you have to set the Access Control List to allow public reads for
> all users.
>
> If you are using s3cmd you can do this with: s3cmd -c .s3cfgfile setacl
> --acl-public s3://BUCKET/OBJECT
>
>
>
> If you need to do this for everything in a bucket, you should then look into
> using "Bucket Policies" to automatically set public access.
>
> Your bucket policy would look something like
> https://gist.github.com/alexmoore/5909408, and then you could apply the
> policy using s3cmd: s3cmd -c .s3cfg setpolicy
> public-access-bucket-policy.json s3://BUCKET
>
>
>
> Thanks,
>
> Alex
>
>
>
>
>
> On Tue, Jul 2, 2013 at 8:32 AM, Sanjeev Neelarapu
>  wrote:
>
> Hi,
>
>
>
> Could someone help me in providing http access to objects stored in the
> bucket?
>
>
>
> I have Riak and Riak-CS installed on a linux machine. Created bucket and
> pushed some files to the bucket using s3cmd. However downloading the objects
> using http URL is failing.
>
>
>
> Following is the object path stored in the bucket “imagestore”:
>
> s3://imagestore/template/tmpl/1/5/centos56-x86\_64-xen/centos56-x86\_64.vhd.bz2
>
>
>
> Could anyone specify the way to download it using http access?
>
>
>
> ACL on the bucket:
>
>
>
> [root@Rhel63-Sanjeev ~]# s3cmd info s3://imagestore
>
> s3://imagestore/ (bucket):
>
> Location: us-east-1
>
> ACL: admin: FULL\_CONTROL
>
>
>
>
>
> Thanks,
>
> Sanjeev
>
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>
>
>
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

