---
title: "Re: large ring_creation_size"
description: ""
project: community
lastmod: 2012-05-16T18:07:22-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07470"
mailinglist_parent_id: "msg07469"
author_name: "Alexander Sicular"
project_section: "mailinglistitem"
sent_date: 2012-05-16T18:07:22-07:00
---


There are reasonable limits. And also for architecture. If I understand you 
correctly, yours is not reasonable. Although you have jbod's on each physical 
server does not mean you should run "12 riak nodes on a given physical node." 
there are other resource limits than just disk io. In this instance you are 
running into an os limitation in the number of file descriptors, aka max open 
files including sockets.

If you absolutely want to do it your way, which I absolutely do not recommend, 
I would run many virtual machines on top of each physical device from its own 
disk. But like I said, even then I wouldn't. 

Constructively, I think the largest recommended ring size is 1024 in practice. 

-Alexander 

@siculars on twitter
http://siculars.posterous.com

Sent from my iRotaryPhone

On May 16, 2012, at 20:47, Sam Lang  wrote:

> 
> Hello,
> 
> I have a 10 node cluster with 12 disks/devices per node. I have setup riak 
> in a jbod environment with separate riak nodes per device, resulting in 120 
> riak nodes total. Based on the documentation, I set the ring\_creation\_size 
> to 4096, which gives me ~34 partitions/node and allows me to expand the 
> cluster in the future. With this value, soon after starting the 12 riak 
> nodes on a given physical node, I get "Too many processes" errors and the 
> riak nodes fail. Decreasing the value of ring\_creation\_size to 1024 (giving 
> me ~8 partitions per riak node) prevents the riak nodes from failing, but 
> then expanding the cluster becomes a problem (30 physical nodes would result 
> in only ~3 partitions per node).
> 
> Is there a reasonable limit on the value of ring\_creation\_size? 
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

