---
title: "Re: slow mapred_search key lookups for single terms"
description: ""
project: community
lastmod: 2012-04-06T05:56:38-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07158"
mailinglist_parent_id: "msg07153"
author_name: "Bryan Fink"
project_section: "mailinglistitem"
sent_date: 2012-04-06T05:56:38-07:00
---


On Thu, Apr 5, 2012 at 3:51 PM, Bryan Fink  wrote:
> This \*might\* be the wrong intuition for Search, since there is
> funneling happening to process the query anyway, but it's likely a
> good place to start.

Whoops. I \*really\* should have included a suggestion for how to
figure out whether this is the case, or if it is PB related. The most
straightforward test will be to run the same query one more time, but
this time use the `riak\_kv\_mrc\_pipe` module. Attach to the Riak
console, just as you did for the internal-cluster client test, but
instead of

 {ok, Client} = riak:local\_client(),
 Client:mapred(Inputs, Phases).

use instead

 riak\_kv\_mrc\_pipe:mapred(Inputs, Phases).

If that is also much slower than the native client, then the problem
is not with the PB interface. If it's nearly on-par, then the PB
interface needs inspection.

-Bryan

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

