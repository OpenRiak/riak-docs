---
title: "Re: Optimistic Locking with Riak Search / is _version_ required in	schema.xml?"
description: ""
project: community
lastmod: 2014-08-08T13:02:11-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14627"
mailinglist_parent_id: "msg14622"
author_name: "David James"
project_section: "mailinglistitem"
sent_date: 2014-08-08T13:02:11-07:00
---


Thanks for the detailed answers!


On Thu, Aug 7, 2014 at 5:57 PM, Ryan Zezeski  wrote:

>
> On Aug 7, 2014, at 5:46 PM, David James  wrote:
>
>
> - Is \_version\_ required?
>
>
> It should not be required as the documentation says it is only needed for
> real-time GET which Riak Search (Yokozuna) disables since Riak KV provides
> the get/put implementation.
>
>
> - I see SolrCloud mentioned in some documentation (see below)? Does
> Riak Search use it?
>
>
> RS does not make use of SolrCloud at all. It uses Solr’s Distributed
> Search but that is something that existed well before SolrCloud. All
> routing and replica administration is handled by Riak. Each Solr instance
> (one per node) has no awareness of the other nodes except for the explicit
> distributed queries sent by Riak.
>
>
> - How does Riak Search handle optimistic locking?
>
>
> It doesn’t use Solr’s optimistic locking at all. All key-value semantics
> come from Riak itself. RS simply indexes an object’s values.
>
>
>
> See this comment on the default\_schema.xml on Github:
>
> 
> 
>
>
> https://raw.githubusercontent.com/basho/yokozuna/develop/priv/default\_schema.xml
>
>
> Yes, I wrote that TODO. It is one of many that founds its way into 2.0.0
> :). You should run fine without this field if you create a custom schema.
>
>
>
> P.S. Per https://wiki.apache.org/solr/SchemaXml
>
> - \_version\_ [image: ] Solr4.0  -
> This field is used for optimistic locking in SolrCloud
>  and it enables Real Time Get
> . If you remove it you must
> also remove the transaction logging from solrconfig.xml, see Real Time
> Get .
>
>
> Just to reiterate what I said above, RS disables the transaction logging
> and thus there is no real time get. There is no reason for it since that
> is what Riak itself provides.
>
> -Z
>
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

