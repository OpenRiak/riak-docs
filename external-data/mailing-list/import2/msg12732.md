---
title: "Re: Updating Counters on Riak 2.0 pre whatever"
description: ""
project: community
lastmod: 2013-10-22T12:27:17-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12732"
mailinglist_parent_id: "msg12730"
author_name: "Jeremiah Peschka"
project_section: "mailinglistitem"
sent_date: 2013-10-22T12:27:17-07:00
---


Hah! No worries at all. Thanks for the clarification. I'll rebuild.

I wasn't sure if I needed to try to figure out (from a client perspective)
if I needed to use the CRDT syntax for 2.0 and newer and
RpbCounterUpdateReq for 1.4.x and earlier. Good to know that I can blindly
proceed.

---
Jeremiah Peschka - Founder, Brent Ozar Unlimited
MCITP: SQL Server 2008, MVP
Cloudera Certified Developer for Apache Hadoop


On Tue, Oct 22, 2013 at 2:07 PM, Russell Brown wrote:

> Yes! Sorry!
>
> We broke backwards compatibility during development. We merged the patch
> today[1]. The develop branch works right now. It will get into the next pre
> (or whatever the next tag is called.)
>
> Apologies again, it was easier for me to do the new work without thinking
> about backwards compatibility, then re-add old counters when the 2.0 stuff
> was done.
>
> Let me know if you have any more issues going forward, please.
>
> Cheers
>
> Russell
>
> [1] https://github.com/basho/riak\_kv/pull/697
> On 22 Oct 2013, at 19:56, Jeremiah Peschka 
> wrote:
>
> > I'm attempting to create a counter on Riak 2.0 built from the develop on
> Sunday. When I send a counter increment message using RpbCounterUpdateReq,
> I get the following back from Riak:
> >
> > Riak returned an error. Code '0'. Message: Error processing incoming
> message: error:undef:[{riak\_kv\_counter,supported,
> > [],[]},
> >
> {riak\_kv\_pb\_counter,process,
> > 2,
> > [{file,
> >
> "src/riak\_kv\_pb\_counter.erl"},
> > {line,114}]},
> > {riak\_api\_pb\_server,
> > process\_message,4,
> > [{file,
> >
> "src/riak\_api\_pb\_server.erl"},
> > {line,386}]},
> > {riak\_api\_pb\_server,
> > connected,2,
> > [{file,
> >
> "src/riak\_api\_pb\_server.erl"},
> > {line,228}]},
> > {riak\_api\_pb\_server,
> > decode\_buffer,2,
> > [{file,
> >
> "src/riak\_api\_pb\_server.erl"},
> > {line,362}]},
> > {gen\_fsm,handle\_msg,7,
> > [{file,"gen\_fsm.erl"},
> > {line,505}]},
> >
> {proc\_lib,init\_p\_do\_apply,3,
> > [{file,"proc\_lib.erl"},
> > {line,239}]}]
> > ---
> > Jeremiah Peschka - Founder, Brent Ozar Unlimited
> > MCITP: SQL Server 2008, MVP
> > Cloudera Certified Developer for Apache Hadoop
> > \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> > riak-users mailing list
> > riak-users@lists.basho.com
> > http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

