---
title: "Re: riakc doesn't save metadata properly?"
description: ""
project: community
lastmod: 2012-10-22T14:28:41-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg09008"
mailinglist_parent_id: "msg09007"
author_name: "Metin Akat"
project_section: "mailinglistitem"
sent_date: 2012-10-22T14:28:41-07:00
---


Haha, well, the bold part was a bit of a joke, but any docs will be
perfect. Thanks :)

On Tue, Oct 23, 2012 at 12:25 AM, David Parfitt  wrote:

> Hello Metin -
>
> I'm trying to get that into the docs right now. Will italics do? :-)
> https://github.com/basho/riak-erlang-client/pull/74
>
> Cheers -
> Dave
>
> On Mon, Oct 22, 2012 at 5:22 PM, Metin Akat  wrote:
> > Oh, I see, thanks for this clarification, much appreciated.
> > I think this should be written somewhere in bold, as 3 days later, I
> still
> > wasn't able to find anything on google.
> >
> >
> > On Tue, Oct 23, 2012 at 12:08 AM, David Parfitt 
> wrote:
> >>
> >> Hello Metin -
> >>
> >> Sorry for the delay. At the moment, all metadata needs to be stored
> >> under the <<"X-Riak-Meta">> dict key. The following example
> >> illustrates how this works:
> >>
> >> %% To store metadata:
> >> Object = riakc\_obj:new(<<"groceries">>, <<"mine">>, <<"eggs & bacon">>).
> >> MetaData = dict:from\_list([{<<"X-Riak-Meta">>, [{"Foo", "Bar"}]}]),
> >> Object2 = riakc\_obj:update\_metadata(Object, MetaData).
> >> riakc\_pb\_socket:put(Pid, Object2).
> >>
> >> %% To retrieve metadata:
> >> {ok, O} = riakc\_pb\_socket:get(Pid, <<"groceries">>, <<"mine">>).
> >> {ok, MD} = dict:find(<<"X-Riak-Meta">>, riakc\_obj:get\_metadata(O)).
> >>
> >> We're kicking around ways to improve this in the future.
> >>
> >> Cheers -
> >> Dave
> >>
> >> On Fri, Oct 19, 2012 at 8:31 AM, Metin Akat 
> wrote:
> >> > I am trying to do something like:
> >> >
> >> > Meta1 = dict:store(<<"ver">>, Ver, Meta0),
> >> > Obj1 = riakc\_obj:update\_metadata(Obj, Meta1),
> >> >
> >> > and then save the object. But on a subsequent read, the metadata k/v
> >> > pair is
> >> > not there.
> >> >
> >> > Is there anything special that needs to be done for this to work, or
> is
> >> > this
> >> > illegal way to use Riak?
> >> >
> >> > \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> >> > riak-users mailing list
> >> > riak-users@lists.basho.com
> >> > http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
> >> >
> >
> >
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

