---
title: "Re: Riak 1.3.1 high swap usage"
description: ""
project: community
lastmod: 2015-02-19T09:40:47-0800
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15752"
mailinglist_parent_id: "msg15751"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2015-02-19T09:40:47-0800
---


Daniel,

Our tuning guides specifically recommend disabling swap. If your machine is
so memory-starved that it needs to use swap during normal Riak operation,
having it on is only going to make things worse.

http://docs.basho.com/riak/latest/ops/tuning/linux/#Storage-and-File-System-Tuning

On Thu, Feb 19, 2015 at 11:29 AM, Daniel Iwan  wrote:

> We are using levelDB as backend without any tuning.
> Also we are aware that performance may suffer due to potentially storing
> some of the copies (n=3) twice on the server. We are not so much concerned
> about latencies caused by that.
> What is worrying though is almost unbounded growth of swap used, which
> essentially filled up our system disk.
> Probably our Riak instances require some tuning but I would like to know
> first why we need to tune it e.g. AAE consumes large swap.
>
> Regarding failure scenarios. We've seen OS' oom-killer nuking beam.smp and
> also our process due to the failure of memory allocation. So far we haven't
> experienced situation where killing one node would cause cascading failures
> of the nodes.
>
> We were slightly reluctant to upgrade to 1.4 due to some AAE issues
> reported
> on the mailing list.
> I was under impression 1.4 may consume even more memory with AAE but I may
> be totally wrong here.
>
> Daniel
>
>
>
>
>
>
>
> --
> View this message in context:
> http://riak-users.197444.n3.nabble.com/Riak-1-3-1-high-swap-usage-tp4032649p4032662.html
> Sent from the Riak Users mailing list archive at Nabble.com.
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>



-- 
Sean Cribbs 
Sr. Software Engineer
Basho Technologies, Inc.
http://basho.com/
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

