---
title: "Re: slow 2 node cluster"
description: ""
project: community
lastmod: 2011-11-20T05:19:53-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05688"
mailinglist_parent_id: "msg05687"
author_name: "Catalin Constantin"
project_section: "mailinglistitem"
sent_date: 2011-11-20T05:19:53-08:00
---


The connection between servers is 10MBytes / sec not 10Mbit / sec.
One row of data looks like this:
3098191 78 daz...@gmail.com 55942 dzt 1 home 2011-05-31 16:22:10 2011-09-07
17:03:48 127.0.0.1 1 1

I use Protobuf transport.
If dw = 0 and w = 0 there is no wait for other replica nodes, right ?

This should improve the write speed, correct ?

On Sun, Nov 20, 2011 at 2:21 PM, Erik Søe Sørensen  wrote:

> This depends quite a bit on the sizes of your objects.
> Supposing an average size of 2KB, and n=3: on each write, on average 1.5
> of the replicas would be on the other node, implying inter-node network
> traffic of 1.5\*2KB=3KB (and this is just in one direction).
> If your inter-node network connection is indeed 10Mbit ~ 1MB/s, then 300
> writes/s \* 3KB = 0.9MB/s would just about saturate the connection.
>
> You may want to check the network utilization.
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> From: riak-users-boun...@lists.basho.com [
> riak-users-boun...@lists.basho.com] On Behalf Of Catalin Constantin [
> daz...@gmail.com]
> Sent: 20 November 2011 11:10
> To: riak-users@lists.basho.com
> Subject: slow 2 node cluster
>
> Hello,
>
> I am trying to evaluate / run some tests on a 4 mil dataset.
> I have 2 nodes setup (different machines - 8GB ram each, I7 cpus).
> 10 MB connection between them.
>
> I am trying to insert data into riak using w=1 and dw=1 (also tried with
> dw = 0, w = 0).
> For each risk object i have 4 indexes (2 binary 2 int).
> Riak backend is leveldb.
>
> I can't get more than 300 inserts per second.
> I have also tried running 2 threads each hitting the different node.
> Nothing changed too much.
>
> Is this normal behavior ?
>
> --
> Catalin Constantin
>
>


-- 
Catalin Constantin
Dazoot Software
http://www.dazoot.eu/
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

