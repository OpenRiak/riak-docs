---
title: "Dropping a search index"
description: ""
project: community
lastmod: 2011-09-14T22:32:12-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg04728"
author_name: "Elias Levy"
project_section: "mailinglistitem"
sent_date: 2011-09-14T22:32:12-07:00
---


Is there some way to drop a search index, other that forcibly removing the
merge\_index data directory on each node?

Change a bucket's search property to false or executing search-cmd uninstall
do not appear to have this effect. I can continue to execute queries
against the index. They appear to merely remove the search pre-commit hook
on the bucket.

After playing around with binary keys and determining that if you use then
you really can't make use of any JavaScript functions, and that they lead to
encoding errors elsewhere, I decided to switch to string keys and switch to
the leveldb backend as its memory requirements have a less pronounced
relationship with the number and size of keys.

Alas, I must have not removed all the data from the bitcask backend before
switching, as after switching I could query the index through the Solr API,
and although it did not return any values, it did say there were matching
rows.

And if I execute a MR job with a JS function I get an encoding error, as the
old binary keys are being retrieved from the index, but they cannot be
passed to the JS function.

So, is there a way to clear such an index?

Elias Levy
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

