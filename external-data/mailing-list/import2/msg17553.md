---
title: "Re: riak bitcask calculation"
description: ""
project: community
lastmod: 2016-07-21T10:56:58-0700
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17553"
mailinglist_parent_id: "msg17549"
author_name: "Luke Bakken"
project_section: "mailinglistitem"
sent_date: 2016-07-21T10:56:58-0700
---


Hi Travis,

The memory used by Riak (beam.smp) is for more than key storage, of course.

You can assume that in your case RES will get to about the same amount
after a reboot, given a similar workload in Riak.

--
Luke Bakken
Engineer
lbak...@basho.com

On Mon, Jul 18, 2016 at 8:54 AM, Travis Kirstine
 wrote:
> Yes, the reason I'm concerned is that we projected much lower memory usage 
> based on the calculations. We originally provisioned 2x the required memory 
> and it appears that this will not be enough.
>
> Am I correct in that the top cmd's RES memory for the beam.smp command is the 
> memory being used by riak for "key storage", if the server was to be rebooted 
> the memory would eventually climb back to this level?
>
> Thanks for your help
>
> -----Original Message-----
> From: Luke Bakken [mailto:lbak...@basho.com]
> Sent: July-18-16 11:35 AM
> To: Travis Kirstine 
> Cc: riak-users@lists.basho.com; ac...@jdbarnes.com
> Subject: Re: riak bitcask calculation
>
> Hi Travis -
>
> The calculation provided for bitcask memory consumption is only a rough 
> guideline. Using more memory than the calculation suggests is normal and 
> expected with Riak. As you increase load on this cluster memory use may go up 
> further as the operating system manges disk operations and buffers.
>
> Is there a reason you're concerned about this usage?
>
> On Mon, Jul 18, 2016 at 8:28 AM, Travis Kirstine 
>  wrote:
>> Yes from the free command
>>
>> [root@riak1 ~]# free -g
>> total used free shared buff/cache 
>> available
>> Mem: 45 9 0 0 36 
>> 35
>> Swap: 23 0 22
>>
>> Or from top
>>
>> PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND
>> 24421 riak 20 0 16.391g 8.492g 41956 S 82.7 18.5 10542:10 beam.smp

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

