---
title: "A first encounter with Riak/Riak-search - not getting it to work."
description: ""
project: community
lastmod: 2010-12-29T07:01:32-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01851"
author_name: "Sven Johansson"
project_section: "mailinglistitem"
sent_date: 2010-12-29T07:01:32-08:00
---


I am putting together an application prototype for a client that needs to
store vast amounts of historical data.
The data is supposed to be delivered to this application as XML, and these
documents needs to be searchable
based on certain field values in these documents.

After reading up on Riak, and riak-search more specifically, I found that it
seemed like a very good match given
that it is supposed to be able to understand and index XML documents out of
the box.
(In the end, I'm expecting to find that it's a more efficient solution to
using a custom index & analyzer factory, but
from what I can make of the docs in the Basho wiki the out of the
box-behaviour should suffice for the prototype).

However, things are not going as smooth as one would expect.
As soon as I enable an index through the precommit-hook on a bucket, I am
getting a 403 response back
for any PUT or POST operation that does not use the content type
"text/plain".
This seems a bit off to me that riak-search is able to introspect both
application/xml and application/json, but
will not accept content declared to be of these MIME types.
I am getting errors

Having accepted this for the time being, I have gone ahead to import some
test documents into riak-search and
attempt to query the index.

This is the format of my test documents:

xml version="1.0"?

NUR-X5-199-456

NN-CUST-7278
NN-CUST-9619
NN-CUST-699
NN-CUST-8184
NN-SYS-2383



Querying the index with q=EntityRef will give me all of the results back, as
expected.
However, attempting to use actual values to search, like so:
q=EntityRef:NUR-X5-199-456
gives me nothing.

I have also stored the sample XML from the wiki in the same bucket, and yes
- a query for
q=name:Alyssa%20P.%20Hacker does indeed return \_that\_ document.

I am completely new to Riak, so what I know I've learned through this
experiment and reading up
on the wiki (which, alas, does not indulge in detail), which has left me
with having to do some
guesswork to get me this far.

Any feedback & help on what I might be doing wrong, would be greatly
appreciated.

Thanks / Sven

-- 
Sven Johansson
Phone: +46704966945
Twitter: @svjson
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

