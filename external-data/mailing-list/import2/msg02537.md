---
title: "Re: too_many_results error"
description: ""
project: community
lastmod: 2011-03-03T03:42:21-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02537"
mailinglist_parent_id: "msg01998"
author_name: "John Axel Eriksson"
project_section: "mailinglistitem"
sent_date: 2011-03-03T03:42:21-08:00
---


Well, I'm in this situation atm. I guess I could go and change the max\_results 
setting but really - this actually
means that I can't search my data and to me, it's more important to be able to 
search than to get an error when
my index has grown too large. I understand that there's nothing for this in the 
solr spec, but getting an error because
I've indexed too much data is kind of unexpected.

I'm not familiar with the internals but I would've expected the rows parameter 
to be applied before the max\_results limit - not
the other way around. I suspect there's a reason for this, but still - my data 
is now in an unsearchable state.

16 jan 2011 kl. 15.06 skrev Rusty Klophaus:

> That's one way of looking at it. The other viewpoint is that given the choice 
> between returning a partial (a.k.a. incorrect) result set vs. failing loudly, 
> the safest option is to fail loudly.
> 
> Ideally there would be a way to return a partial result set with an 
> indication in Solr that the result set is partial, but:
> 
> 1) The Solr spec doesn't indicate a way to include such a message (at least 
> none that I could find)
> 2) This is the first iteration of this feature, so we decided to keep it 
> simple until we have more detailed information on what people need.
> 
> So with that in mind, how would you prefer this be handled? I'm open to 
> rethinking the behavior.
> 
> Best,
> Rusty
> 
> 
> On Sun, Jan 16, 2011 at 8:53 AM, Eric Moritz  wrote:
> That sounds like a bug rather that a feature to me. For instance if I wrote 
> 100,001 blog entries, the search engine breaks hard for a query trying to 
> find my latest tweets.
> 
> Is that what would happen?
> 
> ---------- Forwarded message ----------
> From: "Rusty Klophaus" 
> Date: Jan 16, 2011 8:42 AM
> Subject: Re: Re: too\_many\_results error
> To: "Eric Moritz" 
> Cc: "riak-users@lists.basho.com" 
> 
> Hi Eric,
> 
> This is a failsafe that is applied prior to the 'rows' parameter. 
> 
> It is applied separately to provide a hard system limit, intended to allow 
> the cluster administrator to guard against a malicious user, a client 
> application that accidentally requests too much data, etc.
> 
> Best,
> Rusty
> 
> 
> On Sun, Jan 16, 2011 at 8:38 AM, Eric Moritz  wrote:
> Would using the rows URL parameter fix this or is the error occurring prior 
> to the result being limited?
> 
> ---------- Forwarded message ----------
> From: "Rusty Klophaus" 
> Date: Jan 16, 2011 8:34 AM
> Subject: Re: too\_many\_results error
> To: "Malka Feldman" 
> Cc: 
> 
> Hi Malka,
> 
> The error you see is caused by a protective configuration setting that is new 
> in the 0.14 release. By default, the system will stop the query after 100,000 
> results and return an error to the system. It is intended to prevent Riak 
> Search from grabbing all available memory when faced with a large result set. 
> 
> You can override this by setting the 'max\_search\_results' setting in the 
> etc/app.config file. 
> 
> Best,
> Rusty
> 
> On Sun, Jan 16, 2011 at 7:11 AM, Malka Feldman  wrote:
> Hi 
> I try to get results from query through solr , but I get the error of too 
> many results
> the query is : 
> http://79.125.59.136:8098/solr/user\_profile/select?q=country:USA 
> I know I can have hundreds of thousands of answers, can it hold them?
> the error :
> {error,
> {throw,
> {too\_many\_results,
> {scope,#Ref<0.0.78.140604>,"user\_profile","value",
> {scope,#Ref<0.0.78.140603>,undefined,"country",
> {term,#Ref<0.0.78.140609>,<<"USA">>,
> [{'riak@10.230.7.111',28438},
> {'riak@10.230.21.243',28438},
> {'riak@10.230.45.195',28438}],
> 28438.0,1.0,
> #Fun}}}},
> [{riak\_search\_client,'-search/5-fun-0-',4},
> {riak\_search\_client,fold\_results,5},
> {riak\_search\_client,search,6},
> {riak\_search\_client,search\_doc,6},
> {riak\_solr\_searcher\_wm,run\_query,1},
> {riak\_solr\_searcher\_wm,to\_xml,2},
> {webmachine\_resource,resource\_call,3},
> {webmachine\_resource,do,3}]}}
> 
> thanks,
> -- 
> 
> Malka Feldman
> Tribase LTD.
> 41 Shimon Hatzadik St.
> Elad, Israel
> Tel. 074-7122736 Fax. 03-9075211 Cell. 972-54-8370828
> mal...@3basegroup.com
> www.3basegroup.com
> 
> 
> 
> 
> 
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
> 
> 
> 
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
> 
> 
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
> 
> 
> 
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
> 
> 
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

