---
title: "Unexpected stored value for multivalued field in riak search"
description: ""
project: community
lastmod: 2015-07-01T08:49:34-0700
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16268"
author_name: "Wendy Liu"
project_section: "mailinglistitem"
sent_date: 2015-07-01T08:49:34-0700
---


Hi all,

I'm having an issue with stored multiValued fields in Riak search not being
stored the way I would expect.

If I use the default schema, and store the following JSON document (from
the documentation
)

{"people\_ss": ["Ryan", "Eric", "Brett"]}

and then search with the query "people\_ss:Ryan", the document that I get
back contains "people\_ss": ["Ryan", "Eric", "Brett"], as I would expect.

However, if I instead create the document

{"people\_ss": ["Ryan"]}

then searching with the query "people\_ss:Ryan" results in a document with
"people\_ss": "Ryan", where the value associated with "people\_ss" is a
string, not a list of strings as I would expect.

I couldn't find anything about this in any of the Github issue trackers or
the mailing list. Is this a bug, or desired behaviour? Is there a way to
ensure that lists with a single element are stored in Solr as lists,
instead of as strings?

I'm using the official Riak Python client with Riak 2.1.1 and search
enabled.

Thanks in advance!
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

