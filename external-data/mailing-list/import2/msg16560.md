---
title: "admin_key_undefined creating user with riak-cs escript"
description: ""
project: community
lastmod: 2015-09-22T09:08:52-0700
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16560"
author_name: "Gautam Pulla"
project_section: "mailinglistitem"
sent_date: 2015-09-22T09:08:52-0700
---


Hello,

I'd like to create a riak-cs user with a pre-set key/secret and am following 
the workaround from https://github.com/basho/riak\_cs/issues/565. This is works 
when I type it into the interactive riak-cs console, however I want to script 
this in a non-interactive fashion.

I've created a small erlang script and am using riak-cs escript to run it (I 
don't know erlang at all so there are probably basic errors).

This is what I get when I run the script:

# riak-cs escript /tmp/createuser.erl
{error,admin\_key\_undefined}

Here is my script:

# cat /tmp/createuser.erl
#!/usr/bin/env escript
-import(riak\_cs\_user, [create\_user/4]).

main(\_) ->
 R = riak\_cs\_user:create\_user("test", "t...@ttd.com", "blah", "foo"),
 Rs=lists:flatten(io\_lib:format("~p", [R])),
 io:format(Rs),
 io:format("\n").

Any pointers?

Thanks!
Gautam
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

