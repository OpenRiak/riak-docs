---
title: "Re: Non-standard ring size"
description: ""
project: community
lastmod: 2012-01-19T05:43:56-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06319"
mailinglist_parent_id: "msg06317"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2012-01-19T05:43:56-08:00
---


Daniel,

The ring size must be a power of two because it must evenly divide 2^160
(the size of our consistent hashing space), which is not divisible by 3.
Using a non-power-of-two ring size will have unknown or unpredictable
effects.

On Thu, Jan 19, 2012 at 3:51 AM, Daniel Iwan GM wrote:

> Hello riak users
>
> I'm trying to get my head around the partitioning in Riak
> Quite recent thread was very helpful
>
> http://thread.gmane.org/gmane.comp.db.riak.user/6207/focus=6266
>
> Let's say I install Riak on 3 nodes (initially), which will possibly
> grow to 10 or more.
> Default partition size is 64 and I store some data into bucket with n=2.
> Does it mean that both copies of keys that are in 64th partition would
> land on the same physical machine (node 1)?
> From what I understood keys from 64th partition land in 1st partition
> as well, which in that case would be on node1
>
> If the answer is Yes, would it be better if I set the max ring size to
> 72 which divides nicely by 3?
> Basho wiki states that ring size should be power of 2.
> Is there any performance impact of setting it to such a non-standard value?
>
> Or is there any better approach if I know that I will start with 3
> machines?
> Apart from changing n to 3 of course.
>
> Thanks
> D.
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>



-- 
Sean Cribbs 
Software Engineer
Basho Technologies, Inc.
http://basho.com/
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

