---
title: "riak 2.1.1 : Erlang crash dump"
description: ""
project: community
lastmod: 2015-09-30T16:31:08-0700
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16577"
author_name: "Girish Shankarraman"
project_section: "mailinglistitem"
sent_date: 2015-09-30T16:31:08-0700
---


I have 7 node cluster for riak with a ring\_size of 128.

System Details:
Each node is a VM with 16GB of memory.
The backend is using leveldb.
sys\_system\_architecture : <<"x86\_64-unknown-linux-gnu">>
sys\_system\_version : <<"Erlang R16B02\_basho8 (erts-5.10.3) [source] [64-bit] 
[smp:4:4] [async-threads:64] [kernel-poll:true] [frame-pointer]">>
riak\_control\_version : <<"2.1.1-0-g5898c40">>
cluster\_info\_version : <<"2.0.2-0-ge231144">>
yokozuna\_version : <<"2.1.0-0-gcb41c27">>

Scenario:
We have up to 400-1000 json records being written/sec. Each record might be a 
few 100 bytes.
I see the following crash message in the erlang logs after a few hours of 
processing. Any suggestions on what could be going on here ?

===== Tue Sep 29 20:20:56 UTC 2015
[os\_mon] memory supervisor port (memsup): Erlang has closed^M
[os\_mon] cpu supervisor port (cpu\_sup): Erlang has closed^M
^M
Crash dump was written to: /var/log/riak/erl\_crash.dump^M
eheap\_alloc: Cannot allocate 3936326656 bytes of memory (of type "heap").^M

Also tested running this at 50GB per Riak Node(VM) and things work but memory 
keeps growing, so throwing hardware at it doesn't seem very scalable.

Thanks,

- Girish Shankarraman

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

