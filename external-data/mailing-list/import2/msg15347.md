---
title: "Map Reduce with Data Types"
description: ""
project: community
lastmod: 2014-12-10T17:36:34-0800
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15347"
author_name: "Kyle Patterson"
project_section: "mailinglistitem"
sent_date: 2014-12-10T17:36:34-0800
---


I can't get map reduce to work with the new data types.
I have a bucket type as defined below:
riak-admin bucket-type create map '{"props":{"datatype":"map"}}

There seems to be a problem going from the input phase to the map/reduce.
I'm getting notfound errors for objects that exist.

While the normal list of input tuples might look like [{<<"bucket">>,
<<"key">>}],
for data-type lookups I'm guessing (based on the src and how bucket/key
pairs for data types are defined elsewhere) should look like:
[{{<<"type">>, <<"bucket">>}, <<"key">>}]?


mapred(Pid, [{{<<"map">>, <<"articles">>},
<<"7bdbd2da-1463-46f8-b750-6f813700b28b">>}], [{map, {modfun,
'riak\_kv\_mapreduce', 'map\_object\_value'}, none, true}]).

Anyone have any insight or have a working example of mapred with data types?

Thanks!

-- 
Kyle Patterson
Full Stack Maniac
https://sqor.com/users/kisp
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

