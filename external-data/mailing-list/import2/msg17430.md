---
title: "Re: Riak not storing data in a round-robin manner across instances"
description: ""
project: community
lastmod: 2016-05-27T13:57:18-0700
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17430"
mailinglist_parent_id: "msg17429"
author_name: "Vikram Lalit"
project_section: "mailinglistitem"
sent_date: 2016-05-27T13:57:18-0700
---


Thanks Alexander ... makes complete sense...

On Fri, May 27, 2016 at 4:39 PM, Alexander Sicular 
wrote:

> There is a reason Basho's minimum production deployment recommendation is
> 5 machines. It is to ensure that, when operating with default settings,
> each replica of any key is stored on distinct physical nodes. It has to do
> with the allocation of virtual nodes to physical machines and replica sets.
> Replica sets are sets of virtual nodes, not physical nodes.
>
> When using 3 or 4 machines in your cluster reduce your n\_val to 2.
>
> Cheers, Alexander
>
> On Friday, May 27, 2016, DeadZen  wrote:
>
>> np, number of nodes and ring size play a lot into that.
>> as does your r,w settings.
>> might be fun to create a visualization one day ;)
>>
>> On Friday, May 27, 2016, Vikram Lalit  wrote:
>>
>>> Ok got it thanks.
>>> On May 27, 2016 4:02 PM, "DeadZen"  wrote:
>>>
>>>> reiterating my last email
>>>>
>>>> > theres no guarantee vnodes are assigned to unique servers..
>>>>
>>>> referencing the docs
>>>>
>>>> > Nodes \*attempt\* to claim their partitions at intervals around the
>>>> ring such that there is an even distribution amongst the member nodes and
>>>> that no node is responsible for more than one replica of a key.
>>>>
>>>>
>>>>
>>>> On Friday, May 27, 2016, Vikram Lalit  wrote:
>>>>
>>>>> I have a Riak cluster (of 3 nodes, with 64 partitions and n\_val = 3)
>>>>> but I find that for some objects, their hosting partitions / vnodes are 
>>>>> not
>>>>> spread out across the 3 nodes. In some cases, 2 of them are on 1 node and
>>>>> the third is on a second node. That runs contrary to my understanding 
>>>>> (link
>>>>> here: http://docs.basho.com/riak/kv/2.1.4/learn/concepts/clusters/)
>>>>> that the data is spread out across partitions in such a way that the
>>>>> partitions are on different servers. Is there something I'm missing here
>>>>> please in terms of how Riak works? Thanks...
>>>>>
>>>>>
>
> --
>
>
> Alexander Sicular
> Solutions Architect
> Basho Technologies
> 9175130679
> @siculars
>
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

