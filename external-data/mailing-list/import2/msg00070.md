---
title: "Re: initial install - compile error  -  c_src/ebloom	_nifs.cpp:24: error: expected initializer before 	‘*’ token"
description: ""
project: community
lastmod: 2010-04-17T18:03:56-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg00070"
mailinglist_parent_id: "msg00068"
author_name: "Andy Gross"
project_section: "mailinglistitem"
sent_date: 2010-04-17T18:03:56-07:00
---


The tip of the Riak repo requires Erlang R13B04 to compile- it looks 
like you need to upgrade your system Erlang install.


On Apr 17, 2010, at 8:14 PM, ferriswheel  
wrote:



hello,


below is the result i get from

 mkdir getting\_started
 cd getting\_started
 hg clone http://hg.basho.com/riak/
 cd riak
 make

os gentoo linux
erlang version 13.2.3
g++ (Gentoo 4.3.4 p1.0, pie-10.1.5) 4.3.4

all assistance is appreciated.

regards


./rebar get-deps
==> protobuffs (get-deps)
==> luke (get-deps)
==> mochiweb (get-deps)
==> webmachine (get-deps)
==> mochiweb (get-deps)
==> riak\_core (get-deps)
==> riakc (get-deps)
==> ebloom (get-deps)
==> mochiweb (get-deps)
==> webmachine (get-deps)
==> erlang\_js (get-deps)
==> riak\_kv (get-deps)
==> rel (get-deps)
==> riak (get-deps)
./rebar compile
==> protobuffs (compile)
Compiled src/protobuffs.erl
Compiled src/pokemon\_pb.erl
Compiled src/protobuffs\_compile.erl
Compiled src/protobuffs\_parser.erl
==> luke (compile)
Compiled src/luke\_phases.erl
Compiled src/luke\_phase\_sup.erl
Compiled src/luke\_flow\_sup.erl
Compiled src/luke.erl
Compiled src/luke\_sup.erl
Compiled src/luke\_phase.erl
Compiled src/luke\_flow.erl
==> mochiweb (compile)
Compiled src/mochifmt\_std.erl
Compiled src/mochiweb\_headers.erl
Compiled src/mochiweb\_sup.erl
Compiled src/mochiweb\_http.erl
Compiled src/mochiweb\_multipart.erl
Compiled src/reloader.erl
Compiled src/mochiweb\_response.erl
Compiled src/mochiweb\_charref.erl
Compiled src/mochiweb\_cookies.erl
Compiled src/mochiweb\_app.erl
Compiled src/mochifmt\_records.erl
Compiled src/mochiweb\_skel.erl
Compiled src/mochiweb\_socket\_server.erl
Compiled src/mochiweb\_echo.erl
Compiled src/mochiweb\_request.erl
Compiled src/mochihex.erl
Compiled src/mochifmt.erl
Compiled src/mochiweb\_html.erl
Compiled src/mochinum.erl
Compiled src/mochijson.erl
Compiled src/mochiweb.erl
Compiled src/mochiweb\_util.erl
Compiled src/mochijson2.erl
==> webmachine (compile)
Compiled src/webmachine\_resource.erl
Compiled src/wmtrace\_resource.erl
Compiled src/webmachine\_dispatcher.erl
Compiled src/webmachine\_multipart.erl
Compiled src/webmachine\_logger.erl
Compiled src/webmachine\_util.erl
Compiled src/webmachine\_router.erl
Compiled src/webmachine\_error\_handler.erl
Compiled src/webmachine\_sup.erl
Compiled src/webmachine\_app.erl
Compiled src/webmachine.erl
Compiled src/webmachine\_deps.erl
Compiled src/webmachine\_mochiweb.erl
Compiled src/webmachine\_perf\_logger.erl
Compiled src/webmachine\_request.erl
Compiled src/webmachine\_decision\_core.erl
Compiled src/wrq.erl
==> mochiweb (compile)
Compiled src/mochifmt\_std.erl
Compiled src/mochiweb\_headers.erl
Compiled src/mochiweb\_sup.erl
Compiled src/mochiweb\_multipart.erl
Compiled src/mochiweb\_cover.erl
Compiled src/reloader.erl
Compiled src/mochiweb\_charref.erl
Compiled src/mochiweb\_response.erl
Compiled src/mochiweb\_http.erl
Compiled src/mochiweb\_skel.erl
Compiled src/mochiweb\_mime.erl
Compiled src/mochiweb\_app.erl
Compiled src/mochifmt\_records.erl
Compiled src/mochiweb\_socket\_server.erl
Compiled src/mochiweb\_cookies.erl
Compiled src/mochiweb\_html.erl
Compiled src/mochiweb\_echo.erl
Compiled src/mochifmt.erl
Compiled src/mochihex.erl
Compiled src/mochiglobal.erl
Compiled src/mochinum.erl
Compiled src/mochiweb\_request.erl
Compiled src/mochijson.erl
Compiled src/mochijson2.erl
Compiled src/mochiweb\_util.erl
Compiled src/mochiweb.erl
==> riak\_core (compile)
Compiled src/gen\_nb\_server.erl
Compiled src/gen\_server2.erl
Compiled src/spiraltime.erl
Compiled src/riak\_core\_test\_util.erl
Compiled src/bloom.erl
Compiled src/riak\_core\_gossip.erl
Compiled src/app\_helper.erl
Compiled src/riak\_core\_sup.erl
Compiled src/riak\_core\_util.erl
Compiled src/riak\_core\_ring\_manager.erl
Compiled src/vclock.erl
Compiled src/chash.erl
Compiled src/riak\_core\_app.erl
Compiled src/riak\_core\_web.erl
Compiled src/riak\_core\_ring\_events.erl
Compiled src/riak\_core\_bucket.erl
Compiled src/merkerl.erl
Compiled src/riak\_core\_claim.erl
Compiled src/json\_pp.erl
Compiled src/priority\_queue.erl
Compiled src/riak\_core\_ring.erl
Compiled src/slide.erl
==> riakc (compile)
Compiling src/riakclient.proto
Compiled src/riakc\_obj.erl
Compiled src/riakc\_pb.erl
Compiled src/riakc\_pb\_socket.erl
==> ebloom (compile)
Compiled src/ebloom.erl
Compiling c\_src/ebloom\_nifs.cpp
c\_src/ebloom\_nifs.cpp:24: error: expected initializer before ‘\*’ 
token
c\_src/ebloom\_nifs.cpp:63: error: invalid conversion from ‘ERL\_NIF\_TE 
RM

 (\*)(ErlNifEnv\*, int, const ERL\_NIF\_TERM\*)’ to ‘void\*’
 c\_src/ebloom\_nifs.cpp:63: error: invalid conversion from ‘ERL\_NIF\_T 
ERM

 (\*)(ErlNifEnv\*, int, const ERL\_NIF\_TERM\*)’ to ‘void\*’
 c\_src/ebloom\_nifs.cpp:63: error: invalid conversion from ‘ERL\_NIF\_T 
ERM

 (\*)(ErlNifEnv\*, int, const ERL\_NIF\_TERM\*)’ to ‘void\*’
 c\_src/ebloom\_nifs.cpp:63: error: invalid conversion from ‘ERL\_NIF\_T 
ERM

 (\*)(ErlNifEnv\*, int, const ERL\_NIF\_TERM\*)’ to ‘void\*’
 c\_src/ebloom\_nifs.cpp:63: error: invalid conversion from ‘ERL\_NIF\_T 
ERM

 (\*)(ErlNifEnv\*, int, const ERL\_NIF\_TERM\*)’ to ‘void\*’
 c\_src/ebloom\_nifs.cpp:63: error: invalid conversion from ‘ERL\_NIF\_T 
ERM

 (\*)(ErlNifEnv\*, int, const ERL\_NIF\_TERM\*)’ to ‘void\*’
 c\_src/ebloom\_nifs.cpp:63: error: invalid conversion from ‘ERL\_NIF\_T 
ERM

 (\*)(ErlNifEnv\*, int, const ERL\_NIF\_TERM\*)’ to ‘void\*’
 c\_src/ebloom\_nifs.cpp:63: error: invalid conversion from ‘ERL\_NIF\_T 
ERM

 (\*)(ErlNifEnv\*, int, const ERL\_NIF\_TERM\*)’ to ‘void\*’
 c\_src/ebloom\_nifs.cpp:63: error: invalid conversion from ‘ERL\_NIF\_T 
ERM

 (\*)(ErlNifEnv\*, int, const ERL\_NIF\_TERM\*)’ to ‘void\*’
 c\_src/ebloom\_nifs.cpp:63: error: invalid conversion from ‘ERL\_NIF\_T 
ERM

 (\*)(ErlNifEnv\*, int, const ERL\_NIF\_TERM\*)’ to ‘void\*’
 c\_src/ebloom\_nifs.cpp: In function ‘ERL\_NIF\_TERM
 new\_filter(ErlNifEnv\*, int, const ERL\_NIF\_TERM\*)’:
 c\_src/ebloom\_nifs.cpp:74: error: ‘enif\_get\_long’ was not 
declared in
 this scope c\_src/ebloom\_nifs.cpp:75: error: ‘enif\_get\_double’ 
was not

 declared in this scope c\_src/ebloom\_nifs.cpp:78: error:
 ‘BLOOM\_FILTER\_RESOURCE’ was not declared in this scope
 c\_src/ebloom\_nifs.cpp:79: error: ‘enif\_alloc\_resource’ was not
 declared in this scope c\_src/ebloom\_nifs.cpp:83: error:
 ‘enif\_make\_resource’ was not declared in this scope
 c\_src/ebloom\_nifs.cpp:84: error: ‘enif\_release\_resource’ was not
 declared in this scope c\_src/ebloom\_nifs.cpp:85: error:
 ‘enif\_make\_tuple2’ was not declared in this scope
 c\_src/ebloom\_nifs.cpp: In function ‘ERL\_NIF\_TERM insert(ErlNifEnv\*,
 int, const ERL\_NIF\_TERM\*)’: c\_src/ebloom\_nifs.cpp:97: error:
 ‘BLOOM\_FILTER\_RESOURCE’ was not declared in this scope
 c\_src/ebloom\_nifs.cpp:97: error: ‘enif\_get\_resource’ was not 
declared

 in this scope c\_src/ebloom\_nifs.cpp: In function ‘ERL\_NIF\_TERM
 contains(ErlNifEnv\*, int, const ERL\_NIF\_TERM\*)’:
 c\_src/ebloom\_nifs.cpp:113: error: ‘BLOOM\_FILTER\_RESOURCE’ was not
 declared in this scope c\_src/ebloom\_nifs.cpp:113: error:
 ‘enif\_get\_resource’ was not declared in this scope
 c\_src/ebloom\_nifs.cpp: In function ‘ERL\_NIF\_TERM clear(ErlNifEnv\*,
 int, const ERL\_NIF\_TERM\*)’: c\_src/ebloom\_nifs.cpp:134: error:
 ‘BLOOM\_FILTER\_RESOURCE’ was not declared in this scope
 c\_src/ebloom\_nifs.cpp:134: error: ‘enif\_get\_resource’ was not 
declared

 in this scope c\_src/ebloom\_nifs.cpp: In function ‘ERL\_NIF\_TERM
 size(ErlNifEnv\*, int, const ERL\_NIF\_TERM\*)’:
 c\_src/ebloom\_nifs.cpp:148: error: ‘BLOOM\_FILTER\_RESOURCE’ was not
 declared in this scope c\_src/ebloom\_nifs.cpp:148: error:
 ‘enif\_get\_resource’ was not declared in this scope
 c\_src/ebloom\_nifs.cpp:151: error: ‘enif\_make\_long’ was not 
declared in

 this scope c\_src/ebloom\_nifs.cpp: In function ‘ERL\_NIF\_TERM
 elements(ErlNifEnv\*, int, const ERL\_NIF\_TERM\*)’:
 c\_src/ebloom\_nifs.cpp:162: error: ‘BLOOM\_FILTER\_RESOURCE’ was not
 declared in this scope c\_src/ebloom\_nifs.cpp:162: error:
 ‘enif\_get\_resource’ was not declared in this scope
 c\_src/ebloom\_nifs.cpp:165: error: ‘enif\_make\_long’ was not 
declared in

 this scope c\_src/ebloom\_nifs.cpp: In function ‘ERL\_NIF\_TERM
 effective\_fpp(ErlNifEnv\*, int, const ERL\_NIF\_TERM\*)’:
 c\_src/ebloom\_nifs.cpp:176: error: ‘BLOOM\_FILTER\_RESOURCE’ was not
 declared in this scope c\_src/ebloom\_nifs.cpp:176: error:
 ‘enif\_get\_resource’ was not declared in this scope
 c\_src/ebloom\_nifs.cpp:179: error: ‘enif\_make\_double’ was not 
declared

 in this scope c\_src/ebloom\_nifs.cpp: In function ‘ERL\_NIF\_TERM
 filter\_intersect(ErlNifEnv\*, int, const ERL\_NIF\_TERM\*)’:
 c\_src/ebloom\_nifs.cpp:191: error: ‘BLOOM\_FILTER\_RESOURCE’ was not
 declared in this scope c\_src/ebloom\_nifs.cpp:191: error:
 ‘enif\_get\_resource’ was not declared in this scope
 c\_src/ebloom\_nifs.cpp: In function ‘ERL\_NIF\_TERM
 filter\_union(ErlNifEnv\*, int, const ERL\_NIF\_TERM\*)’:
 c\_src/ebloom\_nifs.cpp:207: error: ‘BLOOM\_FILTER\_RESOURCE’ was not
 declared in this scope c\_src/ebloom\_nifs.cpp:207: error:
 ‘enif\_get\_resource’ was not declared in this scope
 c\_src/ebloom\_nifs.cpp: In function ‘ERL\_NIF\_TERM
 filter\_difference(ErlNifEnv\*, int, const ERL\_NIF\_TERM\*)’:
 c\_src/ebloom\_nifs.cpp:223: error: ‘BLOOM\_FILTER\_RESOURCE’ was not
 declared in this scope c\_src/ebloom\_nifs.cpp:223: error:
 ‘enif\_get\_resource’ was not declared in this scope
 c\_src/ebloom\_nifs.cpp: In function ‘int on\_load(ErlNifEnv\*, void\*\*,
 ERL\_NIF\_TERM)’: c\_src/ebloom\_nifs.cpp:243: error:
 ‘ErlNifResourceFlags’ was not declared in this scope
 c\_src/ebloom\_nifs.cpp:243: error: expected `;' before ‘flags’
 c\_src/ebloom\_nifs.cpp:244: error: ‘BLOOM\_FILTER\_RESOURCE’ was not
 declared in this scope c\_src/ebloom\_nifs.cpp:246: error: ‘flags’ 
was

 not declared in this scope c\_src/ebloom\_nifs.cpp:247: error:
 ‘enif\_open\_resource\_type’ was not declared in this scope ERROR: 
$CXX

 -c $CXXFLAGS $DRV\_CFLAGS c\_src/ebloom\_nifs.cpp -o c\_src/ebloom\_nifs.o
 failed with error: 1 make: \*\*\* [compile] Error 1




\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

