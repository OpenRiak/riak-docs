---
title: "Re: benchmark results on my $75/month 5 node cluster :)"
description: ""
project: community
lastmod: 2013-10-02T11:32:07-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12460"
mailinglist_parent_id: "msg12459"
author_name: "Alex Rice"
project_section: "mailinglistitem"
sent_date: 2013-10-02T11:32:07-07:00
---


On Wed, Oct 2, 2013 at 12:21 PM, Tom Santero  wrote:
> Nice.
>
> Can you share your bb config? Is this against leveldb or bitcask? I'm
> assuming leveldb, considering the limited RAM on these instances. If thats
> the case, I suggest running your benchmarks for longer than 20 minutes (i.e.
> several hours) if possible, just to get a feel for how well riak will
> perform after a few rounds of compactions.
>
> Lastly, do you plan on using these instances in production...or is this just
> a sandbox environment?
>

Tom, sure I will append the basho\_bench config. This is with bitcask.
I did some tests with leveldb and the performance was also very good,
but not as good as bitcask obviously. I will try benchmarking for a
few hours as you suggested.

I am using this in a production environment (for a multiplayer game
with just about zero $ budget to work with). I know with bitcask I
might run up against not-enough-ram for the keyspace so I will have to
keep an eye on things. But I would be able to upgrade the vms to the
larger size with a simple reboot of each node in the cluster.

{mode, max}.

{duration, 20}.

{concurrent, 5}.

{driver, basho\_bench\_driver\_riakc\_pb}.

{key\_generator, {int\_to\_str, {uniform\_int, 1000000}}}.

{value\_generator, {fixed\_bin, 2000}}.

{riakc\_pb\_ips, [
{10,0,0,6},
{10,0,0,7},
{10,0,0,8},
{10,0,0,9},
{10,0,0,10}
]}.

{riakc\_pb\_replies, 1}.

{operations, [{get, 2}, {update, 1}]}.

%% Use {auto\_reconnect, false} to get "old" behavior (prior to April 2013).
%% See deps/riakc/src/riakc\_pb\_socket.erl for all valid socket options.
{pb\_connect\_options, [{auto\_reconnect, true}]}.

%% Overrides for the PB client\'s default 60 second timeout, on a
%% per-type-of-operation basis. All timeout units are specified in
%% milliseconds. The pb\_timeout\_general config item provides a
%% default timeout if the read/write/listkeys/mapreduce timeout is not
%% specified.

{pb\_timeout\_general, 30000}.
{pb\_timeout\_read, 5000}.
{pb\_timeout\_write, 5000}.
{pb\_timeout\_listkeys, 50000}.
%% The general timeout will be used because this specific item is commented:
%% {pb\_timeout\_mapreduce, 50000}.

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

