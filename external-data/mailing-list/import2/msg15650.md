---
title: "Re: Mapred unable to find keys that use bucket types"
description: ""
project: community
lastmod: 2015-02-05T14:25:09-0800
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15650"
mailinglist_parent_id: "msg15646"
author_name: "Christopher Meiklejohn"
project_section: "mailinglistitem"
sent_date: 2015-02-05T14:25:09-0800
---



> On Feb 5, 2015, at 12:47 PM, Mikhail Pustovalov  wrote:
> 
> Hi Chris,
> 
> Thank you for the prompt reply.
> Although that is exactly what I do. I've noticed that bucket can now be both 
> binary or a tuple {binary, binary} where the first element is bucket type and 
> the second is bucket. And it works for put/get operations and for 
> mapred\_bucket which traverses the whole bucket. But what I am trying to 
> achieve is traverse only specified keys and that doesn't seem to work for 
> mapred queiries. Here are the commands that work:
> simple get:
> riakc\_pb\_socket:get(Pid,{<<"bucket\_type">>,<<"bucket">>},<>).
> mapred over the whole bucket:
> riakc\_pb\_socket:mapred\_bucket(Pid, {<<"bucket\_type">>,<<"bucket">>}, [{map, 
> {modfun, rc\_mapred, map\_kv\_pairs}, none, true}]).
> but this one fails with the result {ok,[{0,[{error,notfound}]}]}:
> riakc\_pb\_socket:mapred(Pid, 
> [{{<<"bucket\_type">>,<<"bucket">>},<>}],[{map, {modfun, rc\_mapred, 
> map\_kv\_pairs}, none, true}]).
> 
> If you can run a mapred query over specified keys could you please show me an 
> example?

I can try to put together an example.

Do you mind sharing what your map function is doing?

- Chris

Christopher Meiklejohn
Senior Software Engineer
Basho Technologies, Inc.
cmeiklej...@basho.com\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

