---
title: "Re: best practices for testing eventual consistency?"
description: ""
project: community
lastmod: 2011-11-15T11:03:36-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05590"
mailinglist_parent_id: "msg05589"
author_name: "Reid Draper"
project_section: "mailinglistitem"
sent_date: 2011-11-15T11:03:36-08:00
---


You might find this [1] an interesting read for writing "proven" eventually
consistent systems. Statebox [2] is also worth looking at if you haven't
already.

[1]: http://hal.archives-ouvertes.fr/inria-00555588/
[2]: https://github.com/mochi/statebox

On Tue, Nov 15, 2011 at 1:30 PM, Aphyr  wrote:

> The fastest thing is probably to generate conflicts right below the
> conflict resolution system. If you are worried you can't predict the
> conflicts at all, go ahead and perform multiple reads and writes at
> overlapping times. No need for excessive load; controlling the timing alone
> should be sufficient.
>
> --Kyle
>
>
> On 11/15/2011 10:23 AM, Jesse Myers wrote:
>
>> I'm contemplating migrating a write-intensive system from MySQL to Riak.
>>
>> I understand the eventual consistency model and the need to resolve
>> conflicts in application code, especially if allow\_mult is true. My
>> concern is that I won't discover all of the conflict scenarios my
>> application code needs to handle until after we're live in production.
>> Are there best practices for producing conflicts in development
>> environment? Is my best option to simulate a large amount of load and
>> see what happens? Should I lower my R or W values? Kill off nodes
>> randomly?
>>
>> Related question: I'd like to write unit tests for conflict scenarios
>> I anticipate/encounter. Do any of the client libraries come with good
>> mock support or is that something I need to roll myself?
>>
>> Thanks,
>>
>> Jesse
>>
>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\*\*\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>> riak-users mailing list
>> riak-users@lists.basho.com
>> http://lists.basho.com/\*\*mailman/listinfo/riak-users\_\*\*lists.basho.com
>>
>>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\*\*\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/\*\*mailman/listinfo/riak-users\_\*\*lists.basho.com
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

