---
title: "Re: Yokozuna error during indexing"
description: ""
project: community
lastmod: 2014-11-21T14:16:00-0800
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15203"
mailinglist_parent_id: "msg15200"
author_name: "Oleksiy Krivoshey"
project_section: "mailinglistitem"
sent_date: 2014-11-21T14:16:00-0800
---


Got few results:

I don't see anything wrong with the first record, but the second record
mentions the key '/.Trash/MT03' which is not correct, the correct key that
exists in that bucket is

'/.Trash/MT03 348 plat frames'

(riak@127.0.0.1)1> redbug:start("yz\_solr:to\_pair -> return", [{time,
600000}]).
{3243,1}

00:09:05 <0.5058.0>(dead) {yz\_solr,to\_pair,
 [{struct,
 [{<<"vsn">>,<<"1">>},
 {<<"riak\_bucket\_type">>,<<"fs\_files">>},
 {<<"riak\_bucket\_name">>,

 <<"0fnn2pklvjm5bz37xmlkaxl8k0v0wmrc.files">>},
 {<<"riak\_key">>,<<"/aaa/bbb">>},
 {<<"base64\_hash">>,<<"g2IC6J4E">>}]}]}

00:09:05 <0.5058.0>(dead) yz\_solr:to\_pair/1 -> {{{<<"fs\_files">>,

<<"0fnn2pklvjm5bz37xmlkaxl8k0v0wmrc.files">>},
 <<"/aaa/bbb">>},
 <<131,98,2,232,158,4>>}

00:09:05 <0.5058.0>(dead) {yz\_solr,to\_pair,
 [{struct,
 [{<<"vsn">>,<<"1">>},
 {<<"riak\_bucket\_type">>,<<"fs\_files">>},
 {<<"riak\_bucket\_name">>,

 <<"abtiuxzzzcyr6y6cat3fgvfuaff9veot.files">>},
 {<<"riak\_key">>,<<"/.Trash/MT03">>},
 {<<"base64\_hash">>,<<"348">>}]}]}

00:09:05 <0.5058.0>(dead) yz\_solr:to\_pair/1 -> {error,{badmatch,false}}



On 21 November 2014 22:34, Oleksiy Krivoshey  wrote:

> I have really basic Erlang knowledge (just a few m/r tasks for Riak). But
> I definitely would like to try. Give me some information to so that I can
> start please. Btw, I also have the same problem on my local application
> setup (on a laptop) with a single Riak node.
>
> On 21 November 2014 22:30, Ryan Zezeski  wrote:
>
>>
>> Oleksiy Krivoshey writes:
>>
>> >
>> > ================================ Entropy Trees
>> > ================================
>> > Index Built (ago)
>> >
>> -------------------------------------------------------------------------------
>> > 11417981541647679048466287755595961091061972992 --
>> > 57089907708238395242331438777979805455309864960 --
>> > 102761833874829111436196589800363649819557756928 --
>> > 148433760041419827630061740822747494183805648896 --
>> > 194105686208010543823926891845131338548053540864 10.4 hr
>> > 239777612374601260017792042867515182912301432832 --
>> > 285449538541191976211657193889899027276549324800 --
>> > 650824947873917705762578402068969782190532460544 --
>> > 696496874040508421956443553091353626554780352512 --
>> > 742168800207099138150308704113737470919028244480 --
>> > 787840726373689854344173855136121315283276136448 --
>> > 833512652540280570538039006158505159647524028416 --
>> > 879184578706871286731904157180889004011771920384 --
>> > 924856504873462002925769308203272848376019812352 --
>> > 970528431040052719119634459225656692740267704320 --
>> > 1016200357206643435313499610248040537104515596288 --
>> > 1061872283373234151507364761270424381468763488256 9.4 hr
>> > 1107544209539824867701229912292808225833011380224 --
>> > 1153216135706415583895095063315192070197259272192 --
>> > 1198888061873006300088960214337575914561507164160 12.1 hr
>> > 1244559988039597016282825365359959758925755056128 --
>> > 1290231914206187732476690516382343603290002948096 --
>> > 1335903840372778448670555667404727447654250840064 11.4 hr
>> > 1381575766539369164864420818427111292018498732032 --
>> > 1427247692705959881058285969449495136382746624000 --
>> >
>>
>> So it seems many of these trees are not building because of this issue.
>> The system will keep trying to build but it will fail every time because
>> of the bad base64 string. Trying to catch this with redbug will prove
>> difficult too because it automatically shuts itself off after X events.
>> That can be changed but then you have to dig through a mountain of
>> output. Not a fun way to do things.
>>
>> How comfortable are you with Erlang/Riak? Enough to write a bit of code
>> and hot-load it into your cluster?
>>
>> -Z
>>
>
>
>
> --
> Oleksiy Krivoshey
>



-- 
Oleksiy Krivoshey
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

