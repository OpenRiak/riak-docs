---
title: "Re: putObjectPolicy fails due to wrong Content-Type"
description: ""
project: community
lastmod: 2015-03-13T10:48:15-0700
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15897"
mailinglist_parent_id: "msg15896"
author_name: "Patrick F. Marques"
project_section: "mailinglistitem"
sent_date: 2015-03-13T10:48:15-0700
---


As far as I can see there is no way to do that, and I think that is a bug
of SDK... to temporarily fix that was support a "fake member" on method
(here
https://github.com/aws/aws-sdk-js/blob/master/apis/s3-2006-03-01.min.json#L2094)
just like this one (
https://github.com/aws/aws-sdk-js/blob/master/apis/s3-2006-03-01.min.json#L157).
Is just a simple trick while there is no official solution.
Maybe I should open an issue on AWS NodeJS SDK I lets see what they say
about this.

On Fri, Mar 13, 2015 at 5:38 PM, Matthew Brender  wrote:

> Hi Patrick,
>
> You'll need to investigate whether you can define a content type through
> the SDK. The use of application/octet-stream is defined as "arbitrary
> binary data" in RFC 2046 as explained well here [1]. I'm not sure if you
> have the ability to define the content type and have not done so or whether
> the SDK is at fault.
>
> [1]
> http://stackoverflow.com/questions/20508788/do-i-need-content-type-application-octet-stream-for-file-download
> ᐧ
>
> \*Matt Brender | Developer Advocacy Lead\*
> Basho Technologies
> t: @mjbrender 
> c: +1 617.817.3195
>
> On Fri, Mar 13, 2015 at 10:52 AM, Patrick F. Marques <
> patrickfmarq...@gmail.com> wrote:
>
>> Just the link to the issue https://github.com/basho/riak\_cs/issues/1091
>>
>> @Mathew do you know if AWS NodeJS SDK is doing it wrong so I
>> can also open an issue on amazon repo?
>>
>> On Fri, Mar 13, 2015 at 2:41 PM, Matthew Brender 
>> wrote:
>>
>>> Hi Patrick,
>>>
>>> I'm glad you figured out the root cause here. You bring up a great
>>> opportunity to improve on error responses too. Please open a GitHub issue
>>> for this and any similar observations so PM can keep track of it.
>>>
>>> Thanks,
>>> Matt
>>>
>>> ᐧ
>>>
>>> \*Matt Brender | Developer Advocacy Lead\*
>>> Basho Technologies
>>> t: @mjbrender 
>>>
>>>
>>> On Wed, Mar 11, 2015 at 2:32 PM, Patrick F. Marques <
>>> patrickfmarq...@gmail.com> wrote:
>>>
>>>> Hi,
>>>>
>>>> Hi, I'm trying to use node-aws-sdk to set bucket policies but the SDK
>>>> sends the request with the wrong Content-Type, "application/octet-stream".
>>>> I'm not sure if there is something wrong on my side or if AWS S3 also
>>>> supports this since it is its SDK.
>>>>
>>>> To find the problem I was digging in the SDK code because the server
>>>> response is just a 500 Internal Server Error. It could be nice to return at
>>>> least something like "Unaccepted Content-Type in request".
>>>>
>>>> Regards,
>>>> Patrick Marques
>>>>
>>>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>>>> riak-users mailing list
>>>> riak-users@lists.basho.com
>>>> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>>>>
>>>>
>>>
>>
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

