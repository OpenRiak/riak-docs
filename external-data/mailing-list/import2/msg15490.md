---
title: "Riak 2.0.2 issues"
description: ""
project: community
lastmod: 2015-01-14T10:57:11-0800
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15490"
author_name: "Claudio Cesar Sanchez Tejeda"
project_section: "mailinglistitem"
sent_date: 2015-01-14T10:57:11-0800
---


Hi,

I upgraded Riak from 1.4.12 to 2.0.2. The tomcat application doesn't
work correctly...

We have 2 issues:

- We are using mapreduce with javascript. The meta data is saved in
Riak with low case, for example: x-test-lala, but the javascript
object that the mapreduce function returns is in camel case
(X-Test-Lala).

- Some internal functions are failing with this error:
Caused by: java.io.IOException:
{"phase":"index","error":"{indexes\_not\_supported,riak\_kv\_multi\_backend}"

This is the configuration file:

log.console = file
log.console.level = info
log.console.file = /var/log/riak/console.log
log.error.file = /var/log/riak/error.log
log.syslog = off
log.crash.file = /var/log/riak/crash.log
log.crash.maximum\_message\_size = 64KB
log.crash.size = 10MB
log.crash.rotation.keep = 5
log.crash.rotation = $D0
log.crash = on
nodename = r...@riak0.example.com
distributed\_cookie = riak
erlang.async\_threads = 64
erlang.max\_ports = 65536
erlang.schedulers.force\_wakeup\_interval = 500
erlang.schedulers.compaction\_of\_load = false
ring\_size = 64
transfer\_limit = 2
dtrace = off
platform\_bin\_dir = /usr/sbin
platform\_data\_dir = /var/lib/riak
platform\_etc\_dir = /etc/riak
platform\_lib\_dir = /usr/lib/riak/lib
platform\_log\_dir = /var/log/riak
strong\_consistency = off
listener.http.internal = 10.8.5.41:8098
listener.protobuf.internal = 10.8.5.41:8087
protobuf.backlog = 128
anti\_entropy = active
storage\_backend = multi
object.format = 1
object.size.warning\_threshold = 5MB
object.size.maximum = 50MB
object.siblings.warning\_threshold = 25
object.siblings.maximum = 100
bitcask.data\_root = $(platform\_data\_dir)/bitcask
bitcask.io\_mode = erlang
riak\_control = on
riak\_control.auth.mode = off
leveldb.maximum\_memory.percent = 70
search = off
search.solr.start\_timeout = 30s
search.solr.port = 8093
search.solr.jmx\_port = 8985
search.solr.jvm\_options = -d64 -Xms1g -Xmx1g -XX:+UseStringCache
-XX:+UseCompressedOops
multi\_backend.default = bitcask\_mult
multi\_backend.bitcask\_mult.storage\_backend = bitcask
multi\_backend.bitcask\_mult.bitcask.data\_root = /var/lib/riak/bitcask\_mult
multi\_backend.eleveldb\_mult.storage\_backend = leveldb
multi\_backend.eleveldb\_mult.leveldb.data\_root = /var/lib/riak/eleveldb\_mult
multi\_backend.bitcask\_expiry\_mult.storage\_backend = bitcask
multi\_backend.bitcask\_expiry\_mult.bitcask.data\_root =
/var/lib/riak/bitcask\_expiry\_mult
multi\_backend.bitcask\_expiry\_mult.bitcask.expiry = 1h
multi\_backend.memory\_expiry\_mult.storage\_backend = memory
multi\_backend.memory\_expiry\_mult.memory\_backend.max\_memory\_per\_vnode = 16MB
multi\_backend.memory\_expiry\_mult.memory\_backend.ttl = 1h

Do you have any clue how I can resolve these issues?

The only solution that I have now is downgrade Riak to 1.4.12...

Regards.

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

