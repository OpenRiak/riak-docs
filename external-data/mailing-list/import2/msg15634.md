---
title: "Re: [riak-user]Cannot startup riak node correctly after successful	installation"
description: ""
project: community
lastmod: 2015-02-05T01:56:18-0800
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15634"
mailinglist_parent_id: "msg15633"
author_name: "Alexander Sicular"
project_section: "mailinglistitem"
sent_date: 2015-02-05T01:56:18-0800
---


I would probably take a look at the ulimit docs: 
http://docs.basho.com/riak/latest/ops/tuning/open-files-limit/ . This becomes 
more acute the more nodes you run on the same os. 

-Alexander 

@siculars
http://siculars.posthaven.com

Sent from my iRotaryPhone

> On Feb 5, 2015, at 01:35, YouBarco  wrote:
> 
> Hello,
> 
> My OS is ubuntu 14.04 64bit, and installed erlang from source with version 
> R16B as following:
> -----------------------------------------------------------------------------------------------------------------------------------
> ubuntu@riak1:~/riak-2.0.4/dev$ erl
> Erlang R16B (erts-5.10.1) [source] [64-bit] [smp:4:4] [async-threads:10] 
> [kernel-poll:false] [dtrace]
> 
> Eshell V5.10.1 (abort with ^G)
> 1> 
> ------------------------------------------------------------------------------------------------------------------------------------
> I downloaded riak-2.0.4 source and compile it successfully, then do following:
> >make devrel DEVNODES=2
> >cd dev
> >dev1/bin/riak start
> !!!!
> !!!! WARNING: ulimit -n is 1024; 65536 is the recommended minimum.
> !!!!
> riak failed to start within 15 seconds,
> see the output of 'riak console' for more information.
> If you want to wait longer, set the environment variable
> WAIT\_FOR\_ERLANG to the number of seconds to wait.
> ubuntu@riak1:~/riak-2.0.4/dev$ dev1/bin/riak console
> config is OK
> -config 
> /home/ubuntu/riak-2.0.4/dev/dev1/data/generated.configs/app.2015.02.05.17.26.32.config
> -args\_file 
> /home/ubuntu/riak-2.0.4/dev/dev1/data/generated.configs/vm.2015.02.05.17.26.32.args
> -vm\_args 
> /home/ubuntu/riak-2.0.4/dev/dev1/data/generated.configs/vm.2015.02.05.17.26.32.args
> !!!!
> !!!! WARNING: ulimit -n is 1024; 65536 is the recommended minimum.
> !!!!
> Exec: /home/ubuntu/riak-2.0.4/dev/dev1/bin/../erts-5.10.1/bin/erlexec -boot 
> /home/ubuntu/riak-2.0.4/dev/dev1/bin/../releases/2.0.4/riak 
> -config 
> /home/ubuntu/riak-2.0.4/dev/dev1/data/generated.configs/app.2015.02.05.17.26.32.config
> -args\_file 
> /home/ubuntu/riak-2.0.4/dev/dev1/data/generated.configs/vm.2015.02.05.17.26.32.args
> -vm\_args 
> /home/ubuntu/riak-2.0.4/dev/dev1/data/generated.configs/vm.2015.02.05.17.26.32.args
> -pa /home/ubuntu/riak-2.0.4/dev/dev1/bin/../lib/basho-patches 
> -- console
> Root: /home/ubuntu/riak-2.0.4/dev/dev1/bin/..
> bad scheduling option -sfwi
> Usage: beam.smp [flags] [ -- [init\_args] ]
> The flags are:
> 
> -a size suggested stack size in kilo words for threads
> in the async-thread pool, valid range is [16-8192]
> -A number set number of threads in async thread pool,
> valid range is [0-1024]
> -B[c|d|i] c to have Ctrl-c interrupt the Erlang shell,
> d (or no extra option) to disable the break
> handler, i to ignore break signals
> -c disable continuous date/time correction with
> respect to uptime
> -d don't write a crash dump for internally detected errors
> (halt(String) will still produce a crash dump)
> -fn[u|a|l] Control how filenames are interpreted
> -hms size set minimum heap size in words (default 233)
> -hmbs size set minimum binary virtual heap size in words (default 32768)
> -K boolean enable or disable kernel poll
> -n[s|a|d] Control behavior of signals to ports
> Note that this flag is deprecated!
> -M  memory allocator switches,
> see the erts\_alloc(3) documentation for more info.
> -pc  Control what characters are considered printable (default latin1)
> -P number set maximum number of processes on this node,
> valid range is [1024-134217727]
> -Q number set maximum number of ports on this node,
> valid range is [1024-134217727]
> -R number set compatibility release number,
> valid range [14-16]
> -r force ets memory block to be moved on realloc
> -rg amount set reader groups limit
> -sbt type set scheduler bind type, valid types are:
> -stbt type u|ns|ts|ps|s|nnts|nnps|tnnps|db
> -sbwt val set scheduler busy wait threshold, valid values are:
> none|very\_short|short|medium|long|very\_long.
> -scl bool enable/disable compaction of scheduler load,
> see the erl(1) documentation for more info.
> -sct cput set cpu topology,
> see the erl(1) documentation for more info.
> -sws val set scheduler wakeup strategy, valid values are:
> default|legacy.
> -swt val set scheduler wakeup threshold, valid values are:
> very\_low|low|medium|high|very\_high.
> -sss size suggested stack size in kilo words for scheduler threads,
> valid range is [4-8192]
> -spp Bool set port parallelism scheduling hint
> -S n1:n2 set number of schedulers (n1), and number of
> schedulers online (n2), valid range for both
> numbers are [1-1024]
> -t size set the maximum number of atoms the emulator can handle
> valid range is [8192-0]
> -T number set modified timing level,
> valid range is [0-9]
> -V print Erlang version
> -v turn on chatty mode (GCs will be reported etc)
> -W set error logger warnings mapping,
> see error\_logger documentation for details
> -zdbbl size set the distribution buffer busy limit in kilobytes
> valid range is [1-2097151]
> 
> Note that if the emulator is started with erlexec (typically
> from the erl script), these flags should be specified with +.
> 
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

