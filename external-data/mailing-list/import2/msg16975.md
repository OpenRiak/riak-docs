---
title: "Re: limit of bucket/solr indexes"
description: ""
project: community
lastmod: 2016-01-15T10:14:12-0800
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16975"
mailinglist_parent_id: "msg16789"
author_name: "Vitaly E"
project_section: "mailinglistitem"
sent_date: 2016-01-15T10:14:12-0800
---


Hi Alexander,

I didn't see anybody answering your question, so I'll try my best to answer
it myself.

The practical number of Solr indices in Riak KV is pretty low. I won't
recommend working with more than a few. We hit severe performance problems
at around a few tens of Solr indexes. So it looks like if Solr search is
absolutely a must for you, you'll have to share an index among the teams
and filter out search results (by team).

Regarding buckets, there can be a lot. That said, I would suggest utilizing
bucket types to get better performance. When the properties of a bucket are
derived from a bucket type, it's mostly the bucket type that needs to be
replicated across Riak nodes, as opposed to replicating the properties of
every individual bucket (
http://docs.basho.com/riak/latest/dev/advanced/bucket-types/#How-Bucket-Types-Work).
Am I right assuming that the nature (or structure if you will) of data will
be the same for different teams? If this is the case, it may make sense to
configure bucket properties at the bucket-type level, including any
associated Solr indexes.

For example, you may have the following structure:

bucket type: team\_members
properties: w = quorum, r = quorum, search\_index = team\_members

And then "child" buckets:
\* type/team\_members/bucket/dinamo
\* type/team\_members/bucket/chelsea
\* type/team\_members/bucket/juventus
and so on

If you decide to use this approach, let me know how it works for you.

Regards,
Vitaly


On Wed, Nov 18, 2015 at 12:02 PM, Alexander Popov 
wrote:

> 1. does Riak have restrictions on bucket numbers?
> 2. same for SOLR indexes?
>
> Interesting not theoretical, but practical limits when it start works bad.
>
> Use case: we want split users bucket to bucket-per-team model,
> this bucket have also solr index on top. Can it work for 1000 teams? 10k?
> 100k?
>
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

