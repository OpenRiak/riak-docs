---
title: "Re: Riak occasionally not storing objects"
description: ""
project: community
lastmod: 2013-10-24T07:32:00-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12751"
mailinglist_parent_id: "msg12745"
author_name: "David Greenstein"
project_section: "mailinglistitem"
sent_date: 2013-10-24T07:32:00-07:00
---


It does in fact appear that the out of synch system clocks across the nodes was 
causing the issue with vclock auto conflict resolution. The nodes don’t have 
internet access so I set up an internal ntp server to keep them in synch from 
now on. Thanks again for all the help!

Dave

On Oct 23, 2013, at 6:44 PM, David Greenstein  wrote:

> 
> The nodes were a bit out of synch (up to 30 seconds… looking into why ntp 
> wasn’t working!). So far it appears this was the issue. I’ll let you know as 
> I continue testing. Thank you!
> 
> Dave
> 
> 
> On Oct 23, 2013, at 6:01 PM, John Daily  wrote:
> 
>> How well-synchronized are your system clocks?
>> 
>> Sent from my iPhone
>> 
>>> On Oct 23, 2013, at 5:00 PM, David Greenstein  wrote:
>>> 
>>> 
>>> We’re doing new puts with a blank vector clock. There are several seconds 
>>> between updates to the object though.
>>> 
>>> Dave
>>> 
>>> 
>>>> On Oct 23, 2013, at 5:32 PM, Andrew Thompson  wrote:
>>>> 
>>>>> On Wed, Oct 23, 2013 at 04:57:12PM -0400, David Greenstein wrote:
>>>>> 
>>>>> One other thing that might be worth mentioning here is the writes I’m 
>>>>> mentioning are actually updates to existing objects. The object exists, 
>>>>> an attempt to write an update for the object appears to be received by a 
>>>>> node, but the object maintains it’s original value.
>>>>> 
>>>>> Any help you can provide to debug this would be greatly appreciated. 
>>>>> thank you!
>>>> 
>>>> Ok, that changes things a lot. You're running with allow\_mult=false, so
>>>> Riak will automatically resolve siblings for you if you create them. Are
>>>> you doing 'get before put' for your updates? That is, doing the PUT with
>>>> the vclock of the old value, or are you doing 'new' puts with a blank
>>>> vector clock?
>>>> 
>>>> Andrew
>>>> 
>>>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>>>> riak-users mailing list
>>>> riak-users@lists.basho.com
>>>> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>>> 
>>> 
>>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>>> riak-users mailing list
>>> riak-users@lists.basho.com
>>> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
> 


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

