---
title: "Re: How to find which nodes host a particular bucket/key?"
description: ""
project: community
lastmod: 2015-01-13T09:15:44-0800
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15484"
mailinglist_parent_id: "msg15476"
author_name: "Charlie Voiselle"
project_section: "mailinglistitem"
sent_date: 2015-01-13T09:15:44-0800
---


You can use the following Erlang snippet in `riak attach`:

N=3,
{ok,Ring} = riak\_core\_ring\_manager:get\_my\_ring(),
DocIdx = riak\_core\_util:chash\_key({<<"my\_bucket">>, <<"my\_key">>}),
<> = DocIdx,
Preflist = riak\_core\_ring:preflist(DocIdx, Ring),
{Targets, Fallbacks} = lists:split(N, Preflist),
Targets.

Verify that `N` matches your clusters N-val. Change `my\_bucket` and `my\_key` as 
appropriate. If all of your nodes are up and healthy, this will give you the 
primaries in the `Targets` variable and the fallback partitions in order of 
preference in `Fallbacks`.

Regards,
Charlie Voiselle
Basho Client Services


> On Jan 12, 2015, at 4:28 PM, Jay Doane  wrote:
> 
> Can anyone suggest how to determine the nodes on which a particular 
> bucket/key are hosted in a cluster?
> 
> Thanks,
> Jay
> 
> 
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

