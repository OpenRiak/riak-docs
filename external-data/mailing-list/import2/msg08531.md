---
title: "Re: Automatic replacement of dead nodes"
description: ""
project: community
lastmod: 2012-09-13T11:01:26-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08531"
mailinglist_parent_id: "msg08530"
author_name: "Reid Draper"
project_section: "mailinglistitem"
sent_date: 2012-09-13T11:01:26-07:00
---



On Sep 13, 2012, at 1:54 PM, Jonas Tehler  wrote:

> 
> Hi
> 
> The plan was to use autoscaling for replacing a node that had failed for some 
> reason, not for scaling it up and down based on load. If a node fails I would 
> like it replaced as soon as possible and without manual intervention. 

Ah, cool.

> 
> But perhaps you are right in that I should do this manually until I am more 
> familiar with Riak. 

Yes, and for now anyway, you will have to write your own scripts to do this. 
For this specific scenario,
you should look into the replace [1] command.

[1] http://wiki.basho.com/Replacing-a-Node.html (note that this requires Riak 
>= 1.2.0)

Reid

> 
> / Jonas
> 
> 
> On 13 sep 2012, at 19:50, Reid Draper  wrote:
> 
>> Jonas,
>> 
>> I'd be weary of 'autoscaling' a cluster. While it seems nice in theory, 
>> rebalancing
>> data when a node is added or removed from the cluster can be expensive.
>> I'd recommend having a human involved, at least until you have a bit more
>> experience administering a cluster.
>> 
>> To answer your question, yes, you'll have to write the code yourself to 
>> remove
>> the node.
>> 
>> Reid
>> 
>> 
>> On Sep 13, 2012, at 1:30 PM, Jonas Tehler  wrote:
>> 
>>> 
>>> Hi
>>> 
>>> I'm setting up a Riak cluster on some EC2 servers running Ubuntu. The goal 
>>> is to use autoscaling to make sure that I always have the right number of 
>>> nodes online. 
>>> 
>>> When I kill one node (shut down the server, it's gone permanently) and then 
>>> start a new server to replace it (with a new name) the new server can't 
>>> join the cluster because it can't communicate with the dead node. It works 
>>> if I manually mark the dead node as down and remove it form the cluster but 
>>> I would like that to happen automatically (perhaps after a timeout). 
>>> 
>>> Do I have to write my own code that detects this situation and removes the 
>>> dead node from the cluster or is there a way to configure Riak to do this 
>>> for me?
>>> 
>>> / Jonas
>>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>>> riak-users mailing list
>>> riak-users@lists.basho.com
>>> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>> 
>> 
>> 
>> 
>> --
>> 
>> CronLab scanned this message. We don't think it was spam. If it was,
>> please report by copying this link into your browser: 
>> https://swe02.antispam.cronlab.com/mail/index.php?id=95E2DADE0B9.A747C-&learn=spam&host=212.91.140.36
>> 
> 

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

