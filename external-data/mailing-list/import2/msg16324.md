---
title: "Re: riak 2.1.1 starting error in mac os 10.10"
description: ""
project: community
lastmod: 2015-07-30T05:45:08-0700
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16324"
mailinglist_parent_id: "msg16323"
author_name: "Fred Dushin"
project_section: "mailinglistitem"
sent_date: 2015-07-30T05:45:08-0700
---



You're getting a runtime load error because your are likely not linking against 
the right C++ runtime (because you built with gcc). IIRC the GCC C++ runtime 
and the C++ runtime that ships with Darwin are not ABI compatible. Welcome to 
C++.

You might try hacking your environment using DYLD\_LIBRARY\_PATH, so that you 
link the gcc runtime.

Some things you can do to help diagnose:

See what your eleveldb is linked against.

otool -L 
/Users/Humberto/riak-2.1.1/rel/riak/bin/../lib/eleveldb-2.1.0-0-ga36dbd6/priv/eleveldb.so

Because I build with clang/LLVM, I get:

 /usr/lib/libstdc++.6.dylib (compatibility version 7.0.0, current 
version 104.1.0)
 /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current 
version 1213.0.0)

To see all the symbols in this library (with C++ demangled names -- OS X only),

prompt$ nm 
/Users/Humberto/riak-2.1.1/rel/riak/bin/../lib/eleveldb-2.1.0-0-ga36dbd6/priv/eleveldb.so
 | c++filt

If I grep for basic\_ostringstream (the symbol you are not finding), I get:

 U std::basic\_ostringstream, 
std::allocator >::basic\_ostringstream(std::\_Ios\_Openmode)
 U VTT for std::basic\_ostringstream, std::allocator >

But I have a more basic question. Why are you using GCC on OS X? You really 
should be using LLVM, which ships with the OS (well, once you install Xcode).

-Fred

> On Jul 30, 2015, at 8:13 AM, Humberto RodrÃ­guez Avila #######################################################################################  
> wrote:
> 
> Hello, I have an error trying to start riak after compiled it from the source 
> code (riak 2.1.1). I am using gcc 5.2 as default compiler, Mac OS 10.10 and 
> the Basho's patched version of Erlang (OTP\_R16B02\_basho8)
> 
> I put a post in GitHubGist with a full description and logs 
> https://gist.github.com/rhumbertgz/b7b0b5c26134c1d10b2c 
>  , 
> Thanks in advance Humberto
> 
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

