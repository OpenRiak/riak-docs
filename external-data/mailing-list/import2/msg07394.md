---
title: "What can cause an object to be not_found even though R+W>N?"
description: ""
project: community
lastmod: 2012-05-07T14:09:47-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07394"
author_name: "Will Hutchinson"
project_section: "mailinglistitem"
sent_date: 2012-05-07T14:09:47-07:00
---


Hi, I am observing the following:

(Setup, 3 physical nodes, default settings of R 2, W 2, N 3, LevelDB
backend, using riak:local\_client() from inside the same BEAM.)

1. Three fresh nodes are started up with empty data and ring state
directories, the second two are told to join the first, and then a bunch of
seed data is loaded, as part of a deployment script.

2. The nodes are all stopped at the end of the deployment.

3. When the system is started for real, the nodes are brought back up, and
are re-connecting from the ring state they had persisted during deployment.

4. One of our own OTP applications running inside the cluster detects that
riak\_kv is started and ring ready, it begins to try to load and process
some of the data.

5. It first lists all of the keys from a bucket, then retrieve them one by
one.

PROBLEM: Some of the objects that were in the list of keys return not\_found
when retrieved.

--------------------
Questions

A) I see from some searching on the mailing list archives that as of
mid-2011 objects may be unavailable during handoffs. Is this still the case
with riak\_kv 1.1?

B) What is the canonical way to make sure that all handing off of the
current ring is done after joining and that retrieval operations will be
completely reliable?

C) In the case of physical node failure and failover, is there ever a
chance of erroneous not\_founds with the default R/W/N settings?

Thanks!
Will Hutchinson
TrueEx

-- 
 

\*CONFIDENTIALITY NOTICE\*

THE INFORMATION CONTAINED IN THIS COMMUNICATION IS INTENDED FOR THE NAMED 
RECEIVER ONLY. THE TRANSMISSION MAY CONTAIN PRIVILEGED AND CONFIDENTIAL 
MATERIAL. IF YOU ARE NOT THE NAMED RECIPIENT, PLEASE BE ADVISED THAT ANY 
USE, DISSEMINATION OR UNAUTHORIZED COPYING OF THE MATERIAL IS STRICTLY 
PROHIBITED. IF YOU HAVE RECEIVED THIS TRANSMISSION IN ERROR, PLEASE NOTIFY 
supp...@trueex.com AND DESTROY THE RECEIVED COPY. THANK YOU.
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

