---
title: "Re: Riak Control"
description: ""
project: community
lastmod: 2016-06-08T01:39:43-0700
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17464"
mailinglist_parent_id: "msg17462"
author_name: "Magnus Kessler"
project_section: "mailinglistitem"
sent_date: 2016-06-08T01:39:43-0700
---


On 8 June 2016 at 00:40, satish bhatti  wrote:

> I am trying to run Riak Control for my Riak 1.4.12 setup on OSX. I
> followed the instructions here:
>
> http://docs.basho.com/riak/1.4.12/ops/advanced/riak-control/
>
> for setting it up. When I try to access:
>
> https://localhost:8069/admin
>
> it generates errors in the logs, which are attached. What am I doing wrong?
>
> Satish
>
>
Hi Satish,

Your logs show these errors:

2016-06-07 16:36:55.824 [info] <0.354.0>@riak\_core:wait\_for\_service:464
> Wait complete for service riak\_kv (9 seconds)

2016-06-07 16:37:00.346 [error] <0.1952.0> gen\_fsm <0.1952.0> in state
> hello terminated with reason: no function clause matching
> ssl\_certificate:signature\_type({1,2,840,113549,1,1,11}) line 174

2016-06-07 16:37:00.346 [error] <0.1952.0> CRASH REPORT Process <0.1952.0>
> with 0 neighbours exited with reason: no function clause matching
> ssl\_certificate:signature\_type({1,2,840,113549,1,1,11}) line 174 in
> gen\_fsm:terminate/7 line 611
> 2016-06-07 16:37:00.346 [error] <0.86.0> Supervisor ssl\_connection\_sup had
> child undefined started with {ssl\_connection,start\_link,undefined} at
> <0.1952.0> exit with reason no function clause matching
> ssl\_certificate:signature\_type({1,2,840,113549,1,1,11}) line 174 in context
> child\_terminated
> 2016-06-07 16:37:00.346 [error] <0.1954.0> gen\_fsm <0.1954.0> in state
> hello terminated with reason: no function clause matching
> ssl\_certificate:signature\_type({1,2,840,113549,1,1,11}) line 174
> 2016-06-07 16:37:00.346 [error] <0.1954.0> CRASH REPORT Process <0.1954.0>
> with 0 neighbours exited with reason: no function clause matching
> ssl\_certificate:signature\_type({1,2,840,113549,1,1,11}) line 174 in
> gen\_fsm:terminate/7 line 611
> 2016-06-07 16:37:00.346 [error] <0.86.0> Supervisor ssl\_connection\_sup had
> child undefined started with {ssl\_connection,start\_link,undefined} at
> <0.1954.0> exit with reason no function clause matching
> ssl\_certificate:signature\_type({1,2,840,113549,1,1,11}) line 174 in context
> child\_terminated
> 2016-06-07 16:37:00.347 [error] <0.198.0> application: mochiweb, "Accept
> failed error", "{'EXIT',\n {{function\_clause,\n
> [{ssl\_certificate,signature\_type,\n
> [{1,2,840,113549,1,1,11}],\n
> [{file,\"ssl\_certificate.erl\"},{line,174}]},\n
> {ssl\_cipher,filter,2,[{file,\"ssl\_cipher.erl\"},{line,401}]},\n
> {ssl\_handshake,select\_session,8,\n
> [{file,\"ssl\_handshake.erl\"},{line,593}]},\n
> {ssl\_handshake,hello,4,[{file,\"ssl\_handshake.erl\"},{line,152}]},\n
> {ssl\_connection,hello,2,[{file,\"ssl\_connection.erl\"},{line,413}]},\n
> {ssl\_connection,next\_state,4,\n
> [{file,\"ssl\_connection.erl\"},{line,1929}]},\n
> {gen\_fsm,handle\_msg,7,[{file,\"gen\_fsm.erl\"},{line,494}]},\n
> {proc\_lib,init\_p\_do\_apply,3,[{file,\"proc\_lib.erl\"},{line,227}]}]},\n
> {gen\_fsm,sync\_send\_all\_state\_event,[<0.1954.0>,start,infinity]}}}"
> 2016-06-07 16:37:00.347 [error] <0.198.0> CRASH REPORT Process <0.198.0>
> with 0 neighbours exited with reason: {error,accept\_failed} in
> mochiweb\_acceptor:init/3 line 34
> 2016-06-07 16:37:00.347 [error] <0.196.0>
> {mochiweb\_socket\_server,310,{acceptor\_error,{error,accept\_failed}}}
> 2016-06-07 16:37:00.347 [error] <0.197.0> application: mochiweb, "Accept
> failed error", "{'EXIT',\n {{function\_clause,\n
> [{ssl\_certificate,signature\_type,\n
> [{1,2,840,113549,1,1,11}],\n
> [{file,\"ssl\_certificate.erl\"},{line,174}]},\n
> {ssl\_cipher,filter,2,[{file,\"ssl\_cipher.erl\"},{line,401}]},\n
> {ssl\_handshake,select\_session,8,\n
> [{file,\"ssl\_handshake.erl\"},{line,593}]},\n
> {ssl\_handshake,hello,4,[{file,\"ssl\_handshake.erl\"},{line,152}]},\n
> {ssl\_connection,hello,2,[{file,\"ssl\_connection.erl\"},{line,413}]},\n
> {ssl\_connection,next\_state,4,\n
> [{file,\"ssl\_connection.erl\"},{line,1929}]},\n
> {gen\_fsm,handle\_msg,7,[{file,\"gen\_fsm.erl\"},{line,494}]},\n
> {proc\_lib,init\_p\_do\_apply,3,[{file,\"proc\_lib.erl\"},{line,227}]}]},\n
> {gen\_fsm,sync\_send\_all\_state\_event,[<0.1952.0>,start,infinity]}}}"


Note the "no function clause matching ssl\_certificate:signature\_type" error
message. This is most likely caused by an incompatibility between the quite
old SSL implementation in OTP-15 (which is used by Riak 1.4.12) and the
certificate you generated. How did you generate your certificate? If it is
using SHA-256 as the signature algorithm, could you please try to generate
a certificate with either the SHA-1 or MD5 signature algorithm? This is
definitely not secure by modern standards, but you are dealing with
compatibility issues of an older implementation.

You may also have better luck with Riak 2.1.4, or the upcoming 2.0.7
release. A selection of SSL/TLS stability improvements has recently been
backported from the official Erlang OTP code base. Any Riak release
containing Erlang OTP-R16B02-basho10 or above will have updates to the
SSL/TLS module.

Hope this helps,

Magnus

-- 
Magnus Kessler
Client Services Engineer
Basho Technologies Limited

Registered Office - 8 Lincolnâ€™s Inn Fields London WC2A 3BP Reg 07970431
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

