---
title: "Re: Increasing listen() backlog on riak's HTTP api"
description: ""
project: community
lastmod: 2016-10-27T10:30:31-0700
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17716"
mailinglist_parent_id: "msg17705"
author_name: "Luke Bakken"
project_section: "mailinglistitem"
sent_date: 2016-10-27T10:30:31-0700
---


Hi Rohit,

Mochiweb's max connections are set as an argument to the start()
function. I don't believe there is a way to increase it at run time.

If you're hitting the listen backlog, your servers aren't able to keep
up with the request workload. Are you doing any listing or mapreduce
operations?
--
Luke Bakken
Engineer
lbak...@basho.com


On Wed, Oct 19, 2016 at 10:20 PM, Rohit Sanbhadti
 wrote:
> Hi all,
>
> Iâ€™ve been trying to increase the backlog that riak uses when opening a 
> listening socket with HTTP, as Iâ€™ve seen a fair number of backlog overflow 
> errors in my use case (we have a 10 node riak cluster which takes a lot of 
> traffic, and we certainly expect the peak of concurrent traffic to exceed the 
> default backlog size of 128). I just found out that there appears to be no 
> way to customize the backlog that riak passes to webmachine/mochiweb, as 
> indicated by this issue (https://github.com/basho/riak\_api/issues/108). Can 
> anyone recommend a way to increase this backlog without having to modify and 
> recompile the riak\_api, or without switching to protocol buffers? Is there 
> any set of erlang commands I can run from the attachable riak console to 
> change the backlog and restart the listening socket?
>
> --
> Rohit S.
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

