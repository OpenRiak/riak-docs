---
title: "riak-admin diag output"
description: ""
project: community
lastmod: 2013-07-12T07:32:43-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11500"
author_name: "Daniel Iwan"
project_section: "mailinglistitem"
sent_date: 2013-07-12T07:32:43-07:00
---


Hi my riak admin diag shows output as below(3-node cluster)

I'm assuming long numbers are vnodes. Strange thing is:

5708990770823839524233143877797980545530986496 exist twice for the same node

19981467697883438334816003572292931909358452736 once on the list

How do I interpret this?

How can I list all vnodes and nodes that they are exist on, riak-admin
vnode-status

shows only primary locations, what about copies?


me@node3:~$ riak-admin diag

Attempting to restart script through sudo -H -u riak

14:19:51.277 [critical] vm.swappiness is 1, should be no more than 0)

14:19:51.277 [critical] net.core.wmem\_default is 229376, should be at least
8388608)

14:19:51.278 [critical] net.core.rmem\_default is 229376, should be at least
8388608)

14:19:51.278 [critical] net.core.wmem\_max is 131071, should be at least
8388608)

14:19:51.278 [critical] net.core.rmem\_max is 131071, should be at least
8388608)

14:19:51.278 [critical] net.core.netdev\_max\_backlog is 1000, should be at
least 10000)

14:19:51.278 [critical] net.core.somaxconn is 128, should be at least 4000)

14:19:51.278 [critical] net.ipv4.tcp\_max\_syn\_backlog is 2048, should be at
least 40000)

14:19:51.278 [critical] net.ipv4.tcp\_fin\_timeout is 60, should be no more
than 15)

14:19:51.278 [critical] net.ipv4.tcp\_tw\_reuse is 0, should be 1)

14:19:51.278 [warning] The following preflists do not satisfy the n\_val:
[[{0,'riak@10.173.240.1'},{2854495385411919762116571938898990272765493248,'
riak@10.173.240.2'},{5708990770823839524233143877797980545530986496,'
riak@10.173.240.2'}],[{2854495385411919762116571938898990272765493248,'
riak@10.173.240.2'},{5708990770823839524233143877797980545530986496,'
riak@10.173.240.2'},{8563486156235759286349715816696970818296479744,'
riak@10.173.240.3'}],[{11417981541647679048466287755595961091061972992,'
riak@10.173.240.1'},{14272476927059598810582859694494951363827466240,'
riak@10.173.240.2'},{17126972312471518572699431633393941636592959488,'
riak@10.173.240.2'}],[{14272476927059598810582859694494951363827466240,'
riak@10.173.240.2'},{17126972312471518572699431633393941636592959488,'
riak@10.173.240.2'},{19981467697883438334816003572292931909358452736,'
riak@10.173.240.3'}],[{22835963083295358096932575511191922182123945984,'
riak@10.173.240.1'},{25690458468707277859049147450090912454889439232,'
riak@10.173.240.2'},{28544953854119197621165719388989902727654932480,'
riak@10.173.240.2'}],[{25690458468707277859049147450090912454889439232,'
riak@10.173.240.2'},{28544953854119197621165719388989902727654932480,'
riak@10.173.240.2'},{31399449239531117383282291327888893000420425728,'
riak@10.173.240.3'}],[{34253944624943037145398863266787883273185918976,'
riak@10.173.240.1'},{37108440010354956907515435205686873545951412224,'
riak@10.173.240.2'},{39962935395766876669632007144585863818716905472,'
riak@10.173.240.2'}],[{37108440010354956907515435205686873545951412224,'
riak@10.173.240.2'},{39962935395766876669632007144585863818716905472,'
riak@10.173.240.2'},{42817430781178796431748579083484854091482398720,'
riak@10.173.240.3'}],[{45671926166590716193865151022383844364247891968,'
riak@10.173.240.1'},{48526421552002635955981722961282834637013385216,'
riak@10.173.240.2'},{51380916937414555718098294900181824909778878464,'
riak@10.173.240.2'}],[{48526421552002635955981722961282834637013385216,'
riak@10.173.240.2'},{51380916937414555718098294900181824909778878464,'
riak@10.173.240.2'},{54235412322826475480214866839080815182544371712,'
riak@10.173.240.3'}],[{57089907708238395242331438777979805455309864960,'
riak@10.173.240.1'},{59944403093650315004448010716878795728075358208,'
riak@10.173.240.2'},{62798898479062234766564582655777786000840851456,'
riak@10.173.240.2'}],[{59944403093650315004448010716878795728075358208,'
riak@10.173.240.2'},{62798898479062234766564582655777786000840851456,'
riak@10.173.240.2'},{65653393864474154528681154594676776273606344704,'
riak@10.173.240.3'}],[{68507889249886074290797726533575766546371837952,'
riak@10.173.240.1'},{71362384635297994052914298472474756819137331200,'
riak@10.173.240.2'},{74216880020709913815030870411373747091902824448,'
riak@10.173.240.2'}],[{71362384635297994052914298472474756819137331200,'
riak@10.173.240.2'},{74216880020709913815030870411373747091902824448,'
riak@10.173.240.2'},{77071375406121833577147442350272737364668317696,'
riak@10.173.240.3'}],[{79925870791533753339264014289171727637433810944,'
riak@10.173.240.1'},{82780366176945673101380586228070717910199304192,'
riak@10.173.240.2'},{85634861562357592863497158166969708182964797440,'
riak@10.173.240.2'}],[{82780366176945673101380586228070717910199304192,'
riak@10.173.240.2'},{85634861562357592863497158166969708182964797440,'
riak@10.173.240.2'},{88489356947769512625613730105868698455730290688,'
riak@10.173.240.3'}],[{91343852333181432387730302044767688728495783936,'
riak@10.173.240.1'},{94198347718593352149846873983666679001261277184,'
riak@10.173.240.2'},{97052843104005271911963445922565669274026770432,'
riak@10.173.240.2'}],[{94198347718593352149846873983666679001261277184,'
riak@10.173.240.2'},{97052843104005271911963445922565669274026770432,'
riak@10.173.240.2'},{99907338489417191674080017861464659546792263680,'
riak@10.173.240.3'}],[{102761833874829111436196589800363649819557756928,'
riak@10.173.240.1'},{105616329260241031198313161739262640092323250176,'
riak@10.173.240.2'},{108470824645652950960429733678161630365088743424,'
riak@10.173.240.2
'}],[{105616329260241031198313161739262640092323250176,...},...],...]



Regards

Daniel
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

