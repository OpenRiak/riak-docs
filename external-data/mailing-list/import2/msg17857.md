---
title: "Re: consult some questions about riak,thank you"
description: ""
project: community
lastmod: 2017-01-17T09:20:45-0800
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17857"
mailinglist_parent_id: "msg17852"
author_name: "Luke Bakken"
project_section: "mailinglistitem"
sent_date: 2017-01-17T09:20:45-0800
---


std::bad\_alloc is thrown when memory can't be allocated. This can
happen when there is no more free RAM.

Do you have monitoring enabled on these servers where you can watch
memory consumption?

--
Luke Bakken
Engineer
lbak...@basho.com

On Fri, Jan 13, 2017 at 8:21 AM, 270917674 <270917...@qq.com> wrote:
> Dear basho team:
> I encountered a strange question, we use riak/riak-cs build a cluster, the
> cluster has 7 nodes, DB of riak KV is multi(level & bitcask), earch node has
> 16G RAM.total\_leveldb\_mem\_percent=50.
> today we found one node crash down but without crash log, and erlang log
> has something like this:
> terminate called after throwing an instance of 'std::bad\_akkic' wath():
> std::bad\_alloc
> （riak kv version：2.0.5）
> [os\_mon] memory supervisor port(memsup):Erlang has closed;
> [os\_mon] cpu supervisor port(cpu\_sup):Erlang has close.
> And we restart this node and it can work properly again, use the (free -m)
> command to view the memory, +-buffered/cache: used=2000Mb available<14000Mb.
> and memory status of other nodes are: used 6000Mb~7000Mb.
> can you help me analysis of why the node crash down?
> and i found other problem on other cluster. under normal conditions，the
> memory of used was 4000Mb~5000Mb,but
> every 20 minutes will rise once, about doubled, and then returned to normal,
> why?
>
> thank you very much!
> ------------------
> 微软(中国)有限责任公司
> 手机： +86
>
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

