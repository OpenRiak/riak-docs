---
title: "Removing properties in Ripple"
description: ""
project: community
lastmod: 2011-02-08T15:30:10-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02234"
author_name: "Duff OMelia"
project_section: "mailinglistitem"
sent_date: 2011-02-08T15:30:10-08:00
---


Hi all,

There's a test in ripple:

describe Ripple::Document::Finders do
 it "should raise an exception when finding an existing document
that has properties we don't know about" do
 @plain.raw\_data = '{"non\_existent\_property":"whatever"}'
 lambda { Box.find("square") }.should raise\_error
 end
end


I'd like to understand the motivation for that behavior.
Specifically, if we have data stored in Riak and we want to eliminate
one of the Ripple properties, what's the best way to do that? So for
example, if we had:

class Account
 include Ripple::Document

 property :email, String, :presence => true
 property :feature\_level, String

end


And then we wanted to change the Account to look like this:


class Account
 include Ripple::Document

 property :email, String, :presence => true

end

such that it no longer has the feature\_level property, then we can't
find existing Accounts using Ripple because it'll raise an exception.

I was thinking I'd be able to find one of those old accounts,
potentially access the feature\_level using the attributes from
ActiveModel, potentially remove that feature level from the Riak
storage, etc. The fact that there's a test there verifying that
finding a document with unknown properties raises an exception makes
me think there's something I'm missing as far as renaming properties
or deleting old data goes.

Anyone have any insight to share?


Thanks!


------------------------------------------------------------
Duff OMelia

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

