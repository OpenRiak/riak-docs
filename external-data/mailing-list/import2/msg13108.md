---
title: "Re: badrecord during transfer"
description: ""
project: community
lastmod: 2013-11-27T10:18:50-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13108"
mailinglist_parent_id: "msg13105"
author_name: "Heinz Nikolaus Gies"
project_section: "mailinglistitem"
sent_date: 2013-11-27T10:18:50-08:00
---


If it helps: I’ve seen that too as part of my own riak\_core app, created with 
stagedevrel. Haven’t had time to debug that yet.


---
Cheers,
Heinz Nikolaus Gies
he...@licenser.net



On Nov 27, 2013, at 3:19 PM, Brian Sparrow  wrote:

> Hi Ivan,
> 
> Could you please attach a `riak-debug` from riak@10.197.0.55 and 
> riak@10.196.50.172?
> 
> Thanks!
> Brian
> 
> -- 
> Brian Sparrow
> Developer Advocate
> Basho Technologies
> 
> Sent with Sparrow
> 
> On Tuesday, November 26, 2013 at 7:55 PM, Ivan Skytte Jørgensen wrote:
> 
>> I have a three-node cluster (version 1.4.2)
>> 
>> One node is trying to send a partition to another node but encounters this 
>> error every time:
>> 
>> 2013-11-27 00:48:15.468 [error] 
>> <0.29095.34>@riak\_core\_handoff\_sender:start\_fold:269 ownership\_transfer 
>> transfer of riak\_search\_vnode from 'riak@10.197.0.55' 
>> 1118962191081472546749696200048404186924073353216 to 'riak@10.196.50.172' 
>> 1118962191081472546749696200048404186924073353216 failed because of 
>> error:{badrecord,ho\_acc} 
>> [{riak\_core\_handoff\_sender,start\_fold,5,[{file,"src/riak\_core\_handoff\_sender.erl"},{line,193}]}]
>> 
>> I have tried attaching to riak with riak attach and doing a repair, but:
>> 
>> (riak@10.197.0.55)1> 
>> riak\_kv\_vnode:repair(1118962191081472546749696200048404186924073353216).
>> ownership\_change\_in\_progress
>> 
>> How do I get out of this sticky situation? The transfer never completes 
>> because the index is damaged and I cannot repair it because it is scheduled 
>> for handoff.
>> 
>> Would a force-remove allow me to repair the partition and then rejoin the 
>> cluster?
>> 
>> /isj
>> 
>> 
>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>> riak-users mailing list
>> riak-users@lists.basho.com
>> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
> 
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com



signature.asc
Description: Message signed with OpenPGP using GPGMail
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

