---
title: "Bucket properties not updated"
description: ""
project: community
lastmod: 2013-10-09T04:42:04-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12559"
author_name: "Daniel Iwan"
project_section: "mailinglistitem"
sent_date: 2013-10-09T04:42:04-07:00
---


Hi

With Java client 1.1.3 and Riak 1.3.1
I'm doing:

 WriteBucket wb =
iclient.createBucket(BUCKET\_NAME).nVal(3).allowSiblings(true);
 Bucket b = wb.execute();

\_logger.fine("Regular bucket: " + bucket + ", allows siblings? " +
bucket.getAllowSiblings());

 DomainBucketBuilder< MyObjectInRiak > builder =
DomainBucket.builder(bucket, MyObjectInRiak.class);

 builder.r(RIAK\_TX\_R\_VALUE);
 builder.w(RIAK\_TX\_W\_VALUE);
 builder.rw(RIAK\_TX\_RW\_VALUE);
 builder.returnDeletedVClock(true);
 builder.returnBody(true);
 builder.basicQuorum(false);

with custom resolver, mutator and converter.
This code runs on 3 servers at the same time during a test and I know Riak
db is empty
and bucket BUCKET\_NAME does not exist.

log shows that all 3 servers see allowSibbling set to true, but
occasionally test fails and curl shows allow\_multi is false on that bucket!

Is there any delay, race condition etc in Riak, or client library. that
would explain why that bucket property is not set?
During a test vnode transfer occurs but that should not matter I guess?

Regards
Daniel
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

