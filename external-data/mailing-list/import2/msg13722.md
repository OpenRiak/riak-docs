---
title: "Re: Riak can not start with SSL enable."
description: ""
project: community
lastmod: 2014-02-27T04:34:33-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13722"
mailinglist_parent_id: "msg13721"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2014-02-27T04:34:33-08:00
---


Hi Allen,

The problem there is deep in the backtrace: \*{error,eacces} \*indicates your
'internal.pem' file is not readable by the 'riak' user. One of these
commands might help:

sudo chown -R riak:riak /etc/riak/certs
sudo chmod -R 644 /etc/riak/certs/\*

Let us know if that works for you.


On Thu, Feb 27, 2014 at 3:46 AM, Allen Chen wrote:

>
> Hi All,
>
> I met similar issue with this thread, I knew it is old.
>
> http://lists.basho.com/pipermail/riak-users\_lists.basho.com/2012-October/009824.html
>
> But it seems happened on my new Debian 7.3(X86\_64) test box with
> riak 1.4.8-1(official build).
>
> Without those lines,
>
> -proto\_dist inet\_tls
> -ssl\_dist\_opt client\_certfile "{{platform\_etc\_dir}}/erlclient.pem"
> -ssl\_dist\_opt server\_certfile "{{platform\_etc\_dir}}/erlserver.pem"
>
> in my vm.args, everything looks ok.
> With such configuration, I got riak started failed but riak process
> running with errors as following(in the end of this mail).
>
> My certificate internal.pem is working on old box, debian 6.x with
> Riak-1.3.1.
> Any idea?
>
> Thanks.
> Allen Chen
>
>
>
>
> The error with SSL,
> >>>>>>>>
> \*2014-02-27 06:15:07.552 [error] <0.162.0> SSL: 1111:
> error:{try\_clause,{error,eacces}} /etc/riak/certs/internal.pem\*
> \* [{ssl\_manager,cache\_pem\_file,2,[{file,"ssl\_manager.erl"},{line,98}]},\*
> \* {ssl\_certificate,file\_to\_certificats,2,\*
> \* [{file,"ssl\_certificate.erl"},{line,111}]},\*
> \* {ssl\_connection,init\_certificates,6,\*
> \*
> [{file,"ssl\_connection.erl"},{line,1107}]},\*
> \*
> {ssl\_connection,ssl\_init,2,[{file,"ssl\_connection.erl"},{line,1062}]},\*
> \*
> {ssl\_connection,init,1,[{file,"ssl\_connection.erl"},{line,316}]},\*
> \*
> {gen\_fsm,init\_it,6,[{file,"gen\_fsm.erl"},{line,361}]},\*
> \*
> {proc\_lib,init\_p\_do\_apply,3,[{file,"proc\_lib.erl"},{line,227}]}]\*
>
> \* 2014-02-27
> 06:15:07.553 [error] <0.162.0> CRASH REPORT Process <0.162.0> with 0
> neighbours exited with reason: ecertfile in gen\_fsm:init\_it/6 line 371\*
> \* 2014-02-27
> 06:15:07.553 [error] <0.20.0> Supervisor ssl\_connection\_sup\_dist had child
> undefined started with {ssl\_connection,start\_link,undefined} at <0.162.0>
> exit with reason ecertfile in context child\_terminated\*
> \* 2014-02-27
> 06:15:07.559 [error] <0.167.0> SSL: 1111: error:{try\_clause,{error,eacces}}
> /etc/riak/certs/internal.pem\*
> \*
> [{ssl\_manager,cache\_pem\_file,2,[{file,"ssl\_manager.erl"},{line,98}]},\*
> \*
> {ssl\_certificate,file\_to\_certificats,2,\*
> \*
> [{file,"ssl\_certificate.erl"},{line,111}]},\*
> \*
> {ssl\_connection,init\_certificates,6,\*
> \*
> [{file,"ssl\_connection.erl"},{line,1107}]},\*
> \*
> {ssl\_connection,ssl\_init,2,[{file,"ssl\_connection.erl"},{line,1062}]},\*
> \*
> {ssl\_connection,init,1,[{file,"ssl\_connection.erl"},{line,316}]},\*
> \*
> {gen\_fsm,init\_it,6,[{file,"gen\_fsm.erl"},{line,361}]},\*
> \*
> {proc\_lib,init\_p\_do\_apply,3,[{file,"proc\_lib.erl"},{line,227}]}]\*
>
>
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>
>


-- 
Sean Cribbs 
Software Engineer
Basho Technologies, Inc.
http://basho.com/
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

