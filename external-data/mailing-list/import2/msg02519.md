---
title: "Re: Key Expiry in Riak"
description: ""
project: community
lastmod: 2011-03-02T12:52:00-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02519"
mailinglist_parent_id: "msg02518"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2011-03-02T12:52:00-08:00
---


Anthony,

Yes, you can set it at any point but your Riak nodes might need to be restarted.

Sean Cribbs 
Developer Advocate
Basho Technologies, Inc.
http://basho.com/

On Mar 2, 2011, at 3:50 PM, Anthony Molinaro wrote:

> Hi,
> 
> Is it possible to add an expiry\_secs after the fact? In that if I didn't
> set one originally for a bitcask backend can I add one now, or will I have
> to dump data if I do?
> 
> Since my understanding is that this value is used when bitcasks are
> compacted in order to remove old fields, I have a feeling you can set it
> at any point, but I want to make sure.
> 
> Thanks,
> 
> -Anthony
> 
> On Wed, Mar 02, 2011 at 09:13:27AM -0500, Sean Cribbs wrote:
>> Abhishek,
>> 
>> Mostly answered here: 
>> https://help.basho.com/entries/466512-how-can-i-automatically-expire-a-key-from-riak
>> 
>> If you use multi\_backend with several bitcask setups you can have both 
>> expiring data and normal persistent data. Here's an example of what you 
>> might put in app.config (inside the riak\_kv section):
>> 
>> {storage\_backend, riak\_kv\_multi\_backend},
>> {multi\_backend\_default, <<"bitcask">>},
>> {multi\_backend, [
>> {<<"bitcask">>, riak\_kv\_bitcask\_backend, []},
>> {<<"sessions>>, riak\_kv\_bitcask\_backend, [{expiry\_secs, 7200}, 
>> {data\_root, "data/sessions"}]}
>> ]},
>> 
>> The key pieces there is expiry\_secs = 7200 (2 hours), and the separate root 
>> for the data files.
>> 
>> Sean Cribbs 
>> Developer Advocate
>> Basho Technologies, Inc.
>> http://basho.com/
>> 
>> 
>> P.S. If you haven't seen the Knowledge Base yet, check it out: 
>> https://help.basho.com/forums/270314-riak. You can also search the KB from 
>> the #riak IRC channel using "!kb ".
>> 
>> On Mar 2, 2011, at 8:21 AM, Abhishek Kona wrote:
>> 
>>> Hi
>>> 
>>> Is it possible to have a expiry (ttl) on RIAK keys per bucket (or per key).
>>> Or is there any other way that I am missing.
>>> 
>>> This would be greatly useful for maintaining Session data in RIAK, as 
>>> expired session data can be auto cleared.
>>> 
>>> -Abhishek Kona
>>> 
>>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>>> riak-users mailing list
>>> riak-users@lists.basho.com
>>> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>> 
>> 
>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>> riak-users mailing list
>> riak-users@lists.basho.com
>> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
> 
> -- 
> ------------------------------------------------------------------------
> Anthony Molinaro 


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

