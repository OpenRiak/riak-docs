---
title: "Re: Change data directory"
description: ""
project: community
lastmod: 2014-04-04T13:35:26-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14008"
mailinglist_parent_id: "msg14007"
author_name: "Jordan West"
project_section: "mailinglistitem"
sent_date: 2014-04-04T13:35:26-07:00
---


Nabil,

Sorry for not catching this before: can you try adding o+x (or o+rx) to
/home/nabil? The riak user is unable to traverse further in the tree
otherwise. If this is your personal machine, you may want to consider
moving the data directory to another path so you don't need to relax the
permissions on your home folder.

Cheers,
Jordan


On Fri, Apr 4, 2014 at 1:03 PM, Nabil Hassein  wrote:

> I installed the binary via yum.
>
>
> On Fri, Apr 4, 2014 at 4:02 PM, Jordan West  wrote:
>
>> how are you starting Riak? Did you install a package or are you building
>> from source?
>>
>> Jordan
>>
>>
>> On Fri, Apr 4, 2014 at 1:00 PM, Nabil Hassein wrote:
>>
>>> Even after a manual `mkdir /home/nabil/riak/ring && sudo chown riak:riak
>>> /home/nabil/riak/ring`, I still can't start the riak service.
>>>
>>>
>>> On Fri, Apr 4, 2014 at 3:58 PM, Jordan West  wrote:
>>>
>>>> Hey Nabil,
>>>>
>>>> Riak is having trouble finding or creating the ring directory. From
>>>> your logs:
>>>>
>>>> 2014-04-04 15:44:41.655 [critical] <0.147.0>@riak\_core\_app:start:54
>>>> Ring state directory "/home/nabil/riak/ring" does not exist, and could not
>>>> be created: "permission denied"
>>>>
>>>> Jordan
>>>>
>>>>
>>>> On Fri, Apr 4, 2014 at 12:55 PM, Nabil Hassein wrote:
>>>>
>>>>> Thanks very much for your prompt replies. I am using the bitcask
>>>>> backend. For now I am just trying to use /home/nabil/riak as the directory
>>>>> as I test this out on my development machine, although naturally that is
>>>>> not the ultimate destination we have in mind for our production servers.
>>>>>
>>>>> I have changed all of the paths quite similarly to the linked gist.
>>>>> There are indeed errors in the Riak logs; I've pasted them here:
>>>>> http://pastebin.com/tQer69eJ
>>>>>
>>>>> As you can see many of them appear to related to file permissions, but
>>>>> like I said I've chowned the directory to the riak user and group:
>>>>>
>>>>> [nabil@localhost riak]$ pwd
>>>>> /home/nabil/riak
>>>>> [nabil@localhost riak]$ ls -latrR .
>>>>> .:
>>>>> total 8
>>>>> drwxrwxr-x. 2 riak riak 4096 Apr 4 11:59 .
>>>>> drwx------. 62 nabil nabil 4096 Apr 4 15:51 ..
>>>>>
>>>>>
>>>>> Any additional advice you can give would be much appreciated. Thanks
>>>>> again for what you've already told me.
>>>>>
>>>>> Nabil
>>>>>
>>>>>
>>>>> On Fri, Apr 4, 2014 at 3:15 PM, Jordan West  wrote:
>>>>>
>>>>>> https://gist.github.com/jrwest/a37e3fff5917f0bd44eb is a recent
>>>>>> app.config I used on a 1.4.x cluster w/ CentOS. Look at the paths that
>>>>>> start w/ "/data/riak". If you're still having issues, or you have changed
>>>>>> all the paths: are there any errors in the Riak logs?
>>>>>>
>>>>>> Cheers,
>>>>>> Jordan
>>>>>>
>>>>>>
>>>>>> On Fri, Apr 4, 2014 at 12:05 PM, Nabil Hassein 
>>>>>> wrote:
>>>>>>
>>>>>>> Hello all,
>>>>>>>
>>>>>>> I'm trying to change /etc/riak/app.config to store data in a
>>>>>>> directory of my choosing rather than the default one. Simply changing
>>>>>>> platform\_data\_dir to another directory yields errors, even after a 
>>>>>>> `chown
>>>>>>> -R riak:riak` of the relevant directory; the service starts but any
>>>>>>> attempts to use the REST API yield 500 Internal Server Errors. Trying to
>>>>>>> change other things, such as the ring\_state\_dir, generally results in 
>>>>>>> riak
>>>>>>> failing to start at all.
>>>>>>>
>>>>>>> Does anyone have an example configuration where data is stored in a
>>>>>>> different directory to the defaults, or advice about where I might be 
>>>>>>> going
>>>>>>> wrong?
>>>>>>>
>>>>>>> I'm using a binary install of riak 1.4.8 on CentOS, if that's
>>>>>>> relevant.
>>>>>>>
>>>>>>> Thanks,
>>>>>>> Nabil
>>>>>>>
>>>>>>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>>>>>>> riak-users mailing list
>>>>>>> riak-users@lists.basho.com
>>>>>>> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>>>>>>>
>>>>>>>
>>>>>>
>>>>>
>>>>
>>>
>>
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

