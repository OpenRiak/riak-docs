---
title: "Re: Memory backend doesn't work (with multi backend)?"
description: ""
project: community
lastmod: 2016-06-24T01:25:10-0700
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17494"
mailinglist_parent_id: "msg17493"
author_name: "Nagy, Attila"
project_section: "mailinglistitem"
sent_date: 2016-06-24T01:25:10-0700
---



Hi,

On 06/23/2016 08:05 PM, Luke Bakken wrote:

I think the documentation for multi backend could use some
improvement. Once you configure Riak to use the "multi" storage
backend, you must then \*name\* backends to be used by your bucket
types:

Here is a configuration that you can use, that would create two
backends, one using the memory backend that is \*named\*
"my\_memory\_backend", and one using the leveldb backend that is named
"my\_leveldb\_backend":

In riak.conf:

storage\_backend = multi
multi\_backend.my\_memory\_backend.storage\_backend = memory
multi\_backend.my\_leveldb\_backend.storage\_backend = leveldb

The following is an example of setting a leveldb-specific setting for
the "my\_leveldb\_backend" named backend:

multi\_backend.my\_leveldb\_backend.leveldb.maximum\_memory.percent = 70

According to this, my memory\_backend.max\_memory\_per\_vnode setting should 
look like this, right?


multi\_backend.my\_memory\_backend.storage\_backend = memory
multi\_backend.my\_memory\_backend.memory\_backend.max\_memory\_per\_vnode = 1G

Which gives:
10:20:08.249 [error] Error generating configuration in phase 
transform\_datatypes
10:20:08.249 [error] Error transforming datatype for: 
multi\_backend.my\_memory\_backend.memory\_backend.max\_memory\_per\_vnode


Trying:
multi\_backend.my\_memory\_backend.max\_memory\_per\_vnode = 1G
yields:
10:21:33.109 [error] You've tried to set 
multi\_backend.my\_memory\_backend.max\_memory\_per\_vnode, but there is no 
setting with that name.

10:21:33.109 [error] Did you mean one of these?
10:21:33.204 [error] multi\_backend.$name.memory\_backend.max\_memory\_per\_vnode
10:21:33.204 [error] memory\_backend.max\_memory\_per\_vnode
10:21:33.204 [error] multi\_backend.$name.leveldb.maximum\_memory.percent



\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

