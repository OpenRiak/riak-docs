---
title: "Re: 50-100 ops/sec on a 5 Node cluster"
description: ""
project: community
lastmod: 2012-06-26T09:29:17-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07790"
mailinglist_parent_id: "msg07789"
author_name: "Jeremiah Peschka"
project_section: "mailinglistitem"
sent_date: 2012-06-26T09:29:17-07:00
---


Not being familiar with basho bench, these might seem like stupid
questions, but here goes:

What are the sizes of the operations that you're performing?
How have you configured your EBS storage?

A single EBS volume can only perform about 100 I/O operations per second,
give or take. A single host in AWS has a 1 gigabit ethernet connection.
That means every guest on the host has, at most, a theoretical maximum of
125MB/s of throughput for both incoming \*and\* outgoing data transfer. Due
to TCP/IP overhead, this is closer to 70-80MB/s.

If you're writing a lot of small items and causing flushes to disk (DW >
0), then there's your problem.
If you're writing a lot of large items, there's your problem.

If not, please see the previous emails from Basho employees, who are much
smarter than me. :)
---
Jeremiah Peschka
Managing Director, Brent Ozar PLF, LLC


On Tue, Jun 26, 2012 at 9:00 AM, Reid Draper  wrote:

>
> On Jun 26, 2012, at 11:48 AM, David Smith wrote:
>
> > What does your basho\_bench config file look like?
> >
> > Seeing a low number of ops/sec is usually an indicator that you're
> > hitting a bottleneck on the I/O path -- typically due to random reads.
> > LevelDB has a number of characteristics that can make this worse --
> > what happens if you use bitcask?
> >
> > D.
> >
> > On Tue, Jun 26, 2012 at 4:57 AM, Yousuf Fauzan 
> wrote:
> >> Hello,
> >>
> >> Here is my setup of Riak 1.1.4
> >>
> >> 5 Nodes
> >> ami-a29943cb (EC2 AMI)
> >> m1.large (7.5GB Ram, 4 EC2 compute instances)
> >> EBS storage
> I'd recommend giving ephemeral storage a shot as well. It tends to have
> significantly less variable performance than EBS.
> >> LevelDB backend
> >> Python Client with Protobuf (on a separate machine)
> >>
> >> While loading data I am getting around 50 ops/sec.
> >>
> >> I tried running basho benchmark on the setup and it showed 100 ops/sec
> >> throughput.
> >>
> >> After talking to people or Riak IRC, I realized that upwards of 1.5K
> ops/sec
> >> is what I should be getting.
> >>
> >> Could anyone help me in figuring out what I am doing wrong?
> >>
> >>
> >> Thanks,
> >>
> >> Yousuf
> >>
> >>
> >> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> >> riak-users mailing list
> >> riak-users@lists.basho.com
> >> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
> >>
> >
> >
> >
> > --
> > Dave Smith
> > VP, Engineering
> > Basho Technologies, Inc.
> > diz...@basho.com
> >
> > \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> > riak-users mailing list
> > riak-users@lists.basho.com
> > http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

