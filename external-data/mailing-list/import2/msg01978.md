---
title: "Re: Riak Recap for Jan. 12 - 13."
description: ""
project: community
lastmod: 2011-01-14T15:25:16-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01978"
mailinglist_parent_id: "msg01977"
author_name: "Ryan Zezeski"
project_section: "mailinglistitem"
sent_date: 2011-01-14T15:25:16-08:00
---


On Fri, Jan 14, 2011 at 6:21 PM, Ryan Zezeski  wrote:

>
> On Fri, Jan 14, 2011 at 5:46 PM, Mark Phillips  wrote:
>>
>>
>> 2) seancribbs and jiboumans had a quick chat about Read Repair in
>> action (via #riak)
>>
>> \* Gist here ---> https://gist.github.com/780363
>>
>> \* More on Read Repair on the wiki -
>> http://wiki.basho.com/Riak-Glossary.html#Read-Repair
>>
>>
> Sean, could you please clarify two points for me.
>
> 1) Read Repair
>
> Quote from the wiki -- "Read repair 
> occurs
> when a successful read occurs â€” that is, the quorum was met â€” but not all
> replicas from which the object was requested agreed on the value"
>
> However, the OP said his get did not work the first time, so wouldn't that
> mean the quorum wasn't met and therefore no read repair should have
> occurred? That doesn't seem right but that's what I take away from the wiki
> definition.
>

Crap, the second after I hit "send" the lightbulb goes on! Why is that?

The quorum \_was\_ met (all vnodes just migrated to the one machine) but since
some of them were fail-overs they didn't have the value yet (or the wrong
value)? In this case a read repair happened and subsequent gets worked.

I'm still dark on the second question.


> 2) Why doesn't r=1 work?
>
> In the IRC session, you claimed that r=1 would not have helped this
> problem. Just like the OP, this confused me. You then went on to say it
> was because of some optimization and then mentioned a "basic quorum."
>
> I took a few minutes to think about this and the only conclusion I came to
> is that when r=1 you will treat the first response as the final response,
> and in this case the notfound response will always come back first? I'm not
> sure if what I just said makes sense but I would have expected r=1 to work,
> just like the OP. I'll admit that I still haven't read all the wiki docs
> yet (but I've read Read Repair 3 times now), so I'd be happy to hear RTFM.
>
> -Ryan
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

