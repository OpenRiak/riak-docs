---
title: "Re: error on object retrieval: Cannot send another request while one	is in progress"
description: ""
project: community
lastmod: 2015-09-23T16:08:55-0700
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16565"
mailinglist_parent_id: "msg16564"
author_name: "Hristo Asenov"
project_section: "mailinglistitem"
sent_date: 2015-09-23T16:08:55-0700
---


I am using riack (https://github.com/trifork/riack 
) as a client. I started using it before 
riak-c-client had been released. The sequence of events for the client is:

1. Perform get/set: only the get succeeds
2. Perform get/set again: neither get nor set succeeds
3. Perform get/set third time: riack crashes, i.e. a crash occurs somewhere 
before the get functions returns

Sargun, I meant that the client process crash, not the riak framework. The riak 
processes remain operational while its clients keep crashing.

- Hristo

> On Sep 23, 2015, at 6:28 PM, Sargun Dhillon  wrote:
> 
> if there is a failure, and leader is re-elected, the epoch of the ensemble 
> changes, so you may have to refetch the object to get a new causal context in 
> order to perform another write. If this occurs, you should be able to heal by 
> doing another read, modify, write cycle.
> 
> On Wed, Sep 23, 2015 at 3:21 PM, Luke Bakken  > wrote:
> Hristo,
> 
> How are you communicating with Riak? Which client library is being used?
> --
> Luke Bakken
> Engineer
> lbak...@basho.com 
> 
> On Wed, Sep 23, 2015 at 3:18 PM, Hristo Asenov
> > wrote:
> > Hello,
> >
> > I am using a strongly consistent bucket type. I need to simulate instances 
> > where a process can crash and recover. When a crash occurs, I cleanly 
> > disconnect and destroy the memory (through a signal handler).
> >
> > Sometimes, when process recovery occurs, performing a get on an object is 
> > successful, however a subsequent set with the Vector Clock from the 
> > previous get results in the error “Cannot send another request while one is 
> > in progress”. I found the error in riak\_api project, file 
> > riak\_api\_pb\_server.erl, but don’t really understand why the error gets 
> > thrown. Would someone be able to instruct me as to the cause of the error? 
> > I am using the current riak version from the main repository.
> >
> > - Hristo
> 
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com 
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com 
> 
> 

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

