---
title: "Error 500 while creating admin user in Riak-CS"
description: ""
project: community
lastmod: 2013-12-17T03:24:14-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13258"
author_name: "Holger Amberg"
project_section: "mailinglistitem"
sent_date: 2013-12-17T03:24:14-08:00
---


Hi,

i am trying to install riak-cs according to your cookbook but i am now
stuck at the admin user creation. I checked all config files, all ips do
match against each other. All services responding to ping requests. I have
no idea at the moment, maybe someone is able to assist me.

cat /etc/riak-cs/app.config | grep anonymous
 %% specifically dictates letting anonymous users to
 {anonymous\_user\_creation, true},

riak ping
pong
riak-cs ping
pong
stanchion ping
pong

curl -v -H 'Content-Type: application/json' -X POST
http://\*\*\*.22.\*\*\*.70:8080/riak-cs/user
--data '{"email":"riakad...@storage.test.org“, "name":"admin"}'
\* About to connect() to \*\*\*.22.\*\*\*.70 port 8080 (#0)
\* Trying \*\*\*.22.\*\*\*.70...
\* connected
\* Connected to \*\*\*.22.\*\*\*.70 (\*\*\*.22.\*\*\*.70) port 8080 (#0)
> POST /riak-cs/user HTTP/1.1
> User-Agent: curl/7.26.0
> Host: \*\*\*.22.\*\*\*.70:8080
> Accept: \*/\*
> Content-Type: application/json
> Content-Length: 58
>
\* upload completely sent off: 58 out of 58 bytes
\* additional stuff not fine transfer.c:1037: 0 0
\* HTTP 1.1 or later with persistent connection, pipelining supported
< HTTP/1.1 500 Internal Server Error
< Vary: Accept
< Server: Riak CS
< Location: http://\*\*\*.22.\*\*\*.70:8080/riak-cs/user
< Date: Tue, 17 Dec 2013 11:04:54 GMT
< Content-Type: text/html
< Content-Length: 170
<
\* Connection #0 to host \*\*\*.22.\*\*\*.70 left intact
500 Internal Server
ErrorInternal Server Error
=====================

The server
encountered an error while processing this request\* Closing
connection #0

Error.log:

2013-12-17 12:12:02.160 [error] <0.123.0> Lager event handler
error\_logger\_lager\_h exited with reason
{'EXIT',{{badmatch,["/riak-cs/user",{error,{error,function\_clause,[{riak\_cs\_json,get,[{error,decode\_failed},[{<<"name">>,<<"email">>}]],[{file,"src/riak\_cs\_json.erl"},{line,62}]},{riak\_cs\_wm\_user,accept\_json,2,[{file,"src/riak\_cs\_wm\_user.erl"},{line,117}]},{webmachine\_resource,resource\_call,3,[{file,"src/webmachine\_resource.erl"},{line,186}]},{webmachine\_resource,do,3,[{file,"src/webmachine\_resource.erl"},{line,142}]},{webmachine\_decision\_core,resource\_call,1,[{file,"src/webmachine\_decisio..."},...]},...]}},...]},…}}

Thank you very much!

--
Holger
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

