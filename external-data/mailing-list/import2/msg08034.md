---
title: "Re: Java PB API: r-value exception"
description: ""
project: community
lastmod: 2012-07-23T10:17:44-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08034"
mailinglist_parent_id: "msg08032"
author_name: "Kaspar Thommen"
project_section: "mailinglistitem"
sent_date: 2012-07-23T10:17:44-07:00
---


Hi Brian,

Thanks for the clarification!

Kaspar
 On Jul 23, 2012 6:17 PM, "Brian Roach"  wrote:

> Hi Kaspar,
>
> In your first example, you're trying to permanently change the bucket's r
> parameter; createBucket() returns a WriteBucket which when executed writes
> these values to Riak. We currently don't have support for this in the
> protobuf API.
>
> In your DomainBucket example you're setting the r value for the individual
> read operations (which is supported via PB), rather than bucket parameter
> itself. It gets passed to the underlying StoreObject.
>
> Thanks,
> Brian Roach
>
>
> On Jul 21, 2012, at 6:45 AM, Kaspar Thommen wrote:
>
> > Hi,
> >
> > I'm confused about the r-value when using the Java API. When I call:
> >
> > Bucket bucket =
> RiakFactory.pbcClient().createBucket("myBucket").r(2).execute();
> >
> > I get the following exception:
> >
> > com.basho.riak.client.bucket.UnsupportedPropertyException: r not
> supported for PB
> > at
> com.basho.riak.client.bucket.WriteBucket.httpOnly(WriteBucket.java:539)
> > at com.basho.riak.client.bucket.WriteBucket.r(WriteBucket.java:332)
> >
> > However, when I run this:
> >
> > DomainBucket myDomainBucket =
> DomainBucket.builder(RiakFactory.pbcClient().createBucket("myBucket").execute(),
> MyDomainObject.class).r(2).build();
> >
> > and then later call any of the CRUT operations on that domain bucket I
> get no exception. Why would I get it on the low-level Bucket API but not on
> the high-level DomainBucket API?
> >
> > Thanks,
> > Kaspar
> >
> > \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> > riak-users mailing list
> > riak-users@lists.basho.com
> > http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

