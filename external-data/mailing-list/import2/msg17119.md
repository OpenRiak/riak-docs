---
title: "Re: Yokozuna inconsistent search results"
description: ""
project: community
lastmod: 2016-03-05T12:56:15-0800
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17119"
mailinglist_parent_id: "msg17096"
author_name: "Oleksiy Krivoshey"
project_section: "mailinglistitem"
sent_date: 2016-03-05T12:56:15-0800
---


Hi Magnus,

You are right, there was a Solr indexing issue:

2016-03-01 09:00:17,640 [ERROR] @SolrException.java:109
org.apache.solr.common.SolrException: Invalid Date String:'Invalid date'

However I'm struggling to find the object that causes this, the error
message doesn't contain the object id and the bucket is really huge. Can
you suggest the way to find the object that causes Solr exception?

Thanks!

On 29 February 2016 at 10:28, Magnus Kessler  wrote:
>
>> Hi Oleksiy,
>>
>> there are two partitions on the node that haven't seen their AAE tree
>> rebuilt in a long time. The reason for this is not clear at the moment,
>> although we have seen this happening when a partition contains data that
>> for some reason cannot be indexed with the configured Solr schema.
>>
>> Please run on the 'riak attach' console:
>>
>> riak\_core\_util:rpc\_every\_member\_ann(yz\_entropy\_mgr, expire\_trees, [], 5000).
>>
>> Afterwards exit the console with "Ctrl-G q".
>>
>> The AAE trees should start to be rebuilt shortly after. With default
>> settings, on a cluster with ring size 64 the whole process should finish in
>> about 1 day and any missing but indexable data should appear in all
>> assigned Solr instances. During this time you may still observe
>> inconsistent search results due to the way the coverage query is performed.
>> Keep an eye open for any errors from one of the yz\_ modules in the logs
>> during this time.
>>
>> Please let us know if the Search AAE trees can be rebuilt successfully
>> and if this solved your issue.
>>
>> Kind Regards,
>>
>> Magnus
>>
>>
>>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

