---
title: "Cluster restarted and doesn’t respond to queries"
description: ""
project: community
lastmod: 2013-12-23T09:39:05-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13324"
author_name: "Justin Lambert"
project_section: "mailinglistitem"
sent_date: 2013-12-23T09:39:05-08:00
---


I have a machine running 3 risk nodes (1.3.1) on it as a development test
cluster. Today I updated the machine to CentOS 6.5 (from 6.4) and rebooted
the machine and now querying the node (testing with curl) doesn’t ever
return. The only issue I can find is from riak-admin diag (which I don’t
think is entirely unexpected given 3 nodes on a 3 node cluster):

# ./riak-admin dig
17:23:49.581 [warning] The following preflists do not satisfy the n\_val:
[[{1415829711164312202009819681693899175291684651008,'
d...@ue1a-devdb02.ineu.us
'},{1438665674247607560106752257205091097473808596992,'
d...@ue1a-devdb02.ineu.us'},{0,'d...@ue1a-devdb02.ineu.us
'}],[{1438665674247607560106752257205091097473808596992,'
d...@ue1a-devdb02.ineu.us'},{0,'d...@ue1a-devdb02.ineu.us
'},{22835963083295358096932575511191922182123945984,'
d...@ue1a-devdb02.ineu.us'}]]


riak-admin test is successful:
./riak-admin test
Successfully completed 1 read/write cycle to 'd...@ue1a-devdb02.ineu.us’

All nodes are in cluster and agreed upon:
./riak-admin member-status
================================= Membership
==================================
Status Ring Pending Node
-------------------------------------------------------------------------------
valid 34.4% -- 'd...@ue1a-devdb02.ineu.us'
valid 32.8% -- 'd...@ue1a-devdb02.ineu.us'
valid 32.8% -- 'd...@ue1a-devdb02.ineu.us'
-------------------------------------------------------------------------------
Valid:3 / Leaving:0 / Exiting:0 / Joining:0 / Down:0

./riak-admin ringready
TRUE All nodes agree on the ring ['d...@ue1a-devdb02.ineu.us',
 'd...@ue1a-devdb02.ineu.us',
 'd...@ue1a-devdb02.ineu.us’]


I do see some errors in the error.log, but the referenced directories don’t
appear to exist:
2013-12-23 16:52:33.290 [error]
<0.1721.0>@riak\_kv\_bitcask\_backend:move\_unused\_dirs:607 Failed to move
unused data directory
"./data/leveldb/388211372416021087647853783690262677096107081728". Reason:
eexist


I’m at a loss of what else to do to troubleshoot this. Has anyone else run
into anything like this or have some other troubleshooting things I can
look at?

Thanks,
Justin
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

