---
title: "Re: riak java client"
description: ""
project: community
lastmod: 2011-11-17T08:20:36-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05635"
mailinglist_parent_id: "msg05633"
author_name: "Russell Brown"
project_section: "mailinglistitem"
sent_date: 2011-11-17T08:20:36-08:00
---



On 17 Nov 2011, at 16:03, sergey wrote:

> Ok,
> If I do curl -X PUT -H "Content-Type: application/json;charset=utf-8", Riak 
> index for search and search work right.
> I use Riak 1.0.1-1 (riak\_1.0.1-1\_amd64.deb on Ubuntu).
> I use utf-8 java string.

Yes. We have a bug. Sorry. https://issues.basho.com/show\_bug.cgi?id=1288 has 
the details. I'm working on a patch.

The RJC PB client does not correctly split content-type and charset when it 
creates the PB message for Riak. As a work around you can

1. Use the HTTP driver
2. manually set the ContentType on the riakObject after building it 
(riakObject.setContentType(Constants.CTYPE\_JSON))

I'll let the list now when the patch is done.

Cheers

Russell

> 
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

