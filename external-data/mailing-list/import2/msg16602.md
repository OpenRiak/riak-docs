---
title: "Re: adding auth user not valid"
description: ""
project: community
lastmod: 2015-10-02T20:30:02-0700
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16602"
mailinglist_parent_id: "msg16572"
author_name: "Outback Dingo"
project_section: "mailinglistitem"
sent_date: 2015-10-02T20:30:02-0700
---


On Tue, Sep 29, 2015 at 11:01 AM, Shunichi Shinohara 
wrote:

> Hi Outback,
>
> Sorry for very late response.
> It seems that riak-cs doesn't/can't communicate with stanchion node.
> There are a couple of possible reasons:
>
> - admin.key and admin.secret should be set both in riak-cs and stanchion
> - stanchion\_host should be set properly as stanchion node's listen
> configuration
> - servers that riak-cs node and stanchion nodes are running should be
> communicate by TCP.
>
> I think packet capture (by tcpdump or wireshark or...) is useful to
> investigate the communication between riak-cs and stanchion.
>
> Thanks,
> Shino
>


more like ENOTENOUGHNODES..... pretty perplexing to chase down when you
think somethings running and its not....
anyway i got it sorted out thanks,.



>
> 2015-09-15 13:21 GMT+09:00 Outback Dingo :
> > seems the docs with auth creds is invalid... or im still broken...
> >
> >
> >
> > curl -XPOST http://localhost:8080/riak-cs/user \
> > -H 'Content-Type: application/json' \
> > -d '{"email":"ad...@admin.com", "name":"admin"}'
> >
> >
> > returns
> >
> > curl -H 'Content-Type: application/json' -X POST
> > http://localhost:8080/riak-cs/user --data '{"email":"ad...@admin.com",
> > "name":"admin"}'
> >
> > 500 Internal Server
> > ErrorInternal Server Error
=====================

The server
> > encountered an error while processing this
> > requestroot@vmbsd:/usr/local/etc/riak-cs #
> >
> > and the log shows
> > 2015-09-15 14:20:33.678 [error] <0.9846.4> Webmachine error at path
> > "/riak-cs/user" :
> >
> {error,{error,{badmatch,{error,malformed\_xml}},[{riak\_cs\_s3\_response,xml\_error\_code,1,[{file,"src/riak\_cs\_s3\_response.erl"},{line,335}]},{riak\_cs\_s3\_r
> >
> esponse,error\_response,1,[{file,"src/riak\_cs\_s3\_response.erl"},{line,249}]},{riak\_cs\_wm\_user,accept\_json,2,[{file,"src/riak\_cs\_wm\_user.erl"},{line,119}]},{webmachine\_resource,resource\_call,3,[{file,"src/webmachine\_resource.erl"},{line,1
> >
> 86}]},{webmachine\_resource,do,3,[{file,"src/webmachine\_resource.erl"},{line,142}]},{webmachine\_decision\_core,resource\_call,...},...]}}
> > in riak\_cs\_s3\_response:xml\_error\_code/1 line 335
> >
> >
> > \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> > riak-users mailing list
> > riak-users@lists.basho.com
> > http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
> >
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

