---
title: "Re: ring resizing feature?"
description: ""
project: community
lastmod: 2013-09-18T08:48:51-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12303"
mailinglist_parent_id: "msg12295"
author_name: "Jordan West"
project_section: "mailinglistitem"
sent_date: 2013-09-18T08:48:51-07:00
---


Hey PN,

I'm the engineer at Basho working on Ring Resizing, primarily. I've left
some comments inline.


On Wed, Sep 18, 2013 at 12:46 AM,  wrote:

>
> Dear all,
> After a quick glimpse at Riak, I must say I like it: DHT with masterless
> design and gossiping protocol, that is appealing. More than maintainability
> or configurability, I am interested in scalability. I have looked at the
> node adding process for fine scaling, but for scaling big (over the long
> term) the necessity of resizing the ring (in order to double the number of
> partitions) seems unavoidable to me.
>

This is certainly one of the use cases the feature is meant to address.
However, we suggest that it is your "last resort" scaling feature -- if
your cluster can still handle adding nodes that's a better option. But at
some point, yes, doubling or quadrupling the ring size can be useful,
especially if you started with a small cluster. Its, not useful, however,
for e.g. doubling the number of partitions during peak hours for more
concurrency and then shrinking back down again.


> - is this feature officially released as part of 1.4?
>

The feature was released as experimental in Riak 1.4. The move out of
experimental is slated for the next release.


> - if yes, is it a stable feature, is it ready for production? if not, is
> it still under ongoing development?
>
- if it was released as unstable, what is your experience with it?
>


For open source, using this feature w/ the 1.4 release is not suggested for
production use. That should change with the next release. This is why there
is no documentation.

We are currently working with a few customers, who have clusters suited for
resizing, at various levels of testing/production.

It is currently under further development. Immediate work involves bug
fixes and minor improvements. Longer term improvements will focus on
reducing the overhead/cost of the operation.


> - in your opinion, can the problem be simplified if we only consider
> scaling out by doubling the ring size?
>

The problem is pretty much the same whether you are expanding by a factor
of 2 or 4 (same for shrinking). The larger the growth/shrink factor the
slower the operation will be.

Also, independently of ring resizing, what do you consider the current
> limits of ring\_creation\_size? I have seen mentioned that 2048 and higher
> could importantly increase the volume of gossiping, what is your experience
> with it?
> I hope you will be kind enough to provide me with some enlightenments.
> Kind regards.
> PN
>

There we some changes recently to riak\_core to improve its handling of
large rings [1]. The benchmarks there tested up to 16384, however, i
believe that was for illustration purposes. Most large clusters we see use
1024. The theoretical maximum most likely depends on many things.

Cheers,
Jordan


>
>
>
> Une messagerie gratuite, garantie à vie et des services en plus, ça vous
> tente ?
> Je crée ma boîte mail www.laposte.net
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

