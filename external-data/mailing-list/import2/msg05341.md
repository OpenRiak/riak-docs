---
title: "Re: multiple map functions query"
description: ""
project: community
lastmod: 2011-10-28T07:15:01-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05341"
mailinglist_parent_id: "msg05339"
author_name: "Jeremiah Peschka"
project_section: "mailinglistitem"
sent_date: 2011-10-28T07:15:01-07:00
---


Multiple functions of any phase type are allowed. They're performed on the 
coordinating node and you can force Riak to wait for all data to arrive before 
perform a reduce [1].

There's a thread from June 2010 talking about working with multiple Map phases 
[2] as well as this delightful Basho blog post [3].

[1]: http://wiki.basho.com/MapReduce.html#Configuration-Tuning-for-Reduce-Phases
[2]: 
http://lists.basho.com/pipermail/riak-users\_lists.basho.com/2010-June/001418.html
[3]: 
http://basho.com/blog/technical/2010/04/14/practical-map-reduce:-forwarding-and-collecting/
---
Jeremiah Peschka - Founder, Brent Ozar PLF, LLC
Microsoft SQL Server MVP

On Oct 28, 2011, at 7:05 AM, Dmitry Demeshchuk wrote:

> Why do you need such a way?
> 
> If you have some certain list of operations to perform on each object,
> you can just combine them inside a body of a single map function.
> 
> If this list is dynamic and may vary depending on a situation â€“ you
> can pass the list of functions to execute as the second parameter to
> the map function.
> 
> On the contrary, reduce functions cannot be combined like that â€“ you
> generally need to gather all the results of a previous reduce to get a
> consistent result of the next one. So, multiple reduce functions are
> not just allowed, but sometimes even necessary.
> 
> On Fri, Oct 28, 2011 at 5:59 PM, Lyes zaiko  wrote:
>> Hi all!
>> I want to execute a mapreduce query, in erlang, that contains two map phases
>> such that the Map2 function takes the result of the Map1 function as input.
>> Is it possible and if, what must be the return value of each map phase
>> Thank you!
>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>> riak-users mailing list
>> riak-users@lists.basho.com
>> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>> 
>> 
> 
> 
> 
> -- 
> Best regards,
> Dmitry Demeshchuk
> 
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

