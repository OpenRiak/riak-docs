---
title: "Re: List keys, new format, keys=stream"
description: ""
project: community
lastmod: 2011-10-20T09:51:24-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05211"
mailinglist_parent_id: "msg05210"
author_name: "Jonathan Langevin"
project_section: "mailinglistitem"
sent_date: 2011-10-20T09:51:24-07:00
---


Perfect, thanks!
On Oct 20, 2011 12:48 PM, "Gordon Tillman"  wrote:

> On Oct 20, 2011, at 11:40 , Jonathan Langevin wrote:
>
> Thanks Gordon.
>
> So what is the recommended answer to this? Just skip the empty arrays?
>
> That is exactly what I am doing with my "dump bucket" code - I have not
> noticed so large a percentage of empty keys arrays coming back in the
> chuncked encoding, however, I often do get some and that is even w/o having
> done any deletions.
>
> --gordon
>
> I'm asking, as I'm extending my php client to support streaming, and want
> to make sure we code for this properly.
>
> Thanks!
> On Oct 20, 2011 12:27 PM, "Gordon Tillman"  wrote:
>
>> Jonathan that is correct - it is just a result of the chunked encoding.
>>
>> --gordon
>>
>> On Oct 20, 2011, at 11:02 , Jonathan Langevin wrote:
>>
>> If I run a curl request to pull back a list of keys, streamed, the output
>> has multiple empty arrays, like so:
>>
>> $ curl -i http://localhost:8098/buckets/User/keys?keys=stream
>> HTTP/1.1 200 OK
>> Vary: Accept-Encoding
>> Transfer-Encoding: chunked
>> Server: MochiWeb/1.1 WebMachine/1.9.0 (participate in the frantic)
>> Date: Thu, 20 Oct 2011 15:58:54 GMT
>> Content-Type: application/json
>>
>>
>> {"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":["hmay"]}{"keys":[]}{"keys":["jlangevin"]}{"keys":["student"]}{"keys":[]}{"keys":[]}{"keys":["rmay"]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":["eturner"]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":["kbrintle"]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":["admin"]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":["instructor"]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}
>>
>>
>> I assume this is a result of the chunked encoding? Or is this reflecting
>> empty results for keys that were deleted in the past?
>>
>> Just a note, this is a single-node cluster, with r,w,dw,nval=1
>>
>> 
>> \* Jonathan Langevin
>> Manager, Information Technology
>> Loom Inc.
>> Wilmington, NC: (910) 241-0433 - jlange...@loomlearning.com -
>> www.loomlearning.com - Skype: intel352 \*
>>
>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>> riak-users mailing list
>> riak-users@lists.basho.com
>> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>>
>>
>>
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

