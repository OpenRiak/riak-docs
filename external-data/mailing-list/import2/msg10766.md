---
title: "Re: How to add a secondary index with the Java client"
description: ""
project: community
lastmod: 2013-04-08T14:50:08-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg10766"
mailinglist_parent_id: "msg10758"
author_name: "Brian Roach"
project_section: "mailinglistitem"
sent_date: 2013-04-08T14:50:08-07:00
---


Jeff,

If you're just passing in an instance of the core Java HashMap ... you can't.

The way the default JSONConverter works for metadata (such as indexes)
is via annotations.

The object being passed in needs to have a field annotated with
@RiakIndex("index\_name"). That field can be a Long/Set or
String/Set (for \_int and \_bin indexes respectively).

These are not converted to JSON so they won't affect your serialized
data. You can have multiple fields for multiple indexes.

You don't have to append "\_int" or "\_bin" to the index name in the
annotation - it's done automatically based on the type.

Easiest thing to do woud be to extend HashMap and simply add the
annotated field(s).

Thanks,
\_Roach

On Mon, Apr 8, 2013 at 2:56 PM, Jeff Peck  wrote:
> Hello,
>
> I have been looking through the documentation for an example of how to add a 
> secondary index in Riak, using the Java client.
>
> I am currently storing my object (which is a HashMap) like this:
>
> bucket.store(key, docHashMap).execute();
>
> What would I need to do to add an index to that object before it gets stored?
>
> Thanks,
> Jeff
>
>
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

