---
title: "Re: [ANN] riak-js v0.10.0"
description: ""
project: community
lastmod: 2013-05-03T10:09:43-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11011"
mailinglist_parent_id: "msg11010"
author_name: "Sebastian Cohnen"
project_section: "mailinglistitem"
sent_date: 2013-05-03T10:09:43-07:00
---


Not really public, but not very secret either ;) Take a look 
https://gist.github.com/tisba/5511388

It's based on the request npm package (version 2.12.0). I added a close 
function to make it easier when playing around with it and for testing.


Best

Sebastian

On 03.05.2013, at 19:04, Mathias Meyer  wrote:

> Sebastian,
> 
> Is the code that includes the keep alive agent private? Would certainly love 
> to include one as a default, if you'd like to contribute it.
> 
> Cheers, Mathias
> 
> 
> 
> On Friday, 3. May 2013 at 18:51, Sebastian Cohnen wrote:
> 
>> Sure, see https://gist.github.com/tisba/5511106
>> 
>> The agent is based on the keep alive capable agent included in 
>> https://github.com/mikeal/request. In a more recent version this was 
>> extracted to https://github.com/mikeal/forever-agent, but I haven't used it 
>> since.
>> 
>> On 03.05.2013, at 18:44, Mathias Meyer  wrote:
>> 
>>> Sebastian,
>>> 
>>> I have yet to look into that, but if you'd be willing to share your hack, 
>>> maybe I could integrate that directly into riak-js? :)
>>> 
>>> Thanks!
>>> 
>>> Cheers, Mathias
>>> 
>>> 
>>> 
>>> On Friday, 3. May 2013 at 18:00, Sebastian Cohnen wrote:
>>> 
>>>> Hey Mathias,
>>>> 
>>>> this is awesome news, thanks for your work! I'll see what I can do to test 
>>>> the new version against production traffic.
>>>> 
>>>> One question though: I don't know the work of Andrew, but do you support 
>>>> real HTTP keep alive? (not node.js' pseudo keep alive). I had to implement 
>>>> my own http agent and inject it into a previous version of riak-js to get 
>>>> useful performance. I'd like to drop that hack.
>>>> 
>>>> 
>>>> Best
>>>> 
>>>> Sebastian
>>>> 
>>>> On 03.05.2013, at 17:55, Mathias Meyer  wrote:
>>>> 
>>>>> Heya,
>>>>> 
>>>>> Just shipped riak-js 0.10.0, with support for Protocol Buffers: 
>>>>> https://npmjs.org/package/riak-js
>>>>> 
>>>>> To use protobufs, specify a different API option when creating a client:
>>>>> 
>>>>> var riak = require('riak-js').getClient({api: 'protobuf'})
>>>>> 
>>>>> I'd love to have some feedback on how the protobuffs support works with 
>>>>> real workloads, if anyone feels like trying it out. Please report any 
>>>>> issues you're seeing: https://github.com/mostlyserious/riak-js/issues
>>>>> 
>>>>> Currently it's still using a single connection, but I'll work on adding 
>>>>> connection pooling next. Already merged Andrew J. Stone's support for 
>>>>> pooled HTTP connection into the current master, will work off that for 
>>>>> protobuffs as well.
>>>>> 
>>>>> Thanks to Nathan LaFreniere for his awesome riakpbc and protobuf.js 
>>>>> libraries, which helped me a lot!
>>>>> 
>>>>> Cheers, Mathias
>>>>> 
>>>>> 
>>>>> 
>>>>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>>>>> riak-users mailing list
>>>>> riak-users@lists.basho.com
>>>>> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>>> 
>> 
> 

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

