---
title: "Re: Cannot add node to cluster: ring_creation_size"
description: ""
project: community
lastmod: 2017-03-24T08:30:03-0700
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg18098"
mailinglist_parent_id: "msg18087"
author_name: "Scites, Troy"
project_section: "mailinglistitem"
sent_date: 2017-03-24T08:30:03-0700
---


Hi Magnus,

Thanks for the response. I should have mentioned in my original post that I am 
using version 1.5.1 of Riak-TS.

I attempted to run "riak status" as you recommended, but "status" does not seem 
to be an option for the riak command. I found the "risk config effective" 
command and all three servers have "ring\_size = 64". Any further suggestions?

Thanks in advance,
Troy
--
Troy J Scites
T&P - Internet Services - HSI
P: 703.939.8472
M: 703.300.2706
troy\_sci...@cable.comcast.com

From: Magnus Kessler >
Date: Saturday, March 11, 2017 at 6:12 AM
To: Troy Scites 
>
Cc: "riak-users@lists.basho.com" 
>
Subject: Re: Cannot add node to cluster: ring\_creation\_size

On 8 March 2017 at 19:45, Scites, Troy 
> wrote:
Hello,

I have 3 nodes in a development environment that were configured in a cluster. 
It was working fine until one of the servers crashed. I tried clearing the 
data directory and was able to removed the crashed node from the cluster. When 
I try to add the third node back in, I get the following error:
Failed: riak@ has a different ring\_creation\_size

All 3 nodes have ring\_size set to 64 in the riak.conf. Has anyone experienced 
this error and have a suggestion for adding the node back into the ring?

Thanks,
Troy


Hi Troy,

Please check with 'riak status | egrep "ring\_creation\_size|ring\_num\_partitions' 
what the different nodes believe to be their actual ring size.

As you have already wiped (some of) the data directory on the crashed node, you 
can stop this node and then it's safe to also remove the 'ring' directory if 
this node reports a different ring size. Afterwards, restart the node and 
attempt to join it to the rest of the cluster.

Please let me know if this solves your issue.

Kind Regards,

Magnus

--
Magnus Kessler
Client Services Engineer
Basho Technologies Limited

Registered Office - 8 Lincoln's Inn Fields London WC2A 3BP Reg 07970431
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

