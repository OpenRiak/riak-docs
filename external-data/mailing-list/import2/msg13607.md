---
title: "Re: Yokozuna and array of JSON documents"
description: ""
project: community
lastmod: 2014-02-06T15:02:58-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13607"
mailinglist_parent_id: "msg13606"
author_name: "Srdjan Pejic"
project_section: "mailinglistitem"
sent_date: 2014-02-06T15:02:58-08:00
---


Hey Ryan,

Yeah, I figured that out once I got the indexing to work properly. It was a
case of code outpacing the docs, because I was setting the prop yz\_index
rather than search\_index.

Thanks for the help. I do have a possible issue who yokozuna and map
reduce, but that's a separate thread.
On Feb 6, 2014 5:54 PM, "Ryan Zezeski"  wrote:

> Hi Srdjan,
>
>
> On Mon, Feb 3, 2014 at 12:06 PM, Srdjan Pejic  wrote:
>>
>>
>> [{"viewer\_id\_s"=>"004615eb-5c0e-4c4a-890c-c6fc29e3fc56",
>>> "video\_time\_i"=>475, "type\_s"=>"joined"},
>>> {"viewer\_id\_s"=>"635dcd2d-fdeb-46c1-9920-803ccdd6176b",
>>> "video\_time\_i"=>522, "type\_s"=>"joined"},
>>> {"viewer\_id\_s"=>"04b3cec7-6f37-4840-b1b6-eff4c16dd273",
>>> "video\_time\_i"=>159, "type\_s"=>"joined"},
>>> {"viewer\_id\_s"=>"6ce3da5f-b598-4b1c-abf0-38ba92fa15fb",
>>> "video\_time\_i"=>393, "type\_s"=>"upvote"}]
>>>
>>
>> My question to you is how can I search this array of documents through
>> Yokozuna/Solr? Currently, I get 0 results back, which I suspect is because
>> the actual JSON data is nested in an array and Yokozuna doesn't index that
>> in an expected way.
>>
>
> Assuming you are using the default schema, the issue is that you are using
> non multi-valued fields and thus this data is failing to index. If you
> check your console.log you should see errors with the string "multiple
> values encountered for non multiValued field" in them. Try changing your
> field names to the following:
>
> viewer\_id\_s => viewer\_id\_ss
> video\_time\_i = video\_time\_is
> type\_s => type\_ss
>
> -Z
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

