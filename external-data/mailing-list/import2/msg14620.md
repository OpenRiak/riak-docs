---
title: "Interesting issue with Ruby Riak client not finding keys in a cluster	configuration"
description: ""
project: community
lastmod: 2014-08-07T00:32:21-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14620"
author_name: "Chaim Solomon"
project_section: "mailinglistitem"
sent_date: 2014-08-07T00:32:21-07:00
---


Hi,

I just found an interesting issue (debugging mystery):
On the development node I connect through a SSH tunnel to one node of the
cluster

riak\_client = Riak::Client.new(http\_port: 9198, pb\_port: 9187, protocol:
'pbc')

and on the staging server, I had the client set up for using a list of
nodes to allow automatic failover if needed:

 riak\_client = Riak::Client.new(:nodes => [
 {pb\_port: 8087, host: 'ip\_of\_node1', protocol: 'pbc'},
 {pb\_port: 8087, host: 'ip\_of\_node2', protocol: 'pbc'},
 {pb\_port: 8087, host: 'ip\_of\_node3', protocol: 'pbc'}])

But in this configuration some keys that are available when I connect with
the "simple" configuration are just not found. I changed it on the same
server to use only one node
riak\_client = Riak::Client.new(pb\_port: 8087, host: 'ip\_of\_node1',
protocol: 'pbc')

and the key is found. I tried it with the other riak nodes and for each of
them it workes.

What is going on?

riak-client (1.4.4.1)

Chaim Solomon
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

