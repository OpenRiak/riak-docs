---
title: "Re: not able to create schema"
description: ""
project: community
lastmod: 2011-02-23T05:53:07-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02416"
mailinglist_parent_id: "msg02415"
author_name: "Rusty Klophaus"
project_section: "mailinglistitem"
sent_date: 2011-02-23T05:53:07-08:00
---


Hi Wilson,

Can you double check the error message? You are trying to store a document
in index "testindex", but the error message states an index of "testUser".
Could this be an old error.

Also, the 'search' module is only intended to be run from within a Riak
Search node. It's intended to be a simple way of interacting with data
directly while bypassing the need for a client. It looks like you may be
trying to run it on a client node, which would explain the "bad argument"
error.

You should interact with Riak Search through one of the other client APIs
that currently support Riak Search (currently Erlang, Ruby, Python, and PHP
clients).

Best,
Rusty


On Wed, Feb 23, 2011 at 5:47 AM, wilson Tuladhar wrote:

> Hi,
>
> For indexing my data, I have created a schema as
>
> {
> schema,
> [
> {version, "1.0"},
> {default\_field, "fname"},
> {default\_op, "or"},
> {n\_val, 3},
> {analyzer\_factory, {erlang, text\_analyzers,
> whitespace\_analyzer\_factory}}
> ],
> [
> %% Parse the field in preparation for full-text searching.
> {field, [
> {name, "fname"},
> {required, true},
> {analyzer\_factory, {erlang, text\_analyzers,
> standard\_analyzer\_factory}}
> ]},
>
> %% Treat the field as a date, which currently uses
> noop\_analyzer\_factory.
> {field, [
> {name, "lname"},
> {analyzer\_factory, {erlang, text\_analyzers,
> standard\_analyzer\_factory}}
> ]},
>
> %% A dynamic field. Catches any remaining fields in the
> %% document, and uses the analyzer\_factory setting defined
> %% above for the schema.
> {dynamic\_field, [
> {name, "\*"}
> ]}
> ]
> }.
>
>
> and I have stored it in a file user\_schema.
> Then, I set the schema using command:
> bin/search-cmd set\_schema "testindex" user\_schema
> and when i use bin/search-cmd show\_schema "testindex" it displays my schema
>
> now when I try to use this index name for indexing my document as :
> search:index\_doc(<<"testindex">>, <<"my\_doc">>, [{<<"fname">>,
> <<"Fname">>}, {<<"lname">>, <<"Lname">>}])
> it gives me this error:
> \*\* exception error: bad argument
> in function ets:lookup/2
> called as ets:lookup(schema\_table,<<"testUser">>)
> in call from riak\_search\_config:get\_schema/1
> in call from riak\_indexed\_doc:new/4
> in call from search:index\_doc/4
>
> and when i check ets:all() i don't see schema\_table in the list??
>
> So, am i missing something to store the schema or am i doing something
> wrong???
>
> //Wilson
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

