---
title: "Re: Rolling upgrade from 1.4.2 to 2.0.5"
description: ""
project: community
lastmod: 2015-08-06T05:41:16-0700
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16370"
mailinglist_parent_id: "msg16368"
author_name: "Sujay Mansingh"
project_section: "mailinglistitem"
sent_date: 2015-08-06T05:41:16-0700
---


Thanks Magnus & John.

Yes certainly I will test it on a separate cluster first! Which is related
to another question I have.

If I want to backup I can archive the directories on the nodes as described
here:
http://docs.basho.com/riak/latest/ops/running/backups/#OS-Specific-Directory-Locations

But in order to verify the backup (or perform operations on the cluster in
'offline' mode), can I simply bring up a separate 5 node cluster and untar
the backup files?
(Probably not the /etc/riak directory, but the data and ring directories.)

I want to do that, and then try adding a riak 2.0.6 node to the test riak
1.4.2 cluster and see if things are ok.

Thanks,

Sujay

On Thu, Aug 6, 2015 at 9:31 AM, Magnus Kessler  wrote:

>
>
> On 5 August 2015 at 18:53, John Daily  wrote:
>
>> Thatâ€™s correct: upgrades to either 2.0.x or 2.1.x are supported from the
>> 1.4 series.
>>
>> Side note: I definitely recommend testing the upgrade process in a QA
>> environment first.
>>
>> -John
>>
>
> Hi Sujay,
>
> The latest release in the 2.0 series is 2.0.6 [0]. Please use this version
> if you upgrade to 2.0.
>
> Please also review the documentation about the new 'riak.conf'
> configuration file [1][2]. 2.x installations should use the new format, but
> you can continue to use the 'app.config' format from Riak 1.x. To maintain
> complete backwards compatibility when using 'app.config', please add
>
> [{default\_bucket\_props,
> [{allow\_mult,false}, %% have Riak resolve conflicts and do not return 
> siblings
> {dvv\_enabled,false}]}, %% use vector clocks for conflict resolution
> %% other settings
> ]
>
> to 'app.config'. This will ensure that your existing application continues
> to work exactly as before. When using 'riak.conf', these settings will be
> applied automatically.
>
>
> Magnus
>
> [0] http://docs.basho.com/riak/2.0.6/downloads/
> [1]
> http://docs.basho.com/riak/latest/intro-v20/#Simplified-Configuration-Management
> [2]
> http://docs.basho.com/riak/latest/ops/advanced/configs/configuration-files/
>
> On Aug 5, 2015, at 12:13 PM, Sujay Mansingh  wrote:
>>
>>
>> Hello all, I have a 5 node riak cluster, all nodes running 1.4.2.
>>
>> I want to upgrade to riak 2.x
>>
>> According to this:
>> http://docs.basho.com/riak/latest/ops/upgrading/rolling-upgrades/ I can
>> perform a rolling upgrade (a mixed cluster)
>> as long as the versions aren't more than 2 versions apart.
>>
>> There is no riak 1.5 so would riak 1.4.2 -> 2.0.5 count as 1 version
>> apart?
>>
>> Sujay
>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>> riak-users mailing list
>> riak-users@lists.basho.com
>> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>>
>>
>>
>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>> riak-users mailing list
>> riak-users@lists.basho.com
>> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>>
>>
>
>
> --
> Magnus Kessler
> Client Services Engineer @ Basho
>
> Registered Office - 8 Lincolnâ€™s Inn Fields London WC2A 3BP Reg 07970431
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

