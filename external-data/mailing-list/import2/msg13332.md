---
title: "Re: anti_entropy_expire"
description: ""
project: community
lastmod: 2013-12-27T10:57:37-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13332"
mailinglist_parent_id: "msg13331"
author_name: "Matthew Von-Maszewski"
project_section: "mailinglistitem"
sent_date: 2013-12-27T10:57:37-08:00
---


Yes. Confirmed.

There are options available in app.config to control how often this occurs and 
how many vnodes rehash at once: defaults are every 7 days and two vnodes per 
server at a time.

Matthew Von-Maszewski


On Dec 27, 2013, at 13:50, Edgar Veiga  wrote:

> Hi!
> 
> I've been trying to find what may be the cause of this.
> 
> Every once in a week, all the nodes in my riak cluster start to do some kind 
> of operation that lasts at least for two days. 
> 
> You can watch a sample of my munin logs regarding the last week in here:
> 
> https://cloudup.com/imWiBwaC6fm
> Take a look at the days 19 and 20, and now it has started again on the 26...
> 
> I'm suspecting that this may be caused by the aae hash trees being 
> regenerated, as you say in your documentation:
> For added protection, Riak periodically (default: once a week) clears and 
> regenerates all hash trees from the on-disk K/V data.
> Can you confirm me that this may be the root of the "problem" and if it's 
> normal for the action to last for two days?
> 
> I'm using riak 1.4.2 on 6 machines, with centOS. The backend is levelDB.
> 
> Best Regards,
> Edgar Veiga
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

