---
title: "Re: PHP Client Performance"
description: ""
project: community
lastmod: 2010-04-12T12:20:55-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg00010"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2010-04-12T12:20:55-07:00
---


Blake,

I tried your code with a minor modification and consistently got around 2 
seconds. Can you post your app.config and vm.args files?

Sean Cribbs 
Developer Advocate
Basho Technologies, Inc.
http://basho.com/

On Apr 6, 2010, at 2:57 PM, Blake Schwendiman wrote:

> I created 1,000 random keys and values and inserted them in a bucket. On the 
> first run, it took 2 seconds. On the second run, 4. On the third 6, and so 
> forth. Is it normal for Riak's write time to degrade like this (takes more 
> time per write when there's more data)? Or am I doing something wrong?
> 
> This is the insert code:
> 
> global $start;
> 
> $client = new RiakClient(HOST, PORT);
> $bucket = $client->bucket('test\_bucket');
> 
> print("Writing 1,000 objects\n");
> for ($i = 0; $i < 1000; $i++) {
> $rand = rand();
> $obj = $bucket->newObject('foo\_' . $rand, 
> 'AAAAAAAAJbbbbbbbbbkdjskdjfkdlsjfkalsfejfsklejlsfejkl' . $rand);
> $obj->store();
> }
> $elapsed = microtime(true) - $start;
> print(" completed in $elapsed ms\n");
> 
> 
> As you can see, I'm using the simple PHP rand() function to generate 
> keys/values, so there's definitely a possibility of name collision on the 
> keys. 
> 
> The run time seems to be increasing each time I run, though it's not exactly 
> linear. I just ran it again and the run time was 11 seconds for 1,000 
> inserts. 
> 
> BTW, this is a single-node cluster on a decent Linux machine (N, W, R are all 
> default values). I am using innostore on the back-end.
> 
> 
> ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
> Blake Schwendiman
> 
> Blog: http://www.thewhyandthehow.com/
> Facebook: http://www.facebook.com/blake.schwendiman
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

