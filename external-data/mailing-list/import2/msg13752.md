---
title: "Re: Looking for an easy cache solution based on pre-commit hook"
description: ""
project: community
lastmod: 2014-03-05T06:25:50-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13752"
mailinglist_parent_id: "msg13748"
author_name: "Brian Sparrow"
project_section: "mailinglistitem"
sent_date: 2014-03-05T06:25:50-08:00
---


Hello Ivaylo,

Yes, you could use a pre-commit hook for this but it's important to
understand the limitations of this design. A pre-commit hook blocks the
write until the hook comes back successful and then it proceeds. This is
going to add latency to write operations on the bitcask backend. An
alternative design would be to do 2 PUTs for each object, one in bitcask
and one in memory, to remove the hook all together. Either will work but
obviously have different trade offs.

I recommend having a look at the riak\_search pre-commit hook(specifically
the pre-commit function)[0] for an example of how to write/install a
pre-commit hook.

Let me know if you have any questions.

Thanks!
Brian

[0]
https://github.com/basho/riak\_search/blob/develop/src/riak\_search\_kv\_hook.erl


On Tue, Mar 4, 2014 at 11:39 AM, Ivaylo Panitchkov  wrote:

>
> Hello,
>
> I'm playing with the Bitcask storage backend and realized it will be nice
> if there is a cache functionality realized with the Memory backend. If I
> install both Bitcask and Memory storage backends as Mult Is there any easy
> way, a simple script that could do the caching by simply installing it with
> pre-commit hook?
>
> Thanks in advance,
> Ivaylo Panitchkov
>
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

