---
title: "RE: Partitions repair isn't working anymore?"
description: ""
project: community
lastmod: 2018-06-01T01:33:02-0700
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg18550"
mailinglist_parent_id: "msg18536"
author_name: "Nicholas Adams"
project_section: "mailinglistitem"
sent_date: 2018-06-01T01:33:02-0700
---


From the mail history, I'd guess he's following the standard repair process 
listed on 
https://docs.basho.com/riak/kv/2.1.4/using/repair-recovery/repairs/#repairing-all-partitions-on-a-node


-----Original Message-----
From: riak-users  On Behalf Of Russell Brown
Sent: 01 June 2018 17:16
To: Guido Medina 
Cc: riak-users 
Subject: Re: Partitions repair isn't working anymore?

riak\_search has been removed from riak-2.2.5. Looks like some vestige survived. 

Can you tell me what command you ran, it looks to me from the output below that 
youâ€™re connected to node and typing commands in the console?

Is this some snippet that you attach and run?

Cheers

Russell

> On 1 Jun 2018, at 09:07, Guido Medina  wrote:
> 
> Hi all,
> 
> We started the partitions repair a couple of weeks ago, so far so good (3 
> nodes out of 7 done), then we started getting this error:
>> (r...@node4.domain.com)3> [riak\_search\_vnode:repair(P) || P <- Partitions].
>> \*\* exception error: undefined function riak\_search\_vnode:repair/1
> 
> The first two steps for the node repair executed fine:
>> {ok, Ring} = riak\_core\_ring\_manager:get\_my\_ring().
>> Partitions = [P || {P, 'r...@node4.domain.com'} <- 
>> riak\_core\_ring:all\_owners(Ring)].
> 
> We are running on 2.2.5
> Guido.
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

