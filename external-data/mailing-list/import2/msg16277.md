---
title: "Re: Unexpected stored value for multivalued field in riak search"
description: ""
project: community
lastmod: 2015-07-07T10:57:57-0700
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16277"
mailinglist_parent_id: "msg16268"
author_name: "Zeeshan Lakhani"
project_section: "mailinglistitem"
sent_date: 2015-07-07T10:57:57-0700
---


Hello Wendy,

This may be an issue with the Python client. Can you open this up as a bug at 
https://github.com/basho/riak-python-client 
, and our client team can take a 
look? I was not able to reproduce via http in an example (i.e. \*interests\_set\*) 
I tried:

```
"docs" : [
 {
 "\_yz\_rt" : "maps",
 "name\_register" : â€œ3 Names",
 "interests\_set" : [
 "thing"
 ],
 "\_yz\_id" : "1\*maps\*testbucket\*3 Names\*2",
 "\_yz\_rk" : â€œ3 Names",
 "\_yz\_rb" : "testbucket"
 }
 ],...
```

Zeeshan Lakhani
programmer | 
software engineer at @basho | 
org. member/founder of @papers\_we\_love | paperswelove.org
twitter => @zeeshanlakhani

> On Jul 1, 2015, at 11:47 AM, Wendy Liu  wrote:
> 
> Hi all,
> 
> I'm having an issue with stored multiValued fields in Riak search not being 
> stored the way I would expect.
> 
> If I use the default schema, and store the following JSON document (from the 
> documentation )
> 
> {"people\_ss": ["Ryan", "Eric", "Brett"]}
> 
> and then search with the query "people\_ss:Ryan", the document that I get back 
> contains "people\_ss": ["Ryan", "Eric", "Brett"], as I would expect.
> 
> However, if I instead create the document
> 
> {"people\_ss": ["Ryan"]}
> 
> then searching with the query "people\_ss:Ryan" results in a document with 
> "people\_ss": "Ryan", where the value associated with "people\_ss" is a string, 
> not a list of strings as I would expect.
> 
> I couldn't find anything about this in any of the Github issue trackers or 
> the mailing list. Is this a bug, or desired behaviour? Is there a way to 
> ensure that lists with a single element are stored in Solr as lists, instead 
> of as strings?
> 
> I'm using the official Riak Python client with Riak 2.1.1 and search enabled.
> 
> Thanks in advance!
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

