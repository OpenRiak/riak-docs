---
title: "Re: Riak crashing after server reboot"
description: ""
project: community
lastmod: 2012-07-02T22:56:55-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07855"
mailinglist_parent_id: "msg07838"
author_name: "Mark Phillips"
project_section: "mailinglistitem"
sent_date: 2012-07-02T22:56:55-07:00
---


Hey Roberto,

Looks like you're hitting an issue with bad hintfiles that was fixed about
five months back [1] (just after your one node [2] went live).

Upgrading to the latest Riak [3] should take care of this. Let us know if
it doesn't.

Mark

[1] https://github.com/basho/bitcask/pull/35
[2] Any chance I can convince you to bump things up to ... three nodes? :)
[3] http://downloads.basho.com/riak/CURRENT/


On Fri, Jun 29, 2012 at 11:25 AM, Roberto Oliveira Santos <
robertosime...@gmail.com> wrote:

> Dear all,
>
> I have a riak running in only one node for about 6 months without
> problems. Yesterday the riak's server was power off without previous halt.
> Now riak is crashing in few seconds/minutes after start. In log files I can
> see problems with merge and maybe corruption of some data. Is there an
> option to recover the data or exclude what is corrupted?
>
> The kind of message that is in log files is:
>
> 2012-06-29 15:18:45.385 [error] <0.3733.0> Hintfile
> '/pgdata/riak/bitcask/296867520082839655260123481645494988367611297792/1340890104.bitcask.hint'
> contains pointer 2707583 10324 that is greater than total data size 2707583
> 2012-06-29 15:18:45.402 [error] <0.3733.0> gen\_fsm <0.3733.0> in state
> active terminated with reason: no match of right hand value
> <<0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0...>>
> in bitcask\_fileops:read/3
>
> Kind regards,
>
> Roberto
>
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

