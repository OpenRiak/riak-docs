---
title: "Re: What do you do when Riak freezes?"
description: ""
project: community
lastmod: 2014-03-20T03:02:37-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13852"
mailinglist_parent_id: "msg13846"
author_name: "Shane McEwan"
project_section: "mailinglistitem"
sent_date: 2014-03-20T03:02:37-07:00
---


On 19/03/14 20:56, Michael Dillon wrote:
> I've run into a problem with Riak freezing completely on one node
> running on Ubuntu 12.04 LTS on a XEN VM (EC2). If I ssh into the node
> and run "ps ax" that shell session also freezes. I also tried another
> ssh session with "netstat -lnp" to see if I could find the process ID to
> kill, but that also froze.

If 'ps' and 'netstat' are hanging then you've got more fundamental
problems with the system than just Riak and Erlang.

It's almost like a network drive is missing and if that drive is
mentioned in your PATH any commands you type hang because the shell is
traversing into a missing mount searching for the command. But you say
that other commands like 'pstree' and 'kill' work so it's not that.

Does 'dmesg' or 'tail /var/log/syslog' show anything interesting?

If you can get the PID of any of the hung processes you could try
'strace -f -p PID' to see if they're hanging on a particular system
call. Although I suspect the strace will hang as well.

I reckon a reboot will probably fix the problem but that won't be much
help if the problem happens again.

Shane.

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

