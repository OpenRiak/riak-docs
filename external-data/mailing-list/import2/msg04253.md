---
title: "Re: How to use erlang riak client with Riak Search?"
description: ""
project: community
lastmod: 2011-08-07T16:13:46-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg04253"
mailinglist_parent_id: "msg04252"
author_name: "Ryan Zezeski"
project_section: "mailinglistitem"
sent_date: 2011-08-07T16:13:46-07:00
---


Atrem,

A PR is in place for this.

https://github.com/basho/riak\_search/pull/76

-Ryan

On Sun, Aug 7, 2011 at 6:38 PM, Ryan Zezeski  wrote:

> Reply-all in case anyone else hits this problem.
>
>
> On Sun, Aug 7, 2011 at 6:36 PM, Ryan Zezeski  wrote:
>
>> Artem,
>>
>> It looks like this has to do with our recent move to Pipe as the new
>> mapred engine. The Search code doesn't speak Pipe, yet. I'm working on a
>> fix but in the meantime you could change the `mapred\_system` entry in
>> app.config to `legacy`.
>>
>> -Ryan
>>
>>
>> On Sun, Aug 7, 2011 at 4:52 PM, Artem Golovinsky <
>> artemgolovin...@gmail.com> wrote:
>>
>>> Ryan,
>>> Thanks for quick answer.
>>> Yes, I have tried it before. In spec of riakc\_pb\_socket:search/3 this
>>> parameter is defined as string().
>>> With binary it doesn't work too.
>>>
>>>
>>> 2011/8/8 Ryan Zezeski 
>>>
>>>> Artem,
>>>>
>>>> Try making that 3rd param a binary.
>>>>
>>>> -Ryan
>>>>
>>>> [Sent from my iPhone]
>>>>
>>>> On Aug 7, 2011, at 1:15 PM, Artem Golovinsky 
>>>> wrote:
>>>>
>>>> Hi,
>>>>
>>>> I try to make request to Riak Search, but I get error bad\_mapred\_inputs.
>>>>
>>>> Some examles:
>>>>
>>>> ( slinode@127.0.0.1)32> {ok,Pid} =
>>>> riakc\_pb\_socket:start\_link('127.0.0.1', 8087).
>>>> ( slinode@127.0.0.1)32> riakc\_pb\_socket:search(Pid,
>>>> <<"sl">>,"got:[00000000000 TO 9000000000]").
>>>> {error,<<"bad\_mapred\_inputs">>}
>>>> ( slinode@127.0.0.1)33> riakc\_pb\_socket:search(Pid,
>>>> <<"sl">>,"short:cKCAn5").
>>>> {error,<<"bad\_mapred\_inputs">>}
>>>>
>>>> This queries are valid and work through Solr interface:
>>>>
>>>> 
>>>> http://localhost:8098/solr/sl/select?q=got:[00000000000 TO 90000000000]
>>>> 
>>>> and
>>>>
>>>> 
>>>> http://localhost:8098/solr/sl/select?q=short:cKCAn5
>>>> 
>>>>
>>>> Could you please describe format of third parameter(query)
>>>> for riakc\_pb\_socket:search/2?
>>>>
>>>>
>>>> --
>>>> Best regards,
>>>> Artem Golovinsky
>>>>
>>>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>>>> riak-users mailing list
>>>> riak-users@lists.basho.com
>>>> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>>>>
>>>>
>>>
>>>
>>> --
>>> Best regards,
>>> Artem Golovinsky
>>>
>>
>>
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

