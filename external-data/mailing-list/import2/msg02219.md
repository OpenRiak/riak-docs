---
title: "Ripple one Association Troubles"
description: ""
project: community
lastmod: 2011-02-08T10:23:17-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02219"
author_name: "Stephen Allred"
project_section: "mailinglistitem"
sent_date: 2011-02-08T10:23:17-08:00
---


Hi all,

I'm having trouble setting up a one association in a ripple document. I'm 
trying to setup an association between a user and a journal entry, such that 
the journal has one user, that the user created.

My JournalEntry document:

--- journal\_entry.rb ---
require 'ripple'

class JournalEntry
 include Ripple::Document
 
 property :short\_title, String, :presence => true
 property :title, String, :presence => true
 property :entry, String, :presence => true
 
 timestamps!

 one :user

 key\_on :short\_title
end
---

My User document:

--- user.rb ---
require 'ripple'
require 'digest'

class User
 include Ripple::Document
 
 devise :registerable, :confirmable, :database\_authenticatable, :recoverable, 
:validatable

 property :email, String, :presence => true
 property :password, String
 property :password\_confirmation, String
 timestamps!
 
 key\_on :email
 
 def key
 email
 end

 def id
 email
 end
end
---

I've tried in the rails console to associate a user with journal\_entry 
(journal\_entry.user = user), save it and reload it. The resulting reloaded 
journal\_entry does not have a user (calling journal\_entry.user prints "(Object 
doesn't support #inspect)").

My journal entry in riak loaded via the browser looks like:

{"short\_title":"test","title":"test","entry":"test","created\_at":"Mon, 07 Feb 
2011 22:47:17 -0000","updated\_at":"Tue, 08 Feb 2011 18:08:47 
-0000","\_type":"JournalEntry"}

Does anyone know what I'm doing wrong?
Cheers!
Steve
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

