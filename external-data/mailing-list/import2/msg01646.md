---
title: "Re: Whole cluster times out if one node is gone"
description: ""
project: community
lastmod: 2010-11-29T04:44:44-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01646"
mailinglist_parent_id: "msg01613"
author_name: "David Smith"
project_section: "mailinglistitem"
sent_date: 2010-11-29T04:44:44-08:00
---


On Tue, Nov 23, 2010 at 3:33 PM, Jay Adkisson  wrote:
> (many profuse apologies to Dan - hit "reply" instead of "reply all")
> Alrighty, I've done a little more digging.  When I throttle the writes
> heavily (2/sec) and set R and W to 1 all around, the cluster works just fine
> after I restart the node for about 15-20 seconds.  Then the read request
> hangs for about a minute, until node D disappears from connected\_nodes in
> riak-admin status, at which point it returns the desired value (although
> sometimes I get a 503):

Are you seeing any error messages in log/erlang.log.\* or log/sasl-error.log?

Can you expound on your use case a little -- are you doing a large
insert, or just a random read/write mix? Did you pre-populate the
dataset? Why are you using r=1, instead of relying on quorom for
reads?

How are you running the riak-admin status to measure the 15-20 seconds?

Thanks.

D.

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

