---
title: "Re: Cluster start and 2i query"
description: ""
project: community
lastmod: 2014-03-05T04:03:17-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13751"
mailinglist_parent_id: "msg13750"
author_name: "Ciprian Manea"
project_section: "mailinglistitem"
sent_date: 2014-03-05T04:03:17-08:00
---


Hi Daniel,

One possible configuration would be:

+ fronting the Riak cluster with HAProxy (or a hardware load balancer)
+ when the Riak server boots-up, block the Riak API ports (using iptables)
+ also at boot, spawn a riak-admin wait-for-service riak\_kv process [0]
+ once the riak-admin exits, drop the Riak API related rules from iptables

Handling failures and retries gracefully in the application code should
help as well.


[0]
http://docs.basho.com/riak/latest/ops/running/tools/riak-admin/#wait-for-service


Regards,
Ciprian


On Wed, Mar 5, 2014 at 12:58 PM, Daniel Iwan  wrote:

> Any ideas regarding that?
>
> Thanks
> Daniel
>
>
>
> --
> View this message in context:
> http://riak-users.197444.n3.nabble.com/Cluster-start-and-2i-query-tp4030557p4030610.html
> Sent from the Riak Users mailing list archive at Nabble.com.
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

