---
title: "Re: is it possible to start riak_kv as foreground process?"
description: ""
project: community
lastmod: 2015-07-09T11:29:05-0700
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16285"
mailinglist_parent_id: "msg16284"
author_name: "ROMAN SHESTAKOV"
project_section: "mailinglistitem"
sent_date: 2015-07-09T11:29:05-0700
---


hi Luke,

I am using the proprietary system deployed in our company, it allows to control 
the live cycle of the process, collect the logs centrally, etc. etc.

in any case - I extended bin/riak runner with extra command ‘foreground’ and it 
solved my problem. I am starting risk\_kv (with bin/riak foreground) from my own 
shell wrapper in which I substitute existing bin/riak with my own version + 
setup some env variables. 

I think this command would be useful as a standard risk command 

Regards, Roman


> On 8 Jul 2015, at 22:43, Luke Bakken  wrote:
> 
> Hi Roman,
> 
> Which "process management system" are you using? I have successfully run Riak 
> using monit and the fact that Riak runs in the background does not cause 
> issues.
> 
> For instance, this monit configuration will start/stop Riak as well as 
> monitor it. You must disable your system's init script for Riak if you want 
> monit to do the job instead.
> 
> check process riak
> with pidfile /var/run/riak/riak.pid
> start program = "/etc/init.d/riak start" with timeout 30 seconds
> stop program = "/etc/init.d/riak stop" with timeout 60 seconds
> alert riak-ale...@domain.com 
> on { connection, timeout }
> with mail-format {
> subject: [ALERT] $HOST: Riak Service - $EVENT
> message: $DATE
> Problem:
> $HOST: Riak raised the following event: $EVENT
> $DESCRIPTION
> }
> with reminder on 10 cycles
> if failed (url http://localhost:8098/ping 
>  and content == '^OK$')
> with timeout 15 seconds
> for 2 times within 5 cycles
> then alert
> if 3 restarts within 5 cycles then alert
> group riak
> 
> --
> Luke Bakken
> Engineer
> lbak...@basho.com 
> On Wed, Jul 8, 2015 at 2:17 PM, Roman Shestakov  > wrote:
> Thanks, but i meant to run as foreground hidden process, without console.
> 
> I need to run riak kv under specific process management system which controls 
> process live cycle. It cant do it if the process is backgrounded. 
> 
> I really dont want ti hack the riak runner wrapper so though maybe there us 
> sine trick. 
> 
> But in any case, it seems surprising that this option is missing as a standard
> 
> Regards, Roman 
> 
> Sent from my iPhone
> 
> On 8 Jul 2015, at 17:54, Cuyler Jones  > wrote:
> 
>> Hi Roman --
>> 
>> If riak is not currently running:
>> 
>> bin/riak console
>> 
>> If riak is currently running:
>> 
>> bin/riak attach
>> 
>> 
>> 
>> On Wed, Jul 8, 2015 at 9:41 AM, ROMAN SHESTAKOV > > wrote:
>> hello,
>> 
>> is there any way to start RIAK\_KV as a foreground process instead of as a 
>> demon process, which is what "bin/riak start” does?
>> 
>> Regards, Roman
>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>> riak-users mailing list
>> riak-users@lists.basho.com 
>> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com 
>> 
>> 
> 
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com 
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com 
> 
> 
> 

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

