---
title: "Re: Active Anti Entropy Directory when AAE is disabled"
description: ""
project: community
lastmod: 2017-01-26T00:59:05-0800
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17879"
mailinglist_parent_id: "msg17877"
author_name: "Magnus Kessler"
project_section: "mailinglistitem"
sent_date: 2017-01-26T00:59:05-0800
---


On 25 January 2017 at 21:09, Arun Rajagopalan 
wrote:

> Thanks Luke. Sorry it took me some time to experiment ...
>
> I am not sure what happens in a couple of scenarios. Maybe you can explain
>
> Lets say I lose a node completely and want to replace it. Will the keys
> yet to be "anti-entropied" by that node be distributed correctly when I
> restore that node ?
>
> Secondly restore multiple nodes from a backup, should I replace the
> anti-entropy directory also ?
>
>
Hi Arun,

You can consider AAE data as ephemeral; AAE trees will be recalculated
automatically if missing, or if trees are encountered that are too old
(which may happen if you turn AAE off for some time and then on again).

In a forced replacement scenario (after completely losing a node), the
replacement node would first calculate its own set of AAE trees, which
would essentially be an empty set. Subsequent AAE exchanges with other
nodes will detect the differences and cause missing KV objects to be
repaired.

For more information about AAE and partition repairs, please see the
documentation [0][1].

Kind Regards,

Magnus

[0]:
https://docs.basho.com/riak/kv/2.2.0/learn/concepts/active-anti-entropy/
[1]:
https://docs.basho.com/riak/kv/2.2.0/using/repair-recovery/repairs/#repairing-partitions

-- 
Magnus Kessler
Client Services Engineer
Basho Technologies Limited

Registered Office - 8 Lincolnâ€™s Inn Fields London WC2A 3BP Reg 07970431
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

