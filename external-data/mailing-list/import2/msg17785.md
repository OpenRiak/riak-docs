---
title: "Re: Java client -- slow to shutdown"
description: ""
project: community
lastmod: 2016-11-28T04:53:17-0800
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17785"
mailinglist_parent_id: "msg17784"
author_name: "Luke Bakken"
project_section: "mailinglistitem"
sent_date: 2016-11-28T04:53:17-0800
---


Hi Toby -

Thanks for reporting this. We can continue the discussion via GH issue #689.

--
Luke Bakken
Engineer
lbak...@basho.com

On Wed, Nov 23, 2016 at 9:58 PM, Toby Corkindale  wrote:
> Hi,
> I'm using the Java client via protocol buffers to Riak.
> (Actually I'm using it via Scala 2.11.8 on OpenJDK 8)
>
> After calling client.shutdown(), there is always a delay of 4 seconds before
> the app actually exits. Why is this, and what can I do about it?
>
> To demonstrate the issue, use these files:
> https://gist.github.com/TJC/9a6a174cb1419a7c32e8018c5a495e3d
>
> If you put both of them in a fresh directory and then run "sbt", it should
> grab various dependencies and stuff, and then you can use "compile" and
> "run" commands.
> (You'll need to do "export RIAK\_SERVER=my.riak.cluster.net" in the shell
> before you run sbt)
>
> If you do "run" a few times, you'll see it always takes four seconds to get
> back to the sbt prompt. If you comment out the two riak statements in the
> source code (the connection and shutdown), then "run" a few times, it takes
> zero seconds.
>
> I've tested this outside of sbt and the same issue exists.. it's just easier
> to make a quick demo that works inside sbt.
>
> Also reported as https://github.com/basho/riak-java-client/issues/689
>
> Cheers
> Toby

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

