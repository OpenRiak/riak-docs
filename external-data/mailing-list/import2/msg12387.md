---
title: "Re: 2i at large scale?"
description: ""
project: community
lastmod: 2013-09-25T11:28:03-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12387"
mailinglist_parent_id: "msg12382"
author_name: "Jared Morrow"
project_section: "mailinglistitem"
sent_date: 2013-09-25T11:28:03-07:00
---


Benchmarking a database designed for multiple nodes on a single node
usually doesn't give you any measurements that are useful. We recommend 5
nodes minimum for clusters, so if you can do that, it is best to benchmark
on a realistic cluster. If you are determined to benchmark on a single
node, you should configure your N value to be 1 so you aren't doing 3x the
work. Also, you should probably set your ring size to 8 so you don't run
out of memory (which I suspect is your problem).

I replied similarly here
http://riak-users.197444.n3.nabble.com/How-to-make-Riak-work-faster-writing-tp4025882p4025909.htmland
you can read that to see how to adjust the n\_val on a bucket.

Good luck.

-Jared


On Wed, Sep 25, 2013 at 9:50 AM, Wagner Camarao wrote:

> Hi,
>
> I'm benchmarking 2i at scale of billion records, running one physical node
> locally with mostly default configs - except for LevelDB instead of
> Bitcask. Up to this point (14MM records in the bucket that's being indexed)
> it's still performing lookups well for my use case (read ~ 7ms using
> riak-ruby-client over http).
>
> However, along this process I've noticed riak to go down twice. First time
> (8MM records) I could just start it again and continue my benchmarking from
> the point it were left, but now at the second time (14MM records) when I
> started riak again, it took about 3 minutes to respond to my first request.
>
> What was happening during these long startup minutes, after my second
> crash?
>
> Up to which scale have you guys been successfully using secondary indexes?
>
> Any other ideas given my use case / benchmarking scenario?
>
> Thanks,
> Wagner
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

