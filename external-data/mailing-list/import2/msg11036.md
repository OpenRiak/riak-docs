---
title: "Riak init script hangs on "stop""
description: ""
project: community
lastmod: 2013-05-07T01:11:26-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11036"
author_name: "Pascal Schmiel"
project_section: "mailinglistitem"
sent_date: 2013-05-07T01:11:26-07:00
---



Hi List,

sometimes the riak init script hangs on the "stop" command. After 
several hours the init script and the riak process itself is still 
running (but unreachable). I have to use SIGTERM to stop the process.


The lines from my console.log after invoking "/etc/init.d/riak stop" are:


2013-05-07 01:08:54.624 [info] <0.1307.0>@riak\_kv\_app:prep\_stop:165 
Stopping application riak\_kv - marked service down.
2013-05-07 01:08:54.624 [info] <0.1307.0>@riak\_kv\_app:prep\_stop:169 
Unregistered pb services
2013-05-07 01:08:54.625 [info] <0.1307.0>@riak\_kv\_app:prep\_stop:174 
unregistered webmachine routes
2013-05-07 01:08:54.625 [info] <0.1307.0>@riak\_kv\_app:prep\_stop:176 all 
active put FSMs completed
2013-05-07 01:08:54.634 [info] <0.1346.0>@riak\_kv\_js\_vm:terminate:240 
Spidermonkey VM (pool: riak\_kv\_js\_hook) host stopping (<0.1346.0>)
2013-05-07 01:08:54.635 [info] <0.1307.0>@riak\_kv\_app:stop:187 Stopped 
application riak\_kv.
2013-05-07 01:08:54.651 [info] <0.129.0>@riak\_core\_app:prep\_stop:101 
Stopping application riak\_core - disabling web services.
2013-05-07 01:08:54.733 [error] <0.23337.1>@riak\_kv\_stat:update:85 
error:badarg updating stat {vnode\_index\_delete,0}.
2013-05-07 01:08:54.748 [error] <0.12920.2>@riak\_kv\_stat:update:85 
error:badarg updating stat {vnode\_index\_delete,0}.
2013-05-07 01:08:54.769 [error] <0.27391.2>@riak\_kv\_stat:update:85 
error:badarg updating stat {vnode\_index\_delete,0}.
2013-05-07 01:08:54.777 [error] <0.24922.3>@riak\_kv\_stat:update:85 
error:badarg updating stat {vnode\_index\_delete,0}.
2013-05-07 01:08:54.780 [error] <0.27478.3>@riak\_kv\_stat:update:85 
error:badarg updating stat {vnode\_index\_delete,0}.
2013-05-07 01:08:54.784 [error] <0.23385.2>@riak\_kv\_stat:update:85 
error:badarg updating stat {vnode\_index\_delete,0}.
2013-05-07 01:08:57.294 [info] <0.129.0>@riak\_core\_app:stop:110 Stopped 
 application riak\_core.
2013-05-07 01:08:57.459 [info] <0.55.0> alarm\_handler: 
{clear,system\_memory\_high\_watermark}


The problem appeared suddenly without any config or system changes.

We're using Riak 1.3 installed from RPM on CentOS 6.3 x64 with eleveldb 
backend.


- Pascal


--
Pascal Schmiel
Head of System Operations
Blue Lion mobile GmbH (QEEP)
Gottfried-Hagen-Str. 20
51105 Köln

Tel. +49 (0) 221 788 797 17
Fax. +49 (0) 221 788 797 19

pascal.schm...@bluelionmobile.com
www.bluelionmobile.com
www.qeep.net

Sitz Köln, HRB 58203, Amtsgericht Köln
Geschäftsführung: Cornelius Rost, Christian R. Schulte

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

