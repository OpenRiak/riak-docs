---
title: "Re: Riak behind a Load Balancer"
description: ""
project: community
lastmod: 2012-06-25T04:44:11-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07774"
mailinglist_parent_id: "msg07772"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2012-06-25T04:44:11-07:00
---


Another typical setup is to have each client node have its own haproxy, and
when Riak nodes are added or removed (not a common occurrence, mind you), a
configuration management tool like Chef/Puppet/cfengine/etc can adjust the
config and signal the process to reload it (I think it's `kill -HUP`). Then
your client code also only ever needs to connect to localhost, and doesn't
have to have itself reconfigured.

On Mon, Jun 25, 2012 at 4:40 AM, Samuel Elliott  wrote:

> On Mon, Jun 25, 2012 at 7:36 AM, Matt Black 
> wrote:
> > Dear list,
> >
> > Does anyone have an opinion on the concept of putting a Riak cluster
> behind
> > a load balancer?
>
> It has been done before. there are various results when searching
> "riak haproxy" in your favourite search engine.
>
> >
> > We wish to be able to automatically add/remove nodes from the cluster, so
> > adding an extra layer at the front is desirable. We should also benefit
> for
> > incoming requests behind shared across all nodes.
> >
> > Can anyone see any drawbacks / problems with doing this?
>
> If your load balancer falls over, what do you do then? Highly
> available may go down the pan. Have more than one would be the obvious
> answer.
>
> What do you do when you want to transparently add more machines to
> your load balancer?
>
> Maybe it might be better to have a list of riak nodes stored in a
> separate registry (I'm thinking something like zookeeper), that your
> application servers can then poll for changes (or even subscribe to
> changes) to the list of servers.
>
> Sam
>
> >
> > Thanks
> > Matt
> >
> >
> > \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> > riak-users mailing list
> > riak-users@lists.basho.com
> > http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
> >
>
>
>
> --
> Samuel Elliott
> s...@lenary.co.uk
> http://lenary.co.uk/
> +44 (0)7891 993 664
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>



-- 
Sean Cribbs 
Software Engineer
Basho Technologies, Inc.
http://basho.com/
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

