---
title: "preflist_exhausted error..."
description: ""
project: community
lastmod: 2012-05-29T14:52:52-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07569"
author_name: "Sati, Mohit"
project_section: "mailinglistitem"
sent_date: 2012-05-29T14:52:52-07:00
---


Hello All,

I have built a new 4 node cluster using riak version riak-1.1.2-1.el6.x86\_64. I 
was reading several of the posts and inspite of doing the following, I'm still 
getting the preflist... error.

1. New riak version with mapred\_builtins.js

-rw-r--r-- 1 root root 2936 Apr 17 05:25 
/usr/lib64/riak/lib/riak\_kv-1.1.2/priv/mapred\_builtins.js

2. change settings for one node :

{map\_js\_vm\_count, 24 },
{reduce\_js\_vm\_count, 18 },
..
..
{js\_max\_vm\_mem, 48},

3. Verify the settings

 rpc:multicall(riak\_kv\_js\_manager,pool\_size,[riak\_kv\_js\_map]) .
{[24,24,24,24],[]}
rpc:multicall(riak\_kv\_js\_manager,pool\_size,[riak\_kv\_js\_reduce]) .
{[18,18,18,18],[]}
4. run the map query:

For one day's data it is getting 1850 keys with a file size of 600K


Error message for more than 1 day's data

{"phase":0,"error":"[preflist\_exhausted]","input":"{ok,{r\_object,<

Can anyone please help?

I also built secondary indexes but it did not help....


Thanks
Mohit
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

