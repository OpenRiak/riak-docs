---
title: "Re: What is this...?"
description: ""
project: community
lastmod: 2012-01-21T14:10:11-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06357"
mailinglist_parent_id: "msg06356"
author_name: "Mike Oxford"
project_section: "mailinglistitem"
sent_date: 2012-01-21T14:10:11-08:00
---


Completely separate 1.0.3 (note the version diff) installation, 3 new
nodes, bitcask backend (instead of leveldb), absolutely no data.
Rebuilt making sure I had latest erlang\_protobuffs tag (0.6.0).

Fire up three nodes, build some connections, and repeat using binary-only.

3> 
riakc\_pb\_socket:list\_keys(gen\_server:call(forum\_store:get\_random\_pid(alliance),get\_connector\_pid),
<<"alliance\_overview">>).
{ok,[]}

4> 
riakc\_pb\_socket:list\_keys(gen\_server:call(forum\_store:get\_random\_pid(alliance),get\_connector\_pid),
<<"alliance\_overview">>).
{ok,[]}

5> 
riakc\_pb\_socket:list\_keys(gen\_server:call(forum\_store:get\_random\_pid(alliance),get\_connector\_pid),
<<"alliance\_overview">>).

=ERROR REPORT==== 21-Jan-2012::13:57:42 ===
\*\* Generic server <0.1411.0> terminating
\*\* Last message in was {tcp,#Port<0.5504>,[255|<<"unknown\_msg">>]}
\*\* When Server state == {state,"127.0.0.1",2030,false,false,#Port<0.5504>,
 {request,#Ref<0.0.0.16491>,
 {rpblistkeysreq,<<"alliance\_overview">>},
 undefined,
 {120402956,<0.1168.0>},
 60000,#Ref<0.0.0.16492>},
 {[],[]},
 1,[],infinity,100}
\*\* Reason for termination ==
\*\* {function\_clause,[{riakclient\_pb,decode,[undefined,<<"unknown\_msg">>]},
 {riakc\_pb\_socket,handle\_info,2},
 {gen\_server,handle\_msg,5},
 {proc\_lib,init\_p\_do\_apply,3}]}
{error,{timeout,[]}}

6> 
riakc\_pb\_socket:list\_keys(gen\_server:call(forum\_store:get\_random\_pid(alliance),get\_connector\_pid),
<<"alliance\_overview">>).
{ok,[]}

Console again shows

===== Sat Jan 21 13:55:06 PST 2012
13:55:06.888 [info] Handoff receiver for partition undefined exited
after processing 0 objects


-mox


On Sat, Jan 21, 2012 at 10:24 AM, Mike Oxford  wrote:
> Shouldn't matter in the end, but it does happen both ways.  That
> version is just the snippet I happened to paste.
>
> -mox
>
> On Sat, Jan 21, 2012 at 9:33 AM, Basho  wrote:
>> Not sure if it's the cause of the error, but I notice sometimes you're using 
>> a string for the bucket name when it should always be passed as a binary.
>>
>> Kelly
>>
>> Sent from my iPhone
>>
>> On Jan 21, 2012, at 9:43 AM, Mike Oxford  wrote:
>>
>>> 3 node cluster of 1.0.2, level\_db backend, pb interface. Build up a
>>> store of 9 connections (3 to each node) and pull one out randomly.
>>>
>>> --snip
>>> 62> 
>>> riakc\_pb\_socket:list\_keys(gen\_server:call(forum\_store:get\_random\_pid(alliance),
>>> get\_connector\_pid), <<"alliance\_overview">>
>>> {ok,[]}
>>>
>>> 63> 
>>> riakc\_pb\_socket:list\_keys(gen\_server:call(forum\_store:get\_random\_pid(alliance),
>>> get\_connector\_pid), <<"alliance\_overview">>).
>>> {ok,[]}
>>>
>>> 64> 
>>> riakc\_pb\_socket:list\_keys(gen\_server:call(forum\_store:get\_random\_pid(alliance),
>>> get\_connector\_pid), "alliance\_overview").
>>> {ok,[]}
>>>
>>> 65> 
>>> riakc\_pb\_socket:list\_keys(gen\_server:call(forum\_store:get\_random\_pid(alliance),
>>> get\_connector\_pid), "alliance\_overview").
>>> =ERROR REPORT==== 21-Jan-2012::08:23:11 ===
>>> \*\* Generic server <0.24647.5> terminating
>>> \*\* Last message in was {tcp,#Port<0.5820>,[255|<<"unknown\_msg">>]}
>>> \*\* When Server state == {state,"127.0.0.1",2010,false,false,#Port<0.5820>,
>>>                            {request,#Ref<0.0.4.159143>,
>>>                                {rpblistkeysreq,"alliance\_overview"},
>>>                                undefined,
>>>                                {106931976,<0.25063.5>},
>>>                                60000,#Ref<0.0.4.159144>},
>>>                            {[],[]},
>>>                            1,[],infinity,100}
>>> \*\* Reason for termination ==
>>> \*\* {function\_clause,[{riakclient\_pb,decode,[undefined,<<"unknown\_msg">>]},
>>>                     {riakc\_pb\_socket,handle\_info,2},
>>>                     {gen\_server,handle\_msg,5},
>>>                     {proc\_lib,init\_p\_do\_apply,3}]}
>>> {error,{timeout,[]}}
>>>
>>> 66> 
>>> riakc\_pb\_socket:list\_keys(gen\_server:call(forum\_store:get\_random\_pid(alliance),
>>> get\_connector\_pid), "alliance\_overview").
>>> {ok,[]}
>>> --end snip
>>>
>>> Riak console spits out the following at the same time...
>>>
>>> --snip
>>> nodes().08:23:11.154 [info] Handoff receiver for partition undefined
>>> exited after processing 0 objects
>>> --end snip
>>>
>>> Error condition does not seem to follow any specific node and the
>>> connections die when the error is thrown so its constantly building
>>> new ones.
>>>
>>> TIA.
>>>
>>> -mox
>>>
>>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>>> riak-users mailing list
>>> riak-users@lists.basho.com
>>> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

