---
title: "Re: Using multiple disks with Riak"
description: ""
project: community
lastmod: 2011-01-05T05:24:09-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01888"
mailinglist_parent_id: "msg01887"
author_name: "Karsten Thygesen"
project_section: "mailinglistitem"
sent_date: 2011-01-05T05:24:09-08:00
---


Hi Yusuf

On Jan 5, 2011, at 13:28 , yusuf ÅŸahin wrote:

> Hello Riak Users!
> 
> 
> I am working on a testing Riak cluster and have some questions about disks on 
> nodes.
> 
> 1 - How big or small disk arrays we should use with riak nodes when we have 
> 1GBS network between nodes and have 8GB ram on each nodes. Does nodes have 
> limitations like ram cpu, bandwith while storing too big data consist of many 
> small files. 

Many small files will require many keys and keys are in memory when using 
Bitcask as backend. So memory will probably be your limitation.

> 
> 2 - Is it ok to use different size of disks with riak nodes. For exaple, 
> 100GB for 1st node , 300GB for second node, 500GB for third node etc. How 
> will Riak handle the data distrubition and replication in this situation in a 
> large cluster of nodes. (if we have 20 or 50 nodes in the cluster)

Yes, it is OK, but Riak does not take available diskspace into consideration 
when distributing data. All nodes gets a fair chunk of vnodes and thereby the 
approximate same amount of data to handle. So capacity wise, you are limited by 
the smallest server.

> 
> 3- When disk on one of nodes become full, what will happen ?

> 
> Node will continue serving files but it will not accept any new data, 
> Node will accept any read, delete request but will not accept any write 
> request so new files will be written to another node with enough disk space ?
> Node will stop serving files and will go dead. So the files in that node 
> will replicated to another node ?
> We can mount new disks to that node to increase total disk volume ? 
> Which condition is ture ?

The node will die and others will take over.

> 
> 4- Is Riak support multiple disks for data storage, if yes have can we make 
> this?

Bitcask is a single directory of directories of files - the easiest way to use 
multiple disks is to use the native raid feature of your operatingsystem. We 
use Solaris and ZFS to handle raid among multiple disks - this also gives us 
the opportunity to make snapshots for backup purposes and we can extend the 
filesystem on the run...

Best regards,
Karsten\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

