---
title: "Install question about riak-erlang-client"
description: ""
project: community
lastmod: 2010-12-10T00:37:24-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01768"
author_name: "Xiaopong Tran"
project_section: "mailinglistitem"
sent_date: 2010-12-10T00:37:24-08:00

---


I have been working on MongoDB, and wanted to try out Riak as our
system is also in Erlang. But the first installation got me stuck
with an unusable client.

The server is started and seems to run. So I grabbed the 
riakc-1.0.1 package, and it didn't even compile:

x...@shanghai:~/project-workspace/erlang/basho-riak-erlang-client-a1545e5$
make
./rebar get-deps
==> basho-riak-erlang-client-a1545e5 (get-deps)
Pulling protobuffs from {hg,"http://bitbucket.org/basho/protobuffs",
 "protobuffs-0.5.0"}
requesting all changes
adding changesets
adding manifests
adding file changes
added 91 changesets with 243 changes to 93 files (+2 heads)
29 files updated, 0 files merged, 0 files removed, 0 files unresolved
==> protobuffs (get-deps)
./rebar compile
==> protobuffs (compile)
Compiled src/pokemon\_pb.erl
Compiled src/protobuffs.erl
Compiled src/protobuffs\_parser.erl
Compiled src/protobuffs\_compile.erl
==> basho-riak-erlang-client-a1545e5 (compile)
Compiling src/riakclient.proto
src/riakc\_pb\_socket.erl:73: type ctx() undefined
src/riakc\_pb\_socket.erl:73: type rpb\_req() undefined
src/riakc\_pb\_socket.erl:78: type option() undefined
src/riakc\_pb\_socket.erl:79: Warning: type option() is unused
src/riakc\_pb\_socket.erl:87: Warning: type rpb\_req() is unused
src/riakc\_pb\_socket.erl:88: Warning: type ctx() is unused
make: \*\*\* [compile] Error 1



So I grabbed the repository with the command

hg clone http://bitbucket.org/basho/riak-erlang-client

and compiled it. Everything seemed to be ok, until I started
running a connection, and here's I got:



x...@shanghai:~/project-workspace/erlang/riak-erlang-client/ebin$ erl -pa
`pwd`
Erlang R13B03 (erts-5.7.4) [source] [64-bit] [smp:2:2] [rq:2]
[async-threads:0] [hipe] [kernel-poll:false]

Eshell V5.7.4 (abort with ^G)
1> code:which(riakc\_pb\_socket).
"/home/xp/project-workspace/erlang/riak-erlang-client/ebin/riakc\_pb\_socket.beam"
2> {ok, Pid} = riakc\_pb\_socket:start\_link("127.0.0.1", 8087).
{ok,<0.38.0>}
3> riakc\_pb\_socket:ping(Pid).
pong
4> Object = riakc\_obj:new(<<"groceries">>, <<"mine">>, <<"egg &
bacon">>).
{riakc\_obj,<<"groceries">>,<<"mine">>,undefined,[],
 undefined,<<"egg & bacon">>}
5> riakc\_pb\_socket:put(Pid, Object).

=ERROR REPORT==== 10-Dec-2010::15:45:55 ===
\*\* Generic server <0.38.0> terminating 
\*\* Last message in was {req,

{rpbputreq,<<"groceries">>,<<"mine">>,undefined,
 {rpbcontent,<<"egg & bacon">>,undefined,

undefined,undefined,undefined,undefined,
 undefined,undefined,undefined},
 undefined,undefined,undefined},
 60000}
\*\* When Server state ==
{state,"127.0.0.1",8087,false,false,#Port<0.627>,
 undefined,
 {[],[]},
 1,[],infinity,100}
\*\* Reason for termination == 
\*\* {'module could not be loaded',
 [{protobuffs,encode,[1,<<"groceries">>,bytes]},
 {riakclient\_pb,iolist,2},
 {riakc\_pb,encode,1},
 {riakc\_pb\_socket,send\_request,2},
 {riakc\_pb\_socket,handle\_call,3},
 {gen\_server,handle\_msg,5},
 {proc\_lib,init\_p\_do\_apply,3}]}
\*\* exception exit: undef
 in function protobuffs:encode/3
 called as protobuffs:encode(1,<<"groceries">>,bytes)
 in call from riakclient\_pb:iolist/2
 in call from riakc\_pb:encode/1
 in call from riakc\_pb\_socket:send\_request/2
 in call from riakc\_pb\_socket:handle\_call/3
 in call from gen\_server:handle\_msg/5
 in call from proc\_lib:init\_p\_do\_apply/3
6> {ok, O} = riakc\_pb\_socket:get(Pid, <<"groceries">>, <<"mine">>).
\*\* exception exit: {noproc,
 {gen\_server,call,
 [<0.38.0>,

{req,{rpbgetreq,<<"groceries">>,<<"mine">>,undefined},60000},
 infinity]}}
 in function gen\_server:call/3
7> Object.
{riakc\_obj,<<"groceries">>,<<"mine">>,undefined,[],
 undefined,<<"egg & bacon">>}
8> riakc\_obj:get\_value(Object).
\*\* exception throw: no\_value
 in function riakc\_obj:get\_value/1
9> riakc\_obj:get\_content\_type(Object).
\*\* exception throw: no\_metadata
 in function riakc\_obj:get\_metadata/1
 in call from riakc\_obj:get\_content\_type/1
10> 



So, connection to the server seemed to be fine, but then nothing
else worked.

What gives? I'm running Ubuntu 10.10.

Xiaopong



\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

