---
title: "Re: Riak on EC2, security etc"
description: ""
project: community
lastmod: 2010-08-31T14:46:01-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg00995"
mailinglist_parent_id: "msg00994"
author_name: "Timothy Perrett"
project_section: "mailinglistitem"
sent_date: 2010-08-31T14:46:01-07:00
---


Yeah thats a nice trick - I wasn't aware of that header :-)

Cheers, Tim

On 31 Aug 2010, at 22:41, francisco treacy wrote:

> Hi Tim,
> 
> The nginx trick is to send an 'X-Accel-Redirect' header from your app
> code, which will cause an internal redirect within nginx - and so use
> it to serve the resource.
> 
> In my node app this is what I've got:
> 
> # here i check for authorization credentials
> response.header 'X-Accel-Redirect', "/riak/assets/#{asset\_id}" #
> sets the header
> response.send '' # sends an empty body
> 
> The nginx config:
> 
> location /riak/ {
> internal;
> proxy\_pass http://127.0.0.1:8098/riak/;
> }
> 
> will serve http://127.0.0.1:8098/riak/assets/#{asset\_id} directly from Riak.
> 
> 
> 2010/8/31 Timothy Perrett :
>> wow! where can one obtain a recording of this webinar? very interested in 
>> the NGINX element of this.
>> 
>> Cheers, Tim
>> 
>> On 31 Aug 2010, at 18:59, Sean Cribbs wrote:
>> 
>>> A number of Basho customers and open-source users alike are using Riak to 
>>> store files. You might find the webinar I gave several weeks ago about 
>>> Riak and Rails helpful -- it includes an example of how to store uploaded 
>>> files in Riak and do internal redirects in nginx to serve the files 
>>> directly from Riak.
>> 
>> 
>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>> riak-users mailing list
>> riak-users@lists.basho.com
>> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>> 
> 


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

