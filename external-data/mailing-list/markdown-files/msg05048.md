---
title: "Secondary Index ??"
description: ""
project: community
lastmod: 2011-10-05T05:45:54-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05048"
author_name: "Roland Karlsson"
project_section: "mailinglistitem"
sent_date: 2011-10-05T05:45:54-07:00

---


Hi,

I might not look hard enough - but I cannot find how to use
the secondary indices from the riakc erlang client interface.
No example and no manual.

I need a simple example how to write an indexed object
and also a simple example how to look it up via the index.

This is my own try to write and lookup an object
It does not work :)

----------------------------------------------------------
write\_index(Pid) -> 
 
 
 Bucket = <<"persons">>,
 Key = <<"bosse">>,
 Index = {<<"lives">>, <<"sumatra">>},
 Obj = riakc\_obj:new(Bucket, Key, <<"1949">>),
 Meta = dict:store(?MD\_INDEX, Index, dict:new()),
 Obj2 = riakc\_obj:update\_metadata(Obj, Meta),
 riakc\_pb\_socket:put(Pid, Obj2).
----------------------------------------------------------
read\_index(Pid) ->
 Bucket = <<"persons">>,
 Index = <<"lives">>,
 IndexKey = <<"sumatra">>,
 riakc\_pb\_socket:get\_index(Pid, Bucket, Index, IndexKey). 
 
 
----------------------------------------------------------


/Roland

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

