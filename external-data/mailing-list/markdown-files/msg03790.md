---
title: "Re: Puppet Module for Riak"
description: ""
project: community
lastmod: 2011-06-22T16:04:26-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03790"
mailinglist_parent_id: "msg03788"
author_name: "Mark Phillips"
project_section: "mailinglistitem"
sent_date: 2011-06-22T16:04:26-07:00
---


re: puppet module - I just stumbled onto this simple puppet config
from Mårten Gustafson while digging through the irc logs for today's
recap:

https://gist.github.com/1038441

(I know some of you have already seen it but I figured I should attach
it to the thread nonetheless.)

Mark

On Wed, Jun 22, 2011 at 9:28 AM, Mark Phillips  wrote:
> If any of this ever officially makes it to a Bitbucket/GitHub repo,
> let's make sure it gets added to the "Recipes...." section on the
> wiki. :)
>
> http://wiki.basho.com/Community-Developed-Libraries-and-Projects.html#Recipes%2C-Cookbooks%2C-and-Configurations
>
> Thanks,
>
> Mark
>
> On Tue, Jun 21, 2011 at 1:23 PM, Jacques  wrote:
>> Oops, forgot to include list.  Sorry.
>>
>> ---------- Forwarded message ----------
>> From: Jacques 
>> Date: Tue, Jun 21, 2011 at 1:22 PM
>> Subject: Re: Puppet Module for Riak
>> To: Ken Perkins 
>>
>>
>> I'm very new to using puppet but I'll give you what I have.  It is just a
>> basic example.
>> The init references two erb files:
>> app.config.erb = Utilizes <%= ipaddress %> for http, https and pb addresses
>> vm.args.erb = Actually just a straight config right now.  Originally used
>> ipaddress for the the host part of the name but then realized that wasn't
>> necessary since I have dns setup correctly for each of the nodes.
>> Hopefully something to get you started.
>> Jacques
>>
>> modules/riak/manifests/init.pp
>> class riak::config {
>>   file { "/etc/riak":
>>     ensure => directory,
>>     mode => 0555,
>>   }
>>   file { "/etc/riak/app.config":
>>     ensure => present,
>>     owner => 'root',
>>     group => 'root',
>>     content => template("riak/app.config.erb"),
>>     require => [File["/etc/riak"], Class["riak::install"]],
>>     notify => Class["riak::service"],
>>   }
>>   file { "/etc/riak/vm.args":
>>     ensure => present,
>>     owner => 'root',
>>     group => 'root',
>>     content => template("riak/vm.args.erb"),
>>     require => [File["/etc/riak"], Class["riak::install"]],
>>     notify => Class["riak::service"],
>>   }
>>   file { "/export/riak":
>>     ensure => directory,
>>     owner => 'riak',
>>     group => 'riak',
>>     require => Class["riak::install"],
>>   }
>> }
>> class riak::install {
>>   package {"erlang":
>>     ensure => present,
>>     require => Class["repos"],
>>   }
>>   package {"riak":
>>     ensure => present,
>>     require => Package["erlang"],
>>   }
>> }
>>
>> class riak::service {
>>   service {"riak":
>>     ensure => running,
>>     hasstatus => false,
>>     hasrestart => true,
>>     enable => true,
>>     require => Class["riak::config"]
>>   }
>> }
>> class riak {
>>   require repos
>>   include riak::install, riak::config, riak::service
>> }
>>
>>
>>
>>
>> On Tue, Jun 21, 2011 at 9:44 AM, Ken Perkins  wrote:
>>>
>>> I've been searching and have had little success in finding a Riak Module
>>> for puppet, so I wanted to turn to the community.
>>> Are any of you using puppet to manage your riak boxes? Please share
>>> anything if you do! It'd be great to have something to start from.
>>> Thanks!
>>> --Ken
>>> clipboard, inc.
>>>
>>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>>> riak-users mailing list
>>> riak-users@lists.basho.com
>>> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>>>
>>
>>
>>
>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>> riak-users mailing list
>> riak-users@lists.basho.com
>> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>>
>>
>

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

