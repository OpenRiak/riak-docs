---
title: "Riak crash on 0.14.2 riak_kv_stat terminating"
description: ""
project: community
lastmod: 2011-06-18T18:55:21-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03747"
author_name: "Jeremy Raymond"
project_section: "mailinglistitem"
sent_date: 2011-06-18T18:55:21-07:00

---


Hello,

I have a 3 node Riak 0.14.2 cluster from the deb packages running on Ubuntu
10.10. I had a node go down with the following error from the
sasl-error.log. Ideas on tracking down the cause?

- Jeremy


=ERROR REPORT==== 17-Jun-2011::16:26:46 ===
\*\* Generic server riak\_kv\_stat terminating
\*\* Last message in was {'$gen\_cast',{update,vnode\_get,63475547206}}
\*\* When Server state == {state,
 {spiral,63475547266,

[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,

 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},
 {spiral,63475547266,

[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,

 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},
 2846696,42859,35845,31080,
 {slide,63475532874,60,60,

"/tmp/riak/slide-data/474/1308.328066.57288",
 {file\_descriptor,prim\_file,
 {#Port<0.64895>,24}},
 63475547205},
 {slide,63475532874,60,60,

"/tmp/riak/slide-data/474/1308.328066.59517",
 {file\_descriptor,prim\_file,
 {#Port<0.64896>,13}},
 63475547205},
 {spiral,63475547266,

[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,

 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},
 978,4,
 {spiral,63475547266,

[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,

 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},
 21375,21}
\*\* Reason for termination ==
\*\* {badarg,[{erlang,hd,[[]]},
 {spiraltime,incr,3},
 {riak\_kv\_stat,spiral\_incr,3},
 {riak\_kv\_stat,handle\_cast,2},
 {gen\_server2,handle\_msg,7},
 {proc\_lib,init\_p\_do\_apply,3}]}

=CRASH REPORT==== 17-Jun-2011::16:26:46 ===
 crasher:
 initial call: gen:init\_it/7
 pid: <0.151.0>
 registered\_name: riak\_kv\_stat
 exception exit:
{badarg,[{erlang,hd,[[]]},{spiraltime,incr,3},{riak\_kv\_stat,spiral\_incr,3},{riak\_kv\_stat,handle\_cast,2},{gen\_server2,handle\_msg,7},{proc\_lib,init\_p\_do\_apply,3}]}
 in function gen\_server2:terminate/6
 in call from proc\_lib:init\_p\_do\_apply/3
 ancestors: [riak\_kv\_sup,<0.138.0>]
 messages:
[{$gen\_cast,{update,vnode\_get,63475547206}},{$gen\_cast,{update,vnode\_get,63475547206}},{$gen\_cast,{update,vnode\_get,63475547206}},{$gen\_cast,{update,vnode\_get,63475547206}},{$gen\_cast,{update,vnode\_get,63475547206}},{$gen\_cast,{update,vnode\_get,63475547206}},{$gen\_cast,{update,vnode\_get,63475547206}},{$gen\_cast,{update,vnode\_get,63475547206}},{$gen\_cast,{update,mapper\_end,63475547206}},{$gen\_cast,{update,vnode\_get,63475547206}},{$gen\_cast,{update,mapper\_end,63475547206}},{$gen\_cast,{update,vnode\_get,63475547206}},{$gen\_cast,{update,vnode\_get,63475547206}},{$gen\_cast,{update,vnode\_get,63475547206}},{$gen\_cast,{update,vnode\_get,63475547206}},{$gen\_cast,{update,vnode\_get,63475547206}},{$gen\_cast,{update,vnode\_get,63475547206}},{$gen\_cast,{update,vnode\_get,63475547206}},{$gen\_cast,{update,vnode\_get,63475547206}},{$gen\_cast,{update,vnode\_get,63475547206}},{$gen\_cast,{update,vnode\_put,63475547206}}]
 links: [#Port<0.64896>,<0.145.0>,#Port<0.64895>]
 dictionary: []
 trap\_exit: true
 status: running
 heap\_size: 2584
 stack\_size: 24
 reductions: 81329187
 neighbours:

=SUPERVISOR REPORT==== 17-Jun-2011::16:26:46 ===
 Supervisor: {local,riak\_kv\_sup}
 Context: child\_terminated
 Reason:
{badarg,[{erlang,hd,[[]]},{spiraltime,incr,3},{riak\_kv\_stat,spiral\_incr,3},{riak\_kv\_stat,handle\_cast,2},{gen\_server2,handle\_msg,7},{proc\_lib,init\_p\_do\_apply,3}]}
 Offender:
[{pid,<0.151.0>},{name,riak\_kv\_stat},{mfa,{riak\_kv\_stat,start\_link,[]}},{restart\_type,permanent},{shutdown,5000},{child\_type,worker}]
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

