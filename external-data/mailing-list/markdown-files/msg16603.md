---
title: "Help"
description: ""
project: community
lastmod: 2015-10-03T09:03:28-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16603"
author_name: "Tyler Weir"
project_section: "mailinglistitem"
sent_date: 2015-10-03T09:03:28-07:00

---




> On Oct 3, 2015, at 12:00 PM, riak-users-requ...@lists.basho.com wrote:
> 
> Send riak-users mailing list submissions to
> riak-users@lists.basho.com
> 
> To subscribe or unsubscribe via the World Wide Web, visit
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
> or, via email, send a message with subject or body 'help' to
> riak-users-requ...@lists.basho.com
> 
> You can reach the person managing the list at
> riak-users-ow...@lists.basho.com
> 
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of riak-users digest..."
> 
> 
> Today's Topics:
> 
> 1. Re: Using Riak on systemd based Ubuntu (Matthew Brender)
> 2. Re: Riak CS - Unable to create/view bucket details using
> dragon disk (G)
> 3. Riak Recap - October 2, 2015 (Matthew Brender)
> 4. Re: adding auth user not valid (Outback Dingo)
> 
> 
> ----------------------------------------------------------------------
> 
> Message: 1
> Date: Fri, 2 Oct 2015 12:01:44 -0400
> From: Matthew Brender 
> To: Matthew Hall 
> Cc: riak-users 
> Subject: Re: Using Riak on systemd based Ubuntu
> Message-ID:
> 
> Content-Type: text/plain; charset=UTF-8
> 
> Hey Matthew,
> 
> It seems you ran into some documentation gaps that we should address.
> Please open up one or more of them on the docs repo when you can [1]
> 
> Could you restate what specifically someone can help you do?
> 
> [1] 
> https://github.com/basho/basho\_docs/issues?utf8=%E2%9C%93&q=is%3Aissue+is%3Aopen+riak+cs
> 
> Thanks!
> Matt Brender | Developer Advocacy Lead
> Basho Technologies
> t: @mjbrender
> 
> 
>> On Wed, Sep 30, 2015 at 7:23 PM, Matthew Hall  wrote:
>> Hello List,
>> 
>> Today I tried to get the following items to work in Ubuntu 15.04 Vivid with
>> systemd based SysV compatibility to run the init scripts:
>> 
>> Riak 2.1.1
>> Stanchion 2.0.0
>> Riak CS 2.0.1
>> Riak CS Control 1.0.2
>> 
>> My app.config files are here for reference:
>> 
>> https://gist.github.com/megahall/676ca0410af4aacc4f74
>> 
>> When I attempted this, both Stanchion and Riak CS fail to stay running for 
>> the
>> 15 second expected time in the init scripts.
>> 
>> So I read through the "stanchion console" and "riak-cs console" output.
>> 
>> There were some backtraces there complaining about EACCES coming via 
>> mochiweb.
>> 
>> Upon modifying /usr/sbin/stanchion and /usr/sbin/riak-cs to add an strace -f
>> to track the system calls, I determined that there is an EACCES error raised
>> by attempting to bind some sub-process socket onto Port 80. It is hard to see
>> what sub-thread or sub-process exactly was the cause.
>> 
>> This is very confusing because none of my configuration mentions Port 80 at
>> all.
>> 
>> The configuration works OK in Ubuntu 14.10 without systemd. So now I am
>> wondering if anybody has figured out how to get it to work right inside of
>> systemd with some .service file examples and so on. It's really important for
>> the project I am trying to get done.
>> 
>> Thanks,
>> Matthew.
>> 
>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>> riak-users mailing list
>> riak-users@lists.basho.com
>> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
> 
> 
> 
> ------------------------------
> 
> Message: 2
> Date: Fri, 2 Oct 2015 09:35:03 -0700 (MST)
> From: G 
> To: riak-users@lists.basho.com
> Subject: Re: Riak CS - Unable to create/view bucket details using
> dragon disk
> Message-ID: <1443803703469-4033524.p...@n3.nabble.com>
> Content-Type: text/plain; charset=us-ascii
> 
> Hey Johan,
> 
> I have executed s3cmd with --debug option. 
> 
> Please find the output.
> 
> Test access with supplied credentials? [Y/n] Y
> Please wait, attempting to list all buckets...
> DEBUG: SignHeaders: 'GET\n\n\n\nx-amz-date:Fri, 02 Oct 2015 16:32:44
> +0000\n/'
> DEBUG: CreateRequest: resource[uri]=/
> DEBUG: SignHeaders: 'GET\n\n\n\nx-amz-date:Fri, 02 Oct 2015 16:32:44
> +0000\n/'
> DEBUG: Processing request, please wait...
> DEBUG: get\_hostname(None): 172.31.44.38
> DEBUG: format\_uri(): http://172.31.44.38/?delimiter=/
> DEBUG: Sending request method\_string='GET',
> uri='http://172.31.44.38/?delimiter=/', headers={'content-length': '0',
> 'Authorization': 'AWS access-key:OeIcaJSH58eWgIlLiyQBgzN16Pc=',
> 'x-amz-date': 'Fri, 02 Oct 2015 16:32:44 +0000'}, body=(0 bytes)
> DEBUG: Response: {'status': 403, 'headers': {'date': 'Fri, 02 Oct 2015
> 16:32:44 GMT', 'content-length': '154', 'content-type': 'application/xml',
> 'server': 'Riak CS'}, 'reason': 'Forbidden', 'data': 'xml version="1.0"
 encoding="UTF-8"?>`AccessDenied`Access
> Denied'}
> DEBUG: S3Error: 403 (Forbidden)
> DEBUG: HttpHeader: date: Fri, 02 Oct 2015 16:32:44 GMT
> DEBUG: HttpHeader: content-length: 154
> DEBUG: HttpHeader: content-type: application/xml
> DEBUG: HttpHeader: server: Riak CS
> DEBUG: ErrorXML: Code: 'AccessDenied'
> DEBUG: ErrorXML: Message: 'Access Denied'
> DEBUG: ErrorXML: Resource: None
> DEBUG: ErrorXML: RequestId: None
> ERROR: Test failed: 403 (AccessDenied): Access Denied
> 
> Do you have any idea about this error?
> 
> 
> 
> 
> --
> View this message in context: 
> http://riak-users.197444.n3.nabble.com/Riak-CS-Unable-to-create-view-bucket-details-using-dragon-disk-tp4033494p4033524.html
> Sent from the Riak Users mailing list archive at Nabble.com.
> 
> 
> 
> ------------------------------
> 
> Message: 3
> Date: Fri, 2 Oct 2015 13:17:22 -0400
> From: Matthew Brender 
> To: riak-users 
> Subject: Riak Recap - October 2, 2015
> Message-ID:
> 
> Content-Type: text/plain; charset="utf-8"
> 
> Riak Recap time. The user lists have been quieter than usual, so we will
> use this round to share some other news as well. Send me feedback if you
> ever have articles to share or recommendations for topics!
> 
> ## Latest Releases
> \* The .NET client upgraded to 2.2.0 [0]. Thanks to Luke and community
> contributors!
> \* Basho Data Platform 1.0.0 is out there [1] and we love to see your code
> using it - share with us [2]
> \* We also continue to update documentation for our open source Spark
> Connector, that leverages an updated 2i query for parallel extract from BDP
> [3]
> 
> ## RICON!
> \* RICON speakers were announced and we have some incredible ones. As a
> community member, you can take the $100 off your ticket with the Basho100
> code. This discount code will expire on October 31. Click here to use it:
> http://bit.ly/ricon15u
> 
> ## Community Update
> \* Interested in helping people learn how to build applications on Riak or
> Riak Core? You can find requests for Help Wanted in the Basho Community
> Repo [4]
> \* The discussion on repo naming convention and branching strategy will
> close soon [5]
> 
> ## Exciting Pull Requests
> \* TBK15 opened a PR on riak\_core that has it compiling on Erlang 18! [6]
> \* Muntasir is due to open a PR that includes his adaptive middleware that
> tunes consistency on Riak KV. Read the thread for more details [7]
> 
> ## Recently Answered
> \* Ciprian provides Fast Track guidance for Riak S2 (aka Riak CS) [8] and
> opens a ticket to address it in docs [9]
> \* Outback Dingo has a few threads on setting up Riak S2 (aka Riak CS) on
> freeBSD 10 [10]
> \* Kota gives a detailed explanation of why sharing memory across Riak S2
> and Riak KV is not recommended, but is possible [11]
> \* Magnus correlates a Solr shutdown error with the need for more memory
> dedicated to it in riak.conf [12]
> 
> ## Jobs for Riak Users
> \* Riot Games tweeted about an open software engineering position that our
> community may be interested in [13]
> \* We, at Basho, have opened up a few software engineering roles as well [14]
> 
> ## Weekend Reads
> \* Scott Lystig Fritchie continues to update the Machi documentation on
> GitHub. If you're curious about Chain Replication and the future of large
> object storage in Riak, it's well worth a read [15]
> 
> Have a great weekend,
> Matt Brender
> Developer Advocate @ Basho
> @mjbrender
> 
> [0] https://github.com/basho/riak-dotnet-client/releases/tag/v2.2.0
> [1] http://docs.basho.com/dataplatform/latest/
> [2] https://github.com/basho-labs/the-basho-community/issues/62
> [3] https://github.com/basho/spark-riak-connector
> [4]
> https://github.com/basho-labs/the-basho-community/labels/status%2Fhelp-wanted
> [5] https://github.com/basho-labs/the-basho-community/issues/74
> [6] https://github.com/basho/riak\_core/pull/785
> [7]
> http://lists.basho.com/pipermail/riak-users\_lists.basho.com/2015-September/017596.html
> [8]
> http://lists.basho.com/pipermail/riak-users\_lists.basho.com/2015-September/017595.html
> [9] https://github.com/basho/basho\_docs/issues/1830
> [10]
> http://lists.basho.com/pipermail/riak-users\_lists.basho.com/2015-September/thread.html
> [11]
> http://lists.basho.com/pipermail/riak-users\_lists.basho.com/2015-September/017583.html
> [12]
> http://lists.basho.com/pipermail/riak-users\_lists.basho.com/2015-September/017591.html
> [13] http://riotgames.com/careers/10838
> [14] http://bashojobs.theresumator.com/
> [15] https://github.com/basho/machi/tree/master/doc
> 
> Matt Brender | Developer Advocacy Lead
> Basho Technologies
> t: @mjbrender
> c: +1 617.817.3195
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL: 
> 
> 
> ------------------------------
> 
> Message: 4
> Date: Sat, 3 Oct 2015 13:28:34 +1000
> From: Outback Dingo 
> To: Shunichi Shinohara 
> Cc: riak-users 
> Subject: Re: adding auth user not valid
> Message-ID:
> 
> Content-Type: text/plain; charset="utf-8"
> 
> On Tue, Sep 29, 2015 at 11:01 AM, Shunichi Shinohara 
> wrote:
> 
>> Hi Outback,
>> 
>> Sorry for very late response.
>> It seems that riak-cs doesn't/can't communicate with stanchion node.
>> There are a couple of possible reasons:
>> 
>> - admin.key and admin.secret should be set both in riak-cs and stanchion
>> - stanchion\_host should be set properly as stanchion node's listen
>> configuration
>> - servers that riak-cs node and stanchion nodes are running should be
>> communicate by TCP.
>> 
>> I think packet capture (by tcpdump or wireshark or...) is useful to
>> investigate the communication between riak-cs and stanchion.
>> 
>> Thanks,
>> Shino
> 
> 
> more like ENOTENOUGHNODES..... pretty perplexing to chase down when you
> think somethings running and its not....
> anyway i got it sorted out thanks,.
> 
> 
> 
>> 
>> 2015-09-15 13:21 GMT+09:00 Outback Dingo :
>>> seems the docs with auth creds is invalid... or im still broken...
>>> 
>>> 
>>> 
>>> curl -XPOST http://localhost:8080/riak-cs/user \
>>> -H 'Content-Type: application/json' \
>>> -d '{"email":"ad...@admin.com", "name":"admin"}'
>>> 
>>> 
>>> returns
>>> 
>>> curl -H 'Content-Type: application/json' -X POST
>>> http://localhost:8080/riak-cs/user --data '{"email":"ad...@admin.com",
>>> "name":"admin"}'
>>> 
>>> 500 Internal Server
>>> ErrorInternal Server Error
=====================

The server
>>> encountered an error while processing this
>>> requestroot@vmbsd:/usr/local/etc/riak-cs #
>>> 
>>> and the log shows
>>> 2015-09-15 14:20:33.678 [error] <0.9846.4> Webmachine error at path
>>> "/riak-cs/user" :
>> {error,{error,{badmatch,{error,malformed\_xml}},[{riak\_cs\_s3\_response,xml\_error\_code,1,[{file,"src/riak\_cs\_s3\_response.erl"},{line,335}]},{riak\_cs\_s3\_r
>> esponse,error\_response,1,[{file,"src/riak\_cs\_s3\_response.erl"},{line,249}]},{riak\_cs\_wm\_user,accept\_json,2,[{file,"src/riak\_cs\_wm\_user.erl"},{line,119}]},{webmachine\_resource,resource\_call,3,[{file,"src/webmachine\_resource.erl"},{line,1
>> 86}]},{webmachine\_resource,do,3,[{file,"src/webmachine\_resource.erl"},{line,142}]},{webmachine\_decision\_core,resource\_call,...},...]}}
>>> in riak\_cs\_s3\_response:xml\_error\_code/1 line 335
>>> 
>>> 
>>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>>> riak-users mailing list
>>> riak-users@lists.basho.com
>>> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL: 
> 
> 
> ------------------------------
> 
> Subject: Digest Footer
> 
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
> 
> 
> ------------------------------
> 
> End of riak-users Digest, Vol 75, Issue 4
> \*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

