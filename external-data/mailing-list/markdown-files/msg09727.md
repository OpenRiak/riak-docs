---
title: "Re: store performance"
description: ""
project: community
lastmod: 2013-01-03T09:07:02-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg09727"
mailinglist_parent_id: "msg09726"
author_name: "Brian Roach"
project_section: "mailinglistitem"
sent_date: 2013-01-03T09:07:02-08:00
---


On Thu, Jan 3, 2013 at 10:01 AM, Brian Roach  wrote:
> On Wed, Jan 2, 2013 at 1:04 PM, catchme  wrote:
>> Hello,
>> I am trying to store 1543400 records using the memory backend.
>> I have a basic cluster setup with 2 nodes..
>> I am using the pbcClient
>> Bucket b = client.createBucket("test\_bucket1").nVal(1).execute();
>> //store object
>> StoreObject storeObject =
>> buckt.store((String) key,buf);
>> 
>> storeObject.dw(Quora.ONE).returnBody(false).execute();
>>
>> The store takes forever..
>> I have riak installed on RHEL 6
>>
>> Any suggestions?
>
> Multi-threading. A single client thread is going to max out somewhere
> in the neighborhood of 100 per second best case. (give or take,
> depending on network, size of objects, etc).

Sorry for the double reply - you also do not want to be calling
`createBucket()` every time. This fetches/sends the bucket information
from/to Riak. You want to create the `Bucket` object once then pass it
around. If that's not possible due to how you have written your code,
use the `fetchBucket()` instead along with
`lazyLoadBucketProperties()` so as not to be querying the bucket
parameters each time.

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

