---
title: "Re: Solr Indexing and required fields."
description: ""
project: community
lastmod: 2012-05-16T11:01:25-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07468"
mailinglist_parent_id: "msg07466"
author_name: "Eric Boyer"
project_section: "mailinglistitem"
sent_date: 2012-05-16T11:01:25-07:00
---


Blech, sorry for the double post.

I can understand wanting to make Search more focused on indexing KV
data instead of a 'backdoor'. I was a little confused at first about
where the search data was being stored.

We currently don't store the actual data in Riak because after the
Riak Search we still have to check permissions and retrieve the data
from our Relational DB. We've put searching into Riak to better
distribute the load, and have a quicker update to the search indexes
instead of having to commit/optimize with Solr. It was very convenient
to just point to the Riak search/update endpoint and speak the same
protocol even if the semantics are slightly different.

Eric

On Wed, May 16, 2012 at 12:19 PM, Alexander Sicular  wrote:
> I wouldn't mind. I use search ad-hock via the command line but mainly as an
> input mechanism into an m/r.
>
> On Wed, May 16, 2012 at 12:06 PM, Ryan Zezeski  wrote:
>>
>>
>>
>> On Tue, May 15, 2012 at 3:06 PM, Eric Boyer  wrote:
>>>
>>>
>>> I would have expected these 2 scenarios to result in the same error.
>>>
>>> Anything that I'm missing or is it just my assumption about how
>>> required fields are handled is flawed?
>>>
>>
>> Eric,
>>
>> I can confirm that the required fields are not enforced, except for the
>> unique id field [1].  The `expected\_binaries` is actually just a general
>> parse error, not a recognition of a required field missing.  I created an
>> issue.
>>
>> https://github.com/basho/riak\_search/issues/106
>>
>> This brings up another point.  In order to make Search more focused on
>> indexing KV data I want to remove the solr indexing support.  The Solr
>> support in Search is only a subset of that in proper Solr and it doesn't
>> have the same semantics for some of the features it does implement.
>>  Furthermore, it puts these docs in a special bucket that isn't obvious and
>> kind of acts like a backdoor into KV.  You could still accomplish what you
>> are doing here, the difference is that you would install a Search hook on
>> the bucket and then write the XML (or JSON) to that bucket and the Search
>> hook would automatically extract the fields and analyze based on the schema.
>>  What you would lose is ability to do multiple docs in one go and using a
>> regular Solr client (I'm guessing Search's end point supports that but I've
>> never tested it).
>>
>> Does that make any sense?  How would you feel if the solr indexing
>> functionality was removed?
>>
>> -Z
>>
>>
>> [1]: https://github.com/basho/riak\_search/blob/1.1.2/src/riak\_solr\_search\_client.erl#L69
>>
>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>> riak-users mailing list
>> riak-users@lists.basho.com
>> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>>
>

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

