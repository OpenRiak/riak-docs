---
title: "Riak getting very slow"
description: ""
project: community
lastmod: 2017-06-16T13:50:38-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg18266"
author_name: "amol.zamb...@bookmypacket.com"
project_section: "mailinglistitem"
sent_date: 2017-06-16T13:50:38-07:00

---


Hi All,

We are running riak kv 2.0.1 on 5 node, all are high end conf i.e it does
not have any load. All not have solr on.

Still, We getting very high latency

After Some investigation, i have found what will be a possible issue,
We have one bucket with solr index, solr index's each document has about
100+ dynamic fields in the Solr schema 

I have read two issue related to the same problem as below
https://github.com/basho/yokozuna/issues/719
https://github.com/basho/yokozuna/issues/330

This specify that you should not have more than 60 dynamic fields else riak
will get slow because of solr index creation will be very slow

Below is riak-admin status related to solr
rings\_reconciled\_total : 80
search\_index\_fail\_count : 1011
search\_index\_fail\_one : 5
search\_index\_latency\_95 : 36450099
search\_index\_latency\_99 : 54188877
search\_index\_latency\_999 : 54188877
search\_index\_latency\_max : 54188877
search\_index\_latency\_mean : 15818891
search\_index\_latency\_median : 17226576
search\_index\_latency\_min : 1919
search\_index\_throughput\_count : 36125
search\_index\_throughput\_one : 19
search\_query\_fail\_count : 29
search\_query\_fail\_one : 0
search\_query\_latency\_95 : 0
search\_query\_latency\_99 : 0
search\_query\_latency\_999 : 0
search\_query\_latency\_max : 0
search\_query\_latency\_mean : 0
search\_query\_latency\_median : 0
search\_query\_latency\_min : 0
search\_query\_throughput\_count : 3455

Also related to port time waiting as below
netstat -anp | grep :8093 | grep EST | wc -l
20
netstat -anp | grep :8093 | grep TIME\_WAIT | wc -l
21

Please help us find out issue and what will be possible solution

Thanks,
Amol




--
View this message in context: 
http://riak-users.197444.n3.nabble.com/Riak-getting-very-slow-tp4035209.html
Sent from the Riak Users mailing list archive at Nabble.com.

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

