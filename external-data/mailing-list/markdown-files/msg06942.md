---
title: "Re: Slow performance on getting via 2i"
description: ""
project: community
lastmod: 2012-03-12T04:37:07-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06942"
mailinglist_parent_id: "msg06925"
author_name: "ivenhov"
project_section: "mailinglistitem"
sent_date: 2012-03-12T04:37:07-07:00
---


Excuse my doubel-posting and replying to my own thread.
I found this in PBClientAdapter class in fetchIndex method

 final MapReduce mr = new IndexMapReduce(this, indexQuery);

 mr.addReducePhase(NamedErlangFunction.REDUCE\_IDENTITY,
Args.REDUCE\_PHASE\_ONLY\_1);
 // only return the key, to match the http rest api
 mr.addReducePhase(new JSSourceFunction("function(v) { return
v.map(function(e) { return e[1]; }); }"), Args.REDUCE\_PHASE\_ONLY\_1);

This means it uses map reduce and JavaScript for protocol buffers.
Would that be the reason of slow performance with thousands of keys?
In my case it more performant to list all the keys than do 2i query.

I'm using java client 1.0.4 and riak cluster 1.1.1
Any feedback appreciated.

Daniel

--
View this message in context: 
http://riak-users.197444.n3.nabble.com/Slow-performance-on-getting-via-2i-tp3812664p3818984.html
Sent from the Riak Users mailing list archive at Nabble.com.

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

