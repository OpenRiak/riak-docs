---
title: "General Memory/Performance Tuning Guidelines"
description: ""
project: community
lastmod: 2011-05-23T11:05:21-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03388"
author_name: "Gordon Tillman"
project_section: "mailinglistitem"
sent_date: 2011-05-23T11:05:21-07:00

---


Greetings!

We are working with a riaksearch cluster that uses innostore as the primary 
backend in tandem with merge\_index that is required by search. From reading 
the Basho wiki it looks like the following are the most important factors 
affecting memory and performance:

 • innostore
 • put data\_home\_dir and log\_group\_home\_dir on different spindles
 • noatime
 • buffer\_pool\_size
 • flush\_method
 • merge\_index
 • data\_root
 • buffer\_rollover\_size
 • max\_compact\_segments
 • segment\_file\_buffer\_size
 • segment\_full\_read\_size
 • segment\_block\_size

Ideally, data\_home\_dir, log\_group\_home\_dir, and data\_root would all be on 
different spindles, but if you had just 2 disks available what would you 
recommend? Would it be best to have data\_home\_dir and data\_root on one and 
then log\_group\_home\_dir on the other?

in calculating the proper setting for buffer\_pool\_size you are directed to 
allocate 60-80 percent of available RAM. So lets assume you want to take the 
remaining 20-40% of available RAM and split it up between innostore and 
merge\_index? 

Would it be best to give each of them half of that value?

Determining the approximate memory requirements for merge\_index isn't (to me) 
real obvious. I looks like the following all have an effect:

 \* buffer\_rollover\_size
 \* buffer\_delayed\_write\_size
 \* max\_compact\_segments
 \* segment\_query\_read\_ahead\_size
 \* segment\_compaction\_read\_ahead\_size
 \* segment\_full\_read\_size
 \* segment\_block\_size
 \* segment\_values\_staging\_size

Is there a formula for determining the (approximate) proper values to use given 
a certain amount of available RAM?

Thanks in advance for any advice. Sorry for all the questions!

--gordon



\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

