---
title: "Problems writing objects to an half full bucket"
description: ""
project: community
lastmod: 2012-03-05T18:51:52-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06883"
author_name: "Marco Monteiro"
project_section: "mailinglistitem"
sent_date: 2012-03-05T18:51:52-08:00

---


Hello!

I have a riak cluster and I'm seeing a write fail rate of 10% to 30%
(varies with the nodes). At the moment I am writing about
300 new objects per second to the same bucket. If I direct the write to
a new (empty) bucket the problem goes away and I don't see any failure.

The non-empty bucket has between 2 and 3 million objects. Each object
has between 4 and 8 secondary indexes (most have 4).

When we started the system, yesterday, it handled a peak of about 1000
writes per second without problems, with the same hardware.

The cluster has 6 nodes, all debian with Riak 1.0.3. We tried Riak 1.1 at
first,
but had the known map-reduce problem and reverted back.

I requested help on the IRC channel and pharkmillups suggested that Riak is
just trying to write too many things to the disk, given the secondary index.

This is an issue report but if someone has any idea of how a change to the
configuration can fix this, please do tell. I would also like to know what
the
problem is (why this happens) and if it can be fixed in the next few days
with maybe a new release of Riak 1.1, along with the fixes for the
map-reduce
problems.

Thanks,
Marco
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

