---
title: "Re: Python library: Error with counters"
description: ""
project: community
lastmod: 2014-08-17T10:25:24-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14678"
mailinglist_parent_id: "msg14677"
author_name: "Alex De la rosa"
project_section: "mailinglistitem"
sent_date: 2014-08-17T10:25:24-07:00
---


Murphy's law... as soon as I post it, as soon as I found why it failed... I
was missing the following libraries on my Ubuntu Server:

aptitude install build-essential libssl-dev libffi-dev python-dev

After this, the "cryptography" package got installed like a charm.

Thanks!
Alex


On Sun, Aug 17, 2014 at 7:12 PM, Alex De la rosa 
wrote:

> Hi Sean,
>
> I tried to install version 2.1.0rc1 as you suggested, but "pip" gives a
> compilation error and doesn't install it, here you have the log:
>
> # pip install riak==2.1.0rc1
> Downloading/unpacking riak==2.1.0rc1
> Downloading riak-2.1.0rc1.tar.gz (135kB): 135kB downloaded
> Running setup.py (path:/tmp/pip\_build\_root/riak/setup.py) egg\_info for
> package riak
>
> Downloading/unpacking riak-pb>=2.0.0 (from riak==2.1.0rc1)
> Downloading riak\_pb-2.0.0.16.tar.gz
> Running setup.py (path:/tmp/pip\_build\_root/riak-pb/setup.py) egg\_info
> for package riak-pb
>
> Downloading/unpacking pyOpenSSL>=0.14 (from riak==2.1.0rc1)
> Downloading pyOpenSSL-0.14.tar.gz (128kB): 128kB downloaded
> Running setup.py (path:/tmp/pip\_build\_root/pyOpenSSL/setup.py) egg\_info
> for package pyOpenSSL
>
> warning: no previously-included files matching '\*.pyc' found anywhere
> in distribution
> no previously-included directories found matching 'doc/\_build'
> Requirement already satisfied (use --upgrade to upgrade):
> protobuf>=2.4.1,<2.6.0 in /usr/local/lib/python2.7/dist-packages (from
> riak-pb>=2.0.0->riak==2.1.0rc1)
> Downloading/unpacking cryptography>=0.2.1 (from
> pyOpenSSL>=0.14->riak==2.1.0rc1)
> Downloading cryptography-0.5.3.tar.gz (319kB): 319kB downloaded
> Running setup.py (path:/tmp/pip\_build\_root/cryptography/setup.py)
> egg\_info for package cryptography
> c/\_cffi\_backend.c:2:20: fatal error: Python.h: No such file or
> directory
> #include 
> ^
> compilation terminated.
> Traceback (most recent call last):
> File "", line 17, in 
> File "/tmp/pip\_build\_root/cryptography/setup.py", line 174, in
> 
> "test": PyTest,
> File "/usr/lib/python2.7/distutils/core.py", line 111, in setup
> \_setup\_distribution = dist = klass(attrs)
> File "/usr/lib/python2.7/dist-packages/setuptools/dist.py", line
> 239, in \_\_init\_\_
> self.fetch\_build\_eggs(attrs.pop('setup\_requires'))
> File "/usr/lib/python2.7/dist-packages/setuptools/dist.py", line
> 264, in fetch\_build\_eggs
> replace\_conflicting=True
> File "/usr/lib/python2.7/dist-packages/pkg\_resources.py", line 620,
> in resolve
> dist = best[req.key] = env.best\_match(req, ws, installer)
> File "/usr/lib/python2.7/dist-packages/pkg\_resources.py", line 858,
> in best\_match
> return self.obtain(req, installer) # try and download/install
> File "/usr/lib/python2.7/dist-packages/pkg\_resources.py", line 870,
> in obtain
> return installer(requirement)
> File "/usr/lib/python2.7/dist-packages/setuptools/dist.py", line
> 314, in fetch\_build\_egg
> return cmd.easy\_install(req)
> File
> "/usr/lib/python2.7/dist-packages/setuptools/command/easy\_install.py", line
> 616, in easy\_install
> return self.install\_item(spec, dist.location, tmpdir, deps)
> File
> "/usr/lib/python2.7/dist-packages/setuptools/command/easy\_install.py", line
> 646, in install\_item
> dists = self.install\_eggs(spec, download, tmpdir)
> File
> "/usr/lib/python2.7/dist-packages/setuptools/command/easy\_install.py", line
> 834, in install\_eggs
> return self.build\_and\_install(setup\_script, setup\_base)
> File
> "/usr/lib/python2.7/dist-packages/setuptools/command/easy\_install.py", line
> 1040, in build\_and\_install
> self.run\_setup(setup\_script, setup\_base, args)
> File
> "/usr/lib/python2.7/dist-packages/setuptools/command/easy\_install.py", line
> 1028, in run\_setup
> raise DistutilsError("Setup script exited with %s" % (v.args[0],))
> distutils.errors.DistutilsError: Setup script exited with error:
> command 'x86\_64-linux-gnu-gcc' failed with exit status 1
> Complete output from command python setup.py egg\_info:
> c/\_cffi\_backend.c:2:20: fatal error: Python.h: No such file or
> directory
>
> #include 
>
> ^
>
> compilation terminated.
>
> Traceback (most recent call last):
>
> File "", line 17, in 
>
> File "/tmp/pip\_build\_root/cryptography/setup.py", line 174, in 
>
> "test": PyTest,
>
> File "/usr/lib/python2.7/distutils/core.py", line 111, in setup
>
> \_setup\_distribution = dist = klass(attrs)
>
> File "/usr/lib/python2.7/dist-packages/setuptools/dist.py", line 239, in
> \_\_init\_\_
>
> self.fetch\_build\_eggs(attrs.pop('setup\_requires'))
>
> File "/usr/lib/python2.7/dist-packages/setuptools/dist.py", line 264, in
> fetch\_build\_eggs
>
> replace\_conflicting=True
>
> File "/usr/lib/python2.7/dist-packages/pkg\_resources.py", line 620, in
> resolve
>
> dist = best[req.key] = env.best\_match(req, ws, installer)
>
> File "/usr/lib/python2.7/dist-packages/pkg\_resources.py", line 858, in
> best\_match
>
> return self.obtain(req, installer) # try and download/install
>
> File "/usr/lib/python2.7/dist-packages/pkg\_resources.py", line 870, in
> obtain
>
> return installer(requirement)
>
> File "/usr/lib/python2.7/dist-packages/setuptools/dist.py", line 314, in
> fetch\_build\_egg
>
> return cmd.easy\_install(req)
>
> File
> "/usr/lib/python2.7/dist-packages/setuptools/command/easy\_install.py", line
> 616, in easy\_install
>
> return self.install\_item(spec, dist.location, tmpdir, deps)
>
> File
> "/usr/lib/python2.7/dist-packages/setuptools/command/easy\_install.py", line
> 646, in install\_item
>
> dists = self.install\_eggs(spec, download, tmpdir)
>
> File
> "/usr/lib/python2.7/dist-packages/setuptools/command/easy\_install.py", line
> 834, in install\_eggs
>
> return self.build\_and\_install(setup\_script, setup\_base)
>
> File
> "/usr/lib/python2.7/dist-packages/setuptools/command/easy\_install.py", line
> 1040, in build\_and\_install
>
> self.run\_setup(setup\_script, setup\_base, args)
>
> File
> "/usr/lib/python2.7/dist-packages/setuptools/command/easy\_install.py", line
> 1028, in run\_setup
>
> raise DistutilsError("Setup script exited with %s" % (v.args[0],))
>
> distutils.errors.DistutilsError: Setup script exited with error: command
> 'x86\_64-linux-gnu-gcc' failed with exit status 1
>
> ----------------------------------------
> Cleaning up...
> Command python setup.py egg\_info failed with error code 1 in
> /tmp/pip\_build\_root/cryptography
> Storing debug log for failure in /root/.pip/pip.log
>
> Thanks,
> Alex
>
>
> On Fri, Aug 15, 2014 at 7:07 PM, Sean Cribbs  wrote:
>
>> Hi Alex,
>>
>> The published version is not a final release, so it won't be
>> automatically installed by pip. Try this: pip install riak==2.1.0rc1
>>
>> Also, did you activate your bucket-type using riak-admin? It won't be
>> usable until it's activated.
>>
>> On Fri, Aug 15, 2014 at 12:02 PM, Alex De la rosa
>>  wrote:
>> > Hi, thanks for your suggestion, but I would prefer to use the official
>> > packages, and for what I saw on the list some days ago, the new version
>> was
>> > published, so I wonder why is not yet working.
>> >
>> > Thanks,
>> > Alex
>> >
>> >
>> > On Fri, Aug 15, 2014 at 6:20 PM, tele  wrote:
>> >>
>> >> Hi Alex,
>> >>
>> >> Use the version from git and see if you get the same error:
>> >>
>> >> git clone https://github.com/basho/riak-python-client.git
>> >> cd riak-python-client
>> >> python setup.py install
>> >>
>> >> :tele
>> >>
>> >>
>> >> On Fri, 15 Aug 2014 18:12:09 +0200
>> >> Alex De la rosa  wrote:
>> >>
>> >> > Hi there,
>> >> >
>> >> > I created a "counter" bucket called "likes" with the following shell
>> >> > script:
>> >> >
>> >> > riak-admin bucket-type create likes
>> '{"props":{"datatype":"counter"}}'
>> >> >
>> >> > When I try to follow the guide [
>> >> > http://docs.basho.com/riak/2.0.0/dev/using/data-types ] to use this
>> >> > bucket with Python, I found the following issue:
>> >> >
>> >> > Traceback (most recent call last):
>> >> > File "x.py", line 17, in 
>> >> > bucket = client.bucket\_type('counter\_bucket').bucket('likes')
>> >> > AttributeError: 'RiakClient' object has no attribute 'bucket\_type'
>> >> >
>> >> > Something wrong? Is a fresh install from "pip" so I thought the
>> Python
>> >> > library would be in its last updated version?
>> >> >
>> >> > Thanks!
>> >> > Alex
>> >>
>> >
>> >
>> > \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>> > riak-users mailing list
>> > riak-users@lists.basho.com
>> > http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>> >
>>
>>
>>
>> --
>> Sean Cribbs 
>> Software Engineer
>> Basho Technologies, Inc.
>> http://basho.com/
>>
>
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

