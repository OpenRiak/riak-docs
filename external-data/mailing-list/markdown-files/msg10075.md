---
title: "Timeout?"
description: ""
project: community
lastmod: 2013-02-10T13:21:06-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg10075"
author_name: "Kevin Burton"
project_section: "mailinglistitem"
sent_date: 2013-02-10T13:21:06-08:00

---


I have a CorrugatedIron application that sometimes I get a failure with some
of my MapReduce queries and the ErrorMessage returns:

 

Query failed with Riak returned an error. Code '0'. Message:
{"phase":0,"error":"{{timeout,{gen\_server,call,[<12371.352.0>,{checkout\_to,<
12371.4691.44>},1000]}},{gen\_server,call,[riak\_kv\_js\_map,{reserve\_vm,<12371.
4691.44>},infinity]}}","input":"{ok,{r\_object,<<\"test\">>,<<\"00180013\">>,
[{r\_content,{dict,4,16,16,8,80,48,{[],[],[],[],[],[],[],[],[],[],[],[],[],[]
,[],[]},{{[],[],[],[],[],[],[],[],[],[],[[<<\"content-type\">>,97,112,112,10
8,105,99,97,116,105,111,110,47,106,115,111,110],[<<\"X-Riak-VTag\">>,50,116,
55,81,83,70,105,56,98,52,115,75,74,75,52,100,74,76,67,66,81,85]],[[<<\"index
\">>,{<<\"active\_bin\">>,<<\"Active\">>},{<<\"definition\_bin\">>,<<\"Accesso
ries\">>},{<<\"department\_bin\">>,<<\"Accessories &
Makeup\">>},{<<\"productid\_bin\">>,<<\"6...\">>}]],...}}},...}],...},...}","
type":"exit","stack":"[{gen\_server,call,3,[{file,\"gen\_server.erl\"},{line,1
88}]},{riak\_kv\_js\_manager,blocking\_dispatch,4,[{file,\"src/riak\_kv\_js\_manage
r.erl\"},{line,250}]},{riak\_kv\_mrc\_map,map\_js,3,[{file,\"src/riak\_kv\_mrc\_map
.erl\"},{line,192}]},{riak\_kv\_mrc\_map,process,3,[{file,\"src/riak\_kv\_mrc\_map
.erl\"},{line,140}]},{riak\_pipe\_vnode\_worker,process\_input,3,[{file,\"src/ri
ak\_pipe\_vnode\_worker.erl\"},{line,445}]},{riak\_pipe\_vnode\_worker,wait\_for\_in
put,2,[{file,\"src/riak\_pipe\_vnode\_worker.erl\"},{line,377}]},{gen\_fsm,handl
e\_msg,...},...]"} - CommunicationError

 

Buried in the error message it seems to indicate that there was a
CommunicationError due to a timeout. So I have a couple of questions about
this situation. One, what can I check to see that my Riak server is running
optimally? Is there a configuration value that I can increase this timeout?
Would I be worth it to try and detect this type of error and retry? Is there
some configuration value that I can have the Riak server automatically
retry, say 'n' time before an error is thrown? I know it is against the
general NoSql philosophy to try to scale up but do I need to start thinking
about better hardware? Thank you.

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

