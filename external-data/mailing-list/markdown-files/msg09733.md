---
title: "Re: Atomicity of if_not_modified?"
description: ""
project: community
lastmod: 2013-01-04T10:25:10-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg09733"
mailinglist_parent_id: "msg09735"
author_name: "Les Mikesell"
project_section: "mailinglistitem"
sent_date: 2013-01-04T10:25:10-08:00
---


On Fri, Jan 4, 2013 at 11:53 AM, Elias Levy  wrote:
>>>
>> With your example of N=3, R=2 and W=2, if two clients are updating at the
>> same time to the same object, then it actually depends on the "allow\_mult"
>> and "last\_write\_wins" variable.
>
>
> Correct me if I am wrong, but the caveat here is that the R must be default
> values for the bucket. The internal get performed by the coordinating node
> handing the INM request does not actually use the R and W value of the INM
> request. Correct?
>
> It would seem advisable to change this behavior. Maybe the R value of the
> internal get should match the W value of the INM request.

And, doesn't every description of riak behavior have to include the
scenario where the network is partitioned and updates are
simultaneously performed by entities that can't contact each other?
If it weren't for that possibility, it could just elect a master and
do real atomic operations.

-- 
 Les Mikesell
 lesmikes...@gmail.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

