---
title: "secondary indexes for timestamp"
description: ""
project: community
lastmod: 2012-03-01T01:57:02-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06800"
author_name: "Norman Khine"
project_section: "mailinglistitem"
sent_date: 2012-03-01T01:57:02-08:00

---


Hello again,
I am trying to figure out how to return my search results from this
code, i am using the riak-js client:


 var time = +new Date();
 var origin;
 db.enableIndex('users');
 var results = db.search('users', { timestamp:
[1330536456424,1330593323542] });
 console.log(results);
 response.writeHead(200, {
 'Content-Type': 'image/gif'
 });
 origin = /\/(.\*)\.gif/.exec(request.url);
 if (origin) {
 var ip = "128.121.60.133"
 //var ip = 
request.connection.remoteAddress;
 city = new City(\_\_dirname + 
"/GeoLiteCity.dat");
 city.lookup(ip, function(err, location) 
{
 obj = {
 city: 
location.city
 , latitude:
location.latitude
 , longitude:
location.longitude
 , ip: ip
 , timestamp: time
 }
 
self.bayeux.getClient().publish('/stat', obj);
 // write to riak cluster
 db.save('users', 
'norman', obj, { index: {timestamp: time} });
 console.log('was saved 
in the riak cluster');
 });



the console.log(results);

returns 'undefined'

when i run the examples from the https://wiki.basho.com/Secondary-Indexes.html
i get this error:

500 Internal Server
ErrorInternal Server Error
=====================

The server
encountered an error while processing this
request:  

```
{error,{error,{indexes_not_supported,riak_kv_bitcask_backend}}}
```


---

mochiweb+webmachine
web server

%

here is the full output http://www.pastie.org/3495097

if i do

curl http://localhost:8098/solr/users/select?q=timestamp:1330593323542



0
4

on
0
timestamp:1330593323542
or

value
standard
1.1
0





so i am not sure i am indexing the timestamp correctly.

any advice much appreciated



-- 
%>>> "".join( [ {'\*':'@','^':'.'}.get(c,None) or
chr(97+(ord(c)-83)%26) for c in ",adym,\*)&uzq^zqf" ] )

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

