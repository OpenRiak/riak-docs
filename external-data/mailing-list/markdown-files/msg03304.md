---
title: "Millions of buckets?"
description: ""
project: community
lastmod: 2011-05-11T11:53:25-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03304"
author_name: "alexeypro"
project_section: "mailinglistitem"
sent_date: 2011-05-11T11:53:25-07:00

---


I have a need to keep "notifications" for "users", where each user has
folders "a", "b" and "c". Also every note has "read" status
Original thought was to create bucket "notifications" which will have the
key user\_id, and the value will be JSON object in some structure like this:
{ 
 user\_id: "3ds78df7df8d7f8df7",
 folder: "a",
 read: 0,
 note: "my note here",
 timestamp: 18298329329
}
I am using Riak Search, so say, if I need to find all unread notes in folder
"a" for user\_id "3ds78df7df8d7f8df7" I am doing:

select?q=..

user\_id:3ds78df7df8d7f8df7 AND read:0

This works ugly slow -- takes about 12 secs for my case with only 5mln of
records bringing 5 results back.
My next idea was to create buckets per every user. Say user
"3ds78df7df8d7f8df7" will get bucket: "3ds78df7df8d7f8df7\_notes" and we
search within it, which should be faster.

Please advise!

--
View this message in context: 
http://riak-users.197444.n3.nabble.com/Millions-of-buckets-tp2928567p2928567.html
Sent from the Riak Users mailing list archive at Nabble.com.

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

