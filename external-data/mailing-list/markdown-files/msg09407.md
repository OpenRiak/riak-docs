---
title: "Re: calculate the data storage amount"
description: ""
project: community
lastmod: 2012-11-28T23:52:22-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg09407"
mailinglist_parent_id: "msg09399"
author_name: "Venki Yedidha"
project_section: "mailinglistitem"
sent_date: 2012-11-28T23:52:22-08:00
---


Thanks Sean,

Now I know that I can't find the memory occupied by a particular bucket/key
in the riak cluster...I just cleared data directory in my local system and
inserted that single bucket/key in my local system,So, no cluster in this
scenario as I was running on a single node. The statistics showed me it
occupied 2.6MB when I performed du -h on eleveldb directory(running in my
local) and I didn't change n\_val, so by default it should take 3. Then,
Will a single node riak still replicates to three different
locations(vnodes) as my n\_val=3 and
if the above is true, then the memory occupied by my bucket/key's data is
2.6/3 = 0.8666MB.
Since, there is a single bucket with single key is available from my local
Riak.
Am I right?

Thanks,
Venkatesh




On Wed, Nov 28, 2012 at 7:36 PM, Sean Cribbs  wrote:

> Venki,
>
> Regarding your original question about size of individual buckets/keys
> within that data directory -- that cannot be done without directly
> manipulating the storage engine or other components of Riak. One of the
> benefits of Riak's consistent hashing is that you get a really even spread
> among nodes and you don't really know (without digging into the Erlang
> console) where specific keys live. That said, we have done it for customers
> who have had specific production issues related to large keys, but this is
> not something we recommend doing in general.
>
>
> On Wed, Nov 28, 2012 at 1:59 AM, Venki Yedidha <
> venkatesh.yedi...@gmail.com> wrote:
>
>> Thanks Mark,
>>
>> Now when I performed du -h on the eleveldb directory in my local: It
>> showed me some thing like:
>>
>> 4.9M ./1370157784997721485815954530671515330927436759040
>> 2.7M ./776422744832042175295707567380525354192214163456
>> 2.7M ./525227150915793236229449236757414210188850757632
>> 2.7M ./959110449498405040071168171470060731649205731328
>> 3.3M ./1073290264914881830555831049026020342559825461248
>> 2.7M ./1438665674247607560106752257205091097473808596992
>> 2.8M ./91343852333181432387730302044767688728495783936
>> 2.8M ./1324485858831130769622089379649131486563188867072
>> 2.7M ./228359630832953580969325755111919221821239459840
>> 2.9M ./890602560248518965780370444936484965102833893376
>> 2.8M ./913438523331814323877303020447676887284957839360
>> 2.6M ./639406966332270026714112114313373821099470487552
>> 2.7M ./159851741583067506678528028578343455274867621888
>> 177M .
>>
>> So, It occupied 177MB in total.. Now, My interest is I would like to know
>> the space occupied by a particular bucket/key, Can I extract that
>> information form the above?
>>
>> and how are these numbers like
>> "776422744832042175295707567380525354192214163456" generated?
>>
>> Thanks,
>> Venkatesh
>>
>>
>>
>> On Wed, Nov 21, 2012 at 5:24 AM, Mark Phillips  wrote:
>>
>>> Hi Venki
>>>
>>> On Sun, Nov 18, 2012 at 10:11 PM, Venki Yedidha
>>>  wrote:
>>> > Hi All,
>>> > I would like to know the data storage of my riak database till
>>> date.
>>> > Also, I would like to know the space occupied on a riak cluster by a
>>> > bucket/key's data inserted. am running all the nodes(in the cluster) on
>>> > eleveldb backend.
>>> >
>>>
>>> The easiest way to do this would be to run some flavor of "du" on the
>>> backend directory that lives under /data of each of your Riak nodes.
>>> The sum of all of the nodes should give you the total replicated data
>>> set. Divide it by your n\_val to get the actual data set size.
>>>
>>> Hope that helps.
>>>
>>> Mark
>>>
>>> >
>>> > Thanks,
>>> > Venkatesh
>>> >
>>> >
>>> >
>>> > \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>>> > riak-users mailing list
>>> > riak-users@lists.basho.com
>>> > http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>>> >
>>>
>>
>>
>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>> riak-users mailing list
>> riak-users@lists.basho.com
>> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>>
>>
>
>
> --
> Sean Cribbs 
> Software Engineer
> Basho Technologies, Inc.
> http://basho.com/
>
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

