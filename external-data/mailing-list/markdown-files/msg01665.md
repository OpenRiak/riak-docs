---
title: "Re: riak crash"
description: ""
project: community
lastmod: 2010-11-29T10:56:41-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01665"
mailinglist_parent_id: "msg01657"
author_name: "francisco treacy"
project_section: "mailinglistitem"
sent_date: 2010-11-29T10:56:41-08:00
---


2010/11/29 David Smith :
> It looks like you had an interrupted syscall (!!) that wasn't handled
> by Erlang (which I find rather hard to believe). What version of Riak
> and what operating system are you using, please?

 => bin/riaksearch-admin status
1-minute stats for 'riaksea...@127.0.0.1'
-------------------------------------------
vnode gets : 0
vnode\_puts : 0
read\_repairs : 0
vnode\_gets\_total : 23751
vnode\_puts\_total : 16458
node\_gets : 0
node\_gets\_total : 7997
node\_get\_fsm\_time\_mean : undefined
node\_get\_fsm\_time\_median : undefined
node\_get\_fsm\_time\_95 : undefined
node\_get\_fsm\_time\_99 : undefined
node\_get\_fsm\_time\_100 : undefined
node\_puts : 0
node\_puts\_total : 5526
node\_put\_fsm\_time\_mean : undefined
node\_put\_fsm\_time\_median : undefined
node\_put\_fsm\_time\_95 : undefined
node\_put\_fsm\_time\_99 : undefined
node\_put\_fsm\_time\_100 : undefined
read\_repairs\_total : 0
cpu\_nprocs : 89
cpu\_avg1 : 228
cpu\_avg5 : 120
cpu\_avg15 : 77
mem\_total : 3827992000
mem\_allocated : 3392196000
disk : [{"/",155954992,88},{"/Volumes/backup",243862672,47}]
nodename : 'riaksea...@127.0.0.1'
connected\_nodes : []
sys\_driver\_version : <<"1.5">>
sys\_global\_heaps\_size : 0
sys\_heap\_type : private
sys\_logical\_processors : 2
sys\_otp\_release : <<"R13B04">>
sys\_process\_count : 468
sys\_smp\_support : true
sys\_system\_version : <<"Erlang R13B04 (erts-5.7.5) [source] [64-bit]
[smp:2:2] [rq:2] [async-threads:64] [hipe] [kernel-poll:true]">>
sys\_system\_architecture : <<"i386-apple-darwin10.3.0">>
sys\_threads\_enabled : true
sys\_thread\_pool\_size : 64
sys\_wordsize : 8
ring\_members : ['riaksea...@127.0.0.1']
ring\_num\_partitions : 64
ring\_ownership : <<"[{'riaksea...@127.0.0.1',64}]">>
ring\_creation\_size : 64
storage\_backend : riak\_kv\_bitcask\_backend
pbc\_connects\_total : 0
pbc\_connects : 0
pbc\_active : 0
luwak\_version : <<"1.0">>
skerl\_version : <<"0.1">>
riak\_solr\_version : <<"0.13.0">>
riak\_search\_version : <<"0.13.0">>
merge\_index\_version : <<"0.13.0">>
riak\_search\_core\_version : <<"0.13.0">>
riak\_kv\_version : <<"0.13.0">>
bitcask\_version : <<"1.1.4">>
riak\_core\_version : <<"0.13.0">>
qilr\_version : <<"0.13.0">>
luke\_version : <<"0.2.1">>
webmachine\_version : <<"1.7.2">>
mochiweb\_version : <<"1.7.1">>
erlang\_js\_version : <<"0.4.1">>
runtime\_tools\_version : <<"1.8.3">>
crypto\_version : <<"1.6.4">>
os\_mon\_version : <<"2.2.5">>
sasl\_version : <<"2.1.9">>
stdlib\_version : <<"1.16.5">>
kernel\_version : <<"2.13.5">>

That is, a plain Riak Search (0.13) downloaded from the Basho
downloads section (not any particular commit on Github).

>
> Also, this could be related to ulimit -n -- what do you set that to?
>

 => ulimit -n
2048

I cranked it up to prevent those errors caused by not enough available
open fds...

About the disk warning, I think it's safe to ignore?

 => df -h
Filesystem Size Used Avail Capacity Mounted on
/dev/disk0s2 149Gi 129Gi 19Gi 88% /

Thanks,

Francisco


>
> On Mon, Nov 29, 2010 at 11:28 AM, francisco treacy
>  wrote:
>> Some days ago, Riak crashed on my dev machine. All I know is that
>> several concurrent writes could have been happening at the time of the
>> crash (possibly around 30).
>>
>> https://gist.github.com/717015
>>
>> Could somebody enlighten me here... what exactly went wrong?
>>
>> Thanks,
>> Francisco
>>
>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>> riak-users mailing list
>> riak-users@lists.basho.com
>> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>>
>

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

