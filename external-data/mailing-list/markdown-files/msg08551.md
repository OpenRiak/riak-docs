---
title: "Migrate buckets: bucket_exporter gets different number of keys."
description: ""
project: community
lastmod: 2012-09-16T06:53:47-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08551"
author_name: "Vladimir Shapovalov"
project_section: "mailinglistitem"
sent_date: 2012-09-16T06:53:47-07:00

---


HI all,

I'm trying to migrate data from one node cluster (test-1) to three nodes
cluster (test-2) with
bucket\_exporter.
Backend - levelDB.

I've noticed that
bucket\_exporter counts
number of keys wrongly.

$ riak attach
(riak@localhost)10> bucket\_exporter:export\_data('riak@localhost',
<<"my\_bucket">>, "json", "/tmp/my\_bucket").
Got 89141 keys
...
(riak@localhost)10> bucket\_exporter:export\_data('riak@localhost',
<<"my\_bucket">>, "json", "/tmp/my\_bucket").
Got 88978 keys
...
(riak@localhost)10> bucket\_exporter:export\_data('riak@localhost',
<<"my\_bucket">>, "json", "/tmp/my\_bucket").
Got 89869 keys
...

I was expecting the same number of keys in all cases.

May be the issue isn't caused by bucket\_exporter, I don't know.

But I'm just unable to migrate buckets from one cluster to another...
Sometimes it work, but I got all the time different number of keys in the
bucket.
Sometimes exporter just hangs without saying anything in the middle of the
export process.
Sometimes exporter gives up with timeout error.
Sometimes I don't even get this "Got xxx keys" message and the node crashes.

bucket\_importer behaves quite the same way.

Could someone explain what happens?
But more important questions are:
- How can I transfer some buckets from one cluster to another?
- Does anybody know what the best way to import-export buckets is?
- How can I backup data bucket-wise?

Thanks in advance!
Vladimir
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

