---
title: "Recommended riak configuration options for better performance"
description: ""
project: community
lastmod: 2014-06-04T05:00:48-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14287"
author_name: "Naveen Tamanam"
project_section: "mailinglistitem"
sent_date: 2014-06-04T05:00:48-07:00

---


Hi Guys,


I have 5 nodes riak cluster in use. Each machine is having 16GB ram. All
those 5 machines are
​dedicated for riak only. No other application is there to eat resources. ​
​I use to do a lot of work with
map reduce queries. Having a may map reduce queries with both map and
reduce phases.
I have many cases with the the following error and log messages, ​

​
 "error":"[preflist\_exhausted]"
 RiakError: 'could not get a response'
 All VMs are busy

I know above errors can be avoided with fine tuned riak configuration
options. I am looking for recommended values
Here are few riak configuration options currently I have on each node,

 { kernel, [
 {inet\_dist\_listen\_min, 6000},
 {inet\_dist\_listen\_max, 7999}
 ]},

 {map\_js\_vm\_count, 48 },
 {reduce\_js\_vm\_count, 26 },
 {hook\_js\_vm\_count, 12 },
 {js\_max\_vm\_mem, 32},
 {js\_thread\_stack, 16}








​

-- 
Thanks & Regards,
Naveen Tamanam
​​
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

