---
title: "Re: Yokozuna - inconsistent number of documents found for the same	query"
description: ""
project: community
lastmod: 2014-12-01T20:59:31-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15287"
mailinglist_parent_id: "msg15283"
author_name: "Ryan Zezeski"
project_section: "mailinglistitem"
sent_date: 2014-12-01T20:59:31-08:00
---



Eric Redmond writes:

> This is a known issue, and we're still working on a fix.
>
> https://github.com/basho/yokozuna/issues/426
>

I don't see how this issue is related to Oleksiy's problem. There is no
mention of removing or adding nodes. I think the key part of Oleksiy's
report is the association of an index \_after\_ data had already been
written. That data is sometimes missing. These two issues could be
related but I don't see anything in that GitHub report to indicate why.

>
> On Nov 29, 2014, at 9:26 AM, Oleksiy Krivoshey  wrote:
>>> 
>> 1. Create a bucket, insert some keys (10 keys - KeysA)
>> 2. Create Yokozuna Index, associate it with the bucket
>> 3. Add or update some new keys in the bucket (10 keys - KeysB)
>> 4. Wait for Search AAE to build and exchange the trees
>> 
>> Now when I issue a search query I will always get all 10 KeysB but a random 
>> amount of KeysA, for example the same query repeated 5 times may return:
>> 
>> 10 KeysB + 2 KeysA
>> 10 KeysB + 0 KeysA
>> 10 KeysB + 7 KeysA
>> 10 KeysB + 1 KeysA
>> 10 KeysB + 10 KeysA
>> 

Are there any errors in the logs? Does the count go up if you wait
longer? What does `riak-admin search aae-status` show?

-Z

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

