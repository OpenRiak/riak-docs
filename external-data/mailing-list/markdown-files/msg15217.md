---
title: "Compaction errors when new node is added"
description: ""
project: community
lastmod: 2014-11-23T05:37:22-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15217"
author_name: "Timo Gatsonides"
project_section: "mailinglistitem"
sent_date: 2014-11-23T05:37:22-08:00

---


Hi,

I have recently added a 7th node to an existing cluster of 6 nodes. Standard 
ring size. Riak 1.4.9, the new node is on Ubuntu 14, I used the Ubuntu 12 
package.

It seems like the progress of transferring data is really, really slow. The 
disks are continuously reading and writing data (50+Mb/s), but the total amount 
of data is growing slowly.

In the leveldb logs I see a lot of error messages like these:

7fec9efb5700 Compaction error: IO error: 
/bigdata/riak/bigleveldb/479555224749202520035584085735030365824602865664/sst\_0/001432.sst:
 No such file or directory

I have already stopped the node once, ran leveldb:repair on all the partitions 
and then restarted Riak. Now again these messages are appearing.

Can someone please explain the cause of this and if this is normal?

Background info: the new node is using ZFS, all the other nodes have around 3TB 
of data in the /bigdata/riak/bigleveldb directories and there are a lot of 
relatively large values that are 2-10Mb in size.

Kind regards,
Timo

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

