---
title: "Re: Can't start riaksearch"
description: ""
project: community
lastmod: 2011-05-10T16:40:40-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03300"
mailinglist_parent_id: "msg03290"
author_name: "Greg Pascale"
project_section: "mailinglistitem"
sent_date: 2011-05-10T16:40:40-07:00
---


I started from scratch with a new database and in less than a day have
gotten it into a similar state. The database is populated with a few hundred
thousand wikipedia articles, and I've been testing out various sorts of
searches and map/reduce queries. There's only one node (my box) and I'm the
only one hitting it.

This time, I can start riaksearch and ping it successfully once. If I ping
it a second time, it goes down. Crash log is below...

-Greg

\*=ERROR REPORT==== 10-May-2011::16:34:31 ===\*
\*js\_vm\_count has been deprecated. Please use map\_js\_vm\_count to configure
the map pool.\*
\*=ERROR REPORT==== 10-May-2011::16:34:31 ===\*
\*js\_vm\_count has been deprecated. Please use reduce\_js\_vm\_count to configure
the reduce pool.\*
\*=ERROR REPORT==== 10-May-2011::16:34:31 ===\*
\*js\_vm\_count has been deprecated. Please use hook\_js\_vm\_count to configure
the hook callback pool.\*
\*=CRASH REPORT==== 10-May-2011::16:34:31 ===\*
\* crasher:\*
\* initial call: gen:init\_it/7\*
\* pid: <0.172.0>\*
\* registered\_name: []\*
\* exception exit:
{{badmatch,not\_found},[{riak\_kv\_map\_master,read\_entry,2},{riak\_kv\_map\_master,dequeue\_mapper,1},{riak\_kv\_map\_master,init,1},{gen\_server2,init\_it,6},{proc\_lib,init\_p\_do\_apply,3}]}
\*
\* in function gen\_server2:init\_it/6\*
\* in call from proc\_lib:init\_p\_do\_apply/3\*
\* ancestors: [riak\_kv\_sup,<0.135.0>]\*
\* messages: []\*
\* links: [#Port<0.3424>,<0.136.0>,#Port<0.3425>,#Port<0.3422>]\*
\* dictionary:
[{#Ref<0.0.0.436>,{bc\_state,"/Users/greg/code/deps/builds/riak\_search-0.14.0/data/mr\_queue",fresh,undefined,[{filestate,read\_only,"/Users/greg/code/deps/builds/riak\_search-0.14.0/data/mr\_queue/1304980174.bitcask.data",1304980174,{file\_descriptor,prim\_file,{#Port<0.3422>,17}},undefined,0}],2147483648,[{expiry\_secs,-1},read\_write],<<>>}}]
\*
\* trap\_exit: true\*
\* status: running\*
\* heap\_size: 1597\*
\* stack\_size: 24\*
\* reductions: 2294998\*
\* neighbours:\*
\*
\*
\*=SUPERVISOR REPORT==== 10-May-2011::16:34:31 ===\*
\* Supervisor: {local,riak\_kv\_sup}\*
\* Context: start\_error\*
\* Reason:
{{badmatch,not\_found},[{riak\_kv\_map\_master,read\_entry,2},{riak\_kv\_map\_master,dequeue\_mapper,1},{riak\_kv\_map\_master,init,1},{gen\_server2,init\_it,6},{proc\_lib,init\_p\_do\_apply,3}]}
\*
\* Offender:
[{pid,undefined},{name,riak\_kv\_map\_master},{mfa,{riak\_kv\_map\_master,start\_link,[]}},{restart\_type,permanent},{shutdown,30000},{child\_type,worker}]
\*
\*
\*

On Mon, May 9, 2011 at 12:29 PM, Greg Pascale  wrote:

> Hi,
>
> I seem to have wrangled riaksearch it into an inconsistent state where I
> can't start it up. I've pasted the crash report I get - any ideas what might
> be going on?
> \*
> \*
> Thanks,
> -Greg
> \*
> \*
> \*=ERROR REPORT==== 9-May-2011::12:15:42 ===\*
> \*js\_vm\_count has been deprecated. Please use map\_js\_vm\_count to configure
> the map pool.\*
> \*=ERROR REPORT==== 9-May-2011::12:15:42 ===\*
> \*js\_vm\_count has been deprecated. Please use reduce\_js\_vm\_count to
> configure the reduce pool.\*
> \*=ERROR REPORT==== 9-May-2011::12:15:42 ===\*
> \*js\_vm\_count has been deprecated. Please use hook\_js\_vm\_count to configure
> the hook callback pool.\*
> \*=SUPERVISOR REPORT==== 9-May-2011::12:15:42 ===\*
> \* Supervisor: {local,riak\_kv\_sup}\*
> \* Context: start\_error\*
> \* Reason:
> {{badmatch,not\_found},[{riak\_kv\_map\_master,read\_entry,2},{riak\_kv\_map\_master,dequeue\_mapper,1},{riak\_kv\_map\_master,init,1},{gen\_server2,init\_it,6},{proc\_lib,init\_p\_do\_apply,3}]}
> \*
> \* Offender:
> [{pid,undefined},{name,riak\_kv\_map\_master},{mfa,{riak\_kv\_map\_master,start\_link,[]}},{restart\_type,permanent},{shutdown,30000},{child\_type,worker}]
> \*
> \*
> \*
> \*
> \*
> \*=CRASH REPORT==== 9-May-2011::12:15:42 ===\*
> \* crasher:\*
> \* initial call: gen:init\_it/7\*
> \* pid: <0.172.0>\*
> \* registered\_name: []\*
> \* exception exit:
> {{badmatch,not\_found},[{riak\_kv\_map\_master,read\_entry,2},{riak\_kv\_map\_master,dequeue\_mapper,1},{riak\_kv\_map\_master,init,1},{gen\_server2,init\_it,6},{proc\_lib,init\_p\_do\_apply,3}]}
> \*
> \* in function gen\_server2:init\_it/6\*
> \* in call from proc\_lib:init\_p\_do\_apply/3\*
> \* ancestors: [riak\_kv\_sup,<0.135.0>]\*
> \* messages: []\*
> \* links:
> [#Port<0.3428>,#Port<0.3432>,<0.136.0>,#Port<0.3433>,#Port<0.3430>,#Port<0.3424>,#Port<0.3426>,#Port<0.3422>]
> \*
> \* dictionary:
> [{#Ref<0.0.0.447>,{bc\_state,"/Users/greg/gitclients/clipboard/deps/builds/riak\_search-0.14.0/data/mr\_queue",fresh,undefined,[{filestate,read\_only,"/Users/greg/gitclients/clipboard/deps/builds/riak\_search-0.14.0/data/mr\_queue/1304808859.bitcask.data",1304808859,{file\_descriptor,prim\_file,{#Port<0.3430>,21}},undefined,0},{filestate,read\_only,"/Users/greg/gitclients/clipboard/deps/builds/riak\_search-0.14.0/data/mr\_queue/1304844075.bitcask.data",1304844075,{file\_descriptor,prim\_file,{#Port<0.3428>,20}},undefined,0},{filestate,read\_only,"/Users/greg/gitclients/clipboard/deps/builds/riak\_search-0.14.0/data/mr\_queue/1304872675.bitcask.data",1304872675,{file\_descriptor,prim\_file,{#Port<0.3426>,19}},undefined,0},{filestate,read\_only,"/Users/greg/gitclients/clipboard/deps/builds/riak\_search-0.14.0/data/mr\_queue/1304964599.bitcask.data",1304964599,{file\_descriptor,prim\_file,{#Port<0.3424>,18}},undefined,0},{filestate,read\_only,"/Users/greg/gitclients/clipboard/deps/builds/riak\_search-0.14.0/data/mr\_queue/1304965780.bitcask.data",1304965780,{file\_descriptor,prim\_file,{#Port<0.3422>,17}},undefined,0}],2147483648,[{expiry\_secs,-1},read\_write],<<>>}}]
> \*
> \* trap\_exit: true\*
> \* status: running\*
> \* heap\_size: 6765\*
> \* stack\_size: 24\*
> \* reductions: 2267083\*
> \* neighbours:\*
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

