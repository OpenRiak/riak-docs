---
title: "Re: reduce headaches"
description: ""
project: community
lastmod: 2010-09-20T15:26:32-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01110"
mailinglist_parent_id: "msg01107"
author_name: "francisco treacy"
project_section: "mailinglistitem"
sent_date: 2010-09-20T15:26:32-07:00
---


Kevin and Sean,

2010/9/20 Kevin Smith :
> js\_reload will force a reload of all the Javascript VMs. This will dump all 
> state, including any accumulated anonymous functions. We do cache anonymous 
> functions to reduce the number of JS calls we have to make but it's possible 
> there's a bug in the change detection logic. I will take a look in that code 
> and see if we're doing anything obviously wrong. What version of Riak are you 
> using?

Oh, ok. I'm running on tip from 2 weeks ago or so:

ftreacy @ ~/work/sandbox/riak
 => hg summary
parent: 1564:6ffd0ec62536 tip
 Bug 640: remove extra net\_kernel:hidden\_connect\_node() call
branch: default
commit: (clean)
update: (current)

2010/9/20 Sean Cribbs :
> Also, your query may have hit some "not\_found" objects - you'll probably want 
> to filter those out in the reduce phase using values = 
> Riak.filterNotFound(values); That could be the source of some errors.

Good advice; well, it's locally-run test data that happens never to be
removed - but maybe at some point a vnode is lacking a value that
returns a not\_found that when not caught throws this failed\_reduce? No
idea how likely that is. I filter these out in most of my reduces
anyway ( if not v.not\_found then ... ).

Thanks again.
Francisco

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

