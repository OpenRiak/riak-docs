---
title: "Re: riak_kv_memory_backend in production"
description: ""
project: community
lastmod: 2013-07-18T12:00:37-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11611"
mailinglist_parent_id: "msg11604"
author_name: "Casey Rosenthal"
project_section: "mailinglistitem"
sent_date: 2013-07-18T12:00:37-07:00
---


A single node deployment of the memory backend will certainly work,
but will not be as performant as Redis.

Here are some suggestions for running the memory backend in production:

1. Since you are running a single node cluster, set your n\_val to 1 [1]
2. Make sure you set the max\_memory parameter [2] to prevent the node
from OOM'ing.

3. In order to get greater concurrency and throughput with the memory
backend, I suggest increasing your ring\_creation\_size to 128 or 256.
You might need to test which is more performant on your hardware.

4. Turn anti\_entropy off. It will just be unnecessary overhead with
your workload.

5. Make sure your ulimit is raised [3]

6. Apply our recommended system tunings [4]

7. You may need to raise some Erlang resource limits in your vm.args file [5]


[1] http://docs.basho.com/riak/latest/references/Configuration-Files/#app-config
[2] 
http://docs.basho.com/riak/1.3.0/tutorials/choosing-a-backend/Memory/#Enabling-and-Configuring-the-Memory-Backend
[3] http://goo.gl/6LCiq
[4] 
http://docs.basho.com/riak/latest/cookbooks/Linux-Performance-Tuning/#Linux-Tuning
[5] http://goo.gl/bRzeT



On Thu, Jul 18, 2013 at 2:24 PM, kpandey  wrote:

> My ultimate goal is to use Riak as that one nosql solution for most of my
> needs like
>
> 1) In memory immutable data( with guaranteed write and failover so n=3,
> w=quoram, r=1 )
> 2) In memory cache
> 3) bitask with TTL to store immutable session data (n=3, w=quoram, r=1 )
> 4) audit data (n=3, w=1,r=1)
> 5) log data (n=3, w=1,r=1)
>
> etc.
>
> For now I am looking have a 5 node cluster and a test with 5 node cluser.
>
>
>
>
>
> --
> View this message in context:
> http://riak-users.197444.n3.nabble.com/riak-kv-memory-backend-in-production-tp4028393p4028404.html
> Sent from the Riak Users mailing list archive at Nabble.com.
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

