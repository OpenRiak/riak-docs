---
title: "RE: slow 2 node cluster"
description: ""
project: community
lastmod: 2011-11-20T04:21:56-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05687"
mailinglist_parent_id: "msg05686"
author_name: "Erik Søe Sørensen"
project_section: "mailinglistitem"
sent_date: 2011-11-20T04:21:56-08:00
---


This depends quite a bit on the sizes of your objects.
Supposing an average size of 2KB, and n=3: on each write, on average 1.5 of the 
replicas would be on the other node, implying inter-node network traffic of 
1.5\*2KB=3KB (and this is just in one direction).
If your inter-node network connection is indeed 10Mbit ~ 1MB/s, then 300 
writes/s \* 3KB = 0.9MB/s would just about saturate the connection.

You may want to check the network utilization.
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
From: riak-users-boun...@lists.basho.com [riak-users-boun...@lists.basho.com] 
On Behalf Of Catalin Constantin [daz...@gmail.com]
Sent: 20 November 2011 11:10
To: riak-users@lists.basho.com
Subject: slow 2 node cluster

Hello,

I am trying to evaluate / run some tests on a 4 mil dataset.
I have 2 nodes setup (different machines - 8GB ram each, I7 cpus).
10 MB connection between them.

I am trying to insert data into riak using w=1 and dw=1 (also tried with dw = 
0, w = 0).
For each risk object i have 4 indexes (2 binary 2 int).
Riak backend is leveldb.

I can't get more than 300 inserts per second.
I have also tried running 2 threads each hitting the different node. Nothing 
changed too much.

Is this normal behavior ?

--
Catalin Constantin


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

