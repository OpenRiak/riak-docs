---
title: "Re: mapreduce timeout error"
description: ""
project: community
lastmod: 2011-09-20T23:52:46-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg04811"
mailinglist_parent_id: "msg04810"
author_name: "Russell Brown"
project_section: "mailinglistitem"
sent_date: 2011-09-20T23:52:46-07:00
---


Hi Sohil,

On 21 Sep 2011, at 07:07, raghwani sohil wrote:

> Hi ,
> 
> I am using mapreduce technique to access all keys between perticular period .
> 
> This is my keys.json file .
> 
> {"inputs":{"bucket":"test",
> "key\_filters":[["matches" ,"2011\_09\_11"]]},
> "query":[{"map":{"language":"javascript",
> "source":"function(v) {
> return [v.key] ;
> }",
> "keep":true} } ]
> }
> 
> I am invoking mapreduce call using curl 
> 
> curl -X POST -H "content-type: application/json" http://127.0.0.1:8098/mapred 
> --data @keys.json
> 
> but it gives me timeout error :- {"error":"timeout"}
> 
> so Is there any way to resolve this problem ?? 

Map reduce over an entire bucket is not recommended and can be slow. To lessen 
the likelihood of a timeout error you can add a 'timeout' parameter to the map 
reduce JSON.

{"inputs":{"bucket":"test", "key\_filters":[["matches" ,"2011\_09\_11"]]}, 
"query":[{"map":{"language":"javascript", "source":"function(v) { return 
[v.key] ;}", "keep":true} } ], "timeout" : 60000}

You can read more about it on the wiki 
http://wiki.basho.com/MapReduce.html#MapReduce-via-the-HTTP-API

However, it might be a better strategy to write to a new bucket per time 
period, or take advantage of riak search, or secondary indexes and use a range 
query.

Cheers

Russell

> 
> thanks ,
> Sohil Raghwani .
> 
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

