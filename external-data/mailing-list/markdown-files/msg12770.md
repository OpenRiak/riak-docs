---
title: "Re: Could not get response from python riak"
description: ""
project: community
lastmod: 2013-10-27T08:48:15-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12770"
mailinglist_parent_id: "msg12769"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2013-10-27T08:48:15-07:00
---


Right, I was trying to explain that the "Could not get response" message
doesn't tell you what's wrong, but could be a symptom of many things. From
the machine running your Django app, could you attempt to connect using the
`curl` command line tool? e.g.

curl http://riakhost:8098/

If that does not work, then Riak isn't running or is not accessible.


On Sat, Oct 26, 2013 at 10:49 PM, Naveen Tamanam wrote:

> Here in my testing environment there are only 2 to 3 users so I don't
> think this much traffic requires the very high ulimit.
>
> So what would be the cause of getting error(exception) "Could not get
> response" in python-riak.
>
>
> On Sun, Oct 27, 2013 at 3:25 AM, Naveen Tamanam 
> wrote:
>
>> Thanks for your valuable time.
>>
>> We may consider the ulimit under large load but here in my testing
>> there are only two to three uses.
>>
>> I don't think low ulimit causes the "Could not get reponse " problem.
>>
>> I would like to know what is the reason behind this error.
>>
>>
>>
>>
>> On Sun, Oct 27, 2013 at 1:00 AM, Sean Cribbs  wrote:
>>
>>> Resending to list...
>>>
>>> That is also definitely possible. Ensure that ulimit -n is high enough
>>> for Riak, and that the Riak node is still running after you start it.
>>> `riak-admin ping` will tell you if it's still running.
>>>
>>>
>>> On Sat, Oct 26, 2013 at 7:23 PM, Naveen Tamanam >> > wrote:
>>>
>>>> Do you suspect the ulimit it is configured to very low for my
>>>> testing environment.
>>>>
>>>>
>>>> On Sun, Oct 27, 2013 at 12:24 AM, Sean Cribbs  wrote:
>>>>
>>>>> Python riak-2.0.x will work with older clusters, yes, but you might
>>>>> get NotImplementedError raised when the server does not support specific
>>>>> functionality.
>>>>>
>>>>> The retry logic in riak-1.5.x was very flakey, I don't trust it. My
>>>>> guess is that something is wrong with the configuration of either the
>>>>> client or the cluster. I would check the hosts/ports to be sure.
>>>>>
>>>>>
>>>>> On Sat, Oct 26, 2013 at 6:27 PM, Naveen Tamanam <
>>>>> naveen32in...@gmail.com> wrote:
>>>>>
>>>>>> I am using \*Python riak-1.5.2.
>>>>>>
>>>>>> \*
>>>>>> \*Any idea about error that I have mentioned.
>>>>>>
>>>>>> \*
>>>>>> \*Is that python riak 2.0 has backward compatibility?
>>>>>> \*
>>>>>> \*\*
>>>>>> \*
>>>>>> \*
>>>>>>
>>>>>>
>>>>>> On Sat, Oct 26, 2013 at 10:07 PM, Sean Cribbs  wrote:
>>>>>>
>>>>>>> Naveen,
>>>>>>>
>>>>>>> If you are using Riak 1.4, please upgrade to the 2.0.x package of
>>>>>>> the client. Maintenance on the 1.5.x series has ceased.
>>>>>>>
>>>>>>>
>>>>>>> On Fri, Oct 25, 2013 at 10:29 PM, Naveen Tamanam <
>>>>>>> naveen32in...@gmail.com> wrote:
>>>>>>>
>>>>>>>> Hi All,
>>>>>>>>
>>>>>>>> I am using the riak with python/django.
>>>>>>>>
>>>>>>>> Sometimes I am getting the error "Could not get response"
>>>>>>>>
>>>>>>>> I am using Djang\*o 1.5
>>>>>>>> Python riak-1.5.2
>>>>>>>>
>>>>>>>> The error description is as follows;
>>>>>>>>
>>>>>>>>
>>>>>>>> \*
>>>>>>>>
>>>>>>>> Django Version: 1.5
>>>>>>>> Python Version: 2.6.6
>>>>>>>> Installed Applications:
>>>>>>>> ('django.contrib.auth',
>>>>>>>> 'django.contrib.contenttypes',
>>>>>>>> 'django.contrib.sessions',
>>>>>>>> 'django.contrib.sites',
>>>>>>>> 'django.contrib.messages',
>>>>>>>> 'django.contrib.staticfiles',
>>>>>>>> )
>>>>>>>> Installed Middleware:
>>>>>>>> ('django.middleware.common.CommonMiddleware',
>>>>>>>> 'django.contrib.sessions.middleware.SessionMiddleware',
>>>>>>>> 'django.contrib.auth.middleware.AuthenticationMiddleware',
>>>>>>>> 'django.contrib.messages.middleware.MessageMiddleware')
>>>>>>>>
>>>>>>>> Traceback:
>>>>>>>> File
>>>>>>>> "/usr/lib/python2.6/site-packages/Django-1.5-py2.6.egg/django/core/handlers/base.py"
>>>>>>>> in get\_response
>>>>>>>> 115. response = callback(request, \*callback\_args, \*\*callback\_kwargs)
>>>>>>>> File "/opt/backend/mobichat/userapp/edit\_views.py" in editCamp
>>>>>>>> 100. campinfo = helpers.getCampinfoForTemplating(request, url=key)
>>>>>>>> File "/opt/backend/mobichat/userapp/helpers.py" in
>>>>>>>> getCampinfoForTemplating
>>>>>>>> 213. campinfo['logo\_url'], campinfo['logo\_name'] =
>>>>>>>> CampaignLogoPath.get(url)
>>>>>>>> File "/opt/backend/mobichat/common/riak\_backend/riak\_backend.py" in
>>>>>>>> get
>>>>>>>> 1806. obj = cls.bucket.get(camp\_uid)
>>>>>>>> File
>>>>>>>> "/usr/lib/python2.6/site-packages/riak-1.5.2-py2.6.egg/riak/bucket.py" 
>>>>>>>> in
>>>>>>>> get
>>>>>>>> 326. return obj.reload(r=r, pr=pr)
>>>>>>>> File
>>>>>>>> "/usr/lib/python2.6/site-packages/riak-1.5.2-py2.6.egg/riak/riak\_object.py"
>>>>>>>> in reload
>>>>>>>> 459. Result = t.get(self, r=r, pr=pr, vtag=vtag)
>>>>>>>> File
>>>>>>>> "/usr/lib/python2.6/site-packages/riak-1.5.2-py2.6.egg/riak/transports/http.py"
>>>>>>>> in get
>>>>>>>> 152. response = self.http\_request('GET', url)
>>>>>>>> File
>>>>>>>> "/usr/lib/python2.6/site-packages/riak-1.5.2-py2.6.egg/riak/transports/http.py"
>>>>>>>> in http\_request
>>>>>>>> 626. raise RiakError("could not get a response")
>>>>>>>>
>>>>>>>> Exception Type: RiakError at
>>>>>>>> /manager/camp-edit/EHbo24hFYDZGsg8ujpY9itDtM2a
>>>>>>>> Exception Value: 'could not get a response'
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> Any body please help me out to fix the above issue.
>>>>>>>>
>>>>>>>> I see the riak source code
>>>>>>>>
>>>>>>>> Moudle is at riak-1.5.2-py2.6.egg/riak/transports/http.py
>>>>>>>>
>>>>>>>> The function where that is coming is as follows
>>>>>>>>
>>>>>>>> def http\_request(self, method, uri, headers=None, body=''):
>>>>>>>> """
>>>>>>>> Given a Method, URL, Headers, and Body, perform and HTTP
>>>>>>>> request,
>>>>>>>> and return a 2-tuple containing a dictionary of response
>>>>>>>> headers
>>>>>>>> and the response body.
>>>>>>>> """
>>>>>>>> if headers is None:
>>>>>>>> headers = {}
>>>>>>>> # Run the request...
>>>>>>>> for retry in range(self.RETRY\_COUNT):
>>>>>>>> with self.\_conns.withconn() as conn:
>>>>>>>> ### should probably build this try/except into a
>>>>>>>> custom
>>>>>>>> ### contextmanager for the connection.
>>>>>>>> try:
>>>>>>>> conn.request(method, uri, body, headers)
>>>>>>>> response = conn.getresponse()
>>>>>>>>
>>>>>>>> try:
>>>>>>>> # Get the response headers...
>>>>>>>> response\_headers = {'http\_code':
>>>>>>>> response.status}
>>>>>>>> for (key, value) in response.getheaders():
>>>>>>>> response\_headers[key.lower()] = value
>>>>>>>>
>>>>>>>> # Get the body...
>>>>>>>> response\_body = response.read()
>>>>>>>> finally:
>>>>>>>> response.close()
>>>>>>>>
>>>>>>>> return response\_headers, response\_body
>>>>>>>> except socket.error, e:
>>>>>>>> conn.close()
>>>>>>>> if e[0] == errno.ECONNRESET:
>>>>>>>> # Grab another connection and try again.
>>>>>>>> continue
>>>>>>>> # Don't know how to handle this.
>>>>>>>> raise
>>>>>>>> except httplib.HTTPException:
>>>>>>>> # Just close the connection and try again.
>>>>>>>> conn.close()
>>>>>>>> continue
>>>>>>>>
>>>>>>>> # No luck, even with retrying.
>>>>>>>> raise RiakError("could not get a response")
>>>>>>>>
>>>>>>>>
>>>>>>>> At line number 626 in riak/transport/http.py
>>>>>>>> where http\_requst is at http.RiakHttpTransport.http\_request
>>>>>>>>
>>>>>>>>
>>>>>>>> This is error is coming very often. For what reason it is coming
>>>>>>>> and how to get permanent solution for this error .
>>>>>>>>
>>>>>>>> --
>>>>>>>> Thanks & Regards,
>>>>>>>> Naveen Tamanam
>>>>>>>>
>>>>>>>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>>>>>>>> riak-users mailing list
>>>>>>>> riak-users@lists.basho.com
>>>>>>>> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>>>>>>>>
>>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> --
>>>>>>> Sean Cribbs 
>>>>>>> Software Engineer
>>>>>>> Basho Technologies, Inc.
>>>>>>> http://basho.com/
>>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> --
>>>>>> Thanks & Regards,
>>>>>> Naveen Tamanam
>>>>>>
>>>>>
>>>>>
>>>>>
>>>>> --
>>>>> Sean Cribbs 
>>>>> Software Engineer
>>>>> Basho Technologies, Inc.
>>>>> http://basho.com/
>>>>>
>>>>
>>>>
>>>>
>>>> --
>>>> Thanks & Regards,
>>>> Naveen Tamanam
>>>>
>>>
>>>
>>>
>>> --
>>> Sean Cribbs 
>>> Software Engineer
>>> Basho Technologies, Inc.
>>> http://basho.com/
>>>
>>
>>
>>
>> --
>> Thanks & Regards,
>> Naveen Tamanam
>>
>
>
>
> --
> Thanks & Regards,
> Naveen Tamanam
>



-- 
Sean Cribbs 
Software Engineer
Basho Technologies, Inc.
http://basho.com/
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

