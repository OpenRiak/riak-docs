---
title: "Riak Bitcask backend is very unstable on OS X 10.6.3"
description: ""
project: community
lastmod: 2010-05-08T09:30:24-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg00287"
author_name: "Senthilkumar Peelikkampatti"
project_section: "mailinglistitem"
sent_date: 2010-05-08T09:30:24-07:00

---


I am facing frequently below issue after increasing maxfiles (after sysctl
-w kern.maxfiles=40000 && ulimit -n 1024 ), sometimes it works after
restarting Riak but frequently crashes with the below error.

System: Mac OS X 10.6.3 + (after sysctl -w kern.maxfiles=40000 && ulimit -n
1024 )
Riak: tip with clean build and few doc in a single bucket + single riak
node
Bitcask: whatever riak pulled



=ERROR REPORT==== 8-May-2010::11:23:19 ===
\*\* State machine <0.160.0> terminating
\*\* Last event in was {list\_bucket,<0.214.0>,<<"item\_1">>,90028198}
\*\* When State == active
\*\* Data == {state,639406966332270026714112114313373821099470487552,[],
 riak\_kv\_bitcask\_backend,
 {#Ref<0.0.0.773>,

"data/bitcask/639406966332270026714112114313373821099470487552"},
 not\_in\_handoff,undefined}
\*\* Reason for termination =
\*\* {{badmatch,{error,emfile}},
 [{bitcask,subfold,3},
 {riak\_kv\_bitcask\_backend,list,1},
 {riak\_kv\_bitcask\_backend,list\_bucket,2},
 {riak\_kv\_vnode,do\_list\_bucket,6},
 {riak\_kv\_vnode,active,2},
 {gen\_fsm,handle\_msg,7},
 {proc\_lib,init\_p\_do\_apply,3}]}


-- 
Regards,
Senthilkumar Peelikkampatti,
http://pmsenthilkumar.blogspot.com/
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

