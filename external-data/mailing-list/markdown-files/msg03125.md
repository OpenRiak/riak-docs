---
title: "Re: riaksearch + mapreduce cannot query more than 20K entries"
description: ""
project: community
lastmod: 2011-04-22T06:01:56-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03125"
mailinglist_parent_id: "msg03123"
author_name: "Grant Schofield"
project_section: "mailinglistitem"
sent_date: 2011-04-22T06:01:56-07:00
---


You need to increase the amount of memory allotted to the JS VMs, the relevant 
setting is js\_thread\_stack in the riak\_kv section of your app.config. I would 
suggest increasing this to 32 or 64 to start, you may always want to increase 
the heap size as well as the number of VMs. You can find more information on 
the settings here:
http://wiki.basho.com/Configuration-Files.html

Grant
Developer Advocate
Basho Technologies



On Apr 22, 2011, at 12:10 AM, khyqo wrote:

> i am having some trouble in querying more than 20K entries.. when i tried to 
> query around 100K entries, i got empty array.. but when i tried around 60K 
> entries, i got "InternalError: script stack space quota is exhausted".. are 
> there any tweaks that i could apply or anything that i should do that would 
> allow me to query around a million or more entries at a time? btw, i am using 
> php..
> 
> please advice.. thank you in advance..
> 
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

