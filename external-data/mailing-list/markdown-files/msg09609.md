---
title: ""Failed to create ~p for mapred_queue_dir defaulting to %s: ~p"	["/data/riak/mr_queue", "/tmp/mr_queue", eacces]"
description: ""
project: community
lastmod: 2012-12-17T20:53:01-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg09609"
author_name: "David Montgomery"
project_section: "mailinglistitem"
sent_date: 2012-12-17T20:53:01-08:00

---


Hi,

I cant get riak to work when changing default data directory to
/data/riak. I am using the current realease for ubunt\u

 %% Platform-specific installation paths (substituted by
rebar)
 {platform\_bin\_dir, "/usr/sbin"},
 {platform\_data\_dir, "/data/riak"},
 {platform\_etc\_dir, "/etc/riak"},
 {platform\_lib\_dir, "/usr/lib/riak"},
 {platform\_log\_dir, "/var/log/riak"}


Everytime I start the service it crashes. Tee volume is there. Attached
and formatted at boot. I can write /data/riak. After a chef boot etc I
restart riak so riak should know that path is there to store data. I
format the volume as follows. mkfs.ext3 /dev/vdb and mount /data/riak even
before riak is installed.

Below is the head of the console.log file. First error is "Failed to
create ~p for mapred\_queue\_dir defaulting to %s: ~p"
["/data/riak/mr\_queue","/tmp/mr\_queue",eacces]


2012-12-18 04:36:22.583 [warning]
<0.148.0>@riak\_core\_ring\_manager:reload\_ring:231 No ring file available.
2012-12-18 04:36:22.755 [info]
<0.154.0>@riak\_core\_capability:process\_capability\_changes:529 New
capability: {riak\_core,vnode\_routing} = proxy
2012-12-18 04:36:22.763 [info]
<0.154.0>@riak\_core\_capability:process\_capability\_changes:529 New
capability: {riak\_core,staged\_joins} = true
2012-12-18 04:36:22.773 [info] <0.7.0> Application riak\_core started on
node 'riak@103.4.112.17'
2012-12-18 04:36:22.828 [info] <0.278.0>@riak\_core:wait\_for\_application:425
Waiting for application riak\_pipe to start (0 seconds).
2012-12-18 04:36:22.829 [info] <0.7.0> Application riak\_pipe started on
node 'riak@103.4.112.17'
2012-12-18 04:36:22.876 [info] <0.289.0>@riak\_core:wait\_for\_service:445
Waiting for service riak\_kv to start (0 seconds)
2012-12-18 04:36:22.929 [info] <0.301.0>@riak\_kv\_js\_vm:init:76 Spidermonkey
VM (thread stack: 16MB, max heap: 8MB, pool: riak\_kv\_js\_map) host starting
(<0.301.0>)
2012-12-18 04:36:22.933 [info] <0.278.0>@riak\_core:wait\_for\_application:419
Wait complete for application riak\_pipe (0 seconds)
2012-12-18 04:36:22.934 [info] <0.302.0>@riak\_kv\_js\_vm:init:76 Spidermonkey
VM (thread stack: 16MB, max heap: 8MB, pool: riak\_kv\_js\_map) host starting
(<0.302.0>)
2012-12-18 04:36:22.952 [info] <0.303.0>@riak\_kv\_js\_vm:init:76 Spidermonkey
VM (thread stack: 16MB, max heap: 8MB, pool: riak\_kv\_js\_map) host starting
(<0.303.0>)
2012-12-18 04:36:22.965 [info] <0.304.0>@riak\_kv\_js\_vm:init:76 Spidermonkey
VM (thread stack: 16MB, max heap: 8MB, pool: riak\_kv\_js\_map) host starting
(<0.304.0>)
2012-12-18 04:36:22.967 [info] <0.309.0>@riak\_kv\_js\_vm:init:76 Spidermonkey
VM (thread stack: 16MB, max heap: 8MB, pool: riak\_kv\_js\_map) host starting
(<0.309.0>)
2012-12-18 04:36:22.970 [info] <0.316.0>@riak\_kv\_js\_vm:init:76 Spidermonkey
VM (thread stack: 16MB, max heap: 8MB, pool: riak\_kv\_js\_map) host starting
(<0.316.0>)
2012-12-18 04:36:22.983 [info] <0.323.0>@riak\_kv\_js\_vm:init:76 Spidermonkey
VM (thread stack: 16MB, max heap: 8MB, pool: riak\_kv\_js\_map) host starting
(<0.323.0>)
2012-12-18 04:36:22.988 [info] <0.436.0>@riak\_kv\_js\_vm:init:76 Spidermonkey
VM (thread stack: 16MB, max heap: 8MB, pool: riak\_kv\_js\_map) host starting
(<0.436.0>)
2012-12-18 04:36:22.993 [info] <0.438.0>@riak\_kv\_js\_vm:init:76 Spidermonkey
VM (thread stack: 16MB, max heap: 8MB, pool: riak\_kv\_js\_reduce) host
starting (<0.438.0>)
2012-12-18 04:36:23.002 [info] <0.439.0>@riak\_kv\_js\_vm:init:76 Spidermonkey
VM (thread stack: 16MB, max heap: 8MB, pool: riak\_kv\_js\_reduce) host
starting (<0.439.0>)
2012-12-18 04:36:23.004 [info] <0.440.0>@riak\_kv\_js\_vm:init:76 Spidermonkey
VM (thread stack: 16MB, max heap: 8MB, pool: riak\_kv\_js\_reduce) host
starting (<0.440.0>)
2012-12-18 04:36:23.009 [info] <0.441.0>@riak\_kv\_js\_vm:init:76 Spidermonkey
VM (thread stack: 16MB, max heap: 8MB, pool: riak\_kv\_js\_reduce) host
starting (<0.441.0>)
2012-12-18 04:36:23.015 [info] <0.442.0>@riak\_kv\_js\_vm:init:76 Spidermonkey
VM (thread stack: 16MB, max heap: 8MB, pool: riak\_kv\_js\_reduce) host
starting (<0.442.0>)
2012-12-18 04:36:23.020 [info] <0.443.0>@riak\_kv\_js\_vm:init:76 Spidermonkey
VM (thread stack: 16MB, max heap: 8MB, pool: riak\_kv\_js\_reduce) host
starting (<0.443.0>)
2012-12-18 04:36:23.025 [info] <0.445.0>@riak\_kv\_js\_vm:init:76 Spidermonkey
VM (thread stack: 16MB, max heap: 8MB, pool: riak\_kv\_js\_hook) host starting
(<0.445.0>)
2012-12-18 04:36:23.030 [info] <0.446.0>@riak\_kv\_js\_vm:init:76 Spidermonkey
VM (thread stack: 16MB, max heap: 8MB, pool: riak\_kv\_js\_hook) host starting
(<0.446.0>)
2012-12-18 04:36:23.038 [warning]
<0.448.0>@riak\_kv\_map\_master:init\_data\_dir:256 FORMAT ERROR: "Failed to
create ~p for mapred\_queue\_dir defaulting to %s: ~p"
["/data/riak/mr\_queue","/tmp/mr\_queue",eacces]
2012-12-18 04:36:23.073 [info]
<0.154.0>@riak\_core\_capability:process\_capability\_changes:529 New
capability: {riak\_kv,vnode\_vclocks} = true
2012-12-18 04:36:23.088 [info]
<0.154.0>@riak\_core\_capability:process\_capability\_changes:529 New
capability: {riak\_kv,legacy\_keylisting} = false
2012-12-18 04:36:23.100 [info]
<0.154.0>@riak\_core\_capability:process\_capability\_changes:529 New
capability: {riak\_kv,listkeys\_backpressure} = true
2012-12-18 04:36:23.105 [info]
<0.154.0>@riak\_core\_capability:process\_capability\_changes:529 New
capability: {riak\_kv,mapred\_system} = pipe
2012-12-18 04:36:23.115 [info]
<0.154.0>@riak\_core\_capability:process\_capability\_changes:529 New
capability: {riak\_kv,mapred\_2i\_pipe} = true
2012-12-18 04:36:23.147 [info] <0.542.0>@riak\_core:wait\_for\_application:425
Waiting for application riak\_kv to start (0 seconds).
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

