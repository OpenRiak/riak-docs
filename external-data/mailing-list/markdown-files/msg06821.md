---
title: "Re: Is it possible to express JOIN and GROUP in Riak?"
description: ""
project: community
lastmod: 2012-03-01T10:26:02-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06821"
mailinglist_parent_id: "msg06652"
author_name: "Mark Phillips"
project_section: "mailinglistitem"
sent_date: 2012-03-01T10:26:02-08:00
---


Hi Sergei,

Sean Cribbs gave a presentation last year at Strage Loop wherein he
talked about going from SQL -> Riak MapReduce.

http://strangeloop-riak-mapred.heroku.com/#1

Specifically, there is some info on doing the equivalent of JOIN and
GROUP (and others) starting around slide #24.

Hope that helps.

Mark

On Mon, Feb 20, 2012 at 5:53 AM, Sergei Tulentsev
 wrote:
> Let's say, I have events and users. I want to group events by properties of
> users. In SQL it looks like this:
>
> SELECT u.gender,
>        u.age,
>        u.nfr,
>        u.nafr,
>        e.event\_id,
>        COUNT(e.id) ecount,
>        SUM(e.event\_value) esum
> FROM sn\_users u
> JOIN daily\_events e on e.sn\_user\_id = u.sn\_id
> GROUP BY u.gender, u.age, u.nfr, u.nafr, e.event\_id;
>
> I understand that link walking with mapreduce may help me with this.
> However, all examples of link walking I've seen so far substitute the
> original document. That is, if I were to link-walk event document I'd get a
> bunch of users, without events.
>
> How it ideally should be (in my imagination).
>
> - Links are walked on event documents and corresponding users are embedded
> into events.
> - Map function now acts on a "joined" document and can emit appropriate
> values.
> - Reduce - nothing fancy here.
>
> Is it possible at all?
>
> --
> Best regards,
> Sergei Tulentsev
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

