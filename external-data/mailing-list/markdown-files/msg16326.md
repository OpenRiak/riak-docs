---
title: "Re: riak 2.1.1 starting error in mac os 10.10"
description: ""
project: community
lastmod: 2015-07-30T06:09:20-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16326"
mailinglist_parent_id: "msg16325"
author_name: "Humberto Rodríguez Avila"
project_section: "mailinglistitem"
sent_date: 2015-07-30T06:09:20-07:00
---


Hi again Fred,

 I tried your suggestion
>> otool -L
/Users/Humberto/riak-2.1.1/rel/riak/bin/../lib/eleveldb-2.1.0-0-ga36dbd6/priv/eleveldb.so

And I obtain your same output

>> /usr/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version
104.1.0)
>> /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version
1213.0.0)

So, then I am using clang/LLVM instead of GCC?

I was thinking that I was using GCC because of this:
------------------------------------------------------
Humbertos-MacBook-Pro-2:Humberto$ gcc -v
Using built-in specs.
COLLECT\_GCC=gcc
COLLECT\_LTO\_WRAPPER=/opt/local/libexec/gcc/x86\_64-apple-darwin14/5.2.0/lto-wrapper
Target: x86\_64-apple-darwin14
Configured with:
/opt/local/var/macports/build/\_opt\_mports\_dports\_lang\_gcc5/gcc5/work/gcc-5.2.0/configure
--prefix=/opt/local --build=x86\_64-apple-darwin14
--enable-languages=c,c++,objc,obj-c++,lto,fortran,java
--libdir=/opt/local/lib/gcc5 --includedir=/opt/local/include/gcc5
--infodir=/opt/local/share/info --mandir=/opt/local/share/man
--datarootdir=/opt/local/share/gcc-5 --with-local-prefix=/opt/local
--with-system-zlib --disable-nls --program-suffix=-mp-5
--with-gxx-include-dir=/opt/local/include/gcc5/c++/ --with-gmp=/opt/local
--with-mpfr=/opt/local --with-mpc=/opt/local --with-isl=/opt/local
--enable-stage1-checking --disable-multilib --enable-lto
--enable-libstdcxx-time --with-as=/opt/local/bin/as
--with-ld=/opt/local/bin/ld --with-ar=/opt/local/bin/ar --with-bugurl=
https://trac.macports.org/newticket --with-pkgversion='MacPorts gcc5
5.2.0\_0'
Thread model: posix
gcc version 5.2.0 (MacPorts gcc5 5.2.0\_0)
----------------------------------------------------

Best regards,
Humberto



On Thu, Jul 30, 2015 at 2:52 PM Humberto Rodríguez Avila ####################################################################################### 
wrote:

> Hi fred,
>
> Thanks for your answer. I'm going to do your suggestions :)
>
> I am using GCC because the riak website says " Riak will not compile with
> Clang. Please make sure your default C/C++ compiler is GCC."
>
> Best regards,
> Humberto
>
>
> On Thu, Jul 30, 2015 at 2:43 PM Fred Dushin  wrote:
>
>>
>> You're getting a runtime load error because your are likely not linking
>> against the right C++ runtime (because you built with gcc). IIRC the GCC
>> C++ runtime and the C++ runtime that ships with Darwin are not ABI
>> compatible. Welcome to C++.
>>
>> You might try hacking your environment using DYLD\_LIBRARY\_PATH, so that
>> you link the gcc runtime.
>>
>> Some things you can do to help diagnose:
>>
>> See what your eleveldb is linked against.
>>
>> otool -L
>> /Users/Humberto/riak-2.1.1/rel/riak/bin/../lib/eleveldb-2.1.0-0-ga36dbd6/priv/eleveldb.so
>>
>> Because I build with clang/LLVM, I get:
>>
>> /usr/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version
>> 104.1.0)
>> /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version
>> 1213.0.0)
>>
>>
>> To see all the symbols in this library (with C++ demangled names -- OS X
>> only),
>>
>> prompt$
>> nm 
>> /Users/Humberto/riak-2.1.1/rel/riak/bin/../lib/eleveldb-2.1.0-0-ga36dbd6/priv/eleveldb.so
>> | c++filt
>>
>>
>> If I grep for basic\_ostringstream (the symbol you are not finding), I get:
>>
>> U std::basic\_ostringstream,
>> std::allocator >::basic\_ostringstream(std::\_Ios\_Openmode)
>> U VTT for std::basic\_ostringstream> std::char\_traits, std::allocator >
>>
>> But I have a more basic question. Why are you using GCC on OS X? You
>> really should be using LLVM, which ships with the OS (well, once you
>> install Xcode).
>>
>> -Fred
>>
>> On Jul 30, 2015, at 8:13 AM, Humberto Rodríguez Avila ####################################################################################### 
>> wrote:
>>
>> Hello, I have an error trying to start riak after compiled it from the
>> source code (riak 2.1.1). I am using gcc 5.2 as default compiler, Mac OS
>> 10.10 and the Basho's patched version of Erlang (OTP\_R16B02\_basho8) I
>> put a post in GitHubGist with a full description and logs
>> https://gist.github.com/rhumbertgz/b7b0b5c26134c1d10b2c ,
>> Thanks in advance Humberto
>>
>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>> riak-users mailing list
>> riak-users@lists.basho.com
>> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>>
>>
>>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

