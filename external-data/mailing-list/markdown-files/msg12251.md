---
title: "Re: Cluster performance."
description: ""
project: community
lastmod: 2013-09-12T14:47:16-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12251"
mailinglist_parent_id: "msg12252"
author_name: "Brian Roach"
project_section: "mailinglistitem"
sent_date: 2013-09-12T14:47:16-07:00
---


Victor,

What I suspect is happening is that only one of the IP addresses you
are passing to addHosts() is actually accepting connections /
reachable.

The way the ClusterClient works, an operation is going to be retried
on failure (up to three times by default) and as long as the node that
actually is reachable / accepting connections gets tried, this is
going to be hidden from you.

You can test this by changing the retry behavior when you query. For example:

Bucket b = client.fetchBucket("bucket").execute();

for (int i = 0; i < 5; i++)
{
 b.fetch("key").withRetrier(new DefaultRetrier(0)).execute();
}

Thanks,
- Roach




On Thu, Sep 12, 2013 at 2:40 PM, Victor  wrote:
> Hi,
>
> We are currently testing Riak as potential replacement for data warehouse.
> Programmers was pretty happy with single-node operations, but as we switched
> to testing of a cluster, performance of same applications dropped
> significantly with only changes in code:
>
> Configuration conf = new
> PBClientConfig.Builder().WithHost(“192.168.149.21”).WithPort(8087).build();
>
> IRiakClient client = RiakFactory.newClient(conf);
>
>
>
> to
>
>
>
> PBClusterConfig clusterConfig = new PBClusterConfig(20);
>
> PBClientConfig clientConfig = PBClientConfig.defaults();
>
> clusterConfig.addHosts(clientConfig, "192.168.\*.\*","192.168.\*.\*");
>
> IRiakClient client = RiakFactory.newClient(clusterConfig);
>
>
>
> In the same time, I’m noticed, that if I use riak-admin status |grep node\*
> - node\_gets\_total and node\_puts\_total rises only on one of the clustered
> machines.
>
> Is there any way to monitor data distribution, activity and resources of
> nodes in cluster? I saw multiple applications, but usually they provide only
> bucket operations and status.
>
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

