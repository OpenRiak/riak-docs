---
title: "Problem running riak-1.0.0pre2 list_buckets"
description: ""
project: community
lastmod: 2011-09-16T07:08:38-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg04758"
author_name: "t3h"
project_section: "mailinglistitem"
sent_date: 2011-09-16T07:08:38-07:00

---


Hello all,

I got these errors after having upgraded to riak-1.0.0pre2 when using list
buckets:

{ok, C} = riak:local\_client().
C:list\_buckets().

gives:

2011-09-16 15:01:32.613 [error] <0.971.0> gen\_server <0.971.0> terminated
with reason: bad return value: {break,{buffer,[ ...part of my list of
buckets... ],#Fun,999,4}}
2011-09-16 15:01:32.711 [error] <0.971.0> CRASH REPORT Process [] with 0
neighbours crashed with reason: bad return value: {break,{buffer,[...other
part of my list of buckets... ],#Fun,999,4}}
2011-09-16 15:01:32.767 [error] <0.427.0> gen\_server <0.427.0> terminated
with reason: bad return value: {break,{buffer,[...other part of my list of
buckets... ],#Fun,999,10}}
2011-09-16 15:01:32.842 [error] <0.427.0> CRASH REPORT Process [] with 0
neighbours crashed with reason: bad return value: {break,{buffer,[...other
part of my list of buckets... ],#Fun,999,10}}
2011-09-16 15:01:32.937 [error] <0.426.0> Supervisor poolboy\_sup had child
riak\_core\_vnode\_worker started with
{riak\_core\_vnode\_worker,start\_link,undefined} at <0.427.0> exit with reason
bad return value: {break,{buffer,[...other part of my list of buckets...
],#Fun,999,10}} in context child\_terminated

and so on for each poolboy supervisor...

I tested it against a new empty cluster to be sure not to mix legacy key
listing with new key listing.
I use the eleveldb\_backend and objects stored have indexes.
I can list the keys in a bucket without any issue.
Am I missing something I should have changed upgrading to 1.0.0?

As well, riak objects used to have x-riak-index-$bucket and
x-riak-index-$key indexes when I first attempted to use secondary indexes. I
do not see this anymore. What is the reason for this change and should I be
careful not to override any "built-in" indexes when writting my index
headers (using the PBC api)?

Thanks,
Antoine
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

