---
title: "Re: Riak 1.3.1 install from source on closed network"
description: ""
project: community
lastmod: 2013-04-15T14:41:45-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg10894"
mailinglist_parent_id: "msg10889"
author_name: "Hector Castro"
project_section: "mailinglistitem"
sent_date: 2013-04-15T14:41:45-07:00
---


Hi Peter,

Despite the fact that the instructions assume you're working with Riak
1.3.0, please follow the "Installation on Closed Networks" section on
the installing Riak from source page [0]. The steps there, combined
with Jared's instructions to alter line 79 of Makefile [1] so that it
reads:

 dev% : riaknostic

instead of:

 dev% : all riaknostic

should allow you to successfully complete an installation without a
network connection (after downloading the 1.3.0 zipball for LevelDB).

Please let us know if you encounter further issues.

[0] 
http://docs.basho.com/riak/1.3.0/tutorials/installation/Installing-Riak-from-Source/#Installation
[1] https://github.com/basho/riak/blob/riak-1.3.1/Makefile#L79

--
Hector


On Mon, Apr 15, 2013 at 9:28 AM, HARLOW Peter
 wrote:
> From: Jared Morrow [mailto:ja...@basho.com]
> Sent: Monday, April 15, 2013 2:10 PM
>
>
> To: HARLOW Peter
> Cc: riak-users@lists.basho.com
> Subject: Re: Riak 1.3.1 install from source on closed network
>
>
>
> Peter,
>
> I see where you hit your problem. In the 'make devrel' step it did try to go
> out to the network to re-clone all of the dependencies. To fix this, simply
> change this line in the Makefile:
> https://github.com/basho/riak/blob/riak-1.3.1/Makefile#L79 from
>
> dev% : all riaknostic
>
> to
>
> dev% : riaknostic
>
> Remove the 'dev' directory to make sure everything is clean and try to run
> 'make devrel' again.
>
> Let me know how that goes.
>
> A devrel directory didn't seem to get generated - but I unpacked a new
> source tree to be sure.
>
>
>
> Unfortunately there was no change.
>
>
>
> Make all completed, but make devrel produced the same errors as before.
>
>
>
> Regards,
>
>
>
>
>
> Peter Harlow
>
> Systems Engineer
>
> Thales Communications & Security S.A
>
> T&S-Billetique/Projets & Systemes/I&A
>
> Rue de la Mare aux Joncs
>
> 91229 Bretigny sur Orge Cedex
>
> Tel: +33 (0) 1 69 88 59 41
>
> Fax: +33 (0)1 69 88 57 35
>
> Email : peter.har...@thalesgroup.com
>
>
>
> From: Jared Morrow [mailto:ja...@basho.com]
> Sent: Monday, April 15, 2013 2:10 PM
>
>
> To: HARLOW Peter
> Cc: riak-users@lists.basho.com
> Subject: Re: Riak 1.3.1 install from source on closed network
>
>
>
> Peter,
>
> I see where you hit your problem. In the 'make devrel' step it did try to go
> out to the network to re-clone all of the dependencies. To fix this, simply
> change this line in the Makefile:
> https://github.com/basho/riak/blob/riak-1.3.1/Makefile#L79 from
>
> dev% : all riaknostic
>
> to
>
> dev% : riaknostic
>
> Remove the 'dev' directory to make sure everything is clean and try to run
> 'make devrel' again.
>
> Let me know how that goes.
>
> Sorry for the troubles,
> Jared
>
>
>
>
>
> On Mon, Apr 15, 2013 at 3:25 AM, HARLOW Peter 
> wrote:
>
> From: Jared Morrow [mailto:ja...@basho.com]
> Sent: Friday, April 12, 2013 3:23 PM
> To: HARLOW Peter
> Cc: riak-users@lists.basho.com
> Subject: Re: Riak 1.3.1 install from source on closed network
>
>
>
>>Peter,
>
>
>
>>For 1.3.0 & 1.3.1 of Riak, you use the "1.3.0" version of leveldb.
>
>
>
> Thanks, Jared.
>
>
>
> Unfortunately I am not getting very far with this. I can't find the
> instructions I used with version 1.2.1, but copying the procedure from that
> machine:
>
>
>
> tar -zxvf riak-1.3.1.tar.gz
>
> mv basho-leveldb-1.3.0-0-gdbb3e19.zip
> riak-1.3.1/deps/eleveldb/c\_src/leveldb.zip
>
> cd riak-1.3.1/deps/eleveldb/c\_src/
>
> unzip leveldb.zip
>
> mv basho-leveldb-\* leveldb
>
> cd ../../../
>
> make all
>
> make devrel
>
>
>
> â€¦make all seems to run but make devrel finishes with the errors:
>
>
>
> make[1]: Entering directory `/home/riak/riak/riak-1.3.1/deps/riaknostic'
>
> ./rebar get-deps
>
> ==> riaknostic (get-deps)
>
> Pulling lager from {git,"git://github.com/basho/lager",{tag,"1.2.2"}}
>
> fatal: Unable to look up github.com (port 9418) (Temporary failure in name
> resolution)
>
> Initialized empty Git repository in
> /home/riak/riak/riak-1.3.1/deps/riaknostic/deps/lager/.git/
>
> ERROR: git clone -n git://github.com/basho/lager lager failed with error:
> 128 and output:
>
> fatal: Unable to look up github.com (port 9418) (Temporary failure in name
> resolution)
>
> Initialized empty Git repository in
> /home/riak/riak/riak-1.3.1/deps/riaknostic/deps/lager/.git/
>
>
>
> make[1]: \*\*\* [deps] Error 1
>
> make[1]: Leaving directory `/home/riak/riak/riak-1.3.1/deps/riaknostic'
>
> make: \*\*\* [riaknostic] Error 2
>
>
>
>
>
> OS: CentOS 6.4 64-bit
>
> Erlang: R15B01
>
>
>
> Regards,
>
>
>
> Peter Harlow
>
> Systems Engineer
>
> Thales Communications & Security S.A
>
> T&S-Billetique/Projets & Systemes/I&A
>
> Rue de la Mare aux Joncs
>
> 91229 Bretigny sur Orge Cedex
>
> Tel: +33 (0) 1 69 88 59 41
>
> Fax: +33 (0)1 69 88 57 35
>
> Email : peter.har...@thalesgroup.com
>
>
>
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

