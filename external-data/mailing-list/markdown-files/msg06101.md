---
title: "LevelDB and open files count"
description: ""
project: community
lastmod: 2011-12-30T12:36:02-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06101"
author_name: "jeffrey k eliasen"
project_section: "mailinglistitem"
sent_date: 2011-12-30T12:36:02-08:00

---


I'm confused by LevelDB's file handle usage. I had a cluster of one machine 
running happily with two keys (both in the same bucket). I attached a second 
node and the first node halted with "too many open files". If I try to restart 
the service, it runs for a few seconds and then exits again with the same error.

The only config settings I've changed from the defaults are the binding ports 
(to attach to more than just the loopback interface) and the ring creation size 
(I upped it to 256).

In reading the LevelDB page on the wiki, it indicates as max ring size goes up, 
the number of open files should go down. However, later (in the "Tips and 
tricks" section) it says that there will be (by default) 20 open files per 
partitionâ€¦ does this mean I'll have 20\*256 = 5120 open files, potentially? Or 
am I reading this wrong?

===

jeffrey k eliasen

Find and follow me on:
Blog: http://jeff.jke.net
Twitter: http://twitter.com/jeffreyeliasen
Facebook: http://facebook.com/jeffrey.eliasen


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

