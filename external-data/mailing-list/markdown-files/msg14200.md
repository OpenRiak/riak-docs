---
title: "Re:"
description: ""
project: community
lastmod: 2014-05-08T14:04:31-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14200"
mailinglist_parent_id: "msg14197"
author_name: "Daniel Iwan"
project_section: "mailinglistitem"
sent_date: 2014-05-08T14:04:31-07:00
---


That's what I was thinking after looking into details of
https://github.com/basho/riak-java-client/pull/351
When I saw release of 1.1.4 a comment in changelog did not seem like of a
huge importance


This is a minor bugfix release
Fix RiakConnection.get\_code(int)

We will upgrade client library.

BTW. This bug and its description:
"This leads to a connection being returned to the pool with data still
in the input stream, and a subsequent operation will fail due to
reading it (potentially causing a huge memory allocation and possible
OOM error)."

brings to my mind recent infamous Heartbleed bug where tiny problem
can have unforeseen results. Butterfly effect I suppose...
Cheers

D.



On 8 May 2014 17:55, Brian Roach  wrote:

> Hi Daniel,
>
> I suspect this is the bug fixed in PR#352 (
> https://github.com/basho/riak-java-client/pull/352 )
>
> Try upgrading to the 1.1.4 client release and see if the problem persists.
>
> Thanks,
> - Roach
>
> On Thu, May 8, 2014 at 8:02 AM, Daniel Iwan  wrote:
> > Hi
> >
> > I got following exception with riak Java client 1.1.3, Riak cluster 1.3.1
> > I don't see any error messages in Riak's console log. Any idea what may
> be
> > causing this?
> >
> > Caused by: com.basho.riak.client.RiakRetryFailedException:
> > java.io.IOException: bad message code. Expected: 14 actual: 1
> > at
> com.basho.riak.client.cap.DefaultRetrier.attempt(DefaultRetrier.java:79)
> > at
> com.basho.riak.client.cap.DefaultRetrier.attempt(DefaultRetrier.java:81)
> > at
> com.basho.riak.client.cap.DefaultRetrier.attempt(DefaultRetrier.java:81)
> > at
> com.basho.riak.client.cap.DefaultRetrier.attempt(DefaultRetrier.java:81)
> > at
> com.basho.riak.client.cap.DefaultRetrier.attempt(DefaultRetrier.java:53)
> > at
> >
> com.basho.riak.client.operations.DeleteObject.execute(DeleteObject.java:111)
> > at
> com.basho.riak.client.bucket.DomainBucket.delete(DomainBucket.java:484)
> > at
> com.basho.riak.client.bucket.DomainBucket.delete(DomainBucket.java:418)
> > at server.riak.k.b(SourceFile:104)
> > ... 19 more
> > Caused by: java.io.IOException: bad message code. Expected: 14 actual: 1
> > at
> com.basho.riak.pbc.RiakConnection.receive\_code(RiakConnection.java:153)
> > at com.basho.riak.pbc.RiakClient.delete(RiakClient.java:622)
> > at com.basho.riak.pbc.RiakClient.delete(RiakClient.java:609)
> > at
> >
> com.basho.riak.client.raw.pbc.PBClientAdapter.delete(PBClientAdapter.java:222)
> > at
> >
> com.basho.riak.client.operations.DeleteObject$2.call(DeleteObject.java:106)
> > at
> >
> com.basho.riak.client.operations.DeleteObject$2.call(DeleteObject.java:104)
> > at
> com.basho.riak.client.cap.DefaultRetrier.attempt(DefaultRetrier.java:72)
> > ... 27 more
> >
> > Regards
> > Daniel
> >
> > \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> > riak-users mailing list
> > riak-users@lists.basho.com
> > http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
> >
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

