---
title: "Re: Cluster restarted and doesn’t respond	to queries"
description: ""
project: community
lastmod: 2013-12-23T12:59:21-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13330"
mailinglist_parent_id: "msg13329"
author_name: "Brian Sparrow"
project_section: "mailinglistitem"
sent_date: 2013-12-23T12:59:21-08:00
---


Hmm, no i do not. After restarting the node with a fixed config, try again and 
if the issue persists please attach the console.log, error.log and crash.log. 

Thanks! 

-- 
Brian Sparrow
Developer Advocate
Basho Technologies

Sent with Sparrow (http://www.sparrowmailapp.com/?sig)


On Monday, December 23, 2013 at 2:27 PM, Justin Lambert wrote:

> Brian - thanks for that explanation, yep my config is wrong there. We aren’t 
> using bit cask at all so I can actually clean up the multi backend. I’ll get 
> a ticket made for you guys as well.
> 
> This config has been out here (and restarted many times) for about 4 or 5 
> months now. Any idea why the http interface is never returning on queries? 
> PB seems to be working fine though after more testing.
> 
> 
> On Mon, Dec 23, 2013 at 11:41 AM, Brian Sparrow  (mailto:bspar...@basho.com)> wrote:
> > Just jumping in: 
> > The issue is here: {<<"bitcask\_mult">>, riak\_kv\_bitcask\_backend, [
> > 
> > {data\_root, "./data/leveldb”}
> > 
> > The reason riak-admin test works is it uses the default backend in the case 
> > of multi-backend. Based on your config this is the eleveldb backend which 
> > already owns these directories and had no issue starting up. This should 
> > probably be checked during riak start as backend should \*never\* share a 
> > data\_root. 
> > 
> > If you wouldn’t mind making an issue against the riak repo with the details 
> > of your problem we can work out the best way to check this on startup.
> > 
> > The mitigation is to shut the node down, change the bitcask\_mult data\_root 
> > to the correct entry and restart. 
> > 
> > Thanks! 
> > 
> > -- 
> > Brian Sparrow
> > Developer Advocate
> > Basho Technologies
> > 
> > Sent with Sparrow (http://www.sparrowmailapp.com/?sig) 
> > 
> > 
> > On Monday, December 23, 2013 at 1:37 PM, Justin Lambert wrote:
> > 
> > 
> > 
> > > Attached is my app.config. It is managed by puppet so I don’t think it 
> > > changed at all. Again, this was just a Centos 6.4 -> CentOS 6.5 upgrade 
> > > - the riak package wasn’t touched at all.
> > > 
> > > Any thought as to why riak-admin test works but just getting a key with 
> > > curl never returns?
> > > 
> > > 
> > > On Mon, Dec 23, 2013 at 10:44 AM, Ryan Zezeski  > > (mailto:rzeze...@basho.com)> wrote:
> > > > 
> > > > On Mon, Dec 23, 2013 at 12:35 PM, Justin Lambert 
> > > >  wrote:
> > > > > 
> > > > > I do see some errors in the error.log, but the referenced directories 
> > > > > don’t appear to exist: 
> > > > > 2013-12-23 16:52:33.290 [error] 
> > > > > <0.1721.0>@riak\_kv\_bitcask\_backend:move\_unused\_dirs:607 Failed to 
> > > > > move unused data directory 
> > > > > "./data/leveldb/388211372416021087647853783690262677096107081728". 
> > > > > Reason: eexist
> > > > > 
> > > > 
> > > > This error is interesting. It is coming from the bitcask backend but 
> > > > trying to read a leveldb directory. My guess is something happened with 
> > > > your configuration when you upgraded. What does your app.config look 
> > > > like? 
> > > > 
> > > > -Z
> > > 
> > > \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> > > riak-users mailing list
> > > riak-users@lists.basho.com (mailto:riak-users@lists.basho.com)
> > > http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
> > > 
> > > 
> > > 
> > > 
> > > 
> > > Attachments: 
> > > - app.config
> > > 
> > > 
> > 
> > 
> 

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

