---
title: "Re: map/reduce fails after riak upgrade"
description: ""
project: community
lastmod: 2011-11-28T04:50:11-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05746"
mailinglist_parent_id: "msg05742"
author_name: "Leonid Riaboshtan"
project_section: "mailinglistitem"
sent_date: 2011-11-28T04:50:11-08:00
---


Hello,

Try to use legacy mapred mode instead of pipe one(it's default in new riak
versions)? Maybe it's a finger into sky, but still may hit it :)

WBR,
Leonid

On Mon, Nov 28, 2011 at 12:28 PM, Lyes zaiko  wrote:

> Hi!
>
> I upgraded to riak-1.0.2.
> I'm using the erlang client to execute a map/reduce on a bucket. In the
> anterior version of riak I was using, this map/reduce was working very
> well. But after the upgrade, it takes much time to end. When I attached the
> riak node, I git this errir
>
> {undef,[{riak\_kv\_keys\_fsm,start,[125220437,{<<20
> bytes>>,[]},60000,mapred,3.000000e-05,<0.409.0>]}]}
>
> what changed in the erlang client map/reduce call ??
>
> PS: I'm using riak\_pb\_socket:mapred\_bucket().
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

