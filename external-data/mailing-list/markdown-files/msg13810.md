---
title: "Cleaning up bucket after basho_bench run"
description: ""
project: community
lastmod: 2014-03-14T10:02:26-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13810"
author_name: "Istv√°n"
project_section: "mailinglistitem"
sent_date: 2014-03-14T10:02:26-07:00

---


Hi,

I am trying to clean up some of the test data that was inserted by
basho\_bench. The first approach to use curl and streaming the keys
fails like this:

# curl -XGET -i http://127.0.0.1:8098/buckets/test/keys?keys=stream
HTTP/1.1 200 OK
Vary: Accept-Encoding
Transfer-Encoding: chunked
Server: MochiWeb/1.1 WebMachine/1.10.0 (never breaks eye contact)
Date: Fri, 14 Mar 2014 16:59:08 GMT
Content-Type: application/json

curl: (18) transfer closed with outstanding read data remaining

When I am trying to the same thing with MapReduce it fails like this:

curl -X POST "http://localhost:8098/mapred" -H "Content-Type:
application/json" -d '{
 "inputs": "test",
 "query": [
 {
 "map": {
 "language": "javascript",
 "source": "function(riakObject) { return [riakObject.key]; }"
 }
 }
 ]
}'

Error:

{"phase":0,"error":"bad\_utf8\_character\_code","input":"{ok,{r\_object,<<\"test\">>,<<0,116,71,0>>,[{r\_content,{dict,3,16,16,8,80,48,{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},{{[],[],[],[],[],[],[],[],[],[],[[<<\"X-Riak-VTag\">>,71,81,80,81,87,76,105,54,113,120,97,116,114,106,51,86,72,53,67,50,82]],[[<<\"index\">>]],[],[[<<\"X-Riak-Last-Modified\">>|{1391,27501,255280}]],[],[]}}},<<75,191,51,171,193,113,206,163,24,68,247,188,84,72,5,72,179,195,99,44,202,122,136,31,250,94,166,5,160,199,182,137,40,6,253,115,100,4,34,67,64,10,25,210,58,23,104,97,228,...>>}],...},...}"}

I am wondering how else could I just get a list of keys in that
bucket. The ultimate goal is to be able to delete them all.

Thank you in advance,
Istvan

-- 
the sun shines for all

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

