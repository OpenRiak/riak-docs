---
title: "Re: Riak bugs with indexes?"
description: ""
project: community
lastmod: 2012-12-04T14:41:01-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg09422"
mailinglist_parent_id: "msg09421"
author_name: "Shuhao"
project_section: "mailinglistitem"
sent_date: 2012-12-04T14:41:01-08:00
---



For those asking for version numbers:

$ riak version
Attempting to restart script through sudo -H -u riak
riak (1.2.1 2012-10-16) Debian x86\_64

PS:

I assume all clients are affected as well. I confirmed this for the 
python client. In addition, if there's a comma in the bucket name or 
key, riak links decoding will fail for the python client as well. Not 
sure about the behaviours of other clients as I don't use them myself.


Shuhao

On 12-12-04 05:37 PM, Shuhao wrote:

Hi,

I'm aware that Riak could handle multiple index values... what I didn't
know until this point is that the multiple index values are separated
using the CSV format (specifically, without looking through the riak
source code, I believe it's being separated with ", ")

Here are some sample outputs (I'm using the requests module from
python). Pretend I'm storing an object with a 2i field of test\_bin
mapped to a value of "value1, stillvalue1"

 >>> requests.post("http://localhost:8098/riak/test/test", data="hello
world", headers={"Content-Type": "text/plain", "X-Riak-Index-test\_bin":
"value1, stillvalue1"})

 >>> r =
requests.get("http://localhost:8098/buckets/test/index/test\_bin/value1%2C%20stillvalue1")

 >>> r.content
'{"keys":[]}'
 >>> r =
requests.get("http://localhost:8098/buckets/test/index/test\_bin/value1")
 >>> r.content
'{"keys":["test"]}'

Cheers,

Shuhao


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

