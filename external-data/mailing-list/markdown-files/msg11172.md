---
title: "Java client -  Bug with ifNotModified?"
description: ""
project: community
lastmod: 2013-05-25T19:22:38-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11172"
mailinglist_parent_id: "msg11119"
author_name: "Y N"
project_section: "mailinglistitem"
sent_date: 2013-05-25T19:22:38-07:00
---


I am using ifNotModified and am running into a weird situation.

I am using the following API:

return bucket.store(key, new 
MyObject()).withMutator(mutator).withConverter(converter).ifNotModified(true).returnBody(true).execute();

The problem I run into is that I get a not found exception when there is no 
existing object in Riak for the specified key. If I change ifNotModified to 
false, then it works as expected. I am allocating a new object in my mutator if 
there is no existing object from the fetch cycle. Note, this is with the 
default bucket settings.

My expectation was that even with ifNotModified set to true, this should 
succeed if there is no existing object in Riak matching the key (hence, nothing 
has been modified and the store should succeed).

Please clarify the behavior of the API.

Thanks.\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

