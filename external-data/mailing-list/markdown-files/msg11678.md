---
title: "Re: Performance problem: put operation takes seconds"
description: ""
project: community
lastmod: 2013-07-22T06:56:25-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11678"
mailinglist_parent_id: "msg11677"
author_name: "Christian Dahlqvist"
project_section: "mailinglistitem"
sent_date: 2013-07-22T06:56:25-07:00
---


Hi,

A reasonably common cause for sudden spikes in latencies is that the buffers 
used for internal communication gets exhausted. This tends to manifest itself 
through large number of 'busy\_dist\_port' messages in the logs. This is 
especially common if you have large objects or objects with lots of small 
siblings.

Check your logs to see if you see any busy\_dist\_port messages in the console 
logs. If this is the case, add the following line to the vm.args file:

+zdbbl 16384

This increases the default buffer size to 16MB, but may need to be increased 
further depending on the size distribution of your data.

Also monitor statistics to see if you have large objects 
(node\_get\_fsm\_objsize\_100) and/or lots of siblings (node\_get\_fsm\_siblings\_100). 
Ideally try to keep object size below 4-5MB and ensure that your application 
resolves siblings if have this enabled, as it otherwise can cause objects to 
grow uncontrollably.

Best regards,

Christian



On 22 Jul 2013, at 14:10, ks  wrote:

> Hi Christian!
> 
> Sure:
> vm.args  
> app.config  
> 
> Thanks!
> ks
> 
> 
> 
> --
> View this message in context: 
> http://riak-users.197444.n3.nabble.com/Performance-problem-put-operation-takes-seconds-tp4028478p4028480.html
> Sent from the Riak Users mailing list archive at Nabble.com.
> 
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

