---
title: "Re: Using SASL with Riak"
description: ""
project: community
lastmod: 2015-09-22T07:12:45-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16558"
mailinglist_parent_id: "msg16556"
author_name: "Jon Meredith"
project_section: "mailinglistitem"
sent_date: 2015-09-22T07:12:45-07:00
---


Hi,

Riak uses a logging library called lager that traps the output from SASL
logging, so you should not need to set anything up.

You can either apply the lager parse transform to your commit hook code and
then you should be able to use lager:error/2, lager:warning/2, lager:info/2
 to write to the console.log (and others depending on the logging level).

You can still access those logs without the parse transform using
lager:log(info, self(), Fmt, Args).

Good luck.


On Tue, Sep 22, 2015 at 12:56 AM Kinson Chan 陳傑信 
wrote:

> Hi,
>
> Recently, I am stuck with some commit hooks. I heard that SASL could give
> more detailed debug information. However, when I specify "sasl = on" in
> the /etc/riak/riak.conf, Riak becomes unable to start and generates some
> error logs. What could be wrong? In case it makes a difference, I am
> currently using CentOS 6.7 for this setup. Thanks.
>
> Regards,
> Kinson
>
> # /etc/riak/riak.conf
> (Some default and bitcask settings.)
> erlang.distribution\_buffer\_size = 131072
> log.console.level = debug
> sasl = on
>
> # /var/log/riak/console.log
> 2015-09-22 14:41:28.564 [debug] <0.56.0>@lager\_handler\_watcher:94 Lager
> installed handler {lager\_file\_backend,"/var/log/riak/error.log"} into
> lager\_event
> 2015-09-22 14:41:28.564 [debug] <0.58.0>@lager\_handler\_watcher:94 Lager
> installed handler error\_logger\_lager\_h into error\_logger
> 2015-09-22 14:41:28.585 [debug] <0.43.0> Supervisor gr\_param\_sup started
> gr\_param:start\_link(gr\_lager\_default\_tracer\_params) at pid <0.60.0>
> 2015-09-22 14:41:28.585 [debug] <0.42.0> Supervisor gr\_counter\_sup started
> gr\_counter:start\_link(gr\_lager\_default\_tracer\_counters) at pid <0.61.0>
> 2015-09-22 14:41:28.586 [debug] <0.44.0> Supervisor gr\_manager\_sup started
> gr\_manager:start\_link(gr\_lager\_default\_tracer\_params\_mgr,
> gr\_lager\_default\_tracer\_params, []) at pid <0.62.0>
> 2015-09-22 14:41:28.586 [debug] <0.44.0> Supervisor gr\_manager\_sup started
> gr\_manager:start\_link(gr\_lager\_default\_tracer\_counters\_mgr,
> gr\_lager\_default\_tracer\_counters, [{input,0},{filter,0},{output,0}]) at pid
> <0.63.0>
> 2015-09-22 14:41:28.777 [info] <0.7.0> Application lager started on node '
> riak@192.168.254.11'
> 2015-09-22 14:41:28.779 [error] <0.66.0> CRASH REPORT Process <0.66.0>
> with 0 neighbours exited with reason:
> {bad\_config,{sasl,{sasl\_error\_logger,true}}} in application\_master:init/4
> line 133
> 2015-09-22 14:41:28.780 [info] <0.7.0> Application sasl exited with
> reason: {bad\_config,{sasl,{sasl\_error\_logger,true}}}
>
> # /var/log/riak/error.log
> 2015-09-22 14:41:28.779 [error] <0.66.0> CRASH REPORT Process <0.66.0>
> with 0 neighbours exited with reason:
> {bad\_config,{sasl,{sasl\_error\_logger,true}}} in application\_master:init/4
> line 133
>
> --
> Kinson Chan, PhD
> Senior System Engineer
> Direct Line: +852 2655 6113 Tel: +852 2655 6100 Email:
> kinsonc...@clustertech.com
>
> ClusterTech Limited
> Modernize Your Business with Advanced Computing Technologies
> Cloud + High Performance Computing + Big Data + FPGA
> Business Intelligence ∙ Financial Engineering ∙ Environmental Science ∙
> Smart City
>
> Website: www.clustertech.com/ Fax: +852 2994 2101
> Hong Kong Address: Units 211 - 213, Lakeside 1, No. 8 Science Park West
> Ave., Science Park, N.T. Hong Kong
> Hong Kong ∙ Beijing ∙ Shanghai ∙ Guangzhou ∙ Shenzhen ∙ Wuhan ∙ Xi'an ∙
> Sydney
>
> \*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*
> The information contained in this e-mail and its attachments is
> confidential and intended solely for the specified addressees. If you
> have received this email in error, please do not read, copy, distribute,
> disclose or use any information of this email in any way and please
> immediately notify the sender and delete this email. Thank you for your
> cooperation.
>
> \*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*
>
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

