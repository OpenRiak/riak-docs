---
title: "Re: Riak 1.4 test on Azure - Webmachine error at path ..."
description: ""
project: community
lastmod: 2013-07-28T12:55:44-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11799"
mailinglist_parent_id: "msg11742"
author_name: "Christian Rosnes"
project_section: "mailinglistitem"
sent_date: 2013-07-28T12:55:44-07:00
---


On Thu, Jul 25, 2013 at 2:16 PM, Christian Rosnes <
christian.ros...@gmail.com> wrote:


> During a test I just performed on a small Riak 1.4 cluster setup on Azure,
> I started seeing the Riak errors messages listed below after about 10
> minutes.
>
> The simple test was performed using lastest Jmeter running on two Azure
> instances,
> which also each runs haproxy and loadbalances the http/rest requests
> between
> the 4 Riak nodes.
>
>
An Update:

Increased some sysctl.conf network parameters on the Riak instances.
I have now been running 3 consecutive 1-hour JMeter tests with no errors:

>> 600 JMeter threads - 3600 seconds
[FINAL RESULTS]
total count: 5526844, overall avg: 386 (ms),
overall tps: 1536.6 (p/sec), recent tps: 1932.1 (p/sec), errors: 0

>> 400 JMeter threads - 3600 seconds
[FINAL RESULTS]
total count: 6350600, overall avg: 224 (ms),
overall tps: 1765.7 (p/sec), recent tps: 1849.1 (p/sec), errors: 0

>> 300 JMeter threads - 3600 seconds
[FINAL RESULTS]
total count: 5997689, overall avg: 178 (ms),
overall tps: 1666.5 (p/sec), recent tps: 1744.7 (p/sec), errors: 0

A drop in performance compared to previous Azure results
(from around 2000 req/s for 1-hour tests), but it may be caused
by the move of Riak data directory from ephemeral
/mnt/resource partitions to persistent XFS partitions;
'iostat' reports that the new partitions are near 100%
io utilization during the tests.

Will run a few more tests, then on to testing on some larger
(and a few more) Azure instances and compare result with
similar instances on AWS.

Christian
@NorSoulx
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

