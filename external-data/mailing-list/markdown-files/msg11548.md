---
title: "Re: Quickly deleting + recreating item in Riak deletes new item"
description: ""
project: community
lastmod: 2013-07-15T18:15:38-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11548"
mailinglist_parent_id: "msg11539"
author_name: "Toby Corkindale"
project_section: "mailinglistitem"
sent_date: 2013-07-15T18:15:38-07:00
---



On 16/07/13 07:16, Gabriel Littman wrote:

Another posibility is to create a new bucket for each test run.


+1

I think using a unique bucket name is definitely the only sane way to go.
It also prevents you from having weird issues if you run two tests 
simultaneously (as can easily happen once you have multiple developers 
and automated integration testing).



On Mon, Jul 15, 2013 at 12:06 PM, Matthew Dawson > wrote:

 Hi Seth,
 On July 14, 2013 02:25:02 PM Seth Bunce wrote:
 > I had a similar problem. I mitigated the problem by appending a
 > current timestamp (in nanoseconds) to the keys I'm using in my tests.
 > This way I don't have to worry about waiting for Riak to reap
 > tombstones after 3 seconds and I don't have to use
 > delete\_mode=immediate. I still do a list keys + delete before each
 > test.
 I think this is what I'm going to have to do. I tried all the different
 delete\_mode settings, but none of them seemed to help. Thanks for the
 suggestion!



\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

