---
title: "Re: Tuning a Riak cluster."
description: ""
project: community
lastmod: 2013-02-21T19:14:28-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg10195"
mailinglist_parent_id: "msg10193"
author_name: "Jeremiah Peschka"
project_section: "mailinglistitem"
sent_date: 2013-02-21T19:14:28-08:00
---


In AWS you have an option in a VPC to get dedicated gear. In a local DC, your 
VMware admin should be able to set up rules to make sure that groups of VMs 
only land on the same host in the event of a catastrophic multi-host failure.

You'll have difficulties getting predictable performance while sharing VM hosts.

--
Jeremiah Peschka - Founder, Brent Ozar Unlimited
MCITP: SQL Server 2008, MVP
Cloudera Certified Developer for Apache Hadoop

On Feb 21, 2013, at 6:54 PM, Alexander Sicular  wrote:

> Well, I would say in any circumstance where you care about performance or the 
> availability of your data. Obviously the gold standard is bare metal. A 
> search on google for "aws guaranteed different physical machines" yielded 
> this aws forum thread from 2006, 
> https://forums.aws.amazon.com/message.jspa?messageID=55112. Things may have 
> changed since then. But I use linode which tells you which physical hardware 
> your vm is on.
> 
> 
> On Feb 21, 2013, at 9:43 PM, Kevin Burton  wrote:
> 
>> How strict is this “Under no circumstances should you have more than one VM 
>> (one logical node in a Riak cluster) on the same physical hardware” rule? It 
>> doesn’t fit my situation but there has to be some leniency because Riak has 
>> to work in a cloud and you are not guaranteed that your provisioned VM will 
>> be on different physical hardware than the other nodes.
>> 
>> From: Alexander Sicular [mailto:sicul...@gmail.com] 
>> Sent: Thursday, February 21, 2013 8:27 PM
>> To: Kevin Burton
>> Cc: 'Sean Carey'; riak-users@lists.basho.com
>> Subject: Re: Tuning a Riak cluster.
>> 
>> It can't be said enough times but the number one thing you can do to ensure 
>> that you are getting true performance (not to mention redundancy) is to use 
>> different physical hardware for each of your nodes. Under no circumstances 
>> should you have more than one VM (one logical node in a Riak cluster) on the 
>> same physical hardware. Also, use multiple 
>> connections/threads/parallelism/whatever on client side and be sure to hit 
>> all the nodes in the cluster haproxy roundrobin-esque when writing to Riak. 
>> Everything else is in the noise.
>> 
>> -Alexander Sicular
>> 
>> @siculars
>> 
>> On Feb 21, 2013, at 9:04 PM, Kevin Burton  wrote:
>> 
>> 
>> 
>> There each has about 20-30GB of disk space. They each are a VM so I am not 
>> sure how to specify the CPU. They all seem to be 64 bit Intel processors but 
>> I could tell you the clock speed. The network is 1Gb Ethernet.
>> 
>> From: Sean Carey [mailto:ca...@basho.com] 
>> Sent: Thursday, February 21, 2013 7:59 PM
>> To: Kevin Burton
>> Cc: riak-users@lists.basho.com
>> Subject: Re: Tuning a Riak cluster.
>> 
>> Kevin,
>> Disk and CPU, and Network?
>> 
>> 
>> Sean Carey
>> @densone
>> 
>> On Thursday, February 21, 2013 at 20:31, Kevin Burton wrote:
>> 
>> 
>> I have a cluster of 4 machines (4 Linux VM machines each allocated about 1 
>> Gb of memory – yea I know it isn’t a lot). I would like to get some pointers 
>> on getting the fastest query time possible given these meager resources. 
>> Thank you.
>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>> riak-users mailing list
>> riak-users@lists.basho.com
>> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>> 
>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>> riak-users mailing list
>> riak-users@lists.basho.com
>> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
> 
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

