---
title: "Performance of link walking versus map/reduce"
description: ""
project: community
lastmod: 2012-02-03T09:31:32-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06533"
author_name: "Nicolas Petton"
project_section: "mailinglistitem"
sent_date: 2012-02-03T09:31:32-08:00

---


Hi!

First of all, I'm new to Riak, so maybe my question doesn't make
sense :) 

Doing some tests with map/reduce, I experienced a huge performance
difference between link walking and map/reduce:

I run Riak on a single box for testing, I have 2 buckets, 'artists' have
500 objects, and albums have nearly 3000 objects. All objects are very
small, a small string as data.

curl
http://localhost:8098/buckets/artists/keys/pink\_floyd/albums,author,\_
was nearly immediate, it took 0.156s

while:

curl -X POST -H "content-type:application/json" \
 http://localhost:8098/mapred --data @-
{"inputs":[["artists","pink\_floyd"]],"query":[{"link":{"bucket":"albums","tag":"author"}},{"map":{"language":"javascript","source":"function(v)
{ return [v]; }"}}]}

Took nearly 2 seconds.

Is there a reason for such a speed difference? 
Is the map/reduce performance expected?

Thanks,
Nico


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

