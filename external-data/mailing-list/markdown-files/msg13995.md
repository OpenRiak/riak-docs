---
title: "LevelDB parameter planning - max_open_files"
description: ""
project: community
lastmod: 2014-04-04T07:42:13-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13995"
author_name: "Oleksiy Krivoshey"
project_section: "mailinglistitem"
sent_date: 2014-04-04T07:42:13-07:00

---


Can someone please suggest how to understand the formula for
open\_file\_memory on this page:
http://docs.basho.com/riak/latest/ops/advanced/backends/leveldb/#Parameter-Planning

1. It definitely lacks some brackets, the correct formula is:

OPEN\_FILE\_MEMORY = (max\_open\_files-10) \* (184 +
(average\_sst\_filesize/2048) \* (8+((key\_size+value\_size)/2048 +1)\*0.6))


2. How to estimate average\_sst\_filesize?


3. does the result estimate the memory used by a single open file in any
particular vnode? Or by a single vnode with max\_open\_files open? As
max\_open\_files is a per vnode parameter then how to estimate the maximum
memory used by leveldb if all vnodes have all max\_open\_files open? is it
result\*ring\_size or result\*ring\_size\*max\_open\_files?


Thanks!

-- 
Oleksiy
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

