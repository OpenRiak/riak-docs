---
title: "Re: Understanding an intermittent mapreduce error"
description: ""
project: community
lastmod: 2014-06-16T22:18:25-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14319"
mailinglist_parent_id: "msg14318"
author_name: "Toby Corkindale"
project_section: "mailinglistitem"
sent_date: 2014-06-16T22:18:25-07:00
---


> rp(rpc:multicall(riak\_kv\_mapred\_json, module\_info, [exports])).
{[[{parse\_inputs,1},
 {parse\_query,1},
 {dejsonify\_not\_found,1},
 {module\_info,0},
 {module\_info,1},
 {jsonify\_not\_found,1},
 {jsonify\_bkeys,2},
 {parse\_request,1},
 {jsonify\_pipe\_error,2}],
 {badrpc,{'EXIT',{undef,[{riak\_kv\_mapred\_json,module\_info,
 [exports],
 []},
 {rpc,'-handle\_call\_call/6-fun-0-',5,
 [{file,"rpc.erl"},{line,203}]}]}}},
 {badrpc,{'EXIT',{undef,[{riak\_kv\_mapred\_json,module\_info,
 [exports],
 []},
 {rpc,'-handle\_call\_call/6-fun-0-',5,
 [{file,"rpc.erl"},{line,203}]}]}}},
 [{parse\_inputs,1},
 {parse\_query,1},
 {dejsonify\_not\_found,1},
 {module\_info,0},
 {module\_info,1},
 {jsonify\_not\_found,1},
 {jsonify\_bkeys,2},
 {parse\_request,1},
 {jsonify\_pipe\_error,2}],
 [{parse\_inputs,1},
 {parse\_query,1},
 {dejsonify\_not\_found,1},
 {module\_info,0},
 {module\_info,1},
 {jsonify\_not\_found,1},
 {jsonify\_bkeys,2},
 {parse\_request,1},
 {jsonify\_pipe\_error,2}],
 [{parse\_inputs,1},
 {parse\_query,1},
 {module\_info,0},
 {module\_info,1},
 {jsonify\_not\_found,1},
 {dejsonify\_not\_found,1},
 {jsonify\_bkeys,2},
 {parse\_request,1},
 {jsonify\_pipe\_error,2}]],
 []}
ok


On 17 June 2014 11:19, Sean Cribbs  wrote:
> Sorry for the typo, replace 'rr' with 'rp' on the front of that.
>
> Sean Cribbs
>
>> On Jun 16, 2014, at 7:59 PM, Toby Corkindale  wrote:
>>
>> Hi Sean,
>> Thanks for your response -- sorry about the delay. I'm in a far away 
>> timezone.
>> The response I get is:
>> Eshell V5.9.1 (abort with ^G)
>> (riak@riak01.internal)1> rr(rpc:multicall(riak\_kv\_mapred\_json,
>> module\_info, [exports])).
>> {error,invalid\_filename}
>> (riak@riak01.internal)2>
>>
>> -Toby
>>
>>> On 16 June 2014 23:22, Sean Cribbs  wrote:
>>> Toby,
>>>
>>> Could you try this?
>>>
>>> 1. Run `riak attach`
>>> 2. Type into the console: rr(rpc:multicall(riak\_kv\_mapred\_json, module\_info,
>>> [exports])).
>>> 3. Paste back to me what the result is
>>>
>>> Cheers,
>>>
>>>
>>>> On Mon, Jun 16, 2014 at 3:31 AM, Toby Corkindale  wrote:
>>>>
>>>> Hi,
>>>> I'm trying to understand why I'm getting an intermittent error on a
>>>> particular map-reduce call to Riak 1.4.9.
>>>> The query isn't particularly complicated, and filters mean it should
>>>> only be running over ~100 keys, and returning <10 each time, so I
>>>> don't think I should be hitting any stack or memory limits in the JS
>>>> VMs.
>>>>
>>>> It fails frequently, but not every time. When pointing it at just a
>>>> single Riak server for debugging purposes, it fails around 30% of the
>>>> time.
>>>> The error returned is as follows:
>>>>
>>>> {
>>>> "input" : null,
>>>> "stack" : null,
>>>> "phase" : 1,
>>>> "error" :
>>>> "{undef,[{riak\_kv\_mapred\_json,jsonify\_not\_found,[{struct,[{<<\"email\">>,<<\"u...@example.com\">>},{<<\"attributes\">>,[<<\"someattributes\">>,<<\"somemoreattributes\">>,<<\"w...\">>,...]},...]}],...},...]}",
>>>> "type" : null
>>>> }
>>>>
>>>>
>>>> There are no errors in the Riak server logs.
>>>>
>>>>
>>>> Thanks,
>>>> Toby
>>>>
>>>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>>>> riak-users mailing list
>>>> riak-users@lists.basho.com
>>>> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>>>
>>>
>>>
>>>
>>> --
>>> Sean Cribbs 
>>> Software Engineer
>>> Basho Technologies, Inc.
>>> http://basho.com/
>>
>>
>>
>> --
>> Turning and turning in the widening gyre
>> The falcon cannot hear the falconer
>> Things fall apart; the center cannot hold
>> Mere anarchy is loosed upon the world



-- 
Turning and turning in the widening gyre
The falcon cannot hear the falconer
Things fall apart; the center cannot hold
Mere anarchy is loosed upon the world

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

