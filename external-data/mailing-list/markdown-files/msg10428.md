---
title: "Re: Error interpretation"
description: ""
project: community
lastmod: 2013-03-13T20:15:41-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg10428"
mailinglist_parent_id: "msg10419"
author_name: "Jeremiah Peschka"
project_section: "mailinglistitem"
sent_date: 2013-03-13T20:15:41-07:00
---


This is gold! Thanks for sharing the ultimate cause of Kevin's error.

On Wednesday, March 13, 2013, Tony Schwartz wrote:

> The combination of allow\_mult: true and the precommit
> "riak\_search\_kv\_hook" is the issue. But this is only true if its set in
> the default props.
>
> Search and conflict resolution can work together, but apparently search
> creates hidden buckets behind the scenes that go off the default bucket
> properties specified in app.config.
>
> So if those buckets have allow\_mult, there will be there problem.
>
> So basically, if you have search enabled, you need to have allow\_mult =
> false as the default.
>
> You can enable allow\_mult = true on individual buckets, in an ad hoc
> manner.
>
> This isn't to say that search and conflict resolution is incompatible, it
> just means that allow\_mult must be set dynamically in that case.
>
> On Wed, Mar 13, 2013 at 7:22 PM, Kevin Burton 
>  'rkevinbur...@charter.net');>
> > wrote:
>
>> Thanks again. You solved it!!. I am not sure how the bucket properties
>> were set in this way but I changed back to the default and it works again.
>> The key property in this case was ‘precommit’. Now that this property is
>> suspect can we offer an explanation? I have highlighted the changed
>> properties and the one that certainly jumped out is ‘precommit’. How does
>> that get set? What are the conditions that setting it in this way would
>> case such an error?\*\*\*\*
>>
>> \*\* \*\*
>>
>> Here are the original bucket properties:\*\*\*\*
>>
>> \*\* \*\*
>>
>> {\*\*\*\*
>>
>> "props" : {\*\*\*\*
>>
>> "allow\_mult" : true,\*\*\*\*
>>
>> "basic\_quorum" : false,\*\*\*\*
>>
>> "big\_vclock" : 50,\*\*\*\*
>>
>> "chash\_keyfun" : {\*\*\*\*
>>
>> "mod" : "riak\_core\_util",\*\*\*\*
>>
>> "fun" : "chash\_std\_keyfun"\*\*\*\*
>>
>> },\*\*\*\*
>>
>> "dw" : "quorum",\*\*\*\*
>>
>> "last\_write\_wins" : false,\*\*\*\*
>>
>> "linkfun" : {\*\*\*\*
>>
>> "mod" : "riak\_kv\_wm\_link\_walker",\*\*\*\*
>>
>> "fun" : "mapreduce\_linkfun"\*\*\*\*
>>
>> },\*\*\*\*
>>
>> "n\_val" : 4,\*\*\*\*
>>
>> "name" : "buyseasons-orders",\*\*\*\*
>>
>> "notfound\_ok" : true,\*\*\*\*
>>
>> "old\_vclock" : 86400,\*\*\*\*
>>
>> "postcommit" : [ ],\*\*\*\*
>>
>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>> riak-users mailing list
>> riak-users@lists.basho.com > 'riak-users@lists.basho.com');>
>> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>>
>>
>

-- 
---
Jeremiah Peschka - Founder, Brent Ozar Unlimited
MCITP: SQL Server 2008, MVP
Cloudera Certified Developer for Apache Hadoop
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

