---
title: "RE: Quering Riaksearch on Second Node"
description: ""
project: community
lastmod: 2011-07-11T05:58:44-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03982"
mailinglist_parent_id: "msg03979"
author_name: "Muhammad Yousaf"
project_section: "mailinglistitem"
sent_date: 2011-07-11T05:58:44-07:00
---




Thanks Mathias & Sylvain,
Everything works fine on second node except riakc\_pb\_socket:search command. 
Yes, Normal data can be accessed.

Upgrading riaksearch to 0.14.2 solves that problem. 1 Question though, Copying 
Data folder which includes bitcask,merge\_index,mr\_queue and ring to new version 
of riak search Data folder will it work or not ?. If yes, do i have to reindex 
my data ? 
 


Regards,
Muhammad Yousaf

> Date: Mon, 11 Jul 2011 09:59:09 +0200
> From: math...@basho.com
> To: muhammad.you...@live.com
> CC: riak-users@lists.basho.com
> Subject: Re: Quering Riaksearch on Second Node
> 
> Muhammad,
> 
> can you see the merge\_index directory fill with data on the second machine 
> that's not responding to queries? Anything unusual showing up in the log?
> 
> Can you access the normal data you're indexing through Riak KV on both 
> machines?
> 
> Mathias Meyer
> Developer Advocate, Basho Technologies
> 
> 
> On Donnerstag, 7. Juli 2011 at 20:28, Muhammad Yousaf wrote:
> 
> > Hi,
> > 
> > I have 2 node Riaksearch cluster. My first node is working perfectly with 
> > that stats
> > 
> > curl -H "Accept: text/plain" http://192.168.1.182:8098/stats
> > {
> > "vnode\_gets": 0,
> > "vnode\_puts": 0,
> > "read\_repairs": 0,
> > "vnode\_gets\_total": 480294,
> > "vnode\_puts\_total": 106564,
> > "node\_gets": 0,
> > "node\_gets\_total": 341810,
> > "node\_get\_fsm\_time\_mean": "undefined",
> > "node\_get\_fsm\_time\_median": "undefined",
> > "node\_get\_fsm\_time\_95": "undefined",
> > "node\_get\_fsm\_time\_99": "undefined",
> > "node\_get\_fsm\_time\_100": "undefined",
> > "node\_puts": 0,
> > "node\_puts\_total": 34671,
> > "node\_put\_fsm\_time\_mean": "undefined",
> > "node\_put\_fsm\_time\_median": "undefined",
> > "node\_put\_fsm\_time\_95": "undefined",
> > "node\_put\_fsm\_time\_99": "undefined",
> > "node\_put\_fsm\_time\_100": "undefined",
> > "read\_repairs\_total": 1711,
> > "cpu\_nprocs": 472,
> > "cpu\_avg1": 374,
> > "cpu\_avg5": 479,
> > "cpu\_avg15": 502,
> > "mem\_total": 4002107392.0,
> > "mem\_allocated": 3946246144.0,
> > "nodename": "riaksearch@192.168.1.182",
> > "connected\_nodes": [
> > "riaksearch@192.168.1.167"
> > ],
> > "sys\_driver\_version": "1.5",
> > "sys\_global\_heaps\_size": 0,
> > "sys\_heap\_type": "private",
> > "sys\_logical\_processors": 4,
> > "sys\_otp\_release": "R14B01",
> > "sys\_process\_count": 387,
> > "sys\_smp\_support": true,
> > "sys\_system\_version": "Erlang R14B01 (erts-5.8.2) [source] [64-bit] 
> > [smp:4:4] [rq:4] [async-threads:64] [hipe] [kernel-poll:true]",
> > "sys\_system\_architecture": "x86\_64-unknown-linux-gnu",
> > "sys\_threads\_enabled": true,
> > "sys\_thread\_pool\_size": 64,
> > "sys\_wordsize": 8,
> > "ring\_members": [
> > "riaksearch@192.168.1.167",
> > "riaksearch@192.168.1.182"
> > ],
> > "ring\_num\_partitions": 64,
> > "ring\_ownership": 
> > "[{'riaksearch@192.168.1.182',32},{'riaksearch@192.168.1.167',32}]",
> > "ring\_creation\_size": 64,
> > "storage\_backend": "riak\_kv\_bitcask\_backend",
> > "pbc\_connects\_total": 505,
> > "pbc\_connects": 0,
> > "pbc\_active": 0,
> > "riak\_err\_version": "1.0.0",
> > "runtime\_tools\_version": "1.8.4.1",
> > "riak\_search\_version": "0.14.0",
> > "riak\_search\_core\_version": "0.14.0",
> > "qilr\_version": "0.14.0",
> > "riak\_solr\_version": "0.14.0",
> > "merge\_index\_version": "0.14.0",
> > "luwak\_version": "1.0.0",
> > "skerl\_version": "1.0.0",
> > "riak\_kv\_version": "0.14.0",
> > "bitcask\_version": "1.1.5",
> > "riak\_core\_version": "0.14.0",
> > "luke\_version": "0.2.3",
> > "erlang\_js\_version": "0.5.0",
> > "mochiweb\_version": "1.7.1",
> > "webmachine\_version": "1.8.0",
> > "crypto\_version": "2.0.2",
> > "os\_mon\_version": "2.2.5",
> > "cluster\_info\_version": "1.0.0",
> > "sasl\_version": "2.1.9.2",
> > "stdlib\_version": "1.17.2",
> > "kernel\_version": "2.14.2",
> > "executing\_mappers": 0
> > 
> > my query from first node works fine
> > 
> > (riak1@127.0.0.1 (mailto:riak1@127.0.0.1))3> {ok,Client} 
> > =riakc\_pb\_socket:start\_link('192.168.1.182',8087).
> > {ok,<0.46.0>}
> > (riak1@127.0.0.1 (mailto:riak1@127.0.0.1))4> riakc\_pb\_socket:search(Client, 
> > <<"player">>, "playername:yousaf"). 
> > {ok,[[<<"player">>,<<"yousaf">>]]}
> > 
> > also 
> > 
> > curl http://192.168.1.182:8098/solr/player/select?q=playername:yousaf
> > xml version="1.0" encoding="UTF-8"?
> > 
> > 
> > 0
> > 2
> > 
> > on
> > 0
> > playername:yousaf
> > or
> > value
> > standard
> > 1.1
> > 1
> > 
> > 
> > 
> > 
> > yousaf
> > 
> > 1
> > 
> > 20110705
> > 
> > muhammad
> > 
> > 1
> > 
> > snowball
> > 
> > 100
> > 
> > yousaf
> > 
> > yousaf
> > 
> > world1
> > 
> > 100
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > but on my second node i can get list of keys but cannot search it 
> > 
> > (riak1@127.0.0.1)6> {ok,Client} 
> > =riakc\_pb\_socket:start\_link('192.168.1.167',8087).
> > {ok,<0.53.0>}
> > (riak1@127.0.0.1)7> riakc\_pb\_socket:search(Client, <<"player">>, 
> > "playername:yousaf").
> > {ok,[]}
> > 
> > and 
> > 
> > curl http://192.168.1.167:8098/solr/player/select?q=playername:yousaf.
> > xml version="1.0" encoding="UTF-8"?
> > 
> > 
> > 0
> > 1
> > 
> > on
> > 0
> > playername:yousaf.
> > or
> > value
> > standard
> > 1.1
> > 0
> > 
> > 
> > 
> > 
> > 
> > 
> > but data is replicating properly. Any idea's how to fix it only searching 
> > is causing problem??
> > 
> > 
> > 
> > Regards,
> > 
> > Muhammad Yousaf 
> > \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> > riak-users mailing list
> > riak-users@lists.basho.com (mailto:riak-users@lists.basho.com)
> > http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
> 
> 
 \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

