---
title: "Re: Erlang API for MapReduce"
description: ""
project: community
lastmod: 2012-12-21T01:14:23-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg09663"
mailinglist_parent_id: "msg09660"
author_name: "Christian Dahlqvist"
project_section: "mailinglistitem"
sent_date: 2012-12-21T01:14:23-08:00
---


Hi,

The client you are trying to use is the internal Riak client. This will work if 
you attach [1] to the Riak console and want to query Riak. If you are writing 
an application to be run from outside Riak, you should instead use the Riak PB 
Erlang Client [2].

Best regards,

Christian

[1] 
http://docs.basho.com/riak/1.0.0/references/Command-Line-Tools---riak/#attach
[2] https://github.com/basho/riak-erlang-client


On 20 Dec 2012, at 18:52, Shaan Sapra  wrote:

> I am trying to understand the Erlang API for Map/Reduce queries, but I'm not 
> sure what I'm doing. 
> 
> I have 4 nodes made by the command 'make devrel'. I started all 4 and joined 
> them into a cluster. Now when I try to follow the documentation here.
> 
> 1> {ok, Client} = riak:local\_client().
> 
> I receive : \*\* exception error: undefined function riak:local\_client/0
> 
> I looked around for the erlang files and found them in riak/deps/riak\_kv/src. 
> 
> Realizing my shell didn't know about these files, I ran the erlang shell in ^ 
> directory, but then I received this:
> 
> \*\* exception error: undefined function riak\_core\_util:mkclientid/1
> in function riak:client\_connect/2 (riak.erl, line 120)
> 
> Can someone please help me understand how I should be calling these functions 
> and where?
> 
> Also, if someone could explain how to run M/R queries as a script instead of 
> in the shell and provide some example code, that would be great!
> 
> Thanks,
> Shaan Sapra
> 
> 
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

