---
title: "Re: Using the special $key field for range queries across keys"
description: ""
project: community
lastmod: 2011-12-15T08:36:19-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05962"
mailinglist_parent_id: "msg05960"
author_name: "Rusty Klophaus"
project_section: "mailinglistitem"
sent_date: 2011-12-15T08:36:19-08:00
---


Hi Izhar,

I've included a command-line example below that uses the special $key
field.

Note that on the command line, the dollar sign ($) must be escaped with a
backslash, otherwise the shell thinks you are referencing a variable. You
won't need to escape the dollar sign using the client libraries.

Best,
Rusty

## Load some data...

curl -v -X PUT -d 'data1' -H "x-riak-index-field1\_bin: val1" \
http://127.0.0.1:8098/riak/bucket1/key1

curl -v -X PUT -d 'data2' -H "x-riak-index-field1\_bin: val2" \
http://127.0.0.1:8098/riak/bucket1/key2

curl -v -X PUT -d 'data3' -H "x-riak-index-field1\_bin: val3" \
http://127.0.0.1:8098/riak/bucket1/key3

curl -v -X PUT -d 'data4' -H "x-riak-index-field1\_bin: val4" \
http://127.0.0.1:8098/riak/bucket1/key4

curl -v -X PUT -d 'data5' -H "x-riak-index-field1\_bin: val5" \
http://127.0.0.1:8098/riak/bucket1/key5

## Run a REST-based query. In a web browser, you can just open
http://localhost:8098/buckets/bucket1/index/$key/key2/key4

curl http://localhost:8098/buckets/bucket1/index/\$key/key2/key4

## Run a M/R-based query...

curl -X POST \
-H "content-type: application/json" \
-d @- \
http://localhost:8098/mapred \
< wrote:

> HI All,
>
> The Basho wiki states that:
> The $key index field is a special field that is implicitly indexed on all
> objects when Secondary Indexes is enabled. The value of this field is the
> object's key, so this field allows an application to perform range queries
> across the keys in a bucket.
>
> What is the REST API to use this special field? And what would be the the
> corresponding read URI?
>
> Thanks,
> Izhar.
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>



-- 
Rusty Klophaus (@rustyio)
\*Basho Technologies, Inc.\*
www.basho.com
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

