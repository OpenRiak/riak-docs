---
title: "Re: Trouble with Riak Search JSON Extractor"
description: ""
project: community
lastmod: 2015-03-22T15:46:48-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15906"
mailinglist_parent_id: "msg15905"
author_name: "Zeeshan Lakhani"
project_section: "mailinglistitem"
sent_date: 2015-03-22T15:46:48-07:00
---


Hello Matt,

Are you receiving any indexing errors in your logs (check the Solr logs as 
well)? To be sure, I just wrote a test (using our erlang pb api, 
https://github.com/basho/yokozuna/pull/474/files#diff-5d0015658ff90b94cb1a00329ffafe00R251
 
)
 using a custom schema, and I didnâ€™t run into any troubles; I also checked via 
the http api. If you have the required \_yz\* fields, you should get those back 
with the document. If you want the groups items themselves, youâ€™d have to make 
`stored` true.

Zeeshan Lakhani
programmer | 
software engineer at @basho | 
org. member/founder of @papers\_we\_love | paperswelove.org
twitter => @zeeshanlakhani

> On Mar 22, 2015, at 4:13 PM, Matt Brooks  wrote:
> 
> Hello,
> 
> I have a quick question about a search schema that would index an array of 
> strings in a JSON object. I am storing user data in JSON that looks something 
> like this:
> 
> {
> "name" : "John Smith",
> "email" : "jsm...@gmail.com ",
> "groups" : [
> "3304cf79",
> "abe155cf"
> ]
> }
> The custom schema I use for users includes this field entry: 
> 
>  multiValued="true"/>
> I also have the following field type entry: 
> 
> 
> I assumed that these entries would allow me to search for users using a query 
> like: 
> 
> curl $RIAK/search/query/user?wt=json&q=groups:3304cf79
> But no docs are returned. I'm almost certain I have an issue with my schema. 
> How can I query users by string entries in the "groups" array?
> 
> Thank you, 
> Matt.
> 
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

