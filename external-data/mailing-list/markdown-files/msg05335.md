---
title: "question about a new node join"
description: ""
project: community
lastmod: 2011-10-28T04:55:53-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05335"
author_name: "chuang"
project_section: "mailinglistitem"
sent_date: 2011-10-28T04:55:53-07:00

---


I read the source in riak-0.4.12.

When a new node join the cluster,it sends reconcile\_ring message in
riak\_core\_gossip,then in riak\_core\_claim.erl reconcile the ring in the
cluster.
In all the join-cluster process,the core function is
riak\_core\_ring:transfer\_node,but this function only change ring index,seems
there is no place to transfer node data.

Image that node1 has key A, when node 2 join the cluster,after the reconcile
process ends,node 1 and 2 just change their ring index that key A should
place in node 2 next time,but the old data in key A is still in node 1! If
key A never update its data any more,any reader read key A will miss, cause
node 2 now has no data of key A.

Another question is: merker.erl seems no use?
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

