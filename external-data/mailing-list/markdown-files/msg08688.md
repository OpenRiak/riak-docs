---
title: "Bug on riak-client 1.0.6 - Riak index property not serialized"
description: ""
project: community
lastmod: 2012-09-25T00:01:23-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08688"
author_name: "Deepak Balasubramanyam"
project_section: "mailinglistitem"
sent_date: 2012-09-25T00:01:23-07:00

---


I switched to the java riak-client 1.0.6 to take it for a spin, and several
test cases of mine failed. Upon further investigation I found that any
member variable that contains the @RiakIndex annotation does not serialize
into Riak anymore. You can reproduce the problem with the following type

@JsonSerialize(include=JsonSerialize.Inclusion.NON\_NULL)
public class MyType
{
 public static final String SOME\_NAME\_STR\_REFERENCE = "blah";
 @RiakKey
 private String myKey;
 @RiakIndex(name=SOME\_NAME\_STR\_REFERENCE)
 private String indexedProp;
 // Getters and setters go here
}

Make a call to bucket.store(typeRef).execute() followed by a GET
to /riak/myBucket/myKey. The indexedProp element will be missing in the
json for calls made on riak-client version 1.0.6 but will be available when
the call is made from riak-client version 1.0.5.

Thanks
Deepak Bala
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

