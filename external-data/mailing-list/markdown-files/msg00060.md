---
title: ""bad encoding""
description: ""
project: community
lastmod: 2010-04-16T09:22:18-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg00060"
author_name: "Jimmy Thrasher"
project_section: "mailinglistitem"
sent_date: 2010-04-16T09:22:18-07:00

---


Hi everybody,

I have a document stored as application/json, and when it is present,
map/reduce queries that operate on the JSON contents result in ["bad
encoding"].

Before I go down the long path of reproducing in isolation, what should I
know about encodings, JSON and Riak? Here's the document:
{"time":1271430844,"type":"checkin","user\_id":131,"data":{"user\_id":131,"name":"&$","task\_list\_id":"1234","address":"#%^\*\u00a5+\u00a5\u2022\u00a3\u20ac","latitude":"35.9024975592833","longitude":"-78.8580127860656"}}

In my local standalone SpiderMonkey instance, the following works just fine:
JSON.parse("{\"time\":1271430844,\"points\":2,\"type\":\"checkin\",\"user\_id\":131,\"data\":{\"user\_id\":131,\"name\":\"&$\",\"task\_list\_id\":\"1234\",\"address\":\"#%^\*\\u00a5+\\u00a5\\u2022\\u00a3\\u20ac\",\"latitude\":\"35.9024975592833\",\"longitude\":\"-78.8580127860656\"}}")

But when I remove this entry from the DB everything becomes ungummed again.

Any ideas before I start digging deeper?

Jimmy
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

