---
title: "Re: Bitcask merge"
description: ""
project: community
lastmod: 2011-08-26T01:44:44-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg04470"
mailinglist_parent_id: "msg04469"
author_name: "raghwani sohil"
project_section: "mailinglistitem"
sent_date: 2011-08-26T01:44:44-07:00
---


Hi Wilken ,

This is my list of \*.data files and their sizes

-rw------- 1 riak riak 315M Aug 16 12:56
1050454301831586472458898473514828420377701515264/1313076758.bitcask.data
-rw------- 1 riak riak 0 Aug 16 12:58
1050454301831586472458898473514828420377701515264/1313479727.bitcask.data
-rw------- 1 riak riak 106K Aug 22 12:43
1050454301831586472458898473514828420377701515264/1313568491.bitcask.data
-rw------- 1 riak riak 576 Aug 16 13:02
1118962191081472546749696200048404186924073353216/1313479936.bitcask.data
-rw------- 1 riak riak 0 Aug 16 13:05
1118962191081472546749696200048404186924073353216/1313480104.bitcask.data
-rw------- 1 riak riak 11K Aug 22 12:43
1118962191081472546749696200048404186924073353216/1313501319.bitcask.data
-rw------- 1 riak riak 301M Aug 16 12:56
1187470080331358621040493926581979953470445191168/1313076680.bitcask.data
-rw------- 1 riak riak 0 Aug 16 12:58
1187470080331358621040493926581979953470445191168/1313479728.bitcask.data
-rw------- 1 riak riak 11K Aug 22 12:43
1187470080331358621040493926581979953470445191168/1313570157.bitcask.data
-rw------- 1 riak riak 309M Aug 16 12:56
1255977969581244695331291653115555720016817029120/1313076677.bitcask.data
-rw------- 1 riak riak 5.0M Aug 16 12:58
1255977969581244695331291653115555720016817029120/1313479728.bitcask.data
-rw------- 1 riak riak 19K Aug 22 12:43
1255977969581244695331291653115555720016817029120/1313501040.bitcask.data
-rw------- 1 riak riak 317M Aug 16 12:55
1324485858831130769622089379649131486563188867072/1313076676.bitcask.data
-rw------- 1 riak riak 0 Aug 16 12:58
1324485858831130769622089379649131486563188867072/1313479729.bitcask.data
-rw------- 1 riak riak 19K Aug 19 17:38
1324485858831130769622089379649131486563188867072/1313568744.bitcask.data
-rw------- 1 riak riak 317M Aug 16 12:56
1392993748081016843912887106182707253109560705024/1313076680.bitcask.data
-rw------- 1 riak riak 0 Aug 16 12:58
1392993748081016843912887106182707253109560705024/1313479729.bitcask.data
-rw------- 1 riak riak 21K Aug 23 18:24
1392993748081016843912887106182707253109560705024/1313501319.bitcask.data
-rw------- 1 riak riak 318M Aug 16 12:55
159851741583067506678528028578343455274867621888/1313076678.bitcask.data
-rw------- 1 riak riak 0 Aug 16 12:58
159851741583067506678528028578343455274867621888/1313479723.bitcask.data
-rw------- 1 riak riak 21K Aug 22 12:43
159851741583067506678528028578343455274867621888/1313501040.bitcask.data
-rw------- 1 riak riak 309M Aug 16 12:55
228359630832953580969325755111919221821239459840/1313076678.bitcask.data
-rw------- 1 riak riak 0 Aug 16 12:58
228359630832953580969325755111919221821239459840/1313479723.bitcask.data
-rw------- 1 riak riak 17K Aug 22 12:43
228359630832953580969325755111919221821239459840/1313501319.bitcask.data
-rw------- 1 riak riak 307M Aug 16 12:56
22835963083295358096932575511191922182123945984/1313076762.bitcask.data
-rw------- 1 riak riak 0 Aug 16 12:58
22835963083295358096932575511191922182123945984/1313479723.bitcask.data
-rw------- 1 riak riak 8.3K Aug 19 17:38
22835963083295358096932575511191922182123945984/1313568491.bitcask.data
-rw------- 1 riak riak 308M Aug 16 12:55
296867520082839655260123481645494988367611297792/1313076760.bitcask.data
-rw------- 1 riak riak 0 Aug 16 12:58
296867520082839655260123481645494988367611297792/1313479723.bitcask.data
-rw------- 1 riak riak 66K Aug 22 12:43
296867520082839655260123481645494988367611297792/1313501040.bitcask.data
-rw------- 1 riak riak 318M Aug 16 12:55
365375409332725729550921208179070754913983135744/1313076678.bitcask.data
-rw------- 1 riak riak 0 Aug 16 12:58
365375409332725729550921208179070754913983135744/1313479723.bitcask.data
-rw------- 1 riak riak 17K Aug 22 12:43
365375409332725729550921208179070754913983135744/1313501040.bitcask.data
-rw------- 1 riak riak 0 Aug 16 12:58
433883298582611803841718934712646521460354973696/1313479724.bitcask.data
-rw------- 1 riak riak 190K Aug 24 11:58
433883298582611803841718934712646521460354973696/1314167326.bitcask.data
-rw------- 1 riak riak 303M Aug 16 12:56
502391187832497878132516661246222288006726811648/1313076676.bitcask.data
-rw------- 1 riak riak 0 Aug 16 12:58
502391187832497878132516661246222288006726811648/1313479724.bitcask.data
-rw------- 1 riak riak 5.7K Aug 22 12:43
502391187832497878132516661246222288006726811648/1313501040.bitcask.data
-rw------- 1 riak riak 309M Aug 16 12:56
570899077082383952423314387779798054553098649600/1313076758.bitcask.data
-rw------- 1 riak riak 0 Aug 16 12:58
570899077082383952423314387779798054553098649600/1313479724.bitcask.data
-rw------- 1 riak riak 27K Aug 22 12:43
570899077082383952423314387779798054553098649600/1313568474.bitcask.data
-rw------- 1 riak riak 304M Aug 16 12:56
639406966332270026714112114313373821099470487552/1313076678.bitcask.data
-rw------- 1 riak riak 0 Aug 16 12:58
639406966332270026714112114313373821099470487552/1313479726.bitcask.data
-rw------- 1 riak riak 22K Aug 22 12:43
639406966332270026714112114313373821099470487552/1313568431.bitcask.data
-rw------- 1 riak riak 309M Aug 16 12:56
707914855582156101004909840846949587645842325504/1313076760.bitcask.data
-rw------- 1 riak riak 0 Aug 16 12:58
707914855582156101004909840846949587645842325504/1313479726.bitcask.data
-rw------- 1 riak riak 12K Aug 22 12:43
707914855582156101004909840846949587645842325504/1313568457.bitcask.data
-rw------- 1 riak riak 309M Aug 16 12:56
776422744832042175295707567380525354192214163456/1313076762.bitcask.data
-rw------- 1 riak riak 0 Aug 16 12:58
776422744832042175295707567380525354192214163456/1313479726.bitcask.data
-rw------- 1 riak riak 9.4K Aug 19 17:39
776422744832042175295707567380525354192214163456/1313568465.bitcask.data
-rw------- 1 riak riak 304M Aug 16 12:55
844930634081928249586505293914101120738586001408/1313076758.bitcask.data
-rw------- 1 riak riak 0 Aug 16 12:58
844930634081928249586505293914101120738586001408/1313479726.bitcask.data
-rw------- 1 riak riak 19K Aug 22 12:43
844930634081928249586505293914101120738586001408/1313568465.bitcask.data
-rw------- 1 riak riak 309M Aug 16 12:56
913438523331814323877303020447676887284957839360/1313076677.bitcask.data
-rw------- 1 riak riak 0 Aug 16 12:58
913438523331814323877303020447676887284957839360/1313479726.bitcask.data
-rw------- 1 riak riak 4.9M Aug 16 13:03
913438523331814323877303020447676887284957839360/1313480007.bitcask.data
-rw------- 1 riak riak 10K Aug 22 12:43
913438523331814323877303020447676887284957839360/1313570137.bitcask.data
-rw------- 1 riak riak 307M Aug 16 12:58
91343852333181432387730302044767688728495783936/1313076761.bitcask.data
-rw------- 1 riak riak 0 Aug 16 12:58
91343852333181432387730302044767688728495783936/1313479723.bitcask.data
-rw------- 1 riak riak 6.0K Aug 16 13:03
91343852333181432387730302044767688728495783936/1313480005.bitcask.data
-rw------- 1 riak riak 598 Aug 19 17:38
91343852333181432387730302044767688728495783936/1313758045.bitcask.data
-rw------- 1 riak riak 308M Aug 16 12:56
981946412581700398168100746981252653831329677312/1313076766.bitcask.data
-rw------- 1 riak riak 0 Aug 16 12:58
981946412581700398168100746981252653831329677312/1313479727.bitcask.data
-rw------- 1 riak riak 18K Aug 22 12:43
981946412581700398168100746981252653831329677312/1313568474.bitcask.data



On Fri, Aug 26, 2011 at 1:45 PM, Nathan Wilken  wrote:

> Can you send a list of the \*.data files and their sizes?
>
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> From: riak-users-boun...@lists.basho.com [
> riak-users-boun...@lists.basho.com] On Behalf Of raghwani sohil [
> sohil4...@gmail.com]
> Sent: Thursday, August 25, 2011 11:07 PM
> To: Aphyr
> Cc: riak-users@lists.basho.com
> Subject: Re: Bitcask merge
>
> Hi Aphyr,
>
> I have changed my app.config file i.e i have added this lines
>
> {riak\_kv\_bitcask\_backend, [
> {max\_file\_size, 314572800},
> {small\_file\_threshold, 335544320}
> ]}
>
> but still riak merging process is not running .
>
> On Fri, Aug 26, 2011 at 12:56 AM, Aphyr  ap...@aphyr.com>> wrote:
> Have you checked that your bitcask maximum file size is small enough?
> Bitcask will only merge \*inactive\* files, so if your active file limit is
> 500MB and your active file is 320, you won't merge.
>
> --Kyle
>
>
> On 08/25/2011 06:43 AM, raghwani sohil wrote:
> I have deleted all the keys from all buckets manually and \*before
> deleting \*the\*\*keys the size of \*bitcask
>
> \*directory was \*64 GB \*and after deleting it is showing me the same i.e
>
> \*6.4 GB\*.
>
> So to run bitcask merging process i have added this line
>
> {riak\_kv\_bitcask\_backend, [
> {small\_file\_threshold, 335544320}
> ]}
>
>
> in my app.config . I have added this line because size of all data file
> in bitcask directory are ( < 320 MB ) .
>
> but bitcask merging process is not running . Is there any solution to
> run bitcask merge process so that i can reduce size of my bitcask
> directory ??
>
>
>
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

