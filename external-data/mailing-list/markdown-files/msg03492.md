---
title: "Re: Riak Search with Erlang API"
description: ""
project: community
lastmod: 2011-05-30T07:00:14-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03492"
mailinglist_parent_id: "msg03491"
author_name: "Mathias Meyer"
project_section: "mailinglistitem"
sent_date: 2011-05-30T07:00:14-07:00
---


Hagbard,

what the Protobufs client (which I assume is what you're using) does to get 
search results is to run a MapReduce job with the search as input.

You can easily use this to your advantage to achieve what you're after with a 
custom map function, example to follow. When Riak Search results are fed into 
the map phase, it receives the score in the keydata parameter, so you can just 
use an anonymous function to return both the Riak object and the key data, or 
extract the just score, as you see fit for your use case.

MapObjectKeydata = fun(RiakObject, KeyData, none) -> 
[RiakObject, KeyData]
end.
Timeout = 100000.riakc\_pb\_socket:search(Pid, "bucket", "query", [{map, {qfun, 
MapObjectKeydata}, none, true}], Timeout).

Mathias Meyer
Developer Advocate, Basho Technologies


On Montag, 30. Mai 2011 at 12:37, Hagbard Celine wrote:

> Hi,
> im experimenting a little bit with Riak Search and want to query my node
> via Erlang API. But instead of the command line interface i got only a list
> of bucket/key pairs. Is there a way to get scoring information via Erlang
> API?
> 
> Thanks
> Hagbard
> -- 
> Empfehlen Sie GMX DSL Ihren Freunden und Bekannten und wir
> belohnen Sie mit bis zu 50,- Euro! https://freundschaftswerbung.gmx.de
> 
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com (mailto:riak-users@lists.basho.com)
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com



\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

