---
title: "Re: Wiping Riak 2.0 data"
description: ""
project: community
lastmod: 2015-01-04T04:52:13-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15437"
mailinglist_parent_id: "msg15436"
author_name: "Sargun Dhillon"
project_section: "mailinglistitem"
sent_date: 2015-01-04T04:52:13-08:00
---


Assuming your storage engine is bitcask:
1. Turn off all your Riak nodes
2. rm -rf --verbose /var/lib/riak/bitcask/\*/\*
3. rm -rf --verbose /var/lib/riak/anti\_entropy/\*/\*
4. Turn Riak back on

This will preserve your buckets and bucket types in in cluster
metadata. You can also automate that, but it's a little more
complicated.

On Sun, Jan 4, 2015 at 4:25 AM, Cosmin Marginean  wrote:
> Hi,
>
> I’m running Riak 2.0.2 on Centos 6.5 installed from an RPM
> (http://s3.amazonaws.com/downloads.basho.com/riak/2.0/2.0.2/rhel/6/riak-2.0.2-1.el6.x86\_64.rpm)
>
> I’m interested in wiping the entire storage (in order to re-run tests, etc).
> I have a script that traverses buckets/keys but I’m aware that this process
> is costly, plus I might be dealing with some eventual-consistency issues.
>
> Consequently, I would prefer to wipe the “data” directory entirely if that’s
> in any way possible, and re-start Riak. However, the structure seems to be
> scattered in several directories and is not entirely clear which one needs
> to be wiped for a “clean data reset” without corrupting anything:
>
> # ll /var/lib/riak/
> total 28
> drwxrwxr-x. 66 riak riak 4096 Jan 3 17:29 anti\_entropy
> drwxrwxr-x. 66 riak riak 4096 Jan 3 17:29 bitcask
> drwxrwxr-x. 3 riak riak 4096 Jan 3 17:28 cluster\_meta
> drwxrwxr-x. 2 riak riak 4096 Jan 3 20:07 generated.configs
> drwxrwxr-x. 2 riak riak 4096 Jan 3 17:29 kv\_vnode
> drwxrwxr-x. 2 riak riak 4096 Jan 4 07:23 riak\_kv\_exchange\_fsm
> drwxr-xr-x. 2 riak riak 4096 Jan 3 20:07 ring
>
> Thank you
> Cos
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

