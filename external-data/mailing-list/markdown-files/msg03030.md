---
title: "Poor write performance with Perl"
description: ""
project: community
lastmod: 2011-04-14T08:13:45-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03030"
author_name: "Brian Lycett"
project_section: "mailinglistitem"
sent_date: 2011-04-14T08:13:45-07:00

---


Hello.

I've set up a three node Riak cluster on some decent hardware as
specified in the basic cluster setup guide.

I wanted to get a rough idea of performance before tuning the cluster to
my needs, so I've written a Perl script that inserts a sample set of the
sort of data I might be using Riak for; a compressed email body of a few
KB in size each, going into one of two buckets.
I'm using the Net::Riak Perl module to insert the data.

The trouble is, I'm getting very bad performance. Using three threads
and writing to all three nodes at the same time, I might be able to
insert 100 rows/second. Using a single thread & server, I'm lucky to
get 25 rows/second.

The servers themselves are hardly doing anything - barely any CPU load
or disk activity.

Is this a problem with the Net::Riak module? Or is there something I
need to do outside of the basic setup guide that'll vastly improve the
write speed?

Regards,

Brian


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

