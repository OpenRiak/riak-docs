---
title: "Re: secondary indexes - no multi_backend?"
description: ""
project: community
lastmod: 2011-09-29T16:34:55-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg04936"
mailinglist_parent_id: "msg04935"
author_name: "Rusty Klophaus"
project_section: "mailinglistitem"
sent_date: 2011-09-29T16:34:55-07:00
---


Hi Fyodor,

That error is expected; currently only riak\_kv\_eleveldb\_backend supports
Secondary Indexes.

Best,
Rusty

On Thu, Sep 29, 2011 at 7:32 PM, Fyodor Yarochkin wrote:

> I am actually getting the similar errors on RC2, but with
> bitcask\_backend (default):
> /etc/riak/app.config:
> ...
> {storage\_backend, riak\_kv\_bitcask\_backend},
> ...
>
> riak:~# curl http://127.0.0.1:8091/buckets/test/index/num\_int/1
> 500 Internal Server
> ErrorInternal Server Error
=====================

The server
> encountered an error while processing this
>
> request:  

```
{error,{indexes_not_supported,riak_kv_bitcask_backend}}
```


---

mochiweb+webmachine
> web server


>
> I am currently running riak-1.0.0rc2-20-ge0a179e. Am I missing any
> config options here to enable the secondary indexes on bitcask?
>
>
>
>
>
>
> On Fri, Sep 30, 2011 at 5:04 AM, Artem  wrote:
> >> We are pleased to announce the availability of the second release
> >> candidate for Riak 1.0.
> >
> > The RC2 doesn't seem to work with secondary indexes in the multi\_backend
> > configuration.
> > Will secondary indexes be supported in 1.0 multi\_backend?
> >
> > --- /etc/riak/app.config -------
> >
> > {storage\_backend, riak\_kv\_multi\_backend},
> > {multi\_backend\_default, <<"leveldb">>},
> > {multi\_backend, [
> > {<<"leveldb">>, riak\_kv\_eleveldb\_backend, [
> > {data\_root, "/var/lib/riak/leveldb"}
> > ]},
> > {<<"bitcask">>, riak\_kv\_bitcask\_backend, [
> > {data\_root, "/var/lib/riak/bitcask"}
> > ]}
> > ]},
> >
> > --- command-line -------
> >
> > curl -v -X PUT -d 'payload' -H 'X-Riak-Index-num\_int: 2'
> http://127.0.0.1:8098/riak/test/doc2
> > curl -v http://127.0.0.1:8098/buckets/test/index/num\_int/1
> >
> > --- /var/log/riak/console.log -------
> >
> > 2011-09-29 22:56:11.556 [error] <0.514.0> gen\_fsm <0.514.0> in state
> > waiting\_results terminated with reason:
> > {error,{indexes\_not\_supported,riak\_kv\_multi\_backend}}
> > 2011-09-29 22:56:11.843 [error] <0.514.0> CRASH REPORT Process <0.514.0>
> > with 0 neighbours crashed with reason:
> > {error,{indexes\_not\_supported,riak\_kv\_multi\_backend}}
> > 2011-09-29 22:56:12.096 [error] <0.323.0> Supervisor
> riak\_kv\_index\_fsm\_sup
> > had child undefined started with
> > {riak\_core\_coverage\_fsm,start\_link,undefined} at <0.514.0> exit with
> reason
> > {error,{indexes\_not\_supported,riak\_kv\_multi\_backend}} in context
> > child\_terminated
> > 2011-09-29 22:56:12.412 [error] <0.506.0> webmachine error:
> > path="/buckets/test/index/num\_int/1"
> > {error,{error,{indexes\_not\_supported,riak\_kv\_multi\_backend}}}
> >
> >
> >
> > \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> > riak-users mailing list
> > riak-users@lists.basho.com
> > http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
> >
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>



-- 
Rusty Klophaus

\*Basho Technologies, Inc.\*
11921 Freedom Drive, Suite 550
Reston, VA 20190
www.basho.com
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

