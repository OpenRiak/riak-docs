---
title: "Re: Issues with Riak Control"
description: ""
project: community
lastmod: 2012-03-22T13:50:28-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07026"
mailinglist_parent_id: "msg07022"
author_name: "Jeffrey Massung"
project_section: "mailinglistitem"
sent_date: 2012-03-22T13:50:28-07:00
---


Replying now for posterity:

Riak Control uses pjax for templating and dynamic updating of page elements. 
It's a great tool. However, it also has a very small default ajax timeout for 
page requests, and when there's a timeout, the ajax callback returns a success 
code, but with an empty document. The Riak Control code makes an assumption 
about empty pages (to-be fixed), which then performs a redirect to the document 
in question.

Charles' issue has been corrected by modifying some JavaScript in Riak Control. 
We're going to be fixing this issue with something a bit more robust and and 
pushing it to GitHub.

Note: while we saw the reason for the problem quickly, Armon's email about 
timeouts is what led us down that path. A hearty thanks goes out to him for 
that insight! ;-)

--
Jeffrey Massung
Software Engineer
j...@basho.com

On Mar 22, 2012, at 9:28 AM, Jeffrey Massung wrote:

> Charles, I've emailed you off-list with a whole set of things to test. We 
> have an idea what the problem might be. For posterity, once a solution is 
> arrived at, I'll post it back to the mailing list.
> 
> --
> Jeffrey Massung
> Software Engineer
> j...@basho.com
> 
> On Mar 21, 2012, at 9:13 PM, char...@contentomni.com wrote:
> 
>> Yes, it does return the css file.
>> 
>> The way I've setup my cluster is that I am using my private ip address 
>> (remember I'm using Rackspace Cloud Servers) for my riak\_core->http setting 
>> in app.config, and I am using my public ip address for the riak\_core->https 
>> setting.
>> 
>> Everything is working ok on the cluster, everything looks ok from riak-admin 
>> status. I just have the problem with riak control.
>> 
>> -----Original Message-----
>> From: "Jeffrey Massung" 
>> Sent: Wednesday, 21 March, 2012 11:59pm
>> To: char...@contentomni.com
>> Cc: "riak-users" 
>> Subject: Re: Issues with Riak Control
>> 
>> Charles,
>> 
>> A quick test... on the command prompt, does the following return the CSS 
>> file?
>> 
>> curl -k https://user:pass@localhost:8069/admin/ui/style.css
>> 
>> Note: change the credentials, ip, and port appropriately for your cluster 
>> setup. I'll look at something else for the URL redirection to the template 
>> folder - that shouldn't be happening (obviously).
>> 
>> --
>> Jeffrey Massung
>> Software Engineer
>> j...@basho.com
>> 
>> On Mar 21, 2012, at 4:32 PM, char...@contentomni.com wrote:
>> 
>>> I tried Firefox 9, Safari 5, and the latest Chrome. I would hardly consider 
>>> these old browsers. 
>>> 
>>> -----Original Message-----
>>> From: "Jeffrey Massung" 
>>> Sent: Wednesday, 21 March, 2012 11:22pm
>>> To: char...@contentomni.com
>>> Cc: "riak-users" 
>>> Subject: Re: Issues with Riak Control
>>> 
>>> This is very much the behavior of older browsers not loading the CSS 
>>> properly and displaying it. IE7, old versions of FireFox, etc. Have you 
>>> tried Chrome, Safari, a latest FireFox, IE8+, etc?
>>> 
>>> --
>>> Jeffrey Massung
>>> Software Engineer
>>> j...@basho.com
>>> 
>>> On Mar 21, 2012, at 4:09 PM, char...@contentomni.com wrote:
>>> 
>>>> I recently installed a Riak (1.1.1) Cluster on Rackspace Cloud Servers. 
>>>> Everything seems to be working ok.
>>>> 
>>>> I set up the configuration to enable Riak Control. However, I am having a 
>>>> few issues using it.
>>>> 
>>>> As soon as I login in it shows me the home page briefly and then it just 
>>>> displays the following in only text:
>>>> 
>>>> Current Snapshot...
>>>> 
>>>> Your cluster is healthy.
>>>> You currently have...
>>>> 0 Unreachable nodes
>>>> 0 Nodes marked as 'down'
>>>> 0 Nodes experiencing low memory
>>>> Nothing to worry about because Riak is your friend
>>>> Your cluster has problems.
>>>> The following nodes are currently unreachable:
>>>> The following nodes are currently marked as 'down':
>>>> The following nodes are currently experiencing low memory:
>>>> 
>>>> The URL has also changed from https://:8069/admin/ui/index.html to 
>>>> https://:8069/admin/ui/templates/snapshot.pjax. It's like it's 
>>>> forcing some kind of redirection and I don't know why.
>>>> 
>>>> Kindly assist,
>>>> 
>>>> Charles.
>>>> 
>>>> 
>>>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>>>> riak-users mailing list
>>>> riak-users@lists.basho.com
>>>> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>>> 
>>> 
>>> 
>> 
>> 
>> 
> 

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

