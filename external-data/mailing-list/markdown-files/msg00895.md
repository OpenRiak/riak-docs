---
title: ""
description: ""
project: community
lastmod: 2010-08-16T08:36:22-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg00895"
author_name: "Damien Hardy"
project_section: "mailinglistitem"
sent_date: 2010-08-16T08:36:22-07:00

---


Hello there,

I try to get working my 3 nodes riak cluster with some data :

Here i a simple map/reduce exercice (list all keys in my cluster, filtering
eventualy "no\_found")

curl -X POST -H "Content-type: application/json"
http://192.168.134.148:8098/mapred --data-binary @-
{"inputs":"bucket2","query":[{"map":{"language":"javascript","source":"function(v,k,a)
{ return [v.key];
}"}},{"reduce":{"language":"javascript","name":"Riak.filterNotFound"}}]}

Result :
{"error":"failed\_reduce"}


Where Am I wrong ?

If I remove the reduce phase I get these kind of output (formated extract) :
[
[...]
{"not\_found":{"bucket":"bucket2","key":"12%3AJul%3A2010%3A20%3A54","keydata":"undefined"}},
{"not\_found":{"bucket":"bucket2","key":"12%3AJul%3A2010%3A21%3A21","keydata":"undefined"}},
"12%3AJul%3A2010%3A10%3A08",
"12%3AJul%3A2010%3A06%3A57",
"12%3AJul%3A2010%3A12%3A44",
"12%3AJul%3A2010%3A04%3A48"
[...]
]

What does mean "no\_found" in this context ?

Is the built-in function Riak.filterNotFound suppose to return only found
data like "12%3AJul%3A2010%3A10%3A08" or "12%3AJul%3A2010%3A06%3A57"

Best regards,

-- 
Damien
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

