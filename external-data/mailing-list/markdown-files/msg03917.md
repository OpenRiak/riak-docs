---
title: "Troubleshooting riak inserts"
description: ""
project: community
lastmod: 2011-07-02T03:40:52-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03917"
author_name: "Fyodor Yarochkin"
project_section: "mailinglistitem"
sent_date: 2011-07-02T03:40:52-07:00

---


Greetings,

 I've been running a single node riaksearch instance, while came
across this problem: after inserting roughly 200Mb of data every
consequential insert (into any bucket) would start to time out with a
sequence of errors logs that point on riak\_search\_vnode\_master crash:

=SUPERVISOR REPORT==== 2-Jul-2011::06:04:57 ===
 Supervisor: {local,riak\_search\_sup}
 Context: child\_terminated
 Reason:
{{badmatch,{error,{{badmatch,{error,{badarg,[{erlang,binary\_to\_term,[<<[131,108,0,0,0,2,104,4,104,3,109,0,0,0,4,108,111,103,115,109,0,0,0,4,116,101,120,116,109,0,0,0,16,91,49,50,49,49,49,56,48,46,55,49,54,51,55,52,93,109,0,0,0,36,97,97,54,55,53,52,53,99,45,97,49,53,53,45,49,49,101,48,45,57,101,51,51,45,48,48,50,49,57,98,102,99,51,50,57,51,110,7,1,112,21,181,79,192,166,4,108,0,0,0,1,104,0,0,0,106,131,108,0,0,0,1,104,4,104,3,109,0,0,0,4,108,111,103,115,109,0,0,0,4,116,101,120,116,109,0,0,0,5,83,69,81,61,49,109,0,0,0,36,97,101,50,98,49,50,97,101,45,97,49,53,53,45,49,49,101,48,45,57,101,51,51,45,48,48,50,49,57,98,102,99,51,50,57,51,110,7,1,191,19,13,80,192,166,4,108,0,0,0,1,104,2,100,0,1,112,107,0,1,14,106,106]>>]},{mi\_buffer,read\_value,1},{mi\_buffer,open\_inner,2},{mi\_buffer,new,1},{mi\_server,read\_buffers,4},{mi\_server,read\_buf\_and\_seg,1},{mi\_server,init,1},{gen\_server,init\_it,6}]}}},[{merge\_index\_backend,start,2},{riak\_search\_vnode,init,1},{riak\_core\_vnode,init,1},{gen\_fsm,init\_it,6},{proc\_lib,init\_p\_do\_apply,3}]}}},[{riak\_core\_vnode\_master,get\_vnode,2},{riak\_core\_vnode\_master,handle\_call,3},{gen\_server,handle\_msg,5},{proc\_lib,init\_p\_do\_apply,3}]}
 Offender:
[{pid,<0.754.0>},{name,riak\_search\_vnode\_master},{mfa,{riak\_core\_vnode\_master,start\_link,[riak\_search\_vnode]}},{restart\_type,permanent},{shutdown,5000},{child\_type,worker}]


(the full paste of error dump log is here http://pastebin.com/0Bj5cJAQ)

Reads still work and I am slighly confused on the reason of the crash.
The availability of RAM is one of the things I suspect here:
"mem\_total":1059192832,"mem\_allocated":893632512,". There is no
shortage of the disk space or other resources on the system. I am
abit stuck as to where to start troubleshooting this issue. Any
pointers or hints would be appreciated greatly! :)


regards,
-F

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

