---
title: "Understanding riak storage & querying/searching relationships between	buckets"
description: ""
project: community
lastmod: 2013-06-04T17:45:42-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11218"
author_name: "Kartik Thakore"
project_section: "mailinglistitem"
sent_date: 2013-06-04T17:45:42-07:00

---


Hi,

I have spent the last couple hours trying to understand how to store
and/or search relationships between buckets of information. Currently,
I have two buckets (will have more with more relationships) 'subjects'
and 'data'. In subjects I store data such as:

http://.../riak/subjects/001 has { "name" : "First Last", "age\_int": 25 },
http://.../riak/subjects/002 has { "name" : "First Last", "age\_int": 55 }

so on.

and in 'data' I have :

{ "subject" : "001", "complication": [0, 1] },
{ "subject" : "002", "complication": [1] }


Now my question is how do I query information like:

Where Subject has age\_int between 20 to 100 & complication includes 1?

I thought I could accomplish this with map reduce, but I can access
only one bucket at a time. Is there a different way I should be
storing data like this? Or should I denormalize the subject into
'data'?

Regards,
Kartik

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

