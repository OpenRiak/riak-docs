---
title: "Re: Counting .SST tables in Level DB"
description: ""
project: community
lastmod: 2013-10-21T10:38:02-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12722"
mailinglist_parent_id: "msg12721"
author_name: "Matthew Von-Maszewski"
project_section: "mailinglistitem"
sent_date: 2013-10-21T10:38:02-07:00
---


responses inline in '[ ]'On Oct 21, 2013, at 1:20 PM, Dave King  wrote:From the Riak LevelDB Pagehttp://docs.basho.com/riak/latest/ops/advanced/backends/leveldb/"Where server resources allow, the value of max\_open\_files should exceed the count of .sst table files within the vnode's database directory."
Is the vnode's database directory the numbered directory under the leveldb directory? So the process is to count the number of .sst files distributed acrooss the sst\_# directories.    Is that correct?
[Yes to both questions above.]If It's not correct what are the rules for counting .sst files?[ Your previous question was correct.  But here is a simple command line count:find /var/db/riak/leveldb/0 -name '\*.sst' | wc -lSubstitute your favorite numbered directory for the "/0" in my example.]I'm guessing this is something you'd have to tune after deployment as the number of .sst files would grow with data growth.  Any guide lines for calculating the max\_open\_files before deployment?
[The underlying goal is cover your working set of files via max\_open\_files, then give the remainder of memory to the cache\_size (again size by vnode).  I have attached a spreadsheet for Riak 1.4 that helps with the calculations.  This sizing issue is a royal pain the tush.  Riak 2.0 will simplify this greatly.  You tell it the total amount of memory that leveldb can use, no matter how many vnodes, no matter whether active anti-entropy is used.  Everything is then calculated and dynamically updated as file counts change and as vnode counts on a server change.  Look forward to that in 2.0.]- PeaceDave
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_riak-users mailing listriak-users@lists.basho.comhttp://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

leveldb\_sizing\_1.4.xls
Description: Binary data
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

