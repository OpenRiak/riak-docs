---
title: "Links and Bucket Types"
description: ""
project: community
lastmod: 2015-01-21T12:43:00-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15563"
author_name: "Cosmin Marginean"
project_section: "mailinglistitem"
sent_date: 2015-01-21T12:43:00-08:00

---


Using Riak 2.0.2 on CentOS and trying to create some Links attached to an 
object using the Links header. 
We are using bucket types and this behaviour doesn’t seem to replicate when 
using plain buckets.

Doing the following works as expected

curl -H "Content-Type:text/plain" -X POST 
"http://192.168.168.2:8098/types/mybuckettype/buckets/temp/keys/key1" -d "some 
text"
curl -H 'Link: ; riaktag="tag\"' -H 
"Content-Type:text/plain" -X POST 
"http://192.168.168.2:8098/types/mybuckettype/buckets/temp/keys/key2" -d "some 
other text"


However when I try to read the key2 entry it returns a 500 internal server 
error.
curl -X GET 
"http://192.168.168.2:8098/types/mybuckettype/buckets/temp/keys/key2”
500 Internal Server ErrorInternal 
Server Error
======================

The server encountered an error while processing this 
request:  

```
{error, {error,function_clause, [{riak_kv_wm_utils,format_uri, 
["temp","key1","riak",3], [{file,"src/riak_kv_wm_utils.erl"},{line,188}]}, 
{riak_kv_wm_utils,format_links,4, 
[{file,"src/riak_kv_wm_utils.erl"},{line,180}]}, 
{riak_kv_wm_object,produce_doc_body,2, 
[{file,"src/riak_kv_wm_object.erl"},{line,847}]}, 
{webmachine_resource,resource_call,3, 
[{file,"src/webmachine_resource.erl"},{line,186}]}, {webmachine_resource,do,3, 
[{file,"src/webmachine_resource.erl"},{line,142}]}, 
{webmachine_decision_core,resource_call,1, 
[{file,"src/webmachine_decision_core.erl"},{line,48}]}, 
{webmachine_decision_core,decision,1, 
[{file,"src/webmachine_decision_core.erl"},{line,558}]}, 
{webmachine_decision_core,handle_request,2, 
[{file,"src/webmachine_decision_core.erl"},{line,33}]}]}}
```


---

mochiweb+webmachine
 web server


Also, a HEAD on the key is hanging indefinitely
curl -X HEAD 
"http://192.168.168.2:8098/types/mybuckettype/buckets/temp/keys/key2”

Thanks in advance
Cos

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

