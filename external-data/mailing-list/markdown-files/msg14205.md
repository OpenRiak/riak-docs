---
title: "Re: Search sort error in 2.0.0beta1"
description: ""
project: community
lastmod: 2014-05-09T07:50:41-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14205"
mailinglist_parent_id: "msg14167"
author_name: "Ryan Zezeski"
project_section: "mailinglistitem"
sent_date: 2014-05-09T07:50:41-07:00
---


This seems like a bug to me. I created an issue to track it.

https://github.com/basho/yokozuna/issues/372


On Thu, May 1, 2014 at 5:22 PM, Troy Melhase  wrote:

> Hello again!
>
> I've narrowed this down to the interaction between the sort parameter and
> the field list ("fl") parameter. It seems that if "fl" is supplied with
> "sort", the field list must contain the value "score". I'm not certain if
> that's a bug or not, but the work-around is plain enough: add "score" to
> the list of fields if there's a sort and the field list isn't empty.
>
> Whew!
>
>
> troy
>
>
>
> On Wed, Apr 30, 2014 at 10:09 PM, Troy Melhase  wrote:
>
>> Hello!
>>
>> I'm getting an error when I include a sort parameter in
>> a RpbSearchQueryReq message. I'm using Riak 2.0.0beta1. Source build and
>> macos binaries show the same behavior.
>>
>> The error doesn't happen at all if I don't specify a search parameter.
>> For the parameter value, I'm using "field direction" (e.g., "name asc").
>> Leaving off the direction, or encoding the space as "+" or "%20" produces
>> a Solr error.
>>
>> I've tried Golang and Python clients to see if it was a client issue.
>> Both clients produce the exact same error; that error text is at the end of
>> this message.
>>
>> Is this a known bug? I searched Github and couldn't find any issues that
>> look like this one. Is there a work-around? Or better yet, am I doing
>> something wrong?
>>
>> Thanks!
>>
>>
>> troy
>>
>>
>> Error text:
>>
>> RiakError: 'Error processing incoming message:
>> error:badarg:[{protobuffs,encode\_internal,
>> [2,[],float],
>>
>> [{file,"src/protobuffs.erl"},
>> {line,167}]},
>> {riak\_search\_pb,iolist,2,
>> [{file,
>>
>> "src/riak\_search\_pb.erl"},
>> {line,63}]},
>> {riak\_search\_pb,encode,2,
>> [{file,
>>
>> "src/riak\_search\_pb.erl"},
>> {line,48}]},
>> {riak\_pb\_codec,encode,1,
>> [{file,
>>
>> "src/riak\_pb\_codec.erl"},
>> {line,77}]},
>> {yz\_pb\_search,encode,1,
>> [{file,
>>
>> "src/yz\_pb\_search.erl"},
>> {line,60}]},
>> {riak\_api\_pb\_server,
>>
>> send\_encoded\_message\_or\_error,
>> 3,
>> [{file,
>>
>> "src/riak\_api\_pb\_server.erl"},
>> {line,498}]},
>> {riak\_api\_pb\_server,
>> process\_message,4,
>> [{file,
>>
>> "src/riak\_api\_pb\_server.erl"},
>> {line,430}]},
>> {riak\_api\_pb\_server,
>> connected,2,
>> [{file,
>>
>> "src/riak\_api\_pb\_server.erl"},
>> {line,262}]}]'
>>
>>
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

