---
title: "Re: MapReduce request causes Erlang VM to close"
description: ""
project: community
lastmod: 2012-09-13T07:44:26-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08526"
mailinglist_parent_id: "msg08525"
author_name: "Staffan Einarsson"
project_section: "mailinglistitem"
sent_date: 2012-09-13T07:44:26-07:00
---


Ian:

Actually, yes there is: http://pastebin.com/N3zh9fc7

It seems at the end that something fails in the JavaScript driver. Thanks,
now I have something to investigate.

Michael:

The same error message is also in the kern.log file. Thanks!

-- Staffan Einarsson
Engineering

Skype: staffan.einarsson
Phone: +46 70 426 07 46
http://muchdifferent.com



On Thu, Sep 13, 2012 at 4:31 PM, Michael Radford  wrote:

> I recently had a development instance of Riak get killed by the kernel
> OOM killer, and (on Ubuntu 12.04) it seems like the only place where
> this was logged was /var/log/kern.log.
>
> Mike
>
> On Thu, Sep 13, 2012 at 6:31 AM, Ian Plosker  wrote:
> > Staffan,
> >
> > Is there anything in the kernel ring buffer? You can check it using the
> > dmesg command.
> >
> > -Ian
> >
> > On Sep 13, 2012, at 13:10, Staffan Einarsson
> >  wrote:
> >
> > Hi Kersten,
> >
> > That is exactly my problem. Normally I have something to go on from the
> > error and crash log files, but in this case they are both empty. There is
> > neither any crash dump file. The console.log file contains the same
> > information as the erlang.log.1 file I pasted, minus a few lines.
> >
> > I'm not sure what would cause an Erlang VM to fail so abruptly without
> > saying anything. Is the name clash mentioned at the top of the pasted
> file
> > something that could cause this?
> >
> > Kindly,
> >
> > -- Staffan Einarsson
> > Engineering
> >
> > Skype: staffan.einarsson
> > Phone: +46 70 426 07 46
> > http://muchdifferent.com
> >
> >
> >
> > On Thu, Sep 13, 2012 at 11:39 AM, Kresten Krab Thorup 
> > wrote:
> >>
> >> What you send does not seem to indicate any errors other than the
> "erlang
> >> has closed" message. Isn't there something else you can share with us?
> a
> >> crash log or something?
> >>
> >> Kresten
> >>
> >> On Sep 13, 2012, at 11:32 AM, Staffan Einarsson
> >>  staffan.einars...@muchdifferent.com>>
> >> wrote:
> >>
> >> Hi guys,
> >>
> >> I'm having a problem with the Erlang VM going down for a Riak node that
> >> receives a MapReduce request.
> >>
> >> My setup is this:
> >>
> >> I run three Riak 1.2.0 nodes, each on an Ubuntu Server 12.04 guest OS on
> >> VirtualBox 4.1.20. The host OS is Windows. I send requests through our
> own
> >> Riak client library, (uGameDB for the Unity game engine), which uses
> the PB
> >> interface. When my test script sends a MapReduce request to one of the
> >> nodes, the node fails instantly.
> >>
> >> The error.log and crash.log files are empty. The erlang.log.1 file says:
> >> http://pastebin.com/1LHqYCaB
> >>
> >> I have tested this with different versions of our client library,
> >> specifically with versions that have previously been confirmed to work,
> to
> >> rule out any error on the client side. I have also tried with different
> >> numbers of nodes, and it is only the node that receives the MapReduce
> >> request that fails.
> >>
> >> Any help is greatly appreciated!
> >>
> >> Kindly,
> >>
> >> -- Staffan Einarsson
> >> Engineering
> >>
> >> Skype: staffan.einarsson
> >> Phone: +46 70 426 07 46
> >> http://muchdifferent.com
> >>
> >> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> >> riak-users mailing list
> >> riak-users@lists.basho.com
> >> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
> >>
> >>
> >>
> >> Mobile: + 45 2343 4626 | Skype: krestenkrabthorup | Twitter: @drkrab
> >> Trifork A/S | Margrethepladsen 4 | DK- 8000 Aarhus C | Phone : +45
> >> 8732 8787 | www.trifork.com
> >>
> >>
> >>
> >>
> >
> > \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> > riak-users mailing list
> > riak-users@lists.basho.com
> > http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
> >
> >
> > \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> > riak-users mailing list
> > riak-users@lists.basho.com
> > http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
> >
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

