---
title: "Re: FYI: How to do secondary indexing with Riak behind Nginx"
description: ""
project: community
lastmod: 2011-10-07T14:14:59-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05099"
mailinglist_parent_id: "msg05071"
author_name: "Jonathan Langevin"
project_section: "mailinglistitem"
sent_date: 2011-10-07T14:14:59-07:00
---


My understanding is the same as Alexander's. While I love nginx, I'll not be
using it to proxy Riak until HTTP 1.1 is sorted out.\*

 
 Jonathan Langevin
Manager, Information Technology
Loom Inc.
Wilmington, NC: (910) 241-0433 - jlange...@loomlearning.com -
www.loomlearning.com - Skype: intel352
\*


On Thu, Oct 6, 2011 at 9:49 AM, Alexander Sicular wrote:

> That aside, I thought there were other reasons for not using nginx in front
> of riak. Http 1.0 vs http 1.1 support. For that reason I front Riak with
> haproxy.
>
> Thoughts?
>
> @siculars
> http://siculars.posterous.com
>
> Sent from my rotary phone.
> On Oct 6, 2011 9:32 AM, "MÃ¥rten Gustafson" 
> wrote:
> > Howdy,
> >
> > = Background
> >
> > During the Riak 1.0 webinar I played around with Nginx and encountered
> > a problem with secondary indexing when accessing Riak (over HTTP)
> > through Nginx. I had a quick chat with Sean about it on IRC[1] and
> > then I forgot it. The problem is that Nginx won't handle header names
> > with underscores "properly".
> >
> > AFAICT it's perfectly legal with underscores in headers according to
> > RFC 2616[2], I also found a discussion on StackOverflow[3] that came
> > to the same conclusion.
> >
> >
> > = Solution
> >
> > In your nginx.conf in the relevant server-section add the following:
> > underscores\_in\_headers on;
> >
> >
> >
> > /mÃ¥rten.
> >
> > [1] http://irclogger.com/.riak/2011-09-21 @ 14:33
> > [2] http://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html#sec4.2
> > [3]
> http://stackoverflow.com/questions/964519/php-http-post-incorrect-headers
> >
> > \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> > riak-users mailing list
> > riak-users@lists.basho.com
> > http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

