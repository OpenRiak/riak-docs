---
title: "Re: Riak JAVA Client Performance"
description: ""
project: community
lastmod: 2012-10-10T04:51:26-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08863"
mailinglist_parent_id: "msg08859"
author_name: "kamiseq"
project_section: "mailinglistitem"
sent_date: 2012-10-10T04:51:26-07:00
---


well I asked same question few days ago (maybe 2 weeks form now) and
the answer was that yes sharing client is thread safe and all you
should do is to create new bucket instance on every request

pozdrawiam
Paweł Kamiński

kami...@gmail.com
pkaminski....@gmail.com
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_


On 10 October 2012 09:25, Pavel Kogan  wrote:
> 1) Is it ok to share a single pbc client object between 50 threads? Should
> it be protected by lock ?
> 2) I didn't do load balancing between nodes yet, cause I want to understand
> better throughput limit. I am planning to do it for much higher throughput.
>
> Pavel
>
>
> On Wed, Oct 10, 2012 at 9:21 AM, kamiseq  wrote:
>>
>> maybe the good start is to share pbclient object and only create
>> bucket per request, you will save few steps on client configuration.
>> have you tried balancing requests to cluster and distribute them over all
>> nodes?
>>
>> pozdrawiam
>> Paweł Kamiński
>>
>> kami...@gmail.com
>> pkaminski....@gmail.com
>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>>
>>
>> On 10 October 2012 06:18, Pavel Kogan  wrote:
>> > Hi all,
>> >
>> > I have Riak cluster consisting of 5 nodes that contains about 30
>> > millions of
>> > keys (35% of capacity according to Riak Control).
>> > Currently we have single JAVA client reading and writing records to same
>> > node. I need some tips, how to use the client efficiently
>> > to reach maximal throughput - I would like to be able to read/write up
>> > to
>> > 100 records/sec on 1Gbit network. Currently I get a lot
>> > of JAVA socket exceptions after a while (even for the much slower rate -
>> > 10
>> > records/sec), after which I need to restart client and node.
>> >
>> > Thanks,
>> > Pavel
>> >
>> > P.S: My client using 50 threads and pbc client is created and
>> > shut-downed
>> > per request.
>> >
>> > \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>> > riak-users mailing list
>> > riak-users@lists.basho.com
>> > http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>> >
>
>

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

