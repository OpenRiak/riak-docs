---
title: "Re: vclock, vtag, entity tag"
description: ""
project: community
lastmod: 2012-12-27T14:22:13-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg09684"
mailinglist_parent_id: "msg09683"
author_name: "Shuhao Wu"
project_section: "mailinglistitem"
sent_date: 2012-12-27T14:22:13-08:00
---


Wait. So with 2 siblings, I should get 2 different vclock and 2 etags from
http.

But the specification from pbc tells me it will only return 1 vclock and 2
vtags

Shuhao
Sent from my phone.
On 2012-12-27 5:19 PM, "Pavan Venkatesh"  wrote:

> Hi Shuhao,
>
> Lets say, two clients update the same object at the same time (through
> http or protobuf),then a sibling is created, but with the same vector
> clock.They merge into single object with one vector clock, but these
> siblings live in the same object.
> User intervention is required and one can pick the correct value and issue
> a put request with that vector clock in order to resolve the conflict.
> Hope this helps.
>
> Pavan
>
> On 12/25/12 10:08 PM, "Shuhao"  wrote:
>
> >Hi,
> >
> >I'm just browsing through the API documentations for Riak and I just
> >noticed a couple of things that's pretty confusing:
> >
> >It's my understanding that with the HTTP fetch request, each
> >object/sibling returned will have its own vclock in the form of the HTTP
> >header `X-Riak-Vclock` and an entity tag under the header `ETag`. There
> >is also a vtag url parameter specified by the HTTP fetch request which I
> >assume fetches specific sibling with that entity tag. [1]
> >
> >[1]:
> >http://docs.basho.com/riak/latest/references/apis/http/HTTP-Fetch-Object/
> >
> >However, the protobuf client will return a list of siblings but only
> >with 1 vclock with `optional bytes vclock = 2;` for all the siblings
> >returned under `content`. For each sibling, there will be a `vtag`
> >attribute, which I assume is the entity tag as specified in the HTTP
> >document. [2]
> >
> >[2]:
> >
> http://docs.basho.com/riak/latest/references/apis/protocol-buffers/PBC-Fet
> >ch
> >-Object/
> >
> >So the confusion is that why is it that in the HTTP request, each
> >sibling has its own vclock and entity tag/vtag while in the PBC request,
> >the entire response only has 1 vclock and each object has its own
> >vtag/entity tag. I'm not too sure if my understanding is complete.
> >
> >Thanks,
> >
> >Shuhao
> >
> >\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> >riak-users mailing list
> >riak-users@lists.basho.com
> >http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
> >
>
>
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

