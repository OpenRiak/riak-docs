---
title: "precommit - a newbie question"
description: ""
project: community
lastmod: 2011-10-11T01:01:50-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05121"
author_name: "Hal Eisen"
project_section: "mailinglistitem"
sent_date: 2011-10-11T01:01:50-07:00

---


Greetings!

I am a new user of Riak, so please forgive me if this has been addressed
before. I've spent an hour or so reading through the wiki, but couldn't
find the answer to my question.

I am trying to install a precommit hook in my test bucket. For now, I
am storing documents of type text/plain. I can store and retrieve them
verbatim just fine. As a first attempt at a precommit hook (later
things will get much more complicated), I would like to apply
JavaScript's string.toUpperCase() method to my documents. I am having
trouble getting this to work.

I gather I need to phrase my precommit something like this:

curl -X PUT -H "Content-Type: application/json"
http://127.0.0.1:8098/riak/test -d '{"props":{"precommit":[function(obj)
{ return(obj.toUpperCase()); }; ]}}'

When I do that, I get a silent failure. I can inspect my bucket:

curl http://127.0.0.1:8098/riak/test

but my precommit hook is unmodified.

Any help would be appreciated.

Thank you,
Hal


\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

