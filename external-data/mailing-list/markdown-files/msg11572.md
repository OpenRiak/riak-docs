---
title: "Re: Quickly deleting + recreating item in Riak deletes new item"
description: ""
project: community
lastmod: 2013-07-17T07:58:49-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11572"
mailinglist_parent_id: "msg11562"
author_name: "Kelly McLaughlin"
project_section: "mailinglistitem"
sent_date: 2013-07-17T07:58:49-07:00
---


Matthew,

I find it really surprising that you don't see any difference in behavior
when you set delete\_mode to keep. I think it would be helpful if you could
outline your specific setup and give the steps to reproduce what you're
seeing to be able to make a determination if this represents a bug or not.
Thanks.

Kelly


On Tue, Jul 16, 2013 at 11:33 PM, Matthew Dawson wrote:

> On July 16, 2013 12:00:36 PM Gabriel Littman wrote:
> > Please correct me if I'm wrong, but I think the right answer is doing a
> GET
> > first so you have a vector clock that is after the delete. Then you
> should
> > be able to be sure your new write wins in any sibling resolution.
> >
> > Gabe
> >
> I would assume this to be the case. I've even made sure my delete requests
> all have vclocks attached (by doing a GET first). However I still see
> missing
> keys every so often.
>
> By making each key unique across runs of the test suite seems to solve
> things,
> but I don't like that as a solution. And I'm not sure if this is an actual
> bug or not. If this behaviour is considered a bug, I can try making a
> minimal
> reproducible test case and file a bug using that.
> --
> Matthew
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

