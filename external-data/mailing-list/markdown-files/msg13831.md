---
title: "Riak on VM's"
description: ""
project: community
lastmod: 2014-03-18T05:05:52-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13831"
author_name: "John Kavanagh"
project_section: "mailinglistitem"
sent_date: 2014-03-18T05:05:52-07:00

---


Hi Basho people,

I need to get some info about user Riak on VM's .

We intend to use Riak as the backed for a user session store . We have
tested on EC2 and determined the following :

Using a cluster of 5 x EC2's m1.xlarge instances. (4 cores, 15GB memory). w
/256 partitions w/ Bitcask :

At 100K RPM. CPU utilization is at 200%.
At 300K RPM, 300%. median time is still acceptable, but we see some
requeststaking 20ms.

Since it's a small dataset, and responsiveness is important here, I think we
should keep our entire working set in memory. 4GB per node allows us to do
that for up to 10 million keys. In reality , in production , we would peak
at 1 million keys.

Our tests on VM's (EC2) have been quite successful . However I'm concerned
about the IO cost of using VM's in production .

"Riak is already virtualized, so let it handle that instead of running it
on yet another virtualisation"

I know there are no hard and fast answers here , but I'm wondering if
anyone had any strong points of view.

Thanks,

John
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

