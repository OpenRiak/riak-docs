---
title: "Re: Migrating cluster from 1.1.1 to 1.2.1"
description: ""
project: community
lastmod: 2012-10-29T19:47:29-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg09080"
mailinglist_parent_id: "msg09079"
author_name: "Matt Black"
project_section: "mailinglistitem"
sent_date: 2012-10-29T19:47:29-07:00
---


Following up on my own email, minutes after I sent it...

The node join appeared stalled before I wrote the below - much like I
needed to issue the "cluster commit" command. However, I just checked
"member\_status" and partitions are actually being transferred to my new
node.


On 30 October 2012 13:42, Matt Black  wrote:

> Hello list,
>
> I just started a cluster migration, and encountered a problem with
> introducing the first replacement node :)
>
> I'm not able to either "cluster plan" or "cluster commit" with the new
> node:
>
> root@ip-10-138-x-221:~# riak-admin cluster join riak@10.130.x.125
> Attempting to restart script through sudo -H -u riak
> Success: staged join request for 'riak@10.138.x.221' to 'riak@10.130.x.125
> '
>
> root@ip-10-138-x-221:~# riak-admin cluster plan
> Attempting to restart script through sudo -H -u riak
> RPC to 'riak@10.138.x.221' failed: {'EXIT',
> {noproc,
> {gen\_server,call,
> [{riak\_core\_claimant,
> 'riak@10.128.x.82'},
> plan,infinity]}}}
>
> root@ip-10-138-x-221:~# riak-admin cluster commit
> Attempting to restart script through sudo -H -u riak
> RPC to 'riak@10.138.x.221' failed: {'EXIT',
> {noproc,
> {gen\_server,call,
> [{riak\_core\_claimant,
> 'riak@10.128.x.82'},
> commit,infinity]}}}
>
> Now, since the cluster group of commands were new in 1.2 - should I be
> using the older join commands for this migration?
>
> Thanks
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

