---
title: "Re: error compiling cpp driver for riak"
description: ""
project: community
lastmod: 2012-01-26T14:25:49-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06440"
mailinglist_parent_id: "msg06439"
author_name: "Andres Jaan Tack"
project_section: "mailinglistitem"
sent_date: 2012-01-26T14:25:49-08:00
---


(from the correct e-mail address…)

Hi there.

Just as a starting note, Riak-Cpp is still a work in progress, with no
versioned release to date. Thus, I haven't gotten to the point of testing
many generations of compilers, yet. In the next month or so, I should get
sibling resolution finished, and then this will make it on my radar.

That said, I've been using MSVC v10 and GCC 4.4 for development, so I'm a
bit surprised that GCC 4.5 isn't able to handle it. The first error (about
std::error\_code) suggests that you're not getting C++11/C++0x support when
you compile.

Can you verify your GCC version when compiling? SCons has a nasty habit of
resetting environment variables where it shouldn't, so if gcc4.3 is
installed in /usr/local/bin, it may be defaulting to that.

If that reveals nothing, I'll try o reproduce and fix on my system tomorrow.

Lähetetty iPhonesta

2012/1/26 David Montgomery 

> I tried to compile the cpp driver code on gitbub and the below are the
> erros.
>
> I am on Ubuntu 64 using gcc 4.5. At the prompt I typed >scons
>
> So...what do I do?
>
> Thanks
>
>
> test@test:~/Downloads/riak-cpp$ scons
> scons: Reading SConscript files ...
> scons: done reading SConscript files.
> scons: Building targets ...
> protoc build/riak/riakclient.proto --cpp\_out=.
> (compile) build/riak/client.cxx
> In file included from ./riak/client.hxx:2:0,
> from build/riak/client.cxx:1:
> ./riak/message.hxx:29:28: error: ‘error\_code’ is not a member of ‘std’
> ./riak/message.hxx:29:76: error: functional cast expression list
> treated as compound expression
> ./riak/message.hxx:29:77: error: template argument 1 is invalid
> ./riak/message.hxx:29:86: error: invalid type in declaration before ‘;’
> token
> build/riak/client.cxx: In member function ‘void
> riak::client::delete\_object(const riak::key&, const riak::key&,
> riak::delete\_response\_handler)’:
> build/riak/client.cxx:95:105: error: cannot convert ‘std::\_Bind (\*(std::function std::basic\_string&, const std::basic\_string&)>,
> std::basic\_string, std::basic\_string,
> std::\_Placeholder<1>, std::\_Placeholder<2>,
> std::\_Placeholder<3>))(std::function const std::basic\_string&, const std::basic\_string&)>,
> const std::basic\_string&, const std::basic\_string&, const
> std::error\_code&, long unsigned int, const std::basic\_string&)>’
> to ‘riak::message::handler’ in initialization
> build/riak/client.cxx: In member function ‘void
> riak::client::get\_object(const riak::key&, const riak::key&,
> riak::get\_response\_handler)’:
> build/riak/client.cxx:171:70: error: cannot convert ‘std::\_Bind (\*(std::basic\_string, std::basic\_string,
> std::function(const
> google::protobuf::RepeatedPtrField&)>,
> riak::::delivery\_arguments, std::function std::error\_code&, std::shared\_ptr&,
> std::function&,
> std::function&)>&)>,
> std::\_Placeholder<1>, std::\_Placeholder<2>,
> std::\_Placeholder<3>))(const std::basic\_string&, const
> std::basic\_string&,
> std::function(const
> google::protobuf::RepeatedPtrField&)>&,
> riak::::delivery\_arguments&, std::function std::error\_code&, std::shared\_ptr&,
> std::function&,
> std::function&)>&)>, const
> std::error\_code&, long unsigned int, const std::basic\_string&)>’
> to ‘riak::message::handler’ in initialization
> build/riak/client.cxx: In function ‘riak::message::handler
>
> riak::::make\_resolution\_response\_handler(std::shared\_ptr&,
> riak::::resolution\_response\_handler\_for\_object)’:
> build/riak/client.cxx:246:63: error: cannot convert
> ‘std::\_Bind&, const
> std::error\_code&, long unsigned int, const
> std::basic\_string&)>(std::shared\_ptr,
> std::\_Placeholder<1>, std::\_Placeholder<2>, std::\_Placeholder<3>)>’ to
> ‘riak::message::handler’ in return
> build/riak/client.cxx: In function ‘void
> riak::::put\_cold(const riak::key&, const riak::key&, const
> std::shared\_ptr&, riak::::delivery\_arguments&,
> riak::put\_response\_handler&)’:
> build/riak/client.cxx:350:107: error: cannot convert ‘std::\_Bind (\*(std::function, std::\_Placeholder<1>,
> std::\_Placeholder<2>, std::\_Placeholder<3>))(std::function std::error\_code&)>, const std::error\_code&, long unsigned int, const
> std::basic\_string&)>’ to ‘riak::message::handler’ for argument
> ‘3’ to ‘void riak::::send\_put\_request(RpbPutReq&,
> riak::::delivery\_arguments&, riak::message::handler)’
> scons: \*\*\* [build/riak/client.o] Error 1
> scons: building terminated because of errors.
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

