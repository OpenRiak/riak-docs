---
title: "Re: riak (1.3.1), increasing response times over time"
description: ""
project: community
lastmod: 2013-06-03T03:00:49-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11205"
mailinglist_parent_id: "msg11204"
author_name: "Denis Zhdanov"
project_section: "mailinglistitem"
sent_date: 2013-06-03T03:00:49-07:00
---


Hi Stefan,

Yes, we faced same issue after upgrade to 1.3.1.
I made rolling restart today - and ... it's a magic - PUT time was dropped
from 150 ms to 2 ms! - http://s15.postimg.org/3lrl036yz/put.png

Thanks for pointing to right direction, I hope that will be fixed soon -
it's not very comfortable to do rolling restarts...


2013/6/3 Stefan Mees 

> We found a possible reason for this issue, please see
> https://github.com/basho/bitcask/issues/85.
>
> /stefan
>
>
> On Fri, May 31, 2013 at 12:01 PM, Stefan Mees wrote:
>
>> One small addition, this is how a riak-admin top looks like on both nodes
>> (interval 60 seconds), the file\_server\_2 is mostly on top on the node
>> running since days (not the case for the restarted node).
>>
>>
>> 'riak@192.168.1.3'
>> 09:59:17
>> Load: cpu 154 Memory: total 515897 binary
>> 8979
>> procs 2254 processes 18506 code
>> 10245
>> runq 0 atom 493 ets
>> 54588
>>
>> Pid Name or Initial Func Time Reds
>> Memory MsgQ Current Function
>>
>> -------------------------------------------------------------------------------------------------------------------------------
>> <6124.25.0> file\_server\_2 '-' 24019408
>> 5760 0 gen\_server:loop/6
>> <6124.765.0> proc\_lib:init\_p/5 '-' 10355467
>> 152144 0 gen\_fsm:loop/7
>> <6124.762.0> proc\_lib:init\_p/5 '-' 7832373
>> 239928 0 gen\_fsm:loop/7
>> <6124.2541.0> proc\_lib:init\_p/5 '-' 5828045
>> 239856 0 gen\_fsm:loop/7
>> <6124.2414.0> proc\_lib:init\_p/5 '-' 5707701
>> 239496 0 gen\_fsm:loop/7
>> <6124.2520.0> proc\_lib:init\_p/5 '-' 5697744
>> 239928 0 gen\_fsm:loop/7
>> <6124.2482.0> proc\_lib:init\_p/5 '-' 5648096
>> 152072 0 gen\_fsm:loop/7
>> <6124.774.0> proc\_lib:init\_p/5 '-' 5605494
>> 239928 0 gen\_fsm:loop/7
>> <6124.770.0> proc\_lib:init\_p/5 '-' 5574736
>> 239784 0 gen\_fsm:loop/7
>> <6124.817.0> proc\_lib:init\_p/5 '-' 5546001
>> 152072 0 gen\_fsm:loop/7
>>
>>
>> 'riak@192.168.1.6'
>> 09:58:28
>> Load: cpu 115 Memory: total 450116 binary
>> 7790
>> procs 1979 processes 17254 code
>> 10234
>> runq 0 atom 493 ets
>> 36768
>>
>> Pid Name or Initial Func Time Reds
>> Memory MsgQ Current Function
>>
>> -------------------------------------------------------------------------------------------------------------------------------
>> <6124.719.0> proc\_lib:init\_p/5 '-' 3980782
>> 233736 0 gen\_fsm:loop/7
>> <6124.2693.0> proc\_lib:init\_p/5 '-' 3839931
>> 2546752 0 gen\_fsm:loop/7
>> <6124.744.0> proc\_lib:init\_p/5 '-' 3760570
>> 233736 0 gen\_fsm:loop/7
>> <6124.745.0> proc\_lib:init\_p/5 '-' 3683748
>> 233880 0 gen\_fsm:loop/7
>> <6124.738.0> proc\_lib:init\_p/5 '-' 3588014
>> 233736 0 gen\_fsm:loop/7
>> <6124.2673.0> proc\_lib:init\_p/5 '-' 3580173
>> 145880 0 gen\_fsm:loop/7
>> <6124.2722.0> proc\_lib:init\_p/5 '-' 3457024
>> 233736 0 gen\_fsm:loop/7
>> <6124.748.0> proc\_lib:init\_p/5 '-' 3384883
>> 233664 0 gen\_fsm:loop/7
>> <6124.725.0> proc\_lib:init\_p/5 '-' 3300414
>> 145952 0 gen:do\_call/4
>> <6124.741.0> proc\_lib:init\_p/5 '-' 3158177
>> 233736 0 gen\_fsm:loop/7
>>
>
>
>
> --
> Stefan Mees | Software Engineer
> www.wooga.com | stefan.m...@wooga.com
>
> Wooga GmbH | Saarbruecker Str. 38 | D-10405 Berlin
> Sitz der Gesellschaft: Berlin; HRB 117846 B
> Registergericht Berlin-Charlottenburg
> Geschaeftsfuehrung: Jens Begemann, Philipp Moeser
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

