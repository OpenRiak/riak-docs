---
title: "maximum limit of keys per buckets"
description: ""
project: community
lastmod: 2012-01-06T17:37:16-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06163"
author_name: "Karthik K"
project_section: "mailinglistitem"
sent_date: 2012-01-06T17:37:16-08:00

---


I am using Riak with LevelDB as the storage engine.

app.config:

 {storage\_backend, riak\_kv\_eleveldb\_backend},


 {eleveldb, [
 {data\_root, "/var/lib/riak/leveldb"},
 {write\_buffer\_size, 4194304}, %% 4MB in bytes
 {max\_open\_files, 50}, %% Maximum number of files open at once
per partition
 {block\_size, 65536}, %% 4K blocks
 {cache\_size, 33554432}, %% 32 MB default cache size
per-partition
 {verify\_checksums, true} %% make sure data is what we expected
it to be
 ]},




I want to insert a million keys into the store ( into a given bucket ) .

pseudo-code:
 riakClient = RiakFactory.pbcClient();
 myBucket =
riakClient.createBucket("myBucket").nVal(1).execute();
 for (int i = 1; i <= 1000000; ++i) {
 final String key = String.valueOf(i);
 myBucket.store(key, new String(payload)).returnBody(false);
 }


after this operation, when I do:

 int count = 0;
 for (String key : myBucket.keys() ) {
 ++count;
 }
 return count;

This returns a total of 14K keys, while I was expecting close to 1 million
or so.

I am using riak-java-client (pbc).

Which setting / missing client code can explain the discrepancy ? Thanks.
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

