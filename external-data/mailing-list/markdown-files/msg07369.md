---
title: "Reip(ing) riak node created two copies in the cluster"
description: ""
project: community
lastmod: 2012-05-02T08:18:15-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07369"
author_name: "Nitish Sharma"
project_section: "mailinglistitem"
sent_date: 2012-05-02T08:18:15-07:00

---


Hi,
We have a 12-node Riak cluster. Until now we were naming every new node as 
riak@. We then decided to rename the all the nodes to 
riak@, which makes troubleshooting easier. 
After issuing reip command to two nodes, we noticed in the "status" that those 
2 nodes were now appearing in the cluster with the old name as well as the new 
name. Other nodes were trying to handoff partitions to the "new" nodes, but 
apparently they were not able to. After this the whole cluster went down and 
completely stopped responding to any read/write requests. 
member\_status displayed old Riak name in "legacy" mode. Since this is our 
production cluster, we are desperately looking for some quick remedies. Issuing 
"force-remove" to the old names, restarting all the nodes, changing the riak 
names back to the old ones - none of it helped.
Currently, we are hosting limited amount of data. Whats an elegant way to 
recover from this mess? Would shutting off all the nodes, deleting the ring 
directory, and again forming the cluster work?

Cheers
Nitish 
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

