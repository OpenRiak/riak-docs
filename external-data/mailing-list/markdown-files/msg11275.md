---
title: "Re: Riak will not work remote from ec2"
description: ""
project: community
lastmod: 2013-06-13T18:52:56-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11275"
mailinglist_parent_id: "msg11274"
author_name: "David Montgomery"
project_section: "mailinglistitem"
sent_date: 2013-06-13T18:52:56-07:00
---


The below does to make sense to me.

root@ip-10-204-150-22:/var/log/riak# riak console
Attempting to restart script through sudo -H -u riak
!!!!
!!!! WARNING: ulimit -n is 1024; 4096 is the recommended minimum.
!!!!
Exec: /usr/lib/riak/erts-5.9.1/bin/erlexec -boot
/usr/lib/riak/releases/1.3.1/riak -embedded -config
/etc/riak/app.config -pa
/usr/lib/riak/lib/basho-patches -args\_file /etc/riak/vm.args --
console
Root: /usr/lib/riak
{error\_logger,{{2013,6,14},{1,49,23}},"Protocol: ~p: register error:
~p~n",["inet\_tcp",{{badmatch,{error,duplicate\_name}},[{inet\_tcp\_dist,listen,1,[{file,"inet\_tcp\_dist.erl"},{line,70}]},{net\_kernel,start\_protos,4,[{file,"net\_kernel.erl"},{line,1314}]},{net\_kernel,start\_protos,3,[{file,"net\_kernel.erl"},{line,1307}]},{net\_kernel,init\_node,2,[{file,"net\_kernel.erl"},{line,1197}]},{net\_kernel,init,1,[{file,"net\_kernel.erl"},{line,357}]},{gen\_server,init\_it,6,[{file,"gen\_server.erl"},{line,304}]},{proc\_lib,init\_p\_do\_apply,3,[{file,"proc\_lib.erl"},{line,227}]}]}]}
{error\_logger,{{2013,6,14},{1,49,23}},crash\_report,[[{initial\_call,{net\_kernel,init,['Argument\_\_1']}},{pid,<0.21.0>},{registered\_name,[]},{error\_info,{exit,{error,badarg},[{gen\_server,init\_it,6,[{file,"gen\_server.erl"},{line,320}]},{proc\_lib,init\_p\_do\_apply,3,[{file,"proc\_lib.erl"},{line,227}]}]}},{ancestors,[net\_sup,kernel\_sup,<0.10.0>]},{messages,[]},{links,[#Port<0.197>,<0.18.0>]},{dictionary,[{longnames,true}]},{trap\_exit,true},{status,running},{heap\_size,610},{stack\_size,24},{reductions,528}],[]]}
{error\_logger,{{2013,6,14},{1,49,23}},supervisor\_report,[{supervisor,{local,net\_sup}},{errorContext,start\_error},{reason,{'EXIT',nodistribution}},{offender,[{pid,undefined},{name,net\_kernel},{mfargs,{net\_kernel,start\_link,[['
riak@184.73.64.170
',longnames]]}},{restart\_type,permanent},{shutdown,2000},{child\_type,worker}]}]}
{error\_logger,{{2013,6,14},{1,49,23}},supervisor\_report,[{supervisor,{local,kernel\_sup}},{errorContext,start\_error},{reason,shutdown},{offender,[{pid,undefined},{name,net\_sup},{mfargs,{erl\_distribution,start\_link,[]}},{restart\_type,permanent},{shutdown,infinity},{child\_type,supervisor}]}]}
{error\_logger,{{2013,6,14},{1,49,23}},std\_info,[{application,kernel},{exited,{shutdown,{kernel,start,[normal,[]]}}},{type,permanent}]}
{"Kernel pid
terminated",application\_controller,"{application\_start\_failure,kernel,{shutdown,{kernel,start,[normal,[]]}}}"}

Crash dump was written to: /var/log/riak/erl\_crash.dump
Kernel pid terminated (application\_controller)
({application\_start\_failure,kernel,{shutdown,{kernel,start,[normal,[]]}}})



On Fri, Jun 14, 2013 at 9:26 AM, David Montgomery  wrote:

> Ps
>
> Wen i did riak-admin reip riak@127.0.0.1 r...@xxx.xxx.xxx.xxx
>
> Attempting to restart script through sudo -H -u riak
> Backed up existing ring file to
> "/var/lib/riak/ring/riak\_core\_ring.default.20130614011624.BAK"
> New ring file written to
> "/var/lib/riak/ring/riak\_core\_ring.default.20130614012331"
>
>
>
> riak ping
> Attempting to restart script through sudo -H -u riak
> !!!!
> !!!! WARNING: ulimit -n is 1024; 4096 is the recommended minimum.
> !!!!
> Node 'r...@xxx.xxx.xxx.xxx' not responding to pings.
>
>
> riak start
> Attempting to restart script through sudo -H -u riak
> !!!!
> !!!! WARNING: ulimit -n is 1024; 4096 is the recommended minimum.
> !!!!
> Riak failed to start within 15 seconds,
> see the output of 'riak console' for more information.
> If you want to wait longer, set the environment variable
> WAIT\_FOR\_ERLANG to the number of seconds to wait.
>
>
> Where is the missing documentation?
>
>
>
>
>
>
> On Fri, Jun 14, 2013 at 9:02 AM, David Montgomery <
> davidmontgom...@gmail.com> wrote:
>
>> Hi,
>>
>> Why will riak not work on ec2 with a single node?
>>
>> 1) I have my sec groups open for all ports. This should be a no brainier.
>>
>> 2) Using the python client =
>> riak.RiakClient(host=riak\_host,port=8087,transport\_class=riak.transports.pbc.RiakPbcTransport)
>> where riak\_host is the public ip address of the machine
>>
>> 3) I when into app.config vm.args and replaces 127.0.0.1 in the relevant
>> places with the public ip address
>>
>> 4) I restarted riak
>>
>> 5) Yet..I cant remote write to riak.
>>
>> I am using the latest version of rial for ubuntu 12.04 installed wit the
>> deb package.
>>
>> So...what is the issue?
>>
>>
>>
>>
>> Thanks
>>
>
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

