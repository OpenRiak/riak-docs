---
title: "Re: building on FreeBSD?"
description: ""
project: community
lastmod: 2011-04-14T14:09:45-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03052"
mailinglist_parent_id: "msg03036"
author_name: "David Leimbach"
project_section: "mailinglistitem"
sent_date: 2011-04-14T14:09:45-07:00
---


On Thu, Apr 14, 2011 at 2:01 PM, Andrew Thompson  wrote:

> On Thu, Apr 14, 2011 at 01:29:49PM -0700, David Leimbach wrote:
> > I've checked out the branch for the last riak release, made a few
> > modifications to the downloaded rebar.conf files for riak\_kv, and one
> > adjustment to the erlang\_js/ebin/.app file (forget whole path), and it
> looks
> > like I now have a tarball I can build on FreeBSD, and run some very basic
> > tests against.
> >
> > Pretty cool :-)
> >
> What did you have to change in the rebar.conf and in the .app file?
>
> Andrew
>


In the downloaded deps/riak\_kv/rebar.conf file:
==========================
diff --git a/rebar.config b/rebar.config
index ff38831..bd1e8c1 100644
--- a/rebar.config
+++ b/rebar.config
@@ -12,7 +12,7 @@
 {luke, "0.2.4", {git, "git://github.com/basho/luke",
 {tag, "luke-0.2.4"}}},
 {erlang\_js, "0.6.0", {git, "git://github.com/basho/erlang\_js",
- {tag, "erlang\_js-0.6.0"}}},
+ {branch, "adt-bsd-support"}}},
 {bitcask, "1.1.5", {git, "git://github.com/basho/bitcask",
 {tag, "bitcask-1.1.5"}}},
 {ebloom, "1.0.2", {git, "git://github.com/basho/ebloom",

==========================
And then in deps/erlang\_js/ebin/erlang\_js.app:

==========================
diff --git a/ebin/erlang\_js.app b/ebin/erlang\_js.app
index 9812240..f177a6c 100644
--- a/ebin/erlang\_js.app
+++ b/ebin/erlang\_js.app
@@ -1,7 +1,7 @@
 % -\*- mode: erlang -\*-
 {application, erlang\_js,
 [{description, "Interface between BEAM and JS"},
- {vsn, "0.5.0"},
+ {vsn, "0.6.0"},
 {modules, [erlang\_js, erlang\_js\_sup, js, js\_benchmark, js\_cache,
js\_driv
 {registered, [erlang\_js\_sup, js\_cache]},
 {applications, [kernel, stdlib, sasl]},
==========================

And now it builds.

To get all the bash scripts to run I hunted down all the instances of:
#!/bin/bash

and made them

#!/usr/bin/env bash

I just don't agree with making symlinks on my system. I also think that if
these scripts could be run with POSIX sh it'd be better to make them
#!/bin/sh in the long run.

Dave
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

