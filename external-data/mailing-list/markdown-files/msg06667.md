---
title: "Search oddness"
description: ""
project: community
lastmod: 2012-02-21T07:23:18-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06667"
author_name: "Jeremiah Peschka"
project_section: "mailinglistitem"
sent_date: 2012-02-21T07:23:18-08:00

---


I'm working out the kinks in CorrugatedIron and I ran into a new issue.

When I run the following MR query, Riak starts complaining about bad inputs

{"inputs":{"bucket":"riak\_search\_bucket","query":"name:Al\*"},"query":[{"map":{"language":"javascript","source":"function(value,
keydata, arg) { return [value];
}","keep":true}},{"reduce":{"language":"javascript","source":"function(values,
arg) { return values; }","keep":true}}]}

The error I'm getting back from Riak is:

Riak returned an error. Code '1'. Message: Error sending inputs:
{{modfun,riak\_search,mapred\_search,
 [<<"riak\_search\_bucket">>,<<"Al\*">>,[]]},
 error,badarg,
 [{ets,lookup,[schema\_table,<<"riak\_search\_bucket">>]},
 {riak\_search\_config,get\_schema,1},
 {riak\_search\_client,parse\_query,3},
 {riak\_search,parse\_query,3},
 {riak\_search,mapred\_search,3},
 {riak\_kv\_mrc\_pipe,send\_inputs,3},
 {riak\_kv\_mrc\_pipe,'-send\_inputs\_async/3-fun-0-',3}]}

The body of the test installs the search schema, inserts two objects
into the appropriate bucket, and then issues this MR query.

I suspect I'm missing something obvious, but another set of eyes would
be appreciated.
---
Jeremiah Peschka
Managing Director, Brent Ozar PLF, LLC

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

