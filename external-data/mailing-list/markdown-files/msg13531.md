---
title: "Basho Product Alert: Active Anti-Entropy in Riak 1.4.4 - 1.4.7"
description: ""
project: community
lastmod: 2014-01-29T08:39:58-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13531"
author_name: "Tom Santero"
project_section: "mailinglistitem"
sent_date: 2014-01-29T08:39:58-08:00

---


Hello,

Basho Engineering has uncovered a bug in the Active Anti-Entropy (AAE) code
in Riak versions 1.4.4 through 1.4.7, inclusive. This code incorrectly
generates hashes resulting in AAE failing to repair data. Data will
continue to be repaired via the standard read repair mechanisms. As the
incorrect hash generation will utilize system resources with no useful
result, our official recommendation is that you should not use AAE until a
fix is released in 1.4.8.

To disable AAE on a running cluster, perform a `riak attach`, then:

a.
rpc:multicall(riak\_kv\_entropy\_manager, disable, []).
rpc:multicall(riak\_kv\_entropy\_manager, cancel\_exchanges, []).
z.


then Press Ctrl-c a, then Enter to quit.

Next, you'll want to disable AAE on restart. Adjust your the app.config
file on all nodes in the cluster in the following manner:

% Before
{anti\_entropy, {on, []}}

% After
{anti\_entropy, {off, []}}


Once again, this issue only affects Riak versions 1.4.4, 1.4.5, 1.4.6, and
1.4.7. There is no need to make changes to your cluster due to this bug if
you are not running one of those versions, or if you are not using AAE. A
forthcoming Riak 1.4.8 release will address this problem and be released in
the next few days.


Thank you,
Basho
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

