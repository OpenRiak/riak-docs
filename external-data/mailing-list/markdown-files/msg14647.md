---
title: "Re: riak-users Digest, Vol 61, Issue 12"
description: ""
project: community
lastmod: 2014-08-13T10:06:56-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14647"
author_name: "Bernard Otu"
project_section: "mailinglistitem"
sent_date: 2014-08-13T10:06:56-07:00

---


â€”
Sent from Mailbox

On Wed, Aug 13, 2014 at 12:02 PM, null 
wrote:

> Send riak-users mailing list submissions to
> riak-users@lists.basho.com
> To subscribe or unsubscribe via the World Wide Web, visit
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
> or, via email, send a message with subject or body 'help' to
> riak-users-requ...@lists.basho.com
> You can reach the person managing the list at
> riak-users-ow...@lists.basho.com
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of riak-users digest..."
> Today's Topics:
> 1. Re: some problems with storage statistic calculation
> (Stanislav Vlasov)
> ----------------------------------------------------------------------
> Message: 1
> Date: Wed, 13 Aug 2014 15:00:21 +0600
> From: Stanislav Vlasov 
> To: riak-users 
> Subject: Re: some problems with storage statistic calculation
> Message-ID:
> 
> Content-Type: text/plain; charset=UTF-8
> 2014-08-11 17:03 GMT+06:00 Stanislav Vlasov :
>> We have 8 nodes with riak+riak-cs, about 7 Tb data in cluster.
>> Some time riak process dead by OOM on several nodes when large
>> (~100Gb) file was writed via s3cmd, because riak-cs eated all memory.
>> After recovering we experiencing the following problems:
>>
>> 1) very slow storage statistic calculation (about two hour). Before
>> oom it was done in 40 minutes.
> After total riak-cs restart statistic calculate fine (about 10 min
> from begin to end). But 15 minutes after restart statstic calculation
> slowing agan and we see in console log:
> 2014-08-13 08:18:31.854 [warning]
> <0.4043.0>@riak\_cs\_manifest:maybe\_warn\_bloated\_manifests:145 Large
> manifest size (54195024 bytes) for bucket=<<"test">> key=
> <<"u7850.netangels.ru-20140328-full.tar.lzo">>
> 2014-08-13 08:18:43.620 [warning]
> <0.4081.0>@riak\_cs\_manifest:maybe\_warn\_bloated\_manifests:145 Many
> manifest siblings (21 siblings) for bucket=<<"test">> key=
> <<"u7850.netangels.ru-20140328-full.tar.lzo">>
> Filesize was ~120Gb, uploaded before OOM. File does not exists now
> (deleted, uploaded with zero size and deleted again), but nothing
> changed.
> I guess it's a garbage collector issue, because it happen exactly
> every 15 minutes ({gc\_interval,900}) after restart.
> What can i do with it?
> -- 
> Stanislav
> ------------------------------
> Subject: Digest Footer
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
> ------------------------------
> End of riak-users Digest, Vol 61, Issue 12
> \*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

