---
title: "Custom hashing (partitioning) functions"
description: ""
project: community
lastmod: 2014-01-20T13:09:53-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13417"
author_name: "Sargun Dhillon"
project_section: "mailinglistitem"
sent_date: 2014-01-20T13:09:53-08:00

---


So, I don't know how many people are aware of if, but Riak supports
custom hashing (partitioning) functions. It's exposed as a bucket
property (chash\_keyfun), in which you can deploy your own code to hash
keys to ensure data locality to specific vnodes. This can come in
handy when doing custom mapreduce jobs, riak\_pipe, or riak\_core
applications.

After playing around with this feature set quite a bit recently, it
seems like there are some places that don't entirely respect this.
Specifically, the place where I'm looking at right now is
riak\_kv\_pipe\_get, when try\_preflist gets called (if try\_partition
falls through), it falls back to riak\_core\_util:chash\_key (L188), as
opposed to looking at the riak\_pipe chashfun, or the bucket chashfun.
What's the approach that most people have taken here with custom hash
functions?

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

