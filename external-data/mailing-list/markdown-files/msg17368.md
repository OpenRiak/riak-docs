---
title: "Re: Querying SOLR outside of Riak"
description: ""
project: community
lastmod: 2016-05-16T06:09:59-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17368"
mailinglist_parent_id: "msg17367"
author_name: "Alex De la rosa"
project_section: "mailinglistitem"
sent_date: 2016-05-16T06:09:59-07:00
---


Hi Fred,

Yeah, I realised that on my testing node with n\_val of 3 I was getting the
triple of results in the count... that is not ideal.

I was just concerned on how much extra-work would get Riak to talk with
SOLR and compile data against hitting SOLR directly... For my tests these
days, seems the /search interface is pretty fast and it may not be a real
problem for Riak... but still have my fears from Riak 0.14 an Riak 1.4

Thanks,
Alex

On Mon, May 16, 2016 at 4:49 PM, Fred Dushin  wrote:

> Hi Alex,
>
> Other people have chimed in, but let me repeat that while the
> internal\_solr interface is accessible via HTTP (and needs to be, at least
> from Riak processes), you cannot use that interface to query Solr and
> expect a correct result set (unless you are using a single node cluster
> with an n\_val of 1).
>
> When you run your queries through Riak, Yokozuna, the component that
> interfaces with Solr, will use a riak\_core coverage plan to generate a
> distributed Solr filter query across the entire cluster that guarantees
> that for any document stored on all Solr nodes in the cluster, the query
> will select one (and only one) replica. If you were to run your query
> locally using the internal\_solr interface, your query would not span the
> cluster (likely missing documents on other nodes) and may have duplicates
> (e.g., in degenerate cases where you have more than one replica on the same
> node).
>
> I hope that helps explain why using the internal\_solr interface is not
> only not recommended, it's also not going to give you the results you
> expect.
>
> -Fred
>
> On May 15, 2016, at 4:18 AM, Alex De la rosa 
> wrote:
>
> Hi Vitaly,
>
> I know that you can access search via HTTP through Riak like this:
>
> http://localhost:8098/search/query/famous?wt=json&q=leader:true AND
> age\_i:[25 TO \*]
>
> I didn't find documentation about this, but according to your words I
> could access SOLR directly like this?
>
> http://localhost:8093/internal\_solr/famous/select?wt=json&q=leader:true
> AND age\_i:[25 TO \*]
>
> If I go through "8098/search" would it be adding extra stress into the
> Riak cluster? Or is recommended to go through "8098/search" instead of
> "8093/internal\_solr"??
>
> I just want to see if I can make use of SOLR with an external mapreduce
> platform (Disco) without giving extra stress to Riak.
>
> Thanks,
> Rohman
>
> On Sun, May 15, 2016 at 12:07 PM, Vitaly <13vitam...@gmail.com> wrote:
>
>> There is, you can \*query \*Solr directly via HTTP, at least as of Riak
>> 2.0.x
>>
>> Have a look at http://:8093/internal\_solr/#/ and
>> http://docs.basho.com/riak/kv/2.1.4/developing/usage/search/#querying
>>
>> Vitaly
>>
>>
>> On Sun, May 15, 2016 at 10:49 AM, Alex De la rosa <
>> alex.rosa....@gmail.com> wrote:
>>
>>> Nobody knows if there is a way to access SOLR right away without going
>>> through RIAK's interface?
>>>
>>> Thanks,
>>> Alex
>>>
>>> On Fri, May 13, 2016 at 11:07 PM, Alex De la rosa <
>>> alex.rosa....@gmail.com> wrote:
>>>
>>>> Hi all,
>>>>
>>>> If I want to create a Disco cluster [ http://discoproject.org ] to
>>>> build statistics and compile data attacking Riak's SOLR directly without
>>>> using Riak, how can I do it?
>>>>
>>>> In this way, I would leave Riak mainly for data IO (post/get) and leave
>>>> the heavy duty of searching and compiling data to Disco; so Riak's
>>>> performance shouldn't be affected for searching as mainly it will store and
>>>> retrieve data only.
>>>>
>>>> Thanks,
>>>> Alex
>>>>
>>>
>>>
>>> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
>>> riak-users mailing list
>>> riak-users@lists.basho.com
>>> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>>>
>>>
>>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>
>
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

