---
title: "Re: best practices for testing eventual consistency?"
description: ""
project: community
lastmod: 2011-11-15T10:30:04-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05588"
mailinglist_parent_id: "msg05587"
author_name: "Will Moss"
project_section: "mailinglistitem"
sent_date: 2011-11-15T10:30:04-08:00
---


Hey Jesse,

You should do all of those things, more testing of a database is always
good!

To answer your specific question though, one of the easiest ways to produce
conflicts is just to create multiple new values (i.e. values with no vector
clocks). In that case, Riak can't possible resolve them automatically, so
it will return them to you as siblings on the next operation on that key.

Will


On Tue, Nov 15, 2011 at 10:23 AM, Jesse Myers wrote:

> I'm contemplating migrating a write-intensive system from MySQL to Riak.
>
> I understand the eventual consistency model and the need to resolve
> conflicts in application code, especially if allow\_mult is true. My
> concern is that I won't discover all of the conflict scenarios my
> application code needs to handle until after we're live in production.
> Are there best practices for producing conflicts in development
> environment? Is my best option to simulate a large amount of load and
> see what happens? Should I lower my R or W values? Kill off nodes
> randomly?
>
> Related question: I'd like to write unit tests for conflict scenarios
> I anticipate/encounter. Do any of the client libraries come with good
> mock support or is that something I need to roll myself?
>
> Thanks,
>
> Jesse
>
> \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
> riak-users mailing list
> riak-users@lists.basho.com
> http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com
>
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

