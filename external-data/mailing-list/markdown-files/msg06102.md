---
title: "Re: Best practices for using the PB client"
description: ""
project: community
lastmod: 2011-12-30T14:35:19-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06102"
mailinglist_parent_id: "msg06099"
author_name: "Bip Thelin"
project_section: "mailinglistitem"
sent_date: 2011-12-30T14:35:19-08:00
---


On 30 dec 2011, at 20:31, Andrew Berman wrote:

> 
> Also, shameless plug, I have a pooler as well which has a few more options 
> than pooler. You can check it out here: https://github.com/aberman/pooly

Nice, I'll look in to that.

> --Andrew
> 
> On Fri, Dec 30, 2011 at 9:58 AM, Marc Campbell  wrote:
> Hey all,
> 
> I'm looking for some best practices in handling connections when using the 
> protocol buffer client. Specifically, I have 3 nodes in my cluster, and need 
> to figure out how to handle the situation when one of the nodes is down.
> 
> I'm currently using a pooler app (https://github.com/seth/pooler) and this 
> helps me distribute the load to all of the nodes, but when one goes down, the 
> app doesn't recover nicely.

Hi, I ran in to that exakt problem so I've forked and patched that pooler here: 
https://github.com/bipthelin/pooler I also added OJ's patch which let's you do 
oneliners like: pooler:use\_member(fun(RiakPid) -> riakc\_pb\_socket:get(RiakPid, 
Bucket, Key) end).

Also, there's this pooler: https://github.com/devinus/poolboy

--
Bip Thelin
 
Evolope AB | Lugnets All√© 1 | 120 33 Stockholm
Tel 08-533 335 37 | Mob 0735-18 18 90
www.evolope.se

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

