---
title: "Re: Riak Recap for 8/13 - 8/15"
description: ""
project: community
lastmod: 2010-08-16T13:23:13-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg00897"
mailinglist_parent_id: "msg00896"
author_name: "francisco treacy"
project_section: "mailinglistitem"
sent_date: 2010-08-16T13:23:13-07:00
---


> 10) Q --- Has anyone got experience with making Rails work with object
> ids that contain periods? Such as email addresses, for example? I'm
> finding I need to encode the . as %252E so that rails doesn't see the
> period when I use the id in a URL, which is fine, but then when I use
> the id with ripple I have to CGI::encode it. Would love to have a way
> to automate it with Ripple so that I don't have to encode it by hand
> whenever I want to use the id.
>
> A --- There's a recent change in ripple edge to CGI-encode the
> keys instead of URI-encode them. Unfortunately you can't change
> Rails' default resource routes to exclude or ignore the format.
> However, you could potentially join the id and format params with a
> "." Or create your own custom route.

We are using email addresses as ids in Rails. Easy because it only
involves users routes:

resources :users, :constraints => { :id => /....@.+\.[^\/]+/ }

This works just fine. We had, however, problems when updating to
latest Ripple because it CGI-encodes keys and links are always
unescaped by Riak (so when you follow those links, dots and ats are
not part of the keys anymore - but %40 instead). See
https://issues.basho.com/show\_bug.cgi?id=617 . It'd be really cool if
this got fixed quite soon, or at least laid out what how client
libraries should behave in this respect :)

Francisco

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\_lists.basho.com

