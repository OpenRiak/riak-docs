<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: limit of bucket/solr indexes</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#16975" id="c">
<link rel="index" href="maillist.html#16975" id="i">
<link rel="prev" href="msg16794.html" id="p">
<link rel="next" href="msg16790.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg16975.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+limit+of+bucket%5C%2Fsolr+indexes%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: limit of bucket/solr indexes</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Vitaly+E%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Vitaly E</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20160115" rel="nofollow">Fri, 15 Jan 2016 10:14:12 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi Alexander,

I didn't see anybody answering your question, so I'll try my best to answer
it myself.</pre><pre>

The practical number of Solr indices in Riak KV is pretty low. I won't
recommend working with more than a few. We hit severe performance problems
at around a few tens of Solr indexes. So it looks like if Solr search is
absolutely a must for you, you'll have to share an index among the teams
and filter out search results (by team).

Regarding buckets, there can be a lot. That said, I would suggest utilizing
bucket types to get better performance. When the properties of a bucket are
derived from a bucket type, it's mostly the bucket type that needs to be
replicated across Riak nodes, as opposed to replicating the properties of
every individual bucket (
<a  rel="nofollow" href="http://docs.basho.com/riak/latest/dev/advanced/bucket-types/#How-Bucket-Types-Work">http://docs.basho.com/riak/latest/dev/advanced/bucket-types/#How-Bucket-Types-Work</a>).
Am I right assuming that the nature (or structure if you will) of data will
be the same for different teams? If this is the case, it may make sense to
configure bucket properties at the bucket-type level, including any
associated Solr indexes.

For example, you may have the following structure:

bucket type: team_members
properties: w = quorum, r = quorum, search_index = team_members

And then &quot;child&quot; buckets:
* type/team_members/bucket/dinamo
* type/team_members/bucket/chelsea
* type/team_members/bucket/juventus
and so on

If you decide to use this approach, let me know how it works for you.

Regards,
Vitaly


On Wed, Nov 18, 2015 at 12:02 PM, Alexander Popov &lt;mogada...@gmail.com&gt;
wrote:

&gt; 1. does Riak have restrictions on bucket numbers?
&gt; 2. same for SOLR indexes?
&gt;
&gt; Interesting not theoretical, but practical limits when it start works  bad.
&gt;
&gt; Use case: we want split users bucket to bucket-per-team  model,
&gt; this bucket have also solr index on top. Can it work for  1000 teams? 10k?
&gt; 100k?
&gt;
&gt;
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;
&gt;
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg16794.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#16975">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#16975">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg16790.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg16789.html">limit of bucket/solr indexes</a></span> <span class="sender italic">Alexander Popov</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg16794.html">Re: limit of bucket/solr indexes</a></span> <span class="sender italic">Damien Krotkine</span></li>
<li class="icons-email tSliceCur"><span class="subject">Re: limit of bucket/solr indexes</span> <span class="sender italic">Vitaly E</span></li>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: limit of bucket/solr indexes">
<input type="hidden" name="msgid" value="CAG57SfPsc_QzfLG2GdAB=wNTS-PyyfDm77hun=ntVrmYfYJMWg@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg16975.html">
<input type="submit" value=" Vitaly E ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+limit+of+bucket%5C%2Fsolr+indexes%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg16794.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg16790.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CAG57SfPsc_QzfLG2GdAB=wNTS-PyyfDm77hun=ntVrmYfYJMWg@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
