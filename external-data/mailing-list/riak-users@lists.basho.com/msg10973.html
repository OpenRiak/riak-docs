<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Production server specs for Riak node</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#10973" id="c">
<link rel="index" href="maillist.html#10973" id="i">
<link rel="prev" href="msg10953.html" id="p">
<link rel="next" href="msg10980.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg10973.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Production+server+specs+for+Riak+node%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Production server specs for Riak node</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Dmitri+Zagidulin%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Dmitri Zagidulin</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20130425" rel="nofollow">Thu, 25 Apr 2013 11:18:03 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Tom,

In addition to Matt's links above, I would recommend to take a look at the
following pages:</pre><pre>

<a  rel="nofollow" href="http://docs.basho.com/riak/latest/references/appendices/Cluster-Capacity-Planning/">http://docs.basho.com/riak/latest/references/appendices/Cluster-Capacity-Planning/</a>
and
<a  rel="nofollow" href="http://docs.basho.com/riak/latest/tutorials/System-Planning/">http://docs.basho.com/riak/latest/tutorials/System-Planning/</a>

The short version is:
* RAM is important, especially with Bitcask. I personally wouldn't give
nodes less than 16GB each, though I suppose they could run with 8. (The
reason I mention Bitcask, is because it stores all of its keys in memory,
and if you have too many keys and too little memory, you're going to run
out. See
<a  rel="nofollow" href="http://docs.basho.com/riak/latest/references/appendices/Bitcask-Capacity-Planning/for">http://docs.basho.com/riak/latest/references/appendices/Bitcask-Capacity-Planning/for</a>
a calculator that can help you ensure how much RAM you need, if you
know how many millions of keys you're going to store, and how large each
one is)

* Disk IO speed is very important, and is usually the bottleneck for
clusters. RAID or SSDs are helpful. If you're running on AWS, disk IO is
especially killer, so spring for sufficient Provisioned IOPS.

* Network bandwidth is important (between the nodes). If your cluster has
the default replication setting of N=3, each read or write request to a
node results in potentially 3 network requests to other nodes (this is in
addition to background-level &quot;gossip&quot; between the nodes, as they try and
maintain consistency, perform read-repair and so on). So basically, use the
fastest network speed you can afford (that makes sense for your
application). If you can spring for Gigabit+, go for it. If the application
is especially time-sensitive and is under high load, it may make sense to
have 2 network adapters for each node -- one for external client requests,
and one for internal inter-node traffic.

* If you're running on AWS, your minimum instance size should be m1.large,
though really, you should use xlarge. (And don't forget about those PIOPS).

Does that help clarify?

Dmitri




On Mon, Apr 22, 2013 at 7:11 PM, Matt Black &lt;matt.bl...@jbadigital.com&gt;wrote:

&gt; There's a lot of information in here:
&gt;
&gt; <a  rel="nofollow" href="http://docs.basho.com/riak/latest/cookbooks/Linux-Performance-Tuning/">http://docs.basho.com/riak/latest/cookbooks/Linux-Performance-Tuning/</a>
&gt;
&gt; And the sister article, specific to AWS:
&gt;
&gt; <a  rel="nofollow" href="http://docs.basho.com/riak/latest/cookbooks/Performance-Tuning-AWS/">http://docs.basho.com/riak/latest/cookbooks/Performance-Tuning-AWS/</a>
&gt;
&gt; As ever with Riak, the answer to your question depends on what you're
&gt; doing :)
&gt;
&gt;
&gt; On 23 April 2013 02:07, Tom Zeng &lt;t...@intridea.com&gt; wrote:
&gt;
&gt;&gt;  Hi,
&gt;&gt;
&gt;&gt; I am wondering if there are any docs/recommendations on server hardware
&gt;&gt; specs for production Riak instances - cores, clock speed, network
&gt;&gt; interfaces/bandwidth, hard drive raid vs ssd, and etc.
&gt;&gt;
&gt;&gt; Tom
&gt;&gt; Thanks,
&gt;&gt; --
&gt;&gt; Tom Zeng
&gt;&gt; Director of Engineering
&gt;&gt; Intridea, Inc. | www.intridea.com
&gt;&gt; t...@intridea.com
&gt;&gt; (o) 888.968.4332 x519
&gt;&gt; (c) 240-643-8728
&gt;&gt;
&gt;&gt; _______________________________________________
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;&gt;
&gt;&gt;
&gt;
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;
&gt;
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg10953.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#10973">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#10973">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg10980.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg10947.html">Production server specs for Riak node</a></span> <span class="sender italic">Tom Zeng</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg10953.html">Re: Production server specs for Riak node</a></span> <span class="sender italic">Matt Black</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Production server specs for Riak node</span> <span class="sender italic">Dmitri Zagidulin</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg10980.html">Re: Production server specs for Riak node</a></span> <span class="sender italic">Tom Zeng</span></li>
<li class="icons-email"><span class="subject"><a href="msg11033.html">Re: Production server specs for Riak node</a></span> <span class="sender italic">Sebastian Cohnen</span></li>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Production server specs for Riak node">
<input type="hidden" name="msgid" value="CA+TO3kVawXsGemBYkGqsvh-1wLdrM_tmHX5SFr8zf=y9y7=+Kw@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg10973.html">
<input type="submit" value=" Dmitri Zagidulin ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Production+server+specs+for+Riak+node%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg10953.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg10980.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CA+TO3kVawXsGemBYkGqsvh-1wLdrM_tmHX5SFr8zf=y9y7=+Kw@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
