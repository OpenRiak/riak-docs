<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Multiget java client performance</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#15529" id="c">
<link rel="index" href="maillist.html#15529" id="i">
<link rel="prev" href="msg15524.html" id="p">
<link rel="next" href="msg15532.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg15529.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Multiget+java+client+performance%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Multiget java client performance</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Brian+Roach%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Brian Roach</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20150120" rel="nofollow">Tue, 20 Jan 2015 09:14:19 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Santi -

The core of the 2.0 Java client uses Netty. There's a fixed number of
worker threads that process sockets using non-blocking IO ( w/
polling/select).</pre><pre>

Due to the synchronous nature of the Riak API, each fetch operation
requires its own socket connection and we can't pipeline.

As noted in the Javadoc for MultiFetch
(<a  rel="nofollow" href="http://basho.github.io/riak-java-client/2.0.0/com/basho/riak/client/api/commands/kv/MultiFetch.html">http://basho.github.io/riak-java-client/2.0.0/com/basho/riak/client/api/commands/kv/MultiFetch.html</a>)
there is a default of 10 simultaneous fetches in flight at once. This
is pretty conservative but ... that's what defaults are for :)

How does it scale? Depends on the hardware, network latency, etc. In
the end ... you've only got so many threads and you prob don't want
1000 sockets being created at once. Best suggestion is to adjust up
the number of simultaneous inflight and measure it.

Thanks,
- Roach



On Mon, Jan 19, 2015 at 6:43 PM, Santi Kumar &lt;sa...@veradocs.com&gt; wrote:
&gt; Brain
&gt; I&quot;m using Riak Client 2.0.0 and Riak 2.0.2.
&gt;
&gt;
&gt;
&gt; On Tue, Jan 20, 2015 at 1:54 AM, Brian Roach &lt;ro...@basho.com&gt; wrote:
&gt;&gt;
&gt;&gt; Santi -
&gt;&gt;
&gt;&gt; Which version of the Java client?
&gt;&gt;
&gt;&gt; Thanks,
&gt;&gt; - Roach
&gt;&gt;
&gt;&gt; On Mon, Jan 19, 2015 at 7:36 AM, Santi Kumar &lt;sa...@veradocs.com&gt; wrote:
&gt;&gt; &gt; Hi
&gt;&gt; &gt;
&gt;&gt; &gt; We are using java client for accessing Riak KV/Search. For some use
&gt;&gt; &gt; cases,
&gt;&gt; &gt; we go to search, get the keys and access the data from Riak. There might
&gt;&gt; &gt; be
&gt;&gt; &gt; a case where we might get 1000's of keys. So want to understand what is
&gt;&gt; &gt; the
&gt;&gt; &gt; impact of that on multiget and how does it scale.
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt; We were using RDBMS and Elastic search earlier. Now we moved all the
&gt;&gt; &gt; data to
&gt;&gt; &gt; Riak KV and Search. We used to query all the audit entries from ES as we
&gt;&gt; &gt; used to store the complete data there. Applicaitons flows used to get
&gt;&gt; &gt; the
&gt;&gt; &gt; data from RDBMS. Now as we replaced everything with Riak KV and search,
&gt;&gt; &gt; We
&gt;&gt; &gt; need to go to Riak Search for auditing reports. If we store all the
&gt;&gt; &gt; objects
&gt;&gt; &gt; in Riak Search, how does it impact ?
&gt;&gt; &gt;
&gt;&gt; &gt; Thanks
&gt;&gt; &gt; Santi
&gt;&gt; &gt;
&gt;&gt; &gt; _______________________________________________
&gt;&gt; &gt; riak-users mailing list
&gt;&gt; &gt; riak-users@lists.basho.com
&gt;&gt; &gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;&gt; &gt;
&gt;
&gt;

_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg15524.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#15529">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#15529">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg15532.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg15522.html">Multiget java client performance</a></span> <span class="sender italic">Santi Kumar</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg15523.html">Re: Multiget java client performance</a></span> <span class="sender italic">Brian Roach</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg15524.html">Re: Multiget java client performance</a></span> <span class="sender italic">Santi Kumar</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Multiget java client performance</span> <span class="sender italic">Brian Roach</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg15532.html">Re: Multiget java client performance</a></span> <span class="sender italic">Santi Kumar</span></li>
<li class="icons-email"><span class="subject"><a href="msg15576.html">Re: Multiget java client performance</a></span> <span class="sender italic">Santi Kumar</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Multiget java client performance">
<input type="hidden" name="msgid" value="CAM+FMBtQ3fQLNdq4wPd9af4L_xam1Nr=arvpbvQQ5rwTozx6tg@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg15529.html">
<input type="submit" value=" Brian Roach ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Multiget+java+client+performance%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg15524.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg15532.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CAM+FMBtQ3fQLNdq4wPd9af4L_xam1Nr=arvpbvQQ5rwTozx6tg@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
