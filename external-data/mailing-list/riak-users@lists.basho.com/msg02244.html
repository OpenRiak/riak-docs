<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Removing properties in Ripple</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#02244" id="c">
<link rel="index" href="maillist.html#02244" id="i">
<link rel="prev" href="msg02241.html" id="p">
<link rel="next" href="msg02235.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg02244.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Removing+properties+in+Ripple%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Removing properties in Ripple</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Duff+OMelia%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Duff OMelia</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20110209" rel="nofollow">Wed, 09 Feb 2011 06:45:14 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>&gt; A little git history helps. It seems you added that spec back in November, I 
&gt; think
&gt; around the time we were discussing how to properly deal with the &quot;_type&quot;
&gt; property in #instantiate.</pre><pre>

That's hilarious!  Ouch!  I'm lame.  Hopefully next time I'll remember
to ask myself for the motivation behind the test I added.  Ridiculous!


&gt; Without remembering too much of the original context, the question seems to 
&gt; be: should it
&gt; silently ignore attributes that no longer exist on the model or should it 
&gt; warn the
&gt; programmer in some way that a property doesn't exist?

Perhaps when we're instantiating/reloading, we could iterate over the
robject.data (like we're doing), and then call the setter if the
property's been declared.  If it hasn't been declared, then maybe we
could put it on @attributes.

This could allow us to access unmapped properties and potentially do
some migrating, etc.

When we save an object out to Riak, we'd want to ensure that any
attributes which don't map to properties get saved out.

I think when we're saving now, we're eventually calling:

      def attributes
        self.class.properties.values.inject({}) do |hash, prop|
          hash[prop.key] = attribute(prop.key)
          hash
        end.with_indifferent_access
      end

which may need to change.  I'm not sure if that could use the
@attributes to give the copy.  It looks like the property values are
kept in sync with the @attributes' values.

All in all, it seems useful to be able to have our Ripple Document
declaration of properties not necessarily be in sync with the actual
Riak document underneath.

Whatcha think?


------------------------------------------------------------
Duff OMelia

_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg02241.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#02244">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#02244">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg02235.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg02234.html">Removing properties in Ripple</a></span> <span class="sender italic">Duff OMelia</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg02238.html">Re: Removing properties in Ripple</a></span> <span class="sender italic">Adam Hunter</span></li>
<li class="icons-email"><span class="subject"><a href="msg02240.html">Re: Removing properties in Ripple</a></span> <span class="sender italic">Duff OMelia</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg02241.html">Re: Removing properties in Ripple</a></span> <span class="sender italic">Sean Cribbs</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Removing properties in Ripple</span> <span class="sender italic">Duff OMelia</span></li>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Removing properties in Ripple">
<input type="hidden" name="msgid" value="AANLkTing8qJxPoW0nWfd9QsuORGHHPAYbg059DxYDxO4@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg02244.html">
<input type="submit" value=" Duff OMelia ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Removing+properties+in+Ripple%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg02241.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg02235.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">AANLkTing8qJxPoW0nWfd9QsuORGHHPAYbg059DxYDxO4@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
