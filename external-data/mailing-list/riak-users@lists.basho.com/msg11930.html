<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Nailing down the bucket design?</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="thrd12.html#11930" id="c">
<link rel="index" href="mail12.html#11930" id="i">
<link rel="prev" href="msg11931.html" id="p">
<link rel="next" href="msg11933.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg11930.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Nailing+down+the+bucket+design%5C%3F%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Nailing down the bucket design?</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Jeremiah+Peschka%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Jeremiah Peschka</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20130807" rel="nofollow">Wed, 07 Aug 2013 07:58:59 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Responses inline.

---
Jeremiah Peschka - Founder, Brent Ozar Unlimited
MCITP: SQL Server 2008, MVP
Cloudera Certified Developer for Apache Hadoop</pre><pre>


On Wed, Aug 7, 2013 at 2:28 AM, Maksymilian Strzelecki &lt;prog...@gmail.com&gt;wrote:

&gt; Hi. I've read somewhere around the Internet that Riak benefits its
&gt; performence when there are more buckets and not massive amount of keys in
&gt; them. Now, if this is true I'm asking for an advice on how to go about my
&gt; data model.
&gt;

Riak can benefit from having a large number of buckets, but it's very use
case specific.


&gt; I've started off with one bucket called accounts_units. Every player has
&gt; his set of units in-game (like 10-20) and they all have their individual
&gt; keys in there. Since knowing what your units are is pretty important thing
&gt; I would be doing a lot of queries on that bucket. Then I thought I could
&gt; create individual buckets for every player and his units. Though it would
&gt; create A LOT of buckets with little keys. Would that be better? What do you
&gt; think?
&gt;

In direct answer to your question, your data model might be better served
by storing all of a player's units in a single value; e.g. units/peschkaj
instead of having between 10 and 20 keys in a units_peschkaj bucket. The
reasoning here being that a read of a single key is going to be less load
on the system than 20 reads, even though that one key might be 20x larger.

You need to be aware of data access patterns - if multiple actors in your
system can modify the same value, then you need to account for that in your
data access patterns and either serialize writes through a single point
(not a great idea for concurrency) or potentially allow conflicts to occur
and have your application manage sibling resolution.

You also need to be aware of the size of each value that you're storing,
especially if you have siblings. There are performance implications of
storing objects around 4MB in size.


&gt;
&gt; Thanks for your time,
&gt; Max.
&gt;
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;
&gt;
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg11931.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="thrd12.html#11930">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="mail12.html#11930">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg11933.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg11928.html">Nailing down the bucket design?</a></span> <span class="sender italic">Maksymilian Strzelecki</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg11929.html">Re: Nailing down the bucket design?</a></span> <span class="sender italic">Guido Medina</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg11931.html">Re: Nailing down the bucket design?</a></span> <span class="sender italic">Guido Medina</span></li>
</ul></li>
<li class="icons-email tSliceCur"><span class="subject">Re: Nailing down the bucket design?</span> <span class="sender italic">Jeremiah Peschka</span></li>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Nailing down the bucket design?">
<input type="hidden" name="msgid" value="CACJEN2qxqWkaL7djX9-ewv-QpdB=JPo7wyEFuVn8NRfFfDp6gw@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg11930.html">
<input type="submit" value=" Jeremiah Peschka ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Nailing+down+the+bucket+design%5C%3F%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg11931.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg11933.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CACJEN2qxqWkaL7djX9-ewv-QpdB=JPo7wyEFuVn8NRfFfDp6gw@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
