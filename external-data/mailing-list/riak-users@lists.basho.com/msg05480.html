<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: 2i for single-result lookup</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#05480" id="c">
<link rel="index" href="maillist.html#05480" id="i">
<link rel="prev" href="msg05479.html" id="p">
<link rel="next" href="msg05472.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg05480.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+2i+for+single%5C-result+lookup%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: 2i for single-result lookup</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Justin+Karneges%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Justin Karneges</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20111108" rel="nofollow">Tue, 08 Nov 2011 11:15:57 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi Nate,

On Monday, November 07, 2011 08:31:15 PM you wrote:
&gt; I appreciate you sharing your design. But I can never understand why people
&gt; go to such great lengths to add transactions to an eventually-consistent
&gt; db.</pre><pre>

I'd agree that in many cases user registration doesn't need to be 100% 
available.  But I thought I'd give it a shot, just for the challenge.  I only 
recently got into Riak and am now quite fascinated with issues of eventual-
consistency.

&gt; You could possibly solve the same problem by using memcached or Redis.
&gt; Example:
&gt; 
&gt; 1. Look up the user in Riak. If that lookup succeeds, abort.
&gt; 2. Store a copy of the new username via memcached add() with a generous
&gt; expiry interval. 3. If it exists already (atomic in memcached), you lost a
&gt; race with another user and error out. If not, also store the username in
&gt; Riak. 4. The memcached key will expire at some point after Riak becomes
&gt; consistent, keeping your memory use reasonable.
&gt; 
&gt; Is user creation such a high percentage of your transaction volume that you
&gt; have to build something almost as complicated as a VCS on top of it in
&gt; order to scale? For robustness, isn't it simpler to just disable user
&gt; creation if your memcached single-point-of-failure is down and you weren't
&gt; able to failover to the spare?

Yes, that could work.  There may be some edge cases to work out there 
regarding memcached failover (lost keys, spare doesn't have same keys), but 
you make a good point that it can be simpler to not try to do everything 
within Riak.

Justin

_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg05479.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#05480">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#05480">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg05472.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg05462.html">2i for single-result lookup</a></span> <span class="sender italic">Greg Pascale</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg05463.html">Re: 2i for single-result lookup</a></span> <span class="sender italic">Nate Lawson</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg05464.html">Re: 2i for single-result lookup</a></span> <span class="sender italic">Greg Pascale</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg05465.html">Re: 2i for single-result lookup</a></span> <span class="sender italic">Nate Lawson</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg05466.html">Re: 2i for single-result lookup</a></span> <span class="sender italic">Justin Karneges</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg05467.html">Re: 2i for single-result lo...</a></span> <span class="sender italic">Nate Lawson</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg05468.html">Re: 2i for single-resul...</a></span> <span class="sender italic">Antonio Rohman Fernandez</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg05479.html">Re: 2i for single-r...</a></span> <span class="sender italic">Greg Pascale</span></li>
</ul></li>
<li class="icons-email tSliceCur"><span class="subject">Re: 2i for single-resul...</span> <span class="sender italic">Justin Karneges</span></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg05472.html">Re: 2i for single-result lookup</a></span> <span class="sender italic">Kresten Krab Thorup</span></li>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: 2i for single-result lookup">
<input type="hidden" name="msgid" value="201111081115.50899.justin@affinix.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg05480.html">
<input type="submit" value=" Justin Karneges ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+2i+for+single%5C-result+lookup%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg05479.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg05472.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">201111081115.50899.justin@affinix.com</li>
</ul>
</div>
</body>
</html>
