<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Deleting Keys vs. Specifying a Null Value for a Key</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#03808" id="c">
<link rel="index" href="maillist.html#03808" id="i">
<link rel="prev" href="msg03806.html" id="p">
<link rel="next" href="msg03810.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg03808.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Deleting+Keys+vs.+Specifying+a+Null+Value+for+a+Key%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Deleting Keys vs. Specifying a Null Value for a Key</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Jeremiah+Peschka%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Jeremiah Peschka</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20110623" rel="nofollow">Thu, 23 Jun 2011 09:16:16 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>NULLability in data storage is different than NULLability in program. In the 
relational database world, NULL is used to signify an unknown - the value could 
be anything. If you have a record that only has a key (Primary Key for those 
playing along in SQL-land), and no value, then you can't do much with it so 
Riak wouldn't want to track it. You probably wouldn't want to store it in the 
RDBMS either.</pre><pre>

If you do want to store Riak's equivalent of NULL, you could store an empty 
JSON object (or appropriately mucked object for your serialization mechanism). 
The record would still be present in Riak, but it wouldn't show up for many 
queries. 

The bigger question, though, is &quot;Why do I want to store a completely empty 
record?&quot;

Looking at your question, you may want to devise a &quot;This is not a value&quot; value. 
This is frequently done in data warehousing and other delightful places so that 
there is confusion about what a value means.

Example: you're tracking the sales of goods in a store. Eventually you decide 
you want to see how goods are performing based on shelf location. When you add 
that data into your database, you can store a NULL, but that means you don't 
know where the goods were at the time. Instead you add a lookup for &quot;Location 
not tracked&quot; and then store the location for the SKU after you go live with the 
feature.

To be fair, I could go either way with the situation you mentioned. I'd 
probably store no data unless there is customization and just provide sane 
defaults in the app code to cope with an absence of data.

TL;DR - magic numbers suck and NULLability is a holy war.

--- 
Jeremiah Peschka
Founder, Brent Ozar PLF, LLC


On Thursday, June 23, 2011 at 9:00 AM, Keith Bennett wrote:

&gt; Speaking of deleting keys, I have a question. It may be naive, as I'm a 
&gt; developer, but not very specialized in data storage issues, especially 
&gt; key/value stores.
&gt; 
&gt; I don't think I've brought this up on this list, but if I have, I apologize, 
&gt; and feel free to ignore this message. (I couldn't find it in the message 
&gt; store, but know I've spoken with some folks about it.)
&gt; 
&gt; If specifying a null value for a given key removes that key from riak, then 
&gt; there is no way to differentiate between an explicit specification of null, 
&gt; and the absence of a value specification. The two can represent two different 
&gt; cases.
&gt; 
&gt; For example, the code might assume a default value, unless overridden, and 
&gt; null might be one of the values that could be used to override it. An example 
&gt; might be that the value represents the name of a class to instantiate to 
&gt; perform a given operation, and a null value would signify that no operation 
&gt; was wanted.
&gt; 
&gt; Would this be some kind of violation of some important data storage 
&gt; principle? Or do others not see this as a useful distinction?
&gt; 
&gt; Thanks,
&gt; Keith
&gt; 
&gt; 
&gt; 
&gt; 
&gt; On Jun 23, 2011, at 10:57 AM, Andrew Thompson wrote:
&gt; 
&gt; &gt; On Thu, Jun 23, 2011 at 09:59:38AM +0200, Runar Jordahl wrote:
&gt; &gt; &gt; As this discussion shows, deleting objects in an eventual consistency
&gt; &gt; &gt; database is complicated. The concept of multiple APIs to do a delete,
&gt; &gt; &gt; and the possibility of having objects reappear, can scare new
&gt; &gt; &gt; customers away from Riak.
&gt; &gt; &gt; 
&gt; &gt; &gt; I understand delete is complicated, but Basho should make it as simple
&gt; &gt; &gt; as possible to understand. They should provide a single, simple,
&gt; &gt; &gt; well-documented delete API, and document how delete happens.
&gt; &gt; &gt; 
&gt; &gt; &gt; I find it unnatural to use the PUT operation to do a delete. I
&gt; &gt; &gt; understand the API compatibility issues, but for new users this can be
&gt; &gt; &gt; quite confusing: ?So you are telling me there are two APIs I can use
&gt; &gt; &gt; to delete an object? Why!?? In my mind, changing the DELETE API would
&gt; &gt; &gt; be far better. After all, Riak is still not legacy software.
&gt; &gt; &gt; 
&gt; &gt; &gt; A wiki page describing how delete is done in a Riak system should be
&gt; &gt; &gt; created. The wiki page should describe how delete happens internally:
&gt; &gt; &gt; Which API to use (PUT or DELETE), tombstone concepts, etc. It should
&gt; &gt; &gt; describe current bugs, and future plans. In addition the page should
&gt; &gt; &gt; describe how the client app should handle deletes: Can you configure
&gt; &gt; &gt; tombstone lifetime? Pros/cons of using own tombstones, when can
&gt; &gt; &gt; deleted objects reappear, and how to detect and handle that.
&gt; &gt; 
&gt; &gt; I agree that we should do a writeup on deletes, past present and future.
&gt; &gt; I'll try to put something together in the next few weeks.
&gt; &gt; 
&gt; &gt; Andrew
&gt; &gt; 
&gt; &gt; _______________________________________________
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com (<a  rel="nofollow" href="mailto:riak-users@lists.basho.com">mailto:riak-users@lists.basho.com</a>)
&gt; &gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt; 
&gt; 
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com (<a  rel="nofollow" href="mailto:riak-users@lists.basho.com">mailto:riak-users@lists.basho.com</a>)
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>

</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg03806.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#03808">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#03808">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg03810.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg03715.html">Re: Problem with deleting keys</a></span> <span class="sender italic">David Leimbach</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg03727.html">Re: Problem with deleting keys</a></span> <span class="sender italic">Andrew Thompson</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg03729.html">Re: Problem with deleting keys</a></span> <span class="sender italic">Greg Nelson</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg03732.html">Re: Problem with deleting keys</a></span> <span class="sender italic">Nico Meyer</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg03735.html">Re: Problem with deleting keys</a></span> <span class="sender italic">Alexander Sicular</span></li>
</ul></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg03733.html">Re: Problem with deleting keys</a></span> <span class="sender italic">David Leimbach</span></li>
</ul></li>
</ul></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg03784.html">Re: Problem with deleting keys</a></span> <span class="sender italic">David Mitchell</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg03796.html">Re: Problem with deleting keys</a></span> <span class="sender italic">Runar Jordahl</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg03799.html">Re: Problem with deleting keys</a></span> <span class="sender italic">Andrew Thompson</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg03806.html">Deleting Keys vs. Specifying a Null Value f...</a></span> <span class="sender italic">Keith Bennett</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Deleting Keys vs. Specifying a Null...</span> <span class="sender italic">Jeremiah Peschka</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg03810.html">Re: Deleting Keys vs. Specifying a...</a></span> <span class="sender italic">Les Mikesell</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg03811.html">Re: Deleting Keys vs. Specifyi...</a></span> <span class="sender italic">Greg Nelson</span></li>
<li class="icons-email"><span class="subject"><a href="msg03819.html">Re: Deleting Keys vs. Specifyi...</a></span> <span class="sender italic">Nico Meyer</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Deleting Keys vs. Specifying a Null Value for a Key">
<input type="hidden" name="msgid" value="B894952E0D084AAF8FB0112CF576D81F@gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg03808.html">
<input type="submit" value=" Jeremiah Peschka ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Deleting+Keys+vs.+Specifying+a+Null+Value+for+a+Key%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg03806.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg03810.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">B894952E0D084AAF8FB0112CF576D81F@gmail.com</li>
</ul>
</div>
</body>
</html>
