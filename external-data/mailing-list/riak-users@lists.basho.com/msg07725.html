<!DOCTYPE html>
<html lang="en">
<head>
<title>Riak Security Alert</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#07725" id="c">
<link rel="index" href="maillist.html#07725" id="i">
<link rel="prev" href="msg07713.html" id="p">
<link rel="next" href="msg07726.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg07725.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Riak+Security+Alert%22&amp;o=newest" rel="nofollow"><span itemprop="name">Riak Security Alert</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Mark+Phillips%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Mark Phillips</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20120620" rel="nofollow">Wed, 20 Jun 2012 10:17:19 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>*Hi All, *
*
*
*Ben Murphy has notified us of a vulnerability[1] that can be executed
against Riak's HTTP API. Basho immediately assigned Engineers to work with
the reporter to both verify the vulnerability and to identify a patch.  We
have confirmed that this vulnerability affects all versions of Riak.</pre><pre>

We are releasing both a security patch (for Riak versions 1.0.3 and 1.1.2)
and a full 1.1.4 security release.  We advise all users of Riak to either
apply the appropriate patch or upgrade to 1.1.4.  If you are running a
version of Riak other than 1.0.3 or 1.1.2, it will be necessary to upgrade
to 1.1.4.

Vulnerability Details

The attack is launched through a malicious website. The attack against this
vulnerability requires that the attacker have knowledge of both the IP
address (or hostname) and the port that the target Riak node is running on.
 The attack requires that the machine which visits the malicious website
has access to the Riak node, either locally or via a networked connection.
The most obvious targets for this attack would be developer installs
running default configurations.  It does not require that the target Riak
node is exposed to the Internet.

This vulnerability can result in keys being overwritten, data being
uploaded to the target's Riak node, or other malicious behavior.

Production installations that are behind a firewall and only accessible via
your application are not vulnerable.

The Common Vulnerabilities and Exposures (CVE) project has assigned the
name CVE-2012-3586 to this issue. This is a candidate for inclusion in the
CVE list (<a  rel="nofollow" href="http://cve.mitre.org">http://cve.mitre.org</a>), which standardizes names for security
problems.

Additional information about the exploit will be released in the next few
weeks.

Mitigation

There are three ways to secure your Riak node from this exploit.

1. Upgrade to Riak 1.1.4, a security release
2. Apply a patch to a source build of Riak 1.0.3 or 1.1.2
3. Do not use a web browser on machines with network access to a Riak
installation

How to Upgrade to 1.1.4

Riak version 1.1.4 packages and source are available here:

<a  rel="nofollow" href="http://basho.com/resources/downloads/">http://basho.com/resources/downloads/</a>

For non-development installs we recommend that you perform a rolling
upgrade.  This process is documented here:

<a  rel="nofollow" href="https://help.basho.com/entries/21397673-rolling-upgrades">https://help.basho.com/entries/21397673-rolling-upgrades</a>

For development installs, please see our regular installation guides:

<a  rel="nofollow" href="https://help.basho.com/entries/21460643-installation">https://help.basho.com/entries/21460643-installation</a>

How to Apply the Security Patch

This patch is only for Riak versions 1.0.3 and 1.1.2.  For users of all
other version, please see the directions on how to upgrade to 1.1.4.

First, download the patch to the riak/deps/riak_kv directory:

<a  rel="nofollow" href="http://s3.amazonaws.com/downloads.basho.com/riak/1.1/1.1.4/164-fix.patch">http://s3.amazonaws.com/downloads.basho.com/riak/1.1/1.1.4/164-fix.patch</a>

Second, in the riak/deps/riak_kv directory:

patch -p1 &lt; fix-164.patch

Third, in the top-level riak directory:

./rebar compile

Client Library Compatibility

Users of the official Python client [2] will need to upgrade to version
1.4.1 in order to continue using MapReduce over HTTP. (There will be a
separate email about this momentarily.)

**
*
*Let us know if you have any questions. *
*
Mark and the Basho Team

[1] <a  rel="nofollow" href="https://github.com/basho/riak/issues/164">https://github.com/basho/riak/issues/164</a>
[2] <a  rel="nofollow" href="https://github.com/basho/riak-python-client*">https://github.com/basho/riak-python-client*</a>
*
*
*
*
*
*
*
*
*
*
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg07713.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#07725">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#07725">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg07726.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">

</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Riak Security Alert">
<input type="hidden" name="msgid" value="CAE8zJQF0Ky2qtt76HJm=ofqmPfA0Px4-s_GG1122E7ghM==9Rg@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg07725.html">
<input type="submit" value=" Mark Phillips ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Riak+Security+Alert%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg07713.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg07726.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CAE8zJQF0Ky2qtt76HJm=ofqmPfA0Px4-s_GG1122E7ghM==9Rg@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
