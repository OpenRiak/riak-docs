<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Merge problems in multi-backend with bitcask...</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#08244" id="c">
<link rel="index" href="maillist.html#08244" id="i">
<link rel="prev" href="msg08039.html" id="p">
<link rel="next" href="msg08041.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg08244.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Merge+problems+in+multi%5C-backend+with+bitcask...%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Merge problems in multi-backend with bitcask...</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Anthony+Molinaro%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Anthony Molinaro</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20120809" rel="nofollow">Thu, 09 Aug 2012 10:18:21 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi Denis,

   I believe we ran into the same problem, and worked with Basho to get
it fixed in the 1.2 release.  We haven't yet upgraded to 1.2, but plan
to do so in the next few days.  You might try it to see if it doesn't
solve your problem.  We were told this commit should fix it</pre><pre>

<a  rel="nofollow" href="https://github.com/basho/riak_kv/commit/169df507e73110cf61df71f21bd6b378239628c1">https://github.com/basho/riak_kv/commit/169df507e73110cf61df71f21bd6b378239628c1</a>

HTH,

-Anthony

On Tue, Jul 24, 2012 at 12:32:17PM +0400, Denis Barishev wrote:
&gt; Hello!
&gt; 
&gt; We use multibackend where each backend is a bitcask backend. A few
&gt; days ago riak began to merge and it seems that it got into eternal
&gt; cycle. Cuz it's trying to merge unreasonably long:
&gt; 
&gt; look
&gt;  1.2G    /var/lib/riak/kv_bitcask/exp_2month
&gt;  69M    /var/lib/riak/kv_bitcask/exp_1day
&gt; 
&gt; And these to backends are being merged already for 1 day!!! It seems
&gt; that riak stuck. What can we do?
&gt; 
&gt; (riak@192.168.152.86)1&gt; 08:20:17.554 [info] Merged 
&gt; [&quot;/var/lib/riak/kv_bitcask/exp_2month/519518160144969396705216092879616229643319771136&quot;,[],[&quot;/var/lib/riak/kv_bitcask/exp_2month/519518160144969396705216092879616229643319771136/1341241781.bitcask.data&quot;]]
&gt; in 1.584775 seconds.
&gt; 
&gt; (riak@192.168.152.86)1&gt; 08:20:18.823 [info] Merged 
&gt; [&quot;/var/lib/riak/kv_bitcask/exp_1day/890602560248518965780370444936484965102833893376&quot;,[],[&quot;/var/lib/riak/kv_bitcask/exp_1day/890602560248518965780370444936484965102833893376/1341246223.bitcask.data&quot;]]
&gt; in 0.063074 seconds.
&gt; 
&gt; (riak@192.168.152.86)1&gt; 08:20:19.857 [info] Merged 
&gt; [&quot;/var/lib/riak/kv_bitcask/exp_2month/890602560248518965780370444936484965102833893376&quot;,[],[&quot;/var/lib/riak/kv_bitcask/exp_2month/890602560248518965780370444936484965102833893376/1341241804.bitcask.data&quot;]]
&gt; in 0.994357 seconds.
&gt; 
&gt; (riak@192.168.152.86)1&gt; 08:20:20.298 [info] Merged 
&gt; [&quot;/var/lib/riak/kv_bitcask/exp_1day/176978713895539025251227460211737396911460581376&quot;,[],[&quot;/var/lib/riak/kv_bitcask/exp_1day/176978713895539025251227460211737396911460581376/1341246181.bitcask.data&quot;]]
&gt; in 0.057028 seconds.
&gt; 
&gt; (riak@192.168.152.86)1&gt; 08:20:22.106 [info] Merged 
&gt; [&quot;/var/lib/riak/kv_bitcask/exp_2month/176978713895539025251227460211737396911460581376&quot;,[],[&quot;/var/lib/riak/kv_bitcask/exp_2month/176978713895539025251227460211737396911460581376/1341241773.bitcask.data&quot;]]
&gt; in 1.768717 seconds.
&gt; 
&gt; (riak@192.168.152.86)1&gt; 08:20:23.108 [info] Merged 
&gt; [&quot;/var/lib/riak/kv_bitcask/exp_1day/1233142006497949337234359077604363797834693083136&quot;,[],[&quot;/var/lib/riak/kv_bitcask/exp_1day/1233142006497949337234359077604363797834693083136/1341246813.bitcask.data&quot;]]
&gt; in 0.06311 seconds.
&gt; 
&gt; 
&gt; Regards,
&gt; Denis
&gt; 
&gt; 
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>

-- 
------------------------------------------------------------------------
Anthony Molinaro                           &lt;antho...@alumni.caltech.edu&gt;

_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg08039.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#08244">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#08244">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg08041.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg08039.html">Merge problems in multi-backend with bitcask...</a></span> <span class="sender italic">Denis Barishev</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Merge problems in multi-backend with bitcask...</span> <span class="sender italic">Anthony Molinaro</span></li>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Merge problems in multi-backend with bitcask...">
<input type="hidden" name="msgid" value="20120809171636.GA34534@alumni.caltech.edu">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg08244.html">
<input type="submit" value=" Anthony Molinaro ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Merge+problems+in+multi%5C-backend+with+bitcask...%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg08039.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg08041.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">20120809171636.GA34534@alumni.caltech.edu</li>
</ul>
</div>
</body>
</html>
