<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Riak Memory Usage Constantly Growing</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#08788" id="c">
<link rel="index" href="maillist.html#08788" id="i">
<link rel="prev" href="msg08785.html" id="p">
<link rel="next" href="msg08789.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg08788.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Riak+Memory+Usage+Constantly+Growing%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Riak Memory Usage Constantly Growing</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22John+E.+Vincent%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">John E. Vincent</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20121002" rel="nofollow">Tue, 02 Oct 2012 08:20:04 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>On Tue, Oct 2, 2012 at 7:55 AM, Kelly McLaughlin &lt;ke...@basho.com&gt; wrote:
&gt; John and Shane,
&gt;
&gt; I have been looking into some memory issues lately and I would be very 
&gt; interested in more
&gt; information about your particular problems. If either of you are able to get 
&gt; some output
&gt; from etop using the -sort memory option when you are having elevated memory 
&gt; usage it
&gt; would be very helpful to see. I know that sometimes you get the 
&gt; connection_lost message
&gt; when trying to use etop, but I have found that sometimes if you keep trying 
&gt; it may succeed
&gt; after a few attempts.
&gt;
&gt; Are either of you using MapReduce? I see that John is using 2I. Shane, do you 
&gt; also use 2I?
&gt; Finally, do you notice a lot of messages to the console or console log that 
&gt; have the either the
&gt; phrase 'monitor large_heap' or 'monitor long_gc'?
&gt;
&gt; Kelly
&gt;</pre><pre>

Kelly,

As it stands now, we're not seeing the problem anymore. If it crops up
again, I'll be ready to go. To answer your original question r.e. M/R,
internally we consider it a bug if our in-house ODM generates a MR
call but that's the fall back path it takes. And right now we ARE
generating considerable MR volume. When we upgraded to 1.2, we didn't
change any application code. We still get the following in the logs (I
haven't had the time to open a ticket on it) pretty frequently:

2012-10-02 15:12:37.190 [error]
&lt;0.344.0&gt;@riak_pipe_vnode:new_worker:766 Pipe worker startup
failed:fitting was gone before startup
2012-10-02 15:12:37.190 [error]
&lt;0.356.0&gt;@riak_pipe_vnode:new_worker:766 Pipe worker startup
failed:fitting was gone before startup
2012-10-02 15:12:37.191 [error]
&lt;0.354.0&gt;@riak_pipe_vnode:new_worker:766 Pipe worker startup
failed:fitting was gone before startup
2012-10-02 15:12:37.236 [error]
&lt;0.344.0&gt;@riak_pipe_vnode:new_worker:766 Pipe worker startup
failed:fitting was gone before startup
2012-10-02 15:13:13.718 [error]
&lt;0.340.0&gt;@riak_pipe_vnode:new_worker:766 Pipe worker startup
failed:fitting was gone before startup
2012-10-02 15:13:13.719 [error]
&lt;0.332.0&gt;@riak_pipe_vnode:new_worker:766 Pipe worker startup
failed:fitting was gone before startup

And that hasn't changed with the upgrade. There's other debugging
information as well that I'll need to do via ticket. I'd love to have
something to post back to the group though afterwards.

&lt;snip&gt;

_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg08785.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#08788">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#08788">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg08789.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg08783.html">Riak Memory Usage Constantly Growing</a></span> <span class="sender italic">Shane McEwan</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg08784.html">Re: Riak Memory Usage Constantly Growing</a></span> <span class="sender italic">John E. Vincent</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg08785.html">Re: Riak Memory Usage Constantly Growing</a></span> <span class="sender italic">Kelly McLaughlin</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Riak Memory Usage Constantly Growing</span> <span class="sender italic">John E. Vincent</span></li>
<li class="icons-email"><span class="subject"><a href="msg08789.html">Re: Riak Memory Usage Constantly Growing</a></span> <span class="sender italic">John E. Vincent</span></li>
<li class="icons-email"><span class="subject"><a href="msg08790.html">Re: Riak Memory Usage Constantly Growing</a></span> <span class="sender italic">Shane McEwan</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg08791.html">Re: Riak Memory Usage Constantly Growing</a></span> <span class="sender italic">John E. Vincent</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Riak Memory Usage Constantly Growing">
<input type="hidden" name="msgid" value="CAPy8ofKdqXfMBo+Lr-sdKYHMPgEaB7epw1xL4QbFsbR1EZPrgA@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg08788.html">
<input type="submit" value=" John E. Vincent ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Riak+Memory+Usage+Constantly+Growing%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg08785.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg08789.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CAPy8ofKdqXfMBo+Lr-sdKYHMPgEaB7epw1xL4QbFsbR1EZPrgA@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
