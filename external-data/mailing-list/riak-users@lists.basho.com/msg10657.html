<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Warning "Can not start proc_lib:init_p"</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#10657" id="c">
<link rel="index" href="maillist.html#10657" id="i">
<link rel="prev" href="msg10655.html" id="p">
<link rel="next" href="msg10658.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg10657.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Warning+%5C%22Can+not+start+proc_lib%5C%3Ainit_p%5C%22%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Warning "Can not start proc_lib:init_p"</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Evan+Vigil%5C-McClanahan%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Evan Vigil-McClanahan</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20130403" rel="nofollow">Wed, 03 Apr 2013 08:17:26 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Ingo,

riak-admin status | grep sys_process_count</pre><pre>

will tell you how many processes are running.  The default process
limit on erlang is a little low, and we'd suggest raising in
(especially with your extra-large ring_size).   Erlang processes are
cheap, so 65535 or even double that will be fine.

Busy dist ports are still worrying.  Are you monitoring object sizes?
Are there any spikes there associated with performance drops?

On Wed, Apr 3, 2013 at 8:03 AM, Ingo Rockel
&lt;ingo.roc...@bluelionmobile.com&gt; wrote:
&gt; Hi Evan,
&gt;
&gt; I set swt very_low and zdbbl to 64MB, setting this params helped reducing
&gt; the busy_dist_port and Monitor got {suppressed,... Messages a lot. But when
&gt; the performance of the cluster suddenly drops we still see these messages.
&gt;
&gt; The cluster was updated to 1.3 in the meantime.
&gt;
&gt; The eleveldb section:
&gt;
&gt;  %% eLevelDB Config
&gt;  {eleveldb, [
&gt;              {data_root, &quot;/var/lib/riak/leveldb&quot;},
&gt;              {cache_size, 33554432},
&gt;              {write_buffer_size_min, 67108864}, %% 64 MB in bytes
&gt;              {write_buffer_size_max, 134217728}, %% 128 MB in bytes
&gt;              {max_open_files, 4000}
&gt;             ]},
&gt;
&gt; the ring size is 1024 and the machines have 48GB of memory. Concerning the
&gt; params from vm.args:
&gt;
&gt; -env ERL_MAX_PORTS 4096
&gt; -env ERL_MAX_ETS_TABLES 8192
&gt;
&gt; +P isn't set
&gt;
&gt; Ingo
&gt;
&gt; Am 03.04.2013 16:53, schrieb Evan Vigil-McClanahan:
&gt;
&gt;&gt; For your prior mail, I thought that someone had answered.  Our initial
&gt;&gt; suggestion was to add +swt very_low to your vm.args, as well as
&gt;&gt; setting the +zdbbl setting that Jon recommended in the list post you
&gt;&gt; pointed to.  If those help, moving to 1.3 should help more.
&gt;&gt;
&gt;&gt; Other limits in vm.args that can cause problems are +P, ERL_MAX_PORTS,
&gt;&gt; and  ERL_MAX_ETS_TABLES.  Are any of these set?  If so, to what?
&gt;&gt;
&gt;&gt; Can you also pate the eleveldb section of your app.config?
&gt;&gt;
&gt;&gt; On Wed, Apr 3, 2013 at 7:41 AM, Ingo Rockel
&gt;&gt; &lt;ingo.roc...@bluelionmobile.com&gt; wrote:
&gt;&gt;&gt;
&gt;&gt;&gt; Hi Evan,
&gt;&gt;&gt;
&gt;&gt;&gt; I'm not sure, I find a lot of these:
&gt;&gt;&gt;
&gt;&gt;&gt; 2013-03-30 23:27:52.992 [error]
&gt;&gt;&gt; &lt;0.8036.323&gt;@riak_api_pb_server:handle_info:141 Unrecognized message
&gt;&gt;&gt; {22243034,{error,timeout}}
&gt;&gt;&gt;
&gt;&gt;&gt; and some of these at the same time one of the kind below gets logged
&gt;&gt;&gt; (although the one has a different time stamp):
&gt;&gt;&gt;
&gt;&gt;&gt; 2013-03-30 23:27:53.056 [error] &lt;0.9457.323&gt;@riak_kv_console:status:178
&gt;&gt;&gt; Status failed error:terminated
&gt;&gt;&gt;
&gt;&gt;&gt; Ingo
&gt;&gt;&gt;
&gt;&gt;&gt; Am 03.04.2013 16:24, schrieb Evan Vigil-McClanahan:
&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Resending to the list:
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Ingo,
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; That is an indication that the protocol buffers server can't spawn a
&gt;&gt;&gt;&gt; put fsm, which means that a put cannot be done for some reason or
&gt;&gt;&gt;&gt; another.  Are there any other messages that appear around this time
&gt;&gt;&gt;&gt; that might indicate why?
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; On Wed, Apr 3, 2013 at 12:09 AM, Ingo Rockel
&gt;&gt;&gt;&gt; &lt;ingo.roc...@bluelionmobile.com&gt; wrote:
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Hi,
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; we have some performance issues with our riak cluster, from time to
&gt;&gt;&gt;&gt;&gt; time
&gt;&gt;&gt;&gt;&gt; we
&gt;&gt;&gt;&gt;&gt; have a sudden drop in performance (already asked the list about this,
&gt;&gt;&gt;&gt;&gt; no-one
&gt;&gt;&gt;&gt;&gt; had an idea though). Although not the same time but on the problematic
&gt;&gt;&gt;&gt;&gt; nodes
&gt;&gt;&gt;&gt;&gt; we have a lot of these messages from time to time:
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; 2013-04-02 21:41:11.173 [warning] &lt;0.25646.475&gt; ** Can not start
&gt;&gt;&gt;&gt;&gt; proc_lib:init_p
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; ,[&lt;0.14556.474&gt;,[&lt;0.9519.474&gt;,riak_api_pb_sup,riak_api_sup,&lt;0.1291.0&gt;],riak_kv_p
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; ut_fsm,start_link,[{raw,65032165,&lt;0.9519.474&gt;},{r_object,&lt;&lt;109&gt;&gt;,&lt;&lt;77,115,124,49
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; ,53,55,57,56,57,56,50,124,49,51,54,52,57,51,49,54,49,49,53,49,50,52,53,54&gt;&gt;,[{r_
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; content,{dict,0,16,16,8,80,48,{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},&lt;&lt;&gt;&gt;}],[],{dict,2,16,16,8,8
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; 0,48,{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},{{[],[],[],[],[],[],[],[]
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; ,[],[],[[&lt;&lt;99,111,110,116,101,110,116,45,116,121,112,101&gt;&gt;,97,112,112,108,105,99
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; ,97,116,105,111,110,47,106,115,111,110]],[],[],[],[],[[&lt;&lt;99,104,97,114,115,101,1
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; 16&gt;&gt;,85,84,70,45,56]]}}},&lt;&lt;123,34,115,116,34,58,50,44,34,116,34,58,49,44,34,99,3
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; 4,58,34,66,117,116,32,115,104,101,32,105,115,32,103,111,110,101,44,32,110,32,101
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; ,118,101,110,32,116,104,111,117,103,104,32,105,109,32,110,111,116,32,105,110,32,
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; 117,114,32,99,105,116,121,32,105,32,108,111,118,101,32,117,32,110,100,32,105,32,
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; 109,101,97,110,32,105,116,32,58,39,40,34,44,34,114,34,58,49,52,51,52,54,52,51,57
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; ,44,34,115,34,58,49,53,55,57,56,57,56,50,44,34,99,116,34,58,49,51,54,52,57,51,49
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; ,54,49,49,53,49,50,44,34,97,110,34,58,102,97,108,115,101,44,34,115,107,34,58,49,
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; 51,54,52,57,51,49,54,49,49,53,49,50,52,53,54,44,34,115,117,34,58,48,125&gt;&gt;},[{tim
&gt;&gt;&gt;&gt;&gt; eout,60000}]]] on 'riak@172.22.3.12' **
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Can anyone explain to me what these messages mean and if I need to do
&gt;&gt;&gt;&gt;&gt; something about it? Could these messages be in any way related to the
&gt;&gt;&gt;&gt;&gt; performance issues?
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Ingo
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; _______________________________________________
&gt;&gt;&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt;&gt;&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; --
&gt;&gt;&gt; Software Architect
&gt;&gt;&gt;
&gt;&gt;&gt; Blue Lion mobile GmbH
&gt;&gt;&gt; Tel. +49 (0) 221 788 797 14
&gt;&gt;&gt; Fax. +49 (0) 221 788 797 19
&gt;&gt;&gt; Mob. +49 (0) 176 24 87 30 89
&gt;&gt;&gt;
&gt;&gt;&gt; ingo.roc...@bluelionmobile.com
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt; qeep: Hefferwolf
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; www.bluelionmobile.com
&gt;&gt;&gt; www.qeep.net
&gt;
&gt;
&gt;
&gt; --
&gt; Software Architect
&gt;
&gt; Blue Lion mobile GmbH
&gt; Tel. +49 (0) 221 788 797 14
&gt; Fax. +49 (0) 221 788 797 19
&gt; Mob. +49 (0) 176 24 87 30 89
&gt;
&gt; ingo.roc...@bluelionmobile.com
&gt;&gt;&gt;&gt; qeep: Hefferwolf
&gt;
&gt; www.bluelionmobile.com
&gt; www.qeep.net

_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg10655.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#10657">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#10657">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg10658.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg10645.html">Warning &quot;Can not start proc_lib:init_p&quot;</a></span> <span class="sender italic">Ingo Rockel</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg10650.html">Re: Warning &quot;Can not start proc_lib:init_p...</a></span> <span class="sender italic">Evan Vigil-McClanahan</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg10652.html">Re: Warning &quot;Can not start proc_lib:in...</a></span> <span class="sender italic">Ingo Rockel</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg10653.html">Re: Warning &quot;Can not start proc_li...</a></span> <span class="sender italic">Evan Vigil-McClanahan</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg10654.html">Re: Warning &quot;Can not start pro...</a></span> <span class="sender italic">Ingo Rockel</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg10655.html">Re: Warning &quot;Can not star...</a></span> <span class="sender italic">Ingo Rockel</span></li>
<li class="icons-email tSliceCur"><span class="subject">Re: Warning &quot;Can not star...</span> <span class="sender italic">Evan Vigil-McClanahan</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg10658.html">Re: Warning &quot;Can not ...</a></span> <span class="sender italic">Ingo Rockel</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg10659.html">Re: Warning &quot;Can ...</a></span> <span class="sender italic">Evan Vigil-McClanahan</span></li>
<li class="icons-email"><span class="subject"><a href="msg10660.html">Re: Warning &quot;Can ...</a></span> <span class="sender italic">Ingo Rockel</span></li>
<li class="icons-email"><span class="subject"><a href="msg10661.html">Re: Warning &quot;Can ...</a></span> <span class="sender italic">Evan Vigil-McClanahan</span></li>
<li class="icons-email"><span class="subject"><a href="msg10662.html">Re: Warning &quot;Can ...</a></span> <span class="sender italic">Evan Vigil-McClanahan</span></li>
<li class="icons-email"><span class="subject"><a href="msg10674.html">Re: Warning &quot;Can ...</a></span> <span class="sender italic">Ingo Rockel</span></li>
<li class="icons-email"><span class="subject"><a href="msg10676.html">Re: Warning &quot;Can ...</a></span> <span class="sender italic">Evan Vigil-McClanahan</span></li>
<li class="icons-email"><span class="subject"><a href="msg10677.html">Re: Warning &quot;Can ...</a></span> <span class="sender italic">Ingo Rockel</span></li>
<li class="icons-email"><span class="subject"><a href="msg10678.html">Re: Warning &quot;Can ...</a></span> <span class="sender italic">Ingo Rockel</span></li>
<li class="icons-email"><span class="subject"><a href="msg10682.html">Re: Warning &quot;Can ...</a></span> <span class="sender italic">Ingo Rockel</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Warning &quot;Can not start proc_lib:init_p&quot;">
<input type="hidden" name="msgid" value="CAN9Z=zhmZJf_fAWYrw9tEvEybD_4kC-A76idSfi4waQqefP4+Q@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg10657.html">
<input type="submit" value=" Evan Vigil-McClanahan ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Warning+%5C%22Can+not+start+proc_lib%5C%3Ainit_p%5C%22%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg10655.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg10658.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CAN9Z=zhmZJf_fAWYrw9tEvEybD_4kC-A76idSfi4waQqefP4+Q@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
