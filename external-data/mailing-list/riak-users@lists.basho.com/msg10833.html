<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Measuring Riak disk usage</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#10833" id="c">
<link rel="index" href="maillist.html#10833" id="i">
<link rel="prev" href="msg10831.html" id="p">
<link rel="next" href="msg10822.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg10833.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Measuring+Riak+disk+usage%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Measuring Riak disk usage</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Matthew+Von%5C-Maszewski%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Matthew Von-Maszewski</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20130410" rel="nofollow">Wed, 10 Apr 2013 11:46:55 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Paul,

There is a &quot;tool&quot; that will dump statistics for a given .sst file, including 
compression ratio.  It is really designed for in-house usage, so it can be a 
pain to build (just being honest, and setting expectations).</pre><pre>

1. you have download and install libsnappy.  Just having it embedded within 
Riak is not enough.  It needs to be installed on your system like other 
libraries.

2. you have go into the leveldb source directory (maybe download that too) and 
execute &quot;make tools&quot;

You are looking for the &quot;sst_stat&quot; program.  You would execute something like 
this using your local paths:

./sst_stat /var/lib/riak/leveldb/*/sst_*/*.sst

The output can be loaded into a spreadsheet for analysis.

This is the only think I know to offer for your question.  Maybe others better 
alternatives.

Matthew



On Apr 10, 2013, at 2:25 PM, Paul Wagner &lt;p...@luminoso.com&gt; wrote:

&gt; So as far as profiling disk usage of certain newly created objects for future 
&gt; planning is there a specific query that might return recently created objects 
&gt; and their size on disk?
&gt; 
&gt; Looking at the contents of .../riak/leveldb I can see each of the nodes and 
&gt; the sorted string tables. I can follow the performance [du- h] of the leveldb 
&gt; folder overall as data is added but the feature/command we're looking for is 
&gt; how we're going to profile now in order to plan for future disk usage.  
&gt; Something like <a  rel="nofollow" href="http://fqdn.hostname.com:8098/riak/usage">http://fqdn.hostname.com:8098/riak/usage</a> perhaps...
&gt; 
&gt; Is this something that limited to Riak Enterprise?
&gt; 
&gt; P
&gt; 
&gt; On Wed, Apr 10, 2013 at 2:17 PM, Ben McCann &lt;b...@benmccann.com&gt; wrote:
&gt; Cool. Thanks for the explanation.
&gt; 
&gt; 
&gt; On Wed, Apr 10, 2013 at 10:55 AM, Reid Draper &lt;reiddra...@gmail.com&gt; wrote:
&gt; 
&gt; On Apr 10, 2013, at 1:45 PM, Jeremiah Peschka &lt;jeremiah.pesc...@gmail.com&gt; 
&gt; wrote:
&gt; 
&gt;&gt; If you've installed from the apt/yum repository you've installed a single 
&gt;&gt; Riak node on your machine. Riak, though, is configured by default to write 
&gt;&gt; data to three servers. If some of those servers aren't available, Riak is 
&gt;&gt; going to write to a different server via hinted handoff[1]. Since you are 
&gt;&gt; only running one node, that single node receives all copies of your data in 
&gt;&gt; the hopes that some day the other Riak servers in the cluster will come back 
&gt;&gt; for their data.
&gt; 
&gt; This isn't quite true. A single node cluster is just going to simply store 
&gt; three copies on 3 of its local vnodes. No hinted handoff is involved. If you 
&gt; add nodes to the cluster, as Evan said, data will be distributed amongst them.
&gt; 
&gt; Ben,
&gt; 
&gt; tl;dr, Riak will store three copies on your data, by default, even if you're 
&gt; using a single server.
&gt; 
&gt; Reid
&gt; 
&gt; 
&gt; 
&gt; 
&gt; -- 
&gt; about.me/benmccann
&gt; 
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt; 
&gt; 
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>

</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg10831.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#10833">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#10833">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg10822.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg10818.html">Re: Measuring Riak disk usage</a></span> <span class="sender italic">Tom Santero</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg10819.html">Re: Measuring Riak disk usage</a></span> <span class="sender italic">Matthew Von-Maszewski</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg10821.html">Re: Measuring Riak disk usage</a></span> <span class="sender italic">Ben McCann</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg10824.html">Re: Measuring Riak disk usage</a></span> <span class="sender italic">Matthew Von-Maszewski</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg10826.html">Re: Measuring Riak disk usage</a></span> <span class="sender italic">Ben McCann</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg10827.html">Re: Measuring Riak disk usage</a></span> <span class="sender italic">Evan Vigil-McClanahan</span></li>
<li class="icons-email"><span class="subject"><a href="msg10828.html">Re: Measuring Riak disk usage</a></span> <span class="sender italic">Jeremiah Peschka</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg10829.html">Re: Measuring Riak disk us...</a></span> <span class="sender italic">Reid Draper</span></li>
<li class="icons-email"><span class="subject"><a href="msg10830.html">Re: Measuring Riak disk us...</a></span> <span class="sender italic">Ben McCann</span></li>
<li class="icons-email"><span class="subject"><a href="msg10831.html">Re: Measuring Riak disk us...</a></span> <span class="sender italic">Paul Wagner</span></li>
<li class="icons-email tSliceCur"><span class="subject">Re: Measuring Riak disk us...</span> <span class="sender italic">Matthew Von-Maszewski</span></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg10822.html">Measuring Riak disk usage</a></span> <span class="sender italic">chengas123</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg10825.html">Re: Measuring Riak disk usage</a></span> <span class="sender italic">Mark Phillips</span></li>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Measuring Riak disk usage">
<input type="hidden" name="msgid" value="7D38D855-D04B-4C92-BDA1-F0275482633D@basho.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg10833.html">
<input type="submit" value=" Matthew Von-Maszewski ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Measuring+Riak+disk+usage%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg10831.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg10822.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">7D38D855-D04B-4C92-BDA1-F0275482633D@basho.com</li>
</ul>
</div>
</body>
</html>
