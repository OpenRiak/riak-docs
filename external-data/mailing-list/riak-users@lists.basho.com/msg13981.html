<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Riak on VM's</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="thrd2.html#13981" id="c">
<link rel="index" href="maillist.html#13981" id="i">
<link rel="prev" href="msg13831.html" id="p">
<link rel="next" href="msg13837.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg13981.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Riak+on+VM%27s%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Riak on VM's</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Seth+Thomas%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Seth Thomas</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20140403" rel="nofollow">Thu, 03 Apr 2014 00:29:31 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>John,

Forgive the late reply but I do have something of a strong point of view on
this one.</pre><pre>

For the case you've proposed it seems like Riak in EC2 is a great fit but
you are rightly concerned about the IO costs, especially in EC2. For me
it's about achieving predictable performance as high into your 95th and
99th percentiles as possible. With EC2 the best thing you can do with
regard to controlling IO latency is paying for the Provisioned IOPS. If
you're getting acceptable speeds without that is awesome but for my money
I'd pay for the IOPS sooner than I'd pay for other machine attributes. I
see you've got a ring size of 256 partitions - are you planning to grow the
cluster (adding more nodes) in the future? I ask because that is, very
generally, a high ratio of partitions to physical nodes so reducing the #
of partitions or adding more nodes to the existing configuration could also
help alleviate any performance issues, especially in the case of one node
failures. We've got plenty of large customers running very happily in EC2
so you're certainly not alone there. We've got some recommendations on our
docs site specifically for AWS[1] that covers some of the nuance in more
detail but feel free to poke more on specifics and I'll see what I can dig
up.

As you said, no hard and fast answers here but that is how I feel.

Cheers,
Seth Thomas

[1] <a  rel="nofollow" href="http://docs.basho.com/riak/latest/ops/tuning/aws/">http://docs.basho.com/riak/latest/ops/tuning/aws/</a>


On Tue, Mar 18, 2014 at 5:04 AM, John Kavanagh &lt;j...@kavanista.com&gt; wrote:

&gt; Hi Basho people,
&gt;
&gt; I need to get some info about user Riak on VM's .
&gt;
&gt; We intend to use Riak as the backed for a user session store . We have
&gt; tested on EC2 and determined the following :
&gt;
&gt; Using a cluster of 5 x EC2's m1.xlarge instances. (4 cores, 15GB memory).
&gt; w /256 partitions w/ Bitcask :
&gt;
&gt; At 100K RPM. CPU utilization is at 200%.
&gt; At 300K RPM, 300%. median time is still acceptable, but we see some
&gt; requeststaking 20ms.
&gt;
&gt; Since it's a small dataset, and responsiveness is important here, I think
&gt; we
&gt; should keep our entire working set in memory. 4GB per node allows us to do
&gt; that for up to 10 million keys. In reality , in production , we would peak
&gt; at 1 million keys.
&gt;
&gt; Our tests on VM's (EC2)  have been quite successful . However I'm
&gt; concerned about the IO cost of using VM's in production .
&gt;
&gt; &quot;Riak is already virtualized, so let it handle that instead of running it
&gt; on yet another virtualisation&quot;
&gt;
&gt; I know there are no hard and fast answers here , but I'm wondering if
&gt; anyone had any strong points of view.
&gt;
&gt; Thanks,
&gt;
&gt; John
&gt;
&gt;
&gt;
&gt;
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;
&gt;
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg13831.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="thrd2.html#13981">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#13981">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg13837.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg13831.html">Riak on VM's</a></span> <span class="sender italic">John Kavanagh</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Riak on VM's</span> <span class="sender italic">Seth Thomas</span></li>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Riak on VM's">
<input type="hidden" name="msgid" value="CAL9jJanCY3CMsuUnTzpDvi6X9caF7sNsNL9sez-D2EmJAALFyA@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg13981.html">
<input type="submit" value=" Seth Thomas ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Riak+on+VM%27s%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg13831.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg13837.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CAL9jJanCY3CMsuUnTzpDvi6X9caF7sNsNL9sez-D2EmJAALFyA@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
