<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Riak compared to CouchDB</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#02140" id="c">
<link rel="index" href="maillist.html#02140" id="i">
<link rel="prev" href="msg02136.html" id="p">
<link rel="next" href="msg02141.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg02140.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Riak+compared+to+CouchDB%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Riak compared to CouchDB</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Jamie+Talbot%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Jamie Talbot</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20110128" rel="nofollow">Fri, 28 Jan 2011 08:04:53 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hey Joshua,

I'm relatively new to Riak, but have done quite a bit of investigation into
CouchDB, so this is as much to confirm my own understanding as anything.
 With that disclaimer out of the way, here's what I understand about the
two.</pre><pre>

Couch has excellent database consistency - killing the server process dead
won't lose you any data, and recovering after a crash is very quick.  Fault
tolerance I would say is Riak's biggest selling point, with the ability to
configure how many nodes can fail before results can no longer be returned
or written.  You can kind of achieve fault tolerance with Couch by
load-balancing behind a proxy, but it's a kludge compared to the
fault-tolerance that is at the very heart of Riak.

Both CouchDB and Riak have map/reduce functionality available through REST,
using Erlang or Javascript.  With Couch, querying the data can be
problematic though, especially on large sets of data as you have to
pre-define views of how you want to extract data and then wait for them to
be built.  It's certainly not true that you can just choose any old design
and then figure things out later.  Building views can take a long time - on
a few hundred million rows in my sample, it took a number of weeks to build
one relatively minor view (though hardware was quite limited).  This makes
RAD with CouchDB difficult, and was a significant business risk.  The upside
here is that once built, I could query 7 years of ISP data at year, month,
day, hour, minute granularity, across any cross-section of services in a
handful of milliseconds.  This was incredible, and pretty addictive - it's
lightning fast, for very specific use cases.

The space requirements for Couch are enormous though, as updates and even
deletes increase the size of the DB, until compacted.  Riak too will use
additional space to store duplicate copies of data on different nodes, to
provide fault tolerance, though from my experiments the overhead is nothing
like recent versions of CouchDB for my specific use cases.  Your mileage
will vary greatly, based on your configuration of Riak and the
characteristics of your Couch views.

Riak, from what I understand is not currently particularly well-suited to
retrieving large amounts of data sequentially by key, but CouchDB works very
quickly here, as long as you have defined a suitable view.

Couch does bi-directional replication, though I did find that a little
flaky, sometimes dying for no reason.  No data loss of course, and it did
eventually sync, but frustrating nonetheless.  This was as of the previous
version.  Riak does replication of data as part of its architecture, but if
you want to scale to multiple datacentres, you need the enterprise, non-free
version.

Scalability is hard with Couch, from what I can tell - certainly not the
ability just to add a new node for better performance like you can with
Riak.  For me, this is a killer feature of Riak.

Couch has a nice subscription mechanism for changes to the database, which
allows you to set triggers and the like.  Don't be fooled by the talk of
document versioning though - it is built in, but it is purely a mechanism
for the MVCC (replication and concurrency) mechanism to work and old
versions of documents are specifically removed whenever the database is
compacted.

This page has a high-level comparison of a number of NoSQL options,
including Riak and CouchDB, which was generally considered to be pretty
reasonable: <a  rel="nofollow" href="http://kkovacs.eu/cassandra-vs-mongodb-vs-couchdb-vs-redis">http://kkovacs.eu/cassandra-vs-mongodb-vs-couchdb-vs-redis</a>

Hopefully that's a reasonable representation of the two systems.  I will let
more seasoned pros correct and expand on the above as necessary!

Cheers,

Jamie.

PS: Hello, list!

On Fri, Jan 28, 2011 at 21:44, Joshua Partogi &lt;joshua.j...@gmail.com&gt; wrote:

&gt; Hi there.
&gt;
&gt; Has anyone here done any comparison between Riak and CouchDB? I am
&gt; interested to see how similar and different Riak compared to Couch. If this
&gt; can be added to the Riak wiki, I think it would be great for all of us here.
&gt;
&gt; Thanks heaps.
&gt;
&gt; Kind regards,
&gt; Joshua.
&gt; --
&gt; <a  rel="nofollow" href="http://twitter.com/jpartogi">http://twitter.com/jpartogi</a> &lt;<a  rel="nofollow" href="http://twitter.com/scrum8">http://twitter.com/scrum8</a>&gt;
&gt;
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;
&gt;
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg02136.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#02140">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#02140">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg02141.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg02136.html">Riak compared to CouchDB</a></span> <span class="sender italic">Joshua Partogi</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Riak compared to CouchDB</span> <span class="sender italic">Jamie Talbot</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg02141.html">Re: Riak compared to CouchDB</a></span> <span class="sender italic">Alexander Sicular</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg02148.html">Re: Riak compared to CouchDB</a></span> <span class="sender italic">Mark Phillips</span></li>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Riak compared to CouchDB">
<input type="hidden" name="msgid" value="AANLkTi=uo-RtC9JaeOX2KK84gVRF1XH9U6whOOVDBYS0@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg02140.html">
<input type="submit" value=" Jamie Talbot ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Riak+compared+to+CouchDB%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg02136.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg02141.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">AANLkTi=uo-RtC9JaeOX2KK84gVRF1XH9U6whOOVDBYS0@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
