<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Worried about the backends to use</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="thrd6.html#13122" id="c">
<link rel="index" href="mail6.html#13122" id="i">
<link rel="prev" href="msg13121.html" id="p">
<link rel="next" href="msg13124.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg13122.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Worried+about+the+backends+to+use%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Worried about the backends to use</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Jeremiah+Peschka%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Jeremiah Peschka</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20131129" rel="nofollow">Fri, 29 Nov 2013 07:22:27 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Responses inline.
---
Jeremiah Peschka - Founder, Brent Ozar Unlimited
MCITP: SQL Server 2008, MVP
Cloudera Certified Developer for Apache Hadoop</pre><pre>


On Thu, Nov 28, 2013 at 9:57 PM, Suman Kumar &lt;sumanku...@freshdesk.com&gt;wrote:

&gt; Hi,
&gt;
&gt; We have currently around 53 million key value pairs and each week we would
&gt; add up with 1.4 million keys. can i use bitcask as my backend how many
&gt; nodes and ring size should i go with and how should i scale this linearly
&gt; once in 3months(will adding a node with same previous configuration scale
&gt; the riak and increase the capacity of all the nodes?)
&gt;

There's a bitcask capacity planning tool available at
<a  rel="nofollow" href="http://docs.basho.com/riak/latest/ops/building/planning/bitcask/">http://docs.basho.com/riak/latest/ops/building/planning/bitcask/</a>

This will be valid for 1.4.x and earlier. If I recall, some changes are
being made to both LevelDB and bitcask that should reduce the per object
overhead associated with each key. These changes only apply to Riak 2.0,
though.


&gt;
&gt; I also want to if there is any way so that i can change the data from
&gt; bitcask to leveldb once in every three months as my old data is less
&gt; frequent to access this can help me freeing up the ram in bitcask. Any help
&gt; on this is appreciated
&gt;

There are a few approaches to moving your data. Part of the design decision
is going to be based on how you've structured your buckets.

1) You can add keys to a LevelDB bucket and then delete them from the
bitcask bucket. This will carry some storage overhead and you may run into
the problems outlined in this previous thread [1]. Namely that the data
won't be removed until the next bitcask merge. If you set the bitcask merge
thresholds too high, this could cause problems.

2) You could set your default backend in the confgs to use multi-backend.
When it comes time to age out your data, you can switch the backend on a
bucket by bucket basis and hope for the best. This isn't supported or
tested by Basho (as far as I know), so you'll be on your own on this one.

The smaller the time granularity for a bucket, the easier either option
becomes. Moving one day is easier and faster than moving one week of data.



[1]: <a  rel="nofollow" href="http://markmail.org/message/6zw54mtjerr27g6z">http://markmail.org/message/6zw54mtjerr27g6z</a>



&gt;
&gt; Thanks,
&gt; Suman Kumar Dey.
&gt;
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;
&gt;
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg13121.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="thrd6.html#13122">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="mail6.html#13122">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg13124.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg13121.html">Worried about the backends to use</a></span> <span class="sender italic">Suman Kumar</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Worried about the backends to use</span> <span class="sender italic">Jeremiah Peschka</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13124.html">Re: Worried about the backends to use</a></span> <span class="sender italic">John Daily</span></li>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Worried about the backends to use">
<input type="hidden" name="msgid" value="CACJEN2p98Tw0GibyjLugLbRpFaEWqW_A=2zK_nu2qE_Nkp0DRQ@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg13122.html">
<input type="submit" value=" Jeremiah Peschka ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Worried+about+the+backends+to+use%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg13121.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg13124.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CACJEN2p98Tw0GibyjLugLbRpFaEWqW_A=2zK_nu2qE_Nkp0DRQ@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
