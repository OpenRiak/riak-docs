<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: 2i timeouts in 1.4</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="thrd12.html#11780" id="c">
<link rel="index" href="mail13.html#11780" id="i">
<link rel="prev" href="msg11779.html" id="p">
<link rel="next" href="msg11781.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg11780.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+2i+timeouts+in+1.4%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: 2i timeouts in 1.4</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Sean+McKibben%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Sean McKibben</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20130726" rel="nofollow">Fri, 26 Jul 2013 15:01:27 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>I should have mentioned that I also tried:
curl -H &quot;X-Riak-Timeout: 260000&quot; 
&quot;<a  rel="nofollow" href="http://127.0.0.1:8098/buckets/mybucket/index/test_bin/myval?timeout=260000&quot">http://127.0.0.1:8098/buckets/mybucket/index/test_bin/myval?timeout=260000&quot</a>; -i
but still receive the 500 error below exactly at the 60 second mark. Is this a 
bug?</pre><pre>

Secondary to getting this working at all, is this documented anywhere? and any 
way to set this timeout using the ruby riak client?

Stream may well work, but I'm going to have to make a number of changes on the 
client side to deal with the results.

Sean

On Jul 26, 2013, at 3:53 PM, Brian Roach &lt;ro...@basho.com&gt; wrote:

&gt; Sean -
&gt; 
&gt; The timeout isn't via a header, it's a query param -&gt; &amp;timeout=xxxx
&gt; 
&gt; You can also use stream=true to stream the results.
&gt; 
&gt; - Roach
&gt; 
&gt; Sent from my iPhone
&gt; 
&gt; On Jul 26, 2013, at 3:43 PM, Sean McKibben &lt;grap...@graphex.com&gt; wrote:
&gt; 
&gt;&gt; We just upgraded to 1.4 and are having a big problem with some of our larger 
&gt;&gt; 2i queries. We have a few key queries that takes longer than 60 seconds 
&gt;&gt; (usually about 110 seconds) to execute, but after going to 1.4 we can't seem 
&gt;&gt; to get around a 60 second timeout.
&gt;&gt; 
&gt;&gt; I've tried:
&gt;&gt; curl -H &quot;X-Riak-Timeout: 260000&quot; 
&gt;&gt; &quot;<a  rel="nofollow" href="http://127.0.0.1:8098/buckets/mybucket/index/test_bin/myval?x-riak-timeout=260000&quot">http://127.0.0.1:8098/buckets/mybucket/index/test_bin/myval?x-riak-timeout=260000&quot</a>;
&gt;&gt;  -i
&gt;&gt; 
&gt;&gt; But I always get
&gt;&gt; HTTP/1.1 500 Internal Server Error
&gt;&gt; Vary: Accept-Encoding
&gt;&gt; Server: MochiWeb/1.1 WebMachine/1.10.0 (never breaks eye contact)
&gt;&gt; Date: Fri, 26 Jul 2013 21:41:28 GMT
&gt;&gt; Content-Type: text/html
&gt;&gt; Content-Length: 265
&gt;&gt; Connection: close
&gt;&gt; 
&gt;&gt; &lt;html&gt;&lt;head&gt;&lt;title&gt;500 Internal Server 
&gt;&gt; Error&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;Internal Server Error&lt;/h1&gt;The server 
&gt;&gt; encountered an error while processing this 
&gt;&gt; request:&lt;br&gt;&lt;pre&gt;{error,{error,timeout}}&lt;/pre&gt;&lt;P&gt;&lt;HR&gt;&lt;ADDRESS&gt;mochiweb+webmachine
&gt;&gt;  web server&lt;/ADDRESS&gt;&lt;/body&gt;&lt;/html&gt;
&gt;&gt; 
&gt;&gt; Right at the 60 second mark. What can I set to give my secondary index 
&gt;&gt; queries more time??
&gt;&gt; 
&gt;&gt; This is causing major problems for us :(
&gt;&gt; 
&gt;&gt; Sean
&gt;&gt; _______________________________________________
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>

</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg11779.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="thrd12.html#11780">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="mail13.html#11780">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg11781.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg11778.html">2i timeouts in 1.4</a></span> <span class="sender italic">Sean McKibben</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg11779.html">Re: 2i timeouts in 1.4</a></span> <span class="sender italic">Brian Roach</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: 2i timeouts in 1.4</span> <span class="sender italic">Sean McKibben</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg11781.html">Re: 2i timeouts in 1.4</a></span> <span class="sender italic">Russell Brown</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg11782.html">Re: 2i timeouts in 1.4</a></span> <span class="sender italic">Sean McKibben</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg11785.html">Re: 2i timeouts in 1.4</a></span> <span class="sender italic">Russell Brown</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg11786.html">Re: 2i timeouts in 1.4</a></span> <span class="sender italic">Sean McKibben</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg11789.html">Re: 2i timeouts in 1.4</a></span> <span class="sender italic">Russell Brown</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: 2i timeouts in 1.4">
<input type="hidden" name="msgid" value="429F6272-43E4-4EA3-890B-EEFDC0DE24D1@graphex.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg11780.html">
<input type="submit" value=" Sean McKibben ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+2i+timeouts+in+1.4%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg11779.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg11781.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">429F6272-43E4-4EA3-890B-EEFDC0DE24D1@graphex.com</li>
</ul>
</div>
</body>
</html>
