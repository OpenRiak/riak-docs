<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: [Confusing search docs] Enabling search on bucket in Riak 2.0</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="thrd6.html#13025" id="c">
<link rel="index" href="mail6.html#13025" id="i">
<link rel="prev" href="msg13017.html" id="p">
<link rel="next" href="msg13042.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg13025.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+%5C%5BConfusing+search+docs%5C%5D+Enabling+search+on+bucket+in+Riak+2.0%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: [Confusing search docs] Enabling search on bucket in Riak 2.0</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Eric+Redmond%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Eric Redmond</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20131119" rel="nofollow">Tue, 19 Nov 2013 14:34:12 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Kartik,

Your confusion is understandable, since our docs are not up to date yet (and 
they won't be until closer to the final 2.0 release date). Because of this, the 
docs you're reading correspond to the old version of RiakSearch, and not the 
new Search (codenamed yokozuna). Thus, you cannot rely on the docs just yet.</pre><pre>

The good news is, we do have some docs for yokozuna on github:

<a  rel="nofollow" href="https://github.com/basho/yokozuna/tree/develop/docs">https://github.com/basho/yokozuna/tree/develop/docs</a>

You do have yokozuna enabled by setting `yokozuna = on`. Don't worry about 
those links going to 404, because they aren't relevant at this time.

You do not need to add postcommit hooks. In 2.0.0pre5 you merely need to create 
an index, then associate that index with a bucket (you can optionally create a 
custom solr schema and use that for the index, or you can simply use the 
default schema):

<a  rel="nofollow" href="https://github.com/basho/yokozuna/blob/develop/docs/ADMIN.md#index-creation">https://github.com/basho/yokozuna/blob/develop/docs/ADMIN.md#index-creation</a>

(note that this will change in the 2.0.0 final release, but it sufficient to 
get started in pre5).

After you've created an index and associated it with a bucket, then you need 
only insert json, xml, or plain text, which will be extracted based on the 
field. If you suffix your json or xml field named with a dynamic field 
parameter, it will be indexed as that type (the list can be found here 
<a  rel="nofollow" href="https://github.com/basho/yokozuna/blob/develop/priv/default_schema.xml">https://github.com/basho/yokozuna/blob/develop/priv/default_schema.xml</a>).

eg, assuming the bucket &quot;people&quot; has an index associated with the same name:

# Add a JSON value:
curl -XPUT -H'content-type:application/json' 
<a  rel="nofollow" href="http://localhost:8098/buckets/people/keys/me">http://localhost:8098/buckets/people/keys/me</a> \
-d'{ &quot;name_s&quot; : &quot;kartik&quot; }'

# perform a search
curl &quot;<a  rel="nofollow" href="http://localhost:8098/search/people?q=name_s:kar*&quot">http://localhost:8098/search/people?q=name_s:kar*&quot</a>;

Hope that helps. We'll updating the docs in the next month.

Eric

On Nov 19, 2013, at 7:28 AM, Kartik Thakore &lt;thakore.kar...@gmail.com&gt; wrote:

&gt; Hello,
&gt; 
&gt; I am reviewing Riak 2.0pre5 for use and I am confused with the search 
&gt; documentation provided here: 
&gt; 
&gt; <a  rel="nofollow" href="http://docs.basho.com/riak/2.0.0pre5/dev/using/search/">http://docs.basho.com/riak/2.0.0pre5/dev/using/search/</a>
&gt; 
&gt; It tells me to enable search:
&gt; 
&gt; <a  rel="nofollow" href="http://docs.basho.com/riak/2.0.0pre5/ops/advanced/configs/search/">http://docs.basho.com/riak/2.0.0pre5/ops/advanced/configs/search/</a>
&gt; 
&gt; But there is no such file in etc anymore after I use make rel to build Riak 
&gt; 2.0
&gt; 
&gt; So I enabled yokozuna = on and I think I have it enabled
&gt; 
&gt; [RIAK MACHINE]:8098 is showing:
&gt; 
&gt; yz_wm_extract
&gt; yz_wm_index
&gt; yz_wm_schema
&gt; yz_wm_search
&gt; yz_wm_search
&gt; yz_wm_search
&gt; 
&gt; But these links go to 404 pages
&gt; 
&gt; Now how do I set up search on a bucket? Do I still need to do post commit 
&gt; hooks on the buckets?
&gt; 
&gt; Thank You for your help
&gt; 
&gt; 
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>

</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg13017.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="thrd6.html#13025">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="mail6.html#13025">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg13042.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg13017.html">[Confusing search docs] Enabling search on bucket in Riak 2...</a></span> <span class="sender italic">Kartik Thakore</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: [Confusing search docs] Enabling search on bucket ...</span> <span class="sender italic">Eric Redmond</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13042.html">Re: [Confusing search docs] Enabling search on buc...</a></span> <span class="sender italic">Kartik Thakore</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13057.html">Re: [Confusing search docs] Enabling search on...</a></span> <span class="sender italic">Ryan Zezeski</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13097.html">Re: [Confusing search docs] Enabling searc...</a></span> <span class="sender italic">Kartik Thakore</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13102.html">Re: [Confusing search docs] Enabling ...</a></span> <span class="sender italic">Ryan Zezeski</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13106.html">Re: [Confusing search docs] Enabl...</a></span> <span class="sender italic">Kartik Thakore</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13107.html">Re: [Confusing search docs] E...</a></span> <span class="sender italic">Eric Redmond</span></li>
<li class="icons-email"><span class="subject"><a href="msg13109.html">Re: [Confusing search docs] E...</a></span> <span class="sender italic">Ryan Zezeski</span></li>
<li class="icons-email"><span class="subject"><a href="msg13110.html">Re: [Confusing search docs] E...</a></span> <span class="sender italic">Kartik Thakore</span></li>
<li class="icons-email"><span class="subject"><a href="msg13125.html">Re: [Confusing search docs] E...</a></span> <span class="sender italic">Eric Redmond</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: [Confusing search docs] Enabling search on bucket in Riak 2.0">
<input type="hidden" name="msgid" value="6793EA02-34A1-4E20-AAD8-CF813FF44C79@basho.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg13025.html">
<input type="submit" value=" Eric Redmond ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+%5C%5BConfusing+search+docs%5C%5D+Enabling+search+on+bucket+in+Riak+2.0%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg13017.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg13042.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">6793EA02-34A1-4E20-AAD8-CF813FF44C79@basho.com</li>
</ul>
</div>
</body>
</html>
