<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Has Riak 2.0 solved the leveldb delete key free disk space issue?</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="thrd7.html#12960" id="c">
<link rel="index" href="mail7.html#12960" id="i">
<link rel="prev" href="msg12959.html" id="p">
<link rel="next" href="msg12961.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg12960.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Has+Riak+2.0+solved+the+leveldb+delete+key+free+disk+space+issue%5C%3F%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Has Riak 2.0 solved the leveldb delete key free disk space issue?</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Greg+Burd%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Greg Burd</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20131112" rel="nofollow">Tue, 12 Nov 2013 09:56:45 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>While LevelDB does eventually free up space on disk by eliminating deleted
keys during SST compactions it doesn't do so &quot;aggressively&quot;, as Matthew
indicated and hence our name for the fix.  This is problem you've been
experiencing and we're working on it and hope to have it tested and
integrated into the 2.0.0 release.</pre><pre>

-greg


@gregburd | Basho Technologies | Riak | <a  rel="nofollow" href="http://basho.com">http://basho.com</a> | @basho


On Tue, Nov 12, 2013 at 12:21 PM, Matthew Von-Maszewski
&lt;matth...@basho.com&gt;wrote:

&gt; Anita,
&gt;
&gt; The &quot;aggressive delete&quot; feature should be coded by the end of this week.
&gt;  That will make it a candidate for Riak 2.0.  The 2.0 release date is not
&gt; set.
&gt;
&gt; Matthew
&gt;
&gt;
&gt; On Nov 11, 2013, at 11:40 PM, Anita Wong &lt;anita.w...@talkboxapp.com&gt;
&gt; wrote:
&gt;
&gt; &gt; Happy to see Riak 2.0 being available.
&gt; &gt; May I know if the issue that was faced in Riak 1.x leveldb been solved?
&gt; &gt;
&gt; &gt; The issue is about the disk space not being freed after deleting the key.
&gt; &gt; From Bashoâ€™s support, the reason is because my keys has date as prefix,
&gt; therefore the .sst files of the deleted keys never be reused.
&gt; &gt;
&gt; &gt; I also heard that this issue will be fixed in next release, may I know
&gt; will it be in Riak 2.0?
&gt; &gt; Or there will be a smaller fix before the release of Riak 2.0?
&gt; &gt;
&gt; &gt; Thanks a lot.
&gt; &gt;
&gt; &gt; Anita Wong
&gt; &gt; Senior System Engineer
&gt; &gt; Talkbox Limited
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; _______________________________________________
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com
&gt; &gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;
&gt;
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg12959.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="thrd7.html#12960">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="mail7.html#12960">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg12961.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg12958.html">Has Riak 2.0 solved the leveldb delete key free disk...</a></span> <span class="sender italic">Anita Wong</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg12959.html">Re: Has Riak 2.0 solved the leveldb delete key ...</a></span> <span class="sender italic">Matthew Von-Maszewski</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Has Riak 2.0 solved the leveldb delete ...</span> <span class="sender italic">Greg Burd</span></li>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Has Riak 2.0 solved the leveldb delete key free disk space issue?">
<input type="hidden" name="msgid" value="CALpeugv+rUnYN5K-Lb=uMLRj1G2LxvUuMZv_SoH7TFtgkdGW+w@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg12960.html">
<input type="submit" value=" Greg Burd ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Has+Riak+2.0+solved+the+leveldb+delete+key+free+disk+space+issue%5C%3F%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg12959.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg12961.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CALpeugv+rUnYN5K-Lb=uMLRj1G2LxvUuMZv_SoH7TFtgkdGW+w@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
