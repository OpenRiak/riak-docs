<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: object not stored</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#04543" id="c">
<link rel="index" href="maillist.html#04543" id="i">
<link rel="prev" href="msg04542.html" id="p">
<link rel="next" href="msg04545.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg04543.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+object+not+stored%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: object not stored</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Jonathan+Langevin%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Jonathan Langevin</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20110831" rel="nofollow">Wed, 31 Aug 2011 10:30:06 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>To avoid inconsistencies with your specific set up, I would change n_val to
1, set r/w/dw to 1, which is what we actually have for our dev instance.
I don't know what issues this could cause specifically with any test data
that you've already stored, so my initial thought would be to
remove/reinstall Riak, apply new configuration, start service. Otherwise you
may be able to simply drop/delete whatever you've already stored currently,
change Riak config, restart service, and not have issues. I haven't
experimented in that area to find out.</pre><pre>

Again, keep in mind, growing that instance to a proper cluster has it's own
issues (if you attempt to grow while retaining existing data). Also the
caveat exists that your development would not consider possible data
conflicts that you would experience in a proper cluster environment, so keep
that in mind. If you continue with a single instance, you should plan for a
second phase of development where you create a 3+ node cluster, so that you
can test object conflicts, and see other possible issues that would arise in
a cluster that you wouldn't see on your single node.
*

 &lt;<a  rel="nofollow" href="http://www.loomlearning.com/">http://www.loomlearning.com/</a>&gt;
 Jonathan Langevin
Systems Administrator
Loom Inc.
Wilmington, NC: (910) 241-0433 - jlange...@loomlearning.com -
www.loomlearning.com - Skype: intel352
*


On Wed, Aug 31, 2011 at 12:30 PM, Giancarlo Frison &lt;gfri...@chelab.com&gt;wrote:

&gt; Previously I caught not found in HTTP interface and in PB client as well.
&gt;
&gt; Now I set w/dw to 2 (leaving n_val=3 as default) and I didn't see the
&gt; problem again, but a delay from the store and a successful fetch (after a 1
&gt; sec).
&gt; If I fetch the obj immediately after the store I caught not found again
&gt; (sometimes).
&gt;
&gt; How can I find it soon after the store?
&gt;
&gt; But I think it's better to set n_val =1 with a this development-1node
&gt; setup, isn't it?
&gt;
&gt;
&gt; Giancarlo Frison
&gt;
&gt;
&gt;
&gt; On Wed, Aug 31, 2011 at 5:45 PM, Mark Steele &lt;mste...@beringmedia.com&gt;wrote:
&gt;
&gt;&gt; I would think that one of the following would work:
&gt;&gt;
&gt;&gt; Make your n_val = 1 on the bucket and set or R/W/DW = 1 on
&gt;&gt; reads/writes/deletes
&gt;&gt;
&gt;&gt; OR
&gt;&gt;
&gt;&gt; Leave the n_val at 3 (the default), make the R/W/DW = 2 (quorum) on
&gt;&gt; reads/writes/deletes.
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; On Wed, Aug 31, 2011 at 11:36 AM, Giancarlo Frison &lt;gfri...@chelab.com&gt;wrote:
&gt;&gt;
&gt;&gt;&gt; This is the bucket conf:
&gt;&gt;&gt;
&gt;&gt;&gt; gfrison@gfw:~$ curl <a  rel="nofollow" href="http://localhost:8098/riak/user">http://localhost:8098/riak/user</a>
&gt;&gt;&gt;
&gt;&gt;&gt; {&quot;props&quot;:{&quot;name&quot;:&quot;user&quot;,&quot;n_val&quot;:3,&quot;allow_mult&quot;:false,&quot;last_write_wins&quot;:false,&quot;precommit&quot;:[],&quot;postcommit&quot;:[],&quot;chash_keyfun&quot;:{&quot;mod&quot;:&quot;riak_core_util&quot;,&quot;fun&quot;:&quot;chash_std_keyfun&quot;},&quot;linkfun&quot;:{&quot;mod&quot;:&quot;riak_kv_wm_link_walker&quot;,&quot;fun&quot;:&quot;mapreduce_linkfun&quot;},&quot;old_vclock&quot;:86400,&quot;young_vclock&quot;:20,&quot;big_vclock&quot;:50,&quot;small_vclock&quot;:10,&quot;r&quot;:&quot;quorum&quot;,&quot;w&quot;:&quot;quorum&quot;,&quot;dw&quot;:&quot;quorum&quot;,&quot;rw&quot;:&quot;quorum&quot;}}
&gt;&gt;&gt;
&gt;&gt;&gt; the server is single instance, the configuration is the default, no
&gt;&gt;&gt; changes.
&gt;&gt;&gt;
&gt;&gt;&gt; I store the object as:
&gt;&gt;&gt;
&gt;&gt;&gt; rc.store(ob, new StoreMeta(1, 1, true))
&gt;&gt;&gt; w=1,dw=1,returnbody=true
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; Can you help me?
&gt;&gt;&gt;
&gt;&gt;&gt; Giancarlo Frison
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; On Wed, Aug 31, 2011 at 4:01 PM, Jonathan Langevin &lt;
&gt;&gt;&gt; jlange...@loomlearning.com&gt; wrote:
&gt;&gt;&gt;
&gt;&gt;&gt;&gt; That could occur, depending on how many nodes are in your cluster, what
&gt;&gt;&gt;&gt; your r/w/dw settings are set to when fetching the object, how soon after
&gt;&gt;&gt;&gt; storing you attempt to fetch.
&gt;&gt;&gt;&gt; What is your configuration? i.e. - how many nodes in your cluster, what
&gt;&gt;&gt;&gt; settings are you using for reading &amp; writing to Riak (r/w/dw, etc), what 
&gt;&gt;&gt;&gt; are
&gt;&gt;&gt;&gt; your bucket settings set to?
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; I'm not advanced enough to help, but that info should hopefully help the
&gt;&gt;&gt;&gt; others on the list ;-)
&gt;&gt;&gt;&gt; *
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;  &lt;<a  rel="nofollow" href="http://www.loomlearning.com/">http://www.loomlearning.com/</a>&gt;
&gt;&gt;&gt;&gt;  Jonathan Langevin
&gt;&gt;&gt;&gt; Systems Administrator
&gt;&gt;&gt;&gt; Loom Inc.
&gt;&gt;&gt;&gt; Wilmington, NC: (910) 241-0433 - jlange...@loomlearning.com -
&gt;&gt;&gt;&gt; www.loomlearning.com - Skype: intel352
&gt;&gt;&gt;&gt; *
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; On Wed, Aug 31, 2011 at 9:29 AM, Giancarlo Frison 
&gt;&gt;&gt;&gt; &lt;gfri...@chelab.com&gt;wrote:
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Hi all,
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Sometimes happen that storing object with PB client doesn't work, the
&gt;&gt;&gt;&gt;&gt; snippet is:
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; IRiakObject ob =
&gt;&gt;&gt;&gt;&gt; RiakObjectBuilder.newBuilder(bucket,key).withContentType(&quot;application/json&quot;).withValue(json).build();
&gt;&gt;&gt;&gt;&gt;  return rc.store(ob, new StoreMeta(1, 1,
&gt;&gt;&gt;&gt;&gt; true)).getVclock().getBytes();
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; below it is the snoop of storing action. As you can see the riak server
&gt;&gt;&gt;&gt;&gt; is invoked by the client and return the object:
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; T 127.0.0.1:52015 -&gt; 127.0.0.1:8087 [AP]
&gt;&gt;&gt;&gt;&gt; .....
&gt;&gt;&gt;&gt;&gt; .user..gfrison&quot;..
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; G{&quot;name&quot;:&quot;Giancarlo&quot;,&quot;id&quot;:&quot;gfrison&quot;,&quot;password&quot;:&quot;pwd&quot;,&quot;surname&quot;:&quot;frison&quot;}..application/json;charset=utf-82&quot;
&gt;&gt;&gt;&gt;&gt; .eclass-general_domain..User..iof(.0.8.
&gt;&gt;&gt;&gt;&gt; ##
&gt;&gt;&gt;&gt;&gt; T 127.0.0.1:8087 -&gt; 127.0.0.1:52015 [AP]
&gt;&gt;&gt;&gt;&gt; .....
&gt;&gt;&gt;&gt;&gt; ..
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; G{&quot;name&quot;:&quot;Giancarlo&quot;,&quot;id&quot;:&quot;gfrison&quot;,&quot;password&quot;:&quot;pwd&quot;,&quot;surname&quot;:&quot;frison&quot;}..application/json;charset=utf-8*.4fXUimzXj3g0ukJHcpuxm32&quot;
&gt;&gt;&gt;&gt;&gt; .eclass-general_domain..User..iof8.....@
&gt;&gt;&gt;&gt;&gt; ..).*k.a```.`..R,..E..L..y....W..A....L.
&gt;&gt;&gt;&gt;&gt; ?..g..
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; but when I try to get such object, I got not found:
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;  gfrison@ttw:~$ curl <a  rel="nofollow" href="http://localhost:8098/riak/user/gfrison">http://localhost:8098/riak/user/gfrison</a>
&gt;&gt;&gt;&gt;&gt; not found
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Have you any hint on it?
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; thanks!
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Giancarlo Frison
&gt;&gt;&gt;&gt;&gt; @gfrison
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; _______________________________________________
&gt;&gt;&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt;&gt;&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; _______________________________________________
&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;
&gt;
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;
&gt;
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg04542.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#04543">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#04543">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg04545.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg04535.html">object not stored</a></span> <span class="sender italic">Giancarlo Frison</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg04537.html">Re: object not stored</a></span> <span class="sender italic">Jonathan Langevin</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg04538.html">Re: object not stored</a></span> <span class="sender italic">Giancarlo Frison</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg04539.html">Re: object not stored</a></span> <span class="sender italic">Jonathan Langevin</span></li>
<li class="icons-email"><span class="subject"><a href="msg04540.html">Re: object not stored</a></span> <span class="sender italic">Mark Steele</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg04541.html">Re: object not stored</a></span> <span class="sender italic">Dan Reverri</span></li>
<li class="icons-email"><span class="subject"><a href="msg04542.html">Re: object not stored</a></span> <span class="sender italic">Giancarlo Frison</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: object not stored</span> <span class="sender italic">Jonathan Langevin</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: object not stored">
<input type="hidden" name="msgid" value="CAFtGYznhsTxAA9MRiH7YwZ-TvLB0EGmuPRufK5BbrKOE+ow8ug@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg04543.html">
<input type="submit" value=" Jonathan Langevin ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+object+not+stored%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg04542.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg04545.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CAFtGYznhsTxAA9MRiH7YwZ-TvLB0EGmuPRufK5BbrKOE+ow8ug@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
