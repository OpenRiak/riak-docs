<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Compile error</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#07621" id="c">
<link rel="index" href="maillist.html#07621" id="i">
<link rel="prev" href="msg07620.html" id="p">
<link rel="next" href="msg07622.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg07621.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Compile+error%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Compile error</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Jared+Morrow%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Jared Morrow</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20120606" rel="nofollow">Wed, 06 Jun 2012 06:51:42 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Theo,

In 1.1.2 we unfortunately had a bug where the source for leveldb was not 
fetched properly when making the source distribution.   This has been fixed and 
will not cause problems in the next release.  To fix your issue, you will need 
to get the original source of leveldb from github.   To make things easier, the 
file in question that fetches the source should be changed to fetch the source 
via http.</pre><pre>

Unpack the riak source as you already did then:

$ cd deps/eleveldb

And then make the following changes to 'c_src/build_deps.sh':

--- c_src/build_deps.sh.orig    2012-04-27 22:06:31.000000000 -0600
+++ c_src/build_deps.sh 2012-04-27 22:07:49.000000000 -0600
@@ -37,7 +37,7 @@
         export LD_LIBRARY_PATH=&quot;$BASEDIR/system/lib:$LD_LIBRARY_PATH&quot;
 
         if [ ! -d leveldb ]; then
-            git clone git://github.com/basho/leveldb
+            git clone <a  rel="nofollow" href="http://github.com/basho/leveldb">http://github.com/basho/leveldb</a>
             (cd leveldb &amp;&amp; git checkout $LEVELDB_VSN)
         fi
 
Then return to the top-level source directory for Riak and run 'make' and the 
leveldb source will be fetched over http.
If you need a truly offline source distribution that doesn't do any source 
fetching, you can do the steps in `c_src/build_deps.sh` by hand and tar up the 
entire riak directory again to distribute.

Sorry for the bad behavior of the build on that release.

-Jared


On Jun 6, 2012, at 3:58 AM, Theo Bot wrote:

&gt; Hi
&gt; 
&gt; I'm try-ing to compile riak from source on a 32-bit centos 6.2 system without 
&gt; direct internet access. All required tools are installed, however, somewehere 
&gt; I get the following message:
&gt; make[2]: Leaving directory 
&gt; `/home/theob/basho/riak-1.1.2/deps/eleveldb/c_src/snappy-1.0.4'
&gt; make[1]: Leaving directory 
&gt; `/home/theob/basho/riak-1.1.2/deps/eleveldb/c_src/snappy-1.0.4'
&gt; github.com[0: 207.97.227.239]: errno=Connection refused
&gt; fatal: unable to connect a socket (Connection refused)
&gt; Initialized empty Git repository in 
&gt; /home/theob/basho/riak-1.1.2/deps/eleveldb/c_src/leveldb/.git/
&gt; ERROR: Command [compile] failed!
&gt; make: *** [compile] Error 1
&gt; 
&gt; Somehow it's try-ing to get something from github. Can this be disabled or 
&gt; someting?
&gt; 
&gt; -- 
&gt; Regards
&gt; 
&gt; Theo Bot
&gt; LinkedIn: <a  rel="nofollow" href="http://www.linkedin.com/in/theobot">http://www.linkedin.com/in/theobot</a>
&gt;  
&gt; 
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>

</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg07620.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#07621">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#07621">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg07622.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg07620.html">Compile error</a></span> <span class="sender italic">Theo Bot</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Compile error</span> <span class="sender italic">Jared Morrow</span></li>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Compile error">
<input type="hidden" name="msgid" value="C2BB0BFB-53D8-4932-8325-01D79575867D@basho.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg07621.html">
<input type="submit" value=" Jared Morrow ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Compile+error%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg07620.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg07622.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">C2BB0BFB-53D8-4932-8325-01D79575867D@basho.com</li>
</ul>
</div>
</body>
</html>
