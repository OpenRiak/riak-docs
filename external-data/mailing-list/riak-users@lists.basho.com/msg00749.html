<!DOCTYPE html>
<html lang="en">
<head>
<title>Expected vs Actual Bucket Behavior</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#00749" id="c">
<link rel="index" href="maillist.html#00749" id="i">
<link rel="prev" href="msg00745.html" id="p">
<link rel="next" href="msg00754.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg00749.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Expected+vs+Actual+Bucket+Behavior%22&amp;o=newest" rel="nofollow"><span itemprop="name">Expected vs Actual Bucket Behavior</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Eric+Filson%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Eric Filson</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20100720" rel="nofollow">Tue, 20 Jul 2010 09:40:20 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>*Potatoes*: First a hello to the list ;)

*Meat*: I recently became interested in nosql solutions and so my following
statements may be out of ignorance to this new type of db schema design
however, I thought it was worth mentioning...</pre><pre>

To preface, I'm looking at nosql solutions to solve the &quot;Big Data&quot; problem
for a limited data set, rather than using riak exclusively for storage.   My
proposed schema for riak consists of a bucket per collection, per user.

The current behavior of riak, when retrieving the contents of any given
bucket, requires all objects to be examined to determine their bucket and
effectively m/r'ed down to your result set. This seems to me to be quite a
costly operation and the logical choice is to store a separate k/v pair that
contains an index of keys in a bucket. I would think that this requirement,
retrieving all objects in a bucket, to be a _very_ common
place occurrence for modern web development and perhaps (depending on
requirements) _the_ most common function aside from retrieving a single k/v
pair.

In my mind, this seems to leave the only advantage to buckets in this
application to be namespacing... While certainly important, I'm fuzzy on
what the downside would be to allowing buckets to exist as a separate
partition/pseudo-table/etc... so that retrieving all objects in a bucket
would not need to read all objects in the entire system; especially
considering how common the usage is... It also seems to me that this would
closer mimic a real world &quot;bucket&quot; and expected vs actual behavior due to
terminology would be much closer. If I'm ever examining a bucket, I'm
looking at that one bucket and never all objects to see what bucket they're
in. I wouldn't use the term &quot;bucket&quot; as the functionality currently stands
because the keys aren't in buckets at all, they're all global.  For all
intensive purposes bucket == namespace in riak while bucket implies (to me)
something more than just a namespace.

This idea/concept may stem from my limited knowledge of nosql storage
engines but I do feel it has some merit. Especially when trying to garner
support from the development community.

In lieu of changing Riak to fit this proposed model and because querying for
the contents of a single bucket is so common, I might recommend a hybrid
solution (based in my limited knowledge of Riak)... What about allowing a
bucket property named something like &quot;key_index&quot; that points to a key
containing a value of &quot;keys in bucket&quot;.  Then, when calling GET
/riak/bucket, Riak would use the key_index to immediately reduce its result
set before applying m/r funcs.  While I understand this is essentially what
a developer would do, it would certainly alleviate some code requirements
(application side) as well as make the behavior of retrieving a bucket's
contents more &quot;expected&quot; and efficient.

Anyway, information is pretty limited on riak right now, seeing as how it's
so new, but talk in my development circles is very positive and lively.  I
thought this might be the best place to pose my question / suggestion and
get some feedback.

-Eric
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg00745.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#00749">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#00749">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg00754.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email tSliceCur"><span class="subject">Expected vs Actual Bucket Behavior</span> <span class="sender italic">Eric Filson</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00754.html">Re: Expected vs Actual Bucket Behavior</a></span> <span class="sender italic">Justin Sheehy</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00756.html">Re: Expected vs Actual Bucket Behavior</a></span> <span class="sender italic">Eric Filson</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00763.html">Re: Expected vs Actual Bucket Behavior</a></span> <span class="sender italic">Daniel Einspanjer</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00764.html">Re: Expected vs Actual Bucket Behavi...</a></span> <span class="sender italic">Justin Sheehy</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00765.html">Re: Expected vs Actual Bucket B...</a></span> <span class="sender italic">John D. Rowell</span></li>
<li class="icons-email"><span class="subject"><a href="msg00766.html">Re: Expected vs Actual Bucket B...</a></span> <span class="sender italic">Alexander Sicular</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00767.html">Re: Expected vs Actual Buck...</a></span> <span class="sender italic">Justin Sheehy</span></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg00769.html">Re: Expected vs Actual Bucket B...</a></span> <span class="sender italic">Curtis Caravone</span></li>
<li class="icons-email"><span class="subject"><a href="msg00771.html">Re: Expected vs Actual Bucket B...</a></span> <span class="sender italic">Jason J. W. Williams</span></li>
</ul></li>
</ul></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg00758.html">Re: Expected vs Actual Bucket Behavior</a></span> <span class="sender italic">Wilson MacGyver</span></li>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Expected vs Actual Bucket Behavior">
<input type="hidden" name="msgid" value="AANLkTikjw756YHqSxMAIdgLFV-9EsRqLXMwJU2JmTJIL@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg00749.html">
<input type="submit" value=" Eric Filson ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Expected+vs+Actual+Bucket+Behavior%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg00745.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg00754.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">AANLkTikjw756YHqSxMAIdgLFV-9EsRqLXMwJU2JmTJIL@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
