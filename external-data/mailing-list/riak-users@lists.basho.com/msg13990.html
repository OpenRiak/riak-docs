<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: very slow write speed to riak-cs</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#13990" id="c">
<link rel="index" href="maillist.html#13990" id="i">
<link rel="prev" href="msg13989.html" id="p">
<link rel="next" href="msg13992.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg13990.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+very+slow+write+speed+to+riak%5C-cs%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: very slow write speed to riak-cs</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Luke+Bakken%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Luke Bakken</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20140403" rel="nofollow">Thu, 03 Apr 2014 09:55:51 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi Anton,

Thanks for letting us know that changing s3cmd settings won't work.</pre><pre>

Before you go down the path of changing proxies, could you provide logs
from one instance of your proxy server? They may provide more insight into
what's going on here. In addition, the config and logs from one Riak CS
node would be helpful - the command I gave earlier didn't have the final
arguments:

tar -czf /tmp/riak-cs-$(hostname).tgz /etc/riak-cs /var/log/riak-cs

--
Luke Bakken
CSE
lbak...@basho.com


On Thu, Apr 3, 2014 at 8:51 AM, Anton Khalikov &lt;an...@khalikov.ru&gt; wrote:

&gt; Luke,
&gt;
&gt; it would be quite difficult to connect directly to riak cs nodes because
&gt; riak cs is set up to run in DMZ so it would take us to reconfigure the
&gt; whole network. So let's assume you are right in your thinking and it is
&gt; proxy (tengine) causing our problems. What would you recommend to use as a
&gt; proxy instead? Original nginx? haproxy? May be specific version of them?
&gt;
&gt; We decided to use tengine because of proxy_request_buffering feature which
&gt; bypasses the original nginx behavior and allows it to pass PUT requests
&gt; directly to backend nodes instead of buffering entire request body in a
&gt; temp file before passing it to backend (<a  rel="nofollow" href="http://wiki.nginx.org/">http://wiki.nginx.org/</a>
&gt; HttpProxyModule). So tengine had twice as fast PUT performance comparing
&gt; to nginx.
&gt;
&gt; About pt_backlog value: got it, thank you.
&gt;
&gt;
&gt; --
&gt; Best regards
&gt; Anton Khalikov
&gt;
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg13989.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#13990">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#13990">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg13992.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg13967.html">very slow write speed to riak-cs</a></span> <span class="sender italic">Stanislav Vlasov</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13975.html">Re: very slow write speed to riak-cs</a></span> <span class="sender italic">Luke Bakken</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13976.html">Re: very slow write speed to riak-cs</a></span> <span class="sender italic">Seth Thomas</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13979.html">Re: very slow write speed to riak-cs</a></span> <span class="sender italic">Stanislav Vlasov</span></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg13980.html">Re: very slow write speed to riak-cs</a></span> <span class="sender italic">Stanislav Vlasov</span></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg13984.html">Re: very slow write speed to riak-cs</a></span> <span class="sender italic">Luke Bakken</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13985.html">Re: very slow write speed to riak-cs</a></span> <span class="sender italic">Anton Khalikov</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13986.html">Re: very slow write speed to riak-cs</a></span> <span class="sender italic">Luke Bakken</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13989.html">Re: very slow write speed to riak-cs</a></span> <span class="sender italic">Anton Khalikov</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: very slow write speed to riak-c...</span> <span class="sender italic">Luke Bakken</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13992.html">Re: very slow write speed to ri...</a></span> <span class="sender italic">Stanislav Vlasov</span></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg14051.html">Re: very slow write speed to riak-cs</a></span> <span class="sender italic">Luke Bakken</span></li>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: very slow write speed to riak-cs">
<input type="hidden" name="msgid" value="CAJJ0J9OU8BC1=UQyFH8NFsyyAJPVWT3xo5g8eWwSeAkMbcZ6HA@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg13990.html">
<input type="submit" value=" Luke Bakken ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+very+slow+write+speed+to+riak%5C-cs%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg13989.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg13992.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CAJJ0J9OU8BC1=UQyFH8NFsyyAJPVWT3xo5g8eWwSeAkMbcZ6HA@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
