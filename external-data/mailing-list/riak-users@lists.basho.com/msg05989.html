<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Are X-Riak-ClientId and RpbSetClientId deprecated?</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="thrd5.html#05989" id="c">
<link rel="index" href="mail5.html#05989" id="i">
<link rel="prev" href="msg05988.html" id="p">
<link rel="next" href="msg05982.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg05989.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Are+X%5C-Riak%5C-ClientId+and+RpbSetClientId+deprecated%5C%3F%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Are X-Riak-ClientId and RpbSetClientId deprecated?</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Kresten+Krab+Thorup%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Kresten Krab Thorup</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20111218" rel="nofollow">Sun, 18 Dec 2011 23:11:53 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>The new vnode vector clock system is far superior IMHO, I can't see a good use 
case for the old one; because there are so many ways to use them incorrectly.  
The new system removes a complication for that needs to be understood by 
&quot;everyone&quot; writing code interacting with a Riak system, and that is the most 
important one I think.  With the old system, an inexperienced developer 
(perhaps forgetting to pass in a client id, or generating new ones all the 
time) would eventually cause vector clock pruning, which also causes objects to 
have siblings.  We've had several cases where we were thinking that we were 
perhaps using it incorrectly, and that whole worry goes away now.</pre><pre>

Kresten


Mobile: + 45 2343 4626 | Skype: krestenkrabthorup | Twitter: @drkrab
Trifork A/S  |  Margrethepladsen 4  | DK- 8000 Aarhus C |  Phone : +45 8732 
8787  |  www.trifork.com&lt;<a  rel="nofollow" href="http://www.trifork.com/">http://www.trifork.com/</a>&gt;



On Dec 18, 2011, at 7:32 PM, Andres Jaan Tack wrote:

Sean,

I understand that they are still used when provided. The more fundamental 
question is: as good Riak citizens, should we consider Client IDs deprecated, 
and stop using them in new projects?

--
Andres

2011/12/18 Sean Cribbs &lt;s...@basho.com&lt;<a  rel="nofollow" href="mailto:s...@basho.com">mailto:s...@basho.com</a>&gt;&gt;
Andres

Client IDs are still used if the riak_kv / vnode_vclocks setting is false. If 
it is true, the client ID will simply be ignored. For compatibility's sake, 
it's best to send/set them still.

On Sun, Dec 18, 2011 at 11:12 AM, Andres Jaan Tack 
&lt;andres.jaan.t...@eesti.ee&lt;<a  rel="nofollow" href="mailto:andres.jaan.t...@eesti.ee">mailto:andres.jaan.t...@eesti.ee</a>&gt;&gt; wrote:
I guess the fundamental question is: In new clusters unaffected by pre-1.0 
shenanigans, should we ever be using client-provided ClientIds in our vector 
clocks, or is this method deprecated?

I ask because I was deep into figuring out how to do this efficiently with the 
Riak PBC API for PUT requests, when I realized that the documentation for HTTP 
PUT no longer even mentions it&lt;<a  rel="nofollow" href="http://wiki.basho.com/HTTP-Store-Object.html">http://wiki.basho.com/HTTP-Store-Object.html</a>&gt;.

If client-id isn't totally deprecated, I will probably start finding a way to 
shoehorn it into individual PBC PUT requests, as keeping a per-connection 
client id is very onwieldy. Please advise. :)

--
Andres
_______________________________________________
riak-users mailing list
riak-users@lists.basho.com&lt;<a  rel="nofollow" href="mailto:riak-users@lists.basho.com">mailto:riak-users@lists.basho.com</a>&gt;
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>




--
Sean Cribbs &lt;s...@basho.com&lt;<a  rel="nofollow" href="mailto:s...@basho.com">mailto:s...@basho.com</a>&gt;&gt;
Developer Advocate
Basho Technologies, Inc.
<a  rel="nofollow" href="http://www.basho.com/">http://www.basho.com/</a>


_______________________________________________
riak-users mailing list
riak-users@lists.basho.com&lt;<a  rel="nofollow" href="mailto:riak-users@lists.basho.com">mailto:riak-users@lists.basho.com</a>&gt;
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>


_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg05988.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="thrd5.html#05989">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="mail5.html#05989">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg05982.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg05981.html">Are X-Riak-ClientId and RpbSetClientId deprecated?</a></span> <span class="sender italic">Andres Jaan Tack</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg05983.html">Re: Are X-Riak-ClientId and RpbSetClientId deprec...</a></span> <span class="sender italic">Sean Cribbs</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg05984.html">Re: Are X-Riak-ClientId and RpbSetClientId de...</a></span> <span class="sender italic">Andres Jaan Tack</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg05988.html">Re: Are X-Riak-ClientId and RpbSetClientI...</a></span> <span class="sender italic">Andres Jaan Tack</span></li>
<li class="icons-email tSliceCur"><span class="subject">Re: Are X-Riak-ClientId and RpbSetClientI...</span> <span class="sender italic">Kresten Krab Thorup</span></li>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Are X-Riak-ClientId and RpbSetClientId deprecated?">
<input type="hidden" name="msgid" value="DEB01B5A-6371-474F-9C0C-389203DFAC34@trifork.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg05989.html">
<input type="submit" value=" Kresten Krab Thorup ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Are+X%5C-Riak%5C-ClientId+and+RpbSetClientId+deprecated%5C%3F%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg05988.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg05982.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">DEB01B5A-6371-474F-9C0C-389203DFAC34@trifork.com</li>
</ul>
</div>
</body>
</html>
