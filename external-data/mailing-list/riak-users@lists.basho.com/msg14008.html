<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Change data directory</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#14008" id="c">
<link rel="index" href="maillist.html#14008" id="i">
<link rel="prev" href="msg14007.html" id="p">
<link rel="next" href="msg14014.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg14008.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Change+data+directory%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Change data directory</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Jordan+West%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Jordan West</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20140404" rel="nofollow">Fri, 04 Apr 2014 13:35:26 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Nabil,

Sorry for not catching this before: can you try adding o+x (or o+rx) to
/home/nabil? The riak user is unable to traverse further in the tree
otherwise. If this is your personal machine, you may want to consider
moving the data directory to another path so you don't need to relax the
permissions on your home folder.</pre><pre>

Cheers,
Jordan


On Fri, Apr 4, 2014 at 1:03 PM, Nabil Hassein &lt;na...@betterpath.com&gt; wrote:

&gt; I installed the binary via yum.
&gt;
&gt;
&gt; On Fri, Apr 4, 2014 at 4:02 PM, Jordan West &lt;jw...@basho.com&gt; wrote:
&gt;
&gt;&gt; how are you starting Riak? Did you install a package or are you building
&gt;&gt; from source?
&gt;&gt;
&gt;&gt; Jordan
&gt;&gt;
&gt;&gt;
&gt;&gt; On Fri, Apr 4, 2014 at 1:00 PM, Nabil Hassein &lt;na...@betterpath.com&gt;wrote:
&gt;&gt;
&gt;&gt;&gt; Even after a manual `mkdir /home/nabil/riak/ring &amp;&amp; sudo chown riak:riak
&gt;&gt;&gt; /home/nabil/riak/ring`, I still can't start the riak service.
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; On Fri, Apr 4, 2014 at 3:58 PM, Jordan West &lt;jw...@basho.com&gt; wrote:
&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Hey Nabil,
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Riak is having trouble finding or creating the ring directory. From
&gt;&gt;&gt;&gt; your logs:
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; 2014-04-04 15:44:41.655 [critical] &lt;0.147.0&gt;@riak_core_app:start:54
&gt;&gt;&gt;&gt; Ring state directory &quot;/home/nabil/riak/ring&quot; does not exist, and could not
&gt;&gt;&gt;&gt; be created: &quot;permission denied&quot;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Jordan
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; On Fri, Apr 4, 2014 at 12:55 PM, Nabil Hassein &lt;na...@betterpath.com&gt;wrote:
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Thanks very much for your prompt replies. I am using the bitcask
&gt;&gt;&gt;&gt;&gt; backend. For now I am just trying to use /home/nabil/riak as the directory
&gt;&gt;&gt;&gt;&gt; as I test this out on my development machine, although naturally that is
&gt;&gt;&gt;&gt;&gt; not the ultimate destination we have in mind for our production servers.
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; I have changed all of the paths quite similarly to the linked gist.
&gt;&gt;&gt;&gt;&gt; There are indeed errors in the Riak logs; I've pasted them here:
&gt;&gt;&gt;&gt;&gt; <a  rel="nofollow" href="http://pastebin.com/tQer69eJ">http://pastebin.com/tQer69eJ</a>
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; As you can see many of them appear to related to file permissions, but
&gt;&gt;&gt;&gt;&gt; like I said I've chowned the directory to the riak user and group:
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; [nabil@localhost riak]$ pwd
&gt;&gt;&gt;&gt;&gt; /home/nabil/riak
&gt;&gt;&gt;&gt;&gt; [nabil@localhost riak]$ ls -latrR .
&gt;&gt;&gt;&gt;&gt; .:
&gt;&gt;&gt;&gt;&gt; total 8
&gt;&gt;&gt;&gt;&gt; drwxrwxr-x.  2 riak  riak  4096 Apr  4 11:59 .
&gt;&gt;&gt;&gt;&gt; drwx------. 62 nabil nabil 4096 Apr  4 15:51 ..
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Any additional advice you can give would be much appreciated. Thanks
&gt;&gt;&gt;&gt;&gt; again for what you've already told me.
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Nabil
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; On Fri, Apr 4, 2014 at 3:15 PM, Jordan West &lt;jw...@basho.com&gt; wrote:
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt; <a  rel="nofollow" href="https://gist.github.com/jrwest/a37e3fff5917f0bd44eb">https://gist.github.com/jrwest/a37e3fff5917f0bd44eb</a> is a recent
&gt;&gt;&gt;&gt;&gt;&gt; app.config I used on a 1.4.x cluster w/ CentOS. Look at the paths that
&gt;&gt;&gt;&gt;&gt;&gt; start w/ &quot;/data/riak&quot;. If you're still having issues, or you have changed
&gt;&gt;&gt;&gt;&gt;&gt; all the paths: are there any errors in the Riak logs?
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt; Cheers,
&gt;&gt;&gt;&gt;&gt;&gt; Jordan
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt; On Fri, Apr 4, 2014 at 12:05 PM, Nabil Hassein 
&gt;&gt;&gt;&gt;&gt;&gt; &lt;na...@betterpath.com&gt;wrote:
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt; Hello all,
&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt; I'm trying to change /etc/riak/app.config to store data in a
&gt;&gt;&gt;&gt;&gt;&gt;&gt; directory of my choosing rather than the default one. Simply changing
&gt;&gt;&gt;&gt;&gt;&gt;&gt; platform_data_dir to another directory yields errors, even after a 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; `chown
&gt;&gt;&gt;&gt;&gt;&gt;&gt; -R riak:riak` of the relevant directory; the service starts but any
&gt;&gt;&gt;&gt;&gt;&gt;&gt; attempts to use the REST API yield 500 Internal Server Errors. Trying to
&gt;&gt;&gt;&gt;&gt;&gt;&gt; change other things, such as the ring_state_dir, generally results in 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; riak
&gt;&gt;&gt;&gt;&gt;&gt;&gt; failing to start at all.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt; Does anyone have an example configuration where data is stored in a
&gt;&gt;&gt;&gt;&gt;&gt;&gt; different directory to the defaults, or advice about where I might be 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; going
&gt;&gt;&gt;&gt;&gt;&gt;&gt; wrong?
&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt; I'm using a binary install of riak 1.4.8 on CentOS, if that's
&gt;&gt;&gt;&gt;&gt;&gt;&gt; relevant.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt; Thanks,
&gt;&gt;&gt;&gt;&gt;&gt;&gt; Nabil
&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt; _______________________________________________
&gt;&gt;&gt;&gt;&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt;&gt;&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt;&gt;&gt;&gt;&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;
&gt;
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg14007.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#14008">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#14008">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg14014.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg14000.html">Change data directory</a></span> <span class="sender italic">Nabil Hassein</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg14001.html">Re: Change data directory</a></span> <span class="sender italic">Matthew Von-Maszewski</span></li>
<li class="icons-email"><span class="subject"><a href="msg14002.html">Re: Change data directory</a></span> <span class="sender italic">Jordan West</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg14003.html">Re: Change data directory</a></span> <span class="sender italic">Nabil Hassein</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg14004.html">Re: Change data directory</a></span> <span class="sender italic">Jordan West</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg14005.html">Re: Change data directory</a></span> <span class="sender italic">Nabil Hassein</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg14006.html">Re: Change data directory</a></span> <span class="sender italic">Jordan West</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg14007.html">Re: Change data directory</a></span> <span class="sender italic">Nabil Hassein</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Change data direct...</span> <span class="sender italic">Jordan West</span></li>
<li class="icons-email"><span class="subject"><a href="msg14014.html">Re: Change data direct...</a></span> <span class="sender italic">Nabil Hassein</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Change data directory">
<input type="hidden" name="msgid" value="CANvRNdcyaybscgdsEqYCsot0tFDHOAGg5KPFiMC9jSR5KDaCpw@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg14008.html">
<input type="submit" value=" Jordan West ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Change+data+directory%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg14007.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg14014.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CANvRNdcyaybscgdsEqYCsot0tFDHOAGg5KPFiMC9jSR5KDaCpw@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
