<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: reads/writes during node replacement</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#17741" id="c">
<link rel="index" href="maillist.html#17741" id="i">
<link rel="prev" href="msg17738.html" id="p">
<link rel="next" href="msg17750.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg17741.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+reads%5C%2Fwrites+during+node+replacement%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: reads/writes during node replacement</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Magnus+Kessler%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Magnus Kessler</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20161114" rel="nofollow">Mon, 14 Nov 2016 05:08:27 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>On 12 November 2016 at 00:08, Johnny Tan &lt;johnnyd...@gmail.com&gt; wrote:</pre><pre>

&gt; When doing a node replace (<a  rel="nofollow" href="http://docs.basho.com/riak/1">http://docs.basho.com/riak/1</a>.
&gt; 4.12/ops/running/nodes/replacing/), after commit-ing the plan, how does
&gt; the cluster handle reads/writes? Do I include the new node in my app's
&gt; config as soon as I commit, and let riak internally handle which node(s)
&gt; will do the reads/writes? Or do I wait until the ringready on the new node
&gt; before being able to do reads/writes to it?
&gt;
&gt; johnny
&gt;
&gt;
Hi Johnny,

As soon as a node has been joined to the cluster it is capable of taking on
requests. `riak-admin ringready` returns true after a join or leave
operation when the new ring state has been communicated successfully to all
nodes in the cluster.

During a replacement operation, the leaving node will hand off [0] all its
partitions to the joining node. Both nodes can handle requests during this
phase and store data in the partitions they own. Once the leaving node has
handed off all its partitions, it will automatically shut down. Please keep
this in mind when configuring your clients or load balancers. Clients
should deal with nodes being temporarily or permanently unavailable.

Kind Regards,

Magnus

[0]: <a  rel="nofollow" href="http://docs.basho.com/riak/kv/2.1.4/using/reference/handoff/">http://docs.basho.com/riak/kv/2.1.4/using/reference/handoff/</a>

-- 
Magnus Kessler
Client Services Engineer
Basho Technologies Limited

Registered Office - 8 Lincolnâ€™s Inn Fields London WC2A 3BP Reg 07970431
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg17738.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#17741">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#17741">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg17750.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg17738.html">reads/writes during node replacement</a></span> <span class="sender italic">Johnny Tan</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: reads/writes during node replacement</span> <span class="sender italic">Magnus Kessler</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg17750.html">Re: reads/writes during node replacement</a></span> <span class="sender italic">Johnny Tan</span></li>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: reads/writes during node replacement">
<input type="hidden" name="msgid" value="CAL3YJWYebTep6PXs=Y_G11UYgo7YJhRYhCt1FAT8iSF3RS8+2w@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg17741.html">
<input type="submit" value=" Magnus Kessler ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+reads%5C%2Fwrites+during+node+replacement%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg17738.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg17750.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CAL3YJWYebTep6PXs=Y_G11UYgo7YJhRYhCt1FAT8iSF3RS8+2w@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
