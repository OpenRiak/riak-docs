<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: large ring_creation_size</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#07470" id="c">
<link rel="index" href="maillist.html#07470" id="i">
<link rel="prev" href="msg07469.html" id="p">
<link rel="next" href="msg07471.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg07470.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+large+ring_creation_size%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: large ring_creation_size</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Alexander+Sicular%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Alexander Sicular</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20120516" rel="nofollow">Wed, 16 May 2012 18:07:22 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>There are reasonable limits. And also for architecture. If I understand you 
correctly, yours is not reasonable. Although you have jbod's on each physical 
server does not mean you should run &quot;12 riak nodes on a given physical node.&quot; 
there are other resource limits than just disk io. In this instance you are 
running into an os limitation in the number of file descriptors, aka max open 
files including sockets.</pre><pre>

If you absolutely want to do it your way, which I absolutely do not recommend, 
I would run many virtual machines on top of each physical device from its own 
disk. But like I said, even then I wouldn't. 

Constructively, I think the largest recommended ring size is 1024 in practice. 

-Alexander 

@siculars on twitter
<a  rel="nofollow" href="http://siculars.posterous.com">http://siculars.posterous.com</a>

Sent from my iRotaryPhone

On May 16, 2012, at 20:47, Sam Lang &lt;saml...@gmail.com&gt; wrote:

&gt; 
&gt; Hello,
&gt; 
&gt; I have a 10 node cluster with 12 disks/devices per node.  I have setup riak 
&gt; in a jbod environment with separate riak nodes per device, resulting in 120 
&gt; riak nodes total.  Based on the documentation, I set the ring_creation_size 
&gt; to 4096, which gives me ~34 partitions/node and allows me to expand the 
&gt; cluster in the future.  With this value, soon after starting the 12 riak 
&gt; nodes on a given physical node, I get &quot;Too many processes&quot; errors and the 
&gt; riak nodes fail.  Decreasing the value of ring_creation_size to 1024 (giving 
&gt; me ~8 partitions per riak node) prevents the riak nodes from failing, but 
&gt; then expanding the cluster becomes a problem (30 physical nodes would result 
&gt; in only ~3 partitions per node).
&gt; 
&gt; Is there a reasonable limit on the value of ring_creation_size?  
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>

_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg07469.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#07470">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#07470">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg07471.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg07469.html">large ring_creation_size</a></span> <span class="sender italic">Sam Lang</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: large ring_creation_size</span> <span class="sender italic">Alexander Sicular</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg07471.html">Re: large ring_creation_size</a></span> <span class="sender italic">Joseph Blomstedt</span></li>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: large ring_creation_size">
<input type="hidden" name="msgid" value="DE42AC78-013A-4130-8C36-83E152C40979@gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg07470.html">
<input type="submit" value=" Alexander Sicular ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+large+ring_creation_size%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg07469.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg07471.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">DE42AC78-013A-4130-8C36-83E152C40979@gmail.com</li>
</ul>
</div>
</body>
</html>
