<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: not able to create schema</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#02416" id="c">
<link rel="index" href="maillist.html#02416" id="i">
<link rel="prev" href="msg02415.html" id="p">
<link rel="next" href="msg02423.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg02416.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+not+able+to+create+schema%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: not able to create schema</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Rusty+Klophaus%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Rusty Klophaus</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20110223" rel="nofollow">Wed, 23 Feb 2011 05:53:07 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi Wilson,

Can you double check the error message? You are trying to store a document
in index &quot;testindex&quot;, but the error message states an index of &quot;testUser&quot;.
Could this be an old error.</pre><pre>

Also, the 'search' module is only intended to be run from within a Riak
Search node. It's intended to be a simple way of interacting with data
directly while bypassing the need for a client. It looks like you may be
trying to run it on a client node, which would explain the &quot;bad argument&quot;
error.

You should interact with Riak Search through one of the other client APIs
that currently support Riak Search (currently Erlang, Ruby, Python, and PHP
clients).

Best,
Rusty


On Wed, Feb 23, 2011 at 5:47 AM, wilson Tuladhar &lt;mailwilson...@gmail.com&gt;wrote:

&gt; Hi,
&gt;
&gt; For indexing my data, I have created a schema as
&gt;
&gt; {
&gt; schema,
&gt; [
&gt;         {version, &quot;1.0&quot;},
&gt;         {default_field, &quot;fname&quot;},
&gt;         {default_op, &quot;or&quot;},
&gt;         {n_val, 3},
&gt;         {analyzer_factory, {erlang, text_analyzers,
&gt; whitespace_analyzer_factory}}
&gt;     ],
&gt;     [
&gt;         %% Parse the field in preparation for full-text searching.
&gt;         {field, [
&gt;             {name, &quot;fname&quot;},
&gt;             {required, true},
&gt;             {analyzer_factory, {erlang, text_analyzers,
&gt; standard_analyzer_factory}}
&gt;         ]},
&gt;
&gt;         %% Treat the field as a date, which currently uses
&gt; noop_analyzer_factory.
&gt;         {field, [
&gt;             {name, &quot;lname&quot;},
&gt;             {analyzer_factory, {erlang, text_analyzers,
&gt; standard_analyzer_factory}}
&gt;         ]},
&gt;
&gt;         %% A dynamic field. Catches any remaining fields in the
&gt;         %% document, and uses the analyzer_factory setting defined
&gt;         %% above for the schema.
&gt;         {dynamic_field, [
&gt;             {name, &quot;*&quot;}
&gt;         ]}
&gt;     ]
&gt; }.
&gt;
&gt;
&gt; and I have stored it in a file user_schema.
&gt; Then, I set the schema using command:
&gt; bin/search-cmd set_schema &quot;testindex&quot; user_schema
&gt; and when i use bin/search-cmd show_schema &quot;testindex&quot; it displays my schema
&gt;
&gt; now when I try to use this index name for indexing my document as :
&gt; search:index_doc(&lt;&lt;&quot;testindex&quot;&gt;&gt;, &lt;&lt;&quot;my_doc&quot;&gt;&gt;, [{&lt;&lt;&quot;fname&quot;&gt;&gt;,
&gt; &lt;&lt;&quot;Fname&quot;&gt;&gt;}, {&lt;&lt;&quot;lname&quot;&gt;&gt;, &lt;&lt;&quot;Lname&quot;&gt;&gt;}])
&gt; it gives me this error:
&gt; ** exception error: bad argument
&gt;      in function  ets:lookup/2
&gt;         called as ets:lookup(schema_table,&lt;&lt;&quot;testUser&quot;&gt;&gt;)
&gt;      in call from riak_search_config:get_schema/1
&gt;      in call from riak_indexed_doc:new/4
&gt;      in call from search:index_doc/4
&gt;
&gt; and when i check ets:all() i don't see schema_table in the list??
&gt;
&gt; So, am i missing something to store the schema or am i doing something
&gt; wrong???
&gt;
&gt; //Wilson
&gt;
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;
&gt;
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg02415.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#02416">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#02416">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg02423.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg02415.html">not able to create schema</a></span> <span class="sender italic">wilson Tuladhar</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: not able to create schema</span> <span class="sender italic">Rusty Klophaus</span></li>
<li class="icons-email"><span class="subject"><a href="msg02423.html">Re: not able to create schema</a></span> <span class="sender italic">Doug Edmunds</span></li>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: not able to create schema">
<input type="hidden" name="msgid" value="AANLkTikMQEv3E0GKdK+gk+xx_93By9MfcXVi28S79szH@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg02416.html">
<input type="submit" value=" Rusty Klophaus ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+not+able+to+create+schema%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg02415.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg02423.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">AANLkTikMQEv3E0GKdK+gk+xx_93By9MfcXVi28S79szH@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
