<!DOCTYPE html>
<html lang="en">
<head>
<title>riak (1.3.1), increasing response times over time</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="thrd15.html#11194" id="c">
<link rel="index" href="mail15.html#11194" id="i">
<link rel="prev" href="msg11193.html" id="p">
<link rel="next" href="msg11195.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg11194.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22riak+%5C%281.3.1%5C%29%2C+increasing+response+times+over+time%22&amp;o=newest" rel="nofollow"><span itemprop="name">riak (1.3.1), increasing response times over time</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Stefan+Mees%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Stefan Mees</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20130531" rel="nofollow">Fri, 31 May 2013 02:02:51 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hello,

We have a suspicious behaivior in our riak cluster (1.3.1)), the response
times increasing every day the riak node is running (especially the put
times)... after a restart of a node everything is fine for ~3-5 days, then
we seeing increasing response times again.</pre><pre>

Dataset size and throughput are the same for the restarted and running
node, also the number of compactions per node (we are using bitcask) is
roughly the same. The dataset fits completely in ram (so we have no read io
at all, write io also not saturates the disk).

This is how it looks like <a  rel="nofollow" href="http://puu.sh/3514h.png">http://puu.sh/3514h.png</a> (riak06 was restarted at
~12 o'clock, node03 is running since 8 days),

This is the mean respone time graph of both nodes
<a  rel="nofollow" href="http://puu.sh/350Qt.png">http://puu.sh/350Qt.png</a>(the spikes on riak03 looking suspiciously and
follow a pattern).

riak03 (Local node cluster_info dump)
<a  rel="nofollow" href="https://gist.github.com/stefan-mees/81ef36c83358ff7d9754/raw/1b33bde80bd0185666c923c1ac35729b18b0cef7/riak03+">https://gist.github.com/stefan-mees/81ef36c83358ff7d9754/raw/1b33bde80bd0185666c923c1ac35729b18b0cef7/riak03+</a>

riak06 (local node cluster_info dump)
<a  rel="nofollow" href="https://gist.github.com/stefan-mees/81ef36c83358ff7d9754/raw/90676383b562b9d9298f59f3d9741bdc8f926271/gistfile1.txt">https://gist.github.com/stefan-mees/81ef36c83358ff7d9754/raw/90676383b562b9d9298f59f3d9741bdc8f926271/gistfile1.txt</a>

On riak03 (running node since x days), one process consuming a lot of
memory in comparison to riak06 (could this be a gc issue? process is
bitcask_merge_delete).

Also CPU and Network i/o is not saturated on both nodes, so we believe this
is somehow a erlang/riak issue. We would be really thankful for any help.

/stefan
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg11193.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="thrd15.html#11194">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="mail15.html#11194">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg11195.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email tSliceCur"><span class="subject">riak (1.3.1), increasing response times over time</span> <span class="sender italic">Stefan Mees</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg11195.html">Re: riak (1.3.1), increasing response times over time</a></span> <span class="sender italic">Stefan Mees</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg11204.html">Re: riak (1.3.1), increasing response times over ti...</a></span> <span class="sender italic">Stefan Mees</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg11205.html">Re: riak (1.3.1), increasing response times ove...</a></span> <span class="sender italic">Denis Zhdanov</span></li>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="riak (1.3.1), increasing response times over time">
<input type="hidden" name="msgid" value="CAPEAxdkdxKZ_GXNiUmAiNF8bP58wWQX9r_RbEUKRQ_gZuWfoTQ@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg11194.html">
<input type="submit" value=" Stefan Mees ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22riak+%5C%281.3.1%5C%29%2C+increasing+response+times+over+time%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg11193.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg11195.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CAPEAxdkdxKZ_GXNiUmAiNF8bP58wWQX9r_RbEUKRQ_gZuWfoTQ@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
