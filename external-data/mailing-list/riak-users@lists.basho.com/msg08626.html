<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: HTTP or PB cluster client issue</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#08626" id="c">
<link rel="index" href="maillist.html#08626" id="i">
<link rel="prev" href="msg08625.html" id="p">
<link rel="next" href="msg08663.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg08626.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+HTTP+or+PB+cluster+client+issue%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: HTTP or PB cluster client issue</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Guido+Medina%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Guido Medina</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20120921" rel="nofollow">Fri, 21 Sep 2012 08:44:01 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre style="margin: 0em;">
Hi,

</pre><tt>  It is the Java client which to be honest, doesn't handle well one 
</tt><tt>node going down, so, for example, in my company we use HA proxy for 
</tt><tt>that, here is a starting configuration: <a  rel="nofollow" href="https://gist.github.com/1507077">https://gist.github.com/1507077</a>
</tt><pre style="margin: 0em;"></pre><pre>

</pre><tt>  Once we switched to HA proxy we just use a simple client without 
</tt><tt>cluster config, so the Java client doesn't know anything about the load 
</tt><tt>balancing going on. It works well, I can upgrade and restart servers 
</tt><tt>without our Java application be complaining.
</tt><pre style="margin: 0em;">

Regards,

Guido.

On 21/09/12 16:36, Lei Gu wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
Hi Brian,
We are moving past the performance testing and onto failover testing.
I have a five-node cluster and created a PB and HTTP clustered client based on 
the cook book. I tested out and everything seems to be working. Then I shutdown 
one node in the cluster and all my tests failed. It seems like the PB and HTTP 
cluster client connects to all configured nodes initially and will throw an 
exception if any node is down. Does this defeat the purpose of clustering? In 
my test, I have 10 threads, each creates a PB and HTTP cluster client and then 
goes on to execute a series of tests. From the attached log file, you can see 
every test thread is failing at connection the down node, even though there are 
four other nodes that can do the work.

Also, is the failover automatic or we have to catch the connection refused 
exception and creating a new client or just re-execute the method?

Is using a load balancer a better way to handle failover/load balancing issue?
Appreciate you insights and help.
Best regards,
-- Lei


pbf clients = 
r1-riak-lei.lm4.eng.e-dialog.com,r2-riak-lei.lm4.eng.e-dialog.com,r3-riak-lei.lm4.eng.e-dialog.com,r4-riak-lei.lm4.eng.e-dialog.com,r5-riak-lei.lm4.eng.e-dialog.com

http clients = 
r1-riak-lei.lm4.eng.e-dialog.com,r2-riak-lei.lm4.eng.e-dialog.com,r3-riak-lei.lm4.eng.e-dialog.com,r4-riak-lei.lm4.eng.e-dialog.com,r5-riak-lei.lm4.eng.e-dialog.com

Looup patterns = folder_root_2_5_%s_%s

SLF4J: Class path contains multiple SLF4J bindings.

SLF4J: Found binding in 
[jar:file:/Users/legu/.m2/repository/ch/qos/logback/logback-classic/0.9.30/logback-classic-0.9.30.jar!/org/slf4j/impl/StaticLoggerBinder.class]

SLF4J: Found binding in 
[jar:file:/Users/legu/opensource-projects/logback-0.9.30/logback-classic-0.9.30.jar!/org/slf4j/impl/StaticLoggerBinder.class]

SLF4J: Found binding in 
[jar:file:/Users/legu/opensource-projects/apache-tomcat-6.0.35/lib/logback-classic-0.9.30.jar!/org/slf4j/impl/StaticLoggerBinder.class]

SLF4J: See <a  rel="nofollow" href="http://www.slf4j.org/codes.html#multiple_bindings">http://www.slf4j.org/codes.html#multiple_bindings</a> for an explanation.

Exception in thread &quot;Thread-11&quot; java.lang.RuntimeException: 
com.basho.riak.client.http.response.RiakIORuntimeException: 
org.apache.http.conn.HttpHostConnectException: Connection to 
<a  rel="nofollow" href="http://r4-riak-lei.lm4.eng.e-dialog.com:8098">http://r4-riak-lei.lm4.eng.e-dialog.com:8098</a> refused

at com.edialog.persistence.riak.RiakClient.walk(RiakClient.java:457)

at 
com.edialog.riak.persistence.RiakPerfTest$PerfClient.run(RiakPerfTest.java:86)

at java.lang.Thread.run(Thread.java:680)

Caused by: com.basho.riak.client.http.response.RiakIORuntimeException: 
org.apache.http.conn.HttpHostConnectException: Connection to 
<a  rel="nofollow" href="http://r4-riak-lei.lm4.eng.e-dialog.com:8098">http://r4-riak-lei.lm4.eng.e-dialog.com:8098</a> refused

at 
com.basho.riak.client.http.util.ClientHelper.executeMethod(ClientHelper.java:499)

at 
com.basho.riak.client.http.util.ClientHelper.executeMethod(ClientHelper.java:526)

at com.basho.riak.client.http.util.ClientHelper.walk(ClientHelper.java:289)

at com.basho.riak.client.http.RiakClient.walk(RiakClient.java:334)

at com.basho.riak.client.http.RiakClient.walk(RiakClient.java:347)

at 
com.basho.riak.client.raw.http.HTTPClientAdapter.linkWalk(HTTPClientAdapter.java:374)

at com.basho.riak.client.raw.ClusterClient.linkWalk(ClusterClient.java:225)

at com.basho.riak.client.query.LinkWalk.execute(LinkWalk.java:63)

at com.edialog.persistence.riak.RiakClient.walk(RiakClient.java:437)

... 2 more

Caused by: org.apache.http.conn.HttpHostConnectException: Connection to 
<a  rel="nofollow" href="http://r4-riak-lei.lm4.eng.e-dialog.com:8098">http://r4-riak-lei.lm4.eng.e-dialog.com:8098</a> refused

at 
org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:158)

at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:149)

at 
org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:121)

at 
org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:561)

at 
org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:415)

at 
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:820)

at 
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:754)

at 
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:732)

at 
com.basho.riak.client.http.util.ClientHelper.executeMethod(ClientHelper.java:474)

... 10 more

Caused by: java.net.ConnectException: Connection refused

at java.net.PlainSocketImpl.socketConnect(Native Method)

at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)

at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)

at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)

at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:432)

at java.net.Socket.connect(Socket.java:529)

at 
org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:123)

at 
org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:148)

... 18 more

Exception in thread &quot;Thread-5&quot; java.lang.RuntimeException: 
com.basho.riak.client.http.response.RiakIORuntimeException: 
org.apache.http.conn.HttpHostConnectException: Connection to 
<a  rel="nofollow" href="http://r4-riak-lei.lm4.eng.e-dialog.com:8098">http://r4-riak-lei.lm4.eng.e-dialog.com:8098</a> refused

at com.edialog.persistence.riak.RiakClient.walk(RiakClient.java:457)

at 
com.edialog.riak.persistence.RiakPerfTest$PerfClient.run(RiakPerfTest.java:86)

at java.lang.Thread.run(Thread.java:680)

Caused by: com.basho.riak.client.http.response.RiakIORuntimeException: 
org.apache.http.conn.HttpHostConnectException: Connection to 
<a  rel="nofollow" href="http://r4-riak-lei.lm4.eng.e-dialog.com:8098">http://r4-riak-lei.lm4.eng.e-dialog.com:8098</a> refused

at 
com.basho.riak.client.http.util.ClientHelper.executeMethod(ClientHelper.java:499)

at 
com.basho.riak.client.http.util.ClientHelper.executeMethod(ClientHelper.java:526)

at com.basho.riak.client.http.util.ClientHelper.walk(ClientHelper.java:289)

at com.basho.riak.client.http.RiakClient.walk(RiakClient.java:334)

at com.basho.riak.client.http.RiakClient.walk(RiakClient.java:347)

at 
com.basho.riak.client.raw.http.HTTPClientAdapter.linkWalk(HTTPClientAdapter.java:374)

at com.basho.riak.client.raw.ClusterClient.linkWalk(ClusterClient.java:225)

at com.basho.riak.client.query.LinkWalk.execute(LinkWalk.java:63)

at com.edialog.persistence.riak.RiakClient.walk(RiakClient.java:437)

... 2 more

Caused by: org.apache.http.conn.HttpHostConnectException: Connection to 
<a  rel="nofollow" href="http://r4-riak-lei.lm4.eng.e-dialog.com:8098">http://r4-riak-lei.lm4.eng.e-dialog.com:8098</a> refused

at 
org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:158)

at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:149)

at 
org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:121)

at 
org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:561)

at 
org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:415)

at 
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:820)

at 
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:754)

at 
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:732)

at 
com.basho.riak.client.http.util.ClientHelper.executeMethod(ClientHelper.java:474)

... 10 more

Caused by: java.net.ConnectException: Connection refused

at java.net.PlainSocketImpl.socketConnect(Native Method)

at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)

at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)

at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)

at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:432)

at java.net.Socket.connect(Socket.java:529)

at 
org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:123)

at 
org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:148)

... 18 more

Exception in thread &quot;Thread-9&quot; java.lang.RuntimeException: 
com.basho.riak.client.http.response.RiakIORuntimeException: 
org.apache.http.conn.HttpHostConnectException: Connection to 
<a  rel="nofollow" href="http://r4-riak-lei.lm4.eng.e-dialog.com:8098">http://r4-riak-lei.lm4.eng.e-dialog.com:8098</a> refused

at com.edialog.persistence.riak.RiakClient.walk(RiakClient.java:457)

at 
com.edialog.riak.persistence.RiakPerfTest$PerfClient.run(RiakPerfTest.java:86)

at java.lang.Thread.run(Thread.java:680)

Caused by: com.basho.riak.client.http.response.RiakIORuntimeException: 
org.apache.http.conn.HttpHostConnectException: Connection to 
<a  rel="nofollow" href="http://r4-riak-lei.lm4.eng.e-dialog.com:8098">http://r4-riak-lei.lm4.eng.e-dialog.com:8098</a> refused

at 
com.basho.riak.client.http.util.ClientHelper.executeMethod(ClientHelper.java:499)

at 
com.basho.riak.client.http.util.ClientHelper.executeMethod(ClientHelper.java:526)

at com.basho.riak.client.http.util.ClientHelper.walk(ClientHelper.java:289)

at com.basho.riak.client.http.RiakClient.walk(RiakClient.java:334)

at com.basho.riak.client.http.RiakClient.walk(RiakClient.java:347)

at 
com.basho.riak.client.raw.http.HTTPClientAdapter.linkWalk(HTTPClientAdapter.java:374)

at com.basho.riak.client.raw.ClusterClient.linkWalk(ClusterClient.java:225)

at com.basho.riak.client.query.LinkWalk.execute(LinkWalk.java:63)

at com.edialog.persistence.riak.RiakClient.walk(RiakClient.java:437)

... 2 more

Caused by: org.apache.http.conn.HttpHostConnectException: Connection to 
<a  rel="nofollow" href="http://r4-riak-lei.lm4.eng.e-dialog.com:8098">http://r4-riak-lei.lm4.eng.e-dialog.com:8098</a> refused

at 
org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:158)

at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:149)

at 
org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:121)

at 
org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:561)

at 
org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:415)

at 
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:820)

at 
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:754)

at 
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:732)

at 
com.basho.riak.client.http.util.ClientHelper.executeMethod(ClientHelper.java:474)

... 10 more

Caused by: java.net.ConnectException: Connection refused

at java.net.PlainSocketImpl.socketConnect(Native Method)

at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)

at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)

at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)

at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:432)

at java.net.Socket.connect(Socket.java:529)

at 
org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:123)

at 
org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:148)

... 18 more

Exception in thread &quot;Thread-4&quot; java.lang.RuntimeException: 
com.basho.riak.client.http.response.RiakIORuntimeException: 
org.apache.http.conn.HttpHostConnectException: Connection to 
<a  rel="nofollow" href="http://r4-riak-lei.lm4.eng.e-dialog.com:8098">http://r4-riak-lei.lm4.eng.e-dialog.com:8098</a> refused

at com.edialog.persistence.riak.RiakClient.walk(RiakClient.java:457)

at 
com.edialog.riak.persistence.RiakPerfTest$PerfClient.run(RiakPerfTest.java:86)

at java.lang.Thread.run(Thread.java:680)

Caused by: com.basho.riak.client.http.response.RiakIORuntimeException: 
org.apache.http.conn.HttpHostConnectException: Connection to 
<a  rel="nofollow" href="http://r4-riak-lei.lm4.eng.e-dialog.com:8098">http://r4-riak-lei.lm4.eng.e-dialog.com:8098</a> refused

at 
com.basho.riak.client.http.util.ClientHelper.executeMethod(ClientHelper.java:499)

at 
com.basho.riak.client.http.util.ClientHelper.executeMethod(ClientHelper.java:526)

at com.basho.riak.client.http.util.ClientHelper.walk(ClientHelper.java:289)

at com.basho.riak.client.http.RiakClient.walk(RiakClient.java:334)

at com.basho.riak.client.http.RiakClient.walk(RiakClient.java:347)

at 
com.basho.riak.client.raw.http.HTTPClientAdapter.linkWalk(HTTPClientAdapter.java:374)

at com.basho.riak.client.raw.ClusterClient.linkWalk(ClusterClient.java:225)

at com.basho.riak.client.query.LinkWalk.execute(LinkWalk.java:63)

at com.edialog.persistence.riak.RiakClient.walk(RiakClient.java:437)

... 2 more

Caused by: org.apache.http.conn.HttpHostConnectException: Connection to 
<a  rel="nofollow" href="http://r4-riak-lei.lm4.eng.e-dialog.com:8098">http://r4-riak-lei.lm4.eng.e-dialog.com:8098</a> refused

at 
org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:158)

at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:149)

at 
org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:121)

at 
org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:561)

at 
org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:415)

at 
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:820)

at 
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:754)

at 
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:732)

at 
com.basho.riak.client.http.util.ClientHelper.executeMethod(ClientHelper.java:474)

... 10 more

Caused by: java.net.ConnectException: Connection refused

at java.net.PlainSocketImpl.socketConnect(Native Method)

at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)

at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)

at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)

at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:432)

at java.net.Socket.connect(Socket.java:529)

at 
org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:123)

at 
org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:148)

... 18 more

Exception in thread &quot;Thread-2&quot; java.lang.RuntimeException: 
com.basho.riak.client.http.response.RiakIORuntimeException: 
org.apache.http.conn.HttpHostConnectException: Connection to 
<a  rel="nofollow" href="http://r4-riak-lei.lm4.eng.e-dialog.com:8098">http://r4-riak-lei.lm4.eng.e-dialog.com:8098</a> refused

at com.edialog.persistence.riak.RiakClient.walk(RiakClient.java:457)

at 
com.edialog.riak.persistence.RiakPerfTest$PerfClient.run(RiakPerfTest.java:86)

at java.lang.Thread.run(Thread.java:680)

Caused by: com.basho.riak.client.http.response.RiakIORuntimeException: 
org.apache.http.conn.HttpHostConnectException: Connection to 
<a  rel="nofollow" href="http://r4-riak-lei.lm4.eng.e-dialog.com:8098">http://r4-riak-lei.lm4.eng.e-dialog.com:8098</a> refused

at 
com.basho.riak.client.http.util.ClientHelper.executeMethod(ClientHelper.java:499)

at 
com.basho.riak.client.http.util.ClientHelper.executeMethod(ClientHelper.java:526)

at com.basho.riak.client.http.util.ClientHelper.walk(ClientHelper.java:289)

at com.basho.riak.client.http.RiakClient.walk(RiakClient.java:334)

at com.basho.riak.client.http.RiakClient.walk(RiakClient.java:347)

at 
com.basho.riak.client.raw.http.HTTPClientAdapter.linkWalk(HTTPClientAdapter.java:374)

at com.basho.riak.client.raw.ClusterClient.linkWalk(ClusterClient.java:225)

at com.basho.riak.client.query.LinkWalk.execute(LinkWalk.java:63)

at com.edialog.persistence.riak.RiakClient.walk(RiakClient.java:437)

... 2 more

Caused by: org.apache.http.conn.HttpHostConnectException: Connection to 
<a  rel="nofollow" href="http://r4-riak-lei.lm4.eng.e-dialog.com:8098">http://r4-riak-lei.lm4.eng.e-dialog.com:8098</a> refused

at 
org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:158)

at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:149)

at 
org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:121)

at 
org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:561)

at 
org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:415)

at 
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:820)

at 
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:754)

at 
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:732)

at 
com.basho.riak.client.http.util.ClientHelper.executeMethod(ClientHelper.java:474)

... 10 more

Caused by: java.net.ConnectException: Connection refused

at java.net.PlainSocketImpl.socketConnect(Native Method)

at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)

at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)

at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)

at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:432)

at java.net.Socket.connect(Socket.java:529)

at 
org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:123)

at 
org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:148)

... 18 more

Exception in thread &quot;Thread-8&quot; java.lang.RuntimeException: 
com.basho.riak.client.http.response.RiakIORuntimeException: 
org.apache.http.conn.HttpHostConnectException: Connection to 
<a  rel="nofollow" href="http://r4-riak-lei.lm4.eng.e-dialog.com:8098">http://r4-riak-lei.lm4.eng.e-dialog.com:8098</a> refused

at com.edialog.persistence.riak.RiakClient.walk(RiakClient.java:457)

at 
com.edialog.riak.persistence.RiakPerfTest$PerfClient.run(RiakPerfTest.java:86)

at java.lang.Thread.run(Thread.java:680)

Caused by: com.basho.riak.client.http.response.RiakIORuntimeException: 
org.apache.http.conn.HttpHostConnectException: Connection to 
<a  rel="nofollow" href="http://r4-riak-lei.lm4.eng.e-dialog.com:8098">http://r4-riak-lei.lm4.eng.e-dialog.com:8098</a> refused

at 
com.basho.riak.client.http.util.ClientHelper.executeMethod(ClientHelper.java:499)

at 
com.basho.riak.client.http.util.ClientHelper.executeMethod(ClientHelper.java:526)

at com.basho.riak.client.http.util.ClientHelper.walk(ClientHelper.java:289)

at com.basho.riak.client.http.RiakClient.walk(RiakClient.java:334)

at com.basho.riak.client.http.RiakClient.walk(RiakClient.java:347)

at 
com.basho.riak.client.raw.http.HTTPClientAdapter.linkWalk(HTTPClientAdapter.java:374)

at com.basho.riak.client.raw.ClusterClient.linkWalk(ClusterClient.java:225)

at com.basho.riak.client.query.LinkWalk.execute(LinkWalk.java:63)

at com.edialog.persistence.riak.RiakClient.walk(RiakClient.java:437)

... 2 more

Caused by: org.apache.http.conn.HttpHostConnectException: Connection to 
<a  rel="nofollow" href="http://r4-riak-lei.lm4.eng.e-dialog.com:8098">http://r4-riak-lei.lm4.eng.e-dialog.com:8098</a> refused

at 
org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:158)

at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:149)

at 
org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:121)

at 
org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:561)

at 
org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:415)

at 
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:820)

at 
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:754)

at 
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:732)

at 
com.basho.riak.client.http.util.ClientHelper.executeMethod(ClientHelper.java:474)

... 10 more

Caused by: java.net.ConnectException: Connection refused

at java.net.PlainSocketImpl.socketConnect(Native Method)

at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)

at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)

at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)

at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:432)

at java.net.Socket.connect(Socket.java:529)

at 
org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:123)

at 
org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:148)

... 18 more

Exception in thread &quot;Thread-10&quot; java.lang.RuntimeException: 
com.basho.riak.client.http.response.RiakIORuntimeException: 
org.apache.http.conn.HttpHostConnectException: Connection to 
<a  rel="nofollow" href="http://r4-riak-lei.lm4.eng.e-dialog.com:8098">http://r4-riak-lei.lm4.eng.e-dialog.com:8098</a> refused

at com.edialog.persistence.riak.RiakClient.walk(RiakClient.java:457)

at 
com.edialog.riak.persistence.RiakPerfTest$PerfClient.run(RiakPerfTest.java:86)

at java.lang.Thread.run(Thread.java:680)

Caused by: com.basho.riak.client.http.response.RiakIORuntimeException: 
org.apache.http.conn.HttpHostConnectException: Connection to 
<a  rel="nofollow" href="http://r4-riak-lei.lm4.eng.e-dialog.com:8098">http://r4-riak-lei.lm4.eng.e-dialog.com:8098</a> refused

at 
com.basho.riak.client.http.util.ClientHelper.executeMethod(ClientHelper.java:499)

at 
com.basho.riak.client.http.util.ClientHelper.executeMethod(ClientHelper.java:526)

at com.basho.riak.client.http.util.ClientHelper.walk(ClientHelper.java:289)

at com.basho.riak.client.http.RiakClient.walk(RiakClient.java:334)

at com.basho.riak.client.http.RiakClient.walk(RiakClient.java:347)

at 
com.basho.riak.client.raw.http.HTTPClientAdapter.linkWalk(HTTPClientAdapter.java:374)

at com.basho.riak.client.raw.ClusterClient.linkWalk(ClusterClient.java:225)

at com.basho.riak.client.query.LinkWalk.execute(LinkWalk.java:63)

at com.edialog.persistence.riak.RiakClient.walk(RiakClient.java:437)

... 2 more

Caused by: org.apache.http.conn.HttpHostConnectException: Connection to 
<a  rel="nofollow" href="http://r4-riak-lei.lm4.eng.e-dialog.com:8098">http://r4-riak-lei.lm4.eng.e-dialog.com:8098</a> refused

at 
org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:158)

at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:149)

at 
org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:121)

at 
org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:561)

at 
org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:415)

at 
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:820)

at 
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:754)

at 
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:732)

at 
com.basho.riak.client.http.util.ClientHelper.executeMethod(ClientHelper.java:474)

... 10 more

Caused by: java.net.ConnectException: Connection refused

at java.net.PlainSocketImpl.socketConnect(Native Method)

at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)

at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)

at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)

at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:432)

at java.net.Socket.connect(Socket.java:529)

at 
org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:123)

at 
org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:148)

... 18 more

Exception in thread &quot;Thread-7&quot; java.lang.RuntimeException: 
com.basho.riak.client.http.response.RiakIORuntimeException: 
org.apache.http.conn.HttpHostConnectException: Connection to 
<a  rel="nofollow" href="http://r4-riak-lei.lm4.eng.e-dialog.com:8098">http://r4-riak-lei.lm4.eng.e-dialog.com:8098</a> refused

at com.edialog.persistence.riak.RiakClient.walk(RiakClient.java:457)

at 
com.edialog.riak.persistence.RiakPerfTest$PerfClient.run(RiakPerfTest.java:86)

at java.lang.Thread.run(Thread.java:680)

Caused by: com.basho.riak.client.http.response.RiakIORuntimeException: 
org.apache.http.conn.HttpHostConnectException: Connection to 
<a  rel="nofollow" href="http://r4-riak-lei.lm4.eng.e-dialog.com:8098">http://r4-riak-lei.lm4.eng.e-dialog.com:8098</a> refused

at 
com.basho.riak.client.http.util.ClientHelper.executeMethod(ClientHelper.java:499)

at 
com.basho.riak.client.http.util.ClientHelper.executeMethod(ClientHelper.java:526)

at com.basho.riak.client.http.util.ClientHelper.walk(ClientHelper.java:289)

at com.basho.riak.client.http.RiakClient.walk(RiakClient.java:334)

at com.basho.riak.client.http.RiakClient.walk(RiakClient.java:347)

at 
com.basho.riak.client.raw.http.HTTPClientAdapter.linkWalk(HTTPClientAdapter.java:374)

at com.basho.riak.client.raw.ClusterClient.linkWalk(ClusterClient.java:225)

at com.basho.riak.client.query.LinkWalk.execute(LinkWalk.java:63)

at com.edialog.persistence.riak.RiakClient.walk(RiakClient.java:437)

... 2 more

Caused by: org.apache.http.conn.HttpHostConnectException: Connection to 
<a  rel="nofollow" href="http://r4-riak-lei.lm4.eng.e-dialog.com:8098">http://r4-riak-lei.lm4.eng.e-dialog.com:8098</a> refused

at 
org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:158)

at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:149)

at 
org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:121)

at 
org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:561)

at 
org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:415)

at 
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:820)

at 
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:754)

at 
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:732)

at 
com.basho.riak.client.http.util.ClientHelper.executeMethod(ClientHelper.java:474)

... 10 more

Caused by: java.net.ConnectException: Connection refused

at java.net.PlainSocketImpl.socketConnect(Native Method)

at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)

at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)

at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)

at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:432)

at java.net.Socket.connect(Socket.java:529)

at 
org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:123)

at 
org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:148)

... 18 more

Exception in thread &quot;Thread-3&quot; java.lang.RuntimeException: 
com.basho.riak.client.http.response.RiakIORuntimeException: 
org.apache.http.conn.HttpHostConnectException: Connection to 
<a  rel="nofollow" href="http://r4-riak-lei.lm4.eng.e-dialog.com:8098">http://r4-riak-lei.lm4.eng.e-dialog.com:8098</a> refused

at com.edialog.persistence.riak.RiakClient.walk(RiakClient.java:457)

at 
com.edialog.riak.persistence.RiakPerfTest$PerfClient.run(RiakPerfTest.java:86)

at java.lang.Thread.run(Thread.java:680)

Caused by: com.basho.riak.client.http.response.RiakIORuntimeException: 
org.apache.http.conn.HttpHostConnectException: Connection to 
<a  rel="nofollow" href="http://r4-riak-lei.lm4.eng.e-dialog.com:8098">http://r4-riak-lei.lm4.eng.e-dialog.com:8098</a> refused

at 
com.basho.riak.client.http.util.ClientHelper.executeMethod(ClientHelper.java:499)

at 
com.basho.riak.client.http.util.ClientHelper.executeMethod(ClientHelper.java:526)

at com.basho.riak.client.http.util.ClientHelper.walk(ClientHelper.java:289)

at com.basho.riak.client.http.RiakClient.walk(RiakClient.java:334)

at com.basho.riak.client.http.RiakClient.walk(RiakClient.java:347)

at 
com.basho.riak.client.raw.http.HTTPClientAdapter.linkWalk(HTTPClientAdapter.java:374)

at com.basho.riak.client.raw.ClusterClient.linkWalk(ClusterClient.java:225)

at com.basho.riak.client.query.LinkWalk.execute(LinkWalk.java:63)

at com.edialog.persistence.riak.RiakClient.walk(RiakClient.java:437)

... 2 more

Caused by: org.apache.http.conn.HttpHostConnectException: Connection to 
<a  rel="nofollow" href="http://r4-riak-lei.lm4.eng.e-dialog.com:8098">http://r4-riak-lei.lm4.eng.e-dialog.com:8098</a> refused

at 
org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:158)

at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:149)

at 
org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:121)

at 
org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:561)

at 
org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:415)

at 
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:820)

at 
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:754)

at 
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:732)

at 
com.basho.riak.client.http.util.ClientHelper.executeMethod(ClientHelper.java:474)

... 10 more

Caused by: java.net.ConnectException: Connection refused

at java.net.PlainSocketImpl.socketConnect(Native Method)

at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)

at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)

at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)

at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:432)

at java.net.Socket.connect(Socket.java:529)

at 
org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:123)

at 
org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:148)

... 18 more

Exception in thread &quot;Thread-6&quot; java.lang.RuntimeException: 
com.basho.riak.client.http.response.RiakIORuntimeException: 
org.apache.http.conn.HttpHostConnectException: Connection to 
<a  rel="nofollow" href="http://r4-riak-lei.lm4.eng.e-dialog.com:8098">http://r4-riak-lei.lm4.eng.e-dialog.com:8098</a> refused

at com.edialog.persistence.riak.RiakClient.walk(RiakClient.java:457)

at 
com.edialog.riak.persistence.RiakPerfTest$PerfClient.run(RiakPerfTest.java:86)

at java.lang.Thread.run(Thread.java:680)

Caused by: com.basho.riak.client.http.response.RiakIORuntimeException: 
org.apache.http.conn.HttpHostConnectException: Connection to 
<a  rel="nofollow" href="http://r4-riak-lei.lm4.eng.e-dialog.com:8098">http://r4-riak-lei.lm4.eng.e-dialog.com:8098</a> refused

at 
com.basho.riak.client.http.util.ClientHelper.executeMethod(ClientHelper.java:499)

at 
com.basho.riak.client.http.util.ClientHelper.executeMethod(ClientHelper.java:526)

at com.basho.riak.client.http.util.ClientHelper.walk(ClientHelper.java:289)

at com.basho.riak.client.http.RiakClient.walk(RiakClient.java:334)

at com.basho.riak.client.http.RiakClient.walk(RiakClient.java:347)

at 
com.basho.riak.client.raw.http.HTTPClientAdapter.linkWalk(HTTPClientAdapter.java:374)

at com.basho.riak.client.raw.ClusterClient.linkWalk(ClusterClient.java:225)

at com.basho.riak.client.query.LinkWalk.execute(LinkWalk.java:63)

at com.edialog.persistence.riak.RiakClient.walk(RiakClient.java:437)

... 2 more

Caused by: org.apache.http.conn.HttpHostConnectException: Connection to 
<a  rel="nofollow" href="http://r4-riak-lei.lm4.eng.e-dialog.com:8098">http://r4-riak-lei.lm4.eng.e-dialog.com:8098</a> refused

at 
org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:158)

at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:149)

at 
org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:121)

at 
org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:561)

at 
org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:415)

at 
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:820)

at 
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:754)

at 
org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:732)

at 
com.basho.riak.client.http.util.ClientHelper.executeMethod(ClientHelper.java:474)

... 10 more

Caused by: java.net.ConnectException: Connection refused

at java.net.PlainSocketImpl.socketConnect(Native Method)

at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)

at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)

at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)

at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:432)

at java.net.Socket.connect(Socket.java:529)

at 
org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:123)

at 
org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:148)

... 18 more


________________________________
The information contained in this electronic mail transmission is intended only 
for the use of the individual or entity named in this transmission. If you are 
not the intended recipient of this transmission, you are hereby notified that 
any disclosure, copying or distribution of the contents of this transmission is 
strictly prohibited and that you should delete the contents of this 
transmission from your system immediately. Any comments or statements contained 
in this transmission do not necessarily reflect the views or position of GSI 
Commerce, Inc. or its subsidiaries and/or affiliates.

_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre></blockquote><pre style="margin: 0em;">


_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg08625.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#08626">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#08626">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg08663.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg08625.html">HTTP or PB cluster client issue</a></span> <span class="sender italic">Lei Gu</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: HTTP or PB cluster client issue</span> <span class="sender italic">Guido Medina</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg08663.html">Re: HTTP or PB cluster client issue</a></span> <span class="sender italic">Brian Roach</span></li>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: HTTP or PB cluster client issue">
<input type="hidden" name="msgid" value="505C8B3A.50502@temetra.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg08626.html">
<input type="submit" value=" Guido Medina ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+HTTP+or+PB+cluster+client+issue%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg08625.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg08663.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">505C8B3A.50502@temetra.com</li>
</ul>
</div>
</body>
</html>
