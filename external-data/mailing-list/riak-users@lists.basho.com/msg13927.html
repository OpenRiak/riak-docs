<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: CRDT objects and 2i?</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="thrd2.html#13927" id="c">
<link rel="index" href="mail2.html#13927" id="i">
<link rel="prev" href="msg13926.html" id="p">
<link rel="next" href="msg13928.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg13927.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+CRDT+objects+and+2i%5C%3F%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: CRDT objects and 2i?</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Christian+Dahlqvist%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Christian Dahlqvist</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20140326" rel="nofollow">Wed, 26 Mar 2014 01:16:30 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi Paul,

CRDTs are stored as a normal object in Riak, although in a format that
allows Riak to resolve conflicts automatically, meaning that the normal
restrictions on object size applies. As secondary indexes do not have to be
related to the data in any way, Riak would not be able to determine how
secondary indexes are to be resolved, and secondary indexes are therefore
not supported for CRDTs.</pre><pre>

If you need to query CRDTs I would instead recommend enabling Riak Search
2.0 as this supports querying CRDTs through Solr.

Best regards,

Christian


On Wed, Mar 26, 2014 at 6:39 AM, Paul Walk &lt;p...@paulwalk.net&gt; wrote:

&gt; I'm still a little unclear on the relationship between CRDT, K/V objects
&gt; and buckets. I understand that bucket_types add a third level of
&gt; name-spacing, so I expected that so long as I used a bucket_type
&gt; consistently I would be able to use CRDT objects with 2i indexes. However,
&gt; using the Ruby client, I find that while this successfully returns my
&gt; previously saved CRDT map called 'my_map_object_key':
&gt;
&gt;     map =
&gt; Riak::Crdt::Map.new(my_bucket,'my_map_object_key','my_map_bucket_type')
&gt;
&gt; its key is not recognised in the same bucket, using the same bucket_type.
&gt; So this:
&gt;
&gt; puts my_bucket.get_index('$key','0'..'zzzzzzzz',{:bucket_type=&gt;
&gt; my_map_bucket_type}).size
&gt;
&gt; returns '0'.
&gt;
&gt; I suspect I am misunderstanding something fundamental - can anyone advise?
&gt;
&gt; Thanks,
&gt;
&gt; Paul
&gt;
&gt; -------------------------------------------
&gt; Paul Walk
&gt; <a  rel="nofollow" href="http://www.paulwalk.net">http://www.paulwalk.net</a>
&gt; -------------------------------------------
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg13926.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="thrd2.html#13927">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="mail2.html#13927">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg13928.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg13926.html">CRDT objects and 2i?</a></span> <span class="sender italic">Paul Walk</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: CRDT objects and 2i?</span> <span class="sender italic">Christian Dahlqvist</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13928.html">Re: CRDT objects and 2i?</a></span> <span class="sender italic">Paul Walk</span></li>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: CRDT objects and 2i?">
<input type="hidden" name="msgid" value="CAGLZ9HMYrhYKuHAd9xtSgyUeevufEab+3g60-1T1W7Sb-x0q1w@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg13927.html">
<input type="submit" value=" Christian Dahlqvist ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+CRDT+objects+and+2i%5C%3F%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg13926.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg13928.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CAGLZ9HMYrhYKuHAd9xtSgyUeevufEab+3g60-1T1W7Sb-x0q1w@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
