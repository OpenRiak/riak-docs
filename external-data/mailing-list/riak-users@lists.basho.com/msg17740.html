<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: throughput test & connection fail</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#17740" id="c">
<link rel="index" href="maillist.html#17740" id="i">
<link rel="prev" href="msg17739.html" id="p">
<link rel="next" href="msg17742.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg17740.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+throughput+test+%5C%26+connection+fail%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: throughput test & connection fail</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Magnus+Kessler%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Magnus Kessler</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20161114" rel="nofollow">Mon, 14 Nov 2016 04:28:27 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>On 12 November 2016 at 03:00, Jing Liu &lt;jingliu...@gmail.com&gt; wrote:

&gt; Hi,
&gt;
&gt; When I try to simply test the throughput of Risk in the setting that
&gt; just start a single node and utilize two clients to issue requests, I
&gt; got connection refused after the client's thread of sending GET
&gt; request overcome about 400. Actually the server crashed. Why is it and
&gt; how can I fix?
&gt;
&gt; Thanks
&gt; J.
&gt;</pre><pre>

Hi Jing,

You do not specify exactly how you perform your throughput test, so let me
first ask a few questions. How many concurrent requests are active against
the server at any given time? Can you clarify what you mean by &quot;the server
crashed&quot;? Did the riak process actually terminate?

What hardware environment does Riak run on? Please provide some information
about CPU, memory and most importantly your disk IO subsystem.

How big are the objects that you send to / request from Riak?

Even on moderate hardware, a single node should be able to serve hundreds
of requests per second. However, every system can be pushed to the limits
of what the hardware can support, and Riak is no exception. Depending on
the bottlenecks, an overload can manifest itself in a multitude of
different ways.

For load tests, I recommend to start with a small, sustainable load and
ramp it up to establish which subsystem is the bottleneck. Please monitor
the OS and Riak's performance carefully during the test. Riak exposes many
performance metrics as JSON through its HTTP stats endpoint
(http://&lt;node&gt;:8098/stats).
Consider ingesting these into your favourite monitoring solution. OS
metrics like CPU, network and IO usage should also be collected and
graphed. One easy open source solution that's gaining traction recently is
netdata (<a  rel="nofollow" href="https://github.com/firehol/netdata">https://github.com/firehol/netdata</a>).

Kind Regards,

Magnus

-- 
Magnus Kessler
Client Services Engineer
Basho Technologies Limited

Registered Office - 8 Lincolnâ€™s Inn Fields London WC2A 3BP Reg 07970431
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg17739.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#17740">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#17740">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg17742.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg17739.html">throughput test &amp; connection fail</a></span> <span class="sender italic">Jing Liu</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: throughput test &amp; connection fail</span> <span class="sender italic">Magnus Kessler</span></li>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: throughput test &amp; connection fail">
<input type="hidden" name="msgid" value="CAL3YJWZz_T+fGEPQN40CL4Wpki5qFedG-1toSMY=KiHtzsis3A@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg17740.html">
<input type="submit" value=" Magnus Kessler ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+throughput+test+%5C%26+connection+fail%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg17739.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg17742.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CAL3YJWZz_T+fGEPQN40CL4Wpki5qFedG-1toSMY=KiHtzsis3A@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
