<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Innostore crash - force recovery not working via innodump</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#01581" id="c">
<link rel="index" href="maillist.html#01581" id="i">
<link rel="prev" href="msg01579.html" id="p">
<link rel="next" href="#" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg01581.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Innostore+crash+%5C-+force+recovery+not+working+via+innodump%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Innostore crash - force recovery not working via innodump</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22David+Smith%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">David Smith</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20101119" rel="nofollow">Fri, 19 Nov 2010 20:54:47 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>On Fri, Nov 19, 2010 at 2:26 PM, Rudy X. Desjardins &lt;r...@sandbenders.ca&gt; wrote:
&gt;
&gt; I've tried to run innodump (from /priv in the innostore src/build dir)
&gt; to dump the data with no luck - I get the same error message (first
&gt; one, below) as when I just try to re-start the Riak node, unless I use
&gt; -force_recovery 6 (all other levels produce original error), which
&gt; produces the second error below.</pre><pre>

&gt; Any ideas how I might go about fixing this, or should I assume that
&gt; node/data is dead/lost and just re-initialize the innostore for this
&gt; node from scratch?

Unfortunately, it looks look Inno is truly and irrevocably unhappy
here. Your best bet to is to assume the node is dead/lost and
re-initialize the innostore accordingly. Read-repair should take care
of rebuilding the missing data from other replicas over time.
Depending on your load profile and key access distribution, this may
impose additional load on your cluster as reads will generate writes
to repair the missing data.

Have you considered using bitcask? It has a slightly better recovery
story, imnsho... :)

D.

_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg01579.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#01581">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#01581">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright buttondisabled" accesskey="n" href="#">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg01579.html">Innostore crash - force recovery not working via innodu...</a></span> <span class="sender italic">Rudy X. Desjardins</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Innostore crash - force recovery not working v...</span> <span class="sender italic">David Smith</span></li>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Innostore crash - force recovery not working via innodump">
<input type="hidden" name="msgid" value="AANLkTimgO90-tA6ULFNB0vn-Dd-nn417LnZ3BtGC4g9h@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg01581.html">
<input type="submit" value=" David Smith ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Innostore+crash+%5C-+force+recovery+not+working+via+innodump%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg01579.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="#" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">AANLkTimgO90-tA6ULFNB0vn-Dd-nn417LnZ3BtGC4g9h@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
