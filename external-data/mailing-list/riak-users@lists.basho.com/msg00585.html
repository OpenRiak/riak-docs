<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: [ANN] Riak Release 0.11.0</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#00585" id="c">
<link rel="index" href="maillist.html#00585" id="i">
<link rel="prev" href="msg00584.html" id="p">
<link rel="next" href="msg00587.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg00585.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+%5C%5BANN%5C%5D+Riak+Release+0.11.0%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: [ANN] Riak Release 0.11.0</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Alan+McConnell%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Alan McConnell</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20100614" rel="nofollow">Mon, 14 Jun 2010 10:59:47 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hey Dan,
I have a 2-node cluster with default bucket settings (N=3, etc.), and if I
take one of the boxes down (and perform reads with R=1) I get tons of &quot;key
not found&quot; errors for keys I know exist in the cluster.  Seems like for many
keys, all 3 replicas live on one host.  From what you've written here
though, it seems like that should not happen.  Do you know of any way my
cluster could have gotten into this state?</pre><pre>

I did run a restore on this cluster using a riak-admin backup from a
different, single-node cluster.  I wonder if that caused an uneven
distribution.

Any help would be appreciated.  As it stands now our 2-node cluster has
serious read problems if either node goes down.

-Alan

On Sat, Jun 12, 2010 at 3:00 PM, Dan Reverri &lt;d...@basho.com&gt; wrote:

&gt; Hi Jason,
&gt;
&gt; Regarding rack-aware distribution, at this time Riak is not rack-aware.
&gt; I've filed a request in Bugzilla for this feature:
&gt; <a  rel="nofollow" href="http://issues.basho.com/show_bug.cgi?id=245">http://issues.basho.com/show_bug.cgi?id=245</a>
&gt;
&gt; Regarding general replica distribution, Riak guarantees that replicas will
&gt; be placed on at least N-1 distinct nodes when physically possible*. This
&gt; means for N=3, replicas will be placed on at least 2 distinct nodes. In most
&gt; cases replicas will be placed on N distinct nodes but there are some
&gt; degenerate cases where replicas are only placed on 2 nodes. More information
&gt; can be found here:
&gt; <a  rel="nofollow" href="http://issues.basho.com/show_bug.cgi?id=228">http://issues.basho.com/show_bug.cgi?id=228</a>
&gt;
&gt; *When physically possible refers to having at least N physical nodes
&gt; available. Meaning you can't place 3 replicas on distinct nodes if you only
&gt; have 2 nodes.
&gt;
&gt; Thanks,
&gt; Dan
&gt;
&gt; Daniel Reverri
&gt; Developer Advocate
&gt; Basho Technologies, Inc.
&gt; d...@basho.com
&gt;
&gt;
&gt;
&gt; On Wed, Jun 9, 2010 at 1:47 PM, Jason J. W. Williams &lt;
&gt; jasonjwwilli...@gmail.com&gt; wrote:
&gt;
&gt;&gt; Hi David,
&gt;&gt;
&gt;&gt; Thank you for responding. On a separate note, will there be any way to
&gt;&gt; make Riak rack-aware for data distribution?
&gt;&gt;
&gt;&gt; It's concerning for removing nodes that you can't guarantee there
&gt;&gt; aren't at least 2 out of 3/4 copies on different nodes.
&gt;&gt;
&gt;&gt; -J
&gt;&gt;
&gt;&gt; On Wed, Jun 9, 2010 at 2:21 PM, David Smith &lt;diz...@basho.com&gt; wrote:
&gt;&gt; &gt; Jason,
&gt;&gt; &gt; Our testing has shown bitcask to have as good recovery as DETS (the
&gt;&gt; previous
&gt;&gt; &gt; default backend), and MUCH better overall performance. However, I'm
&gt;&gt; going to
&gt;&gt; &gt; stop short of saying definitively that the recovery of bitcask is as
&gt;&gt; good
&gt;&gt; &gt; as/better than innostore, simply because we don't have enough data to
&gt;&gt; &gt; support it...yet. :)
&gt;&gt; &gt; I will say, however, that the append-only nature of bitcask minimizes
&gt;&gt; the
&gt;&gt; &gt; opportunity to lose and/or corrupt data, not to mention obviating the
&gt;&gt; need
&gt;&gt; &gt; for log files ala InnoDB.
&gt;&gt; &gt; D.
&gt;&gt; &gt;
&gt;&gt; &gt; On Wed, Jun 9, 2010 at 1:59 PM, Jason J. W. Williams
&gt;&gt; &gt; &lt;jasonjwwilli...@gmail.com&gt; wrote:
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; Does the bitcask back end handle crash recovery as well as the
&gt;&gt; &gt;&gt; InnoStore backend?
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; -J
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; On Wed, Jun 9, 2010 at 1:55 PM, Jon Meredith &lt;jmered...@basho.com&gt;
&gt;&gt; wrote:
&gt;&gt; &gt;&gt; &gt; Hello, Riak users.  We are excited to announce the release of Riak
&gt;&gt; &gt;&gt; &gt; version
&gt;&gt; &gt;&gt; &gt; 0.11.
&gt;&gt; &gt;&gt; &gt;
&gt;&gt; &gt;&gt; &gt; Pre-built installations and source tarballs are available at:
&gt;&gt; &gt;&gt; &gt; <a  rel="nofollow" href="http://downloads.basho.com/">http://downloads.basho.com/</a>
&gt;&gt; &gt;&gt; &gt;
&gt;&gt; &gt;&gt; &gt; Release notes are at (also copied below):
&gt;&gt; &gt;&gt; &gt; <a  rel="nofollow" href="http://downloads.basho.com/riak/riak-0.11/riak-0.11.0.txt">http://downloads.basho.com/riak/riak-0.11/riak-0.11.0.txt</a>
&gt;&gt; &gt;&gt; &gt;
&gt;&gt; &gt;&gt; &gt; IMPORTANT: If you are upgrading an existing Riak cluster, please read
&gt;&gt; &gt;&gt; &gt; the
&gt;&gt; &gt;&gt; &gt; transition document at
&gt;&gt; &gt;&gt; &gt; <a  rel="nofollow" href="http://bitbucket.org/basho/riak/src/4235ceeb8d6/TRANSITION">http://bitbucket.org/basho/riak/src/4235ceeb8d6/TRANSITION</a>
&gt;&gt; &gt;&gt; &gt;
&gt;&gt; &gt;&gt; &gt; Cheers,
&gt;&gt; &gt;&gt; &gt; The Basho Riak Team
&gt;&gt; &gt;&gt; &gt;
&gt;&gt; &gt;&gt; &gt; -------------------------
&gt;&gt; &gt;&gt; &gt; Riak 0.11.0 Release Notes
&gt;&gt; &gt;&gt; &gt; -------------------------
&gt;&gt; &gt;&gt; &gt;
&gt;&gt; &gt;&gt; &gt; Bitcask has arrived as the new default backend for Riak.  Bitcask is
&gt;&gt; &gt;&gt; &gt; Basho's
&gt;&gt; &gt;&gt; &gt; new key/value store that should provide good balanced performance out
&gt;&gt; &gt;&gt; &gt; of the box on most systems.  Read more about it from the initial
&gt;&gt; &gt;&gt; &gt; announcement here <a  rel="nofollow" href="http://blog.basho.com/2010/04/27/hello,-bitcask/">http://blog.basho.com/2010/04/27/hello,-bitcask/</a>
&gt;&gt; &gt;&gt; &gt;
&gt;&gt; &gt;&gt; &gt; Users that wish to upgrade from another backend will need to backup
&gt;&gt; &gt;&gt; &gt; their
&gt;&gt; &gt;&gt; &gt; cluster (using riak-admin) before changing the backend in app.config,
&gt;&gt; &gt;&gt; &gt; restart
&gt;&gt; &gt;&gt; &gt; riak and restore from the backup into bitcask.
&gt;&gt; &gt;&gt; &gt;
&gt;&gt; &gt;&gt; &gt; The protocol buffers client (PBC) interface has been enhanced to
&gt;&gt; &gt;&gt; &gt; add map/reduce support and access to simple bucket properties.  The
&gt;&gt; &gt;&gt; &gt; erlang and python clients have been updated accordingly.
&gt;&gt; &gt;&gt; &gt;
&gt;&gt; &gt;&gt; &gt; Put operations using the local erlang client that request a
&gt;&gt; returnbody
&gt;&gt; &gt;&gt; &gt; have received a performance enhancement.  Internally the put
&gt;&gt; operation
&gt;&gt; &gt;&gt; &gt; now returns the body directly, so an additional get is no longer
&gt;&gt; &gt;&gt; &gt; required.  The PBC and HTTP interfaces have been updated to use
&gt;&gt; &gt;&gt; &gt; this new mechanism.
&gt;&gt; &gt;&gt; &gt;
&gt;&gt; &gt;&gt; &gt; Enhancements
&gt;&gt; &gt;&gt; &gt; --------
&gt;&gt; &gt;&gt; &gt;  58 - provide default content-type of application/octet-stream if
&gt;&gt; none
&gt;&gt; &gt;&gt; &gt;        present in the object.
&gt;&gt; &gt;&gt; &gt;  74 - create ring directory if non-existant
&gt;&gt; &gt;&gt; &gt; 142 - riak-admin leave restored
&gt;&gt; &gt;&gt; &gt;
&gt;&gt; &gt;&gt; &gt; Bugs Fixed
&gt;&gt; &gt;&gt; &gt; ----------
&gt;&gt; &gt;&gt; &gt;  35 - {error, blah} messages are now passed on to javascript
&gt;&gt; map/reduce
&gt;&gt; &gt;&gt; &gt; jobs
&gt;&gt; &gt;&gt; &gt; 104 - missing bucket/key into map/reduce job crashed it. Fixed.
&gt;&gt; &gt;&gt; &gt; 193 - list keys sometimes uses downed nodes. Fixed.
&gt;&gt; &gt;&gt; &gt; 208 - deleting a key with a post-commit hook set crashed riak. Fixed.
&gt;&gt; &gt;&gt; &gt;
&gt;&gt; &gt;&gt; &gt;
&gt;&gt; &gt;&gt; &gt; _______________________________________________
&gt;&gt; &gt;&gt; &gt; riak-users mailing list
&gt;&gt; &gt;&gt; &gt; riak-users@lists.basho.com
&gt;&gt; &gt;&gt; &gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;&gt; &gt;&gt; &gt;
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; _______________________________________________
&gt;&gt; &gt;&gt; riak-users mailing list
&gt;&gt; &gt;&gt; riak-users@lists.basho.com
&gt;&gt; &gt;&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt;
&gt;&gt; _______________________________________________
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;&gt;
&gt;
&gt;
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;
&gt;
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg00584.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#00585">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#00585">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg00587.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg00543.html">[ANN] Riak Release 0.11.0</a></span> <span class="sender italic">Jon Meredith</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00544.html">Re: [ANN] Riak Release 0.11.0</a></span> <span class="sender italic">Jason J. W. Williams</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00545.html">Re: [ANN] Riak Release 0.11.0</a></span> <span class="sender italic">David Smith</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00546.html">Re: [ANN] Riak Release 0.11.0</a></span> <span class="sender italic">Jason J. W. Williams</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00581.html">Re: [ANN] Riak Release 0.11.0</a></span> <span class="sender italic">Dan Reverri</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00583.html">Re: [ANN] Riak Release 0.11.0</a></span> <span class="sender italic">Jason J. W. Williams</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00584.html">Re: [ANN] Riak Release 0.11...</a></span> <span class="sender italic">Dan Reverri</span></li>
</ul></li>
<li class="icons-email tSliceCur"><span class="subject">Re: [ANN] Riak Release 0.11.0</span> <span class="sender italic">Alan McConnell</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00587.html">Re: [ANN] Riak Release 0.11...</a></span> <span class="sender italic">Justin Sheehy</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00589.html">Re: [ANN] Riak Release ...</a></span> <span class="sender italic">Alan McConnell</span></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg00551.html">Re: [ANN] Riak Release 0.11.0</a></span> <span class="sender italic">Germain Maurice</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00552.html">Re: [ANN] Riak Release 0.11.0</a></span> <span class="sender italic">Justin Sheehy</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00565.html">Re: [ANN] Riak Release 0.11.0</a></span> <span class="sender italic">Jason J. W. Williams</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00566.html">Re: [ANN] Riak Release 0.11...</a></span> <span class="sender italic">David Smith</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00569.html">Re: [ANN] Riak Release ...</a></span> <span class="sender italic">Jason J. W. Williams</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: [ANN] Riak Release 0.11.0">
<input type="hidden" name="msgid" value="AANLkTilNggtQ5i7E5lgtQ9yFQu90eZpEZqwAbZnPM8qu@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg00585.html">
<input type="submit" value=" Alan McConnell ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+%5C%5BANN%5C%5D+Riak+Release+0.11.0%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg00584.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg00587.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">AANLkTilNggtQ5i7E5lgtQ9yFQu90eZpEZqwAbZnPM8qu@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
