<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Riak and no of clients limit?</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#01025" id="c">
<link rel="index" href="maillist.html#01025" id="i">
<link rel="prev" href="msg01024.html" id="p">
<link rel="next" href="msg01027.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg01025.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Riak+and+no+of+clients+limit%5C%3F%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Riak and no of clients limit?</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22OJ+Reeves%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">OJ Reeves</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20100904" rel="nofollow">Sat, 04 Sep 2010 15:37:58 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi everyone,

Excuse me jumping on the bandwagon, but I was thinking of doing something
slightly different and would be keen to hear everyone's thoughts.</pre><pre>

The plan was to create a Riak client connection for every request coming in
(maintained for the lifetime of the request). That connection would connect
to any one of the nodes in the Riak cluster (via some simple algo such
round-robin). I was also thinking of building something into this mechanism
which would be able to manage an open list of potential target nodes to
connect to and handle when new nodes join the cluster or when nodes go
offline in an effort to make sure that the web application will &quot;always&quot;
know of a valid node to connect to.

Does this seem like overkill? Would the effort in implementing such
behaviour be worth the reward?

Many thanks for any insights.

OJ


On Sun, Sep 5, 2010 at 7:59 AM, Seth Falcon &lt;s...@userprimary.net&gt; wrote:

&gt; On Sat, Sep 4, 2010 at 7:18 AM, Justin Sheehy &lt;jus...@basho.com&gt; wrote:
&gt; &gt; Hello, Senthilkumar.
&gt; &gt;
&gt; &gt; On Fri, Sep 3, 2010 at 4:28 PM, Senthilkumar Peelikkampatti wrote:
&gt; &gt;
&gt; &gt;&gt;        I am using Riak with distributed Erlang and I wanted to know
&gt; what's
&gt; &gt;&gt; the limit on # of riak clients (I used it before erlang pb client, so
&gt; yet to
&gt; &gt;&gt; migrate). I am using single client to talk to Riak, is it better? or in
&gt; web,
&gt; &gt;&gt; is it ok to create a client per request? I looked riak_kv_wm_raw.erl
&gt; which
&gt; &gt;&gt; seems using a connection per request but it is a erlang local_client.
&gt; &gt;
&gt; &gt; There is not a fixed limit imposed by Riak, but it is a general good
&gt; &gt; practice to re-use clients for subsequent (non-concurrent) requests.
&gt;
&gt; I'm working on a project where we have a webmachine-backed service
&gt; that talks to Riak.  I currently initialize one pb client for each
&gt; node in the cluster as part of the webmachine startup.  Then the
&gt; resources in the webmachine app ask for one of these clients for each
&gt; request.
&gt;
&gt; Your comment above about reusing clients for non-concurrent requests
&gt; makes me wonder if this is the wrong approach.  Comments or
&gt; suggestions?
&gt;
&gt; Thanks,
&gt;
&gt; + seth
&gt;
&gt; --
&gt; Seth Falcon | @sfalcon | <a  rel="nofollow" href="http://userprimary.net/">http://userprimary.net/</a>
&gt;
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;



-- 

OJ Reeves
<a  rel="nofollow" href="http://buffered.io/">http://buffered.io/</a>
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg01024.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#01025">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#01025">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg01027.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg01012.html">Riak and no of clients limit?</a></span> <span class="sender italic">Senthilkumar Peelikkampatti</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg01016.html">Re: Riak and no of clients limit?</a></span> <span class="sender italic">Justin Sheehy</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg01024.html">Re: Riak and no of clients limit?</a></span> <span class="sender italic">Seth Falcon</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Riak and no of clients limit?</span> <span class="sender italic">OJ Reeves</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg01027.html">Re: Riak and no of clients li...</a></span> <span class="sender italic">Wilson MacGyver</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg01028.html">Re: Riak and no of clien...</a></span> <span class="sender italic">OJ Reeves</span></li>
</ul></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg01026.html">Re: Riak and no of clients limit?</a></span> <span class="sender italic">Justin Sheehy</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg01029.html">Re: Riak and no of clients li...</a></span> <span class="sender italic">Seth Falcon</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg01030.html">Re: Riak and no of clien...</a></span> <span class="sender italic">Justin Sheehy</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Riak and no of clients limit?">
<input type="hidden" name="msgid" value="AANLkTimh8fdqDXTufOXuNyh_7yZ2f3F7vzcOt9ROZAWZ@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg01025.html">
<input type="submit" value=" OJ Reeves ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Riak+and+no+of+clients+limit%5C%3F%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg01024.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg01027.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">AANLkTimh8fdqDXTufOXuNyh_7yZ2f3F7vzcOt9ROZAWZ@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
