<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Can't start second node in local machine</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="thrd4.html#05682" id="c">
<link rel="index" href="mail4.html#05682" id="i">
<link rel="prev" href="msg05679.html" id="p">
<link rel="next" href="msg05685.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg05682.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Can%27t+start+second+node+in+local+machine%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Can't start second node in local machine</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Jeremiah+Peschka%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Jeremiah Peschka</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20111119" rel="nofollow">Sat, 19 Nov 2011 11:59:18 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>There are no books about Riak, yet. Mathias Meyer wrote a NoSQL handbook that 
has a chapter about Riak, but I've never read it. Seven Databases in Seven 
Weeks is rumored to contain a chapter about Riak, but it's just in a planning 
stage, I believe. You can search the mailing list archives through markmail: 
<a  rel="nofollow" href="http://markmail.org/search/?q=list%3Acom.basho.lists.riak-users">http://markmail.org/search/?q=list%3Acom.basho.lists.riak-users</a></pre><pre>

The Fast Track doesn't do anything hidden, it uses `make` and `rebar` to create 
a 4 node cluster by copying the configuration and binary folders. You can see 
what happens by looking in the Makefile for the devrel section. It's pretty 
dull and it just copies configuration around with some magic to change the port 
numbers.

I can appreciate wanting to manually configure Riak and all, but keep in mind 
that having multiple Riak nodes on the same physical machine is not recommended 
for production use. The only thing that you're going to be change is the name 
you're using for the node. When in doubt, take the path of least resistance.

If you're still intent on doing all of this by hand, you need to make sure that 
you also change the handoff_port and pb_port in the node configuration file. 
When I run a diff on my node1 and node2 config files, I see the following:

$ diff dev1/etc/app.config dev2/etc/app.config 
11c11
&lt;               {http, [ {&quot;0.0.0.0&quot;, 8091 } ]},
---
&gt;               {http, [ {&quot;0.0.0.0&quot;, 8092 } ]},
15c15
&lt;               %{https, [{ &quot;0.0.0.0&quot;, 8091 }]},
---
&gt;               %{https, [{ &quot;0.0.0.0&quot;, 8092 }]},
26c26
&lt;               {handoff_port, 8101 },
---
&gt;               {handoff_port, 8102 },
55c55
&lt;             {pb_port, 8081 },
---
&gt;             {pb_port, 8082 },

HTH

---
Jeremiah Peschka - Founder, Brent Ozar PLF, LLC
Microsoft SQL Server MVP

On Nov 19, 2011, at 1:14 AM, yozloy wrote:

&gt; Hey Jeremiah,
&gt; 
&gt; I change the port that RIak listening on by changing the {http, 
&gt; [{&quot;127.0.0.1&quot;,8098}]} to {http, [{127.0.0.1}, 8099]} in the etc/app.config, 
&gt; but the Node 'riak2@127.0.0.1' not responding to pings. 
&gt; 
&gt; And the fast track seems to me use some sh file hidden some command, I want 
&gt; do manually configure RIak.
&gt; 
&gt; Could you recommend some books or any reading material about Riak besides the 
&gt; online official documentation? 
&gt; 
&gt; Thanks
&gt;   
&gt; On Nov 19, 2011, at 12:08 PM, Jeremiah Peschka wrote:
&gt; 
&gt;&gt; 
&gt;&gt; Did you change the ports that Risk is listening on for the second instance?
&gt;&gt; 
&gt;&gt; If you follow the Riak fast track, it explains how to set up a 4 node 
&gt;&gt; cluster.
&gt;&gt; 
&gt;&gt; Jeremiah Peschka
&gt;&gt; Founder, Brent Ozar PLF
&gt;&gt; 
&gt;&gt; On Nov 18, 2011 7:24 PM, &quot;yozloy&quot; &lt;yoz...@me.com&gt; wrote:
&gt;&gt; I copied the riak-1.0.2 folder, and change the node name to riak2@127.0.0.1 
&gt;&gt; in the vm.args file. But the changed node refused to start, it returned
&gt;&gt; 
&gt;&gt; Argo:bin yozloy$ ./riak start
&gt;&gt; !!!!
&gt;&gt; !!!! WARNING: ulimit -n is 256; 1024 is the recommended minimum.
&gt;&gt; !!!!
&gt;&gt; Riak failed to start within 15 seconds,
&gt;&gt; see the output of 'riak console' for more information.
&gt;&gt; If you want to wait longer, set the environment variable
&gt;&gt; WAIT_FOR_ERLANG to the number of seconds to wait.
&gt;&gt; Argo:bin yozloy$ ls
&gt;&gt; 
&gt;&gt; 
&gt;&gt; _______________________________________________
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt; 


_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg05679.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="thrd4.html#05682">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="mail4.html#05682">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg05685.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg05677.html">Can't start second node in local machine</a></span> <span class="sender italic">yozloy</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg05678.html">Re: Can't start second node in local machine</a></span> <span class="sender italic">Jeff Kirkell</span></li>
<li class="icons-email"><span class="subject"><a href="msg05679.html">Re: Can't start second node in local machine</a></span> <span class="sender italic">Jeremiah Peschka</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Can't start second node in local machine</span> <span class="sender italic">Jeremiah Peschka</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg05685.html">Re: Can't start second node in local machine</a></span> <span class="sender italic">Jeff Kirkell</span></li>
<li class="icons-email"><span class="subject"><a href="msg06394.html">Re: Can't start second node in local machine</a></span> <span class="sender italic">Jim R. Wilson</span></li>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Can't start second node in local machine">
<input type="hidden" name="msgid" value="819DDFB6-34DF-4607-9602-61A1E0D478F5@gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg05682.html">
<input type="submit" value=" Jeremiah Peschka ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Can%27t+start+second+node+in+local+machine%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg05679.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg05685.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">819DDFB6-34DF-4607-9602-61A1E0D478F5@gmail.com</li>
</ul>
</div>
</body>
</html>
