<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: different versions in upgrade</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="thrd11.html#11994" id="c">
<link rel="index" href="mail11.html#11994" id="i">
<link rel="prev" href="msg11993.html" id="p">
<link rel="next" href="msg11999.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg11994.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+different+versions+in+upgrade%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: different versions in upgrade</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Guido+Medina%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Guido Medina</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20130813" rel="nofollow">Tue, 13 Aug 2013 05:51:50 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<tt>Same here, except that Riak 1.3.2 did that for me automatically. As 
</tt><tt>Jeremiah mentioned, you should go first to 1.3.2 on all nodes, per node 
</tt><tt>the first time Riak starts it will take some time upgrading the 2i 
</tt><tt>indexes storage format, if you see any weirdness then execute 
</tt><tt>&quot;riak-admin reformat-indexes&quot; as soon as you upgrade a node, 1 by 1.
</tt><pre style="margin: 0em;">

</pre><tt>Before you even start read the release notes for each major version 
</tt><tt>besides the rolling upgrade doc:
</tt><pre style="margin: 0em;"></pre><pre>

*Riak 1.3.2:* <a  rel="nofollow" href="https://github.com/basho/riak/blob/1.3/RELEASE-NOTES.md">https://github.com/basho/riak/blob/1.3/RELEASE-NOTES.md</a>
*Riak 1.4.1:* <a  rel="nofollow" href="https://github.com/basho/riak/blob/1.4/RELEASE-NOTES.md">https://github.com/basho/riak/blob/1.4/RELEASE-NOTES.md</a>

HTH,

Guido.

On 13/08/13 13:41, Bhuwan Chawla wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
Having done a similar upgrade, a gotcha to keep in mind:


&quot;Note for Secondary Index users
</pre><tt>If you use Riak's Secondary Indexes and are upgrading from a version 
</tt><tt>prior to Riak version 1.3.1, you need to reformat the indexes using 
</tt><tt>the riak-admin reformat-indexes command&quot;
</tt><pre style="margin: 0em;">



</pre><tt>On Tue, Aug 13, 2013 at 8:36 AM, Jeremiah Peschka 
</tt><tt>&lt;jeremiah.pesc...@gmail.com &lt;<a  rel="nofollow" href="mailto:jeremiah.pesc...@gmail.com">mailto:jeremiah.pesc...@gmail.com</a>&gt;&gt; wrote:
</tt><pre style="margin: 0em;">

    From
    <a  rel="nofollow" href="http://docs.basho.com/riak/latest/ops/running/rolling-upgrades/">http://docs.basho.com/riak/latest/ops/running/rolling-upgrades/</a> it
    looks like you should upgrade to 1.3.2 and then 1.4.1

    Depending on how badly you need the extra capacity, it would
    probably be better to start by upgrading all nodes and then adding
    the new one.

</pre><tt>    -- 
</tt><tt>    Jeremiah Peschka - Founder, Brent Ozar Unlimited
</tt><pre style="margin: 0em;">
    MCITP: SQL Server 2008, MVP
    Cloudera Certified Developer for Apache Hadoop

    On Aug 13, 2013, at 5:06 AM, Louis-Philippe Perron
    &lt;lpper...@gmail.com &lt;<a  rel="nofollow" href="mailto:lpper...@gmail.com">mailto:lpper...@gmail.com</a>&gt;&gt; wrote:

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
    Hi riak peoples,
    I'm in the process of adding a new node to a aging (1 node)
    cluster.  I would like to know what would be the prefered
    incrementing upgrade to get all my nodes on the latest riak
    version.  The best scenario would also have the least downtime.
     The old node is at riak version 1.2.1.

    My actual plan is:

    - install riak 1.4.1 on the new node
    - add the new 1.4.1 node to the old 1.2.1 cluster.
    - bring the 1.2.1 node offline
    - upgrade the 1.2.1 node to 1.4.1
    - put the upgraded node back online

    will this work?
    thanks!


    _______________________________________________
    riak-users mailing list
    riak-users@lists.basho.com &lt;<a  rel="nofollow" href="mailto:riak-users@lists.basho.com">mailto:riak-users@lists.basho.com</a>&gt;
    <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre></blockquote><pre style="margin: 0em;">

    _______________________________________________
    riak-users mailing list
    riak-users@lists.basho.com &lt;<a  rel="nofollow" href="mailto:riak-users@lists.basho.com">mailto:riak-users@lists.basho.com</a>&gt;
    <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>




_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre></blockquote><pre style="margin: 0em;">

</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg11993.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="thrd11.html#11994">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="mail11.html#11994">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg11999.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg11990.html">different versions in upgrade</a></span> <span class="sender italic">Louis-Philippe Perron</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg11992.html">Re: different versions in upgrade</a></span> <span class="sender italic">Jeremiah Peschka</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg11993.html">Re: different versions in upgrade</a></span> <span class="sender italic">Bhuwan Chawla</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: different versions in upgrade</span> <span class="sender italic">Guido Medina</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg11999.html">Re: different versions in upgrade</a></span> <span class="sender italic">Guido Medina</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg12001.html">Re: different versions in upgr...</a></span> <span class="sender italic">Charlie Voiselle</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg12027.html">Re: different versions in ...</a></span> <span class="sender italic">Louis-Philippe Perron</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: different versions in upgrade">
<input type="hidden" name="msgid" value="520A2B84.5070106@temetra.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg11994.html">
<input type="submit" value=" Guido Medina ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+different+versions+in+upgrade%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg11993.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg11999.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">520A2B84.5070106@temetra.com</li>
</ul>
</div>
</body>
</html>
