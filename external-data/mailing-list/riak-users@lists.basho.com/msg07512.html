<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Riak / Search via Python Client, no Results from Server</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#07512" id="c">
<link rel="index" href="maillist.html#07512" id="i">
<link rel="prev" href="msg07509.html" id="p">
<link rel="next" href="msg07515.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg07512.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Riak+%5C%2F+Search+via+Python+Client%2C+no+Results+from+Server%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Riak / Search via Python Client, no Results from Server</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22claudef%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">claudef</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20120523" rel="nofollow">Wed, 23 May 2012 08:20:02 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Thanks Sean for the hint .. sure, you right, that wildcard syntax was too 
short ! </pre><pre>

Still like this, the main issue remains. The search function is not yet 
activated at the server side, even having the parameter set  to true in 
the /etc/app.config file.    Whatever  syntax sent to the server is not 
checked, nor validated, nor executed.  I've restarted the server with 
bin/riak stop and bin/riak start . 

The same error also shows up at the sample bucket  'user' throwing 0 
results (with no error message).  I'm using the git version built from 
source. 
 
at rel/riak/etc/app.config 
%% Riak Search Config
 {riak_search, [
                %% To enable Search functionality set this 'true'.
                {enabled, true}
               ]},

Any further settings required to activate the server-side search function? 


Log
C:\Python\myprojects\riak&gt;python basic_search.py
starts at : 2012-05-23 12:12:31.718000
How many keys in the bucket: 500
Resultset: []

Source: 
search_string = 'cEDO:[aaaa TO ZZZZ]'
bucketname = 'ramtest'
startd = datetime.now()
print &quot;starts at : &quot; + str(startd)
start = time()
#
try: 
    client = riak.RiakClient(host='zbra')
    data_bucket = client.bucket(bucketname) 
    mykeys = data_bucket.get_keys()
    howmany = len(mykeys) 
    print &quot;How many keys in the bucket: &quot;+ str(howmany) 
    resultset = client.search(bucketname, 
search_string).map('Riak.mapValuesJson').run()
    print &quot;Resultset: &quot; + str(resultset)


Regards, 
Claude


Claude Falbriard 
Certified IT Specialist L2 - Middleware
AMS Hortolândia / SP - Brazil
phone:    +55 19 9837 0789
cell:         +55 13 8117 3316
e-mail:    clau...@br.ibm.com




From:   Sean Cribbs &lt;s...@basho.com&gt;
To:     clau...@br.ibm.com
Cc:     riak-users@lists.basho.com
Date:   22/05/2012 17:52
Subject:        Re: Riak / Search via Python Client, no Results from 
Server



Claude,

Generally your terms in wildcard queries need to be at least two or three 
characters (I don't remember which), so either way A* is not going to work 
as a search.

On Tue, May 22, 2012 at 4:46 PM, &lt;clau...@br.ibm.com&gt; wrote:
Dear colleagues. 

Not able to run a pattern search through the Python query. The server 
search option was enabled with the true setting in the app.config file 
(line 165) and the server was restarted.   Checking the Riak console log 
below,  I see the search being started, but no results are returned to the 
client. My version is &quot;git&quot; built from source.   

Console Log 
2012-05-22 15:07:50.853 [info] &lt;0.7.0&gt; Application riak_search started on 
node 'riak@172.24.200.158' 
2012-05-22 15:07:50.854 [info] &lt;0.7.0&gt; Application basho_stats started on 
node 'riak@172.24.200.158' 
2012-05-22 15:07:50.865 [info] &lt;0.7.0&gt; Application runtime_tools started 
on node 'riak@172.24.200.158' 
2012-05-22 15:07:50.866 [info] &lt;0.7.0&gt; Application public_key started on 
node 'riak@172.24.200.158' 
2012-05-22 15:07:50.882 [info] &lt;0.7.0&gt; Application ssl started on node '
riak@172.24.200.158' 
2012-05-22 15:07:50.944 [info] 
&lt;0.1558.0&gt;@riak_core:wait_for_application:390 Wait complete for 
application riak_search (0 seconds) 
2012-05-22 15:07:51.034 [info] &lt;0.1490.0&gt;@riak_core:wait_for_service:410 
Wait complete for service riak_search (0 seconds) 

Source code:  Read all data starting with Capital Letter A, cEDO is the 
data field name 
try: 
    client = riak.RiakClient(host='xxxxxxxx') 
    data_bucket = client.bucket(bucketname) 
    mykeys = data_bucket.get_keys() 
    howmany = len(mykeys) 
    print &quot;How many keys in the bucket: &quot;+ str(howmany)     
    search_query = client.search(bucketname, 'cEDO:A*') 
    print &quot;search query built&quot; 
    resultset = search_query.run() 
    print &quot;result entries found: &quot; + str(len(resultset)) 

Processing log: 
How many keys in the bucket: 500 
search query built 
result entries found: 0 

No further error message is thrown. 

ps .. Also the basic sample from the Python client documentation (bucket= 
'user') shows the same results, 0 entries found by the serach.   
         
<a  rel="nofollow" href="http://basho.github.com/riak-python-client/tutorial.html#using-search">http://basho.github.com/riak-python-client/tutorial.html#using-search</a> 

Thanks in advance for your insights. What's missing to start the  Search 
feature, or is something missing in the Lucene syntax ? 

Regards, 
Claude 


Claude Falbriard 
Certified IT Specialist L2 - Middleware
AMS Hortolândia / SP - Brazil
phone:    +55 19 9837 0789
cell:         +55 13 8117 3316
e-mail:    clau...@br.ibm.com

_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>




-- 
Sean Cribbs &lt;s...@basho.com&gt;
Software Engineer
Basho Technologies, Inc.
<a  rel="nofollow" href="http://basho.com/">http://basho.com/</a>

</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg07509.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#07512">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#07512">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg07515.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg07508.html">Riak / Search via Python Client, no Results from Server</a></span> <span class="sender italic">claudef</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg07509.html">Re: Riak / Search via Python Client, no Results from Serv...</a></span> <span class="sender italic">Sean Cribbs</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Riak / Search via Python Client, no Results from ...</span> <span class="sender italic">claudef</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg07515.html">Re: Riak / Search via Python Client, no Results f...</a></span> <span class="sender italic">Shuhao Wu</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg07517.html">Re: Riak / Search via Python Client, no Resul...</a></span> <span class="sender italic">claudef</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Riak / Search via Python Client, no Results from Server">
<input type="hidden" name="msgid" value="OFE493D1A6.C440F7CA-ON83257A07.00514B91-03257A07.005433AF@br.ibm.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg07512.html">
<input type="submit" value=" claudef ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Riak+%5C%2F+Search+via+Python+Client%2C+no+Results+from+Server%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg07509.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg07515.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">OFE493D1A6.C440F7CA-ON83257A07.00514B91-03257A07.005433AF@br.ibm.com</li>
</ul>
</div>
</body>
</html>
