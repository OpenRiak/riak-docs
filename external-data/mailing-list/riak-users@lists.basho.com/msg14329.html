<!DOCTYPE html>
<html lang="en">
<head>
<title>leveldb issues.</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#14329" id="c">
<link rel="index" href="maillist.html#14329" id="i">
<link rel="prev" href="msg14324.html" id="p">
<link rel="next" href="msg14330.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg14329.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22leveldb+issues.%22&amp;o=newest" rel="nofollow"><span itemprop="name">leveldb issues.</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Theo+Schlossnagle%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Theo Schlossnagle</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20140619" rel="nofollow">Thu, 19 Jun 2014 09:26:47 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>I'm using basho/leveldb as of
commit: 532bb6351e7835e862c8508520780bfc9d0c2b78 (no snappy)</pre><pre>

I have an issue with some small sized database... they claim corruption,
but when running a repair I have a nonsensical amount of sst's moved into
&quot;lost&quot;

Worse, the files moved to &quot;lost&quot; have very very old creation times (in
months).  The system has been restarted successfully many times in the
interim, leading to more confusion.

I'm looking for pointers to get to the bottom of this.  It isn't critical
thatI recover this data, but it is critical that I don't see this manifest
when it does matter.

Before repair:

40960   108441.log
1       CURRENT
0       LOCK
3       LOG
3       LOG.old
92      MANIFEST-108439
469     sst_0
1       sst_1
188185  sst_2
4189331 sst_3
6343660 sst_4
1       sst_5
1       sst_6

After repair:

40960   108452.log
1       CURRENT
0       LOCK
3       LOG
3       LOG.old
28      MANIFEST-108450
8221971 lost
2362    sst_0
1       sst_1
188185  sst_2
2352071 sst_3
1       sst_4
1       sst_5
1       sst_6



-- 

Theo Schlossnagle

<a  rel="nofollow" href="http://omniti.com/is/theo-schlossnagle">http://omniti.com/is/theo-schlossnagle</a>
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg14324.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#14329">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#14329">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg14330.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email tSliceCur"><span class="subject">leveldb issues.</span> <span class="sender italic">Theo Schlossnagle</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg14330.html">Re: leveldb issues.</a></span> <span class="sender italic">Matthew Von-Maszewski</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg14333.html">Re: leveldb issues.</a></span> <span class="sender italic">Theo Schlossnagle</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg14334.html">Re: leveldb issues.</a></span> <span class="sender italic">Matthew Von-Maszewski</span></li>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="leveldb issues.">
<input type="hidden" name="msgid" value="CACLsApvuTL5tnRxyvN9e+wTLhPj=F2n4v63F=x7f3AQTo3fsmQ@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg14329.html">
<input type="submit" value=" Theo Schlossnagle ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22leveldb+issues.%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg14324.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg14330.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CACLsApvuTL5tnRxyvN9e+wTLhPj=F2n4v63F=x7f3AQTo3fsmQ@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
