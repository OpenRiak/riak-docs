<!DOCTYPE html>
<html lang="en">
<head>
<title>Best way to feed inputs into a MapReduce query</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#05128" id="c">
<link rel="index" href="maillist.html#05128" id="i">
<link rel="prev" href="msg05121.html" id="p">
<link rel="next" href="msg05130.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg05128.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Best+way+to+feed+inputs+into+a+MapReduce+query%22&amp;o=newest" rel="nofollow"><span itemprop="name">Best way to feed inputs into a MapReduce query</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Wayne+See%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Wayne See</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20111011" rel="nofollow">Tue, 11 Oct 2011 17:59:36 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi all,

I'm planning on using Riak to perform aggregation/sorting on a dataset
composed of JSON values. I can feed the keys to the MapReduce query using
key filters or Riak search, but I was wondering which would give better
performance when doing the query on a large dataset and the matching keys
would only be a small subset of it? To give a little bit more background I
only need to index/query against 2 fields of a JSON document so I don't
necessarily need the flexibility of Riak search, and key filters would work
since I can use field1-field2 to key the document. I'm concerned though that
key filters would have to loop through the entire bucket keyspace to find
the matching keys, but I'm also concerned that Riak Search would index the
whole JSON (although the fields I would query against would be your regular
integer keys, the other fields can get pretty big) and possibly affect write
performance. I'm planning to test this when I have the time but I was
wondering if anybody has similar experiences regarding this and can shed
some insight? Rough estimate of size of dataset would be 1M keys but
aggregation would only be performed on a 50-150 keys.</pre><pre>

I'm also considering keeping an inverted index on another datastore like
redis so I can just get the keys I need from that datastore and feed that
into Riak's MapReduce, but ideally I would like to keep it in Riak to make
it simpler to scale. I've also looked into secondary indices but from the
looks of it I can't perform lookups against 2 tags.

Thanks in advance!

Wayne
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg05121.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#05128">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#05128">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg05130.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email tSliceCur"><span class="subject">Best way to feed inputs into a MapReduce query</span> <span class="sender italic">Wayne See</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg05130.html">Re: Best way to feed inputs into a MapReduce query</a></span> <span class="sender italic">Jeremiah Peschka</span></li>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Best way to feed inputs into a MapReduce query">
<input type="hidden" name="msgid" value="CAAm3zygRhTknft4Lq8ygDrQ__LqUpCJi6Jok9HisL=GXE9OL_A@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg05128.html">
<input type="submit" value=" Wayne See ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Best+way+to+feed+inputs+into+a+MapReduce+query%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg05121.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg05130.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CAAm3zygRhTknft4Lq8ygDrQ__LqUpCJi6Jok9HisL=GXE9OL_A@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
