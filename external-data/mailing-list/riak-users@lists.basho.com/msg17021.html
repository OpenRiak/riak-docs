<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Riak Search indexing json</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#17021" id="c">
<link rel="index" href="maillist.html#17021" id="i">
<link rel="prev" href="msg17020.html" id="p">
<link rel="next" href="#" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg17021.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Riak+Search+indexing+json%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Riak Search indexing json</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Colin+Walker%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Colin Walker</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20160210" rel="nofollow">Wed, 10 Feb 2016 08:39:30 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Thanks for the quick response everyone! It actually turned out I wasn't
using my bucket types correctly. The bucket type must correspond to the
Solr index I want to use, I know that now! Sorry for the confusion, I mixed
up my types and my buckets. Without your help it wouldn't have worked
though since I was serializing the JSON before giving it to Riak which was
unnecessary.</pre><pre>

I did discover some interesting properties of allowing Riak to serialize
the json, versus serializing it before: I tested setting the content type
to json and Riak handled the indexing of it fine. The only difference is
that it doesn't seem to pick up the fields as map types and instead just
parses it directly into the Solr indices. I was doing this originally which
complicated the debugging since setting name_s to 'hello' would index the
field while just setting name to 'hello' would not index the field.

On Wed, Feb 10, 2016 at 8:00 AM, Vitaly E &lt;13vitam...@gmail.com&gt; wrote:

&gt; I would try setting the content type to &quot;application/json&quot;
&gt; <a  rel="nofollow" href="http://docs.basho.com/riak/latest/dev/taste-of-riak/java/#Creating-Objects-in-Riak">http://docs.basho.com/riak/latest/dev/taste-of-riak/java/#Creating-Objects-in-Riak</a>
&gt; to see if it solves the problem. If it's absolutely necessary to send
&gt; custom JSON to Riak client. That said, I've never actually tried this since
&gt; the client handles serialization to JSON well enough.
&gt;
&gt; Vitaly
&gt;
&gt; On Wed, Feb 10, 2016 at 5:55 PM, Zeeshan Lakhani &lt;zlakh...@basho.com&gt;
&gt; wrote:
&gt;
&gt;&gt; Good point Vitaly, also possible.
&gt;&gt;
&gt;&gt;
&gt;&gt; Zeeshan Lakhani
&gt;&gt; programmer |
&gt;&gt; software engineer at @basho |
&gt;&gt; org. member/founder of @papers_we_love | paperswelove.org
&gt;&gt; twitter =&gt; @zeeshanlakhani
&gt;&gt;
&gt;&gt; On Feb 10, 2016, at 10:53 AM, Vitaly E &lt;13vitam...@gmail.com&gt; wrote:
&gt;&gt;
&gt;&gt; Hi Colin,
&gt;&gt;
&gt;&gt; The problem is that in your case JSON is interpreted as a String, as
&gt;&gt; opposed to a Map/POJO with fields.
&gt;&gt;
&gt;&gt; Is there any reason you don't rely on the JSON serialization built into
&gt;&gt; Riak Java client?
&gt;&gt;
&gt;&gt; Regards,
&gt;&gt; Vitaly
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; On Wed, Feb 10, 2016 at 5:40 PM, Colin Walker &lt;co...@musefind.com&gt; wrote:
&gt;&gt;
&gt;&gt;&gt; Hello everyone,
&gt;&gt;&gt;
&gt;&gt;&gt; Sorry for the basic question but I couldn't find the answer in the
&gt;&gt;&gt; documentation. Does Riak search currently index documents sent as JSON? It
&gt;&gt;&gt; doesn't look like it from the basic tests that I've run. I am using the new
&gt;&gt;&gt; Solr search on Riak 2.1.3.
&gt;&gt;&gt;
&gt;&gt;&gt; When I send data to the bucket using a Map type in the java client
&gt;&gt;&gt; everything is indexed and I can search for my data as expected. However,
&gt;&gt;&gt; when I send the same Java map as JSON I cannot find a way to search within
&gt;&gt;&gt; it. I am using the default index schema.
&gt;&gt;&gt;
&gt;&gt;&gt; Thanks everyone!
&gt;&gt;&gt;
&gt;&gt;&gt; Colin Walker
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; _______________________________________________
&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt; _______________________________________________
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg17020.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#17021">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#17021">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright buttondisabled" accesskey="n" href="#">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg17016.html">Riak Search indexing json</a></span> <span class="sender italic">Colin Walker</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg17017.html">Re: Riak Search indexing json</a></span> <span class="sender italic">Zeeshan Lakhani</span></li>
<li class="icons-email"><span class="subject"><a href="msg17018.html">Re: Riak Search indexing json</a></span> <span class="sender italic">Vitaly E</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg17019.html">Re: Riak Search indexing json</a></span> <span class="sender italic">Zeeshan Lakhani</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg17020.html">Re: Riak Search indexing json</a></span> <span class="sender italic">Vitaly E</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Riak Search indexing json</span> <span class="sender italic">Colin Walker</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Riak Search indexing json">
<input type="hidden" name="msgid" value="CAKatVddPzhoAds3Yj1ifAspjAip-2Urtdmgpink3n29cRsjD6g@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg17021.html">
<input type="submit" value=" Colin Walker ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Riak+Search+indexing+json%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg17020.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="#" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CAKatVddPzhoAds3Yj1ifAspjAip-2Urtdmgpink3n29cRsjD6g@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
