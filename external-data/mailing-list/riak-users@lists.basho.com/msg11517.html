<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Riak 1.3 YCSB Read Time Out</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="thrd14.html#11517" id="c">
<link rel="index" href="mail14.html#11517" id="i">
<link rel="prev" href="msg11516.html" id="p">
<link rel="next" href="msg11518.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg11517.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Riak+1.3+YCSB+Read+Time+Out%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Riak 1.3 YCSB Read Time Out</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Jan+Pieper%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Jan Pieper</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20130713" rel="nofollow">Sat, 13 Jul 2013 18:31:57 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Wine. Lanhe ujnd umwiesodooook ;ymm ;}
</pre><pre>

--
Jan Pieper · Software Engineer

Adcloud GmbH · Venloer Str. 25 · D-50672 Köln
Ein Unternehmen von Deutsche Post DHL
T +49 221 292 095 35 · F +49 221 292 095 99
jan.pie...@adcloud.com · www.adcloud.com
Skype: pieper.jan

Handelsregister: Amtsgericht Köln, HRB 65770 · Sitz der Gesellschaft: Köln
Geschäftsführer: Christoph Mempel, Bente Hepper-Hammelehle
  *From: *Dave Parfitt
*Sent: *Sunday, July 14, 2013 02:01
*To: *Nika Abramova
*Reply To: *Dave Parfitt
*Cc: *riak-users@lists.basho.com
*Subject: *Re: Riak 1.3 YCSB Read Time Out

Hello Veronika,

We suggest a minimum of 5 nodes in a cluster. Riak isn't really designed to
run on a single node.

Cheers,
Dave

On Jul 13, 2013, at 12:15 PM, Nika Abramova &lt;ni...@hotmail.com&gt; wrote:

 I am sorry, I thought that was it.
But now I tried to execute workload. And what I am getting is:
com.basho.riak.pbc.RiakError: {insufficient_vnodes,0,need,2} ...
How can I solve that? As far as I checked on Google, it has to do with
cluster nodes and I am running just 1 instance (1 node as server and
client). How can I avoid that error? Maybe disable/change some specific
config parameters?

Regards, Veronika


------------------------------
From: ni...@hotmail.com
To: riak-users@lists.basho.com
Subject: RE: Riak 1.3 YCSB Read Time Out
Date: Sat, 13 Jul 2013 17:06:24 +0100

 Greetings,
Thank you for help. I changed what you said but it was not enough. However,
I noticed a Warning about &quot;ulimit -n&quot; is being low, 4096 is recommended. So
I increased mine to max value I can and was able to load 100.000 records.
Now I have to load 200.000 and 600.000 records but if something goes wrong
I know the reason.
Once again, thanks for help.

Have a nice day.
Regards, Veronika

------------------------------
Date: Fri, 12 Jul 2013 21:10:11 -0400
Subject: Re: Riak 1.3 YCSB Read Time Out
From: dparf...@basho.com
To: ni...@hotmail.com
CC: riak-users@lists.basho.com

Hello Veronika -

It looks like you are out of memory. You could try turning active
anti-entropy off via:

 {anti_entropy, {off, []}},

in app.config [0].

Some other docs that you may find useful are the operations guide [1],
choosing a backend [2], Linux performance tuning [3], and file system
tuning [4].

Cheers -
Dave

[0] <a  rel="nofollow" href="http://docs.basho.com/riak/latest/references/Configuration-Files/">http://docs.basho.com/riak/latest/references/Configuration-Files/</a>
[1] <a  rel="nofollow" href="http://docs.basho.com/riak/latest/operators.html">http://docs.basho.com/riak/latest/operators.html</a>
[2] <a  rel="nofollow" href="http://docs.basho.com/riak/latest/tutorials/choosing-a-backend/">http://docs.basho.com/riak/latest/tutorials/choosing-a-backend/</a>
[3] <a  rel="nofollow" href="http://docs.basho.com/riak/latest/cookbooks/Linux-Performance-Tuning/">http://docs.basho.com/riak/latest/cookbooks/Linux-Performance-Tuning/</a>
[4] <a  rel="nofollow" href="http://docs.basho.com/riak/latest/cookbooks/File-System-Tuning/">http://docs.basho.com/riak/latest/cookbooks/File-System-Tuning/</a>




On Fri, Jul 12, 2013 at 4:39 PM, Nika Abramova &lt;ni...@hotmail.com&gt; wrote:

Hello,
I have got logs and error.
So what I got from log was (part of it since it goes all same):
2013-07-12 06:33:35.674 [error] &lt;0.1048.0&gt; gen_server &lt;0.1048.0&gt; terminated
with reason: no match of right hand value {error,{db_write,&quot;IO error:
./data/anti_entropy/639406966332270026714112114313373821099470487552/000003.log:
Cannot allocate memory&quot;}} in hashtree:flush_buffer/1 line 302
2013-07-12 06:33:35.683 [error] &lt;0.1048.0&gt; CRASH REPORT Process &lt;0.1048.0&gt;
with 0 neighbours exited with reason: no match of right hand value
{error,{db_write,&quot;IO error:
./data/anti_entropy/639406966332270026714112114313373821099470487552/000003.log:
Cannot allocate memory&quot;}} in hashtree:flush_buffer/1 line 302 in
gen_server:terminate/6 line 747
2013-07-12 06:33:35.688 [error] &lt;0.28642.0&gt; CRASH REPORT Process
&lt;0.28642.0&gt; with 0 neighbours exited with reason: no match of right hand
value {error,{db_open,&quot;IO error: lock
./data/anti_entropy/639406966332270026714112114313373821099470487552/LOCK:
Resource temporarily unavailable&quot;}} in hashtree:new_segment_store/2 line
499 in gen_server:init_it/6 line 328
2013-07-12 06:33:36.150 [error] &lt;0.968.0&gt; gen_server &lt;0.968.0&gt; terminated
with reason: no match of right hand value {error,{db_write,&quot;IO error:
./data/anti_entropy/525227150915793236229449236757414210188850757632/000003.log:
Cannot allocate memory&quot;}} in hashtree:flush_buffer/1 line 302
2013-07-12 06:33:36.158 [error] &lt;0.968.0&gt; CRASH REPORT Process &lt;0.968.0&gt;
with 0 neighbours exited with reason: no match of right hand value
{error,{db_write,&quot;IO error:
./data/anti_entropy/525227150915793236229449236757414210188850757632/000003.log:
Cannot allocate memory&quot;}} in hashtree:flush_buffer/1 line 302 in
gen_server:terminate/6 line 747
2013-07-12 06:33:36.164 [error] &lt;0.29013.0&gt; CRASH REPORT Process
&lt;0.29013.0&gt; with 0 neighbours exited with reason: no match of right hand
value {error,{db_open,&quot;IO error: lock
./data/anti_entropy/525227150915793236229449236757414210188850757632/LOCK:
Resource temporarily unavailable&quot;}} in hashtree:new_segment_store/2 line
499 in gen_server:init_it/6 line 328
2013-07-12 06:33:36.261 [error] &lt;0.1436.0&gt; gen_server &lt;0.1436.0&gt; terminated
with reason: no match of right hand value {error,{db_write,&quot;IO error:
./data/anti_entropy/1187470080331358621040493926581979953470445191168/000003.log:
Cannot allocate memory&quot;}} in hashtree:flush_buffer/1 line 302
2013-07-12 06:33:36.268 [error] &lt;0.1436.0&gt; CRASH REPORT Process &lt;0.1436.0&gt;
with 0 neighbours exited with reason: no match of right hand value
{error,{db_write,&quot;IO error:
./data/anti_entropy/1187470080331358621040493926581979953470445191168/000003.log:
Cannot allocate memory&quot;}} in hashtree:flush_buffer/1 line 302 in
gen_server:terminate/6 line 747
2013-07-12 06:33:36.317 [error] &lt;0.29134.0&gt; CRASH REPORT Process
&lt;0.29134.0&gt; with 0 neighbours exited with reason: no match of right hand
value {error,{db_open,&quot;IO error: lock
./data/anti_entropy/1187470080331358621040493926581979953470445191168/LOCK:
Resource temporarily unavailable&quot;}} in hashtree:new_segment_store/2 line
499 in gen_server:init_it/6 line 328
2013-07-12 06:33:36.878 [error] &lt;0.29259.0&gt; CRASH REPORT Process
&lt;0.29259.0&gt; with 0 neighbours exited with reason: no match of right hand
value {error,{db_open,&quot;IO error:
./data/anti_entropy/890602560248518965780370444936484965102833893376/000004.dbtmp:
Cannot allocate memory&quot;}} in hashtree:new_segment_store/2 line 499 in
gen_server:init_it/6 line 328
2013-07-12 06:33:37.024 [error] &lt;0.29263.0&gt; CRASH REPORT Process
&lt;0.29263.0&gt; with 0 neighbours exited with reason: no match of right hand
value {error,{db_open,&quot;IO error:
./data/anti_entropy/159851741583067506678528028578343455274867621888/000004.dbtmp:
Cannot allocate memory&quot;}} in hashtree:new_segment_store/2 line 499 in
gen_server:init_it/6 line 328
2013-07-12 06:33:37.041 [error] &lt;0.29260.0&gt; CRASH REPORT Process
&lt;0.29260.0&gt; with 0 neighbours exited with reason: no match of right hand
value {error,{db_open,&quot;IO error:
./data/anti_entropy/867766597165223607683437869425293042920709947392/000004.dbtmp:
Cannot allocate memory&quot;}} in hashtree:new_segment_store/2 line 499 in
gen_server:init_it/6 line 328
2013-07-12 06:33:37.095 [error] &lt;0.29265.0&gt; CRASH REPORT Process
&lt;0.29265.0&gt; with 0 neighbours exited with reason: no match of right hand
value {error,{db_open,&quot;IO error:
./data/anti_entropy/639406966332270026714112114313373821099470487552/000004.dbtmp:
Cannot allocate memory&quot;}} in hashtree:new_segment_store/2 line 499 in
gen_server:init_it/6 line 328

Exception I get is that:
Loading workload...
Starting test.
java.net.SocketTimeoutException: Read timed out
 at java.net.SocketInputStream.socketRead0(Native Method)
at java.net.SocketInputStream.read(SocketInputStream.java:150)
 at java.net.SocketInputStream.read(SocketInputStream.java:121)
at java.io.BufferedInputStream.fill(BufferedInputStream.java:235)
 at java.io.BufferedInputStream.read(BufferedInputStream.java:254)
at java.io.DataInputStream.readInt(DataInputStream.java:387)
 at com.basho.riak.pbc.RiakConnection.receive(RiakConnection.java:110)
at com.basho.riak.pbc.RiakClient.store(RiakClient.java:581)
 at
com.basho.riak.client.raw.pbc.PBClientAdapter.store(PBClientAdapter.java:177)
at
com.basho.riak.client.raw.pbc.PBClientAdapter.store(PBClientAdapter.java:197)
 at com.basho.riak.client.raw.ClusterClient.store(ClusterClient.java:139)
at com.yahoo.ycsb.db.RiakClient13.insert(RiakClient13.java:184)
 at com.yahoo.ycsb.DBWrapper.insert(DBWrapper.java:148)
at com.yahoo.ycsb.workloads.CoreWorkload.doInsert(CoreWorkload.java:461)
 at com.yahoo.ycsb.ClientThread.run(Client.java:269)
Any ideas?

Regards, Veronika
------------------------------
Date: Fri, 12 Jul 2013 11:31:36 -0400

Subject: Re: Riak 1.3 YCSB Read Time Out
From: dparf...@basho.com
To: ni...@hotmail.com
CC: riak-users@lists.basho.com


Hello Veronika -

  We're actively working on the YCSB project located at [0]. It should work
fine with Riak 1.4. Since the existing implementation of YCSB is a
work-in-progress, you can't trust any results it gives you until we get it
merged upstream with the official YCSB repo. I'm not sure what's causing
the &quot;Read timed Out&quot; exception, can you provide any logs?

Cheers -
Dave

[0] <a  rel="nofollow" href="https://github.com/basho-labs/YCSB">https://github.com/basho-labs/YCSB</a>




On Fri, Jul 12, 2013 at 11:23 AM, Nika Abramova &lt;ni...@hotmail.com&gt; wrote:

Thank you for reply.
Of course I can try new version but will I be able to run YCSB for 1.3 over
1.4? This is my concern.
What is the minimal RAM required for Riak to work correctly? I mean, what I
am doing is inserting 100.000 records at once.

Regards, Veronika

------------------------------
Date: Fri, 12 Jul 2013 16:07:23 +0100
From: guido.med...@temetra.com
To: riak-users@lists.basho.com
Subject: Re: Riak 1.3 YCSB Read Time Out


Hi Veronika,

Riak 1.4.0 was released yesterday, with the new streaming features nodes
will stream keys to you instead of working with the whole result in memory,
which will probably avoid the timeout.

Though your RAM and specially using a VM could be a limiting factor, still
worthy a try.
Once your node is up type riak-admin diag and see if some parameters need
to be adjusted.

For more information on tuning:
<a  rel="nofollow" href="http://docs.basho.com/riak/latest/cookbooks/Linux-Performance-Tuning/">http://docs.basho.com/riak/latest/cookbooks/Linux-Performance-Tuning/</a>

HTH,

Guido.

On 12/07/13 14:58, Nika Abramova wrote:

Greetings,
I am currently testing different NoSQL databases and now I was starting
Riak. I downloaded and installed Riak 1.3 and was executing YCSB over it.
But after some time (40 sec) of loading data, I got &quot;Read timed Out&quot;
exception.
How can I solve it? I am working locally, on same machine so my connection
is to localhost. Is that lack of RAM that causing that? Since I am using VM
and I only have 2GB RAM for it. Or it is something else I can configure?

 Regards, Veronika


_______________________________________________
riak-users mailing
listriak-users@lists.basho.com<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>



_______________________________________________ riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>

_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>



_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>



_______________________________________________ riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>

_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg11516.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="thrd14.html#11517">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="mail14.html#11517">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg11518.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg11498.html">Riak 1.3 YCSB Read Time Out</a></span> <span class="sender italic">Nika Abramova</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg11502.html">Re: Riak 1.3 YCSB Read Time Out</a></span> <span class="sender italic">Guido Medina</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg11505.html">RE: Riak 1.3 YCSB Read Time Out</a></span> <span class="sender italic">Nika Abramova</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg11507.html">Re: Riak 1.3 YCSB Read Time Out</a></span> <span class="sender italic">Dave Parfitt</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg11509.html">RE: Riak 1.3 YCSB Read Time Out</a></span> <span class="sender italic">Nika Abramova</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg11512.html">Re: Riak 1.3 YCSB Read Time Out</a></span> <span class="sender italic">Dave Parfitt</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg11513.html">RE: Riak 1.3 YCSB Read Time Out</a></span> <span class="sender italic">Nika Abramova</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg11514.html">RE: Riak 1.3 YCSB Read Time Ou...</a></span> <span class="sender italic">Nika Abramova</span></li>
<li class="icons-email"><span class="subject"><a href="msg11516.html">Re: Riak 1.3 YCSB Read Time Ou...</a></span> <span class="sender italic">Dave Parfitt</span></li>
<li class="icons-email tSliceCur"><span class="subject">Re: Riak 1.3 YCSB Read Time Ou...</span> <span class="sender italic">Jan Pieper</span></li>
<li class="icons-email"><span class="subject"><a href="msg11518.html">Re: Riak 1.3 YCSB Read Time Ou...</a></span> <span class="sender italic">Dave Parfitt</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Riak 1.3 YCSB Read Time Out">
<input type="hidden" name="msgid" value="7495362550022432315@unknownmsgid">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg11517.html">
<input type="submit" value=" Jan Pieper ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Riak+1.3+YCSB+Read+Time+Out%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg11516.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg11518.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">7495362550022432315@unknownmsgid</li>
</ul>
</div>
</body>
</html>
