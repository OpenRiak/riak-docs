<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Riak Search - Fast Bulk Insert</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#14652" id="c">
<link rel="index" href="maillist.html#14652" id="i">
<link rel="prev" href="msg14651.html" id="p">
<link rel="next" href="msg14653.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg14652.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Riak+Search+%5C-+Fast+Bulk+Insert%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Riak Search - Fast Bulk Insert</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Eric+Redmond%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Eric Redmond</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20140814" rel="nofollow">Thu, 14 Aug 2014 07:44:23 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<p dir="ltr">Note that the search-cmd is for search pre 2.0, which does not use solr. If you're planning on using the new Solr based search, you'll need to run Riak 2.0, and write an import script as Dmitri pointed out.</p>
<p dir="ltr">Eric Redmond, Engineer @ Basho</p>
<br/><div class="cm_quote" style=" color: #787878">On Thu, Aug 14, 2014 at 7:38 AM, Dmitri Zagidulin &lt;<a rel="nofollow" href="mailto:dzagidu...@basho.com">dzagidu...@basho.com</a>&gt; wrote:</div><br><div id="oldcontent" style="background-color: rgb(255, 255, 255); background-position: initial initial; background-repeat: initial initial;"><blockquote style=""><div dir="ltr"><div><div><div>Hi Mark,<br><br>The best way to bulk load objects into Riak (and into Solr) is to take advantage of Riak's parallelism.<br></div>Spin up a bunch of worker threads (and have them share a pool of connections) and have them issue parallel concurrent puts to all of the nodes in a cluster (you can either use something like HAProxy to load balance, or a riak client's internal load balancing capabilities). <br>
</div><br>This is what <a rel="nofollow" href="https://github.com/basho-labs/riak-data-migrator">https://github.com/basho-labs/riak-data-migrator</a> does, for example, to restore filed out objects quickly.<br><br></div><br><div><br></div>
</div><div class="gmail_extra"><br><br><div class="gmail_quote">On Thu, Aug 14, 2014 at 5:26 AM, Mark Richard Thomas <span dir="ltr">&lt;<a rel="nofollow" href="mailto:mark.tho...@equifax.com">mark.tho...@equifax.com</a>&gt;</span> wrote:<br>
<blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">





<div lang="EN-GB">
<div>
<p class="MsoNormal">Hello<u></u><u></u></p>
<p class="MsoNormal"><u></u> <u></u></p>
<p class="MsoNormal">What’s the fastest way (best practice) to insert 20 million documents into a Riak Search index?<u></u><u></u></p>
<p class="MsoNormal"><u></u> <u></u></p>
<p class="MsoNormal">search-cmd solr my_bucket /insert.xml<u></u><u></u></p>
<p class="MsoNormal"><u></u> <u></u></p>
<p class="MsoNormal">For a proof-of-concept I’ve create a file (index.html) containing 100,000 documents:<u></u><u></u></p>
<p class="MsoNormal"><u></u> <u></u></p>
<p class="MsoNormal">&lt;add&gt;<u></u><u></u></p>
<p class="MsoNormal">&lt;doc&gt;&lt;/doc&gt;<u></u><u></u></p>
<p class="MsoNormal">&lt;doc&gt;&lt;/doc&gt;<u></u><u></u></p>
<p class="MsoNormal">:<u></u><u></u></p>
<p class="MsoNormal">&lt;/add&gt;<u></u><u></u></p>
<p class="MsoNormal"><u></u> <u></u></p>
<p class="MsoNormal">Thanks<u></u><u></u></p>
<p class="MsoNormal"><u></u> <u></u></p>
<p class="MsoNormal"><span style="font-size:10.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#981e32">Mark Thomas</span><span>
</span><span style="font-size:10.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#414042">| Software Engineer | Equifax UK</span><span><u></u><u></u></span></p>
<p class="MsoNormal"><span style="font-size:10.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#414042"> </span><span><u></u><u></u></span></p>
<p class="MsoNormal"><span style="font-size:10.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#981e32">p:</span><span>
</span><span style="font-size:10.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#414042">  <a rel="nofollow" href="tel:%2B44%20%280%29208%20941%200573">+44 (0)208 941 0573</a></span><span><u></u><u></u></span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#981e32">m:</span><span>
</span><span style="font-size:10.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#414042"> <a rel="nofollow" href="tel:%2B44%20%280%297908%20798%20270">+44 (0)7908 798 270</a><u></u><u></u></span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#981e32">e:</span><span style="font-size:10.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#414042">   </span><span style="font-size:10.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;"><a rel="nofollow" href="mailto:mark.tho...@equifax.com"><span style="color:blue">mark.tho...@equifax.com</span></a></span><span><u></u><u></u></span></p>

<p class="MsoNormal"><span><u></u> <u></u></span></p>
<p class="MsoNormal"><span style="font-size:10.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#414042">Equifax Ltd, Capital House, 25 Chapel Street, London, NW1 5DS</span><span><u></u><u></u></span></p>
<p class="MsoNormal"><u></u> <u></u></p>
</div>
<p class="MsoNormal"><span style="font-size:12.0pt;font-family:&quot;Times New Roman&quot;,&quot;serif&quot;;color:gray" lang="EN-GB">Equifax Limited is registered in England with Registered No. 2425920.
<span>Registered Office: Capital House, 25 Chapel Street, London NW1 5DS. Equifax Limited is authorised and regulated by the Financial Conduct Authority.</span>
<u></u><u></u></span></p>
<p class="MsoNormal"><span style="font-size:12.0pt;font-family:&quot;Times New Roman&quot;,&quot;serif&quot;;color:gray" lang="EN-GB">Equifax Touchstone Limited is registered in Scotland with Registered No. SC113401. Registered Office: 54 Deerdykes View, Westfield Park, Cumbernauld
 G68 9HN.</span> <u></u><u></u></p>
<p class="MsoNormal"><span style="font-size:12.0pt;font-family:&quot;Times New Roman&quot;,&quot;serif&quot;;color:gray" lang="EN-GB">Equifax Commercial Services Limited is registered in the Republic of Ireland with Registered No. 215393. Registered Office: IDA Business &amp; Technology
 Park, <span>Rosslare</span> Road, <span>Drinagh</span>,
<span>Wexford</span>. <u></u><u></u></span></p>
<p class="MsoNormal"><span style="font-size:12.0pt;font-family:&quot;Times New Roman&quot;,&quot;serif&quot;;color:gray" lang="EN-GB"><u></u> <u></u></span></p>
<p class="MsoNormal"><span style="font-size:12.0pt;font-family:&quot;Times New Roman&quot;,&quot;serif&quot;;color:gray" lang="EN-GB">This message contains information from Equifax which may be confidential and privileged. If you are not an intended recipient, please refrain
 from any disclosure, copying, distribution or use of this information and note that such actions are prohibited. If you have received this transmission in error, please notify by e-mail
</span><span lang="EN-GB"><a rel="nofollow" href="mailto:postmas...@equifax.com"><span style="font-size:12.0pt;font-family:&quot;Times New Roman&quot;,&quot;serif&quot;;color:black"><span style="color:black">postmas...@equifax.com</span></span></a></span><span style="font-size:12.0pt;font-family:&quot;Times New Roman&quot;,&quot;serif&quot;;color:gray" lang="EN-GB">.</span></p>

</div>

<br>_______________________________________________<br>
riak-users mailing list<br>
<a rel="nofollow" href="mailto:riak-users@lists.basho.com">riak-users@lists.basho.com</a><br>
<a rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a><br>
<br></blockquote></div><br></div>
</blockquote></div>

<pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg14651.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#14652">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#14652">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg14653.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg14650.html">Riak Search - Fast Bulk Insert</a></span> <span class="sender italic">Mark Richard Thomas</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg14651.html">Re: Riak Search - Fast Bulk Insert</a></span> <span class="sender italic">Dmitri Zagidulin</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Riak Search - Fast Bulk Insert</span> <span class="sender italic">Eric Redmond</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg14653.html">Re: Riak Search - Fast Bulk Insert</a></span> <span class="sender italic">Alexander Sicular</span></li>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Riak Search - Fast Bulk Insert">
<input type="hidden" name="msgid" value="dd312d54ff3985b363ad84ca68b05b@ip-10-0-3-56">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg14652.html">
<input type="submit" value=" Eric Redmond ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Riak+Search+%5C-+Fast+Bulk+Insert%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg14651.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg14653.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">dd312d54ff3985b363ad84ca68b05b@ip-10-0-3-56</li>
</ul>
</div>
</body>
</html>
