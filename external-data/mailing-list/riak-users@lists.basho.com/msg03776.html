<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Riak async PB client based on Grizzly</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#03776" id="c">
<link rel="index" href="maillist.html#03776" id="i">
<link rel="prev" href="msg03773.html" id="p">
<link rel="next" href="msg03778.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg03776.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Riak+async+PB+client+based+on+Grizzly%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Riak async PB client based on Grizzly</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Jon+Brisbin%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Jon Brisbin</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20110622" rel="nofollow">Wed, 22 Jun 2011 04:41:29 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>I've looked at netty too, but I thought Grizzly was a little more mature and I 
liked the abstractions of Grizzly better. </pre><pre>

I'm really looking into something like this for a proof of concept I'm doing 
that might involve Riak in a very large-scale, massively-concurrent system that 
handles large transfers of data. The &quot;competition&quot; POCs include Node.js and 
maybe Ruby/EventMachine. The point is to see if using Java (and/or Scala) in a 
hugely-scalable, highly-concurrent system can compete with Node.js and others 
that seem to have more momentum in that area. I'm convinced it can not only 
compete, but surpass those other platforms considering you have all the 
benefits of running on the JVM, including management/monitoring and ease of 
extension through plugins and other extension points. 

If Riak was to be the data store of record for this system, then I would 
absolutely need a highly-concurrent, non-blocking driver to access the data 
from the REST interface, which will be Grizzy HTTP and also non-blocking. 

I'm going to clean things up a little (I've only implemented get and put but 
not using the abstractions in the official driver). I think I'm going to 
refactor that a little and then I'll put it on github and let everyone know. 

Thanks! 

Jon Brisbin 
http//jbrisbin.com 

----- Original Message -----

&gt; From: &quot;Mark Wolfe&quot; &lt;m...@wolfe.id.au&gt;
&gt; To: &quot;riak-users Users&quot; &lt;riak-users@lists.basho.com&gt;
&gt; Sent: Wednesday, June 22, 2011 3:15:09 AM
&gt; Subject: Re: Riak async PB client based on Grizzly

&gt; I have been interested in doing the same thing for a while.

&gt; Instead of Grizzly I started messing around with Netty
&gt; <a  rel="nofollow" href="https://github.com/netty/">https://github.com/netty/</a> which is very similar.

&gt; I am not sure what either of you have found but in my experiance the
&gt; NIO stuff only really comes into it's own with large transfers or
&gt; routines which rely upon interaction with disk and network IO. For
&gt; normal small transaction rates it really doesn't add a lot aside
&gt; from being a easier to manage timeouts ect.

&gt; If you do start up a project I would be happy to put in some hours
&gt; hacking.

&gt; Either way best of luck!

&gt; On Wed, Jun 22, 2011 at 5:27 PM, Russell Brown &lt; russell.br...@me.com
&gt; &gt; wrote:

&gt; &gt; Hey Jon,
&gt; 
&gt; &gt; Any chance you want to implement the RawClient interface (
&gt; &gt; <a  rel="nofollow" href="https://github.com/basho/riak-java-client/blob/master/src/main/java/com/basho/riak/client/raw/RawClient.java">https://github.com/basho/riak-java-client/blob/master/src/main/java/com/basho/riak/client/raw/RawClient.java</a>
&gt; &gt; ) from the basho riak-java-client library? That way your client can
&gt; &gt; be swapped straight into the basho lib?
&gt; 

&gt; &gt; If not, let me know when you get a repo up on github and I'll write
&gt; &gt; an adapter so that the basho riak-java-client can make use of your
&gt; &gt; Grizzly client, which I guess means I'll pitch in a little (time
&gt; &gt; permitting) to help shape the Grizzly client so it is RawClient
&gt; &gt; shaped.
&gt; 

&gt; &gt; Cheers
&gt; 

&gt; &gt; Russell
&gt; 

&gt; &gt; On 21 Jun 2011, at 17:58, Jon Brisbin wrote:
&gt; 

&gt; &gt; &gt; I'm trying to get my feet wet with Grizzly on another project, so
&gt; &gt; &gt; I've been spending some late(ish) nights also working on a
&gt; &gt; &gt; Grizzly-based asynchronous PB client for Riak. I'm dropping all
&gt; &gt; &gt; the
&gt; &gt; &gt; way down to the protobuf level and using Grizzly's NIO
&gt; &gt; &gt; abstractions
&gt; &gt; &gt; to implement a completely non-blocking client. I'm writing the
&gt; &gt; &gt; low-level stuff in Java and I'd really like to build a Scala
&gt; &gt; &gt; layer
&gt; &gt; &gt; on top of this, which uses the nice Scala idioms (operators, case
&gt; &gt; &gt; classes, etc...). But I can't write code as fast in Scala as I
&gt; &gt; &gt; can
&gt; &gt; &gt; in Java and some of the Java APIs inside Grizzly aren't all that
&gt; &gt; &gt; Scala-friendly and make the code pretty ugly. I figured it would
&gt; &gt; &gt; be
&gt; &gt; &gt; better to implement a fairly low-level PB client in Java and
&gt; &gt; &gt; flesh
&gt; &gt; &gt; out the user-facing API in Scala and/or Java.
&gt; &gt; 
&gt; 

&gt; &gt; &gt; My question is basically, if I seed this project on GitHub with
&gt; &gt; &gt; what
&gt; &gt; &gt; I've got so far, would anyone else be interested in helping
&gt; &gt; &gt; complete
&gt; &gt; &gt; it? I'm just working on this after my other Grizzly work, so I
&gt; &gt; &gt; can't
&gt; &gt; &gt; devote full time to it. It might take me a little while to
&gt; &gt; &gt; implement
&gt; &gt; &gt; things like links and mapreduce.
&gt; &gt; 
&gt; 

&gt; &gt; &gt; I think it shows some real promise because it is completely
&gt; &gt; &gt; non-blocking. It uses Futures and CompletionHandlers to do the
&gt; &gt; &gt; dirty
&gt; &gt; &gt; work. A Grizzly filter is responsible for the actual
&gt; &gt; &gt; encoding/decoding of protobuf data. Right now, it will marshall
&gt; &gt; &gt; JSON
&gt; &gt; &gt; using Jackson if your content-type is set to &quot;application/json&quot;,
&gt; &gt; &gt; otherwise it uses JDK serialization to encode the entry (or just
&gt; &gt; &gt; passes a String straight through, of course).
&gt; &gt; 
&gt; 

&gt; &gt; &gt; Since it's a first pass, there is no real attempt to separate the
&gt; &gt; &gt; protobuf stuff from the client. That's a v2 thing. Since I have
&gt; &gt; &gt; limited time, I'm interested in speed to completion of features
&gt; &gt; &gt; rather than good-looking and properly abstracted code. :)
&gt; &gt; 
&gt; 

&gt; &gt; &gt; Thanks!
&gt; &gt; 
&gt; 

&gt; &gt; &gt; Jon Brisbin
&gt; &gt; 
&gt; 
&gt; &gt; &gt; http// jbrisbin.com
&gt; &gt; 
&gt; 

&gt; &gt; &gt; _______________________________________________
&gt; &gt; 
&gt; 
&gt; &gt; &gt; riak-users mailing list
&gt; &gt; 
&gt; 
&gt; &gt; &gt; riak-users@lists.basho.com
&gt; &gt; 
&gt; 
&gt; &gt; &gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt; &gt; 
&gt; 

&gt; &gt; _______________________________________________
&gt; 
&gt; &gt; riak-users mailing list
&gt; 
&gt; &gt; riak-users@lists.basho.com
&gt; 
&gt; &gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt; 

&gt; --
&gt; Regards,

&gt; Mark Wolfe

&gt; --
&gt; I am not young enough to know everything.
&gt; --

&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg03773.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#03776">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#03776">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg03778.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg03763.html">Riak async PB client based on Grizzly</a></span> <span class="sender italic">Jon Brisbin</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg03771.html">Re: Riak async PB client based on Grizzly</a></span> <span class="sender italic">Russell Brown</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg03773.html">Re: Riak async PB client based on Grizzly</a></span> <span class="sender italic">Mark Wolfe</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Riak async PB client based on Grizzly</span> <span class="sender italic">Jon Brisbin</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg03778.html">Re: Riak async PB client based on Grizzly</a></span> <span class="sender italic">Mark Wolfe</span></li>
</ul></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg03775.html">Re: Riak async PB client based on Grizzly</a></span> <span class="sender italic">Jon Brisbin</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg03777.html">Re: Riak async PB client based on Grizzly</a></span> <span class="sender italic">Russell Brown</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg03780.html">Re: Riak async PB client based on Grizzly</a></span> <span class="sender italic">Jon Brisbin</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg03781.html">Re: Riak async PB client based on Griz...</a></span> <span class="sender italic">Russell Brown</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Riak async PB client based on Grizzly">
<input type="hidden" name="msgid" value="5fcd4044-9dc9-4fcf-b401-8900778c4879@jbrisbin.local">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg03776.html">
<input type="submit" value=" Jon Brisbin ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Riak+async+PB+client+based+on+Grizzly%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg03773.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg03778.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">5fcd4044-9dc9-4fcf-b401-8900778c4879@jbrisbin.local</li>
</ul>
</div>
</body>
</html>
