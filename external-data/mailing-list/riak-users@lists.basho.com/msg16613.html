<!DOCTYPE html>
<html lang="en">
<head>
<title>Java Riak client can't handle a Riak node failure?</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="thrd3.html#16613" id="c">
<link rel="index" href="mail3.html#16613" id="i">
<link rel="prev" href="msg16612.html" id="p">
<link rel="next" href="msg16615.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg16613.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Java+Riak+client+can%27t+handle+a+Riak+node+failure%5C%3F%22&amp;o=newest" rel="nofollow"><span itemprop="name">Java Riak client can't handle a Riak node failure?</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Vanessa+Williams%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Vanessa Williams</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20151007" rel="nofollow">Wed, 07 Oct 2015 04:57:57 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi all, we are still (for a while longer) using Riak 1.4 and the matching
Java client. The client(s) connect to one node in the cluster (since that's
all it can do in this client version). The cluster itself has 4 nodes
(sorry, we can't use 5 in this scenario). There are 2 separate clients.</pre><pre>

We've tried both n_val = 3 and n_val=4. We achieve consistency-by-writes by
setting w=all. Therefore, we only require one successful read (r=1).

When all nodes are up, everything is fine. If one node fails, the clients
can no longer read any keys at all. There's an exception like this:

com.basho.riak.client.RiakRetryFailedException: java.net.ConnectException:
Connection refused

Now, it isn't possible that Riak can't operate when one node fails, so
we're clearly missing something here.

Note: we did try putting all 4 Riak nodes behind a load-balancer and
pointing the clients at it, but it didn't help.

Riak is a high-availability key-value store, so... why are we failing to
achieve high-availability? Any suggestions greatly appreciated, and if more
info is required I'll do my best to provide it.

Thanks in advance,
Vanessa

--
Vanessa Williams
ThoughtWire Corporation
<a  rel="nofollow" href="http://www.thoughtwire.com">http://www.thoughtwire.com</a>
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg16612.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="thrd3.html#16613">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="mail3.html#16613">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg16615.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email tSliceCur"><span class="subject">Java Riak client can't handle a Riak node failure?</span> <span class="sender italic">Vanessa Williams</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg16615.html">Re: Java Riak client can't handle a Riak node failur...</a></span> <span class="sender italic">Dmitri Zagidulin</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg16616.html">Re: Java Riak client can't handle a Riak node fa...</a></span> <span class="sender italic">Vanessa Williams</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg16618.html">Re: Java Riak client can't handle a Riak nod...</a></span> <span class="sender italic">Dmitri Zagidulin</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg16626.html">Re: Java Riak client can't handle a Riak...</a></span> <span class="sender italic">Vanessa Williams</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg16627.html">Re: Java Riak client can't handle a...</a></span> <span class="sender italic">Dmitri Zagidulin</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg16628.html">Re: Java Riak client can't hand...</a></span> <span class="sender italic">Vanessa Williams</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg16633.html">Re: Java Riak client can't ...</a></span> <span class="sender italic">Dmitri Zagidulin</span></li>
<li class="icons-email"><span class="subject"><a href="msg16662.html">Re: Java Riak client can't ...</a></span> <span class="sender italic">Vanessa Williams</span></li>
<li class="icons-email"><span class="subject"><a href="msg17043.html">Re: Java Riak client can't ...</a></span> <span class="sender italic">Vanessa Williams</span></li>
<li class="icons-email"><span class="subject"><a href="msg17045.html">Re: Java Riak client can't ...</a></span> <span class="sender italic">Alex Moore</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Java Riak client can't handle a Riak node failure?">
<input type="hidden" name="msgid" value="CAGwwO-gBtjDYnJv7MaYYnyy8ODt1H=GXvuA8-SdyYWhkyuWcQw@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg16613.html">
<input type="submit" value=" Vanessa Williams ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Java+Riak+client+can%27t+handle+a+Riak+node+failure%5C%3F%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg16612.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg16615.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CAGwwO-gBtjDYnJv7MaYYnyy8ODt1H=GXvuA8-SdyYWhkyuWcQw@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
