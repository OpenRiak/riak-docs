<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Javascript errors in reduce phases seen as {error,	javascript_reduce_timeout}?</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#03313" id="c">
<link rel="index" href="maillist.html#03313" id="i">
<link rel="prev" href="msg03295.html" id="p">
<link rel="next" href="msg03296.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg03313.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Javascript+errors+in+reduce+phases+seen+as+%5C%7Berror%2C%09javascript_reduce_timeout%5C%7D%5C%3F%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Javascript errors in reduce phases seen as {error,	javascript_reduce_timeout}?</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Jeremy+Raymond%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Jeremy Raymond</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20110511" rel="nofollow">Wed, 11 May 2011 14:37:18 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre style="margin: 0em;">
Implementing the m/r functions in Erlang did the trick.</pre><pre>

- Jeremy

On 5/10/2011 9:45 AM, Sean Cribbs wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><tt>You might see an error in the log, but there are a lot of things about 
</tt><tt>the JS VM that are too opaque. It's on our list of things to improve, 
</tt><tt>for sure.
</tt><pre style="margin: 0em;">

Sean Cribbs &lt;s...@basho.com &lt;<a  rel="nofollow" href="mailto:s...@basho.com">mailto:s...@basho.com</a>&gt;&gt;
Developer Advocate
Basho Technologies, Inc.
<a  rel="nofollow" href="http://basho.com/">http://basho.com/</a>

On May 10, 2011, at 9:30 AM, Jeremy Raymond wrote:

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><tt>Okay thanks. I figure something like this was going on. Besides the 
</tt><tt>timeout return value is there any way to tell what happened or at 
</tt><tt>what phase of some chained map reduce operations things failed? Would 
</tt><tt>I see errors in the logs that indicated a crash of the Javascript 
</tt><tt>engine or something along those lines?
</tt><pre style="margin: 0em;">

- Jeremy


</pre><tt>On Tue, May 10, 2011 at 9:27 AM, Sean Cribbs &lt;s...@basho.com 
</tt><tt>&lt;<a  rel="nofollow" href="mailto:s...@basho.com">mailto:s...@basho.com</a>&gt;&gt; wrote:
</tt><pre style="margin: 0em;">

    For large numbers of objects, your JavaScript functions will
    become bottlenecks, largely because the data has to be converted
    to and from JSON for every application of the function. If your
    reduce function isn't actually coalescing a value (e.g. sort
    doesn't), then you will run into this problem.  See if you can
    reimplement the functions in Erlang or decrease the quantity of
    values being passed to and returned from the reduce functions.

    Sean Cribbs &lt;s...@basho.com &lt;<a  rel="nofollow" href="mailto:s...@basho.com">mailto:s...@basho.com</a>&gt;&gt;
    Developer Advocate
    Basho Technologies, Inc.
    <a  rel="nofollow" href="http://basho.com/">http://basho.com/</a>

    On May 10, 2011, at 9:20 AM, Jeremy Raymond wrote:

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
    Hello,
    In a MapReduce job I have filtering through about 6500 items if
    I filter out enough items my m/r job completes successfully. If
    I loosen the filtering such that a large number of items would
    be included in the results the m/r fails with error
    {error,javascript_reduce_timeout}. This error occurs after about
    10 seconds of processing. Would Javascript errors such as the
    Javascript process running out of memory and crashing result in
    this timeout error? I also noticed that after this error is
    returned, the riak node I made the request on chugs along at
    ~100% CPU for about another minute but the other two nodes quite
    down almost immediately after the error is returned. How might I
    go about debugging this?
    - Jeremy
    ---------------------------------------------------------------------
    This transmission (including any attachments) may contain
    confidential information, privileged material (including
    material protected by the solicitor-client or other applicable
    privileges), or constitute non-public information. Any use of
    this information by anyone other than the intended recipient is
    prohibited. If you have received this transmission in error,
    please immediately reply to the sender and delete this
    information from your system. Use, dissemination, distribution,
    or reproduction of this transmission by unintended recipients is
    not authorized and may be
    unlawful._______________________________________________
    riak-users mailing list
    riak-users@lists.basho.com &lt;<a  rel="nofollow" href="mailto:riak-users@lists.basho.com">mailto:riak-users@lists.basho.com</a>&gt;
    <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre></blockquote><pre style="margin: 0em;">


    _______________________________________________
    riak-users mailing list
    riak-users@lists.basho.com &lt;<a  rel="nofollow" href="mailto:riak-users@lists.basho.com">mailto:riak-users@lists.basho.com</a>&gt;
    <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>


</pre></blockquote><pre style="margin: 0em;">

</pre></blockquote><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg03295.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#03313">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#03313">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg03296.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg03292.html">Javascript errors in reduce phases seen as	{error,javascrip...</a></span> <span class="sender italic">Jeremy Raymond</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg03293.html">Re: Javascript errors in reduce phases seen as {error,...</a></span> <span class="sender italic">Sean Cribbs</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg03294.html">Re: Javascript errors in reduce phases seen as {er...</a></span> <span class="sender italic">Jeremy Raymond</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg03295.html">Re: Javascript errors in reduce phases seen as...</a></span> <span class="sender italic">Sean Cribbs</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Javascript errors in reduce phases see...</span> <span class="sender italic">Jeremy Raymond</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Javascript errors in reduce phases seen as {error,	javascript_reduce_timeout}?">
<input type="hidden" name="msgid" value="4DCB0182.6020509@gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg03313.html">
<input type="submit" value=" Jeremy Raymond ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Javascript+errors+in+reduce+phases+seen+as+%5C%7Berror%2C%09javascript_reduce_timeout%5C%7D%5C%3F%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg03295.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg03296.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">4DCB0182.6020509@gmail.com</li>
</ul>
</div>
</body>
</html>
