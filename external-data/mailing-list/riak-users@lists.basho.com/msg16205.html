<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: my cluster spontaneously loses a node after ~48hrs</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#16205" id="c">
<link rel="index" href="maillist.html#16205" id="i">
<link rel="prev" href="msg16190.html" id="p">
<link rel="next" href="msg16099.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg16205.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+my+cluster+spontaneously+loses+a+node+after+%5C%7E48hrs%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: my cluster spontaneously loses a node after ~48hrs</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Jason+Golubock%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Jason Golubock</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20150604" rel="nofollow">Thu, 04 Jun 2015 11:23:30 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Matt - I appreciate the follow up. I haven't seen my locking problem again 
since we performed our updates. We are stable in production with rapidly 
growing data (perhaps you have read about our new Hound app, which was just 
announced and released in private beta on Android this week!)</pre><pre>

Unfortunately there's no way to know exactly which library was causing the 
problem with my riak clusters, as I mentioned. I had been running dev clusters 
for months with no problems.   riak has always been very stable for me.

best regards,
~ Jason



&gt; On Jun 3, 2015, at 12:11 PM, Matthew Brender &lt;mbren...@basho.com&gt; wrote:
&gt; 
&gt; Hi Jason, 
&gt; 
&gt; Given the unique event you had here, I'm curious to hear whether you saw 
&gt; further restarts. This kind of spontaneousness is the polar opposite of what 
&gt; most users report from Riak, which is why I want to follow up. 
&gt; 
&gt; Thanks, 
&gt; Matt
&gt; 
&gt; 
&gt; Matt Brender | Developer Advocacy Lead
&gt; Basho Technologies
&gt; t: @mjbrender
&gt; 
&gt; 
&gt;&gt; On Tue, May 12, 2015 at 2:30 PM, Jason Golubock &lt;ja...@soundhound.com&gt; wrote:
&gt;&gt; 
&gt;&gt; Bryan- thanks for this tip,
&gt;&gt; i probably wouldn't have suspected ulimit.
&gt;&gt; 
&gt;&gt; It's been 4 days now since my last restart, which i've never reached before.
&gt;&gt; so i'm cautious to say that the problem has gone away.
&gt;&gt; 
&gt;&gt; i suspect this progress is due to some library updates
&gt;&gt; we performed on the hosts. it turns out some of them were out
&gt;&gt; of date, which i wan't aware of.  we updated them all at once,
&gt;&gt; so there's no way to identify which one(s) caused the problem,
&gt;&gt; assuming that was the problem. hopeful now,
&gt;&gt; 
&gt;&gt; ~ Jason
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt;&gt; On 12.05.2015 05:37, Bryan Hunt wrote:
&gt;&gt;&gt; Also ensure ulimit is set according to the recommendations on
&gt;&gt;&gt; docs.basho.com. ulimit set too low is a common cause of node termination.
&gt;&gt;&gt; On 5 May 2015 21:23, &quot;Jason Golubock&quot; &lt;ja...@soundhound.com&gt; wrote:
&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; Scott - thanks for the response,
&gt;&gt;&gt;&gt; yes i've used all those tools at one point, but i'm not sure
&gt;&gt;&gt;&gt; exactly what i'm looking for or what to do with the output.
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; i've restarted my cluster again but next time it happens,
&gt;&gt;&gt;&gt; i'll attach some output/snapshot files.
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; ~ Jason
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; On 04.05.2015 19:32, Scott Lystig Fritchie wrote:
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt; Hi, Jason.  Have you tried using the system inspection utilities bundled
&gt;&gt;&gt;&gt;&gt; with Riak?
&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt; <a  rel="nofollow" href="http://docs.basho.com/riak/latest/ops/running/tools/riak-admin/#top">http://docs.basho.com/riak/latest/ops/running/tools/riak-admin/#top</a>
&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt; <a  rel="nofollow" href="http://docs.basho.com/riak/latest/ops/running/tools/riak-admin/#cluster-info">http://docs.basho.com/riak/latest/ops/running/tools/riak-admin/#cluster-info</a>
&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt; <a  rel="nofollow" href="http://docs.basho.com/riak/latest/ops/upgrading/production-checklist/#Confirming-Configuration-with-Riaknostic">http://docs.basho.com/riak/latest/ops/upgrading/production-checklist/#Confirming-Configuration-with-Riaknostic</a>
&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt; The &quot;top&quot; utility can show very quickly the most active processes within
&gt;&gt;&gt;&gt;&gt; the virtual machine.
&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt; -Scott
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; _______________________________________________
&gt;&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt;&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;&gt;&gt; 
&gt;&gt;&gt; _______________________________________________
&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;&gt; 
&gt;&gt; 
&gt;&gt; _______________________________________________
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt; 
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg16190.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#16205">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#16205">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg16099.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg16097.html">my cluster spontaneously loses a node after ~48hrs</a></span> <span class="sender italic">Jason Golubock</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg16105.html">Re: my cluster spontaneously loses a node after...</a></span> <span class="sender italic">Scott Lystig Fritchie</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg16112.html">Re: my cluster spontaneously loses a node a...</a></span> <span class="sender italic">Jason Golubock</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg16125.html">Re: my cluster spontaneously loses a no...</a></span> <span class="sender italic">Bryan Hunt</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg16129.html">Re: my cluster spontaneously loses ...</a></span> <span class="sender italic">Jason Golubock</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg16190.html">Re: my cluster spontaneously l...</a></span> <span class="sender italic">Matthew Brender</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: my cluster spontaneous...</span> <span class="sender italic">Jason Golubock</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: my cluster spontaneously loses a node after ~48hrs">
<input type="hidden" name="msgid" value="D7F5A0A7-5063-45AE-B6E0-6DD1A284DC9C@soundhound.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg16205.html">
<input type="submit" value=" Jason Golubock ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+my+cluster+spontaneously+loses+a+node+after+%5C%7E48hrs%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg16190.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg16099.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">D7F5A0A7-5063-45AE-B6E0-6DD1A284DC9C@soundhound.com</li>
</ul>
</div>
</body>
</html>
