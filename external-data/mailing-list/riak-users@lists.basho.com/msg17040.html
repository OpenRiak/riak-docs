<!DOCTYPE html>
<html lang="en">
<head>
<title>riak crash</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#17040" id="c">
<link rel="index" href="maillist.html#17040" id="i">
<link rel="prev" href="msg17038.html" id="p">
<link rel="next" href="msg17048.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg17040.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22riak+crash%22&amp;o=newest" rel="nofollow"><span itemprop="name">riak crash</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Raviraj+Vaishampayan%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Raviraj Vaishampayan</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20160222" rel="nofollow">Mon, 22 Feb 2016 02:14:39 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi,

We have been using riak to gather our test data and analyze results after test 
completes.
Recently we have observed riak crash in riak console logs.
This causes our tests failing to record data to riak and bailing out :-(</pre><pre>

The crash logs are as follow:
2016-02-19 16:25:26.255 [error] &lt;0.2160.0&gt; gen_fsm &lt;0.2160.0&gt; in state active 
terminated with reason: no function clause matching 
riak_kv_vnode:handle_info({#Ref&lt;0.0.482.161540&gt;,{ok,&lt;0.11042.842&gt;}}, 
{state,268322566228720457638957762256505085639956365312,riak_kv_eleveldb_backend,true,{state,&lt;&lt;&gt;&gt;,...},...})
 line 1195

2016-02-19 16:25:26.260 [error] &lt;0.2160.0&gt; CRASH REPORT Process &lt;0.2160.0&gt; with 
2 neighbours exited with reason: no function clause matching 
riak_kv_vnode:handle_info({#Ref&lt;0.0.482.161540&gt;,{ok,&lt;0.11042.842&gt;}}, 
{state,268322566228720457638957762256505085639956365312,riak_kv_eleveldb_backend,true,{state,&lt;&lt;&gt;&gt;,...},...})
 line 1195 in gen_fsm:terminate/7 line 622

2016-02-19 16:25:26.260 [error] &lt;0.172.0&gt; Supervisor riak_core_vnode_sup had 
child undefined started with {riak_core_vnode,start_link,undefined} at 
&lt;0.2160.0&gt; exit with reason no function clause matching 
riak_kv_vnode:handle_info({#Ref&lt;0.0.482.161540&gt;,{ok,&lt;0.11042.842&gt;}}, 
{state,268322566228720457638957762256505085639956365312,riak_kv_eleveldb_backend,true,{state,&lt;&lt;&gt;&gt;,...},...})
 line 1195 in context child_terminated

2016-02-19 16:25:26.261 [error] &lt;0.4319.0&gt; gen_fsm &lt;0.4319.0&gt; in state ready 
terminated with reason: no function clause matching 
riak_kv_vnode:handle_info({#Ref&lt;0.0.482.161540&gt;,{ok,&lt;0.11042.842&gt;}}, 
{state,268322566228720457638957762256505085639956365312,riak_kv_eleveldb_backend,true,{state,&lt;&lt;&gt;&gt;,...},...})
 line 1195

2016-02-19 16:25:26.275 [error] &lt;0.4319.0&gt; CRASH REPORT Process &lt;0.4319.0&gt; with 
10 neighbours exited with reason: no function clause matching 
riak_kv_vnode:handle_info({#Ref&lt;0.0.482.161540&gt;,{ok,&lt;0.11042.842&gt;}}, 
{state,268322566228720457638957762256505085639956365312,riak_kv_eleveldb_backend,true,{state,&lt;&lt;&gt;&gt;,...},...})
 line 1195 in gen_fsm:terminate/7 line 622

2016-02-19 16:25:26.278 [error] &lt;0.4320.0&gt; Supervisor {&lt;0.4320.0&gt;,poolboy_sup} 
had child riak_core_vnode_worker started with 
riak_core_vnode_worker:start_link([{worker_module,riak_core_vnode_worker},{worker_args,[268322566228720457638957762256505085639956365312,...]},...])
 at undefined exit with reason no function clause matching 
riak_kv_vnode:handle_info({#Ref&lt;0.0.482.161540&gt;,{ok,&lt;0.11042.842&gt;}}, 
{state,268322566228720457638957762256505085639956365312,riak_kv_eleveldb_backend,true,{state,&lt;&lt;&gt;&gt;,...},...})
 line 1195 in context shutdown_error

2016-02-19 16:25:26.278 [error] &lt;0.4320.0&gt; gen_server &lt;0.4320.0&gt; terminated 
with reason: no function clause matching 
riak_kv_vnode:handle_info({#Ref&lt;0.0.482.161540&gt;,{ok,&lt;0.11042.842&gt;}}, 
{state,268322566228720457638957762256505085639956365312,riak_kv_eleveldb_backend,true,{state,&lt;&lt;&gt;&gt;,...},...})
 line 1195

2016-02-19 16:25:26.278 [error] &lt;0.4320.0&gt; CRASH REPORT Process &lt;0.4320.0&gt; with 
0 neighbours exited with reason: no function clause matching 
riak_kv_vnode:handle_info({#Ref&lt;0.0.482.161540&gt;,{ok,&lt;0.11042.842&gt;}}, 
{state,268322566228720457638957762256505085639956365312,riak_kv_eleveldb_backend,true,{state,&lt;&lt;&gt;&gt;,...},...})
 line 1195 in gen_server:terminate/6 line 744

2016-02-19 16:25:26.806 [error] &lt;0.2157.0&gt; gen_fsm &lt;0.2157.0&gt; in state active 
terminated with reason: {timeout,{gen_server,call,[&lt;0.5141.0&gt;,stop]}}

2016-02-19 16:25:26.808 [error] &lt;0.2157.0&gt; CRASH REPORT Process &lt;0.2157.0&gt; with 
2 neighbours exited with reason: {timeout,{gen_server,call,[&lt;0.5141.0&gt;,stop]}} 
in gen_fsm:terminate/7 line 600

2016-02-19 16:25:26.809 [error] &lt;0.5450.0&gt; gen_fsm &lt;0.5450.0&gt; in state ready 
terminated with reason: {timeout,{gen_server,call,[&lt;0.5141.0&gt;,stop]}}

2016-02-19 16:25:26.809 [error] &lt;0.172.0&gt; Supervisor riak_core_vnode_sup had 
child undefined started with {riak_core_vnode,start_link,undefined} at 
&lt;0.2157.0&gt; exit with reason {timeout,{gen_server,call,[&lt;0.5141.0&gt;,stop]}} in 
context child_terminated

2016-02-19 16:25:26.809 [error] &lt;0.5450.0&gt; CRASH REPORT Process &lt;0.5450.0&gt; with 
10 neighbours exited with reason: {timeout,{gen_server,call,[&lt;0.5141.0&gt;,stop]}} 
in gen_fsm:terminate/7 line 622

2016-02-19 16:25:26.809 [error] &lt;0.5451.0&gt; Supervisor {&lt;0.5451.0&gt;,poolboy_sup} 
had child riak_core_vnode_worker started with 
riak_core_vnode_worker:start_link([{worker_module,riak_core_vnode_worker},{worker_args,[211232658520482062396626323478525280184646500352,...]},...])
 at undefined exit with reason {timeout,{gen_server,call,[&lt;0.5141.0&gt;,stop]}} in 
context shutdown_error

2016-02-19 16:25:26.809 [error] &lt;0.5451.0&gt; gen_server &lt;0.5451.0&gt; terminated 
with reason: {timeout,{gen_server,call,[&lt;0.5141.0&gt;,stop]}}

2016-02-19 16:25:26.809 [error] &lt;0.5451.0&gt; CRASH REPORT Process &lt;0.5451.0&gt; with 
0 neighbours exited with reason: {timeout,{gen_server,call,[&lt;0.5141.0&gt;,stop]}} 
in gen_server:terminate/6 line 744

Our setup is as follow:
We have a riak cluster with 10 nodes, configuration of each node is as follow:
RAM: 48GB
Disk:
         80GB (/)
         504GB (separate riak partition)
Riak Version: 2.1.3-1 (2.1.3)
Data in riak: After observing crash, total data in riak partition was ~50GB

Riak config is as follow:
riak.conf
[Attached with this email]

advanced.config:

[

 {riak_kv, [{add_paths, [&quot;/usr/local/lib/scale_riak/ebin&quot;]}]},

 {webmachine, [{backlog, 511}, {nodelay, true}]},

 {yokozuna, [{solr_request_timeout, 120000}]}

].

We have observed this a few times now, and after this crash we observed latency 
increases and our application starts timing out.
We would really like to understand what might be causing this crash and if it 
is something due to missing config on our nodes we would like to fix it.

Thanks for your help in advanced :-)

Regards,
Raviraj
</pre>
<p><strong><a href="msg17040/riak.conf" ><img src="../attachment.png" alt="Attachment:" width=27 height=28></a>
<a href="msg17040/riak.conf" >riak.conf</a></strong><br>
<em>Description:</em> riak.conf</p>
<pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg17038.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#17040">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#17040">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg17048.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email tSliceCur"><span class="subject">riak crash</span> <span class="sender italic">Raviraj Vaishampayan</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg17048.html">Re: riak crash</a></span> <span class="sender italic">Matthew Von-Maszewski</span></li>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="riak crash">
<input type="hidden" name="msgid" value="D2F0DD03.63AB%rvaishampayan@vmware.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg17040.html">
<input type="submit" value=" Raviraj Vaishampayan ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22riak+crash%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg17038.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg17048.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">D2F0DD03.63AB%rvaishampayan@vmware.com</li>
</ul>
</div>
</body>
</html>
