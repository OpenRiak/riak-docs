<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Java client stats question</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="thrd13.html#11756" id="c">
<link rel="index" href="mail13.html#11756" id="i">
<link rel="prev" href="msg11755.html" id="p">
<link rel="next" href="msg11742.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg11756.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Java+client+stats+question%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Java client stats question</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Guido+Medina%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Guido Medina</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20130725" rel="nofollow">Thu, 25 Jul 2013 08:40:56 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre style="margin: 0em;">
Hi Brian,

</pre><tt>We have a custom (and very small) admin page that shows Riak KV version, 
</tt><tt>connected nodes and ring members, here is how it looks:
</tt><pre style="margin: 0em;"></pre><pre>

riak_kv_version         1.4.0
connected_nodes         riak@node2
riak@node3
riak@node4
riak@node5
ring_members    riak@node1
riak@node2
riak@node3
riak@node4
riak@node5
sys_system_architecture         x86_64-unknown-linux-gnu


</pre><tt>That also tell us where the running app is working against, if dev or 
</tt><tt>prod cluster cause nodes will be different. We also show some buckets 
</tt><tt>information but that is currently on PBC.
</tt><pre style="margin: 0em;">

Guido.


On 25/07/13 16:18, Brian Roach wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
Guido -

Right now, no.

We've been having some internal discussions around that topic and
whether it's really a &quot;client library&quot; operation or not.

How are you using stats? Is it for a monitoring app or ... ?

Thanks,
Brian Roach

On Thu, Jul 25, 2013 at 4:25 AM, Guido Medina &lt;guido.med...@temetra.com&gt; wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
Hi,

Is there a way to get the JSON stats via PBC? This is how we are doing it
now, we would like to get rid of any HTTP call, currently, this is the only
call being made to HTTP:

   private void collectNodeInfo(final PBClientConfig clientConfig)
   {
     ...
     RiakClusterStats stats=null;
     try{
       stats=new RiakClusterStats();
       HttpClient client=new DefaultHttpClient();
       HttpGet g=new HttpGet(&quot;<a  rel="nofollow" href="http://&quot">http://&quot</a>; + clientConfig.getHost() +
&quot;:8098/stats&quot;);
       HttpResponse resonse=client.execute(g);
       JSONObject statsMap;
       InputStream contentStream=null;
       try{
         contentStream=resonse.getEntity().getContent();
         JSONTokener tok=new JSONTokener(contentStream);
         statsMap=new JSONObject(tok);
         stats.addNode(clientConfig.getHost(),statsMap);
       } finally{
         if(contentStream != null){
           contentStream.close();
         }
       }
     } catch(Exception e){
       log.error(&quot;Huh? Exception when &quot;,e);
     }
     lastClusterStats=stats;
   }


Kind regards,

Guido.

_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>

</pre></blockquote></blockquote><pre style="margin: 0em;">

</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg11755.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="thrd13.html#11756">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="mail13.html#11756">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg11742.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg11740.html">Java client stats question</a></span> <span class="sender italic">Guido Medina</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg11755.html">Re: Java client stats question</a></span> <span class="sender italic">Brian Roach</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Java client stats question</span> <span class="sender italic">Guido Medina</span></li>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Java client stats question">
<input type="hidden" name="msgid" value="51F144C6.6060104@temetra.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg11756.html">
<input type="submit" value=" Guido Medina ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Java+client+stats+question%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg11755.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg11742.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">51F144C6.6060104@temetra.com</li>
</ul>
</div>
</body>
</html>
