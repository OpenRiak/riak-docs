<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Benchmarks of backends</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#03756" id="c">
<link rel="index" href="maillist.html#03756" id="i">
<link rel="prev" href="msg03742.html" id="p">
<link rel="next" href="msg03747.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg03756.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Benchmarks+of+backends%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Benchmarks of backends</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Justin+Sheehy%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Justin Sheehy</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20110621" rel="nofollow">Tue, 21 Jun 2011 06:29:52 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi, Anthony.

Most people using Riak today use either Bitcask or Innostore, as I suspect you 
know. Bitcask has excellent performance, but the limitation that you are aware 
of with a hard limit on number of keys per unit of available RAM. Innostore 
does not have that limitation, but is much harder to achieve equivalent 
performance on.</pre><pre>

You've noticed that multiple people (including Basho's own Dizzy and also the 
estimable Paul Davis) have produced wrappers for LevelDB, and indeed we are 
currently evaluating this as another alternative storage engine behind Riak.  
We will be posting some performance thoughts on LevelDB shortly, and generally 
it looks promising.  The main blocker at this point is portability; we would 
like for the backend to run well on all of Riak's existing main platforms.

Expect more from us on this soon. The short answer is that if you have too many 
keys for bitcask, the answer today is usually Innostore but soon might be 
LevelDB instead.

Best,

-Justin




On Jun 17, 2011, at 7:12 PM, Anthony Molinaro wrote:

&gt; Hi,
&gt; 
&gt;  I'm wondering if anyone has done any testing with regards to memory
&gt; usage of various backends.  After recent emails about the large overhead
&gt; of bitcask keydir indexes, and by comparing with my current production
&gt; nodes. I find that the overhead per key ends up being too large for
&gt; small keys.
&gt; 
&gt;  So I'm in the market for a new backend, and was wondering if anyone
&gt; out there has done any measurements on memory overhead per key, and
&gt; access times.
&gt; 
&gt; I'm also wondering if there are any backends floating out there I haven't
&gt; found. I've done some google searches to come across
&gt; 
&gt;  <a  rel="nofollow" href="https://github.com/krestenkrab/riak_btree_backend">https://github.com/krestenkrab/riak_btree_backend</a>
&gt;  <a  rel="nofollow" href="https://github.com/cstar/riak_redis_backend">https://github.com/cstar/riak_redis_backend</a>
&gt; 
&gt; but I'm assuming there might be others.
&gt; 
&gt; Also, I figure it would be interesting to understand the overhead for
&gt; the built in backends and innnostore and possibly look at other stores
&gt; I've found which seem to have erlang wrappers like
&gt; 
&gt; LevelDB:
&gt;  <a  rel="nofollow" href="https://github.com/basho/e_leveldb">https://github.com/basho/e_leveldb</a>
&gt;  <a  rel="nofollow" href="https://github.com/davisp/erleveldb">https://github.com/davisp/erleveldb</a>
&gt; Tokyo Cabinet:
&gt;  <a  rel="nofollow" href="https://github.com/rabbitmq/toke">https://github.com/rabbitmq/toke</a>
&gt; Berkeley DB:
&gt;  <a  rel="nofollow" href="https://github.com/krestenkrab/bets">https://github.com/krestenkrab/bets</a>
&gt; 
&gt; So anyone know anything about these backends or other k/v stores in terms
&gt; of memory versus disk for large datasets?
&gt; 
&gt; The thing prompting this is a cassandra cluster with about 14 billion
&gt; entries (7 billion with replication factor of 2), which uses 60 machines.
&gt; I was trying to determine how many bitcask backed machines it would take
&gt; to store this data and it ends up being about 150.  This is mostly because
&gt; of the 84 bytes of overhead per key (43 bytes by calculations determined
&gt; on this list a few weeks ago, another 41 by measuring my current production
&gt; setup).  Even with the keys of 17 bytes, thats 101 bytes of overhead,
&gt; so just wondering if there's anything better.
&gt; 
&gt; Anyway, I'm trying to get some hardware to run basho_bench with and will
&gt; try out some different things, but if anyone has done any of this work
&gt; already it might be interesting to know.
&gt; 
&gt; Thanks,
&gt; 
&gt; -Anthony
&gt; 
&gt; -- 
&gt; ------------------------------------------------------------------------
&gt; Anthony Molinaro                           &lt;antho...@alumni.caltech.edu&gt;
&gt; 
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>


_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg03742.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#03756">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#03756">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg03747.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg03742.html">Benchmarks of backends</a></span> <span class="sender italic">Anthony Molinaro</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Benchmarks of backends</span> <span class="sender italic">Justin Sheehy</span></li>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Benchmarks of backends">
<input type="hidden" name="msgid" value="EF825499-C13C-4680-90F5-84813C9A1557@basho.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg03756.html">
<input type="submit" value=" Justin Sheehy ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Benchmarks+of+backends%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg03742.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg03747.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">EF825499-C13C-4680-90F5-84813C9A1557@basho.com</li>
</ul>
</div>
</body>
</html>
