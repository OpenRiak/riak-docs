<!DOCTYPE html>
<html lang="en">
<head>
<title>RE: http access to Riak objects</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="thrd14.html#11398" id="c">
<link rel="index" href="mail14.html#11398" id="i">
<link rel="prev" href="msg11397.html" id="p">
<link rel="next" href="msg11376.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg11398.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22RE%5C%3A+http+access+to+Riak+objects%22&amp;o=newest" rel="nofollow"><span itemprop="name">RE: http access to Riak objects</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Sanjeev+Neelarapu%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Sanjeev Neelarapu</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20130703" rel="nofollow">Wed, 03 Jul 2013 22:58:14 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Thanks Hector,

I was trying to download with QSA but there was something went wrong in 
generating the signature. After correcting it I could download it.</pre><pre>

Thanks,
Sanjeev

-----Original Message-----
From: Hector Castro [<a  rel="nofollow" href="mailto:hec...@basho.com">mailto:hec...@basho.com</a>] 
Sent: Wednesday, July 03, 2013 10:29 PM
To: Sanjeev Neelarapu
Cc: Alexander Moore; riak-users@lists.basho.com
Subject: Re: http access to Riak objects

Sanjeev,

Is your goal to have the resource be accessible via query string 
authentication, or just publicly accessible? Asking because your example URL 
contains the query string authentication parameters.

<a  rel="nofollow" href="http://docs.basho.com/riakcs/latest/cookbooks/Authentication/#Query-String-Authentication">http://docs.basho.com/riakcs/latest/cookbooks/Authentication/#Query-String-Authentication</a>

Either way, I attempted to reproduce your steps locally and could download the 
file from CS via curl. Can you take a look and see if I did anything 
differently?

<a  rel="nofollow" href="https://gist.github.com/hectcastro/5920366">https://gist.github.com/hectcastro/5920366</a>

--
Hector


On Wed, Jul 3, 2013 at 2:41 AM, Sanjeev Neelarapu 
&lt;sanjeev.neelar...@citrix.com&gt; wrote:
&gt; Thanks Alex for your quick response.
&gt;
&gt; I have made the object as public as per your instructions:
&gt;
&gt; [root@Rhel63-Sanjeev ~]# s3cmd setacl -P
&gt; s3://imagestore/template/tmpl/1/5/centos56-x86_64-xen/centos56-x86_64.
&gt; vhd.bz2
&gt;
&gt; s3://imagestore/template/tmpl/1/5/centos56-x86_64-xen/centos56-x86_64.vhd.bz2:
&gt; ACL set to Public  [1 of 1]
&gt;
&gt;
&gt;
&gt; However downloading this object still says &quot;Access Denied&quot;.  URL being 
&gt; fired
&gt; is:
&gt;
&gt; <a  rel="nofollow" href="http://10.147.29.57:8080/imagestore/template/tmpl/1/5/centos56-x86_64-">http://10.147.29.57:8080/imagestore/template/tmpl/1/5/centos56-x86_64-</a>
&gt; xen/centos56-x86_64.vhd.bz2?Expires=1372856948&amp;AWSAccessKeyId=9M7I6JPY
&gt; ZHDNLG43TWCD&amp;Signature=fQNuyFYMnNdLwv64XTj+WsC2U7s=
&gt;
&gt;
&gt;
&gt; Thanks,
&gt;
&gt; Sanjeev
&gt;
&gt;
&gt;
&gt; From: Alexander Moore [<a  rel="nofollow" href="mailto:moore.a...@gmail.com">mailto:moore.a...@gmail.com</a>]
&gt; Sent: Tuesday, July 02, 2013 7:20 PM
&gt; To: Sanjeev Neelarapu
&gt; Cc: riak-users@lists.basho.com
&gt; Subject: Re: http access to Riak objects
&gt;
&gt;
&gt;
&gt; Hi Sanjeev,
&gt;
&gt;
&gt;
&gt; By default, uploaded objects will not be publicly available.  To make 
&gt; them available you have to set the Access Control List to allow public 
&gt; reads for all users.
&gt;
&gt; If you are using s3cmd you can do this with: s3cmd -c .s3cfgfile 
&gt; setacl --acl-public s3://BUCKET/OBJECT
&gt;
&gt;
&gt;
&gt; If you need to do this for everything in a bucket, you should then 
&gt; look into using &quot;Bucket Policies&quot; to automatically set public access.
&gt;
&gt; Your bucket policy would look something like 
&gt; <a  rel="nofollow" href="https://gist.github.com/alexmoore/5909408">https://gist.github.com/alexmoore/5909408</a>, and then you could apply 
&gt; the policy using s3cmd: s3cmd -c .s3cfg setpolicy 
&gt; public-access-bucket-policy.json s3://BUCKET
&gt;
&gt;
&gt;
&gt; Thanks,
&gt;
&gt; Alex
&gt;
&gt;
&gt;
&gt;
&gt;
&gt; On Tue, Jul 2, 2013 at 8:32 AM, Sanjeev Neelarapu 
&gt; &lt;sanjeev.neelar...@citrix.com&gt; wrote:
&gt;
&gt; Hi,
&gt;
&gt;
&gt;
&gt; Could someone help me in providing http access to objects stored in 
&gt; the bucket?
&gt;
&gt;
&gt;
&gt; I have Riak and Riak-CS installed on a linux machine. Created bucket 
&gt; and pushed some files to the bucket using s3cmd. However downloading 
&gt; the objects using http URL is failing.
&gt;
&gt;
&gt;
&gt; Following is the object path stored in the bucket &quot;imagestore&quot;:
&gt;
&gt; s3://imagestore/template/tmpl/1/5/centos56-x86_64-xen/centos56-x86_64.
&gt; vhd.bz2
&gt;
&gt;
&gt;
&gt; Could anyone specify the way to download it using http access?
&gt;
&gt;
&gt;
&gt; ACL on the bucket:
&gt;
&gt;
&gt;
&gt; [root@Rhel63-Sanjeev ~]# s3cmd info s3://imagestore
&gt;
&gt; s3://imagestore/ (bucket):
&gt;
&gt;    Location:  us-east-1
&gt;
&gt;    ACL:       admin: FULL_CONTROL
&gt;
&gt;
&gt;
&gt;
&gt;
&gt; Thanks,
&gt;
&gt; Sanjeev
&gt;
&gt;
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;
&gt;
&gt;
&gt;
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;

_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg11397.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="thrd14.html#11398">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="mail14.html#11398">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg11376.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg11369.html">http access to Riak objects</a></span> <span class="sender italic">Sanjeev Neelarapu</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg11371.html">Re: http access to Riak objects</a></span> <span class="sender italic">Alexander Moore</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg11395.html">RE: http access to Riak objects</a></span> <span class="sender italic">Sanjeev Neelarapu</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg11397.html">Re: http access to Riak objects</a></span> <span class="sender italic">Hector Castro</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">RE: http access to Riak objects</span> <span class="sender italic">Sanjeev Neelarapu</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="RE: http access to Riak objects">
<input type="hidden" name="msgid" value="D25E116F470C5E4A869A2A9E42883632063F9DF4@SINPEX01CL01.citrite.net">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg11398.html">
<input type="submit" value=" Sanjeev Neelarapu ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22RE%5C%3A+http+access+to+Riak+objects%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg11397.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg11376.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">D25E116F470C5E4A869A2A9E42883632063F9DF4@SINPEX01CL01.citrite.net</li>
</ul>
</div>
</body>
</html>
