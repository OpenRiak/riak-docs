<!DOCTYPE html>
<html lang="en">
<head>
<title>1. Riak Crashing on Data Load from CSV and 2. How to get Ripple to	load js functions</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#07479" id="c">
<link rel="index" href="maillist.html#07479" id="i">
<link rel="prev" href="msg07476.html" id="p">
<link rel="next" href="msg07499.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg07479.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%221.+Riak+Crashing+on+Data+Load+from+CSV+and+2.+How+to+get+Ripple+to%09load+js+functions%22&amp;o=newest" rel="nofollow"><span itemprop="name">1. Riak Crashing on Data Load from CSV and 2. How to get Ripple to	load js functions</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Gustav+Gennrich%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Gustav Gennrich</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20120518" rel="nofollow">Fri, 18 May 2012 09:04:03 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi,

Below is our setup to better diagnose:</pre><pre>

Ring creation size: 128
Backend: LevelDB

All other settings in app.config are using the default values

We have 3 servers (nodes) each of which have 8GB of ram.

Question 1: We are attempting to load data into Riak using CSVs that we
generated from data previously stored is our MySQL database. We are using
Ripple to create the documents and associations (links). The problem we are
having is Riak continue to grow in memory consumption until it finally
crashed while loading this data. We are only able to add around a couple
hundred thousand rows from the CSV's before this happens. Riak then
responds with 500 errors and eventually all of the nodes crash and the
nodes need to be restarted.

Question 2 (unrelated): I am attempting to use some of the already defined
js functions in ripple.js in a mapreduce, however, I keep getting the
following error:

Riak::MapReduceError:
{&quot;phase&quot;:0,&quot;error&quot;:&quot;[{&lt;&lt;\&quot;lineno\&quot;&gt;&gt;,1},{&lt;&lt;\&quot;message\&quot;&gt;&gt;,&lt;&lt;\&quot;ReferenceError:
Ripple is not defined\&quot;&gt;&gt;},{&lt;&lt;\&quot;source\&quot;&gt;&gt;,&lt;&lt;\&quot;unknown\&quot;&gt;&gt;}]&quot;

In ripple.yml I have the following (***** represent hidden values):

# Configure Riak connections for the Ripple library.
development:
  # http_port: 8091
  # pb_port: 8087
  # host: 127.0.0.1
  basic_auth: *****
  http_port: 80
  pb_port: 8087
  host: *****
  http_backend: Excon
  solr: &quot;/solr&quot;
  js_source_dir: &lt;%= Rails.root + &quot;app/mapreduce&quot; %&gt;

# The test environment has additional keys for configuring the
# Riak::TestServer for your test/spec suite:
#
# * bin_dir specifies the path to the &quot;riak&quot; script that you use to
#           start Riak (just the directory)
# * js_source_dir specifies where your custom Javascript functions for
#           MapReduce should be loaded from. Usually app/mapreduce.
test:
  http_port: 9000
  pb_port: 9002
  host: localhost
  source: /usr/local/bin   # Default for Homebrew.
  js_source_dir: &lt;%= Rails.root + &quot;/app/mapreduce&quot; %&gt;

production:
  nodes:
  - host: *****
    http_port: 8098
    pb_port: 8087
  - host: *****
    http_port: 8098
    pb_port: 8087
  - host: *****
    http_port: 8098
    pb_port: 8087
  http_backend: Excon
  solr: &quot;/solr&quot;
  js_source_dir: &lt;%= Rails.root + &quot;app/mapreduce&quot; %&gt;

I don't see why I am getting this error when I have defined where the
js_source_dir is.

Any help would be greatly appreciated!

Thanks,

Gustav
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg07476.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#07479">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#07479">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg07499.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email tSliceCur"><span class="subject">1. Riak Crashing on Data Load from CSV and 2. How to get R...</span> <span class="sender italic">Gustav Gennrich</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg07499.html">Re: 1. Riak Crashing on Data Load from CSV and 2. How...</a></span> <span class="sender italic">Dave Smith</span></li>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="1. Riak Crashing on Data Load from CSV and 2. How to get Ripple to	load js functions">
<input type="hidden" name="msgid" value="CAGt5RBos_u9o4A4r0wAROd4AdSFmA3Hp651akqWy=VwdHGggVw@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg07479.html">
<input type="submit" value=" Gustav Gennrich ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%221.+Riak+Crashing+on+Data+Load+from+CSV+and+2.+How+to+get+Ripple+to%09load+js+functions%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg07476.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg07499.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CAGt5RBos_u9o4A4r0wAROd4AdSFmA3Hp651akqWy=VwdHGggVw@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
