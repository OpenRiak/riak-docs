<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Minimal number of nodes for production</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#10848" id="c">
<link rel="index" href="maillist.html#10848" id="i">
<link rel="prev" href="msg10847.html" id="p">
<link rel="next" href="msg10850.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg10848.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Minimal+number+of+nodes+for+production%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Minimal number of nodes for production</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Christian+Dahlqvist%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Christian Dahlqvist</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20130411" rel="nofollow">Thu, 11 Apr 2013 05:07:12 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi Daniel,

If you have 3 nodes in the cluster, you should not lose any data if one node 
goes down, but you may experience that some records, for which 2 replicas are 
gone, will return false not founds before read-repair can fix it. If you 
therefore retry whenever you do not find a key that you expect, you should be 
fine.</pre><pre>

The other issue with having few nodes in the cluster is that each of the 
remaining nodes will need to manage a significant number of fallback partitions 
during node failure, which can quickly increase the load on these nodes. There 
is also a risk that the fallback partitions may not be divided equally between 
the remaining two nodes, leading to the load on one node increasing even 
further.

It is in order to avoid this and be able to ensure that nodes are reasonably 
evenly loaded in case of a failure that we recommend at least 5 nodes in any 
production cluster.

Best regards,

Christian



On 11 Apr 2013, at 12:01, ivenhov &lt;iwan.dan...@gmail.com&gt; wrote:

&gt; With 3 nodes only if one of the nodes is down I should still be able to read
&gt; write if I'm doing that with default setting (quorum). Am I wrong.
&gt; I appreciate there is a case that SHA key space does not divide equally by 3
&gt; so there is a slim possibility that  replicas for some keys would be on the
&gt; same physical hardware. But still, 99% of keys should be available. Right?
&gt; 
&gt; Daniel
&gt; 
&gt; 
&gt; 
&gt; --
&gt; View this message in context: 
&gt; <a  rel="nofollow" href="http://riak-users.197444.n3.nabble.com/Minimal-number-of-nodes-for-production-tp4027625p4027635.html">http://riak-users.197444.n3.nabble.com/Minimal-number-of-nodes-for-production-tp4027625p4027635.html</a>
&gt; Sent from the Riak Users mailing list archive at Nabble.com.
&gt; 
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>

</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg10847.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#10848">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#10848">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg10850.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg10837.html">Minimal number of nodes for production</a></span> <span class="sender italic">Tom Zeng</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg10838.html">Re: Minimal number of nodes for production</a></span> <span class="sender italic">Eric Redmond</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg10839.html">Re: Minimal number of nodes for production</a></span> <span class="sender italic">Tom Zeng</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg10840.html">Re: Minimal number of nodes for productio...</a></span> <span class="sender italic">Eric Redmond</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg10841.html">Re: Minimal number of nodes for produ...</a></span> <span class="sender italic">Tom Zeng</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg10847.html">Re: Minimal number of nodes for ...</a></span> <span class="sender italic">ivenhov</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Minimal number of nodes ...</span> <span class="sender italic">Christian Dahlqvist</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Minimal number of nodes for production">
<input type="hidden" name="msgid" value="B42D2B7E-4342-40F5-8091-5B34D3971341@basho.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg10848.html">
<input type="submit" value=" Christian Dahlqvist ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Minimal+number+of+nodes+for+production%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg10847.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg10850.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">B42D2B7E-4342-40F5-8091-5B34D3971341@basho.com</li>
</ul>
</div>
</body>
</html>
