<!DOCTYPE html>
<html lang="en">
<head>
<title>Yokozuna performance: single large index vs many smaller indexes</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#15162" id="c">
<link rel="index" href="maillist.html#15162" id="i">
<link rel="prev" href="msg15150.html" id="p">
<link rel="next" href="msg15212.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg15162.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Yokozuna+performance%5C%3A+single+large+index+vs+many+smaller+indexes%22&amp;o=newest" rel="nofollow"><span itemprop="name">Yokozuna performance: single large index vs many smaller indexes</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Geoff+Garbers%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Geoff Garbers</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20141113" rel="nofollow">Thu, 13 Nov 2014 06:22:01 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi all.

I've been looking around for a bit with some sort of guidelines as to how
best to structure search indexes within Riak 2.0 - and have yet to come up
with anything that satisfies my questions.</pre><pre>

I came across <a  rel="nofollow" href="https://github.com/basho/yokozuna/blob/develop/docs/ADMIN.md">https://github.com/basho/yokozuna/blob/develop/docs/ADMIN.md</a>,
where it talks about the one-to-one and many-to-one ways of indexing. It
mentions in passing the potential for lower latency of queries and
efficient deletion of index data when using the one-to-one method - without
really mentioning too much about when one method could significantly
outweigh the other in performance.

However, something I'm still not sure on is *when* is it considered a good
idea to use multiple indexes, versus one massive index.

If you'll bear with me, I'll use this simple scenario:
I have lists, and I have contacts within these lists. In total, I have 100
million contacts that I am dealing with. Each of them not more than 20KB in
size, and they all follow the exact same JSON object structure. Ignoring
application design for simplicity's sake, let's say I could choose between
the following two ways of storing lists and contacts:


   1. Having two buckets: *lists* and *contacts*.
   All 100 million contacts are stored in the *contacts* bucket. Each
   contact object is linked to its corresponding list through a *list_key*
   property, and all the contacts are stored in the same single search index.

   2. Having multiple buckets: *lists*, and for each list, having a
   separate bucket *contacts_{listkey}*.
   Using this structure, each *contact_{listkey}* bucket would have its own
   search index.

With these two scenarios in mind; and making the assumption that we're
dealing with 100 million contacts:

   1. Which would be the better method of implementing the search indexes?
   2. At which point would one solution be far better than the other?
   3. How much does Yokozuna differ from stock-standard Solr? All the
   search results I could find on Solr specifically weren't talking about
   indexes greater than 60,000 objects, yet Riak is required to be able to
   deal with 100's of millions of rows.

Any help at all with this is really appreciated.
At some point, I do realise that I will need to set this up for myself, and
performance my own tests on it. However, I was hoping that those currently
using Riak in production might have some more insight into this.

Regards,
Geoff
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg15150.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#15162">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#15162">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg15212.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email tSliceCur"><span class="subject">Yokozuna performance: single large index vs many smaller ind...</span> <span class="sender italic">Geoff Garbers</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg15212.html">Re: Yokozuna performance: single large index vs many sm...</a></span> <span class="sender italic">Eric Redmond</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg15227.html">Re: Yokozuna performance: single large index vs man...</a></span> <span class="sender italic">Eric Redmond</span></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg15215.html">Re: Yokozuna performance: single large index vs many sm...</a></span> <span class="sender italic">Geoff Garbers</span></li>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Yokozuna performance: single large index vs many smaller indexes">
<input type="hidden" name="msgid" value="CAAeH1ddipH7CurQ3NXjpVymjt_Uqxm_9yAdJ_qQjM7wp6s98Fw@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg15162.html">
<input type="submit" value=" Geoff Garbers ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Yokozuna+performance%5C%3A+single+large+index+vs+many+smaller+indexes%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg15150.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg15212.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CAAeH1ddipH7CurQ3NXjpVymjt_Uqxm_9yAdJ_qQjM7wp6s98Fw@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
