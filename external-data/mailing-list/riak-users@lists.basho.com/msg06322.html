<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Secondary Indexes with ProtoBuff</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#06322" id="c">
<link rel="index" href="maillist.html#06322" id="i">
<link rel="prev" href="msg06321.html" id="p">
<link rel="next" href="msg06329.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg06322.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Secondary+Indexes+with+ProtoBuff%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Secondary Indexes with ProtoBuff</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Russell+Brown%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Russell Brown</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20120119" rel="nofollow">Thu, 19 Jan 2012 08:02:07 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi Gal,
Which version of the client are you using?

On 19 Jan 2012, at 08:19, Gal Barnea wrote:</pre><pre>

&gt; Hi
&gt; Is there a way to insert 2i fields using the PB Java client?
Yes, if you're using the current 1.0.x version.

The way to do it is to add the indexes to the object you're storing. So if 
you're storing an IRiakObject then using the builder, or straight on the 
IRiakObject, just call

    addIndex(name, value);

If you're storing some domain object (using the JSON converter) then you can 
annotate fields with the @RiakIndex annotation.

There's an example of both in the tests for the client[1][2].

Cheers

Russell

[1] 
<a  rel="nofollow" href="https://github.com/basho/riak-java-client/blob/master/src/test/java/com/basho/riak/client/itest/ITestBucket.java#L186">https://github.com/basho/riak-java-client/blob/master/src/test/java/com/basho/riak/client/itest/ITestBucket.java#L186</a>
 
[2] 
<a  rel="nofollow" href="https://github.com/basho/riak-java-client/blob/master/src/test/java/com/megacorp/commerce/Customer.java#L37">https://github.com/basho/riak-java-client/blob/master/src/test/java/com/megacorp/commerce/Customer.java#L37</a>
 and
        
<a  rel="nofollow" href="https://github.com/basho/riak-java-client/blob/master/src/test/java/com/basho/riak/client/itest/ITestORM.java#L176">https://github.com/basho/riak-java-client/blob/master/src/test/java/com/basho/riak/client/itest/ITestORM.java#L176</a>
        
&gt; It seems that this is not possible, so I'm wondering what kind of workarounds 
&gt; exists  
&gt; 
&gt; Is this something that can be done in a Post-Commit hook? if so, will inserts 
&gt; still be faster than the HTTP interface?
&gt; 
&gt; Thanks
&gt; Gal
&gt; 
&gt; 
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>


_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg06321.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#06322">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#06322">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg06329.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg06321.html">Secondary Indexes with ProtoBuff</a></span> <span class="sender italic">Gal Barnea</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Secondary Indexes with ProtoBuff</span> <span class="sender italic">Russell Brown</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg06329.html">Re: Secondary Indexes with ProtoBuff</a></span> <span class="sender italic">Gal Barnea</span></li>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Secondary Indexes with ProtoBuff">
<input type="hidden" name="msgid" value="EF00C9FA-C0C0-4D67-8033-7F67EF20EC8A@basho.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg06322.html">
<input type="submit" value=" Russell Brown ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Secondary+Indexes+with+ProtoBuff%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg06321.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg06329.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">EF00C9FA-C0C0-4D67-8033-7F67EF20EC8A@basho.com</li>
</ul>
</div>
</body>
</html>
