<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Yokozuna Scale</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#14905" id="c">
<link rel="index" href="maillist.html#14905" id="i">
<link rel="prev" href="msg14904.html" id="p">
<link rel="next" href="msg14906.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg14905.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Yokozuna+Scale%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Yokozuna Scale</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Alexander+Sicular%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Alexander Sicular</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20140917" rel="nofollow">Wed, 17 Sep 2014 12:11:25 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>&quot;So if we go by your suggestion to set up multiple nodes per physical server
- say 6 nodes per - that would be 36 Riak nodes and a corresponding Solr
instance - each hosting about 21M documents.&quot;</pre><pre>

Something to be careful with is that as you ramp up the number of Riak
nodes on a single physical machine you increase the probability that all
your replicas will live on the same physical host, thereby eliminating the
utility of your replication factor.

I'm sure the long term solution will be to decouple the 1 to 1 solr runtime
to riak node constraint. But I imagine that will require some...
engineering...

-Alexander

On Wed, Sep 17, 2014 at 7:21 AM, anandm &lt;an...@zerebral.co.in&gt; wrote:

&gt; Oh.. That's nice to know that we'll probably be the first ones to deploy it
&gt; to that scale... :-)
&gt;
&gt; We'd love to go in with a replication factor of 3 - so I'm looking at
&gt; hosting 750M docs in the entire cluster of 6 big servers.
&gt; So if we go by your suggestion to set up multiple nodes per physical server
&gt; - say 6 nodes per - that would be 36 Riak nodes and a corresponding Solr
&gt; instance - each hosting about 21M documents. I would not want one Solr Core
&gt; serving 21M - may be about 10M is okay - so that means we need to double
&gt; the
&gt; node count further? So, 12-15 Riak-YZ nodes per server - hosting a total of
&gt; 150M docs stored and indexed - would that be too much for a server to
&gt; handle
&gt; (12 core+96GB RAM+2TB Storage)?
&gt;
&gt; One more concern I have is - our current SolrCloud deployment works with
&gt; composite ids - to help Solr co-locate documents - so the client code can
&gt; route the reads to the correct shards - so that each query does not have to
&gt; hit all shards. With Yokozuna that does not seem to be the case? All Solr
&gt; search queries will hit all shards always?
&gt;
&gt; Could it have been better, if there was a Riak plugin to Solr that just
&gt; stored and fetched docs from the underlying Riak store to Solr? [In analogy
&gt; - the way riak uses LevelDB or BitCask internally - the same way Solr used
&gt; Riak for actual doc storage] I'm more of a Solr user (have all data Stored
&gt; +
&gt; Indexed into Solr till date) and hence I'm more inclined towards looking at
&gt; it this way rather than looking at Riak as a primary store with continuous
&gt; indexing into Solr. Also thinking this way - as Riak is a KV store and Solr
&gt; holds more insights to the document schema? So on Solr side we continue to
&gt; use SolrCloud (that I know works well for my project - and my need is just
&gt; to move the data out of it - and keep the index the way it is - composite
&gt; id
&gt; sharding + replication enable) and have Riak as separate cluster (may be 6
&gt; nodes suffice here - each with 150M docs) - and we scale up each of these
&gt; clusters separately whenever one of them hits the limits?
&gt;
&gt; FYI - Our current daily load is - 2M searches, 0.6M inserts, 0.8M updates -
&gt; and this may triple in about a couple of months or so as our other modules
&gt; that generate and dump this data scale further.
&gt;
&gt;
&gt;
&gt;
&gt;
&gt; --
&gt; View this message in context:
&gt; <a  rel="nofollow" href="http://riak-users.197444.n3.nabble.com/Yokozuna-Scale-tp4031808p4031810.html">http://riak-users.197444.n3.nabble.com/Yokozuna-Scale-tp4031808p4031810.html</a>
&gt; Sent from the Riak Users mailing list archive at Nabble.com.
&gt;
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg14904.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#14905">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#14905">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg14906.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg14902.html">Yokozuna Scale</a></span> <span class="sender italic">anandm</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg14903.html">Re: Yokozuna Scale</a></span> <span class="sender italic">Eric Redmond</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg14904.html">Re: Yokozuna Scale</a></span> <span class="sender italic">anandm</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Yokozuna Scale</span> <span class="sender italic">Alexander Sicular</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg14906.html">Re: Yokozuna Scale</a></span> <span class="sender italic">anandm</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg14907.html">Re: Yokozuna Scale</a></span> <span class="sender italic">Ryan Zezeski</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg14908.html">Re: Yokozuna Scale</a></span> <span class="sender italic">anandm</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg14909.html">Re: Yokozuna Scale</a></span> <span class="sender italic">Ryan Zezeski</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Yokozuna Scale">
<input type="hidden" name="msgid" value="CALKhwhWEcrTOdh=TV1Yqa4-6S99GZHi6FuCzK7hzpnqRfst3+w@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg14905.html">
<input type="submit" value=" Alexander Sicular ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Yokozuna+Scale%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg14904.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg14906.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CALKhwhWEcrTOdh=TV1Yqa4-6S99GZHi6FuCzK7hzpnqRfst3+w@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
