<!DOCTYPE html>
<html lang="en">
<head>
<title>Exporting data from Riak KV in order to let Android read it offline</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#17735" id="c">
<link rel="index" href="maillist.html#17735" id="i">
<link rel="prev" href="msg17734.html" id="p">
<link rel="next" href="msg17788.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg17735.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Exporting+data+from+Riak+KV+in+order+to+let+Android+read+it+offline%22&amp;o=newest" rel="nofollow"><span itemprop="name">Exporting data from Riak KV in order to let Android read it offline</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Luca+Favatella%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Luca Favatella</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20161107" rel="nofollow">Mon, 07 Nov 2016 08:09:06 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi All,

What file format easy to read on an Android mobile device would you
recommend for representing a snapshot of part of a live Riak KV store? The
main aim is minimizing development effort on the Android device while
keeping battery consumption reasonable.</pre><pre>


As Riak KV can be defined as a key-value store with key being any arbitrary
byte sequence and value being any [MIME-typed][1] arbitrary byte sequence,
I see that any Android-friendly file format / library for reading any such
export needs to:
* Be key-value; and
* Be able to return the value and its MIME type.

[1]: Even values with siblings [can][2] be represented with MIME type.
[2]:
<a  rel="nofollow" href="http://docs.basho.com/riak/kv/2.1.4/developing/api/http/fetch-object/#get-all-siblings-in-one-request">http://docs.basho.com/riak/kv/2.1.4/developing/api/http/fetch-object/#get-all-siblings-in-one-request</a>

Some of the alternative file formats include:
* A. SQLite, with columns key (the same as in Riak KV), mime type and value
- respectively of types TEXT, TEXT and BLOB;
* B. Archive (e.g. tar, zip) containing file paths corresponding to
exported Riak KV keys, with file content being the Riak KV [HTTP GET
response][3] - that includes MIME type and body;
* C. Archived (because potentially multi-file) LevelDB database, with the
key being the Riak KV key and the value being the Riak KV [HTTP GET
response][3] - that includes MIME type and body. (Based on a quick search
there is some code for LevelDB on Android.)
Storing the HTTP GET response require the Android application to parse it
for extracting the MIME type and the actual value. (I assume there is some
HTTP parser Android library).

[3]:
<a  rel="nofollow" href="http://docs.basho.com/riak/kv/2.1.4/developing/api/http/fetch-object/#simple-example">http://docs.basho.com/riak/kv/2.1.4/developing/api/http/fetch-object/#simple-example</a>


Feel free to suggest libraries / formats that attempt to provide a
&quot;database adapter&quot; on Android by making assumption on the MIME type (e.g.
JSON) of the value. Android libraries that attempt to model / re-use
similar read API as Riak KV HTTP / Protocol Buffers API are welcome too.


I am aware of <a  rel="nofollow" href="https://github.com/basho-labs/riak-data-migrator">https://github.com/basho-labs/riak-data-migrator</a> but it does
not seem relevant mainly because:
* The format of the dump on disk (documented as “Protocol Buffer format”)
appears not to be documented / meant for reading as a key-value store by
other software e.g. Android;
* It lists keys in buckets - that I would prefer to avoid because that
operation is expensive and because I would prefer to avoid designing
buckets around a fixed exporting policy.

I am aware of <a  rel="nofollow" href="https://github.com/couchbase/couchbase-lite-android">https://github.com/couchbase/couchbase-lite-android</a> but it
seems too much as a read-only offline export. The mobile device does not
need to sync the data: when a new export file is available on the server,
the mobile device can fetch the new file and delete the old one.


Thanks and regards
Luca
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg17734.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#17735">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#17735">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg17788.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email tSliceCur"><span class="subject">Exporting data from Riak KV in order to let Android read it...</span> <span class="sender italic">Luca Favatella</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg17788.html">Re: Exporting data from Riak KV in order to let Androi...</a></span> <span class="sender italic">Luca Favatella</span></li>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Exporting data from Riak KV in order to let Android read it offline">
<input type="hidden" name="msgid" value="CA+-vOLjyMt_y+=nXMX1sdizMfcsw-3WmkHPBr0+v1awwfijqgA@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg17735.html">
<input type="submit" value=" Luca Favatella ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Exporting+data+from+Riak+KV+in+order+to+let+Android+read+it+offline%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg17734.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg17788.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CA+-vOLjyMt_y+=nXMX1sdizMfcsw-3WmkHPBr0+v1awwfijqgA@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
