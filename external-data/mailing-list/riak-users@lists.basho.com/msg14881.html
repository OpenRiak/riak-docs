<!DOCTYPE html>
<html lang="en">
<head>
<title>Generic server memsup terminating Mountain Lion</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="thrd3.html#14881" id="c">
<link rel="index" href="mail3.html#14881" id="i">
<link rel="prev" href="msg14877.html" id="p">
<link rel="next" href="msg14882.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg14881.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Generic+server+memsup+terminating+Mountain+Lion%22&amp;o=newest" rel="nofollow"><span itemprop="name">Generic server memsup terminating Mountain Lion</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Spiro+N%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Spiro N</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20140909" rel="nofollow">Tue, 09 Sep 2014 14:33:13 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>S
*orry, I am sure you have posted in regards to this topic before but I am
at a stand still. It just started after doing a &quot;get&quot;*
*the video was about 20 MB. The beam.smp  spikes at 100 and riak crashes. I
have done everything the Docs ask for and I provided all that I feel may be
relevant below. However I don't know what I don't know and could use some
help. Mountain Lion does not let you set the ulmit to unlimited.*</pre><pre>

*Thanks in advance for anything at all that may help.*

*Spiro*


*This is my limit, I am running Mountain Lion 10.8.5*

server:riak gvs$ launchctl limit
    cpu         unlimited      unlimited
    filesize    unlimited      unlimited
    data        unlimited      unlimited
    stack       8388608        67104768
    core        0              unlimited
    rss         unlimited      unlimited
    memlock     unlimited      unlimited
    maxproc     709            1064
    *maxfiles    65336          1000000    *
----------------------------------------------------------

*This is my Bitcask  content*
server:lib gvs$ cd /usr/local/var/lib/riak/
server:riak gvs$ ls bitcask/*/* |wc -l
     206
--------------------------------------------------------------
*This is the crash.log message*


2014-09-09 14:34:51 =ERROR REPORT====
** Generic server memsup terminating
** Last message in was
{'EXIT',&lt;0.20807.0&gt;,{emfile,[{erlang,open_port,[{spawn,&quot;/bin/sh -s unix:cmd
2&gt;&amp;1&quot;},[stream]],[]},{os,start_port_srv_handle,1,[{file,&quot;os.erl&quot;},{line,254}]},{os,start_port_srv_loop,0,[{file,&quot;os.erl&quot;},{line,270}]}]}}
** When Server state ==
{state,{unix,darwin},false,undefined,undefined,false,60000,30000,0.8,0.05,&lt;0.20807.0&gt;,#Ref&lt;0.0.0.120573&gt;,undefined,[reg],[]}
** Reason for termination ==
** {emfile,[{erlang,open_port,[{spawn,&quot;/bin/sh -s unix:cmd
2&gt;&amp;1&quot;},[stream]],[]},{os,start_port_srv_handle,1,[{file,&quot;os.erl&quot;},{line,254}]},{os,start_port_srv_loop,0,[{file,&quot;os.erl&quot;},{line,270}]}]}
2014-09-09 14:34:51 =CRASH REPORT====
  crasher:
    initial call: memsup:init/1
    pid: &lt;0.20806.0&gt;
    registered_name: memsup
    exception exit: {{emfile,[{erlang,open_port,[{spawn,&quot;/bin/sh -s
unix:cmd
2&gt;&amp;1&quot;},[stream]],[]},{os,start_port_srv_handle,1,[{file,&quot;os.erl&quot;},{line,254}]},{os,start_port_srv_loop,0,[{file,&quot;os.erl&quot;},{line,270}]}]},[{gen_server,terminate,6,[{file,&quot;gen_server.erl&quot;},{line,747}]},{proc_lib,init_p_do_apply,3,[{file,&quot;proc_lib.erl&quot;},{line,227}]}]}
    ancestors: [os_mon_sup,&lt;0.96.0&gt;]
    messages: []
    links: [&lt;0.97.0&gt;]
    dictionary: []
    trap_exit: true
    status: running
    heap_size: 377
    stack_size: 24
    reductions: 204
  neighbours:
2014-09-09 14:34:51 =SUPERVISOR REPORT====
     Supervisor: {local,os_mon_sup}
     Context:    child_terminated
     Reason:     {emfile,[{erlang,open_port,[{spawn,&quot;/bin/sh -s unix:cmd
2&gt;&amp;1&quot;},[stream]],[]},{os,start_port_srv_handle,1,[{file,&quot;os.erl&quot;},{line,254}]},{os,start_port_srv_loop,0,[{file,&quot;os.erl&quot;},{line,270}]}]}
     Offender:
[{pid,&lt;0.20806.0&gt;},{name,memsup},{mfargs,{memsup,start_link,[]}},{restart_type,permanent},{shutdown,2000},{child_type,worker}]

2014-09-09 14:34:51 =SUPERVISOR REPORT====
     Supervisor: {local,os_mon_sup}
     Context:    shutdown
     Reason:     reached_max_restart_intensity
     Offender:   [{pid,&lt;0.20806.0&gt;},{name,memsup},{mfargs,{memsup,st
------------------------------------------------------------------------------------------------
*This is the error.log message*

server:riak gvs$ tail error.log
2014-09-09 17:00:25.907 [error] &lt;0.439.1&gt; gen_server memsup terminated with
reason: maximum number of file descriptors exhausted, check ulimit -n
2014-09-09 17:00:25.908 [error] &lt;0.439.1&gt; CRASH REPORT Process memsup with
0 neighbours exited with reason: maximum number of file descriptors
exhausted, check ulimit -n in gen_server:terminate/6 line 747
2014-09-09 17:00:25.908 [error] &lt;0.97.0&gt; Supervisor os_mon_sup had child
memsup started with memsup:start_link() at &lt;0.439.1&gt; exit with reason
maximum number of file descriptors exhausted, check ulimit -n in context
child_terminated
2014-09-09 17:00:25.908 [error] &lt;0.442.1&gt; gen_server memsup terminated with
reason: maximum number of file descriptors exhausted, check ulimit -n
2014-09-09 17:00:25.908 [error] &lt;0.442.1&gt; CRASH REPORT Process memsup with
0 neighbours exited with reason: maximum number of file descriptors
exhausted, check ulimit -n in gen_server:terminate/6 line 747
2014-09-09 17:00:25.909 [error] &lt;0.97.0&gt; Supervisor os_mon_sup had child
memsup started with memsup:start_link() at &lt;0.442.1&gt; exit with reason
maximum number of file descriptors exhausted, check ulimit -n in context
child_terminated
2014-09-09 17:00:25.909 [error] &lt;0.445.1&gt; gen_server memsup terminated with
reason: maximum number of file descriptors exhausted, check ulimit -n
2014-09-09 17:00:25.909 [error] &lt;0.445.1&gt; CRASH REPORT Process memsup with
0 neighbours exited with reason: maximum number of file descriptors
exhausted, check ulimit -n in gen_server:terminate/6 line 747
2014-09-09 17:00:25.909 [error] &lt;0.97.0&gt; Supervisor os_mon_sup had child
memsup started with memsup:start_link() at &lt;0.445.1&gt; exit with reason
maximum number of file descriptors exhausted, check ulimit -n in context
child_terminated
2014-09-09 17:00:25.910 [error] &lt;0.97.0&gt; Supervisor os_mon_sup had child
memsup started with memsup:start_link() at &lt;0.445.1&gt; exit with reason
reached_max_restart_intensity in context shutdown
--------------------------------------------------------------------------------------------------
*This is the erlang.log*

server:riak gvs$ tail erlang.log.1
Erlang R15B01 (erts-5.9.1) [source] [64-bit] [smp:4:4] [async-threads:64]
[kernel-poll:true]

Eshell V5.9.1  (abort with ^G)
(riak@172.16.205.254)1&gt;
===== ALIVE Tue Sep  9 16:29:28 EDT 2014

===== ALIVE Tue Sep  9 16:44:28 EDT 2014

===== ALIVE Tue Sep  9 16:59:28 EDT 2014
{&quot;Kernel pid
terminated&quot;,application_controller,&quot;{application_terminated,os_mon,shutdown}&quot;}
server:riak gvs$

    This message and any attachments are intended only for the use of the
addressee and may contain information that is privileged and confidential.
If the reader of the message is not the intended recipient or an authorized
representative of the intended recipient, you are hereby notified that any
dissemination of this communication is strictly prohibited. If you have
received this communication in error, notify the sender immediately by
return email and delete the message and any attachments from your system.
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg14877.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="thrd3.html#14881">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="mail3.html#14881">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg14882.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email tSliceCur"><span class="subject">Generic server memsup terminating Mountain Lion</span> <span class="sender italic">Spiro N</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg14882.html">Re: Generic server memsup terminating Mountain Lion</a></span> <span class="sender italic">Toby Corkindale</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg14892.html">Re: Generic server memsup terminating Mountain Li...</a></span> <span class="sender italic">Bryan Hunt</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg14893.html">Re: Generic server memsup terminating Mountai...</a></span> <span class="sender italic">bryan hunt</span></li>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Generic server memsup terminating Mountain Lion">
<input type="hidden" name="msgid" value="CAF1b_dQ6f=dOpPo1bD_gajKZ6E5UhKRq1pYhNWf3KpFJSgEF+w@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg14881.html">
<input type="submit" value=" Spiro N ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Generic+server+memsup+terminating+Mountain+Lion%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg14877.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg14882.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CAF1b_dQ6f=dOpPo1bD_gajKZ6E5UhKRq1pYhNWf3KpFJSgEF+w@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
