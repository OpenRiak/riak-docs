<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Couple a few questions about searching</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="thrd3.html#13673" id="c">
<link rel="index" href="mail3.html#13673" id="i">
<link rel="prev" href="msg13668.html" id="p">
<link rel="next" href="msg13742.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg13673.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Couple+a+few+questions+about+searching%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Couple a few questions about searching</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Eric+Redmond%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Eric Redmond</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20140219" rel="nofollow">Wed, 19 Feb 2014 13:46:31 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>
On Feb 15, 2014, at 5:25 AM, EmiNarcissus &lt;eminarcis...@me.com&gt; wrote:</pre><pre>

&gt; Hi,
&gt; 
&gt; I’ve been using riak as backend storage engine since it starts support search 
&gt; syntax, and it really helps me a lot during my development.  But still there 
&gt; are quite a lot of questions bothers me a lot and cannot find a answer 
&gt; anywhere.
&gt; 
&gt; 1: During my develop period(single node,single instance, set to n_val = 1), 
&gt; sometimes my machine crashes during code testing, when I fire up riak again, 
&gt; search index is partly not available, which is what I can expect, any I tried 
&gt; to use repair search index, and most of the repairing were failed(that is 
&gt; also expected), but is there anyway to reindex the full bucket? (I didn’t  
&gt; use search-cmd before, also I didn’t real how does search api implemented in 
&gt; Riak 1, what I know is to index a doc by using search-cmd index &lt;INDEX&gt; 
&gt; &lt;PATH&gt;, so how do I exactly rebuild the search index for a specific bucket, 
&gt; or how do I rebuild the search index for a specific object by bucket/key ?)

To repair an index in Riak Search prior to 2.0, you can follow this guide.

<a  rel="nofollow" href="http://docs.basho.com/riak/latest/ops/running/recovery/repairing-indexes/">http://docs.basho.com/riak/latest/ops/running/recovery/repairing-indexes/</a>

If you're looking to repair a specific object prior to 2.0, just reindex it.

If you use 2.0, you don't need to do anything, since indexes auto-repair 
themselves.

&gt; 2: I’ve bean noticed there’s a question asking about riak search will not 
&gt; release the space after the content itself is being deleted, or the bucket 
&gt; search is being disabled, is this bug? have it fixed yet?

Disabling search will not free up index space.

&gt; 3: During my development period I can only test the code on single node, 
&gt; which might increase in the real production environment. so can I get a 
&gt; better expectation on avoid of discrepancy by running 3 riak instances on the 
&gt; single node?(and also, if I deploy it in a cluster, does search index can be 
&gt; destroyed when one of the node is out of response? because I’ve noticed 
&gt; search index is being distributed by term, and have a r_val set to 1)

Generally speaking, if you can't run 5 physical servers, Riak is probably not a 
good fit for you. Running multiple installations on a single server adds no 
value at all, and is only wasted overhead. The point of running multiple 
servers is to survive crashes.

&gt; 4:Riak will start get into Riak 2.0 which directly use solr as its backend 
&gt; search engine, I do really love to see how does it performs on the real 
&gt; production environment. I also have interest in porting the driver for python 
&gt; support, and indeed I found riak-pb is under development right now. So is all 
&gt; of these questions can be resolved by update to 2.0?

The repair issues are resolved in 2.0, but you still need to run more than1 
physical server, not matter the Riak version. This is not a bug in Riak, it's a 
feature.

&gt; I do really love the speed and convenience what riak brought to me, and since 
&gt; I didn’t read the source yet so my questions might be confusing here, but any 
&gt; suggestions are really appreciated.
&gt; 
&gt; Best,
&gt; Tim Lee
&gt; 
&gt; 
&gt; 
&gt; 
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>

</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg13668.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="thrd3.html#13673">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="mail3.html#13673">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg13742.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg13668.html">Couple a few questions about searching</a></span> <span class="sender italic">EmiNarcissus</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Couple a few questions about searching</span> <span class="sender italic">Eric Redmond</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13742.html">CRDT on Riak 2.0</a></span> <span class="sender italic">EmiNarcissus</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13744.html">Re: CRDT on Riak 2.0</a></span> <span class="sender italic">Sean Cribbs</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13746.html">Re: CRDT on Riak 2.0</a></span> <span class="sender italic">Sam Elliott</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13761.html">Re: CRDT on Riak 2.0</a></span> <span class="sender italic">EmiNarcissus</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13747.html">Re: CRDT on Riak 2.0</a></span> <span class="sender italic">Sam Elliott</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13749.html">Re: CRDT on Riak 2.0</a></span> <span class="sender italic">Russell Brown</span></li>
<li class="icons-email"><span class="subject"><a href="msg13765.html">Re: CRDT on Riak 2.0</a></span> <span class="sender italic">EmiNarcissus</span></li>
<li class="icons-email"><span class="subject"><a href="msg13764.html">Re: CRDT on Riak 2.0</a></span> <span class="sender italic">EmiNarcissus</span></li>
</ul></li>
</ul></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg13762.html">Re: CRDT on Riak 2.0</a></span> <span class="sender italic">EmiNarcissus</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13745.html">Re: CRDT on Riak 2.0</a></span> <span class="sender italic">Sean Cribbs</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Couple a few questions about searching">
<input type="hidden" name="msgid" value="DAE1AA11-272A-4795-959A-27742428FD33@basho.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg13673.html">
<input type="submit" value=" Eric Redmond ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Couple+a+few+questions+about+searching%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg13668.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg13742.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">DAE1AA11-272A-4795-959A-27742428FD33@basho.com</li>
</ul>
</div>
</body>
</html>
