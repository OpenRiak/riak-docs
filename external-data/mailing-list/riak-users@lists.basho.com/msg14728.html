<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Riak Search Issue</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#14728" id="c">
<link rel="index" href="maillist.html#14728" id="i">
<link rel="prev" href="msg14723.html" id="p">
<link rel="next" href="msg14709.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg14728.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Riak+Search+Issue%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Riak Search Issue</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22tele%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">tele</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20140818" rel="nofollow">Mon, 18 Aug 2014 22:47:23 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi,

I had the same issue while playing with the latest python client and
riak search 2.0 but i checked the code and sorted it out.
In the new documentation fulltext_search() is not mentioned, it uses
search()
<a  rel="nofollow" href="http://basho.github.io/riak-python-client/query.html#fulltext-search">http://basho.github.io/riak-python-client/query.html#fulltext-search</a></pre><pre>

If you dig in the code basically search() calls fulltext_search()

    def search(self, query, **params):
        &quot;&quot;&quot;
        Queries a search index over objects in this bucket/index. See
        :meth:`RiakClient.fulltext_search()
        &lt;riak.client.RiakClient.fulltext_search&gt;` for more details.
        &quot;&quot;&quot;
        return self._client.fulltext_search(self.name, query, **params)

As you can see the first arg of fulltext_search uses as index
self.name. In this case self.name is the name of the bucket because the
method is implemented on the Bucket object.

So if you add an index on the bucket that has a different name from the
bucket and you use search(), it will give you the error of index not
found. This is because the name of the index has to match with the name
of the bucket.

I believe it's worth to mention it in the documentation, so
people don't freak out when following instructions and getting an index
error from search() :)

Or maybe just add back the possibility of specifying the index on the
search(). Up to you

:tele



On Mon, 18 Aug 2014 23:38:51 +0200
Alex De la rosa &lt;alex.rosa....@gmail.com&gt; wrote:

&gt; Hi Eric,
&gt; 
&gt; Cool! This new syntax really worked :) even on different bucket
&gt; names :) It has been driving me crazy all day... haha, glad is
&gt; finally sorted out.
&gt; 
&gt; PYTHON:
&gt; results = client.fulltext_search('famoso', 'name_s:Lio*')
&gt; print results
&gt; 
&gt; OUTPUT:
&gt; {'num_found': 2, 'max_score': 1.0, 'docs': [{u'age_i': u'30',
&gt; u'name_s': u'Lionel', u'_yz_rk': u'lionel', u'_yz_rb': u'fcb',
&gt; u'score': u'1.00000000000000000000e+00', u'leader_b': u'true',
&gt; u'_yz_id': u'1*futbolistas*fcb*lionel*59', u'_yz_rt':
&gt; u'futbolistas'}, {u'age_i': u'30', u'name_s': u'Lionel', u'_yz_rk':
&gt; u'lionel', u'_yz_rb': u'famoso', u'score':
&gt; u'1.00000000000000000000e+00', u'leader_b': u'true', u'_yz_id':
&gt; u'1*futbolistas*famoso*lionel*8', u'_yz_rt': u'futbolistas'}]}
&gt; 
&gt; Thanks!
&gt; Alex
&gt; 
&gt; 
&gt; On Mon, Aug 18, 2014 at 11:33 PM, Eric Redmond &lt;eredm...@basho.com&gt;
&gt; wrote:
&gt; 
&gt; &gt; Alex,
&gt; &gt;
&gt; &gt; I was mistaken about the bucket search. The documentation is wrong,
&gt; &gt; and the API is weirded for backward compatibility reasons. You
&gt; &gt; should be able to search by index name this way.
&gt; &gt;
&gt; &gt; client.fulltext_search(index, query, **params)
&gt; &gt;
&gt; &gt; We'll update the docs to match.
&gt; &gt;
&gt; &gt; Eric
&gt; &gt;
&gt; &gt;
&gt; &gt; On Aug 18, 2014, at 2:29 PM, Alex De la rosa
&gt; &gt; &lt;alex.rosa....@gmail.com&gt; wrote:
&gt; &gt;
&gt; &gt; Hi Sean,
&gt; &gt;
&gt; &gt; Yeah, I opted to follow that pattern on my latest attempt as I see
&gt; &gt; it more clear that the way in the documentation. Still same issue
&gt; &gt; although with Eric we saw it works fine when index and bucket has
&gt; &gt; the same name.
&gt; &gt;
&gt; &gt; Thanks!
&gt; &gt; Alex
&gt; &gt;
&gt; &gt;
&gt; &gt; On Mon, Aug 18, 2014 at 11:27 PM, Sean Cribbs &lt;s...@basho.com&gt;
&gt; &gt; wrote:
&gt; &gt;
&gt; &gt;&gt; Don't use bucket with 2 arguments, use
&gt; &gt;&gt; client.bucket_type('futbolistas').bucket('fcb'). This makes your
&gt; &gt;&gt; intent more clear. The 2-arity version of bucket() was for
&gt; &gt;&gt; backwards-compatibility.
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;


_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg14723.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#14728">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#14728">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg14709.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg14713.html">Re: Riak Search Issue</a></span> <span class="sender italic">Alex De la rosa</span></li>
<li class="icons-email"><span class="subject"><a href="msg14719.html">Re: Riak Search Issue</a></span> <span class="sender italic">Eric Redmond</span></li>
<li class="icons-email"><span class="subject"><a href="msg14714.html">Re: Riak Search Issue</a></span> <span class="sender italic">Alex De la rosa</span></li>
<li class="icons-email"><span class="subject"><a href="msg14716.html">Re: Riak Search Issue</a></span> <span class="sender italic">Eric Redmond</span></li>
<li class="icons-email"><span class="subject"><a href="msg14717.html">Re: Riak Search Issue</a></span> <span class="sender italic">Alex De la rosa</span></li>
<li class="icons-email"><span class="subject"><a href="msg14736.html">Re: Riak Search Issue</a></span> <span class="sender italic">Alex De la rosa</span></li>
<li class="icons-email"><span class="subject"><a href="msg14721.html">Re: Riak Search Issue</a></span> <span class="sender italic">Sean Cribbs</span></li>
<li class="icons-email"><span class="subject"><a href="msg14737.html">Re: Riak Search Issue</a></span> <span class="sender italic">Alex De la rosa</span></li>
<li class="icons-email"><span class="subject"><a href="msg14722.html">Re: Riak Search Issue</a></span> <span class="sender italic">Eric Redmond</span></li>
<li class="icons-email"><span class="subject"><a href="msg14723.html">Re: Riak Search Issue</a></span> <span class="sender italic">Alex De la rosa</span></li>
<li class="icons-email tSliceCur"><span class="subject">Re: Riak Search Issue</span> <span class="sender italic">tele</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Riak Search Issue">
<input type="hidden" name="msgid" value="20140819004552.7468a219@2cb">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg14728.html">
<input type="submit" value=" tele ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Riak+Search+Issue%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg14723.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg14709.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">20140819004552.7468a219@2cb</li>
</ul>
</div>
</body>
</html>
