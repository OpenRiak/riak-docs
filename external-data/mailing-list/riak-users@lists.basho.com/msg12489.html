<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Riak on SAN</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="thrd9.html#12489" id="c">
<link rel="index" href="mail9.html#12489" id="i">
<link rel="prev" href="msg12488.html" id="p">
<link rel="next" href="msg12490.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg12489.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Riak+on+SAN%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Riak on SAN</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Guido+Medina%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Guido Medina</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20131003" rel="nofollow">Thu, 03 Oct 2013 06:58:11 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<tt>If using LevelDB backend, LevelDB has a nice compression (snappy), 
</tt><tt>including CRC checks and all sort of data corruption checks, I have read 
</tt><tt>on this mail list people that has required to disable snappy compression 
</tt><tt>because it renders ZFS useless (not much to compress after that)
</tt><pre style="margin: 0em;">

</pre><tt>Hence, it is kind of related to using ZFS or not, if you go for ZFS 
</tt><tt>whatever variant you will have to support two sub-systems, if you let 
</tt><tt>LevelDB snappy compression on, you won't have to worry about it.
</tt><pre style="margin: 0em;"></pre><pre>

</pre><tt>As for backup, Basho provides a sort of cluster-to-cluster replication 
</tt><tt>tool, we built our own in Java, making backups per storage on every node 
</tt><tt>won't make much sense due to CAP/distributed nature, replicating the 
</tt><tt>keys to another cluster is what will make sense.
</tt><pre style="margin: 0em;">

Hope that helps and is understandable,

Guido.

On 03/10/13 13:54, Pedram Nimreezi wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><tt>Not sure what ZFS has to do with snappy compression, as it's a file 
</tt><tt>system not a compression algorithm..
</tt><tt>feature wise, ZFS is quite possibly the most enterprise file system 
</tt><tt>around, including advanced data corruption prevention and remote 
</tt><tt>backing up..
</tt><pre style="margin: 0em;">

</pre><tt>This would be a viable option in BSD/Solaris environments, at least 
</tt><tt>for making snapshots.
</tt><pre style="margin: 0em;">
Might make a nice write up for the Basho blog..

</pre><tt>Backups for riak I think require a bit more consideration then file 
</tt><tt>system snapshot send,
</tt><tt>and should include provisions for transferring data to smaller/larger 
</tt><tt>clusters, transfer
</tt><pre style="margin: 0em;">
ring ownerships properly, etc.


</pre><tt>On Thu, Oct 3, 2013 at 7:15 AM, Guido Medina &lt;guido.med...@temetra.com 
</tt><tt>&lt;<a  rel="nofollow" href="mailto:guido.med...@temetra.com">mailto:guido.med...@temetra.com</a>&gt;&gt; wrote:
</tt><pre style="margin: 0em;">

    And for ZFS? I wouldn't recommend it, after Riak 1.4 snappy
    LevelDB compression does a nice job, why take the risk of yet
    another not so enterprise ready compression algorithms.

    I could be wrong though,

    Guido.


    On 03/10/13 12:11, Guido Medina wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
    I have heard some SAN's horrors stories too, Riak nodes are so
    cheap that I don't see the point in even having any mirror on the
    node, here my points:

     1. Erlang interprocess communication brings some network usage,
        why yet another network usage on replicating the data? If the
        whole idea of Riak is have your data replicated in different
        nodes.
     2. If a node goes down or die for whatever reason, bring up
        another node and rebuild it.
     3. If you want to really replicate your cluster Riak offers the
        enterprise replication which I'm quite sure will be less
        expensive than a SAN and will warranty to have your cluster
        ready to go somewhere else as a backup.
     4. I would even go further, SSDs are so cheap and Riak nodes are
        so cheap now adays that I would even build a cluster using
        RAID 0 or RAID 5 SSDs (yes, no mirror with RAID 1, if too
        afraid, RAID 5), that will have a great impact on
        performance. Again, if something goes wrong with 1 node,
        refer to point 2.

    SANs and all those &quot;legacy&quot; backup and replication IMHO are meant
    for other products, like an Oracle money eater DB server.

    HTH,

    Guido.

    On 03/10/13 12:00, Brian Akins wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
    So, call me naive, but couldn't ZFS be used as Heinze suggested?

    I have some SAN horror stories - both operationally and from an
    economic perspective.


    _______________________________________________
    riak-users mailing list
    riak-users@lists.basho.com  &lt;<a  rel="nofollow" href="mailto:riak-users@lists.basho.com">mailto:riak-users@lists.basho.com</a>&gt;
    <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre></blockquote><pre style="margin: 0em;">

</pre></blockquote><pre style="margin: 0em;">


    _______________________________________________
    riak-users mailing list
    riak-users@lists.basho.com &lt;<a  rel="nofollow" href="mailto:riak-users@lists.basho.com">mailto:riak-users@lists.basho.com</a>&gt;
    <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>




--
/* Sincerely
--------------------------------------------------------------
Pedram Nimreezi - Chief Technology Officer  */

// The hardest part of design â€¦ is keeping features out. - Donald Norman


</pre></blockquote><pre style="margin: 0em;">

</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg12488.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="thrd9.html#12489">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="mail9.html#12489">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg12490.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li><ul>
<li><ul>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg12472.html">Re: Riak on SAN</a></span> <span class="sender italic">Steve Vinoski</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg12473.html">Re: Riak on SAN</a></span> <span class="sender italic">Darren Govoni</span></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg12475.html">Re: Riak on SAN</a></span> <span class="sender italic">Jeremiah Peschka</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg12480.html">Re: Riak on SAN</a></span> <span class="sender italic">John E. Vincent</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg12482.html">Re: Riak on SAN</a></span> <span class="sender italic">Pedram Nimreezi</span></li>
<li class="icons-email"><span class="subject"><a href="msg12483.html">Re: Riak on SAN</a></span> <span class="sender italic">Sean Cribbs</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg12485.html">Re: Riak on SAN</a></span> <span class="sender italic">Brian Akins</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg12486.html">Re: Riak on SAN</a></span> <span class="sender italic">Guido Medina</span></li>
<li class="icons-email"><span class="subject"><a href="msg12487.html">Re: Riak on SAN</a></span> <span class="sender italic">Guido Medina</span></li>
<li class="icons-email"><span class="subject"><a href="msg12488.html">Re: Riak on SAN</a></span> <span class="sender italic">Pedram Nimreezi</span></li>
<li class="icons-email tSliceCur"><span class="subject">Re: Riak on SAN</span> <span class="sender italic">Guido Medina</span></li>
<li class="icons-email"><span class="subject"><a href="msg12490.html">Re: Riak on SAN</a></span> <span class="sender italic">Heinz Nikolaus Gies</span></li>
<li class="icons-email"><span class="subject"><a href="msg12491.html">Re: Riak on SAN</a></span> <span class="sender italic">Guido Medina</span></li>
<li class="icons-email"><span class="subject"><a href="msg12492.html">Re: Riak on SAN</a></span> <span class="sender italic">Jared Morrow</span></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg12510.html">Re: Riak on SAN</a></span> <span class="sender italic">Mike Oxford</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg12511.html">Re: Riak on SAN</a></span> <span class="sender italic">Pedram Nimreezi</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg12517.html">Re: Riak on SAN</a></span> <span class="sender italic">Dave Martorana</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Riak on SAN">
<input type="hidden" name="msgid" value="524D77A1.1040001@temetra.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg12489.html">
<input type="submit" value=" Guido Medina ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Riak+on+SAN%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg12488.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg12490.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">524D77A1.1040001@temetra.com</li>
</ul>
</div>
</body>
</html>
