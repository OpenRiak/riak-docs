<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Link limits, and more...</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#01104" id="c">
<link rel="index" href="maillist.html#01104" id="i">
<link rel="prev" href="msg01103.html" id="p">
<link rel="next" href="msg01108.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg01104.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Link+limits%2C+and+more...%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Link limits, and more...</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Jeremiah+Peschka%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Jeremiah Peschka</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20100920" rel="nofollow">Mon, 20 Sep 2010 03:52:25 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>The link limitation is governed, I believe, by the max size of the metadata
that can be attached to anything you're storing in Riak. IIRC, it comes out
to some large value, like ~100,000 links for a single key. You can overcome
this limitation, too, but storing all of the links to any given key, you
could create a lookup bucket (e.g. if Users can have many Comments, you
could have a users_comments bucket that contains the user key and then an
array of comment IDs).</pre><pre>

There is no link indexing in Riak, so if you need to examine every
relationship, you're better off building up multiple look up buckets to
speed up the look ups so that you can avoid having to perform a key listing
operation.

There's more about links and link walking in the wiki quick start guide:
<a  rel="nofollow" href="https://wiki.basho.com/display/RIAK/Links+and+Link+Walking">https://wiki.basho.com/display/RIAK/Links+and+Link+Walking</a>

There was a webinar that Bryan Fink gave a while back about using Rails 3
and Riak to build a wiki. While it's not specifically about data modeling,
it does have a lot of good information on data modeling with Riak:
<a  rel="nofollow" href="http://vimeo.com/14275191">http://vimeo.com/14275191</a>

There are a few articles on the basho blog about designing your data schema
as well: <a  rel="nofollow" href="http://blog.basho.com/category/schema/">http://blog.basho.com/category/schema/</a>

Also, if you want to search the mailing list archives, you can check them
out here: <a  rel="nofollow" href="http://blog.gmane.org/gmane.comp.db.riak.user/">http://blog.gmane.org/gmane.comp.db.riak.user/</a>

As far as data to store in Riak: I would store whatever you want, within
reason of course. Data will be written to the server and you'll receive a
response code so you know your data has been correctly written to W servers.
Likewise, when you read data back, you'll receive an error if enough servers
do not respond with data in a reasonable time frame.

HTH,

Jeremiah Peschka
Microsoft SQL Server MVP
MCITP: Database Developer, DBA
614.515.0727


On Sun, Sep 19, 2010 at 11:56 PM, Mark Jarecki &lt;mjare...@bigpond.net.au&gt;wrote:

&gt; Hi,
&gt;
&gt; I was wondering if there is a practical limit to the number of links
&gt; between objects - for example, if a User object has a 'friend' link to many
&gt; other User objects. Are these links indexed somehow within Riak to speed up
&gt; any queries on these relationships?
&gt;
&gt; Also, are there any good links to best practice data modelling in Riak? I'm
&gt; completely new to document databases, however, can see that Riak (in
&gt; combination with Lucene) might really suit a project I'm starting, but I'm a
&gt; little uncertain how best to model various objects, especially as I still
&gt; think in SQL/tables. Is there anything that might outline some newbie
&gt; pitfalls - apart from the Basho docs.
&gt;
&gt; I'd also like to know, what data wouldn't you store in Riak atm? I guess,
&gt; I'm wondering what guarantees you get that data is written successfully
&gt; (i.e. transactions), and how mature is the project in regards to production
&gt; installations that trust it with critical data. Has anyone stored critical
&gt; data such as billing data in Riak successfully, or would MySQL/Postgres
&gt; still be a safer bet here? Although I do like the idea of managing fewer
&gt; systems.
&gt;
&gt; Soooo many questions....
&gt;
&gt; Cheers,
&gt;
&gt; Mark
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg01103.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#01104">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#01104">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg01108.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg01103.html">Link limits, and more...</a></span> <span class="sender italic">Mark Jarecki</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Link limits, and more...</span> <span class="sender italic">Jeremiah Peschka</span></li>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Link limits, and more...">
<input type="hidden" name="msgid" value="AANLkTikRPbV82N4AZfM8VZG96SButd=Jq=xP1id9uBBc@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg01104.html">
<input type="submit" value=" Jeremiah Peschka ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Link+limits%2C+and+more...%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg01103.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg01108.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">AANLkTikRPbV82N4AZfM8VZG96SButd=Jq=xP1id9uBBc@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
