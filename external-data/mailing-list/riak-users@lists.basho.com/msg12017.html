<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Practical Riak cluster choices in AWS (number of nodes? AZ's?)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="thrd11.html#12017" id="c">
<link rel="index" href="mail11.html#12017" id="i">
<link rel="prev" href="msg12015.html" id="p">
<link rel="next" href="msg11984.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg12017.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Practical+Riak+cluster+choices+in+AWS+%5C%28number+of+nodes%5C%3F+AZ%27s%5C%3F%5C%29%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Practical Riak cluster choices in AWS (number of nodes? AZ's?)</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Matthew+Dawson%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Matthew Dawson</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20130813" rel="nofollow">Tue, 13 Aug 2013 20:52:47 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>On August 13, 2013 10:20:48 PM Brady Wetherington wrote:
&gt; One thing that I *think* I've figured out is that the number of &quot;how many
&gt; replicas can you lose and stay up&quot; is actually n-w for writes, and n-r for
&gt; reads -
&gt; 
&gt; So with n=3 and r=2 and w=2, the loss of two replicas due to AZ failure
&gt; means that I still *have* my data (&quot;durability&quot;) but I might lose _access_
&gt; to it (&quot;availability&quot;) for a little bit. And with that weird feature that
&gt; Riak has (the feature's name escapes me for now?) I might even be able to
&gt; write new data if my cluster figures out that the downed nodes are actually
&gt; down; I think it just stores the writes on the remaining boxen, and
&gt; eventually it gets distributed back once the nodes come back. Neat stuff.
&gt; 
Actually, that is sort of true.  If you lose two nodes, when you request a 
read, it will initially fail as it can only preform the read against one node, 
and the two fall over vnodes won't have the data.  However, the cluster will 
recognize that there is data missing in the fallover vnodes, and initiate 
read-repair.  So the next read will in fact work just fine.  If you build your 
app to assume reads may transiently fail, then you shouldn't have an issue.
Write will also continue to work in the same way (like you mentioned).
-- 
Matthew</pre>
<p><strong><a href="msg12017/smime.p7s" ><img src="../attachment.png" alt="Attachment:" width=27 height=28></a>
<a href="msg12017/smime.p7s" >smime.p7s</a></strong><br>
<em>Description:</em> S/MIME cryptographic signature</p>
<pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg12015.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="thrd11.html#12017">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="mail11.html#12017">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg11984.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg11969.html">Practical Riak cluster choices in AWS (number of nodes?...</a></span> <span class="sender italic">Brady Wetherington</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg11973.html">Re: Practical Riak cluster choices in AWS (number ...</a></span> <span class="sender italic">Jeremiah Peschka</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg11974.html">Re: Practical Riak cluster choices in AWS (num...</a></span> <span class="sender italic">Jared Morrow</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg11980.html">Re: Practical Riak cluster choices in AWS ...</a></span> <span class="sender italic">Dave Martorana</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg11981.html">Re: Practical Riak cluster choices in ...</a></span> <span class="sender italic">Jeremiah Peschka</span></li>
<li class="icons-email"><span class="subject"><a href="msg11982.html">Re: Practical Riak cluster choices in ...</a></span> <span class="sender italic">Hector Castro</span></li>
</ul></li>
</ul></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg12012.html">Re: Practical Riak cluster choices in AWS (number ...</a></span> <span class="sender italic">John Eikenberry</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg12015.html">Re: Practical Riak cluster choices in AWS (num...</a></span> <span class="sender italic">Brady Wetherington</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Practical Riak cluster choices in AWS ...</span> <span class="sender italic">Matthew Dawson</span></li>
</ul></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg11984.html">Re: Practical Riak cluster choices in AWS (number ...</a></span> <span class="sender italic">Brady Wetherington</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg12009.html">Re: Practical Riak cluster choices in AWS (num...</a></span> <span class="sender italic">Dave Martorana</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg12010.html">Re: Practical Riak cluster choices in AWS ...</a></span> <span class="sender italic">Brady Wetherington</span></li>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Practical Riak cluster choices in AWS (number of nodes? AZ's?)">
<input type="hidden" name="msgid" value="39330356.oT2QBNx1MJ@ring00">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg12017.html">
<input type="submit" value=" Matthew Dawson ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Practical+Riak+cluster+choices+in+AWS+%5C%28number+of+nodes%5C%3F+AZ%27s%5C%3F%5C%29%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg12015.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg11984.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">39330356.oT2QBNx1MJ@ring00</li>
</ul>
</div>
</body>
</html>
