<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: retreive all keys in bucket -- nothing but problems</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#09715" id="c">
<link rel="index" href="maillist.html#09715" id="i">
<link rel="prev" href="msg09714.html" id="p">
<link rel="next" href="msg09716.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg09715.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+retreive+all+keys+in+bucket+%5C-%5C-+nothing+but+problems%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: retreive all keys in bucket -- nothing but problems</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Jeremiah+Peschka%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Jeremiah Peschka</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20121231" rel="nofollow">Mon, 31 Dec 2012 19:33:40 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>I'm not sure why you're seeing the error, but a non-streaming list keys
operation will block until complete. To make this marginally better, you
can try to get your client to use the streaming API, but that still leaves
the problem of the list keys operation itself. List keys is expensive and,
in general, a bad idea because it walks across the entire key space of the
cluster, not just the bucket. Imagine SELECT * FROM allTheTables and you're
in the right neighborhood.</pre><pre>

If you're using secondary indices, you can use the $keys index of your
bucket, which should be considerably faster.

If not, then maybe you could provide more info about what you're trying to
accomplish. If you can perform everything in MapReduce, that may also do
the trick.

On Monday, December 31, 2012, Kevin Burton wrote:

&gt; I use ListKeys(). I guess the authors considered this bad also as
&gt; everytime I call this method I get the warning '*** [CI] -&gt; ListKeys is an
&gt; expensive operation and should not be used in Production scenarios. ***'
&gt;
&gt;
&gt; On Dec 31, 2012, at 10:37 AM, idmartin &lt;idmcr...@gmail.com &lt;javascript:;&gt;&gt;
&gt; wrote:
&gt;
&gt; &gt; Ive been using riak for about a year now and Ive always avoided trying
&gt; to get
&gt; &gt; every key in a bucket because it has always given me problem after
&gt; problem.
&gt; &gt;
&gt; &gt; Is there any proper, efficient way of retrieving all the keys of a bucket
&gt; &gt; for reiteration?
&gt; &gt;
&gt; &gt; Currently I am using the python client and get_keys() either crashes the
&gt; &gt; riak server or returns &quot;Error getting bucket properties&quot;.
&gt; &gt;
&gt; &gt; ive set ulimit to 9000 ( soft ) 65000 ( hard )
&gt; &gt;
&gt; &gt; Can anyone give me any advice with this issue?
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; --
&gt; &gt; View this message in context:
&gt; <a  rel="nofollow" href="http://riak-users.197444.n3.nabble.com/retreive-all-keys-in-bucket-nothing-but-problems-tp4026453.html">http://riak-users.197444.n3.nabble.com/retreive-all-keys-in-bucket-nothing-but-problems-tp4026453.html</a>
&gt; &gt; Sent from the Riak Users mailing list archive at Nabble.com.
&gt; &gt;
&gt; &gt; _______________________________________________
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com &lt;javascript:;&gt;
&gt; &gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com &lt;javascript:;&gt;
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;


-- 
---
Jeremiah Peschka
Founder, Brent Ozar Unlimited
Microsoft SQL Server MVP
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg09714.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#09715">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#09715">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg09716.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg09713.html">retreive all keys in bucket -- nothing but problems</a></span> <span class="sender italic">idmartin</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg09714.html">Re: retreive all keys in bucket -- nothing but probl...</a></span> <span class="sender italic">Kevin Burton</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: retreive all keys in bucket -- nothing but p...</span> <span class="sender italic">Jeremiah Peschka</span></li>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: retreive all keys in bucket -- nothing but problems">
<input type="hidden" name="msgid" value="CACJEN2rh9dq1KFJcbO_AHqgq5qoL-zDmJARwgiKCzFsRV8H_4A@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg09715.html">
<input type="submit" value=" Jeremiah Peschka ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+retreive+all+keys+in+bucket+%5C-%5C-+nothing+but+problems%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg09714.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg09716.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CACJEN2rh9dq1KFJcbO_AHqgq5qoL-zDmJARwgiKCzFsRV8H_4A@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
