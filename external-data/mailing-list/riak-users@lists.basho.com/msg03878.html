<!DOCTYPE html>
<html lang="en">
<head>
<title>NIO-based, async Riak Java client</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#03878" id="c">
<link rel="index" href="maillist.html#03878" id="i">
<link rel="prev" href="msg03873.html" id="p">
<link rel="next" href="msg03880.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg03878.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22NIO%5C-based%2C+async+Riak+Java+client%22&amp;o=newest" rel="nofollow"><span itemprop="name">NIO-based, async Riak Java client</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Jon+Brisbin%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Jon Brisbin</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20110630" rel="nofollow">Thu, 30 Jun 2011 05:23:42 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Thanks to Oleg from the Grizzly users mailing list, the problem with the 
protobuf handling code now seems fixed. The non-blocking, Grizzly (and thus 
NIO) based Java client I'm experimenting with seems to work quite well. </pre><pre>

<a  rel="nofollow" href="https://github.com/jbrisbin/riak-async-java-client">https://github.com/jbrisbin/riak-async-java-client</a> 

It doesn't do link walking or map/reduce yet just because I haven't had time to 
implement those features. I'm more interested in the asynchronous API portion 
at the moment. I'm curious whether a Future-based approach or a callback-based 
approach will be better in the long run. Until such time as Java has closures, 
I think the callback-based approach will work better with other NIO and 
non-blocking frameworks. Most of those have a CompletionHandler abstraction 
which would fit very well with the callback style. But user application code 
might want to rely on the Future style in some places (like integrating with 
blocking code in other parts of the app). 

The client implements a modified form of Russell's RawClient and uses the 
abstractions from the new Java client to make it very compatible with the 
regular, blocking Java client. The RawAsyncClient has both Future and callback 
operations in the same interface. I'd rather split these up into two separate 
interfaces and give a convenience method on the RiakAsyncClient object to get 
either of the interfaces so you can work only with Futures or only with 
callbacks. This will dramatically reduce the noise in your IDE as your working, 
as you won't see all those overrides in a single list. 

The basic use case is in a Grizzly web app where I need fully-non-blocking IO 
to all components in the app. 

Thanks! 

Jon Brisbin 
http//jbrisbin.com 


</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg03873.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#03878">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#03878">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg03880.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">

</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="NIO-based, async Riak Java client">
<input type="hidden" name="msgid" value="1fb67b23-6c46-429c-9515-ae4b23a5fd9d@jbrisbin.local">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg03878.html">
<input type="submit" value=" Jon Brisbin ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22NIO%5C-based%2C+async+Riak+Java+client%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg03873.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg03880.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">1fb67b23-6c46-429c-9515-ae4b23a5fd9d@jbrisbin.local</li>
</ul>
</div>
</body>
</html>
