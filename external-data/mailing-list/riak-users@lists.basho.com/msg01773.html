<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Install question about riak-erlang-client</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#01773" id="c">
<link rel="index" href="maillist.html#01773" id="i">
<link rel="prev" href="msg01771.html" id="p">
<link rel="next" href="msg01769.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg01773.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Install+question+about+riak%5C-erlang%5C-client%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Install question about riak-erlang-client</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Mark+Phillips%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Mark Phillips</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20101211" rel="nofollow">Sat, 11 Dec 2010 11:30:15 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hello Xiaopong,

Apologies about the trouble you had with the Erlang client. I'll run
through the client docs on Monday and make sure we have everything
properly explained.</pre><pre>

While we're on the topic of Erlang client documentation, you might
find these handy - <a  rel="nofollow" href="http://basho.github.com/riak-erlang-client/">http://basho.github.com/riak-erlang-client/</a>  (We
are now using GitHub as the canonical home for Riak code but the
BitBucket mirror is in place and working so if that's what you prefer,
you'r all good.) We generated the docs about two weeks back (we're
actually in the process of doing these for all the Riak clients) so
they might be _slightly_ behind what is in master, but I thought they
couldn't hurt to share).

Hope they help. We'll check out the docs (and regenerate as needed)
once Monday comes around.

Thanks for diving into Riak.

Mark

Community Manager
Basho Technologies
wiki.basho.com
twitter.com/pharkmillups

On Fri, Dec 10, 2010 at 11:42 PM, Xiaopong Tran &lt;xiaopong.t...@gmail.com&gt; wrote:
&gt; I finally got it to work, the document is so misleading,
&gt; had to dig into the code to find out what is going on.
&gt;
&gt; When starting erl, you have to add
&gt;
&gt; deps/protobuffs/ebin/
&gt;
&gt; to the path too.
&gt;
&gt; One whole day of frustration....
&gt;
&gt;
&gt;
&gt; On Sat, 2010-12-11 at 15:26 +0800, Xiaopong Tran wrote:
&gt;&gt; After upgrading R14B, I can now compile the client package,
&gt;&gt; but I still get the same error when trying to write the object.
&gt;&gt;
&gt;&gt; Could someone tell what's going on here?
&gt;&gt;
&gt;&gt; Thanks
&gt;&gt;
&gt;&gt; Xiaopong
&gt;&gt;
&gt;&gt; On Fri, 2010-12-10 at 16:37 +0800, Xiaopong Tran wrote:
&gt;&gt; &gt; I have been working on MongoDB, and wanted to try out Riak as our
&gt;&gt; &gt; system is also in Erlang. But the first installation got me stuck
&gt;&gt; &gt; with an unusable client.
&gt;&gt; &gt;
&gt;&gt; &gt; The server is started and seems to run. So I grabbed the
&gt;&gt; &gt; riakc-1.0.1 package, and it didn't even compile:
&gt;&gt; &gt;
&gt;&gt; &gt; x...@shanghai:~/project-workspace/erlang/basho-riak-erlang-client-a1545e5$
&gt;&gt; &gt; make
&gt;&gt; &gt; ./rebar get-deps
&gt;&gt; &gt; ==&gt; basho-riak-erlang-client-a1545e5 (get-deps)
&gt;&gt; &gt; Pulling protobuffs from {hg,&quot;<a  rel="nofollow" href="http://bitbucket.org/basho/protobuffs&quot">http://bitbucket.org/basho/protobuffs&quot</a>;,
&gt;&gt; &gt;                             &quot;protobuffs-0.5.0&quot;}
&gt;&gt; &gt; requesting all changes
&gt;&gt; &gt; adding changesets
&gt;&gt; &gt; adding manifests
&gt;&gt; &gt; adding file changes
&gt;&gt; &gt; added 91 changesets with 243 changes to 93 files (+2 heads)
&gt;&gt; &gt; 29 files updated, 0 files merged, 0 files removed, 0 files unresolved
&gt;&gt; &gt; ==&gt; protobuffs (get-deps)
&gt;&gt; &gt; ./rebar compile
&gt;&gt; &gt; ==&gt; protobuffs (compile)
&gt;&gt; &gt; Compiled src/pokemon_pb.erl
&gt;&gt; &gt; Compiled src/protobuffs.erl
&gt;&gt; &gt; Compiled src/protobuffs_parser.erl
&gt;&gt; &gt; Compiled src/protobuffs_compile.erl
&gt;&gt; &gt; ==&gt; basho-riak-erlang-client-a1545e5 (compile)
&gt;&gt; &gt; Compiling src/riakclient.proto
&gt;&gt; &gt; src/riakc_pb_socket.erl:73: type ctx() undefined
&gt;&gt; &gt; src/riakc_pb_socket.erl:73: type rpb_req() undefined
&gt;&gt; &gt; src/riakc_pb_socket.erl:78: type option() undefined
&gt;&gt; &gt; src/riakc_pb_socket.erl:79: Warning: type option() is unused
&gt;&gt; &gt; src/riakc_pb_socket.erl:87: Warning: type rpb_req() is unused
&gt;&gt; &gt; src/riakc_pb_socket.erl:88: Warning: type ctx() is unused
&gt;&gt; &gt; make: *** [compile] Error 1
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt; So I grabbed the repository with the command
&gt;&gt; &gt;
&gt;&gt; &gt; hg clone <a  rel="nofollow" href="http://bitbucket.org/basho/riak-erlang-client">http://bitbucket.org/basho/riak-erlang-client</a>
&gt;&gt; &gt;
&gt;&gt; &gt; and compiled it. Everything seemed to be ok, until I started
&gt;&gt; &gt; running a connection, and here's I got:
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt; x...@shanghai:~/project-workspace/erlang/riak-erlang-client/ebin$ erl -pa
&gt;&gt; &gt; `pwd`
&gt;&gt; &gt; Erlang R13B03 (erts-5.7.4) [source] [64-bit] [smp:2:2] [rq:2]
&gt;&gt; &gt; [async-threads:0] [hipe] [kernel-poll:false]
&gt;&gt; &gt;
&gt;&gt; &gt; Eshell V5.7.4  (abort with ^G)
&gt;&gt; &gt; 1&gt; code:which(riakc_pb_socket).
&gt;&gt; &gt; &quot;/home/xp/project-workspace/erlang/riak-erlang-client/ebin/riakc_pb_socket.beam&quot;
&gt;&gt; &gt; 2&gt; {ok, Pid} = riakc_pb_socket:start_link(&quot;127.0.0.1&quot;, 8087).
&gt;&gt; &gt; {ok,&lt;0.38.0&gt;}
&gt;&gt; &gt; 3&gt; riakc_pb_socket:ping(Pid).
&gt;&gt; &gt; pong
&gt;&gt; &gt; 4&gt; Object = riakc_obj:new(&lt;&lt;&quot;groceries&quot;&gt;&gt;, &lt;&lt;&quot;mine&quot;&gt;&gt;, &lt;&lt;&quot;egg &amp;
&gt;&gt; &gt; bacon&quot;&gt;&gt;).
&gt;&gt; &gt; {riakc_obj,&lt;&lt;&quot;groceries&quot;&gt;&gt;,&lt;&lt;&quot;mine&quot;&gt;&gt;,undefined,[],
&gt;&gt; &gt;            undefined,&lt;&lt;&quot;egg &amp; bacon&quot;&gt;&gt;}
&gt;&gt; &gt; 5&gt; riakc_pb_socket:put(Pid, Object).
&gt;&gt; &gt;
&gt;&gt; &gt; =ERROR REPORT==== 10-Dec-2010::15:45:55 ===
&gt;&gt; &gt; ** Generic server &lt;0.38.0&gt; terminating
&gt;&gt; &gt; ** Last message in was {req,
&gt;&gt; &gt;
&gt;&gt; &gt; {rpbputreq,&lt;&lt;&quot;groceries&quot;&gt;&gt;,&lt;&lt;&quot;mine&quot;&gt;&gt;,undefined,
&gt;&gt; &gt;                                {rpbcontent,&lt;&lt;&quot;egg &amp; bacon&quot;&gt;&gt;,undefined,
&gt;&gt; &gt;
&gt;&gt; &gt; undefined,undefined,undefined,undefined,
&gt;&gt; &gt;                                    undefined,undefined,undefined},
&gt;&gt; &gt;                                undefined,undefined,undefined},
&gt;&gt; &gt;                            60000}
&gt;&gt; &gt; ** When Server state ==
&gt;&gt; &gt; {state,&quot;127.0.0.1&quot;,8087,false,false,#Port&lt;0.627&gt;,
&gt;&gt; &gt;                                undefined,
&gt;&gt; &gt;                                {[],[]},
&gt;&gt; &gt;                                1,[],infinity,100}
&gt;&gt; &gt; ** Reason for termination ==
&gt;&gt; &gt; ** {'module could not be loaded',
&gt;&gt; &gt;        [{protobuffs,encode,[1,&lt;&lt;&quot;groceries&quot;&gt;&gt;,bytes]},
&gt;&gt; &gt;         {riakclient_pb,iolist,2},
&gt;&gt; &gt;         {riakc_pb,encode,1},
&gt;&gt; &gt;         {riakc_pb_socket,send_request,2},
&gt;&gt; &gt;         {riakc_pb_socket,handle_call,3},
&gt;&gt; &gt;         {gen_server,handle_msg,5},
&gt;&gt; &gt;         {proc_lib,init_p_do_apply,3}]}
&gt;&gt; &gt; ** exception exit: undef
&gt;&gt; &gt;      in function  protobuffs:encode/3
&gt;&gt; &gt;         called as protobuffs:encode(1,&lt;&lt;&quot;groceries&quot;&gt;&gt;,bytes)
&gt;&gt; &gt;      in call from riakclient_pb:iolist/2
&gt;&gt; &gt;      in call from riakc_pb:encode/1
&gt;&gt; &gt;      in call from riakc_pb_socket:send_request/2
&gt;&gt; &gt;      in call from riakc_pb_socket:handle_call/3
&gt;&gt; &gt;      in call from gen_server:handle_msg/5
&gt;&gt; &gt;      in call from proc_lib:init_p_do_apply/3
&gt;&gt; &gt; 6&gt; {ok, O} = riakc_pb_socket:get(Pid, &lt;&lt;&quot;groceries&quot;&gt;&gt;, &lt;&lt;&quot;mine&quot;&gt;&gt;).
&gt;&gt; &gt; ** exception exit: {noproc,
&gt;&gt; &gt;                        {gen_server,call,
&gt;&gt; &gt;                            [&lt;0.38.0&gt;,
&gt;&gt; &gt;
&gt;&gt; &gt; {req,{rpbgetreq,&lt;&lt;&quot;groceries&quot;&gt;&gt;,&lt;&lt;&quot;mine&quot;&gt;&gt;,undefined},60000},
&gt;&gt; &gt;                             infinity]}}
&gt;&gt; &gt;      in function  gen_server:call/3
&gt;&gt; &gt; 7&gt; Object.
&gt;&gt; &gt; {riakc_obj,&lt;&lt;&quot;groceries&quot;&gt;&gt;,&lt;&lt;&quot;mine&quot;&gt;&gt;,undefined,[],
&gt;&gt; &gt;            undefined,&lt;&lt;&quot;egg &amp; bacon&quot;&gt;&gt;}
&gt;&gt; &gt; 8&gt; riakc_obj:get_value(Object).
&gt;&gt; &gt; ** exception throw: no_value
&gt;&gt; &gt;      in function  riakc_obj:get_value/1
&gt;&gt; &gt; 9&gt; riakc_obj:get_content_type(Object).
&gt;&gt; &gt; ** exception throw: no_metadata
&gt;&gt; &gt;      in function  riakc_obj:get_metadata/1
&gt;&gt; &gt;      in call from riakc_obj:get_content_type/1
&gt;&gt; &gt; 10&gt;
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt; So, connection to the server seemed to be fine, but then nothing
&gt;&gt; &gt; else worked.
&gt;&gt; &gt;
&gt;&gt; &gt; What gives? I'm running Ubuntu 10.10.
&gt;&gt; &gt;
&gt;&gt; &gt; Xiaopong
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt;
&gt;&gt;
&gt;
&gt;
&gt;
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;

_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg01771.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#01773">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#01773">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg01769.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg01768.html">Install question about riak-erlang-client</a></span> <span class="sender italic">Xiaopong Tran</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg01770.html">Re: Install question about riak-erlang-client</a></span> <span class="sender italic">Xiaopong Tran</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg01771.html">Re: Install question about riak-erlang-client</a></span> <span class="sender italic">Xiaopong Tran</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Install question about riak-erlang-client</span> <span class="sender italic">Mark Phillips</span></li>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Install question about riak-erlang-client">
<input type="hidden" name="msgid" value="AANLkTim6BjvmEUAH4n7caNSRUtxFCZjkJYpoO008r=T8@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg01773.html">
<input type="submit" value=" Mark Phillips ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Install+question+about+riak%5C-erlang%5C-client%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg01771.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg01769.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">AANLkTim6BjvmEUAH4n7caNSRUtxFCZjkJYpoO008r=T8@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
