<!DOCTYPE html>
<html lang="en">
<head>
<title>Fwd: couchdb performace 10x: using NIF for file io</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#01357" id="c">
<link rel="index" href="maillist.html#01357" id="i">
<link rel="prev" href="msg01356.html" id="p">
<link rel="next" href="msg01358.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg01357.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Fwd%5C%3A+couchdb+performace+10x%5C%3A+using+NIF+for+file+io%22&amp;o=newest" rel="nofollow"><span itemprop="name">Fwd: couchdb performace 10x: using NIF for file io</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22NevB%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">NevB</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20101024" rel="nofollow">Sun, 24 Oct 2010 14:05:36 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi,

I came across this thread in the Erlang group and thought the Riak
team might find it interesting.</pre><pre>

Please forgive me if its not relevant to Riak

Kind Regards

Neville


---------- Forwarded message ----------
From: Joel Reymont &lt;joe...@gmail.com&gt;
Date: Oct 25, 12:56Â am
Subject: couchdb performace 10x: using NIF for file io
To: Erlang Programming


Simply switching to NIFs for file IO seems to have improved CouchDB
write performance more than ten-fold.

Compare the old graph

<a  rel="nofollow" href="http://graphs.mikeal.couchone.com/#/graph/62b286fbb7aa55a4b0c4cc913c0">http://graphs.mikeal.couchone.com/#/graph/62b286fbb7aa55a4b0c4cc913c0</a>...

to the new graph

<a  rel="nofollow" href="http://graphs.mikeal.couchone.com/#/graph/62b286fbb7aa55a4b0c4cc913c0">http://graphs.mikeal.couchone.com/#/graph/62b286fbb7aa55a4b0c4cc913c0</a>...

I was under the impression that the Erlang IO subsystem was highly
optimized but there seems to be no limit to perfection.

NIFs are a giant black hole that will subsume Erlang code as
performance has to be improved. Start at the lowest level and keep
moving up. All that will be left of Erlang in the end is 99.99999%
uptime, fault tolerance and supervision... of optimized C code. It's
swell and I'm all for it!

Patch is here:

<a  rel="nofollow" href="http://github.com/wagerlabs/couchdb/commit/23527eb8165f81e63d47b230f3">http://github.com/wagerlabs/couchdb/commit/23527eb8165f81e63d47b230f3</a>...

---<a  rel="nofollow" href="http://twitter.com/wagerlabs">http://twitter.com/wagerlabs</a>

________________________________________________________________
erlang-questions (at) erlang.org mailing list.
See<a  rel="nofollow" href="http://www.erlang.org/faq.html">http://www.erlang.org/faq.html</a>
To unsubscribe; <a  rel="nofollow" href="mailto:erlang-questions-unsubscr...@erlang.org">mailto:erlang-questions-unsubscr...@erlang.org</a>

_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg01356.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#01357">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#01357">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg01358.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email tSliceCur"><span class="subject">Fwd: couchdb performace 10x: using NIF for file io</span> <span class="sender italic">NevB</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg01358.html">Re: couchdb performace 10x: using NIF for file io</a></span> <span class="sender italic">Neville Burnell</span></li>
<li class="icons-email"><span class="subject"><a href="msg01359.html">Re: couchdb performace 10x: using NIF for file io</a></span> <span class="sender italic">Kirill A. Korinskiy</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg01361.html">Re: couchdb performace 10x: using NIF for fil...</a></span> <span class="sender italic">Richard Heycock</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg01366.html">Re: couchdb performace 10x: using NIF for...</a></span> <span class="sender italic">Sean Cribbs</span></li>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Fwd: couchdb performace 10x: using NIF for file io">
<input type="hidden" name="msgid" value="2841dbca-48aa-4004-88c2-efec9a3da51a@t8g2000yqk.googlegroups.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg01357.html">
<input type="submit" value=" NevB ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Fwd%5C%3A+couchdb+performace+10x%5C%3A+using+NIF+for+file+io%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg01356.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg01358.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">2841dbca-48aa-4004-88c2-efec9a3da51a@t8g2000yqk.googlegroups.com</li>
</ul>
</div>
</body>
</html>
