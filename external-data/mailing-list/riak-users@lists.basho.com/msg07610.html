<!DOCTYPE html>
<html lang="en">
<head>
<title>link walking -- order between keys and objects does not match</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#07610" id="c">
<link rel="index" href="maillist.html#07610" id="i">
<link rel="prev" href="msg07609.html" id="p">
<link rel="next" href="msg07613.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg07610.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22link+walking+%5C-%5C-+order+between+keys+and+objects+does+not+match%22&amp;o=newest" rel="nofollow"><span itemprop="name">link walking -- order between keys and objects does not match</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Jos%C3%A9+Ghislain+Quenum%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">José Ghislain Quenum</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20120604" rel="nofollow">Mon, 04 Jun 2012 14:34:23 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi all,
I have two buckets 'users' and 'projects'. A user object can have a link to a 
project object with tag name &quot;owns&quot;. And there can be many such links with a 
given user object. I try to walk the &quot;owns&quot; link from a user object with the 
following syntax:
(I am using riak.js and coffeescript, but I guess the syntax is straightforward 
:-))</pre><pre>

@db_client.walk 'users', user_key, [[&quot;_&quot;, 'owns', 1]], (error, linked_data) =&gt;

Technically, the link walking seems to be working fine. It returns an object 
with two entries: 
1- entry &quot;0&quot; with an array of keys
2 - entry &quot;1&quot; with an array of objects. 

However, the order of the objects and the keys does not match. Between several 
iterations I can see the order changing. This later fails the logic of my 
program since I use the key to fetch more information about a project and 
display it at a later stage in the program. 

My question is, is there something I am doing wrong in the syntax of my link 
walking? Is this the normal way riak is implemented? (i.e. a loose coupling 
between keys and objects during link walking)? What's the best way fix this? 
Ignore the objects, stick with the keys and go fetch the actual objects from 
the projects bucket? That doesn't sound efficient to me though.
Any thought?
José

PS: As I said, I am using Riak.js in a Node.js project with coffeescript


_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg07609.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#07610">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#07610">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg07613.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">

</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="link walking -- order between keys and objects does not match">
<input type="hidden" name="msgid" value="2F3E9EB3-5511-4688-A0AC-34E84AE7AC57@googlemail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg07610.html">
<input type="submit" value=" José Ghislain Quenum ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22link+walking+%5C-%5C-+order+between+keys+and+objects+does+not+match%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg07609.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg07613.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">2F3E9EB3-5511-4688-A0AC-34E84AE7AC57@googlemail.com</li>
</ul>
</div>
</body>
</html>
