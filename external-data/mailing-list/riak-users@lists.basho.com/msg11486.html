<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Help with local restore for dev enviroment</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="thrd14.html#11486" id="c">
<link rel="index" href="mail14.html#11486" id="i">
<link rel="prev" href="msg11453.html" id="p">
<link rel="next" href="msg11431.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg11486.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Help+with+local+restore+for+dev+enviroment%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Help with local restore for dev enviroment</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Mark+Phillips%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Mark Phillips</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20130711" rel="nofollow">Thu, 11 Jul 2013 18:25:02 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi Mark,

If you need to get the structure the data, your best bet is to pull the
content type. You'll need to list-keys [1] on that bucket and then parse
the header for each key with a HEAD request, paying special attention to
the content-type for the key [2]. Keep in mind we don't recommend using
list-keys for production, but if it's for test data and an offline-cluster,
it's fine. Make sure to use the &quot;?keys=stream&quot; option if the client you're
using supports it.</pre><pre>

The biggest caveat here is that you're trusting the client that stored the
data initially to have specified the correct content type. Riak doesn't
 validate it proactively on the way in.

Hope that helps.

Mark


[1] <a  rel="nofollow" href="http://docs.basho.com/riak/latest/references/apis/http/HTTP-List-Keys/">http://docs.basho.com/riak/latest/references/apis/http/HTTP-List-Keys/</a>
[2]
<a  rel="nofollow" href="http://docs.basho.com/riak/latest/references/apis/http/HTTP-Fetch-Object/#Response">http://docs.basho.com/riak/latest/references/apis/http/HTTP-Fetch-Object/#Response</a>


On Wed, Jul 10, 2013 at 7:37 AM, Mark Wagner &lt;mwagne...@gmail.com&gt; wrote:

&gt; Thanks for the info!!!  I appreciate the help and I am glad to know that
&gt; it should just work!
&gt;
&gt; I don't really need the data from the whole cluster while developing the
&gt; script.  I just need to get my queries working etc...
&gt;
&gt; One issue I am facing is I don't know the structure of the data.  So I am
&gt; trying to browse it (<a  rel="nofollow" href="http://localhost:8098/riak?buckets=true">http://localhost:8098/riak?buckets=true</a>)  and I
&gt; getting content decode  error.
&gt;
&gt; Any ideas?  thoughts on how to troubleshoot this?  Or different approaches
&gt; to determining the structure?
&gt;
&gt;
&gt; Thanks AGAIN!!!
&gt;
&gt;
&gt; Mark
&gt;
&gt;
&gt; On Wed, Jul 10, 2013 at 7:59 AM, Justin Sheehy &lt;jus...@basho.com&gt; wrote:
&gt;
&gt;&gt; Hi, Mark.
&gt;&gt;
&gt;&gt; You've already received a little advice generally so I won't pile on that
&gt;&gt; part, but one thing stood out to me:
&gt;&gt;
&gt;&gt; &gt; My client has sent me a backup from one of their cluster nodes. bitcask
&gt;&gt; data,. rings and config.
&gt;&gt;
&gt;&gt; Unless I'm misunderstanding what you're doing, what you're working on
&gt;&gt; will not get you the data from the whole cluster, but the fraction of the
&gt;&gt; data that was stored on the one node that you have a backup from. Just a
&gt;&gt; warning, in case you hadn't realized this.
&gt;&gt;
&gt;&gt; -Justin
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;
&gt;
&gt; --
&gt; Mark Wagner, Web &amp; Mobile Developer
&gt; *:coderow*
&gt; *Web &amp; mobile application development for business*
&gt; m: 480.580.1261 | o: 612.293.9090
&gt; www.coderow.com | m...@coderow.com | @thesociableme
&gt;
&gt;
&gt;
&gt;
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;
&gt;
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg11453.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="thrd14.html#11486">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="mail14.html#11486">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg11431.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg11430.html">Help with local restore for dev enviroment</a></span> <span class="sender italic">Mark Wagner</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg11444.html">Re: Help with local restore for dev enviroment</a></span> <span class="sender italic">Shane McEwan</span></li>
<li class="icons-email"><span class="subject"><a href="msg11451.html">Re: Help with local restore for dev enviroment</a></span> <span class="sender italic">Justin Sheehy</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg11453.html">Re: Help with local restore for dev enviroment</a></span> <span class="sender italic">Mark Wagner</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Help with local restore for dev enviroment</span> <span class="sender italic">Mark Phillips</span></li>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Help with local restore for dev enviroment">
<input type="hidden" name="msgid" value="CAE8zJQEdOh5wE-=7nFCCQe_CGKXHKGPOxzScbyL=VHnErgmm2Q@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg11486.html">
<input type="submit" value=" Mark Phillips ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Help+with+local+restore+for+dev+enviroment%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg11453.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg11431.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CAE8zJQEdOh5wE-=7nFCCQe_CGKXHKGPOxzScbyL=VHnErgmm2Q@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
