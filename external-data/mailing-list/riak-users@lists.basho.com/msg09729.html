<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: riak-users Digest, Vol 42, Issue 3</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#09729" id="c">
<link rel="index" href="mail2.html#09729" id="i">
<link rel="prev" href="msg09728.html" id="p">
<link rel="next" href="msg09739.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg09729.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+riak%5C-users+Digest%2C+Vol+42%2C+Issue+3%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: riak-users Digest, Vol 42, Issue 3</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Elias+Levy%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Elias Levy</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20130103" rel="nofollow">Thu, 03 Jan 2013 10:43:27 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>On Thu, Jan 3, 2013 at 9:00 AM, &lt;riak-users-requ...@lists.basho.com&gt; wrote:</pre><pre>

&gt; From: qaspar &lt;snoope...@gmail.com&gt;
&gt;
&gt; Hi,
&gt;
&gt; Can someone confirm this? If it's true, what exactly is the purpose of
&gt; offering the if_not_modified flag?
&gt;
&gt; Kaspar
&gt;
The consistency guarantees of if_not_modified  depend on the default R
value configured on the bucket properties.  INM request perform an internal
from the node coordinating the request get to retrieve the object to get
its vclock to compare to the incoming object.  The get uses the R value
that is the default for the bucket.  The default value of R for a bucket is
&quot;quorum&quot;, although the default for PR is 0.  Thus, by default INM strongly
guarantees no stale writes, but only if no primary replica nodes have
failed or have become partitioned.  This also assumes that you are using at
least an W of &quot;quorum&quot;, and ideally a PR of the same.  If you change the
default bucket PR to &quot;quorum&quot;, then it guarantee this also when primary
nodes fail or there is a partition, but it does this at the expense of
availability.

The INM only guarantees no stale writes, and only does so when R, PR, W,
and WR are such to to guarantee strong consistency.  It does not guard
against concurrent writes.  Multiple writers can succeed even when using
INM if they write at the same time.

If you have allow_mult set to true in the bucket, that means the client
must handle sibling resolution.  If allow_mult is set to false and
last_write_wins is set to true, concurrent writes will succeed, but the
value with the latest timestamp will win.  If last_write_wins is set to
false while allow_multi is also false, Riak will keep siblings internally,
but use vector clocks to resolve the siblings, and if that fails, fall back
on timestamp, to only return a single value.
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg09728.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#09729">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="mail2.html#09729">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg09739.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg09728.html">Re: riak-users Digest, Vol 42, Issue 3</a></span> <span class="sender italic">Elias Levy</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: riak-users Digest, Vol 42, Issue 3</span> <span class="sender italic">Elias Levy</span></li>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: riak-users Digest, Vol 42, Issue 3">
<input type="hidden" name="msgid" value="CAFDmHdPvbiOJ3G_PxNcD2v4W5N2iYYLYctH4Rih42RiZ6bUPBw@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg09729.html">
<input type="submit" value=" Elias Levy ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+riak%5C-users+Digest%2C+Vol+42%2C+Issue+3%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg09728.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg09739.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CAFDmHdPvbiOJ3G_PxNcD2v4W5N2iYYLYctH4Rih42RiZ6bUPBw@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
