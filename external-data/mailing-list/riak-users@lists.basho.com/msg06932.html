<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Solving "bad_utf8_character_code" error returned by Riak MR</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#06932" id="c">
<link rel="index" href="maillist.html#06932" id="i">
<link rel="prev" href="msg06928.html" id="p">
<link rel="next" href="msg06929.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg06932.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Solving+%5C%22bad_utf8_character_code%5C%22+error+returned+by+Riak+MR%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Solving "bad_utf8_character_code" error returned by Riak MR</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Samuel+Elliott%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Samuel Elliott</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20120310" rel="nofollow">Sat, 10 Mar 2012 09:59:14 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>On Fri, Mar 9, 2012 at 8:32 PM, Matthew Tovbin &lt;matt...@tovbin.com&gt; wrote:
&gt; Thanks, Sean!
&gt;
&gt; What are the suggestions for solving this issue, except of cleaning data
&gt; before putting it to Riak?</pre><pre>

pre- or post-commit hook maybe? That means your clients won't need to
do an explicit clean, but the data will still be clean once it gets
stored (presumably). Others on this list will know far better than me
though, it's just an idea.

Sam

&gt;
&gt;
&gt; -Matthew
&gt;
&gt;
&gt;
&gt; On Fri, Mar 9, 2012 at 10:38, Sean Cribbs &lt;s...@basho.com&gt; wrote:
&gt;&gt;
&gt;&gt; Matthew,
&gt;&gt;
&gt;&gt; Even if your map function doesn't use the object, the Erlang side doesn't
&gt;&gt; know that (Javascript funargs are exceptionally lazy anyway). It will still
&gt;&gt; try to serialize the object into JSON to send marshal it into the VM. That's
&gt;&gt; where the error is generated.
&gt;&gt;
&gt;&gt; On Fri, Mar 9, 2012 at 12:20 PM, Matthew Tovbin &lt;matt...@tovbin.com&gt;
&gt;&gt; wrote:
&gt;&gt;&gt;
&gt;&gt;&gt;  Good day!
&gt;&gt;&gt;
&gt;&gt;&gt;   As previously discussed here
&gt;&gt;&gt; (<a  rel="nofollow" href="https://github.com/basho/riak_kv/pull/252#issuecomment-4415767">https://github.com/basho/riak_kv/pull/252#issuecomment-4415767</a>) I am unable
&gt;&gt;&gt; to perform MR on my cluster due to wrong encoding in some of my values.
&gt;&gt;&gt;
&gt;&gt;&gt; What are the suggestions for solving this issue, except of cleaning data
&gt;&gt;&gt; before putting it to Riak?
&gt;&gt;&gt;
&gt;&gt;&gt; Why does even this map function fail &quot;function map () { return [1]; }&quot;
&gt;&gt;&gt; ? It's not supposed to parse the value.
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; Thanks in advance for any tips.
&gt;&gt;&gt;
&gt;&gt;&gt; -Matthew
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; _______________________________________________
&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; --
&gt;&gt; Sean Cribbs &lt;s...@basho.com&gt;
&gt;&gt; Software Engineer
&gt;&gt; Basho Technologies, Inc.
&gt;&gt; <a  rel="nofollow" href="http://basho.com/">http://basho.com/</a>
&gt;&gt;
&gt;
&gt;
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;



-- 
Samuel Elliott
s...@lenary.co.uk
<a  rel="nofollow" href="http://lenary.co.uk/">http://lenary.co.uk/</a>
+44 (0)7891 993 664

_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg06928.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#06932">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#06932">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg06929.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg06926.html">Solving &quot;bad_utf8_character_code&quot; error returned ...</a></span> <span class="sender italic">Matthew Tovbin</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg06927.html">Re: Solving &quot;bad_utf8_character_code&quot; error ...</a></span> <span class="sender italic">Sean Cribbs</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg06928.html">Re: Solving &quot;bad_utf8_character_code&quot; er...</a></span> <span class="sender italic">Matthew Tovbin</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Solving &quot;bad_utf8_character_code&quot...</span> <span class="sender italic">Samuel Elliott</span></li>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Solving &quot;bad_utf8_character_code&quot; error returned by Riak MR">
<input type="hidden" name="msgid" value="CAAw5PY==SAcAE8m7=tmU4Dmxdoh82+3FF2RgshgchvHMnVw6jw@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg06932.html">
<input type="submit" value=" Samuel Elliott ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Solving+%5C%22bad_utf8_character_code%5C%22+error+returned+by+Riak+MR%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg06928.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg06929.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CAAw5PY==SAcAE8m7=tmU4Dmxdoh82+3FF2RgshgchvHMnVw6jw@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
