<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Incorect Input to Reduce</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#05804" id="c">
<link rel="index" href="maillist.html#05804" id="i">
<link rel="prev" href="msg05802.html" id="p">
<link rel="next" href="msg05807.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg05804.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Incorect+Input+to+Reduce%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Incorect Input to Reduce</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Sean+Cribbs%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Sean Cribbs</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20111130" rel="nofollow">Wed, 30 Nov 2011 07:01:47 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi Yehuda,

Your reduce function is not guaranteed to run across all inputs in the
first application, but may be applied many times as new inputs come in.
Riak will batch up reduce inputs until a certain number or timeout is
reached, then apply the function and take its output to be part of the
inputs for the next application. If it is absolutely necessary to run the
reduce function only once, use &quot;reduce_phase_only_1&quot; as the &quot;arg&quot; (only
works on Riak 1.0.x, example in Ruby):</pre><pre>

mr.reduce(&quot;function(v){...}&quot;, :arg =&gt; {:reduce_phase_only_1 =&gt; true}, :keep
=&gt; true)

Hope that helps!

On Wed, Nov 30, 2011 at 9:03 AM, Yehuda Zargrov &lt;yeh...@conduit.com&gt; wrote:

&gt; Hi,****
&gt;
&gt; ** **
&gt;
&gt; I’ve posted a mail on this few days ago, but went a bit further since then.
&gt; ****
&gt;
&gt; ** **
&gt;
&gt; I’m using ripple, running a map function on some input and getting a list
&gt; of about 50 items.****
&gt;
&gt; ** **
&gt;
&gt; Right after that, I’m running a reduce function. The first thing I do in
&gt; it is putting the length of v (the input) as an item in a list.****
&gt;
&gt; ** **
&gt;
&gt; When printing the result I see that the length is 13.****
&gt;
&gt; ** **
&gt;
&gt; It’s like something has happened between the map and reduce phases.****
&gt;
&gt; ** **
&gt;
&gt; Any ideas?****
&gt;
&gt; ** **
&gt;
&gt;   ****
&gt;
&gt; [image: Description:
&gt; C:\Users\Yehuda\AppData\Roaming\Microsoft\Signatures\logo.gif]****
&gt;
&gt; *Yehuda Zargrov**
&gt; *Software Engineer****
&gt;
&gt; *Conduit Your Site* &lt;<a  rel="nofollow" href="http://www.conduit.com/">http://www.conduit.com/</a>&gt;****
&gt;
&gt; *t:* 972.8.9461713 ext +314 |   *m:* +972503473119   |   *f:* +97286382140
&gt; ****
&gt;
&gt;
&gt; This message may contain confidential and/or privileged information. It is
&gt; intended to be read only by the individual or entity to whom it is
&gt; addressed or by their designee.
&gt; If the reader of this message is not the intended recipient, you are on
&gt; notice that any uses, copy, disclose or distribution of this message, in
&gt; any form, is strictly prohibited.
&gt; If you have received this message in error, please notify the sender by
&gt; reply email or by telephone and delete or destroy any copy of this message.
&gt; Thank you.
&gt;
&gt; ****
&gt;
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;
&gt;


-- 
Sean Cribbs &lt;s...@basho.com&gt;
Developer Advocate
Basho Technologies, Inc.
<a  rel="nofollow" href="http://www.basho.com/">http://www.basho.com/</a>
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg05802.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#05804">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#05804">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg05807.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg05802.html">Incorect Input to Reduce</a></span> <span class="sender italic">Yehuda Zargrov</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Incorect Input to Reduce</span> <span class="sender italic">Sean Cribbs</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg05807.html">Re: Incorect Input to Reduce</a></span> <span class="sender italic">Jonathan Langevin</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg05808.html">Re: Incorect Input to Reduce</a></span> <span class="sender italic">Jonathan Langevin</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg05809.html">Re: Incorect Input to Reduce</a></span> <span class="sender italic">Jonathan Langevin</span></li>
</ul></li>
</ul></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg05805.html">Re: Incorect Input to Reduce</a></span> <span class="sender italic">Jonathan Langevin</span></li>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Incorect Input to Reduce">
<input type="hidden" name="msgid" value="CAHsw=e050fB2i+wZ07z3y6bOnZWtCcbJvdXZqp5=ngViUJg4mA@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg05804.html">
<input type="submit" value=" Sean Cribbs ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Incorect+Input+to+Reduce%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg05802.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg05807.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CAHsw=e050fB2i+wZ07z3y6bOnZWtCcbJvdXZqp5=ngViUJg4mA@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
