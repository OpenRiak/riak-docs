<!DOCTYPE html>
<html lang="en">
<head>
<title>The best (fastest) way to delete/clear a bucket [python]</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#14230" id="c">
<link rel="index" href="maillist.html#14230" id="i">
<link rel="prev" href="msg14228.html" id="p">
<link rel="next" href="msg14233.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg14230.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22The+best+%5C%28fastest%5C%29+way+to+delete%5C%2Fclear+a+bucket+%5C%5Bpython%5C%5D%22&amp;o=newest" rel="nofollow"><span itemprop="name">The best (fastest) way to delete/clear a bucket [python]</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Pawe%C5%82+Kr%C3%B3likowski%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Paweł Królikowski</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20140519" rel="nofollow">Mon, 19 May 2014 05:55:33 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi,

For testing, I'd like to be able to throw a large number of data at Riak
(100k+ entries), check how it performed, change something in the
application, run the test again. I'd like to use the same data every time,
so, I'd like to clear the bucket between every test.</pre><pre>

The documentation (
<a  rel="nofollow" href="http://docs.basho.com/riak/2.0.0beta1/dev/references/http/">http://docs.basho.com/riak/2.0.0beta1/dev/references/http/</a>) says:

*Delete Buckets*
There is no straightforward way to delete an entire Bucket. To delete all
the keys in a bucket, you’ll need to delete them all individually.


So, I'm currently using something like:

for k in r_bk.get_keys():
v = r_bk.get(k)
 if v.exists:
r_bk.delete(v)

The problem is that r_bk.get_keys() returns a lot of elements that don't
exist (tombstones?) and iterating over all of them takes time.

Is that the way it's supposed to work? Or am I missing something?

- I'm using default delete_mode configuration ( 3 seconds )
- I'm using Riak 2.0 alpha 19 with Python. ( there's a bug with strong
consistency in Beta1, cannot use it)
- changing the bucket name for every run seems .. impractical?

Any advices welcomed,

--
Thanks,
Paweł
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg14228.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#14230">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#14230">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg14233.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email tSliceCur"><span class="subject">The best (fastest) way to delete/clear a bucket [pytho...</span> <span class="sender italic">Paweł Królikowski</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg14233.html">Re: The best (fastest) way to delete/clear a buck...</a></span> <span class="sender italic">Dmitri Zagidulin</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg14236.html">Re: The best (fastest) way to delete/clear a ...</a></span> <span class="sender italic">Dmitri Zagidulin</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg14238.html">Re: The best (fastest) way to delete/clea...</a></span> <span class="sender italic">Paweł Królikowski</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg14239.html">Re: The best (fastest) way to delete/...</a></span> <span class="sender italic">Dmitri Zagidulin</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg14240.html">Re: The best (fastest) way to de...</a></span> <span class="sender italic">Paweł Królikowski</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg14241.html">Re: The best (fastest) way t...</a></span> <span class="sender italic">Dmitri Zagidulin</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg14242.html">Re: The best (fastest) w...</a></span> <span class="sender italic">Sean Cribbs</span></li>
<li class="icons-email"><span class="subject"><a href="msg14250.html">Re: The best (fastest) w...</a></span> <span class="sender italic">Paweł Królikowski</span></li>
<li class="icons-email"><span class="subject"><a href="msg14311.html">Re: The best (fastest) w...</a></span> <span class="sender italic">Dave Martorana</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="The best (fastest) way to delete/clear a bucket [python]">
<input type="hidden" name="msgid" value="CAAv3ZKPxDjACyeYbh0Wv5s9Jv6G6sar1w+OWbnpGVAkQ4ejP7g@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg14230.html">
<input type="submit" value=" Paweł Królikowski ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22The+best+%5C%28fastest%5C%29+way+to+delete%5C%2Fclear+a+bucket+%5C%5Bpython%5C%5D%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg14228.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg14233.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CAAv3ZKPxDjACyeYbh0Wv5s9Jv6G6sar1w+OWbnpGVAkQ4ejP7g@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
