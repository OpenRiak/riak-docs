<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: problem with RiakClient streamBucket method</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#02557" id="c">
<link rel="index" href="maillist.html#02557" id="i">
<link rel="prev" href="msg02556.html" id="p">
<link rel="next" href="msg02558.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg02557.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+problem+with+RiakClient+streamBucket+method%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: problem with RiakClient streamBucket method</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Russell+Brown%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Russell Brown</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20110304" rel="nofollow">Fri, 04 Mar 2011 01:17:16 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi Santosh,
On Fri, 2011-03-04 at 12:46 +0530, santhosh venkat wrote:
&gt; Hi , 
&gt;       streamBucket  method of RiakClient throws this exception when i
&gt; tried using it .
&gt; 
&gt; Exception in thread &quot;main&quot; java.lang.NoSuchMethodError:
&gt; org.json.JSONTokener.end()</pre><pre>

&gt; I used it  exactly in the same way as said in github wiki .  
&gt; 
&gt; Later reading the source Code of riak , Later reading the source Code
&gt; of riak , I found that the problem lies in StreamedKeysCollection
&gt; Class of package com.basho.riak.client.response. 

&gt;  while (!tokens.end()) {   // -&gt; Method end() is not defined in
&gt; JSONTokener Class 
&gt;  
&gt;   There is a method named more() defined in JSONTokener Class , I was
&gt; able to successfully retrieve all the keys when i replaced end()
&gt; method with more()  . 
&gt; 
&gt; Please throw some light  if i am using the api's wrongly . 
&gt; 

This looks like a classpath thing. 

Do you have another version of JSON-java on your classpath?

There is an older version of JSON-java available from maven central (eg
json-20090211.jar) in which JSONTokener has the more() method.

The riak-java-client actually bundles a more recent set of JSON-java
classes (from Douglas Crockford's githb repo) with the riak client jar,
this version of JSONTokener has the end() method.

Just to be sure, please can you let me know which version of the
RiakClient you are using? (And just for good measure, Java version?)

Going forward, I'm debating whether to use maven to manage this
dependency, or to stay the way things are. Including the JSON classes in
the jar makes it more standalone, but of course it can lead to exactly
this sort of issue. Opinions appreciated.


&gt; 
&gt; --
&gt; Santhosh  
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt;  
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>



_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg02556.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#02557">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#02557">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg02558.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg02556.html">problem with RiakClient streamBucket method</a></span> <span class="sender italic">santhosh venkat</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: problem with RiakClient streamBucket method</span> <span class="sender italic">Russell Brown</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg02558.html">Re: problem with RiakClient streamBucket method</a></span> <span class="sender italic">santhosh venkat</span></li>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: problem with RiakClient streamBucket method">
<input type="hidden" name="msgid" value="1299230201.2516.35.camel@ubuntu">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg02557.html">
<input type="submit" value=" Russell Brown ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+problem+with+RiakClient+streamBucket+method%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg02556.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg02558.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">1299230201.2516.35.camel@ubuntu</li>
</ul>
</div>
</body>
</html>
