<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Does Java client support querying large amounts of data from	Riak? What is the JSON parse/serialize overhead for such Queries?</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#04910" id="c">
<link rel="index" href="maillist.html#04910" id="i">
<link rel="prev" href="msg04907.html" id="p">
<link rel="next" href="msg04912.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg04910.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Does+Java+client+support+querying+large+amounts+of+data+from%09Riak%5C%3F+What+is+the+JSON+parse%5C%2Fserialize+overhead+for+such+Queries%5C%3F%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Does Java client support querying large amounts of data from	Riak? What is the JSON parse/serialize overhead for such Queries?</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Harshal+Dhir%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Harshal Dhir</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20110928" rel="nofollow">Wed, 28 Sep 2011 11:42:26 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi Ryan,

Thanks for your response.</pre><pre>

To answer your question.

#1: mapreduce will not go thru the entire key list if you feed it a search 
query on input, only the matched objects [Understood, but the java client 
doesnâ€™t have a mapreduce search function. We did a custom implementation of 
this but the response time was still  &quot;very&quot; slow.]
#2: to rule out any funkiness in the java client have you tried the queries via 
curl as well? Have tried this as well, the response is significantly quicker 
than the above mapreduce but still not fast enough.

# of Objects: 10,000+
Backend Used: bitcask
# of nodes: 5
Machine Specs: Amazon EC2 (Large Instance)


Thanks

Harshal Dhir | Technical Architect

solutionset
P: 510-214-3519  Twitter: @harshaldhir
85 Second Street, San Francisco, CA 94105
Twitter: @harshaldhir MSN: hars...@solutionset.com Jabber: 
harshal.d...@gmail.com
www.solutionset.com&lt;<a  rel="nofollow" href="http://www.solutionset.com/">http://www.solutionset.com/</a>&gt;

This message is intended for the addressee(s) only and may contain confidential 
or privileged
information. Any use of this information by persons other than addressee(s) is 
prohibited. If you
have received this message in error, please reply to the sender and delete or 
destroy all copies.

From: Ryan Zezeski &lt;rzeze...@basho.com&lt;<a  rel="nofollow" href="mailto:rzeze...@basho.com">mailto:rzeze...@basho.com</a>&gt;&gt;
Date: Wed, 28 Sep 2011 11:33:56 -0700
To: Harshal Dhir 
&lt;harshal.d...@solutionset.com&lt;<a  rel="nofollow" href="mailto:harshal.d...@solutionset.com">mailto:harshal.d...@solutionset.com</a>&gt;&gt;
Cc: &quot;riak-users@lists.basho.com&lt;<a  rel="nofollow" href="mailto:riak-users@lists.basho.com">mailto:riak-users@lists.basho.com</a>&gt;&quot; 
&lt;riak-users@lists.basho.com&lt;<a  rel="nofollow" href="mailto:riak-users@lists.basho.com">mailto:riak-users@lists.basho.com</a>&gt;&gt;
Subject: Re: Does Java client support querying large amounts of data from Riak? 
What is the JSON parse/serialize overhead for such Queries?

Harshal,

Harshal,

If I understand correctly you are trying to retrieve a set of objects that 
match a given search query?

1: mapreduce will not go thru the entire key list if you feed it a search query 
on input, only the matched objects

2: to rule out any funkiness in the java client have you tried the queries via 
curl as well?

The nominal latency is going to highly depend on many factors including 
network, # of objects matched, backend used, machine specs, # of nodes, # of 
concurrent queries, etc.  My first question would be what is the average result 
set size coming back for these 4 second latencies (i.e. how many objects are 
matched by the query)?


-Ryan

On Wed, Sep 28, 2011 at 2:15 PM, Harshal Dhir 
&lt;harshal.d...@solutionset.com&lt;<a  rel="nofollow" href="mailto:harshal.d...@solutionset.com">mailto:harshal.d...@solutionset.com</a>&gt;&gt; wrote:
Hi,

We currently using riak java client 0.15.0-SNAPSHOT, but there is no better 
interface for RiakSearch at the moment. We are trying to fetch data from a 
bucket with million rows, here is a gist of issues we are facing with different 
approaches:

 *   MapReduce:
    *   Using mapreduce, the data response is just too slow due to the fact 
that this is a O(N) operation of going through the keys list.
 *   Solr Client:
    *   Using Solr Client, we are able to query but the response takes a long 
time about 4seconds to return a nominal result is still slow. [I heard the 
normal response time is approx 200ms]

Is there a way in the current java client to fetch large amount of data in 
nominal time.

What is the recommended approach of saving / retrieving / querying this data in 
the fastest possible way?

Thanks
Harshal


_______________________________________________
riak-users mailing list
riak-users@lists.basho.com&lt;<a  rel="nofollow" href="mailto:riak-users@lists.basho.com">mailto:riak-users@lists.basho.com</a>&gt;
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>


</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg04907.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#04910">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#04910">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg04912.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg04901.html">Does Java client support querying large amounts of data f...</a></span> <span class="sender italic">Harshal Dhir</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg04907.html">Re: Does Java client support querying large amounts ...</a></span> <span class="sender italic">Ryan Zezeski</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Does Java client support querying large amou...</span> <span class="sender italic">Harshal Dhir</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg04912.html">Re: Does Java client support querying large ...</a></span> <span class="sender italic">Jeremiah Peschka</span></li>
<li class="icons-email"><span class="subject"><a href="msg04914.html">Re: Does Java client support querying large ...</a></span> <span class="sender italic">Russell Brown</span></li>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Does Java client support querying large amounts of data from	Riak? What is the JSON parse/serialize overhead for such Queries?">
<input type="hidden" name="msgid" value="CAA8B85B.90EA%harshal.dhir@solutionset.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg04910.html">
<input type="submit" value=" Harshal Dhir ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Does+Java+client+support+querying+large+amounts+of+data+from%09Riak%5C%3F+What+is+the+JSON+parse%5C%2Fserialize+overhead+for+such+Queries%5C%3F%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg04907.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg04912.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CAA8B85B.90EA%harshal.dhir@solutionset.com</li>
</ul>
</div>
</body>
</html>
