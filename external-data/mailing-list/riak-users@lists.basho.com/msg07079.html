<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Link or Secondary Indexes?</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#07079" id="c">
<link rel="index" href="maillist.html#07079" id="i">
<link rel="prev" href="msg07078.html" id="p">
<link rel="next" href="msg07080.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg07079.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Link+or+Secondary+Indexes%5C%3F%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Link or Secondary Indexes?</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Buri+Arslon%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Buri Arslon</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20120329" rel="nofollow">Thu, 29 Mar 2012 08:51:34 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Kresten, Jeffrey: Thanks a lot for enlightenment!

This link was very helpful to understand what to use when.
<a  rel="nofollow" href="http://wiki.basho.com/MapReduce-Search-2i-Comparison.html">http://wiki.basho.com/MapReduce-Search-2i-Comparison.html</a></pre><pre>

The information I obtained pushed me to another question :) .

Q: Is it a good (or at least 'ok') practice to duplicate information in
order to get cheaper/faster queries?

i.e. If a user becomes a member of a group/fanpage I could store that
information both in 'users' and 'groups' bucket. If I want to get the
members of a particular group I query just one value/record in 'groups'
bucket. The only drawback that came to my mind is when you delete that
relationship you have to delete it from two buckets.

Another scenario might be to get last 20 comments by a user. Instead of
searching all posts/comments by author_name, I could just store the post or
comment key in the user object as a secondary index and set some limit,
say, 20 for &lt;&lt;&quot;index&quot;&gt;&gt;, &lt;&lt;&quot;last_posts_bin&quot;&gt;&gt;.

What do you think?

Thanks again,
-- buriwoy



On Thu, Mar 29, 2012 at 8:52 AM, Jeffrey Massung &lt;j...@basho.com&gt; wrote:

&gt; Buriwoy,
&gt;
&gt; Neither is better (or worse) for &quot;storing&quot; those bits of information. The
&gt; question is how you expect to use that data once it is stored. Let's take a
&gt; look at friend relationships (note: I don't use Facebook, so I might be
&gt; missing a subtle feature with this example)...
&gt;
&gt; Do you merely plan on following a list of friends to other pages quickly?
&gt; For example, on your page, you see a list of your friends quickly, be able
&gt; to click them, and go to their page? If so, the links are quite nice. Links
&gt; are nice for being able to follow in a query as well. This is a good
&gt; example of using links to perform link walking:
&gt;
&gt; <a  rel="nofollow" href="http://basho.com/blog/technical/2010/02/24/link-walking-by-example/">http://basho.com/blog/technical/2010/02/24/link-walking-by-example/</a>
&gt;
&gt; Or, do you plan on doing reverse lookups by friends? For example, do you
&gt; want to say &quot;find every who has Tony as a friend&quot; and get a list of users?
&gt; Note: this is not asking who is a friend of Tony (you'd just lookup Tony
&gt; and get his list of friends). In this case 2i works nicely, as do other
&gt; query methods: search, a general MapReduce, etc. But links would be an
&gt; extremely poor choice.
&gt;
&gt; Does this help? This page might also be applicable to your question:
&gt;
&gt; <a  rel="nofollow" href="http://wiki.basho.com/MapReduce-Search-2i-Comparison.html">http://wiki.basho.com/MapReduce-Search-2i-Comparison.html</a>
&gt;
&gt; If you plan on just doing MapReduce queries without 2i, and don't care
&gt; about link walking, then just storing a typical JSON object and not using
&gt; either is perfectly fine as well.
&gt;
&gt; --
&gt; Jeffrey Massung
&gt; Software Engineer
&gt; j...@basho.com
&gt;
&gt; On Mar 29, 2012, at 8:29 AM, Buri Arslon wrote:
&gt;
&gt; Hi,
&gt;
&gt; While developing my pet project few questions came to my mind and I
&gt; decided to consult with you.
&gt;
&gt; Which of them are more effective for recording relationships: Link or
&gt; Secondary Indexes?
&gt;
&gt; 1. Friend relationships: like Facebook friends?
&gt; 2. Followed/follower relationships like in Twitter?
&gt; 3. Member/Club relationship like fanpage in Facebook?
&gt; 4. Like in Facebook?
&gt;
&gt; Thanks,
&gt; -- buriwoy
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;
&gt;
&gt;
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg07078.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#07079">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#07079">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg07080.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg07076.html">Link or Secondary Indexes?</a></span> <span class="sender italic">Buri Arslon</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg07077.html">Re: Link or Secondary Indexes?</a></span> <span class="sender italic">Kresten Krab Thorup</span></li>
<li class="icons-email"><span class="subject"><a href="msg07078.html">Re: Link or Secondary Indexes?</a></span> <span class="sender italic">Jeffrey Massung</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Link or Secondary Indexes?</span> <span class="sender italic">Buri Arslon</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg07080.html">Re: Link or Secondary Indexes?</a></span> <span class="sender italic">Jeremiah Peschka</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg07083.html">Re: Link or Secondary Indexes?</a></span> <span class="sender italic">Buri Arslon</span></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg07082.html">Re: Link or Secondary Indexes?</a></span> <span class="sender italic">Alexander Sicular</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg07084.html">Re: Link or Secondary Indexes?</a></span> <span class="sender italic">Buri Arslon</span></li>
<li class="icons-email"><span class="subject"><a href="msg07085.html">Re: Link or Secondary Indexes?</a></span> <span class="sender italic">Buri Arslon</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Link or Secondary Indexes?">
<input type="hidden" name="msgid" value="CAF9Mn=e9D6XoJwkzBbNwmvRm4c_HxVHbMLnsrtvHTcixgE-y3A@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg07079.html">
<input type="submit" value=" Buri Arslon ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Link+or+Secondary+Indexes%5C%3F%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg07078.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg07080.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CAF9Mn=e9D6XoJwkzBbNwmvRm4c_HxVHbMLnsrtvHTcixgE-y3A@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
