<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Migrating to riak 2.1.4, selecting a specific multi-backend from	the Java Client</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#17583" id="c">
<link rel="index" href="maillist.html#17583" id="i">
<link rel="prev" href="msg17579.html" id="p">
<link rel="next" href="msg17581.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg17583.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Migrating+to+riak+2.1.4%2C+selecting+a+specific+multi%5C-backend+from%09the+Java+Client%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Migrating to riak 2.1.4, selecting a specific multi-backend from	the Java Client</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Henning+Verbeek%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Henning Verbeek</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20160810" rel="nofollow">Wed, 10 Aug 2016 01:39:47 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Good morning Alex,

On Tue, Aug 9, 2016 at 8:47 PM, Alex Moore &lt;amo...@basho.com&gt; wrote:
&gt;&gt;
&gt;&gt; Is this equivalent to specifying a bucket type?
&gt;
&gt;
&gt; Not exactly, that code will set the backend for that bucket, which is in the
&gt; default bucket type.
&gt; If you need to specify a bucket-type, it's just an extra parameter on the
&gt; Namespace ctor:
&gt;
&gt; Namespace ns = new Namespace(bucketType, bucketName);
&gt;
&gt; If you'd like everything in a bucket-type to be on the memory backend, you
&gt; should be able to specify that backend in the bucket type properties when
&gt; creating it with riak-admin. The bucket type'd namespace wont' be available
&gt; to the old Riak nodes though :/</pre><pre>

Thanks. From this I understand that my &quot;old&quot; way (no bucket types)
will continue to work, right? At least for the short while where I
have a mixed bucket.

I still struggle with bucket types. In my mind, it is not ideal to
have to switch to the console (riak-admin) to set application-specific
properties. I'd much prefer if I could set/query/confirm such
properties in the initialisation code of my application; that way it
can't be forgotten. riak-admin is a manual operation and hence
error-prone.

Looking at 
<a  rel="nofollow" href="http://docs.basho.com/riak/kv/2.1.4/using/cluster-operations/bucket-types/">http://docs.basho.com/riak/kv/2.1.4/using/cluster-operations/bucket-types/</a>,
it is not clear to me, if actions get propagated throughout the
cluster, or if it must be repeated on each cluster node. &quot;bucket
properties are gossiped around&quot;, but what about bucket types? Is there
a way to detect what bucket-types exist, what has been activated, and
with what properties?
I find the blue box (&quot;how many buckets can I have&quot;) difficult to
follow. After some time I understand from it: don't modify default
bucket properties, rather define the desired properties in a bucket
type, then use the bucket type when interacting with the bucket.

It is not clear to me, if bucket types can later be associated with
buckets that used the default bucket-type in the past. If bucket-types
are part of the namespace, I guess no. Maybe worth mentioning this in
the migration section?

I'm also looking for documentation, what properties can be set in a bucket type.

&gt;&gt;  How does a cluster behave where some nodes have the multibackend
&gt;&gt; configured (in riak.conf), and others not (because you forgot)?
&gt;&gt; What happens if you configure the multibackend afterwards? Is the
&gt;&gt; bucket with all its data being migrated? Can you detect in which
&gt;&gt; *backend* an object is located?
&gt;
&gt;
&gt; Anything without the multibackend config should automatically save/load to
&gt; whatever the configured (or default) backend is.   If you configure it
&gt; afterwards, the data won't be available b/c it's on a backend it's now not
&gt; configured for.

Thanks, that makes it very clear.

Cheers,
Henning

_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg17579.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#17583">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#17583">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg17581.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg17578.html">Migrating to riak 2.1.4, selecting a specific multi-backen...</a></span> <span class="sender italic">Henning Verbeek</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg17579.html">Re: Migrating to riak 2.1.4, selecting a specific mul...</a></span> <span class="sender italic">Alex Moore</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Migrating to riak 2.1.4, selecting a specific...</span> <span class="sender italic">Henning Verbeek</span></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg17581.html">Re: Migrating to riak 2.1.4, selecting a specific mul...</a></span> <span class="sender italic">Magnus Kessler</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg17582.html">Re: Migrating to riak 2.1.4, selecting a specific...</a></span> <span class="sender italic">Henning Verbeek</span></li>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Migrating to riak 2.1.4, selecting a specific multi-backend from	the Java Client">
<input type="hidden" name="msgid" value="CAOVDbHa5YXMVJTGguzxpEdP3RGZB1HTM_G-SPBSxdSM7m35fDQ@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg17583.html">
<input type="submit" value=" Henning Verbeek ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Migrating+to+riak+2.1.4%2C+selecting+a+specific+multi%5C-backend+from%09the+Java+Client%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg17579.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg17581.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CAOVDbHa5YXMVJTGguzxpEdP3RGZB1HTM_G-SPBSxdSM7m35fDQ@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
