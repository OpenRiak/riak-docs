<!DOCTYPE html>
<html lang="en">
<head>
<title>Unusual crashes in 1.3.1</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="thrd15.html#11311" id="c">
<link rel="index" href="mail15.html#11311" id="i">
<link rel="prev" href="msg11310.html" id="p">
<link rel="next" href="msg11314.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg11311.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Unusual+crashes+in+1.3.1%22&amp;o=newest" rel="nofollow"><span itemprop="name">Unusual crashes in 1.3.1</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Lucas+Cooper%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Lucas Cooper</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20130619" rel="nofollow">Wed, 19 Jun 2013 23:34:25 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hello there! I'm not too sure about mailing lists so hopefully this works.

I've been using Riak recently for a small (~1 req/s and DB size &lt;5GB
(that's the size of the 4 instances on disk)), in-development application
and it's been crashing strangely and frequently it seems.</pre><pre>

Here's my setup:

   - Riak 1.3.1 (I'm using the outputted instances from devrel)
   - Erlang R15B03
   - LevelDB

And the hardware is a VPS from DigitalOcean with 1GB of RAM, 1 CPU core and
a 30GB SSD (quite empty, using EXT4).

I uploaded the crash.log here: <a  rel="nofollow" href="https://gist.github.com/bobobo1618/5819346">https://gist.github.com/bobobo1618/5819346</a>

This happened within ~30 minutes of starting the instance and the
application that interfaces with it (which sends an average 1 POST request
per second, no GETs but can burst ~200 req POST requests (it sends that
many in a burst, it does not sustain that load for any period of time)).
Monitoring the system in htop, there didn't appear to be an overly large
amount of CPU load (maxed at around 80%) and memory seemed to be fine as
well (~500MB left for Riak after Redis and the app servers took their share
(which is limited to 400MB in Redis's case)).

The entire cluster seems to crash, although only nodes 2 and 4 have crash
logs (which match the one uploaded above).

I'm also getting a lot of &quot;port_died,normal&quot; and
&quot;system_memory_high_watermark&quot; in console logs (across all nodes).


Any help would be greatly appreciated!
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg11310.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="thrd15.html#11311">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="mail15.html#11311">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg11314.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">

</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Unusual crashes in 1.3.1">
<input type="hidden" name="msgid" value="CAEQDFU8utDoCdYyEaCCmSGf=_SvkCV+n9T-6xMsWWwtggCT+AQ@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg11311.html">
<input type="submit" value=" Lucas Cooper ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Unusual+crashes+in+1.3.1%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg11310.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg11314.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CAEQDFU8utDoCdYyEaCCmSGf=_SvkCV+n9T-6xMsWWwtggCT+AQ@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
