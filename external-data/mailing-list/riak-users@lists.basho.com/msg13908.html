<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: What happens when a node goes down?</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="thrd2.html#13908" id="c">
<link rel="index" href="mail2.html#13908" id="i">
<link rel="prev" href="msg13905.html" id="p">
<link rel="next" href="msg13907.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg13908.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+What+happens+when+a+node+goes+down%5C%3F%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: What happens when a node goes down?</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Seth+Thomas%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Seth Thomas</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20140324" rel="nofollow">Mon, 24 Mar 2014 10:55:50 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>As immediately as the cluster can detect the node is no longer serving 
requests[1]. There will likely be increased network and IO among the remaining 
nodes as they will be picking up the slack. That said, the data is not 
permanently reshuffled at that point - only such time as it is administratively 
removed. The degree to which you’d see a spike depends on the volume of 
objects, # of physical nodes, and # of partitions/vnodes.</pre><pre>

[1] 
<a  rel="nofollow" href="http://docs.basho.com/riak/latest/theory/concepts/Replication/#Processing-partition-requests">http://docs.basho.com/riak/latest/theory/concepts/Replication/#Processing-partition-requests</a>

On March 24, 2014 at 10:43:36, Jeff Peck (je...@tnrglobal.com) wrote:

Does that happen immediately? I am basically trying to understand: When a 
physical node goes down (let's say it is temporarily restarted, or down for 
even a couple hours due to some sort of failure), will that cause an increase 
in disk and network bandwidth at the moment that it goes down as data is 
re-shuffled across the cluster?

Thanks,
Jeff


On Mar 24, 2014, at 1:38 PM, Seth Thomas &lt;stho...@basho.com&gt; wrote:

Data is redistributed temporarily (indefinitely) until the primary node comes 
back online. So primary ownership of data would not be changed but your keys 
could be living on another physical node if any of the primary replicas were 
down.

So to answer your question directly: Yes (in the narrowest definition)


On March 24, 2014 at 10:34:22, Jeff Peck (je...@tnrglobal.com) wrote:

Thank you. So, does that mean that no redistribution of data would occur unless 
the node is manually removed?

- Jeff


On Mar 24, 2014, at 1:31 PM, Seth Thomas &lt;stho...@basho.com&gt; wrote:

Jeff,

When a node is no longer responding a process called hinted handoff[1] takes 
over and ensure that your N (replication) value is met by allowing other nodes 
to temporarily take responsibility for the vnodes of the downed node. This node 
can return to the cluster and will resume operations for the vnodes it’s 
primarily responsible for or you could remove the node[2] from the cluster 
which would redistribute the primary responsibly among the remaining nodes. I’d 
also give our docs on replication[3] a look for more information.

Seth Thomas

[1] <a  rel="nofollow" href="http://docs.basho.com/riak/latest/theory/concepts/glossary/#Hinted-Handoff">http://docs.basho.com/riak/latest/theory/concepts/glossary/#Hinted-Handoff</a>
[2] 
<a  rel="nofollow" href="http://docs.basho.com/riak/latest/ops/running/nodes/adding-removing/#Removing-a-Node-From-a-Cluster">http://docs.basho.com/riak/latest/ops/running/nodes/adding-removing/#Removing-a-Node-From-a-Cluster</a>
[3] <a  rel="nofollow" href="http://docs.basho.com/riak/latest/theory/concepts/Replication/">http://docs.basho.com/riak/latest/theory/concepts/Replication/</a>


On March 24, 2014 at 9:33:17, Jeff Peck (je...@tnrglobal.com) wrote:

Is there a description of what happens internally when a node goes down? I am 
curious if any there would be any sort of reshuffling or redistribution of data 
in the remaining vnodes? Or would the node simply be unavailable until 
restarted? 

Thanks, 
Jeff 
_______________________________________________ 
riak-users mailing list 
riak-users@lists.basho.com 
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>

</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg13905.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="thrd2.html#13908">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="mail2.html#13908">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg13907.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg13898.html">What happens when a node goes down?</a></span> <span class="sender italic">Jeff Peck</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13902.html">Re: What happens when a node goes down?</a></span> <span class="sender italic">Seth Thomas</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13903.html">Re: What happens when a node goes down?</a></span> <span class="sender italic">Jeff Peck</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13904.html">Re: What happens when a node goes down?</a></span> <span class="sender italic">Seth Thomas</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13905.html">Re: What happens when a node goes down?</a></span> <span class="sender italic">Jeff Peck</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: What happens when a node goes down?</span> <span class="sender italic">Seth Thomas</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13907.html">Re: What happens when a node goes do...</a></span> <span class="sender italic">Jeff Peck</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13909.html">Re: What happens when a node goe...</a></span> <span class="sender italic">Seth Thomas</span></li>
<li class="icons-email"><span class="subject"><a href="msg13910.html">Re: What happens when a node goe...</a></span> <span class="sender italic">Jeff Peck</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: What happens when a node goes down?">
<input type="hidden" name="msgid" value="etPan.5330711b.3d1b58ba.203b@wakizashi.local">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg13908.html">
<input type="submit" value=" Seth Thomas ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+What+happens+when+a+node+goes+down%5C%3F%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg13905.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg13907.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">etPan.5330711b.3d1b58ba.203b@wakizashi.local</li>
</ul>
</div>
</body>
</html>
