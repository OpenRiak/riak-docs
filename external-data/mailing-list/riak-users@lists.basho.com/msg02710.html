<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Multiple disks</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#02710" id="c">
<link rel="index" href="maillist.html#02710" id="i">
<link rel="prev" href="msg02707.html" id="p">
<link rel="next" href="msg02696.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg02710.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Multiple+disks%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Multiple disks</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Jeremiah+Peschka%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Jeremiah Peschka</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20110322" rel="nofollow">Tue, 22 Mar 2011 10:49:38 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>As an aside about RAID 10:

If you have a decent RAID controller, you may get reads that are 2x as fast 
because the controller will read from both stripes at the same time. It's not 
just a redundancy issue: it's also fast. Like a cheetah. On meth.</pre><pre>

RAID 10 will really improve performance if you're doing a lot a map reduce 
queries that iterate across an entire bucket. Not sure if it makes any 
difference, but RAID 10 is the best practice for drive configuration in the 
data warehouse world for that very reason: scans become stupidly fast.
-- 
Jeremiah Peschka
Microsoft SQL Server MVP
MCITP: Database Developer, DBA
On Tuesday, March 22, 2011 at 10:10 AM, Greg Nelson wrote: 
&gt; Thanks for all the responses!
&gt; 
&gt; Regarding RAID 10, I think for now that's out because we can't afford to cut 
&gt; storage capacity in half when we're already using 2-3x for Riak level 
&gt; redundancy. And adding more redundancy at the RAID layer just seems... 
&gt; incorrect.
&gt; 
&gt; Running multiple instances on each box is probably not an option either since 
&gt; -- as Luke pointed out -- we risk storing N replicas of an object on one 
&gt; machine. And given that we're considering something like 12 or even 24 disks 
&gt; per machine, we can't realistically make N larger than that.
&gt; 
&gt; RAID 5 seems like it may be a decent option, as we'd only lose out on the 
&gt; capacity of one drive. e.g., if we had 12 1TB disks per machine we'd get 11TB 
&gt; of capacity per machine. Of course, we need to consider the failure rates 
&gt; with that many disks in RAID 5 and whether that sufficiently addresses the 
&gt; problem of exposing each machine to a higher surface of failure. But again, 
&gt; we can lose a node -- that's what Riak is for! We also need to investigate 
&gt; the write performance of such a setup; that said, even though we have a 
&gt; write-heavy application, we'll probably not be that write-heavy.
&gt; 
&gt; Joseph: your patch looks interesting, as that's exactly what I first thought 
&gt; of. I figured the directories under the main storage dir corresponded to 
&gt; partitions. I'll definitely give your code a looksy. One thing that 
&gt; immediately jumped out at me is: what happens when a disk fails? Does the 
&gt; handoff mechanism really work seamlessly there? Or is the assumption that a 
&gt; failure can only happen at the node layer (rather than subsets of vnodes 
&gt; within a node) baked into the fundamental design of Riak?
&gt; 
&gt; Greg
&gt; On Tuesday, March 22, 2011 at 8:53 AM, Alexander Sicular wrote:
&gt; &gt; Ya, my original message just highlighted the standard 0,1,5 that most 
&gt; &gt; people/hardware should know/be able to support. There are better options 
&gt; &gt; and 10 would be one of them. 
&gt; &gt; 
&gt; &gt; 
&gt; &gt; @siculars on twitter
&gt; &gt; <a  rel="nofollow" href="http://siculars.posterous.com">http://siculars.posterous.com</a>
&gt; &gt; 
&gt; &gt; Sent from my iPhone
&gt; &gt; 
&gt; &gt; On Mar 22, 2011, at 8:43, Ryan Zezeski &lt;rzeze...@gmail.com&gt; wrote:
&gt; &gt; 
&gt; &gt; &gt; 
&gt; &gt; &gt; 
&gt; &gt; &gt; On Tue, Mar 22, 2011 at 10:01 AM, Alexander Sicular &lt;sicul...@gmail.com&gt; 
&gt; &gt; &gt; wrote:
&gt; &gt; &gt; &gt; Save your ops dudes the headache and just use raid 5 and be done with 
&gt; &gt; &gt; &gt; it.
&gt; &gt; &gt; &gt; 
&gt; &gt; &gt; 
&gt; &gt; &gt; Depending on the number of disks available I might even argue running 
&gt; &gt; &gt; software RAID 10 for better throughput and less chance of data loss (as 
&gt; &gt; &gt; long as you can afford to cut your avail storage in half on every 
&gt; &gt; &gt; machine). It's not too hard to setup on modern Linux distros (mdadm); at 
&gt; &gt; &gt; least I was doing it 5 years ago and I'm no sys admin. 
&gt; &gt; &gt; 
&gt; &gt; &gt; -Ryan 
&gt; &gt; _______________________________________________
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com
&gt; &gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt; &gt; 
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt; 
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg02707.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#02710">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#02710">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg02696.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li><ul>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg02695.html">Re: Multiple disks</a></span> <span class="sender italic">Luke Monahan</span></li>
</ul></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg02698.html">Re: Multiple disks</a></span> <span class="sender italic">Joseph Blomstedt</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg02699.html">Re: Multiple disks</a></span> <span class="sender italic">Joseph Blomstedt</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg02702.html">Re: Multiple disks</a></span> <span class="sender italic">Alexander Sicular</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg02704.html">Re: Multiple disks</a></span> <span class="sender italic">Ryan Zezeski</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg02705.html">Re: Multiple disks</a></span> <span class="sender italic">Alexander Sicular</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg02706.html">Re: Multiple disks</a></span> <span class="sender italic">Joseph Blomstedt</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg02708.html">Re: Multiple disks</a></span> <span class="sender italic">Les Mikesell</span></li>
<li class="icons-email"><span class="subject"><a href="msg02709.html">Re: Multiple disks</a></span> <span class="sender italic">Joseph Blomstedt</span></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg02707.html">Re: Multiple disks</a></span> <span class="sender italic">Greg Nelson</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Multiple disks</span> <span class="sender italic">Jeremiah Peschka</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Multiple disks">
<input type="hidden" name="msgid" value="F7E278867AFF431BB3D36621EC1B810E@gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg02710.html">
<input type="submit" value=" Jeremiah Peschka ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Multiple+disks%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg02707.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg02696.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">F7E278867AFF431BB3D36621EC1B810E@gmail.com</li>
</ul>
</div>
</body>
</html>
