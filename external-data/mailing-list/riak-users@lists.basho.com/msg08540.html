<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: missing keys?</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#08540" id="c">
<link rel="index" href="maillist.html#08540" id="i">
<link rel="prev" href="msg08548.html" id="p">
<link rel="next" href="msg08541.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg08540.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+missing+keys%5C%3F%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: missing keys?</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Reid+Draper%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Reid Draper</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20120914" rel="nofollow">Fri, 14 Sep 2012 08:09:08 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Pat,

Adding to what Sean said, Riak also offers some more fine-grained controls 
around when
replicas return 'notfound'. In your case, using `{notfound_ok, false}` and 
`{basic_quorum, false}`
might help as well. You can see them documented more here [1]. Unfortunately 
the Python
client doesn't support these features at the per request level at the moment. 
If you'd like though,
you could simply set them as bucket properties with curl. You'll find examples 
of setting bucket
properties here [2].</pre><pre>

[1] <a  rel="nofollow" href="http://wiki.basho.com/HTTP-Fetch-Object.html">http://wiki.basho.com/HTTP-Fetch-Object.html</a>
[2] <a  rel="nofollow" href="http://wiki.basho.com/HTTP-Set-Bucket-Properties.html">http://wiki.basho.com/HTTP-Set-Bucket-Properties.html</a>

Reid


On Sep 14, 2012, at 10:50 AM, Sean Cribbs &lt;s...@basho.com&gt; wrote:

&gt; Pat,
&gt; 
&gt; Does your test use retries when it gets &quot;not found&quot; responses? You
&gt; might not encounter that small % of missing keys if you retry at least
&gt; once when they are missing. Because of the eventually consistent
&gt; design of Riak, writes you make might not be readable immediately.
&gt; 
&gt; On Fri, Sep 14, 2012 at 10:17 AM, Pat Lynch &lt;plynch1...@hotmail.com&gt; wrote:
&gt;&gt; Hi all,
&gt;&gt; I was just wondering if you could give me some feedback on my usage of RIAK.
&gt;&gt; I'm currently testing a number of datastores and am trying to come up with
&gt;&gt; pros/ cons of each.
&gt;&gt; 
&gt;&gt; I have a variety of tests  (write speed 1 client, write speed 10 clients,
&gt;&gt; read speed 1 client, read speed 10 clients, read while writing, write while
&gt;&gt; reading etc).  The data set is tiny for this phase (10k, 50k, 100k).
&gt;&gt; 
&gt;&gt; I have 3 machines in the cluster (each with 12GB RAM, quadcore CPUs, 500GB
&gt;&gt; drives), each cache setup to use 128MB memory (eleveldb).  Each key is 64
&gt;&gt; bytes.  and each value is 512 bytes.
&gt;&gt; 
&gt;&gt; 
&gt;&gt; The write speed I'm getting is around 260.0440791 per second (using 1
&gt;&gt; client), scaling to 2281.1662 writes per second (using 10 clients).
&gt;&gt; The read speed I'm getting is around 397.2291042 per second (using 1
&gt;&gt; client), scaling to 3316.089445 reads per second (using 10 clients).
&gt;&gt; 
&gt;&gt; One very worrying thing I noticed is that I sometimes miss keys?  i.e. I
&gt;&gt; write 100k keys to disk, then read them all back in and check the value
&gt;&gt; matches expected.  This would only happen for 1 or 2 keys out of 100k, but
&gt;&gt; (1 or 2 keys is enoughâ€¦)
&gt;&gt; 
&gt;&gt; This is using the latest version of RIAK with the python client (python
&gt;&gt; client is running on a 4th machine).
&gt;&gt; 
&gt;&gt; Any help would be greatly appreciated.
&gt;&gt; 
&gt;&gt; thanks,
&gt;&gt; Pat.
&gt;&gt; 
&gt;&gt; _______________________________________________
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;&gt; 
&gt; 
&gt; 
&gt; 
&gt; -- 
&gt; Sean Cribbs &lt;s...@basho.com&gt;
&gt; Software Engineer
&gt; Basho Technologies, Inc.
&gt; <a  rel="nofollow" href="http://basho.com/">http://basho.com/</a>
&gt; 
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>

</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg08548.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#08540">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#08540">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg08541.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg08537.html">missing keys?</a></span> <span class="sender italic">Pat Lynch</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg08538.html">Re: missing keys?</a></span> <span class="sender italic">Sean Cribbs</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg08539.html">RE: missing keys?</a></span> <span class="sender italic">Pat Lynch</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg08542.html">Re: missing keys?</a></span> <span class="sender italic">Ryan Zezeski</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg08543.html">RE: missing keys?</a></span> <span class="sender italic">Pat Lynch</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg08545.html">Re: missing keys?</a></span> <span class="sender italic">Alexander Sicular</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg08546.html">RE: missing keys?</a></span> <span class="sender italic">Pat Lynch</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg08547.html">Re: missing keys?</a></span> <span class="sender italic">Alexander Sicular</span></li>
<li class="icons-email"><span class="subject"><a href="msg08548.html">RE: missing keys?</a></span> <span class="sender italic">Pat Lynch</span></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
<li class="icons-email tSliceCur"><span class="subject">Re: missing keys?</span> <span class="sender italic">Reid Draper</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg08541.html">RE: missing keys?</a></span> <span class="sender italic">Pat Lynch</span></li>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: missing keys?">
<input type="hidden" name="msgid" value="0A1CBF53-93C3-4669-A4D4-BAA527C38F78@gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg08540.html">
<input type="submit" value=" Reid Draper ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+missing+keys%5C%3F%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg08548.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg08541.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">0A1CBF53-93C3-4669-A4D4-BAA527C38F78@gmail.com</li>
</ul>
</div>
</body>
</html>
