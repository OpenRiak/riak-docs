<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Index support in Ripple</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#03648" id="c">
<link rel="index" href="maillist.html#03648" id="i">
<link rel="prev" href="msg03647.html" id="p">
<link rel="next" href="msg03649.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg03648.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Index+support+in+Ripple%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Index support in Ripple</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Jeremiah+Peschka%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Jeremiah Peschka</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20110611" rel="nofollow">Sat, 11 Jun 2011 15:08:09 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>I think that slide is a list of features that need to be implemented. Indexes 
are &quot;coming soon&quot; and will be announced(ish) at OSCON: 
<a  rel="nofollow" href="http://www.oscon.com/oscon2011/public/schedule/detail/19806">http://www.oscon.com/oscon2011/public/schedule/detail/19806</a></pre><pre>

It's possible to roll your own secondary indexes. There are a few good blog 
posts that have been written up recently in the Riak Recap, I want to say that 
Kresten Thorup (sorry if I butchered your name) even wrote a library to do 
build secondary indexes on the fly as objects are saved in Riak. But, in short, 
to roll your own indexes you create an inverted index. On people, indexing by 
last name (with email address as the key) might look like this:

'peschka': ['jeremiah.pesc...@gmail.com']
'smith': ['john.sm...@gmail.com', 'jsmith...@yahoo.com']
...
etc

Then, to follow the index, you'd look up a user in your index bucket, in this 
case it might be called users_by_last_name. Once you've found all of the users 
that match your criteria, you have a list of users to display. If you need to 
search on multiple terms you can either build your own multi-level index or 
else use bitmap comparisons between the keys that are indexed to figure out 
which keys meet your criteria.

Ripple supports properties as keys through key_on. 
<a  rel="nofollow" href="https://github.com/seancribbs/ripple/blob/master/ripple/lib/ripple/document/key.rb#L11">https://github.com/seancribbs/ripple/blob/master/ripple/lib/ripple/document/key.rb#L11</a>
<a  rel="nofollow" href="https://github.com/seancribbs/ripple/blob/master/ripple/spec/ripple/key_spec.rb#L19">https://github.com/seancribbs/ripple/blob/master/ripple/spec/ripple/key_spec.rb#L19</a>

HTH 
--- 
Jeremiah Peschka
Founder, Brent Ozar PLF


On Saturday, June 11, 2011 at 1:55 PM, Thomas Fee wrote:

&gt; Hi all, but mainly directed at Sean Cribbs ...
&gt; 
&gt; From the slides at 
&gt; <a  rel="nofollow" href="http://www.slideshare.net/seancribbs/introducing-riak-and-ripple">http://www.slideshare.net/seancribbs/introducing-riak-and-ripple</a> , slide 
&gt; number 143 in particular, it seems that Ripple already supports indexes, 
&gt; because that item is highlighted on the slide. However, I can't see any 
&gt; mention of it in the documentation, mainly, the list of modules and methods.
&gt; 
&gt; Since Ripple currently doesn't support using a property as a key, I am 
&gt; searching for a way to efficiently work around that. I'm sure this has been 
&gt; dealt with by somebody already.
&gt; 
&gt; Thanks,
&gt; Tom
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com (<a  rel="nofollow" href="mailto:riak-users@lists.basho.com">mailto:riak-users@lists.basho.com</a>)
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>

</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg03647.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#03648">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#03648">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg03649.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg03647.html">Index support in Ripple</a></span> <span class="sender italic">Thomas Fee</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Index support in Ripple</span> <span class="sender italic">Jeremiah Peschka</span></li>
<li class="icons-email"><span class="subject"><a href="msg03649.html">Re: Index support in Ripple</a></span> <span class="sender italic">Sean Cribbs</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg03651.html">Re: Index support in Ripple</a></span> <span class="sender italic">Les Mikesell</span></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg03650.html">Re: Index support in Ripple</a></span> <span class="sender italic">Sean Cribbs</span></li>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Index support in Ripple">
<input type="hidden" name="msgid" value="3FD0AAC24D2646FCA88FDAFA4F72C689@gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg03648.html">
<input type="submit" value=" Jeremiah Peschka ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Index+support+in+Ripple%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg03647.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg03649.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">3FD0AAC24D2646FCA88FDAFA4F72C689@gmail.com</li>
</ul>
</div>
</body>
</html>
