<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Riak packaging for RPM-based distros</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#09776" id="c">
<link rel="index" href="maillist.html#09776" id="i">
<link rel="prev" href="msg09775.html" id="p">
<link rel="next" href="msg09774.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg09776.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Riak+packaging+for+RPM%5C-based+distros%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Riak packaging for RPM-based distros</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Jared+Morrow%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Jared Morrow</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20130109" rel="nofollow">Wed, 09 Jan 2013 14:00:29 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>&gt;
&gt; &gt; Right now if someone has a problem, I can say, &quot;tell me what ./riak
&gt; version says&quot;
&gt; &gt; and know exactly what is running.
&gt;
&gt; Mostly true, but... Most deps in 'rebar.config' files links to HEAD of
&gt; 'master' branch. Seems output of './riak version' is not enough.
&gt; Anyway, when packaging is done right way (no packages was built with
&gt; new code but old version), 'rpm -q $pkgname' (for example) will give
&gt; good start point.</pre><pre>


For releases that's not true.  At RC time all rebar.config files change to
fix each dependency on a tag.  If we don't control the repo (such as
folsom), I fix the tag on an exact commit.  So for each version of Riak
released since about 0.14.2 we can tell you the exact list of commits that
went into each release.  If you download the source tarball at each release
you can get the dependency_manifest.txt file (I added this around 1.0 I
think) it further lists all the tags used for reference.

You can checkout a tag like riak-1.2.0 in basho/riak, do a 'make deps',
then a './rebar list-deps' and you'll see that no repo is a floating commit
or branch.

Thanks,
-Jared



On Wed, Jan 9, 2013 at 1:34 PM, Aleksey Morarash &lt;aleksey.morar...@gmail.com
&gt; wrote:

&gt; 2013/1/9 Jared Morrow &lt;ja...@basho.com&gt;
&gt; &gt; In our case, making a distributed database that people depend on to be
&gt; stable and
&gt; &gt; performant also requires us to control the Erlang VM we use.  In a
&gt; particular case,
&gt; &gt; we've been fighting Erlang scheduler issues in regards to our use of
&gt; NIF's that has
&gt; &gt; changed behavior between versions of Erlang.  Because of this issue, we
&gt; haven't
&gt; &gt; moved forward on using new versions past R15B02 of erlang.  Because we
&gt; are
&gt; &gt; responsible for any problems with Riak, I do not see anytime in the
&gt; future we will
&gt; &gt; give up control of the Erlang we use at the expense of a slightly larger
&gt; rpm / deb / tgz
&gt; &gt; size.  That was just one example, another is the use of HiPE or no HiPE
&gt; where
&gt; &gt; we've found segfaults when using HiPE on SunOS or *BSD due to fixed
&gt; memory buffer sizes.
&gt;
&gt; Hm. I`m familiar with such problems too :)
&gt;
&gt; &gt; Regarding packaging components as separate RPM's.  This is another thing
&gt; that
&gt; &gt; distributions have tried to get us to do, make a riak_core, riak_kv,
&gt; erlang_js, etc.,
&gt; &gt; etc. rpm.  Again, I see no benefit at all to people who use riak.  This
&gt; is a benefit
&gt; &gt; solely to fit into packaging guidelines made by distributions.  When
&gt; testing such a
&gt; &gt; complicated system such as Riak, breaking it up into 30 pieces would
&gt; simply make
&gt; &gt; testing harder and the product less stable.  Unless you are writing a
&gt; riak_core app,
&gt; &gt; who would just *just* want a riak_core RPM anyway?
&gt;
&gt; Agree. Code, related only to Riak we can package in one package.
&gt; Creating package for each Erlang application is not strict dogma.
&gt;
&gt; &gt; Right now if someone has a problem, I can say, &quot;tell me what ./riak
&gt; version says&quot;
&gt; &gt; and know exactly what is running.
&gt;
&gt; Mostly true, but... Most deps in 'rebar.config' files links to HEAD of
&gt; 'master' branch. Seems output of './riak version' is not enough.
&gt; Anyway, when packaging is done right way (no packages was built with
&gt; new code but old version), 'rpm -q $pkgname' (for example) will give
&gt; good start point.
&gt;
&gt; &gt;&gt; - honor filesystem hierarchy of underlying OS.
&gt; &gt; This one I'd like to hear more about.  I've made some changes along the
&gt; way for systems
&gt; &gt; I didn't know as much about at first pass (mainly SunOS flavors), but I
&gt; know for a fact we
&gt; &gt; haven't got everything right.  If you have some examples of where we are
&gt; doing it wrong
&gt; &gt; in regards to our install, please let me know or file a bug at
&gt; <a  rel="nofollow" href="https://github.com/basho/riak">https://github.com/basho/riak</a>
&gt;
&gt; Ok, I will.
&gt;
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg09775.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#09776">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#09776">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg09774.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg09771.html">Riak packaging for RPM-based distros</a></span> <span class="sender italic">Aleksey Morarash</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg09772.html">Re: Riak packaging for RPM-based distros</a></span> <span class="sender italic">Jared Morrow</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg09773.html">Re: Riak packaging for RPM-based distros</a></span> <span class="sender italic">Andrew Thompson</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg09779.html">Re: Riak packaging for RPM-based distros</a></span> <span class="sender italic">Tom Lanyon</span></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg09775.html">Re: Riak packaging for RPM-based distros</a></span> <span class="sender italic">Aleksey Morarash</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Riak packaging for RPM-based distros</span> <span class="sender italic">Jared Morrow</span></li>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Riak packaging for RPM-based distros">
<input type="hidden" name="msgid" value="CACUSOvcjaqOrjeVDcPisXsTfEmx2BQ=7J+Kmz8cEJKH-yYx7DQ@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg09776.html">
<input type="submit" value=" Jared Morrow ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Riak+packaging+for+RPM%5C-based+distros%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg09775.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg09774.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CACUSOvcjaqOrjeVDcPisXsTfEmx2BQ=7J+Kmz8cEJKH-yYx7DQ@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
