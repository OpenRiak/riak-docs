<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Timeout in precommit hook</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#05158" id="c">
<link rel="index" href="maillist.html#05158" id="i">
<link rel="prev" href="msg05156.html" id="p">
<link rel="next" href="msg05162.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg05158.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Timeout+in+precommit+hook%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Timeout in precommit hook</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Sean+Cribbs%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Sean Cribbs</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20111014" rel="nofollow">Fri, 14 Oct 2011 05:23:00 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hal,

I would be interested to see what the format of the object is after it has
passed through your precommit hook.  We recently fixed some bugs related to
the JSON format of riak_objects that might result in an unclean round-trip
through the JavaScript VM. That is, the format coming out is not the same as
went in.</pre><pre>

Could you do the first step (store a new object through your precommit
hook), and then fetch it by attaching to the console?  Here's what you can
do on the console:

1&gt; {ok, C} = riak:local_client().
2&gt; rp(C:get(&lt;&lt;&quot;bucket&quot;&gt;&gt;,&lt;&lt;&quot;key&quot;&gt;&gt;)).

Of course, replace &quot;bucket&quot; and &quot;key&quot; as appropriate for your object.

On Fri, Oct 14, 2011 at 3:57 AM, Hal Eisen &lt;ei...@dunhackin.org&gt; wrote:

&gt; I made progress, thanks to Russell who answered my email the other day.
&gt;
&gt; I've got a simple javascript precommit hook installed and it seems to
&gt; work fine, most of the time.  However, it will randomly timeout.  There
&gt; aren't any interesting messages in any of the logs.  I am able to store
&gt; a key/value pair one minute, but then not be able to store the same pair
&gt; in the next minute.
&gt;
&gt; Where should I be looking to get more info?  Are there any &quot;safe&quot;
&gt; operations, or operations that are discouraged in precommit hooks?
&gt;
&gt; Thanks,
&gt; Hal
&gt;
&gt;
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;



-- 
Sean Cribbs &lt;s...@basho.com&gt;
Developer Advocate
Basho Technologies, Inc.
<a  rel="nofollow" href="http://www.basho.com/">http://www.basho.com/</a>
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg05156.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#05158">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#05158">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg05162.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg05156.html">Timeout in precommit hook</a></span> <span class="sender italic">Hal Eisen</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Timeout in precommit hook</span> <span class="sender italic">Sean Cribbs</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg05162.html">Re: Timeout in precommit hook</a></span> <span class="sender italic">Hal Eisen</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg05163.html">Re: Timeout in precommit hook</a></span> <span class="sender italic">Sean Cribbs</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg05164.html">Re: Timeout in precommit hook</a></span> <span class="sender italic">Hal Eisen</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg05165.html">Re: Timeout in precommit hook</a></span> <span class="sender italic">Sean Cribbs</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg05166.html">Re: Timeout in precommit hook</a></span> <span class="sender italic">Hal Eisen</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Timeout in precommit hook">
<input type="hidden" name="msgid" value="CAHsw=e2=m-RPt9grpo+PLfiHrpSantLov7bR0mXRZszaZ6Fdew@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg05158.html">
<input type="submit" value=" Sean Cribbs ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Timeout+in+precommit+hook%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg05156.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg05162.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CAHsw=e2=m-RPt9grpo+PLfiHrpSantLov7bR0mXRZszaZ6Fdew@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
