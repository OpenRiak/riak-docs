<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: new to riak, unsure of data model for comment system</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#01191" id="c">
<link rel="index" href="maillist.html#01191" id="i">
<link rel="prev" href="msg01182.html" id="p">
<link rel="next" href="msg01184.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg01191.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+new+to+riak%2C+unsure+of+data+model+for+comment+system%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: new to riak, unsure of data model for comment system</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Dan+Reverri%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Dan Reverri</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20101004" rel="nofollow">Mon, 04 Oct 2010 16:58:01 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi Zak,

I believe the practical limits you are referring to occur when you have
around 1000 links on an object. Also note, these limitations only apply to
the REST API.</pre><pre>

Regarding the linked list idea, this would be difficult to implement since
there is no way to serialize your writes. If multiple comments are added to
an object the tail of the list may updated with several links concurrently.

Another method for storing a large number of links is to keep a list of
related keys in a separate object. The related keys would be stored as the
objects value rather than using headers. This method would require you to
write a custom map/reduce function to parse out the links and &quot;walk&quot; to the
related items. This method would only avoid the header issue seen in the
REST API. You would still have to collect all linked items and truncate to
20 in a reduce phase to emulate a &quot;LIMIT&quot; query.


Daniel Reverri
Developer Advocate
Basho Technologies, Inc.
d...@basho.com


On Sun, Oct 3, 2010 at 7:04 PM, Zak Fenton &lt;zak.fen...@gmail.com&gt; wrote:

&gt; Hi. I've recently been using Riak to prototype a website. The data model
&gt; for media objects and articles is a no-brainer, but I'm wondering about
&gt; the best way to implement a comment system.
&gt;
&gt; This is my current plan:
&gt; Media objects/articles are in the media or article buckets. Each such
&gt; object can have any number of links to comments (the tag for these links
&gt; is unimportant - does a link actually *need* a tag?). Comments go in the
&gt; comments bucket, so to retrieve all comments for an object is a simple
&gt; link walk of all links to that bucket.
&gt;
&gt; I read that there is no &quot;artificial&quot; limit on the number of links, but
&gt; am I likely to run into practical limits if an object has hundreds of
&gt; comments? Would I be better off having each object link only to the
&gt; latest comment, and store comments in a linked list? The usual request
&gt; for comments is something like &quot;give me the last 20 comments for object
&gt; Foo&quot;, so is there a more effective way of doing this than requesting all
&gt; comments at a time (and probably cacheing the last 20 in the frontend or
&gt; in a single Riak object)?
&gt;
&gt;
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg01182.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#01191">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#01191">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg01184.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg01182.html">new to riak, unsure of data model for comment system</a></span> <span class="sender italic">Zak Fenton</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: new to riak, unsure of data model for comment system</span> <span class="sender italic">Dan Reverri</span></li>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: new to riak, unsure of data model for comment system">
<input type="hidden" name="msgid" value="AANLkTikZPpvAush7fBU_zfQkWr7kJ2SNORhKe7qM7-Kw@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg01191.html">
<input type="submit" value=" Dan Reverri ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+new+to+riak%2C+unsure+of+data+model+for+comment+system%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg01182.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg01184.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">AANLkTikZPpvAush7fBU_zfQkWr7kJ2SNORhKe7qM7-Kw@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
