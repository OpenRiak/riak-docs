<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: best practices on data storage?</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#04106" id="c">
<link rel="index" href="maillist.html#04106" id="i">
<link rel="prev" href="msg04105.html" id="p">
<link rel="next" href="msg04110.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg04106.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+best+practices+on+data+storage%5C%3F%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: best practices on data storage?</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Antonio+Rohman+Fernandez%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Antonio Rohman Fernandez</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20110728" rel="nofollow">Thu, 28 Jul 2011 00:10:22 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>  

thanks for the info. </pre><pre>

Rohman 

On Thu, 28 Jul 2011 00:05:06 -0700,
Aphyr wrote: 

&gt; Same deal, re conflict resolution. Personally, I'd
store associations in 
&gt; the body; you don't save *that* much
serialization cost, and links are 
&gt; limited to a thousand or so
records.
&gt; 
&gt; --Kyle
&gt; 
&gt; On 07/28/2011 12:04 AM, Antonio Rohman
Fernandez wrote:
&gt; 
&gt;&gt; what about the use of Links? Rohman On Wed, 27
Jul 2011 23:54:34 -0700, Aphyr wrote: 
&gt;&gt; 
&gt;&gt;&gt; If you don't delete the
associated records, you can use allow_mult to handle concurrent writes.
If you do need to delete them consistently, you can use a statebox model
to handle it within certain size bounds. --Kyle On 07/27/2011 11:47 PM,
Antonio Rohman Fernandez wrote: 
&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; I also thought on that... but
then the &quot;User&quot; object could become really big... imagine i post 10
statuses every day and thousands of friends comments all the time on
them... also... wouldn't be troublesome to update the &quot;User&quot; object when
&quot;friends&quot; comments on statuses? as you should have to retrieve the data
to insert the new comment nested and if several friends comment at the
same times i see data getting lost in the way... or i'm missing
something? thanks Rohman On Wed, 27 Jul 2011 23:40:30 -0700, Sylvain
Niles wrote: 
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt; Hi Rohman, the conversation yesterday got us
to thinking and Basho confirmed that buckets are a form of key prefix.
So no matter how small the bucket it will traverse the whole key space
for a map reduce. We sat down and did some thinking of how to work our
data differently as we have a similar use case to you and decided on
nested docs using Ripple. In our case we had special buckets for each
user like you describe below. Now that bucket is a nested JSON struct
inside the user object instead of a separate bucket. In your use case
you could have all statuses as a nested struct on your user object and
display would be a matter of linkwalking all an user's friends and
parsing status content with some time/sorting. On Wed, Jul 27, 2011 at
11:26 PM, Antonio Rohman Fernandez roh...@mahalostudio.com [2]&gt;&gt; wrote:
Yesterday, somebody suggested that not for having the data distributed
on smaller buckets, Riak's MapReduce operations would be faster... while
nobody at Basho confirmed that yet, i'm now wondering which is the best
way for storing data... lets imagine this simple excercise: 1. We have
entities users, friends, statuses and comments in a web app 2. Users can
make friends with other users 3. Users can post statuses 4. Friends (
Users ) can comment on user's statuses At first i thought on having a
bucket called &quot;users&quot; with all users and then for friend linkage i was
thinking on having personal buckets like &quot;rohman_friends&quot;,
&quot;fyodor_friends&quot;, etc... with the keys to the users instead of a big
&quot;friends&quot; bucket for easy querying... but seems i'm wrong... so... How
would you distribute the data on buckets? and how would you run
MapReduce jobs? Would you use a support SQL database to store
relationship between keys? is possible on an only Riak environment?
thanks Rohman line logo *Antonio Rohman Fernandez* CEO, Founder &amp; Lead
Engineer roh...@mahalostudio.com [4] roh...@mahalostudio.com&gt;
roh...@mahalostudio.com [5]&gt; *Projects* MaruBatsu.es PupCloud.com
Wedding Album line _______________________________________________
riak-users mailing list riak-users@lists.basho.com [9]
riak-users@lists.basho.com&gt; riak-users@lists.basho.com [10]&gt;
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
[11]
&gt;&gt;&gt;&gt; -- line logo *Antonio Rohman Fernandez* CEO, Founder &amp; Lead
Engineer roh...@mahalostudio.com [13] roh...@mahalostudio.com&gt;
roh...@mahalostudio.com [14]&gt; *Projects* MaruBatsu.es PupCloud.com
Wedding Album line _______________________________________________
riak-users mailing list riak-users@lists.basho.com [18]
riak-users@lists.basho.com&gt;
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
[19]
&gt;&gt; -- line logo *Antonio Rohman Fernandez* CEO, Founder &amp; Lead
Engineer roh...@mahalostudio.com [21] roh...@mahalostudio.com&gt;
*Projects* MaruBatsu.es PupCloud.com Wedding Album line

-- 

                 [25]


ANTONIO ROHMAN FERNANDEZ
CEO, Founder &amp; Lead
Engineer
roh...@mahalostudio.com [26]             
 PROJECTS
MaruBatsu.es
[27]
PupCloud.com [28]
Wedding Album [29] 

   

Links:
------
[1]
<a  rel="nofollow" href="mailto:roh...@mahalostudio.com">mailto:roh...@mahalostudio.com</a>
[2] <a  rel="nofollow" href="mailto:roh...@mahalostudio.com">mailto:roh...@mahalostudio.com</a>
[3]
<a  rel="nofollow" href="http://mahalostudio.com">http://mahalostudio.com</a>
[4] <a  rel="nofollow" href="mailto:roh...@mahalostudio.com">mailto:roh...@mahalostudio.com</a>
[5]
<a  rel="nofollow" href="mailto:roh...@mahalostudio.com">mailto:roh...@mahalostudio.com</a>
[6] <a  rel="nofollow" href="http://marubatsu.es">http://marubatsu.es</a>
[7]
<a  rel="nofollow" href="http://pupcloud.com">http://pupcloud.com</a>
[8] <a  rel="nofollow" href="http://wedding.mahalostudio.com">http://wedding.mahalostudio.com</a>
[9]
<a  rel="nofollow" href="mailto:riak-users@lists.basho.com">mailto:riak-users@lists.basho.com</a>
[10]
<a  rel="nofollow" href="mailto:riak-users@lists.basho.com">mailto:riak-users@lists.basho.com</a>
[11]
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
[12]
<a  rel="nofollow" href="http://mahalostudio.com">http://mahalostudio.com</a>
[13] <a  rel="nofollow" href="mailto:roh...@mahalostudio.com">mailto:roh...@mahalostudio.com</a>
[14]
<a  rel="nofollow" href="mailto:roh...@mahalostudio.com">mailto:roh...@mahalostudio.com</a>
[15] <a  rel="nofollow" href="http://marubatsu.es">http://marubatsu.es</a>
[16]
<a  rel="nofollow" href="http://pupcloud.com">http://pupcloud.com</a>
[17] <a  rel="nofollow" href="http://wedding.mahalostudio.com">http://wedding.mahalostudio.com</a>
[18]
<a  rel="nofollow" href="mailto:riak-users@lists.basho.com">mailto:riak-users@lists.basho.com</a>
[19]
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
[20]
<a  rel="nofollow" href="http://mahalostudio.com">http://mahalostudio.com</a>
[21] <a  rel="nofollow" href="mailto:roh...@mahalostudio.com">mailto:roh...@mahalostudio.com</a>
[22]
<a  rel="nofollow" href="http://marubatsu.es">http://marubatsu.es</a>
[23] <a  rel="nofollow" href="http://pupcloud.com">http://pupcloud.com</a>
[24]
<a  rel="nofollow" href="http://wedding.mahalostudio.com">http://wedding.mahalostudio.com</a>
[25] <a  rel="nofollow" href="http://mahalostudio.com">http://mahalostudio.com</a>
[26]
<a  rel="nofollow" href="mailto:roh...@mahalostudio.com">mailto:roh...@mahalostudio.com</a>
[27] <a  rel="nofollow" href="http://marubatsu.es">http://marubatsu.es</a>
[28]
<a  rel="nofollow" href="http://pupcloud.com">http://pupcloud.com</a>
[29] <a  rel="nofollow" href="http://wedding.mahalostudio.com">http://wedding.mahalostudio.com</a>
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg04105.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#04106">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#04106">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg04110.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg04102.html">best practices on data storage?</a></span> <span class="sender italic">Antonio Rohman Fernandez</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg04103.html">Re: best practices on data storage?</a></span> <span class="sender italic">Sylvain Niles</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg04104.html">Re: best practices on data storage?</a></span> <span class="sender italic">Antonio Rohman Fernandez</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg04105.html">Re: best practices on data storage?</a></span> <span class="sender italic">Antonio Rohman Fernandez</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: best practices on data stora...</span> <span class="sender italic">Antonio Rohman Fernandez</span></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg04110.html">Re: best practices on data storage?</a></span> <span class="sender italic">Jonathan Langevin</span></li>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: best practices on data storage?">
<input type="hidden" name="msgid" value="c678f03229596d41566389d554a2d994@mahalostudio.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg04106.html">
<input type="submit" value=" Antonio Rohman Fernandez ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+best+practices+on+data+storage%5C%3F%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg04105.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg04110.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">c678f03229596d41566389d554a2d994@mahalostudio.com</li>
</ul>
</div>
</body>
</html>
