<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Riak and Distributed Image Processing</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#05459" id="c">
<link rel="index" href="maillist.html#05459" id="i">
<link rel="prev" href="msg05458.html" id="p">
<link rel="next" href="msg05461.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg05459.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Riak+and+Distributed+Image+Processing%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Riak and Distributed Image Processing</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Alexander+Sicular%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Alexander Sicular</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20111107" rel="nofollow">Mon, 07 Nov 2011 13:56:58 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Great project, Andrew. It's not a dumb idea, sounds pretty awesome actually. I 
just don't think Riak will get you there.</pre><pre>

As I see it, the basic outline looks something like:

fetch one image &gt; fetch another image &gt; mutate &gt; write output

I just don't see how Riak's implementation of map reduce allows you to iterate 
over a collection of images accessed by key and then mutate over some other 
image. That said, Riak would work well as the distributed, replicated image 
repository. The main advantage would be computation would be done where the 
data resides. You could write some erlang-fu mod that shelled the image out to 
some matlab/scipy/opencl process and then wrote output directly back to riak or 
put output in some watched dir that made it back to riak some other way. Many 
nodes with many cores would help. But in reality disk i/o is often the slowest 
link in any moderately complex chain. Shipping 20MB images over the wire in a 
GigE network is not really a big deal.

Further, image to image manipulation becomes some order of O(n2) complexity 
which almost guarantees that you will never complete your compute task if 
either your calibration or observation set grow at any meaningful rate. I don't 
have experience in the image manipulation space but I do have some experience 
in the data similarity/comparison space which in this instance is more or less 
the same. You have two pieces of data that you need to run some sort of 
algorithm against to determine (dis)similarity. It is usually the case that 
direct comparison is not used in such cases if only for regards to computation 
time. Then again, if your set size is static disregard everything I just said, 
do direct comparisons and compute your execution time on the back of a napkin.

Meh, that's my feeble stab at it.

Let us know what you eventually decide on!

Cheers,

-Alexander Sicular

@siculars
<a  rel="nofollow" href="http://siculars.posterous.com">http://siculars.posterous.com</a>

On Nov 7, 2011, at 4:23 PM, andrew cooke wrote:

&gt; 
&gt; Hi,
&gt; 
&gt; Apologies if this is a dumb idea, or I am asking in the wrong place.  I'm
&gt; muddling around trying to understand various bits of technology while piecing
&gt; together a possible project.  So feel free to tell me I'm wrong :o)
&gt; 
&gt; I am considering how best to design a system that processes data from
&gt; telescopes.  A typical &quot;step&quot; in the processing might involve combining a
&gt; small number of calibration images with a (possibly large) set of observation
&gt; images in some way and then adding the result.  To do this in a distributed
&gt; manner you would have the observations on various machines, broadcast the
&gt; calibrations, then do a map (the per-observation processing) followed by a
&gt; reduce (the summing).
&gt; 
&gt; So, in very vague terms, this fits roughly into map-reduce territory.  What I
&gt; am doing now is seeing how the details work out with various &quot;nosql&quot; systems.
&gt; 
&gt; So my basic question is: how would the above fit with Riak?  Alternatively,
&gt; what else should I consider?
&gt; 
&gt; Some more details and speculation:
&gt; 
&gt; - A typical image might contain 10 million 16 bit values, so is of around
&gt;   20MB in size (and will get bigger as technology improves).
&gt; 
&gt; - A typical process could involve anything from 1 to hundreds of images.
&gt; 
&gt; - I have no problem with using Erlang for high level code, but would expect
&gt;   to delegate image processing to C, Fortran, or OpenCL (if GPUs were
&gt;   available on nodes; I know an OpenCL package exists for Erlang).
&gt; 
&gt; - Integration with numerical Python or IDL or Matlab or similar would be an
&gt;   unexpected plus.
&gt; 
&gt; - I imagine (but have done no tests so have no real idea how much time would
&gt;   be spent in number-crunching, compared to data movement) that for
&gt;   efficiency it might (sometimes) be best to have mutable, memory mapped
&gt;   access to the images in a map-reduce &quot;task&quot;.
&gt; 
&gt; - But exactly when processes would mutate image data, and when they would
&gt;   create new images, is not yet clear.
&gt; 
&gt; - If images awere immutable then you could consider the data processing as a
&gt;   directed graph of images.  Re-processing with modified parameters (a common
&gt;   occurence as the astronomer &quot;tweaks&quot; the reduction) might re-use some
&gt;   points in the graph to avoid duplicating previous work.  Some kind of
&gt;   &quot;garbage collection&quot; could then be required to delete older images.
&gt; 
&gt; - Some processing will require combining images on different nodes.
&gt; 
&gt; - Something must preserve a history of the processing required to generate
&gt;   each image.  I assume this would be managed by the high-level code, but
&gt;   it's possible &quot;data provenance&quot; is already available in Riak, or supported
&gt;   by some library?
&gt; 
&gt; - Most tasks would be expressed in terms of kernel operations (eg add two
&gt;   images) taken from some library, but astronomers may want to add completely
&gt;   new code.
&gt; 
&gt; If you've read this far I'd love to hear of any thoughts that pop into your
&gt; head in response to the above.  Possible problems?  Technical details of Riak
&gt; that might help?  Similar projects?
&gt; 
&gt; Thanks,
&gt; Andrew
&gt; 
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>

</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg05458.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#05459">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#05459">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg05461.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg05458.html">Riak and Distributed Image Processing</a></span> <span class="sender italic">andrew cooke</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Riak and Distributed Image Processing</span> <span class="sender italic">Alexander Sicular</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg05461.html">Re: Riak and Distributed Image Processing</a></span> <span class="sender italic">andrew cooke</span></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg05460.html">Re: Riak and Distributed Image Processing</a></span> <span class="sender italic">Nate Lawson</span></li>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Riak and Distributed Image Processing">
<input type="hidden" name="msgid" value="21716D4B-126F-4B7E-AE97-E34EB64F299E@gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg05459.html">
<input type="submit" value=" Alexander Sicular ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Riak+and+Distributed+Image+Processing%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg05458.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg05461.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">21716D4B-126F-4B7E-AE97-E34EB64F299E@gmail.com</li>
</ul>
</div>
</body>
</html>
