<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Search index partitioning in Riak-KV</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#18231" id="c">
<link rel="index" href="maillist.html#18231" id="i">
<link rel="prev" href="msg18226.html" id="p">
<link rel="next" href="msg18227.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg18231.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Search+index+partitioning+in+Riak%5C-KV%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Search index partitioning in Riak-KV</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Denis%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Denis</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20170522" rel="nofollow">Mon, 22 May 2017 07:45:50 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hello Fred

Thank you very much for your explanation. I'm trying to understand how this
scheme can work, but need some time... Let me come back to you after some
time.
Also you're referring to Ryan Zezeski slides, but i can't find it. Could
you please share me link if you have it? Thank you.</pre><pre>


2017-05-19 19:00 GMT+03:00 &lt;riak-users-requ...@lists.basho.com&gt;:

&gt; Message: 5
&gt; Date: Fri, 19 May 2017 09:35:11 -0400
&gt; From: Fred Dushin &lt;f...@dushin.net&gt;
&gt; To: riak-users &lt;riak-users@lists.basho.com&gt;
&gt; Subject: Re: Search index partitioning in Riak-KV
&gt; Message-ID: &lt;9507f1b1-9b19-4c2b-948e-cd55a1f74...@dushin.net&gt;
&gt; Content-Type: text/plain; charset=&quot;us-ascii&quot;
&gt;
&gt; There is a Solr instance per Riak node, and each Solr instance contains a
&gt; Solr core for the Riak index created.  Every replica of a Riak k/v pair has
&gt; a corresponding document in the Solr instance on the same node as the vnode
&gt; that stores the replica (in fact for each sibling, if your objects admit
&gt; siblings).  Each document in Solr contains not only the bucket and key as
&gt; indexed fields, but also the Riak partition (well, the partition ordinal,
&gt; actually).  All of these fields are indexed, IIRC.
&gt;
&gt; When a query executed through Riak, a coverage plan is used to generate a
&gt; filter query (based on the node and partition in the cover set) that is
&gt; used with shard parameters on the local Solr instance in which the query
&gt; was executed.  So technically every query is using (legacy) Solr
&gt; distributed query; it's just that all the shard parameters and Solr
&gt; deployment topology is hidden from the user and done internally by Riak.
&gt; It's really quite elegant and clever (IMO), but it can run into scaling
&gt; issues, as Solr/Lucene is quite a bit more demanding than Riak, in some
&gt; real-world use-cases.
&gt;
&gt; I made an attempt to explain how a lot of how this works at
&gt; <a  rel="nofollow" href="https://www.youtube.com/watch?v=e1yVJqRuLSg">https://www.youtube.com/watch?v=e1yVJqRuLSg</a> &lt;<a  rel="nofollow" href="https://www.youtube.com/">https://www.youtube.com/</a>
&gt; watch?v=e1yVJqRuLSg&gt;
&gt;
&gt; There are far better presentations on the topic by Ryan Zezeski and other
&gt; pioneers who did the initial implementation.
&gt;
&gt; -Fred
&gt;
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg18226.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#18231">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#18231">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg18227.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg18225.html">Search index partitioning in Riak-KV</a></span> <span class="sender italic">Denis</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg18226.html">Re: Search index partitioning in Riak-KV</a></span> <span class="sender italic">Fred Dushin</span></li>
<li class="icons-email tSliceCur"><span class="subject">Re: Search index partitioning in Riak-KV</span> <span class="sender italic">Denis</span></li>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Search index partitioning in Riak-KV">
<input type="hidden" name="msgid" value="CAAXGCMM2su9O0wqA7wqdn+NWLELVsX7jskHPYCoGsLb4Gp8W5w@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg18231.html">
<input type="submit" value=" Denis ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Search+index+partitioning+in+Riak%5C-KV%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg18226.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg18227.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CAAXGCMM2su9O0wqA7wqdn+NWLELVsX7jskHPYCoGsLb4Gp8W5w@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
