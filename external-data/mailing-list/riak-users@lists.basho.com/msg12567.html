<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Unable to configure Riak-CS-Control to manage users</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="thrd8.html#12567" id="c">
<link rel="index" href="mail9.html#12567" id="i">
<link rel="prev" href="msg12566.html" id="p">
<link rel="next" href="msg12568.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg12567.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Unable+to+configure+Riak%5C-CS%5C-Control+to+manage+users%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Unable to configure Riak-CS-Control to manage users</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Dmitri+Zagidulin%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Dmitri Zagidulin</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20131009" rel="nofollow">Wed, 09 Oct 2013 08:04:47 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Thanks Siddhu,
Couple more questions.

1) Can you include a couple more sections from the Riak CS config
(specifically, the anonymous_user_creation section and the admin_key).</pre><pre>

2) Just to double-check, can you re-include the Riak CS Control config?
(the whole riak_cs_control section).

3) Describe again exactly which parts are working and which aren't. What do
you see when you open the Riak CS Control web interface? (And which
commands are working with s3cmd?)



On Wed, Oct 9, 2013 at 10:50 AM, Siddhu Warrier (siwarrie) &lt;
siwar...@cisco.com&gt; wrote:

&gt;  Hi Dimitri,
&gt;
&gt;  Thank you for your email. I just tried this. I still have the same
&gt; problem, except that I no longer get 403 errors in my Riak CS error log (as
&gt; a matter of fact, I get nothing at all in my Riak CS, Riak CS Control,
&gt; Stanchion, and Riak error logs).
&gt;
&gt;  I've put the basic config section of my riak-cs/app.config here for your
&gt; reference.
&gt;
&gt;                 %% Riak CS http/https port and IP address to listen at
&gt;                %% for object storage activity
&gt;                {cs_ip, &quot;10.0.1.202&quot;},
&gt;                {cs_port, 8080 } ,
&gt;
&gt;                 %% Riak node to which Riak CS accesses
&gt;                {riak_ip, &quot;10.0.1.202&quot;},
&gt;                {riak_pb_port, 8087 } ,
&gt;
&gt;                 %% Configuration for access to request
&gt;                %% serialization service
&gt;                {stanchion_ip, &quot;10.0.1.202&quot;},
&gt;                {stanchion_port, 8085 },
&gt;                {stanchion_ssl, false },
&gt;
&gt;  Thanks,
&gt;
&gt;  Siddhu
&gt;
&gt;   From: Dmitri Zagidulin &lt;dzagidu...@basho.com&gt;
&gt; Date: Wednesday, 9 October 2013 15:38
&gt; To: Siddhu Warrier &lt;siwar...@cisco.com&gt;
&gt; Cc: &quot;riak-users@lists.basho.com&quot; &lt;riak-users@lists.basho.com&gt;
&gt; Subject: Re: Unable to configure Riak-CS-Control to manage users
&gt;
&gt;   (Just to be extra clear, that's meant to be a comma at the end of that
&gt; directive, not a period. Also, don't forget to restart Riak CS Control,
&gt; after changing the proxy host).
&gt;
&gt;
&gt; On Wed, Oct 9, 2013 at 10:36 AM, Dmitri Zagidulin &lt;dzagidu...@basho.com&gt;wrote:
&gt;
&gt;&gt;  Hi Siddhu,
&gt;&gt;
&gt;&gt;  Can you try changing 'cs_proxy_host' to localhost? So:
&gt;&gt;
&gt;&gt;  {cs_proxy_host, &quot;127.0.0.1&quot; }.
&gt;&gt;
&gt;&gt;  and retry.
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;  On Wed, Oct 9, 2013 at 9:55 AM, Siddhu Warrier (siwarrie) &lt;
&gt;&gt; siwar...@cisco.com&gt; wrote:
&gt;&gt;
&gt;&gt;&gt;   Hi,
&gt;&gt;&gt;
&gt;&gt;&gt;  I have a two node Riak CS (1.4) cluster set up on two nodes (node-1
&gt;&gt;&gt; and node-2 henceforth). Node-1 is the headnode. Both node-1 and node-2 are
&gt;&gt;&gt; running CentOS-6.4.
&gt;&gt;&gt;
&gt;&gt;&gt;  *N**ode-1*
&gt;&gt;&gt;
&gt;&gt;&gt;    - Riak 1.4.2
&gt;&gt;&gt;    - Stanchion 1.4.1
&gt;&gt;&gt;    - Riak-CS 1.4.1
&gt;&gt;&gt;    - Riak-CS-Control 1.0.2
&gt;&gt;&gt;
&gt;&gt;&gt; *N**ode-2*
&gt;&gt;&gt;
&gt;&gt;&gt;    - Riak 1.4.2
&gt;&gt;&gt;    - Riak-CS 1.4.1
&gt;&gt;&gt;
&gt;&gt;&gt; I have got Riak CS working, and have created admin credentials that I've
&gt;&gt;&gt; set correctly on stanchion, riak-cs, and riak-cs-control on node 1, and on
&gt;&gt;&gt; riak-cs on node 2. I am able to use the admin credentials to perform
&gt;&gt;&gt; operations on the bucket using s3cmd.
&gt;&gt;&gt;
&gt;&gt;&gt;  However, when I try to list riak-cs users using the riak-cs-control, I
&gt;&gt;&gt; get no results. The error that comes up in /var/log/riak-cs.log is:
&gt;&gt;&gt;
&gt;&gt;&gt; 10.0.1.202 - - [09/Oct/2013:13:09:31 +0000] &quot;GET /buckets/users/objects 
&gt;&gt;&gt; HTTP/1.1&quot; 403 160 &quot;&quot; &quot;&quot;
&gt;&gt;&gt;
&gt;&gt;&gt;  I also receive a 403 when I try to create an admin user.
&gt;&gt;&gt;
&gt;&gt;&gt;  I saw <a  rel="nofollow" href="https://github.com/basho/riak_cs_control/issues/31">https://github.com/basho/riak_cs_control/issues/31</a> and set my
&gt;&gt;&gt; /etc/riak-cs-control/app.config file up to use the cs_proxy_host parameter
&gt;&gt;&gt; as well, though I'm not using proxies, but to no avail. I have reproduced
&gt;&gt;&gt; the relevant section of my riak-cs-control/app.config here:
&gt;&gt;&gt;      {riak_cs_control, [
&gt;&gt;&gt;        %% What port to run the application on.
&gt;&gt;&gt;        {port, 8000 },
&gt;&gt;&gt;
&gt;&gt;&gt;         %% Instance of Riak CS you wish to talk to.
&gt;&gt;&gt;        {cs_hostname, &quot;10.0.1.202&quot; },
&gt;&gt;&gt;        {cs_port, 8080 },
&gt;&gt;&gt;        {cs_protocol, &quot;http&quot; },
&gt;&gt;&gt;
&gt;&gt;&gt;         %% Proxy information; necessary if you are using
&gt;&gt;&gt; s3.amazonaws.com as
&gt;&gt;&gt;        %% your hostname.
&gt;&gt;&gt;        {cs_proxy_host, &quot;10.0.1.202&quot; },
&gt;&gt;&gt;        {cs_proxy_port, 8080 },
&gt;&gt;&gt;
&gt;&gt;&gt;         %% Credentials you want the application to run as.
&gt;&gt;&gt;        {cs_admin_key, &quot;5VI-NIFLNIHKRNGKPBVX&quot; },
&gt;&gt;&gt;        {cs_admin_secret, &quot;xxxxxxx&quot; },
&gt;&gt;&gt;
&gt;&gt;&gt;         %% Specify the bucket name for administration options.
&gt;&gt;&gt;        {cs_administration_bucket, &quot;riak-cs&quot; }
&gt;&gt;&gt;     ]},
&gt;&gt;&gt;
&gt;&gt;&gt;  Is there something I am missing/doing wrong?
&gt;&gt;&gt;
&gt;&gt;&gt;  Thanks,
&gt;&gt;&gt;
&gt;&gt;&gt;  Siddhu
&gt;&gt;&gt;
&gt;&gt;&gt;  _______________________________________________
&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;
&gt;
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg12566.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="thrd8.html#12567">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="mail9.html#12567">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg12568.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg12561.html">Unable to configure Riak-CS-Control to manage us...</a></span> <span class="sender italic">Siddhu Warrier (siwarrie)</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg12565.html">Re: Unable to configure Riak-CS-Control to ...</a></span> <span class="sender italic">Dmitri Zagidulin</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg12564.html">Re: Unable to configure Riak-CS-Control...</a></span> <span class="sender italic">Dmitri Zagidulin</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg12566.html">Re: Unable to configure Riak-CS-Con...</a></span> <span class="sender italic">Siddhu Warrier (siwarrie)</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Unable to configure Riak-CS...</span> <span class="sender italic">Dmitri Zagidulin</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg12568.html">Re: Unable to configure Ri...</a></span> <span class="sender italic">Dmitri Zagidulin</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg12569.html">Re: Unable to configur...</a></span> <span class="sender italic">Siddhu Warrier (siwarrie)</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg12570.html">Re: Unable to conf...</a></span> <span class="sender italic">Dmitri Zagidulin</span></li>
<li class="icons-email"><span class="subject"><a href="msg12579.html">Re: Unable to conf...</a></span> <span class="sender italic">Christopher Meiklejohn</span></li>
<li class="icons-email"><span class="subject"><a href="msg12581.html">Re: Unable to conf...</a></span> <span class="sender italic">Siddhu Warrier (siwarrie)</span></li>
<li class="icons-email"><span class="subject"><a href="msg12620.html">Re: Unable to conf...</a></span> <span class="sender italic">Dmitri Zagidulin</span></li>
<li class="icons-email"><span class="subject"><a href="msg12622.html">Re: Unable to conf...</a></span> <span class="sender italic">Christopher Meiklejohn</span></li>
<li class="icons-email"><span class="subject"><a href="msg12627.html">Re: Unable to conf...</a></span> <span class="sender italic">Siddhu Warrier (siwarrie)</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Unable to configure Riak-CS-Control to manage users">
<input type="hidden" name="msgid" value="CA+TO3kXB8oibJcWw3sxXFBGbRJeOHh2WYWiryH9vorkTeJhsBg@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg12567.html">
<input type="submit" value=" Dmitri Zagidulin ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Unable+to+configure+Riak%5C-CS%5C-Control+to+manage+users%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg12566.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg12568.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CA+TO3kXB8oibJcWw3sxXFBGbRJeOHh2WYWiryH9vorkTeJhsBg@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
