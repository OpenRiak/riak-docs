<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Riak on SAN</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="thrd9.html#12490" id="c">
<link rel="index" href="mail9.html#12490" id="i">
<link rel="prev" href="msg12489.html" id="p">
<link rel="next" href="msg12491.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg12490.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Riak+on+SAN%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Riak on SAN</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Heinz+Nikolaus+Gies%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Heinz Nikolaus Gies</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20131003" rel="nofollow">Thu, 03 Oct 2013 07:21:06 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi Guido,
I don’t see how snappy compression renders ZFS useless, you might do some 
things twice like crcing but it also protects on different layers. While the 
ZFS crc protects data on the disks the in app crc could protect the data ‘all’ 
the way up, compression wise you might not even turn on ZFS compression and 
even if you do, you could still get a higher ratio given that ZFS will use 
compression over the entire volume not ‘just’ the data in the DB.</pre><pre>

That said there is a lot more to ZFS then compression and CRC ;) like 
snapshots, cloning, ARC ^^


On 03 Oct 2013, at 9:56, Guido Medina &lt;guido.med...@temetra.com&gt; wrote:

&gt; If using LevelDB backend, LevelDB has a nice compression (snappy), including 
&gt; CRC checks and all sort of data corruption checks, I have read on this mail 
&gt; list people that has required to disable snappy compression because it 
&gt; renders ZFS useless (not much to compress after that)
&gt; 
&gt; Hence, it is kind of related to using ZFS or not, if you go for ZFS whatever 
&gt; variant you will have to support two sub-systems, if you let LevelDB snappy 
&gt; compression on, you won't have to worry about it.
&gt; 
&gt; As for backup, Basho provides a sort of cluster-to-cluster replication tool, 
&gt; we built our own in Java, making backups per storage on every node won't make 
&gt; much sense due to CAP/distributed nature, replicating the keys to another 
&gt; cluster is what will make sense.
&gt; 
&gt; Hope that helps and is understandable,
&gt; 
&gt; Guido.
&gt; 
&gt; On 03/10/13 13:54, Pedram Nimreezi wrote:
&gt;&gt; Not sure what ZFS has to do with snappy compression, as it's a file system 
&gt;&gt; not a compression algorithm.. 
&gt;&gt; feature wise, ZFS is quite possibly the most enterprise file system around, 
&gt;&gt; including advanced data corruption prevention and remote backing up.. 
&gt;&gt; 
&gt;&gt; This would be a viable option in BSD/Solaris environments, at least for 
&gt;&gt; making snapshots.
&gt;&gt; Might make a nice write up for the Basho blog..
&gt;&gt; 
&gt;&gt; Backups for riak I think require a bit more consideration then file system 
&gt;&gt; snapshot send, 
&gt;&gt; and should include provisions for transferring data to smaller/larger 
&gt;&gt; clusters, transfer 
&gt;&gt; ring ownerships properly, etc. 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; On Thu, Oct 3, 2013 at 7:15 AM, Guido Medina &lt;guido.med...@temetra.com&gt; 
&gt;&gt; wrote:
&gt;&gt; And for ZFS? I wouldn't recommend it, after Riak 1.4 snappy LevelDB 
&gt;&gt; compression does a nice job, why take the risk of yet another not so 
&gt;&gt; enterprise ready compression algorithms.
&gt;&gt; 
&gt;&gt; I could be wrong though,
&gt;&gt; 
&gt;&gt; Guido.
&gt;&gt; 
&gt;&gt; 
&gt;&gt; On 03/10/13 12:11, Guido Medina wrote:
&gt;&gt;&gt; I have heard some SAN's horrors stories too, Riak nodes are so cheap that I 
&gt;&gt;&gt; don't see the point in even having any mirror on the node, here my points:
&gt;&gt;&gt; Erlang interprocess communication brings some network usage, why yet 
&gt;&gt;&gt; another network usage on replicating the data? If the whole idea of Riak is 
&gt;&gt;&gt; have your data replicated in different nodes.
&gt;&gt;&gt; If a node goes down or die for whatever reason, bring up another node and 
&gt;&gt;&gt; rebuild it.
&gt;&gt;&gt; If you want to really replicate your cluster Riak offers the enterprise 
&gt;&gt;&gt; replication which I'm quite sure will be less expensive than a SAN and will 
&gt;&gt;&gt; warranty to have your cluster ready to go somewhere else as a backup.
&gt;&gt;&gt; I would even go further, SSDs are so cheap and Riak nodes are so cheap now 
&gt;&gt;&gt; adays that I would even build a cluster using RAID 0 or RAID 5 SSDs (yes, 
&gt;&gt;&gt; no mirror with RAID 1, if too afraid, RAID 5), that will have a great 
&gt;&gt;&gt; impact on performance. Again, if something goes wrong with 1 node, refer to 
&gt;&gt;&gt; point 2.
&gt;&gt;&gt; SANs and all those &quot;legacy&quot; backup and replication IMHO are meant for other 
&gt;&gt;&gt; products, like an Oracle money eater DB server.
&gt;&gt;&gt; HTH,
&gt;&gt;&gt; Guido.
&gt;&gt;&gt; 
&gt;&gt;&gt; On 03/10/13 12:00, Brian Akins wrote:
&gt;&gt;&gt;&gt; So, call me naive, but couldn't ZFS be used as Heinze suggested?
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; I have some SAN horror stories - both operationally and from an economic 
&gt;&gt;&gt;&gt; perspective.
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; _______________________________________________
&gt;&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt;&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; _______________________________________________
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; -- 
&gt;&gt; /* Sincerely
&gt;&gt; -------------------------------------------------------------- 
&gt;&gt; Pedram Nimreezi - Chief Technology Officer  */
&gt;&gt; 
&gt;&gt; // The hardest part of design … is keeping features out. - Donald Norman
&gt;&gt; 
&gt;&gt; 
&gt; 
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>

</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg12489.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="thrd9.html#12490">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="mail9.html#12490">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg12491.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li><ul>
<li><ul>
<li><ul>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg12473.html">Re: Riak on SAN</a></span> <span class="sender italic">Darren Govoni</span></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg12475.html">Re: Riak on SAN</a></span> <span class="sender italic">Jeremiah Peschka</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg12480.html">Re: Riak on SAN</a></span> <span class="sender italic">John E. Vincent</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg12482.html">Re: Riak on SAN</a></span> <span class="sender italic">Pedram Nimreezi</span></li>
<li class="icons-email"><span class="subject"><a href="msg12483.html">Re: Riak on SAN</a></span> <span class="sender italic">Sean Cribbs</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg12485.html">Re: Riak on SAN</a></span> <span class="sender italic">Brian Akins</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg12486.html">Re: Riak on SAN</a></span> <span class="sender italic">Guido Medina</span></li>
<li class="icons-email"><span class="subject"><a href="msg12487.html">Re: Riak on SAN</a></span> <span class="sender italic">Guido Medina</span></li>
<li class="icons-email"><span class="subject"><a href="msg12488.html">Re: Riak on SAN</a></span> <span class="sender italic">Pedram Nimreezi</span></li>
<li class="icons-email"><span class="subject"><a href="msg12489.html">Re: Riak on SAN</a></span> <span class="sender italic">Guido Medina</span></li>
<li class="icons-email tSliceCur"><span class="subject">Re: Riak on SAN</span> <span class="sender italic">Heinz Nikolaus Gies</span></li>
<li class="icons-email"><span class="subject"><a href="msg12491.html">Re: Riak on SAN</a></span> <span class="sender italic">Guido Medina</span></li>
<li class="icons-email"><span class="subject"><a href="msg12492.html">Re: Riak on SAN</a></span> <span class="sender italic">Jared Morrow</span></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg12510.html">Re: Riak on SAN</a></span> <span class="sender italic">Mike Oxford</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg12511.html">Re: Riak on SAN</a></span> <span class="sender italic">Pedram Nimreezi</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg12517.html">Re: Riak on SAN</a></span> <span class="sender italic">Dave Martorana</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Riak on SAN">
<input type="hidden" name="msgid" value="97633209-7FD5-456E-B373-8D631C6965EC@licenser.net">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg12490.html">
<input type="submit" value=" Heinz Nikolaus Gies ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Riak+on+SAN%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg12489.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg12491.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">97633209-7FD5-456E-B373-8D631C6965EC@licenser.net</li>
</ul>
</div>
</body>
</html>
