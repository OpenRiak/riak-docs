<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: dealing with binary keys</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="thrd10.html#12233" id="c">
<link rel="index" href="mail10.html#12233" id="i">
<link rel="prev" href="msg12232.html" id="p">
<link rel="next" href="msg12234.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg12233.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+dealing+with+binary+keys%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: dealing with binary keys</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Jeremiah+Peschka%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Jeremiah Peschka</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20130911" rel="nofollow">Wed, 11 Sep 2013 09:26:47 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>If this is a big show stopper for you, let me know and I can see what it
would take to put in a flag to bypass validations (it'd default to being
on, so you'd have to consciously make that decision).</pre><pre>

Summary:
This happens because some clients still use HTTP and we need to play nice
with their degenerate behaviors.

Details:
When we threw that check into CorrugatedIron, we were imagining that people
might have multiple Riak clients in place, including some that are talking
over HTTP instead of Protocol Buffers (looking at you, node.js).

Internally, CorrugatedIron doesn't care about valid keys, it just converts
strings and buckets to byte arrays and sends the messages over to Riak.
I've considered creating some sort of &quot;Should I care&quot; flag that would allow
users to pass in whatever gibberish they want, but it's been on the back
burner.

With Riak 2.0, this behavior can go away since, officially, only protocol
buffers will be supported for clients. CorrugatedIron, though, still needs
to be able to talk to downlevel clients since you might have a cluster in
the middle of a migration from 1.4.x to 2.0.x and killing communications
isn't funny.

Typically, I just nuke the data in my Riak cluster after running Basho
bench, but my use case is slightly different and my cluster gets rebuilt
regularly anyway.



---
Jeremiah Peschka - Founder, Brent Ozar Unlimited
MCITP: SQL Server 2008, MVP
Cloudera Certified Developer for Apache Hadoop


On Wed, Sep 11, 2013 at 7:15 AM, Alex Rice &lt;a...@mindlube.com&gt; wrote:

&gt; Hi all, I was messing around with basho_bench and I think it created a
&gt; 'test' bucket with lots of binary keys, not string keys. Using the
&gt; .NET api (<a  rel="nofollow" href="http://corrugatediron.org/">http://corrugatediron.org/</a>) and it fails to delete these
&gt; keys. Any suggestions how I can get rid of this bucket, aside from
&gt; stopping all nodes and deleting the var/lib/riak directory?
&gt;
&gt; client.DeleteBucket() just seems to hang and
&gt; client.Delete(bucket, key)  fails with an ErrorMessage like this
&gt;
&gt; deleting key ��
&gt; deleting key �w
&gt; deleting key 4�q
&gt; deleting key ��#
&gt; ...
&gt; deleting key Z�1
&gt; deleting key /MN
&gt;
&gt; Unhandled Exception:
&gt; System.Exception: Key cannot be blank or contain forward-slashes
&gt;
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg12232.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="thrd10.html#12233">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="mail10.html#12233">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg12234.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg12232.html">dealing with binary keys</a></span> <span class="sender italic">Alex Rice</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: dealing with binary keys</span> <span class="sender italic">Jeremiah Peschka</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg12234.html">Re: dealing with binary keys</a></span> <span class="sender italic">Alex Rice</span></li>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: dealing with binary keys">
<input type="hidden" name="msgid" value="CACJEN2qBsW001K4zMQO=Vsr8QEKzspxM7-=rQGDiW-BA-X2b-w@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg12233.html">
<input type="submit" value=" Jeremiah Peschka ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+dealing+with+binary+keys%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg12232.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg12234.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CACJEN2qBsW001K4zMQO=Vsr8QEKzspxM7-=rQGDiW-BA-X2b-w@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
