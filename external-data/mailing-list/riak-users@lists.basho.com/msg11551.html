<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: reducing n_val</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="thrd14.html#11551" id="c">
<link rel="index" href="mail14.html#11551" id="i">
<link rel="prev" href="msg11550.html" id="p">
<link rel="next" href="msg11552.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg11551.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+reducing+n_val%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: reducing n_val</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Christopher+Meiklejohn%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Christopher Meiklejohn</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20130716" rel="nofollow">Tue, 16 Jul 2013 06:25:48 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>On Tuesday, July 16, 2013 at 8:32 AM, Simon Effenberg wrote:
&gt; is it possible to reduce the n_val? I mean you can change it but what
&gt; happens then?
&gt; 
&gt; - is old data removed or is it laying around? (or maybe deleted after
&gt; some time thanks to AAE?)</pre><pre>

Changing the n_val setting in the default bucket properties will only affect 
new PUT operations moving forward. Older replicas will not be removed, and the 
AAE process will not purge older, unneeded replicas.

&gt; 
&gt; - is it causing problems like:
&gt; - reducing n_val from 3 to 2
&gt; - update data
&gt; - sleep 10minutes
&gt; - read data but second primary is borked =&gt; is the first fallback
&gt; vnode on the place where the 3rd n_val vnode was before? So is this
&gt; reading old crappy data (maybe the vclock is rescuing there but
&gt; that's only one edge case I can think off right now)?

It's possible that the fallback virtual node will be started on the same 
physical node that originally hosted the third primary, however, it will be a 
different virtual node and backend directory as these are parameterized based 
on partition identifier and node.

- Chris

-- 
Christopher Meiklejohn
Software Engineer

Basho Technologies, Inc. 


_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg11550.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="thrd14.html#11551">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="mail14.html#11551">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg11552.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg11550.html">reducing n_val</a></span> <span class="sender italic">Simon Effenberg</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: reducing n_val</span> <span class="sender italic">Christopher Meiklejohn</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg11552.html">Re: reducing n_val</a></span> <span class="sender italic">Chris Meiklejohn</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg11669.html">Re: reducing n_val</a></span> <span class="sender italic">Chris Meiklejohn</span></li>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: reducing n_val">
<input type="hidden" name="msgid" value="30671CA4F53641C2A280514CC74A16EA@basho.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg11551.html">
<input type="submit" value=" Christopher Meiklejohn ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+reducing+n_val%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg11550.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg11552.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">30671CA4F53641C2A280514CC74A16EA@basho.com</li>
</ul>
</div>
</body>
</html>
