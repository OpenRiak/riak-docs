<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Strange wildcard behavior</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#05555" id="c">
<link rel="index" href="maillist.html#05555" id="i">
<link rel="prev" href="msg05549.html" id="p">
<link rel="next" href="msg05556.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg05555.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Strange+wildcard+behavior%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Strange wildcard behavior</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Rusty+Klophaus%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Rusty Klophaus</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20111111" rel="nofollow">Fri, 11 Nov 2011 10:04:41 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi Elias,

I believe this issue is caused by interaction between the JSON extractor
and the noop analyzer.</pre><pre>

The JSON extractor, when it sees multiple fields with the same value, it
merges them into a single value separated by a space. (This reflects
Search's view that documents are prose.)

Normally, the default analyzer would split on whitespace, but since your
schema overrides the field to use the noop analyzer, the value is left
untokenized.

Does that make sense?

Best,
Rusty

On Fri, Nov 11, 2011 at 2:21 AM, Elias Levy &lt;fearsome.lucid...@gmail.com&gt;wrote:

&gt; I am seeing some strange someone behavior that maybe someone can explain.
&gt;
&gt; Using a modified default search schema, so that these fields are tokenized
&gt; using the noop analyzer, if I index something like:
&gt;
&gt; {&quot;i&quot;:{&quot;bg&quot;:[{&quot;dnm&quot;:&quot;generic&quot;},{&quot;dnm&quot;:&quot;onlinegamesfva&quot;},{&quot;dnm&quot;:&quot;8ffa6&quot;}]}}
&gt;
&gt;
&gt; and I try searching for it with
&gt;
&gt; search-cmd search mybucket i_bg_dnm:'generic'
&gt;
&gt;
&gt; it finds no matches.
&gt;
&gt; But if I search for:
&gt;
&gt; search-cmd search mybucket i_bg_dnm:'generic*'
&gt;
&gt;
&gt; it finds the document.
&gt;
&gt; What gives?  Why does the specific match returns no matches but the wild
&gt; card query does?
&gt;
&gt; Oddly, the output of search-cmd shows:
&gt;
&gt; index/id: mybucket/mykey2
&gt; &lt;&lt;&quot;i_bg_dnm&quot;&gt;&gt; -&gt; &lt;&lt;&quot;generic onlinegamesfva 8ffa6&quot;&gt;&gt;
&gt;
&gt;
&gt; which appears to show that the values of key dnm in each dict in the array
&gt; have been concatenated with spaces in between, which would explain the lack
&gt; of a exact match, but matches with the wildcard.
&gt;
&gt; The example of indexing dict in an array that Rusty sent in reply to my
&gt; message on that topic does not show this behavior.  Searching for a
&gt; specific match returns a result, and searching with a wild card does not
&gt; show the values of the matching fields in the dicts in the array being
&gt; concatenated in this way:
&gt;
&gt; search-cmd search mybucket menu_popup_menuitem_value:'Ne*'
&gt;
&gt; index/id: mybucket/mykey1
&gt; &lt;&lt;&quot;menu_popup_menuitem_value&quot;&gt;&gt; -&gt; &lt;&lt;&quot;New&quot;&gt;&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;
&gt;


-- 
Rusty Klophaus (@rustyio)
*Basho Technologies, Inc.*
www.basho.com
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg05549.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#05555">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#05555">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg05556.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg05549.html">Strange wildcard behavior</a></span> <span class="sender italic">Elias Levy</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Strange wildcard behavior</span> <span class="sender italic">Rusty Klophaus</span></li>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Strange wildcard behavior">
<input type="hidden" name="msgid" value="CAOr2nz5GEDHQKj73v8vW8hSxDMVXbO5YwZNYcpRAkcgS9+SjLw@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg05555.html">
<input type="submit" value=" Rusty Klophaus ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Strange+wildcard+behavior%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg05549.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg05556.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CAOr2nz5GEDHQKj73v8vW8hSxDMVXbO5YwZNYcpRAkcgS9+SjLw@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
