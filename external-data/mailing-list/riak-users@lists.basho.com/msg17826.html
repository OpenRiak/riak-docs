<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Reaping Tombstones</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#17826" id="c">
<link rel="index" href="maillist.html#17826" id="i">
<link rel="prev" href="msg17824.html" id="p">
<link rel="next" href="msg17825.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg17826.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Reaping+Tombstones%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Reaping Tombstones</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Nick+Marino%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Nick Marino</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20170103" rel="nofollow">Tue, 03 Jan 2017 10:34:16 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>We have new tombstone reaping functionality in the works for Riak KV 2.3,
which should allow for safe and automatic removal of old leftover
tombstones. In the mean time, you can potentially trigger the deletion of
old, leftover tombstones by doing reads to those keys; if all the primary
replicas return the tombstone then Riak will automatically try and remove
it.</pre><pre>

Note, however, that this will not immediately reclaim disk space. Deletion
of the tombstone by Riak will still leave behind a backend tombstone for
some amount of time. See the docs here for more info on this:
<a  rel="nofollow" href="http://docs.basho.com/riak/kv/2.2.0/using/reference/object-deletion/#deletion-from-backends">http://docs.basho.com/riak/kv/2.2.0/using/reference/object-deletion/#deletion-from-backends</a>

As for estimating disk space used by tombstones, I'm afraid I don't know of
any easy way to do that. Hopefully someone else may have a good suggestion
here.

Cheers,
Nick

On Fri, Dec 30, 2016 at 9:55 AM, Arun Rajagopalan &lt;
arun.v.rajagopa...@gmail.com&gt; wrote:

&gt; Hello Riakers
&gt;
&gt; I wonder if there is anyway to delete all tombstones that were left behind
&gt; when delete_mode was set to 'keep'
&gt;
&gt; Also how do I estimate how much space the tombstones take ? We have a ton
&gt; of large scale and frequent delete operations and I suspect some space is
&gt; used by Tombstones. I would like to find out if it is significant enough to
&gt; warrant some cleanup. If it does, how do I remove them?
&gt;
&gt; Thanks and wish you all Happy, Peaceful and Prosperous  2017 !
&gt;
&gt;
&gt;
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;
&gt;
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg17824.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#17826">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#17826">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg17825.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg17820.html">Reaping Tombstones</a></span> <span class="sender italic">Arun Rajagopalan</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg17821.html">Re: Reaping Tombstones</a></span> <span class="sender italic">Matthew Von-Maszewski</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg17822.html">Re: Reaping Tombstones</a></span> <span class="sender italic">Luca Favatella</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg17823.html">Re: Reaping Tombstones</a></span> <span class="sender italic">Arun Rajagopalan</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg17824.html">Re: Reaping Tombstones</a></span> <span class="sender italic">Matthew Von-Maszewski</span></li>
</ul></li>
</ul></li>
</ul></li>
<li class="icons-email tSliceCur"><span class="subject">Re: Reaping Tombstones</span> <span class="sender italic">Nick Marino</span></li>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Reaping Tombstones">
<input type="hidden" name="msgid" value="CAFZPSXUTGZhVQfeDW3Nv3EU+6rTwT8N2nu6mx+5Nq=_fq0UBYw@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg17826.html">
<input type="submit" value=" Nick Marino ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Reaping+Tombstones%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg17824.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg17825.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CAFZPSXUTGZhVQfeDW3Nv3EU+6rTwT8N2nu6mx+5Nq=_fq0UBYw@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
