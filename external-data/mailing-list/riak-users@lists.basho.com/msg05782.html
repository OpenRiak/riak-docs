<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: MapReduce Weird Issue</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#05782" id="c">
<link rel="index" href="maillist.html#05782" id="i">
<link rel="prev" href="msg05774.html" id="p">
<link rel="next" href="msg05775.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg05782.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+MapReduce+Weird+Issue%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: MapReduce Weird Issue</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Bryan+Fink%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Bryan Fink</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20111129" rel="nofollow">Tue, 29 Nov 2011 04:52:29 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>On Tue, Nov 29, 2011 at 3:56 AM, Yehuda Zargrov &lt;yeh...@conduit.com&gt;
wrote:&gt;      .reduce(&quot;function(v) {var s={}; for(var i in v)  { var
date=''; var&gt; sum=0; for(var n in v[i]) { if (n === \&quot;date\&quot;)
date=v[i][n]; if (n ===&gt; \&quot;sum\&quot;) sum=v[i][n]; } if (date in s)
s[date] += sum; else s[date] = sum; }&gt; return[v]; }&quot;, :keep =&gt;
true).run
Hi, Yehuda.  I think one of the troubles you're seeing may be
becausethe last statement in your reduce function is &quot;return[v]&quot;.  It
lookslike you actually wanted &quot;return[s]&quot;.  The function is returning
itsinputs instead of its computation result.
As for why you only see 13 entries instead of hundreds, I'd bet
thateither an error or timeout occurred, and caused a known bug
(whereinputs are returned instead of outputs) to raise its
head:<a  rel="nofollow" href="https://issues.basho.com/show_bug.cgi?id=1185">https://issues.basho.com/show_bug.cgi?id=1185</a>
There may be more information in Riak's logs.  Please write back
withwhat you find, and include the version numbers you're using for
Riakand Ripple.</pre><pre>

-Bryan

_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg05774.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#05782">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#05782">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg05775.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg05774.html">MapReduce Weird Issue</a></span> <span class="sender italic">Yehuda Zargrov</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: MapReduce Weird Issue</span> <span class="sender italic">Bryan Fink</span></li>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: MapReduce Weird Issue">
<input type="hidden" name="msgid" value="CAOLR_oZWf5p_eiCQciOJ2XEmtox_h_7LB032RY_W4BiGV2Eb=A@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg05782.html">
<input type="submit" value=" Bryan Fink ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+MapReduce+Weird+Issue%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg05774.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg05775.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CAOLR_oZWf5p_eiCQciOJ2XEmtox_h_7LB032RY_W4BiGV2Eb=A@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
