<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: indexing tags with Riak Search</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#02152" id="c">
<link rel="index" href="maillist.html#02152" id="i">
<link rel="prev" href="msg02149.html" id="p">
<link rel="next" href="msg02150.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg02152.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+indexing+tags+with+Riak+Search%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: indexing tags with Riak Search</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Eric+Moritz%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Eric Moritz</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20110129" rel="nofollow">Sat, 29 Jan 2011 16:38:19 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>That makes sense. Thanks!
On Jan 29, 2011 11:59 AM, &quot;Gordon Tillman&quot; &lt;gtill...@mezeo.com&gt; wrote:
&gt; Hi Eric,
&gt;
&gt; Yes you can do this, but you need to &quot;encode&quot; your information
appropriately. Using the example that you provided, you would store your
JSON object as follows:
&gt;
&gt; {
&gt; &quot;title&quot;: &quot;Hello, World!&quot;
&gt; &quot;tags&quot;: &quot;greetings first%20program&quot;
&gt; }
&gt;
&gt; Make sure that the search schema for your bucket is indexing your tags
field using whitespace_analyzer_factory (I think that is the new default
anyway).
&gt;
&gt; The key here is that you quote the tags before storing your object and
unquote the tags after retrieving your object. If you create models that
represent the things that you store in Riak then you automate that process
pretty easily.
&gt;
&gt; You will still store tags in a list (or better yet, a set) in your model,
but you will quote each one and save it as a whitespace-delimited string
before storing in Riak. When you read it in from Riak you can split and
unquote to restore to a list or set in your model.
&gt;
&gt; By using whitespace_analyzer_factory for the tags field (instead of say
the standard_analyzer_factory) the code that parses that field for indexing
will do the right thing.
&gt;
&gt;
&gt; Be sure and read the notes about escaping special characters in search
terms here:
&gt;
&gt; <a  rel="nofollow" href="http://lucene.apache.org/java/2_4_0/queryparsersyntax.html#EscapingSpecial">http://lucene.apache.org/java/2_4_0/queryparsersyntax.html#EscapingSpecial</a> 
&gt; Characters&lt;
<a  rel="nofollow" href="http://lucene.apache.org/java/2_4_0/queryparsersyntax.html#Escaping%20Special%20Characters">http://lucene.apache.org/java/2_4_0/queryparsersyntax.html#Escaping%20Special%20Characters</a>
&gt;
&gt;
&gt;
&gt; --gordon
&gt;
&gt; On Jan 28, 2011, at 19:14, Eric Moritz wrote:
&gt;
&gt; Is there a way to index tags in Riak Search? For example, say I have the
following data structure:
&gt;
&gt; hello.json
&gt;
&gt; {
&gt; &quot;title&quot;: &quot;Hello, World!&quot;
&gt; &quot;tags&quot;: [&quot;greetings&quot;, &quot;first program&quot;]
&gt; }
&gt;
&gt; I noticed the result from Solr returns fielded data that resembles this:
&gt;
&gt; GET /solr/tagtest/select?q=tags:greetings&amp;wt=json
&gt;
&gt; {
&gt; &quot;title&quot;: &quot;Hello, World&quot;,
&gt; &quot;tags&quot;: &quot;greetings first programs
&gt; }
&gt;
&gt; Now if I use &quot;q=tags:program&quot;, the same document is returned. Is there an
analyzer that will treat each item in that list as a single term?
&gt;
&gt; Thanks,
&gt; Eric.
&gt;
&gt; &lt;ATT00001..txt&gt;
&gt;
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg02149.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#02152">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#02152">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg02150.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg02149.html">indexing tags with Riak Search</a></span> <span class="sender italic">Eric Moritz</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: indexing tags with Riak Search</span> <span class="sender italic">Eric Moritz</span></li>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: indexing tags with Riak Search">
<input type="hidden" name="msgid" value="AANLkTimvGEsvUM8-KwwhZy9GCAfwXGKBTbSb14Epcsya@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg02152.html">
<input type="submit" value=" Eric Moritz ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+indexing+tags+with+Riak+Search%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg02149.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg02150.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">AANLkTimvGEsvUM8-KwwhZy9GCAfwXGKBTbSb14Epcsya@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
