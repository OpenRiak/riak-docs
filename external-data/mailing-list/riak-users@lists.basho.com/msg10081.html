<!DOCTYPE html>
<html lang="en">
<head>
<title>RE: CorrugatedIron batch get?</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#10081" id="c">
<link rel="index" href="maillist.html#10081" id="i">
<link rel="prev" href="msg10080.html" id="p">
<link rel="next" href="msg10085.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg10081.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22RE%5C%3A+CorrugatedIron+batch+get%5C%3F%22&amp;o=newest" rel="nofollow"><span itemprop="name">RE: CorrugatedIron batch get?</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Kevin+Burton%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Kevin Burton</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20130210" rel="nofollow">Sun, 10 Feb 2013 15:17:57 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>OK now I understand. This isn't really a batch call it is just  calling a
user defined delegate and conveniently passing in an interface to be used
for multiple method calls.</pre><pre>

 

I don't see the RetryCount being used. Is it? 

 

Thanks again this has been a great help.

 

From: riak-users [<a  rel="nofollow" href="mailto:riak-users-boun...@lists.basho.com">mailto:riak-users-boun...@lists.basho.com</a>] On Behalf Of
Jeremiah Peschka
Sent: Sunday, February 10, 2013 4:42 PM
To: riak-users
Subject: Re: CorrugatedIron batch get?

 

It's all there in the source. ;)

 

Responses inline

 

[1]:
<a  rel="nofollow" href="https://github.com/DistributedNonsense/CorrugatedIron/blob/master/Corrugated">https://github.com/DistributedNonsense/CorrugatedIron/blob/master/Corrugated</a>
Iron/Models/RiakObjectId.cs

[2]:
<a  rel="nofollow" href="https://github.com/DistributedNonsense/CorrugatedIron/blob/master/Corrugated">https://github.com/DistributedNonsense/CorrugatedIron/blob/master/Corrugated</a>
Iron.Tests.Live/RiakClientTests.cs#L62




---

Jeremiah Peschka - Founder, Brent Ozar Unlimited

MCITP: SQL Server 2008, MVP

Cloudera Certified Developer for Apache Hadoop

 

On Sun, Feb 10, 2013 at 2:28 PM, Kevin Burton &lt;rkevinbur...@charter.net&gt;
wrote:

So for [2] what is a RiakObjectID? The name of the argument is bucket-key
pairs? But I am confused what is the constructor that takes an array of
strings that is labeled object id? No relation to RiakBucketKeyInput.

 

RiakObjectId is nothing more than a wrapper around a Bucket/Key pair [1]
that are wired up for easy JSON conversion for Get operations.
RiakBucketKeyInput is a sub-class of RiakPhaseInput for MR operations.

 

 

I hadn't even known about IRiakBatchClient. Now I am intrigued. From the
source it seems to mimic all of the calls to IRiakClient. How is the setup
different? When does the &quot;batch&quot; start?

 

There are examples of IRiakBatchClient in the test suite [2] 

 

This is kind of off-topic but I notice that there is a property public int
RetryCount { get; set; }. What is the default value? How does it work? Is
the whole batch retried or individual calls within the batch?

 

RetryCount is related to the cluster config that you set up in app.config -
it's the number of retries before CorrugatedIron marks a node as dead.

 

From: riak-users [<a  rel="nofollow" href="mailto:riak-users-boun...@lists.basho.com">mailto:riak-users-boun...@lists.basho.com</a>] On Behalf Of
Jeremiah Peschka
Sent: Sunday, February 10, 2013 4:05 PM
To: riak-users
Subject: Re: CorrugatedIron batch get?

 

My guess is that you're referring to the method Put(IEnumerable&lt;RiakObject&gt;
values) [1]. If that's the case, yes there's also a Get that accepts an
IEnumerable of RiakObjectID [2]. Riak doesn't support multi-get so CI is
just wrapping a bunch of Gets in the background for you. MapReduce might be
more effective here.

 

If you're talking about the IRiakBatchClient interface [3], all actions of
RiakClient can be handled through IRiakBatchClient. Keep in mind that CI's
batch operations are just a wrapper around making a large number of calls at
once. Nothing about Batch() is atomic - if you need a Unit of Work pattern
you'll have to implement it yourself.

 

[1]:
<a  rel="nofollow" href="https://github.com/DistributedNonsense/CorrugatedIron/blob/master/Corrugated">https://github.com/DistributedNonsense/CorrugatedIron/blob/master/Corrugated</a>
Iron/RiakClient.cs#L306

[2]:
<a  rel="nofollow" href="https://github.com/DistributedNonsense/CorrugatedIron/blob/master/Corrugated">https://github.com/DistributedNonsense/CorrugatedIron/blob/master/Corrugated</a>
Iron/RiakClient.cs#L191

[3]:
<a  rel="nofollow" href="https://github.com/DistributedNonsense/CorrugatedIron/blob/master/Corrugated">https://github.com/DistributedNonsense/CorrugatedIron/blob/master/Corrugated</a>
Iron/IRiakBatchClient.cs




---

Jeremiah Peschka - Founder, Brent Ozar Unlimited

MCITP: SQL Server 2008, MVP

Cloudera Certified Developer for Apache Hadoop

 

On Sun, Feb 10, 2013 at 1:32 PM, Kevin Burton &lt;rkevinbur...@charter.net&gt;
wrote:

Looking at the method calls I can see that there is a batch Put. Where I can
form a list of RiakObject s and do one put that writes all of the objects to
the database. Is there an equivalent &quot;batch get&quot;? Examples? Thank you.


_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>

 

 

</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg10080.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#10081">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#10081">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg10085.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg10076.html">CorrugatedIron batch get?</a></span> <span class="sender italic">Kevin Burton</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg10077.html">Re: CorrugatedIron batch get?</a></span> <span class="sender italic">Jeremiah Peschka</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg10079.html">RE: CorrugatedIron batch get?</a></span> <span class="sender italic">Kevin Burton</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg10080.html">Re: CorrugatedIron batch get?</a></span> <span class="sender italic">Jeremiah Peschka</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">RE: CorrugatedIron batch get?</span> <span class="sender italic">Kevin Burton</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg10085.html">Re: CorrugatedIron batch get?</a></span> <span class="sender italic">Jeremiah Peschka</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="RE: CorrugatedIron batch get?">
<input type="hidden" name="msgid" value="002501ce07e4$b850bd00$28f23700$@charter.net">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg10081.html">
<input type="submit" value=" Kevin Burton ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22RE%5C%3A+CorrugatedIron+batch+get%5C%3F%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg10080.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg10085.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">002501ce07e4$b850bd00$28f23700$@charter.net</li>
</ul>
</div>
</body>
</html>
