<!DOCTYPE html>
<html lang="en">
<head>
<title>Solr Indexing and required fields.</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#07464" id="c">
<link rel="index" href="maillist.html#07464" id="i">
<link rel="prev" href="msg07458.html" id="p">
<link rel="next" href="msg07465.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg07464.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Solr+Indexing+and+required+fields.%22&amp;o=newest" rel="nofollow"><span itemprop="name">Solr Indexing and required fields.</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Eric+Boyer%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Eric Boyer</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20120516" rel="nofollow">Wed, 16 May 2012 07:43:25 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hey all,

They summary of the problem is: 'required' fields are only honoured
when the field exists in the Solr document with no value, not when the
field doesn't even exist in the POST content.</pre><pre>

We've implemented solr search on a bucket called 'objectmetadata'
which has a schema close to the following:

{
   schema,
   [
       {version, &quot;1.1&quot;},
       {default_field, &quot;text&quot;},
       {default_op, &quot;or&quot;},
       {n_val, 3},
       {analyzer_factory, {erlang, text_analyzers,
whitespace_analyzer_factory}}
   ],
               %%unique id of this object, probably something like tag-{objid}
               {field, [
                       {name, &quot;id&quot;},
                       {required, true},
                       {analyzer_factory, {erlang, text_analyzers,
noop_analyzer_factory}}
                       ]},
               %%primary id
               {field, [
                       {name, &quot;objid&quot;},
                       {type, integer},
                       {required, true},
                       {padding_size, 10}
                       ]},
               {field, [
                       {name, &quot;projectid&quot;},
                       {type, integer},
                       {required, true},
                       {inline, true},
                       {padding_size, 10}
                       ]},

.... }

When posting documents (with &quot;Content-Type: text/xml&quot; header) without
the field :
POST <a  rel="nofollow" href="http://riak.local/solr/objectmetadata/update">http://riak.local/solr/objectmetadata/update</a>
&lt;add&gt;
&lt;doc&gt;
&lt;field name=&quot;id&quot;&gt;tag__1&lt;/field&gt;
&lt;field name=&quot;objid&quot;&gt;1&lt;/field&gt;
&lt;/doc&gt;
&lt;/add&gt;
Results in 200 OK

When posting documents with the field but without a value results in:
POST <a  rel="nofollow" href="http://riak.local/solr/objectmetadata/update">http://riak.local/solr/objectmetadata/update</a>
&lt;add&gt;
&lt;doc&gt;
&lt;field name=&quot;id&quot;&gt;tag_1_1&lt;/field&gt;
&lt;field name=&quot;objid&quot;&gt;1&lt;/field&gt;
&lt;field name=&quot;projectid&quot;&gt;&lt;/field&gt;
&lt;/doc&gt;
&lt;/add&gt;
Results in 400 Bad Request: &quot;Unable to parse request:
{expected_binaries,&lt;&lt;&quot;projectid&quot;&gt;&gt;,[]}&quot;

I would have expected these 2 scenarios to result in the same error.

Anything that I'm missing or is it just my assumption about how
required fields are handled is flawed?

Thanks,
Eric Boyer
Platform Developer
Firmex

_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg07458.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#07464">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#07464">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg07465.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg07458.html">Solr Indexing and required fields.</a></span> <span class="sender italic">Eric Boyer</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Solr Indexing and required fields.</span> <span class="sender italic">Eric Boyer</span></li>
<li class="icons-email"><span class="subject"><a href="msg07465.html">Re: Solr Indexing and required fields.</a></span> <span class="sender italic">Ryan Zezeski</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg07466.html">Re: Solr Indexing and required fields.</a></span> <span class="sender italic">Alexander Sicular</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg07468.html">Re: Solr Indexing and required fields.</a></span> <span class="sender italic">Eric Boyer</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg07492.html">Re: Solr Indexing and required fields.</a></span> <span class="sender italic">Ryan Zezeski</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg07493.html">Re: Solr Indexing and required fie...</a></span> <span class="sender italic">Les Mikesell</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg07505.html">Re: Solr Indexing and required...</a></span> <span class="sender italic">Ryan Zezeski</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg07507.html">Re: Solr Indexing and requ...</a></span> <span class="sender italic">Les Mikesell</span></li>
</ul></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg07500.html">Re: Solr Indexing and required fie...</a></span> <span class="sender italic">Eric Boyer</span></li>
<li class="icons-email"><span class="subject"><a href="msg07503.html">Re: Solr Indexing and required fie...</a></span> <span class="sender italic">Kevin Hill</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg07506.html">Re: Solr Indexing and required...</a></span> <span class="sender italic">Ryan Zezeski</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Solr Indexing and required fields.">
<input type="hidden" name="msgid" value="CANKgVqRFP7TZvh1Bk1xAbTkcwFo849vQt=WhSdoAp+S7irB=5A@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg07464.html">
<input type="submit" value=" Eric Boyer ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Solr+Indexing+and+required+fields.%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg07458.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg07465.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CANKgVqRFP7TZvh1Bk1xAbTkcwFo849vQt=WhSdoAp+S7irB=5A@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
