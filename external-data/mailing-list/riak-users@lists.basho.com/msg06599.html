<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Riak synchronized</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#06599" id="c">
<link rel="index" href="maillist.html#06599" id="i">
<link rel="prev" href="msg06598.html" id="p">
<link rel="next" href="msg06600.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg06599.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Riak+synchronized%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Riak synchronized</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Martin+Bruse%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Martin Bruse</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20120214" rel="nofollow">Tue, 14 Feb 2012 05:46:26 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>On Tue, Feb 14, 2012 at 2:02 PM, Andres Jaan Tack
&lt;andres.jaan.t...@eesti.ee&gt; wrote:
&gt; You should read
&gt; this:Â <a  rel="nofollow" href="http://codahale.com/you-cant-sacrifice-partition-tolerance/">http://codahale.com/you-cant-sacrifice-partition-tolerance/</a>
&gt;
&gt; Riak's primary application as a key-value store is precisely to provide a
&gt; mechanism to deal with partition tolerance. It borrows the inventive step of
&gt; Dynamo to do this without sacrificing writeability (and more generally
&gt; availability). The above text makes a case for why this your assumption (&quot;no
&gt; split brain&quot;) is invalid: you always have to have an answer for the split
&gt; brain.</pre><pre>

Firstly: There are other reasons to use Riak than its partition
tolerance, e.g. write scalability, transparent redundancy and
failover, nice API, integrated search and database functionality etc.

Secondly: Many cases of partitioned clusters still work with the code
I posted, and I consider the cases where I actually have a bona fide
split brain (two parts of the cluster separately running and
accessible by different client systems) to be pretty rare.

Usually machines crash, or complete segments of the network become
unavailable, and my code would work fine in both of those cases.

&gt; Given this, I'm struggling to find value in your contribution. Was there a
&gt; specific application you had in mind?

Yes, having a cluster in a single datacenter with &quot;reliable&quot;
(redundant, fail-over etc) network connections between them serving a
set of web application servers.

But if you don't consider any network reliable enough for this I guess
the contribution is not for you :)

regards,
//Martin

&gt; --
&gt; Andres
&gt;
&gt; 2012/2/14 Martin Bruse &lt;zondol...@gmail.com&gt;
&gt;&gt;
&gt;&gt; Hello list, I am looking for some clever comments and critique.
&gt;&gt;
&gt;&gt; This is my first post, so have patience with my loutish behavior :)
&gt;&gt;
&gt;&gt; At the company where I work we have built an EventMachine
&gt;&gt; &lt;<a  rel="nofollow" href="http://rubyeventmachine.com/">http://rubyeventmachine.com/</a>&gt; based Ruby client to Riak that
&gt;&gt; simplifies both asynchronous HTTP requests and a few relation
&gt;&gt; concepts.
&gt;&gt;
&gt;&gt; You can find it at <a  rel="nofollow" href="https://github.com/ProjectDaisy/blodsband">https://github.com/ProjectDaisy/blodsband</a> if you
&gt;&gt; are interested.
&gt;&gt;
&gt;&gt; In this project I have added a few things that add a synchronous layer
&gt;&gt; on top of Riak. For example a compare-and-set method that guarantees
&gt;&gt; uniqueness of a document update.
&gt;&gt;
&gt;&gt; This is used for a #put_if_missing method, a Lock class to synchronize
&gt;&gt; operations, and (lo and behold) a linked list class using Riak
&gt;&gt; documents for elements.
&gt;&gt;
&gt;&gt; All these things, of course, assume that the cluster is not
&gt;&gt; partitioned in any way more interesting than a bunch of nodes being
&gt;&gt; offline. Split brain would break all synchronization.
&gt;&gt;
&gt;&gt; They all seem to work in our tests, but I would be very happy for some
&gt;&gt; peer review educated comments!
&gt;&gt;
&gt;&gt; regards,
&gt;&gt; //Martin
&gt;&gt;
&gt;&gt; _______________________________________________
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;
&gt;

_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg06598.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#06599">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#06599">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg06600.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg06597.html">Riak synchronized</a></span> <span class="sender italic">Martin Bruse</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg06598.html">Re: Riak synchronized</a></span> <span class="sender italic">Andres Jaan Tack</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Riak synchronized</span> <span class="sender italic">Martin Bruse</span></li>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Riak synchronized">
<input type="hidden" name="msgid" value="CA+YGrSCjU=fwPe+cB8B5nwEJB3QH03pQj4e1zkMON9swjWXTFg@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg06599.html">
<input type="submit" value=" Martin Bruse ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Riak+synchronized%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg06598.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg06600.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CA+YGrSCjU=fwPe+cB8B5nwEJB3QH03pQj4e1zkMON9swjWXTFg@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
