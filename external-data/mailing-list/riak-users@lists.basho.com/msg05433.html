<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: documentation for allow_mult=false</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#05433" id="c">
<link rel="index" href="maillist.html#05433" id="i">
<link rel="prev" href="msg05440.html" id="p">
<link rel="next" href="msg05413.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg05433.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+documentation+for+allow_mult%3Dfalse%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: documentation for allow_mult=false</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Tuure+Laurinolli%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Tuure Laurinolli</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20111103" rel="nofollow">Thu, 03 Nov 2011 01:50:27 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>
On Nov 2, 2011, at 17:18 , Ryan Zezeski wrote:

&gt; On Tue, Nov 1, 2011 at 5:51 PM, Justin Karneges &lt;jus...@affinix.com&gt; wrote:
&gt; Are you saying that allow_mult=false + last_write_win=false is the same as
&gt; allow_mult=false + last_write_win=true ?
&gt; 
&gt; False/false may be the default behavior, but I want to know what that behavior
&gt; is. :)
&gt; 
&gt; 
&gt; Justin,
&gt; 
&gt; No, last_write_wins=true doesn't care about the value of allow_mult.  Only 
&gt; one should be true at the same time, and the default is to have both set to 
&gt; false.  Perhaps making an imaginary setting to displace these two would help. 
&gt;  Lets call this imaginary setting &quot;conflict_resolution_method&quot; which can take 
&gt; on the three mutually exclusive values &quot;stomp&quot;, &quot;most_recent&quot; and &quot;siblings&quot;.
&gt; 
&gt; stomp - overwrite the current value with the new value regardless of vector 
&gt; clocks, just mutate the value with no regard, thus &quot;stomp&quot;</pre><pre>

And what happens when you read two different values for the same key?

&gt; 
&gt; most_recent - use vclocks to monitor for conflicts, create siblings, and pick 
&gt; the most recent write when a conflict does occur (i.e. let Riak handle the 
&gt; conflict for you based on time)

Picking most recent write happens at read time, right? What if vector clocks 
don't provide order for the writes that were read? Do you still get siblings 
(IIRC I read this somewhere, but it might have been some other database)?

Assume N=3, W=2, R=2. What happens when clients A and B read value Vinit for 
key K, change it to values Va and Vb respectively, and then store the values? 
Presumably both stores succeed, and the database is in inconsistent state. How 
is this resolved, since there is no order for Va and Vb?

&gt; 
&gt; siblings - use vclocks to monitor for conflicts, create siblings, and return 
&gt; the siblings to the client when a conflict occurs for it to be resolved by 
&gt; some application dependent logic

Here the end result is clear, both Va and Vb would be stored, and it would be 
up to the reader to decide which one is good.


</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg05440.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#05433">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#05433">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg05413.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg05412.html">documentation for allow_mult=false</a></span> <span class="sender italic">Justin Karneges</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg05414.html">Re: documentation for allow_mult=false</a></span> <span class="sender italic">Ryan Zezeski</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg05415.html">Re: documentation for allow_mult=false</a></span> <span class="sender italic">Justin Karneges</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg05420.html">Re: documentation for allow_mult=false</a></span> <span class="sender italic">Ryan Zezeski</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg05421.html">Re: documentation for allow_mult=false</a></span> <span class="sender italic">Justin Karneges</span></li>
<li class="icons-email"><span class="subject"><a href="msg05424.html">Re: documentation for allow_mult=false</a></span> <span class="sender italic">Jeremiah Peschka</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg05440.html">Re: documentation for allow_mult=fa...</a></span> <span class="sender italic">Mark Phillips</span></li>
</ul></li>
<li class="icons-email tSliceCur"><span class="subject">Re: documentation for allow_mult=false</span> <span class="sender italic">Tuure Laurinolli</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: documentation for allow_mult=false">
<input type="hidden" name="msgid" value="9CD36ED8-FB00-4A7E-9C6D-3F2D5D03EFC5@portalify.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg05433.html">
<input type="submit" value=" Tuure Laurinolli ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+documentation+for+allow_mult%3Dfalse%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg05440.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg05413.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">9CD36ED8-FB00-4A7E-9C6D-3F2D5D03EFC5@portalify.com</li>
</ul>
</div>
</body>
</html>
