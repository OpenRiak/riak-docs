<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Binary data</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#10452" id="c">
<link rel="index" href="maillist.html#10452" id="i">
<link rel="prev" href="msg10448.html" id="p">
<link rel="next" href="msg10454.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg10452.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Binary+data%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Binary data</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22OJ+Reeves%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">OJ Reeves</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20130314" rel="nofollow">Thu, 14 Mar 2013 18:44:49 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Kevin,

Please take a look at this sample application:</pre><pre>

<a  rel="nofollow" href="https://github.com/DistributedNonsense/CorrugatedIron.ImageStore">https://github.com/DistributedNonsense/CorrugatedIron.ImageStore</a>

I've just thrown it together for you. It is a sample Winforms application
which shows how to store and retrieve image data using CorrugatedIron. It's
not a production application by any means, but it does demonstrate how to
do what you're trying to do. All the images that are stored in Riak using
this sample application are accessible via cURL and render correctly. So if
you store an image, you should be able to use any other client to pull the
image down and view it in an image viewer.

The one thing to note is that in your code you were specifying a character
set of UTF8, which isn't correct for binary data.

Please take a look at the application and its source, it will show you what
to do.

HTH.
OJ

On Fri, Mar 15, 2013 at 8:28 AM, Kevin Burton &lt;rkevinbur...@charter.net&gt;wrote:

&gt; I know that if I specify an incorrect content type such as
&gt; application/json for the binary data then I get close to 6MB back so there
&gt; is some interpretation. ****
&gt;
&gt; ** **
&gt;
&gt; *From:* Kevin Burton [<a  rel="nofollow" href="mailto:rkevinbur...@charter.net">mailto:rkevinbur...@charter.net</a>]
&gt; *Sent:* Thursday, March 14, 2013 5:16 PM
&gt; *To:* 'Jeremiah Peschka'
&gt; *Cc:* 'riak-users'
&gt; *Subject:* RE: Binary data****
&gt;
&gt; ** **
&gt;
&gt; Good. Is this the correct way to do it? Basically it is a modification of
&gt; the program that I have been using for the JSON data. Here is the modified
&gt; code:****
&gt;
&gt;             string fileName = &quot;..\\..\\test.jpg&quot;;****
&gt;
&gt;             string bucket = &quot;images&quot;;****
&gt;
&gt;             byte[] buffer = File.ReadAllBytes(fileName);****
&gt;
&gt;             Debug.WriteLine(&quot;number of bytes read: &quot; + buffer.Length);****
&gt;
&gt; ** **
&gt;
&gt;             IRiakEndPoint cluster = RiakCluster.FromConfig(&quot;riakConfig&quot;);*
&gt; ***
&gt;
&gt;             IRiakClient riakClient = cluster.CreateClient();****
&gt;
&gt;             RiakResult pingResult = riakClient.Ping();****
&gt;
&gt;             if (pingResult.IsSuccess)****
&gt;
&gt;             {****
&gt;
&gt;                 RiakObject value = new RiakObject(bucket,****
&gt;
&gt;                                                   &quot;1.jpg&quot;,****
&gt;
&gt;                                                   buffer,****
&gt;
&gt;                                                   RiakConstants.
&gt; ContentTypes.ImageJpg,****
&gt;
&gt;                                                   RiakConstants.CharSets
&gt; .Utf8);****
&gt;
&gt;                 RiakResult&lt;RiakObject&gt; response = riakClient.Put(value);**
&gt; **
&gt;
&gt;                 if (!response.IsSuccess)****
&gt;
&gt;                 {****
&gt;
&gt;                     Debug.WriteLine(string.Format(&quot;Error ('{0}' - {1}:
&gt; Writing {2}&quot;,****
&gt;
&gt;                         response.ErrorMessage,****
&gt;
&gt;                         response.ResultCode,****
&gt;
&gt;                         &quot;1.jpg&quot;));****
&gt;
&gt;                 }****
&gt;
&gt;             }****
&gt;
&gt;         }****
&gt;
&gt; ** **
&gt;
&gt; *From:* Jeremiah Peschka 
&gt; [<a  rel="nofollow" href="mailto:jeremiah.pesc...@gmail.com">mailto:jeremiah.pesc...@gmail.com</a>&lt;jeremiah.pesc...@gmail.com&gt;]
&gt;
&gt; *Sent:* Thursday, March 14, 2013 4:57 PM
&gt; *To:* Kevin Burton
&gt; *Cc:* riak-users
&gt; *Subject:* Re: Binary data****
&gt;
&gt; ** **
&gt;
&gt; How are you reading the JPEG and saving it to Riak? A code sample would be
&gt; lovely.****
&gt;
&gt; ** **
&gt;
&gt; CorrugatedIron doesn't need a `--data-binary` option. All operations are
&gt; performed over the protocol buffers interface (barring several bucket
&gt; properties operations) - we don't alter any data that comes in to CI, we
&gt; just send and receive bytes on a socket. Much like curl, though, if you
&gt; send in junk data, CI is happily going to return that junk data back to you.
&gt; ****
&gt;
&gt;
&gt; ****
&gt;
&gt; ---****
&gt;
&gt; Jeremiah Peschka - Founder, Brent Ozar Unlimited****
&gt;
&gt; MCITP: SQL Server 2008, MVP****
&gt;
&gt; Cloudera Certified Developer for Apache Hadoop****
&gt;
&gt; ** **
&gt;
&gt; On Thu, Mar 14, 2013 at 2:12 PM, Kevin Burton &lt;rkevinbur...@charter.net&gt;
&gt; wrote:****
&gt;
&gt; I read on the FAQ how to get the same number of bytes as was stored:****
&gt;
&gt; When storing a non-text object like a PNG file in Riak and then retrieving
&gt; it with curl, it comes back a different size. For Example:****
&gt;
&gt; curl -i -*X* *PUT* --data *@*g005.*PNG_L* -*H* &quot;Content-Type: image/png&quot;
&gt; <a  rel="nofollow" href="http://sfdev02:8098/luwak/g005.PNG_L****">http://sfdev02:8098/luwak/g005.PNG_L****</a>
&gt;
&gt; Curl will try to convert non-ASCII characters in PUT and POST bodies. Use
&gt; the --data-binary flag to turn this off:****
&gt;
&gt; curl -i -*X* *PUT* --data-binary *@*g005.*PNG_L* -*H* &quot;Content-Type:
&gt; image/png&quot; <a  rel="nofollow" href="http://sfdev02:8098/luwak/g005.PNG_L****">http://sfdev02:8098/luwak/g005.PNG_L****</a>
&gt;
&gt;  ****
&gt;
&gt; Is there an option like ‘—data-binary’ for CorrugatedIron? I am ‘put’ing
&gt; what should be binary data but if I retrieve the data with curl I get a
&gt; different size and if the binary data is a jpeg image it comes back as
&gt; corrupted?****
&gt;
&gt;  ****
&gt;
&gt;
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com****">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com****</a>
&gt;
&gt; ** **
&gt;
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;
&gt;


-- 

OJ Reeves
+61 431 952 586
<a  rel="nofollow" href="http://buffered.io/">http://buffered.io/</a>
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg10448.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#10452">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#10452">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg10454.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg10440.html">Binary data</a></span> <span class="sender italic">Kevin Burton</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg10444.html">Re: Binary data</a></span> <span class="sender italic">Jeremiah Peschka</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg10447.html">RE: Binary data</a></span> <span class="sender italic">Kevin Burton</span></li>
<li class="icons-email"><span class="subject"><a href="msg10448.html">RE: Binary data</a></span> <span class="sender italic">Kevin Burton</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Binary data</span> <span class="sender italic">OJ Reeves</span></li>
<li class="icons-email"><span class="subject"><a href="msg10454.html">Re: Binary data</a></span> <span class="sender italic">Kresten Krab Thorup</span></li>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Binary data">
<input type="hidden" name="msgid" value="CAG63A8tPmpeDrAqTy3L+htwi_iE=O_hd3JbJ7nRU5QvneyyZhg@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg10452.html">
<input type="submit" value=" OJ Reeves ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Binary+data%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg10448.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg10454.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CAG63A8tPmpeDrAqTy3L+htwi_iE=O_hd3JbJ7nRU5QvneyyZhg@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
