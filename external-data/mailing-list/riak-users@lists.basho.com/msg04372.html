<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Connection Pool with Erlang PB Client Necessary?</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="thrd2.html#04372" id="c">
<link rel="index" href="maillist.html#04372" id="i">
<link rel="prev" href="msg04074.html" id="p">
<link rel="next" href="msg04070.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg04372.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Connection+Pool+with+Erlang+PB+Client+Necessary%5C%3F%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Connection Pool with Erlang PB Client Necessary?</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Andrew+Berman%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Andrew Berman</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20110815" rel="nofollow">Mon, 15 Aug 2011 00:24:30 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>So I looked at a bunch of pooling applications and none of them really
have the functionality and flexibility I'm used to with Java
connection pools.  So, I created my own OTP pooling application,
Pooly.  It allows multiple pools to be configured, has flexibility on
configuring the pool (idle timeout, max age of processes, initial
count, acquire increment, max pool size, and min pool size) and
reduces the size of the pool based on the configuration parameters.</pre><pre>

Feel free to check it out: <a  rel="nofollow" href="https://github.com/aberman/pooly">https://github.com/aberman/pooly</a>

--Andrew

On Tue, Jul 26, 2011 at 12:20 PM, Justin Sheehy &lt;jus...@basho.com&gt; wrote:
&gt; Yes, Andrew -- that is a fine approach to using a connection pool.
&gt;
&gt; Go for it.
&gt;
&gt; -Justin
&gt;
&gt;
&gt;
&gt; On Tue, Jul 26, 2011 at 3:18 PM, Andrew Berman &lt;rexx...@gmail.com&gt; wrote:
&gt;&gt; Thanks for all the replies guys!
&gt;&gt;
&gt;&gt; I just want to make sure I'm totally clear on this.  Bob's solution
&gt;&gt; would work well with my design.  So basically, this would be the
&gt;&gt; workflow?
&gt;&gt;
&gt;&gt; 1.  check out connection from the pool
&gt;&gt; 2.  set client id on connection (which would have some static and some
&gt;&gt; random component)
&gt;&gt; 3.  perform multiple operations (gets, puts, etc.) which would be seen
&gt;&gt; as a single &quot;transaction&quot;
&gt;&gt; 4.  check in the connection to the pool
&gt;&gt;
&gt;&gt; This way once the connection is checked out from the pool, if another
&gt;&gt; user comes along he cannot get that same connection until it has been
&gt;&gt; checked back in, which would meet Justin's requirements.  However,
&gt;&gt; each time it's checked out, a new client id is created.
&gt;&gt;
&gt;&gt; Does this sound reasonable and in line with proper client id usage?
&gt;&gt;
&gt;&gt; Thanks again!
&gt;&gt;
&gt;&gt; Andrew
&gt;&gt;
&gt;&gt;
&gt;&gt; On Tue, Jul 26, 2011 at 11:55 AM, Justin Sheehy &lt;jus...@basho.com&gt; wrote:
&gt;&gt;&gt; The simplest guidance on client IDs that I can give:
&gt;&gt;&gt;
&gt;&gt;&gt; If two mutation (PUT) operations could occur concurrently or without
&gt;&gt;&gt; awareness of each other, then they should have different client IDs.
&gt;&gt;&gt;
&gt;&gt;&gt; As a result of the above: if you are sharing a connection, then you
&gt;&gt;&gt; should use a different client ID for each separate user of that
&gt;&gt;&gt; connection.
&gt;&gt;&gt;
&gt;&gt;&gt; -Justin
&gt;&gt;&gt;
&gt;&gt;
&gt;

_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg04074.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="thrd2.html#04372">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#04372">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg04070.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg04059.html">Connection Pool with Erlang PB Client Necessary?</a></span> <span class="sender italic">Andrew Berman</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg04067.html">Re: Connection Pool with Erlang PB Client Necessary?</a></span> <span class="sender italic">Bryan O'Sullivan</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg04068.html">Re: Connection Pool with Erlang PB Client Necess...</a></span> <span class="sender italic">Andrew Berman</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg04069.html">Re: Connection Pool with Erlang PB Client Ne...</a></span> <span class="sender italic">Bryan O'Sullivan</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg04071.html">Re: Connection Pool with Erlang PB Clien...</a></span> <span class="sender italic">Justin Sheehy</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg04072.html">Re: Connection Pool with Erlang PB ...</a></span> <span class="sender italic">Andrew Berman</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg04073.html">Re: Connection Pool with Erlang...</a></span> <span class="sender italic">Justin Sheehy</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg04074.html">Re: Connection Pool with Er...</a></span> <span class="sender italic">Andrew Berman</span></li>
<li class="icons-email tSliceCur"><span class="subject">Re: Connection Pool with Er...</span> <span class="sender italic">Andrew Berman</span></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg04070.html">Re: Connection Pool with Erlang PB Client Ne...</a></span> <span class="sender italic">Bob Ippolito</span></li>
<li class="icons-email"><span class="subject"><a href="msg04120.html">Re: Connection Pool with Erlang PB Client Ne...</a></span> <span class="sender italic">Joel Meyer</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg04125.html">Re: Connection Pool with Erlang PB Clien...</a></span> <span class="sender italic">Andrew Berman</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Connection Pool with Erlang PB Client Necessary?">
<input type="hidden" name="msgid" value="CAEVpa74q_LkE55jAvJeA1hZ3VmqU6iEbmqkGccbaerG9E052Ug@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg04372.html">
<input type="submit" value=" Andrew Berman ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Connection+Pool+with+Erlang+PB+Client+Necessary%5C%3F%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg04074.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg04070.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CAEVpa74q_LkE55jAvJeA1hZ3VmqU6iEbmqkGccbaerG9E052Ug@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
