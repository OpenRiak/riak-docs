<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: secondary indexes: how fast they are?</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="thrd2.html#05305" id="c">
<link rel="index" href="mail2.html#05305" id="i">
<link rel="prev" href="msg05303.html" id="p">
<link rel="next" href="msg05292.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg05305.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+secondary+indexes%5C%3A+how+fast+they+are%5C%3F%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: secondary indexes: how fast they are?</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Antonio+Rohman+Fernandez%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Antonio Rohman Fernandez</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20111025" rel="nofollow">Tue, 25 Oct 2011 09:25:15 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi Rusty,

Thanks for the explanation! then secondary indexes perfectly matches my needs 
at the moment.
It could be good if more than one secondary index could be queried at the same 
time... maybe future feature?</pre><pre>

Thanks,
Roman


                Antonio Rohman Fernandez
CEO, Founder &amp; Lead Engineer
roh...@mahalostudio.com
        Projects
MaruBatsu.es
PupCloud.com
Wedding Album
 

On Oct 26, 2011, at 12:00 AM, Rusty Klophaus wrote:

&gt; Hi Antonio,
&gt; 
&gt; Yes, a Secondary Index query is much faster than using a bucket input or key 
&gt; filter. This is one of the reasons why we built Secondary Indexes, so this is 
&gt; definitely a recommended use case.
&gt; 
&gt; Behind the scenes, the bucket input or key filter must examine all keys in 
&gt; the system to pick out matching keys. Some backends do this more efficiently 
&gt; than others, but in the general case it's an expensive operation in terms of 
&gt; CPU and possibly disk, and not one we recommend you run frequently.
&gt; 
&gt; A Secondary Index query, on the other hand, simply needs to read from the 
&gt; index. This operation generally takes a few disk seeks, less if that section 
&gt; of disk is cached in memory, and it is an operation you can run within web 
&gt; response time.
&gt; 
&gt; Best,
&gt; Rusty
&gt; 
&gt; On Tue, Oct 25, 2011 at 2:14 AM, Antonio Rohman Fernandez 
&gt; &lt;roh...@mahalostudio.com&gt; wrote:
&gt; Hi all,
&gt; 
&gt; I remember a previous discussion in the mailing-list about doing mapreduce 
&gt; over an entire bucket '{&quot;inputs&quot;:&quot;products&quot;,&quot;query&quot;:[...]}' being very slow 
&gt; independently of how many items that bucket would have stored in as Riak 
&gt; would have to scan all memory in search for the keys, etc... so... how about 
&gt; secondary indexes? are they a good alternative? faster? slow too?
&gt; 
&gt; if I want to get all products with category &quot;sport&quot; using secondary indexes 
&gt; like this:
&gt; <a  rel="nofollow" href="http://xx.xx.xx.xx:8098/buckets/products/index/category_bin/sport">http://xx.xx.xx.xx:8098/buckets/products/index/category_bin/sport</a>
&gt; =&gt; {&quot;keys&quot;: [&quot;productA&quot;,&quot;productB&quot;,...,&quot;productN&quot;]}
&gt; 
&gt; Will the keys array come in an speed-decent result? or wouldn't it be 
&gt; recommended?
&gt; 
&gt; Thanks,
&gt; Rohman
&gt; 
&gt;               Antonio Rohman Fernandez
&gt; CEO, Founder &amp; Lead Engineer
&gt; roh...@mahalostudio.com               Projects
&gt; MaruBatsu.es
&gt; PupCloud.com
&gt; Wedding Album
&gt; 
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt; 
&gt; 
&gt; 
&gt; 
&gt; -- 
&gt; Rusty Klophaus
&gt; 
&gt; Basho Technologies, Inc.
&gt; 11921 Freedom Drive, Suite 550
&gt; Reston, VA 20190
&gt; www.basho.com
&gt; 
&gt; 

</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg05303.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="thrd2.html#05305">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="mail2.html#05305">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg05292.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg05291.html">secondary indexes: how fast they are?</a></span> <span class="sender italic">Antonio Rohman Fernandez</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg05303.html">Re: secondary indexes: how fast they are?</a></span> <span class="sender italic">Rusty Klophaus</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: secondary indexes: how fast they are...</span> <span class="sender italic">Antonio Rohman Fernandez</span></li>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: secondary indexes: how fast they are?">
<input type="hidden" name="msgid" value="5DD9811D-98A6-48BA-BEB4-2CD8C1AC323B@mahalostudio.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg05305.html">
<input type="submit" value=" Antonio Rohman Fernandez ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+secondary+indexes%5C%3A+how+fast+they+are%5C%3F%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg05303.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg05292.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">5DD9811D-98A6-48BA-BEB4-2CD8C1AC323B@mahalostudio.com</li>
</ul>
</div>
</body>
</html>
