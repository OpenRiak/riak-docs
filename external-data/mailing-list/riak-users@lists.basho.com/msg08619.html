<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: efficiency of listing a bucket's keys</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#08619" id="c">
<link rel="index" href="maillist.html#08619" id="i">
<link rel="prev" href="msg08618.html" id="p">
<link rel="next" href="msg08622.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg08619.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+efficiency+of+listing+a+bucket%27s+keys%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: efficiency of listing a bucket's keys</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Kelly+McLaughlin%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Kelly McLaughlin</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20120920" rel="nofollow">Thu, 20 Sep 2012 18:52:21 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi Dave. It is correct that listing all the keys in a bucket can be expensive. 
The extent of that expense depends on a few things like the size of your 
cluster (both physical nodes and vnodes), the backend you use, and the amount 
of data you have stored. The $key index can be useful if you are targeting a 
range of keys in the bucket and can be less expensive, but you must specify 
either an exact match key or a range of keys when using it. There is also the 
$bucket index that lets you do the equivalent of listing all the keys in the 
bucket, but it will be just as expensive as a normal key listing and in fact 
the two follow almost identical code paths. Hope this helps shed some more 
light on it for you. Let me know if you have any further questions.</pre><pre>

Kelly

On Sep 20, 2012, at 6:22 PM, David Lowell &lt;d...@go2ctv.com&gt; wrote:

&gt; I've been learning Riak this week, which has been a lot of fun. There sure 
&gt; are a lot of warnings in the documentation about how slow listing all the 
&gt; keys in a bucket can be. However, I would assume that it would be efficient 
&gt; to list the keys in a bucket using the implicit 2i index &quot;$key&quot;. Am I wrong?
&gt; 
&gt; I would like to be able to run a map-reduce job over the keys in a bucket, 
&gt; and use key-filtering to select the specific keys I need to operate on. Since 
&gt; most of the documentation examples of key filtering use the entire bucket as 
&gt; the input to the map reduce, we would expect those examples not to scale 
&gt; well. However, since it seems we can reference the secondary index $key as a 
&gt; map-reduce input, that seems like an efficient alternative. Please shoot me 
&gt; down if I'm mistaken.
&gt; 
&gt; Thank you for the help!
&gt; 
&gt; Dave
&gt; 
&gt; --
&gt; Dave Lowell
&gt; d...@connectv.com
&gt; 
&gt; 
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>


_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg08618.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#08619">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#08619">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg08622.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg08618.html">efficiency of listing a bucket's keys</a></span> <span class="sender italic">David Lowell</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: efficiency of listing a bucket's keys</span> <span class="sender italic">Kelly McLaughlin</span></li>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: efficiency of listing a bucket's keys">
<input type="hidden" name="msgid" value="3204CC13-E17C-4623-89C0-D2F501DF45C6@basho.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg08619.html">
<input type="submit" value=" Kelly McLaughlin ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+efficiency+of+listing+a+bucket%27s+keys%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg08618.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg08622.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">3204CC13-E17C-4623-89C0-D2F501DF45C6@basho.com</li>
</ul>
</div>
</body>
</html>
