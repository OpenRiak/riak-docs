<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Hey, Python client users</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#05187" id="c">
<link rel="index" href="maillist.html#05187" id="i">
<link rel="prev" href="msg05181.html" id="p">
<link rel="next" href="msg05203.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg05187.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Hey%2C+Python+client+users%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Hey, Python client users</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Greg+Stein%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Greg Stein</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20111018" rel="nofollow">Tue, 18 Oct 2011 08:12:29 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>On Mon, Oct 17, 2011 at 15:13, Russell Brown &lt;russel...@basho.com&gt; wrote:
&gt;
&gt; On 16 Oct 2011, at 06:18, Greg Stein wrote:
&gt;
&gt;&gt; Hey all,
&gt;&gt;
&gt;&gt; The Basho folks have been slow to integrate changes, given their busy
&gt;&gt; schedule with the 1.0 release.
&gt;
&gt; This is true. Sorry. But we are now putting some time into the client 
&gt; libraries in general and the python client in particular.</pre><pre>

No need to apologize! I'd much rather you work on the 1.0 release than
the libraries! I can fix the libraries to my needs; I have *no* idea
how to fix Riak itself. Go wild :-)

&gt;&gt; I've had a couple branches hanging out
&gt;&gt; for a while to deal with HTTP problems and to deal with Issue #53.
&gt;&gt; They've been separate for better review/merging by Basho, but it
&gt;&gt; finally created too many problems for my own work to keep them
&gt;&gt; separate. I've just now merged them into a single branch so that I can
&gt;&gt; get my own work done.
&gt;
&gt; Yeah, I started merging your P/Rs in a while back, but then the last 2 
&gt; conflict with a couple of P/Rs from Brett Hoerner. I guess at the point  we 
&gt; stalled as there is some decision to be made about the best way to handle 
&gt; pooling.

RIght. Timeouts are needed; Brett is spot-on with that. They're
definitely needed for a production system. The open question is how to
work them into the client, and that depends upon the development
direction.

&gt; I'm reading over both Brett and your changes today.
&gt;
&gt; There is quite some work to merge the commits you've been doing into the 
&gt; official repo, but I'd like to get that done rather than have a competing 
&gt; fork.

To be clear: I'm not attempting to create a long-term competing fork.
I've been using my 'newhttp' branch for proper connections to Riak,
but then I smashed into the lack of .store() returning an identifier.
In the past, I kinda switched branches based on whether I needed good
http work, or .store to work... but I got tired of that. So I created
a new branch and merged it all. And I like to share my work, I like to
help people, and I like feedback. If my fully-merged branch can help
people? Great. Win.

But no... I expect that when you guys (Basho) have cycles, that we'll
figure out the right approach for connection management and get the
committed, and my branches will disappear.

&gt;...
&gt;&gt; Anyhow, enough description. If you're using Python, then I'd highly 
&gt;&gt; recommend:
&gt;&gt;  <a  rel="nofollow" href="https://github.com/gstein/riak-python-client/tree/proper">https://github.com/gstein/riak-python-client/tree/proper</a>
&gt;&gt;
&gt;&gt; I hope that helps, and let me know if you run into any problems with it.
&gt;
&gt; Would you recommend taking this fork and merging it with the 
&gt; basho/riak-python-client?

I'm building a business based on that branch. So yeah: I have complete
faith in it. I fully believe it is the correct direction to go for the
Python client.

But: I also sent the P/R to create a discussion on the approach (since
Brett has a different approach, I felt discussion was warranted). I
think it is the right approach, but I did not want to invest time in
full documentation if it was to be rejected. So a merge would be
great, but further documentation would be needed before the next
client release. There will be some test updates since my code
simplifies the set of transports. There is some deprecation of the old
APIs that needs to happen, and I set up the prep-work for that, but
didn't bother with all of that since I was waiting on selection.

The short answer: my branch puts connection management into the
transport, and Brett's patches puts that into the client. A decision
needs to be made, and that will determine future work. I've previously
emailed with an explanation for why I believe the transport class
should handle this (via a connection manager), and why (IMO) the
client should not be worrying about it. Making this decision removes
blocks for future changes (eg. timeouts).

Anyway... I'd merge 'proper' into the upstream master branch (to fix
http and issue 53), and then I'd be on the hook for documentation,
test changes, backwards compat work, etc. I believe it is totally the
right direction.

Cheers,
-g

_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg05181.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#05187">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#05187">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg05203.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg05176.html">Hey, Python client users</a></span> <span class="sender italic">Greg Stein</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg05181.html">Re: Hey, Python client users</a></span> <span class="sender italic">Russell Brown</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Hey, Python client users</span> <span class="sender italic">Greg Stein</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg05203.html">Re: Hey, Python client users</a></span> <span class="sender italic">Greg Stein</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg05204.html">Re: Hey, Python client users</a></span> <span class="sender italic">Russell Brown</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg05205.html">Re: Hey, Python client users</a></span> <span class="sender italic">Greg Stein</span></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg05186.html">Re: Hey, Python client users</a></span> <span class="sender italic">Soren Hansen</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg05188.html">Re: Hey, Python client users</a></span> <span class="sender italic">Greg Stein</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg05194.html">Re: Hey, Python client users</a></span> <span class="sender italic">Soren Hansen</span></li>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Hey, Python client users">
<input type="hidden" name="msgid" value="CABD8fLWN2RVK7RmsJOfdfCvaz-jO=j-qccyftCYp-Apf1nrDEQ@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg05187.html">
<input type="submit" value=" Greg Stein ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Hey%2C+Python+client+users%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg05181.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg05203.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CABD8fLWN2RVK7RmsJOfdfCvaz-jO=j-qccyftCYp-Apf1nrDEQ@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
