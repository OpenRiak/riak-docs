<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Do developers need to sanitize JSON input before sending to Riak	Client?</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#15363" id="c">
<link rel="index" href="maillist.html#15363" id="i">
<link rel="prev" href="msg15360.html" id="p">
<link rel="next" href="msg15364.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg15363.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Do+developers+need+to+sanitize+JSON+input+before+sending+to+Riak%09Client%5C%3F%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Do developers need to sanitize JSON input before sending to Riak	Client?</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Jason+Campbell%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Jason Campbell</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20141212" rel="nofollow">Fri, 12 Dec 2014 15:24:30 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Exactly, SQL injection happens because people construct SQL statements 
themselves and aren’t aware of correct escaping edge cases.  Use a library to 
convert between Ruby and JSON, and you’ll be fine on that front.  The same 
applies to SQL really.  SQL injection is impossible if you pass Ruby objects 
directly into an SQL library and let it escape them.</pre><pre>

Security as a topic is much too large to cover in a mailing list, but the same 
principle applies.  Use proven libraries, and don’t try to do too much security 
yourself.  It’s hard, and you will most likely get it wrong.  Especially crypto.

Specific to Riak though, ensure you lock it down.  It applies to any database 
really, but if you can, remove any direct internet access from the boxes, 
firewall every port you can.  If you are using protocol buffers, you can 
disable HTTP access as well, it makes it a bit harder for an attacker.  Run 
Riak on a non-standard port, firewall communication between the Riak nodes.  
Riak can also use a TLS certificate to encrypt handoff traffic which can 
prevent data interception between Riak nodes.

That is by no means a complete list, but a starting point at least.  Security 
is a mindset, remove anything you don’t need, because the more tools you give 
an attacker, the worse things get, even if you think they are harmless.

Hope that helps,
Jason

&gt; On 13 Dec 2014, at 02:28, Kyle Marek-Spartz &lt;kyle.marek.spa...@gmail.com&gt; 
&gt; wrote:
&gt; 
&gt; Ruby should &quot;do the right thing&quot; and escape your content appropriately,
&gt; that is, if you have a Ruby hash of:
&gt; 
&gt; {'test' =&gt; 'yes&quot;, &quot;injection&quot;: &quot;oops!&quot;'}
&gt; 
&gt; JSON.dump will give you:
&gt; 
&gt; {&quot;test&quot;:&quot;yes\&quot;, \&quot;injection\&quot;: \&quot;oops!\&quot;&quot;}
&gt; 
&gt; 
&gt; J. Austin Hughey writes:
&gt; 
&gt;&gt; Thank you very much for the explanation, Jason. My example attack was 
&gt;&gt; probably a bit “off”, but the basic use case I’m thinking of is an API. Say 
&gt;&gt; I have an API that accepts JSON. The user has “spoofed” the JSON input to 
&gt;&gt; the API, possibly setting an “admin” flag or something (doesn’t matter what, 
&gt;&gt; specifically, just an example of how a property may be set). Assuming no 
&gt;&gt; other business logic validation (which of course I DEFINITELY plan to 
&gt;&gt; implement), I was simply curious if, when sending info directly to Riak as 
&gt;&gt; JSON, if the client did anything to sanitize input from injection.
&gt;&gt; 
&gt;&gt; Think SQL injection, but JSON instead. Data is data, representation 
&gt;&gt; implementation differs, but the same concerns apply. I’m just trying to see 
&gt;&gt; what I need to do to prevent that injection-style attack from happening.
&gt;&gt; 
&gt;&gt; Sounds like, based on your response (thanks again, by the way!), I need to 
&gt;&gt; validate the Ruby object after it’s created and ensure no invalid attributes 
&gt;&gt; or values exist, prior to its being sent to Riak.
&gt;&gt; 
&gt;&gt; Any additional thoughts on other security concerns I should have here? I’m 
&gt;&gt; new to “NoSQL” and I like Riak due to its operational model, so I’d like to 
&gt;&gt; use it more often. I just need to know what I’m doing before I put an app 
&gt;&gt; out into the wild!
&gt;&gt; 
&gt;&gt; Thanks again.
&gt; 
&gt; --
&gt; Kyle Marek-Spartz


_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg15360.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#15363">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#15363">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg15364.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg15356.html">Do developers need to sanitize JSON input before sending...</a></span> <span class="sender italic">J. Austin Hughey</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg15358.html">Re: Do developers need to sanitize JSON input befor...</a></span> <span class="sender italic">Jason Campbell</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg15359.html">Re: Do developers need to sanitize JSON input b...</a></span> <span class="sender italic">J. Austin Hughey</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg15360.html">Re: Do developers need to sanitize JSON inp...</a></span> <span class="sender italic">Kyle Marek-Spartz</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Do developers need to sanitize JSON...</span> <span class="sender italic">Jason Campbell</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg15364.html">Re: Do developers need to sanitize...</a></span> <span class="sender italic">J. Austin Hughey</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Do developers need to sanitize JSON input before sending to Riak	Client?">
<input type="hidden" name="msgid" value="47B98EBF-145F-4EBB-8FC3-9CD181A4263D@xiaclo.net">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg15363.html">
<input type="submit" value=" Jason Campbell ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Do+developers+need+to+sanitize+JSON+input+before+sending+to+Riak%09Client%5C%3F%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg15360.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg15364.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">47B98EBF-145F-4EBB-8FC3-9CD181A4263D@xiaclo.net</li>
</ul>
</div>
</body>
</html>
