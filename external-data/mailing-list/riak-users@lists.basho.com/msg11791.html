<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Querying multiple 2i via Intersections</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="thrd12.html#11791" id="c">
<link rel="index" href="mail12.html#11791" id="i">
<link rel="prev" href="msg11790.html" id="p">
<link rel="next" href="msg11792.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg11791.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Querying+multiple+2i+via+Intersections%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Querying multiple 2i via Intersections</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Guido+Medina%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Guido Medina</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20130727" rel="nofollow">Sat, 27 Jul 2013 08:46:16 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<tt>Are you saying that you can join two 2i indexes? Let's say you have a 2i 
</tt><tt>named &quot;date&quot; and another named &quot;category&quot; so you could get a list of 
</tt><tt>modified objects on a date and for a specific category with Riak Search?
</tt><pre style="margin: 0em;">

Guido.</pre><pre>

On 27/07/13 16:32, Jeremiah Peschka wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><tt>Both Riak Search (currently) and Yokozuna (future) provide the ability 
</tt><tt>to perform joins of multiple indices on the same bucket objects.
</tt><pre style="margin: 0em;">

</pre><tt>I find it best to think of 2i as an extension of what Riak KV already 
</tt><tt>does well - fast key based lookups.
</tt><pre style="margin: 0em;">

Search and Yokozuna provide complex query semantics.

---
Jeremiah Peschka - Founder, Brent Ozar Unlimited
MCITP: SQL Server 2008, MVP
Cloudera Certified Developer for Apache Hadoop


</pre><tt>On Sat, Jul 27, 2013 at 11:16 AM, Guido Medina 
</tt><tt>&lt;guido.med...@temetra.com &lt;<a  rel="nofollow" href="mailto:guido.med...@temetra.com">mailto:guido.med...@temetra.com</a>&gt;&gt; wrote:
</tt><pre style="margin: 0em;">

    Rohman,

    I think the reason for this is that the cluster will have to do
    the whole intersection in memory, 2i only provides queries for 1
    single index and then return that result to either the client
    streaming or not, intersection indeed will require a MapReduce job
    to get a hold of both lists and intersect it, honestly, I wish
    that was possible, I think that's why I'm learning Erlang at the
    moment, we all wanted &quot;join&quot; like functionality with 2i to be
    honest but I don't think that is going to happen before version
    1.5 if ever.

    If you noticed, Riak 1.4 added 2i streaming which IMHO is like
    moving farer away from handling results in memory, if you get the
    point of what I mean. Join 2i queries in Riak will be an issue for
    a long time.

    HTH,

    Guido.


    On 27/07/13 14:20, Antonio Rohman Fernandez wrote:

        Hi there,

        I didn't fully check the new release notes yet, but I guess
        that Riak 1.4 doesn't have the ability to query multiple 2i at
        the same time... how difficult may be to implement a multiple
        2i query via their intersecting items in their arrays? Maybe
        we could have this in future versions?

        I normally do this with scripts before doing a MapReduce, if
        the data I want to look for is having 2 indexes conditions, I
        get the array of items of each 2i query, then get only the
        items found on both arrays and use it as a MapReduce input list.

        However, done in my app's side is a bit costly as Riak needs
        to give me the full items arrays and then I need to process
        them to find repeated keys.

        I really wish for Riak to be able to query multiple 2i soon as
        it will help a lot.

        Merci,
        Rohman

        Sent from my iPhone
        _______________________________________________
        riak-users mailing list
        riak-users@lists.basho.com &lt;<a  rel="nofollow" href="mailto:riak-users@lists.basho.com">mailto:riak-users@lists.basho.com</a>&gt;
        <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>



    _______________________________________________
    riak-users mailing list
    riak-users@lists.basho.com &lt;<a  rel="nofollow" href="mailto:riak-users@lists.basho.com">mailto:riak-users@lists.basho.com</a>&gt;
    <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>




_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre></blockquote><pre style="margin: 0em;">

</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg11790.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="thrd12.html#11791">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="mail12.html#11791">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg11792.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg11787.html">Querying multiple 2i via Intersections</a></span> <span class="sender italic">Antonio Rohman Fernandez</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg11788.html">Re: Querying multiple 2i via Intersections</a></span> <span class="sender italic">Guido Medina</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg11790.html">Re: Querying multiple 2i via Intersectio...</a></span> <span class="sender italic">Jeremiah Peschka</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Querying multiple 2i via Interse...</span> <span class="sender italic">Guido Medina</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg11792.html">Re: Querying multiple 2i via Int...</a></span> <span class="sender italic">Antonio Rohman Fernandez</span></li>
<li class="icons-email"><span class="subject"><a href="msg11793.html">Re: Querying multiple 2i via Int...</a></span> <span class="sender italic">Jeremiah Peschka</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg11795.html">Re: Querying multiple 2i vi...</a></span> <span class="sender italic">Guido Medina</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Querying multiple 2i via Intersections">
<input type="hidden" name="msgid" value="51F3EAF0.8000301@temetra.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg11791.html">
<input type="submit" value=" Guido Medina ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Querying+multiple+2i+via+Intersections%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg11790.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg11792.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">51F3EAF0.8000301@temetra.com</li>
</ul>
</div>
</body>
</html>
