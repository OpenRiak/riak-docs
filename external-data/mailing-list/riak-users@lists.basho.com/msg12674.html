<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Question about Hooks & Nodes</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="thrd8.html#12674" id="c">
<link rel="index" href="mail8.html#12674" id="i">
<link rel="prev" href="msg12671.html" id="p">
<link rel="next" href="msg12675.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg12674.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Question+about+Hooks+%5C%26+Nodes%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Question about Hooks & Nodes</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Sam+Elliott%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Sam Elliott</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20131017" rel="nofollow">Thu, 17 Oct 2013 11:30:43 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>On Thursday, 17 October 2013 at 12:45PM, Eric Redmond wrote:
&gt; Apologies that it's unclear, and I'll update the docs to correct this.
&gt; 
&gt; <a  rel="nofollow" href="http://docs.basho.com/riak/latest/ops/advanced/install-custom-code/">http://docs.basho.com/riak/latest/ops/advanced/install-custom-code/</a>
&gt; 
&gt; When you install custom code, you must install that code on every node.
&gt; 
&gt; Eric
&gt; 
&gt; On Oct 17, 2013, at 9:17 AM, Tristan Foureur &lt;e...@me.com 
&gt; (<a  rel="nofollow" href="mailto:e...@me.com">mailto:e...@me.com</a>)&gt; wrote:
&gt; &gt; Hi,
&gt; &gt; 
&gt; &gt; My question is simple, but really I cannot find a clear answer anywhere in 
&gt; &gt; the documentation. I understand how a cluster works, and how a hook works, 
&gt; &gt; but if you have a hook on a certain bucket and commit to a node on that 
&gt; &gt; bucket, is the hook triggered only on that node, on all the nodes, or only 
&gt; &gt; on the nodes that will actually host that key?
The hook is only triggered on one node, the write coordinator. </pre><pre>

This is not always the exact same node that you sent the request to. 

Because you can't predict which node the coordinator will be on, the code must 
be loaded on every single node, as Eric pointed out.

Sam 
&gt; &gt; 
&gt; &gt; I ask this because I deployed my pre-commit hook to one node only, and then 
&gt; &gt; sometimes the insert failed telling me my precommit hook was &quot;undef&quot;, and 
&gt; &gt; it was fixed by deploying the hook to all vnodes.
&gt; &gt; 
&gt; &gt; Thanks! _______________________________________________
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com (<a  rel="nofollow" href="mailto:riak-users@lists.basho.com">mailto:riak-users@lists.basho.com</a>)
&gt; &gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt; 
&gt; 
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com (<a  rel="nofollow" href="mailto:riak-users@lists.basho.com">mailto:riak-users@lists.basho.com</a>)
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>




_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg12671.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="thrd8.html#12674">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="mail8.html#12674">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg12675.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg12668.html">Question about Hooks &amp; Nodes</a></span> <span class="sender italic">Tristan Foureur</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg12671.html">Re: Question about Hooks &amp; Nodes</a></span> <span class="sender italic">Eric Redmond</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Question about Hooks &amp; Nodes</span> <span class="sender italic">Sam Elliott</span></li>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Question about Hooks &amp; Nodes">
<input type="hidden" name="msgid" value="71614A4981D94B91809D9EDCC25CEDBB@basho.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg12674.html">
<input type="submit" value=" Sam Elliott ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Question+about+Hooks+%5C%26+Nodes%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg12671.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg12675.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">71614A4981D94B91809D9EDCC25CEDBB@basho.com</li>
</ul>
</div>
</body>
</html>
