<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Lots of sparse columns. Efficient like Cassandra? Some measures	of my dataset</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="thrd13.html#11570" id="c">
<link rel="index" href="mail14.html#11570" id="i">
<link rel="prev" href="msg11568.html" id="p">
<link rel="next" href="msg11569.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg11570.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Lots+of+sparse+columns.+Efficient+like+Cassandra%5C%3F+Some+measures%09of+my+dataset%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Lots of sparse columns. Efficient like Cassandra? Some measures	of my dataset</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22gbrits%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">gbrits</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20130717" rel="nofollow">Wed, 17 Jul 2013 07:07:09 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Each key-column value actually already is a rollup of a sparse matrix
(which is why the uncompressed key-column values are always exactly the
same length when they exist)
Having just watched that great talk (thanks) it's extremely similar to how
the guys at Boundary are rolling up their data. Validates the approach
which is awesome!</pre><pre>

Having just learned from that same talk that when using LevelDB keys don't
have to remain in mem, I'm just going with the logical &lt;keyIndex, colIndex&gt;
as my new aggregated keys, each having a rolledup sparse matrix as a value.
Hope that made any sense.

Anyway, this feels great!


2013/7/17 Sean Cribbs-2 [via Riak Users] &lt;
ml-node+s197444n4028370...@n3.nabble.com&gt;

&gt; Just to add to Jeremiah's comments, I think you should consider whether
&gt; you will be mostly retrieving:
&gt;
&gt; 1) all 1000 columns
&gt; 2) some subset of columns
&gt; 3) single columns
&gt;
&gt; That will greatly influence how you design your keyspace. Remember, with
&gt; Riak it's just key-value in the end. This is one of my favorite examples of
&gt; building a column-like system on top of pure key-value, Boundary's
&gt; &quot;Kobayashi&quot; system: <a  rel="nofollow" href="https://vimeo.com/42902962">https://vimeo.com/42902962</a>
&gt;
&gt;
&gt; On Wed, Jul 17, 2013 at 7:25 AM, Jeremiah Peschka &lt;[hidden 
&gt; email]&lt;<a  rel="nofollow" href="http://user/SendEmail.jtp?type=node&amp;node=4028370&amp;i=0">http://user/SendEmail.jtp?type=node&amp;node=4028370&amp;i=0</a>&gt;
&gt; &gt; wrote:
&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; --
&gt;&gt; Jeremiah Peschka - Founder, Brent Ozar Unlimited
&gt;&gt; MCITP: SQL Server 2008, MVP
&gt;&gt; Cloudera Certified Developer for Apache Hadoop
&gt;&gt;
&gt;&gt; On Jul 17, 2013, at 4:38 AM, gbrits &lt;[hidden 
&gt;&gt; email]&lt;<a  rel="nofollow" href="http://user/SendEmail.jtp?type=node&amp;node=4028370&amp;i=1">http://user/SendEmail.jtp?type=node&amp;node=4028370&amp;i=1</a>&gt;&gt;
&gt;&gt; wrote:
&gt;&gt;
&gt;&gt; &gt; Somewhere (can't find it now) I've read that Riak, like Cassandra could
&gt;&gt; be
&gt;&gt; &gt; classified as a column store.
&gt;&gt;
&gt;&gt; That is incorrect. Riak is a key value database where the value is an
&gt;&gt; opaque blob.
&gt;&gt;
&gt;&gt; &gt;
&gt;&gt; &gt; This is just a name of course but what I understand from Cassandra is
&gt;&gt; that
&gt;&gt; &gt; this allows for space-efficient encoding of column-values. Basically
&gt;&gt; storage
&gt;&gt; &gt; is surrounded around columns instead of rows, allowing for different
&gt;&gt; &gt; persistence strategies on a per-column, or column-family, basis.
&gt;&gt; Moreover,
&gt;&gt; &gt; it would allow for zero storage overhead for non-existent column values.
&gt;&gt; &gt; I.e: basically allowing for efficient storage of sparse data-sets.
&gt;&gt; &gt;
&gt;&gt; &gt; Does Riak have this property as well?
&gt;&gt;
&gt;&gt; No. Riak will happily store whatever you throw at it. That being said,
&gt;&gt; most good serialization libraries will leave off nullable properties.
&gt;&gt;
&gt;&gt; &gt;
&gt;&gt;
&gt;

&gt; &gt; More specifically, I've got a datastructure on paper with the following
&gt;&gt; &gt; properties, when mapped to riak nomenclature:
&gt;&gt; &gt;
&gt;&gt; &gt; - ~ 1.000.000 keys (will not grow)
&gt;&gt; &gt; - ~ 1.000 columns.  (may grow)
&gt;&gt; &gt; - 1 particular key has a median of ~50 columns. In other words the
&gt;&gt; entire
&gt;&gt; &gt; set is ~ 95% sparse.
&gt;&gt; &gt; - Wherever a key has a value for a particular column, that value is
&gt;&gt; always
&gt;&gt; &gt; exactly a String (base 255) of 4KB length.
&gt;&gt; &gt; - the 4KB values themselves are pretty 'sparse' so would benefit a lot
&gt;&gt; from
&gt;&gt; &gt; run-length encoding. Is this supported out of the box?
&gt;&gt;
&gt;&gt; See above.
&gt;&gt;
&gt;&gt; &gt;
&gt;&gt; &gt; Given these properties how would Riak hold up? Hard to say of course,
&gt;&gt; but
&gt;&gt; &gt; I'm looking for some general advice.
&gt;&gt;
&gt;&gt; Riak objects should be no more than ~10MB for performance reasons. You
&gt;&gt; should be safe.
&gt;&gt;
&gt;&gt; &gt;
&gt;&gt; &gt; Thanks.
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt; --
&gt;&gt; &gt; View this message in context:
&gt;&gt; <a  rel="nofollow" href="http://riak-users.197444.n3.nabble.com/Lots-of-sparse-columns-Efficient-like-Cassandra-Some-measures-of-my-dataset-tp4028367.html">http://riak-users.197444.n3.nabble.com/Lots-of-sparse-columns-Efficient-like-Cassandra-Some-measures-of-my-dataset-tp4028367.html</a>
&gt;&gt; &gt; Sent from the Riak Users mailing list archive at Nabble.com.
&gt;&gt; &gt;
&gt;&gt; &gt; _______________________________________________
&gt;&gt; &gt; riak-users mailing list
&gt;&gt; &gt; [hidden email] &lt;<a  rel="nofollow" href="http://user/SendEmail.jtp?type=node&amp;node=4028370&amp;i=2">http://user/SendEmail.jtp?type=node&amp;node=4028370&amp;i=2</a>&gt;
&gt;&gt;
&gt;&gt; &gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;&gt;
&gt;&gt; _______________________________________________
&gt;&gt; riak-users mailing list
&gt;&gt; [hidden email] &lt;<a  rel="nofollow" href="http://user/SendEmail.jtp?type=node&amp;node=4028370&amp;i=3">http://user/SendEmail.jtp?type=node&amp;node=4028370&amp;i=3</a>&gt;
&gt;&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;&gt;
&gt;
&gt;
&gt;
&gt; --
&gt; Sean Cribbs &lt;[hidden 
&gt; email]&lt;<a  rel="nofollow" href="http://user/SendEmail.jtp?type=node&amp;node=4028370&amp;i=4">http://user/SendEmail.jtp?type=node&amp;node=4028370&amp;i=4</a>&gt;
&gt; &gt;
&gt; Software Engineer
&gt; Basho Technologies, Inc.
&gt; <a  rel="nofollow" href="http://basho.com/">http://basho.com/</a>
&gt;
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; [hidden email] &lt;<a  rel="nofollow" href="http://user/SendEmail.jtp?type=node&amp;node=4028370&amp;i=5">http://user/SendEmail.jtp?type=node&amp;node=4028370&amp;i=5</a>&gt;
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;
&gt;
&gt; ------------------------------
&gt;  If you reply to this email, your message will be added to the discussion
&gt; below:
&gt;
&gt; <a  rel="nofollow" href="http://riak-users.197444.n3.nabble.com/Lots-of-sparse-columns-Efficient-like-Cassandra-Some-measures-of-my-dataset-tp4028367p4028370.html">http://riak-users.197444.n3.nabble.com/Lots-of-sparse-columns-Efficient-like-Cassandra-Some-measures-of-my-dataset-tp4028367p4028370.html</a>
&gt;  To unsubscribe from Lots of sparse columns. Efficient like Cassandra?
&gt; Some measures of my dataset, click 
&gt; here&lt;<a  rel="nofollow" href="http://riak-users.197444.n3.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&amp;node=4028367&amp;code=Z2JyaXRzQGdtYWlsLmNvbXw0MDI4MzY3fDExNjk3MTIyNTA=">http://riak-users.197444.n3.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&amp;node=4028367&amp;code=Z2JyaXRzQGdtYWlsLmNvbXw0MDI4MzY3fDExNjk3MTIyNTA=</a>&gt;
&gt; .
&gt; NAML&lt;<a  rel="nofollow" href="http://riak-users.197444.n3.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&amp;id=instant_html%21nabble%3Aemail.naml&amp;base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&amp;breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml">http://riak-users.197444.n3.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&amp;id=instant_html%21nabble%3Aemail.naml&amp;base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&amp;breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml</a>&gt;
&gt;




--
View this message in context: 
<a  rel="nofollow" href="http://riak-users.197444.n3.nabble.com/Lots-of-sparse-columns-Efficient-like-Cassandra-Some-measures-of-my-dataset-tp4028367p4028373.html">http://riak-users.197444.n3.nabble.com/Lots-of-sparse-columns-Efficient-like-Cassandra-Some-measures-of-my-dataset-tp4028367p4028373.html</a>
Sent from the Riak Users mailing list archive at Nabble.com.</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg11568.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="thrd13.html#11570">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="mail14.html#11570">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg11569.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg11565.html">Lots of sparse columns. Efficient like Cassandra? Some me...</a></span> <span class="sender italic">gbrits</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg11566.html">Re: Lots of sparse columns. Efficient like Cassandra...</a></span> <span class="sender italic">Jeremiah Peschka</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg11568.html">Re: Lots of sparse columns. Efficient like Cassa...</a></span> <span class="sender italic">Sean Cribbs</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Lots of sparse columns. Efficient like C...</span> <span class="sender italic">gbrits</span></li>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Lots of sparse columns. Efficient like Cassandra? Some measures	of my dataset">
<input type="hidden" name="msgid" value="CACBmzpEhpjrOtqHSaK4B73aPhWS1JWywSD6xb9Xu82F1em2NCA@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg11570.html">
<input type="submit" value=" gbrits ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Lots+of+sparse+columns.+Efficient+like+Cassandra%5C%3F+Some+measures%09of+my+dataset%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg11568.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg11569.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CACBmzpEhpjrOtqHSaK4B73aPhWS1JWywSD6xb9Xu82F1em2NCA@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
