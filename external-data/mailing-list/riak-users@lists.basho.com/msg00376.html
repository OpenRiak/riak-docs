<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Number of nodes and links</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#00376" id="c">
<link rel="index" href="maillist.html#00376" id="i">
<link rel="prev" href="msg00375.html" id="p">
<link rel="next" href="msg00377.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg00376.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Number+of+nodes+and+links%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Number of nodes and links</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Preston+Marshall%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Preston Marshall</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20100515" rel="nofollow">Sat, 15 May 2010 15:17:51 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>See some answers below.
On May 15, 2010, at 5:05 PM, Chris Hicks wrote:

&gt; Where some of the B level objects (each level separated into different 
&gt; buckets) are linked to each other but in very limited numbers. In some of 
&gt; these areas there will be a ton of rapid updates and in others much more rare 
&gt; updates. Since a decent portion of my data modifications involve nothing more 
&gt; than shifting which C level object a D level object is associated with, is 
&gt; there anything I should keep in mind when planning for a lot of link-changing 
&gt; operations? For example, though for some reason I can't find it now, I 
&gt; remember reading that the amount of links one could have per object was 
&gt; something like 170K links, is that correct? I understand performance would 
&gt; degrade quite a bit when one has that amount of data for a single object and 
&gt; my project won't call for anywhere near that but just want to understand the 
&gt; nuances of the whole process.
&gt; 
I won't address performance issues, as I don't know enough about Riak to do so. 
 The one thing that you need to keep in mind is that Riak doesn't do 
transactions.  You can easily spend days debugging an issue that turns out to 
be a race condition.  A simple example is a shopping cart.  Let's assume your 
software sucks and it takes 10 seconds to add something to a shopping cart, 
before saving to the database, but since you use AJAX, many can be triggered 
quickly.  If a customer adds more than one item to their cart within 10 
seconds, whichever request finishes LAST will when, overwriting the other 
additions.  The reason for this is because when all of the requests were made, 
there was nothing in the cart. so their internal representation of document 
state reflects this.  When they all go to save back, the entire document is 
transmitted, and it replaces the previous version.  There is no way for Riak to 
magically merge these together, BUT it does provide you the ability to handle 
the situation.  To handle this, you need to enable allow_mult=true on the 
request, and be sure you are using vector clocks in each request.  You can then 
write a JS function that can merge the different versions together as you wish, 
or just throw out all but the latest.  I'm not sure where this function goes, 
as I've never done this before.
&gt; Also, sort of related, I plan on running this whole thing on a single 
&gt; dedicated server machine (unless I get major usage and get the money to 
&gt; upgrade) that will have multiple CPU's. Should I just operate one physical 
&gt; node on that machine or should I match the number of CPU's with the number of 
&gt; nodes, essentially dedicating each physical CPU to handling a hardware node 
&gt; (if that is possible)? What would the pros and cons be to a single or 
&gt; multi-node system on that sort of hardware?
&gt; 
Erlang should take advantage of your processors as long as SMP is enabled (in 
the Erlang VM).  However, it might be a good idea to run multiple nodes so you 
can kill a node to test the NRW parameters and how it merges your data back 
together.</pre><pre>

</pre>
<p><strong><a href="msg00376/smime.p7s" ><img src="../attachment.png" alt="Attachment:" width=27 height=28></a>
<a href="msg00376/smime.p7s" >smime.p7s</a></strong><br>
<em>Description:</em> S/MIME cryptographic signature</p>
<pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg00375.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#00376">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#00376">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg00377.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg00375.html">Number of nodes and links</a></span> <span class="sender italic">Chris Hicks</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Number of nodes and links</span> <span class="sender italic">Preston Marshall</span></li>
<li class="icons-email"><span class="subject"><a href="msg00377.html">Re: Number of nodes and links</a></span> <span class="sender italic">Alexander Sicular</span></li>
<li class="icons-email"><span class="subject"><a href="msg00378.html">RE: Number of nodes and links</a></span> <span class="sender italic">Chris Hicks</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00379.html">Re: Number of nodes and links</a></span> <span class="sender italic">Alexander Sicular</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00380.html">RE: Number of nodes and links</a></span> <span class="sender italic">Chris Hicks</span></li>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Number of nodes and links">
<input type="hidden" name="msgid" value="39100238-F6E6-4BDD-9B1C-EFD76883C195@synergyeoc.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg00376.html">
<input type="submit" value=" Preston Marshall ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Number+of+nodes+and+links%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg00375.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg00377.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">39100238-F6E6-4BDD-9B1C-EFD76883C195@synergyeoc.com</li>
</ul>
</div>
</body>
</html>
