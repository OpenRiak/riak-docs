<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Is using the same search index on all CRDT buckets a good idea?</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#16798" id="c">
<link rel="index" href="maillist.html#16798" id="i">
<link rel="prev" href="msg16797.html" id="p">
<link rel="next" href="msg16799.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg16798.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Is+using+the+same+search+index+on+all+CRDT+buckets+a+good+idea%5C%3F%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Is using the same search index on all CRDT buckets a good idea?</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Dmitri+Zagidulin%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Dmitri Zagidulin</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20151123" rel="nofollow">Mon, 23 Nov 2015 13:00:13 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Short answer to 'should I use the same search index across all CRDT
buckets': Probably not.</pre><pre>

Long answer: It depends of what you're going to be storing in your CRDT
buckets. And what you want to query on.

If your buckets store objects that have fields in common (for example, all
your CRDTs have a field 'user_id_register'), and you want to query on those
few fields, then sure, create a custom schema for those fields, and use the
same index across the buckets.

I'm going to guess that this is not what you intend, though. You're
probably thinking of either using the default schema (btw - DON'T use the
default schema in production. It not only indexes -every field- in a
document, but also -stores the value- for those fields, which is a lot
slower and wastes a lot more space.), or are going to be using a custom
schema with some dynamic fields. Something like - index all fields that end
in *_register, that sort of thing.

Again, that's a bad idea. In relational database terms, this is like
creating an index on all columns of all tables. It gets expensive very fast.

So, in short:

1) Don't use the default schema for your indexes in production. It's only
meant as a developer convenience, while you're learning Solr.

2) Use custom schemas instead, and only index those fields that you'll be
querying. So, unless all your CRDTs have common fields, this means creating
separate custom indexes for your buckets.


On Fri, Nov 20, 2015 at 10:36 PM, Weixi Yen &lt;we...@spacechatapp.com&gt; wrote:

&gt; Hello,
&gt;
&gt; I have a question about Riak 2.0+ Search best practices.
&gt;
&gt; A) I'm wondering if using the same search index on all my CRDT bucket
&gt; types and then filtering by bucket name is a good idea.
&gt;
&gt; B) Or should I be creating different indexes for each bucket if my primary
&gt; goal is to search by bucket.
&gt;
&gt; Are there potentially huge performance issues when going with Option A?
&gt;
&gt; Thanks!
&gt;
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;
&gt;
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg16797.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#16798">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#16798">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg16799.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg16797.html">Is using the same search index on all CRDT buckets a good...</a></span> <span class="sender italic">Weixi Yen</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Is using the same search index on all CRDT bucke...</span> <span class="sender italic">Dmitri Zagidulin</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg16799.html">Re: Is using the same search index on all CRDT b...</a></span> <span class="sender italic">Weixi Yen</span></li>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Is using the same search index on all CRDT buckets a good idea?">
<input type="hidden" name="msgid" value="CA+TO3kXkcY+NTTDCz3PtwtsdfXADXFE9ZYq94iOU4_i8efRZkQ@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg16798.html">
<input type="submit" value=" Dmitri Zagidulin ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Is+using+the+same+search+index+on+all+CRDT+buckets+a+good+idea%5C%3F%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg16797.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg16799.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CA+TO3kXkcY+NTTDCz3PtwtsdfXADXFE9ZYq94iOU4_i8efRZkQ@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
