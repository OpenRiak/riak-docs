<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Split index with Riak 2.0 git (jan 15th) on a single dev node	cluster</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="thrd4.html#13472" id="c">
<link rel="index" href="mail4.html#13472" id="i">
<link rel="prev" href="msg13471.html" id="p">
<link rel="next" href="msg13962.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg13472.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Split+index+with+Riak+2.0+git+%5C%28jan+15th%5C%29+on+a+single+dev+node%09cluster%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Split index with Riak 2.0 git (jan 15th) on a single dev node	cluster</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Eric+Redmond%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Eric Redmond</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20140123" rel="nofollow">Thu, 23 Jan 2014 15:08:20 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Rob,

The one second wait is because yokozuna is the glue code (putting it very, very 
simply) between a Riak cluster and distributed Solr instances. When you write 
an object to Riak, yokozuna asynchronously fires off an update to the Solr 
service. Solr is, by default, configured to soft commit writes every 1 second, 
and hard commit every 30 seconds[1]. These values are set in the Solr 
configuration, based on suggested best practiced. You can configure solr.xml to 
reduce that delay, but the payoff isn't generally worth the overhead.</pre><pre>

The benefit of an asynchronous index update is that you get the predictable 
performance of Riak, with an eventually consistent searchable index. The 
alternative is to lock a Riak put/delete while Solr updates, which means you'll 
wait up to a second for confirmation for a simple write.  We may eventually add 
such back pressure, but it's barely on our radar, since at the moment, atomic 
object/index updating is not of practical concern to most Riak users.  If you 
have a specific requirement for such back pressure, please let us know and we 
may have some ideas for you.

Another benefit to separating the write from indexing is that it allows us to 
leverage an index-specific AAE service. This means that if your dataset and 
index ever get out of sync, or your index corrupted, the index AAE can repair 
the discrepancy. If you've ever run Solr or Elastic Search against another 
datastore, you'll be familiar with having to repair indexes on occasion 
(whether by a server going down, other system errors, bit rot, etc). With Riak 
Search (yokozuna) this is handled automatically for you.

Hope that helps,
Eric

<a  rel="nofollow" href="http://wiki.apache.org/solr/NearRealtimeSearch">http://wiki.apache.org/solr/NearRealtimeSearch</a>


On Jan 23, 2014, at 5:41 PM, Rob Speer &lt;r...@luminoso.com&gt; wrote:

&gt; I'm still interested in the question as it applies to Yokozuna. Stable 
&gt; full-text search in Riak will be very important to my company, so I'd want to 
&gt; know what the equivalent behaviors are for Yokozuna queries. Do you have to 
&gt; wait an unspecified amount of time between writing a document and querying it 
&gt; via Yokozuna? Is there a way to know when it is ready?
&gt; 
&gt; 
&gt; On Thu, Jan 23, 2014 at 10:53 AM, Luke Bakken &lt;lbak...@basho.com&gt; wrote:
&gt; Hi Rob,
&gt; 
&gt; I believe Ryan meant to wait a second to do a Yokozuna search, not a
&gt; general Riak K/V operation.
&gt; 
&gt; There is more information about &quot;read your own writes&quot; here:
&gt; <a  rel="nofollow" href="http://basho.com/tag/configurable-behaviors/">http://basho.com/tag/configurable-behaviors/</a>
&gt; --
&gt; Luke Bakken
&gt; CSE
&gt; lbak...@basho.com
&gt; 
&gt; 
&gt; On Wed, Jan 22, 2014 at 11:36 AM, Rob Speer &lt;r...@luminoso.com&gt; wrote:
&gt; &gt;&gt; 5. Did you wait at least 1 second before running the queries?
&gt; &gt;
&gt; &gt; I'm not the original poster but I'm now wondering what this question means.
&gt; &gt; Under what circumstances do you have to wait 1 second before query results
&gt; &gt; are available?
&gt; &gt;
&gt; &gt; We want to always be able to run tests on our database rapidly, which
&gt; &gt; includes loading data and then immediately querying to make sure the correct
&gt; &gt; data is there. I know we've had some tests where we were not able to read
&gt; &gt; our own writes, but I thought those were fixed by making sure we used vector
&gt; &gt; clocks correctly. Is there a situation where you have to wait for an
&gt; &gt; unspecified amount of time before you can read your writes?
&gt; &gt;
&gt; &gt; _______________________________________________
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com
&gt; &gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt; &gt;
&gt; 
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>

</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg13471.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="thrd4.html#13472">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="mail4.html#13472">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg13962.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg13433.html">Split index with Riak 2.0 git (jan 15th) on a single dev node...</a></span> <span class="sender italic">John O'Brien</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13443.html">Re: Split index with Riak 2.0 git (jan 15th) on a single...</a></span> <span class="sender italic">Ryan Zezeski</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13454.html">Re: Split index with Riak 2.0 git (jan 15th) on a si...</a></span> <span class="sender italic">Rob Speer</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13460.html">Re: Split index with Riak 2.0 git (jan 15th) on ...</a></span> <span class="sender italic">Luke Bakken</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13471.html">Re: Split index with Riak 2.0 git (jan 15th)...</a></span> <span class="sender italic">Rob Speer</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Split index with Riak 2.0 git (jan ...</span> <span class="sender italic">Eric Redmond</span></li>
</ul></li>
</ul></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg13962.html">Re: Split index with Riak 2.0 git (jan 15th) on a si...</a></span> <span class="sender italic">John O'Brien</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13963.html">Re: Split index with Riak 2.0 git (jan 15th) on ...</a></span> <span class="sender italic">John O'Brien</span></li>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Split index with Riak 2.0 git (jan 15th) on a single dev node	cluster">
<input type="hidden" name="msgid" value="71E4AE1A-1640-4BFA-9822-E49971585838@basho.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg13472.html">
<input type="submit" value=" Eric Redmond ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Split+index+with+Riak+2.0+git+%5C%28jan+15th%5C%29+on+a+single+dev+node%09cluster%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg13471.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg13962.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">71E4AE1A-1640-4BFA-9822-E49971585838@basho.com</li>
</ul>
</div>
</body>
</html>
