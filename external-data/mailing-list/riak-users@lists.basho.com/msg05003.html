<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Dynamic default bucket props</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#05003" id="c">
<link rel="index" href="maillist.html#05003" id="i">
<link rel="prev" href="msg04850.html" id="p">
<link rel="next" href="msg05006.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg05003.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Dynamic+default+bucket+props%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Dynamic default bucket props</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Ryan+Zezeski%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Ryan Zezeski</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20111003" rel="nofollow">Mon, 03 Oct 2011 13:44:26 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Andy,

Not crazy at all.  Another issue with adding the hook for each foo* bucket
is that you increase the size of the ring which must be gossiped between
nodes.  We recently added something called &quot;bucket fixups&quot; to 1.0 that sorta
do what you want but only for buckets with custom properties.  ATM, there is
no way to do this for all buckets across the board.</pre><pre>

If you're just talking about a precommit hook you could put the logic in the
hook itself and match against the bucket name there.  Care to elaborate more
on your use case?  Maybe there is another way.

-Ryan


On Fri, Sep 23, 2011 at 5:22 PM, Andy Skelton &lt;skelt...@gmail.com&gt; wrote:

&gt; I would like to use bucket names to determine default bucket props
&gt; such as hooks. For example, if all buckets matching foo* should have a
&gt; certain post-commit hook, I don't want to have to set those bucket
&gt; props before I can put keys in the buckets.
&gt;
&gt; My preferred solution would be a config option that takes a mod/fun
&gt; instead of a proplist.
&gt;
&gt; In riak_core_bucket, instead of always treating
&gt; app_helper:get_env(riak_core, default_bucket_props) as a list it would
&gt; also look for a tuple {M, F} and in that case call M:F(Name) which
&gt; would return a list.
&gt;
&gt; Sound crazy? :)
&gt;
&gt; Andy Skelton
&gt; Automattic
&gt;
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg04850.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#05003">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#05003">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg05006.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg04850.html">Dynamic default bucket props</a></span> <span class="sender italic">Andy Skelton</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Dynamic default bucket props</span> <span class="sender italic">Ryan Zezeski</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg05006.html">Re: Dynamic default bucket props</a></span> <span class="sender italic">Andy Skelton</span></li>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Dynamic default bucket props">
<input type="hidden" name="msgid" value="CACZcpemccwFe2nXOCcoHW5OQFLNO=3Z_Bta+d+KwKSzShV8aGw@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg05003.html">
<input type="submit" value=" Ryan Zezeski ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Dynamic+default+bucket+props%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg04850.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg05006.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CACZcpemccwFe2nXOCcoHW5OQFLNO=3Z_Bta+d+KwKSzShV8aGw@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
