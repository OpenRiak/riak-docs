<!DOCTYPE html>
<html lang="en">
<head>
<title>RE: riak failed to start up</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#08210" id="c">
<link rel="index" href="maillist.html#08210" id="i">
<link rel="prev" href="msg08209.html" id="p">
<link rel="next" href="msg08211.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg08210.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22RE%5C%3A+riak+failed+to+start+up%22&amp;o=newest" rel="nofollow"><span itemprop="name">RE: riak failed to start up</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Sangeetha.PattabiRaman2%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Sangeetha.PattabiRaman2</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20120807" rel="nofollow">Tue, 07 Aug 2012 21:26:26 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi Richard,

[hadoop@CTSINGMRGTO thrift-0.7.0]$ ldd /bin/sed
        linux-vdso.so.1 =&gt;  (0x00007fff80560000)
        libselinux.so.1 =&gt; /lib64/libselinux.so.1 (0x000000380a200000)
        libc.so.6 =&gt; /lib64/libc.so.6 (0x0000003808e00000)
        libdl.so.2 =&gt; /lib64/libdl.so.2 (0x0000003808a00000)
        /lib64/ld-linux-x86-64.so.2 (0x0000003808600000)
[hadoop@CTSINGMRGTO thrift-0.7.0]$ which sed
/bin/sed</pre><pre>

        I am getting the same ...no lib is missing..please else tell me 
...actually I have a 2 node riak cluster (10.232.5.169 ,10.232.5.170)....riak 
start on 170 is fine ...i am able to see the whole process on ps -ef | grep 
riak on 170 machine ...

[hadoop@CTSINGMRGTO1 ~]$ ps -ef | grep riak
riak     17782     1  0 May09 ?        00:00:26 
/usr/lib64/riak/erts-5.8.5/bin/epmd -daemon
riak     24054     1  0 02:16 ?        00:00:00 
/usr/lib64/riak/erts-5.9.1/bin/run_erl -daemon /tmp/riak/ /var/log/riak exec 
/usr/sbin/riak console
riak     24057 24054 99 02:16 pts/1    00:00:10 
/usr/lib64/riak/erts-5.9.1/bin/beam.smp -K true -A 64 -W w -- -root 
/usr/lib64/riak -progname riak -- -home /var/lib/riak -- -boot 
/usr/lib64/riak/releases/1.2.0/riak -embedded -config /etc/riak/app.config -pa 
/usr/lib64/riak/basho-patches -name riak@10.232.5.170 -setcookie riak -- console


iam still suffering with 169 machine only...the other node 170 is fine ..please 
tell me hw to resume the cluster back wit hone machine up and other down...
Thanks
Sangeetha





-----Original Message-----
From: riak-users-boun...@lists.basho.com 
[<a  rel="nofollow" href="mailto:riak-users-boun...@lists.basho.com">mailto:riak-users-boun...@lists.basho.com</a>] On Behalf Of Richard Heycock
Sent: Wednesday, August 08, 2012 9:31 AM
To: riak-users
Subject: RE: riak failed to start up

Excerpts from Sangeetha.PattabiRaman2's message of 2012-08-08 13:33:25 +1000:
&gt; [root@CTSINGMRGTO riak]# sudo -u riak sh -c 'echo $PATH'
&gt; /sbin:/bin:/usr/sbin:/usr/bin

That's what I would expect.

&gt; [root@CTSINGMRGTO riak]#   sudo -u riak -i
&gt; -bash: id: command not found
&gt; -bash: tty: command not found
&gt; -bash: grep: command not found
&gt; -bash: sed: command not found

This is very odd! Given that your path looks fine &amp; without getting on the 
machine it looks as if it's completely and utterly screwed.

My initial thoughts are it's one of the following:

* /bin or /usr/bin has had files deleted - but I assume the machine
  behaves properly when you are normally logged in so this would be
  unlikely.
* Some of the shared libraries are missing or corrupt but the above
  caveat applies.

As any user other than riak what happens when you type:

  which sed

it should return /bin/sed (I'm checking this on a debian machine so it may be 
different on yours).

You might want to run

  ls /bin
  ls /usr/bin

and see what that returns. It should be a whole load of stuff including sed, 
tty, etc

If sed exists (I'll assume it's path is /bin/sed) try running ldd

  ldd /bin/sed

is should return:
        linux-vdso.so.1 =&gt;  (0x00007fff6f1ff000)
        libselinux.so.1 =&gt; /lib/x86_64-linux-gnu/libselinux.so.1 
(0x00007fcb57137000)
        libc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007fcb56db0000)
        libdl.so.2 =&gt; /lib/x86_64-linux-gnu/libdl.so.2 (0x00007fcb56bab000)
        /lib64/ld-linux-x86-64.so.2 (0x00007fcb57377000)

If any shared libs are missing you'll get (from the top of my head):

        libdl.so.2 =&gt; missing

it might not be &quot;missing&quot; but it won't be a path.


rgh

&gt; Still the same .unable to start
&gt;
&gt; -----Original Message-----
&gt; From: riak-users-boun...@lists.basho.com
&gt; [<a  rel="nofollow" href="mailto:riak-users-boun...@lists.basho.com">mailto:riak-users-boun...@lists.basho.com</a>] On Behalf Of Richard
&gt; Heycock
&gt; Sent: Wednesday, August 08, 2012 9:00 AM
&gt; To: riak-users
&gt; Subject: Re: riak failed to start up
&gt;
&gt; Excerpts from Sangeetha.PattabiRaman2's message of 2012-08-07 21:15:16 +1000:
&gt; &gt; Hi ,
&gt; &gt;
&gt; &gt; Can any one help me on the start up error ..thx in advance
&gt; &gt; [root@CTSINGMRGTO riak]# cat console.log
&gt; &gt; 2012-08-07 09:13:54.260 [error] &lt;0.164.0&gt; CRASH REPORT Process
&gt; &gt; riak_core_capability with 0 neighbours exited with reason: no
&gt; &gt; function clause matching orddict:fetch('riak@127.0.0.1', []) line 72
&gt; &gt; in
&gt; &gt; gen_server:terminate/6 line 747
&gt; &gt;
&gt; &gt; [root@CTSINGMRGTO riak]# riak start
&gt; &gt; Attempting to restart script through sudo -u riak
&gt; &gt; /etc/profile: line 31: id: command not found
&gt; &gt; /usr/sbin/riak: line 6: uname: command not found
&gt; &gt; /usr/sbin/riak: line 6: [: too many arguments
&gt; &gt; /usr/sbin/riak: line 30: whoami: command not found sudo doesn't
&gt; &gt; appear to be installed and your EUID isn't riak
&gt;
&gt; This looks like your PATH isn't being set. Is &quot;sudo -u riak&quot;
&gt;
&gt; sudo -u riak sh -c 'echo $PATH'
&gt;
&gt; should show something like:
&gt;
&gt;   /usr/local/bin:/usr/bin:/bin
&gt;
&gt; try getting a shell as riak:
&gt;
&gt;   sudo -u riak -i
&gt;
&gt; checking the path is ok and run it from there.
&gt;
&gt; rgh
&gt;
&gt; &gt;
&gt; &gt; on running as service
&gt; &gt;
&gt; &gt; [root@CTSINGMRGTO riak]# service riak start Starting Riak: Riak
&gt; &gt; failed to start within 15 seconds, see the output of 'riak console'
&gt; &gt; for more information.
&gt; &gt; If you want to wait longer, set the environment variable
&gt; &gt; WAIT_FOR_ERLANG to the number of seconds to wait.
&gt; &gt;                                                            [FAILED]
&gt; &gt;
&gt; &gt; Thanks &amp; regards
&gt; &gt; sangeetha
&gt; &gt;
&gt; &gt; This e-mail and any files transmitted with it are for the sole use of the 
&gt; &gt; intended recipient(s) and may contain confidential and privileged 
&gt; &gt; information. If you are not the intended recipient(s), please reply to the 
&gt; &gt; sender and destroy all copies of the original message. Any unauthorized 
&gt; &gt; review, use, disclosure, dissemination, forwarding, printing or copying of 
&gt; &gt; this email, and/or any action taken in reliance on the contents of this 
&gt; &gt; e-mail is strictly prohibited and may be unlawful.
&gt; --
&gt; [e]:  r...@roughage.com.au
&gt; [im]: r...@jabber.org
&gt;
&gt; You're worried criminals will continue to penetrate into cyberspace,
&gt; and I'm worried complexity, poor design and mismanagement will be
&gt; there to meet them - Marcus Ranum
&gt;
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt; This e-mail and any files transmitted with it are for the sole use of the 
&gt; intended recipient(s) and may contain confidential and privileged 
&gt; information. If you are not the intended recipient(s), please reply to the 
&gt; sender and destroy all copies of the original message. Any unauthorized 
&gt; review, use, disclosure, dissemination, forwarding, printing or copying of 
&gt; this email, and/or any action taken in reliance on the contents of this 
&gt; e-mail is strictly prohibited and may be unlawful.
--
[e]:  r...@roughage.com.au
[im]: r...@jabber.org

You're worried criminals will continue to penetrate into cyberspace, and I'm 
worried complexity, poor design and mismanagement will be there to meet them - 
Marcus Ranum

_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
This e-mail and any files transmitted with it are for the sole use of the 
intended recipient(s) and may contain confidential and privileged information. 
If you are not the intended recipient(s), please reply to the sender and 
destroy all copies of the original message. Any unauthorized review, use, 
disclosure, dissemination, forwarding, printing or copying of this email, 
and/or any action taken in reliance on the contents of this e-mail is strictly 
prohibited and may be unlawful.

_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg08209.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#08210">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#08210">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg08211.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg08187.html">riak failed to start up</a></span> <span class="sender italic">Sangeetha.PattabiRaman2</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg08199.html">Re: riak failed to start up</a></span> <span class="sender italic">Mark Phillips</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg08206.html">RE: riak failed to start up</a></span> <span class="sender italic">Sangeetha.PattabiRaman2</span></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg08207.html">Re: riak failed to start up</a></span> <span class="sender italic">Richard Heycock</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg08208.html">RE: riak failed to start up</a></span> <span class="sender italic">Sangeetha.PattabiRaman2</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg08209.html">RE: riak failed to start up</a></span> <span class="sender italic">Richard Heycock</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">RE: riak failed to start up</span> <span class="sender italic">Sangeetha.PattabiRaman2</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg08211.html">RE: riak failed to start up</a></span> <span class="sender italic">Richard Heycock</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="RE: riak failed to start up">
<input type="hidden" name="msgid" value="EA4741BA839367458A5A4FC4E5C3C0C930E72968@CTSINCHNSXMBH.cts.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg08210.html">
<input type="submit" value=" Sangeetha.PattabiRaman2 ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22RE%5C%3A+riak+failed+to+start+up%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg08209.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg08211.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">EA4741BA839367458A5A4FC4E5C3C0C930E72968@CTSINCHNSXMBH.cts.com</li>
</ul>
</div>
</body>
</html>
