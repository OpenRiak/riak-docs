<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Recommended way to delete keys</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#16186" id="c">
<link rel="index" href="maillist.html#16186" id="i">
<link rel="prev" href="msg16185.html" id="p">
<link rel="next" href="msg16187.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg16186.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Recommended+way+to+delete+keys%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Recommended way to delete keys</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Alexander+Sicular%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Alexander Sicular</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20150603" rel="nofollow">Wed, 03 Jun 2015 09:10:08 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>We are actively investigating better options for deletion of large amounts of 
keys. As Sargun mentioned, deleting the data dir for an entire backend via an 
operationalized rolling restart is probably the best approach right now for 
killing large amounts of keys. </pre><pre>

But if your key space can fit in memory the best way to kill keys is to use 
bitcask ttl if that's an option. 1. If you can even use bitcask in your 
environment due to the memory overhead and 2. If your use case allows for ttls 
which it may considering you may already be using time bound buckets....

-Alexander 

@siculars
<a  rel="nofollow" href="http://siculars.posthaven.com">http://siculars.posthaven.com</a>

Sent from my iRotaryPhone

&gt; On Jun 3, 2015, at 09:54, Sargun Dhillon &lt;sdhil...@basho.com&gt; wrote:
&gt; 
&gt; You could map your keys to a given bucket, and that bucket to a given backend 
&gt; using multi_backend. There is some cost to having lots of backends (memory 
&gt; overhead, FDs, etc...). When you want to do a mass drop, you could down the 
&gt; node, and delete that given backend, and bring it up. Caveat: AAE, MDC, nor 
&gt; mutable data play well with this scenario. 
&gt; 
&gt;&gt; On Wed, Jun 3, 2015 at 10:43 AM, Peter Herndon &lt;tphern...@gmail.com&gt; wrote:
&gt;&gt; Hi list,
&gt;&gt; 
&gt;&gt; We’re looking for the best way to handle large scale expiration of 
&gt;&gt; no-longer-useful data stored in Riak. We asked a while back, and the 
&gt;&gt; recommendation was to store the data in time-segmented buckets (bucket per 
&gt;&gt; day or per month), query on the current buckets, and use the streaming list 
&gt;&gt; keys API to handle slowly deleting the buckets that have aged out.
&gt;&gt; 
&gt;&gt; Is that still the best approach for doing this kind of task? Or is there a 
&gt;&gt; better approach?
&gt;&gt; 
&gt;&gt; Thanks!
&gt;&gt; 
&gt;&gt; —Peter Herndon
&gt;&gt; Sr. Application Engineer
&gt;&gt; @Bitly
&gt;&gt; _______________________________________________
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt; 
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg16185.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#16186">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#16186">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg16187.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg16184.html">Recommended way to delete keys</a></span> <span class="sender italic">Peter Herndon</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg16185.html">Re: Recommended way to delete keys</a></span> <span class="sender italic">Sargun Dhillon</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Recommended way to delete keys</span> <span class="sender italic">Alexander Sicular</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg16187.html">Re: Recommended way to delete keys</a></span> <span class="sender italic">Peter Herndon</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg16188.html">Re: Recommended way to delete keys</a></span> <span class="sender italic">Drew Kerrigan</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg16192.html">Re: Recommended way to delete key...</a></span> <span class="sender italic">Peter Herndon</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg16198.html">Re: Recommended way to delete...</a></span> <span class="sender italic">Daniel Abrahamsson</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg16201.html">Re: Recommended way to de...</a></span> <span class="sender italic">Bryce Verdier</span></li>
<li class="icons-email"><span class="subject"><a href="msg16202.html">Re: Recommended way to de...</a></span> <span class="sender italic">Peter Herndon</span></li>
<li class="icons-email"><span class="subject"><a href="msg16204.html">Re: Recommended way to de...</a></span> <span class="sender italic">Bryce Verdier</span></li>
<li class="icons-email"><span class="subject"><a href="msg16206.html">Re: Recommended way to de...</a></span> <span class="sender italic">Alexander Sicular</span></li>
<li class="icons-email"><span class="subject"><a href="msg16203.html">Re: Recommended way to de...</a></span> <span class="sender italic">Peter Herndon</span></li>
<li class="icons-email"><span class="subject"><a href="msg16208.html">Re: Recommended way to de...</a></span> <span class="sender italic">John O'Brien</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Recommended way to delete keys">
<input type="hidden" name="msgid" value="9C094221-BDC4-4315-981B-3830D6450933@gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg16186.html">
<input type="submit" value=" Alexander Sicular ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Recommended+way+to+delete+keys%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg16185.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg16187.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">9C094221-BDC4-4315-981B-3830D6450933@gmail.com</li>
</ul>
</div>
</body>
</html>
