<!DOCTYPE html>
<html lang="en">
<head>
<title>Running multiple Riak instances.</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#00785" id="c">
<link rel="index" href="maillist.html#00785" id="i">
<link rel="prev" href="msg00781.html" id="p">
<link rel="next" href="msg00786.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg00785.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Running+multiple+Riak+instances.%22&amp;o=newest" rel="nofollow"><span itemprop="name">Running multiple Riak instances.</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Misha+Gorodnitzky%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Misha Gorodnitzky</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20100725" rel="nofollow">Sun, 25 Jul 2010 07:00:20 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi all,

I'm trying to run multiple instances of Riak on my server with the
goal to run both the staging environment and eventually the production
environment on the same server (I only have one for this project).
This is an Ubuntu server and if at all possible I'd prefer not to
build Riak from source, although I understand that it would be easier
to have multiple instances running that way. I would rather keep
software managed with the package manager here.</pre><pre>

What I've done is I've modified /usr/sbin/riak to allow specifying the
config files to use (app.config, vm.args), the log dir, run dir (for
the pipe) and the home dir, and I can startup an instance of Riak
using my &quot;staging&quot; environment. However, when I try to start up the
second Riak instance, it fails with just a couple of things
out-of-the-ordinary in it's logs:

  =INFO REPORT==== 25-Jul-2010::13:54:35 ===
      application: riak_kv
      exited: {shutdown,{riak_kv_app,start,[normal,[]]}}
      type: permanent
  =INFO REPORT==== 25-Jul-2010::13:54:35 ===
      alarm_handler: {clear,system_memory_high_watermark}
  {&quot;Kernel pid 
terminated&quot;,application_controller,&quot;{application_start_failure,riak_kv,{shutdown,{riak_kv_app,start,[normal,[]]}}}&quot;}^M
  Kernel pid terminated (application_controller)
({application_start_failure,riak_kv,{shutdown,{riak_kv_app,start,[normal,[]]}}})^M

And the Riak process that's already running logs this:

  ** Connection attempt from disallowed node 'riak_stag...@127.0.0.1' **

Any ideas what this might be? Has anyone managed to do this using the
Riak .deb package?

Thanks,

--Misha

_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg00781.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#00785">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#00785">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg00786.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email tSliceCur"><span class="subject">Running multiple Riak instances.</span> <span class="sender italic">Misha Gorodnitzky</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00786.html">Re: Running multiple Riak instances.</a></span> <span class="sender italic">Grant Schofield</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00787.html">Re: Running multiple Riak instances.</a></span> <span class="sender italic">Misha Gorodnitzky</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00817.html">Re: Running multiple Riak instances.</a></span> <span class="sender italic">Dan Reverri</span></li>
<li class="icons-email"><span class="subject"><a href="msg00818.html">Re: Running multiple Riak instances.</a></span> <span class="sender italic">francisco treacy</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00819.html">Re: Running multiple Riak instances.</a></span> <span class="sender italic">Alexander Sicular</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Running multiple Riak instances.">
<input type="hidden" name="msgid" value="AANLkTikXQVsdnHR=yyURcEt6rQR68EP6_H0mG1JHefCf@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg00785.html">
<input type="submit" value=" Misha Gorodnitzky ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Running+multiple+Riak+instances.%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg00781.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg00786.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">AANLkTikXQVsdnHR=yyURcEt6rQR68EP6_H0mG1JHefCf@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
