<!DOCTYPE html>
<html lang="en">
<head>
<title>strange timeout errors</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#02619" id="c">
<link rel="index" href="maillist.html#02619" id="i">
<link rel="prev" href="msg02616.html" id="p">
<link rel="next" href="msg02622.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg02619.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22strange+timeout+errors%22&amp;o=newest" rel="nofollow"><span itemprop="name">strange timeout errors</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Greg+Steffensen%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Greg Steffensen</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20110311" rel="nofollow">Fri, 11 Mar 2011 06:38:25 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>I'm seeing Riak timeout consistently after 60 seconds when doing gets and
sets on particular keys (I've only tested in the REST interface).  The
timeout happens inside Riak, not inside our HTTP client.  It happens
regardless of whether the key already exists, and if writing, regardless of
what the value is- it just depends on the key.  N is 3, and it happens
regardless of what R and W are.  There also appear to be some patterns in
how likely the errors are to occur when given random keys of various
lengths.  Here's the relationship of key length in random keys to timeout
likelihood in get requests- I've repeated the experiment several times and
the results, though not identical, have always been within a percentage
point of the values below, because most of the same keys timeout on each
run.</pre><pre>

1:   10%
2:   13%
3:   17%
4:   13%
5:   17%
6:   20%
7:   12%
8:   17%
9:   14%
10:  13%
15:  20%
20:  23%
25:  12%
26:  12%
27:  17%
28:  15%
29:  19%
30:  24%
31:    9%
32:   8%
33:   8%
34:   9%
35:   9%
36:   8%

That was done on a ring using the default configuration with 13 physical
nodes that is experiencing lots of simultaneous write activity, and on which
one physical node has been down for days, but it still nominally a member of
the ring (I'm not sure whether this behavior was occurring before the
missing node went down).

FWIW, I've tested write behavior like this with many clusters, and while
certainly most of them have behaved normally, this isn't the first time I've
seen this behavior.  Has anyone else seen anything like this before?
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg02616.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#02619">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#02619">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg02622.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email tSliceCur"><span class="subject">strange timeout errors</span> <span class="sender italic">Greg Steffensen</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg02622.html">Re: strange timeout errors</a></span> <span class="sender italic">Greg Steffensen</span></li>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="strange timeout errors">
<input type="hidden" name="msgid" value="AANLkTinhEEcrNWpOy=MkrDWDsJFX8-zthvaSE=XfXEHg@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg02619.html">
<input type="submit" value=" Greg Steffensen ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22strange+timeout+errors%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg02616.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg02622.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">AANLkTinhEEcrNWpOy=MkrDWDsJFX8-zthvaSE=XfXEHg@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
