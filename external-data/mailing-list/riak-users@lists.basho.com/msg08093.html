<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: LevelDB read performance</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="thrd2.html#08093" id="c">
<link rel="index" href="mail2.html#08093" id="i">
<link rel="prev" href="msg08091.html" id="p">
<link rel="next" href="msg08092.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg08093.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+LevelDB+read+performance%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: LevelDB read performance</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Parnell+Springmeyer%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Parnell Springmeyer</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20120726" rel="nofollow">Thu, 26 Jul 2012 16:06:36 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<table width="100%"><tr><td style=""><div>So, if I have 1,000 MySQL objects that are owned by a single user; there are roughly 1,000 stat result objects. So if I loop over those 1,000 objects and do a get(object.result_key) GET from Riak.</div><div><br></div><div>The objects don't grow as I don't update them; they are partitioned by buckets and the object always stays constant in size. The objects are really small, tiny even.</div><div><br></div><div>I'm seeing it take about 3-4 minutes to finish loading a result set approaching the above scenario. I would imagine it should be fast; but this is why I realize it is probably my use of the HTTP API over PBCâ€¦</div><br><div><div>On Jul 26, 2012, at 5:33 PM, Daniel Reverri wrote:</div><br class="Apple-interchange-newline"><blockquote type="cite">

<div bgcolor="#FFFFFF" text="#000000">Hi Parnell,<br>
<br>
Can you explain a bit more regarding "approaching &gt; 1000 objects<span style="font-family: sans-serif;">"</span><span></span>? Are you seeing 
high latency reads for single Riak objects as the object size grows? How
 large are the Riak objects and how much of a latency spike are you 
seeing?<br>
<br>
Thanks,<br>
Dan<br>
<br>
<div class="moz-signature">-- <br>Daniel Reverri<br>

Client Architect<br>

Basho Technologies, Inc.<br>

<a rel="nofollow" class="moz-txt-link-abbreviated" href="mailto:d...@basho.com">d...@basho.com</a></div>
<br>
<br>
<blockquote style="border: 0px none;" cite="" type="cite">
  <div style="margin:30px 25px 10px 25px;" class="__pbConvHr"><div style="display:table;width:100%;border-top:1px solid 
#EDEEF0;padding-top:5px"> 	<div style="display:table-cell;vertical-align:middle;padding-right:6px;"><img photoaddress="ixma...@gmail.com" photoname="Parnell Springmeyer" name="postbox-contact.jpg" height="25px" width="25px" id="7ec79b48-ccd0-41fa-80c5-1c2f0053d2b5" src="jpg3G2NkuPz6E.jpg"></div>   <div style="display:table-cell;white-space:nowrap;vertical-align:middle;width:100%">
   	<a rel="nofollow" moz-do-not-send="true" href="mailto:ixma...@gmail.com" style="color:#737F92 
!important;padding-right:6px;font-weight:bold;text-decoration:none 
!important;">Parnell Springmeyer</a></div>   <div style="display:table-cell;white-space:nowrap;vertical-align:middle;">   
  <font color="#9FA2A5"><span style="padding-left:6px">July 26, 2012 
3:29 PM</span></font></div></div></div>
  <div style="color:#888888;margin-left:24px;margin-right:24px;" __pbrmquotes="true" class="__pbConvBody"><div>I guess I got off track 
from my original subject line - once I started writing I realized read 
performance wasn't a LevelDB issue (I originally thought that maybe it 
was) but that the bottleneck must be our utilization of the API...<br><br></div><div><br></div><div>_______________________________________________<br>riak-users
 mailing list<br><a rel="nofollow" class="moz-txt-link-abbreviated" href="mailto:riak-users@lists.basho.com">riak-users@lists.basho.com</a><br><a rel="nofollow" class="moz-txt-link-freetext" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a><br></div></div>
  <div style="margin:30px 25px 10px 25px;" class="__pbConvHr"><div style="display:table;width:100%;border-top:1px solid 
#EDEEF0;padding-top:5px"> 	<div style="display:table-cell;vertical-align:middle;padding-right:6px;"><img photoaddress="ixma...@gmail.com" photoname="Parnell Springmeyer" name="postbox-contact.jpg" height="25px" width="25px" id="7fd3ddce-3455-4bdc-a705-54cc2872d34c" src="jpg3G2NkuPz6E.jpg"></div>   <div style="display:table-cell;white-space:nowrap;vertical-align:middle;width:100%">
   	<a rel="nofollow" moz-do-not-send="true" href="mailto:ixma...@gmail.com" style="color:#737F92 
!important;padding-right:6px;font-weight:bold;text-decoration:none 
!important;">Parnell Springmeyer</a></div>   <div style="display:table-cell;white-space:nowrap;vertical-align:middle;">   
  <font color="#9FA2A5"><span style="padding-left:6px">July 26, 2012 
3:18 PM</span></font></div></div></div>
  <div style="color:#888888;margin-left:24px;margin-right:24px;" __pbrmquotes="true" class="__pbConvBody"><div>I'm using Riak in a 5 node
 cluster with LevelDB for the backend (we store A LOT of archivable 
data) on FreeBSD.<br><br>The data is mapped out as follows: I have a set
 of database objects that are closely linked to user accounts - I needed
 to be able to compose complex queries on these objects including joins 
with the user data; so it made sense to keep those objects in MySQL.<br><br>I
 have software that takes those database objects and produces DAILY 
stats for each object (so we have months/years of data for each database
 object). These stats are what we store in Riak.<br><br>Now, that 
application also updates the MySQL database object with the key under 
which the stat object is stored in Riak for quick and easy compiling of 
the "latest" data (since it's just a GET operation and not a M/R job).<br><br>Mashing
 up this data for small sets of MySQL database objects is quick and 
painless. But once it starts approaching &gt; 1000 objects I notice it 
slows to a crawl and i notice Riak being pegged pretty hard (IOW it is 
Riak's response).<br><br>Now; here's the issue: with my web application I
 haven't figured out how to use the RiakPBC connector - so we are going 
through the HTTP API. I have a feeling this is where that bottle neck is
 occurring.<br><br>Why do you ask? Because our Python web app is 
multi-threaded and the PBC sockets don't play nice here. I'm not finding
 my experiments to solve this very successful. So I wanted to ask the 
greater community if anyone HAS or is willing to HELP me solve it!<br><br>Thanks
 :)</div><div>_______________________________________________<br>riak-users
 mailing list<br><a rel="nofollow" class="moz-txt-link-abbreviated" href="mailto:riak-users@lists.basho.com">riak-users@lists.basho.com</a><br><a rel="nofollow" class="moz-txt-link-freetext" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a><br></div></div>
</blockquote>
</div>
</blockquote></div><br></td></tr></table>
<p><strong><a href="msg08093/signature.asc" ><img src="../attachment.png" alt="Attachment:" width=27 height=28></a>
<a href="msg08093/signature.asc" >signature.asc</a></strong><br>
<em>Description:</em> Message signed with OpenPGP using GPGMail</p>
<pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg08091.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="thrd2.html#08093">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="mail2.html#08093">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg08092.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg08088.html">LevelDB read performance</a></span> <span class="sender italic">Parnell Springmeyer</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg08090.html">Re: LevelDB read performance</a></span> <span class="sender italic">Parnell Springmeyer</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg08091.html">Re: LevelDB read performance</a></span> <span class="sender italic">Daniel Reverri</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: LevelDB read performance</span> <span class="sender italic">Parnell Springmeyer</span></li>
</ul></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg08092.html">Re: LevelDB read performance</a></span> <span class="sender italic">John D. Rowell</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg08094.html">Re: LevelDB read performance</a></span> <span class="sender italic">Parnell Springmeyer</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg08096.html">Re: LevelDB read performance</a></span> <span class="sender italic">Parnell Springmeyer</span></li>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: LevelDB read performance">
<input type="hidden" name="msgid" value="C83B9C18-F10C-41A4-91B9-509511A4D20B@gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg08093.html">
<input type="submit" value=" Parnell Springmeyer ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+LevelDB+read+performance%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg08091.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg08092.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">C83B9C18-F10C-41A4-91B9-509511A4D20B@gmail.com</li>
</ul>
</div>
</body>
</html>
