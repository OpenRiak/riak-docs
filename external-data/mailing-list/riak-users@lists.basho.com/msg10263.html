<!DOCTYPE html>
<html lang="en">
<head>
<title>RE: Import/Export and Bulk operations</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#10263" id="c">
<link rel="index" href="maillist.html#10263" id="i">
<link rel="prev" href="msg10258.html" id="p">
<link rel="next" href="msg10154.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg10263.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22RE%5C%3A+Import%5C%2FExport+and+Bulk+operations%22&amp;o=newest" rel="nofollow"><span itemprop="name">RE: Import/Export and Bulk operations</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Kevin+Burton%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Kevin Burton</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20130226" rel="nofollow">Tue, 26 Feb 2013 15:59:02 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>This worked just fine on a Joyent server but when I try it on an AWS hosted
server I get:</pre><pre>

 

Port not specified, using the default: 8087

HTTP port not specified, using the default: 8098

Could not connect to Riak on PB port 8087

 

Do you have any experience with using this tool on an AWS machine? I looked
at the AWS security group and it looks like port 8087 is open. I am at  a
loss.

 

From: riak-users [<a  rel="nofollow" href="mailto:riak-users-boun...@lists.basho.com">mailto:riak-users-boun...@lists.basho.com</a>] On Behalf Of
Dmitri Zagidulin
Sent: Tuesday, February 26, 2013 2:53 PM
To: riak-users
Subject: Re: Import/Export and Bulk operations

 

Hi Kevin,

Good questions, all.

1) The warning about app.config values being the same only applies to things
like &quot;if you're using secondary indices on one cluster, you better also turn
them on on the second cluster, and also be running leveldb, etc&quot; or &quot;if
you're using custom quorum values in your config, you better also have the
same values in the other cluster you're migrating to&quot;. They don't literally
need to be the same app.config files -- maybe I can clarify that in the
docs. So basically, it's fine, as long as you use common sense, and turn on
the same things in the other cluster that you need for your app code.

2) If you're running the export on one of the nodes of your source cluster,
I think you might have better luck using localhost instead of the
public-facing hostname. So, try something like:
java -jar riak-data-migrator-0.1.3.jar  -d -a -r ~/riak-dump -h
riak@127.0.0.1 &lt;<a  rel="nofollow" href="mailto:riak@172.16.33.107">mailto:riak@172.16.33.107</a>&gt; 

I don't know your networking environment or firewall rules, but it may
easily be the case that port 8087 might not be open from the outside (via
the public IP), even from inside the node. Anyhow, try the localhost route,
and if that doesn't work, do make sure that the port is actually open in the
firewall (and accessible locally).

Hope that helps.

Dmitri

On Tue, Feb 26, 2013 at 3:04 PM, Kevin Burton &lt;rkevinbur...@charter.net&gt;
wrote:

I have a question about the usage of this tool. I have data locally that I
would like to export to another riak server to test the dataset. The local
&quot;server&quot; is a cluster and the machine I want to transfer to is just a single
machine. I notice in the documentation that there is a &quot;warning&quot; about the
app.config values must be the same on the two machines before this tool can
be used. Naturally since I have a cluster of 4 machines as the source and
only one machine as the destination the app.config will be different. Is
this a problem.  

The cluster of machines all have basically private addresses the destination
server has a public IP address. So I want to transfer from the source to the
destination. I am assuming that I would run the tool on one of the source
clusters and the -h option (for the host) would be the public IP address of
the single Riak server. Right?

When I run it from the source to create file dumps with:

 

java -jar riak-data-migrator-0.1.3.jar  -d -a -r ~/riak-dump -h
riak@172.16.33.107

 

I get the following output:

 

Port not specified, using the default: 8087

HTTP port not specified, using the default: 8098

Could not connect to Riak on PB port 8087

 

So apparently it throw an error. If I look in the app.config it seems that
the port is enabled. Any idea what the problem is?

 

{riak_api, [

. . . .

            {pb_port, 8087 }

            ]},

 

From: riak-users [<a  rel="nofollow" href="mailto:riak-users-boun...@lists.basho.com">mailto:riak-users-boun...@lists.basho.com</a>] On Behalf Of
Dmitri Zagidulin
Sent: Friday, February 22, 2013 10:02 AM
To: riak-users
Subject: Re: Import/Export and Bulk operations

 

Ok, the 0.1.4 binary download link should be working now.

On Fri, Feb 22, 2013 at 9:13 AM, Chris Read &lt;chris.r...@gmail.com&gt; wrote:

The README on the git repo refers to version 0.1.4, but the link to the
download is broken...

 

On Wed, Feb 20, 2013 at 12:07 PM, Hector Castro &lt;hec...@basho.com&gt; wrote:

Hi Kevin,

 

The riak-data-migrator [0] is a tool used by our own professional services
team for bulk data import/export. The prebuilt JAR can be downloaded here
[1].

 

[0] <a  rel="nofollow" href="https://github.com/dankerrigan/riak-data-migrator">https://github.com/dankerrigan/riak-data-migrator</a>

[1] <a  rel="nofollow" href="http://ps-tools.data.riakcs.net:8080/riak-data-migrator-0.1.3-bin.tar.gz">http://ps-tools.data.riakcs.net:8080/riak-data-migrator-0.1.3-bin.tar.gz</a>

 

--

Hector

 

On Wed, Feb 20, 2013 at 5:33 AM, Kevin Burton &lt;rkevinbur...@charter.net&gt;
wrote:

 

I was wondering if there were any import/export or bulk data operations that
I was missing? I would like to &quot;clone&quot; a bucket from one machine to another
but I would like to avoid having to do it one item at a time.

 

_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>

 


_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>

 


_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>

 

 

</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg10258.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#10263">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#10263">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg10154.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg10145.html">Import/Export and Bulk operations</a></span> <span class="sender italic">Kevin Burton</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg10146.html">Re: Import/Export and Bulk operations</a></span> <span class="sender italic">Hector Castro</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg10202.html">Re: Import/Export and Bulk operations</a></span> <span class="sender italic">Chris Read</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg10205.html">Re: Import/Export and Bulk operations</a></span> <span class="sender italic">Dmitri Zagidulin</span></li>
<li class="icons-email"><span class="subject"><a href="msg10207.html">Re: Import/Export and Bulk operations</a></span> <span class="sender italic">Dmitri Zagidulin</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg10253.html">RE: Import/Export and Bulk operations</a></span> <span class="sender italic">Kevin Burton</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg10254.html">Re: Import/Export and Bulk operatio...</a></span> <span class="sender italic">Dan Kerrigan</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg10256.html">RE: Import/Export and Bulk oper...</a></span> <span class="sender italic">Kevin Burton</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg10257.html">Re: Import/Export and Bulk ...</a></span> <span class="sender italic">Dan Kerrigan</span></li>
</ul></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg10258.html">Re: Import/Export and Bulk operatio...</a></span> <span class="sender italic">Dmitri Zagidulin</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">RE: Import/Export and Bulk oper...</span> <span class="sender italic">Kevin Burton</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="RE: Import/Export and Bulk operations">
<input type="hidden" name="msgid" value="002b01ce147d$0cf2cf70$26d86e50$@charter.net">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg10263.html">
<input type="submit" value=" Kevin Burton ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22RE%5C%3A+Import%5C%2FExport+and+Bulk+operations%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg10258.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg10154.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">002b01ce147d$0cf2cf70$26d86e50$@charter.net</li>
</ul>
</div>
</body>
</html>
