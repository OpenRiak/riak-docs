<!DOCTYPE html>
<html lang="en">
<head>
<title>Strong consistency only for missing keys?</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#16252" id="c">
<link rel="index" href="maillist.html#16252" id="i">
<link rel="prev" href="msg16250.html" id="p">
<link rel="next" href="msg16253.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg16252.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Strong+consistency+only+for+missing+keys%5C%3F%22&amp;o=newest" rel="nofollow"><span itemprop="name">Strong consistency only for missing keys?</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Ilya+Kutukov%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Ilya Kutukov</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20150618" rel="nofollow">Thu, 18 Jun 2015 17:14:19 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi!

I am planning to maintain session storage over Riak KV.</pre><pre>

Core case: when user is signing in to the service session token with some
meta is returning to the client and then saving for further usage. At the
back-end side this session key is placing to the session storage.

Riak could response false &quot;not found&quot; when user is providing client-side
token on next request, what following instantly after the session record is
placed to Riak.

&gt;From the end-user POV you log in, than you surprisingly not logged in, then
you are refreshing/restarting client and everything is back to normal. Bad
glitchy case.

Riak have typical distributed DB problems when you are reading after write
instantly. Also there is a high consistency mode with performance
trade-offs.

Is it possible to configure or modify Riak cluster to act hybrid way:

Normally cluster is working in HA mode. E.g. on secondary index searches,
updates, deletions of the existing keys.

But when you are directly asking for the key that seems to be missing the
full quorum is required to claim that there is really no such key on all
nodes in according partition to say &quot;No&quot;. Any other case is &quot;Yes&quot; after
long or a short delay.
In theory, such behaviour will make deletion of keys slower, but situation
with false &quot;not found&quot; will be better.

Or i'm missing some obvious way to resolve read-after-write problem like
proxying requests to the session storage through the single instance 3-rd
party cache?


-- 
Best regards,
Ilya Kutukov

+7 962 909 10 35
post.i...@gmail.com
skype: blinkedeye
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg16250.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#16252">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#16252">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg16253.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email tSliceCur"><span class="subject">Strong consistency only for missing keys?</span> <span class="sender italic">Ilya Kutukov</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg16253.html">Re: Strong consistency only for missing keys?</a></span> <span class="sender italic">Cosmin Marginean</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg16254.html">Re: Strong consistency only for missing keys?</a></span> <span class="sender italic">Sargun Dhillon</span></li>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Strong consistency only for missing keys?">
<input type="hidden" name="msgid" value="CAMBMJwfWqOLG=gCGXe8c37EODBs-YDRCdBqB5XYsfZdPFjjipw@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg16252.html">
<input type="submit" value=" Ilya Kutukov ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Strong+consistency+only+for+missing+keys%5C%3F%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg16250.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg16253.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CAMBMJwfWqOLG=gCGXe8c37EODBs-YDRCdBqB5XYsfZdPFjjipw@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
