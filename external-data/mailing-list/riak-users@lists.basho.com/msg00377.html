<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Number of nodes and links</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#00377" id="c">
<link rel="index" href="maillist.html#00377" id="i">
<link rel="prev" href="msg00376.html" id="p">
<link rel="next" href="msg00378.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg00377.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Number+of+nodes+and+links%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Number of nodes and links</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Alexander+Sicular%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Alexander Sicular</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20100515" rel="nofollow">Sat, 15 May 2010 15:59:26 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi Chris,

Some things I keep in mind re. links:</pre><pre>

-not specifically the total number of links but the total size in kb should be 
considered specifically in regards to the webmachine http interface. i think 
there are problems around 8KB.
-links are unidirectional. a &gt; b != b &gt; a
-links are singular 1 to 1 relationships

Regarding changing links... Riak does not have any multi transaction 
transactional semantics. Meaning each operation is atomic in and of itself and 
can not be made to be dependent on another operation. The catch to this rule is 
pre and post hooks which will trigger at the bucket level and not at the key 
level so you could do certain things. So if you have an architecture where 
links in one object need to be reflected in another object then you either need 
to account for that in your application or augment your application with some 
sort of message queue.

Regarding changing objects (keys) frequently you should familiarize yourself 
with the W and DW parameters which are all beholden to your N val set at the 
bucket level.

I would probably run multiple nodes on one physical machine. As with most 
databases, the bottleneck is usually in the I/O so keep that in mind contention 
wise. But be warned that as per some recent posts, Riak keeps multiple physical 
copies of your data on multiple vnodes. And there are some number of vnodes 
associated with physical nodes. So your data on disk will reflect that 
redundancy.

To the Basho people, it wasn't clear, but are there ways to ensure that 
duplicate copies are not housed on the same physical host?

-Alexander

On May 15, 2010, at 6:05 PM, Chris Hicks wrote:

&gt; For the project I am working on there are going to be a lot of individual 
&gt; objects, eventually into the millions, with the vast majority of them being 
&gt; linked as (poorly) depicted below.
&gt; 
&gt; Overly simplified data model:
&gt; 
&gt;                 B &lt;==========&gt;B
&gt;          ____|___                          ___|___
&gt;         /               \                     /              \
&gt;       C                 C                C                C
&gt;   /  /  \  \         /  /  \  \         /  /  \  \         /  /  \  \
&gt;  |  |   |   |       |  |   |   |       |  |   |   |       |  |   |   |
&gt; D D D D     D D D D     D D D D     D D D D
&gt; 
&gt; Where some of the B level objects (each level separated into different 
&gt; buckets) are linked to each other but in very limited numbers. In some of 
&gt; these areas there will be a ton of rapid updates and in others much more rare 
&gt; updates. Since a decent portion of my data modifications involve nothing more 
&gt; than shifting which C level object a D level object is associated with, is 
&gt; there anything I should keep in mind when planning for a lot of link-changing 
&gt; operations? For example, though for some reason I can't find it now, I 
&gt; remember reading that the amount of links one could have per object was 
&gt; something like 170K links, is that correct? I understand performance would 
&gt; degrade quite a bit when one has that amount of data for a single object and 
&gt; my project won't call for anywhere near that but just want to understand the 
&gt; nuances of the whole process.
&gt; 
&gt; Also, sort of related, I plan on running this whole thing on a single 
&gt; dedicated server machine (unless I get major usage and get the money to 
&gt; upgrade) that will have multiple CPU's. Should I just operate one physical 
&gt; node on that machine or should I match the number of CPU's with the number of 
&gt; nodes, essentially dedicating each physical CPU to handling a hardware node 
&gt; (if that is possible)? What would the pros and cons be to a single or 
&gt; multi-node system on that sort of hardware?
&gt; 
&gt; Chris Hicks.
&gt; 
&gt; The New Busy is not the old busy. Search, chat and e-mail from your inbox. 
&gt; Get started._______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>


_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg00376.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#00377">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#00377">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg00378.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg00375.html">Number of nodes and links</a></span> <span class="sender italic">Chris Hicks</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00376.html">Re: Number of nodes and links</a></span> <span class="sender italic">Preston Marshall</span></li>
<li class="icons-email tSliceCur"><span class="subject">Re: Number of nodes and links</span> <span class="sender italic">Alexander Sicular</span></li>
<li class="icons-email"><span class="subject"><a href="msg00378.html">RE: Number of nodes and links</a></span> <span class="sender italic">Chris Hicks</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00379.html">Re: Number of nodes and links</a></span> <span class="sender italic">Alexander Sicular</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00380.html">RE: Number of nodes and links</a></span> <span class="sender italic">Chris Hicks</span></li>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Number of nodes and links">
<input type="hidden" name="msgid" value="A4FAF996-30BE-4653-AEE9-A876AD8CE2AE@gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg00377.html">
<input type="submit" value=" Alexander Sicular ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Number+of+nodes+and+links%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg00376.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg00378.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">A4FAF996-30BE-4653-AEE9-A876AD8CE2AE@gmail.com</li>
</ul>
</div>
</body>
</html>
