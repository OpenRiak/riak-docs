<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Maps with multiple buckets</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="thrd5.html#13296" id="c">
<link rel="index" href="mail5.html#13296" id="i">
<link rel="prev" href="msg13295.html" id="p">
<link rel="next" href="msg13282.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg13296.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Maps+with+multiple+buckets%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Maps with multiple buckets</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22John+Daily%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">John Daily</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20131218" rel="nofollow">Wed, 18 Dec 2013 14:25:13 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Alex Moore and I provided some general time series advice and links on 
StackOverflow recently: 
<a  rel="nofollow" href="http://stackoverflow.com/questions/19384686/what-is-the-most-efficient-way-to-store-time-series-in-riak-with-heavy-reads">http://stackoverflow.com/questions/19384686/what-is-the-most-efficient-way-to-store-time-series-in-riak-with-heavy-reads</a></pre><pre>

Broadly speaking, issuing dynamic queries via MapReduce is going to be less 
desirable than building responses to the questions you’re going to ask later, 
as the data arrives. As you’ve already seen, writing MapReduce queries is 
rather painful, and Riak’s max performance/availability/scalability is achieved 
when serving key/value requests.

-John


On Dec 18, 2013, at 5:02 PM, Bryce Verdier &lt;bryceverd...@gmail.com&gt; wrote:

&gt; So in playing with things a little bit, I don't think that this list of 
&gt; bucket-key pairs is going to work for me.
&gt; 
&gt; I'm using riak counters to keep tabs of various customers ID's as they travel 
&gt; through our system. So when Bob first shows up, he's seen by one set of 
&gt; servers. Adding 1 to the counter for Bob within some bucket. When he 
&gt; interacts with us, we'll see Bob again in another service. And thus add 1 to 
&gt; another counter for Bob within another bucket.
&gt; 
&gt; so:
&gt; buckets/initial/counters/Bob =&gt; 1
&gt; and:
&gt; buckets/interact/counters/Bob =&gt; 1
&gt; 
&gt; Currently I'm using 2 MR queries to get the list of counts for all customers 
&gt; from both buckets and combine these data sets within the client. I'm trying 
&gt; to see if its possible to do this within 1 query. Maybe return something like:
&gt; {&quot;Bob&quot;: [1,1]}
&gt; in json.
&gt; 
&gt; I know that riak_kv_counter:value() requires a RiakObject to get the data. I 
&gt; the case of a MR I know the key and that its in another bucket. Is it 
&gt; possible to get the RiakObject based on those two items?
&gt; 
&gt; 
&gt; 
&gt; 
&gt; On 12/17/2013 05:09 PM, Jeremiah Peschka wrote:
&gt;&gt; The allowable inputs to an MR map phase include a list of bucket key pairs. 
&gt;&gt; If you know your keys in advance the problem is solved.
&gt;&gt; 
&gt;&gt; Can you describe a bit more about how you're using MR? Is this an ad hoc 
&gt;&gt; query? A predictable report? Time based?
&gt;&gt; 
&gt;&gt; ---
&gt;&gt; sent from a tiny portion of the hive mind...
&gt;&gt; in this case, a phone
&gt;&gt; 
&gt;&gt; On Dec 17, 2013 4:51 PM, &quot;Bryce Verdier&quot; &lt;bryceverd...@gmail.com&gt; wrote:
&gt;&gt; Hi All,
&gt;&gt; 
&gt;&gt; I have a question concerning map-reduce. I have two buckets with counters 
&gt;&gt; enabled that have similar keys to track two different metrics. At the moment 
&gt;&gt; in order to combine these two datasets together I have to make 2 different 
&gt;&gt; map-reduce queries and combine the data within the client. I'm wondering 
&gt;&gt; if/how it might be possible to combine both of these queries into one. I'm 
&gt;&gt; thinking that Links are a possibility, but I'm not sure if it would or how 
&gt;&gt; viable a solution it would be.
&gt;&gt; 
&gt;&gt; Any and all advice is welcomed.
&gt;&gt; 
&gt;&gt; Thanks in advance,
&gt;&gt; Bryce
&gt;&gt; 
&gt;&gt; _______________________________________________
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt; 
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>

</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg13295.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="thrd5.html#13296">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="mail5.html#13296">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg13282.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg13275.html">Maps with multiple buckets</a></span> <span class="sender italic">Bryce Verdier</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13276.html">Re: Maps with multiple buckets</a></span> <span class="sender italic">Jeremiah Peschka</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13278.html">Re: Maps with multiple buckets</a></span> <span class="sender italic">Bryce Verdier</span></li>
<li class="icons-email"><span class="subject"><a href="msg13279.html">Re: Maps with multiple buckets</a></span> <span class="sender italic">Bryce</span></li>
<li class="icons-email"><span class="subject"><a href="msg13295.html">Re: Maps with multiple buckets</a></span> <span class="sender italic">Bryce Verdier</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Maps with multiple buckets</span> <span class="sender italic">John Daily</span></li>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Maps with multiple buckets">
<input type="hidden" name="msgid" value="9AFC2F3B-FCE9-4950-9F49-FBB438423E1D@basho.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg13296.html">
<input type="submit" value=" John Daily ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Maps+with+multiple+buckets%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg13295.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg13282.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">9AFC2F3B-FCE9-4950-9F49-FBB438423E1D@basho.com</li>
</ul>
</div>
</body>
</html>
