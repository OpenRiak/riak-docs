<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: basic question: initial server connection failover?</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#00905" id="c">
<link rel="index" href="maillist.html#00905" id="i">
<link rel="prev" href="msg00903.html" id="p">
<link rel="next" href="msg00908.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg00905.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+basic+question%5C%3A+initial+server+connection+failover%5C%3F%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: basic question: initial server connection failover?</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22TJ+Ninneman%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">TJ Ninneman</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20100817" rel="nofollow">Tue, 17 Aug 2010 08:55:52 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Les,

&gt; I've just glanced over the riak design overview and I think I am missing 
&gt; something basic in the failover technique.  The docs explain that any node 
&gt; can process any query and that adding nodes will re-balance the storage.  My 
&gt; question is, how does the client know which server node to contact initially 
&gt; and what happens if that node is the one that has failed - particularly for 
&gt; the rest interface where you don't have a special client?  Do you typically 
&gt; put server nodes on the same host as the clients so they can use a localhost 
&gt; connection, use round robin DNS, put them behind a load balancer or is there 
&gt; some unique way of handling this?</pre><pre>

This really depends on your architecture.  

You could elect to use a reverse proxy such as Nginx to automatically handle 
request failover and load balancing.  Even as fast and reliable as Nginx is, 
you still need to be careful not to induce a bottle neck or single point of 
failure.

More simply, you could create some sort of a simple connection object which 
manages a pool of connections.  In this I don't mean a pool of persistent HTTP 
keep-alive connections but rather just a simple list of possible servers which 
can be used one after another.  Depending on your app you could simply 
randomize list on each request or keep the object around globally to 
round-robin the requests.

TJ
_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg00903.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#00905">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#00905">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg00908.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg00903.html">basic question: initial server connection failover?</a></span> <span class="sender italic">Les Mikesell</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: basic question: initial server connection failo...</span> <span class="sender italic">TJ Ninneman</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00908.html">Re: basic question: initial server connection f...</a></span> <span class="sender italic">Alexander Sicular</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00909.html">Re: basic question: initial server connecti...</a></span> <span class="sender italic">TJ Ninneman</span></li>
<li class="icons-email"><span class="subject"><a href="msg00910.html">Re: basic question: initial server connecti...</a></span> <span class="sender italic">Les Mikesell</span></li>
</ul></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg00907.html">Re: basic question: initial server connection failo...</a></span> <span class="sender italic">Alexander Sicular</span></li>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: basic question: initial server connection failover?">
<input type="hidden" name="msgid" value="BD1763A9-0BEE-4A84-8A49-DDE344E5F1DB@twopeasinabucket.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg00905.html">
<input type="submit" value=" TJ Ninneman ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+basic+question%5C%3A+initial+server+connection+failover%5C%3F%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg00903.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg00908.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">BD1763A9-0BEE-4A84-8A49-DDE344E5F1DB@twopeasinabucket.com</li>
</ul>
</div>
</body>
</html>
