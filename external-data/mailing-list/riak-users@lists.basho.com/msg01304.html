<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Designing Your Buckets</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#01304" id="c">
<link rel="index" href="maillist.html#01304" id="i">
<link rel="prev" href="msg01300.html" id="p">
<link rel="next" href="msg01305.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg01304.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Designing+Your+Buckets%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Designing Your Buckets</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Jeremiah+Peschka%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Jeremiah Peschka</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20101015" rel="nofollow">Fri, 15 Oct 2010 04:58:20 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Based on my experience, you're on the right track.

In addition to your main 'entity' buckets, you'll want to create index
buckets that you use to speed lookups and create links back to the entity
buckets.</pre><pre>

e.g. If you have a People bucket that is a nested record for a person with a
mailing address, you might want to create some kind of States bucket with
links to a ZipCodes bucket with further links to the People bucket. This way
you can do link traversal from a state -&gt; zip code -&gt; person.

To perform aggregations, you can use MapReduce. Using buckets and link
walking can make it very easy to perform operations that closely mimic index
seeks.

Someone correct me if I've gone completely off the deep end on this one :)

Jeremiah Peschka
Microsoft SQL Server MVP
MCITP: Database Developer, DBA
614.515.0727


On Fri, Oct 15, 2010 at 1:49 AM, Cagdas Tulek &lt;ctu...@gmail.com&gt; wrote:

&gt; Hi,
&gt;
&gt; I'm a newbie to Riak (and riak like databases) and unfortunately I am a
&gt; long time RDB user. So, my mind is very biased but I try to think
&gt; differently and this will take some time.
&gt;
&gt;  What I understand is that you try to avoid range queries and map/reduce
&gt; operations for live traffic. This part, I guess I understand better.
&gt;
&gt; However, one thing that I don't understand is the needs on admin side.
&gt; Although on frontend you can play smart to limit the objects that a user
&gt; should interact, on the admin side you usually want to list all records and
&gt; usually you want them to be sorted by id or creation time. These are also
&gt; true for your stats etc.
&gt;
&gt; How do you design your buckets in Riak to solve this problem? Or do you use
&gt; different approaches on admin side.
&gt;
&gt; One (maybe dirty) solution with my RDB biased mind is to have auxiliary
&gt; buckets to list items:
&gt; books/book1..n
&gt; lists/list1..n
&gt; where list-i is an array of x keys (where x is a small number like 10, 20).
&gt; This way we can have features like pagination. Same thing maybe for days:
&gt; days/20101014
&gt;
&gt; I try to find slides/documents about these topics but usually the
&gt; information I find is about dealing with individual items and their
&gt; relations, not a list of these items.
&gt;
&gt; I would appreciate any resources addressing these problems.
&gt;
&gt; Best,
&gt;
&gt; Cagdas
&gt;
&gt;
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;
&gt;
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg01300.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#01304">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#01304">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg01305.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg01300.html">Designing Your Buckets</a></span> <span class="sender italic">Cagdas Tulek</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Designing Your Buckets</span> <span class="sender italic">Jeremiah Peschka</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg01305.html">Re: Designing Your Buckets</a></span> <span class="sender italic">Alexander Sicular</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg01306.html">Re: Designing Your Buckets</a></span> <span class="sender italic">Jeremiah Peschka</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg01307.html">Re: Designing Your Buckets</a></span> <span class="sender italic">Alexander Sicular</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg01310.html">Re: Designing Your Buckets</a></span> <span class="sender italic">Cagdas Tulek</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Designing Your Buckets">
<input type="hidden" name="msgid" value="AANLkTikqGSOHbVa=6J8Dw2a0=fgYojfk_sG1wAbea=zJ@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg01304.html">
<input type="submit" value=" Jeremiah Peschka ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Designing+Your+Buckets%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg01300.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg01305.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">AANLkTikqGSOHbVa=6J8Dw2a0=fgYojfk_sG1wAbea=zJ@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
