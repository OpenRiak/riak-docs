<!DOCTYPE html>
<html lang="en">
<head>
<title>How should I avoid words that are effectively stopwords in Riak	Search?</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#10565" id="c">
<link rel="index" href="maillist.html#10565" id="i">
<link rel="prev" href="msg10559.html" id="p">
<link rel="next" href="msg10621.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg10565.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22How+should+I+avoid+words+that+are+effectively+stopwords+in+Riak%09Search%5C%3F%22&amp;o=newest" rel="nofollow"><span itemprop="name">How should I avoid words that are effectively stopwords in Riak	Search?</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Rob+Speer%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Rob Speer</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20130322" rel="nofollow">Fri, 22 Mar 2013 11:23:13 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>My company is starting to use Riak for document storage. I'm pretty happy
about how it has been working so far, but I see the messages of foreboding
and doom out there about Riak Search and I've encountered a problem myself.</pre><pre>

I can't really avoid using Riak Search, as full text indexing is a key
feature we need to provide. If Riak Search is suboptimal, so is basically
every other text index out there. We've just been burned by ElasticSearch's
ineffective load balancing (who would have guessed, consistent hashing is
kind of important).

I know that performing searches in Riak Search that return many thousands
of documents is discouraged for performance reasons, and the developers
encourage removing stopwords to help with this. There's additionally, I
have seen, a hard limit on the number of documents that can be examined by
a search query; if any term matches more than 100,000 documents, the query
will return a too_many_results error (and, incidentally, things will get so
confused that, in the Python client, the *next* query will also fail with
an HTTP error 400).

The question is, what should I actually do to avoid this case? I've already
removed the usual stopwords, but any particular set of documents might have
its own personal stopwords. For example, in a database of millions of hotel
reviews, the word 'hotel' could easily appear in more than 100,000
documents.

If we need to search for '5-star hotel', it's wasteful and probably
crash-prone to retrieve all the 'hotel' results. What I'd really like to do
is just search for '5-star', which because of IDF scoring will have about
the same effect. That requires knowing somehow that the word 'hotel'
appears in too many documents.

Is there a way to determine, via Riak, which terms are overused so I can
remove them from search queries? Or do I need to keep track of this
entirely on the client end so I can avoid searching for those terms?

Thanks,
-- Rob Speer
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg10559.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#10565">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#10565">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg10621.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email tSliceCur"><span class="subject">How should I avoid words that are effectively stopwords in Ri...</span> <span class="sender italic">Rob Speer</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg10621.html">Re: How should I avoid words that are effectively stopwo...</a></span> <span class="sender italic">Ryan Zezeski</span></li>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="How should I avoid words that are effectively stopwords in Riak	Search?">
<input type="hidden" name="msgid" value="CABCiWCszQZV40pLqi5wPyPgQxd_DcMLQOz6prq807WnKeTwWxQ@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg10565.html">
<input type="submit" value=" Rob Speer ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22How+should+I+avoid+words+that+are+effectively+stopwords+in+Riak%09Search%5C%3F%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg10559.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg10621.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CABCiWCszQZV40pLqi5wPyPgQxd_DcMLQOz6prq807WnKeTwWxQ@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
