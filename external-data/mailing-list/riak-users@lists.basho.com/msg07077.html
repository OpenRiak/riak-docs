<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Link or Secondary Indexes?</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#07077" id="c">
<link rel="index" href="maillist.html#07077" id="i">
<link rel="prev" href="msg07076.html" id="p">
<link rel="next" href="msg07078.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg07077.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Link+or+Secondary+Indexes%5C%3F%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Link or Secondary Indexes?</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Kresten+Krab+Thorup%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Kresten Krab Thorup</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20120329" rel="nofollow">Thu, 29 Mar 2012 07:51:22 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>It all depends on how you use it. At scale, the number of disk accesses and 
round trips may be quite different from what you'd expect.</pre><pre>

If you &quot;usually&quot; would want to follow the links, then you're probably better 
off denormalizing the data in Riak so you can get the information you need in 
fewer round trips and disk reads. I.e. embed the linked to information directly 
in your objects.  

Ive seen comments here on the list that links are bad if you expect more than 
~1000 per object, ... If you need them followed often then you only want max 10 
... Remember that each individual link-following is another disk read.  
Secondary indexing scales much better to large numbers, but has the drawback 
that a query hits 1/N of your vnodes (typically all machines). For many kinds 
of indexing riak_search is fundamentally a superior solution, but it has some 
operational drawbacks in recovery from node crashes.

So Either way, a de-normalized &quot;document oriented&quot; or &quot;pre-cooked&quot; data model 
will perform better. Then secondary indexing or links can be used for more 
infrequent ad-hoc queries.

Kresten

On Mar 29, 2012, at 16:29, &quot;Buri Arslon&quot; &lt;buri...@gmail.com&gt; wrote:

&gt; Hi,
&gt; 
&gt; While developing my pet project few questions came to my mind and I decided 
&gt; to consult with you.
&gt; 
&gt; Which of them are more effective for recording relationships: Link or 
&gt; Secondary Indexes?
&gt; 
&gt; 1. Friend relationships: like Facebook friends?
&gt; 2. Followed/follower relationships like in Twitter?
&gt; 3. Member/Club relationship like fanpage in Facebook?
&gt; 4. Like in Facebook?
&gt; 
&gt; Thanks,
&gt; -- buriwoy
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>

_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg07076.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#07077">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#07077">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg07078.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg07076.html">Link or Secondary Indexes?</a></span> <span class="sender italic">Buri Arslon</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Link or Secondary Indexes?</span> <span class="sender italic">Kresten Krab Thorup</span></li>
<li class="icons-email"><span class="subject"><a href="msg07078.html">Re: Link or Secondary Indexes?</a></span> <span class="sender italic">Jeffrey Massung</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg07079.html">Re: Link or Secondary Indexes?</a></span> <span class="sender italic">Buri Arslon</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg07080.html">Re: Link or Secondary Indexes?</a></span> <span class="sender italic">Jeremiah Peschka</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg07083.html">Re: Link or Secondary Indexes?</a></span> <span class="sender italic">Buri Arslon</span></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg07082.html">Re: Link or Secondary Indexes?</a></span> <span class="sender italic">Alexander Sicular</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg07084.html">Re: Link or Secondary Indexes?</a></span> <span class="sender italic">Buri Arslon</span></li>
<li class="icons-email"><span class="subject"><a href="msg07085.html">Re: Link or Secondary Indexes?</a></span> <span class="sender italic">Buri Arslon</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Link or Secondary Indexes?">
<input type="hidden" name="msgid" value="3E05443A-C5DC-4BCF-8E24-BB88C39650C1@trifork.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg07077.html">
<input type="submit" value=" Kresten Krab Thorup ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Link+or+Secondary+Indexes%5C%3F%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg07076.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg07078.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">3E05443A-C5DC-4BCF-8E24-BB88C39650C1@trifork.com</li>
</ul>
</div>
</body>
</html>
