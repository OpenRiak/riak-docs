<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: links vs 2i</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#08624" id="c">
<link rel="index" href="maillist.html#08624" id="i">
<link rel="prev" href="msg08620.html" id="p">
<link rel="next" href="msg08636.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg08624.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+links+vs+2i%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: links vs 2i</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Jeremiah+Peschka%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Jeremiah Peschka</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20120921" rel="nofollow">Fri, 21 Sep 2012 08:20:17 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Another consideration of links is that links will be returned in the HTTP 
headers. If you have too many links, then you can blow away the max size limits 
on an HTTP header and bad things will happen.</pre><pre>

There's MR functionality to link walk[1], but link walking may or may not be 
quick depending on your client library, links, phase of the moon, etc. Maybe 
one of the Ripple devs can comment on how things work over there.

What's the big picture problem that you're trying to solve? Are you try to 
determine the fastest way to traverse a rigid hierarchy in your data?

The sample MR query you provided looks like you're effectively trying to 
accomplish something like:

SELECT d.*
FROM countries co
JOIN states s ON co.country_id = s.country_id
JOIN cities ci on s.state_id = ci.state_id
JOIN streets st ON ci.city_id = st.city_id
JOIN devices d ON st.street_id = d.street_id
WHERE co.name = 'USA';

If that's the case, why not store the intermediate data as secondary indexes on 
the device itself? Then you can simply run a query to determine which devices 
are in the US rather than walk across multiple buckets. With sufficient 
secondary indexes at your intermediate levels, you should be able to easily 
recompute your various roll ups for reporting as the underlying data changes 
and still get quick reporting without having to traverse the existing buckets. 

[1]: <a  rel="nofollow" href="http://basho.com/blog/technical/2010/02/24/link-walking-by-example/">http://basho.com/blog/technical/2010/02/24/link-walking-by-example/</a>
--- 
Jeremiah Peschka - Managing Director, Brent Ozar PLF, LLC
Microsoft SQL Server MVP

On Sep 21, 2012, at 2:46 AM, Christian Dahlqvist &lt;christ...@whitenode.com&gt; 
wrote:

&gt; Hello Timo,
&gt; 
&gt; I recently played around with using secondary indexes instead of links, and 
&gt; since I did not find any mapreduce functions that allowed me to follow 21 
&gt; &quot;links&quot;, I wrote a couple myself. These are available on my GitHub account 
&gt; and I also submitted them to Basho Contrib yesterday for review.
&gt; 
&gt; Using secondary indexes to represent relationships will require the mapreduce 
&gt; function to execute an index query, which will most likely be slower than 
&gt; link walking, although it will as you stated be easier to maintain due to the 
&gt; reduced number of records that need to be modified. As you seem to have a 
&gt; quite deep hierarchy, maybe a mixture of links (for records and relationships 
&gt; not changing often) and 2i &quot;links&quot; may work?
&gt; 
&gt; Best regards,
&gt; 
&gt; Christian 
&gt; 
&gt; 
&gt; 
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>

</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg08620.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#08624">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#08624">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg08636.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg08615.html">links vs 2i</a></span> <span class="sender italic">Timo Gatsonides</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg08620.html">Re: links vs 2i</a></span> <span class="sender italic">Christian Dahlqvist</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: links vs 2i</span> <span class="sender italic">Jeremiah Peschka</span></li>
<li class="icons-email"><span class="subject"><a href="msg08636.html">Re: links vs 2i</a></span> <span class="sender italic">Mark Phillips</span></li>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: links vs 2i">
<input type="hidden" name="msgid" value="389CD04E-043C-4056-98C8-A60C5473186C@gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg08624.html">
<input type="submit" value=" Jeremiah Peschka ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+links+vs+2i%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg08620.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg08636.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">389CD04E-043C-4056-98C8-A60C5473186C@gmail.com</li>
</ul>
</div>
</body>
</html>
