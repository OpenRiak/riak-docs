<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Issues with Riak Control</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="thrd2.html#07393" id="c">
<link rel="index" href="maillist.html#07393" id="i">
<link rel="prev" href="msg07392.html" id="p">
<link rel="next" href="msg07015.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg07393.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Issues+with+Riak+Control%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Issues with Riak Control</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Chris+Meiklejohn%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Chris Meiklejohn</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20120507" rel="nofollow">Mon, 07 May 2012 14:00:15 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi Dmitry,

We haven't merged a fix in just yet, but we're hoping to over the next week
or so.</pre><pre>

In the interim, you should be able to modify priv/admin/js/pjax.js, line
184 and increase the timeout to something larger, like 10000 (or larger)
which should resolve the issue when you are dealing with high latency.
 Please let us know if this works for you.

In regards to the incorrect content types, I've just merged a change [1]
which will return the correct content types for files served from
webmachine off the filesystem.

[1] <a  rel="nofollow" href="https://github.com/basho/riak_control/pull/18">https://github.com/basho/riak_control/pull/18</a>

Thanks.

Christopher Meiklejohn
Software Engineer

On Mon, May 7, 2012 at 4:45 PM, &lt;char...@contentomni.com&gt; wrote:

&gt; Hi Dmitry,
&gt;
&gt; I was actually able to solve this problem a while back. I was also told
&gt; that the changes would be pushed to Github, I haven't had cause to check if
&gt; this was actually done.
&gt;
&gt; The problem was with some files in the
&gt; /usr/lib/riak/lib/riak_control-0.1.0/priv directory. It's somewhat of a
&gt; timeout issue in one of the javascript files.
&gt;
&gt; If you like I could tell you what you need to update to get it working?!
&gt;
&gt; Cheers.
&gt;
&gt; Charles.
&gt;
&gt; -----Original Message-----
&gt; From: &quot;Dmitry Demeshchuk&quot; &lt;demeshc...@gmail.com&gt;
&gt; Sent: Monday, 7 May, 2012 8:54pm
&gt; To: char...@contentomni.com
&gt; Cc: &quot;Jeffrey Massung&quot; &lt;j...@basho.com&gt;, &quot;riak-users&quot; &lt;
&gt; riak-users@lists.basho.com&gt;
&gt; Subject: Re: Issues with Riak Control
&gt;
&gt; Hi, Charles.
&gt;
&gt; We are experiencing the same problem. I replaced all the files with
&gt; the newest ones, not result. Restarted Riak just in case â€“ still the
&gt; same.
&gt;
&gt; For what it's worth, the CSS that is being served (by webmachine, I
&gt; guess) has content-type &quot;text/html&quot;.
&gt;
&gt; Also, I have very long ping to our servers (200-500ms), and when
&gt; riak_control main page is loading I can see it for about a second.
&gt; Then this white non-CSS'ed page appears. But the folks that reside in
&gt; SF close to the servers say they don't even see the home page, just
&gt; this &quot;Current Snapshot&quot; stuff.
&gt;
&gt; Riak version is 1.1.2.
&gt;
&gt; Please let me know if you need to know anything else.
&gt;
&gt; Thank you.
&gt;
&gt; On Fri, Mar 23, 2012 at 1:18 AM,  &lt;char...@contentomni.com&gt; wrote:
&gt; &gt; Jeff,
&gt; &gt;
&gt; &gt; Thanks a lot for helping me deal with the issue.
&gt; &gt;
&gt; &gt; For those who need to make changes now without having to edit any
&gt; javascript files, you can do the following:
&gt; &gt;
&gt; &gt; 1. Clone Riak Control from Github
&gt; &gt; 2. Remove your old priv file (/usr/lib/riak/lib/riak_control-0.1.0/priv)
&gt; &gt; 3. Copy the new priv folder over to the same location
&gt; &gt;
&gt; &gt; Hopefully these changes would already have been pushed to github by the
&gt; time you need to use them.
&gt; &gt;
&gt; &gt; Cheers.
&gt; &gt;
&gt; &gt; -----Original Message-----
&gt; &gt; From: &quot;Jeffrey Massung&quot; &lt;j...@basho.com&gt;
&gt; &gt; Sent: Thursday, 22 March, 2012 9:50pm
&gt; &gt; To: char...@contentomni.com
&gt; &gt; Cc: &quot;riak-users&quot; &lt;riak-users@lists.basho.com&gt;
&gt; &gt; Subject: Re: Issues with Riak Control
&gt; &gt;
&gt; &gt; Replying now for posterity:
&gt; &gt;
&gt; &gt; Riak Control uses pjax for templating and dynamic updating of page
&gt; elements. It's a great tool. However, it also has a very small default ajax
&gt; timeout for page requests, and when there's a timeout, the ajax callback
&gt; returns a success code, but with an empty document. The Riak Control code
&gt; makes an assumption about empty pages (to-be fixed), which then performs a
&gt; redirect to the document in question.
&gt; &gt;
&gt; &gt; Charles' issue has been corrected by modifying some JavaScript in Riak
&gt; Control. We're going to be fixing this issue with something a bit more
&gt; robust and and pushing it to GitHub.
&gt; &gt;
&gt; &gt; Note: while we saw the reason for the problem quickly, Armon's email
&gt; about timeouts is what led us down that path. A hearty thanks goes out to
&gt; him for that insight! ;-)
&gt; &gt;
&gt; &gt; --
&gt; &gt; Jeffrey Massung
&gt; &gt; Software Engineer
&gt; &gt; j...@basho.com
&gt; &gt;
&gt; &gt; On Mar 22, 2012, at 9:28 AM, Jeffrey Massung wrote:
&gt; &gt;
&gt; &gt;&gt; Charles, I've emailed you off-list with a whole set of things to test.
&gt; We have an idea what the problem might be. For posterity, once a solution
&gt; is arrived at, I'll post it back to the mailing list.
&gt; &gt;&gt;
&gt; &gt;&gt; --
&gt; &gt;&gt; Jeffrey Massung
&gt; &gt;&gt; Software Engineer
&gt; &gt;&gt; j...@basho.com
&gt; &gt;&gt;
&gt; &gt;&gt; On Mar 21, 2012, at 9:13 PM, char...@contentomni.com wrote:
&gt; &gt;&gt;
&gt; &gt;&gt;&gt; Yes, it does return the css file.
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; The way I've setup my cluster is that I am using my private ip address
&gt; (remember I'm using Rackspace Cloud Servers) for my riak_core-&gt;http setting
&gt; in app.config, and I am using my public ip address for the riak_core-&gt;https
&gt; setting.
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; Everything is working ok on the cluster, everything looks ok from
&gt; riak-admin status. I just have the problem with riak control.
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; -----Original Message-----
&gt; &gt;&gt;&gt; From: &quot;Jeffrey Massung&quot; &lt;j...@basho.com&gt;
&gt; &gt;&gt;&gt; Sent: Wednesday, 21 March, 2012 11:59pm
&gt; &gt;&gt;&gt; To: char...@contentomni.com
&gt; &gt;&gt;&gt; Cc: &quot;riak-users&quot; &lt;riak-users@lists.basho.com&gt;
&gt; &gt;&gt;&gt; Subject: Re: Issues with Riak Control
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; Charles,
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; A quick test... on the command prompt, does the following return the
&gt; CSS file?
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; curl -k <a  rel="nofollow" href="https://user:pass@localhost:8069/admin/ui/style.css">https://user:pass@localhost:8069/admin/ui/style.css</a>
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; Note: change the credentials, ip, and port appropriately for your
&gt; cluster setup. I'll look at something else for the URL redirection to the
&gt; template folder - that shouldn't be happening (obviously).
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; --
&gt; &gt;&gt;&gt; Jeffrey Massung
&gt; &gt;&gt;&gt; Software Engineer
&gt; &gt;&gt;&gt; j...@basho.com
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; On Mar 21, 2012, at 4:32 PM, char...@contentomni.com wrote:
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt;&gt; I tried Firefox 9, Safari 5, and the latest Chrome. I would hardly
&gt; consider these old browsers.
&gt; &gt;&gt;&gt;&gt;
&gt; &gt;&gt;&gt;&gt; -----Original Message-----
&gt; &gt;&gt;&gt;&gt; From: &quot;Jeffrey Massung&quot; &lt;j...@basho.com&gt;
&gt; &gt;&gt;&gt;&gt; Sent: Wednesday, 21 March, 2012 11:22pm
&gt; &gt;&gt;&gt;&gt; To: char...@contentomni.com
&gt; &gt;&gt;&gt;&gt; Cc: &quot;riak-users&quot; &lt;riak-users@lists.basho.com&gt;
&gt; &gt;&gt;&gt;&gt; Subject: Re: Issues with Riak Control
&gt; &gt;&gt;&gt;&gt;
&gt; &gt;&gt;&gt;&gt; This is very much the behavior of older browsers not loading the CSS
&gt; properly and displaying it. IE7, old versions of FireFox, etc. Have you
&gt; tried Chrome, Safari, a latest FireFox, IE8+, etc?
&gt; &gt;&gt;&gt;&gt;
&gt; &gt;&gt;&gt;&gt; --
&gt; &gt;&gt;&gt;&gt; Jeffrey Massung
&gt; &gt;&gt;&gt;&gt; Software Engineer
&gt; &gt;&gt;&gt;&gt; j...@basho.com
&gt; &gt;&gt;&gt;&gt;
&gt; &gt;&gt;&gt;&gt; On Mar 21, 2012, at 4:09 PM, char...@contentomni.com wrote:
&gt; &gt;&gt;&gt;&gt;
&gt; &gt;&gt;&gt;&gt;&gt; I recently installed a Riak (1.1.1) Cluster on Rackspace Cloud
&gt; Servers. Everything seems to be working ok.
&gt; &gt;&gt;&gt;&gt;&gt;
&gt; &gt;&gt;&gt;&gt;&gt; I set up the configuration to enable Riak Control. However, I am
&gt; having a few issues using it.
&gt; &gt;&gt;&gt;&gt;&gt;
&gt; &gt;&gt;&gt;&gt;&gt; As soon as I login in it shows me the home page briefly and then it
&gt; just displays the following in only text:
&gt; &gt;&gt;&gt;&gt;&gt;
&gt; &gt;&gt;&gt;&gt;&gt; Current Snapshot...
&gt; &gt;&gt;&gt;&gt;&gt;
&gt; &gt;&gt;&gt;&gt;&gt; Your cluster is healthy.
&gt; &gt;&gt;&gt;&gt;&gt; You currently have...
&gt; &gt;&gt;&gt;&gt;&gt; 0 Unreachable nodes
&gt; &gt;&gt;&gt;&gt;&gt; 0 Nodes marked as 'down'
&gt; &gt;&gt;&gt;&gt;&gt; 0 Nodes experiencing low memory
&gt; &gt;&gt;&gt;&gt;&gt; Nothing to worry about because Riak is your friend
&gt; &gt;&gt;&gt;&gt;&gt; Your cluster has problems.
&gt; &gt;&gt;&gt;&gt;&gt; The following nodes are currently unreachable:
&gt; &gt;&gt;&gt;&gt;&gt; The following nodes are currently marked as 'down':
&gt; &gt;&gt;&gt;&gt;&gt; The following nodes are currently experiencing low memory:
&gt; &gt;&gt;&gt;&gt;&gt;
&gt; &gt;&gt;&gt;&gt;&gt; The URL has also changed from https://&lt;my_ip&gt;:8069/admin/ui/index.html
&gt; to https://&lt;my_ip&gt;:8069/admin/ui/templates/snapshot.pjax. It's like it's
&gt; forcing some kind of redirection and I don't know why.
&gt; &gt;&gt;&gt;&gt;&gt;
&gt; &gt;&gt;&gt;&gt;&gt; Kindly assist,
&gt; &gt;&gt;&gt;&gt;&gt;
&gt; &gt;&gt;&gt;&gt;&gt; Charles.
&gt; &gt;&gt;&gt;&gt;&gt;
&gt; &gt;&gt;&gt;&gt;&gt;
&gt; &gt;&gt;&gt;&gt;&gt; _______________________________________________
&gt; &gt;&gt;&gt;&gt;&gt; riak-users mailing list
&gt; &gt;&gt;&gt;&gt;&gt; riak-users@lists.basho.com
&gt; &gt;&gt;&gt;&gt;&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt; &gt;&gt;&gt;&gt;
&gt; &gt;&gt;&gt;&gt;
&gt; &gt;&gt;&gt;&gt;
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; _______________________________________________
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com
&gt; &gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;
&gt;
&gt;
&gt; --
&gt; Best regards,
&gt; Dmitry Demeshchuk
&gt;
&gt;
&gt;
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg07392.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="thrd2.html#07393">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#07393">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg07015.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg07020.html">Re: Issues with Riak Control</a></span> <span class="sender italic">charles</span></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg07019.html">Re: Issues with Riak Control</a></span> <span class="sender italic">Jeffrey Massung</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg07021.html">Re: Issues with Riak Control</a></span> <span class="sender italic">charles</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg07022.html">Re: Issues with Riak Control</a></span> <span class="sender italic">Jeffrey Massung</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg07023.html">Re: Issues with Riak Control</a></span> <span class="sender italic">charles</span></li>
<li class="icons-email"><span class="subject"><a href="msg07024.html">Re: Issues with Riak Control</a></span> <span class="sender italic">Jeffrey Massung</span></li>
<li class="icons-email"><span class="subject"><a href="msg07026.html">Re: Issues with Riak Control</a></span> <span class="sender italic">Jeffrey Massung</span></li>
<li class="icons-email"><span class="subject"><a href="msg07028.html">Re: Issues with Riak Control</a></span> <span class="sender italic">charles</span></li>
<li class="icons-email"><span class="subject"><a href="msg07391.html">Re: Issues with Riak Control</a></span> <span class="sender italic">Dmitry Demeshchuk</span></li>
<li class="icons-email"><span class="subject"><a href="msg07392.html">Re: Issues with Riak Control</a></span> <span class="sender italic">charles</span></li>
<li class="icons-email tSliceCur"><span class="subject">Re: Issues with Riak Control</span> <span class="sender italic">Chris Meiklejohn</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Issues with Riak Control">
<input type="hidden" name="msgid" value="CAJBra_kUjytqO_ny7bARrOoTq3gJL6Z2Ocii_AOzJPTfQkKPOQ@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg07393.html">
<input type="submit" value=" Chris Meiklejohn ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Issues+with+Riak+Control%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg07392.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg07015.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CAJBra_kUjytqO_ny7bARrOoTq3gJL6Z2Ocii_AOzJPTfQkKPOQ@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
