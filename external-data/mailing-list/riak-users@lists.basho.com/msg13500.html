<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Timeouts on Riak Search</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="thrd4.html#13500" id="c">
<link rel="index" href="mail4.html#13500" id="i">
<link rel="prev" href="msg13487.html" id="p">
<link rel="next" href="msg13501.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg13500.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Timeouts+on+Riak+Search%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Timeouts on Riak Search</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Ryan+Zezeski%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Ryan Zezeski</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20140127" rel="nofollow">Mon, 27 Jan 2014 14:21:31 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>On Sun, Jan 26, 2014 at 7:41 PM, ender &lt;extr...@gmail.com&gt; wrote:

&gt; I am continuously getting the following types of errors in my riak logs:
&gt;
&gt; 2014-01-27 00:06:39.735 [error] &lt;0.220.0&gt; Supervisor riak_pipe_builder_sup
&gt; had child undefined started with {riak_pipe_builder,start_link,undefined}
&gt; at &lt;0.18590.125&gt; exit with reason
&gt; {{modfun,riak_search,mapred_search,[&lt;&lt;&quot;Mediastream&quot;&gt;&gt;,&lt;&lt;&quot;(type:image
&gt; type:video type:FacebookPost) AND (teamSlug:nba.san-antonio-spurs
&gt; home_teamSlug:nba.san-antonio-spurs
&gt; away_teamSlug:nba.san-antonio-spurs)&quot;&gt;&gt;]},error,{badmatch,{error,timeout}},[{riak_search,mapred_search,3,[{file,&quot;src/riak_search.erl&quot;},{line,55}]},{riak_kv_mrc_pipe,send_inputs,3,[{file,&quot;src/riak_kv_mrc_pipe.erl&quot;},{line,627}]},{riak_kv_mrc_pipe,'-send_inputs_async/3-fun-0-',3,[{file,&quot;src/riak_kv_mrc_pipe.erl&quot;},{line,557}]}]}
&gt; in context child_terminated
&gt;
&gt; I have just started using Riak last week, so most likely it's user error
&gt; on my part.  Would be grateful for any assistance!
&gt;
&gt; I have also attached some additional info (app.config, log files etc) to
&gt; this email.
&gt;
&gt; Thanks,
&gt;
&gt; Satish
&gt;
&gt;
Satish,</pre><pre>

I see you are doing a disjunction search across the type field `(type:image
type:video type:FacebookPost)`. How many documents match that sub-query? If
it is over 100k then legacy Riak Search will fail to return on the query
causing it to timeout. In general, legacy Riak Search has issues with
larger result sets. In 2.0 there is a new version of Riak Search (code name
Yokozuna) which should have much less issues with larger result sets. You
can try playing with it via the 2.0.0pre11 download.

<a  rel="nofollow" href="http://docs.basho.com/riak/2.0.0pre11/downloads/">http://docs.basho.com/riak/2.0.0pre11/downloads/</a>

<a  rel="nofollow" href="http://docs.basho.com/riak/2.0.0pre11/downloads/">http://docs.basho.com/riak/2.0.0pre11/downloads/</a>

-Z
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg13487.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="thrd4.html#13500">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="mail4.html#13500">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg13501.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg13487.html">Timeouts on Riak Search</a></span> <span class="sender italic">ender</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Timeouts on Riak Search</span> <span class="sender italic">Ryan Zezeski</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13501.html">Re: Timeouts on Riak Search</a></span> <span class="sender italic">Ryan Zezeski</span></li>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Timeouts on Riak Search">
<input type="hidden" name="msgid" value="CACZcpemShjYVem8dqHyxgPB_QTJRdXbXio5iYRzzs76NH7-VnQ@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg13500.html">
<input type="submit" value=" Ryan Zezeski ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Timeouts+on+Riak+Search%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg13487.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg13501.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CACZcpemShjYVem8dqHyxgPB_QTJRdXbXio5iYRzzs76NH7-VnQ@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
