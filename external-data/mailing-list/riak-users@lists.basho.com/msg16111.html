<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Feedback for GSoC project - RIak Destination for Syslog-ng</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#16111" id="c">
<link rel="index" href="maillist.html#16111" id="i">
<link rel="prev" href="msg16110.html" id="p">
<link rel="next" href="msg16114.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg16111.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Feedback+for+GSoC+project+%5C-+RIak+Destination+for+Syslog%5C-ng%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Feedback for GSoC project - RIak Destination for Syslog-ng</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Fred+Dushin%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Fred Dushin</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20150505" rel="nofollow">Tue, 05 May 2015 06:35:48 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>First off, Parth, this is a really exciting project, and I'm glad you're taking 
it on.</pre><pre>

As an SIEM refugee, I have a few questions about the proposal and a few 
thoughts about syslog, generally, and that may help you work out some of your 
thoughts about data types and how you plan to structure data in Riak.

As far as I understand, you're talking about a mapping from keys to sets, but 
I'm unclear on a few things.  What are the keys you are thinking about?  Time 
stamps?  If timestamps, these are presumably the timestamps of the syslog 
event?  Just a word of warning, if so.   You might find a lot of variation in 
timestamp formats and granularity.  Perhaps you can get something reliable out 
of syslog-ng, but that won't help you in the case where syslog-ng is 
functioning as a syslog relay, and you want to preserve the timestamp of the 
originator, which you should, if you want to preserve integrity of the logs 
(e.g, for compliance).  Or are you talking about a key being a (course grained) 
timestamp, say, an integral value in UTC seconds, for example?  And the 
value(s) being all logs in that interval?  Is that your motivation for sets?

How much of the syslog payload are you planning to parse?  RFC-3164 and 
RFC-5424 provide enough BNF to allow standard syslog producers/consumers to 
provide pretty elaborately structured data in a syslog &quot;datagram&quot; (be it sent 
via UDP or TCP, or what have you).  RFC-5424, in particular, has support for 
arbitrarily structured data in a syslog header, which is pretty nice.  However, 
I personally have run into a few issues with this RFC.

First, very few, if any syslog generators support this RFC.  Certainly the 
&quot;legacy&quot; enterprise log sources (operating systems, firewall vendors, etc) 
don't, and even the syslog API [1] doesn't provide enough parameters to make 
structured logs a possibility.  I think there may be some work to improve APIs 
in the community, but to my knowledge nothing has been standardized, no vendors 
are taking up the work.  Besides, most of the syslog implementations out there 
obey the &quot;non-normative&quot; behavior of RFC-3164, so you can get some pretty 
quirky logs in the wild.

Another interesting problem is that the STRUCTURED-DATA element of 5424 uses 
OIDs to discriminate different data types that are encoded in the header.  And 
while there is a kind of loosely coupled authority for OIDs, there is no 
infrastructure for determining a parsing strategy for these fields.  They could 
really be anything, in the worst case.

But regardless of the deeply structured data, you could get some very 
interesting traction by just taking standard headers and indexing them through 
Yokozuna.  Certainly, indexing the body of a syslog message is a great idea, as 
these messages are generally unstructured and fodder for lucene.  This is 
something that Logstash/ElasticSearch can do pretty effectively today, and it 
would be cool to see the same in Riak + some syslog provider.

Finally, it would be really nice if you could structure your plugin in such a 
way that they could eventually be ported to rsyslog [2].  The rsyslogd daemon 
is deployed by default on certain Linux favors and enjoys fairly widespread 
distribution.  You might be able to get it supported in that community, as well.

Best of luck,

-Fred

[1] See <a  rel="nofollow" href="http://linux.die.net/man/3/syslog">http://linux.die.net/man/3/syslog</a> for example.
[2] <a  rel="nofollow" href="http://www.rsyslog.com/doc/v8-stable/">http://www.rsyslog.com/doc/v8-stable/</a>

&gt; On May 5, 2015, at 8:11 AM, Christopher Meiklejohn &lt;cmeiklej...@basho.com&gt; 
&gt; wrote:
&gt; 
&gt; 
&gt;&gt; On May 5, 2015, at 1:01 PM, Gergely Nagy &lt;alger...@madhouse-project.org&gt; 
&gt;&gt; wrote:
&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt;&gt; &quot;Christopher&quot; == Christopher Meiklejohn &lt;cmeiklej...@basho.com&gt; writes:
&gt;&gt; 
&gt;&gt;   Christopher&gt; I’m a bit concerned with your use of the set embedded in the
&gt;&gt;   Christopher&gt; map.
&gt;&gt; 
&gt;&gt; The original idea was to use a Set directly. The Set-in-Map thing was
&gt;&gt; just a thought experiment (Map-in-Set would make more sense).
&gt;&gt; 
&gt;&gt;   Christopher&gt; Large objects have traditionally been a big problem in Riak 
&gt;&gt; due
&gt;&gt;   Christopher&gt; to the use of distributed Erlang and head of line blocking. 
&gt;&gt; I’m
&gt;&gt;   Christopher&gt; curious if you could elaborate on what type of data you will 
&gt;&gt; be
&gt;&gt;   Christopher&gt; storing in the set: how big you expect each item to be, how 
&gt;&gt; big you
&gt;&gt;   Christopher&gt; expect the map to be, and the overall layout of data inside 
&gt;&gt; of the
&gt;&gt;   Christopher&gt; data structure.
&gt;&gt; 
&gt;&gt; The intention is to store log messages in each element of the set:
&gt;&gt; either as a string (syslog or json, or whatever else the user sees fit),
&gt;&gt; or as a map of key-value pairs (where values themselves can be maps
&gt;&gt; too).
&gt;&gt; 
&gt;&gt; On average, the log messages are a few kilobytes in size. There may be
&gt;&gt; exceptions, but &gt;1mb ones are fairly rare. How much data the set would
&gt;&gt; hold... now that's a question that can't really be answered. It is
&gt;&gt; really up to the syslog-ng user to configure that.
&gt; 
&gt; I’m referring to the size of the entire set, not the objects that will be 
&gt; members of 
&gt; the set. Therefore, the performance penalty seen when using large objects 
&gt; would 
&gt; be observed as soon as the size of the entire set (or map) has reached ~1 MB. 
&gt; Given that restriction, I’d imagine you would only be able to store a few 
&gt; messages
&gt; in each set.  That granularity seems like you are no longer getting the 
&gt; benefits 
&gt; of the set.
&gt; 
&gt; Additionally, the primary benefit of the data types in Riak is that they 
&gt; converge 
&gt; deterministically when dealing with concurrent operations.  I’m curious if 
&gt; the set
&gt; is the right choice here; could you just use a custom set format inside of a 
&gt; normal
&gt; Riak object (or store one message per Riak object, given the write will be an 
&gt; immutable log entry?)
&gt; 
&gt; Thanks,
&gt; - Chris
&gt; 
&gt; Christopher Meiklejohn
&gt; Senior Software Engineer
&gt; Basho Technologies, Inc.
&gt; cmeiklej...@basho.com
&gt; 
&gt; 
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>


_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg16110.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#16111">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#16111">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg16114.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg16093.html">Feedback for GSoC project - RIak Destination for Sy...</a></span> <span class="sender italic">Parth Oberoi</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg16096.html">Re: Feedback for GSoC project - RIak Destinati...</a></span> <span class="sender italic">Christopher Meiklejohn</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg16107.html">Re: Feedback for GSoC project - RIak Desti...</a></span> <span class="sender italic">Gergely Nagy</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg16109.html">Re: Feedback for GSoC project - RIak D...</a></span> <span class="sender italic">Christopher Meiklejohn</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg16110.html">Re: Feedback for GSoC project - RI...</a></span> <span class="sender italic">Gergely Nagy</span></li>
<li class="icons-email tSliceCur"><span class="subject">Re: Feedback for GSoC project - RI...</span> <span class="sender italic">Fred Dushin</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg16114.html">Re: Feedback for GSoC project...</a></span> <span class="sender italic">Gergely Nagy</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Feedback for GSoC project - RIak Destination for Syslog-ng">
<input type="hidden" name="msgid" value="001A6DB9-30EC-486E-B88B-BD4CE22C8F63@basho.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg16111.html">
<input type="submit" value=" Fred Dushin ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Feedback+for+GSoC+project+%5C-+RIak+Destination+for+Syslog%5C-ng%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg16110.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg16114.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">001A6DB9-30EC-486E-B88B-BD4CE22C8F63@basho.com</li>
</ul>
</div>
</body>
</html>
