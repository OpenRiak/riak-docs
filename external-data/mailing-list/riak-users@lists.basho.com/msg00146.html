<!DOCTYPE html>
<html lang="en">
<head>
<title>How to model this data layout in Riak?</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#00146" id="c">
<link rel="index" href="maillist.html#00146" id="i">
<link rel="prev" href="msg00177.html" id="p">
<link rel="next" href="msg00148.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg00146.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22How+to+model+this+data+layout+in+Riak%5C%3F%22&amp;o=newest" rel="nofollow"><span itemprop="name">How to model this data layout in Riak?</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Mark+Jones%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Mark Jones</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20100423" rel="nofollow">Fri, 23 Apr 2010 10:18:46 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>If I wanted to build an e-mail system for millions of users, how would I go 
about doing it in  Riak?</pre><pre>

Let's say each e-mail has the following characteristics, to, sender, header, 
body, when, attachments. Every user is identified by a userid, and to is not 
necessarily the same thing as userid.

In addition to the above characteristics, the user would be allowed to place 
tags and flags on various e-mails in a user interface.

In Cassandra could model this in two ways, one using super columns, which I've 
been advised against, and another using the order preserving partitioner where 
the key is made up something like:  userid:convoid:when.  Then I can get  a 
range to bring all of those messages up at one time.

The idea of a convoid is similar to gmails conversation grouping of emails.

With distributed key structure of riak, I'm not sure how to pull this off. 
Since the keys are all consistently hashed, the users information never be 
adjacent to each other and pulling up a group of messages will result in lots 
of seeks.



-----Original Message-----
From: riak-users-boun...@lists.basho.com 
[<a  rel="nofollow" href="mailto:riak-users-boun...@lists.basho.com">mailto:riak-users-boun...@lists.basho.com</a>] On Behalf Of Matthew Pflueger
Sent: Friday, April 23, 2010 11:19 AM
To: Ryan Tilder
Cc: riak-users@lists.basho.com
Subject: Re: Building rel on Debian 2.6.26

Cloning the riak repo and building worked fine.  However, not being
able to build from the tarball is a little disconcerting...
--Matthew



On Fri, Apr 23, 2010 at 12:13, Matthew Pflueger
&lt;matthew.pflue...@gmail.com&gt; wrote:
&gt; Thanks for the tip.  Unfortunately, disabling doesn't seem to work...
&gt; I disabled it in my ~/.hgrc and in ebloom's .hg/hgrc to no avail.  I
&gt; downloaded riak-0.10.tar.gz and installed so no .hg directory.  Any
&gt; other suggestions?
&gt;
&gt; --Matthew
&gt;
&gt;
&gt;
&gt; On Fri, Apr 23, 2010 at 11:56, Ryan Tilder &lt;rtil...@basho.com&gt; wrote:
&gt;&gt; Sounds like you have Mercurial's inotify extension enabled.  hg showconfig
&gt;&gt; should show it.  Workaround for now would be to following the directions in
&gt;&gt; the below link for disabling the extension in the riak repo.  In
&gt;&gt; riak/.hg/hgrc:
&gt;&gt; [extensions]
&gt;&gt; inotify = !
&gt;&gt; <a  rel="nofollow" href="http://mercurial.selenic.com/wiki/UsingExtensions#Enabling_an_extension">http://mercurial.selenic.com/wiki/UsingExtensions#Enabling_an_extension</a>
&gt;&gt;
&gt;&gt; --Ryan
&gt;&gt;
&gt;&gt; On Fri, Apr 23, 2010 at 8:48 AM, Matthew Pflueger
&gt;&gt; &lt;matthew.pflue...@gmail.com&gt; wrote:
&gt;&gt;&gt;
&gt;&gt;&gt; I downloaded built Erlang successfully (minus jinterface, odbc, and
&gt;&gt;&gt; wx) then downloaded riak-0.10.  I did a make all and everything built
&gt;&gt;&gt; fine but then doing a make rel I get the following:
&gt;&gt;&gt;
&gt;&gt;&gt; ==&gt; rel (generate)
&gt;&gt;&gt; ERROR: Unable to generate spec: read file info
&gt;&gt;&gt; /home/mpflueger/riak/rel/../deps/ebloom/.hg/inotify.sock failed
&gt;&gt;&gt;
&gt;&gt;&gt; Has anybody else run into this?  Could this be related to my mercurial
&gt;&gt;&gt; install (I'm using 1.51 downloaded and installed normally using
&gt;&gt;&gt; python2.5).
&gt;&gt;&gt;
&gt;&gt;&gt; --Matthew
&gt;&gt;&gt;
&gt;&gt;&gt; _______________________________________________
&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;&gt;
&gt;&gt;
&gt;

_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>

_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg00177.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#00146">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#00146">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg00148.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg00141.html">Building rel on Debian 2.6.26</a></span> <span class="sender italic">Matthew Pflueger</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00142.html">Re: Building rel on Debian 2.6.26</a></span> <span class="sender italic">Ryan Tilder</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00143.html">Re: Building rel on Debian 2.6.26</a></span> <span class="sender italic">Matthew Pflueger</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00144.html">Re: Building rel on Debian 2.6.26</a></span> <span class="sender italic">Matthew Pflueger</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00145.html">Re: Building rel on Debian 2.6.26</a></span> <span class="sender italic">Ryan Tilder</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00147.html">Re: Building rel on Debian 2.6.26</a></span> <span class="sender italic">Matthew Pflueger</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00150.html">Re: Building rel on Debian 2.6....</a></span> <span class="sender italic">Ryan Tilder</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00177.html">Re: Building rel on Debian ...</a></span> <span class="sender italic">Matthew Pflueger</span></li>
</ul></li>
</ul></li>
</ul></li>
<li class="icons-email tSliceCur"><span class="subject">How to model this data layout in Riak?</span> <span class="sender italic">Mark Jones</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="How to model this data layout in Riak?">
<input type="hidden" name="msgid" value="A683EE2D55D14244B72772B0A53B3A1B012F43A9A840@ihcomm.ImageHawk.local">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg00146.html">
<input type="submit" value=" Mark Jones ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22How+to+model+this+data+layout+in+Riak%5C%3F%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg00177.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg00148.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">A683EE2D55D14244B72772B0A53B3A1B012F43A9A840@ihcomm.ImageHawk.local</li>
</ul>
</div>
</body>
</html>
