<!DOCTYPE html>
<html lang="en">
<head>
<title>RE: Second of multi-node setup on Azure is invisible</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#09486" id="c">
<link rel="index" href="maillist.html#09486" id="i">
<link rel="prev" href="msg09485.html" id="p">
<link rel="next" href="msg09487.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg09486.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22RE%5C%3A+Second+of+multi%5C-node+setup+on+Azure+is+invisible%22&amp;o=newest" rel="nofollow"><span itemprop="name">RE: Second of multi-node setup on Azure is invisible</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Kevin+Burton%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Kevin Burton</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20121208" rel="nofollow">Sat, 08 Dec 2012 21:35:10 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Your idea worked. Thank you. I was able to install riak using the github
shell script mentioned in the doc on the second node. I had to do 'ssh
azureuser@node2' from the node1. But I am still having a problem I tried to
'riak-admin cluster join riak@ &lt;<a  rel="nofollow" href="mailto:riak@%3cinternal.ip.of.node1">mailto:riak@%3cinternal.ip.of.node1</a>&gt;
&lt;internal.ip.of.node1&gt;' from node1 and I get</pre><pre>

 

Attempting to restart script through sudo -H -u riak

Join failed. Try again in a few moments.

 

 

 

From: Michael Johnson [<a  rel="nofollow" href="mailto:m...@mediatemple.net">mailto:m...@mediatemple.net</a>] 
Sent: Saturday, December 08, 2012 6:09 PM
To: Kevin Burton
Subject: Re: Second of multi-node setup on Azure is invisible

 

By functional, I simply mean that the vms are up and running, have internet
connectivity, and you have a way to get onto the console or ssh into them.

 

What you describe could work assuming the the public ip has some sort of
load balancing in front of it.  That is fine as long as you have a way to
get connected to both boxes and you configure riake to utilize the private
ip addresses.

 

You will need to find out how to ssh into the second node which is going to
depend on a lot of things specific to Windows Azure.  Perhaps you can ssh
into the public ip to get connected to node1 and then ssh from there to the
private ip of node2?

 

Until you can get to a command line on both nodes, you are not going to be
able to go any further.  If the way to do that is not evident, then you may
need to contact support for Windows Azure to figure this out.

 

As to why the instructions you linked to didn't work, I can only guess that
either something has changed on the Windows Azure side of things or perhaps
something went wrong on their side of things which isn't immediately
evident.  Or perhaps the instructions simply are wrong.  I have no way
confirm any of these things.

 

Hopefully, either the person who wrote those instructions or someone else
who has used them can chime in and provide some insight.

 

On Sat, Dec 8, 2012 at 4:29 AM, Kevin Burton &lt;rkevinbur...@charter.net&gt;
wrote:

Again the public IPs are the same. The internal IPs are different. Is that
the way it is supposed to be?



On Dec 8, 2012, at 1:05 AM, Michael Johnson &lt;m...@mediatemple.net&gt; wrote:

I just looked at the instructions and they do seem to step you through
creating the virtual machines and clearly that didn't work for you.  Maybe
someone else on this list is familiar with that the Windows Azure setup, but
if you figure out how to give the vms different ips, you should be good to
go. 

On Dec 7, 2012 10:56 PM, &quot;Michael Johnson&quot; &lt;m...@mediatemple.net&gt; wrote:

You say both nodes have the same ip address?  If I am reading that right,
this is your problem. There may be other issues as well, but the same ip on
two machines is always a problem.

Well, that's not entirely true, but in case of most things including riak,
it is.

The instructions assume that you have two functional machines to start with,
but it sounds like this us not the case. 

On Dec 7, 2012 9:18 PM, &quot;Kevin Burton&quot; &lt;rkevinbur...@charter.net&gt; wrote:

I tried to restart the VMs and when I log back in to node1 I get

 

[azureuser@node1 ~]$ sudo riak-admin cluster join riak@
&lt;<a  rel="nofollow" href="mailto:riak@%3cip.of.first.node">mailto:riak@%3cip.of.first.node</a>&gt; &lt;ip.of.first.node&gt;

Attempting to restart script through sudo -H -u riak

sudo: unable to change directory to /var/lib/riak: No such file or directory

sudo: unable to execute /bin/bash: No such file or directory

 

From: Kevin Burton [<a  rel="nofollow" href="mailto:rkevinbur...@charter.net">mailto:rkevinbur...@charter.net</a>] 
Sent: Friday, December 07, 2012 11:03 PM
To: riak-users@lists.basho.com
Subject: RE: Second of multi-node setup on Azure is invisible

 

Also I get the following error when trying to join ('node1') to the cluster:

 

[root@node1 ~]# riak-admin cluster join riak@
&lt;<a  rel="nofollow" href="mailto:riak@%3cip.of.first.node">mailto:riak@%3cip.of.first.node</a>&gt; &lt;ip.of.first.node&gt;

 

Attempting to restart script through sudo -H -u riak

Join failed. Try again in a few moments.

 

From: Kevin Burton [<a  rel="nofollow" href="mailto:rkevinbur...@charter.net">mailto:rkevinbur...@charter.net</a>] 
Sent: Friday, December 07, 2012 10:54 PM
To: riak-users@lists.basho.com
Subject: Second of multi-node setup on Azure is invisible

 

I am trying to follow the instructions at
<a  rel="nofollow" href="http://docs.basho.com/riak/latest/tutorials/installation/Installing-on-Windo">http://docs.basho.com/riak/latest/tutorials/installation/Installing-on-Windo</a>
ws-Azure/. For now I am setting up two nodes. The first node works fine. But
with the second node I am not able to specify a DNS name (since it is not
stand alone). So effectively what I call 'node2' doesn't exist. It shows up
in the portal but PuTTY opening to node2.cloudapp.net does not exist (at
least I cannot connect). They both have the same public IP address. The
instructions indicate that I should install riak on both machines:

 

1.   On each node, once you've connected using the steps above:

Execute:

sudo su -

 

curl -s
<a  rel="nofollow" href="https://raw.github.com/glickbot/riak_on_azure/master/azure_install_riak.sh">https://raw.github.com/glickbot/riak_on_azure/master/azure_install_riak.sh</a> |
sh

 

But since I cannot SSH to the second node I cannot do this. Am I missing
something in the instructions?

 


_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>

 

</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg09485.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#09486">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#09486">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg09487.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg09480.html">Second of multi-node setup on Azure is invisible</a></span> <span class="sender italic">Kevin Burton</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg09481.html">RE: Second of multi-node setup on Azure is invisible</a></span> <span class="sender italic">Kevin Burton</span></li>
<li class="icons-email"><span class="subject"><a href="msg09482.html">RE: Second of multi-node setup on Azure is invisible</a></span> <span class="sender italic">Kevin Burton</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg09485.html">RE: Second of multi-node setup on Azure is invisible</a></span> <span class="sender italic">Kevin Burton</span></li>
<li class="icons-email tSliceCur"><span class="subject">RE: Second of multi-node setup on Azure is invisible</span> <span class="sender italic">Kevin Burton</span></li>
<li class="icons-email"><span class="subject"><a href="msg09487.html">RE: Second of multi-node setup on Azure is invisible</a></span> <span class="sender italic">Kevin Burton</span></li>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="RE: Second of multi-node setup on Azure is invisible">
<input type="hidden" name="msgid" value="011401cdd5ce$eb954520$c2bfcf60$@charter.net">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg09486.html">
<input type="submit" value=" Kevin Burton ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22RE%5C%3A+Second+of+multi%5C-node+setup+on+Azure+is+invisible%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg09485.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg09487.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">011401cdd5ce$eb954520$c2bfcf60$@charter.net</li>
</ul>
</div>
</body>
</html>
