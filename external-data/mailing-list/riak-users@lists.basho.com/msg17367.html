<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Querying SOLR outside of Riak</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#17367" id="c">
<link rel="index" href="maillist.html#17367" id="i">
<link rel="prev" href="msg17362.html" id="p">
<link rel="next" href="msg17368.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg17367.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Querying+SOLR+outside+of+Riak%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Querying SOLR outside of Riak</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Fred+Dushin%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Fred Dushin</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20160516" rel="nofollow">Mon, 16 May 2016 05:50:37 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi Alex,

Other people have chimed in, but let me repeat that while the internal_solr 
interface is accessible via HTTP (and needs to be, at least from Riak 
processes), you cannot use that interface to query Solr and expect a correct 
result set (unless you are using a single node cluster with an n_val of 1).</pre><pre>

When you run your queries through Riak, Yokozuna, the component that interfaces 
with Solr, will use a riak_core coverage plan to generate a distributed Solr 
filter query across the entire cluster that guarantees that for any document 
stored on all Solr nodes in the cluster, the query will select one (and only 
one) replica.  If you were to run your query locally using the internal_solr 
interface, your query would not span the cluster (likely missing documents on 
other nodes) and may have duplicates (e.g., in degenerate cases where you have 
more than one replica on the same node).

I hope that helps explain why using the internal_solr interface is not only not 
recommended, it's also not going to give you the results you expect.

-Fred

&gt; On May 15, 2016, at 4:18 AM, Alex De la rosa &lt;alex.rosa....@gmail.com&gt; wrote:
&gt; 
&gt; Hi Vitaly,
&gt; 
&gt; I know that you can access search via HTTP through Riak like this:
&gt; 
&gt; <a  rel="nofollow" href="http://localhost:8098/search/query/famous?wt=json&amp;q=leader:true">http://localhost:8098/search/query/famous?wt=json&amp;q=leader:true</a> 
&gt; &lt;<a  rel="nofollow" href="http://localhost:8098/search/query/famous?wt=json&amp;q=leader:true">http://localhost:8098/search/query/famous?wt=json&amp;q=leader:true</a>&gt; AND 
&gt; age_i:[25 TO *]
&gt; 
&gt; I didn't find documentation about this, but according to your words I could 
&gt; access SOLR directly like this?
&gt; 
&gt; <a  rel="nofollow" href="http://localhost:8093/internal_solr/famous/select?wt=json&amp;q=leader:true">http://localhost:8093/internal_solr/famous/select?wt=json&amp;q=leader:true</a> 
&gt; &lt;<a  rel="nofollow" href="http://localhost:8093/internal_solr/famous/select?wt=json&amp;q=leader:true">http://localhost:8093/internal_solr/famous/select?wt=json&amp;q=leader:true</a>&gt; AND 
&gt; age_i:[25 TO *]
&gt; 
&gt; If I go through &quot;8098/search&quot; would it be adding extra stress into the Riak 
&gt; cluster? Or is recommended to go through &quot;8098/search&quot; instead of 
&gt; &quot;8093/internal_solr&quot;??
&gt; 
&gt; I just want to see if I can make use of SOLR with an external mapreduce 
&gt; platform (Disco) without giving extra stress to Riak.
&gt; 
&gt; Thanks,
&gt; Rohman
&gt; 
&gt; On Sun, May 15, 2016 at 12:07 PM, Vitaly &lt;13vitam...@gmail.com 
&gt; &lt;<a  rel="nofollow" href="mailto:13vitam...@gmail.com">mailto:13vitam...@gmail.com</a>&gt;&gt; wrote:
&gt; There is, you can query Solr directly via HTTP, at least as of Riak 2.0.x
&gt; 
&gt; Have a look at http://&lt;riak_node&gt;:8093/internal_solr/#/ &lt;&gt; and 
&gt; <a  rel="nofollow" href="http://docs.basho.com/riak/kv/2.1.4/developing/usage/search/#querying">http://docs.basho.com/riak/kv/2.1.4/developing/usage/search/#querying</a> 
&gt; &lt;<a  rel="nofollow" href="http://docs.basho.com/riak/kv/2.1.4/developing/usage/search/#querying">http://docs.basho.com/riak/kv/2.1.4/developing/usage/search/#querying</a>&gt;
&gt; 
&gt; Vitaly
&gt; 
&gt; 
&gt; On Sun, May 15, 2016 at 10:49 AM, Alex De la rosa &lt;alex.rosa....@gmail.com 
&gt; &lt;<a  rel="nofollow" href="mailto:alex.rosa....@gmail.com">mailto:alex.rosa....@gmail.com</a>&gt;&gt; wrote:
&gt; Nobody knows if there is a way to access SOLR right away without going 
&gt; through RIAK's interface?
&gt; 
&gt; Thanks,
&gt; Alex
&gt; 
&gt; On Fri, May 13, 2016 at 11:07 PM, Alex De la rosa &lt;alex.rosa....@gmail.com 
&gt; &lt;<a  rel="nofollow" href="mailto:alex.rosa....@gmail.com">mailto:alex.rosa....@gmail.com</a>&gt;&gt; wrote:
&gt; Hi all,
&gt; 
&gt; If I want to create a Disco cluster [ <a  rel="nofollow" href="http://discoproject.org">http://discoproject.org</a> 
&gt; &lt;<a  rel="nofollow" href="http://discoproject.org/">http://discoproject.org/</a>&gt; ] to build statistics and compile data attacking 
&gt; Riak's SOLR directly without using Riak, how can I do it?
&gt; 
&gt; In this way, I would leave Riak mainly for data IO (post/get) and leave the 
&gt; heavy duty of searching and compiling data to Disco; so Riak's performance 
&gt; shouldn't be affected for searching as mainly it will store and retrieve data 
&gt; only.
&gt; 
&gt; Thanks,
&gt; Alex
&gt; 
&gt; 
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com &lt;<a  rel="nofollow" href="mailto:riak-users@lists.basho.com">mailto:riak-users@lists.basho.com</a>&gt;
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a> 
&gt; &lt;<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>&gt;
&gt; 
&gt; 
&gt; 
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>

</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg17362.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#17367">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#17367">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg17368.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg17347.html">Querying SOLR outside of Riak</a></span> <span class="sender italic">Alex De la rosa</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg17352.html">Re: Querying SOLR outside of Riak</a></span> <span class="sender italic">Alex De la rosa</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg17353.html">Re: Querying SOLR outside of Riak</a></span> <span class="sender italic">Vitaly</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg17354.html">Re: Querying SOLR outside of Riak</a></span> <span class="sender italic">Alex De la rosa</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg17355.html">Re: Querying SOLR outside of Riak</a></span> <span class="sender italic">Vitaly</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg17356.html">Re: Querying SOLR outside of Riak</a></span> <span class="sender italic">Alex De la rosa</span></li>
<li class="icons-email"><span class="subject"><a href="msg17362.html">Re: Querying SOLR outside of Riak</a></span> <span class="sender italic">John O'Brien</span></li>
</ul></li>
<li class="icons-email tSliceCur"><span class="subject">Re: Querying SOLR outside of Riak</span> <span class="sender italic">Fred Dushin</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg17368.html">Re: Querying SOLR outside of Riak</a></span> <span class="sender italic">Alex De la rosa</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg17370.html">Re: Querying SOLR outside of Ria...</a></span> <span class="sender italic">Luke Bakken</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg17371.html">Re: Querying SOLR outside of...</a></span> <span class="sender italic">Alex De la rosa</span></li>
<li class="icons-email"><span class="subject"><a href="msg17372.html">Re: Querying SOLR outside of...</a></span> <span class="sender italic">Jean Chassoul</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Querying SOLR outside of Riak">
<input type="hidden" name="msgid" value="992B5134-E507-42FF-8EA7-31479A7372A7@basho.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg17367.html">
<input type="submit" value=" Fred Dushin ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Querying+SOLR+outside+of+Riak%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg17362.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg17368.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">992B5134-E507-42FF-8EA7-31479A7372A7@basho.com</li>
</ul>
</div>
</body>
</html>
