<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Map function in erlang that takes entire bucket as input?</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#09787" id="c">
<link rel="index" href="maillist.html#09787" id="i">
<link rel="prev" href="msg09786.html" id="p">
<link rel="next" href="msg09788.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg09787.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Map+function+in+erlang+that+takes+entire+bucket+as+input%5C%3F%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Map function in erlang that takes entire bucket as input?</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Christian+Dahlqvist%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Christian Dahlqvist</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20130110" rel="nofollow">Thu, 10 Jan 2013 07:40:21 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi Shaan,

The riakc_pb_socket:mapred function can take several different types of input: 
a bucket name, a list of bucket/key pairs or a secondary index query 
specification. </pre><pre>

If you wanted to run the example in the tutorial based on all keys in the 
groceries bucket instead of having to specify the keys individually, you could 
set input to the bucket name &lt;&lt;&quot;groceries&quot;&gt;&gt; as shown below:

{ok, [{1, [R]}]} = riakc_pb_socket:mapred(
                         Client,
                         [&lt;&lt;&quot;groceries&quot;&gt;&gt;,
                         [{map, {qfun, Count}, none, false},
                          {reduce, {qfun, Merge}, none, true}]).

The specification for what inputs you can specify is available in the riakc.hrl 
file 
(<a  rel="nofollow" href="https://github.com/basho/riak-erlang-client/blob/master/include/riakc.hrl">https://github.com/basho/riak-erlang-client/blob/master/include/riakc.hrl</a>) and 
looks like this:

-type mapred_inputs() :: [{bucket(), key()} | {{bucket(), key()}, term()}] |
                         {modfun, Module::atom(), Function::atom(), [term()]} |
                         bucket() |
                         {index, bucket(), Index::binary(), key()} |
                         {index, bucket(), Index::binary(), StartKey::key(), 
EndKey::key()}.

Best regards,

Christian



On 10 Jan 2013, at 06:56, Shaan Sapra &lt;shaanf...@gmail.com&gt; wrote:

&gt; Hi all,
&gt; 
&gt; I'm exploring the erlang-riak-client and trying to write MapReduce functions 
&gt; to mimic the ones I've written in Javascript and in the riak-ruby-client.
&gt; 
&gt; Following the tutorial here, I have successfully run the query. I have now 
&gt; loaded a bucket with 10000 keys into Riak and now I want to write a simple 
&gt; map function that queries the bucket and returns all of the objects back to 
&gt; me.
&gt; 
&gt; I noticed that the input is specified as {&lt;&lt;&quot;groceries&quot;&gt;&gt;, &lt;&lt;&quot;mine&quot;&gt;&gt;}. Is 
&gt; there is a way to specify just the bucket in its entirety? If I wanted to 
&gt; query my bucket, would I have to list all 10000 keys in a list?
&gt; 
&gt; In the riak-ruby-client, it was possible to add the entire bucket. 
&gt; 
&gt; Thanks for any help! I'm sure this is a silly question, but I've been hard 
&gt; pressed to find good documentation for a novice like me.
&gt; 
&gt; Shaan
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>

</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg09786.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#09787">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#09787">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg09788.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg09783.html">Map function in erlang that takes entire bucket as inp...</a></span> <span class="sender italic">Shaan Sapra</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg09786.html">Re: Map function in erlang that takes entire buck...</a></span> <span class="sender italic">Sean Cribbs</span></li>
<li class="icons-email tSliceCur"><span class="subject">Re: Map function in erlang that takes entire buck...</span> <span class="sender italic">Christian Dahlqvist</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg09788.html">Re: Map function in erlang that takes entire ...</a></span> <span class="sender italic">Christian Dahlqvist</span></li>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Map function in erlang that takes entire bucket as input?">
<input type="hidden" name="msgid" value="C9359461-0F9B-40DA-A33B-0E83E6D89078@basho.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg09787.html">
<input type="submit" value=" Christian Dahlqvist ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Map+function+in+erlang+that+takes+entire+bucket+as+input%5C%3F%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg09786.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg09788.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">C9359461-0F9B-40DA-A33B-0E83E6D89078@basho.com</li>
</ul>
</div>
</body>
</html>
