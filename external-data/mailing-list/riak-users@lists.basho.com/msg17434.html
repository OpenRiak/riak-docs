<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Riak Search and custom Solr components</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#17434" id="c">
<link rel="index" href="maillist.html#17434" id="i">
<link rel="prev" href="msg17433.html" id="p">
<link rel="next" href="msg17435.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg17434.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Riak+Search+and+custom+Solr+components%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Riak Search and custom Solr components</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Steve+Garon%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Steve Garon</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20160531" rel="nofollow">Tue, 31 May 2016 08:56:47 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hey Guillaume,

We had to alter the solrconfig.xml in our deployment because the default
solrconfig.xml does not give good search throughput with a large amount of
documents updating often. I've opened a ticket at basho to get the
solrconfig.xml save into the buckets settings that way they would be the
same across the cluster. I'm not sure when and if they'll have it in. I
guess the more ppl that ask for this, the sooner we'll get it.</pre><pre>

In the meantime, what we did is that during our riak node installation
procedure, we create the index using curl then we override the
solrconfig.xml and then restart riak which in turn restarts solr. From
then, the solrconfig.xml should remain intact. There is one more thing
though. Sometimes, for unknown reasons, riak decides to recreate the
solrconfig.xml. So you might wanna have a script that runs on the node to
validate the solrconfig.xml has not changed and to fix it automatically if
it does.

I know this is not ideal, solrconfig.xml really needs to be saved in bucket
settings like the schema.xml. Lets just hope the Basho works on fixing this
ASAP because for big deployments this is kind of crutial.



Steve

On 30 May 2016 at 13:18, Guillaume Boddaert &lt;
guilla...@lighthouse-analytics.co&gt; wrote:

&gt; Please allow me to bump this previous message that was sent late last
&gt; friday and that didn't attract much attention due to a well deserved
&gt; week-end.
&gt;
&gt;
&gt; On 27/05/2016 19:14, Guillaume Boddaert wrote:
&gt;
&gt; Hi there,
&gt;
&gt; I'm currently testing custom Component in my Riak Search system. As I need
&gt; a suggestion mechanism from the Solr index, I implemented the Suggester
&gt; component (<a  rel="nofollow" href="https://wiki.apache.org/solr/Suggester">https://wiki.apache.org/solr/Suggester</a>).
&gt; It seems to work correctly, yet I have some question regarding the usage
&gt; of custom Solr configuration inside of Riak. The only caveat is that Riak
&gt; commits too often and that the suggestion index must be build manually and
&gt; not on commit. That's fine for me, i'll cron that once per day.
&gt;
&gt; First of all, how do stop/start/reload the solr instance without
&gt; disturbing the Riak core ? For the time being I'm stuck with service
&gt; start/stop. How can I reload my solr cores configuration without stopping
&gt; riak ?
&gt;
&gt; Secondly, is that a good pattern to start tweaking defaults from my solr
&gt; cores (solrconfig.xml) ? Should I stop that right now and consider to use a
&gt; distinct Solr instance if I require those modifications ? Or should I
&gt; consider safe to alter cache/performance settings as well for Solr to match
&gt; my needs ? Can I play with other solr files such as stopwords and stuff
&gt; like that ?
&gt;
&gt; Finally, is there a proper way to alter default solrconfig.xml ? It is
&gt; auto-generated at index creation by Riak, yet that's a BIG and complex file
&gt; that may evolve between Riak releases. I'm creating indexes programatically
&gt; sending my index through Riak interface ( RiakClient.create_search_index in
&gt; Riak Python lib), but if I start to alter configuration I guess I need more
&gt; than that.
&gt; How do you guys would handle this ?
&gt;
&gt; Thanks,
&gt;
&gt; Guillaume
&gt;
&gt;
&gt; _______________________________________________
&gt; riak-users mailing 
&gt; listriak-users@lists.basho.com<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;
&gt;
&gt;
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;
&gt;
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg17433.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#17434">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#17434">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg17435.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg17388.html">Riak Recap, May 20th, 2016</a></span> <span class="sender italic">Alexander Sicular</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg17389.html">Re: Riak Recap, May 20th, 2016</a></span> <span class="sender italic">DeadZen</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg17390.html">Re: Riak Recap, May 20th, 2016</a></span> <span class="sender italic">Outback Dingo</span></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg17418.html">Re: Riak Recap, May 20th, 2016</a></span> <span class="sender italic">Seema Jethani</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg17419.html">Riak Search and custom Solr components</a></span> <span class="sender italic">Guillaume Boddaert</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg17433.html">Re: Riak Search and custom Solr components</a></span> <span class="sender italic">Guillaume Boddaert</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Riak Search and custom Solr compon...</span> <span class="sender italic">Steve Garon</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg17435.html">Re: Riak Search and custom Solr c...</a></span> <span class="sender italic">Alexander Sicular</span></li>
<li class="icons-email"><span class="subject"><a href="msg17436.html">Re: Riak Search and custom Solr c...</a></span> <span class="sender italic">Luke Bakken</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg17437.html">Re: Riak Search and custom So...</a></span> <span class="sender italic">Steve Garon</span></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg17423.html">Riak Recap, May 20th, 2016</a></span> <span class="sender italic">DeadZen</span></li>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Riak Search and custom Solr components">
<input type="hidden" name="msgid" value="CAMNf=zThbZLcJj7s-SCSWjegzNHj3QnVbdS8i6=WxQwcFVB2Lg@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg17434.html">
<input type="submit" value=" Steve Garon ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Riak+Search+and+custom+Solr+components%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg17433.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg17435.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CAMNf=zThbZLcJj7s-SCSWjegzNHj3QnVbdS8i6=WxQwcFVB2Lg@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
