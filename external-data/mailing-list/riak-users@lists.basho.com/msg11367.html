<!DOCTYPE html>
<html lang="en">
<head>
<title>RE: Can't create first user</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="thrd15.html#11367" id="c">
<link rel="index" href="mail15.html#11367" id="i">
<link rel="prev" href="msg11334.html" id="p">
<link rel="next" href="msg11332.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg11367.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22RE%5C%3A+Can%27t+create+first+user%22&amp;o=newest" rel="nofollow"><span itemprop="name">RE: Can't create first user</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Guy+Morton%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Guy Morton</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20130702" rel="nofollow">Tue, 02 Jul 2013 00:51:04 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi Hector,

I successfully created the admin user after fixing the riak/app.config to use 
the proper backend, but I am still struggling to configure the system to work 
properly. </pre><pre>

What I need to know is what IPs should I be using for each component when all 
components are running on a single machine? Ie, it's a single node at this 
stage.

I also want to be able to access the riak-cs services (the riak-cs-control UI 
etc) from a web browser on another machine, create buckets, store files etc.

The documentation is very confusing on this point. This seems like it would be 
a common first use case for people testing RiakCS out, and I can't figure out 
how to make it work. 

Do I need to use SSL? What is the difference between using 127.0.0.1 and the 
external IP on the machine in the config files? Sometimes using the external IP 
seems to make the system non-functional. It's also confusing as to when host 
names (eg s3.blah.com) are the right choice and when IPs are.

A clear bit of documentation showing how to set up this particular use case 
would be very helpful!

Thanks.

--
Guy Morton
Web Development Manager
Brüel &amp; Kjær EMS

________________________________________
From: Hector Castro [hec...@basho.com]
Sent: Tuesday, 25 June 2013 12:17 AM
To: Guy Morton
Cc: Riak Users Mailing List [riak-users@lists.basho.com]
Subject: Re: Can't create first user

On Mon, Jun 24, 2013 at 1:33 AM, Guy Morton &lt;guy.mor...@bksv.com&gt; wrote:
&gt; Hi people. I've seen posts where others have had this same issue, 
&gt; specifically this on the riak_cs issues list - 
&gt; <a  rel="nofollow" href="https://github.com/basho/riak_cs/issues/529">https://github.com/basho/riak_cs/issues/529</a>
&gt;
&gt; Unfortunately the solution is not posted, if there is one. I have followed 
&gt; the instructions to be found here: 
&gt; <a  rel="nofollow" href="http://docs.basho.com/riakcs/latest/tutorials/fast-track/Building-a-Local-Test-Environment/">http://docs.basho.com/riakcs/latest/tutorials/fast-track/Building-a-Local-Test-Environment/</a>
&gt;  but that didn't help. I am still stuck with the same issue.

The 3 most common causes of Riak CS installation issues I've seen so far:

* Riak's `app.config` is not configured with the proper backend [0]
* `anonymous_user_creation` is not set to `true` in the Riak CS `app.config` [1]
* `stanchion_ip` is misconfigured in either the Riak CS or Stanchion
`app.config` [2] [3]

My recommendation would be to check these, and after restarting all of
the services, test that they're up using:

  sudo riak ping
  sudo riak-cs ping
  sudo stanchion ping

[0] 
<a  rel="nofollow" href="http://docs.basho.com/riakcs/latest/cookbooks/configuration/Configuring-Riak/#Setting-up-the-Proper-Riak-Backend">http://docs.basho.com/riakcs/latest/cookbooks/configuration/Configuring-Riak/#Setting-up-the-Proper-Riak-Backend</a>
[1] 
<a  rel="nofollow" href="http://docs.basho.com/riakcs/latest/cookbooks/configuration/Configuring-Riak-CS/#Specifying-the-Admin-User">http://docs.basho.com/riakcs/latest/cookbooks/configuration/Configuring-Riak-CS/#Specifying-the-Admin-User</a>
[2] 
<a  rel="nofollow" href="http://docs.basho.com/riakcs/latest/cookbooks/configuration/Configuring-Riak-CS/#Specifying-the-Stanchion-Node">http://docs.basho.com/riakcs/latest/cookbooks/configuration/Configuring-Riak-CS/#Specifying-the-Stanchion-Node</a>
[3] 
<a  rel="nofollow" href="http://docs.basho.com/riakcs/latest/cookbooks/configuration/Configuring-Stanchion/#Specifying-the-Stanchion-IP-Address-and-Port">http://docs.basho.com/riakcs/latest/cookbooks/configuration/Configuring-Stanchion/#Specifying-the-Stanchion-IP-Address-and-Port</a>

&gt; Help, please?
&gt;
&gt; # curl -H 'Content-Type: application/json' -X POST 
&gt; <a  rel="nofollow" href="http://localhost:8080/riak-cs/user">http://localhost:8080/riak-cs/user</a> -v --data '{&quot;email&quot;:&quot;guy.mor...@bksv.com&quot;, 
&gt; &quot;name&quot;:&quot;guy&quot;}'
&gt; * About to connect() to localhost port 8080 (#0)
&gt; *   Trying 127.0.0.1... connected
&gt; * Connected to localhost (127.0.0.1) port 8080 (#0)
&gt;&gt; POST /riak-cs/user HTTP/1.1
&gt;&gt; User-Agent: curl/7.21.0 (x86_64-pc-linux-gnu) libcurl/7.21.0 OpenSSL/0.9.8o 
&gt;&gt; zlib/1.2.3.4 libidn/1.15 libssh2/1.2.6
&gt;&gt; Host: localhost:8080
&gt;&gt; Accept: */*
&gt;&gt; Content-Type: application/json
&gt;&gt; Content-Length: 45
&gt;&gt;
&gt; &lt; HTTP/1.1 503 Service Unavailable
&gt; &lt; Vary: Accept
&gt; &lt; Server: Riak CS
&gt; &lt; Location: <a  rel="nofollow" href="http://localhost:8080/riak-cs/user">http://localhost:8080/riak-cs/user</a>
&gt; &lt; Date: Mon, 24 Jun 2013 05:21:13 GMT
&gt; &lt; Content-Type: application/xml
&gt; &lt; Content-Length: 192
&gt; &lt;
&gt; * Connection #0 to host localhost left intact
&gt; * Closing connection #0
&gt; &lt;?xml version=&quot;1.0&quot; 
&gt; encoding=&quot;UTF-8&quot;?&gt;&lt;Error&gt;&lt;Code&gt;ServiceUnavailable&lt;/Code&gt;&lt;Message&gt;Please 
&gt; reduce your request 
&gt; rate.&lt;/Message&gt;&lt;Resource&gt;/riak-cs/user&lt;/Resource&gt;&lt;RequestId&gt;&lt;/RequestId&gt;&lt;/Error&gt;
&gt;
&gt; --
&gt; Guy Morton
&gt; Web Development Manager
&gt; Brüel &amp; Kjær EMS
&gt;
&gt; This e-mail is confidential and may be read, copied and used only by the 
&gt; intended recipient. If you have received it in error, please contact the 
&gt; sender immediately by return e-mail. Please then delete the e-mail and do not 
&gt; disclose its contents to any other person.
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>

This e-mail is confidential and may be read, copied and used only by the 
intended recipient. If you have received it in error, please contact the sender 
immediately by return e-mail. Please then delete the e-mail and do not disclose 
its contents to any other person.

_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg11334.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="thrd15.html#11367">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="mail15.html#11367">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg11332.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg11331.html">Can't create first user</a></span> <span class="sender italic">Guy Morton</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg11334.html">Re: Can't create first user</a></span> <span class="sender italic">Hector Castro</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">RE: Can't create first user</span> <span class="sender italic">Guy Morton</span></li>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="RE: Can't create first user">
<input type="hidden" name="msgid" value="34B114DEFEF58F40913EED3036DD41B3733A2781@dkexmbx01.bkogc.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg11367.html">
<input type="submit" value=" Guy Morton ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22RE%5C%3A+Can%27t+create+first+user%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg11334.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg11332.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">34B114DEFEF58F40913EED3036DD41B3733A2781@dkexmbx01.bkogc.com</li>
</ul>
</div>
</body>
</html>
