<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: one-to-very-many link associations</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#00134" id="c">
<link rel="index" href="maillist.html#00134" id="i">
<link rel="prev" href="msg00114.html" id="p">
<link rel="next" href="msg00136.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg00134.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+one%5C-to%5C-very%5C-many+link+associations%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: one-to-very-many link associations</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Orlin+Bozhinov%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Orlin Bozhinov</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20100422" rel="nofollow">Thu, 22 Apr 2010 13:58:09 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre style="margin: 0em;">
Eric,

</pre><tt>Thanks for the bigdata.com &lt;<a  rel="nofollow" href="http://bigdata.com">http://bigdata.com</a>&gt; link.  It's something I 
</tt><tt>had missed spotting.
</tt><pre style="margin: 0em;"></pre><pre>

</pre><tt>The Semantic Web doesn't fit it all either.  I anticipate to much rather 
</tt><tt>search riak (with its upcoming query language) than rely entirely on 
</tt><tt>sparql.  Though I've always had the option in mind.  If you look at my 
</tt><tt>previous reply you'll see I'm considering it.  I wonder what you think 
</tt><tt>about the combined idea...
</tt><pre style="margin: 0em;">

</pre><tt>If riak won't also become a real graph backend, then I'll likely go with 
</tt><tt>an additional hosted database.  It could be a relational db (the most 
</tt><tt>readily available kind), mongodb (i.e. mongohq), talis, etc.
</tt><pre style="margin: 0em;">

Best,

Orlin


Eric Gaumer wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><tt>Don't fall into the trap of &quot;one size fits all&quot;. Riak is an amazing 
</tt><tt>product that can solve a number of tough problems. I don't think this 
</tt><tt>is one of them. You need/want a triple store to (correctly) model this 
</tt><tt>sort of problem. You need flexible schemas, ontologies, and a graph 
</tt><tt>based query language.
</tt><pre style="margin: 0em;">

Take a look at: <a  rel="nofollow" href="http://www.bigdata.com/">http://www.bigdata.com/</a>

Regards,
-Eric

</pre><tt>On Thu, Apr 22, 2010 at 4:23 AM, Orlin Bozhinov &lt;o...@soundsapiens.com 
</tt><tt>&lt;<a  rel="nofollow" href="mailto:o...@soundsapiens.com">mailto:o...@soundsapiens.com</a>&gt;&gt; wrote:
</tt><pre style="margin: 0em;">

    Riak Users,

    Thinking about a data modeling pattern that will allow one to not
    worry about how many links can be had with one-to-many (or
    many-to-many) scenarios.  This question has come up before in
    various places.  One answer I like is Sean's from this thread
    <a  rel="nofollow" href="http://riak.markmail.org/thread/6e7ypt5ndjzjk7mr">http://riak.markmail.org/thread/6e7ypt5ndjzjk7mr</a> saying: &quot;... at
    the point where you have that many links it becomes necessary to
    consider other options, including intermediary objects or
    alternative ways of representing the relationship&quot;.  I wonder if
    an _intermediary way_ could be baked into Ripple (or your client
    library of choice).  This is for the cases when one-to-many can
    become one-to-very-many.

    To make it more interesting, let's say we want to add metadata to
    the relationship as described in the pre-last paragraph of
</pre><tt>    <a  rel="nofollow" href="http://blog.basho.com/2010/03/25/schema-design-in-riak---relationships/">http://blog.basho.com/2010/03/25/schema-design-in-riak---relationships/</a>. 
</tt><tt>    Here is what I have in mind:
</tt><pre style="margin: 0em;">
    {from}-&gt;{from_association}-&gt;{association}-&gt;{to} -- the {curlied}
    are bucket / objects and -&gt; are links.  For example if {from} =
    &quot;user&quot;; and {association} = &quot;interest&quot;; and {to} = {whatever}
    there is interest in - e.g. &quot;event&quot;, &quot;place&quot;, &quot;story&quot;, another
</pre><tt>    &quot;user&quot; or even self-interest :)  But I'm getting ahead of myself. 
</tt><tt>    Let's use a recent example from Basho's blog where a &quot;user&quot; links
</tt><pre style="margin: 0em;">
    {to} = &quot;task&quot;.  So we get: user -has--&gt; user_interest -meta--&gt;
    interest -in--&gt; task.

    The &quot;interest&quot; association could imply &quot;ownership&quot; but maybe the
    application allows its &quot;users&quot; to express interest another's
    &quot;task&quot;.  Maybe it's a collaborative effort...  Reverse-linking
    from the many interests / tasks to their respective owners is easy
    because it's just a single link for task -of--&gt; user or interest
    -of--&gt; user.  In the interests bucket I want to put all kinds of
    useful metadata.  There I would embed (via Composition as Ripple
</pre><tt>    calls it) not only all the &quot;tags&quot;, but also &quot;notes&quot;, &quot;star&quot;, etc. 
</tt><tt>    Think delicious bookmarks or google reader items and so on.  It
</tt><pre style="margin: 0em;">
    seems like a common pattern.  Something that may fit the use case
    of @botanicus too.  One could represent all possible links
    (various associations) between two objects as metadata contained
    in a given &quot;interest&quot;.  Ownership can be a type of interest for
    the sake of link-walking.

    There are three things happening here:
    1. the &quot;very many&quot; (links through intermediary objects)
    2. optional metadata (yet another intermediary object) - multiple
    associations between any two objects can be expressed through
    extra metadata rather than extra links
    3. reusing the &quot;very-many&quot; and / or metadata intermediaries
    -linking--&gt; to objects in different buckets

    The real issue (that #1 solves) is not having an easy ability to
    do &quot;very many&quot; links originating from the same object.  The #2
    metadata object vs a few extra links for tags / notes (which are
    insignificant compared to the many interests a user can have) -
</pre><tt>    makes it easier (in my eyes) to put in Redis for filtering... 
</tt><tt>    Of-course interests (#2) could be specialized (different metadata
</tt><pre style="margin: 0em;">
    models) with regards to what they are about (#3).  On delicious
    that's just bookmarks.  I've got close to 6,000 of them.  Does
    that approach &quot;very many&quot; in terms of Riak?  If &quot;very many&quot; were
    easier to do (with client-library models or otherwise Riak itself)
    #2 &amp; #3 would be indifferent about which intermediary leads to
    them (an extra link-walk step) as they are already possible
    anyway.  How could we step (automagically) through an intermediary
    object (the user_interest &quot;very many&quot; enabler bucket) - having a
    specific target object in mind?

</pre><tt>    I think it may already be possible with current link-walking. 
</tt><tt>    Then it's all a matter of managing the intermediary bucket /
</tt><tt>    objects.  Not exactly sure how the max links are calculated. 
</tt><tt>    According to one formula from the mailing list I may get 1000
</tt><pre style="margin: 0em;">
    headers (limit in mochiweb) * 200 links (&quot;around 40 chars per
    link&quot;) = 200,000 links max?  That seems like &quot;very many&quot;, but
    there was also something about performance burden...  If we took
    those 200 with just a single header, pointing to 200 intermediary
    objects, each pointing to another 200 target objects we would get
    40,000 links.  That's quite a few.  Of-course that number could
    easily get much much bigger (square the default limit).  What
    decides how many links per intermediary object is ideal?  Is it a
    setting that Basho could recommend a default for?  Could Ripple
    automate that?  Some link creation logic is needed and if Riak
    doesn't support it, the client libraries that do &quot;associations&quot;
    are a good candidate for the task.  Also with link deletion -
    we'll need to either keep track of link count per intermediary or
    run map-reduce jobs to clean-up once in a while...

    In either case, link creation should be as simple as knowing which
    intermediary object is the last one and whether we should add the
    next new link through it or through a new intermediary (when a
    certain link count _setting_ is reached).  If this could be
</pre><tt>    automated then it wouldn't matter how many the links are. 
</tt><tt>    Otherwise Riak would have to be monitored and if certain links
</tt><pre style="margin: 0em;">
    begin to get &quot;very many&quot; then a model migration is run to make the
    transition from few straight links to very many.  If client
    libraries could work with both kinds of links then this transition
    would mean tweaking the model association (and link walking
    remaining the same).  But when using Riak's raw interface there
    would be a difference, which means a switch from one-to-many to
    one-to-very-many will usually take some thinking / effort.  Any
    time I'm in doubt, it seems safer to side with the very-many (just
    in case).  What is the cost of an extra step of link-walking as
    compared to changing application code?

    As another example, if one were to build GitHub with Riak, how
    would you model the watching &amp; following associations?  Many users
    would use few, but some would use many, which in a few cases get
    to be very many, which means everybody will watch and follow in
    very-many style.  If the app ui allows it, one has to assume it
    will happen...  Here is the following / watching example for very
    many - different words for having interest in something:

    * separate very-many:
    user -does--&gt; user_following -what--&gt; user
    user -does--&gt; user_watching -what--&gt; repo (-of--&gt; user)
    * combined very-many:
    user -has--&gt; user_interest -for--&gt; {whatever}
    * combined very-many + metadata:
    user -has--&gt; user_interest -meta--&gt; interest -for--&gt; {whatever}
    * and if metadata was different, perhaps:
    user -has--&gt; user_interest -meta--&gt; interest_user -what--&gt; user
    user -has--&gt; user_interest -meta--&gt; interest_repo -what--&gt; repo

    Whatever the pattern, it would be nice to have the best practices
    defined and implemented for reuse (via association-proficient
    client libs - a la Ripple).  After all, Riak users like big data,
    which is another way of saying very many items of stuff -- and why
    not very many hands / links too :)

    Orlin


    _______________________________________________
    riak-users mailing list
    riak-users@lists.basho.com &lt;<a  rel="nofollow" href="mailto:riak-users@lists.basho.com">mailto:riak-users@lists.basho.com</a>&gt;
    <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>


------------------------------------------------------------------------

_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre><tt>   
</tt></blockquote><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg00114.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#00134">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#00134">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg00136.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg00111.html">one-to-very-many link associations</a></span> <span class="sender italic">Orlin Bozhinov</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00113.html">Re: one-to-very-many link associations</a></span> <span class="sender italic">Sean Cribbs</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00115.html">Re: one-to-very-many link associations</a></span> <span class="sender italic">Eric Gaumer</span></li>
<li class="icons-email"><span class="subject"><a href="msg00132.html">Re: one-to-very-many link associations</a></span> <span class="sender italic">Orlin Bozhinov</span></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg00114.html">Re: one-to-very-many link associations</a></span> <span class="sender italic">Eric Gaumer</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: one-to-very-many link associations</span> <span class="sender italic">Orlin Bozhinov</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00136.html">Re: one-to-very-many link associations</a></span> <span class="sender italic">Eric Gaumer</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00139.html">Re: one-to-very-many link associations</a></span> <span class="sender italic">Orlin Bozhinov</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: one-to-very-many link associations">
<input type="hidden" name="msgid" value="4BD0B5EA.9090902@soundsapiens.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg00134.html">
<input type="submit" value=" Orlin Bozhinov ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+one%5C-to%5C-very%5C-many+link+associations%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg00114.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg00136.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">4BD0B5EA.9090902@soundsapiens.com</li>
</ul>
</div>
</body>
</html>
