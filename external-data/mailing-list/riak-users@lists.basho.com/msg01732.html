<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Riak search querying</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#01732" id="c">
<link rel="index" href="maillist.html#01732" id="i">
<link rel="prev" href="msg01720.html" id="p">
<link rel="next" href="msg01723.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg01732.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Riak+search+querying%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Riak search querying</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Rusty+Klophaus%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Rusty Klophaus</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20101206" rel="nofollow">Mon, 06 Dec 2010 06:44:36 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi Artem, The main problem is that your schema is using the
DefaultAnalyzerFactory, which (roughly speaking) tokenizes based on
punctuation, discards any tokens less than three characters in length, and
converts the tokens to lowercase. I'd recommend that you use the
WhitespaceAnalyzerFactory, which (as the name suggests) tokenizes based on
whitespace. (You can do this by setting the 'analyzer_factory' schema
setting to &quot;com.basho.search.analysis.WhitespaceAnalyzerFactor&quot;). This will
cause your queries to act in the way you expect.</pre><pre>

Once the next release of Riak Search is out, I'd recommend that you set
field-level analyzers according to the values you expect to put in the
different fields. So the &quot;title&quot; and &quot;summary&quot; fields should use the Default
analyzer, &quot;storylink&quot; and &quot;fieldlink&quot; should use the Whitespace analyzer,
and any integer fields should use the Integer analyzer. The reason I say to
do that after installing the *next* release is because there is a bug in the
*current* version of Riak Search whereby field-level analyzer settings are
not respected. This is fixed in the next release.

One last thing to mention: wildcards are only supported at the end of a
word. (So your query for &quot;*www.toolboxrecords.com*&quot; isn't working the way
you expect, and is probably returning results because it is getting split
into three separate queries for &quot;www&quot;, &quot;toolboxrecords&quot;, and &quot;com&quot;.)

Best,
Rusty

On Sun, Dec 5, 2010 at 5:32 AM, Artem Golovinsky
&lt;artemgolovin...@gmail.com&gt;wrote:

&gt; Hi,
&gt; I have some questions about Riak Search.
&gt;
&gt; I stored just one entry to RS:  <a  rel="nofollow" href="http://pastebin.com/2b5tybD1">http://pastebin.com/2b5tybD1</a>
&gt;
&gt; My bucket has following schema: <a  rel="nofollow" href="http://pastebin.com/dtnM3diL">http://pastebin.com/dtnM3diL</a>
&gt;
&gt; 1. I need to get all objects where &quot;storylink&quot;: &quot;
&gt; <a  rel="nofollow" href="http://www.toolboxrecords.com/fr/product/12834/dubstep-grime-ukg/ruff-11/">http://www.toolboxrecords.com/fr/product/12834/dubstep-grime-ukg/ruff-11/</a>
&gt; &quot;
&gt; When I try to get it by query -
&gt; <a  rel="nofollow" href="http://localhost:8098/solr/myfeed13/select?wt=json&amp;q=storylink:&quot;http://www.toolboxrecords.com/fr/product/12834/dubstep-grime-ukg/ruff-11/">http://localhost:8098/solr/myfeed13/select?wt=json&amp;q=storylink:&quot;http://www.toolboxrecords.com/fr/product/12834/dubstep-grime-ukg/ruff-11/</a>&lt;<a  rel="nofollow" href="http://localhost:8098/solr/myfeed13/select?wt=json&amp;q=storylink:%22http://www.toolboxrecords.com/fr/product/12834/dubstep-grime-ukg/ruff-11/%22">http://localhost:8098/solr/myfeed13/select?wt=json&amp;q=storylink:%22http://www.toolboxrecords.com/fr/product/12834/dubstep-grime-ukg/ruff-11/%22</a>&gt;&quot;
&gt; , I get nothing.
&gt; When I try to make query
&gt; <a  rel="nofollow" href="http://localhost:8098/solr/myfeed13/select?wt=json&amp;q=storylink:&quot;*www.toolboxrecords.com*">http://localhost:8098/solr/myfeed13/select?wt=json&amp;q=storylink:&quot;*www.toolboxrecords.com*</a>&lt;<a  rel="nofollow" href="http://localhost:8098/solr/myfeed13/select?wt=json&amp;q=storylink:%22*www.toolboxrecords.com*%22">http://localhost:8098/solr/myfeed13/select?wt=json&amp;q=storylink:%22*www.toolboxrecords.com*%22</a>&gt;&quot;
&gt; , all works correctly and I get content.
&gt; Could you please describe how can I get content through first query?
&gt;
&gt; 2. I get my object by query
&gt; <a  rel="nofollow" href="http://localhost:8098/solr/myfeed13/select?wt=json&amp;q=knownentities_type:&quot;Country">http://localhost:8098/solr/myfeed13/select?wt=json&amp;q=knownentities_type:&quot;Country</a>&lt;<a  rel="nofollow" href="http://localhost:8098/solr/myfeed13/select?wt=json&amp;q=knownentities_type:%20%22Country%22">http://localhost:8098/solr/myfeed13/select?wt=json&amp;q=knownentities_type:%20%22Country%22</a>&gt;&quot;
&gt; or
&gt; <a  rel="nofollow" href="http://localhost:8098/solr/myfeed13/select?wt=json&amp;q=knownentities_relevance:&quot;0.914286">http://localhost:8098/solr/myfeed13/select?wt=json&amp;q=knownentities_relevance:&quot;0.914286</a>&lt;<a  rel="nofollow" href="http://localhost:8098/solr/myfeed13/select?wt=json&amp;q=knownentities_relevance:%20%220.914286%22">http://localhost:8098/solr/myfeed13/select?wt=json&amp;q=knownentities_relevance:%20%220.914286%22</a>&gt;
&gt; &quot;
&gt; But I can't get they by 
&gt; <a  rel="nofollow" href="http://localhost:8098/solr/myfeed13/select?wt=json&amp;q=knownentities_count:">http://localhost:8098/solr/myfeed13/select?wt=json&amp;q=knownentities_count:</a>
&gt; &quot;1&lt;<a  rel="nofollow" href="http://localhost:8098/solr/myfeed13/select?wt=json&amp;q=knownentities_count:%20%221%22">http://localhost:8098/solr/myfeed13/select?wt=json&amp;q=knownentities_count:%20%221%22</a>&gt;&quot;
&gt; or <a  rel="nofollow" href="http://localhost:8098/solr/myfeed13/select?wt=json&amp;q=knownentities_text:">http://localhost:8098/solr/myfeed13/select?wt=json&amp;q=knownentities_text:</a>
&gt; &quot;UK&quot;&lt;<a  rel="nofollow" href="http://localhost:8098/solr/myfeed13/select?wt=json&amp;q=knownentities_text:%20%22UK%22">http://localhost:8098/solr/myfeed13/select?wt=json&amp;q=knownentities_text:%20%22UK%22</a>&gt;
&gt;
&gt; Why does it happen? However, all these fields are described similar in
&gt; schema.
&gt;
&gt; 3. I try to get my entry  -
&gt; <a  rel="nofollow" href="http://localhost:8098/solr/myfeed13/select?wt=json&amp;q=categoryscores_business:&quot;0.*">http://localhost:8098/solr/myfeed13/select?wt=json&amp;q=categoryscores_business:&quot;0.*</a>&lt;<a  rel="nofollow" href="http://localhost:8098/solr/myfeed13/select?wt=json&amp;q=categoryscores_business:%220.*%22">http://localhost:8098/solr/myfeed13/select?wt=json&amp;q=categoryscores_business:%220.*%22</a>&gt;
&gt; &quot;
&gt; But result is nothing.
&gt;
&gt; As you can see &quot;business&quot; is nested field for &quot;categoryscores&quot; field.
&gt; How can I get this entry?
&gt;
&gt;
&gt; --
&gt; Best regards,
&gt; Artem Golovinsky
&gt;
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;
&gt;
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg01720.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#01732">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#01732">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg01723.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg01720.html">Riak search querying</a></span> <span class="sender italic">Artem Golovinsky</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Riak search querying</span> <span class="sender italic">Rusty Klophaus</span></li>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Riak search querying">
<input type="hidden" name="msgid" value="AANLkTimDq0ighbdgzUT-ZtcJcrR-AdKTe4sHD-uZ4Vgs@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg01732.html">
<input type="submit" value=" Rusty Klophaus ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Riak+search+querying%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg01720.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg01723.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">AANLkTimDq0ighbdgzUT-ZtcJcrR-AdKTe4sHD-uZ4Vgs@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
