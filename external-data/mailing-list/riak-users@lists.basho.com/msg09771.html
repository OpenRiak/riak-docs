<!DOCTYPE html>
<html lang="en">
<head>
<title>Riak packaging for RPM-based distros</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#09771" id="c">
<link rel="index" href="maillist.html#09771" id="i">
<link rel="prev" href="msg09765.html" id="p">
<link rel="next" href="msg09772.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg09771.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Riak+packaging+for+RPM%5C-based+distros%22&amp;o=newest" rel="nofollow"><span itemprop="name">Riak packaging for RPM-based distros</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Aleksey+Morarash%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Aleksey Morarash</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20130109" rel="nofollow">Wed, 09 Jan 2013 10:15:41 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi All!

Someone can possibly perceive the states below as a heresy, so, first of
all, I want to declare: I have no intention to start new holywar here, I
just propose a solution.</pre><pre>

I have noticed that packages available at
<a  rel="nofollow" href="http://docs.basho.com/riak/latest/downloads/">http://docs.basho.com/riak/latest/downloads/</a> includes a kind of so-called
Erlang &quot;release&quot;. This release includes all Riak-related Erlang
applications and Erlang VM in one package.

Using such package produces several problems:
- Erlang VM upgrade. Erlang VM, used by Riak installed, can be upgraded
only with Riak code;
- integration with 3d party Erlang code. I mean filesystem hierarchy usage
- this &quot;release&quot; uses its own location for Erlang applications;
- and again: integration with 3d party Erlang code on Erlang VM level - to
include custom functionality I must patch existing &quot;release&quot;.

I know that such a &quot;release&quot; is generated by rebar, which used to build
almost all Riak-related Erlang applications and libraries.

My proposal is to make Riak packaging more system-friendly:
- use Erlang OTP, provided by target distribution;
- package each Riak-related Erlang application in separate RPM/DEB etc;
- honor filesystem hierarchy of underlying OS.

This includes (for each distro):
- create a bundle of package specs;
- create a package repo, based on packages built.

I have already packaged most of Riak-related Erlang applications and
libraries for OpenSUSE 11.4. RPM package repository with packages generated
we already use in production. To package some applications I had replace
usual &quot;rebar compile&quot; recipes, because there is no way to disable recursive
dependency fetch from remote GIT repositories. All these packages was
successfully built in chrooted clean environment which ensures RPM
repository consistency.

All these RPM specs are available at forked
<a  rel="nofollow" href="https://github.com/strikead/riakrepo:">https://github.com/strikead/riakrepo:</a>
<a  rel="nofollow" href="https://github.com/strikead/riak/tree/master/pkg.d/opensuse/specs">https://github.com/strikead/riak/tree/master/pkg.d/opensuse/specs</a>

P.S. Sorry, there is no possibility to public use of our RPM repo at all :(
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg09765.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#09771">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#09771">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg09772.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email tSliceCur"><span class="subject">Riak packaging for RPM-based distros</span> <span class="sender italic">Aleksey Morarash</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg09772.html">Re: Riak packaging for RPM-based distros</a></span> <span class="sender italic">Jared Morrow</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg09773.html">Re: Riak packaging for RPM-based distros</a></span> <span class="sender italic">Andrew Thompson</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg09779.html">Re: Riak packaging for RPM-based distros</a></span> <span class="sender italic">Tom Lanyon</span></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg09775.html">Re: Riak packaging for RPM-based distros</a></span> <span class="sender italic">Aleksey Morarash</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg09776.html">Re: Riak packaging for RPM-based distros</a></span> <span class="sender italic">Jared Morrow</span></li>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Riak packaging for RPM-based distros">
<input type="hidden" name="msgid" value="CAJJqDakKRjPO482vWPs7a5_xz0HS7X5jUti8XuUxi-8ppRXwTA@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg09771.html">
<input type="submit" value=" Aleksey Morarash ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Riak+packaging+for+RPM%5C-based+distros%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg09765.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg09772.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CAJJqDakKRjPO482vWPs7a5_xz0HS7X5jUti8XuUxi-8ppRXwTA@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
