<!DOCTYPE html>
<html lang="en">
<head>
<title>Does RiakKV require a lot of memory?</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#18100" id="c">
<link rel="index" href="maillist.html#18100" id="i">
<link rel="prev" href="msg18099.html" id="p">
<link rel="next" href="msg18101.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg18100.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Does+RiakKV+require+a+lot+of+memory%5C%3F%22&amp;o=newest" rel="nofollow"><span itemprop="name">Does RiakKV require a lot of memory?</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22wakuda_tsutomu%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">wakuda_tsutomu</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20170326" rel="nofollow">Sun, 26 Mar 2017 17:39:42 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hello. 

The following problem occurred, Please give me on solution.</pre><pre>

(Problem)
I registered a 10mb to 1000mb file.
Then RiakKV hung up when the batch program was accessing files from 100 MB to 
600 MB.
RiakKV hung up due to insufficient memory.

(Question)
1.The problem that occurred this time is the effect of data accessed to a 
20-1000 MB file?
  Or is it another problem?

2.During RiakKV data update, when you want to access RiakKV data, 
  do you need to do something special?
  Do you need a lot of memory?

(Objects)
file: 3,882,892
file size(total): 332.46GB(346,243,500,913byte)
file objects:
  1-  10MB = 3,800,000(all)
 20-  50MB = 40 to 100
100-1000MB = 50

(Riak Sever)
OS:Red Hat Enterprise Linux Server release 6.7 (Santiago)
　（Linux patdevsrv02 2.6.32-573.el6.x86_64）
CPU:Intel(R) Xeon(R) CPU E5640  @2.67GHz * 2
Memory:12GB
Swap:14GB
Network:1Gbps
Disk:
 Filesystem      Size  Used Avail Use% Mounted on
 /dev/sda3       261G   67G  182G  27% /
 tmpfs           5.9G  300K  5.9G   1% /dev/shm
 /dev/sda1       477M   71M  381M  16% /boot
 /dev/sdb1       275G  243G   19G  93% /USR1
 /dev/sdc1       1.7T  1.5T   76G  96% /USR2
 /dev/sdd1       1.1T  736G  309G  71% /USR3 &lt;&lt;&lt; Store
 /dev/sde1       1.1T  1.1T   18G  99% /USR4
 /dev/sdf1       1.4T  1.1T  365G  74% /media/USB-HDD1

(Riak)
RiakKV 2.2.0 (riak-2.2.0-1.el6.x86_64.rpm)

(Riak Node)
1 Node.

!!!We plan to add two nodes to the cluster at a later date.!!!

(Java)
Java1.8 (jre-8u121-linux-x64.rpm)

(riak setting)
/etc/riak/riak.conf
storage_backend = leveldb
leveldb.maximum_memory.percent = 50
object.size.maximum = 2GB
listener.http.internal = 0.0.0.0:8098
listener.http.internal = 0.0.0.0:8098
platform_data_dir = /USR3/riak
nodename = riak@...
riak_control = on

!!!Settings other than these remain the default.!!!

(linux setting)
/etc/security/limits.conf
* soft nofile 65536
* hard nofile 65536

Thank you.

Tsutomu Wakuda
 

_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg18099.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#18100">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#18100">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg18101.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email tSliceCur"><span class="subject">Does RiakKV require a lot of memory?</span> <span class="sender italic">wakuda_tsutomu</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg18101.html">Re: Does RiakKV require a lot of memory?</a></span> <span class="sender italic">Luke Bakken</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg18102.html">Re: Does RiakKV require a lot of memory?</a></span> <span class="sender italic">Alexander Sicular</span></li>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Does RiakKV require a lot of memory?">
<input type="hidden" name="msgid" value="346283023.134.1490575104240.JavaMail.root@localhost">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg18100.html">
<input type="submit" value=" wakuda_tsutomu ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Does+RiakKV+require+a+lot+of+memory%5C%3F%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg18099.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg18101.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">346283023.134.1490575104240.JavaMail.root@localhost</li>
</ul>
</div>
</body>
</html>
