<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Is storing billions of small files a good Riak-CS/KV usecase?</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#16621" id="c">
<link rel="index" href="maillist.html#16621" id="i">
<link rel="prev" href="msg16620.html" id="p">
<link rel="next" href="msg16623.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg16621.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Is+storing+billions+of+small+files+a+good+Riak%5C-CS%5C%2FKV+usecase%5C%3F%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Is storing billions of small files a good Riak-CS/KV usecase?</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Daniel+Abrahamsson%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Daniel Abrahamsson</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20151007" rel="nofollow">Wed, 07 Oct 2015 06:58:30 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi David,

If you don't use any level-db specific features, you could switch to
bitcask and use its expiry_secs option to handle deletes. That way you
don't have to worry about deleting data at all. Note that older bitcask
versions (prior to Riak 2.0) had issues with deleting data which could make
deleted data re-appear.</pre><pre>

When it comes to level-db and deletes, you should be aware that mass
deletion may cause level db compaction, which might put strain on your
cluster. I don't have enough experience with leveldb to give you any
details, though.

//Daniel

On Wed, Oct 7, 2015 at 3:43 PM, David Heidt &lt;david.he...@msales.com&gt; wrote:

&gt;
&gt; Hi List,
&gt;
&gt; would you say that storing billions of very small (json) files is a good
&gt; usecase for riak kv or cs?
&gt;
&gt; here's what I would do:
&gt;
&gt; * create daily buckets ( i.e. 2015-10-07)
&gt; * up to 130 Million inserts per day
&gt; * about 150.000 read-ony accesses/day
&gt; * no updates on existing keys/files
&gt; * delete buckets (including keys/files) older than x days
&gt;
&gt;
&gt; I already have a working riak-kv/leveldb cluster (inserts and lookups are
&gt;  going smoothly), but when it comes to mass deletion of keys I found no way
&gt; to do this.
&gt;
&gt;
&gt; Best,
&gt;
&gt; David
&gt;
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;
&gt;
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg16620.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#16621">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#16621">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg16623.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg16620.html">Is storing billions of small files a good Riak-CS/KV us...</a></span> <span class="sender italic">David Heidt</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Is storing billions of small files a good Riak...</span> <span class="sender italic">Daniel Abrahamsson</span></li>
<li class="icons-email"><span class="subject"><a href="msg16623.html">Re: Is storing billions of small files a good Riak...</a></span> <span class="sender italic">Dmitri Zagidulin</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg16624.html">Re: Is storing billions of small files a good ...</a></span> <span class="sender italic">Dmitri Zagidulin</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg16625.html">Re: Is storing billions of small files a g...</a></span> <span class="sender italic">David Heidt</span></li>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Is storing billions of small files a good Riak-CS/KV usecase?">
<input type="hidden" name="msgid" value="CAJL2zxVgCZn91Mwp4XX9uGAPfNbDLJQkQaMmJ=hwVBnZt1AUhA@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg16621.html">
<input type="submit" value=" Daniel Abrahamsson ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Is+storing+billions+of+small+files+a+good+Riak%5C-CS%5C%2FKV+usecase%5C%3F%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg16620.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg16623.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CAJL2zxVgCZn91Mwp4XX9uGAPfNbDLJQkQaMmJ=hwVBnZt1AUhA@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
