<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: node_put_fsm_active maxing out</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#16735" id="c">
<link rel="index" href="maillist.html#16735" id="i">
<link rel="prev" href="msg16734.html" id="p">
<link rel="next" href="msg16736.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg16735.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+node_put_fsm_active+maxing+out%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: node_put_fsm_active maxing out</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Doug+Rohrer%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Doug Rohrer</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20151105" rel="nofollow">Thu, 05 Nov 2015 15:51:07 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Chris:

First, I'd like to thank you for going through the effort of identifying the 
difference that is causing you issues. Narrowing down the change to the Erlang 
version is incredibly helpful, and I doubt many other people would have found 
this correlation.</pre><pre>

Second, while several of us from Basho are currently traveling for conferences 
and some meetings next week, we will definitely look into the changes between 
-basho5 and -basho6 as they relate to this issue.

I'll create an issue in our internal tracker that's specific to our patched 
OTP, but could you create something at <a  rel="nofollow" href="https://github.com/basho/riak/issues">https://github.com/basho/riak/issues</a> 
&lt;<a  rel="nofollow" href="https://github.com/basho/riak/issues">https://github.com/basho/riak/issues</a>&gt; so we have somewhere to post information 
as we work through troubleshooting the issue that you (and others) can see 
publicly?

Also, would it be acceptable for me to reach out to you individually to discuss 
the issue in more detail?

Thanks,

Doug Rohrer



&gt; On Nov 5, 2015, at 3:21 PM, Chris Read &lt;chris.r...@gmail.com&gt; wrote:
&gt; 
&gt; Anyone out there?
&gt; 
&gt; Here's some more detail on the Erlang builds:
&gt; 
&gt; This one works as expected:
&gt; 
&gt; sys_system_architecture : &lt;&lt;&quot;x86_64-unknown-linux-gnu&quot;&gt;&gt;
&gt; sys_system_version : &lt;&lt;&quot;Erlang R16B02-basho5 (erts-5.10.3) [source] [64-bit] 
&gt; [smp:8:8] [async-threads:64] [hipe] [kernel-poll:true]&quot;&gt;&gt;
&gt; 
&gt; This one has the problem:
&gt; 
&gt; sys_system_architecture : &lt;&lt;&quot;x86_64-unknown-linux-gnu&quot;&gt;&gt;
&gt; sys_system_version : &lt;&lt;&quot;Erlang R16B02_basho6 (erts-5.10.3) [source-bcd8abb] 
&gt; [64-bit] [smp:24:24] [async-threads:64] [kernel-poll:true] [frame-pointer]&quot;&gt;&gt;
&gt; 
&gt; Chris
&gt; 
&gt; 
&gt; On Tue, Nov 3, 2015 at 12:47 PM, Chris Read &lt;chris.r...@gmail.com 
&gt; &lt;<a  rel="nofollow" href="mailto:chris.r...@gmail.com">mailto:chris.r...@gmail.com</a>&gt;&gt; wrote:
&gt; Greetings all...
&gt; 
&gt; We've been building riak from source for a while, but I've had trouble 
&gt; getting the 2.1 lines built reliably and so would like to revert back to 
&gt; using the .deb package. The problem I have is that in our test environment we 
&gt; always manage to max out node_put_fsm_active under sustained write loads, and 
&gt; they never drop.
&gt; 
&gt; When running riak 2.0.4 on R16B02-basho5 (our current prod version) 
&gt; everything is working as expected. 
&gt; 
&gt; Using the .deb package of 2.0.4 pushes us to R16B02_basho6, which is where we 
&gt; see the problem arrive of node_puts_fsm_active going up and never dropping 
&gt; back own again, even after the write load stops.
&gt; 
&gt; Further testing with the riak 2.0.6 2.1.1 .deb packages (both contain 
&gt; R16B02_basho8) show the same problem.
&gt; 
&gt; Questions I have are:
&gt; 
&gt; 1) Anyone else seen this?
&gt; 2) Is there any way I can see why these FSM's appear to be deadlocked?
&gt; 
&gt; Thanks,
&gt; 
&gt; Chris
&gt; 
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>

</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg16734.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#16735">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#16735">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg16736.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg16727.html">node_put_fsm_active maxing out</a></span> <span class="sender italic">Chris Read</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg16734.html">Re: node_put_fsm_active maxing out</a></span> <span class="sender italic">Chris Read</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: node_put_fsm_active maxing out</span> <span class="sender italic">Doug Rohrer</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg16736.html">Re: node_put_fsm_active maxing out</a></span> <span class="sender italic">Doug Rohrer</span></li>
<li class="icons-email"><span class="subject"><a href="msg16737.html">Re: node_put_fsm_active maxing out</a></span> <span class="sender italic">Chris Read</span></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg16738.html">Re: node_put_fsm_active maxing out</a></span> <span class="sender italic">Ted Burghart</span></li>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: node_put_fsm_active maxing out">
<input type="hidden" name="msgid" value="DFD8252C-690E-462A-A354-3CF12345877E@basho.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg16735.html">
<input type="submit" value=" Doug Rohrer ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+node_put_fsm_active+maxing+out%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg16734.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg16736.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">DFD8252C-690E-462A-A354-3CF12345877E@basho.com</li>
</ul>
</div>
</body>
</html>
