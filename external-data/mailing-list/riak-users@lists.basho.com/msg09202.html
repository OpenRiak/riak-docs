<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Riak Search Field Aliases</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#09202" id="c">
<link rel="index" href="maillist.html#09202" id="i">
<link rel="prev" href="msg09068.html" id="p">
<link rel="next" href="msg09070.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg09202.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Riak+Search+Field+Aliases%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Riak Search Field Aliases</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Ryan+Zezeski%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Ryan Zezeski</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20121105" rel="nofollow">Mon, 05 Nov 2012 10:01:35 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Brian,

First, our documentation is wrong.  Sorry.  The correct way to add aliases
looks like so:</pre><pre>

     {field, [



                  {name, &quot;Name&quot;},



                  {analyzer_factory, {erlang, text_analyzers,
standard_analyzer_factory}},


                  {alias, &quot;LastName&quot;},



                  {alias,&quot;FirstName&quot;},



                  {alias,&quot;MiddleName&quot;}



              ]},

Second, it looks like you want the semantics of a Solr copyField.  That is,
index the first, middle, and last names individually but also copy their
contents into the field `Name` so that a user can easily search against the
entire name.  Unfortunately Riak Search's alias mechanism doesn't provide
this semantic even if the documentation might give that impression.  An
alias does 2 things:

1. If a field exist with the same name as the alias then index it under the
containing field name.  E.g. if the field 'LastName' exists then index it
under 'Name'.  Riak Search only indexes a field once.  So either the alias
'FirstName' is found and indexed under 'Name' or 'FirstName' is found and
indexed under 'FirstName'.  This means that if you declare both an alias
and a normal field with the same name the order in the schema will
determine which one wins.  Both will not be used.

2. If there are multiple alises for a given field then concatenate the
values of every alias to form one field value.  The order they are
concatenated is the same order as they are declared in the object being
indexed.  Thus if you happened to index {M:Middle, F:Firrst, L:Last} then
the 'Name' field would have value 'Middle First Last'.

To achieve your goal you need to copy the field yourself.  Declare the
'Name' field like the other fields.  Don't use aliases.  Index the object
as {&quot;FirstName&quot;:&quot;First&quot;, &quot;MiddleName&quot;:&quot;Middle&quot;, &quot;LastName&quot;:&quot;Last&quot;,
&quot;Name&quot;:&quot;First Middle Last&quot;}.

-Z

P.S. The new search solution I've been working on, Yokozuna, integrates
Solr with Riak and thus supports copy fields.
<a  rel="nofollow" href="http://lists.basho.com/pipermail/riak-users_lists.basho.com/2012-November/010042.html">http://lists.basho.com/pipermail/riak-users_lists.basho.com/2012-November/010042.html</a>

On Sun, Oct 28, 2012 at 4:54 PM, Brian Hodgen &lt;brian.hod...@gmail.com&gt;wrote:

&gt; Can somebody explain in more detail how the aliases parameter on the
&gt; search schema definition works? The documentation says it lets me
&gt; index multiple fields into one, so I tried to setup some schemas to let me
&gt; search on Name, that is actually the combined data of FirstName, LastName,
&gt; &amp; MiddleName. I've got the search working for the properties by themselves,
&gt; but I can't seem to make the aliases work, so I'm either doing something
&gt; wrong or I misunderstood how they are supposed to work.
&gt;
&gt;
&gt; Schema Example:
&gt;
&gt; I would really like this to work...but querying on Name never returns any
&gt; results.
&gt;
&gt; {
&gt;     schema,
&gt;     [
&gt;         {version, &quot;1.1&quot;},
&gt;         {n_val, 3},
&gt;         {default_field, &quot;Name&quot;},
&gt;         {analyzer_factory, {erlang, text_analyzers, noop_analyzer_factory}}
&gt;     ],
&gt;     [
&gt; {field, [
&gt;     {name, &quot;FirstName&quot;},
&gt;     {analyzer_factory, {erlang, text_analyzers, standard_analyzer_factory}}
&gt;  ]},
&gt; {field, [
&gt;     {name, &quot;MiddleName&quot;},
&gt;     {analyzer_factory, {erlang, text_analyzers,
&gt; standard_analyzer_factory}}
&gt; ]},
&gt;  {field, [
&gt;     {name, &quot;LastName&quot;},
&gt;     {analyzer_factory, {erlang, text_analyzers, standard_analyzer_factory}}
&gt;  ]},
&gt; {field, [
&gt;     {name, &quot;Name&quot;},
&gt;     {analyzer_factory, {erlang, text_analyzers,
&gt; standard_analyzer_factory}},
&gt;     {aliases, [&quot;LastName&quot;,&quot;FirstName&quot;,&quot;MiddleName&quot;]}
&gt;  ]},
&gt; {dynamic_field, [
&gt;             {name, &quot;*&quot;},
&gt;     {skip, true}
&gt;  ]}
&gt;     ]
&gt; }.
&gt;
&gt;
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;
&gt;
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg09068.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#09202">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#09202">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg09070.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg09068.html">Riak Search Field Aliases</a></span> <span class="sender italic">Brian Hodgen</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Riak Search Field Aliases</span> <span class="sender italic">Ryan Zezeski</span></li>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Riak Search Field Aliases">
<input type="hidden" name="msgid" value="CACZcpenDOAdDv5SLdj0nSQp_EgCN9_K1R+FMnz-=TxsS1D-UTQ@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg09202.html">
<input type="submit" value=" Ryan Zezeski ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Riak+Search+Field+Aliases%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg09068.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg09070.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CACZcpenDOAdDv5SLdj0nSQp_EgCN9_K1R+FMnz-=TxsS1D-UTQ@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
