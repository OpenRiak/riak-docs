<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: applications inside the same VM as Riak</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="thrd4.html#08704" id="c">
<link rel="index" href="mail4.html#08704" id="i">
<link rel="prev" href="msg08693.html" id="p">
<link rel="next" href="msg08705.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg08704.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+applications+inside+the+same+VM+as+Riak%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: applications inside the same VM as Riak</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Anthony+Molinaro%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Anthony Molinaro</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20120926" rel="nofollow">Wed, 26 Sep 2012 08:07:50 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>I've been successfully running a monitoring application (to gather stats
from riak) inside of the riak application for over a year with no issues.</pre><pre>

I also know of another company which uses the internal client because
of performance issues with the PB client, so its completely possible
to run an application inside riak.

The only issue I've ever run into was having to bounce riak when my
application needs to be updated (which is very infrequent in this case),
because I need to bounce riak.

For actual client applications of riak I've found a better pattern (even
if running on the same machine), is your app pointing to haproxy, haproxy
pointing to all the riak nodes.  You can configure haproxy to prefer the
local connection and only use the others as fall backs.  This way you
can perform a rolling restart of riak followed by a restart of haproxy,
or a restart of your client application, and never have any downtime.

-Anthony

On Tue, Sep 25, 2012 at 01:56:40PM -0700, Mike Oxford wrote:
&gt; I am stacking my application and Riak on the same machine.
&gt; It seems wasteful to use 127.0.0.1 or even AF_UNIX sockets.  Is there
&gt; anything that precludes me from running it directly within the same VM as
&gt; Riak, to cut down/eliminate the impedance mismatch/marshalling of going
&gt; through the external client protocols like HTTP/Protobuf?
&gt; Instead of building on riak_core, I'd be building on Riak(_kv?) itself.
&gt; 
&gt; Here be dragons?
&gt; 
&gt; Thanks!
&gt; 
&gt; -mox

&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>


-- 
------------------------------------------------------------------------
Anthony Molinaro                           &lt;antho...@alumni.caltech.edu&gt;

_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg08693.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="thrd4.html#08704">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="mail4.html#08704">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg08705.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg08693.html">applications inside the same VM as Riak</a></span> <span class="sender italic">Mike Oxford</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: applications inside the same VM as Riak</span> <span class="sender italic">Anthony Molinaro</span></li>
<li class="icons-email"><span class="subject"><a href="msg08705.html">Re: applications inside the same VM as Riak</a></span> <span class="sender italic">Kresten Krab Thorup</span></li>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: applications inside the same VM as Riak">
<input type="hidden" name="msgid" value="20120926150548.GC38204@alumni.caltech.edu">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg08704.html">
<input type="submit" value=" Anthony Molinaro ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+applications+inside+the+same+VM+as+Riak%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg08693.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg08705.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">20120926150548.GC38204@alumni.caltech.edu</li>
</ul>
</div>
</body>
</html>
