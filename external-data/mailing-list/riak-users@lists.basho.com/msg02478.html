<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: tuning riak for 100s of concurrent connections</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#02478" id="c">
<link rel="index" href="maillist.html#02478" id="i">
<link rel="prev" href="msg02470.html" id="p">
<link rel="next" href="msg02480.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg02478.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+tuning+riak+for+100s+of+concurrent+connections%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: tuning riak for 100s of concurrent connections</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Joseph+Blomstedt%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Joseph Blomstedt</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20110225" rel="nofollow">Fri, 25 Feb 2011 12:17:48 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>On Fri, Feb 25, 2011 at 11:31 AM, Wilson MacGyver &lt;wmacgy...@gmail.com&gt; wrote:
&gt; Another possibility that comes to mind to avoid the setup cost is to
&gt; do connection pool
&gt; of some sorts.
&gt;
&gt; Does any of the riak client lib supports connection pooling?</pre><pre>

Connection pooling is going to depend on several factors.

If you're going with REST, I'm not sure of any client libs that do
connection pooling. However, even if a library provided pooling there
is the underlying issue of HTTP keep-alive/persistent connections.
Ripple, for example, will use persistent connections when using the
excon backend, but won't when using the default Ruby HTTP backend.
Although, your overall stack will effect persistent connections
independently from what the client is trying to do. For example, if
you're using HAProxy between your client connections and your riak
cluster, you're subject to the fact that HAProxy doesn't maintain
persistent connections to backend severs (ie. riak) and will create a
new connection for each request. If that's where you bottleneck lies,
then there's not much you can do short of tuning TCP or adding more
riak nodes. On the other hand, if the bottleneck is between the
clients and the HAProxy front-end, then connection pooling along with
a version of HAProxy that supports client-side keep-alive may help.

For protocol buffers there are client libraries that support
connection pooling. Of the top of my head I know riak-js does, and
most of us using Erlang have implemented our own connection pooling
schemes -- several which were linked to on this mailing list a few
weeks back. Other client libraries may as well.

-Joe

_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg02470.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#02478">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#02478">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg02480.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg02460.html">Re: tuning riak for 100s of concurrent connections</a></span> <span class="sender italic">Sean Cribbs</span></li>
<li class="icons-email"><span class="subject"><a href="msg02461.html">Re: tuning riak for 100s of concurrent connections</a></span> <span class="sender italic">Les Mikesell</span></li>
<li class="icons-email"><span class="subject"><a href="msg02463.html">Re: tuning riak for 100s of concurrent connections</a></span> <span class="sender italic">Sean Cribbs</span></li>
<li class="icons-email"><span class="subject"><a href="msg02464.html">Re: tuning riak for 100s of concurrent connections</a></span> <span class="sender italic">Les Mikesell</span></li>
<li class="icons-email"><span class="subject"><a href="msg02462.html">Re: tuning riak for 100s of concurrent connections</a></span> <span class="sender italic">Wilson MacGyver</span></li>
<li class="icons-email"><span class="subject"><a href="msg02465.html">Re: tuning riak for 100s of concurrent connections</a></span> <span class="sender italic">Wilson MacGyver</span></li>
<li class="icons-email"><span class="subject"><a href="msg02466.html">Re: tuning riak for 100s of concurrent connections</a></span> <span class="sender italic">Sean Cribbs</span></li>
<li class="icons-email"><span class="subject"><a href="msg02468.html">Re: tuning riak for 100s of concurrent connections</a></span> <span class="sender italic">Wilson MacGyver</span></li>
<li class="icons-email"><span class="subject"><a href="msg02469.html">Re: tuning riak for 100s of concurrent connections</a></span> <span class="sender italic">Sean Cribbs</span></li>
<li class="icons-email"><span class="subject"><a href="msg02470.html">Re: tuning riak for 100s of concurrent connections</a></span> <span class="sender italic">Wilson MacGyver</span></li>
<li class="icons-email tSliceCur"><span class="subject">Re: tuning riak for 100s of concurrent connections</span> <span class="sender italic">Joseph Blomstedt</span></li>
<li class="icons-email"><span class="subject"><a href="msg02480.html">Re: tuning riak for 100s of concurrent connections</a></span> <span class="sender italic">Bryan O'Sullivan</span></li>
<li class="icons-email"><span class="subject"><a href="msg02481.html">Re: tuning riak for 100s of concurrent connections</a></span> <span class="sender italic">Wilson MacGyver</span></li>
<li class="icons-email"><span class="subject"><a href="msg02486.html">Re: tuning riak for 100s of concurrent connections</a></span> <span class="sender italic">Russell Brown</span></li>
<li class="icons-email"><span class="subject"><a href="msg02471.html">Re: tuning riak for 100s of concurrent connections</a></span> <span class="sender italic">Les Mikesell</span></li>
<li class="icons-email"><span class="subject"><a href="msg02472.html">Re: tuning riak for 100s of concurrent connections</a></span> <span class="sender italic">Wilson MacGyver</span></li>
<li class="icons-email"><span class="subject"><a href="msg02473.html">Re: tuning riak for 100s of concurrent connections</a></span> <span class="sender italic">Nico Meyer</span></li>
<li class="icons-email"><span class="subject"><a href="msg02475.html">Re: tuning riak for 100s of concurrent connections</a></span> <span class="sender italic">Wilson MacGyver</span></li>
<li class="icons-email"><span class="subject"><a href="msg02485.html">Re: tuning riak for 100s of concurrent connections</a></span> <span class="sender italic">Nico Meyer</span></li>
<li class="icons-email"><span class="subject"><a href="msg02477.html">Re: tuning riak for 100s of concurrent connections</a></span> <span class="sender italic">Alexander Sicular</span></li>
<li class="icons-email"><span class="subject"><a href="msg02483.html">Re: tuning riak for 100s of concurrent connections</a></span> <span class="sender italic">Ryan Zezeski</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: tuning riak for 100s of concurrent connections">
<input type="hidden" name="msgid" value="AANLkTimgtqMqTSwqj6U_7THEqS0-ZNw_WgC+Bn3m7wYV@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg02478.html">
<input type="submit" value=" Joseph Blomstedt ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+tuning+riak+for+100s+of+concurrent+connections%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg02470.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg02480.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">AANLkTimgtqMqTSwqj6U_7THEqS0-ZNw_WgC+Bn3m7wYV@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
