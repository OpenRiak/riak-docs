<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Bitcask node won't restart</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#02853" id="c">
<link rel="index" href="maillist.html#02853" id="i">
<link rel="prev" href="msg02852.html" id="p">
<link rel="next" href="msg02856.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg02853.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Bitcask+node+won%27t+restart%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Bitcask node won't restart</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Keith+Dreibelbis%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Keith Dreibelbis</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20110401" rel="nofollow">Fri, 01 Apr 2011 17:17:03 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi Dan,

It seems I have to say &quot;never mind, it fixed itself&quot;.  I killed it and ran
the console, like you suggested, and after it output some messages about
handoffs and merges, I did the commands you mentioned:</pre><pre>

(dev2@127.0.0.1)1&gt; node().
'dev2@127.0.0.1'
(dev2@127.0.0.1)2&gt; erlang:get_cookie().
riak
(dev2@127.0.0.1)3&gt; q().

and then &quot;riak start&quot; and the node is now happily back in the ring.  What's
surprised me was that &quot;riak restart&quot; and &quot;riak reboot&quot; didn't seem to do
anything in this situation.  It just got into an unresponsive state, and the
process had to be killed to fix it.  But perhaps this is the normal thing to
do for an unresponsive node?  Anyway, thanks for the help, my problem is
resolved.


Keith


On Fri, Apr 1, 2011 at 4:41 PM, Dan Reverri &lt;d...@basho.com&gt; wrote:

&gt; Hi Keith,
&gt;
&gt; Can you try attaching to node 2 using &quot;riak attach&quot;? If that doesn't work,
&gt; manually kill node 2 and run &quot;riak console&quot;.
&gt;
&gt; Once you have access to the console, type the following:
&gt; 1&gt; node().
&gt; % the console will output the node name here
&gt;
&gt; 2&gt; erlang:get_cookie().
&gt; % the console will output the cookie here
&gt;
&gt; Let me know what those commands output.
&gt;
&gt; Thanks,
&gt; Dan
&gt;
&gt; Daniel Reverri
&gt; Developer Advocate
&gt; Basho Technologies, Inc.
&gt; d...@basho.com
&gt;
&gt;
&gt; On Fri, Apr 1, 2011 at 2:34 PM, Keith Dreibelbis &lt;kdrei...@gmail.com&gt;wrote:
&gt;
&gt;&gt; Thanks for the response, Dan.  Yes, the problem is that it *looks* like
&gt;&gt; starting node 2 was successful (says it's ALIVE, shows up in ps).  But it's
&gt;&gt; not responding to pings, isn't usable, and nodes 1 and 3 say node 2 isn't
&gt;&gt; connected.
&gt;&gt;
&gt;&gt; As you suggested, here is the output of riak-admin status for the 3 nodes,
&gt;&gt; and I'll attach a tarball for node 2's log directory.
&gt;&gt;
&gt;&gt; Keith
&gt;&gt;
&gt;&gt; kratos:dev1 keith$ bin/riak-admin status
&gt;&gt; 1-minute stats for 'dev1@127.0.0.1'
&gt;&gt; -------------------------------------------
&gt;&gt; vnode gets : 0
&gt;&gt; vnode_puts : 0
&gt;&gt; read_repairs : 0
&gt;&gt; vnode_gets_total : 6251
&gt;&gt; vnode_puts_total : 1064
&gt;&gt; node_gets : 0
&gt;&gt; node_gets_total : 4786
&gt;&gt; node_get_fsm_time_mean : 0
&gt;&gt; node_get_fsm_time_median : 0
&gt;&gt; node_get_fsm_time_95 : 0
&gt;&gt; node_get_fsm_time_99 : 0
&gt;&gt; node_get_fsm_time_100 : 0
&gt;&gt; node_puts : 0
&gt;&gt; node_puts_total : 774
&gt;&gt; node_put_fsm_time_mean : 0
&gt;&gt; node_put_fsm_time_median : 0
&gt;&gt; node_put_fsm_time_95 : 0
&gt;&gt; node_put_fsm_time_99 : 0
&gt;&gt; node_put_fsm_time_100 : 0
&gt;&gt; read_repairs_total : 354
&gt;&gt; cpu_nprocs : 127
&gt;&gt; cpu_avg1 : 164
&gt;&gt; cpu_avg5 : 202
&gt;&gt; cpu_avg15 : 205
&gt;&gt; mem_total : 3264444000
&gt;&gt; mem_allocated : 3155680000
&gt;&gt; disk : [{&quot;/&quot;,488050672,13}]
&gt;&gt; nodename : 'dev1@127.0.0.1'
&gt;&gt; connected_nodes : ['dev3@127.0.0.1']
&gt;&gt; sys_driver_version : &lt;&lt;&quot;1.5&quot;&gt;&gt;
&gt;&gt; sys_global_heaps_size : 0
&gt;&gt; sys_heap_type : private
&gt;&gt; sys_logical_processors : 2
&gt;&gt; sys_otp_release : &lt;&lt;&quot;R14B01&quot;&gt;&gt;
&gt;&gt; sys_process_count : 206
&gt;&gt; sys_smp_support : true
&gt;&gt; sys_system_version : &lt;&lt;&quot;Erlang R14B01 (erts-5.8.2) [source] [64-bit]
&gt;&gt; [smp:2:2] [rq:2] [async-threads:64] [hipe] [kernel-poll:true]&quot;&gt;&gt;
&gt;&gt; sys_system_architecture : &lt;&lt;&quot;i386-apple-darwin10.7.0&quot;&gt;&gt;
&gt;&gt; sys_threads_enabled : true
&gt;&gt; sys_thread_pool_size : 64
&gt;&gt; sys_wordsize : 8
&gt;&gt; ring_members : ['dev1@127.0.0.1','dev2@127.0.0.1','dev3@127.0.0.1']
&gt;&gt; ring_num_partitions : 64
&gt;&gt; ring_ownership : &lt;&lt;&quot;[{'dev3@127.0.0.1',21},{'dev2@127.0.0.1',21},{'
&gt;&gt; dev1@127.0.0.1',22}]&quot;&gt;&gt;
&gt;&gt; ring_creation_size : 64
&gt;&gt; storage_backend : riak_kv_bitcask_backend
&gt;&gt; pbc_connects_total : 350
&gt;&gt; pbc_connects : 0
&gt;&gt; pbc_active : 0
&gt;&gt; riak_err_version : &lt;&lt;&quot;1.0.1&quot;&gt;&gt;
&gt;&gt; runtime_tools_version : &lt;&lt;&quot;1.8.4.1&quot;&gt;&gt;
&gt;&gt; basho_stats_version : &lt;&lt;&quot;1.0.1&quot;&gt;&gt;
&gt;&gt; luwak_version : &lt;&lt;&quot;1.0.0&quot;&gt;&gt;
&gt;&gt; skerl_version : &lt;&lt;&quot;1.0.0&quot;&gt;&gt;
&gt;&gt; riak_kv_version : &lt;&lt;&quot;0.14.0&quot;&gt;&gt;
&gt;&gt; bitcask_version : &lt;&lt;&quot;1.1.5&quot;&gt;&gt;
&gt;&gt; riak_core_version : &lt;&lt;&quot;0.14.0&quot;&gt;&gt;
&gt;&gt; riak_sysmon_version : &lt;&lt;&quot;0.9.0&quot;&gt;&gt;
&gt;&gt; luke_version : &lt;&lt;&quot;0.2.3&quot;&gt;&gt;
&gt;&gt; erlang_js_version : &lt;&lt;&quot;0.5.0&quot;&gt;&gt;
&gt;&gt; mochiweb_version : &lt;&lt;&quot;1.7.1&quot;&gt;&gt;
&gt;&gt; webmachine_version : &lt;&lt;&quot;1.8.0&quot;&gt;&gt;
&gt;&gt; crypto_version : &lt;&lt;&quot;2.0.2&quot;&gt;&gt;
&gt;&gt; os_mon_version : &lt;&lt;&quot;2.2.5&quot;&gt;&gt;
&gt;&gt; cluster_info_version : &lt;&lt;&quot;1.1.0&quot;&gt;&gt;
&gt;&gt; sasl_version : &lt;&lt;&quot;2.1.9.2&quot;&gt;&gt;
&gt;&gt; stdlib_version : &lt;&lt;&quot;1.17.2&quot;&gt;&gt;
&gt;&gt; kernel_version : &lt;&lt;&quot;2.14.2&quot;&gt;&gt;
&gt;&gt; executing_mappers : 0
&gt;&gt;
&gt;&gt; kratos:dev2 keith$ bin/riak-admin status
&gt;&gt; Node is not running!
&gt;&gt;
&gt;&gt; kratos:dev3 keith$ bin/riak-admin status
&gt;&gt; 1-minute stats for 'dev3@127.0.0.1'
&gt;&gt; -------------------------------------------
&gt;&gt; vnode gets : 0
&gt;&gt; vnode_puts : 0
&gt;&gt; read_repairs : 0
&gt;&gt; vnode_gets_total : 7061
&gt;&gt; vnode_puts_total : 1198
&gt;&gt; node_gets : 0
&gt;&gt; node_gets_total : 0
&gt;&gt; node_get_fsm_time_mean : 0
&gt;&gt; node_get_fsm_time_median : 0
&gt;&gt; node_get_fsm_time_95 : 0
&gt;&gt; node_get_fsm_time_99 : 0
&gt;&gt; node_get_fsm_time_100 : 0
&gt;&gt; node_puts : 0
&gt;&gt; node_puts_total : 0
&gt;&gt; node_put_fsm_time_mean : 0
&gt;&gt; node_put_fsm_time_median : 0
&gt;&gt; node_put_fsm_time_95 : 0
&gt;&gt; node_put_fsm_time_99 : 0
&gt;&gt; node_put_fsm_time_100 : 0
&gt;&gt; read_repairs_total : 0
&gt;&gt; cpu_nprocs : 134
&gt;&gt; cpu_avg1 : 118
&gt;&gt; cpu_avg5 : 161
&gt;&gt; cpu_avg15 : 184
&gt;&gt; mem_total : 3264252000
&gt;&gt; mem_allocated : 3189744000
&gt;&gt; disk : [{&quot;/&quot;,488050672,13}]
&gt;&gt; nodename : 'dev3@127.0.0.1'
&gt;&gt; connected_nodes : ['dev1@127.0.0.1']
&gt;&gt; sys_driver_version : &lt;&lt;&quot;1.5&quot;&gt;&gt;
&gt;&gt; sys_global_heaps_size : 0
&gt;&gt; sys_heap_type : private
&gt;&gt; sys_logical_processors : 2
&gt;&gt; sys_otp_release : &lt;&lt;&quot;R14B01&quot;&gt;&gt;
&gt;&gt; sys_process_count : 205
&gt;&gt; sys_smp_support : true
&gt;&gt; sys_system_version : &lt;&lt;&quot;Erlang R14B01 (erts-5.8.2) [source] [64-bit]
&gt;&gt; [smp:2:2] [rq:2] [async-threads:64] [hipe] [kernel-poll:true]&quot;&gt;&gt;
&gt;&gt; sys_system_architecture : &lt;&lt;&quot;i386-apple-darwin10.7.0&quot;&gt;&gt;
&gt;&gt; sys_threads_enabled : true
&gt;&gt; sys_thread_pool_size : 64
&gt;&gt; sys_wordsize : 8
&gt;&gt; ring_members : ['dev1@127.0.0.1','dev2@127.0.0.1','dev3@127.0.0.1']
&gt;&gt; ring_num_partitions : 64
&gt;&gt; ring_ownership : &lt;&lt;&quot;[{'dev3@127.0.0.1',21},{'dev2@127.0.0.1',21},{'
&gt;&gt; dev1@127.0.0.1',22}]&quot;&gt;&gt;
&gt;&gt; ring_creation_size : 64
&gt;&gt; storage_backend : riak_kv_bitcask_backend
&gt;&gt; pbc_connects_total : 0
&gt;&gt; pbc_connects : 0
&gt;&gt; pbc_active : 0
&gt;&gt; riak_err_version : &lt;&lt;&quot;1.0.1&quot;&gt;&gt;
&gt;&gt; runtime_tools_version : &lt;&lt;&quot;1.8.4.1&quot;&gt;&gt;
&gt;&gt; basho_stats_version : &lt;&lt;&quot;1.0.1&quot;&gt;&gt;
&gt;&gt; luwak_version : &lt;&lt;&quot;1.0.0&quot;&gt;&gt;
&gt;&gt; skerl_version : &lt;&lt;&quot;1.0.0&quot;&gt;&gt;
&gt;&gt; riak_kv_version : &lt;&lt;&quot;0.14.0&quot;&gt;&gt;
&gt;&gt; bitcask_version : &lt;&lt;&quot;1.1.5&quot;&gt;&gt;
&gt;&gt; riak_core_version : &lt;&lt;&quot;0.14.0&quot;&gt;&gt;
&gt;&gt; riak_sysmon_version : &lt;&lt;&quot;0.9.0&quot;&gt;&gt;
&gt;&gt; luke_version : &lt;&lt;&quot;0.2.3&quot;&gt;&gt;
&gt;&gt; erlang_js_version : &lt;&lt;&quot;0.5.0&quot;&gt;&gt;
&gt;&gt; mochiweb_version : &lt;&lt;&quot;1.7.1&quot;&gt;&gt;
&gt;&gt; webmachine_version : &lt;&lt;&quot;1.8.0&quot;&gt;&gt;
&gt;&gt; crypto_version : &lt;&lt;&quot;2.0.2&quot;&gt;&gt;
&gt;&gt; os_mon_version : &lt;&lt;&quot;2.2.5&quot;&gt;&gt;
&gt;&gt; cluster_info_version : &lt;&lt;&quot;1.1.0&quot;&gt;&gt;
&gt;&gt; sasl_version : &lt;&lt;&quot;2.1.9.2&quot;&gt;&gt;
&gt;&gt; stdlib_version : &lt;&lt;&quot;1.17.2&quot;&gt;&gt;
&gt;&gt; kernel_version : &lt;&lt;&quot;2.14.2&quot;&gt;&gt;
&gt;&gt; executing_mappers : 0
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; On Fri, Apr 1, 2011 at 2:17 PM, Dan Reverri &lt;d...@basho.com&gt; wrote:
&gt;&gt;
&gt;&gt;&gt; Hi Keith,
&gt;&gt;&gt;
&gt;&gt;&gt; The first set of errors you saw (&quot;Protocol: ~p: register error: ~p~n&quot;)
&gt;&gt;&gt; indicate an Erlang node was already running with this name; node 2 may have
&gt;&gt;&gt; been running in the background without you realizing it.
&gt;&gt;&gt;
&gt;&gt;&gt; The second error which occurred when choosing a different name was
&gt;&gt;&gt; probably due to a port binding issue; this means the ports node 2 tried
&gt;&gt;&gt; binding to (handoff, web, pb) were already occupied. Again, node 2 may have
&gt;&gt;&gt; already been running in the background.
&gt;&gt;&gt;
&gt;&gt;&gt; After rebooting the machine it looks like starting node 2 was successful.
&gt;&gt;&gt; Regarding the ringready failure, can you run &quot;riak-admin status&quot; on all
&gt;&gt;&gt; three nodes? Also, can you send in the log files for node 2 (the entire log
&gt;&gt;&gt; directory would be great)?
&gt;&gt;&gt;
&gt;&gt;&gt; Thanks,
&gt;&gt;&gt; Dan
&gt;&gt;&gt;
&gt;&gt;&gt; Daniel Reverri
&gt;&gt;&gt; Developer Advocate
&gt;&gt;&gt; Basho Technologies, Inc.
&gt;&gt;&gt; d...@basho.com
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; On Fri, Apr 1, 2011 at 1:57 PM, Keith Dreibelbis &lt;kdrei...@gmail.com&gt;wrote:
&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Hi riak-users,
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; I have a node in a cluster of 3 that failed and won't come back up.
&gt;&gt;&gt;&gt;  This is in a dev environment, so it's not like there's critical data on
&gt;&gt;&gt;&gt; there. However, rather than start over with a new install, I want to learn
&gt;&gt;&gt;&gt; how to recover from such a failure in production.  I figured there was
&gt;&gt;&gt;&gt; enough redundancy such that node 2 could recover with (at worst) a little
&gt;&gt;&gt;&gt; help from nodes 1 and 3.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; When I tried to restart/reboot (I tried both), this showed up in
&gt;&gt;&gt;&gt; erlang.log.1:
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Exec: /Users/keith/src/riak/dev/dev2/erts-5.8.2/bin/erlexec -boot
&gt;&gt;&gt;&gt; /Users/keith/src/riak/dev/dev2/releases/0.14.0/riak             -embedded
&gt;&gt;&gt;&gt; -config /Users/keith/src/riak/dev/dev2/etc/app.confi
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; g             -args_file /Users/keith/src/riak/dev/dev2/etc/vm.args --
&gt;&gt;&gt;&gt; console
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Root: /Users/keith/src/riak/dev/dev2
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; {error_logger,{{2011,3,31},{16,43,35}},&quot;Protocol: ~p: register error:
&gt;&gt;&gt;&gt; ~p~n&quot;,[&quot;inet_tcp&quot;,{{badmatch,{error,duplicate_name}},[{inet_tcp_dist,listen,1},{net_kernel,start_protos,4},{net_kernel,sta
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; rt_protos,3},{net_kernel,init_node,2},{net_kernel,init,1},{gen_server,init_it,6},{proc_lib,init_p_do_apply,3}]}]}^M
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; {error_logger,{{2011,3,31},{16,43,35}},crash_report,[[{initial_call,{net_kernel,init,['Argument__1']}},{pid,&lt;0.20.0&gt;},{registered_name,[]},{error_info,{exit,{error,badarg},[{gen_server,init_it
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; ,6},{proc_lib,init_p_do_apply,3}]}},{ancestors,[net_sup,kernel_sup,&lt;0.10.0&gt;]},{messages,[]},{links,[#Port&lt;0.138&gt;,&lt;0.17.0&gt;]},{dictionary,[{longnames,true}]},{trap_exit,true},{status,running},{h
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; eap_size,377},{stack_size,24},{reductions,456}],[]]}^M
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; {error_logger,{{2011,3,31},{16,43,35}},supervisor_report,[{supervisor,{local,net_sup}},{errorContext,start_error},{reason,{'EXIT',nodistribution}},{offender,[{pid,undefined},{name,net_kernel},
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; {mfargs,{net_kernel,start_link,[['dev2@127.0.0.1
&gt;&gt;&gt;&gt; ',longnames]]}},{restart_type,permanent},{shutdown,2000},{child_type,worker}]}]}^M
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; {error_logger,{{2011,3,31},{16,43,35}},supervisor_report,[{supervisor,{local,kernel_sup}},{errorContext,start_error},{reason,shutdown},{offender,[{pid,undefined},{name,net_sup},{mfargs,{erl_di
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; stribution,start_link,[]}},{restart_type,permanent},{shutdown,infinity},{child_type,supervisor}]}]}^M
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; {error_logger,{{2011,3,31},{16,43,35}},std_info,[{application,kernel},{exited,{shutdown,{kernel,start,[normal,[]]}}},{type,permanent}]}^M
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; {&quot;Kernel pid
&gt;&gt;&gt;&gt; terminated&quot;,application_controller,&quot;{application_start_failure,kernel,{shutdown,{kernel,start,[normal,[]]}}}&quot;}^M
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; ^M
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Crash dump was written to: erl_crash.dump^M
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Kernel pid terminated (application_controller)
&gt;&gt;&gt;&gt; ({application_start_failure,kernel,{shutdown,{kernel,start,[normal,[]]}}})^M
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; <a  rel="nofollow" href="http://wiki.basho.com/Recovering-a-failed-node.html">http://wiki.basho.com/Recovering-a-failed-node.html</a> suggests starting
&gt;&gt;&gt;&gt; the node in console mode with a different name.  This didn't help, it just
&gt;&gt;&gt;&gt; crashed again.  I'm using bitcask (the default) while the example on that
&gt;&gt;&gt;&gt; page gives output like InnoDB would return.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; kratos:dev2 keith$ bin/riak console -name differentname@nohost
&gt;&gt;&gt;&gt; Exec: /Users/keith/src/riak/dev/dev2/erts-5.8.2/bin/erlexec -boot
&gt;&gt;&gt;&gt; /Users/keith/src/riak/dev/dev2/releases/0.14.0/riak             -embedded
&gt;&gt;&gt;&gt; -config /Users/keith/src/riak/dev/dev2/etc/app.config             
&gt;&gt;&gt;&gt; -args_file
&gt;&gt;&gt;&gt; /Users/keith/src/riak/dev/dev2/etc/vm.args -- console -name
&gt;&gt;&gt;&gt; differentname@nohost
&gt;&gt;&gt;&gt; Root: /Users/keith/src/riak/dev/dev2
&gt;&gt;&gt;&gt; Erlang R14B01 (erts-5.8.2) [source] [64-bit] [smp:2:2] [rq:2]
&gt;&gt;&gt;&gt; [async-threads:64] [hipe] [kernel-poll:true]
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; =INFO REPORT==== 31-Mar-2011::17:35:05 ===
&gt;&gt;&gt;&gt;     alarm_handler: {set,{system_memory_high_watermark,[]}}
&gt;&gt;&gt;&gt; ** Found 0 name clashes in code paths
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; =INFO REPORT==== 31-Mar-2011::17:35:05 ===
&gt;&gt;&gt;&gt;     application: riak_core
&gt;&gt;&gt;&gt;     exited: {shutdown,{riak_core_app,start,[normal,[]]}}
&gt;&gt;&gt;&gt;     type: permanent
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; =INFO REPORT==== 31-Mar-2011::17:35:05 ===
&gt;&gt;&gt;&gt;     alarm_handler: {clear,system_memory_high_watermark}
&gt;&gt;&gt;&gt; {&quot;Kernel pid
&gt;&gt;&gt;&gt; terminated&quot;,application_controller,&quot;{application_start_failure,riak_core,{shutdown,{riak_core_app,start,[normal,[]]}}}&quot;}
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Crash dump was written to: erl_crash.dump
&gt;&gt;&gt;&gt; Kernel pid terminated (application_controller)
&gt;&gt;&gt;&gt; ({application_start_failure,riak_core,{shutdown,{riak_core_app,start,[normal,[]]}}})
&gt;&gt;&gt;&gt; kratos:dev2 keith$
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; After I rebooted my machine and tried starting the trio of riak nodes,
&gt;&gt;&gt;&gt; again node 2 is not responding to pings, and &quot;riak-admin ringready&quot; from
&gt;&gt;&gt;&gt; nodes 1 and 3 complain that node 2 is down.  But in the log, node 2 is
&gt;&gt;&gt;&gt; saying it's ALIVE.  Also, I can see processes for all 3 nodes in ps:
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; kratos:~ keith$ ps auxww | grep riak
&gt;&gt;&gt;&gt; keith      360   0.2  3.4  2606932 143044 s006  Ss+  12:05PM   3:21.61
&gt;&gt;&gt;&gt; /Users/keith/src/riak/dev/dev1/erts-5.8.2/bin/beam.smp -K true -A 64 --
&gt;&gt;&gt;&gt; -root /Users/keith/src/riak/dev/dev1 -progname riak -- -home /Users/keith 
&gt;&gt;&gt;&gt; --
&gt;&gt;&gt;&gt; -boot /Users/keith/src/riak/dev/dev1/releases/0.14.0/riak -embedded -config
&gt;&gt;&gt;&gt; /Users/keith/src/riak/dev/dev1/etc/app.config -name 
&gt;&gt;&gt;&gt; dev1@127.0.0.1-setcookie riak -- console
&gt;&gt;&gt;&gt; keith      580   0.1  2.0  2549924  85492 s008  Ss+  12:05PM   2:24.08
&gt;&gt;&gt;&gt; /Users/keith/src/riak/dev/dev3/erts-5.8.2/bin/beam.smp -K true -A 64 --
&gt;&gt;&gt;&gt; -root /Users/keith/src/riak/dev/dev3 -progname riak -- -home /Users/keith 
&gt;&gt;&gt;&gt; --
&gt;&gt;&gt;&gt; -boot /Users/keith/src/riak/dev/dev3/releases/0.14.0/riak -embedded -config
&gt;&gt;&gt;&gt; /Users/keith/src/riak/dev/dev3/etc/app.config -name 
&gt;&gt;&gt;&gt; dev3@127.0.0.1-setcookie riak -- console
&gt;&gt;&gt;&gt; keith      380   0.0  0.0  2435004    268   ??  S    12:05PM   0:00.08
&gt;&gt;&gt;&gt; /Users/keith/src/riak/dev/dev1/erts-5.8.2/bin/epmd -daemon
&gt;&gt;&gt;&gt; keith      358   0.0  0.0  2434988    264   ??  S    12:05PM   0:00.01
&gt;&gt;&gt;&gt; /Users/keith/src/riak/dev/dev1/erts-5.8.2/bin/run_erl -daemon
&gt;&gt;&gt;&gt; /tmp//Users/keith/src/riak/dev/dev1// /Users/keith/src/riak/dev/dev1/log
&gt;&gt;&gt;&gt; exec /Users/keith/src/riak/dev/dev1/bin/riak console
&gt;&gt;&gt;&gt; keith     1633   0.0  0.0  2435548      0 s010  R+    1:34PM   0:00.00
&gt;&gt;&gt;&gt; grep riak
&gt;&gt;&gt;&gt; keith      578   0.0  0.0  2434988    264   ??  S    12:05PM   0:00.00
&gt;&gt;&gt;&gt; /Users/keith/src/riak/dev/dev3/erts-5.8.2/bin/run_erl -daemon
&gt;&gt;&gt;&gt; /tmp//Users/keith/src/riak/dev/dev3// /Users/keith/src/riak/dev/dev3/log
&gt;&gt;&gt;&gt; exec /Users/keith/src/riak/dev/dev3/bin/riak console
&gt;&gt;&gt;&gt; keith      470   0.0  2.0  2548688  83584 s007  Ss+  12:05PM   0:33.41
&gt;&gt;&gt;&gt; /Users/keith/src/riak/dev/dev2/erts-5.8.2/bin/beam.smp -K true -A 64 --
&gt;&gt;&gt;&gt; -root /Users/keith/src/riak/dev/dev2 -progname riak -- -home /Users/keith 
&gt;&gt;&gt;&gt; --
&gt;&gt;&gt;&gt; -boot /Users/keith/src/riak/dev/dev2/releases/0.14.0/riak -embedded -config
&gt;&gt;&gt;&gt; /Users/keith/src/riak/dev/dev2/etc/app.config -name 
&gt;&gt;&gt;&gt; dev2@127.0.0.1-setcookie riak -- console
&gt;&gt;&gt;&gt; keith      468   0.0  0.0  2434988    264   ??  S    12:05PM   0:00.01
&gt;&gt;&gt;&gt; /Users/keith/src/riak/dev/dev2/erts-5.8.2/bin/run_erl -daemon
&gt;&gt;&gt;&gt; /tmp//Users/keith/src/riak/dev/dev2// /Users/keith/src/riak/dev/dev2/log
&gt;&gt;&gt;&gt; exec /Users/keith/src/riak/dev/dev2/bin/riak console
&gt;&gt;&gt;&gt; kratos:~ keith$
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; I've attached the erl_crash.dump file.  Anyone have an explanation or
&gt;&gt;&gt;&gt; suggestions on how to proceed?
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Keith
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; _______________________________________________
&gt;&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt;&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;
&gt;
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg02852.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#02853">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#02853">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg02856.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg02849.html">Re: Bitcask node won't restart</a></span> <span class="sender italic">Dan Reverri</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg02850.html">Re: Bitcask node won't restart</a></span> <span class="sender italic">Keith Dreibelbis</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg02852.html">Re: Bitcask node won't restart</a></span> <span class="sender italic">Dan Reverri</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Bitcask node won't restart</span> <span class="sender italic">Keith Dreibelbis</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg02856.html">Re: Bitcask node won't restart</a></span> <span class="sender italic">Alexander Sicular</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Bitcask node won't restart">
<input type="hidden" name="msgid" value="AANLkTi=zxvppcFE1AMvPUB4Sjjt3O0zU5sZoHPzss3ZK@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg02853.html">
<input type="submit" value=" Keith Dreibelbis ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Bitcask+node+won%27t+restart%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg02852.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg02856.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">AANLkTi=zxvppcFE1AMvPUB4Sjjt3O0zU5sZoHPzss3ZK@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
