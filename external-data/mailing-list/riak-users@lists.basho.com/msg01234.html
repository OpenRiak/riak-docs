<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Memory footprint</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#01234" id="c">
<link rel="index" href="maillist.html#01234" id="i">
<link rel="prev" href="msg01233.html" id="p">
<link rel="next" href="msg01235.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg01234.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Memory+footprint%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Memory footprint</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Sean+Cribbs%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Sean Cribbs</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20101008" rel="nofollow">Fri, 08 Oct 2010 08:17:08 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Tony,

Your assumption is correct - each node only has the keys that it stores 
replicas of.</pre><pre>

Keep in mind that memory is used for other things than keys; the estimate given 
in that capacity planning spreadsheet is a baseline.  In general, you'll want a 
decent amount above Riak's resident size for filesystem cache (which will boost 
performance for hot keys).  For reference, we've found a 5 node cluster, 256 
partitions, with 30 million keys stored (and N=3) will consume around 1.6GB per 
node, and then easily fill up the rest of RAM with filesystem cache when under 
load.

With respect to your capacity planning, you'll generally get best performance 
if the number of nodes exceeds the N value, since this decreases the percentage 
of the cluster involved in each request. For example, at cluster size 3, every 
node will be involved in almost all requests. At 4 nodes, this decreases to 
roughly 75%. At 6, it becomes about 50%.

Sean Cribbs &lt;s...@basho.com&gt;
Developer Advocate
Basho Technologies, Inc.
<a  rel="nofollow" href="http://basho.com/">http://basho.com/</a>

On Oct 8, 2010, at 10:11 AM, Tony Novak wrote:

&gt; Quick question about Riak's memory footprint: I know that Bitcask
&gt; requires all keys to fit in memory.  Does this mean only the keys that
&gt; reside on a given node, or does each node hold the keys of the entire
&gt; system?  I assume it's the former, but I just want to be sure.
&gt; 
&gt; Basically what I'm trying to figure out is whether we should expect
&gt; better performance from a cluster of N nodes with 2*M GB of memory
&gt; each, or 2*N nodes with M GB each.
&gt; 
&gt; Thanks!
&gt; Tony Novak
&gt; 
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>


_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg01233.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#01234">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#01234">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg01235.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg01232.html">Memory footprint</a></span> <span class="sender italic">Tony Novak</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg01233.html">Re: Memory footprint</a></span> <span class="sender italic">Wilson MacGyver</span></li>
<li class="icons-email tSliceCur"><span class="subject">Re: Memory footprint</span> <span class="sender italic">Sean Cribbs</span></li>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Memory footprint">
<input type="hidden" name="msgid" value="869446B9-F002-41AC-85CB-8218AE88223C@basho.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg01234.html">
<input type="submit" value=" Sean Cribbs ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Memory+footprint%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg01233.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg01235.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">869446B9-F002-41AC-85CB-8218AE88223C@basho.com</li>
</ul>
</div>
</body>
</html>
