<!DOCTYPE html>
<html lang="en">
<head>
<title>model for a time index on realtime data</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#00003" id="c">
<link rel="index" href="maillist.html#00003" id="i">
<link rel="prev" href="msg00002.html" id="p">
<link rel="next" href="msg00012.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg00003.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22model+for+a+time+index+on+realtime+data%22&amp;o=newest" rel="nofollow"><span itemprop="name">model for a time index on realtime data</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Colin%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Colin</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20100412" rel="nofollow">Mon, 12 Apr 2010 08:56:47 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi,

I am trying to figure the best model in Riak for my application. I
have read &amp; reread the docs, wiki and list threads but haven't put any
possible solution to the test yet. I'd like your feedback to help me
avoid dead end solutions if possible!</pre><pre>

The basic idea is that I want to aggregate a large amount of realtime
data and I want to easily retrieve this data using some time
constraints (for example, all data for the past hour, day, etc). When
I say large amount of data I mean in the order of hundreds items per
second and each item should be stored individually. For this I will
have a realtime items bucket.

Now, to create my &quot;time&quot; index I have a few ideas:

- create a &quot;time capsules&quot; buckets, with a new capsule created at some
given interval. My application would use a periodic data flusher to
accumulate and flush the data for my time capsule period, every second
for example. These time capsules would only contain links to all items
for this interval. I was actually thinking of two way links so for any
realtime items I could also retrieve its corresponding time capsule.
each time capsule would also be doubly-linked to allow walking forward
or backward in time. New time capsules buckets could be created every
day for example.

The problem I foresee with this structure is the possible number of
links for each time capsules. In this example, I am thinking one
capsule per second, with hundreds of realtime items resulting in
hundreds of links in each capsule. From what I have read, it might not
be the best of idea to deal with that many links and it will not scale
if the rate grows to thousands of items per second.

- another idea would be to directly store my realtime items keys
within each capsule instead of using links but still use links from
realtime items to capsule and between capsules. This structure would
allow me to gather all realtime items for a give timeframe by fetching
the keys list within each capsule.

- yet another solution would be to use another external storage
engine, like Redis, which supports sorted sets and store references to
my realtime items. The problem with this is that I will not be able to
easily launch map-reduce jobs to crunch data within a specific
timeframe.

Finally, the end goal is for me to be able to run map-reduce jobs on
my realtime data within a give timeframe to create other external
indexes to my data, for fulltext search for example.

Any comments, hints, pointers will be appreciated!

Thanks,
Colin

_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg00002.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#00003">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#00003">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg00012.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email tSliceCur"><span class="subject">model for a time index on realtime data</span> <span class="sender italic">Colin</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00012.html">Re: model for a time index on realtime data</a></span> <span class="sender italic">Alexander Sicular</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00022.html">Re: model for a time index on realtime data</a></span> <span class="sender italic">Colin Surprenant</span></li>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="model for a time index on realtime data">
<input type="hidden" name="msgid" value="x2r8a6d52261004120856ib2c65e85lda1fda7f82cd61fa@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg00003.html">
<input type="submit" value=" Colin ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22model+for+a+time+index+on+realtime+data%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg00002.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg00012.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">x2r8a6d52261004120856ib2c65e85lda1fda7f82cd61fa@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
