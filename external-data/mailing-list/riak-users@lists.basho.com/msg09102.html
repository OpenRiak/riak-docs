<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Web doc buglet</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#09102" id="c">
<link rel="index" href="maillist.html#09102" id="i">
<link rel="prev" href="msg09099.html" id="p">
<link rel="next" href="msg09103.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg09102.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Web+doc+buglet%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Web doc buglet</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Guido+Medina%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Guido Medina</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20121101" rel="nofollow">Thu, 01 Nov 2012 02:34:36 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<tt>You will realize that one specific solution doesn't solve everything, so 
</tt><tt>you will probably have to use a piece from each base on their strengths, 
</tt><tt>Riak = *Key-Value*, HA proxy (not related) is a good *TCP balancer*, we 
</tt><tt>use it and it works like a charm, here is a sample configuration 
</tt><tt><a  rel="nofollow" href="https://gist.github.com/1507077">https://gist.github.com/1507077</a>
</tt><pre style="margin: 0em;">

</pre><tt>And finally, I meant that ElasticSearch could be a Solr replacement 
</tt><tt>which both strengths are *text index searching* and both have Geo 
</tt><tt>Spatial special kind of search tools, and include polygons, convex hull 
</tt><tt>algorithms, etc, I know Solr needs to be heavily configured to have 
</tt><tt>advanced geo stuff working, which in ElasticSearch is already in place 
</tt><tt>or way easier to configure, and both are based in Lucene so, either will 
</tt><tt>be as fast.
</tt><pre style="margin: 0em;"></pre><pre>

</pre><tt>ElasticSearch had near real time index enabled were Solr just enabled it 
</tt><tt>at version 4 which was released a month ago, but hard to find documentation.
</tt><pre style="margin: 0em;">

Hope that helps,

Guido.

On 31/10/12 22:50, Tin Le wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
For some reason, I did not get the original reply from Mark.  Only saw it
when it was included in Guido's email.


</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
HA proxy + Riak + ElasticSearch are your friends, Solr lacks
documentation (way outdated), hard to find stuff done and samples, so if
you have your cluster well setup and your meaning to do only key-value
retrieval with assist of text index search using ElasticSearch, you are
good.

*Note:* We have Solr for GeoSpatial functionality and is amazingly fast,
but there isn't much we can do, if you need complex polygon features it
gets complicated in Solr. Except for some incubation projects that will
be brought into Solr, it is kind of hard to do anything.
</pre></blockquote><pre style="margin: 0em;">
We are not using Solr at the moment, and I don't want to add yet another
piece into our infrastructure unless I really, really have to.  If it is
the best option for our needs, I'll use it.

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
Hope that helps,

Guido.
</pre></blockquote><pre style="margin: 0em;">

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
On 31/10/12 17:15, Mark Phillips wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
One of the thing we've found missing and really need is the geospatial
indexing mongodb has.  We've just pushed our updated app to both
iTunes
and Google Playstore that uses this as an intrinsic part of our app.
We
decided to stay with mongo as there was no time to code up equivalent
for
riak.
</pre></blockquote><pre style="margin: 0em;">
So Riak isn't really a great fit for geospatial right now. You might
be able to fake it to some extent using secondary indexes and doing
range queries on lat/longs (stored as ints) but it might not be too
performant. The other thing worth noting is that Ryan Zezeski has been
hacking on a revised implementation of Riak Search that ties Riak and
Solr together quite nicely (and thus supports geospatial). It's called
Yokozuna [1], and it's still alpha, but it's worth looking at and
testing (as this code getting more stable pretty quickly).

What are the specifics of the use case?
</pre></blockquote></blockquote><pre style="margin: 0em;">
Our app is a popular music recognition app for iOS, Android and other
mobile OS (over 100+ million users).  We just pushed out a feature that
allow users to discovered songs being &quot;identified&quot; by nearby users on a
map.  It work globally.  You can see what songs are being ID'ed around
you.

As users ID'd a song, the song and user location is added to mongo.  This
info can be queried and display on a proximity map.

Since we were more familiar with mongo, and were under time pressure to
get this out, recoding would not work for us.

We will see how mongo scale for us over time for this particular feature.
  No rush to go to riak now.

I have new HW on order for intended production usage.  It wil be a 5
nodes cluster.  Each with 16 cores, 64GB RAM (upgradeable to 512GB), and
2TB in a RAID10 config.  If riak tested out, we will go with this HW.
Otherwise, wipe and put mongo on it.

The test bed originally used 64 partitions with 3 nodes.  But as I was
adding 2 more nodes, I read somewhere in the doc that I should use 256 or
512 with more than 3 nodes.  So I wiped and upped it to 256 partitions on
5 nodes test bed.

Regarding the docs.  I would like to see a Best Practices section on
sizing HOWTOs and other configuration recommendations.  Perhaps a list of
usage scenarios and HW/SW configuration recs.  An explanation of why pick
a certain config and what need to be adjusted is helpful for
Operations/SysAdmins.

Current docs are fine for getting feet wet, just not enough for long
term, production usage.

I have more experience with mongo in a production environment than I have
with riak.  So anything that help make it easier for me  to get up to
speed is definitely good.

Right now, I am the sole person championing riak at $WORK$.  So it's
tough, heh :)

Tin

</pre></blockquote><pre style="margin: 0em;">

</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg09099.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#09102">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#09102">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg09103.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg09072.html">Web doc buglet</a></span> <span class="sender italic">Tin Le</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg09073.html">Re: Web doc buglet</a></span> <span class="sender italic">Dmitri Zagidulin</span></li>
<li class="icons-email"><span class="subject"><a href="msg09074.html">Re: Web doc buglet</a></span> <span class="sender italic">Mark Phillips</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg09078.html">Re: Web doc buglet</a></span> <span class="sender italic">Tin Le</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg09095.html">Re: Web doc buglet</a></span> <span class="sender italic">Mark Phillips</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg09096.html">Re: Web doc buglet</a></span> <span class="sender italic">Guido Medina</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg09099.html">Re: Web doc buglet</a></span> <span class="sender italic">Tin Le</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Web doc buglet</span> <span class="sender italic">Guido Medina</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg09103.html">Re: Web doc buglet</a></span> <span class="sender italic">Alex Thompson</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Web doc buglet">
<input type="hidden" name="msgid" value="50924221.3030002@temetra.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg09102.html">
<input type="submit" value=" Guido Medina ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Web+doc+buglet%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg09099.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg09103.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">50924221.3030002@temetra.com</li>
</ul>
</div>
</body>
</html>
