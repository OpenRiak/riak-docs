<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Yokozuna max practical bucket limit</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#10802" id="c">
<link rel="index" href="maillist.html#10802" id="i">
<link rel="prev" href="msg10786.html" id="p">
<link rel="next" href="msg10948.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg10802.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Yokozuna+max+practical+bucket+limit%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Yokozuna max practical bucket limit</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Elias+Levy%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Elias Levy</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20130409" rel="nofollow">Tue, 09 Apr 2013 09:40:05 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>On Mon, Apr 8, 2013 at 7:09 PM, Ryan Zezeski &lt;rzeze...@basho.com&gt; wrote:</pre><pre>

&gt; This is exactly why I chose not to make a core per partition.  My gut
&gt; feeling was that most users are likely to have more partitions than indexed
&gt; buckets.  I don't know the overhead per-core or what the limits might be.
&gt;  I would recommend the Solr mailing list for questions like that.  I've
&gt; also looked at that &quot;LotsOfCores&quot; page before.  One benefit to using Solr
&gt; is that any improvements made to it should also trickle down to Yokozuna.
&gt;
&gt; That said, I still plan to allow a one-to-many mapping from index to
&gt; buckets.  That would allow many KV buckets to index under the same core.  I
&gt; have an idea of how to implement it.  I'm fairly certain it would work just
&gt; fine.  I just need to add a GitHub issue and then it's a &quot;simple matter of
&gt; coding.&quot;
&gt;


I could see that being something some folks want.  From my point of view, I
find that the existing design of one core per bucket may be more useful, so
long as I can search across cores with similar schemas (I created an
issue&lt;<a  rel="nofollow" href="https://github.com/basho/yokozuna/issues/87">https://github.com/basho/yokozuna/issues/87</a>&gt;to track that
feature), as it allows me to easily drop the index for a
bucket.  In a multi-tenant environment, where you may have an index per
customer, this is rather useful.  A lot less painful than trying to delete
the index (and data) by performing a key listing and delete operations.

As I've expressed before, I wish buckets behaved the same way, segregating
their data into distinct backend, but I understand that this results in
lower resource usage, as things like LevelDB caches would then not be
shared and you'd need additional file descriptors.  At the very least, it
would be great if backend instances could be
created programmatically through the HTTP or PB API, rather than having to
modify app.config and perform a rolling restart.  That not very
operationally friendly.

As for large number of cores, I could see some folks creating many of them.
 Buckets are relatively cheap, since by default they are all stored in the
default backend instance.  Their only cost being the additional network
traffic for gossiping non-default bucket properties.  So folks create them
freely. Once Yokozuna is better documented, it should be pointed out that
the same is not true of a bucket's index, since they create one core per
bucket.  So an indexed bucket has quite a bit more static overhead than
non-indexed one.

If you use Riak and have 300 customers, you can easily create a bucket per
customer, even if you only have 64 partions and are using Riak Search on
all of them, as Search stores all the data in the same merge index backend.
 You may want to twice before upgrading such cluster to Yokozuna.

Elias Levy
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg10786.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#10802">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#10802">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg10948.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg10770.html">Yokozuna max practical bucket limit</a></span> <span class="sender italic">Elias Levy</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg10786.html">Re: Yokozuna max practical bucket limit</a></span> <span class="sender italic">Ryan Zezeski</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Yokozuna max practical bucket limit</span> <span class="sender italic">Elias Levy</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg10948.html">Re: Yokozuna max practical bucket limit</a></span> <span class="sender italic">Ryan Zezeski</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg10950.html">Re: Yokozuna max practical bucket limit</a></span> <span class="sender italic">Elias Levy</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Yokozuna max practical bucket limit">
<input type="hidden" name="msgid" value="CAFDmHdN_H+2sN5dXwYADfrzY=QyHjQ-piSzRBc-GGeZijmpBSQ@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg10802.html">
<input type="submit" value=" Elias Levy ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Yokozuna+max+practical+bucket+limit%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg10786.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg10948.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CAFDmHdN_H+2sN5dXwYADfrzY=QyHjQ-piSzRBc-GGeZijmpBSQ@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
