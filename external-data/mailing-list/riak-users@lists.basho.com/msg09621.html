<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Trying to revamp the clj-riak driver</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#09621" id="c">
<link rel="index" href="maillist.html#09621" id="i">
<link rel="prev" href="msg09620.html" id="p">
<link rel="next" href="msg09625.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg09621.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Trying+to+revamp+the+clj%5C-riak+driver%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Trying to revamp the clj-riak driver</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22bgp2396%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">bgp2396</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20121218" rel="nofollow">Tue, 18 Dec 2012 13:05:07 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Thanks! I did check out both of those, but as far as I could tell neither one 
supported conflict resolution, or at least it's not documented. If it is 
supported, do you think you could give an example of how to do it with sumo? I 
tried passing in the :vector-clock with in the map you pass into put, but that 
didn't yield any results.</pre><pre>

My use case right now is that I'm writing a little proxy server in clojure to 
interact with riak. The client will be getting (possibly multiple) values out 
of riak, and passing in the one that it wants to be correct (possibly changing 
that correct one in some way was well before sending it back).

--- On Tue, 12/18/12, Reid Draper &lt;reiddra...@gmail.com&gt; wrote:

&gt; From: Reid Draper &lt;reiddra...@gmail.com&gt;
&gt; Subject: Re: Trying to revamp the clj-riak driver
&gt; To: &quot;bgp2396&quot; &lt;bgp2...@bellsouth.net&gt;
&gt; Cc: riak-users@lists.basho.com
&gt; Date: Tuesday, December 18, 2012, 3:44 PM
&gt; For a more up-to-date Clojure client,
&gt; I'd recommend looking at Welle [1] or Sumo [2]. Not to
&gt; discourage you from doing some hacking, just throwing some
&gt; other options out there.
&gt; 
&gt; [1] <a  rel="nofollow" href="http://clojureriak.info/">http://clojureriak.info/</a>
&gt; [2] <a  rel="nofollow" href="https://github.com/reiddraper/sumo">https://github.com/reiddraper/sumo</a>
&gt; 
&gt; Reid
&gt; 
&gt; On Dec 18, 2012, at 3:12 PM, bgp2396 &lt;bgp2...@bellsouth.net&gt;
&gt; wrote:
&gt; 
&gt; &gt; I'm working on updating this driver to be in some kind
&gt; of working state:
&gt; &gt; <a  rel="nofollow" href="https://github.com/mmcgrana/clj-riak">https://github.com/mmcgrana/clj-riak</a>
&gt; &gt; 
&gt; &gt; I've actually made some good progress, you can find my
&gt; fork of it here:
&gt; &gt; <a  rel="nofollow" href="https://github.com/mediocregopher/clj-riak">https://github.com/mediocregopher/clj-riak</a>
&gt; &gt; 
&gt; &gt; I've gotten all the dependencies and such updated, and
&gt; (afaik) all of the old functionality is working again
&gt; (although I haven't tested mapreduce).
&gt; &gt; 
&gt; &gt; Right now I'm trying to add in support for vclocks and
&gt; conflict resolution. As it stands the driver always passes
&gt; in the vclock as blank. I've switched to using one of the
&gt; RiakObject constructors which has a vclock passed in as
&gt; well, but now the code throws a
&gt; &quot;NullPointerException   clojure.lang.Reflector.invokeNoArgInstanceMember&quot;
&gt; when calling buildContent() on it. I wanted to check on the
&gt; mailing list to see if anyone might know why this is before
&gt; I started diving into the java code and trying to debug that
&gt; to figure out where exactly in buildContent() it's failing.
&gt; &gt; 
&gt; &gt; Here's a gist with relevant the relevant code:
&gt; &gt; <a  rel="nofollow" href="https://gist.github.com/4331526">https://gist.github.com/4331526</a>
&gt; &gt; 
&gt; &gt; _______________________________________________
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com
&gt; &gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt; 
&gt; 

_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg09620.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#09621">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#09621">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg09625.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg09617.html">Trying to revamp the clj-riak driver</a></span> <span class="sender italic">bgp2396</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg09620.html">Re: Trying to revamp the clj-riak driver</a></span> <span class="sender italic">Reid Draper</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Trying to revamp the clj-riak driver</span> <span class="sender italic">bgp2396</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg09625.html">Re: Trying to revamp the clj-riak driver</a></span> <span class="sender italic">Reid Draper</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg09624.html">Re: Trying to revamp the clj-riak driver</a></span> <span class="sender italic">bgp2396</span></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg09631.html">Re: Trying to revamp the clj-riak driver</a></span> <span class="sender italic">Michael Klishin</span></li>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Trying to revamp the clj-riak driver">
<input type="hidden" name="msgid" value="1355864701.87919.YahooMailClassic@web184802.mail.gq1.yahoo.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg09621.html">
<input type="submit" value=" bgp2396 ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Trying+to+revamp+the+clj%5C-riak+driver%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg09620.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg09625.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">1355864701.87919.YahooMailClassic@web184802.mail.gq1.yahoo.com</li>
</ul>
</div>
</body>
</html>
