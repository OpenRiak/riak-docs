<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: cannot query bucket when a node is down</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#00479" id="c">
<link rel="index" href="maillist.html#00479" id="i">
<link rel="prev" href="msg00478.html" id="p">
<link rel="next" href="msg00491.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg00479.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+cannot+query+bucket+when+a+node+is+down%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: cannot query bucket when a node is down</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Justin+Sheehy%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Justin Sheehy</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20100601" rel="nofollow">Tue, 01 Jun 2010 11:05:36 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>On Tue, Jun 1, 2010 at 1:56 PM, Sam Tingleff &lt;s...@tingleff.com&gt; wrote:</pre><pre>

&gt; With no single point of failure there is no single index of keys. So
&gt; the only way to get an exhaustive list of keys in a given bucket is to
&gt; ask all nodes (I do not know if this is what riak is actually doing).

Sam is exactly right that Riak doesn't centralize anything and so
there is no collected index of keys.

However, you don't quite have to ask every node; you have to ask
enough nodes to know that you hit at least one replica of every
object.  This is what listing keys (GET /bucket) does.  There was a
bug that just recently got fixed that could in some cases cause the
whole listing to hang up due to a single misbehaving or down node,
depending on timing.  This fix was placed in tip this morning and the
fix will go out in the next release.

As long as you have enough nodes around that you could get every
object in the cluster using R=1, you should be able to list the keys
in a bucket.

-Justin

_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg00478.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#00479">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#00479">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg00491.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg00469.html">cannot query bucket when a node is down</a></span> <span class="sender italic">Johan Harjono</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00470.html">Re: cannot query bucket when a node is down</a></span> <span class="sender italic">Alexander Sicular</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00471.html">Re: cannot query bucket when a node is down</a></span> <span class="sender italic">Johan Harjono</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00478.html">Re: cannot query bucket when a node is down</a></span> <span class="sender italic">Sam Tingleff</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: cannot query bucket when a node is ...</span> <span class="sender italic">Justin Sheehy</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00491.html">Re: cannot query bucket when a nod...</a></span> <span class="sender italic">Johan Harjono</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: cannot query bucket when a node is down">
<input type="hidden" name="msgid" value="AANLkTinFNqbzb3bZXWbMLWEwCj2NHHCQ-eDUsQ113F14@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg00479.html">
<input type="submit" value=" Justin Sheehy ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+cannot+query+bucket+when+a+node+is+down%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg00478.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg00491.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">AANLkTinFNqbzb3bZXWbMLWEwCj2NHHCQ-eDUsQ113F14@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
