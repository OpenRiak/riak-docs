<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: riak-python-client2, a rewrite of the official client</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#06969" id="c">
<link rel="index" href="maillist.html#06969" id="i">
<link rel="prev" href="msg06968.html" id="p">
<link rel="next" href="msg06982.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg06969.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+riak%5C-python%5C-client2%2C+a+rewrite+of+the+official+client%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: riak-python-client2, a rewrite of the official client</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Shuhao+Wu%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Shuhao Wu</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20120315" rel="nofollow">Thu, 15 Mar 2012 10:25:53 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>I'm not considering replacing it just yet. It's a work in progress. If it
gets support, awesome. Otherwise, there still can be continued development
to hunt down bugs and so forth. We are still keeping the old library
around, it's just that now you have options with this well designed newer
library. Eventually it will get to a point where it will both be stable and
well designed.</pre><pre>

Shuhao
On Mar 15, 2012 12:35 PM, &quot;Andrey V. Martyanov&quot; &lt;reald...@gmail.com&gt; wrote:

&gt; Shuhao,
&gt;
&gt; It seems reasonable.
&gt;
&gt; sloccount reported the following:
&gt;
&gt; Total Physical Source Lines of Code (SLOC)  = 3,661
&gt; python:        3160 (86.32%)
&gt; erlang:         501 (13.68%)
&gt;
&gt; Not too much.
&gt;
&gt; But. The current version of riak python client is used in many projects.
&gt; Formspring, for example, contributed a lot of code to the python client.
&gt; The client is quite stable, despite of the architecture faults, it has
&gt; several issues, but not critical. The major rewrite you've suggested
&gt; definitely produce a lot of bugs, at least in early stage of development. I
&gt; mean it would be very hard to do without direct support from Basho or
&gt; another company. I'm not sure about dedicated python developer either, but
&gt; if it's so it's very bad and the current situation is even worse than I
&gt; thought. The stable working library with architecture design flaws is
&gt; definitely better than the broken well-designed library.
&gt;
&gt; Best regards,
&gt; Martyanov Andrey
&gt;
&gt; On Thu, Mar 15, 2012 at 8:13 PM, Shuhao Wu &lt;ad...@thekks.net&gt; wrote:
&gt;
&gt;&gt; I'm looked into just modifying and contributing to the existing library,
&gt;&gt; and
&gt;&gt; found several issues with it. Here's my main motivation for a rewrite:
&gt;&gt;
&gt;&gt;   1. The current structure riak-python-client is somewhat messy.
&gt;&gt; Everything
&gt;&gt;     depends on each other. Just look at things like RiakLink and
&gt;&gt; RiakIndexEntry.
&gt;&gt;     They're unnecessary and overcomplicates the code. Furthermore, if you
&gt;&gt; look
&gt;&gt;     the transports, it's very much dependent on things like RiakObject,
&gt;&gt; and
&gt;&gt;     RiakObject is pretty much nothing without the transport. It's almost
&gt;&gt; like a
&gt;&gt;     circular dependency. So instead, I redesigned the transports to
&gt;&gt; operate
&gt;&gt;     independently from things like RiakObject. To do this, simply
&gt;&gt; modifying
&gt;&gt;     is not feasible and it will result in an almost complete rewrite
&gt;&gt; anyway due
&gt;&gt;     to the dependencies problems I described.
&gt;&gt;  2. There's a lot of &quot;bloat&quot; in the current riak-python-client. A simple
&gt;&gt;     example would be get_ and set_, as well as things like RiakLink and
&gt;&gt;     RiakIndexEntry. To get rid of those would pretty much require a
&gt;&gt; rewrite as
&gt;&gt;     well.
&gt;&gt;  3. Basho currently do not have a dedicated python developer working on
&gt;&gt; this.
&gt;&gt;     I don't know this for sure but I think their resources, in terms
&gt;&gt; of clients,
&gt;&gt;     go mainly to java, ruby and javascript, though that's just my
&gt;&gt; observations.
&gt;&gt;
&gt;&gt; My primary goal of having a rewrite is hopefully simplify the code base
&gt;&gt; as well
&gt;&gt; as improve some aspects of the python client (such as not using deprecated
&gt;&gt; functions such as apply) and (hopefully) increase the speed of the client.
&gt;&gt; After examining the code (which I had to do while rewriting), I don't
&gt;&gt; think
&gt;&gt; simply modifying the current codebase could fix its issues (there are more
&gt;&gt; issues then what I've stated), and I don't think it will take as long as
&gt;&gt; people
&gt;&gt; think. The current code base has about 4k lines of python and 0.5k lines
&gt;&gt; of
&gt;&gt; Erlang. In my client, a chunk of the code actually comes from the original
&gt;&gt; client as they work with a few adaptations.
&gt;&gt;
&gt;&gt; As far as road map goes, I'm currently just rewriting all the
&gt;&gt; functionalities
&gt;&gt; provided by the current python client, and here's a list of things that
&gt;&gt; Sean
&gt;&gt; would like to see accomplished, which I will work on once I have all the
&gt;&gt; functionalities of the current client complete:
&gt;&gt;
&gt;&gt;    <a  rel="nofollow" href="https://gist.github.com/1959278">https://gist.github.com/1959278</a>
&gt;&gt;
&gt;&gt; I hope I've answered all the questions. If there is any more
&gt;&gt; questions/comments,
&gt;&gt; feel free to shoot it my way.
&gt;&gt;
&gt;&gt; Shuhao
&gt;&gt;
&gt;&gt;
&gt;&gt; On Thu, Mar 15, 2012 at 5:30 AM, Andrey V. Martyanov &lt;reald...@gmail.com&gt;
&gt;&gt; wrote:
&gt;&gt; &gt;
&gt;&gt; &gt; Hi Shuhao,
&gt;&gt; &gt;
&gt;&gt; &gt; What is the reason to create a fork? What is your primary goal? Do you
&gt;&gt; have any particular plans or roadmap? It would be very helpful.
&gt;&gt; &gt;
&gt;&gt; &gt; Best regards,
&gt;&gt; &gt; Andrey Mart
&gt;&gt; &gt;
&gt;&gt; &gt; On Thu, Mar 15, 2012 at 5:30 AM, Shuhao Wu &lt;ad...@thekks.net&gt; wrote:
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; That would be most appreciated.
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; I just completed a very bare minimum higher level API that's similar
&gt;&gt; to the current Python client. However, there's still a lot of work to be
&gt;&gt; done. Once again, I'm just one lone student working in my spare time and I
&gt;&gt; can't possibly think of everything. If we want to bring Python up to speed
&gt;&gt; with the rest of the clients, I'll need more people helping me!
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; Also, I have a general plan of bringing riakkit to riak-python-client2
&gt;&gt; as well.
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; Shuhao
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; On Mon, Mar 12, 2012 at 12:50 AM, Jim Adler &lt;jim.ad...@comcast.net&gt;
&gt;&gt; wrote:
&gt;&gt; &gt;&gt;&gt;
&gt;&gt; &gt;&gt;&gt; I'll certainly take a look at your repo and help where I can.
&gt;&gt; &gt;&gt;&gt;
&gt;&gt; &gt;&gt;&gt; Jim
&gt;&gt; &gt;&gt;&gt;
&gt;&gt; &gt;&gt;&gt; Sent from my phone. Please forgive the typos.
&gt;&gt; &gt;&gt;&gt;
&gt;&gt; &gt;&gt;&gt; On Mar 11, 2012, at 11:25 PM, Shuhao Wu &lt;ad...@thekks.net&gt; wrote:
&gt;&gt; &gt;&gt;&gt;
&gt;&gt; &gt;&gt;&gt;
&gt;&gt; &gt;&gt;&gt; I'm not too familiar with PBC . I'm looking for individuals to help
&gt;&gt; me as I'm just a student and only working on it in my spare time.
&gt;&gt; &gt;&gt;&gt;
&gt;&gt; &gt;&gt;&gt; Shuhao
&gt;&gt; &gt;&gt;&gt;
&gt;&gt; &gt;&gt;&gt; On Mar 11, 2012 10:43 PM, &quot;Jim Adler&quot; &lt;jim.ad...@comcast.net&gt; wrote:
&gt;&gt; &gt;&gt;&gt;&gt;
&gt;&gt; &gt;&gt;&gt;&gt; This is great Shuhao!
&gt;&gt; &gt;&gt;&gt;&gt;
&gt;&gt; &gt;&gt;&gt;&gt; I've had problems using the python client using multiple threads
&gt;&gt; with protocol buffers. The exact same multithreaded code works fine with
&gt;&gt; http protocol. So, any attention you can give to the pbc transport would be
&gt;&gt; hugely appreciated.
&gt;&gt; &gt;&gt;&gt;&gt;
&gt;&gt; &gt;&gt;&gt;&gt; Good luck! Can't wait to give your new client a test drive.
&gt;&gt; &gt;&gt;&gt;&gt;
&gt;&gt; &gt;&gt;&gt;&gt; Jim
&gt;&gt; &gt;&gt;&gt;&gt;
&gt;&gt; &gt;&gt;&gt;&gt; Sent from my phone. Please forgive the typos.
&gt;&gt; &gt;&gt;&gt;&gt;
&gt;&gt; &gt;&gt;&gt;&gt; On Mar 11, 2012, at 12:31 PM, Shuhao Wu &lt;ad...@thekks.net&gt; wrote:
&gt;&gt; &gt;&gt;&gt;&gt;
&gt;&gt; &gt;&gt;&gt;&gt; Hey guys,
&gt;&gt; &gt;&gt;&gt;&gt;
&gt;&gt; &gt;&gt;&gt;&gt; I've been working with riak and python for the past couple of
&gt;&gt; months, and I'm at the point where I'm ready to completely reimplement
&gt;&gt; riak-python-client. So.. I did/started. The project is hosted on github and
&gt;&gt; under the same apache 2 license as the original client.
&gt;&gt; &gt;&gt;&gt;&gt;
&gt;&gt; &gt;&gt;&gt;&gt; <a  rel="nofollow" href="https://github.com/ultimatebuster/riak-python-client2">https://github.com/ultimatebuster/riak-python-client2</a>
&gt;&gt; &gt;&gt;&gt;&gt;
&gt;&gt; &gt;&gt;&gt;&gt; Couple of key highlights right now:
&gt;&gt; &gt;&gt;&gt;&gt;
&gt;&gt; &gt;&gt;&gt;&gt;  1. 2 layers of API, a very basic layer (Transports), which handles
&gt;&gt; communicating with the server, and a high level API, which consists of
&gt;&gt; Bucket, Object, and so on.
&gt;&gt; &gt;&gt;&gt;&gt;  2. Eliminated things like `set_` and `get_`. Made them just
&gt;&gt; variables where possible
&gt;&gt; &gt;&gt;&gt;&gt;
&gt;&gt; &gt;&gt;&gt;&gt; I'm still taking suggestions for how to reimplement RiakObject (now
&gt;&gt; called RObject). Any feedback will be appreciated.
&gt;&gt; &gt;&gt;&gt;&gt;
&gt;&gt; &gt;&gt;&gt;&gt; Cheers,
&gt;&gt; &gt;&gt;&gt;&gt;
&gt;&gt; &gt;&gt;&gt;&gt; Shuhao
&gt;&gt; &gt;&gt;&gt;&gt;
&gt;&gt; &gt;&gt;&gt;&gt; _______________________________________________
&gt;&gt; &gt;&gt;&gt;&gt; riak-users mailing list
&gt;&gt; &gt;&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt; &gt;&gt;&gt;&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; _______________________________________________
&gt;&gt; &gt;&gt; riak-users mailing list
&gt;&gt; &gt;&gt; riak-users@lists.basho.com
&gt;&gt; &gt;&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;
&gt;&gt;
&gt;
&gt;
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg06968.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#06969">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#06969">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg06982.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg06936.html">riak-python-client2, a rewrite of the official client</a></span> <span class="sender italic">Shuhao Wu</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg06938.html">Re: riak-python-client2, a rewrite of the officia...</a></span> <span class="sender italic">Jim Adler</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg06961.html">Re: riak-python-client2, a rewrite of the off...</a></span> <span class="sender italic">Shuhao Wu</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg06964.html">Re: riak-python-client2, a rewrite of the...</a></span> <span class="sender italic">Russell Brown</span></li>
<li class="icons-email"><span class="subject"><a href="msg06966.html">Re: riak-python-client2, a rewrite of the...</a></span> <span class="sender italic">Andrey V. Martyanov</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg06967.html">Re: riak-python-client2, a rewrite of...</a></span> <span class="sender italic">Shuhao Wu</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg06968.html">Re: riak-python-client2, a rewri...</a></span> <span class="sender italic">Andrey V. Martyanov</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: riak-python-client2, a r...</span> <span class="sender italic">Shuhao Wu</span></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg06982.html">Re: riak-python-client2, a rewri...</a></span> <span class="sender italic">Greg Stein</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg06985.html">Re: riak-python-client2, a r...</a></span> <span class="sender italic">Shuhao Wu</span></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg06970.html">Re: riak-python-client2, a rewrite of the officia...</a></span> <span class="sender italic">Armon Dadgar</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg06971.html">Re: riak-python-client2, a rewrite of the off...</a></span> <span class="sender italic">Shuhao Wu</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg06974.html">Re: riak-python-client2, a rewrite of the...</a></span> <span class="sender italic">Sean Cribbs</span></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg06983.html">Re: riak-python-client2, a rewrite of the off...</a></span> <span class="sender italic">Greg Stein</span></li>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: riak-python-client2, a rewrite of the official client">
<input type="hidden" name="msgid" value="CAP1J66emrNONCx6LVOLiVbQt1TzZkJ9_=A3yKQC4QtC0Vpo0Rw@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg06969.html">
<input type="submit" value=" Shuhao Wu ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+riak%5C-python%5C-client2%2C+a+rewrite+of+the+official+client%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg06968.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg06982.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CAP1J66emrNONCx6LVOLiVbQt1TzZkJ9_=A3yKQC4QtC0Vpo0Rw@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
