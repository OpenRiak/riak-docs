<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Riak init script ordering issues Reply-To:</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#14518" id="c">
<link rel="index" href="maillist.html#14518" id="i">
<link rel="prev" href="msg14375.html" id="p">
<link rel="next" href="msg14378.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg14518.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Riak+init+script+ordering+issues+Reply%5C-To%5C%3A%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Riak init script ordering issues Reply-To:</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Luke+Bakken%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Luke Bakken</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20140721" rel="nofollow">Mon, 21 Jul 2014 09:59:29 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi Matthew,

Thanks for pointing this out. I'm going to bring it up for discussion
internally. At this point your best bet would be to manually edit the init
scripts on machines running more than one service to create dependencies to
prevent this issue. For instance, you can edit the riak init script to
check for the existence of the riak-cs init script and, if present, run
&quot;/etc/init.d/riak-cs stop&quot; to stop Riak CS before Riak.</pre><pre>

--
Luke Bakken
CSE
lbak...@basho.com


On Wed, Jun 25, 2014 at 5:45 PM, Matthew Hall &lt;mh...@mhcomputing.net&gt; wrote:

&gt; Hello,
&gt;
&gt; I'm using recent versions of Riak on CentOS 6.5 and I ran into some issues
&gt; which are similar to these ones reported on Debian:
&gt;
&gt; <a  rel="nofollow" href="https://github.com/basho/riak_cs/issues/718">https://github.com/basho/riak_cs/issues/718</a>
&gt;
&gt; In my case, instead of having problems during startup, I get problems
&gt; during
&gt; shutdown, because for some reason riak and stanchion are shutting down
&gt; before
&gt; riak-cs. It causes very long timeouts of 30-60+ seconds or more every time
&gt; you
&gt; try to reboot the machine involved.
&gt;
&gt; So I wanted to ask how I could modify the scripts or dependency ordering
&gt; manually, on the local system, to prevent this problem, even if it can't be
&gt; done globally due to the &quot;all parts of Riak can go on arbitrary nodes&quot;
&gt; issue
&gt; mentioned in the bug above.
&gt;
&gt; Thanks,
&gt; Matthew.
&gt;
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg14375.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#14518">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#14518">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg14378.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg14374.html">Riak init script ordering issues Reply-To:</a></span> <span class="sender italic">Matthew Hall</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg14375.html">Re: Riak init script ordering issues</a></span> <span class="sender italic">Matthew Hall</span></li>
<li class="icons-email tSliceCur"><span class="subject">Re: Riak init script ordering issues Reply-To:</span> <span class="sender italic">Luke Bakken</span></li>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Riak init script ordering issues Reply-To:">
<input type="hidden" name="msgid" value="CAJJ0J9NvbVDBvawYDE1UoEiVHTrb5RsHanCst_XQAmXTzL7dew@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg14518.html">
<input type="submit" value=" Luke Bakken ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Riak+init+script+ordering+issues+Reply%5C-To%5C%3A%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg14375.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg14378.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CAJJ0J9NvbVDBvawYDE1UoEiVHTrb5RsHanCst_XQAmXTzL7dew@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
