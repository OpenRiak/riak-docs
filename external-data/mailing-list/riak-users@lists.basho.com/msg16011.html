<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Need help getting riak started</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#16011" id="c">
<link rel="index" href="maillist.html#16011" id="i">
<link rel="prev" href="msg16010.html" id="p">
<link rel="next" href="#" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg16011.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Need+help+getting+riak+started%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Need help getting riak started</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Shawn+Debnath%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Shawn Debnath</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20150416" rel="nofollow">Thu, 16 Apr 2015 09:05:48 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Turns out it was the nodename that was the culprit. The suffix part of the 
nodename, @cluster.example.com, needs to be resolvable to that specific host 
for ping to work. So had to switch to n...@node.cluster.example.com. Though it 
looks strange, at least the service boots up properly.</pre><pre>

Attempted to get it to work by having cluster.example.com return  a set of IPs 
for all the riak nodes in the cluster, but that didn’t help either. In the 
perfect world, this should.

Thanks to Alex, Zeeshan, and Sean for helping out on IRC.

On 4/15/15, 11:28 PM, &quot;Shawn Debnath&quot; 
&lt;sh...@debnath.net&lt;<a  rel="nofollow" href="mailto:sh...@debnath.net">mailto:sh...@debnath.net</a>&gt;&gt; wrote:

Just to add to this, seems like even after waiting for 15 mins, the start 
script fails because it is unable to ping the node. Tracing through the 
scripts, we arrive at the nodetool in /usr/lib/riak/erts-5.10.3/bin  which is 
calling {net_kernel:hidden_connect_node(TargetNode), net_adm:ping(TargetNode)} 
to check the status of the node and is getting {_, pang} in return. Results in 
printing out &quot;Node 
'ria...@riak.prod.pryvy.com&lt;mailto:'ria...@riak.prod.pryvy.com&gt;' not responding 
to pings.&quot; At this stage riak console is still unable to connect and still 
nothing in error or crash logs.  Any hints on how to proceed, or ways to 
collect more debug info appreciated.

On 4/15/15, 7:39 PM, &quot;Shawn Debnath&quot; 
&lt;sh...@debnath.net&lt;<a  rel="nofollow" href="mailto:sh...@debnath.net">mailto:sh...@debnath.net</a>&gt;&gt; wrote:

System: Ubuntu 14.04.2 LTS.

From a different vm (10.IP.IP.IP2) after exposing 8087 on 10.IP.IP.IP1:
1&gt; {ok, Pid} = riakc_pb_socket:start(“10.IP.IP.IP1&quot;, 8087).
{ok,&lt;0.35.0&gt;}
2&gt; riakc_pb_socket:is_connected(Pid).
true
3&gt;


On 4/15/15, 5:53 PM, &quot;Jon Meredith&quot; 
&lt;jmered...@basho.com&lt;<a  rel="nofollow" href="mailto:jmered...@basho.com">mailto:jmered...@basho.com</a>&gt;&gt; wrote:

What distribution/ version of Linux are you running on the VM Shawn?

On Wed, Apr 15, 2015 at 5:11 PM, Shawn Debnath 
&lt;sh...@debnath.net&lt;<a  rel="nofollow" href="mailto:sh...@debnath.net">mailto:sh...@debnath.net</a>&gt;&gt; wrote:
Hi there,

Building out a new cluster (for the first time) and package cloud pushed down 
2.1.0-1. I have gone through and installed all the necessary packages, 
configured riak through riak.conf and attempting to start the first node in the 
cluster. Unfortunately, even though the processes are running, riak-admin 
reports that no nodes are running.

root@riak-01:/etc/riak# riak-admin diag
Node is not running!
root@riak-01:/etc/riak# riak-admin status
Node is not running!

12538 ?        S      0:00 /usr/lib/riak/erts-5.10.3/bin/epmd -daemon
13799 ?        S      0:00 /usr/lib/riak/erts-5.10.3/bin/run_erl -daemon 
/tmp/riak// /var/log/riak exec /usr/sbin/riak console
13802 pts/2    Ssl+   0:26 /usr/lib/riak/erts-5.10.3/bin/beam.smp -scl false 
-sfwi 500 -P 256000 -e 256000 -Q 65536 -A 64 -K true -W w -zdbbl 32768 -- -root 
/usr/lib/riak -progname riak -- -home /var/lib/riak -- -boot 
/usr/lib/riak/releases/2.1.0/riak -config 
/var/lib/riak/generated.configs/app.2015.04.15.22.17.00.config -setcookie riak 
-name riak...@riak.prod.pryvy.com&lt;<a  rel="nofollow" href="mailto:riak...@riak.prod.pryvy.com">mailto:riak...@riak.prod.pryvy.com</a>&gt; -smp 
enable -vm_args /var/lib/riak/generated.configs/vm.2015.04.15.22.17.00.args -pa 
/usr/lib/riak/lib/basho-patches -- console
14047 ?        Ss     0:00 sh -s disksup
14050 ?        Ss     0:00 /usr/lib/riak/lib/os_mon-2.2.13/priv/bin/memsup
14052 ?        Ss     0:00 /usr/lib/riak/lib/os_mon-2.2.13/priv/bin/cpu_sup

The config states that it should be listening on:

listener.http.internal = 127.0.0.1:8098&lt;<a  rel="nofollow" href="http://127.0.0.1:8098">http://127.0.0.1:8098</a>&gt;
##listener.protobuf.internal = 10.IP.IP.IP:8087
listener.protobuf.internal = 127.0.0.1:8087&lt;<a  rel="nofollow" href="http://127.0.0.1:8087">http://127.0.0.1:8087</a>&gt;

I initially had it listening to our internal network IP, but as part of 
testing, switched to localhost to see if it resolves it but alas, that’s not 
the case.

In the log directory, files crash.log and error.log are empty and the 
console.log reports things are ok:

[snip]
2015-04-15 22:17:03.386 [info] &lt;0.7.0&gt; Application riak_kv started on node 
'riak...@riak.prod.pryvy.com&lt;mailto:'riak...@riak.prod.pryvy.com&gt;'
2015-04-15 22:17:03.402 [info] &lt;0.7.0&gt; Application merge_index started on node 
'riak...@riak.prod.pryvy.com&lt;mailto:'riak...@riak.prod.pryvy.com&gt;'
2015-04-15 22:17:03.406 [info] &lt;0.7.0&gt; Application riak_search started on node 
'riak...@riak.prod.pryvy.com&lt;mailto:'riak...@riak.prod.pryvy.com&gt;'
2015-04-15 22:17:03.421 [info] &lt;0.7.0&gt; Application ibrowse started on node 
'riak...@riak.prod.pryvy.com&lt;mailto:'riak...@riak.prod.pryvy.com&gt;'
2015-04-15 22:17:03.429 [info] &lt;0.7.0&gt; Application yokozuna started on node 
'riak...@riak.prod.pryvy.com&lt;mailto:'riak...@riak.prod.pryvy.com&gt;'
2015-04-15 22:17:03.434 [info] &lt;0.7.0&gt; Application cluster_info started on node 
'riak...@riak.prod.pryvy.com&lt;mailto:'riak...@riak.prod.pryvy.com&gt;'
2015-04-15 22:17:03.443 [info] 
&lt;0.192.0&gt;@riak_core_capability:process_capability_changes:555 New capability: 
{riak_control,member_info_version} = v1
2015-04-15 22:17:03.461 [info] &lt;0.7.0&gt; Application riak_control started on node 
'riak...@riak.prod.pryvy.com&lt;mailto:'riak...@riak.prod.pryvy.com&gt;'
2015-04-15 22:17:03.462 [info] &lt;0.7.0&gt; Application erlydtl started on node 
'riak...@riak.prod.pryvy.com&lt;mailto:'riak...@riak.prod.pryvy.com&gt;'
2015-04-15 22:17:03.485 [info] &lt;0.7.0&gt; Application riak_auth_mods started on 
node 'riak...@riak.prod.pryvy.com&lt;mailto:'riak...@riak.prod.pryvy.com&gt;'
2015-04-15 22:17:19.618 [info] 
&lt;0.369.0&gt;@riak_kv_entropy_manager:perhaps_log_throttle_change:853 Changing AAE 
throttle from undefined -&gt; 0 msec/key, based on maximum vnode mailbox size 0 
from 'riak...@riak.prod.pryvy.com&lt;mailto:'riak...@riak.prod.pryvy.com&gt;'
2015-04-15 22:17:19.672 [info] &lt;0.352.0&gt;@riak_core:wait_for_service:483 Wait 
complete for service riak_kv (16 seconds)

Full log @ <a  rel="nofollow" href="http://pastebin.com/8hb43MwP">http://pastebin.com/8hb43MwP</a>

Any help will be greatly appreciated.

Thanks,
Shawn


_______________________________________________
riak-users mailing list
riak-users@lists.basho.com&lt;<a  rel="nofollow" href="mailto:riak-users@lists.basho.com">mailto:riak-users@lists.basho.com</a>&gt;
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>




--
Jon Meredith
Chief Architect
Basho Technologies, Inc.
jmered...@basho.com&lt;<a  rel="nofollow" href="mailto:jmered...@basho.com">mailto:jmered...@basho.com</a>&gt;
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg16010.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#16011">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#16011">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright buttondisabled" accesskey="n" href="#">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg16006.html">Need help getting riak started</a></span> <span class="sender italic">Shawn Debnath</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg16007.html">Re: Need help getting riak started</a></span> <span class="sender italic">Shawn Debnath</span></li>
<li class="icons-email"><span class="subject"><a href="msg16008.html">Re: Need help getting riak started</a></span> <span class="sender italic">Jon Meredith</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg16009.html">Re: Need help getting riak started</a></span> <span class="sender italic">Shawn Debnath</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg16010.html">Re: Need help getting riak started</a></span> <span class="sender italic">Shawn Debnath</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Need help getting riak started</span> <span class="sender italic">Shawn Debnath</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Need help getting riak started">
<input type="hidden" name="msgid" value="39C1C706-73C9-4700-9EC2-B67FA73FE5EB@debnath.net">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg16011.html">
<input type="submit" value=" Shawn Debnath ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Need+help+getting+riak+started%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg16010.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="#" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">39C1C706-73C9-4700-9EC2-B67FA73FE5EB@debnath.net</li>
</ul>
</div>
</body>
</html>
