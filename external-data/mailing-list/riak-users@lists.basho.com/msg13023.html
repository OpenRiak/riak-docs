<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Hard time with Riak 2.0.0pre5 features</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="thrd6.html#13023" id="c">
<link rel="index" href="mail6.html#13023" id="i">
<link rel="prev" href="msg13021.html" id="p">
<link rel="next" href="msg13026.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg13023.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Hard+time+with+Riak+2.0.0pre5+features%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Hard time with Riak 2.0.0pre5 features</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Jordan+West%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Jordan West</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20131119" rel="nofollow">Tue, 19 Nov 2013 10:11:53 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>On Tue, Nov 19, 2013 at 7:33 AM, Valter Balegas &lt;bale...@gmail.com&gt; wrote:</pre><pre>

&gt;
&gt; Strong consistency:
&gt; How does one activate this? As i understand, either the pb or the http
&gt; clients do not accept the consistent property.
&gt;
&gt;
Using strong consistency in the Tech Preview is a two-step process. First,
turn on the feature in your riak.conf (the following command assumes you
are using a devrel):

for d in dev/dev*; do sed -e 's/## enable_consensus = true/enable_consensus
= true/' -i $d/etc/riak.conf; done

Then re(start) the cluster.

With the enable_consensus=true un-commented and the cluster running create
a strongly consistent bucket type:

riak-admin bucket-type create &lt;type name&gt; '{&quot;props&quot;: {&quot;consistent&quot;: true}}'
riak-admin bucket-type activate &lt;type name&gt;

You can create and activate the bucket type without having
enabled_consensus=true but  both must be done to work with strongly
consistent data.

Once that is done you can make requests, just like you would to eventually
consistent data in Riak, but the semantics will be different. For example,
if you make two PUT requests to the same key, w/ no vector clock*, the
second request will fail because the data already exists. More details on
semantics of strongly consistent requests can be found in this PR:
<a  rel="nofollow" href="https://github.com/basho/riak_kv/pull/710">https://github.com/basho/riak_kv/pull/710</a>

Hope that helps get you started,

Jordan

* in strong consistency, the &quot;vector clock&quot; is not really a vector clock.
its called such for familiarity, but like any real vector clock exposed to
the client, should be treated like an opaque context.


&gt; Details about my environment:
&gt; -I’m running Mac OSX 10.9
&gt; -Erlang R15B01
&gt; -Compiling riak “develop” branch, from basho github
&gt; -Compiling riak-erlang-client “master” branch, from basho github.
&gt; -recompiled the latest versions of the branches just before writing this
&gt; email.
&gt;
&gt;
&gt; Thank you for your help,
&gt; Valter
&gt;
&gt;
&gt;
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg13021.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="thrd6.html#13023">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="mail6.html#13023">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg13026.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg13020.html">hard time with Riak 2.0.0pre5 features</a></span> <span class="sender italic">Valter Balegas</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13018.html">Hard time with Riak 2.0.0pre5 features</a></span> <span class="sender italic">Valter Balegas</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13019.html">Re: Hard time with Riak 2.0.0pre5 features</a></span> <span class="sender italic">Sean Cribbs</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13021.html">Re: Hard time with Riak 2.0.0pre5 features</a></span> <span class="sender italic">Valter Balegas</span></li>
</ul></li>
<li class="icons-email tSliceCur"><span class="subject">Re: Hard time with Riak 2.0.0pre5 features</span> <span class="sender italic">Jordan West</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13026.html">Re: Hard time with Riak 2.0.0pre5 features</a></span> <span class="sender italic">Valter Balegas</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13027.html">Re: Hard time with Riak 2.0.0pre5 features</a></span> <span class="sender italic">Jordan West</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13030.html">Re: Hard time with Riak 2.0.0pre5 fea...</a></span> <span class="sender italic">Valter Balegas</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13033.html">Re: Hard time with Riak 2.0.0pre5...</a></span> <span class="sender italic">Jordan West</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13044.html">Re: Hard time with Riak 2.0.0...</a></span> <span class="sender italic">Valter Balegas</span></li>
<li class="icons-email"><span class="subject"><a href="msg13046.html">Re: Hard time with Riak 2.0.0...</a></span> <span class="sender italic">Jordan West</span></li>
<li class="icons-email"><span class="subject"><a href="msg13051.html">Re: Hard time with Riak 2.0.0...</a></span> <span class="sender italic">Valter Balegas</span></li>
<li class="icons-email"><span class="subject"><a href="msg13089.html">Re: Hard time with Riak 2.0.0...</a></span> <span class="sender italic">Valter Balegas</span></li>
<li class="icons-email"><span class="subject"><a href="msg13090.html">Re: Hard time with Riak 2.0.0...</a></span> <span class="sender italic">Mark Phillips</span></li>
<li class="icons-email"><span class="subject"><a href="msg13091.html">Re: Hard time with Riak 2.0.0...</a></span> <span class="sender italic">Valter Balegas</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Hard time with Riak 2.0.0pre5 features">
<input type="hidden" name="msgid" value="CANvRNdd8x3bQZbSpo45RfEc5GMbhZvKcKfESrVmvU=FuX+=WSQ@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg13023.html">
<input type="submit" value=" Jordan West ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Hard+time+with+Riak+2.0.0pre5+features%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg13021.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg13026.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CANvRNdd8x3bQZbSpo45RfEc5GMbhZvKcKfESrVmvU=FuX+=WSQ@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
