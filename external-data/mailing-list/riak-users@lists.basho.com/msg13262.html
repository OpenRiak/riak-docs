<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Error 500 while creating admin user in Riak-CS</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="thrd5.html#13262" id="c">
<link rel="index" href="mail5.html#13262" id="i">
<link rel="prev" href="msg13258.html" id="p">
<link rel="next" href="msg13259.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg13262.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Error+500+while+creating+admin+user+in+Riak%5C-CS%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Error 500 while creating admin user in Riak-CS</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Hector+Castro%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Hector Castro</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20131217" rel="nofollow">Tue, 17 Dec 2013 06:32:42 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hello Holger,

If you are modifying `cs_root_host` from the default, it must be set
to the fully qualified domain name (FQDN) of your Riak CS endpoint.
More details on this can be found in the Direct subsection of the
Proxy vs. Direct Riak CS documentation. [0]</pre><pre>

If that doesn't resolve the issue, please send over the Riak, Riak CS,
and Stanchion app.config files and any associated log output.

--
Hector

[0] 
<a  rel="nofollow" href="http://docs.basho.com/riakcs/latest/cookbooks/configuration/Configuring-Riak-CS/#Proxy-vs-Direct-Configuration">http://docs.basho.com/riakcs/latest/cookbooks/configuration/Configuring-Riak-CS/#Proxy-vs-Direct-Configuration</a>

On Tue, Dec 17, 2013 at 6:22 AM, Holger Amberg &lt;h...@ltx.cc&gt; wrote:
&gt; Hi,
&gt;
&gt; i am trying to install riak-cs according to your cookbook but i am now stuck
&gt; at the admin user creation. I checked all config files, all ips do match
&gt; against each other. All services responding to ping requests. I have no idea
&gt; at the moment, maybe someone is able to assist me.
&gt;
&gt; cat /etc/riak-cs/app.config | grep anonymous
&gt;               %% specifically dictates letting anonymous users to
&gt;               {anonymous_user_creation, true},
&gt;
&gt; riak ping
&gt; pong
&gt; riak-cs ping
&gt; pong
&gt; stanchion ping
&gt; pong
&gt;
&gt; curl -v -H 'Content-Type: application/json' -X POST
&gt; <a  rel="nofollow" href="http://***.22.***.70:8080/riak-cs/user">http://***.22.***.70:8080/riak-cs/user</a> --data
&gt; '{&quot;email&quot;:&quot;riakad...@storage.test.org“, &quot;name&quot;:&quot;admin&quot;}'
&gt; * About to connect() to ***.22.***.70 port 8080 (#0)
&gt; *   Trying ***.22.***.70...
&gt; * connected
&gt; * Connected to ***.22.***.70 (***.22.***.70) port 8080 (#0)
&gt;&gt; POST /riak-cs/user HTTP/1.1
&gt;&gt; User-Agent: curl/7.26.0
&gt;&gt; Host: ***.22.***.70:8080
&gt;&gt; Accept: */*
&gt;&gt; Content-Type: application/json
&gt;&gt; Content-Length: 58
&gt;&gt;
&gt; * upload completely sent off: 58 out of 58 bytes
&gt; * additional stuff not fine transfer.c:1037: 0 0
&gt; * HTTP 1.1 or later with persistent connection, pipelining supported
&gt; &lt; HTTP/1.1 500 Internal Server Error
&gt; &lt; Vary: Accept
&gt; &lt; Server: Riak CS
&gt; &lt; Location: <a  rel="nofollow" href="http://***.22.***.70:8080/riak-cs/user">http://***.22.***.70:8080/riak-cs/user</a>
&gt; &lt; Date: Tue, 17 Dec 2013 11:04:54 GMT
&gt; &lt; Content-Type: text/html
&gt; &lt; Content-Length: 170
&gt; &lt;
&gt; * Connection #0 to host ***.22.***.70 left intact
&gt; &lt;html&gt;&lt;head&gt;&lt;title&gt;500 Internal Server
&gt; Error&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;Internal Server Error&lt;/h1&gt;The server
&gt; encountered an error while processing this request&lt;/body&gt;&lt;/html&gt;* Closing
&gt; connection #0
&gt;
&gt; Error.log:
&gt;
&gt; 2013-12-17 12:12:02.160 [error] &lt;0.123.0&gt; Lager event handler
&gt; error_logger_lager_h exited with reason
&gt; {'EXIT',{{badmatch,[&quot;/riak-cs/user&quot;,{error,{error,function_clause,[{riak_cs_json,get,[{error,decode_failed},[{&lt;&lt;&quot;name&quot;&gt;&gt;,&lt;&lt;&quot;email&quot;&gt;&gt;}]],[{file,&quot;src/riak_cs_json.erl&quot;},{line,62}]},{riak_cs_wm_user,accept_json,2,[{file,&quot;src/riak_cs_wm_user.erl&quot;},{line,117}]},{webmachine_resource,resource_call,3,[{file,&quot;src/webmachine_resource.erl&quot;},{line,186}]},{webmachine_resource,do,3,[{file,&quot;src/webmachine_resource.erl&quot;},{line,142}]},{webmachine_decision_core,resource_call,1,[{file,&quot;src/webmachine_decisio...&quot;},...]},...]}},...]},…}}
&gt;
&gt; Thank you very much!
&gt;
&gt; --
&gt; Holger
&gt;
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;

_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg13258.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="thrd5.html#13262">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="mail5.html#13262">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg13259.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg13258.html">Error 500 while creating admin user in Riak-CS</a></span> <span class="sender italic">Holger Amberg</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Error 500 while creating admin user in Riak-CS</span> <span class="sender italic">Hector Castro</span></li>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Error 500 while creating admin user in Riak-CS">
<input type="hidden" name="msgid" value="CAAuGPqqBg2QvGB+X=gdJJcNbPB6PR0_a4LG_Edrjxoi8cAgYHA@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg13262.html">
<input type="submit" value=" Hector Castro ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Error+500+while+creating+admin+user+in+Riak%5C-CS%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg13258.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg13259.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CAAuGPqqBg2QvGB+X=gdJJcNbPB6PR0_a4LG_Edrjxoi8cAgYHA@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
