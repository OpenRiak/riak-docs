<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: How should I avoid words that are effectively stopwords in Riak	Search?</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#10621" id="c">
<link rel="index" href="maillist.html#10621" id="i">
<link rel="prev" href="msg10565.html" id="p">
<link rel="next" href="msg10568.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg10621.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+How+should+I+avoid+words+that+are+effectively+stopwords+in+Riak%09Search%5C%3F%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: How should I avoid words that are effectively stopwords in Riak	Search?</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Ryan+Zezeski%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Ryan Zezeski</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20130329" rel="nofollow">Fri, 29 Mar 2013 10:31:00 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Rob,

Riak Search doesn't have a traditional term-frequency count.  It has
something similar but it's an estimate and it is much more expensive than a
simple table lookup.  Even if it did have term-frequency it doesn't really
expose it to the outside world.  Not only that, but the standard analyzer
provides no way to specify additional stop words.  You'd have to keep track
of this data externally and do some pre-processing to remove stopwords
before.</pre><pre>

For the last 9 months I've been working on a project called Yokozuna with
the goal to replace Riak Search [1].  It's like Riak Search except much
better because the underlying engine is actually Solr/Lucene, not an
inferior clone written in Erlang.  In that case you could add new
stopwords, exploit query caching, and use newer features like LUCENE-4628
[2] to help combat high frequency terms.  You'd also have an easy way to
get frequency count for a given term to determine if you should make it a
stopword.

[1] <a  rel="nofollow" href="https://github.com/basho/yokozuna">https://github.com/basho/yokozuna</a>

[2] <a  rel="nofollow" href="https://issues.apache.org/jira/browse/LUCENE-4628">https://issues.apache.org/jira/browse/LUCENE-4628</a>


On Fri, Mar 22, 2013 at 2:21 PM, Rob Speer &lt;r...@luminoso.com&gt; wrote:

&gt; My company is starting to use Riak for document storage. I'm pretty happy
&gt; about how it has been working so far, but I see the messages of foreboding
&gt; and doom out there about Riak Search and I've encountered a problem myself.
&gt;
&gt; I can't really avoid using Riak Search, as full text indexing is a key
&gt; feature we need to provide. If Riak Search is suboptimal, so is basically
&gt; every other text index out there. We've just been burned by ElasticSearch's
&gt; ineffective load balancing (who would have guessed, consistent hashing is
&gt; kind of important).
&gt;
&gt; I know that performing searches in Riak Search that return many thousands
&gt; of documents is discouraged for performance reasons, and the developers
&gt; encourage removing stopwords to help with this. There's additionally, I
&gt; have seen, a hard limit on the number of documents that can be examined by
&gt; a search query; if any term matches more than 100,000 documents, the query
&gt; will return a too_many_results error (and, incidentally, things will get so
&gt; confused that, in the Python client, the *next* query will also fail with
&gt; an HTTP error 400).
&gt;
&gt; The question is, what should I actually do to avoid this case? I've
&gt; already removed the usual stopwords, but any particular set of documents
&gt; might have its own personal stopwords. For example, in a database of
&gt; millions of hotel reviews, the word 'hotel' could easily appear in more
&gt; than 100,000 documents.
&gt;
&gt; If we need to search for '5-star hotel', it's wasteful and probably
&gt; crash-prone to retrieve all the 'hotel' results. What I'd really like to do
&gt; is just search for '5-star', which because of IDF scoring will have about
&gt; the same effect. That requires knowing somehow that the word 'hotel'
&gt; appears in too many documents.
&gt;

&gt; Is there a way to determine, via Riak, which terms are overused so I can
&gt; remove them from search queries? Or do I need to keep track of this
&gt; entirely on the client end so I can avoid searching for those terms?
&gt;
&gt; Thanks,
&gt; -- Rob Speer
&gt;
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;
&gt;
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg10565.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#10621">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#10621">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg10568.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg10565.html">How should I avoid words that are effectively stopwords in Ri...</a></span> <span class="sender italic">Rob Speer</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: How should I avoid words that are effectively stopwo...</span> <span class="sender italic">Ryan Zezeski</span></li>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: How should I avoid words that are effectively stopwords in Riak	Search?">
<input type="hidden" name="msgid" value="CACZcpe=Qwiz4hJm-bw8YmQFnzB2M8oZ75uiq=DeHK3yk1_QaQQ@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg10621.html">
<input type="submit" value=" Ryan Zezeski ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+How+should+I+avoid+words+that+are+effectively+stopwords+in+Riak%09Search%5C%3F%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg10565.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg10568.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CACZcpe=Qwiz4hJm-bw8YmQFnzB2M8oZ75uiq=DeHK3yk1_QaQQ@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
