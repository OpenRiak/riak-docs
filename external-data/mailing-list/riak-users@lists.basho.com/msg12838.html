<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Fetching Object Info</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="thrd7.html#12838" id="c">
<link rel="index" href="mail7.html#12838" id="i">
<link rel="prev" href="msg12794.html" id="p">
<link rel="next" href="msg12841.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg12838.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Fetching+Object+Info%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Fetching Object Info</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Tom+Santero%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Tom Santero</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20131104" rel="nofollow">Mon, 04 Nov 2013 11:15:14 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi Daniele,

responses are inline.</pre><pre>

-Tom

On Tue, Oct 29, 2013 at 4:31 PM, Daniele Testa &lt;daniele.te...@gmail.com&gt;wrote:

&gt; Hi,
&gt;
&gt; I am looking around for different solutions for a good file-store and
&gt; the posibility to use Riak for that purpose.
&gt;
&gt; As far as I understand, if I have a 10 node cluster with 2 replicas,
&gt; an object will be stored on a total of 3 nodes.
&gt;

Assuming from the rest of your email, I assume &quot;2 replicas&quot; is a typo and
you mean't to say 3. If this is the case, then yes.


&gt;
&gt; If I query a node where the object is NOT stored, the node will act as
&gt; a proxy and fetch the object from one of the 3 resposible nodes and
&gt; send it to the client. I do not want this. I prefer that the client
&gt; fetches the object directly from the responsible node(s) without
&gt; wasting traffic between the Riak nodes.
&gt;

The node you hit with your query will act as a coordinating node, and a
request will be sent to all 3 nodes where your replica is stored. Whatever
your R quorum value is set to will determine how many responses the
coordinating node will wait for before acknowledging your request.

This model is at the core of Riak's promise to provide high-availability
and low latency requests. You cannot always assume one of your N nodes will
be available to even accept your request, so randomizing which node accepts
any given query is quite common for most Riak deployments and helps in
providing a predictable latency profile. Furthermore, while it might not be
intuitive, it turns out that redundant requests in distributed systems can
have the effect of decreased tail latencies. For a good primer of some of
the research in this field I point you toward a blog post written by Peter
Bailis [0].

More info about quorums are on the docs [1] and in a series blog posts [2]
written by John Daily

[0]
<a  rel="nofollow" href="http://www.bailis.org/blog/doing-redundant-work-to-speed-up-distributed-queries/">http://www.bailis.org/blog/doing-redundant-work-to-speed-up-distributed-queries/</a>
[1] <a  rel="nofollow" href="http://docs.basho.com/riak/latest/dev/advanced/cap-controls">http://docs.basho.com/riak/latest/dev/advanced/cap-controls</a>
[2] <a  rel="nofollow" href="http://basho.com/riaks-config-behaviors-epilogue/">http://basho.com/riaks-config-behaviors-epilogue/</a>


&gt;
&gt; Is there a way to make the node do a &quot;http location&quot; response back to
&gt; the client with a redirect to one of the responsible nodes, so that
&gt; the client can fetch direcly from the node where the object resides? I
&gt; assume not.
&gt;

No.


&gt;
&gt; However, I was hoping there is a way to query Riak about on which
&gt; nodes a specific object resides? Maybe there is a &quot;info request&quot; that
&gt; only returns metadata and location info about an object?
&gt;
&gt; Something like &quot;where is object X?&quot; and Riak responds with a list of
&gt; the 3 responsible nodes. Is this possible?
&gt;

The vnodes responsible for persisting a riak object are known as the
preference list (or preflist for short). Technically you _can_ attach to a
console and ask Riak for the preflist for any object, and then determine
which nodes that key currently resides on, but you don't want to do that.


&gt;
&gt; Regards,
&gt; Daniele
&gt;
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt;
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg12794.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="thrd7.html#12838">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="mail7.html#12838">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg12841.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg12794.html">Fetching Object Info</a></span> <span class="sender italic">Daniele Testa</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Fetching Object Info</span> <span class="sender italic">Tom Santero</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg12841.html">Re: Fetching Object Info</a></span> <span class="sender italic">Daniele Testa</span></li>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Fetching Object Info">
<input type="hidden" name="msgid" value="CAPFHwQB8gTqxE5cuWc3Vo-vWs7O=rKXBycUqV3HbbqZtoA3A=w@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg12838.html">
<input type="submit" value=" Tom Santero ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Fetching+Object+Info%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg12794.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg12841.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CAPFHwQB8gTqxE5cuWc3Vo-vWs7O=rKXBycUqV3HbbqZtoA3A=w@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
