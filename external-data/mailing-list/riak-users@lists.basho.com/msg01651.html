<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Data model for microblogging-like service</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#01651" id="c">
<link rel="index" href="maillist.html#01651" id="i">
<link rel="prev" href="msg01650.html" id="p">
<link rel="next" href="msg01656.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg01651.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Data+model+for+microblogging%5C-like+service%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Data model for microblogging-like service</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Alexander+Sicular%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Alexander Sicular</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20101129" rel="nofollow">Mon, 29 Nov 2010 09:31:41 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Inline:

On Mon, Nov 29, 2010 at 12:15, Gleb Peregud &lt;glebe...@gmail.com&gt; wrote:
&gt; Hello all
&gt;
&gt; I'm considering Riak as a datastore for a service, which has a part
&gt; which looks like a microblog - i.e. each user will have his own feed
&gt; of events, status updates, links and liked items from other feeds.
&gt; Events on a feed are usually pretty small (avg. 500 bytes).
&gt;
&gt; What is the best way to store user's stream in Riak?
&gt;
&gt; Operations I'm most interested in are the following:
&gt; - append to &quot;top&quot; of the feed</pre><pre>

There is no top or bottom in riak. The closest thing would be adding
links to a key via your  client of choice. Depending on how that
client operates those links would prepend or append to the list of
links and will be returned in that order. Keep in mind that links,
which are part of the &quot;header&quot; info must be written with the value of
your key. Write your links without your value you lose your value.

&gt; - get items from the feed with offset and limit (i.e. pagination)

There is no offset in riak. Limit could be implemented in a reduce
after a sort, perhaps.

&gt;
&gt; As far as I can see after reading documentation (one user -&gt; multiple
&gt; events) links are the way to deal with such task. Would this scale
&gt; well? Service has to be able to serve tens of thousands of users with
&gt; ever-growing feeds for each user. Deletions will be pretty seldom.

The consideration with links is how many per key. A few hundred or
even a thousand could work, more or less. But beyond that you need to
change your model. For instance a twitter user with 100k followers
would not translate well to one user with 100k links hanging off the
key. But a user with links to say their last 200 messages in a capped
collection, filo sort of way would work, managed by your application
of course.

My recommendation to everyone who asks is to implement redis as
middleware for key management and periodically persist those keys to
riak. Read the keys back (either redis or riak) and pass those keys to
a m/r to get your values back from riak.

Best,
Alexander

_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg01650.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#01651">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#01651">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg01656.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg01650.html">Data model for microblogging-like service</a></span> <span class="sender italic">Gleb Peregud</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Data model for microblogging-like service</span> <span class="sender italic">Alexander Sicular</span></li>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Data model for microblogging-like service">
<input type="hidden" name="msgid" value="AANLkTikfUDmXri36e_CictyOZgHAVAAqsjofV=NJR+y9@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg01651.html">
<input type="submit" value=" Alexander Sicular ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Data+model+for+microblogging%5C-like+service%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg01650.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg01656.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">AANLkTikfUDmXri36e_CictyOZgHAVAAqsjofV=NJR+y9@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
