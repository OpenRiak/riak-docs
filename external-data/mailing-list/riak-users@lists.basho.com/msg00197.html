<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: setting default bucket props</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#00197" id="c">
<link rel="index" href="maillist.html#00197" id="i">
<link rel="prev" href="msg00195.html" id="p">
<link rel="next" href="msg00200.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg00197.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+setting+default+bucket+props%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: setting default bucket props</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Sean+Cribbs%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Sean Cribbs</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20100428" rel="nofollow">Wed, 28 Apr 2010 08:40:26 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>We used to have a function that would merge the values from app.config with the 
hardcoded defaults for bucket properties.  I've opened an issue on bugzilla for 
this problem (Bug 123). In the meantime, remove the stuff you've set, start up 
the console, and run this in the Erlang shell:</pre><pre>

application:get_all_env(riak_core).

From that output, copy the default_bucket_props and modify what you want.

Sean Cribbs &lt;s...@basho.com&gt;
Developer Advocate
Basho Technologies, Inc.
<a  rel="nofollow" href="http://basho.com/">http://basho.com/</a>

On Apr 28, 2010, at 10:57 AM, Matthew Pflueger wrote:

&gt; Forgot to say I'm using riak-0.10.1...
&gt; 
&gt; --Matthew
&gt; 
&gt; 
&gt; 
&gt; On Wed, Apr 28, 2010 at 10:56, Matthew Pflueger
&gt; &lt;matthew.pflue...@gmail.com&gt; wrote:
&gt;&gt; I am trying to set the default n_val in my app.config.  I'm not
&gt;&gt; getting any errors on startup but when a client tries to put some data
&gt;&gt; a process crashes eventually causing a time-out on the client side...
&gt;&gt; 
&gt;&gt; app.config part:
&gt;&gt; 
&gt;&gt; [
&gt;&gt;  %% Riak Core config
&gt;&gt;  {riak_core, [
&gt;&gt;              %% Default location of ringstate
&gt;&gt;              {ring_state_dir, &quot;data/ring&quot;},
&gt;&gt; 
&gt;&gt;              %% Default bucket props
&gt;&gt;              {default_bucket_props, [{n_val, 1}]},
&gt;&gt; 
&gt;&gt; 
&gt;&gt; I'm seeing the following in the logs:
&gt;&gt; 
&gt;&gt; sasl-error.log:
&gt;&gt; 
&gt;&gt; =CRASH REPORT==== 28-Apr-2010::15:36:22 ===
&gt;&gt;  crasher:
&gt;&gt;    initial call: riak_kv_put_fsm:init/1
&gt;&gt;    pid: &lt;0.505.0&gt;
&gt;&gt;    registered_name: []
&gt;&gt;    exception exit: {undef,[{riak_core_bucket,defaults,[]},
&gt;&gt;                            {riak_core_util,chash_key,1},
&gt;&gt;                            {riak_kv_put_fsm,initialize,2},
&gt;&gt;                            {gen_fsm,handle_msg,7},
&gt;&gt;                            {proc_lib,init_p_do_apply,3}]}
&gt;&gt;      in function  gen_fsm:terminate/7
&gt;&gt;    ancestors: [&lt;0.504.0&gt;]
&gt;&gt;    messages: []
&gt;&gt;    links: []
&gt;&gt;    dictionary: []
&gt;&gt;    trap_exit: false
&gt;&gt;    status: running
&gt;&gt;    heap_size: 1597
&gt;&gt;    stack_size: 24
&gt;&gt;    reductions: 475
&gt;&gt;  neighbours:
&gt;&gt; 
&gt;&gt; erlang.log.1
&gt;&gt; 
&gt;&gt; =ERROR REPORT==== 28-Apr-2010::15:36:22 ===
&gt;&gt; ** State machine &lt;0.503.0&gt; terminating
&gt;&gt; ** Last event in was timeout
&gt;&gt; ** When State == initialize
&gt;&gt; **      Data  == {state,
&gt;&gt;                     {r_object,&lt;&lt;&quot;profiles&quot;&gt;&gt;,&lt;&lt;&quot;DymvhHkDplIEmpowMdQ35Q&quot;&gt;&gt;,
&gt;&gt;                         [{r_content,
&gt;&gt;                              {dict,0,16,16,8,80,48,
&gt;&gt;                                  {[],[],[],[],[],[],[],[],[],[],[],[],[],[],
&gt;&gt;                                   [],[]},
&gt;&gt;                                  {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],
&gt;&gt;                                    [],[]}}},
&gt;&gt;                              &lt;&lt;&gt;&gt;}],
&gt;&gt;                         [{&lt;&lt;31,41,45,38&gt;&gt;,{1,63439684582}}],
&gt;&gt;                         {dict,1,16,16,8,80,48,
&gt;&gt;                             
&gt;&gt; {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
&gt;&gt;                             {{[],[],[],[],[],[],[],[],[],[],
&gt;&gt;                               [[&lt;&lt;&quot;content-type&quot;&gt;&gt;,97,112,112,108,105,99,97,
&gt;&gt;                                 116,105,111,110,47,111,99,116,101,116,45,115,
&gt;&gt;                                 116,114,101,97,109]],
&gt;&gt;                               [],[],[],[],[]}}},
&gt;&gt;                         &lt;&lt;4,155,69,121,249,86,125,168,81,201,133,2,65,248,
&gt;&gt;                           238,53,23,1,40,242,226,220,30,37,113,164,204,34,
&gt;&gt;                           199,41,155,198,77,100,101,234,83,233,181,96,207,10,
&gt;&gt;                           ...lots more data...
&gt;&gt; ** Reason for termination =
&gt;&gt; ** {'function not exported',[{riak_core_bucket,defaults,[]},
&gt;&gt;                             {riak_core_util,chash_key,1},
&gt;&gt;                             {riak_kv_put_fsm,initialize,2},
&gt;&gt;                             {gen_fsm,handle_msg,7},
&gt;&gt;                             {proc_lib,init_p_do_apply,3}]}
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; --Matthew
&gt;&gt; 
&gt; 
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>

</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg00195.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#00197">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#00197">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg00200.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg00194.html">Re: setting default bucket props</a></span> <span class="sender italic">Matthew Pflueger</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00195.html">Re: setting default bucket props</a></span> <span class="sender italic">Matthew Pflueger</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: setting default bucket props</span> <span class="sender italic">Sean Cribbs</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00200.html">Re: setting default bucket props</a></span> <span class="sender italic">Matthew Pflueger</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00201.html">Re: setting default bucket props</a></span> <span class="sender italic">Justin Sheehy</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00202.html">Re: setting default bucket props</a></span> <span class="sender italic">Matthew Pflueger</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00203.html">Re: setting default bucket prop...</a></span> <span class="sender italic">Justin Sheehy</span></li>
<li class="icons-email"><span class="subject"><a href="msg00204.html">Re: setting default bucket prop...</a></span> <span class="sender italic">Sean Cribbs</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00205.html">Re: setting default bucket ...</a></span> <span class="sender italic">Matthew Pflueger</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: setting default bucket props">
<input type="hidden" name="msgid" value="58841DC9-431A-4CA4-8681-A07662BA81F6@basho.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg00197.html">
<input type="submit" value=" Sean Cribbs ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+setting+default+bucket+props%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg00195.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg00200.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">58841DC9-431A-4CA4-8681-A07662BA81F6@basho.com</li>
</ul>
</div>
</body>
</html>
