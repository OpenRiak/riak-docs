<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Advices for cluster optimal configuration</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#02578" id="c">
<link rel="index" href="maillist.html#02578" id="i">
<link rel="prev" href="msg02577.html" id="p">
<link rel="next" href="msg02579.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg02578.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Advices+for+cluster+optimal+configuration%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Advices for cluster optimal configuration</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Jeremiah+Peschka%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Jeremiah Peschka</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20110308" rel="nofollow">Tue, 08 Mar 2011 09:36:15 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>There are a few things that you can do to speed up your load. When you're 
writing your data, you can set both W and DW to 0 (as long as you have a way to 
check for errors). This will shave a bit of time off of each write because 
you'll be throwing writes against the database and hoping that they stick. You 
can also set the returnbody to false. Returnbody defaults to true IIRC. When 
returnbody enabled, Riak will return the object you wrote and also include the 
Riak specific info (vclock, etc). I don't care about these things when I'm 
doing a bulk load, so I turn that sort of thing off.</pre><pre>

Depending on the type of querying you're doing, you can adjust the JavaScript 
VM settings. For example, if you aren't doing any reduce phases in your 
queries, then you can set the number of reduce VMs to 0. Since you're probably 
only doing key lookups, you can probably kill off all of the JavaScript VMs.

I suspect somebody smarter will have better input and will correct me, but 
that's my 2 cents worth. 
-- 
Jeremiah Peschka
Microsoft SQL Server MVP
MCITP: Database Developer, DBA
On Tuesday, March 8, 2011 at 8:34 AM, Thibault Dory wrote: 
&gt; Hello,
&gt; 
&gt; I'm benchmarking various noSQL databases (see www.nosqlbenchmarking.com for 
&gt; current results and configurations used) for my master's thesis and I'm going 
&gt; to apply this benchmark on bigger clusters. Indeed for the moment I have only 
&gt; used a small cluster of 8 servers with a very small data set (20000 articles 
&gt; from Wikipedia) to conduct those tests. 
&gt; 
&gt; I will use up to 100 servers (2Gb, 4 CPU, 80Gb hdd) from the Rackspace cloud 
&gt; and the new data set is the entire English version of Wikipedia. Each article 
&gt; is store as a single document with a unique ID based on a integer, you can 
&gt; see the implementation here : 
&gt; <a  rel="nofollow" href="https://github.com/toflames/Wikipedia-noSQL-Benchmark/blob/master/src/implementations/riakDB.java">https://github.com/toflames/Wikipedia-noSQL-Benchmark/blob/master/src/implementations/riakDB.java</a>
&gt;  and the benchmark methodology here : 
&gt; <a  rel="nofollow" href="http://www.slideshare.net/ThibaultDory/a-new-methodology-for-large">http://www.slideshare.net/ThibaultDory/a-new-methodology-for-large</a> 
&gt; 
&gt; I would like to know if some of you have advice on how I could take the best 
&gt; out of Riak for this specific use case and on this kind of server. For 
&gt; example I would like to know if there are some memory/cache tunings that 
&gt; could be useful to match this server size. 
&gt; 
&gt; Any other input or critic is welcome,
&gt; 
&gt; Thank you,
&gt; 
&gt; 
&gt; Thibault Dory 
&gt; _______________________________________________
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
&gt; 
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg02577.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#02578">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#02578">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg02579.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg02577.html">Advices for cluster optimal configuration</a></span> <span class="sender italic">Thibault Dory</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Advices for cluster optimal configuration</span> <span class="sender italic">Jeremiah Peschka</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg02579.html">Re: Advices for cluster optimal configuration</a></span> <span class="sender italic">Thibault Dory</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg02580.html">Re: Advices for cluster optimal configurati...</a></span> <span class="sender italic">Alexander Sicular</span></li>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Advices for cluster optimal configuration">
<input type="hidden" name="msgid" value="76A3BAFEB38941D7B85A6E5ABF5A4C91@gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg02578.html">
<input type="submit" value=" Jeremiah Peschka ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Advices+for+cluster+optimal+configuration%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg02577.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg02579.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">76A3BAFEB38941D7B85A6E5ABF5A4C91@gmail.com</li>
</ul>
</div>
</body>
</html>
