<!DOCTYPE html>
<html lang="en">
<head>
<title>Deciphering Key Filter Errors</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#02531" id="c">
<link rel="index" href="maillist.html#02531" id="i">
<link rel="prev" href="msg02526.html" id="p">
<link rel="next" href="msg02546.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg02531.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Deciphering+Key+Filter+Errors%22&amp;o=newest" rel="nofollow"><span itemprop="name">Deciphering Key Filter Errors</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Jason+J.+W.+Williams%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Jason J. W. Williams</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20110302" rel="nofollow">Wed, 02 Mar 2011 22:55:20 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi,

I'm experimenting using key filters to implement indexes. My approach
is for each data key in bucket A, to create a new empty key in a
dedicated index bucket where the original key name and value of the
indexed field is encoded in the key name for a new index key.</pre><pre>

Data key looks like this:

Bucket - riak_perf_test
Key - ccode_&lt;unique_6_digit_ID&gt; : {&quot;redeemed_count&quot;: 23 }

For each data key created, an index key is created:

Bucket - idx=redeemed_count=ccode
Key - ccode/23

(in both keys 23 changes on a per-key basis based on what
&quot;redeemed_count&quot; is set to)


My goal is to be able to do a key filtered Map Reduce job on
idx=redeemed_count=ccode that generates a list of all data key names
with a redeemed_count &lt; 50.

The job (using curl) is here: <a  rel="nofollow" href="https://gist.github.com/852451">https://gist.github.com/852451</a>

It errors out almost immediately in sasl-error.log
(<a  rel="nofollow" href="https://gist.github.com/852450">https://gist.github.com/852450</a>), but the request doesn't immediately
error out to the client. The only error the client sees is an eventual
timeout error.

So my question is, what is the error in sasl-error.log telling me is
wrong with my job construction? And also, why is there only a timeout
error generated to the client instead of a map_reduce_error as I've
seen for non-key filtered jobs?

Thank you in advance for any help. I greatly appreciate it.

-J

_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg02526.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#02531">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#02531">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg02546.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email tSliceCur"><span class="subject">Deciphering Key Filter Errors</span> <span class="sender italic">Jason J. W. Williams</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg02546.html">Re: Deciphering Key Filter Errors</a></span> <span class="sender italic">Jason J. W. Williams</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg02550.html">Re: Deciphering Key Filter Errors</a></span> <span class="sender italic">Dan Reverri</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg02551.html">Re: Deciphering Key Filter Errors</a></span> <span class="sender italic">Dan Reverri</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg02553.html">Re: Deciphering Key Filter Errors</a></span> <span class="sender italic">Jason J. W. Williams</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg02554.html">Re: Deciphering Key Filter Erro...</a></span> <span class="sender italic">Dan Reverri</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg02555.html">Re: Deciphering Key Filter ...</a></span> <span class="sender italic">Jason J. W. Williams</span></li>
</ul></li>
</ul></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg02552.html">Re: Deciphering Key Filter Errors</a></span> <span class="sender italic">Jason J. W. Williams</span></li>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Deciphering Key Filter Errors">
<input type="hidden" name="msgid" value="AANLkTikjhEgwurmBWW3LMJzfv4XLduQCQcE3cZGHXB6K@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg02531.html">
<input type="submit" value=" Jason J. W. Williams ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Deciphering+Key+Filter+Errors%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg02526.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg02546.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">AANLkTikjhEgwurmBWW3LMJzfv4XLduQCQcE3cZGHXB6K@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
