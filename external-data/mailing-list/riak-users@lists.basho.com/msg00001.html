<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Authentication and an example deploy script?</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#00001" id="c">
<link rel="index" href="maillist.html#00001" id="i">
<link rel="prev" href="msg00000.html" id="p">
<link rel="next" href="msg00002.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg00001.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Authentication+and+an+example+deploy+script%5C%3F%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Authentication and an example deploy script?</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Orlin+Bozhinov%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Orlin Bozhinov</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20100412" rel="nofollow">Mon, 12 Apr 2010 01:59:43 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<tt>Wondering if Basho doesn't already have cookbooks / recipes for 
</tt><tt>deploying with Chef...  I'm facing the exact same scenario.  A Heroku 
</tt><tt>web app + Riak on EC2.  This is the only starting point I've found 
</tt><tt><a  rel="nofollow" href="http://github.com/damm/ey-cloud-recipes/tree/aeb2941c3e7ad03dba7104bc6530777b90c2d71d/cookbooks/riak">http://github.com/damm/ey-cloud-recipes/tree/aeb2941c3e7ad03dba7104bc6530777b90c2d71d/cookbooks/riak</a> 
</tt><tt>so far.
</tt><pre style="margin: 0em;">

</pre><tt>Nginx seems like the usual choice for proxying to Riak.  Is this 
</tt><tt><a  rel="nofollow" href="http://rigelgroupllc.com/wp/?s=nginx">http://rigelgroupllc.com/wp/?s=nginx</a> the best practice?
</tt><pre style="margin: 0em;"></pre><pre>

</pre><tt>I like the idea of unauthenticated clients bypassing the the web site / 
</tt><tt>api (where appropriate).  It could mean a lighter Heroku bill.  However, 
</tt><tt>one probably wouldn't want to open up all the data.  So maybe with a 
</tt><tt>whitelist (or blacklist) restricting what is ok for the world to GET.  
</tt><tt>This thread <a  rel="nofollow" href="http://riak.markmail.org/thread/fzob4dkfm7ebx65g">http://riak.markmail.org/thread/fzob4dkfm7ebx65g</a> comes to mind.
</tt><pre style="margin: 0em;">

</pre><tt>Whatever the method for controlling access at the bucket level though, a 
</tt><tt>modeling question comes to mind...  Do you recommend spitting certain 
</tt><tt>buckets into public and private counterparts?  Perhaps the data model 
</tt><tt>would be the same - with documents going into the public bucket only if 
</tt><tt>shared.  What are the usage implications from an authenticated 
</tt><tt>application's point of view?  Would it be easy to treat both buckets &quot;as 
</tt><tt>one&quot; when accessing through a client library - Ripple in my case.
</tt><pre style="margin: 0em;">

</pre><tt>Sharing is such a common pattern it could make a really useful mixin.  
</tt><tt>Of-course it's not always black &amp; white.  Sometimes it's both.  Some 
</tt><tt>parts of the document may have to remain private even if its &quot;shared&quot;.  
</tt><tt>So now we are talking about having the same document in both buckets 
</tt><tt>(public 1:1 private) and a property :whatever, :shareable =&gt; true #(for 
</tt><tt>example).  From this mixed scenario pov, maybe it makes sense to have 
</tt><tt>all the data in the private bucket with the shared properties copied to 
</tt><tt>the public bucket.  So linking &amp; map/reduce would refer to the private 
</tt><tt>(otherwise solo) bucket without any special cases.  Does such a thing 
</tt><tt>make sense to have in Ripple?  Perhaps sharing is a use case for the 
</tt><tt>upcoming triggers?
</tt><pre style="margin: 0em;">

</pre><tt>Well, a bit of diversion from authentication &amp; ACLs, but I thought an 
</tt><tt>idea worth sharing in this context.
</tt><pre style="margin: 0em;">

Orlin


Tyler Smart wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
Thank you Sean and Preston!

</pre><tt>I will look into client certificate verification as the Riak server 
</tt><tt>will be on EC/2 but our application server is still Heroku. I saw over 
</tt><tt>at 37 signals that they had some cookbooks for chef that used ec/2 and 
</tt><tt>a bunch of others. I am wondering If I can modify their cookbooks to 
</tt><tt>deploy Riak (maybe the EC-2 one)
</tt><pre style="margin: 0em;">

Tyler

</pre><tt>On Sun, Apr 11, 2010 at 8:04 AM, Sean Cribbs &lt;s...@basho.com 
</tt><tt>&lt;<a  rel="nofollow" href="mailto:s...@basho.com">mailto:s...@basho.com</a>&gt;&gt; wrote:
</tt><pre style="margin: 0em;">

    As Preston says, we recommend putting a web-server in front of
    your Riak machine when you need authentication.  If you're using
    SSL to connect, you could also use client certificate
    verification.  In general, however, it would be easiest to put
    your Riak machines and your application machines in the same EC2
    security group.

    Sean Cribbs &lt;s...@basho.com &lt;<a  rel="nofollow" href="mailto:s...@basho.com">mailto:s...@basho.com</a>&gt;&gt;
    Developer Advocate
    Basho Technologies, Inc.
    <a  rel="nofollow" href="http://basho.com/">http://basho.com/</a>

    On Apr 11, 2010, at 2:33 AM, Preston Marshall wrote:

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
    I haven't seen any authentication in Riak, they might expect you
    to to throw a web server or something similar in front of it to
    handle authentication.  I'm sure Nginx can more than handle the
    job of authentication.

    On Sun, Apr 11, 2010 at 1:30 AM, Tyler Smart
    &lt;tyleresm...@gmail.com &lt;<a  rel="nofollow" href="mailto:tyleresm...@gmail.com">mailto:tyleresm...@gmail.com</a>&gt;&gt; wrote:

        Hi Riak users!

        As a newbie, I am wondering what the best way to authenticate
        is? Let's say I have a eroku server that will connect to the
        riak server over https. How should the Riak node handle
        authentication such that only the heroku server can access
        the data? Also, if we are deploying onto Amazon, do you guys
        have any pre-built chef scripts I could study to get up to
        speed with Riak deploys?

        Sincerely,
        Tyler

        _______________________________________________
        riak-users mailing list
        riak-users@lists.basho.com &lt;<a  rel="nofollow" href="mailto:riak-users@lists.basho.com">mailto:riak-users@lists.basho.com</a>&gt;
        <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>


    _______________________________________________
    riak-users mailing list
    riak-users@lists.basho.com &lt;<a  rel="nofollow" href="mailto:riak-users@lists.basho.com">mailto:riak-users@lists.basho.com</a>&gt;
    <a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre></blockquote><pre style="margin: 0em;">


------------------------------------------------------------------------

_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre><tt>   
</tt></blockquote><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg00000.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#00001">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#00001">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg00002.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg00000.html">Re: Authentication and an example deploy script?</a></span> <span class="sender italic">Tyler Smart</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Authentication and an example deploy script?</span> <span class="sender italic">Orlin Bozhinov</span></li>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Authentication and an example deploy script?">
<input type="hidden" name="msgid" value="4BC2DE8F.2030401@soundsapiens.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg00001.html">
<input type="submit" value=" Orlin Bozhinov ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Authentication+and+an+example+deploy+script%5C%3F%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg00000.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg00002.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">4BC2DE8F.2030401@soundsapiens.com</li>
</ul>
</div>
</body>
</html>
