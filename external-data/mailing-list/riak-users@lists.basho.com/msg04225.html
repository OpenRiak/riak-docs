<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: In-Memory Performance</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#04225" id="c">
<link rel="index" href="maillist.html#04225" id="i">
<link rel="prev" href="msg04220.html" id="p">
<link rel="next" href="msg04232.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg04225.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+In%5C-Memory+Performance%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: In-Memory Performance</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Ryan+Zezeski%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Ryan Zezeski</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20110804" rel="nofollow">Thu, 04 Aug 2011 09:33:10 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>On Thu, Aug 4, 2011 at 11:13 AM, Les Mikesell &lt;lesmikes...@gmail.com&gt; wrote:
&gt;
&gt;
&gt; I can understand a performance difference in reads, considering the quorum
&gt; strategy, but the timing mentioned involved writes.  I don't know the
&gt; membase internals but thought the claim of expanding the cluster by adding
&gt; nodes meant they probably used a distribution strategy similar to riak.
&gt;
&gt; Another recent message mentioned wanting a 'riak wishlist' somewhere. Some
&gt; of mine would be a membase-like client that knows about multiple nodes for
&gt; auto-failover, and the optional addition of some special master-slave nodes
&gt; that could be used for atomic operations without needing to use a completely
&gt; different client library for them.
&gt;
&gt;
Same thing applies for writes in that a coordinator is spun up for each
incoming write, sends async requests, and then waits for W responses.  In
the case of membases's master/slave it can just write to master and at some
point the data will get pushed to slave(s).  This is why I believe the more
apple/apple comparison would be membase w/ 3 replicas and 1:N replication
strategy.</pre><pre>

If you read the links I referenced you'll see that membase does do something
similar with regards to mapping keys to physical servers.

* vbucket ~ partition on ring
* hash fun to vbucket ~ hash fun to partition
* table of vbuckets to node (physical server) ~ ring/preflist of vnodes to
partitions
* 1 node to many vbuckets ~ 1 node to many vnodes

However, the fact that membase does a similar indirect mapping of keys to
ownership doesn't necessarily mean it replicates by default.  Like I said,
reading Dustin's post made me feel like replication is something to have to
configure.

As for your wish list.  The first one is a form of smart client which would
essentially participate in gossip of the ring in order to determine which
nodes to contact.  Currently we just recommend people put all the Riak nodes
behind a load balancer because any node can service any request.  A smart
client is not out of the question but it's not necessarily as easy as it
seems to get right, or so I've been told by people smarter than me.

I'm not sure I follow you on the second thing.  Riak strives for every node
to be completely equal.  I.e. there is no such thing as a master because
when you introduce special nodes you increase chance for failure.  In Riak
all nodes can service all requests; which is in spirit with it's high
availability focus.

-Ryan
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg04220.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#04225">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#04225">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg04232.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg04185.html">Re: In-Memory Performance</a></span> <span class="sender italic">Matt Savona</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg04186.html">Re: In-Memory Performance</a></span> <span class="sender italic">Eric Moritz</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg04187.html">Re: In-Memory Performance</a></span> <span class="sender italic">Matt Savona</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg04188.html">Re: In-Memory Performance</a></span> <span class="sender italic">Eric Moritz</span></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg04189.html">Re: In-Memory Performance</a></span> <span class="sender italic">Ryan Zezeski</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg04202.html">Re: In-Memory Performance</a></span> <span class="sender italic">Les Mikesell</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg04215.html">Re: In-Memory Performance</a></span> <span class="sender italic">Ryan Zezeski</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg04218.html">Re: In-Memory Performance</a></span> <span class="sender italic">Matt Savona</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg04221.html">Re: In-Memory Performance</a></span> <span class="sender italic">Les Mikesell</span></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg04220.html">Re: In-Memory Performance</a></span> <span class="sender italic">Les Mikesell</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: In-Memory Performance</span> <span class="sender italic">Ryan Zezeski</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg04232.html">Re: In-Memory Performance</a></span> <span class="sender italic">Les Mikesell</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: In-Memory Performance">
<input type="hidden" name="msgid" value="CACZcpe=xWTNAe338qCGzhHXW4nEiPypgycVLVCfuFaijuoZotA@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg04225.html">
<input type="submit" value=" Ryan Zezeski ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+In%5C-Memory+Performance%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg04220.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg04232.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CACZcpe=xWTNAe338qCGzhHXW4nEiPypgycVLVCfuFaijuoZotA@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
