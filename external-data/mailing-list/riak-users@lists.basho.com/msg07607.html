<!DOCTYPE html>
<html lang="en">
<head>
<title>How to tell when all riak_core vnodes are up?</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#07607" id="c">
<link rel="index" href="maillist.html#07607" id="i">
<link rel="prev" href="msg07606.html" id="p">
<link rel="next" href="msg07654.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg07607.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22How+to+tell+when+all+riak_core+vnodes+are+up%5C%3F%22&amp;o=newest" rel="nofollow"><span itemprop="name">How to tell when all riak_core vnodes are up?</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Will+Hutchinson%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Will Hutchinson</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20120604" rel="nofollow">Mon, 04 Jun 2012 12:51:45 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi, we are using riak_core and our own custom vnode type (call it foo) that
implements the riak_core_vnode behaviour.</pre><pre>

We are seeing the following:

1) We start up in our supervisor a processes called foo_vnode_master that
uses the riak_core_vnode_master module
2) After the supervisor has started all its processes, in our application's
start we call riak_core:register(foo, [{vnode_module, foo_vnode}])
3) Shortly after that I need to send an asynchronous command to all of our
32 vnodes

The problem: Not all of the vnode processes have been created and
initialized yet.

How can I reliably tell whether all of our vnode processes have been
created? I've tried a variety of riak_core_status and riak_core_ring
functions and not found anything that seems to return what I need.

The best I can see at this point is to
call riak_core_vnode_manager:all_vnodes(foo_vnode) until I get back a list
of length 32.

Thanks,
Will Hutchinson

-- 
 

*CONFIDENTIALITY NOTICE*

THE INFORMATION CONTAINED IN THIS COMMUNICATION IS INTENDED FOR THE NAMED 
RECEIVER ONLY. THE TRANSMISSION MAY CONTAIN PRIVILEGED AND CONFIDENTIAL 
MATERIAL. IF YOU ARE NOT THE NAMED RECIPIENT, PLEASE BE ADVISED THAT ANY 
USE, DISSEMINATION OR UNAUTHORIZED COPYING OF THE MATERIAL IS STRICTLY 
PROHIBITED. IF YOU HAVE RECEIVED THIS TRANSMISSION IN ERROR, PLEASE NOTIFY 
supp...@trueex.com AND DESTROY THE RECEIVED COPY. THANK YOU.
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg07606.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#07607">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#07607">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg07654.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email tSliceCur"><span class="subject">How to tell when all riak_core vnodes are up?</span> <span class="sender italic">Will Hutchinson</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg07654.html">Re: How to tell when all riak_core vnodes are u...</a></span> <span class="sender italic">Scott Lystig Fritchie</span></li>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="How to tell when all riak_core vnodes are up?">
<input type="hidden" name="msgid" value="CAGi2n5DkfMeih+GDzMt4TOHqCa1sYCuGxQuuhT7Typ8MzRntzQ@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg07607.html">
<input type="submit" value=" Will Hutchinson ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22How+to+tell+when+all+riak_core+vnodes+are+up%5C%3F%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg07606.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg07654.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CAGi2n5DkfMeih+GDzMt4TOHqCa1sYCuGxQuuhT7Typ8MzRntzQ@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
