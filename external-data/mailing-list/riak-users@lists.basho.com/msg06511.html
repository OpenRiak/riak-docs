<!DOCTYPE html>
<html lang="en">
<head>
<title>RE: Operations: Commodity hardware OK, or does Riak need ECC memory?</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#06511" id="c">
<link rel="index" href="maillist.html#06511" id="i">
<link rel="prev" href="msg06510.html" id="p">
<link rel="next" href="msg06512.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg06511.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22RE%5C%3A+Operations%5C%3A+Commodity+hardware+OK%2C+or+does+Riak+need+ECC+memory%5C%3F%22&amp;o=newest" rel="nofollow"><span itemprop="name">RE: Operations: Commodity hardware OK, or does Riak need ECC memory?</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Gary+Smith%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Gary Smith</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20120202" rel="nofollow">Thu, 02 Feb 2012 12:58:40 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>&gt; However, I've been seeing advice that we shouldn't use this because its not
&gt; ECC memory.  That &quot;memory errors are a lot bigger than people think&quot;, and
&gt; that this can cause data to rot over time.
&gt; </pre><pre>

Why, super redundant servers themselves really negate the n=whatever ideology.  
The reason why I got into wanting to use RIAK a long time ago was the fact that 
it was about using whatever was laying around the server room (decent but not 
best hardware).  


&gt; So, my question is this:  When you issue a read request to Riak, and the
&gt; data is stored on 3 nodes, does any kind of a error check code ever get
&gt; generated and compared?
&gt; 
&gt; Suppose I had an address record on three nodes, but at the moment the record
&gt; was being written to one of the nodes a cosmic ray flipped a bit and instead
&gt; of it being 123 Main street, the address read 223 main street.
&gt; 

The write verification should take care of this.  IIRC that the has is 
generated in response to the data being written to the disk.  Those would 
differ.  But this may have changed.

&gt; When I read that record, and all three nodes respond, will I simply get the
&gt; result of whichever node is festest?
&gt; 
&gt; If, when I read, I say that R=2 and so 2 nodes have to respond, is the
&gt; result from the two nodes compared?
&gt; 
&gt; I know the vector clock will be compared to make sure to return the latest
&gt; record, but in this situation the vector clocks would be the same even
&gt; though the data isn't.
&gt; 
&gt; Assuming there's no hash generated from the data that would catch or correct
&gt; his type of error, I'm interested in hearing from people with largish
&gt; clusters and knowing whether you use ECC RAM on them or not.
&gt; 
&gt; Basically looking for some advice from people with more experience, as the
&gt; ones advocating ECC are pretty fervent but the cost difference is
&gt; significant.
&gt; 

Personally, I think that the servers that you are looking at are more than 
fine.  Others may disagree and cite things like &quot;production data&quot;, etc.  Those 
that believe that ECC is the save all also forget to tell you that even data 
states on disk can in theory change over time.  Complex scenarios could say 
that what if 2 cosmic rays happened to hit 2 memory chips (primary and the ECC 
specific chip) and flip both bits.  This would not generate an error since the 
checksums would still be the same.

I'm not knocking good hardware, I have several high end 64GB and 128GB servers 
with ECC, I'm just saying the purpose of RIAK was to work around the problem of 
having to worry about these cases.

Let me also qualify that I'm not longer using RIAK in production.  I only 
tinker with it for small projects and testing.  I was looking for a local 
replacement for S3, this looked promising (for the reasons of cheap hardware, 
etc) but in the end the large file issue became the issue.  Otherwise it's a 
pretty good product.

Gary Smith




_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg06510.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#06511">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#06511">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg06512.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg06510.html">Operations: Commodity hardware OK, or does Riak need ECC mem...</a></span> <span class="sender italic">Jay</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">RE: Operations: Commodity hardware OK, or does Riak nee...</span> <span class="sender italic">Gary Smith</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg06512.html">Re: Operations: Commodity hardware OK, or does Riak...</a></span> <span class="sender italic">Les Mikesell</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg06513.html">RE: Operations: Commodity hardware OK, or does ...</a></span> <span class="sender italic">Gary Smith</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg06515.html">Re: Operations: Commodity hardware OK, or d...</a></span> <span class="sender italic">Les Mikesell</span></li>
</ul></li>
</ul></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg06516.html">Re: Operations: Commodity hardware OK, or does Riak nee...</a></span> <span class="sender italic">Runar Jordahl</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg06520.html">Re: Operations: Commodity hardware OK, or does Riak...</a></span> <span class="sender italic">David Smith</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg06523.html">Re: Operations: Commodity hardware OK, or does ...</a></span> <span class="sender italic">Nico Meyer</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg06524.html">Re: Operations: Commodity hardware OK, or d...</a></span> <span class="sender italic">David Smith</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg06525.html">Re: Operations: Commodity hardware OK,...</a></span> <span class="sender italic">Nico Meyer</span></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="RE: Operations: Commodity hardware OK, or does Riak need ECC memory?">
<input type="hidden" name="msgid" value="034DEBCAE934A74991E6E76B8DA72D148722C2538E@HSSBS.holdstead.local">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg06511.html">
<input type="submit" value=" Gary Smith ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22RE%5C%3A+Operations%5C%3A+Commodity+hardware+OK%2C+or+does+Riak+need+ECC+memory%5C%3F%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg06510.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg06512.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">034DEBCAE934A74991E6E76B8DA72D148722C2538E@HSSBS.holdstead.local</li>
</ul>
</div>
</body>
</html>
