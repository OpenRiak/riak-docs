<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Test Riak client</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#00957" id="c">
<link rel="index" href="maillist.html#00957" id="i">
<link rel="prev" href="msg00955.html" id="p">
<link rel="next" href="msg00960.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg00957.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Test+Riak+client%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Test Riak client</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Dmitry+Vasiliev%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Dmitry Vasiliev</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20100827" rel="nofollow">Fri, 27 Aug 2010 02:44:31 -0700</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre style="margin: 0em;">
27.08.2010 12:52, Dmitry Demeshchuk пишет:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
On Fri, Aug 27, 2010 at 12:47 PM, Dmitry Vasiliev&lt;d...@hlabs.org&gt;  wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
Hi all,</pre><pre>

I'm start to use Riak in one of my Erlang based projects and looking for a
ways to automatic test my application with Riak. Is there an easy way to
start/stop some lightweight Riak instance (for example with ets backend) in
tests or I need to emulate Riak's client API myself?
</pre></blockquote></blockquote><pre style="margin: 0em;">

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
There are 2 Riak API's for Erlang: native and protobuffs.

Protocol Buffers API is better if you're going to connect to remote
nodes as its data format is very compact.
Native API is a bit more convenient for me so I prefer it if not
working with remote nodes.
</pre></blockquote><pre style="margin: 0em;">

</pre><tt>I use native API myself. But is the difference between Protocol Buffers 
</tt><tt>format and Erlang's External Term format so huge that you can see it in 
</tt><tt>real world applications? I hardly believe so.
</tt><pre style="margin: 0em;">

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
As for tests, you can pre-create a ETS-based bucket (you can either
set its properties in the app.config file or manually from Erlang) and
run some test operations on it upon Riak client start. So, there's no
need in an additional instance as your buckets can use different
storages.
</pre></blockquote><pre style="margin: 0em;">

</pre><tt>Actually that I want to do is to start and stop some Riak emulation 
</tt><tt>right in the tests like this:
</tt><pre style="margin: 0em;">

some_test_setup() -&gt;
    start_lightweight_riak_process().

some_test_cleanup() -&gt;
    stop_lightweight_riak_process().

some_test() -&gt;
    some_test_setup(),
    {ok, Client} = riak:local_client(),
    ... % Some tests with the Client
    some_test_cleanup().

</pre><tt>Now I use my storage API as frontend for Riak's API so I can emulate my 
</tt><tt>API (or Riak's API) with ets but first I want to know can I do my tests 
</tt><tt>a lazy way. :-)
</tt><pre style="margin: 0em;">

--
Dmitry Vasiliev &lt;dima at hlabs.org&gt;
<a  rel="nofollow" href="http://hlabs.org">http://hlabs.org</a>
<a  rel="nofollow" href="http://twitter.com/hdima">http://twitter.com/hdima</a>

_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg00955.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#00957">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#00957">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg00960.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg00954.html">Test Riak client</a></span> <span class="sender italic">Dmitry Vasiliev</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00955.html">Re: Test Riak client</a></span> <span class="sender italic">Dmitry Demeshchuk</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Test Riak client</span> <span class="sender italic">Dmitry Vasiliev</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00960.html">Re: Test Riak client</a></span> <span class="sender italic">Sean Cribbs</span></li>
</ul></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg00956.html">Re: Test Riak client</a></span> <span class="sender italic">russell.brown</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00958.html">Re: Test Riak client</a></span> <span class="sender italic">Dmitry Vasiliev</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg00959.html">Re: Test Riak client</a></span> <span class="sender italic">Dmitry Vasiliev</span></li>
</ul>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Test Riak client">
<input type="hidden" name="msgid" value="4C7788F3.70606@hlabs.org">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg00957.html">
<input type="submit" value=" Dmitry Vasiliev ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Test+Riak+client%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg00955.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg00960.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">4C7788F3.70606@hlabs.org</li>
</ul>
</div>
</body>
</html>
