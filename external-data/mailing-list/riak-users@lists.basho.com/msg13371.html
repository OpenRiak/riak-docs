<!DOCTYPE html>
<html lang="en">
<head>
<title>RE: DecodeErrors in protobuf</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="thrd5.html#13371" id="c">
<link rel="index" href="mail5.html#13371" id="i">
<link rel="prev" href="msg13370.html" id="p">
<link rel="next" href="msg13367.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg13371.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22RE%5C%3A+DecodeErrors+in+protobuf%22&amp;o=newest" rel="nofollow"><span itemprop="name">RE: DecodeErrors in protobuf</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Erik+S%C3%B8e+S%C3%B8rensen%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Erik Søe Sørensen</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20140110" rel="nofollow">Fri, 10 Jan 2014 00:16:11 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>It's usually one of these two:
1) the data has been corrupted since encoding.
2) what you're trying to decode is not protobuf data but something else.</pre><pre>

If the code logged the binary data it's trying to decode, that'd be a help.
Given that the data is from network and not from disk, possible causes I can 
think of are:
1) the port you're accessing is not the Riak protobuf port.
2) the data is corrupted in-flight. (Very rare, but possible; we had this one 
at work.)
3) client software error, possibly race condition, corrupting the data.
Or something else...

How often does it happen? Can you dump the data which doesn't decode? Can you 
capture the data on the network?




-------- Oprindelig meddelelse --------
Fra: Massimiliano Ciancio &lt;massimili...@ciancio.net&gt;
Dato:
Til: riak-users@lists.basho.com
Emne: DecodeErrors in protobuf


Hi all,
I've started receiving strange errors from protobuf.
I'm running Riak 1.4.6 on Debian 7 with a test program using python riak 
library from 'pip install' and python-protobuf 2.4.1-3
For this test I've configured Riak with only one instance running and N=1.
I runs many parallel python processes each using a different Riak connection.

The errors I'm observing are generated when i try to read or write to Riak and 
are the following:

1) DecodeError: Truncated string (<a  rel="nofollow" href="http://pastebin.com/ks4xvMxB">http://pastebin.com/ks4xvMxB</a>)
2) DecodeError: Unexpected end-group tag (<a  rel="nofollow" href="http://pastebin.com/G3B5djuE">http://pastebin.com/G3B5djuE</a>)
3) DecodeError: Tag had invalid wire type (<a  rel="nofollow" href="http://pastebin.com/F0x5b7Ns">http://pastebin.com/F0x5b7Ns</a>)
4) Exception: unknown msg code 44 (<a  rel="nofollow" href="http://pastebin.com/n9BWRLmc">http://pastebin.com/n9BWRLmc</a>)

Do you have any idea about what's going on?
Thanks in advance.
Massimiliano
_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg13370.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="thrd5.html#13371">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="mail5.html#13371">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg13367.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg13366.html">DecodeErrors in protobuf</a></span> <span class="sender italic">Massimiliano Ciancio</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13370.html">Re: DecodeErrors in protobuf</a></span> <span class="sender italic">Sean Cribbs</span></li>
<li class="icons-email tSliceCur"><span class="subject">RE: DecodeErrors in protobuf</span> <span class="sender italic">Erik Søe Sørensen</span></li>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="RE: DecodeErrors in protobuf">
<input type="hidden" name="msgid" value="x3omc7staeislutac07hum57.1389340613289@email.android.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg13371.html">
<input type="submit" value=" Erik Søe Sørensen ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22RE%5C%3A+DecodeErrors+in+protobuf%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg13370.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg13367.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">x3omc7staeislutac07hum57.1389340613289@email.android.com</li>
</ul>
</div>
</body>
</html>
