<!DOCTYPE html>
<html lang="en">
<head>
<title>Basho Product Alert: Active Anti-Entropy in Riak 1.4.4 - 1.4.7</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="thrd4.html#13531" id="c">
<link rel="index" href="mail4.html#13531" id="i">
<link rel="prev" href="msg13530.html" id="p">
<link rel="next" href="msg13533.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg13531.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Basho+Product+Alert%5C%3A+Active+Anti%5C-Entropy+in+Riak+1.4.4+%5C-+1.4.7%22&amp;o=newest" rel="nofollow"><span itemprop="name">Basho Product Alert: Active Anti-Entropy in Riak 1.4.4 - 1.4.7</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Tom+Santero%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Tom Santero</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20140129" rel="nofollow">Wed, 29 Jan 2014 08:39:58 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hello,

Basho Engineering has uncovered a bug in the Active Anti-Entropy (AAE) code
in Riak versions 1.4.4 through 1.4.7, inclusive. This code incorrectly
generates hashes resulting in AAE failing to repair data. Data will
continue to be repaired via the standard read repair mechanisms. As the
incorrect hash generation will utilize system resources with no useful
result, our official recommendation is that you should not use AAE until a
fix is released in 1.4.8.</pre><pre>

To disable AAE on a running cluster, perform a `riak attach`, then:

a.
rpc:multicall(riak_kv_entropy_manager, disable, []).
rpc:multicall(riak_kv_entropy_manager, cancel_exchanges, []).
z.


then Press Ctrl-c a, then Enter to quit.

Next, you'll want to disable AAE on restart. Adjust your the app.config
file on all nodes in the cluster in the following manner:

% Before
{anti_entropy, {on, []}}

% After
{anti_entropy, {off, []}}


Once again, this issue only affects Riak versions 1.4.4, 1.4.5, 1.4.6, and
1.4.7. There is no need to make changes to your cluster due to this bug if
you are not running one of those versions, or if you are not using AAE. A
forthcoming Riak 1.4.8 release will address this problem and be released in
the next few days.


Thank you,
Basho
</pre><pre>_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg13530.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="thrd4.html#13531">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="mail4.html#13531">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg13533.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email tSliceCur"><span class="subject">Basho Product Alert: Active Anti-Entropy in Riak 1.4.4 - 1....</span> <span class="sender italic">Tom Santero</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13533.html">Re: Basho Product Alert: Active Anti-Entropy in Riak 1...</a></span> <span class="sender italic">Dave Martorana</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg13534.html">Re: Basho Product Alert: Active Anti-Entropy in Ri...</a></span> <span class="sender italic">Tom Santero</span></li>
</ul>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Basho Product Alert: Active Anti-Entropy in Riak 1.4.4 - 1.4.7">
<input type="hidden" name="msgid" value="CAPFHwQAuhXXoimZOzMynANi8Tao_bv2A7FXsY83k4ao_iYcmDg@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg13531.html">
<input type="submit" value=" Tom Santero ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Basho+Product+Alert%5C%3A+Active+Anti%5C-Entropy+in+Riak+1.4.4+%5C-+1.4.7%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg13530.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg13533.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">CAPFHwQAuhXXoimZOzMynANi8Tao_bv2A7FXsY83k4ao_iYcmDg@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
