<!DOCTYPE html>
<html lang="en">
<head>
<title>Re: Performance issues with small dataset</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="index.html#01969" id="c">
<link rel="index" href="maillist.html#01969" id="i">
<link rel="prev" href="msg01967.html" id="p">
<link rel="next" href="msg01970.html" id="n">
<link rel="canonical" href="https://www.mail-archive.com/riak-users@lists.basho.com/msg01969.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
  if (!document.getElementById) return;
  if (window.event) event = window.event;
  if (event.target.tagName == 'INPUT') return;
  if (event.ctrlKey || event.metaKey) return;
  var link = null;
  switch (event.keyCode ? event.keyCode : event.which ? event.which : null) {
    case 74:
    case 80:
      link = document.getElementById ('p');
      break;
    case 75:
    case 78:
      link = document.getElementById ('n');
      break;
    case 69:
      link = document.getElementById ('e');
      break;
    }
  if (link && link.href) document.location = link.href;
}
</script>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Performance+issues+with+small+dataset%22&amp;o=newest" rel="nofollow"><span itemprop="name">Re: Performance issues with small dataset</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=riak-users@lists.basho.com&amp;q=from:%22Alexander+Staubo%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Alexander Staubo</span></span></a></span>
<span class="date"><a href="/search?l=riak-users@lists.basho.com&amp;q=date:20110112" rel="nofollow">Wed, 12 Jan 2011 23:58:44 -0800</a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>On Thu, Jan 13, 2011 at 03:08, Alexander Sicular &lt;sicul...@gmail.com&gt; wrote:
&gt; Item number one: if you are using stock riak then you are also using the
&gt; stock nval (number of replicas) of 3. This means that your 1000 k/v write is
&gt; actually 3000 items written to disk.</pre><pre>

Reducing n_value does not improve m/r times noticeably for my test,
and reduces list performance only slightly.

&gt; There are more caveats but I'll end with three. For any critically
&gt; performant system you must use the protocol buffers interface

Understandable, but probably not relevant in this case since there is
so little data involved.

&gt; and you must juggle connections.

Do you mean pooling? If not, what do you mean?

&gt; Additionally, anonymous JavaScript functions have a
&gt; penalty associated.

Does this entail pre-defining them somewhere? I can't find any
documentation on this, can you point me to the relevant place?

&gt; Lastly you should also upgrade from JavaScript m/r
&gt; functions to erlang. There is performance impedance when pushing json from
&gt; the native erlang interface into the JavaScript vm.

Basho claims it's insignificant, though: &quot;There is a slight overhead
when encoding the Riak object to JSON but otherwise the performance
[of Erlang named functions vs. JS named functions] is comparable.&quot; [1]

[1] <a  rel="nofollow" href="http://blog.basho.com/2010/07/27/webinar-recap---mapreduce-querying-in-riak/">http://blog.basho.com/2010/07/27/webinar-recap---mapreduce-querying-in-riak/</a>

&gt; Riak has many benefits but bleeding single node performance is not one of
&gt; them. Predictable, scaleable units of performance per node throughout a
&gt; cluster is.

Unfortunately, even if additional nodes yield linear performance
gains, the m/r overhead seems very large -- if I'm getting 1.5 seconds
to process 1,000 items on one node, it seems apparent that I should
get roughtly 1.5 seconds to process 3,000 items on 3 nodes, which
still is awfully slow.

Do you know how Riak compares to HBase, MongoDB or Cassandra for large
dataset processing and analysis with m/r, when talking hundreds of
millions, or even billions of keys? It would seem that key traversal
performance would preventing Riak from competing in that space. Maybe
you could do something with Riak Search, but I'm not sure if it would
comparable.

_______________________________________________
riak-users mailing list
riak-users@lists.basho.com
<a  rel="nofollow" href="http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com">http://lists.basho.com/mailman/listinfo/riak-users_lists.basho.com</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg01967.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="index.html#01969">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="maillist.html#01969">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg01970.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceList margintopdouble">
<ul class="icons monospace">
<li class="icons-email"><span class="subject"><a href="msg01966.html">Performance issues with small dataset</a></span> <span class="sender italic">Alexander Staubo</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg01967.html">Re: Performance issues with small dataset</a></span> <span class="sender italic">Alexander Sicular</span></li>
<li><ul>
<li class="icons-email tSliceCur"><span class="subject">Re: Performance issues with small dataset</span> <span class="sender italic">Alexander Staubo</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg01970.html">Re: Performance issues with small dataset</a></span> <span class="sender italic">Sean Cribbs</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg01971.html">Re: Performance issues with small datas...</a></span> <span class="sender italic">nx</span></li>
<li><ul>
<li class="icons-email"><span class="subject"><a href="msg01972.html">Re: Performance issues with small ...</a></span> <span class="sender italic">Anthony Molinaro</span></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
<li class="icons-email"><span class="subject"><a href="msg01968.html">Re: Performance issues with small dataset</a></span> <span class="sender italic">Neville Burnell</span></li>
</ul>
</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="hidden" name="subject" value="Re: Performance issues with small dataset">
<input type="hidden" name="msgid" value="AANLkTimEHuc6AUFSCM6RfLEm7Air5OL4tAoVpLTy-G-D@mail.gmail.com">
<input type="hidden" name="relpath" value="riak-users@lists.basho.com/msg01969.html">
<input type="submit" value=" Alexander Staubo ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="riak-users@lists.basho.com">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search riak-users">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/riak-users@lists.basho.com/">riak-users - all messages</a></li>
<li class="icons-about"><a href="/riak-users@lists.basho.com/info.html">riak-users - about the list</a></li>
<li class="icons-expand"><a href="/search?l=riak-users@lists.basho.com&amp;q=subject:%22Re%5C%3A+Performance+issues+with+small+dataset%22&amp;o=newest&amp;f=1" title="e" id="e">Expand</a></li>
<li class="icons-prev"><a href="msg01967.html" title="p">Previous message</a></li>
<li class="icons-next"><a href="msg01970.html" title="n">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">

</div>
<div class="margintopdouble">

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
<li class="darkgray">AANLkTimEHuc6AUFSCM6RfLEm7Air5OL4tAoVpLTy-G-D@mail.gmail.com</li>
</ul>
</div>
</body>
</html>
