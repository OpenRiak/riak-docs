---
title: "Re: Is using the same search index on all CRDT buckets a good idea?"
description: ""
project: community
lastmod: 2015-11-23T22:54:45-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16799"
mailinglist_parent_id: "msg16798"
author_name: "Weixi Yen"
project_section: "mailinglistitem"
sent_date: 2015-11-23T22:54:45-08:00
---


Thanks, this is exactly what I was looking for.

On Mon, Nov 23, 2015 at 12:58 PM, Dmitri Zagidulin 
wrote:

&gt; Short answer to 'should I use the same search index across all CRDT
&gt; buckets': Probably not.
&gt;
&gt; Long answer: It depends of what you're going to be storing in your CRDT
&gt; buckets. And what you want to query on.
&gt;
&gt; If your buckets store objects that have fields in common (for example, all
&gt; your CRDTs have a field 'user\\_id\\_register'), and you want to query on those
&gt; few fields, then sure, create a custom schema for those fields, and use the
&gt; same index across the buckets.
&gt;
&gt; I'm going to guess that this is not what you intend, though. You're
&gt; probably thinking of either using the default schema (btw - DON'T use the
&gt; default schema in production. It not only indexes -every field- in a
&gt; document, but also -stores the value- for those fields, which is a lot
&gt; slower and wastes a lot more space.), or are going to be using a custom
&gt; schema with some dynamic fields. Something like - index all fields that end
&gt; in \\*\\_register, that sort of thing.
&gt;
&gt; Again, that's a bad idea. In relational database terms, this is like
&gt; creating an index on all columns of all tables. It gets expensive very fast.
&gt;
&gt; So, in short:
&gt;
&gt; 1) Don't use the default schema for your indexes in production. It's only
&gt; meant as a developer convenience, while you're learning Solr.
&gt;
&gt; 2) Use custom schemas instead, and only index those fields that you'll be
&gt; querying. So, unless all your CRDTs have common fields, this means creating
&gt; separate custom indexes for your buckets.
&gt;
&gt;
&gt; On Fri, Nov 20, 2015 at 10:36 PM, Weixi Yen 
&gt; wrote:
&gt;
&gt;&gt; Hello,
&gt;&gt;
&gt;&gt; I have a question about Riak 2.0+ Search best practices.
&gt;&gt;
&gt;&gt; A) I'm wondering if using the same search index on all my CRDT bucket
&gt;&gt; types and then filtering by bucket name is a good idea.
&gt;&gt;
&gt;&gt; B) Or should I be creating different indexes for each bucket if my
&gt;&gt; primary goal is to search by bucket.
&gt;&gt;
&gt;&gt; Are there potentially huge performance issues when going with Option A?
&gt;&gt;
&gt;&gt; Thanks!
&gt;&gt;
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;
&gt;&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

