---
title: "Re: Changing ring size on 1.4 cluster"
description: ""
project: community
lastmod: 2016-06-01T12:06:31-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17444"
mailinglist_parent_id: "msg17443"
author_name: "Luke Bakken"
project_section: "mailinglistitem"
sent_date: 2016-06-01T12:06:31-07:00
---


Alex,

While a command does exist to resize the ring in Riak 2, it is for all
intents and purposes deprecated.

The best solution, as always, is to benchmark your cluster's
performance using real world load, and plan for a bit of head room if
expansion is likely.

--
Luke Bakken
Engineer
lbak...@basho.com


On Wed, Jun 1, 2016 at 11:51 AM, Alex De la rosa
 wrote:
&gt; Can the ring size be changed easily in Riak 2.X?
&gt;
&gt; Imagine I have 5 servers originally with a ring\\_size = 64... If later on I
&gt; add 5 more servers (10 in total) and I also want to duplicate the
&gt; partitions, can I just edit the ring\\_size to 128?
&gt;
&gt; How would be the process to do it? Will it rebalance properly and have no
&gt; issues?
&gt;
&gt; Thanks,
&gt; Alex
&gt;
&gt; On Wed, Jun 1, 2016 at 10:46 PM, Luke Bakken  wrote:
&gt;&gt;
&gt;&gt; Hi Johnny,
&gt;&gt;
&gt;&gt; Yes, the latter two are your main options. For a 1.4 series Riak
&gt;&gt; installation, your only option is to bring up a new cluster with the
&gt;&gt; desired ring size and replicate data.
&gt;&gt; --
&gt;&gt; Luke Bakken
&gt;&gt; Engineer
&gt;&gt; lbak...@basho.com
&gt;&gt;
&gt;&gt;
&gt;&gt; On Fri, May 27, 2016 at 12:11 PM, Johnny Tan  wrote:
&gt;&gt; &gt; The docs
&gt;&gt; &gt; http://docs.basho.com/riak/kv/2.1.4/configuring/basic/#ring-size
&gt;&gt; &gt; seem to imply that there's no easy, non-destructive way to change a
&gt;&gt; &gt; cluster's ring size live for Riak-1.4x.
&gt;&gt; &gt;
&gt;&gt; &gt; I thought about replacing one node at a time, but you can't join a new
&gt;&gt; &gt; node
&gt;&gt; &gt; or replace an existing one with a node that has a different ring size.
&gt;&gt; &gt;
&gt;&gt; &gt; I was also thinking of bring up a completely new cluster with the new
&gt;&gt; &gt; ring
&gt;&gt; &gt; size, and then replicating the data from the original cluster, and take
&gt;&gt; &gt; a
&gt;&gt; &gt; quick maintenance window to failover to the new cluster.
&gt;&gt; &gt;
&gt;&gt; &gt; One other alternative seems to be to upgrade to 2.0, and then use 2.x's
&gt;&gt; &gt; ability to resize the ring.
&gt;&gt; &gt;
&gt;&gt; &gt; Are these latter two my main options?
&gt;&gt; &gt;
&gt;&gt; &gt; johnny
&gt;&gt; &gt;
&gt;&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; &gt; riak-users mailing list
&gt;&gt; &gt; riak-users@lists.basho.com
&gt;&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt; &gt;
&gt;&gt;
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

