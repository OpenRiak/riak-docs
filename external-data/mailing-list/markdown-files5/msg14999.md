---
title: "Re: Creating a new object immediately after deleting one with the same	key"
description: ""
project: community
lastmod: 2014-10-09T01:44:41-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14999"
mailinglist_parent_id: "msg14998"
author_name: "tilo"
project_section: "mailinglistitem"
sent_date: 2014-10-09T01:44:41-07:00
---


Thanks a lot, that are exactly the information I was looking for!
Best, Tilo

On Thu, Oct 9, 2014, at 10:35, Sargun Dhillon wrote:
&gt; Distributed deletion, and garbage collection is a really hard problem.
&gt; Riak has a couple different ways to do it talked about here:
&gt; http://docs.basho.com/riak/latest/ops/advanced/deletion/
&gt; 
&gt; The default mechanism tombstones the key, and then waits 3 seconds
&gt; after the write has reached stable state (on all the primary vnodes of
&gt; the preflist), and then blows it away. Although, this is configurable,
&gt; it's probably not what you want to change. You should pass the
&gt; deletedvclock=true, when doing the get, and then pass back the vclock
&gt; on write. There is more information in the linked doc.
&gt; 
&gt; On Thu, Oct 9, 2014 at 1:23 AM,  wrote:
&gt; &gt; Hi all,
&gt; &gt;
&gt; &gt; While testing a simple go / protobuf driver I encountered following
&gt; &gt; behaviour:
&gt; &gt; After deleting an object and creating a new one with the same key
&gt; &gt; immediately afterwards Riak creates a sibling of the new object. Trying to
&gt; &gt; fetch an object with the key directly before creating the new one fails.
&gt; &gt;
&gt; &gt; If the timespan between delete and create is greater than ~3 seconds
&gt; &gt; everything works as expected.
&gt; &gt;
&gt; &gt; Is this behaviour documented somewhere? Does the required minimal timespan
&gt; &gt; depend on the cluster setup or is it configurable?
&gt; &gt; I'm currently using Riak v2.0.0 on OS X locally, allow\\_mult is set to true.
&gt; &gt;
&gt; &gt; Best regards,
&gt; &gt; Tilo Soenke
&gt; &gt;
&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; &gt;

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

