---
title: "Re: Python: More problems with counters"
description: ""
project: community
lastmod: 2014-08-17T16:52:57-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14684"
mailinglist_parent_id: "msg14681"
author_name: "Eric Redmond"
project_section: "mailinglistitem"
sent_date: 2014-08-17T16:52:57-07:00
---


"Bucket type" is shared metadata across a set of buckets. That metadata needn't 
necessarily define a datatype. In fact, there are many cases where you might 
not. For example, you would use a bucket type for strong consistency, or 
associating a search index with many buckets.

In other words:

bucket type == higher-level bucket namespace 
(http://docs.basho.com/riak/2.0.0/dev/advanced/bucket-types/)
datatype == a description of how a stored object's type, like a map/set/counter 
(http://docs.basho.com/riak/2.0.0/dev/using/data-types/)

Hope that helps,
Eric



On Aug 17, 2014, at 11:12 AM, Alex De la rosa  wrote:

&gt; Hi Eric!
&gt; 
&gt; Thank you very much! this certainly solved it! :) however, I have to say that 
&gt; is very non intuitive as "bucket\\_type" would look like the data type 
&gt; (counter, set, map) and the "bucket" part the name of the bucket you 
&gt; created... so it looks as it should work exactly the contrary as how it has 
&gt; to be done (&gt;&lt;).
&gt; 
&gt; However, is finally fixed and I can finally use counters! thank you so much.
&gt; 
&gt; Thanks!
&gt; Alex
&gt; 
&gt; 
&gt; On Sun, Aug 17, 2014 at 8:04 PM, Eric Redmond  wrote:
&gt; Alex,
&gt; 
&gt; looking through your previous emails, it looked like you created a bucket 
&gt; type named "likes". If that's the case, you'd swap the function params:
&gt; 
&gt; bucket = client.bucket\\_type('likes').bucket('counter\\_bucket')
&gt; 
&gt; Hope that helps,
&gt; Eric
&gt; 
&gt; 
&gt; On Aug 17, 2014, at 10:33 AM, Alex De la rosa  wrote:
&gt; 
&gt; &gt; Hi there,
&gt; &gt;
&gt; &gt; I was able to install the latest python client version with "pip install 
&gt; &gt; riak==2.1.0rc1", however, counters still fails to work... I used the 
&gt; &gt; following code ( that is the same as in the documentation ):
&gt; &gt;
&gt; &gt; bucket = client.bucket\\_type('counter\\_bucket').bucket('likes')
&gt; &gt;
&gt; &gt; however I get the following error:
&gt; &gt;
&gt; &gt; Traceback (most recent call last):
&gt; &gt; File "x.py", line 18, in 
&gt; &gt; counter = bucket.new('Barcelona')
&gt; &gt; File "/usr/local/lib/python2.7/dist-packages/riak/bucket.py", line 159, 
&gt; &gt; in new
&gt; &gt; if self.bucket\\_type.datatype:
&gt; &gt; File "/usr/local/lib/python2.7/dist-packages/riak/util.py", line 78, in 
&gt; &gt; \\_\\_get\\_\\_
&gt; &gt; value = self.fget(obj)
&gt; &gt; File "/usr/local/lib/python2.7/dist-packages/riak/bucket.py", line 618, 
&gt; &gt; in datatype
&gt; &gt; return self.get\\_properties().get('datatype')
&gt; &gt; File "/usr/local/lib/python2.7/dist-packages/riak/bucket.py", line 557, 
&gt; &gt; in get\\_properties
&gt; &gt; return self.\\_client.get\\_bucket\\_type\\_props(self)
&gt; &gt; File "/usr/local/lib/python2.7/dist-packages/riak/client/transport.py", 
&gt; &gt; line 184, in wrapper
&gt; &gt; return self.\\_with\\_retries(pool, thunk)
&gt; &gt; File "/usr/local/lib/python2.7/dist-packages/riak/client/transport.py", 
&gt; &gt; line 126, in \\_with\\_retries
&gt; &gt; return fn(transport)
&gt; &gt; File "/usr/local/lib/python2.7/dist-packages/riak/client/transport.py", 
&gt; &gt; line 182, in thunk
&gt; &gt; return fn(self, transport, \\*args, \\*\\*kwargs)
&gt; &gt; File "/usr/local/lib/python2.7/dist-packages/riak/client/operations.py", 
&gt; &gt; line 265, in get\\_bucket\\_type\\_props
&gt; &gt; return transport.get\\_bucket\\_type\\_props(bucket\\_type)
&gt; &gt; File 
&gt; &gt; "/usr/local/lib/python2.7/dist-packages/riak/transports/pbc/transport.py", 
&gt; &gt; line 381, in get\\_bucket\\_type\\_props
&gt; &gt; MSG\\_CODE\\_GET\\_BUCKET\\_RESP)
&gt; &gt; File 
&gt; &gt; "/usr/local/lib/python2.7/dist-packages/riak/transports/pbc/connection.py", 
&gt; &gt; line 50, in \\_request
&gt; &gt; return self.\\_recv\\_msg(expect)
&gt; &gt; File 
&gt; &gt; "/usr/local/lib/python2.7/dist-packages/riak/transports/pbc/connection.py", 
&gt; &gt; line 142, in \\_recv\\_msg
&gt; &gt; raise RiakError(err.errmsg)
&gt; &gt; riak.RiakError: 'Invalid bucket type: &lt;&lt;"counter\\_bucket"&gt;&gt;'
&gt; &gt;
&gt; &gt; It says the bucket type is wrong (but is the same as in the 
&gt; &gt; documentation)... I tried other combinations and all of them failed too:
&gt; &gt;
&gt; &gt; riak.RiakError: 'Invalid bucket type: &lt;&lt;"counters\\_bucket"&gt;&gt;'
&gt; &gt; riak.RiakError: 'Invalid bucket type: &lt;&lt;"counters"&gt;&gt;'
&gt; &gt; riak.RiakError: 'Invalid bucket type: &lt;&lt;"counter"&gt;&gt;'
&gt; &gt;
&gt; &gt; so... no plural, no singular, not isolated... which is the correct 
&gt; &gt; "bucket\\_type" to use then??
&gt; &gt;
&gt; &gt; Thanks!
&gt; &gt; Alex
&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; 
&gt; 

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

