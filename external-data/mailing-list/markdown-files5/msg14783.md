---
title: "Re: Riak Search on \"Sets\" data-types"
description: ""
project: community
lastmod: 2014-08-22T00:58:49-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14783"
mailinglist_parent_id: "msg14779"
author_name: "Alex De la rosa"
project_section: "mailinglistitem"
sent_date: 2014-08-22T00:58:49-07:00
---


Answering my own question, in case somebody has the same need some day,
seems that a SET works like a collection of REGISTERS and you can use it as
follows:

r = client.fulltext\\_search('ix\\_images', 'keywords\\_set:DLSR')

Thanks!
Alex

On Thu, Aug 21, 2014 at 8:32 PM, Alex De la rosa 
wrote:

&gt; Hi there,
&gt;
&gt; For a project I'm building I'm saving a "keyword" and a "site" for an
&gt; image like this:
&gt;
&gt; bucket = client.bucket\\_type('tp\\_images').bucket('images')
&gt; key = bucket.new(image\\_hash)
&gt; key.registers['raw'].assign(base64.b64encode(image\\_data))
&gt; key.registers['site'].assign('johnlewis.com')
&gt; key.registers['keywords'].assign('cameras')
&gt; key.store()
&gt;
&gt; and querying the index like this to get the desired images:
&gt;
&gt; r = client.fulltext\\_search('ix\\_images', 'site\\_registers:johnlewis.com AND
&gt; keywords\\_registers:cameras', sort='clicks\\_counter desc', rows=5)
&gt;
&gt; Imagine now that i want to associate the same image to different keywords,
&gt; having a SET instead of a REGISTER:
&gt;
&gt; bucket = client.bucket\\_type('tp\\_images').bucket('images')
&gt; key = bucket.new(image\\_hash)
&gt; key.registers['raw'].assign(base64.b64encode(image\\_data))
&gt; key.registers['site'].assign('johnlewis.com')
&gt; key.sets['keywords'].add('digital cameras')
&gt; key.sets['keywords'].add('DLSR')
&gt; key.store()
&gt;
&gt; How to query the SET using Riak Search? Something like the "IN ()"
&gt; statement in traditional SQL:
&gt;
&gt; r = client.fulltext\\_search('ix\\_images', 'site\\_registers:johnlewis.com AND
&gt; keywords\\_set:???????', sort='clicks\\_counter desc', rows=5)
&gt;
&gt; Thanks!
&gt; Alex
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

