---
title: "Re: error starting risk 1.4.2 from prebuilt distro for MacOS"
description: ""
project: community
lastmod: 2013-09-17T12:21:03-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12282"
mailinglist_parent_id: "msg12281"
author_name: "Roman Shestakov"
project_section: "mailinglistitem"
sent_date: 2013-09-17T12:21:03-07:00
---


hi Jared,

this is interesting…

I have repeated all your steps and getting the same issue as before:

s:~ romanshestakov$ cd Development
rs:Development romanshestakov$ wget 
http://s3.amazonaws.com/downloads.basho.com/riak/1.4/1.4.2/osx/10.8/riak-1.4.2-OSX-x86\\_64.tar.gz
 
--2013-09-17 20:12:48-- 
http://s3.amazonaws.com/downloads.basho.com/riak/1.4/1.4.2/osx/10.8/riak-1.4.2-OSX-x86\\_64.tar.gz
Resolving s3.amazonaws.com... 205.251.242.150
Connecting to s3.amazonaws.com|205.251.242.150|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 27081322 (26M) [application/x-tar]
Saving to: `riak-1.4.2-OSX-x86\\_64.tar.gz.1'

100%[==================================================================================================================&gt;]
 27,081,322 521K/s in 57s 

2013-09-17 20:13:46 (460 KB/s) - `riak-1.4.2-OSX-x86\\_64.tar.gz.1' saved 
[27081322/27081322]

rs:Development romanshestakov$ tar -zxf riak-1.4.2-OSX-x86\\_64.tar.gz
rs:Development romanshestakov$ cd riak-1.4.2
rs:riak-1.4.2 romanshestakov$ ./bin/riak chkconfig
Error reading /Users/romanshestakov/Development/riak-1.4.2/bin/../etc/app.config

I am on MacOs 10.7.5

weird … will use riak-1.3

Regards, Roman


On 17 Sep 2013, at 19:17, Jared Morrow wrote:

&gt; Roman,
&gt; 
&gt; I have no problems with it:
&gt; 
&gt; ➜ /tmp wget 
&gt; http://s3.amazonaws.com/downloads.basho.com/riak/1.4/1.4.2/osx/10.8/riak-1.4.2-OSX-x86\\_64.tar.gz
&gt; 12:12
&gt; --2013-09-17 12:12:10-- 
&gt; http://s3.amazonaws.com/downloads.basho.com/riak/1.4/1.4.2/osx/10.8/riak-1.4.2-OSX-x86\\_64.tar.gz
&gt; Resolving s3.amazonaws.com... 207.171.185.200
&gt; Connecting to s3.amazonaws.com|207.171.185.200|:80... connected.
&gt; HTTP request sent, awaiting response... 200 OK
&gt; Length: 27081322 (26M) [application/x-tar]
&gt; Saving to: ‘riak-1.4.2-OSX-x86\\_64.tar.gz’
&gt; 
&gt; 100%[===========================================================================================================================================&gt;]
&gt; 27,081,322 1.83MB/s in 13s
&gt; 
&gt; 2013-09-17 12:12:25 (2.06 MB/s) - ‘riak-1.4.2-OSX-x86\\_64.tar.gz’ saved 
&gt; [27081322/27081322]
&gt; 
&gt; ➜ /tmp tar -zxf riak-1.4.2-OSX-x86\\_64.tar.gz
&gt; ➜ /tmp cd riak-1.4.2
&gt; ➜ riak-1.4.2 ./bin/riak chkconfig
&gt; config is OK
&gt; ➜ riak-1.4.2 ./bin/riak start
&gt; 
&gt; ➜ riak-1.4.2 ./bin/riak ping 
&gt; pong
&gt; ➜ riak-1.4.2 ./bin/riak stop
&gt; ok
&gt; Here is the config file that ships in the package
&gt; 
&gt; ➜ riak-1.4.2 cat etc/app.config 
&gt; %% -\\*- mode: erlang;erlang-indent-level: 4;indent-tabs-mode: nil -\\*-
&gt; %% ex: ft=erlang ts=4 sw=4 et
&gt; [
&gt; %% Riak Client APIs config
&gt; {riak\\_api, [
&gt; %% pb\\_backlog is the maximum length to which the queue of pending
&gt; %% connections may grow. If set, it must be an integer &gt;= 0.
&gt; %% By default the value is 5. If you anticipate a huge number of
&gt; %% connections being initialised \\*simultaneously\\*, set this number
&gt; %% higher.
&gt; %% {pb\\_backlog, 64},
&gt; 
&gt; %% pb is a list of IP addresses and TCP ports that the Riak
&gt; %% Protocol Buffers interface will bind.
&gt; {pb, [ {"127.0.0.1", 8087 } ]}
&gt; ]},
&gt; 
&gt; %% Riak Core config
&gt; {riak\\_core, [
&gt; %% Default location of ringstate
&gt; {ring\\_state\\_dir, "./data/ring"},
&gt; 
&gt; %% Default ring creation size. Make sure it is a power of 2,
&gt; %% e.g. 16, 32, 64, 128, 256, 512 etc
&gt; %{ring\\_creation\\_size, 64},
&gt; 
&gt; %% http is a list of IP addresses and TCP ports that the Riak
&gt; %% HTTP interface will bind.
&gt; {http, [ {"127.0.0.1", 8098 } ]},
&gt; 
&gt; %% https is a list of IP addresses and TCP ports that the Riak
&gt; %% HTTPS interface will bind.
&gt; %{https, [{ "127.0.0.1", 8098 }]},
&gt; 
&gt; %% Default cert and key locations for https can be overridden
&gt; %% with the ssl config variable, for example:
&gt; %{ssl, [
&gt; % {certfile, "./etc/cert.pem"},
&gt; % {keyfile, "./etc/key.pem"}
&gt; % ]},
&gt; 
&gt; %% riak\\_handoff\\_port is the TCP port that Riak uses for
&gt; %% intra-cluster data handoff.
&gt; {handoff\\_port, 8099 },
&gt; 
&gt; %% To encrypt riak\\_core intra-cluster data handoff traffic,
&gt; %% uncomment the following line and edit its path to an
&gt; %% appropriate certfile and keyfile. (This example uses a
&gt; %% single file with both items concatenated together.)
&gt; %{handoff\\_ssl\\_options, [{certfile, "/tmp/erlserver.pem"}]},
&gt; 
&gt; %% DTrace support
&gt; %% Do not enable 'dtrace\\_support' unless your Erlang/OTP
&gt; %% runtime is compiled to support DTrace. DTrace is
&gt; %% available in R15B01 (supported by the Erlang/OTP
&gt; %% official source package) and in R14B04 via a custom
&gt; %% source repository & branch.
&gt; {dtrace\\_support, false},
&gt; 
&gt; %% Health Checks
&gt; %% If disabled, health checks registered by an application will
&gt; %% be ignored. NOTE: this option cannot be changed at runtime.
&gt; %% To re-enable, the setting must be changed and the node 
&gt; restarted.
&gt; %% NOTE: As of Riak 1.3.2, health checks are deprecated as they
&gt; %% may interfere with the new overload protection mechanisms.
&gt; %% If there is a good reason to re-enable them, you must 
&gt; uncomment
&gt; %% this line and also add an entry in the riak\\_kv section:
&gt; %% {riak\\_kv, [ ..., {enable\\_health\\_checks, true}, ...]}
&gt; %% {enable\\_health\\_checks, true},
&gt; 
&gt; %% Platform-specific installation paths (substituted by rebar)
&gt; {platform\\_bin\\_dir, "./bin"},
&gt; {platform\\_data\\_dir, "./data"},
&gt; {platform\\_etc\\_dir, "./etc"},
&gt; {platform\\_lib\\_dir, "./lib"},
&gt; {platform\\_log\\_dir, "./log"}
&gt; ]},
&gt; 
&gt; %% Riak KV config
&gt; {riak\\_kv, [
&gt; %% Storage\\_backend specifies the Erlang module defining the 
&gt; storage
&gt; %% mechanism that will be used on this node.
&gt; {storage\\_backend, riak\\_kv\\_bitcask\\_backend},
&gt; 
&gt; %% raw\\_name is the first part of all URLS used by the Riak raw 
&gt; HTTP
&gt; %% interface. See riak\\_web.erl and raw\\_http\\_resource.erl for
&gt; %% details.
&gt; %{raw\\_name, "riak"},
&gt; 
&gt; %% Enable active anti-entropy subsystem + optional debug messages:
&gt; %% {anti\\_entropy, {on|off, []}},
&gt; %% {anti\\_entropy, {on|off, [debug]}},
&gt; {anti\\_entropy, {on, []}},
&gt; 
&gt; %% Restrict how fast AAE can build hash trees. Building the tree
&gt; %% for a given partition requires a full scan over that 
&gt; partition's
&gt; %% data. Once built, trees stay built until they are expired.
&gt; %% Config is of the form:
&gt; %% {num-builds, per-timespan-in-milliseconds}
&gt; %% Default is 1 build per hour.
&gt; {anti\\_entropy\\_build\\_limit, {1, 3600000}},
&gt; 
&gt; %% Determine how often hash trees are expired after being built.
&gt; %% Periodically expiring a hash tree ensures the on-disk hash tree
&gt; %% data stays consistent with the actual k/v backend data. It also
&gt; %% helps Riak identify silent disk failures and bit rot. However,
&gt; %% expiration is not needed for normal AAE operation and should be
&gt; %% infrequent for performance reasons. The time is specified in
&gt; %% milliseconds. The default is 1 week.
&gt; {anti\\_entropy\\_expire, 604800000},
&gt; 
&gt; %% Limit how many AAE exchanges/builds can happen concurrently.
&gt; {anti\\_entropy\\_concurrency, 2},
&gt; 
&gt; %% The tick determines how often the AAE manager looks for work
&gt; %% to do (building/expiring trees, triggering exchanges, etc).
&gt; %% The default is every 15 seconds. Lowering this value will
&gt; %% speedup the rate that all replicas are synced across the 
&gt; cluster.
&gt; %% Increasing the value is not recommended.
&gt; {anti\\_entropy\\_tick, 15000},
&gt; 
&gt; %% The directory where AAE hash trees are stored.
&gt; {anti\\_entropy\\_data\\_dir, "./data/anti\\_entropy"},
&gt; 
&gt; %% The LevelDB options used by AAE to generate the LevelDB-backed
&gt; %% on-disk hashtrees.
&gt; {anti\\_entropy\\_leveldb\\_opts, [{write\\_buffer\\_size, 4194304},
&gt; {max\\_open\\_files, 20}]},
&gt; 
&gt; %% mapred\\_name is URL used to submit map/reduce requests to Riak.
&gt; {mapred\\_name, "mapred"},
&gt; 
&gt; %% mapred\\_2i\\_pipe indicates whether secondary-index
&gt; %% MapReduce inputs are queued in parallel via their own
&gt; %% pipe ('true'), or serially via a helper process
&gt; %% ('false' or undefined). Set to 'false' or leave
&gt; %% undefined during a rolling upgrade from 1.0.
&gt; {mapred\\_2i\\_pipe, true},
&gt; 
&gt; %% Each of the following entries control how many Javascript
&gt; %% virtual machines are available for executing map, reduce,
&gt; %% pre- and post-commit hook functions.
&gt; {map\\_js\\_vm\\_count, 8 },
&gt; {reduce\\_js\\_vm\\_count, 6 },
&gt; {hook\\_js\\_vm\\_count, 2 },
&gt; 
&gt; %% js\\_max\\_vm\\_mem is the maximum amount of memory, in megabytes,
&gt; %% allocated to the Javascript VMs. If unset, the default is
&gt; %% 8MB.
&gt; {js\\_max\\_vm\\_mem, 8},
&gt; 
&gt; %% js\\_thread\\_stack is the maximum amount of thread stack, in 
&gt; megabyes,
&gt; %% allocate to the Javascript VMs. If unset, the default is 16MB.
&gt; %% NOTE: This is not the same as the C thread stack.
&gt; {js\\_thread\\_stack, 16},
&gt; 
&gt; %% js\\_source\\_dir should point to a directory containing Javascript
&gt; %% source files which will be loaded by Riak when it initializes
&gt; %% Javascript VMs.
&gt; %{js\\_source\\_dir, "/tmp/js\\_source"},
&gt; 
&gt; %% http\\_url\\_encoding determines how Riak treats URL encoded
&gt; %% buckets, keys, and links over the REST API. When set to 'on'
&gt; %% Riak always decodes encoded values sent as URLs and Headers.
&gt; %% Otherwise, Riak defaults to compatibility mode where links
&gt; %% are decoded, but buckets and keys are not. The compatibility
&gt; %% mode will be removed in a future release.
&gt; {http\\_url\\_encoding, on},
&gt; 
&gt; %% Switch to vnode-based vclocks rather than client ids. This
&gt; %% significantly reduces the number of vclock entries.
&gt; %% Only set true if \\*all\\* nodes in the cluster are upgraded to 1.0
&gt; {vnode\\_vclocks, true},
&gt; 
&gt; %% This option toggles compatibility of keylisting with 1.0
&gt; %% and earlier versions. Once a rolling upgrade to a version
&gt; %% &gt; 1.0 is completed for a cluster, this should be set to
&gt; %% true for better control of memory usage during key listing
&gt; %% operations
&gt; {listkeys\\_backpressure, true},
&gt; 
&gt; %% This option specifies how many of each type of fsm may exist
&gt; %% concurrently. This is for overload protection and is a new
&gt; %% mechanism that obsoletes 1.3's health checks. Note that this 
&gt; number
&gt; %% represents two potential processes, so +P in vm.args should be 
&gt; at
&gt; %% least 3X the fsm\\_limit.
&gt; {fsm\\_limit, 50000},
&gt; 
&gt; %% object\\_format controls which binary representation of a 
&gt; riak\\_object
&gt; %% is stored on disk.
&gt; %% Current options are: v0, v1.
&gt; %% v0: Original erlang:term\\_to\\_binary format. Higher space 
&gt; overhead.
&gt; %% v1: New format for more compact storage of small values.
&gt; {object\\_format, v1}
&gt; ]},
&gt; 
&gt; %% Riak Search Config
&gt; {riak\\_search, [
&gt; %% To enable Search functionality set this 'true'.
&gt; {enabled, false}
&gt; ]},
&gt; 
&gt; %% Merge Index Config
&gt; {merge\\_index, [
&gt; %% The root dir to store search merge\\_index data
&gt; {data\\_root, "./data/merge\\_index"},
&gt; 
&gt; %% Size, in bytes, of the in-memory buffer. When this
&gt; %% threshold has been reached the data is transformed
&gt; %% into a segment file which resides on disk.
&gt; {buffer\\_rollover\\_size, 1048576},
&gt; 
&gt; %% Overtime the segment files need to be compacted.
&gt; %% This is the maximum number of segments that will be
&gt; %% compacted at once. A lower value will lead to
&gt; %% quicker but more frequent compactions.
&gt; {max\\_compact\\_segments, 20}
&gt; ]},
&gt; 
&gt; %% Bitcask Config
&gt; {bitcask, [
&gt; %% Configure how Bitcask writes data to disk.
&gt; %% erlang: Erlang's built-in file API
&gt; %% nif: Direct calls to the POSIX C API
&gt; %%
&gt; %% The NIF mode provides higher throughput for certain
&gt; %% workloads, but has the potential to negatively impact
&gt; %% the Erlang VM, leading to higher worst-case latencies
&gt; %% and possible throughput collapse.
&gt; {io\\_mode, erlang},
&gt; 
&gt; {data\\_root, "./data/bitcask"}
&gt; ]},
&gt; 
&gt; %% eLevelDB Config
&gt; {eleveldb, [
&gt; {data\\_root, "./data/leveldb"}
&gt; ]},
&gt; 
&gt; %% Lager Config
&gt; {lager, [
&gt; %% What handlers to install with what arguments
&gt; %% The defaults for the logfiles are to rotate the files when
&gt; %% they reach 10Mb or at midnight, whichever comes first, and keep
&gt; %% the last 5 rotations. See the lager README for a description of
&gt; %% the time rotation format:
&gt; %% https://github.com/basho/lager/blob/master/README.org
&gt; %%
&gt; %% If you wish to disable rotation, you can either set the size 
&gt; to 0
&gt; %% and the rotation time to "", or instead specify a 2-tuple that 
&gt; only
&gt; %% consists of {Logfile, Level}.
&gt; %%
&gt; %% If you wish to have riak log messages to syslog, you can use a 
&gt; handler
&gt; %% like this:
&gt; %% {lager\\_syslog\\_backend, ["riak", daemon, info]},
&gt; %%
&gt; {handlers, [
&gt; {lager\\_file\\_backend, [
&gt; {"./log/error.log", error, 10485760, "$D0", 5},
&gt; {"./log/console.log", info, 10485760, "$D0", 5}
&gt; ]}
&gt; ] },
&gt; 
&gt; %% Whether to write a crash log, and where.
&gt; %% Commented/omitted/undefined means no crash logger.
&gt; {crash\\_log, "./log/crash.log"},
&gt; 
&gt; %% Maximum size in bytes of events in the crash log - defaults to 
&gt; 65536
&gt; {crash\\_log\\_msg\\_size, 65536},
&gt; 
&gt; %% Maximum size of the crash log in bytes, before its rotated, set
&gt; %% to 0 to disable rotation - default is 0
&gt; {crash\\_log\\_size, 10485760},
&gt; 
&gt; %% What time to rotate the crash log - default is no time
&gt; %% rotation. See the lager README for a description of this 
&gt; format:
&gt; %% https://github.com/basho/lager/blob/master/README.org
&gt; {crash\\_log\\_date, "$D0"},
&gt; 
&gt; %% Number of rotated crash logs to keep, 0 means keep only the
&gt; %% current one - default is 0
&gt; {crash\\_log\\_count, 5},
&gt; 
&gt; %% Whether to redirect error\\_logger messages into lager - 
&gt; defaults to true
&gt; {error\\_logger\\_redirect, true},
&gt; 
&gt; %% maximum number of error\\_logger messages to handle in a second
&gt; %% lager 2.0.0 shipped with a limit of 50, which is a little low 
&gt; for riak's startup
&gt; {error\\_logger\\_hwm, 100}
&gt; ]},
&gt; 
&gt; %% riak\\_sysmon config
&gt; {riak\\_sysmon, [
&gt; %% To disable forwarding events of a particular type, use a
&gt; %% limit of 0.
&gt; {process\\_limit, 30},
&gt; {port\\_limit, 2},
&gt; 
&gt; %% Finding reasonable limits for a given workload is a matter
&gt; %% of experimentation.
&gt; %% NOTE: Enabling the 'gc\\_ms\\_limit' monitor (by setting non-zero)
&gt; %% can cause performance problems on multi-CPU systems.
&gt; {gc\\_ms\\_limit, 0},
&gt; {heap\\_word\\_limit, 40111000},
&gt; 
&gt; %% Configure the following items to 'false' to disable logging
&gt; %% of that event type.
&gt; {busy\\_port, true},
&gt; {busy\\_dist\\_port, true}
&gt; ]},
&gt; 
&gt; %% SASL config
&gt; {sasl, [
&gt; {sasl\\_error\\_logger, false}
&gt; ]},
&gt; 
&gt; %% riak\\_control config
&gt; {riak\\_control, [
&gt; %% Set to false to disable the admin panel.
&gt; {enabled, false},
&gt; 
&gt; %% Authentication style used for access to the admin
&gt; %% panel. Valid styles are 'userlist' .
&gt; {auth, userlist},
&gt; 
&gt; %% If auth is set to 'userlist' then this is the
&gt; %% list of usernames and passwords for access to the
&gt; %% admin panel.
&gt; {userlist, [{"user", "pass"}
&gt; ]},
&gt; 
&gt; %% The admin panel is broken up into multiple
&gt; %% components, each of which is enabled or disabled
&gt; %% by one of these settings.
&gt; {admin, true}
&gt; ]}
&gt; ].
&gt; Your config file is truncated somehow.
&gt; 
&gt; -Jared
&gt; 

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

