---
title: "Re: combining Riak (CS) and Spark/shark by speaking over s3 protocol"
description: ""
project: community
lastmod: 2013-07-30T15:47:28-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11824"
mailinglist_parent_id: "msg11819"
author_name: "Mark Hamstra"
project_section: "mailinglistitem"
sent_date: 2013-07-30T15:47:28-07:00
---


Others have certainly found benefits in combining Spark/Shark with a
Dynamo-type KV-store. With robust Hadoop Input/OutputFormats it's not too
difficult (e.g. see
thisand
this ), and It may be possible to do
as you suggest with the s3 API of Riak CS. What also may be worth
exploring is if Riak and Spark/Shark can rendezvous via
Tachyon.
 That would be more of a research project right now, but it could end up
someplace interesting.


On Tue, Jul 30, 2013 at 1:24 PM, Dan Kerrigan wrote:

&gt; Geert-Jan -
&gt;
&gt; We're currently working on a somewhat similar project to integrate Flume
&gt; to ingest data into Riak CS for later processing using Hadoop. The
&gt; limitations of HDFS/S3, when using the s3:// or s3n:// URIs, seem to
&gt; revolve around renaming objects (copy/delete) in Riak CS. If you can avoid
&gt; that, this link should work fine.
&gt;
&gt; Regarding how data is stored in Riak CS, the data block storage is Bitcask
&gt; with manifest storage being held in LevelDB. Riak CS is optimized for
&gt; larger object sizes and I believe smaller object sizes would not be nearly
&gt; as efficient as working with plain Riak if only because of the overhead
&gt; incurred by Riak CS. The benefits of Riak generally carry over to Riak CS
&gt; so there shouldn't be any need to worry about losing raw power.
&gt;
&gt; Respectfully -
&gt; Dan Kerrigan
&gt;
&gt;
&gt; On Tue, Jul 30, 2013 at 2:21 PM, gbrits  wrote:
&gt;
&gt;&gt; This may be totally missing the mark but I've been reading up on ways to
&gt;&gt; do
&gt;&gt; fast iterative processing in Storm or Spark/shark, with the ultimate goal
&gt;&gt; of
&gt;&gt; results ending up in Riak for fast multi-key retrieval.
&gt;&gt;
&gt;&gt; I want this setup to be as lean as possible for obvious reasons so I've
&gt;&gt; started to look more closely at the possible Riak CS / Spark combo.
&gt;&gt;
&gt;&gt; Apparently, please correct if wrong, Riak CS sits on top of Riak and is
&gt;&gt; S3-api compliant. Underlying the db for the objects is levelDB (which
&gt;&gt; would
&gt;&gt; have been my choice anyway, bc of the low in-mem key overhead) Apparently
&gt;&gt; Bitcask is also used, although it's not clear to me what for exactly.
&gt;&gt;
&gt;&gt; At the same time Spark (with Shark on top, which is what Hive is for
&gt;&gt; Hadoop
&gt;&gt; if that in any way makes things clearer) can use HDFS or S3 as it's so
&gt;&gt; called 'deep store'.
&gt;&gt;
&gt;&gt; Combining this it seems, Riak CS and Spark/Shark could be a nice pretty
&gt;&gt; tight combo providing interative and adhoc quering through Shark + all the
&gt;&gt; excellent stuff of Riak through the S3 protocol which they both speak .
&gt;&gt;
&gt;&gt; Is this correct?
&gt;&gt; Would I loose any of the raw power of Riak when going with Riak CS? Anyone
&gt;&gt; ever tried this combo?
&gt;&gt;
&gt;&gt; Thanks,
&gt;&gt; Geert-Jan
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; --
&gt;&gt; View this message in context:
&gt;&gt; http://riak-users.197444.n3.nabble.com/combining-Riak-CS-and-Spark-shark-by-speaking-over-s3-protocol-tp4028621.html
&gt;&gt; Sent from the Riak Users mailing list archive at Nabble.com.
&gt;&gt;
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

