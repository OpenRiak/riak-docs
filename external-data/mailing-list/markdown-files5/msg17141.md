---
title: "Re: Using $bucket index for listing keys"
description: ""
project: community
lastmod: 2016-03-11T04:53:28-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17141"
mailinglist_parent_id: "msg17138"
author_name: "Oleksiy Krivoshey"
project_section: "mailinglistitem"
sent_date: 2016-03-11T04:53:28-08:00
---


Here is an example of the HTTP 2i query returning the same continuation as
provided in query params:


curl '
http://127.0.0.1:8098/types/fs\\_chunks/buckets/0r0e5wahrhsgpolk9stbnrqmp77fjjye.chunks/index/$bucket/0r0e5wahrhsgpolk9stbnrqmp77fjjye.chunks?max\\_results=10&continuation=g20AAAAja1AzdzJwOXpYcVoyb0F4NDhTMVNnRUpBbGJ0ZkhVdkk6MjU=
'

{"keys":["4rpG2PwRTs3YqasGGYrhACBvZqTg7mQW:0","4rpG2PwRTs3YqasGGYrhACBvZqTg7mQW:2","FSEky50kr2TLkBuo1JKv6sphINYwnJfV:1","F3KcwtjG9VAtM5u8vbwBuCjuGBrPTnfq:0","RToMNlsnVKvXcawQK6BGnCAKx58pC9xX:1","UMiHx4qDR5pHWT9OgLAu1KMlFeEKbISm:0","F3KcwtjG9VAtM5u8vbwBuCjuGBrPTnfq:2","YQlRWkJPFYiLlAwhvgqOysJC3ycmQ9OA:0","kP3w2p9zXqZ2oAx48S1SgEJAlbtfHUvI:15","kP3w2p9zXqZ2oAx48S1SgEJAlbtfHUvI:25"],"continuation":"g20AAAAja1AzdzJwOXpYcVoyb0F4NDhTMVNnRUpBbGJ0ZkhVdkk6MjU="}

How is that possible?

On 11 March 2016 at 12:06, Oleksiy Krivoshey  wrote:

&gt; Anyone?
&gt;
&gt; On 4 March 2016 at 19:11, Oleksiy Krivoshey  wrote:
&gt;
&gt;&gt; I have a bucket with ~200 keys in it and I wanted to iterate them with
&gt;&gt; the help of $bucket index and 2i request, however I'm facing the recursive
&gt;&gt; behaviour, for example I send the following 2i request:
&gt;&gt;
&gt;&gt; {
&gt;&gt; bucket: 'BUCKET\\_NAME',
&gt;&gt; type: 'BUCKET\\_TYPE',
&gt;&gt; index: '$bucket',
&gt;&gt; key: 'BUCKET\\_NAME',
&gt;&gt; qtype: 0,
&gt;&gt; max\\_results: 10,
&gt;&gt; continuation: 'AAAA'
&gt;&gt; }
&gt;&gt;
&gt;&gt; I receive 10 keys and continuation 'BBBB', I then repeat the request with
&gt;&gt; continuation 'BBBB' and at this point I can receive a reply with
&gt;&gt; continuation 'CCCC' or 'AAAA' or even 'BBBB' and its going in never ending
&gt;&gt; recursion.
&gt;&gt;
&gt;&gt; I'm running this on a 5 node 2.1.3 cluster.
&gt;&gt;
&gt;&gt; What I'm doing wrong? Or is this not supported at all?
&gt;&gt;
&gt;&gt; Thanks!
&gt;&gt;
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

