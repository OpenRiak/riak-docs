---
title: "Maybe a bug of riak_core?"
description: ""
project: community
lastmod: 2014-04-18T01:08:26-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14112"
author_name: "chuang"
project_section: "mailinglistitem"
sent_date: 2014-04-18T01:08:26-07:00
---


In the source of riak\\_core\\_gossip(version 1.4.8),there is a function source
below:

451 attempt\\_simple\\_transfer(Seed, Ring, [{\\_, N}|Rest], TargetN, Exit, Idx,
Last) -&gt;
452 %% just keep track of seeing this node
453 attempt\\_simple\\_transfer(Seed, Ring, Rest, TargetN, Exit, Idx+1,
454 lists:keyreplace(N, 1, Last, {N, Idx}));

I think the source
451 attempt\\_simple\\_transfer(Seed, Ring, [{\\_, N}|Rest], TargetN, Exit, Idx,
Last) -&gt;

should be:
451 attempt\\_simple\\_transfer(Seed, Ring, [{N, \\_}|Rest], TargetN, Exit, Idx,
Last) -&gt;

since in line 454,the lists:keyreplace function operate key on position 1.
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

