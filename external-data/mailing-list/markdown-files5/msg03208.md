---
title: "Re: EC2 and node names"
description: ""
project: community
lastmod: 2011-05-03T10:35:59-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03208"
mailinglist_parent_id: "msg03201"
author_name: "Jeff Pollard"
project_section: "mailinglistitem"
sent_date: 2011-05-03T10:35:59-07:00
---


Grant,

Thanks for the reply. I think I understand what you're saying, but it's not
100% clear to me how exactly it applies to my question. I'll try explaining
my plan another way if that helps.

Imagine we have 4 nodes running in a ring on EC2: riak@10.5.0.1,
riak@10.5.0.2, riak@10.5.0.3, riak@10.5.0.4. Then one day node
riak@10.5.0.3 goes down and is unrecoverable. Our plan had been:

# On a existing node in the cluster
riak-admin remove riak@10.5.0.3
riak-admin ringready
# .. wait for TRUE

# Boot a new EC2 machine configured as riak@10.5.0.5 (brand new IP)
# Then on that new machine...
riak start
riak-admin join riak@10.5.0.1
riak-admin ringready
# .. wait for TRUE

In that scenario, I imagine the issue is that removing and adding a new node
under a new node name is putting extra strain on the cluster to shift data
around? Simply replacing a new node under the same hostname (even though it
has a different IP) would mean less work for the cluster? And how much
extra work are

Thanks!

On Tue, May 3, 2011 at 6:24 AM, Grant Schofield  wrote:

&gt;
&gt; On May 2, 2011, at 7:58 PM, Jeff Pollard wrote:
&gt;
&gt; I was reviewing the Riak Operations 
&gt; webinar,
&gt; and it was mentioned that the preferred vm.args -name for EC2 environments
&gt; should be "riak@hostname" because you don't have to "rename data or do
&gt; anything weird" like you would if your nodes were named "riak@ip.address"
&gt; (approximately 40:05 in the video).
&gt;
&gt; I was looking for some elaboration on this tip, namely:
&gt;
&gt; 1. What is meant by "rename data or do anything weird"
&gt;
&gt; When you bring a cluster together using data copied from a different set of
&gt; nodes you need to re-ip the first node you plan to start but you also have
&gt; to change the ring manually on that node so when the subsequent nodes join
&gt; everything works properly.
&gt;
&gt;
&gt; 1. Is "hostname" in riak@hostname a public DNS host that you configure
&gt; in your DNS to map to the EC2 public hostname (ec2-50-18-...)?
&gt;
&gt; You can use DNS (public or private) or host file entries that reference the
&gt; private IP of the node if you choose to use hostname.
&gt;
&gt;
&gt; 1. Does anyone have any best practices around vm.args -name in EC2
&gt; environments?
&gt;
&gt; We haven't outlined any best practices ourselves, but I tend to believe
&gt; using a hostname that you can change the IP for via DNS or a hosts file is a
&gt; more flexible way of approaching the problem.
&gt;
&gt; Grant
&gt;
&gt;
&gt; Thanks!
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

