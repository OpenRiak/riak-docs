---
title: "Re: Riak 1.3.1 crash when directory used by AAE is full"
description: ""
project: community
lastmod: 2013-05-28T22:58:53-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11189"
author_name: "Mark Phillips"
project_section: "mailinglistitem"
sent_date: 2013-05-28T22:58:53-07:00
---


Hi Dave,

Thanks for the info. A few follow up questions:

\\* How much total data is in the cluster?
\\* Have you changed the AAE default settings at all? If so, to what?
\\* How much space was allocated for the AAE FS?

&gt;
I was not expecting that AAE issues would be able to kill Riak.
&gt;

So, we've never seen this before in testing, but, admittedly, we never
tested the case where AAE wasn't given enough disk space. While it's a
sub-optimal behavior, it's no different than Riak (or any other db daemon)
running out of storage space and dying. That said, the docs are \\*very\\*
sparse on AAE, and we only lay out the config defaults as part of the KV
section in the app.config file [0]. At the very least we should have the
expected systems needs for AAE storage documented. There's probably a
middle-ground mitigated with documentation in the short term. We're trying
to freeze for 1.4 at the moment, but I'll make sure this gets some
discussion time after that's done.

Mark

[0] http://docs.basho.com/riak/latest/references/Configuration-Files/



On Mon, May 27, 2013 at 10:22 AM, Dave Brady  wrote:

&gt; Greetings,
&gt;
&gt; Some background: I have been testing using AAE in our backup ring. I did
&gt; not want the AAE data to sit on our (expensive and comparatively limited)
&gt; SSD disks, so I created a LV for it on the systems' SAS disks.
&gt;
&gt; All seemed well for a few weeks.
&gt;
&gt; I got to doing other stuff for a bit, and when I came back to this ring
&gt; today, I noticed that the filesystem used by AAE was full on all nodes. I
&gt; then noticed that Riak had crashed on every node because this problem.
&gt;
&gt; I was not expecting that AAE issues would be able to kill Riak.
&gt;
&gt; Anyone else had this happen?
&gt; --
&gt; Dave Brady
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

