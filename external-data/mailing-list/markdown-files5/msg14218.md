---
title: "Re: Regarding expired keys in riak-bitcask"
description: ""
project: community
lastmod: 2014-05-13T15:33:06-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14218"
mailinglist_parent_id: "msg14216"
author_name: "Evan Vigil-McClanahan"
project_section: "mailinglistitem"
sent_date: 2014-05-13T15:33:06-07:00
---


(remember to follow up on-list!)

I guess if I were trying to do that I'd structure it as: |-- 1 byte
client id --|------- 3 bytes, integer ----|
Just roll over when you get to the end, assuming that you're not
writing more than 2\\*\\*24 values per client in your expiry period (in
which case you can just extend to 4 bytes or 5 or whatever). The
tricky thing there is remembering the most recently used per-client
integer when you crash, but that isn't too hard.

This is to avoid the fact that there is no way to get a list of
expired keys, other than listing all the keys in the cluster, which is
awfully expensive.

On Tue, May 13, 2014 at 10:32 AM, Venkatachalam Subramanian
 wrote:
&gt; Thank you so much for the quick response!
&gt;
&gt; Yes, I have a case where I can use only keys 4 bytes in size and these keys
&gt; would expire over time. So, I should be able to reuse the expired keys
&gt; instead of constantly creating new keys.
&gt;
&gt; I guess I would create my own keys. Do you know of a way to get a list of
&gt; the expired keys so that I can reuse them instead of plainly creating new
&gt; keys?
&gt;
&gt; I am inclined to riak-bitcask since it has the expiry option. I would have
&gt; to implement only the reuse mechanism.
&gt;
&gt; On May 13, 2014 12:25 PM, "Evan Vigil-McClanahan" 
&gt; wrote:
&gt;&gt;
&gt;&gt; 1. The keys are meant to be unique, so there is a very, very, very low
&gt;&gt; probability of their reuse.
&gt;&gt; 2. No, sorry.
&gt;&gt;
&gt;&gt; It's best to generate your own keys in any case, reading the code it
&gt;&gt; looks like the auto-generated keys are only available via HTTP.
&gt;&gt;
&gt;&gt; On Tue, May 13, 2014 at 9:53 AM, Venkatachalam Subramanian
&gt;&gt;  wrote:
&gt;&gt; &gt; Hello All,
&gt;&gt; &gt;
&gt;&gt; &gt; I'm new to Riak/Bitcask. The documentation and FAQs were very useful.
&gt;&gt; &gt;
&gt;&gt; &gt; I had a question about the keys that expired in riak/bitcask using
&gt;&gt; &gt; 'expiry\\_secs'.
&gt;&gt; &gt; Assuming I use the auto generated keys,
&gt;&gt; &gt;
&gt;&gt; &gt; 1. When a key expires, will the same key be reused at a later stage?
&gt;&gt; &gt; 2. Can I change the length of the auto-generated key (say to 4 bytes) ?
&gt;&gt; &gt;
&gt;&gt; &gt; I really appreciate the help.
&gt;&gt; &gt; Thank You.
&gt;&gt; &gt; --
&gt;&gt; &gt; Regards,
&gt;&gt; &gt; Venkat Subramanian
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; &gt; riak-users mailing list
&gt;&gt; &gt; riak-users@lists.basho.com
&gt;&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt; &gt;

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

