---
title: "Re: Can't start second node in local machine"
description: ""
project: community
lastmod: 2011-11-19T14:31:47-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05685"
mailinglist_parent_id: "msg05682"
author_name: "Jeff Kirkell"
project_section: "mailinglistitem"
sent_date: 2011-11-19T14:31:47-08:00
---


One other thing to note, if you ever started the second node with the old
name from the vm.args file, you need to do a reip. See the Wiki for details
on how to run.

Jeff

On Sat, Nov 19, 2011 at 2:59 PM, Jeremiah Peschka &lt;
jeremiah.pesc...@gmail.com&gt; wrote:

&gt; There are no books about Riak, yet. Mathias Meyer wrote a NoSQL handbook
&gt; that has a chapter about Riak, but I've never read it. Seven Databases in
&gt; Seven Weeks is rumored to contain a chapter about Riak, but it's just in a
&gt; planning stage, I believe. You can search the mailing list archives through
&gt; markmail: http://markmail.org/search/?q=list%3Acom.basho.lists.riak-users
&gt;
&gt; The Fast Track doesn't do anything hidden, it uses `make` and `rebar` to
&gt; create a 4 node cluster by copying the configuration and binary folders.
&gt; You can see what happens by looking in the Makefile for the devrel section.
&gt; It's pretty dull and it just copies configuration around with some magic to
&gt; change the port numbers.
&gt;
&gt; I can appreciate wanting to manually configure Riak and all, but keep in
&gt; mind that having multiple Riak nodes on the same physical machine is not
&gt; recommended for production use. The only thing that you're going to be
&gt; change is the name you're using for the node. When in doubt, take the path
&gt; of least resistance.
&gt;
&gt; If you're still intent on doing all of this by hand, you need to make sure
&gt; that you also change the handoff\\_port and pb\\_port in the node configuration
&gt; file. When I run a diff on my node1 and node2 config files, I see the
&gt; following:
&gt;
&gt; $ diff dev1/etc/app.config dev2/etc/app.config
&gt; 11c11
&gt; &lt; {http, [ {"0.0.0.0", 8091 } ]},
&gt; ---
&gt; &gt; {http, [ {"0.0.0.0", 8092 } ]},
&gt; 15c15
&gt; &lt; %{https, [{ "0.0.0.0", 8091 }]},
&gt; ---
&gt; &gt; %{https, [{ "0.0.0.0", 8092 }]},
&gt; 26c26
&gt; &lt; {handoff\\_port, 8101 },
&gt; ---
&gt; &gt; {handoff\\_port, 8102 },
&gt; 55c55
&gt; &lt; {pb\\_port, 8081 },
&gt; ---
&gt; &gt; {pb\\_port, 8082 },
&gt;
&gt; HTH
&gt;
&gt; ---
&gt; Jeremiah Peschka - Founder, Brent Ozar PLF, LLC
&gt; Microsoft SQL Server MVP
&gt;
&gt; On Nov 19, 2011, at 1:14 AM, yozloy wrote:
&gt;
&gt; &gt; Hey Jeremiah,
&gt; &gt;
&gt; &gt; I change the port that RIak listening on by changing the {http,
&gt; [{"127.0.0.1",8098}]} to {http, [{127.0.0.1}, 8099]} in the etc/app.config,
&gt; but the Node 'riak2@127.0.0.1' not responding to pings.
&gt; &gt;
&gt; &gt; And the fast track seems to me use some sh file hidden some command, I
&gt; want do manually configure RIak.
&gt; &gt;
&gt; &gt; Could you recommend some books or any reading material about Riak
&gt; besides the online official documentation?
&gt; &gt;
&gt; &gt; Thanks
&gt; &gt;
&gt; &gt; On Nov 19, 2011, at 12:08 PM, Jeremiah Peschka wrote:
&gt; &gt;
&gt; &gt;&gt;
&gt; &gt;&gt; Did you change the ports that Risk is listening on for the second
&gt; instance?
&gt; &gt;&gt;
&gt; &gt;&gt; If you follow the Riak fast track, it explains how to set up a 4 node
&gt; cluster.
&gt; &gt;&gt;
&gt; &gt;&gt; Jeremiah Peschka
&gt; &gt;&gt; Founder, Brent Ozar PLF
&gt; &gt;&gt;
&gt; &gt;&gt; On Nov 18, 2011 7:24 PM, "yozloy"  wrote:
&gt; &gt;&gt; I copied the riak-1.0.2 folder, and change the node name to
&gt; riak2@127.0.0.1 in the vm.args file. But the changed node refused to
&gt; start, it returned
&gt; &gt;&gt;
&gt; &gt;&gt; Argo:bin yozloy$ ./riak start
&gt; &gt;&gt; !!!!
&gt; &gt;&gt; !!!! WARNING: ulimit -n is 256; 1024 is the recommended minimum.
&gt; &gt;&gt; !!!!
&gt; &gt;&gt; Riak failed to start within 15 seconds,
&gt; &gt;&gt; see the output of 'riak console' for more information.
&gt; &gt;&gt; If you want to wait longer, set the environment variable
&gt; &gt;&gt; WAIT\\_FOR\\_ERLANG to the number of seconds to wait.
&gt; &gt;&gt; Argo:bin yozloy$ ls
&gt; &gt;&gt;
&gt; &gt;&gt;
&gt; &gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt;&gt; riak-users mailing list
&gt; &gt;&gt; riak-users@lists.basho.com
&gt; &gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; &gt;
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

