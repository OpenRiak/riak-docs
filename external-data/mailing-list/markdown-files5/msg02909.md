---
title: "Re: riak_core and crashed FSM vnode"
description: ""
project: community
lastmod: 2011-04-06T17:24:44-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02909"
mailinglist_parent_id: "msg02908"
author_name: "Ryan Zezeski"
project_section: "mailinglistitem"
sent_date: 2011-04-06T17:24:44-07:00
---


Lemme guess, sync\\_spawn\\_command? If so it sets timeout to infinity so your 
shell process is locked in a receive.

[Sent from my iPhone]

On Apr 6, 2011, at 7:41 PM, Mike Oxford  wrote:

&gt; When you crash a riak\\_cord vnode with a console attached, what is the 
&gt; expected behaviour (ba-dum, dump)?
&gt; 
&gt; I ran a riak\\_core vnode with some bad code (1/0) to cause a bad arith crash 
&gt; in the FSM, initiated from the a console (via node "attach").
&gt; 
&gt; It crashed as expected, obviously, "\\*\\* State machine &lt;0.85.0&gt; terminating" 
&gt; Good.
&gt; The attached console was then hung. I could ^C and break out of it...but I 
&gt; chose ^D to close the connection. Okay, now reattach.
&gt; 
&gt; I would expect that the vnode\\_master supervisor would have restarted the FSM, 
&gt; as it's set to start\\_link in the supervisor's init.
&gt; 
&gt; However, when I reattached it was in a "dead" state. I could not execute any 
&gt; command, including "2+2."
&gt; ^C-q to quit out, reattach, node is down (obviously.)
&gt; 
&gt; Is this "hang status" because I took it down while a shell was attached, or 
&gt; is there something else which may prevent the vnode\\_master from
&gt; restarted the crashed vnode/FSM?
&gt; 
&gt; Thanks!
&gt; 
&gt; -mox 
&gt; 
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

