---
title: "RE: Getting basho_bench to work."
description: ""
project: community
lastmod: 2013-03-20T14:03:02-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg10516"
mailinglist_parent_id: "msg10514"
author_name: "Kevin Burton"
project_section: "mailinglistitem"
sent_date: 2013-03-20T14:03:02-07:00
---


I changed the one line to concurrent,4 and I get a message:

 

{{badmatch,{error,econnrefused}},[{inet\\_tcp\\_dist,listen,1,[{file,"inet\\_tcp\\_d
ist.erl"},{line,70}]},{net\\_kernel,start\\_protos,4,[{file,"net\\_kernel.erl"},{l
ine,1314}]},{net\\_kernel,start\\_protos,3,[{file,"net\\_kernel.erl"},{line,1307}]
},{net\\_kernel,init\\_node,2,[{file,"net\\_kernel.erl"},{line,1197}]},{net\\_kernel
,init,1,[{file,"net\\_kernel.erl"},{line,357}]},{gen\\_server,init\\_it,6,[{file,"
gen\\_server.erl"},{line,304}]},{proc\\_lib,init\\_p\\_do\\_apply,3,[{file,"proc\\_lib.e
rl"},{line,227}]}]}

 

15:56:37.421 [error] Failed to start net\\_kernel for
basho\\_bench\\_measurement\\_erlangvm:
{shutdown,{child,undefined,net\\_sup\\_dynamic,{erl\\_distribution,start\\_link,[['b
asho\\_bench@127.0.0.1']]},permanent,1000,supervisor,[erl\\_distribution]}}

 

I do see worker 4 starting up as I wanted.

 

15:56:37.304 [info] Using http target "172.16.34.56":8098 for worker 4

15:56:37.305 [info] Using pb target "172.16.34.56":8087 for worker 4

 

From: Dan Reverri [mailto:d...@basho.com] 
Sent: Wednesday, March 20, 2013 3:47 PM
To: Kevin Burton
Cc: Mark Phillips; riak-users@lists.basho.com
Subject: Re: Getting basho\\_bench to work.

 

Hi Kevin,

 

You've specified 3 workers in your config:

{concurrent, 3}.

 

Test results are stored in CSV files located in timestamped directories
under a local "test" directory. The CSV files can be used to generate graphs
using R. More information can be found here:

http://docs.basho.com/riak/latest/cookbooks/Benchmarking/#Generating-Benchma
rk-Graphs

 

 




Daniel Reverri
Client Architect
Basho Technologies, Inc.
d...@basho.com

 

On Wed, Mar 20, 2013 at 1:39 PM, Kevin Burton 
wrote:

I got rid of the "not enough results . . ." messages by adding
{enforce\\_keyrange, 1000}. To the configuration. But this leaves two
questions:

 

1) I see messages like:

 

15:27:06.175 [info] Using http target "172.16.33.221":8098 for worker 1

15:27:06.175 [info] Using pb target "172.16.33.221":8087 for worker 1

 

Even though I listed 4 nodes I only see worker type messages for up to 3. I
was expecting to see worker message for worker 4 but it is not there

 

2) At the end I see:

 

15:27:07.195 [info] Application basho\\_bench started on node
'basho\\_bench@127.0.0.1'

15:28:08.214 [info] No Errors.

15:28:08.219 [info] Application basho\\_bench exited with reason: stopped

15:28:08.223 [info] Test completed after 1 mins.

 

Shouldn't I see some kind of results? I only see that it ran with no errors.
Are the results of the run put somewhere else?

 

From: Kevin Burton [mailto:rkevinbur...@charter.net] 
Sent: Wednesday, March 20, 2013 2:29 PM
To: 'Dan Reverri'
Cc: 'Mark Phillips'; 'riak-users@lists.basho.com'
Subject: RE: Getting basho\\_bench to work.

 

This is a major step forward. It actually is doing something. Thank you. Now
the output is littered with messages like 'not enough results . . . ',
instead of results. Ideas?

 

From: Dan Reverri [mailto:d...@basho.com] 
Sent: Wednesday, March 20, 2013 2:17 PM
To: Kevin Burton
Cc: Mark Phillips; riak-users@lists.basho.com


Subject: Re: Getting basho\\_bench to work.

 

Actually, I think the config option needs to be:

 

"{mynode, ['  basho\\_bench@127.0.0.1']}."




Daniel Reverri
Client Architect
Basho Technologies, Inc.
d...@basho.com

 

On Wed, Mar 20, 2013 at 12:12 PM, Kevin Burton 
wrote:

I am not sure what 'freenode' is. But I have some time now.


-----Original Message-----
From: Mark Phillips [mailto:m...@basho.com]
Sent: Wednesday, March 20, 2013 1:57 PM
To: Kevin Burton

 

Not enough results for query\\_pb: 904/913/[]

Not enough results for query\\_http: 100/109/[&lt;&lt;"107"&gt;&gt;]

Not enough results for query\\_http: 167/176/[&lt;&lt;"172"&gt;&gt;,&lt;&lt;"168"&gt;&gt;]

Not enough results for query\\_http: 614/623/[]

Not enough results for query\\_pb: 309/318/[]

Not enough results for query\\_pb: 605/614/[]

Not enough results for query\\_pb: 779/788/[]

Not enough results for query\\_http: 872/881/[&lt;&lt;"876"&gt;&gt;]

Not enough results for query\\_mr: 452/461/[[&lt;&lt;"mybucket"&gt;&gt;,&lt;&lt;"460"&gt;&gt;]]

Not enough results for query\\_http: 141/150/[&lt;&lt;"145"&gt;&gt;]

Not enough results for query\\_pb: 853/862/[]

Not enough results for query\\_mr: 922/931/[[&lt;&lt;"mybucket"&gt;&gt;,&lt;&lt;"927"&gt;&gt;]]

Not enough results for query\\_http: 880/889/[&lt;&lt;"889"&gt;&gt;]

Not enough results for query\\_mr: 365/374/[[&lt;&lt;"mybucket"&gt;&gt;,&lt;&lt;"374"&gt;&gt;]]

Not enough results for query\\_http: 194/203/[&lt;&lt;"198"&gt;&gt;]

Not enough results for query\\_mr: 621/630/[[&lt;&lt;"mybucket"&gt;&gt;,&lt;&lt;"626"&gt;&gt;]]

Not enough results for query\\_pb: 952/961/[]

Not enough results for query\\_http: 384/393/[&lt;&lt;"392"&gt;&gt;]

Not enough results for query\\_http: 371/380/[&lt;&lt;"374"&gt;&gt;]

Not enough results for query\\_pb: 359/368/[[&lt;&lt;"mybucket"&gt;&gt;,&lt;&lt;"363"&gt;&gt;],

 [&lt;&lt;"mybucket"&gt;&gt;,&lt;&lt;"359"&gt;&gt;]]

 

Cc: Roberto Aloi; riak-users@lists.basho.com


Subject: Re: Getting basho\\_bench to work.

Hey Kevin,

Any chance you can pop into #riak on freenode? We can do this
trouble-shooting in real time. :)

Mark

On Wed, Mar 20, 2013 at 11:42 AM, Kevin Burton 
wrote:
&gt; So your theory is the the 'check the configuration' is not from
&gt; basho\\_bench but from erlang. What configuration needs to change? The
&gt; link mentions running a deamon that maps long names to short names. Do
&gt; I need that? As far as I can tell I am using the "standard" naming
&gt; convetion (r...@xxx.xxx.xxx.xxx). Do you think this is a 'long name'?
&gt;
&gt;
&gt;
&gt; From: Roberto Aloi [mailto:prof...@gmail.com]
&gt; Sent: Wednesday, March 20, 2013 1:16 PM
&gt; To: Kevin Burton
&gt; Cc: riak-users@lists.basho.com
&gt;
&gt;
&gt; Subject: Re: Getting basho\\_bench to work.
&gt;
&gt;
&gt;
&gt; Hi,
&gt;
&gt;
&gt;
&gt; At a glance, it looks like the basho\\_bench node couldn't start
&gt; correctly with a longname.
&gt;
&gt; How are you starting basho\\_bench?
&gt;
&gt;
&gt;
&gt; This issue could be due to a misconfiguration in the hostname for your
&gt; machine.
&gt;
&gt; How do your /etc/hosts and /etc/hostname look like?
&gt;
&gt;
&gt;
&gt; For information about shortnames and longnames in Erlang:
&gt;
&gt;
&gt;
&gt; http://www.snookles.com/erlang-docs/R15B03/doc/reference\\_manual/distri
&gt; buted.html
&gt;
&gt;
&gt;
&gt;
&gt;
&gt; On Wed, Mar 20, 2013 at 6:36 PM, Kevin Burton
&gt; 
&gt; wrote:
&gt;
&gt; I reiterate the request to see what is wrong with my basho\\_bench
&gt; configuration. I have attached the configuration as well as the
&gt; output. Any ideas as to what is wrong would be greatly appreciated. I
&gt; basically used the templates in the 'examples' folder but apparently
&gt; there is something wrong.
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
&gt;
&gt;
&gt;
&gt; --
&gt; Roberto Aloi
&gt; ---
&gt; Website: http://roberto-aloi.com
&gt; Twitter: @robertoaloi
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;


\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

 

 

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

