---
title: "Re: Python: More problems with counters"
description: ""
project: community
lastmod: 2014-08-17T11:14:04-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14681"
mailinglist_parent_id: "msg14680"
author_name: "Alex De la rosa"
project_section: "mailinglistitem"
sent_date: 2014-08-17T11:14:04-07:00
---


Hi Eric!

Thank you very much! this certainly solved it! :) however, I have to say
that is very non intuitive as "bucket\\_type" would look like the data type
(counter, set, map) and the "bucket" part the name of the bucket you
created... so it looks as it should work exactly the contrary as how it has
to be done (&gt;&lt;).

However, is finally fixed and I can finally use counters! thank you so much.

Thanks!
Alex


On Sun, Aug 17, 2014 at 8:04 PM, Eric Redmond  wrote:

&gt; Alex,
&gt;
&gt; looking through your previous emails, it looked like you created a bucket
&gt; type named "likes". If that's the case, you'd swap the function params:
&gt;
&gt; bucket = client.bucket\\_type('likes').bucket('counter\\_bucket')
&gt;
&gt; Hope that helps,
&gt; Eric
&gt;
&gt;
&gt; On Aug 17, 2014, at 10:33 AM, Alex De la rosa 
&gt; wrote:
&gt;
&gt; &gt; Hi there,
&gt; &gt;
&gt; &gt; I was able to install the latest python client version with "pip install
&gt; riak==2.1.0rc1", however, counters still fails to work... I used the
&gt; following code ( that is the same as in the documentation ):
&gt; &gt;
&gt; &gt; bucket = client.bucket\\_type('counter\\_bucket').bucket('likes')
&gt; &gt;
&gt; &gt; however I get the following error:
&gt; &gt;
&gt; &gt; Traceback (most recent call last):
&gt; &gt; File "x.py", line 18, in 
&gt; &gt; counter = bucket.new('Barcelona')
&gt; &gt; File "/usr/local/lib/python2.7/dist-packages/riak/bucket.py", line
&gt; 159, in new
&gt; &gt; if self.bucket\\_type.datatype:
&gt; &gt; File "/usr/local/lib/python2.7/dist-packages/riak/util.py", line 78,
&gt; in \\_\\_get\\_\\_
&gt; &gt; value = self.fget(obj)
&gt; &gt; File "/usr/local/lib/python2.7/dist-packages/riak/bucket.py", line
&gt; 618, in datatype
&gt; &gt; return self.get\\_properties().get('datatype')
&gt; &gt; File "/usr/local/lib/python2.7/dist-packages/riak/bucket.py", line
&gt; 557, in get\\_properties
&gt; &gt; return self.\\_client.get\\_bucket\\_type\\_props(self)
&gt; &gt; File
&gt; "/usr/local/lib/python2.7/dist-packages/riak/client/transport.py", line
&gt; 184, in wrapper
&gt; &gt; return self.\\_with\\_retries(pool, thunk)
&gt; &gt; File
&gt; "/usr/local/lib/python2.7/dist-packages/riak/client/transport.py", line
&gt; 126, in \\_with\\_retries
&gt; &gt; return fn(transport)
&gt; &gt; File
&gt; "/usr/local/lib/python2.7/dist-packages/riak/client/transport.py", line
&gt; 182, in thunk
&gt; &gt; return fn(self, transport, \\*args, \\*\\*kwargs)
&gt; &gt; File
&gt; "/usr/local/lib/python2.7/dist-packages/riak/client/operations.py", line
&gt; 265, in get\\_bucket\\_type\\_props
&gt; &gt; return transport.get\\_bucket\\_type\\_props(bucket\\_type)
&gt; &gt; File
&gt; "/usr/local/lib/python2.7/dist-packages/riak/transports/pbc/transport.py",
&gt; line 381, in get\\_bucket\\_type\\_props
&gt; &gt; MSG\\_CODE\\_GET\\_BUCKET\\_RESP)
&gt; &gt; File
&gt; "/usr/local/lib/python2.7/dist-packages/riak/transports/pbc/connection.py",
&gt; line 50, in \\_request
&gt; &gt; return self.\\_recv\\_msg(expect)
&gt; &gt; File
&gt; "/usr/local/lib/python2.7/dist-packages/riak/transports/pbc/connection.py",
&gt; line 142, in \\_recv\\_msg
&gt; &gt; raise RiakError(err.errmsg)
&gt; &gt; riak.RiakError: 'Invalid bucket type: &lt;&lt;"counter\\_bucket"&gt;&gt;'
&gt; &gt;
&gt; &gt; It says the bucket type is wrong (but is the same as in the
&gt; documentation)... I tried other combinations and all of them failed too:
&gt; &gt;
&gt; &gt; riak.RiakError: 'Invalid bucket type: &lt;&lt;"counters\\_bucket"&gt;&gt;'
&gt; &gt; riak.RiakError: 'Invalid bucket type: &lt;&lt;"counters"&gt;&gt;'
&gt; &gt; riak.RiakError: 'Invalid bucket type: &lt;&lt;"counter"&gt;&gt;'
&gt; &gt;
&gt; &gt; so... no plural, no singular, not isolated... which is the correct
&gt; "bucket\\_type" to use then??
&gt; &gt;
&gt; &gt; Thanks!
&gt; &gt; Alex
&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

