---
title: "Re: multi-get optimisation"
description: ""
project: community
lastmod: 2013-10-31T09:26:38-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12814"
mailinglist_parent_id: "msg12785"
author_name: "Dmitri Zagidulin"
project_section: "mailinglistitem"
sent_date: 2013-10-31T09:26:38-07:00
---


Vincent,

How large are the objects that you're requesting? (in the 1000 objs
example).
Also, what does your cluster configuration look like? How many nodes? Are
you load-balancing the GETs to your riak nodes (via something like
HAProxy), or are you making requests to a single riak node?

It sounds like the first thing to investigate, in your case, is - where is
the slowdown happening, on the client side or on the server side?
To get a reference data point on the cluster-side multiget performance, you
can use an external tool like https://github.com/basho/riak-data-migratoror
https://github.com/basho/basho\\_bench to get a rough idea of how many
requests/sec your Riak cluster can handle.
For example, you can download the Data Migrator (which has pretty good
multithreaded connection-pooled GETs that use the Java Riak Client) and do
an export of your cluster (or the bucket in question), and look at the
resulting objs/sec number.

If the bottleneck turns out to be on the Ruby client side, you should
investigate JRuby for better multithreaded performance, or use a
concurrency library like Celluloid.

Dmitri


On Tue, Oct 29, 2013 at 6:24 AM, Vincent Chavelle &lt;
vincent.chave...@gmail.com&gt; wrote:

&gt; Hi,
&gt;
&gt; I fell in love with riak and riak-cs, I have migrated all my stack on it
&gt; (originally from mongodb).
&gt; But I have one big issue. I have a lot of key to request simultaneously
&gt; and thanks for multi\\_get implementation (ruby) it's already optimised for
&gt; the client side (concurrent requests). But I would like to know if any
&gt; server implementation to come because, in my case, it is very very slow to
&gt; request 1000 objects (unlike mongodb).
&gt;
&gt; You will make me the happiest man in the world. And I could take off my
&gt; hideous memory caching solution :-)
&gt;
&gt; Thanks
&gt;
&gt; Vincent Chavelle
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

