---
title: "stalled handoffs with riak 1.3.1 and eleveldb"
description: ""
project: community
lastmod: 2013-05-11T22:36:22-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11052"
author_name: "Simon Effenberg"
project_section: "mailinglistitem"
sent_date: 2013-05-11T22:36:22-07:00
---


Hi list,

this morning I did a "riak-admin transfers" on the riak machines and
saw this:

[root@kriak46-1:~]# riak-admin transfers
Attempting to restart script through sudo -H -u riak
'riak@10.47.109.206' waiting to handoff 30 partitions
'riak@10.47.109.202' waiting to handoff 3 partitions
'riak@10.47.109.201' waiting to handoff 15 partitions
'riak@10.46.109.206' waiting to handoff 1 partitions
'riak@10.46.109.205' waiting to handoff 1 partitions
'riak@10.46.109.204' waiting to handoff 29 partitions
'riak@10.46.109.203' waiting to handoff 16 partitions
'riak@10.46.109.202' waiting to handoff 17 partitions
'riak@10.46.109.201' waiting to handoff 3 partitions

Active Transfers:

and this didn't changed for at least 15 minutes while checking.

I also did on each node:

riak-admin ring-status

and every node said:

Attempting to restart script through sudo -H -u riak
================================== Claimant ===================================
Claimant: 'riak@10.46.109.201'
Status: up
Ring Ready: true

============================== Ownership Handoff ==============================
No pending changes.

============================== Unreachable Nodes ==============================
All nodes are up and reachable


So why do I not see any "Ownership Handoff" on some nodes (or is this "another" 
handoff)?
Also how could I get rid of the waiting handoffs?

My solution was a rolling restart which helped. But I don't know how it was 
possible to get into this situation and also it would be nice to resolve it 
without a rolling restart.

Any ideas?

Cheers,
Simon

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

