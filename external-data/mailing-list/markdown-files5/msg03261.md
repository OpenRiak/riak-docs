---
title: "Re: Very, very slow data insert on two node cluster"
description: ""
project: community
lastmod: 2011-05-06T06:52:18-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03261"
mailinglist_parent_id: "msg03258"
author_name: "Vlatko Basic"
project_section: "mailinglistitem"
sent_date: 2011-05-06T06:52:18-07:00
---




 
 
 Hi Jeremiah,

 Yes, it is for dev. 

 I set n\\_val to 1 and checked if it's set.
 I stopped the other node so there was just the local node on the
 box I'm working on. 
 No luck!

 I retried the same "goog" insert to the same existing bucket but
 now it seems even slower. One insert in maybe 3 seconds. 

 Then I turned off HAVP proxy, but same story.

 I removed both installations and started the riaks I built. I
 haven't merge the boxes into the cluster and results are much
 better.

 70-80 inserts per second on one box (21 sec), and around 100 on
 another (13-16 secs).

Can you
 tell me are those values what should be expected for Erlang
 inserts?


 vlatko


--------

 Original MessageÂ  --------
 Subject: Re: Very, very slow data insert on two node cluster
 From: Jeremiah Peschka 
 To: riak-users@lists.basho.com
 Date: 06.05.2011 12:48

One thing you'll want to do is adjust your nval if this is
 a development cluster. With an nval of 3, one machine is always
 writing two copies of the data. If this is for dev, you can get
 away with a single node cluster and an nval of 1. 

 Jeremiah Peschka
 Founder, Brent Ozar PLF
 SQL MVP, MCITP: DBA, Database Developer


On Fri, May 6, 2011 at 5:48 AM, Vlatko
 Basic 
 wrote:
 Hi,

 I've build a cluster with two physical Ubuntu 10.10 64-bit 4GB
 machines (laptop, 2 cores, 2.4GHz and desktop, 4 cores,
 3.1GHz) and I am trying to "load\\_data goog.csv" (around 1500
 records) from a Fast Track tutorial. It took over 15 minutes.

 Riak installation (both from DEB package) is correct and
 working. Other examples worked as shown.

 1. Inserts are very, very slow. Maybe 1 insert in 2 secs???
 Memory used around 50%. Network is wired.
 2. All inserts go to the local node that I'm working on, the
 other node is idle.

 I attached status for both nodes and bucket properties.

 Is it a bug, or have I made a bug? :-)

 Thank for any ideas...
 

 vlatko

 P.S.: Sorry if this email was sent twice.




 \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
 riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com





\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com





\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

