---
title: "Re: Riak not storing data in a round-robin manner across instances"
description: ""
project: community
lastmod: 2016-05-27T14:29:22-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17431"
mailinglist_parent_id: "msg17430"
author_name: "Sam Tavakoli"
project_section: "mailinglistitem"
sent_date: 2016-05-27T14:29:22-07:00
---


Vikram:

To understand how Riak Objects are 'routed' to a specific set of
partitions have a look at [1].

A little book of Riak[2] is a good introduction to the concepts. I found
it useful when I started using Riak.

I found [3],[4],[5] and [6] very useful to understanding the
intricacies of different configurations and problems one might
experience with them.

Many thanks to John Daily for the posts.

Cheers,

[1]
http://docs.basho.com/riak/kv/2.1.4/learn/concepts/replication/#routing-an-object-to-a-set-of-partitions
[2] http://www.littleriakbook.com
[3]
http://basho.com/posts/technical/understanding-riaks-configurable-behaviors-part-1/
[4]
http://basho.com/posts/technical/understanding-riaks-configurable-behaviors-part-2/
[5]
http://basho.com/posts/technical/understanding-riaks-configurable-behaviors-part-3/
[6]
http://basho.com/posts/technical/understanding-riaks-configurable-behaviors-part-4/

On 2016-05-27 21:55, Vikram Lalit wrote:
&gt; Thanks Alexander ... makes complete sense...
&gt;
&gt; On Fri, May 27, 2016 at 4:39 PM, Alexander Sicular  &gt; wrote:
&gt;
&gt; There is a reason Basho's minimum production deployment
&gt; recommendation is 5 machines. It is to ensure that, when operating
&gt; with default settings, each replica of any key is stored on
&gt; distinct physical nodes. It has to do with the allocation of
&gt; virtual nodes to physical machines and replica sets. Replica sets
&gt; are sets of virtual nodes, not physical nodes. 
&gt;
&gt; When using 3 or 4 machines in your cluster reduce your n\\_val to 2. 
&gt;
&gt; Cheers, Alexander 
&gt;
&gt; On Friday, May 27, 2016, DeadZen  &gt; wrote:
&gt;
&gt; np, number of nodes and ring size play a lot into that. 
&gt; as does your r,w settings. 
&gt; might be fun to create a visualization one day ;)
&gt;
&gt; On Friday, May 27, 2016, Vikram Lalit 
&gt; wrote:
&gt;
&gt; Ok got it thanks.
&gt;
&gt; On May 27, 2016 4:02 PM, "DeadZen" 
&gt; wrote:
&gt;
&gt; reiterating my last email
&gt;
&gt; &gt; theres no guarantee vnodes are assigned to unique servers..
&gt;
&gt; referencing the docs
&gt;
&gt; &gt; Nodes \\*attempt\\* to claim their partitions at
&gt; intervals around the ring such that there is an even
&gt; distribution amongst the member nodes and that no node
&gt; is responsible for more than one replica of a key.
&gt;
&gt;
&gt;
&gt; On Friday, May 27, 2016, Vikram Lalit
&gt;  wrote:
&gt;
&gt; I have a Riak cluster (of 3 nodes, with 64
&gt; partitions and n\\_val = 3) but I find that for some
&gt; objects, their hosting partitions / vnodes are not
&gt; spread out across the 3 nodes. In some cases, 2 of
&gt; them are on 1 node and the third is on a second
&gt; node. That runs contrary to my understanding (link
&gt; here: 
&gt; http://docs.basho.com/riak/kv/2.1.4/learn/concepts/clusters/)
&gt; that the data is spread out across partitions in
&gt; such a way that the partitions are on different
&gt; servers. Is there something I'm missing here
&gt; please in terms of how Riak works? Thanks...
&gt;
&gt;
&gt;
&gt; -- 
&gt;
&gt;
&gt; Alexander Sicular
&gt; Solutions Architect
&gt; Basho Technologies
&gt; 9175130679 
&gt; @siculars
&gt;
&gt;
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com



0x2B8B4767.asc
Description: application/pgp-keys

signature.asc
Description: OpenPGP digital signature
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

