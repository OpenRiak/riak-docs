---
title: "Re: Is this a silly design?"
description: ""
project: community
lastmod: 2010-09-29T14:48:18-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01159"
mailinglist_parent_id: "msg01156"
author_name: "Dan Reverri"
project_section: "mailinglistitem"
sent_date: 2010-09-29T14:48:18-07:00
---


Hi Tyler,

You're proposed design would work well with Riak. Buckets in Riak, by
default, are "free" meaning 100 buckets wouldn't consume any more resources
than 1 bucket.

Also, by using the date as the key you could map/reduce over a user's data
for set periods of time. For instance, consider the following entries:
/riak/user1/20100929
/riak/user1/20100930
/riak/user1/20101001
/riak/user1/20101002
/riak/user1/20101003
/riak/user1/20101004

To map/reduce over the first 3 days of October you can specify your
map/reduce inputs as:
{"inputs":[["user1","20101001"],["user1","20101002"],["user1","20101003"]],
...query goes here... }


Daniel Reverri
Developer Advocate
Basho Technologies, Inc.
d...@basho.com


On Wed, Sep 29, 2010 at 9:30 AM, Tyler Weir  wrote:

&gt; Hello,
&gt;
&gt; I'm working on a side project and I don't know much about reasonable
&gt; design for a Riak schema.
&gt;
&gt; I'll have a hybrid model, with user profiles sitting in Postgres and
&gt; their data in Riak.
&gt;
&gt; If I were to store a blob of info per user per day (3 text blobs, a
&gt; date, a URL and tags), does it make sense to have one bucket per user?
&gt; If so, the key for the daily blob is simple, the date (unless that is
&gt; also silly).
&gt;
&gt; I'm guessing 100 users, with maybe 400 RiakObjects per user per year.
&gt;
&gt; Does that design seem sound, or am I breaking some fundamental rules?
&gt;
&gt; Sorry for naivety,
&gt; Tyler
&gt;
&gt;
&gt; -------------------------------------
&gt; http://www.tylerweir.ca
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

