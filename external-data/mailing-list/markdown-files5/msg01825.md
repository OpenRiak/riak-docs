---
title: "Re: force foreign node to leave?"
description: ""
project: community
lastmod: 2010-12-20T12:51:34-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01825"
mailinglist_parent_id: "msg01822"
author_name: "Alexander Sicular"
project_section: "mailinglistitem"
sent_date: 2010-12-20T12:51:34-08:00
---


Rudy,

That used to be a problem but the remove command was added for exactly
this situation.

riak-admin remove node

In the code:
https://github.com/basho/riak/blob/master/rel/files/riak-admin#L95

Best,
Alexander

On Mon, Dec 20, 2010 at 03:52, Rudy X. Desjardins  wrote:
&gt; Hello Riak devs (and users)... is there any way to remove an 'old'
&gt; node from a ring, without issuing 'riak-admin leave' on the node
&gt; itself? I have a cluster running on AWS and one of the machines needed
&gt; to reboot, and the cluster was pointed to it's (volatile) dynamic AWS
&gt; 1918 ip address, vs a public ip/dns name... so, now the node is back
&gt; up and I've re-added it after doing a 'riak-admin reip ... ...' on it,
&gt; but the other nodes still see the old node name/ip as a ring member.
&gt;
&gt; Ie: ri...@11.22.33.44 used to be a member, it was re-booted and now
&gt; has ip 11.22.33.55... so I've re-ip'ed it and re-added it to the
&gt; cluster, and it's up and running fine, but now I have both the new and
&gt; old node name as ring members and no way of re-acquiring the old ip...
&gt; ri...@11.22.33.44 \\*and\\* ri...@11.22.33.55 are both listed as ring
&gt; members.
&gt;
&gt; What's the best approach/practice here? Is it safe/typical to just
&gt; leave the 'dead' ring member listed, or is there another way to get
&gt; rid of it?
&gt;
&gt; Thanks in advance...
&gt;
&gt; --
&gt; Rudy X. Desjardins
&gt; pgp: 96FFA628
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

