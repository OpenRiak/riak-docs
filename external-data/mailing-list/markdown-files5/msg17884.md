---
title: "Re: memory usage of Riak."
description: ""
project: community
lastmod: 2017-01-26T05:48:35-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17884"
mailinglist_parent_id: "msg17881"
author_name: "Matthew Von-Maszewski"
project_section: "mailinglistitem"
sent_date: 2017-01-26T05:48:35-08:00
---


Alex,

Which backend are you using? Leveldb's memory usage does not show up within 
Erlang. Maybe that is what you are experiencing?

Matthew

Sent from my iPad

&gt; On Jan 26, 2017, at 5:47 AM, Alex Feng  wrote:
&gt; 
&gt; Hi Riak Users,
&gt; 
&gt; One of my riak nodes, it has 4G memory, when I check the memory usage with 
&gt; "free -m", I can see there are only around 150M left. Then I check the 
&gt; command "riak-admin status", it shows around 415M(415594432) consumed by 
&gt; Erlang. But with "top" command, it shows Erlang takes 52.1% memory, it is 
&gt; about 2G.
&gt; So, my question is where is the other ~1.6G (2G - 415M) memory ?
&gt; 
&gt; 
&gt; dropped\\_vnode\\_requests\\_total : 0
&gt; executing\\_mappers : 0
&gt; gossip\\_received : 6
&gt; handoff\\_timeouts : 0
&gt; ignored\\_gossip\\_total : 0
&gt; index\\_fsm\\_active : 0
&gt; index\\_fsm\\_create : 0
&gt; index\\_fsm\\_create\\_error : 0
&gt; late\\_put\\_fsm\\_coordinator\\_ack : 0
&gt; leveldb\\_read\\_block\\_error : 0
&gt; list\\_fsm\\_active : 0
&gt; list\\_fsm\\_create : 0
&gt; list\\_fsm\\_create\\_error : 0
&gt; list\\_fsm\\_create\\_error\\_total : 0
&gt; list\\_fsm\\_create\\_total : 0
&gt; map\\_actor\\_counts\\_100 : 0
&gt; map\\_actor\\_counts\\_95 : 0
&gt; map\\_actor\\_counts\\_99 : 0
&gt; map\\_actor\\_counts\\_mean : 0
&gt; map\\_actor\\_counts\\_median : 0
&gt; mem\\_allocated : 3859660800
&gt; mem\\_total : 3975495680
&gt; memory\\_atom : 703377
&gt; memory\\_atom\\_used : 677686
&gt; memory\\_binary : 92813136
&gt; memory\\_code : 16511098
&gt; memory\\_ets : 6823184
&gt; memory\\_processes : 287157280
&gt; memory\\_processes\\_used : 287149824
&gt; memory\\_system : 128437152
&gt; memory\\_total : 415594432
&gt; 
&gt; 
&gt; 
&gt; KiB Swap: 4063228 total, 106496 used, 3956732 free. 296560 cached Mem
&gt; 
&gt; PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND 
&gt; 
&gt; 1 riak 20 0 4844692 1.929g 1772 S 5.3 52.1 4539:13 beam.smp 
&gt; 
&gt; 23510 riak 20 0 10.152g 1.131g 32292 S 4.3 30.6 2:07.28 java 
&gt; 
&gt; 72 riak 20 0 7492 92 0 S 0.0 0.0 0:15.22 epmd 
&gt; 
&gt; 190 riak 20 0 4440 224 172 S 0.0 0.0 0:00.67 sh 
&gt; 
&gt; 191 riak 20 0 4324 252 192 S 0.0 0.0 0:08.97 memsup 
&gt; 
&gt; 193 riak 20 0 4324 0 0 S 0.0 0.0 0:00.00 cpu\\_sup 
&gt; 
&gt; 285 riak 20 0 7460 28 0 S 0.0 0.0 0:29.51 
&gt; inet\\_gethost 
&gt; 286 riak 20 0 13780 316 236 S 0.0 0.0 0:55.30 
&gt; inet\\_gethost 
&gt; 287 riak 20 0 13780 8 0 S 0.0 0.0 0:00.00 
&gt; inet\\_gethost 
&gt; 22534 root 20 0 22320 1248 756 S 0.0 0.0 0:00.07 bash 
&gt; 
&gt; 24714 root 20 0 23992 1456 1052 R 0.0 0.0 0:00.00 top 
&gt; 
&gt; 
&gt; Br,
&gt; Alex
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

