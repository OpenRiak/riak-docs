---
title: "Re: Riak Search having issues with custom schema"
description: ""
project: community
lastmod: 2015-01-09T08:57:00-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15458"
mailinglist_parent_id: "msg15457"
author_name: "Santi Kumar"
project_section: "mailinglistitem"
sent_date: 2015-01-09T08:57:00-08:00
---


Luke
It's application/json

Here is the curl command and output dump with content-type in bold

curl -v
http://127.0.0.1:8098/buckets/junit\\_MASTER-Policies/keys/2d29e759-8e30-499a-8ecc-98eb09eeaa9f

\\* About to connect() to 127.0.0.1 port 8098 (#0)

\\* Trying 127.0.0.1...

\\* Adding handle: conn: 0x7fc91c008c00

\\* Adding handle: send: 0

\\* Adding handle: recv: 0

\\* Curl\\_addHandleToPipeline: length: 1

\\* - Conn 0 (0x7fc91c008c00) send\\_pipe: 1, recv\\_pipe: 0

\\* Connected to 127.0.0.1 (127.0.0.1) port 8098 (#0)

&gt; GET
/buckets/junit\\_MASTER-Policies/keys/2d29e759-8e30-499a-8ecc-98eb09eeaa9f
HTTP/1.1

&gt; User-Agent: curl/7.30.0

&gt; Host: 127.0.0.1:8098

&gt; Accept: \\*/\\*

&gt;

&lt; HTTP/1.1 200 OK

&lt; X-Riak-Vclock: a85hYGBgzGDKBVIcypz/fvbkCGZlMCUy5rEyzDdUOceXBQA=

&lt; Vary: Accept-Encoding

\\* Server MochiWeb/1.1 WebMachine/1.10.5 (jokes are better explained) is not
blacklisted

&lt; Server: MochiWeb/1.1 WebMachine/1.10.5 (jokes are better explained)

&lt; Link: ; rel="up"

&lt; Last-Modified: Fri, 09 Jan 2015 11:03:59 GMT

&lt; ETag: "2z3JHmwDLjQuWdJEploYUi"

&lt; Date: Fri, 09 Jan 2015 16:53:43 GMT

&lt; \\*Content-Type: application/json\\*

&lt; Content-Length: 688

&lt;

\\* Connection #0 to host 127.0.0.1 left intact

{"id":null,"tenantId":"eb0a1917-9762-3dd3-a48f-a681d3061212","createdById":null,"createdBy":"SYSTEM","created":1420801439932,"lastUpdatedById":null,"lastUpdatedBy":"SYSTEM","lastUpdated":1420801439932,"policyId":"2d29e759-8e30-499a-8ecc-98eb09eeaa9f","searchId":"557134f2-3589-3fdb-927f-6a71e8098eee","name":"Collaborate","description":"Allow
editing of file
content","isDefault":true,"enable\\_edit":true,"disable\\_auth\\_on\\_open":true,"enable\\_copy\\_paste":"DISALLOW","enable\\_printing":false,"enable\\_offline":true,"offline\\_timeout":null,"time\\_bomb\\_duration":null,"enable\\_save\\_as":false,"disable\\_watermark":true,"disable\\_spotlight":true,"enable\\_screen\\_capture":false,"disable\\_onetime\\_use":true}

On Fri, Jan 9, 2015 at 10:16 PM, Luke Bakken  wrote:

&gt; Can you retrieve the object using "curl" and let me know what the
&gt; "Content-Type" header is when returned?
&gt; --
&gt; Luke Bakken
&gt; Engineer
&gt; lbak...@basho.com
&gt;
&gt;
&gt; On Fri, Jan 9, 2015 at 8:44 AM, Santi Kumar  wrote:
&gt; &gt; No content type is specified explicitly. Directly object is passed to
&gt; &gt; StoreValue.Builder(). Some where I read that pojo is extracted as json.
&gt; Am
&gt; &gt; I missing something?
&gt; &gt;
&gt; &gt; ..... Here is the code.
&gt; &gt;
&gt; &gt; Location user\\_locaiton = new Location(nameSpace, key);
&gt; &gt;
&gt; &gt; StoreValue storeUserOp = new StoreValue.Builder(object)
&gt; &gt;
&gt; &gt; .withLocation(user\\_locaiton)
&gt; &gt;
&gt; &gt; .withOption(StoreValue.Option.W, Quorum.allQuorum())
&gt; &gt;
&gt; &gt; .build();
&gt; &gt;
&gt; &gt; RiakFuture &gt; Location&gt; storeValueOpFuture = client.executeAsync(storeUserOp);
&gt; &gt;
&gt; &gt; storeValueOpFuture.await();
&gt; &gt;
&gt; &gt; logger.debug("Stroed Values for "+key+" in Bucket "+bucket);
&gt; &gt;
&gt; &gt; if(!storeValueOpFuture.isSuccess() || storeValueOpFuture.isCancelled() ||
&gt; &gt; !storeValueOpFuture.isDone()){
&gt; &gt;
&gt; &gt; throw new
&gt; &gt;
&gt; InternalServerException(InternalServerException.ErrorCode.RIAK\\_EROR,"Exception
&gt; &gt; while storing object against key "+key+" in Bucket "+bucket);
&gt; &gt;
&gt; &gt; }
&gt; &gt;
&gt; &gt;
&gt; &gt; On Jan 9, 2015 9:42 PM, "Luke Bakken"  wrote:
&gt; &gt;&gt;
&gt; &gt;&gt; How are you storing these objects? What "Content-Type" is being used?
&gt; &gt;&gt; --
&gt; &gt;&gt; Luke Bakken
&gt; &gt;&gt; Engineer
&gt; &gt;&gt; lbak...@basho.com
&gt; &gt;&gt;
&gt; &gt;&gt;
&gt; &gt;&gt; On Fri, Jan 9, 2015 at 7:04 AM, Santi Kumar  wrote:
&gt; &gt;&gt; &gt; Hi,
&gt; &gt;&gt; &gt; We are having issues with Riak Search custom schema. Application has
&gt; &gt;&gt; &gt; multiple POJO's and we are using Java client to write into RIakKV.
&gt; &gt;&gt; &gt; Configured custom solr schema with indexed fields from all POJOs.
&gt; After
&gt; &gt;&gt; &gt; adding the "Catch-All" field, solr is not indexing any fields from any
&gt; &gt;&gt; &gt; of
&gt; &gt;&gt; &gt; the Pojo.
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt; No errors in solr log also. Not having any clues why nothing is
&gt; indexed
&gt; &gt;&gt; &gt; except the Riak fields. Here is how the fields are specified in solr
&gt; &gt;&gt; &gt; schema,
&gt; &gt;&gt; &gt; not attaching everything. We have multiple indexes and buckets for
&gt; &gt;&gt; &gt; different
&gt; &gt;&gt; &gt; pojos, but difined only one schema for all the indexes. Same schema is
&gt; &gt;&gt; &gt; being
&gt; &gt;&gt; &gt; configured for each index. Would that be an issue? For example for
&gt; &gt;&gt; &gt; Access
&gt; &gt;&gt; &gt; has seperate index and condition has seperate index. But both fields
&gt; for
&gt; &gt;&gt; &gt; both of them are defined in one schema and passed to both the indexes.
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt; 
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;  /&gt;
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;  &gt;&gt; &gt; stored="false" /&gt;
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;  &gt;&gt; &gt; stored="false"
&gt; &gt;&gt; &gt; /&gt;
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;  stored="false"
&gt; &gt;&gt; &gt; /&gt;
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;  &gt;&gt; &gt; stored="false" /&gt;
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;  &gt;&gt; &gt; stored="false" /&gt;
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;  &gt;&gt; &gt; /&gt;
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt; 
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt; 
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;  &gt;&gt; &gt; stored="false" /&gt;
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt; 
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt; 
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt; 
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;  /&gt;
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;  /&gt;
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt; 
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt; 
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt; Thanks
&gt; &gt;&gt; &gt; Santi
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt;&gt; &gt; riak-users mailing list
&gt; &gt;&gt; &gt; riak-users@lists.basho.com
&gt; &gt;&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; &gt;&gt; &gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

