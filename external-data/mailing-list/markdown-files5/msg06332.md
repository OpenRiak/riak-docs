---
title: "Facing issues in Riak Deletion process"
description: ""
project: community
lastmod: 2012-01-19T23:31:15-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06332"
author_name: "Vicky Khanna"
project_section: "mailinglistitem"
sent_date: 2012-01-19T23:31:15-08:00
---


Hi,

I am having 100 million keys in a cluster of 4 using bitcask as the storage 
system and on riak-0.14.2 version.
When I deleted around 30 million key then there was no decrease in the memory 
usage (which was around 9 GB on each 4 nodes).
Sean told me that It may be because of tombstones accumulation, so I waited for 
the merge process to trigger.

After natural merging (i.e. with default configs), one of the nodes is at 6 gb, 
the other on 8.5gb and rest on 9 gb.
Is it normal to have such an imbalance?

Also, while testing I found that If one of the nodes goes down during deletion 
process, I can still access them when that node comes up..!!!
Is this a bug in riak 0.14??

Will migrating to riak 1.0 solve this problem ?? I am afraid that it may rehash 
the entire data as there is an imbalance in my cluster now.

Thanks in Advance

Vicky Khanna

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

