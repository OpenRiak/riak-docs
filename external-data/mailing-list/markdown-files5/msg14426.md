---
title: "Re: Riak for streaming video"
description: ""
project: community
lastmod: 2014-06-30T08:05:58-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14426"
mailinglist_parent_id: "msg14392"
author_name: "Kota Uenishi"
project_section: "mailinglistitem"
sent_date: 2014-06-30T08:05:58-07:00
---


There are a lot of variety, in definition of being SPOF. It also
depends on not only software implementation but also on setup
configuration and operation.

When it comes to Stanchion, it just serializes creation, modification
and deletion of buckets and users, and all data is stored in Riak,
which means, Stanchion failure does not cause any data loss but just
downtime of these operations. As Brian points out that all other
operations on objects will work fine.

Even you can run two Act-Standby Stanchion processes at once. But the
only thing operators should not do is, to let any two CS nodes see
different Stanchion at once. After the operator make sure 'primary'
Stanchion killed or stopped, it's okay to do any style of failover.

On Mon, Jun 30, 2014 at 7:27 PM, Brian Akins  wrote:
&gt; Stanchion is only used for user modification and creating/deleting buckets.
&gt; The cluster will function just fine without it except for those functions.
&gt;
&gt;
&gt; On Jun 30, 2014, at 3:10 AM, Alex De la rosa 
&gt; wrote:
&gt;
&gt; Hi Jared,
&gt;
&gt; Thanks for your explanation and links... my next question is... Is Stanchion
&gt; not a single-point of failure? One of the things I like in Standard Riak is
&gt; that every node has the same level, there are no masters, no slaves... if
&gt; one fail it doesn't matter, the rest can do the job. If Riak CS requires un
&gt; especial node, what happens if that one fails? system is down then? Can you
&gt; configure the system with more than one Stanchion node?
&gt;
&gt; Cheers,
&gt; Alex
&gt;
&gt;
&gt; On Mon, Jun 30, 2014 at 7:37 AM, Jared Morrow  wrote:
&gt;&gt;
&gt;&gt; Alex,
&gt;&gt;
&gt;&gt; That is correct. There are some additional docs we have on load-balancing
&gt;&gt; and such on our docs page
&gt;&gt; http://docs.basho.com/riakcs/latest/cookbooks/configuration/Load-Balancing-and-Proxy-Configuration/,
&gt;&gt; but generally it acts and feels like a Riak installation. One additional
&gt;&gt; special node is required (Stanchion) and that is also described on our docs
&gt;&gt; page
&gt;&gt; http://docs.basho.com/riakcs/latest/cookbooks/configuration/Configuring-Stanchion/.
&gt;&gt;
&gt;&gt; Keep the questions coming, if I don't know the details I'll hand off to
&gt;&gt; Engineers more knowledgable with RiakCS.
&gt;&gt;
&gt;&gt; -Jared
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; On Sun, Jun 29, 2014 at 5:58 AM, Alex De la rosa 
&gt;&gt; wrote:
&gt;&gt;&gt;
&gt;&gt;&gt; Hi there,
&gt;&gt;&gt;
&gt;&gt;&gt; One more question regarding Riak CS, does it behave like standard Riak?
&gt;&gt;&gt; storing 3 copies (default) and needing a minimum of 5 servers to operate?
&gt;&gt;&gt;
&gt;&gt;&gt; Cheers,
&gt;&gt;&gt; Alex
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; On Fri, Jun 27, 2014 at 2:43 AM, Jared Morrow  wrote:
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Luwak is definitely EOL'd and RiakCS is our large object store going
&gt;&gt;&gt;&gt; forward. It is a far superior design compared to Luwak and handles very
&gt;&gt;&gt;&gt; large file sizes.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; On Thursday, June 26, 2014, Jason Campbell  wrote:
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Riak CS is designed to be the same interface as Amazon S3. It can be
&gt;&gt;&gt;&gt;&gt; run anywhere you can run Riak.
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Think of it as a way to run your own S3.
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; I think the hard limit on Riak objects is 50MB, but the recommended
&gt;&gt;&gt;&gt;&gt; size is less than 1MB per object. The main reason for that is latency.
&gt;&gt;&gt;&gt;&gt; It's faster to get 100x1MB chunks from the entire cluster than it is to 
&gt;&gt;&gt;&gt;&gt; get
&gt;&gt;&gt;&gt;&gt; 1x100MB chunk from a single server. It's also easier for disks to pull a
&gt;&gt;&gt;&gt;&gt; 1MB object without delaying any other requests than pulling a 100MB 
&gt;&gt;&gt;&gt;&gt; object,
&gt;&gt;&gt;&gt;&gt; which may end up queuing other requests made after.
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; There used to be a project called luwak that was built into Riak and
&gt;&gt;&gt;&gt;&gt; handled chunking files like this, but it has been EOL'd. Perhaps someone
&gt;&gt;&gt;&gt;&gt; can shed some light on this. Is RiakCS the final solution for binary
&gt;&gt;&gt;&gt;&gt; storage? Or is there another way to store larger objects in Riak?
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; RiakCS is wonderful, but it does seem overkill for some uses where you
&gt;&gt;&gt;&gt;&gt; don't need to expose an S3 interface, don't need the S3 permission
&gt;&gt;&gt;&gt;&gt; structure, and really just want file storage.
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; ----- Original Message -----
&gt;&gt;&gt;&gt;&gt; From: "Alex De la rosa" 
&gt;&gt;&gt;&gt;&gt; To: "Hector Castro" 
&gt;&gt;&gt;&gt;&gt; Cc: "riak-users" 
&gt;&gt;&gt;&gt;&gt; Sent: Friday, 27 June, 2014 6:55:13 AM
&gt;&gt;&gt;&gt;&gt; Subject: Re: Riak for streaming video
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Hi Hector,
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Thanks for your response :) highly appreciated. I have more questions
&gt;&gt;&gt;&gt;&gt; though.
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Riak CS has to be implemented in Amazon S3? Or can I house it myself
&gt;&gt;&gt;&gt;&gt; with own managed servers?
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; What is the limit for an object in Standard Riak? Large objects should
&gt;&gt;&gt;&gt;&gt; go to Riak CS, but what would be a limit for the Standard Riak? I may want
&gt;&gt;&gt;&gt;&gt; to save pictures, for example, in binary data... not a RAW version, but 
&gt;&gt;&gt;&gt;&gt; like
&gt;&gt;&gt;&gt;&gt; processed photo uploads from users... I think Standard Riak can hold that
&gt;&gt;&gt;&gt;&gt; with no problem, but it would be good to know the size limit for a key's
&gt;&gt;&gt;&gt;&gt; content.
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Thanks,
&gt;&gt;&gt;&gt;&gt; Alex
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; On Thu, Jun 26, 2014 at 10:45 PM, Hector Castro &lt; hec...@basho.com &gt;
&gt;&gt;&gt;&gt;&gt; wrote:
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Hey Alex,
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; My response are inline below.
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; --
&gt;&gt;&gt;&gt;&gt; Hector
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; On Thu, Jun 26, 2014 at 4:26 PM, Alex De la rosa
&gt;&gt;&gt;&gt;&gt; &lt; alex.rosa....@gmail.com &gt; wrote:
&gt;&gt;&gt;&gt;&gt; &gt; Hi Hector,
&gt;&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt;&gt; &gt; I see, I always thought that Riak CS was the same as Riak just that
&gt;&gt;&gt;&gt;&gt; &gt; you run
&gt;&gt;&gt;&gt;&gt; &gt; it in Amazon S3... they are actually different...
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Correct, but it is important to note that Riak is still at the core of
&gt;&gt;&gt;&gt;&gt; Riak CS.
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; &gt; So... if I have a social network and one of the features is that they
&gt;&gt;&gt;&gt;&gt; &gt; can
&gt;&gt;&gt;&gt;&gt; &gt; share video, I would use a normal Riak cluster for the webapp and
&gt;&gt;&gt;&gt;&gt; &gt; data and a
&gt;&gt;&gt;&gt;&gt; &gt; Riak CS cluster for the video storage/streaming... am I right?
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; That seems like a reasonable conclusion.
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Riak is fundamentally a distributed key/value store for low latency
&gt;&gt;&gt;&gt;&gt; access to smaller pieces of data. Riak CS is an S3/Swift
&gt;&gt;&gt;&gt;&gt; API-compatible object storage platform with a little higher request
&gt;&gt;&gt;&gt;&gt; latency, but also the added ability to house very large objects
&gt;&gt;&gt;&gt;&gt; (backups, raw images, video).
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; &gt; By the way, couldn't this "range header" be implemented in standard
&gt;&gt;&gt;&gt;&gt; &gt; Riak?
&gt;&gt;&gt;&gt;&gt; &gt; might be a good thing to have so you don't need 2 clusters for this
&gt;&gt;&gt;&gt;&gt; &gt; matter.
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; It could some day. Right now, separating the clusters is best because
&gt;&gt;&gt;&gt;&gt; tuning a single cluster for both use cases would be difficult.
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; &gt; Thanks,
&gt;&gt;&gt;&gt;&gt; &gt; Alex
&gt;&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt;&gt; &gt; On Thu, Jun 26, 2014 at 9:28 PM, Hector Castro &lt; hec...@basho.com &gt;
&gt;&gt;&gt;&gt;&gt; &gt; wrote:
&gt;&gt;&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt;&gt;&gt; &gt;&gt; Hi Alex,
&gt;&gt;&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt;&gt;&gt; &gt;&gt; For this type of problem, you may want to look into Riak CS. [0] It
&gt;&gt;&gt;&gt;&gt; &gt;&gt; is
&gt;&gt;&gt;&gt;&gt; &gt;&gt; an object storage platform built on top of Riak.
&gt;&gt;&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt;&gt;&gt; &gt;&gt; When you GET an object from Riak CS, you can specify a Range header
&gt;&gt;&gt;&gt;&gt; &gt;&gt; to
&gt;&gt;&gt;&gt;&gt; &gt;&gt; get the object by its byte offset. [1]
&gt;&gt;&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt;&gt;&gt; &gt;&gt; --
&gt;&gt;&gt;&gt;&gt; &gt;&gt; Hector
&gt;&gt;&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt;&gt;&gt; &gt;&gt; [0] http://docs.basho.com/riakcs/latest/
&gt;&gt;&gt;&gt;&gt; &gt;&gt; [1]
&gt;&gt;&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt;&gt;&gt; &gt;&gt; http://docs.basho.com/riakcs/latest/references/apis/storage/s3/RiakCS-GET-Object/#Examples
&gt;&gt;&gt;&gt;&gt; &gt;&gt;
&gt;&gt;&gt;&gt;&gt; &gt;&gt; On Thu, Jun 26, 2014 at 3:22 PM, Alex De la rosa
&gt;&gt;&gt;&gt;&gt; &gt;&gt; &lt; alex.rosa....@gmail.com &gt; wrote:
&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; Hi there,
&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt;
&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; Imagine that I want to use Riak for a video service like Youtube
&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; and I
&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; save
&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; the video file in Riak... is there a way to stream the contents of
&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; 1
&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; key? I
&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; know we can stream keys... but what about its content?
&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt;
&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; It would be pretty troublesome to have to wait for the full data
&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; to be
&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; downloaded $bucket-&gt;get('myvideo') to be able to serve it... as
&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; they can
&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; be
&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; pretty big files.
&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt;
&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; Is there any recommendation to store/get big files like videos? or
&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; it
&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; would
&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; be better to use some other system than Riak for the job?
&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt;
&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; Thanks,
&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; Alex
&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt;
&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; riak-users mailing list
&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; riak-users@lists.basho.com
&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;&gt;&gt;&gt; &gt;&gt; &gt;
&gt;&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt;&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt;&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;



-- 
Kota UENISHI / @kuenishi
Basho Japan KK

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

