---
title: "Re: N = 3 and RW = 2 not finding some keys"
description: ""
project: community
lastmod: 2018-05-18T03:08:33-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg18531"
mailinglist_parent_id: "msg18530"
author_name: "Bryan Hunt"
project_section: "mailinglistitem"
sent_date: 2018-05-18T03:08:33-07:00
---


Of course, AAE will eventually repair the missing object replicas but it seems 
like you need something more immediate. 

&gt; On 18 May 2018, at 11:00, Bryan Hunt  wrote:
&gt; 
&gt; Hi Guido, 
&gt; 
&gt; You should attempt to change the bucket property ‘notfound\\_ok’ from the 
&gt; default of ‘true' to ‘false'.
&gt; 
&gt; I.e 
&gt; 
&gt; curl -XPUT 127.0.0.1:10018/buckets/foo/props -H "Content-Type: 
&gt; application/json" -d '{"props":{"notfound\\_ok": false}}'
&gt; 
&gt; This makes GET operations for non-existent keys slower as it forces an 
&gt; internal GET for each of the three copies.
&gt; 
&gt; https://docs.basho.com/riak/kv/2.1.1/developing/app-guide/replication-properties/#the-implications-of-notfound-ok
&gt; 
&gt; 
&gt; 
&gt; From what you describe, it sounds like only a single copy (out of the 
&gt; original three), somehow remain present in your cluster.
&gt; 
&gt; Best Regards,
&gt; 
&gt; Bryan Hunt
&gt; 
&gt;&gt; On 17 May 2018, at 15:42, Guido Medina &gt; &gt; wrote:
&gt;&gt; 
&gt;&gt; Hi all,
&gt;&gt; 
&gt;&gt; After some big rebalance of our cluster some keys are not found anymore 
&gt;&gt; unless we set R = 3, we had N = 3 and R = W = 2
&gt;&gt; 
&gt;&gt; Is there any sort of repair that would correct such situation for Riak 
&gt;&gt; 2.2.3, this is really driving us nuts.
&gt;&gt; 
&gt;&gt; Any help will be truly appreciated.
&gt;&gt; 
&gt;&gt; Kind regards,
&gt;&gt; Guido.
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com 
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; 

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

