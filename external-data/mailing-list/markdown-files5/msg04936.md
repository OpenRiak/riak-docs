---
title: "Re: secondary indexes - no multi_backend?"
description: ""
project: community
lastmod: 2011-09-29T16:34:55-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg04936"
mailinglist_parent_id: "msg04935"
author_name: "Rusty Klophaus"
project_section: "mailinglistitem"
sent_date: 2011-09-29T16:34:55-07:00
---


Hi Fyodor,

That error is expected; currently only riak\\_kv\\_eleveldb\\_backend supports
Secondary Indexes.

Best,
Rusty

On Thu, Sep 29, 2011 at 7:32 PM, Fyodor Yarochkin wrote:

&gt; I am actually getting the similar errors on RC2, but with
&gt; bitcask\\_backend (default):
&gt; /etc/riak/app.config:
&gt; ...
&gt; {storage\\_backend, riak\\_kv\\_bitcask\\_backend},
&gt; ...
&gt;
&gt; riak:~# curl http://127.0.0.1:8091/buckets/test/index/num\\_int/1
&gt; 500 Internal Server
&gt; ErrorInternal Server Error
=====================

The server
&gt; encountered an error while processing this
&gt;
&gt; request:  

```
{error,{indexes_not_supported,riak_kv_bitcask_backend}}
```


---

mochiweb+webmachine
&gt; web server


&gt;
&gt; I am currently running riak-1.0.0rc2-20-ge0a179e. Am I missing any
&gt; config options here to enable the secondary indexes on bitcask?
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt; On Fri, Sep 30, 2011 at 5:04 AM, Artem  wrote:
&gt; &gt;&gt; We are pleased to announce the availability of the second release
&gt; &gt;&gt; candidate for Riak 1.0.
&gt; &gt;
&gt; &gt; The RC2 doesn't seem to work with secondary indexes in the multi\\_backend
&gt; &gt; configuration.
&gt; &gt; Will secondary indexes be supported in 1.0 multi\\_backend?
&gt; &gt;
&gt; &gt; --- /etc/riak/app.config -------
&gt; &gt;
&gt; &gt; {storage\\_backend, riak\\_kv\\_multi\\_backend},
&gt; &gt; {multi\\_backend\\_default, &lt;&lt;"leveldb"&gt;&gt;},
&gt; &gt; {multi\\_backend, [
&gt; &gt; {&lt;&lt;"leveldb"&gt;&gt;, riak\\_kv\\_eleveldb\\_backend, [
&gt; &gt; {data\\_root, "/var/lib/riak/leveldb"}
&gt; &gt; ]},
&gt; &gt; {&lt;&lt;"bitcask"&gt;&gt;, riak\\_kv\\_bitcask\\_backend, [
&gt; &gt; {data\\_root, "/var/lib/riak/bitcask"}
&gt; &gt; ]}
&gt; &gt; ]},
&gt; &gt;
&gt; &gt; --- command-line -------
&gt; &gt;
&gt; &gt; curl -v -X PUT -d 'payload' -H 'X-Riak-Index-num\\_int: 2'
&gt; http://127.0.0.1:8098/riak/test/doc2
&gt; &gt; curl -v http://127.0.0.1:8098/buckets/test/index/num\\_int/1
&gt; &gt;
&gt; &gt; --- /var/log/riak/console.log -------
&gt; &gt;
&gt; &gt; 2011-09-29 22:56:11.556 [error] &lt;0.514.0&gt; gen\\_fsm &lt;0.514.0&gt; in state
&gt; &gt; waiting\\_results terminated with reason:
&gt; &gt; {error,{indexes\\_not\\_supported,riak\\_kv\\_multi\\_backend}}
&gt; &gt; 2011-09-29 22:56:11.843 [error] &lt;0.514.0&gt; CRASH REPORT Process &lt;0.514.0&gt;
&gt; &gt; with 0 neighbours crashed with reason:
&gt; &gt; {error,{indexes\\_not\\_supported,riak\\_kv\\_multi\\_backend}}
&gt; &gt; 2011-09-29 22:56:12.096 [error] &lt;0.323.0&gt; Supervisor
&gt; riak\\_kv\\_index\\_fsm\\_sup
&gt; &gt; had child undefined started with
&gt; &gt; {riak\\_core\\_coverage\\_fsm,start\\_link,undefined} at &lt;0.514.0&gt; exit with
&gt; reason
&gt; &gt; {error,{indexes\\_not\\_supported,riak\\_kv\\_multi\\_backend}} in context
&gt; &gt; child\\_terminated
&gt; &gt; 2011-09-29 22:56:12.412 [error] &lt;0.506.0&gt; webmachine error:
&gt; &gt; path="/buckets/test/index/num\\_int/1"
&gt; &gt; {error,{error,{indexes\\_not\\_supported,riak\\_kv\\_multi\\_backend}}}
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; &gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;



-- 
Rusty Klophaus

\\*Basho Technologies, Inc.\\*
11921 Freedom Drive, Suite 550
Reston, VA 20190
www.basho.com
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

