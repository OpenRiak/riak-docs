---
title: "Re: Lager and Scribe"
description: ""
project: community
lastmod: 2011-11-18T02:02:44-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05650"
mailinglist_parent_id: "msg05642"
author_name: "Bip Thelin"
project_section: "mailinglistitem"
sent_date: 2011-11-18T02:02:44-08:00
---


Interesting,

 one idea we've tossed around is to use zeromq as a transport layer. Implement 
a lager\\_zeromq\\_backend and a simple zeromq receiver feeding messages into HDFS. 
Will look at your amqp backend!

--
Bip Thelin
 
Evolope AB | Lugnets Allé 1 | 120 33 Stockholm
Tel 08-533 335 37 | Mob 0735-18 18 90
www.evolope.se

On 17 nov 2011, at 21:10, Jon Brisbin wrote:

&gt; Not to hijack your thread or anything, but I just pushed to Github a lager 
&gt; backend for sending stuff to AMQP. You could have a subscriber in Java or 
&gt; whatever that fed those messages directly into HDFS and wouldn't have to 
&gt; worry about Thrift directly in the backend...
&gt; 
&gt; https://github.com/jbrisbin/lager\\_amqp\\_backend
&gt; 
&gt; 
&gt; Thanks!
&gt; 
&gt; Jon Brisbin
&gt; http//jbrisbin.com
&gt; 
&gt; From: "Bip Thelin" 
&gt; To: riak-users@lists.basho.com
&gt; Sent: Thursday, November 17, 2011 9:52:58 AM
&gt; Subject: Lager and Scribe
&gt; 
&gt; Hi,
&gt; 
&gt; I've been thinking about using lager to push logs to our Big Data Hadoop 
&gt; backend for later analysis using Scribe. Looking at the lager\\_syslog backend 
&gt; it looks fairly simple to create such a backend. But thrift works kind of 
&gt; different and some implementation questions occur when going through the 
&gt; lager code.
&gt; 
&gt; The way thrift works is that you create a connection:
&gt; {ok, Client} = thrift\\_client\\_util:new()
&gt; 
&gt; then you can use the Client to do subsequent calls like
&gt; {Client2, \\_Result} = thrift\\_client:call(Client, ...)
&gt; {Client3, \\_Result} = thrift\\_client:call(Client2, ...)
&gt; [...]
&gt; 
&gt; The problem is that you get a new Client descriptor every time and as I've 
&gt; understood it you shouldn't use the same Client twice but instead use the new 
&gt; one with each call. One could of course create a client and do the call 
&gt; within each handle\\_event() and pay that penalty hit but there must be a 
&gt; smarter way. I was going through the lager\\_file\\_backend and saw that you use 
&gt; a FD that get's passed around, is that a good approach to use something 
&gt; similar for a Scribe backend?
&gt; 
&gt; --
&gt; Bip Thelin
&gt; 
&gt; Evolope AB | Lugnets Allé 1 | 120 33 Stockholm
&gt; Tel 08-533 335 37 | Mob 0735-18 18 90
&gt; www.evolope.se
&gt; 
&gt; 
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

