---
title: "Re: Store() Performance"
description: ""
project: community
lastmod: 2011-04-08T09:26:51-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02938"
mailinglist_parent_id: "msg02937"
author_name: "Mark Steele"
project_section: "mailinglistitem"
sent_date: 2011-04-08T09:26:51-07:00
---


I've re-written the php library to use keep alives (and various other
tweaks). Let me see what I can do about releasing the code.

The current php library simply instantiates a new curl instance for each
request, making it less than optimal.

Mark Steele
Bering Media Inc.


On Fri, Apr 8, 2011 at 12:23 PM, Gui Pinto  wrote:

&gt; Hey Everyone, thanks for all of the recommendations.
&gt;
&gt; I've tried importing using the example load\\_data 
&gt; scriptavailable
&gt; on the Fast Track, and have last tried the PHP library.
&gt;
&gt; Both of these execute a straight-foward CURL -X PUT request.. which makes
&gt; me think Mark might have just guessed it..
&gt; Keep-alive not being used definitely explains the 200-writes/second cap.
&gt;
&gt; I'm going to take a look into the PHP library and test this theory.
&gt;
&gt; Gui Pinto
&gt; Software Engineer at Chitika
&gt;
&gt;
&gt;
&gt; On Fri, Apr 8, 2011 at 10:01 AM, Mark Steele wrote:
&gt;
&gt;&gt; If using HTTP, make sure you're using keep-alives. That will be a gigantic
&gt;&gt; speed boost.
&gt;&gt;
&gt;&gt; The protocol buffer API is much faster if you're client language supports
&gt;&gt; it.
&gt;&gt;
&gt;&gt;
&gt;&gt; Mark Steele
&gt;&gt; Bering Media Inc.
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; On Thu, Apr 7, 2011 at 10:58 PM, matthew hawthorne 
&gt;&gt; wrote:
&gt;&gt;
&gt;&gt;&gt; Hi Gui,
&gt;&gt;&gt;
&gt;&gt;&gt; I recently pushed 70 million records of size 1K each into a 5-node
&gt;&gt;&gt; Riak cluster (which was replicating to another 5-node cluster) at
&gt;&gt;&gt; around 1000 writes/second using basho\\_bench and the REST interface. I
&gt;&gt;&gt; probably could have pushed it further, but I wanted to confirm that it
&gt;&gt;&gt; could maintain the load for the entire data set, which it did.
&gt;&gt;&gt;
&gt;&gt;&gt; My point being that your speed-limit of 200 writes/second is likely
&gt;&gt;&gt; specific to your configuration.
&gt;&gt;&gt;
&gt;&gt;&gt; I wonder:
&gt;&gt;&gt; 1) what's your average write latency?
&gt;&gt;&gt; 2) how big is your connection pool?
&gt;&gt;&gt;
&gt;&gt;&gt; Because it's possible that you don't have enough connections available
&gt;&gt;&gt; to handle your desired load.
&gt;&gt;&gt;
&gt;&gt;&gt; -matt
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; On Thu, Apr 7, 2011 at 6:01 PM, Gui Pinto  wrote:
&gt;&gt;&gt; &gt; Hey guys,
&gt;&gt;&gt; &gt; I'm attempting to importing 300M+ objects into a Riak cluster, but have
&gt;&gt;&gt; &gt; quickly reached the REST API's speed-limit at 200-store()'s per
&gt;&gt;&gt; second..
&gt;&gt;&gt; &gt; At the rate of 200/s, I'm looking at 20-days to import this data set!
&gt;&gt;&gt; That
&gt;&gt;&gt; &gt; can't be the fastest method to do this..
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; Any recommendations?
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; Thanks!
&gt;&gt;&gt; &gt; Gui Pinto
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt;&gt; &gt; riak-users mailing list
&gt;&gt;&gt; &gt; riak-users@lists.basho.com
&gt;&gt;&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt;
&gt;&gt;&gt;
&gt;&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

