---
title: "Re: Tune Riak for fast inserts - populate DB"
description: ""
project: community
lastmod: 2013-02-14T01:53:15-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg10123"
mailinglist_parent_id: "msg10121"
author_name: "Bogdan Flueras"
project_section: "mailinglistitem"
sent_date: 2013-02-14T01:53:15-08:00
---


What I have is:
Network bandwidth between nodes: 18.4 MB/sec
Network cards: 1.000Mbps full duplex
Riak process: IO: avg 600 K/s for disk write, 7% RAM used, 17% CPU used

Doesn't seem notwork bottleneck.

ing. Bogdan Flueras



On Thu, Feb 14, 2013 at 11:21 AM, Bogdan Flueras
wrote:

&gt; What I have is:
&gt;
&gt; Network bandwidth between nodes: 18.4 MB/sec
&gt; Network cards: 1.000Mbps full duplex
&gt; Riak process: IO: avg 600 K/s for disk write, 7% RAM used, 17% CPU used
&gt;
&gt;
&gt; ing. Bogdan Flueras
&gt;
&gt;
&gt;
&gt; On Thu, Feb 14, 2013 at 10:17 AM, Erik Søe Sørensen wrote:
&gt;
&gt;&gt; Just to rule something out: what is the capacity of the network between
&gt;&gt; the cluster and the client - and among the cluster nodes?
&gt;&gt;
&gt;&gt;
&gt;&gt; -------- Oprindelig meddelelse --------
&gt;&gt; Fra: Shuhao 
&gt;&gt; Dato:
&gt;&gt; Til: riak-users@lists.basho.com
&gt;&gt; Emne: Re: Tune Riak for fast inserts - populate DB
&gt;&gt;
&gt;&gt;
&gt;&gt; Hi,
&gt;&gt;
&gt;&gt; I've had similar experiences with riak. I used the Riak Python client
&gt;&gt; with HTTP and PBC (even rolled my own client! That only had a ~10% speed
&gt;&gt; up though, and it was HTTP only). I've also examined that the Riak host
&gt;&gt; machine's CPU is only at around 70% when I insert. Other NoSQL dbs uses
&gt;&gt; about 100% when I just continuous insert. Some DBs even have bulk insert.
&gt;&gt;
&gt;&gt; Maybe this is an issue with Riak itself... I don't really know. Maybe a
&gt;&gt; Riak dev could chip in on the conversation
&gt;&gt;
&gt;&gt; Cheers,
&gt;&gt;
&gt;&gt; Shuhao
&gt;&gt;
&gt;&gt; On 13-02-13 02:37 AM, Bogdan Flueras wrote:
&gt;&gt; &gt; Hello all,
&gt;&gt; &gt; I've got a 5 node cluster with Riak 1.2.1, all machines are multicore,
&gt;&gt; &gt; with min 4GB RAM.
&gt;&gt; &gt;
&gt;&gt; &gt; I want to insert something like 50 million records in Riak with the java
&gt;&gt; &gt; client (Protobuf used) with default settings. I've tried also with HTTP
&gt;&gt; &gt; protocol and set w = 1 but got some problems.
&gt;&gt; &gt;
&gt;&gt; &gt; However the process is very slow: it doesn't write more than 6GB/ hour
&gt;&gt; or
&gt;&gt; &gt; aprox. 280 KB/second.
&gt;&gt; &gt; To have all my data filled in, it would take aprox 2 days !!
&gt;&gt; &gt;
&gt;&gt; &gt; What can I do to have the data filled into Riak ASAP?
&gt;&gt; &gt; How should I configure the cluster ? (vm.args/ app.config) I don't care
&gt;&gt; so
&gt;&gt; &gt; much about consistency at this point.
&gt;&gt; &gt;
&gt;&gt; &gt; Thank you,
&gt;&gt; &gt; ing. Bogdan Flueras
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; &gt; riak-users mailing list
&gt;&gt; &gt; riak-users@lists.basho.com
&gt;&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt; &gt;
&gt;&gt;
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

