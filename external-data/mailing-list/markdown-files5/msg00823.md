---
title: "Re: riak postcommit hooks"
description: ""
project: community
lastmod: 2010-08-02T06:41:30-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg00823"
mailinglist_parent_id: "msg00821"
author_name: "Daniel Reverri"
project_section: "mailinglistitem"
sent_date: 2010-08-02T06:41:30-07:00
---


The "postcommit" property on a bucket should be a list of "mod", "fun" 
references. Are you passing a list to the postcommit property?

Dan

Sent from my iPhone

On Aug 2, 2010, at 3:04 AM, Joseph Lambert  wrote:

&gt; Hi,
&gt; 
&gt; I've been trying to work with postcommit hooks to try a method for creating 
&gt; indexes. I've added to the bucket properties "mod" : "post\\_commit\\_index" and 
&gt; "fun" : "index\\_value" and verified those properties are set. 
&gt; 
&gt; I then attach to riak, and make sure the module is loaded. Then, when I try 
&gt; to insert some data into the bucket, I get an error with the postcommit that 
&gt; shows this: 
&gt; 
&gt; \\*\\* Reason for termination = 
&gt; \\*\\* {{case\\_clause,{struct,[{&lt;&lt;"mod"&gt;&gt;,&lt;&lt;"post\\_commit\\_index"&gt;&gt;}, 
&gt; &lt;&lt;"fun"&gt;&gt;,&lt;&lt;"index\\_value"&gt;&gt;}]}}, 
&gt; [{riak\\_kv\\_put\\_fsm,invoke\\_hook,3}, 
&gt; {riak\\_kv\\_put\\_fsm,waiting\\_vnode\\_dw,2}, 
&gt; {gen\\_fsm,handle\\_msg,7}, 
&gt; {proc\\_lib,init\\_p\\_do\\_apply,3}]} 
&gt; 
&gt; If I attach the console and run m(). I can see the module is loaded, and can 
&gt; test that the function index\\_value actually works.
&gt; 
&gt; In actuality, this function currently does nothing, it is just an attempt to 
&gt; test triggering the postcommit hook function. Any insights into what I may be 
&gt; doing wrong?
&gt; 
&gt; - Joe Lambert
&gt; 
&gt; joseph.g.lamb...@gmail.com
&gt; 
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

