---
title: "Re: Questions about installing Stanchion for Riak CS"
description: ""
project: community
lastmod: 2016-05-23T10:23:47-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17400"
mailinglist_parent_id: "msg17399"
author_name: "Sargun Dhillon"
project_section: "mailinglistitem"
sent_date: 2016-05-23T10:23:47-07:00
---


I never got around to it, but it should be pretty easy to glue Consul
to Stanchion to HaProxy. As far as gluing HAProxy to Consule -- that
should be pretty easy: https://github.com/hashicorp/consul-template.
And Stanchion with Consul lock:
https://www.consul.io/docs/commands/lock.html. It shouldn't take long.



On Mon, May 23, 2016 at 10:15 AM, Luke Bakken  wrote:
&gt; Alex -
&gt;
&gt; You won't be able to create new users or buckets while Stanchion is
&gt; offline. You would follow normal procedures to rebuild Riak KV on the
&gt; crashed node, and in the meantime could bring up Stanchion on an
&gt; existing node.
&gt; --
&gt; Luke Bakken
&gt; Engineer
&gt; lbak...@basho.com
&gt;
&gt;
&gt; On Mon, May 23, 2016 at 9:29 AM, Alex De la rosa
&gt;  wrote:
&gt;&gt; Hi Luke,
&gt;&gt;
&gt;&gt; Ok, understood, what if I don't have a load balancer and the node having
&gt;&gt; Stanchion crashes? what will happen to the cluster and how to rebuild it?
&gt;&gt;
&gt;&gt; Thanks,
&gt;&gt; Alex
&gt;&gt;
&gt;&gt; On Mon, May 23, 2016 at 8:09 PM, Luke Bakken  wrote:
&gt;&gt;&gt;
&gt;&gt;&gt; Hi Alex,
&gt;&gt;&gt;
&gt;&gt;&gt; You should only have one active Stanchion process running in your
&gt;&gt;&gt; cluster, since its purpose is to ensure consistent, ordered operations
&gt;&gt;&gt; with regard to users and buckets. You can have a hot-backup if you
&gt;&gt;&gt; configure a load balancer to proxy requests from the Riak CS
&gt;&gt;&gt; processes.
&gt;&gt;&gt; --
&gt;&gt;&gt; Luke Bakken
&gt;&gt;&gt; Engineer
&gt;&gt;&gt; lbak...@basho.com
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; On Sat, May 21, 2016 at 11:41 AM, Alex De la rosa
&gt;&gt;&gt;  wrote:
&gt;&gt;&gt; &gt; Hi there,
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; I'm creating a Riak CS cluster and I got some questions about the
&gt;&gt;&gt; &gt; following
&gt;&gt;&gt; &gt; sentence from the documentation:
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; Riak KV and Riak CS must be installed on each node in your cluster.
&gt;&gt;&gt; &gt; Stanchion, however, needs to be installed on only one node.
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; Is this statement saying that only 1 node can have Stanchion? Or can it
&gt;&gt;&gt; &gt; be
&gt;&gt;&gt; &gt; placed in more servers?.... like Riak KV and Riak CS must be in 5 out of
&gt;&gt;&gt; &gt; 5
&gt;&gt;&gt; &gt; nodes but Stanchion can be in 1 to 5 out of 5 nodes?
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; If is referring that ONLY 1 out of 5 nodes can have Stanchion and the
&gt;&gt;&gt; &gt; other
&gt;&gt;&gt; &gt; 4 nodes are not allowed to have it installed, what happens if the
&gt;&gt;&gt; &gt; "master"
&gt;&gt;&gt; &gt; node that has Stanchion crashes?
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; Thanks and Best Regards,
&gt;&gt;&gt; &gt; Alex
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt;&gt; &gt; riak-users mailing list
&gt;&gt;&gt; &gt; riak-users@lists.basho.com
&gt;&gt;&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;&gt; &gt;
&gt;&gt;
&gt;&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

