---
title: "Re: Servers keep dying. How to understand why?"
description: ""
project: community
lastmod: 2013-05-13T07:46:32-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11062"
mailinglist_parent_id: "msg11055"
author_name: "Julien Genestoux"
project_section: "mailinglistitem"
sent_date: 2013-05-13T07:46:32-07:00
---


Christian, All,

Bad news: my laptop is completely dead. Good news: I have a new one, and
it's now fully operational (backups FTW!).

The log files have finally been uploaded:
https://www.dropbox.com/s/j7l3lniu0wogu29/riak-died.tar.gz

I have attached to that mail our config.

The machine is a virtual Xen instance at Linode with 4GB of memory. I know
it's probably not the very best setup, but 1) we're on a budget and 2) we
assumed that would fit our needs quite well.

Just to put things in more details. Initially we did not use allow\\_mult and
things worked out fine for a couple of days. As soon as we enabled allow\\_mult,
we were not able to run the cluster for more then 5 hours without seeing
failing nodes, which is why I'm convinced we must be doing something wrong.
The question is: what?

Thanks


On Sun, May 12, 2013 at 8:07 PM, Christian Dahlqvist wrote:

&gt; Hi Julien,
&gt;
&gt; I was not able to access the logs based on the link you provided.
&gt;
&gt; Could you please attach a copy of your app.config file so we can get a
&gt; better understanding of the configuration of your cluster? Also, what is
&gt; the specification of the machines in the cluster?
&gt;
&gt; How much data do you have in the cluster and how are you querying it?
&gt;
&gt; Best regards,
&gt;
&gt; Christian
&gt;
&gt;
&gt;
&gt; On 12 May 2013, at 19:11, Julien Genestoux 
&gt; wrote:
&gt;
&gt; Hi,
&gt;
&gt; We are running a cluster of 5 servers, or at least trying to, because
&gt; nodes seem to be dying 'randomly'
&gt; without us knowing any reason why. We don't have a great Erlang guy
&gt; aboard, and the error logs are not
&gt; that verbose.
&gt; So I've just .tgz the whole log directory and I was hoping somebody could
&gt; give us a clue.
&gt; It's there: https://www.dropbox.com/s/z9ezv0qlxgfhcyq/riak-died.tar.gz(might 
&gt; not be fully uploaded to dropbox yet!)
&gt;
&gt; I've looked at the archive and some people said their server was dying
&gt; because some object's size was just
&gt; too big to allocate the whole memory. Maybe that's what we're seeing?
&gt;
&gt; As one of our buckets is set with allow\\_mult, I am tempted to think that
&gt; some object's size may be exploding.
&gt; However, we do actually try to resolve conflicts in our code. Any idea how
&gt; to confirm and then debug that we
&gt; have an issue there?
&gt;
&gt;
&gt; Thanks a lot for your precious help...
&gt;
&gt; Julien
&gt;
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
&gt;


app.config
Description: Binary data
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

