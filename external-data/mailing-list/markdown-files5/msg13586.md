---
title: "Re: Search schemas in 2.0pre11"
description: ""
project: community
lastmod: 2014-02-04T13:34:06-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13586"
mailinglist_parent_id: "msg13585"
author_name: "Eric Redmond"
project_section: "mailinglistitem"
sent_date: 2014-02-04T13:34:06-08:00
---


Jeremy,

The new documentation for creating schemas are still in progress, and docs for 
creating a custom schema are still a few weeks out.

curl -XPUT http://localhost:8098/search/schema -H'content-type:application/xml' 
--data @my\\_schema\\_file.xml

my\\_schema\\_file.xml should contain the custom solr schema XML. Note that, when 
uploading a custom schema, yokozuna needs certain fields to exist. You can add 
custom fields and types, but the following values are required (if any fields 
are missing, your schema upload will fail).













\\_yz\\_id





The full default schema can be found here.

https://github.com/basho/yokozuna/blob/develop/priv/default\\_schema.xml

Note that the new Riak Search (Yokozuna) is a complete rewrite, with 0% in 
common (ok, maybe 10%) with the old search. That said, the search-cmd is not 
applicable for new search. It exists only as a legacy artifact for existing 
users who have yet to upgrade.

Eric


On Feb 4, 2014, at 1:12 PM, Jeremy Pierre  wrote:

&gt; Hi all,
&gt; 
&gt; I have a single vagrant node (ubuntu 12.04) running 2.0-pre11 for some 
&gt; prototyping and need the new search awesomeness. Creating and using an index 
&gt; with the default schema works fine but adding my own is unclear. 
&gt; 
&gt; Old ML posts and Riak docs suggest using "search-cmd set-schema [the index I 
&gt; want] [my schema xml]" should work but this yields a noproc error, as does 
&gt; even "search-cmd show-schema ".
&gt; 
&gt; e.g.
&gt; 
&gt; vagrant@precise64:~$ search-cmd show-schema
&gt; 
&gt; %% Schema for 'search'
&gt; RPC to 'riak@192.168.10.31' failed: {'EXIT',
&gt; {noproc,
&gt; {gen\\_server,call,
&gt; [riak\\_search\\_config,
&gt; {get\\_raw\\_schema,&lt;&lt;"search"&gt;&gt;},
&gt; infinity]}}}
&gt; 
&gt; Am I missing anything obvious?
&gt; 
&gt; Thanks,
&gt; 
&gt; Jeremy
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

