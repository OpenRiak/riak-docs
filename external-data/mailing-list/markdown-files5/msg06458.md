---
title: "Schema recommendations for web page beacons"
description: ""
project: community
lastmod: 2012-01-30T09:28:21-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06458"
author_name: "Mike M"
project_section: "mailinglistitem"
sent_date: 2012-01-30T09:28:21-08:00
---


I'm very new to Riak and key-value stores in general, and was hoping
someone might be able to help me figure out the best way to represent
my web page beacon data within Riak. For example, I have data that
looks roughly like the following JSON:

'{"file\\_name": "0000000019",
"uri": "http://foo.com/bar/index.html",
"metric1": 74,
"metric2": 123
"clientip": "192.168.1.12",
"conntime": "2011-12-30T13:43:34",
"city": "CAMBRIDGE",
"state": "MA",
"ua": "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.2 (KHTML, like
Gecko) Chrome/15.0.874.121 Safari/535.2",
"plat": "Win32"
}'

Where the string contains the name of the file containing the metric
data (sometime there are multiple beacons within a file), the URI, a
number of metrics, followed by geo/browser/platform data. As you can
imagine, there will be a smaller number of distinct
URIs/UAs/Plats/Cities/States, while everything else will vary
extensively.

Are there any guidelines on how I might best set up buckets, keys, and
links for data like this? Eventually, there will be millions of
beacons being processed daily, so I'd like to try get the schema right
the first time.

Thanks!

Mike

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

