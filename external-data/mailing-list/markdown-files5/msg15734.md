---
title: "Riak 2.0.4 AAE spinning"
description: ""
project: community
lastmod: 2015-02-18T09:30:07-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15734"
author_name: "Chris Read"
project_section: "mailinglistitem"
sent_date: 2015-02-18T09:30:07-08:00
---


We recently upgraded to Riak 2.0.4 and started seeing the thousands of the
following error in one of our nodes:

2015-02-18 07:48:16.652 [error] &lt;0.23966.264&gt; CRASH REPORT Process
&lt;0.23966.264&gt; with 0 neighbours exited with reason: no match of right hand
value {error,{db\\_open,"IO error: lock
/srv/riak-0/data/anti\\_entropy/548063113999088594326381812268606132370974703616/LOCK:
already held by process"}} in hashtree:new\\_segment\\_store/2 line 555 in
gen\\_server:init\\_it/6 line 328
2015-02-18 07:48:16.652 [info]
&lt;0.27823.1997&gt;@riak\\_kv\\_vnode:maybe\\_create\\_hashtrees:178
riak\\_kv/548063113999088594326381812268606132370974703616: unable to start
index\\_hashtree: {error,{{badmatch,{error,{db\\_open,"IO error: lock
/srv/riak-0/data/anti\\_entropy/548063113999088594326381812268606132370974703616/LOCK:
already held by
process"}}},[{hashtree,new\\_segment\\_store,2,[{file,"src/hashtree.erl"},{line,555}]},{hashtree,new,2,[{file,"src/hashtree.erl"},{line,224}]},{riak\\_kv\\_index\\_hashtree,do\\_new\\_tree,2,[{file,"src/riak\\_kv\\_index\\_hashtree.erl"},{line,560}]},{lists,foldl,3,[{file,"lists.erl"},{line,1248}]},{riak\\_kv\\_index\\_hashtree,init\\_trees,2,[{file,"src/riak\\_kv\\_index\\_hashtree.erl"},{line,430}]},{riak\\_kv\\_index\\_hashtree,init,1,[{file,"src/riak\\_kv\\_index\\_hashtree.erl"},{line,255}]},{gen\\_server,init\\_it,6,[{file,"gen\\_server.erl"},{line,304}]},{proc\\_lib,init\\_p\\_do\\_apply,3,[{file,"proc\\_lib.erl"},{line,239}]}]}}

This correlates with a massive spike in GET requests on the three nodes
that own the affected vnode.

Anyone have any ideas?

Chris
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

