---
title: "Re: riak-users Digest, Vol 87, Issue 16"
description: ""
project: community
lastmod: 2016-10-30T10:20:05-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17721"
author_name: "Pratik Kulkarni"
project_section: "mailinglistitem"
sent_date: 2016-10-30T10:20:05-07:00
---


I added the joda time jar . Then it throws some time xxx jar and keeps on
throwing this. The problem with maven is i am using ant to build my project

Thanks!

On Oct 30, 2016 9:00 AM,  wrote:

&gt; Send riak-users mailing list submissions to
&gt; riak-users@lists.basho.com
&gt;
&gt; To subscribe or unsubscribe via the World Wide Web, visit
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; or, via email, send a message with subject or body 'help' to
&gt; riak-users-requ...@lists.basho.com
&gt;
&gt; You can reach the person managing the list at
&gt; riak-users-ow...@lists.basho.com
&gt;
&gt; When replying, please edit your Subject line so it is more specific
&gt; than "Re: Contents of riak-users digest..."
&gt;
&gt;
&gt; Today's Topics:
&gt;
&gt; 1. Riak Java client API (Pratik Kulkarni)
&gt; 2. Re: Riak Java client API (AJAX DoneBy Jack)
&gt;
&gt;
&gt; ----------------------------------------------------------------------
&gt;
&gt; Message: 1
&gt; Date: Fri, 28 Oct 2016 11:47:00 -0700
&gt; From: Pratik Kulkarni 
&gt; To: riak-users@lists.basho.com
&gt; Subject: Riak Java client API
&gt; Message-ID: &lt;437945ad-b9e1-4e4f-9e8e-5aac04894...@icloud.com&gt;
&gt; Content-Type: text/plain; charset="us-ascii"
&gt;
&gt; Hi All,
&gt;
&gt; I am working on a distributed file storage system using the Java Netty
&gt; framework. For this purpose i have Raik KV as an in memory storage
&gt; solution.
&gt; Following jar dependencies are present in my build path :
&gt;
&gt; jackson-all-1.8.5.jar
&gt; netty-all-4.0.15.Final.jar
&gt; slf4j-api-1.7.2.jar
&gt; slf4j-simple-1.7.2.jar
&gt; protobuf-java-2.6.1.jar
&gt; json-20160212.jar
&gt; riak-client-2.0.5.jar
&gt;
&gt; When i try initiate connection with the riak node. The connection attempt
&gt; is successful but when i try to store the object in Riak KV. I keep getting
&gt; the following NoClassDefFoundError. I am not sure why these errors arrive
&gt; though i have included all the jars. Do we require apart from riak-client
&gt; X.X jar any more dependencies. As per the terminal output I tried to add
&gt; the dependencies by downloading the jars. But it just keeps giving me new
&gt; dependencies error every time. Kindly help ?
&gt;
&gt; Please see the riak client code in java to store the file object
&gt;
&gt;
&gt; package gash.router.inmemory;
&gt;
&gt; import com.basho.riak.client.api.RiakClient;
&gt; import com.basho.riak.client.api.commands.kv.DeleteValue;
&gt; import com.basho.riak.client.api.commands.kv.FetchValue;
&gt; import com.basho.riak.client.api.commands.kv.StoreValue;
&gt; import com.basho.riak.client.core.RiakCluster;
&gt; import com.basho.riak.client.core.RiakNode;
&gt; import com.basho.riak.client.core.query.Location;
&gt; import com.basho.riak.client.core.query.Namespace;
&gt; import com.basho.riak.client.core.query.RiakObject;
&gt; import com.basho.riak.client.core.util.BinaryValue;
&gt;
&gt; import java.net.UnknownHostException;
&gt;
&gt; public class RiakClientHandler {
&gt;
&gt; private static RiakCluster setUpCluster() throws
&gt; UnknownHostException{
&gt; // This example will use only one node listening on
&gt; localhost:8098--default config
&gt;
&gt; RiakNode node = new RiakNode.Builder()
&gt; .withRemoteAddress("127.0.0.1")
&gt; .withRemotePort(8098)
&gt; .build();
&gt; // This cluster object takes our one node as an argument
&gt; RiakCluster cluster = new RiakCluster.Builder(node)
&gt; .build();
&gt;
&gt; // The cluster must be started to work, otherwise you will see
&gt; errors
&gt; cluster.start();
&gt;
&gt; return cluster;
&gt; }
&gt;
&gt; private static class RiakFile{
&gt;
&gt; public String filename;
&gt; public byte[] byteData;
&gt; }
&gt;
&gt; public static void saveFile(String filename,byte[] byteData)
&gt; {
&gt; try{
&gt; System.out.println("Inside Riak handler");
&gt; RiakCluster cluster = setUpCluster();
&gt; RiakClient client = new RiakClient(cluster);
&gt; RiakFile newFile = createRiakFile(filename, byteData);
&gt; System.out.println("Riak file created");
&gt; Namespace fileBucket = new Namespace("files");
&gt; Location fileLocation = new Location(fileBucket, filename);
&gt; StoreValue storeFile = new StoreValue.Builder(newFile).
&gt; withLocation(fileLocation).build();
&gt; client.execute(storeFile);
&gt; System.out.println("File saved to riak ");
&gt; cluster.shutdown();
&gt; }
&gt; catch(Exception e){
&gt; e.printStackTrace();
&gt; }
&gt; }
&gt;
&gt; private static RiakFile createRiakFile(String filename, byte[]
&gt; byteData)
&gt; {
&gt; RiakFile file=new RiakFile();
&gt; file.filename=filename;
&gt; file.byteData=byteData;
&gt; return file;
&gt;
&gt; }
&gt;
&gt;
&gt;
&gt;
&gt; }
&gt;
&gt;
&gt; The terminal Output error:
&gt;
&gt;
&gt;
&gt;
&gt; -------------- next part --------------
&gt; An HTML attachment was scrubbed...
&gt; URL:  basho.com/attachments/20161028/a848f3a3/attachment-0001.html&gt;
&gt; -------------- next part --------------
&gt; A non-text attachment was scrubbed...
&gt; Name: Screen Shot 2016-10-28 at 11.29.23 AM.png
&gt; Type: image/png
&gt; Size: 98161 bytes
&gt; Desc: not available
&gt; URL:  basho.com/attachments/20161028/a848f3a3/attachment-0001.png&gt;
&gt;
&gt; ------------------------------
&gt;
&gt; Message: 2
&gt; Date: Sat, 29 Oct 2016 13:45:16 -0400
&gt; From: AJAX DoneBy Jack 
&gt; To: Pratik Kulkarni 
&gt; Cc: "riak-users@lists.basho.com" 
&gt; Subject: Re: Riak Java client API
&gt; Message-ID:
&gt;  gbo...@mail.gmail.com&gt;
&gt; Content-Type: text/plain; charset="utf-8"
&gt;
&gt; Hi Pratik,
&gt;
&gt; &gt;From exception msg you are missing joda time jar, download one and put in
&gt; your classpath.
&gt; If you use maven it will download the dependency for you automatically.
&gt;
&gt; Hope this help.
&gt; Ajax
&gt;
&gt; On Friday, 28 October 2016, Pratik Kulkarni  wrote:
&gt;
&gt; &gt; Hi All,
&gt; &gt;
&gt; &gt; I am working on a distributed file storage system using the Java Netty
&gt; &gt; framework. For this purpose i have Raik KV as an in memory storage
&gt; &gt; solution.
&gt; &gt; Following jar dependencies are present in my build path :
&gt; &gt;
&gt; &gt; jackson-all-1.8.5.jar
&gt; &gt; netty-all-4.0.15.Final.jar
&gt; &gt; slf4j-api-1.7.2.jar
&gt; &gt; slf4j-simple-1.7.2.jar
&gt; &gt; protobuf-java-2.6.1.jar
&gt; &gt; json-20160212.jar
&gt; &gt; riak-client-2.0.5.jar
&gt; &gt;
&gt; &gt; When i try initiate connection with the riak node. The connection attempt
&gt; &gt; is successful but when i try to store the object in \\*Riak KV.\\* I keep
&gt; &gt; getting the following NoClassDefFoundError. I am not sure why these
&gt; errors
&gt; &gt; arrive though i have included all the jars. Do we require apart from\\*
&gt; &gt; riak-client X.X jar\\* any more dependencies. As per the terminal output I
&gt; &gt; tried to add the dependencies by downloading the jars. But it just keeps
&gt; &gt; giving me new dependencies error every time. Kindly help ?
&gt; &gt;
&gt; &gt; \\*Please see the riak client code in java to store the file object \\*
&gt; &gt;
&gt; &gt;
&gt; &gt; package gash.router.inmemory;
&gt; &gt;
&gt; &gt; import com.basho.riak.client.api.RiakClient;
&gt; &gt; import com.basho.riak.client.api.commands.kv.DeleteValue;
&gt; &gt; import com.basho.riak.client.api.commands.kv.FetchValue;
&gt; &gt; import com.basho.riak.client.api.commands.kv.StoreValue;
&gt; &gt; import com.basho.riak.client.core.RiakCluster;
&gt; &gt; import com.basho.riak.client.core.RiakNode;
&gt; &gt; import com.basho.riak.client.core.query.Location;
&gt; &gt; import com.basho.riak.client.core.query.Namespace;
&gt; &gt; import com.basho.riak.client.core.query.RiakObject;
&gt; &gt; import com.basho.riak.client.core.util.BinaryValue;
&gt; &gt;
&gt; &gt; import java.net.UnknownHostException;
&gt; &gt;
&gt; &gt; public class RiakClientHandler {
&gt; &gt; private static RiakCluster setUpCluster() throws UnknownHostException{
&gt; &gt; // This example will use only one node listening on
&gt; &gt; localhost:8098--default config
&gt; &gt;
&gt; &gt; RiakNode node = new RiakNode.Builder()
&gt; &gt; .withRemoteAddress("127.0.0.1")
&gt; &gt; .withRemotePort(8098)
&gt; &gt; .build();
&gt; &gt; // This cluster object takes our one node as an argument
&gt; &gt; RiakCluster cluster = new RiakCluster.Builder(node)
&gt; &gt; .build();
&gt; &gt;
&gt; &gt; // The cluster must be started to work, otherwise you will see
&gt; &gt; errors
&gt; &gt; cluster.start();
&gt; &gt;
&gt; &gt; return cluster;
&gt; &gt; }
&gt; &gt; private static class RiakFile{
&gt; &gt; public String filename;
&gt; &gt; public byte[] byteData;
&gt; &gt; }
&gt; &gt; public static void saveFile(String filename,byte[] byteData)
&gt; &gt; {
&gt; &gt; try{
&gt; &gt; System.out.println("Inside Riak handler");
&gt; &gt; RiakCluster cluster = setUpCluster();
&gt; &gt; RiakClient client = new RiakClient(cluster);
&gt; &gt; RiakFile newFile = createRiakFile(filename, byteData);
&gt; &gt; System.out.println("Riak file created");
&gt; &gt; Namespace fileBucket = new Namespace("files");
&gt; &gt; Location fileLocation = new Location(fileBucket, filename);
&gt; &gt; StoreValue storeFile = new StoreValue.Builder(newFile).
&gt; &gt; withLocation(fileLocation).build();
&gt; &gt; client.execute(storeFile);
&gt; &gt; System.out.println("File saved to riak ");
&gt; &gt; cluster.shutdown();
&gt; &gt; }
&gt; &gt; catch(Exception e){
&gt; &gt; e.printStackTrace();
&gt; &gt; }
&gt; &gt; }
&gt; &gt; private static RiakFile createRiakFile(String filename, byte[] byteData)
&gt; &gt; {
&gt; &gt; RiakFile file=new RiakFile();
&gt; &gt; file.filename=filename;
&gt; &gt; file.byteData=byteData;
&gt; &gt; return file;
&gt; &gt; }
&gt; &gt;
&gt; &gt; }
&gt; &gt;
&gt; &gt;
&gt; &gt; \\*The terminal Output error:\\*
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; -------------- next part --------------
&gt; An HTML attachment was scrubbed...
&gt; URL:  basho.com/attachments/20161029/d8ae1df6/attachment-0001.html&gt;
&gt; -------------- next part --------------
&gt; A non-text attachment was scrubbed...
&gt; Name: Screen Shot 2016-10-28 at 11.29.23 AM.png
&gt; Type: image/png
&gt; Size: 98161 bytes
&gt; Desc: not available
&gt; URL:  basho.com/attachments/20161029/d8ae1df6/attachment-0001.png&gt;
&gt;
&gt; ------------------------------
&gt;
&gt; Subject: Digest Footer
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
&gt; ------------------------------
&gt;
&gt; End of riak-users Digest, Vol 87, Issue 16
&gt; \\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

