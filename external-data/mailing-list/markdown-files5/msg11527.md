---
title: "Re: Quickly deleting + recreating item in Riak deletes new item"
description: ""
project: community
lastmod: 2013-07-15T06:56:36-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11527"
author_name: "Andrew Thompson"
project_section: "mailinglistitem"
sent_date: 2013-07-15T06:56:36-07:00
---


See this old post:

http://lists.basho.com/pipermail/riak-users\\_lists.basho.com/2011-June/004601.html

Effectively, you should be doing a GET before ANY PUT, and using the
deletedvclock option if you're using PB or checking for the
X-Riak-VClock header on the 404 response. If you get back a tombstone,
you should be doing the new PUT with that tombstone so you don't
accidentally create a sibling with that tombstone.

Alternatively, turn off allow\\_mult=false, so you can resolve the
siblings yourself.

Andrew

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

