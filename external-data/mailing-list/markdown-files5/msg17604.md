---
title: "Re: Need help with Riak-KV (2.1.4) certificate based authentication	using Java client"
description: ""
project: community
lastmod: 2016-08-30T07:15:12-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17604"
mailinglist_parent_id: "msg17603"
author_name: "Luke Bakken"
project_section: "mailinglistitem"
sent_date: 2016-08-30T07:15:12-07:00
---


Kyle -

The CN should be either the DNS-resolvable host name of the Riak node,
or its IP address (without "riak@"). Then, the Java client should be
configured to use that to connect to the node (either DNS or IP).
Without doing that, I really don't have any idea how the Java client
is validating the server certificate during TLS handshake. Did you
configure the client to \\*not\\* validate the server cert?

--
Luke Bakken
Engineer
lbak...@basho.com


On Mon, Aug 29, 2016 at 3:18 PM, Nguyen, Kyle  wrote:
&gt; Hi Luke,
&gt;
&gt; The CN for client's certificate is "kyle" and the CN for riak cert 
&gt; (ssl.certfile) is "riak@127.0.0.1" which matches the nodename in the 
&gt; riak.conf. Riak ssl.cacertfile.pem contains the same CA (getACert) which I 
&gt; used to sign both client and riak public keys. It appears that riak also 
&gt; validated the client certificate following this SSL debug info. I do see \\*\\*\\* 
&gt; CertificateVerify (toward the end) after the client certificate is requested 
&gt; by Riak. Please let me know if it looks right to you.

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

