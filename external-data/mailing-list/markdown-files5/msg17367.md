---
title: "Re: Querying SOLR outside of Riak"
description: ""
project: community
lastmod: 2016-05-16T05:50:37-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17367"
mailinglist_parent_id: "msg17354"
author_name: "Fred Dushin"
project_section: "mailinglistitem"
sent_date: 2016-05-16T05:50:37-07:00
---


Hi Alex,

Other people have chimed in, but let me repeat that while the internal\\_solr 
interface is accessible via HTTP (and needs to be, at least from Riak 
processes), you cannot use that interface to query Solr and expect a correct 
result set (unless you are using a single node cluster with an n\\_val of 1).

When you run your queries through Riak, Yokozuna, the component that interfaces 
with Solr, will use a riak\\_core coverage plan to generate a distributed Solr 
filter query across the entire cluster that guarantees that for any document 
stored on all Solr nodes in the cluster, the query will select one (and only 
one) replica. If you were to run your query locally using the internal\\_solr 
interface, your query would not span the cluster (likely missing documents on 
other nodes) and may have duplicates (e.g., in degenerate cases where you have 
more than one replica on the same node).

I hope that helps explain why using the internal\\_solr interface is not only not 
recommended, it's also not going to give you the results you expect.

-Fred

&gt; On May 15, 2016, at 4:18 AM, Alex De la rosa  wrote:
&gt; 
&gt; Hi Vitaly,
&gt; 
&gt; I know that you can access search via HTTP through Riak like this:
&gt; 
&gt; http://localhost:8098/search/query/famous?wt=json&q=leader:true 
&gt;  AND 
&gt; age\\_i:[25 TO \\*]
&gt; 
&gt; I didn't find documentation about this, but according to your words I could 
&gt; access SOLR directly like this?
&gt; 
&gt; http://localhost:8093/internal\\_solr/famous/select?wt=json&q=leader:true 
&gt;  AND 
&gt; age\\_i:[25 TO \\*]
&gt; 
&gt; If I go through "8098/search" would it be adding extra stress into the Riak 
&gt; cluster? Or is recommended to go through "8098/search" instead of 
&gt; "8093/internal\\_solr"??
&gt; 
&gt; I just want to see if I can make use of SOLR with an external mapreduce 
&gt; platform (Disco) without giving extra stress to Riak.
&gt; 
&gt; Thanks,
&gt; Rohman
&gt; 
&gt; On Sun, May 15, 2016 at 12:07 PM, Vitaly &lt;13vitam...@gmail.com 
&gt; &gt; wrote:
&gt; There is, you can query Solr directly via HTTP, at least as of Riak 2.0.x
&gt; 
&gt; Have a look at http://:8093/internal\\_solr/#/ &lt;&gt; and 
&gt; http://docs.basho.com/riak/kv/2.1.4/developing/usage/search/#querying 
&gt; 
&gt; 
&gt; Vitaly
&gt; 
&gt; 
&gt; On Sun, May 15, 2016 at 10:49 AM, Alex De la rosa  &gt; wrote:
&gt; Nobody knows if there is a way to access SOLR right away without going 
&gt; through RIAK's interface?
&gt; 
&gt; Thanks,
&gt; Alex
&gt; 
&gt; On Fri, May 13, 2016 at 11:07 PM, Alex De la rosa  &gt; wrote:
&gt; Hi all,
&gt; 
&gt; If I want to create a Disco cluster [ http://discoproject.org 
&gt;  ] to build statistics and compile data attacking 
&gt; Riak's SOLR directly without using Riak, how can I do it?
&gt; 
&gt; In this way, I would leave Riak mainly for data IO (post/get) and leave the 
&gt; heavy duty of searching and compiling data to Disco; so Riak's performance 
&gt; shouldn't be affected for searching as mainly it will store and retrieve data 
&gt; only.
&gt; 
&gt; Thanks,
&gt; Alex
&gt; 
&gt; 
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com 
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

