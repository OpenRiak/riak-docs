---
title: "Re: Using MapReduce with Counters"
description: ""
project: community
lastmod: 2013-08-02T13:11:35-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11871"
mailinglist_parent_id: "msg11870"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2013-08-02T13:11:35-07:00
---


Hi João,

You might want to try the steps shown in Sam Elliott's "cookbook":
https://github.com/basho/riak\\_crdt\\_cookbook/blob/master/counters/README.md


On Fri, Aug 2, 2013 at 2:56 PM, João Machado wrote:

&gt; Hello,
&gt;
&gt; Anyone tried to use MR with counters?
&gt;
&gt; I'm trying with the following steps:
&gt;
&gt; Increment the counter:
&gt; -&gt; curl -X POST http://localhost:8098/buckets/BUCKET/counters/MY\\_COUNTER-d 1
&gt;
&gt; Confirm the actual value:
&gt; -&gt; curl http://localhost:8098/buckets/BUCKET/counters/MY\\_COUNTER
&gt; \\*1\\*
&gt;
&gt; Execute mapreduce:
&gt; -&gt; curl -X POST -H "content-type: application/json"
&gt; http://127.0.0.1:8098/mapred -d @map\\_red.js
&gt; \\*{"error":"bad\\_utf8\\_character\\_code"}
&gt; \\*
&gt;
&gt; Where the map\\_red.js is:
&gt;
&gt; {
&gt; "inputs":"BUCKET",
&gt; "query":[
&gt; {"map":{"language":"javascript","name":"Riak.mapValues"}}
&gt; ,{"reduce":{"language":"javascript","name":"Riak.reduceSum"}}
&gt;
&gt; ]
&gt; }
&gt;
&gt;
&gt;
&gt;
&gt;
&gt; []'s
&gt;
&gt;
&gt; [image: Ideais Tecnologia]
&gt; \\*João Machado\\*joao.mach...@ideais.com.brTel.: 55 21 3553 1301 R: 215Cel.:
&gt; 55 21 8124 3531Site: www.ideais.com.br
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;


-- 
Sean Cribbs 
Software Engineer
Basho Technologies, Inc.
http://basho.com/
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

