---
title: "Re: secondary indexes: how to know the saved indexes for a key?"
description: ""
project: community
lastmod: 2011-10-21T00:26:47-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05227"
mailinglist_parent_id: "msg05225"
author_name: "Dan Reverri"
project_section: "mailinglistitem"
sent_date: 2011-10-21T00:26:47-07:00
---


The indexes will be returned as headers in the response. Check the response
for the "x-riak-index-categroy\\_bin" header.

Thanks,
Dan

Daniel Reverri
Developer Advocate
Basho Technologies, Inc.
d...@basho.com


On Thu, Oct 20, 2011 at 9:43 PM, Antonio Rohman Fernandez &lt;
roh...@mahalostudio.com&gt; wrote:

&gt; \\*\\*
&gt;
&gt; Hi Nate,
&gt;
&gt; Thanks for your answer... I also thought of that, having the values as a
&gt; JSON object inside the data... but I was hoping there was some way to check
&gt; the indexes without having to put more data into the objects.
&gt;
&gt; Thanks
&gt;
&gt; On Thu, 20 Oct 2011 21:38:58 -0700, Nate Lawson wrote:
&gt;
&gt; On Oct 20, 2011, at 8:35 PM, Antonio Rohman Fernandez wrote:
&gt;
&gt; Hi All, Imagine that I store "some\\_item" with key "some\\_key" into a
&gt; "products" bucket with a category "whatever" and a price "300". I save it
&gt; using cURL like this: $data = 'some\\_item'; $key = 'some\\_key'; $bucket =
&gt; 'products'; curl\\_setopt($curl, CURLOPT\\_HTTPHEADER,
&gt; array("x-riak-index-price\\_int: 300", "x-riak-index-categroy\\_bin:
&gt; whatever")); curl\\_setopt($curl, CURLOPT\\_URL, 
&gt; "http://{$riakserver}:8098/riak/{$bucket}/{$key}");
&gt; $method = 'PUT'; [...] It works great and "GET 
&gt; http://{$riakserver}:8098/buckets/products/index/category\\_bin/whatever"
&gt; give the correct data: {"keys": ["some\\_key"]} Now my question is... if i
&gt; want to UPDATE the "price" from 300 to 400 but at this moment i don't know
&gt; the "category"... how do i retrieve which indexes are set for a key? so I
&gt; can update "price" and don't lose "category". If I do "GET 
&gt; http://{$riakserver}:8098/riak/products/some\\_key"
&gt; I just get "some\\_item" that is the data stored in the object, but I'm unable
&gt; to see its indexes.
&gt;
&gt; I don't know if there's a better way, but you can always store the secondary 
&gt; index items in the value for that key. Use JSON or something to aggregate 
&gt; multiple items for the value, then looking up the key gives you the price in 
&gt; addition to "some\\_item".
&gt;
&gt; -Nate
&gt;
&gt;
&gt; --
&gt; [image: line] [image: logo]  \\*Antonio Rohman
&gt; Fernandez\\*
&gt; CEO, Founder & Lead Engineer
&gt; roh...@mahalostudio.com \\*Projects\\*
&gt; MaruBatsu.es 
&gt; PupCloud.com 
&gt; Wedding Album  [image: line]
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

