---
title: "Re: riak-users Digest, Vol 87, Issue 16"
description: ""
project: community
lastmod: 2016-11-03T11:07:20-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17732"
mailinglist_parent_id: "msg17722"
author_name: "Pratik Kulkarni"
project_section: "mailinglistitem"
sent_date: 2016-11-03T11:07:20-07:00
---


Hi,

Thank-you Alex .The all in one riak client jar for Java works very well

Best!
Pratik

On Oct 30, 2016 9:22 PM, "Alex Moore"  wrote:

&gt; Hi Pratik,
&gt;
&gt; You should try our All-In-One / Uber jar: http://riak-java-client.
&gt; s3.amazonaws.com/index.html
&gt;
&gt; It will contain all the dependencies that the Riak Java Client needs to
&gt; operate.
&gt;
&gt; Thanks,
&gt; Alex
&gt;
&gt; On Oct 30, 2016, at 1:19 PM, Pratik Kulkarni 
&gt; wrote:
&gt;
&gt; I added the joda time jar . Then it throws some time xxx jar and keeps on
&gt; throwing this. The problem with maven is i am using ant to build my project
&gt;
&gt; Thanks!
&gt;
&gt; On Oct 30, 2016 9:00 AM,  wrote:
&gt;
&gt;&gt; Send riak-users mailing list submissions to
&gt;&gt; riak-users@lists.basho.com
&gt;&gt;
&gt;&gt; To subscribe or unsubscribe via the World Wide Web, visit
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.
&gt;&gt; basho.com
&gt;&gt; or, via email, send a message with subject or body 'help' to
&gt;&gt; riak-users-requ...@lists.basho.com
&gt;&gt;
&gt;&gt; You can reach the person managing the list at
&gt;&gt; riak-users-ow...@lists.basho.com
&gt;&gt;
&gt;&gt; When replying, please edit your Subject line so it is more specific
&gt;&gt; than "Re: Contents of riak-users digest..."
&gt;&gt;
&gt;&gt;
&gt;&gt; Today's Topics:
&gt;&gt;
&gt;&gt; 1. Riak Java client API (Pratik Kulkarni)
&gt;&gt; 2. Re: Riak Java client API (AJAX DoneBy Jack)
&gt;&gt;
&gt;&gt;
&gt;&gt; ----------------------------------------------------------------------
&gt;&gt;
&gt;&gt; Message: 1
&gt;&gt; Date: Fri, 28 Oct 2016 11:47:00 -0700
&gt;&gt; From: Pratik Kulkarni 
&gt;&gt; To: riak-users@lists.basho.com
&gt;&gt; Subject: Riak Java client API
&gt;&gt; Message-ID: &lt;437945ad-b9e1-4e4f-9e8e-5aac04894...@icloud.com&gt;
&gt;&gt; Content-Type: text/plain; charset="us-ascii"
&gt;&gt;
&gt;&gt; Hi All,
&gt;&gt;
&gt;&gt; I am working on a distributed file storage system using the Java Netty
&gt;&gt; framework. For this purpose i have Raik KV as an in memory storage
&gt;&gt; solution.
&gt;&gt; Following jar dependencies are present in my build path :
&gt;&gt;
&gt;&gt; jackson-all-1.8.5.jar
&gt;&gt; netty-all-4.0.15.Final.jar
&gt;&gt; slf4j-api-1.7.2.jar
&gt;&gt; slf4j-simple-1.7.2.jar
&gt;&gt; protobuf-java-2.6.1.jar
&gt;&gt; json-20160212.jar
&gt;&gt; riak-client-2.0.5.jar
&gt;&gt;
&gt;&gt; When i try initiate connection with the riak node. The connection attempt
&gt;&gt; is successful but when i try to store the object in Riak KV. I keep getting
&gt;&gt; the following NoClassDefFoundError. I am not sure why these errors arrive
&gt;&gt; though i have included all the jars. Do we require apart from riak-client
&gt;&gt; X.X jar any more dependencies. As per the terminal output I tried to add
&gt;&gt; the dependencies by downloading the jars. But it just keeps giving me new
&gt;&gt; dependencies error every time. Kindly help ?
&gt;&gt;
&gt;&gt; Please see the riak client code in java to store the file object
&gt;&gt;
&gt;&gt;
&gt;&gt; package gash.router.inmemory;
&gt;&gt;
&gt;&gt; import com.basho.riak.client.api.RiakClient;
&gt;&gt; import com.basho.riak.client.api.commands.kv.DeleteValue;
&gt;&gt; import com.basho.riak.client.api.commands.kv.FetchValue;
&gt;&gt; import com.basho.riak.client.api.commands.kv.StoreValue;
&gt;&gt; import com.basho.riak.client.core.RiakCluster;
&gt;&gt; import com.basho.riak.client.core.RiakNode;
&gt;&gt; import com.basho.riak.client.core.query.Location;
&gt;&gt; import com.basho.riak.client.core.query.Namespace;
&gt;&gt; import com.basho.riak.client.core.query.RiakObject;
&gt;&gt; import com.basho.riak.client.core.util.BinaryValue;
&gt;&gt;
&gt;&gt; import java.net.UnknownHostException;
&gt;&gt;
&gt;&gt; public class RiakClientHandler {
&gt;&gt;
&gt;&gt; private static RiakCluster setUpCluster() throws
&gt;&gt; UnknownHostException{
&gt;&gt; // This example will use only one node listening on
&gt;&gt; localhost:8098--default config
&gt;&gt;
&gt;&gt; RiakNode node = new RiakNode.Builder()
&gt;&gt; .withRemoteAddress("127.0.0.1")
&gt;&gt; .withRemotePort(8098)
&gt;&gt; .build();
&gt;&gt; // This cluster object takes our one node as an argument
&gt;&gt; RiakCluster cluster = new RiakCluster.Builder(node)
&gt;&gt; .build();
&gt;&gt;
&gt;&gt; // The cluster must be started to work, otherwise you will see
&gt;&gt; errors
&gt;&gt; cluster.start();
&gt;&gt;
&gt;&gt; return cluster;
&gt;&gt; }
&gt;&gt;
&gt;&gt; private static class RiakFile{
&gt;&gt;
&gt;&gt; public String filename;
&gt;&gt; public byte[] byteData;
&gt;&gt; }
&gt;&gt;
&gt;&gt; public static void saveFile(String filename,byte[] byteData)
&gt;&gt; {
&gt;&gt; try{
&gt;&gt; System.out.println("Inside Riak handler");
&gt;&gt; RiakCluster cluster = setUpCluster();
&gt;&gt; RiakClient client = new RiakClient(cluster);
&gt;&gt; RiakFile newFile = createRiakFile(filename, byteData);
&gt;&gt; System.out.println("Riak file created");
&gt;&gt; Namespace fileBucket = new Namespace("files");
&gt;&gt; Location fileLocation = new Location(fileBucket, filename);
&gt;&gt; StoreValue storeFile = new StoreValue.Builder(newFile).wi
&gt;&gt; thLocation(fileLocation).build();
&gt;&gt; client.execute(storeFile);
&gt;&gt; System.out.println("File saved to riak ");
&gt;&gt; cluster.shutdown();
&gt;&gt; }
&gt;&gt; catch(Exception e){
&gt;&gt; e.printStackTrace();
&gt;&gt; }
&gt;&gt; }
&gt;&gt;
&gt;&gt; private static RiakFile createRiakFile(String filename, byte[]
&gt;&gt; byteData)
&gt;&gt; {
&gt;&gt; RiakFile file=new RiakFile();
&gt;&gt; file.filename=filename;
&gt;&gt; file.byteData=byteData;
&gt;&gt; return file;
&gt;&gt;
&gt;&gt; }
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; }
&gt;&gt;
&gt;&gt;
&gt;&gt; The terminal Output error:
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; -------------- next part --------------
&gt;&gt; An HTML attachment was scrubbed...
&gt;&gt; URL: &gt; com/attachments/20161028/a848f3a3/attachment-0001.html&gt;
&gt;&gt; -------------- next part --------------
&gt;&gt; A non-text attachment was scrubbed...
&gt;&gt; Name: Screen Shot 2016-10-28 at 11.29.23 AM.png
&gt;&gt; Type: image/png
&gt;&gt; Size: 98161 bytes
&gt;&gt; Desc: not available
&gt;&gt; URL: &gt; com/attachments/20161028/a848f3a3/attachment-0001.png&gt;
&gt;&gt;
&gt;&gt; ------------------------------
&gt;&gt;
&gt;&gt; Message: 2
&gt;&gt; Date: Sat, 29 Oct 2016 13:45:16 -0400
&gt;&gt; From: AJAX DoneBy Jack 
&gt;&gt; To: Pratik Kulkarni 
&gt;&gt; Cc: "riak-users@lists.basho.com" 
&gt;&gt; Subject: Re: Riak Java client API
&gt;&gt; Message-ID:
&gt;&gt; &gt; gmail.com&gt;
&gt;&gt; Content-Type: text/plain; charset="utf-8"
&gt;&gt;
&gt;&gt; Hi Pratik,
&gt;&gt;
&gt;&gt; &gt;From exception msg you are missing joda time jar, download one and put in
&gt;&gt; your classpath.
&gt;&gt; If you use maven it will download the dependency for you automatically.
&gt;&gt;
&gt;&gt; Hope this help.
&gt;&gt; Ajax
&gt;&gt;
&gt;&gt; On Friday, 28 October 2016, Pratik Kulkarni 
&gt;&gt; wrote:
&gt;&gt;
&gt;&gt; &gt; Hi All,
&gt;&gt; &gt;
&gt;&gt; &gt; I am working on a distributed file storage system using the Java Netty
&gt;&gt; &gt; framework. For this purpose i have Raik KV as an in memory storage
&gt;&gt; &gt; solution.
&gt;&gt; &gt; Following jar dependencies are present in my build path :
&gt;&gt; &gt;
&gt;&gt; &gt; jackson-all-1.8.5.jar
&gt;&gt; &gt; netty-all-4.0.15.Final.jar
&gt;&gt; &gt; slf4j-api-1.7.2.jar
&gt;&gt; &gt; slf4j-simple-1.7.2.jar
&gt;&gt; &gt; protobuf-java-2.6.1.jar
&gt;&gt; &gt; json-20160212.jar
&gt;&gt; &gt; riak-client-2.0.5.jar
&gt;&gt; &gt;
&gt;&gt; &gt; When i try initiate connection with the riak node. The connection
&gt;&gt; attempt
&gt;&gt; &gt; is successful but when i try to store the object in \\*Riak KV.\\* I keep
&gt;&gt; &gt; getting the following NoClassDefFoundError. I am not sure why these
&gt;&gt; errors
&gt;&gt; &gt; arrive though i have included all the jars. Do we require apart from\\*
&gt;&gt; &gt; riak-client X.X jar\\* any more dependencies. As per the terminal output I
&gt;&gt; &gt; tried to add the dependencies by downloading the jars. But it just keeps
&gt;&gt; &gt; giving me new dependencies error every time. Kindly help ?
&gt;&gt; &gt;
&gt;&gt; &gt; \\*Please see the riak client code in java to store the file object \\*
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt; package gash.router.inmemory;
&gt;&gt; &gt;
&gt;&gt; &gt; import com.basho.riak.client.api.RiakClient;
&gt;&gt; &gt; import com.basho.riak.client.api.commands.kv.DeleteValue;
&gt;&gt; &gt; import com.basho.riak.client.api.commands.kv.FetchValue;
&gt;&gt; &gt; import com.basho.riak.client.api.commands.kv.StoreValue;
&gt;&gt; &gt; import com.basho.riak.client.core.RiakCluster;
&gt;&gt; &gt; import com.basho.riak.client.core.RiakNode;
&gt;&gt; &gt; import com.basho.riak.client.core.query.Location;
&gt;&gt; &gt; import com.basho.riak.client.core.query.Namespace;
&gt;&gt; &gt; import com.basho.riak.client.core.query.RiakObject;
&gt;&gt; &gt; import com.basho.riak.client.core.util.BinaryValue;
&gt;&gt; &gt;
&gt;&gt; &gt; import java.net.UnknownHostException;
&gt;&gt; &gt;
&gt;&gt; &gt; public class RiakClientHandler {
&gt;&gt; &gt; private static RiakCluster setUpCluster() throws UnknownHostException{
&gt;&gt; &gt; // This example will use only one node listening on
&gt;&gt; &gt; localhost:8098--default config
&gt;&gt; &gt;
&gt;&gt; &gt; RiakNode node = new RiakNode.Builder()
&gt;&gt; &gt; .withRemoteAddress("127.0.0.1")
&gt;&gt; &gt; .withRemotePort(8098)
&gt;&gt; &gt; .build();
&gt;&gt; &gt; // This cluster object takes our one node as an argument
&gt;&gt; &gt; RiakCluster cluster = new RiakCluster.Builder(node)
&gt;&gt; &gt; .build();
&gt;&gt; &gt;
&gt;&gt; &gt; // The cluster must be started to work, otherwise you will see
&gt;&gt; &gt; errors
&gt;&gt; &gt; cluster.start();
&gt;&gt; &gt;
&gt;&gt; &gt; return cluster;
&gt;&gt; &gt; }
&gt;&gt; &gt; private static class RiakFile{
&gt;&gt; &gt; public String filename;
&gt;&gt; &gt; public byte[] byteData;
&gt;&gt; &gt; }
&gt;&gt; &gt; public static void saveFile(String filename,byte[] byteData)
&gt;&gt; &gt; {
&gt;&gt; &gt; try{
&gt;&gt; &gt; System.out.println("Inside Riak handler");
&gt;&gt; &gt; RiakCluster cluster = setUpCluster();
&gt;&gt; &gt; RiakClient client = new RiakClient(cluster);
&gt;&gt; &gt; RiakFile newFile = createRiakFile(filename, byteData);
&gt;&gt; &gt; System.out.println("Riak file created");
&gt;&gt; &gt; Namespace fileBucket = new Namespace("files");
&gt;&gt; &gt; Location fileLocation = new Location(fileBucket, filename);
&gt;&gt; &gt; StoreValue storeFile = new StoreValue.Builder(newFile).
&gt;&gt; &gt; withLocation(fileLocation).build();
&gt;&gt; &gt; client.execute(storeFile);
&gt;&gt; &gt; System.out.println("File saved to riak ");
&gt;&gt; &gt; cluster.shutdown();
&gt;&gt; &gt; }
&gt;&gt; &gt; catch(Exception e){
&gt;&gt; &gt; e.printStackTrace();
&gt;&gt; &gt; }
&gt;&gt; &gt; }
&gt;&gt; &gt; private static RiakFile createRiakFile(String filename, byte[] byteData)
&gt;&gt; &gt; {
&gt;&gt; &gt; RiakFile file=new RiakFile();
&gt;&gt; &gt; file.filename=filename;
&gt;&gt; &gt; file.byteData=byteData;
&gt;&gt; &gt; return file;
&gt;&gt; &gt; }
&gt;&gt; &gt;
&gt;&gt; &gt; }
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt; \\*The terminal Output error:\\*
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; -------------- next part --------------
&gt;&gt; An HTML attachment was scrubbed...
&gt;&gt; URL: &gt; com/attachments/20161029/d8ae1df6/attachment-0001.html&gt;
&gt;&gt; -------------- next part --------------
&gt;&gt; A non-text attachment was scrubbed...
&gt;&gt; Name: Screen Shot 2016-10-28 at 11.29.23 AM.png
&gt;&gt; Type: image/png
&gt;&gt; Size: 98161 bytes
&gt;&gt; Desc: not available
&gt;&gt; URL: &gt; com/attachments/20161029/d8ae1df6/attachment-0001.png&gt;
&gt;&gt;
&gt;&gt; ------------------------------
&gt;&gt;
&gt;&gt; Subject: Digest Footer
&gt;&gt;
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;
&gt;&gt;
&gt;&gt; ------------------------------
&gt;&gt;
&gt;&gt; End of riak-users Digest, Vol 87, Issue 16
&gt;&gt; \\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*
&gt;&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

