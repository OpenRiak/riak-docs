---
title: "Re: What do you do when Riak freezes?"
description: ""
project: community
lastmod: 2014-03-19T14:38:08-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13849"
mailinglist_parent_id: "msg13848"
author_name: "Matthew Von-Maszewski"
project_section: "mailinglistitem"
sent_date: 2014-03-19T14:38:08-07:00
---


I thought I knew the cause of this problem. I do not. We need to await input 
from others.

My apologies.

Other basic questions will be: what version of Riak, what is your app.config, 
how many servers/nodes, any reason this one node is "different"?

Matthew


On Mar 19, 2014, at 5:30 PM, Michael Dillon  wrote:

&gt; We are using AMazon EC2 m3.x2large nodes and while the freeze is occurring 
&gt; free reports
&gt; 
&gt; total used free shared buffers cached
&gt; 
&gt; Mem: 30623232 8818792 21804440 0 88092 4411832
&gt; 
&gt; -/+ buffers/cache: 4318868 26304364
&gt; 
&gt; Swap: 0 0 0
&gt; 
&gt; The Erlang processes seem to be unkillable because "shutdown -r now" is also 
&gt; hanging. Right now these nodes are just being used for some testing, but 
&gt; eventually we will go into production and I really need to have a plan for 
&gt; how to detect and then deal with these Erlang freezes. Or better yet, a way 
&gt; to avoid them even if it means detecting some condition in advance and then 
&gt; rebooting the node.
&gt; 
&gt; 
&gt; 
&gt; 
&gt; On Wed, Mar 19, 2014 at 2:07 PM, Matthew Von-Maszewski  
&gt; wrote:
&gt; 
&gt; Any chance you are overflowing into swap? Or in the case of XEN have you 
&gt; exceeded the guaranteed RAM for the VM memory and moved into the disk backed 
&gt; portion of "ram"?
&gt; 
&gt; What backend do you use within riak? Do you have memory statistics from 
&gt; before and after the seizure/freeze?
&gt; 
&gt; Matthew
&gt; 
&gt; 
&gt; On Mar 19, 2014, at 4:56 PM, Michael Dillon  
&gt; wrote:
&gt; 
&gt; &gt; I've run into a problem with Riak freezing completely on one node running 
&gt; &gt; on Ubuntu 12.04 LTS on a XEN VM (EC2). If I ssh into the node and run "ps 
&gt; &gt; ax" that shell session also freezes. I also tried another ssh session with 
&gt; &gt; "netstat -lnp" to see if I could find the process ID to kill, but that also 
&gt; &gt; froze.
&gt; &gt;
&gt; &gt; I must admit that I have seen a similar problem with RabbitMQ running on 
&gt; &gt; Ubuntu 10 LTS on a an OpenVPS VM a few years ago.
&gt; &gt;
&gt; &gt; I suppose this is an Erlang issue of some sort, but I would really like 
&gt; &gt; some way to kill the Riak processes without a reboot if possible.
&gt; &gt;
&gt; &gt; --
&gt; &gt; PageFreezer.com
&gt; &gt; #200 - 311 Water Street
&gt; &gt; Vancouver, BC V6B 1B8
&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; 
&gt; 
&gt; 
&gt; 
&gt; -- 
&gt; PageFreezer.com
&gt; #200 - 311 Water Street
&gt; Vancouver, BC V6B 1B8
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

