---
title: "Re: riak 2.1.1 starting error in mac os 10.10"
description: ""
project: community
lastmod: 2015-07-30T05:54:07-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16325"
mailinglist_parent_id: "msg16324"
author_name: "Humberto Rodríguez Avila"
project_section: "mailinglistitem"
sent_date: 2015-07-30T05:54:07-07:00
---


Hi fred,

Thanks for your answer. I'm going to do your suggestions :)

I am using GCC because the riak website says " Riak will not compile with
Clang. Please make sure your default C/C++ compiler is GCC."

Best regards,
Humberto


On Thu, Jul 30, 2015 at 2:43 PM Fred Dushin  wrote:

&gt;
&gt; You're getting a runtime load error because your are likely not linking
&gt; against the right C++ runtime (because you built with gcc). IIRC the GCC
&gt; C++ runtime and the C++ runtime that ships with Darwin are not ABI
&gt; compatible. Welcome to C++.
&gt;
&gt; You might try hacking your environment using DYLD\\_LIBRARY\\_PATH, so that
&gt; you link the gcc runtime.
&gt;
&gt; Some things you can do to help diagnose:
&gt;
&gt; See what your eleveldb is linked against.
&gt;
&gt; otool -L
&gt; /Users/Humberto/riak-2.1.1/rel/riak/bin/../lib/eleveldb-2.1.0-0-ga36dbd6/priv/eleveldb.so
&gt;
&gt; Because I build with clang/LLVM, I get:
&gt;
&gt; /usr/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version
&gt; 104.1.0)
&gt; /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version
&gt; 1213.0.0)
&gt;
&gt;
&gt; To see all the symbols in this library (with C++ demangled names -- OS X
&gt; only),
&gt;
&gt; prompt$
&gt; nm 
&gt; /Users/Humberto/riak-2.1.1/rel/riak/bin/../lib/eleveldb-2.1.0-0-ga36dbd6/priv/eleveldb.so
&gt; | c++filt
&gt;
&gt;
&gt; If I grep for basic\\_ostringstream (the symbol you are not finding), I get:
&gt;
&gt; U std::basic\\_ostringstream,
&gt; std::allocator &gt;::basic\\_ostringstream(std::\\_Ios\\_Openmode)
&gt; U VTT for std::basic\\_ostringstream std::char\\_traits, std::allocator &gt;
&gt;
&gt; But I have a more basic question. Why are you using GCC on OS X? You
&gt; really should be using LLVM, which ships with the OS (well, once you
&gt; install Xcode).
&gt;
&gt; -Fred
&gt;
&gt; On Jul 30, 2015, at 8:13 AM, Humberto Rodríguez Avila ####################################################################################### 
&gt; wrote:
&gt;
&gt; Hello, I have an error trying to start riak after compiled it from the
&gt; source code (riak 2.1.1). I am using gcc 5.2 as default compiler, Mac OS
&gt; 10.10 and the Basho's patched version of Erlang (OTP\\_R16B02\\_basho8) I put
&gt; a post in GitHubGist with a full description and logs
&gt; https://gist.github.com/rhumbertgz/b7b0b5c26134c1d10b2c ,
&gt; Thanks in advance Humberto
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

