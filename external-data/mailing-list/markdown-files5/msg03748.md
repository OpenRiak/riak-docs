---
title: "Re: Riak crash on 0.14.2 riak_kv_stat terminating"
description: ""
project: community
lastmod: 2011-06-19T13:52:39-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03748"
mailinglist_parent_id: "msg03747"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2011-06-19T13:52:39-07:00
---


Jeremy,

There is an open pull request for fixing this bug. Details of the bug are
here: https://issues.basho.com/show\\_bug.cgi?id=1072 It will not cause your
entire to node to crash, there is likely some other cause. Node exits tend
to only happen when you run out of RAM or disk space, or can't bind to a TCP
port during riak\\_core startup. Were there other indications in the
erlang.log.\\*?

-- 
Sean Cribbs 
Developer Advocate
Basho Technologies, Inc.
http://www.basho.com/


On Sat, Jun 18, 2011 at 9:53 PM, Jeremy Raymond  wrote:

&gt; Hello,
&gt;
&gt; I have a 3 node Riak 0.14.2 cluster from the deb packages running on Ubuntu
&gt; 10.10. I had a node go down with the following error from the
&gt; sasl-error.log. Ideas on tracking down the cause?
&gt;
&gt; - Jeremy
&gt;
&gt;
&gt; =ERROR REPORT==== 17-Jun-2011::16:26:46 ===
&gt; \\*\\* Generic server riak\\_kv\\_stat terminating
&gt; \\*\\* Last message in was {'$gen\\_cast',{update,vnode\\_get,63475547206}}
&gt; \\*\\* When Server state == {state,
&gt; {spiral,63475547266,
&gt;
&gt; [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
&gt;
&gt; 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
&gt; 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},
&gt; {spiral,63475547266,
&gt;
&gt; [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
&gt;
&gt; 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
&gt; 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},
&gt; 2846696,42859,35845,31080,
&gt; {slide,63475532874,60,60,
&gt;
&gt; "/tmp/riak/slide-data/474/1308.328066.57288",
&gt; {file\\_descriptor,prim\\_file,
&gt; {#Port&lt;0.64895&gt;,24}},
&gt; 63475547205},
&gt; {slide,63475532874,60,60,
&gt;
&gt; "/tmp/riak/slide-data/474/1308.328066.59517",
&gt; {file\\_descriptor,prim\\_file,
&gt; {#Port&lt;0.64896&gt;,13}},
&gt; 63475547205},
&gt; {spiral,63475547266,
&gt;
&gt; [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
&gt;
&gt; 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
&gt; 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},
&gt; 978,4,
&gt; {spiral,63475547266,
&gt;
&gt; [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
&gt;
&gt; 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
&gt; 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},
&gt; 21375,21}
&gt; \\*\\* Reason for termination ==
&gt; \\*\\* {badarg,[{erlang,hd,[[]]},
&gt; {spiraltime,incr,3},
&gt; {riak\\_kv\\_stat,spiral\\_incr,3},
&gt; {riak\\_kv\\_stat,handle\\_cast,2},
&gt; {gen\\_server2,handle\\_msg,7},
&gt; {proc\\_lib,init\\_p\\_do\\_apply,3}]}
&gt;
&gt; =CRASH REPORT==== 17-Jun-2011::16:26:46 ===
&gt; crasher:
&gt; initial call: gen:init\\_it/7
&gt; pid: &lt;0.151.0&gt;
&gt; registered\\_name: riak\\_kv\\_stat
&gt; exception exit:
&gt; {badarg,[{erlang,hd,[[]]},{spiraltime,incr,3},{riak\\_kv\\_stat,spiral\\_incr,3},{riak\\_kv\\_stat,handle\\_cast,2},{gen\\_server2,handle\\_msg,7},{proc\\_lib,init\\_p\\_do\\_apply,3}]}
&gt; in function gen\\_server2:terminate/6
&gt; in call from proc\\_lib:init\\_p\\_do\\_apply/3
&gt; ancestors: [riak\\_kv\\_sup,&lt;0.138.0&gt;]
&gt; messages:
&gt; [{$gen\\_cast,{update,vnode\\_get,63475547206}},{$gen\\_cast,{update,vnode\\_get,63475547206}},{$gen\\_cast,{update,vnode\\_get,63475547206}},{$gen\\_cast,{update,vnode\\_get,63475547206}},{$gen\\_cast,{update,vnode\\_get,63475547206}},{$gen\\_cast,{update,vnode\\_get,63475547206}},{$gen\\_cast,{update,vnode\\_get,63475547206}},{$gen\\_cast,{update,vnode\\_get,63475547206}},{$gen\\_cast,{update,mapper\\_end,63475547206}},{$gen\\_cast,{update,vnode\\_get,63475547206}},{$gen\\_cast,{update,mapper\\_end,63475547206}},{$gen\\_cast,{update,vnode\\_get,63475547206}},{$gen\\_cast,{update,vnode\\_get,63475547206}},{$gen\\_cast,{update,vnode\\_get,63475547206}},{$gen\\_cast,{update,vnode\\_get,63475547206}},{$gen\\_cast,{update,vnode\\_get,63475547206}},{$gen\\_cast,{update,vnode\\_get,63475547206}},{$gen\\_cast,{update,vnode\\_get,63475547206}},{$gen\\_cast,{update,vnode\\_get,63475547206}},{$gen\\_cast,{update,vnode\\_get,63475547206}},{$gen\\_cast,{update,vnode\\_put,63475547206}}]
&gt; links: [#Port&lt;0.64896&gt;,&lt;0.145.0&gt;,#Port&lt;0.64895&gt;]
&gt; dictionary: []
&gt; trap\\_exit: true
&gt; status: running
&gt; heap\\_size: 2584
&gt; stack\\_size: 24
&gt; reductions: 81329187
&gt; neighbours:
&gt;
&gt; =SUPERVISOR REPORT==== 17-Jun-2011::16:26:46 ===
&gt; Supervisor: {local,riak\\_kv\\_sup}
&gt; Context: child\\_terminated
&gt; Reason:
&gt; {badarg,[{erlang,hd,[[]]},{spiraltime,incr,3},{riak\\_kv\\_stat,spiral\\_incr,3},{riak\\_kv\\_stat,handle\\_cast,2},{gen\\_server2,handle\\_msg,7},{proc\\_lib,init\\_p\\_do\\_apply,3}]}
&gt; Offender:
&gt; [{pid,&lt;0.151.0&gt;},{name,riak\\_kv\\_stat},{mfa,{riak\\_kv\\_stat,start\\_link,[]}},{restart\\_type,permanent},{shutdown,5000},{child\\_type,worker}]
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

