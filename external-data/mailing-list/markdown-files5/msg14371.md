---
title: "Re: Python client: Connection pool"
description: ""
project: community
lastmod: 2014-06-25T07:36:28-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14371"
mailinglist_parent_id: "msg14368"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2014-06-25T07:36:28-07:00
---


Alex,

No, it will only randomize the node when \\*opening\\* a connection. After
that, it just uses what is first available in the pool.

We have an outstanding plan to support auto-configuring clients, but that
work did not make it into the 2.0 cycle.


On Wed, Jun 25, 2014 at 7:18 AM, Alex De la rosa 
wrote:

&gt; Hi there,
&gt;
&gt; Using the Python client, in the documentation I can read this:
&gt;
&gt; "The client maintains a connection pool behind the scenes, one for each
&gt; protocol. Connections are opened as-needed; a random node is selected when
&gt; a new connection is requested."
&gt;
&gt; Imagine that I create my connection like this:
&gt;
&gt; client = riak.RiakClient(protocol='pbc', nodes=[{'host':'X.X.X.1',
&gt; 'http\\_port':8098,'pb\\_port':8087},{'host':'X.X.X.2','http\\_port':8098,
&gt; 'pb\\_port':8087},{'host':'X.X.X.3','http\\_port':8098,'pb\\_port':8087},{'host'
&gt; :'X.X.X.4','http\\_port':8098,'pb\\_port':8087},{'host':'X.X.X.5','http\\_port'
&gt; :8098,'pb\\_port':8087}])
&gt;
&gt; Specifying the 5 servers in my cluster... Every time that do a request
&gt; (PUT/GET/DELETE) is going to use a randomized host from the list? Also...
&gt; what if for example I add server X.X.X.6 and X.X.X.7? do I have to manually
&gt; edit my connection string to reflect those changes? Is there a way to
&gt; automatically use any node in the cluster without having to specify them
&gt; manually?
&gt;
&gt; Thanks,
&gt; Alex
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;


-- 
Sean Cribbs 
Software Engineer
Basho Technologies, Inc.
http://basho.com/
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

