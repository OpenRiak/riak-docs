---
title: "Re: Bucket creation."
description: ""
project: community
lastmod: 2013-02-05T20:46:11-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg10006"
mailinglist_parent_id: "msg10005"
author_name: "Alexander Moore"
project_section: "mailinglistitem"
sent_date: 2013-02-05T20:46:11-08:00
---


I think the problem you are having here is that you are using an invalid
bucket name.

"buyseasons/products" would actually refer to a bucket/key pair. Riak
doesn't have nested buckets.

If you change your bucket name to "buyseasons-products" or
"buyseasons%20products" it should work.

As for the weird/misleading exception, I'll report it to CorrugatedIron.

Thanks,
Alex Moore


I still have a question. Based on your input I modified the code slightly
&gt; as follows:
&gt;
&gt; \\*\\* \\*\\*
&gt;
&gt; RiakBucketProperties bucketProperties = new
&gt; RiakBucketProperties();\\*\\*\\*\\*
&gt;
&gt; bucketProperties.SetNVal(4);\\*\\*\\*\\*
&gt;
&gt; bucketProperties.SetSearch(true);\\*\\*\\*\\*
&gt;
&gt; bucketProperties.SetAllowMultiple(true);\\*\\*\\*\\*
&gt;
&gt; bucketProperties.SetWVal("all");\\*\\*\\*\\*
&gt;
&gt; bucketProperties.SetRVal("quorum");\\*\\*\\*\\*
&gt;
&gt; if (!client.SetBucketProperties("buyseasons/products",
&gt; bucketProperties).IsSuccess)\\*\\*\\*\\*
&gt;
&gt; {\\*\\*\\*\\*
&gt;
&gt; Console.WriteLine("Setting bucket properties failed");\\*\\*\\*\\*
&gt;
&gt; }\\*\\*\\*\\*
&gt;
&gt; RiakResult riakBuckpropertiesResult =
&gt; client.GetBucketProperties("buyseasons/products", true);\\*\\*\\*\\*
&gt;
&gt; \\*\\* \\*\\*
&gt;
&gt; But I get a NullReferenceException\\*\\*\\*\\*
&gt;
&gt; \\*\\* \\*\\*
&gt;
&gt; at CorrugatedIron.Models.RiakBucketProperties.ReadQuorum(JObject props,
&gt; String key, Action`1 setter)\\*\\*\\*\\*
&gt;
&gt; at CorrugatedIron.Models.RiakBucketProperties..ctor(RiakRestResponse
&gt; response)\\*\\*\\*\\*
&gt;
&gt; at CorrugatedIron.RiakClient.GetBucketProperties(String bucket, Boolean
&gt; extended)\\*\\*\\*\\*
&gt;
&gt; . . . . .\\*\\*\\*\\*
&gt;
&gt; \\*\\* \\*\\*
&gt;
&gt; So the bucket should have been created when I set the properties. But then
&gt; I tried to read the properties back and I get the exception.\\*\\*\\*\\*
&gt;
&gt; \\*\\* \\*\\*
&gt;
&gt; \\*From:\\* Alexander Sicular [mailto:sicul...@gmail.com]
&gt; \\*Sent:\\* Tuesday, February 05, 2013 5:17 PM
&gt; \\*To:\\* Kevin Burton
&gt; \\*Cc:\\* riak-users
&gt; \\*Subject:\\* Re: Bucket creation.\\*\\*\\*\\*
&gt;
&gt; \\*\\* \\*\\*
&gt;
&gt; "buckets" are a virtual concept. you dont need to "create" them. just
&gt; write a key to any bucket. also by modifying the default bucket parameters,
&gt; by adding the search hook on a bucket, let's say, you are also "creating"
&gt; the bucket.\\*\\*\\*\\*
&gt;
&gt; \\*\\* \\*\\*
&gt;
&gt; -alexander\\*\\*\\*\\*
&gt;
&gt; \\*\\* \\*\\*
&gt;
&gt; On Tue, Feb 5, 2013 at 6:09 PM, Kevin Burton 
&gt; wrote:\\*\\*\\*\\*
&gt;
&gt; \\*\\*\\*\\*
&gt;
&gt; I have filed to find code that would create a bucket. It must be in the
&gt; past I have just put objects into a bucket and Riak must construct the
&gt; bucket if it does not exist. Now I would like to create the bucket and set
&gt; some properties on that bucket. But I donâ€™t know how to create the bucket.
&gt; \\*\\*\\*\\*
&gt;
&gt; \\*\\*\\*\\*
&gt;
&gt; So I have code like:\\*\\*\\*\\*
&gt;
&gt; \\*\\*\\*\\*
&gt;
&gt; BuildProduct(source, destination);\\*\\*\\*\\*
&gt;
&gt; RiakObject value = new RiakObject("products",
&gt; keySku, JsonConvert.SerializeObject(destination))\\*\\*\\*\\*
&gt;
&gt; {\\*\\*\\*\\*
&gt;
&gt; ContentType = "application/json"\\*\\*\\*\\*
&gt;
&gt; };\\*\\*\\*\\*
&gt;
&gt; \\*\\*\\*\\*
&gt;
&gt; RiakResult response =
&gt; client.Put(value, new RiakPutOptions { W = 2 });\\*\\*\\*\\*
&gt;
&gt; \\*\\*\\*\\*
&gt;
&gt; But I would like to create the bucket and set properties on the bucket
&gt; before I put things into the bucket. Like:\\*\\*\\*\\*
&gt;
&gt; \\*\\*\\*\\*
&gt;
&gt; RiakResult riakBuckpropertiesResult =
&gt; client.GetBucketProperties("products", true);\\*\\*\\*\\*
&gt;
&gt; if (riakBuckpropertiesResult.IsSuccess)\\*\\*\\*\\*
&gt;
&gt; {\\*\\*\\*\\*
&gt;
&gt; riakBuckpropertiesResult.Value
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

