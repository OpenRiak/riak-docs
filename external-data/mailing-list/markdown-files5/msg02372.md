---
title: "Re: 0.14 OSX riaksearch in inconsistent state"
description: ""
project: community
lastmod: 2011-02-18T08:38:33-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02372"
mailinglist_parent_id: "msg02371"
author_name: "francisco treacy"
project_section: "mailinglistitem"
sent_date: 2011-02-18T08:38:33-08:00
---


https://issues.basho.com/show\\_bug.cgi?id=970

Francisco

2011/2/18 Gary William Flake :
&gt; I just ran a script on a my dev machine to remove everything in the
&gt; local riaksearch instance.  In the process, I found something very
&gt; strange.  Specifically, there exists objects in my instance that
&gt; cannot be deleted (I get an error whenever I try) and that always
&gt; appear with their data intact.
&gt;
&gt; Here's a specific example:
&gt;
&gt;&gt; curl 
&gt;&gt; 'http://localhost:8098/riak/clips/9ce2532a8d53b6335b1c4d3955d1267345905cac:4c8a0a1d8ef83af4be6a9aa170d6323ecba22b2f'
&gt; {"user":"9ce2532a8d53b6335b1c4d3955d1267345905cac","blob":"4c8a0a1d8ef83af4be6a9aa170d6323ecba22b2f","ctime":1297550238922,"mtime":1297550238922,"text":"something
&gt; matter gop imgur imgur com","title":"Something the matter, GOP? -
&gt; Imgur 
&gt; ","url":"http://imgur.com/Ir34G","domain":"imgur.com","tags":"","annote":"","private":1,"width":"625","height":"332","version":"0.1"}
&gt;
&gt;&gt; curl -X DELETE 
&gt;&gt; 'http://localhost:8098/riak/clips/9ce2532a8d53b6335b1c4d3955d1267345905cac:4c8a0a1d8ef83af4be6a9aa170d6323ecba22b2f'
&gt; 500 Internal Server
&gt; ErrorInternal Server Error
=====================

The server
&gt; encountered an error while processing this
&gt; request:  

```
{error,badarg,
&gt;       [{erlang,iolist_to_binary,[notfound]},
&gt;        {wrq,append_to_response_body,2},
&gt;        {riak_kv_wm_raw,delete_resource,2},
&gt;        {webmachine_resource,resource_call,3},
&gt;        {webmachine_resource,do,3},
&gt;        {webmachine_decision_core,resource_call,1},
&gt;        {webmachine_decision_core,decision,1},
&gt;        
&gt; {webmachine_decision_core,handle_request,2}]}
```


---

mochiweb+webmachine
&gt; web server


&gt;
&gt; Meanwhile, sasl-error.log shows for that last command:
&gt;
&gt;
&gt; =ERROR REPORT==== 18-Feb-2011::08:24:18 ===
&gt; webmachine error:
&gt; path="/riak/clips/9ce2532a8d53b6335b1c4d3955d1267345905cac:4c8a0a1d8ef83af4be6a9aa170d6323ecba22b2f"
&gt; {error,badarg,
&gt;       [{erlang,iolist\\_to\\_binary,[notfound]},
&gt;        {wrq,append\\_to\\_response\\_body,2},
&gt;        {riak\\_kv\\_wm\\_raw,delete\\_resource,2},
&gt;        {webmachine\\_resource,resource\\_call,3},
&gt;        {webmachine\\_resource,do,3},
&gt;        {webmachine\\_decision\\_core,resource\\_call,1},
&gt;        {webmachine\\_decision\\_core,decision,1},
&gt;        {webmachine\\_decision\\_core,handle\\_request,2}]}
&gt;
&gt; Does anyone have any ideas what is going on and how best to avoid it?
&gt; It stuff like this that terrifies me.
&gt;
&gt; Thanks,
&gt; -- GWF
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

