---
title: "Re: Load balancer"
description: ""
project: community
lastmod: 2014-02-02T09:41:45-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13569"
mailinglist_parent_id: "msg13568"
author_name: "Konstantin Kalin"
project_section: "mailinglistitem"
sent_date: 2014-02-02T09:41:45-08:00
---


Well. I’m kinda aware about the stats :) But I believe they are not a good way 
for LB. The issue is LB requires a simple response OK and cannot do extended 
parsing. 

I see following cases what can happen in production:
1) Server is alive - riak is stopped
2) Server is down completely
3) Server is alive, riak is alive but it’s not a part of a cluster.
4) Server is alive, riak console is alive but backend(bitcasc for example) is 
down. 
5) What’s else?

Honestly I’m considering to build a special Web service that will run together 
with Riak and give it status. So far I was not be able to find a standard way 
using Riak capabilities to cover all 4 possible scenarios.

Thank you,
Konstantin. 

On Feb 2, 2014, at 9:33 AM, Roberto Aloi  wrote:

&gt; Hi Konstantin,
&gt; 
&gt; Riak exposes a number of metrics - such as counters and histograms - that you 
&gt; can use to monitor your nodes' health.
&gt; Metrics are available through the HTTP API via the /stats endpoint.
&gt; For details, see: 
&gt; http://docs.basho.com/riak/latest/ops/running/stats-and-monitoring/
&gt; 
&gt; Cheers,
&gt; 
&gt; Roberto Aloi
&gt; @robertoaloi
&gt; 
&gt; 
&gt; 
&gt; On Sun, Feb 2, 2014 at 6:23 PM, Konstantin Kalin  
&gt; wrote:
&gt; Sorry jumping into the discussion. What is a best way to monitor Riak node 
&gt; health? Most loadbalancer uses HTTP request to check if a node is alive. 
&gt; 
&gt; Currently we use Riak Java client to load balance requests to Riak. The issue 
&gt; is if a node gets removed or added all Java servers need to update 
&gt; configuration to reflect the changes. It’s kinda annoying for operation team. 
&gt; So we started thinking about putting LB between Riak cluster and Java 
&gt; clients. 
&gt; 
&gt; Thank you,
&gt; Konstantin. 
&gt; 
&gt; 
&gt; On Feb 2, 2014, at 8:25 AM, Gideon de Kok  wrote:
&gt; 
&gt;&gt; Mark,
&gt;&gt; 
&gt;&gt; Your throughput of your total cluster will still be dependent on the 
&gt;&gt; throughput on that specific node:
&gt;&gt; It can coordinate requests, but stays responsible for the actual response to 
&gt;&gt; the client.
&gt;&gt; 
&gt;&gt; Load balancers not only help to increase performance by fanning out the 
&gt;&gt; requests to multiple servers,
&gt;&gt; it will also increase the availability of your cluster in terms of client to 
&gt;&gt; server connections. 
&gt;&gt; 
&gt;&gt; Cheers,
&gt;&gt; On 2 Feb 2014 at 17:20:28, markrthomas (mark.tho...@equifax.com) wrote:
&gt;&gt; 
&gt;&gt;&gt; Hello 
&gt;&gt;&gt; 
&gt;&gt;&gt; Any node in a Riak cluster can coordinate requests for any other Riak node 
&gt;&gt;&gt; that is responsible for the data you're reading/writing. 
&gt;&gt;&gt; 
&gt;&gt;&gt; What is the advantage of fronting a Riak cluster with a load-balancer? 
&gt;&gt;&gt; 
&gt;&gt;&gt; Thanks 
&gt;&gt;&gt; 
&gt;&gt;&gt; Mark 
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; -- 
&gt;&gt;&gt; View this message in context: 
&gt;&gt;&gt; http://riak-users.197444.n3.nabble.com/Load-balancer-tp4030414.html 
&gt;&gt;&gt; Sent from the Riak Users mailing list archive at Nabble.com. 
&gt;&gt;&gt; 
&gt;&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_ 
&gt;&gt;&gt; riak-users mailing list 
&gt;&gt;&gt; riak-users@lists.basho.com 
&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com 
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; 
&gt; 
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; 
&gt; 
&gt; 
&gt; 
&gt; -- 
&gt; Roberto Aloi
&gt; ---
&gt; Website: http://roberto-aloi.com
&gt; Twitter: @robertoaloi

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

