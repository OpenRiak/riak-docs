---
title: "Re: A problem running Riak in a Docker image under Vagrant on	Windows 7,8 and 10"
description: ""
project: community
lastmod: 2015-09-03T07:44:51-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16494"
mailinglist_parent_id: "msg16479"
author_name: "Pete Slater"
project_section: "mailinglistitem"
sent_date: 2015-09-03T07:44:51-07:00
---


Hi,

Thanks for getting back to me.

As for sharing the setup - I have cut the files down to the minimum needed to 
show the problem and popped them onto github,

https://github.com/psl-trifork/riak-docker

The actual project is a lot more complicated but this one riak docker image is 
proving to be a pain when run on Windows and only Windows. Linux and MacOS are 
fine.

If you can spot any obvious gotchas then please do let me know.

Thanks in advance.
———————————————————————————
Pete Slater

Trifork Leeds Ltd, Round Foundry Media Centre, Foundry Street, Leeds LS11 5QP, 
UK

Skype ID: psl.trifork
E-Mail: p...@trifork.com
www: www.trifork.com




On 31 Aug 2015, at 19:38, Christopher Mancini 
&gt; wrote:

Hey Pete,

If you want to share your setup, I will try to replicate the problem and see if 
I can help.

Chris

On Mon, Aug 31, 2015 at 2:08 PM Matthew Brender 
&gt; wrote:
Hey Pete,

That's an interesting situation that leads me to think its a Windows
Vagrant consideration, given that everything runs on OS X. Is your
Dockerfile in a place we could see it and/or run it?

FWIW, Hector has a project that works well. Maybe you can reference
his setup [0]. I'd also welcome a cross-post to StackOverflow in case
its a common Windows + Vagrant issue that our community may miss [1].

[0] http://stackoverflow.com/questions/tagged/riak
[1] https://github.com/hectcastro/vagrant-multi-docker-riak

Matt Brender | Developer Advocacy Lead
Basho Technologies
t: @mjbrender


On Fri, Aug 28, 2015 at 3:49 AM, Pete Slater 
&gt; wrote:
&gt;
&gt; I am having a problem with a Docker image running Riak which is causing me 
&gt; concern.
&gt;
&gt; I have a Docker image which is being run inside of a Vagrant container. The 
&gt; Docker image is running Riak in a CentOS 7 guest OS and is configured to 
&gt; start via a supervisor script.
&gt;
&gt; The issue I am having is that when running the Vagrant VM in a MacOS host OS, 
&gt; Riak in the Docker image starts fine.
&gt;
&gt; However when I run the same Vagrantfile in a Windows host OS, Riak fails to 
&gt; start with an error ‘Protocol: ~tp: the name 
&gt; riak@127.0.0.1&gt;
&gt; seems to be in use by another erlang node’
&gt;
&gt; I have tried changing the codename but the error persists.
&gt;
&gt; The strange thing is that Riak seems to be running as we can query it via the 
&gt; REST API. But when trying to communicate to it when logged into the Docker 
&gt; container and doing something like ‘riak ping’ we get Node 
&gt; ‘riak@127.0.0.1&gt;’
&gt; not responding to pings.
&gt;
&gt; Any help would be appreciated. If you need further information then please 
&gt; ask.
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

