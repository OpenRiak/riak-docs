---
title: "Re: first time user setting up a cluster"
description: ""
project: community
lastmod: 2013-02-09T18:29:55-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg10064"
mailinglist_parent_id: "msg10063"
author_name: "Brian Sparrow"
project_section: "mailinglistitem"
sent_date: 2013-02-09T18:29:55-08:00
---


Yeah, it should be more clear in the documentation that once a node has
been started in order to change the name you must either remove the ring
files, reip the node, or riak-admin cluster force-replace the node. Let us
know if you run into any more issues or confusing pieces of documentation.

Thanks!


On Sat, Feb 9, 2013 at 8:49 PM, tech topcis  wrote:

&gt; yes, I was following the flow of the documentation.
&gt;
&gt; ## Name of the riak node
&gt; -name riak@192.168.1.9
&gt;
&gt; I removed four files from /var/lib/riak/ring.
&gt;
&gt; That appears to have worked.
&gt;
&gt; Thank you!
&gt;
&gt;
&gt; On 02/09/2013 04:31 PM, Brian Sparrow wrote:
&gt;
&gt; Did you change the node name in vm.args after the node had been started
&gt; once? Remove the ring file in the riak data directory and start the node
&gt; again.
&gt;
&gt; -Brian
&gt;
&gt;
&gt; On Sat, Feb 9, 2013 at 11:30 AM, tech topcis  wrote:
&gt;
&gt;&gt; Hi,
&gt;&gt;
&gt;&gt; I am following the set-up instructions and ran into a problem when I
&gt;&gt; switched from the loop back ip to the LAN IP.
&gt;&gt;
&gt;&gt; I followed this page:
&gt;&gt; http://docs.basho.com/riak/1.2.1/cookbooks/Basic-Cluster-Setup/
&gt;&gt;
&gt;&gt; I was able to edit the two files. Once I tried to start again, I had
&gt;&gt; an error (below).
&gt;&gt;
&gt;&gt; Please help me see what I need to change.
&gt;&gt;
&gt;&gt; Thank you, Michael
&gt;&gt;
&gt;&gt; log/console output:
&gt;&gt; Exec: /usr/lib/riak/erts-5.9.1/bin/erlexec -boot
&gt;&gt; /usr/lib/riak/releases/1.2.1/riak -embedded -config
&gt;&gt; /etc/riak/app.config -pa
&gt;&gt; /usr/lib/riak/lib/basho-patches -args\\_file /etc/riak/vm.args
&gt;&gt; -- console
&gt;&gt; Root: /usr/lib/riak
&gt;&gt; Erlang R15B01 (erts-5.9.1) [source] [64-bit] [smp:6:6]
&gt;&gt; [async-threads:64] [kernel-poll:true]
&gt;&gt;
&gt;&gt; \\*\\* /usr/lib/riak/lib/basho-patches/etop\\_txt.beam hides
&gt;&gt; /usr/lib/riak/lib/observer-1.1/ebin/etop\\_txt.beam
&gt;&gt; \\*\\* Found 1 name clashes in code paths
&gt;&gt; 10:28:50.822 [info] Application lager started on node 'riak@192.168.1.9'
&gt;&gt; 10:28:50.904 [info] Upgrading legacy ring
&gt;&gt; 10:28:51.043 [error] gen\\_server riak\\_core\\_capability terminated with
&gt;&gt; reason: no function clause matching orddict:fetch('riak@192.168.1.9',
&gt;&gt; []) line 72
&gt;&gt; /usr/lib/riak/lib/os\\_mon-2.2.9/priv/bin/memsup: Erlang has closed.
&gt;&gt;
&gt;&gt; Erlang has closed
&gt;&gt;
&gt;&gt; {"Kernel pid
&gt;&gt;
&gt;&gt; terminated",application\\_controller,"{application\\_start\\_failure,riak\\_core,{bad\\_return,{{riak\\_core\\_app,start,[normal,[]]},{'EXIT',{{function\\_clause,[{orddict,fetch,['
&gt;&gt; riak@192.168.1.9
&gt;&gt; ',[]],[{file,[111,114,100,100,105,99,116,46,101,114,108]},{line,72}]},{riak\\_core\\_capability,renegotiate\\_capabilities,1,[{file,[115,114,99,47,114,105,97,107,95,99,111,114,101,95,99,97,112,97,98,105,108,105,116,121,46,101,114,108]},{line,415}]},{riak\\_core\\_capability,handle\\_call,3,[{file,[115,114,99,47,114,105,97,107,95,99,111,114,101,95,99,97,112,97,98,105,108,105,116,121,46,101,114,108]},{line,208}]},{gen\\_server,handle\\_msg,5,[{file,[103,101,110,95,115,101,114,118,101,114,46,101,114,108]},{line,588}]},{proc\\_lib,init\\_p\\_do\\_apply,3,[{file,[112,114,111,99,95,108,105,98,46,101,114,108]},{line,227}]}]},{gen\\_server,call,[riak\\_core\\_capability,{register,{riak\\_core,vnode\\_routing},{capability,[proxy,legacy],legacy,{riak\\_core,legacy\\_vnode\\_routing,[{true,legacy},{false,proxy}]}}},infinity]}}}}}}"}
&gt;&gt;
&gt;&gt; Crash dump was written to: /var/log/riak/erl\\_crash.dump
&gt;&gt; Kernel pid terminated (application\\_controller)
&gt;&gt;
&gt;&gt; ({application\\_start\\_failure,riak\\_core,{bad\\_return,{{riak\\_core\\_app,start,[normal,[]]},{'EXIT',{{function\\_clause,[{orddict,fetch,['
&gt;&gt; riak@192.168.1.9',[]],
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;
&gt;
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

