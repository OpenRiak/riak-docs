---
title: "Riak Search on \"Sets\" data-types"
description: ""
project: community
lastmod: 2014-08-21T11:34:32-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14779"
author_name: "Alex De la rosa"
project_section: "mailinglistitem"
sent_date: 2014-08-21T11:34:32-07:00
---


Hi there,

For a project I'm building I'm saving a "keyword" and a "site" for an image
like this:

 bucket = client.bucket\\_type('tp\\_images').bucket('images')
 key = bucket.new(image\\_hash)
 key.registers['raw'].assign(base64.b64encode(image\\_data))
 key.registers['site'].assign('johnlewis.com')
 key.registers['keywords'].assign('cameras')
 key.store()

and querying the index like this to get the desired images:

 r = client.fulltext\\_search('ix\\_images', 'site\\_registers:johnlewis.com AND
keywords\\_registers:cameras', sort='clicks\\_counter desc', rows=5)

Imagine now that i want to associate the same image to different keywords,
having a SET instead of a REGISTER:

 bucket = client.bucket\\_type('tp\\_images').bucket('images')
 key = bucket.new(image\\_hash)
 key.registers['raw'].assign(base64.b64encode(image\\_data))
 key.registers['site'].assign('johnlewis.com')
 key.sets['keywords'].add('digital cameras')
 key.sets['keywords'].add('DLSR')
 key.store()

How to query the SET using Riak Search? Something like the "IN ()"
statement in traditional SQL:

 r = client.fulltext\\_search('ix\\_images', 'site\\_registers:johnlewis.com AND
keywords\\_set:???????', sort='clicks\\_counter desc', rows=5)

Thanks!
Alex
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

