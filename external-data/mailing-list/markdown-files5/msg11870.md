---
title: "Using MapReduce with Counters"
description: ""
project: community
lastmod: 2013-08-02T12:58:47-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11870"
author_name: "João Machado"
project_section: "mailinglistitem"
sent_date: 2013-08-02T12:58:47-07:00
---


Hello,

Anyone tried to use MR with counters?

I'm trying with the following steps:

Increment the counter:
-&gt; curl -X POST http://localhost:8098/buckets/BUCKET/counters/MY\\_COUNTER -d
1

Confirm the actual value:
-&gt; curl http://localhost:8098/buckets/BUCKET/counters/MY\\_COUNTER
\\*1\\*

Execute mapreduce:
-&gt; curl -X POST -H "content-type: application/json"
http://127.0.0.1:8098/mapred -d @map\\_red.js
\\*{"error":"bad\\_utf8\\_character\\_code"}
\\*

Where the map\\_red.js is:

{
 "inputs":"BUCKET",
 "query":[
 {"map":{"language":"javascript","name":"Riak.mapValues"}}
 ,{"reduce":{"language":"javascript","name":"Riak.reduceSum"}}

]
}





[]'s


[image: Ideais Tecnologia]
\\*João Machado\\*joao.mach...@ideais.com.brTel.: 55 21 3553 1301 R: 215Cel.:
55 21 8124 3531Site: www.ideais.com.br
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

