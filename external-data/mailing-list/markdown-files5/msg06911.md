---
title: "Re: Riak problems on Ubuntu (novice user)"
description: ""
project: community
lastmod: 2012-03-06T14:33:33-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06911"
mailinglist_parent_id: "msg06910"
author_name: "Robert Lowe"
project_section: "mailinglistitem"
sent_date: 2012-03-06T14:33:33-08:00
---


Are the processes running? `ps aux`? beam / epmd?

Can you run `riak console`? Does the console appear?

Are ports (4369, 6000-7999, http, protocol buffers, handoff)?

Regards,
- Rob

On 2012-03-06, at 5:21 PM, Curtis Taylor wrote:

&gt; Alright, I am now SSH'd into a private network. I stopped the node and ran:
&gt; riak-admin reip riak@127.0.0.1 riak@10.0.0.1
&gt; Attempting to restart script through sudo -u riak
&gt; Backed up existing ring file to 
&gt; "/var/lib/riak/ring/riak\\_core\\_ring.default.20120306221347.BAK"
&gt; New ring file written to 
&gt; "/var/lib/riak/ring/riak\\_core\\_ring.default.20120306221830"
&gt; 
&gt; then
&gt; 
&gt; riak start
&gt; riak-admin status
&gt; Node is not running!
&gt; 
&gt; Ideas?
&gt; 
&gt; Thanks again
&gt; 
&gt; 
&gt; 
&gt; On Tue, Mar 6, 2012 at 5:05 PM, Aphyr  wrote:
&gt; First, for security reasons, don't run Riak on a public IP. Access it through 
&gt; an application proxy, a VPN, or an SSH tunnel if you need.
&gt; 
&gt; Second, when you change the name of a node, you need to run
&gt; 
&gt; riak-admin reip r...@my.old.ip r...@my.new.ip
&gt; 
&gt; ... to update the ring file with the new node name. Only change the name and 
&gt; reip when the node is not running. You can also just delete 
&gt; /var/lib/riak/ring if you don't care about the data on the node.
&gt; 
&gt; --Kyle
&gt; 
&gt; 
&gt; On 03/06/2012 02:02 PM, Curtis Taylor wrote:
&gt; All,
&gt; 
&gt; Ubuntu versions 10.10 and 11.10.
&gt; 
&gt; I'm new to Riak, but I have two machines with public IP addresses. I
&gt; installed started to install Riak from source but work blocks ports for
&gt; Git so I installed via Debian package:
&gt; wget http://downloads.basho.com/riak/riak-1.1.0/riak\\_1.1.0-1\\_i386.deb
&gt; 
&gt; After installing on both machines I was able to do:
&gt; riak start
&gt; riak-admin status
&gt; riak stop
&gt; 
&gt; with no issues. I wanted to cluster these two machines machines together
&gt; so I found I need to edit vm.args and app.config. In vm.args I changed
&gt; -name riak@127.0.0.1 
&gt; to
&gt; -name riak@1.2.3.4  (my public IP)
&gt; 
&gt; 
&gt; and in app.config I changed under riak\\_core
&gt; {http, [ {"127.0.0.1", 8098 } ]},
&gt; to
&gt; {http, [ {"0.0.0.0", 8098 } ]},
&gt; 
&gt; and under riak\\_kv
&gt; {pb\\_ip, "127.0.0.1" },
&gt; to
&gt; {pb\\_ip, "0.0.0.0" },
&gt; 
&gt; I think try
&gt; riak start
&gt; Riak failed to start within 15 seconds,
&gt; see the output of 'riak console' for more information.
&gt; If you want to wait longer, set the environment variable
&gt; WAIT\\_FOR\\_ERLANG to the number of seconds to wait.
&gt; 
&gt; I've adjusted WAIT\\_FOR\\_ERLANG, but to no avail. Now, an interesting
&gt; point is that if I stop riak and change everything back to default, riak
&gt; will start successfully but riak-admin tools fail (saying node not
&gt; running). I have no idea where I'm going wrong. I'm not completely sure
&gt; on the riak cookie but it's the same on both machines. I've experience
&gt; the same behavior on 4 machines. Two on a private network, two on public
&gt; network.
&gt; 
&gt; Any help is appreciated.
&gt; Thanks
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; 
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

