---
title: "Re: Python client: three issues"
description: ""
project: community
lastmod: 2011-09-04T17:48:03-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg04570"
mailinglist_parent_id: "msg04569"
author_name: "Duncan McGreggor"
project_section: "mailinglistitem"
sent_date: 2011-09-04T17:48:03-07:00
---


I'm new to Riak, but I want to say a big "thank-you" to Greg for
bringing these discussion points to everyone's attention -- we're
lucky to have him looking at this stuff!

Thanks, Greg :-)

d

On Sun, Sep 4, 2011 at 5:05 PM, Greg Stein  wrote:
&gt; Hi all,
&gt;
&gt; I'm digging into Riak, and its Python client. I've discovered several
&gt; issues and would like to provide feedback and get some input, please.
&gt;
&gt; 1. I'd like Riak to generate keys for some of my objects, and I'm
&gt; using the HTTP API. Pretty simple: do a POST, and the Location: header
&gt; will tell me the key. However, looking at the code... it doesn't
&gt; appear that object.store() actually reads and returns that key. Am I
&gt; missing something here? Maybe there is a Proper Way to do this?
&gt;
&gt; 2. The HTTP transport code doesn't use httplib properly at all. When I
&gt; wrote the httplib library, my primary design point was to enable
&gt; persistent, HTTP/1.1 connections. That was the whole idea behind
&gt; HTTPConnection. The transport library opens a \\*new\\* connection for
&gt; every request. I'm not surprised that the performance suffers, since a
&gt; TCP setup handshake needs to occur on every request. ... So: are there
&gt; any plans to rebuild the HTTP support to use persistent connections?
&gt;
&gt; 3. The Luwak support reads the \\*entire\\* "file" into memory. My
&gt; understanding is that Luwak is for "large" files. If those files are
&gt; (say) a gigabyte, then the current code is going to impact clients in
&gt; a \\*very\\* bad way. I can see that the code wants to read the response,
&gt; then return the connection back to the pool... but that just isn't
&gt; workable. A connection needs to be held by the reader, which then
&gt; streams it to completion (or close), and only then should the
&gt; connection be returned. Now, if Luwak is defined for files less than
&gt; (say) 10 megabytes, then maybe this approach isn't wrong, but I
&gt; haven't seen any documentation about size limitations. Any thoughts on
&gt; this?
&gt;
&gt; Thanks!
&gt; -g
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

