---
title: "Re: How to represent relationships, when there may be 1 <-> thousands"
description: ""
project: community
lastmod: 2012-02-05T09:38:00-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06543"
mailinglist_parent_id: "msg06542"
author_name: "Jeremiah Peschka"
project_section: "mailinglistitem"
sent_date: 2012-02-05T09:38:00-08:00
---


For everyone only familiar with the Cambodian Rural Development Team, here is a 
link to a GitHub CRDT project: https://github.com/ericmoritz/crdt

---
Jeremiah Peschka, MVP
Managing Director, Brent Ozar PLF, LLC

On Feb 5, 2012, at 9:33 AM, Sean Cribbs  wrote:

&gt; Hi Nico,
&gt; 
&gt; Links are great when small in number, but run into issues when more numerous, 
&gt; including HTTP header size limitations, plus the extra storage overhead of 
&gt; bucket+key+tag on disk. I recommend using secondary indexes for this problem, 
&gt; but you will need to be using the LevelDB storage engine.
&gt; 
&gt; Another possibility is to use an OR-set (CRDT) in a secondary key, as you 
&gt; suggest. The difference between an OR-set and a flat list is that the former 
&gt; will converge easily when there are conflicts. 
&gt; 
&gt; Sean Cribbs
&gt; 
&gt; On Feb 5, 2012, at 7:36 AM, Nicolas Petton  wrote:
&gt; 
&gt;&gt; Hi!
&gt;&gt; 
&gt;&gt; We're working on a replacement of the old Smalltalk project hosting
&gt;&gt; website http://squeaksource.com/
&gt;&gt; 
&gt;&gt; For this app we'd like to use Riak, using the Smalltalk client
&gt;&gt; http://www.squeaksource.com/Phriak
&gt;&gt; 
&gt;&gt; You can think of SqueakSource as a Github-like app specific to Smalltalk
&gt;&gt; code. 
&gt;&gt; 
&gt;&gt; Now, my problem is we have a following/followers feature in the new app:
&gt;&gt; users can follow projects.
&gt;&gt; Some projects may have thousands of followers. We need to be able to get
&gt;&gt; followers of a projects \\*and\\* projects followed by an user quickly.
&gt;&gt; 
&gt;&gt; Typically, an user will follow a few projects, so this part is easily
&gt;&gt; solved with links. It becomes more complicated when it comes to getting
&gt;&gt; all users following a specific project, since it can be thousands, using
&gt;&gt; links looks like a bad idea.
&gt;&gt; 
&gt;&gt; I thought of the following solution, but I may be completely off the
&gt;&gt; tracks:
&gt;&gt; 
&gt;&gt; - users have links to projects they follow. 
&gt;&gt; - projects don't have links to the users following them, but a link to
&gt;&gt; 'following/projectKey'. This object represents the relationship itself,
&gt;&gt; and contains the list of the names of users following the project in a
&gt;&gt; JSON array.
&gt;&gt; 
&gt;&gt; This means following a project represents 2 writes, the user with the
&gt;&gt; link, and the 'following object'.
&gt;&gt; 
&gt;&gt; Does that seem reasonable?
&gt;&gt; 
&gt;&gt; Thanks,
&gt;&gt; Nico
&gt;&gt; 
&gt;&gt; 
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; 
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

