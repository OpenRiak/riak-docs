---
title: "Re: Issue with Riak Install from Source under SUSE SLES 11 SP11	Version S390"
description: ""
project: community
lastmod: 2012-04-27T21:17:38-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07341"
mailinglist_parent_id: "msg07335"
author_name: "Jared Morrow"
project_section: "mailinglistitem"
sent_date: 2012-04-27T21:17:38-07:00
---


Claude,

The issue is not in the rebar.config file for eleveldb, but in a file that 
fetches the original C++ source for leveldb. To fix your issue, simply unpack 
the riak source as you already did then:

$ cd deps/eleveldb

And then make the following changes to 'c\\_src/build\\_deps.sh':

--- c\\_src/build\\_deps.sh.orig 2012-04-27 22:06:31.000000000 -0600
+++ c\\_src/build\\_deps.sh 2012-04-27 22:07:49.000000000 -0600
@@ -37,7 +37,7 @@
 export LD\\_LIBRARY\\_PATH="$BASEDIR/system/lib:$LD\\_LIBRARY\\_PATH"
 
 if [ ! -d leveldb ]; then
- git clone git://github.com/basho/leveldb
+ git clone http://github.com/basho/leveldb
 (cd leveldb && git checkout $LEVELDB\\_VSN)
 fi
 
Then return to the top-level source directory for Riak and run 'make' and 
things should be better.

-Jared




On Apr 27, 2012, at 12:31 PM, clau...@br.ibm.com wrote:

&gt; Dear colleagues, 
&gt; 
&gt; Trying to install the RIAK package under a SUSE SLES 11 SP11 Version S390. 
&gt; I've downloaded the .tar.gz install file from the BASHO site. First I've 
&gt; installed the Erlang package with the --with-ssl option and recompiled the 
&gt; openssl package with the "shared" option, as requested by the Erlang 
&gt; procedure. 
&gt; 
&gt; Using the "make rel" command, I see a successful build running on the screen, 
&gt; until a point where the install tries to connect to the GITHUB, throwing an 
&gt; error like this: 
&gt; 
&gt; test -z "/opt/riak/riak-1.1.2/deps/eleveldb/c\\_src/system/share/doc/snappy" || 
&gt; /bin/mkdir -p 
&gt; "/opt/riak/riak-1.1.2/deps/eleveldb/c\\_src/system/share/doc/snappy" 
&gt; /usr/bin/install -c -m 644 ChangeLog COPYING INSTALL NEWS README 
&gt; format\\_description.txt 
&gt; '/opt/riak/riak-1.1.2/deps/eleveldb/c\\_src/system/share/doc/snappy' 
&gt; test -z "/opt/riak/riak-1.1.2/deps/eleveldb/c\\_src/system/include" || 
&gt; /bin/mkdir -p "/opt/riak/riak-1.1.2/deps/eleveldb/c\\_src/system/include" 
&gt; /usr/bin/install -c -m 644 snappy.h snappy-sinksource.h 
&gt; snappy-stubs-public.h snappy-c.h 
&gt; '/opt/riak/riak-1.1.2/deps/eleveldb/c\\_src/system/include' 
&gt; make[2]: Leaving directory 
&gt; `/opt/riak/riak-1.1.2/deps/eleveldb/c\\_src/snappy-1.0.4' 
&gt; make[1]: Leaving directory 
&gt; `/opt/riak/riak-1.1.2/deps/eleveldb/c\\_src/snappy-1.0.4' 
&gt; 
&gt; fatal: unable to connect to github.com: 
&gt; github.com[0: 207.97.227.239]: errno=Connection refused 
&gt; 
&gt; Cloning into 'leveldb'... 
&gt; ERROR: Command [compile] failed! 
&gt; make: \\*\\*\\* [rel] Error 1 
&gt; 
&gt; The riak executable was not yet created under the /bin. 
&gt; 
&gt; 
&gt; Question: 
&gt; -------------- 
&gt; Is there a way to avoid a connect to GITHUB during the package build from 
&gt; source, or could you give me a pointer what is causing the connection to be 
&gt; refused, as our firewall is configured for outgoing HTTP connections (which 
&gt; port and protocol does it use?). 
&gt; 
&gt; Thanks in advance for your feedback and support. 
&gt; 
&gt; Regards, 
&gt; Claude 
&gt; 
&gt; 
&gt; 
&gt; Claude Falbriard 
&gt; Certified IT Specialist L2 - Middleware
&gt; AMS Hortol√¢ndia / SP - Brazil
&gt; phone: +55 19 9837 0789
&gt; cell: +55 13 8117 3316
&gt; e-mail: clau...@br.ibm.com
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

