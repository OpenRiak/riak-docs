---
title: "Re: Connection Pooling with the python-riak-client"
description: ""
project: community
lastmod: 2012-01-20T15:57:55-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06343"
mailinglist_parent_id: "msg06342"
author_name: "Shuhao Wu"
project_section: "mailinglistitem"
sent_date: 2012-01-20T15:57:55-08:00
---


I'm not the people who are building this but I just want to comment on the
subject. Riak-python-client is not being updated very frequently.. So I
think your best shot right now is fork it as you wish and take a look at
some other forks people have made and see what new things/fixes they have
included rather than basing yourself against basho's tree.

Though, that may diverge the code significantly.. but it's the matter of if
you really need that feature right this second or not.

Shuhao


On Fri, Jan 20, 2012 at 3:53 PM, Michael Clemmons
wrote:

&gt; Hey All,
&gt; FIrst time on the list, so go easy. I've been working with the
&gt; python-riak-client for a while and one of the biggest blockers has been its
&gt; lack of connection pooling. Until recently the fork maintained at
&gt; https://github.com/bretthoerner/riak-python-client has been sufficient
&gt; for my needs. I'd been merging it in with the master branch privately up
&gt; until December.
&gt; I've decided to go back and cleanup that approach and reapply it to the
&gt; current master branch. To my surprise I found that the ConnectionManager
&gt; supports multiple connections and has the tools to add and remove them.
&gt; Looking at the simple case of the RiakHttpTransport layer and the
&gt; http\\_request method it looks like it should grab a new connection(or an old
&gt; one) and try it and if it fails move on to the next putting the host port
&gt; pair at the bottom of the list.
&gt; So it looked like all I needed to do was update the client code to accept
&gt; a list of hostport pairs and it would just work, which sounded too easy to
&gt; be true. I tested it anyways and if I use one hostport that is a working
&gt; riak node it connects and everything works. If I include 2 nodes one
&gt; working and one a random port it fails no matter the order. So its not
&gt; just trying to connect to the first and failing its connecting to them all
&gt; and failing if any fail.
&gt; Anyone have any idea of why its built this way and what other solutions
&gt; people have worked out on their own? My intent is to do this so it merges
&gt; cleanly with the current master, and doesn't introduce unnecessary change,
&gt; to increase the likelyhood of a successful pull request.
&gt; -Michael
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

