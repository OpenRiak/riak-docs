---
title: "Re: Retrieve all keys of an index?"
description: ""
project: community
lastmod: 2013-04-10T11:45:37-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg10832"
mailinglist_parent_id: "msg10817"
author_name: "Jeff Peck"
project_section: "mailinglistitem"
sent_date: 2013-04-10T11:45:37-07:00
---


Russell,

Yes, that is what I am asking for. In the range query example that you 
provided, that would produce a set of object keys. It would be excellent if I 
could also get the keys themselves.

Still, I think the best example that describes what I am looking for is in the 
MySQL query that I showed:

 SELECT catalog FROM urls GROUP BY catalog;

After writing the original email, I managed to do exactly that with a 
map-reduce function. However, since then my index has grown to about 900,000 
documents and the map-reduce query now times out (although I have yet to delve 
into the configuration try to adjust so that it will not time out).

Still, tt seems reasonable that if the index exists, then I should be able 
quickly access a list of all index keys without having to examine all of the 
data. Your solution appears that it would alleviate the situation, despite not 
being exactly what I'm looking for.

I look forward to the next release and appreciate the work done on Riak and 
fast responses on this list.

In the meantime, I will see if I can configure riak so my map-reduce query does 
not time out.

(If anybody on this list would like to see the map-reduce query that I am using 
for their own reference, please message me. It's actually quite basic, but if 
you are getting started like I am, it sometimes helps to see an example. I'm 
not going to clutter the email with it unless somebody would like to see it.)

- Jeff

On Apr 10, 2013, at 4:34 AM, Russell Brown  wrote:

&gt; Hi Jeff,
&gt; 
&gt; On 10 Apr 2013, at 02:54, Jeff Peck  wrote:
&gt; 
&gt;&gt; Hello,
&gt;&gt; 
&gt;&gt; In Riak, is it possible to retrieve all of the keys of an index? I do not 
&gt;&gt; want the object keys in this case, but rather the actual index keys.
&gt; 
&gt; I think this is covered by a feature I'm adding, if I understand what you're 
&gt; asking for. Does this example give you the values you want?
&gt; 
&gt; Say in current riak the query you might do would be
&gt; 
&gt; curl localhost:8098/buckets/your\\_bucket/index/catalog\\_bin/1000/2000
&gt; 
&gt; would get you a list of keys. In 1.4 there'll be the option to get the index 
&gt; values as well, so the results would be an array of pairs like {results: 
&gt; ["1001" : "primary\\_key"]} where the first element is the value of catalog\\_bin 
&gt; index and the second the primary key of the object.
&gt; 
&gt; Is that what you're asking for?
&gt; 
&gt; Cheers
&gt; 
&gt; Russell
&gt; 
&gt;&gt; 
&gt;&gt; I am not sure that I am using the correct terminology, but to illustrate, 
&gt;&gt; consider a Riak bucket with the following objects, where "catalog" is 
&gt;&gt; indexed to "catalog\\_bin":
&gt;&gt; 
&gt;&gt; {'url':'http://www.google.com', 'catalog':'1001'}
&gt;&gt; {'url':'http://www.yahoo.com', 'catalog':'1001'}
&gt;&gt; {'url':'http://www.blah.com', 'catalog': 1002'}
&gt;&gt; {'url':'http://www.test123.com', 'catalog': 1002'}
&gt;&gt; {'url':'http://www.test12345.com', 'catalog': 1003'}
&gt;&gt; 
&gt;&gt; I would like to retrieve all of the keys for the index catalog\\_bin. From the 
&gt;&gt; above example, that would be:
&gt;&gt; 1001
&gt;&gt; 1002
&gt;&gt; 1003
&gt;&gt; 
&gt;&gt; To illustrate further, it would be the equivalent of the following in MySQL, 
&gt;&gt; if the above data were to be in a table called "urls":
&gt;&gt; 
&gt;&gt; SELECT catalog FROM urls GROUP BY catalog;
&gt;&gt; 
&gt;&gt; I would appreciate any advice as to how to query for this in Riak, or if 
&gt;&gt; this not feasible, then perhaps a suggestion for the best way to organize 
&gt;&gt; the data.
&gt;&gt; 
&gt;&gt; Thank you,
&gt;&gt; Jeff
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; 


\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

