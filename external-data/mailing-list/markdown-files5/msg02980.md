---
title: "Re: Updating bucket search schema"
description: ""
project: community
lastmod: 2011-04-12T07:07:53-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02980"
mailinglist_parent_id: "msg02900"
author_name: "Rusty Klophaus"
project_section: "mailinglistitem"
sent_date: 2011-04-12T07:07:53-07:00
---


Hi Gordon,

You should be able to run "search-cmd clear-schema-cache" as step 3, instead
of restarting the cluster.

This clears the schema on all connected nodes. (I stress "connected nodes"
here because if a network partition results in an unreachable--but still
running--node, then that node will continue to use the old cached version of
the schema.)

Best,
Rusty

On Wed, Apr 6, 2011 at 3:39 PM, Gordon Tillman  wrote:

&gt; Howdy Gang,
&gt;
&gt; During our various development iterations I have had to alter the schema
&gt; that riaksearch uses for our application's bucket. I have noticed that when
&gt; I do that -- when I assign a new schema to a bucket -- even if I completely
&gt; purge all data and then repopulate the bucket -- the new schema is not used.
&gt; For a new schema to be used I have to perform the following steps:
&gt;
&gt; 1. purge bucket
&gt; 2. install new schema
&gt; 3. stop/start Riak cluster
&gt; 4. repopulate
&gt;
&gt; So question - is there some kind of run-time attribute I can set or
&gt; whatever that will force Riaksearch to use the new schema when indexing data
&gt; that is stored -- without having to restart the cluster?
&gt;
&gt; Many thanks,
&gt;
&gt; --gordon
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

