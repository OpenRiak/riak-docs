---
title: "Re: Question for Riak Developer Advocates"
description: ""
project: community
lastmod: 2011-06-09T19:33:55-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03635"
mailinglist_parent_id: "msg03633"
author_name: "Ryan Zezeski"
project_section: "mailinglistitem"
sent_date: 2011-06-09T19:33:55-07:00
---


Ben,

I hate non-obvious behavior too, and it's something we constantly try to
fight at Basho. That said, I don't think Riak is in as bad a position as
you think. Lets see if I can convince you :)

If I'm understanding you correctly you are making two points here:

1) When performing a join/leave under load most GETs return 404 until data
transfer has completed.

2) A node in the cluster has failed and that is causing data to become
unavailable.

Assuming these are indeed your claims I counter...

1) Yes, performing a join/leave \\*\\*can\\*\\* cause reads to return 404s. Just
ask Greg Nelson and he can tell you all about it. However, I want to
emphasize the \\*\\*can\\*\\* qualifier here. It depends on the # of nodes you are
going from-&gt;to. The reason this matters is b/c this number will affect how
the claim algorithm behaves and how much data actually shifts around.

Now I can hear you saying "Yea, but that's still brittle/broken!" Yes, I
agree 100% with the words I just put in your mouth. My point is simply that
there are shades of grey here and depending on how many nodes you have you
might never hit this case (note that 3-5 nodes \\*\\*will\\*\\* hit this case). We
are actively working on a solution to this problem as we recognize it's
seriousness and very much want to see it fixed.

2) This should absolutely not be happening. This is Riak's bread and butter
use case, i.e. high availability. My guess is I'm misunderstanding what you
are saying.

-Ryan




On Thu, Jun 9, 2011 at 8:00 PM, Ben Tilly  wrote:

&gt; I am not a developer advocate. But my top hate is that when machines
&gt; leave/rejoin your data can be inaccessable for some time.
&gt;
&gt; We had a great case where we wanted to use Riak, but that was a
&gt; complete showstopper and we won't be using it because of that. (We
&gt; wanted to store information which needed to be read in the event of a
&gt; machine failing. But the machine that could fail would be on the same
&gt; cluster that was running Riak, so we'd be potentially trying to do
&gt; reads exactly when data was unavailable.)
&gt;
&gt; On Thu, Jun 9, 2011 at 10:25 AM, Srdjan Pejic  wrote:
&gt; &gt; What do you guys hate about Riak right now?
&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; &gt;
&gt; &gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

