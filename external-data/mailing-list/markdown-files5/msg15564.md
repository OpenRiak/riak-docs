---
title: "Re: Links and Bucket Types"
description: ""
project: community
lastmod: 2015-01-21T13:41:50-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15564"
mailinglist_parent_id: "msg15563"
author_name: "Cosmin Marginean"
project_section: "mailinglistitem"
sent_date: 2015-01-21T13:41:50-08:00
---


PS: Upgraded to 2.0.4, but issue is still reproducing. 

Cos 


On Wednesday, 21 January 2015 at 20:42, Cosmin Marginean wrote:

&gt; Using Riak 2.0.2 on CentOS and trying to create some Links attached to an 
&gt; object using the Links header. 
&gt; We are using bucket types and this behaviour doesn’t seem to replicate when 
&gt; using plain buckets.
&gt; 
&gt; Doing the following works as expected
&gt; 
&gt; curl -H "Content-Type:text/plain" -X POST 
&gt; "http://192.168.168.2:8098/types/mybuckettype/buckets/temp/keys/key1" -d 
&gt; "some text"
&gt; curl -H 'Link: ; riaktag="tag\\"' -H 
&gt; "Content-Type:text/plain" -X POST 
&gt; "http://192.168.168.2:8098/types/mybuckettype/buckets/temp/keys/key2" -d 
&gt; "some other text"
&gt; 
&gt; 
&gt; However when I try to read the key2 entry it returns a 500 internal server 
&gt; error.
&gt; curl -X GET 
&gt; "http://192.168.168.2:8098/types/mybuckettype/buckets/temp/keys/key2”
&gt; 500 Internal Server ErrorInternal 
&gt; Server Error
========================

The server encountered an error while processing this 
&gt; request:  

```
{error, {error,function_clause, 
&gt; [{riak_kv_wm_utils,format_uri, ["temp","key1","riak",3], 
&gt; [{file,"src/riak_kv_wm_utils.erl"},{line,188}]}, 
&gt; {riak_kv_wm_utils,format_links,4, 
&gt; [{file,"src/riak_kv_wm_utils.erl"},{line,180}]}, 
&gt; {riak_kv_wm_object,produce_doc_body,2, 
&gt; [{file,"src/riak_kv_wm_object.erl"},{line,847}]}, 
&gt; {webmachine_resource,resource_call,3, 
&gt; [{file,"src/webmachine_resource.erl"},{line,186}]}, 
&gt; {webmachine_resource,do,3, 
&gt; [{file,"src/webmachine_resource.erl"},{line,142}]}, 
&gt; {webmachine_decision_core,resource_call,1, 
&gt; [{file,"src/webmachine_decision_core.erl"},{line,48}]}, 
&gt; {webmachine_decision_core,decision,1, 
&gt; [{file,"src/webmachine_decision_core.erl"},{line,558}]}, 
&gt; {webmachine_decision_core,handle_request,2, 
&gt; [{file,"src/webmachine_decision_core.erl"},{line,33}]}]}}
```


---

mochiweb+webmachine
&gt; web server


&gt; Also, a HEAD on the key is hanging indefinitely
&gt; curl -X HEAD 
&gt; "http://192.168.168.2:8098/types/mybuckettype/buckets/temp/keys/key2”
&gt; 
&gt; Thanks in advance
&gt; Cos
&gt; 

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

