---
title: "Re: Riak Search Issue"
description: ""
project: community
lastmod: 2014-08-18T07:51:12-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14691"
mailinglist_parent_id: "msg14690"
author_name: "Alex De la rosa"
project_section: "mailinglistitem"
sent_date: 2014-08-18T07:51:12-07:00
---


Hi Luke,

I also tried with a normal bucket "cats" using the type "animals" as the
documentation seemed to suggest and gave me the same error but this time
saying that "cats" was not found as an index... so... still no clue how to
do it.

This is an alternate code I did looking at the Python client API
documentation, etc...

client.create\\_search\\_index('men')
bucket = client.bucket('accounts')
bucket.enable\\_search()
bucket.set\\_property('search\\_index', 'men')
key = bucket.new('alex', data={"username":"Alex","age":25,"sex":"male"},
content\\_type='application/json')
key.store()
print bucket.search('sex=male')

Again, it says "accounts" is not an index... in this code no bucket types
are used, just a plain bucket "accounts"... what is wrong? what is missing
for it to work??

This is really frustrating.

Thanks,
Alex


On Mon, Aug 18, 2014 at 4:44 PM, Luke Bakken  wrote:

&gt; Hi Alex -
&gt;
&gt; You correctly created the "famous" index, as well as correctly
&gt; associated it with the bucket \\*type\\* "animals". Note that a bucket
&gt; type is not the same thing as a bucket in previous versions of Riak. A
&gt; bucket type is a way to give 1 or more buckets within that type the
&gt; same properties. You'll have to use different code in your Riak client
&gt; to use bucket types:
&gt;
&gt; http://docs.basho.com/riak/2.0.0/dev/advanced/bucket-types/
&gt;
&gt; --
&gt; Luke Bakken
&gt; CSE
&gt; lbak...@basho.com
&gt;
&gt;
&gt; On Mon, Aug 18, 2014 at 7:32 AM, Alex De la rosa
&gt;  wrote:
&gt; &gt; If I do this, I got the right index:
&gt; &gt;
&gt; &gt; http://RIAK:8098/search/index/famous
&gt; &gt; =&gt; {"name":"famous","n\\_val":3,"schema":"\\_yz\\_default"}
&gt; &gt;
&gt; &gt; If I do this, I get an error:
&gt; &gt; http://RIAK:8098/search/index/animals
&gt; &gt; =&gt; not found
&gt; &gt;
&gt; &gt; What I don't understand is why it believes the index is the bucket name
&gt; and
&gt; &gt; not the index I created for it?
&gt; &gt;
&gt; &gt; riak-admin bucket-type create animals
&gt; '{"props":{"search\\_index":"famous"}}'
&gt; &gt; riak-admin bucket-type activate animals
&gt; &gt;
&gt; &gt; Shouldn't it be looking for a "famous" index instead of an "animals"
&gt; index??
&gt; &gt;
&gt; &gt; Thanks!
&gt; &gt; Alex
&gt; &gt;
&gt; &gt;
&gt; &gt; On Mon, Aug 18, 2014 at 4:26 PM, Luke Bakken  wrote:
&gt; &gt;&gt;
&gt; &gt;&gt; What is the output of this command? Please replace RIAK\\_HOST and
&gt; &gt;&gt; "name\\_of\\_the\\_bucket" with the correct information:
&gt; &gt;&gt;
&gt; &gt;&gt; curl "$RIAK\\_HOST/search/index/name\\_of\\_the\\_bucket"
&gt; &gt;&gt;
&gt; &gt;&gt; If the above returns a 404, please use this guide to ensure you've
&gt; &gt;&gt; created the index correctly:
&gt; &gt;&gt;
&gt; &gt;&gt; http://docs.basho.com/riak/2.0.0/dev/using/search/
&gt; &gt;&gt;
&gt; &gt;&gt; If you expect the index to be there and it is not, the solr.log file
&gt; &gt;&gt; in /var/log/riak could provide a clue.
&gt; &gt;&gt;
&gt; &gt;&gt; --
&gt; &gt;&gt; Luke Bakken
&gt; &gt;&gt; CSE
&gt; &gt;&gt; lbak...@basho.com
&gt; &gt;&gt;
&gt; &gt;&gt;
&gt; &gt;&gt; On Mon, Aug 18, 2014 at 6:59 AM, Alex De la rosa
&gt; &gt;&gt;  wrote:
&gt; &gt;&gt; &gt; Hi there,
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt; I had been following the documentation [
&gt; &gt;&gt; &gt; http://docs.basho.com/riak/2.0.0/dev/using/search/ ] about Riak
&gt; Search
&gt; &gt;&gt; &gt; and
&gt; &gt;&gt; &gt; the code provided in the site doesn't seem to work?
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt; Everything I try ends up with an error saying no index found taking
&gt; the
&gt; &gt;&gt; &gt; name
&gt; &gt;&gt; &gt; of the bucket as a not found index :(
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt; riak.RiakError: 'No index &lt;&lt;"name\\_of\\_the\\_bucket"&gt;&gt; found.'
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt; Somebody knows what's going on?
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt; Thanks!
&gt; &gt;&gt; &gt; Alex
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

