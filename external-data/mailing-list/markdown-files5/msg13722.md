---
title: "Re: Riak can not start with SSL enable."
description: ""
project: community
lastmod: 2014-02-27T04:34:33-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13722"
mailinglist_parent_id: "msg13721"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2014-02-27T04:34:33-08:00
---


Hi Allen,

The problem there is deep in the backtrace: \\*{error,eacces} \\*indicates your
'internal.pem' file is not readable by the 'riak' user. One of these
commands might help:

sudo chown -R riak:riak /etc/riak/certs
sudo chmod -R 644 /etc/riak/certs/\\*

Let us know if that works for you.


On Thu, Feb 27, 2014 at 3:46 AM, Allen Chen wrote:

&gt;
&gt; Hi All,
&gt;
&gt; I met similar issue with this thread, I knew it is old.
&gt;
&gt; http://lists.basho.com/pipermail/riak-users\\_lists.basho.com/2012-October/009824.html
&gt;
&gt; But it seems happened on my new Debian 7.3(X86\\_64) test box with
&gt; riak 1.4.8-1(official build).
&gt;
&gt; Without those lines,
&gt;
&gt; -proto\\_dist inet\\_tls
&gt; -ssl\\_dist\\_opt client\\_certfile "{{platform\\_etc\\_dir}}/erlclient.pem"
&gt; -ssl\\_dist\\_opt server\\_certfile "{{platform\\_etc\\_dir}}/erlserver.pem"
&gt;
&gt; in my vm.args, everything looks ok.
&gt; With such configuration, I got riak started failed but riak process
&gt; running with errors as following(in the end of this mail).
&gt;
&gt; My certificate internal.pem is working on old box, debian 6.x with
&gt; Riak-1.3.1.
&gt; Any idea?
&gt;
&gt; Thanks.
&gt; Allen Chen
&gt;
&gt;
&gt;
&gt;
&gt; The error with SSL,
&gt; &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt; \\*2014-02-27 06:15:07.552 [error] &lt;0.162.0&gt; SSL: 1111:
&gt; error:{try\\_clause,{error,eacces}} /etc/riak/certs/internal.pem\\*
&gt; \\* [{ssl\\_manager,cache\\_pem\\_file,2,[{file,"ssl\\_manager.erl"},{line,98}]},\\*
&gt; \\* {ssl\\_certificate,file\\_to\\_certificats,2,\\*
&gt; \\* [{file,"ssl\\_certificate.erl"},{line,111}]},\\*
&gt; \\* {ssl\\_connection,init\\_certificates,6,\\*
&gt; \\*
&gt; [{file,"ssl\\_connection.erl"},{line,1107}]},\\*
&gt; \\*
&gt; {ssl\\_connection,ssl\\_init,2,[{file,"ssl\\_connection.erl"},{line,1062}]},\\*
&gt; \\*
&gt; {ssl\\_connection,init,1,[{file,"ssl\\_connection.erl"},{line,316}]},\\*
&gt; \\*
&gt; {gen\\_fsm,init\\_it,6,[{file,"gen\\_fsm.erl"},{line,361}]},\\*
&gt; \\*
&gt; {proc\\_lib,init\\_p\\_do\\_apply,3,[{file,"proc\\_lib.erl"},{line,227}]}]\\*
&gt;
&gt; \\* 2014-02-27
&gt; 06:15:07.553 [error] &lt;0.162.0&gt; CRASH REPORT Process &lt;0.162.0&gt; with 0
&gt; neighbours exited with reason: ecertfile in gen\\_fsm:init\\_it/6 line 371\\*
&gt; \\* 2014-02-27
&gt; 06:15:07.553 [error] &lt;0.20.0&gt; Supervisor ssl\\_connection\\_sup\\_dist had child
&gt; undefined started with {ssl\\_connection,start\\_link,undefined} at &lt;0.162.0&gt;
&gt; exit with reason ecertfile in context child\\_terminated\\*
&gt; \\* 2014-02-27
&gt; 06:15:07.559 [error] &lt;0.167.0&gt; SSL: 1111: error:{try\\_clause,{error,eacces}}
&gt; /etc/riak/certs/internal.pem\\*
&gt; \\*
&gt; [{ssl\\_manager,cache\\_pem\\_file,2,[{file,"ssl\\_manager.erl"},{line,98}]},\\*
&gt; \\*
&gt; {ssl\\_certificate,file\\_to\\_certificats,2,\\*
&gt; \\*
&gt; [{file,"ssl\\_certificate.erl"},{line,111}]},\\*
&gt; \\*
&gt; {ssl\\_connection,init\\_certificates,6,\\*
&gt; \\*
&gt; [{file,"ssl\\_connection.erl"},{line,1107}]},\\*
&gt; \\*
&gt; {ssl\\_connection,ssl\\_init,2,[{file,"ssl\\_connection.erl"},{line,1062}]},\\*
&gt; \\*
&gt; {ssl\\_connection,init,1,[{file,"ssl\\_connection.erl"},{line,316}]},\\*
&gt; \\*
&gt; {gen\\_fsm,init\\_it,6,[{file,"gen\\_fsm.erl"},{line,361}]},\\*
&gt; \\*
&gt; {proc\\_lib,init\\_p\\_do\\_apply,3,[{file,"proc\\_lib.erl"},{line,227}]}]\\*
&gt;
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;


-- 
Sean Cribbs 
Software Engineer
Basho Technologies, Inc.
http://basho.com/
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

