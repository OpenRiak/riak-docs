---
title: "Re: Riak on SAN"
description: ""
project: community
lastmod: 2013-10-02T14:08:02-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12468"
mailinglist_parent_id: "msg12466"
author_name: "Pedram Nimreezi"
project_section: "mailinglistitem"
sent_date: 2013-10-02T14:08:02-07:00
---


Agreed backups for riak are a major problem...


On Wed, Oct 2, 2013 at 4:12 PM, Alexander Sicular wrote:

&gt; Cluster "redundancy" is no safeguard against the unknown. The only true
&gt; reliable protection is a complete offline backup in a separate facility not
&gt; run by the same provider as your primary facility. I'm not saying everyone
&gt; is running at that level of paranoia, but it is something to consider
&gt; against the value of your data.
&gt;
&gt; What if you get rooted and someone runs something like for node in nodes
&gt; rm -rf myriakdata ?
&gt;
&gt; -Alexander Sicular
&gt;
&gt; @siculars
&gt;
&gt; On Oct 2, 2013, at 4:03 PM, "Victor"  wrote:
&gt;
&gt; Excuse me, if I misunderstood something, but why you would even want to
&gt; have backup of a single node, if you are running 5 node cluster? Assuming
&gt; your W key value for put requests is higher then number of vnodes on each
&gt; physical node, scenario when you loose data because of single node failure
&gt; does not seems to be possible. And restoring failed node should not require
&gt; data backup, as backend hinted handoff should make all work for you and get
&gt; failed system back to state prior failure. \\*\\*\\*\\*
&gt; Sure, backup of initial state would be helpful, as it would help to save
&gt; plenty of time on node re-setup, but redundancy on cluster-level seems
&gt; reliable enough.\\*\\*\\*\\*
&gt;
&gt; \\*From:\\* riak-users [mailto:riak-users-boun...@lists.basho.com] \\*On Behalf
&gt; Of \\*John E. Vincent
&gt; \\*Sent:\\* Wednesday, October 02, 2013 3:12 PM
&gt; \\*To:\\* riak-users
&gt; \\*Subject:\\* Re: Riak on SAN\\*\\*\\*\\*
&gt; \\*\\* \\*\\*
&gt; I'm going to take a competing view here.\\*\\*\\*\\*
&gt; \\*\\* \\*\\*
&gt; SAN is a bit overloaded of a term at this point. Nothing precludes a SAN
&gt; from being performant or having SSDs. Yes the cost is overkill for fiber
&gt; but iSCSI is much more realistic. Alternately you can even do ATAoE.\\*\\*\\*\\*
&gt; \\*\\* \\*\\*
&gt; From a hardware perspective, if I have 5 pizza boxes as riak nodes, I can
&gt; only fit so many disks in them. Meanwhile I can add another shelf to my SAN
&gt; and expand as needed. Additionally backup of a SAN is MUCH easier than
&gt; backup of a riak node itself. It's a snapshot and you're done. Mind you
&gt; nothing precludes you from doing LVM snapshots in the OS but you still need
&gt; to get the data OFF that system for it to be truly backed up.\\*\\*\\*\\*
&gt; \\*\\* \\*\\*
&gt; I love riak and other distributed stores but backing them up is NOT a
&gt; solved problem. Walking all keys, coordinating the take down of all your
&gt; nodes in a given order or whatever your strategy is a serious pain point.
&gt; \\*\\*\\*\\*
&gt; \\*\\* \\*\\*
&gt; Using a SAN or local disk also doesn't excuse you from watching I/O
&gt; performance. With a SAN I get multiple redundant paths to a block device
&gt; and I don't get that necessarily with local storage. \\*\\*\\*\\*
&gt; \\*\\* \\*\\*
&gt; Just my two bits.\\*\\*\\*\\*
&gt; \\*\\* \\*\\*
&gt;
&gt; \\*\\* \\*\\*
&gt; On Wed, Oct 2, 2013 at 2:18 AM, Jeremiah Peschka &lt;
&gt; jeremiah.pesc...@gmail.com&gt; wrote:\\*\\*\\*\\*
&gt;
&gt; Could you do it? Sure.\\*\\*\\*\\*
&gt;
&gt; Should you do it? No.\\*\\*\\*\\*
&gt;
&gt; An advantage of Riak is that you can avoid the cost of SAN storage by
&gt; getting duplication at the machine level rather than rely on your storage
&gt; vendor to provide it.\\*\\*\\*\\*
&gt;
&gt; Running Riak on a SAN also exposes you to the SAN becoming your
&gt; bottleneck; you only have so many fiber/iSCSI ports and a fixed number of
&gt; disks. The risk of storage contention is high, too, so you can run into
&gt; latency issues that are difficult to diagnose without looking into both
&gt; Riak as well as the storage system.\\*\\*\\*\\*
&gt;
&gt; Keeping cost in mind, too, SAN storage is about 10x the cost of consumer
&gt; grade SSDs. Not to mention feature licensing and support... The cost
&gt; comparison isn't favorable.\\*\\*\\*\\*
&gt;
&gt; Please note: Even though your vendor calls it a SAN, that doesn't mean
&gt; it's a SAN.\\*\\*\\*\\*
&gt; On Oct 1, 2013 11:08 PM, "Guy Morton"  wrote:\\*\\*\\*\\*
&gt; Does this make sense?
&gt;
&gt; --
&gt; Guy Morton
&gt; Web Development Manager
&gt; Brüel & Kjær EMS
&gt;
&gt; This e-mail is confidential and may be read, copied and used only by the
&gt; intended recipient. If you have received it in error, please contact the
&gt; sender immediately by return e-mail. Please then delete the e-mail and do
&gt; not disclose its contents to any other person.
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com\\*\\*\\*\\*
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com\\*\\*\\*\\*
&gt; \\*\\* \\*\\*
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;


-- 
/\\* Sincerely
--------------------------------------------------------------
Pedram Nimreezi - Chief Technology Officer \\*/

// The hardest part of design … is keeping features out. - Donald Norman
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

