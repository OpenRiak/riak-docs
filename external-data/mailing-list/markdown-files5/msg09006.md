---
title: "Re: riakc doesn't save metadata properly?"
description: ""
project: community
lastmod: 2012-10-22T14:22:41-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg09006"
mailinglist_parent_id: "msg09005"
author_name: "Metin Akat"
project_section: "mailinglistitem"
sent_date: 2012-10-22T14:22:41-07:00
---


Oh, I see, thanks for this clarification, much appreciated.
I think this should be written somewhere in bold, as 3 days later, I still
wasn't able to find anything on google.

On Tue, Oct 23, 2012 at 12:08 AM, David Parfitt  wrote:

&gt; Hello Metin -
&gt;
&gt; Sorry for the delay. At the moment, all metadata needs to be stored
&gt; under the &lt;&lt;"X-Riak-Meta"&gt;&gt; dict key. The following example
&gt; illustrates how this works:
&gt;
&gt; %% To store metadata:
&gt; Object = riakc\\_obj:new(&lt;&lt;"groceries"&gt;&gt;, &lt;&lt;"mine"&gt;&gt;, &lt;&lt;"eggs & bacon"&gt;&gt;).
&gt; MetaData = dict:from\\_list([{&lt;&lt;"X-Riak-Meta"&gt;&gt;, [{"Foo", "Bar"}]}]),
&gt; Object2 = riakc\\_obj:update\\_metadata(Object, MetaData).
&gt; riakc\\_pb\\_socket:put(Pid, Object2).
&gt;
&gt; %% To retrieve metadata:
&gt; {ok, O} = riakc\\_pb\\_socket:get(Pid, &lt;&lt;"groceries"&gt;&gt;, &lt;&lt;"mine"&gt;&gt;).
&gt; {ok, MD} = dict:find(&lt;&lt;"X-Riak-Meta"&gt;&gt;, riakc\\_obj:get\\_metadata(O)).
&gt;
&gt; We're kicking around ways to improve this in the future.
&gt;
&gt; Cheers -
&gt; Dave
&gt;
&gt; On Fri, Oct 19, 2012 at 8:31 AM, Metin Akat  wrote:
&gt; &gt; I am trying to do something like:
&gt; &gt;
&gt; &gt; Meta1 = dict:store(&lt;&lt;"ver"&gt;&gt;, Ver, Meta0),
&gt; &gt; Obj1 = riakc\\_obj:update\\_metadata(Obj, Meta1),
&gt; &gt;
&gt; &gt; and then save the object. But on a subsequent read, the metadata k/v
&gt; pair is
&gt; &gt; not there.
&gt; &gt;
&gt; &gt; Is there anything special that needs to be done for this to work, or is
&gt; this
&gt; &gt; illegal way to use Riak?
&gt; &gt;
&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; &gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

