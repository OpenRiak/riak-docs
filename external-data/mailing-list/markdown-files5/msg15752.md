---
title: "Re: Riak 1.3.1 high swap usage"
description: ""
project: community
lastmod: 2015-02-19T09:40:47-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15752"
mailinglist_parent_id: "msg15751"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2015-02-19T09:40:47-08:00
---


Daniel,

Our tuning guides specifically recommend disabling swap. If your machine is
so memory-starved that it needs to use swap during normal Riak operation,
having it on is only going to make things worse.

http://docs.basho.com/riak/latest/ops/tuning/linux/#Storage-and-File-System-Tuning

On Thu, Feb 19, 2015 at 11:29 AM, Daniel Iwan  wrote:

&gt; We are using levelDB as backend without any tuning.
&gt; Also we are aware that performance may suffer due to potentially storing
&gt; some of the copies (n=3) twice on the server. We are not so much concerned
&gt; about latencies caused by that.
&gt; What is worrying though is almost unbounded growth of swap used, which
&gt; essentially filled up our system disk.
&gt; Probably our Riak instances require some tuning but I would like to know
&gt; first why we need to tune it e.g. AAE consumes large swap.
&gt;
&gt; Regarding failure scenarios. We've seen OS' oom-killer nuking beam.smp and
&gt; also our process due to the failure of memory allocation. So far we haven't
&gt; experienced situation where killing one node would cause cascading failures
&gt; of the nodes.
&gt;
&gt; We were slightly reluctant to upgrade to 1.4 due to some AAE issues
&gt; reported
&gt; on the mailing list.
&gt; I was under impression 1.4 may consume even more memory with AAE but I may
&gt; be totally wrong here.
&gt;
&gt; Daniel
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt; --
&gt; View this message in context:
&gt; http://riak-users.197444.n3.nabble.com/Riak-1-3-1-high-swap-usage-tp4032649p4032662.html
&gt; Sent from the Riak Users mailing list archive at Nabble.com.
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;



-- 
Sean Cribbs 
Sr. Software Engineer
Basho Technologies, Inc.
http://basho.com/
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

