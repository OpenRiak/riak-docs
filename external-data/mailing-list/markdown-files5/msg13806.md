---
title: "Question about link-walk results returned by erlang_pb_client"
description: ""
project: community
lastmod: 2014-03-14T03:51:13-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13806"
author_name: "fxmy wang"
project_section: "mailinglistitem"
sent_date: 2014-03-14T03:51:13-07:00
---


Hi, list,

This should be a trivial question and I think I'm definitely missing
something( and feeling stupid :\\).

So when I am doing a chained link-walking through HTTP interface like
this(copied
from link walking
docs
):

&gt; curl -v localhost:8091/riak/people/davethomas/\\_,friend,1/\\_,friend,\\_/


The output is quite verbose, including Bucket/Key/Value etc.etc.

&gt; --JCgqdOHsL4BdXPCb0cuQDnLTxOH
&gt;
Content-Type: multipart/mixed; boundary=LpfqXc9urbAJJNFH7aGGPBiAtnX
&gt;

&gt; --LpfqXc9urbAJJNFH7aGGPBiAtnX
&gt;
X-Riak-Vclock: a85hYGBgzGDKBVIcc+04TgWFOj/NYEpkzGNlyNCadoYvCwA=
&gt;
Location: /riak/people/timoreilly
&gt;
Content-Type: text/plain
&gt;
Link: ; riaktag="friend", ; rel="up"
&gt;
Etag: 3DmGNeyDj2hUlLR2UhJvMr
&gt;
Last-Modified: Thu, 13 Mar 2014 13:11:04 GMT
&gt;

&gt; I am an excellent public speaker.
&gt;
--LpfqXc9urbAJJNFH7aGGPBiAtnX--
&gt;

&gt; --JCgqdOHsL4BdXPCb0cuQDnLTxOH
&gt;
Content-Type: multipart/mixed; boundary=IcBLyeIFObvJlJGyXuhTty5cRSs
&gt;

&gt; --IcBLyeIFObvJlJGyXuhTty5cRSs
&gt;
X-Riak-Vclock: a85hYGBgzGDKBVIcR4M2cgeFOkdkMCUy5rEyzNSadoYvCwA=
&gt;
Location: /riak/people/dhh
&gt;
Content-Type: text/plain
&gt;
Link: ; rel="up"
&gt;
Etag: 4qbA2ZufXNgzFRb8PlSLUO
&gt;
Last-Modified: Thu, 13 Mar 2014 13:11:53 GMT
&gt;

&gt; I drive a Zonda.
&gt;
--IcBLyeIFObvJlJGyXuhTty5cRSs--
&gt;

&gt; --JCgqdOHsL4BdXPCb0cuQDnLTxOH--
&gt;


But when I retried it through the erlang\\_pb\\_client

&gt; riakc\\_pb\\_socket:mapred(Pid,[{&lt;&lt;"people"&gt;&gt;, &lt;&lt;"davethomas"&gt;&gt;}],[{link,
&gt; &lt;&lt;"people"&gt;&gt;, &lt;&lt;"friend"&gt;&gt;, true},{link, &lt;&lt;"people"&gt;&gt;, &lt;&lt;"friend"&gt;&gt;,
&gt; true}]).


The return value is just Bucket/Key/link-tag pairs, without ObjectValue or
other metadata.

&gt; {ok,[{0,[[&lt;&lt;"people"&gt;&gt;,&lt;&lt;"timoreilly"&gt;&gt;,&lt;&lt;"friend"&gt;&gt;]]},

{1,[[&lt;&lt;"people"&gt;&gt;,&lt;&lt;"dhh"&gt;&gt;,&lt;&lt;"friend"&gt;&gt;]]}]}
&gt;

Is this intended or not?
If so, what's the best way to get these ObjectValues through one single
pass of link-walking?


Cheers,
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

