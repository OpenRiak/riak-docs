---
title: "Re: Differences between riak_client and riak_kv_mrc_pipe MapReduce	when one node is down."
description: ""
project: community
lastmod: 2013-01-31T14:00:14-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg09952"
mailinglist_parent_id: "msg09950"
author_name: "Bryan Fink"
project_section: "mailinglistitem"
sent_date: 2013-01-31T14:00:14-08:00
---


On Thu, Jan 31, 2013 at 1:46 PM,  wrote:
&gt; I'm try fix this bug.
&gt; 1. Add fucntion for generating ConsHashCookie in riak\\_kv\\_mrc\\_pipe
&gt; ...
&gt; It's taking account of which nodes are up.
&gt; 2. Remove Hash = chash:key\\_of(ConstHashCookie) in reduce2pipe function.
&gt;
&gt; After that all work fine.

Excellent! That was exactly the hunch I was hinting at. I wasn't using
the prereduce phase, and that is why I couldn't reproduce exactly what
you were seeing.

I like your solution. Please do submit a pull request for it. Thank
you for digging!

-Bryan

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

