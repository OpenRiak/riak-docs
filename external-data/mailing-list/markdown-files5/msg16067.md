---
title: "Re: scaling up vertically upgrading HD"
description: ""
project: community
lastmod: 2015-04-23T08:04:19-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16067"
mailinglist_parent_id: "msg16066"
author_name: "Alex De la rosa"
project_section: "mailinglistitem"
sent_date: 2015-04-23T08:04:19-07:00
---


Awesome! Thank you very much :)

On Thursday, April 23, 2015, Alexander Sicular  wrote:

&gt; Hi Alex!
&gt;
&gt; Yes, each node would use an even amount of space regardless of maximum
&gt; disk space available.
&gt;
&gt; The "evenness" has to do with Riak's uniform data distribution due to the
&gt; sha1 consistent hashing algorithm. The output of sha1 is a number in the
&gt; range of 0 to 2^160. That range is partitioned into segments called
&gt; "vnodes" in Riak parlance (see ring\\_size configuration option). Vnodes, or
&gt; virtual nodes, in turn are equally allocated to physical machines in the
&gt; cluster. Thus, each node in a Riak cluster can be thought of as being
&gt; responsible for 1/n of data stored and 1/n performance where n is the
&gt; number of machines in the cluster.
&gt;
&gt; I think I use some more and or better words to describe it here
&gt; https://basho.com/why-riak-just-works/
&gt;
&gt; -Alexander
&gt;
&gt; @siculars
&gt; http://siculars.posthaven.com
&gt;
&gt; Sent from my iRotaryPhone
&gt;
&gt; On Apr 23, 2015, at 10:42, Alex De la rosa  &gt; wrote:
&gt;
&gt; Cool, thank you :) however, is true that if 4 nodes are 1TB and the other
&gt; one is 2TB; the 5 nodes will act as having 1TB each, right? (I guess that's
&gt; what you mean with "Riak allocates data to nodes evenly")
&gt;
&gt; Thanks,
&gt; Alex
&gt;
&gt; On Thu, Apr 23, 2015 at 4:40 PM, Jon Meredith  &gt; wrote:
&gt;
&gt;&gt; Hi Alex,
&gt;&gt;
&gt;&gt; Riak allocates data to nodes evenly - it doesn't take into account free
&gt;&gt; space. You should just be able to upgrade all nodes to 1Tb and Riak will
&gt;&gt; use the space, without needing to take any additional actions.
&gt;&gt;
&gt;&gt; Jon
&gt;&gt;
&gt;&gt; On Thu, Apr 23, 2015 at 7:17 AM, Alex De la rosa &gt; &gt; wrote:
&gt;&gt;
&gt;&gt;&gt; Hi there,
&gt;&gt;&gt;
&gt;&gt;&gt; I have the following question about scaling up vertically upgrading HDs
&gt;&gt;&gt; to get more space. I have the understanding that if HDs are of different
&gt;&gt;&gt; sizes on ring creation, they get the smallest size of them all and make all
&gt;&gt;&gt; nodes even, for example:
&gt;&gt;&gt;
&gt;&gt;&gt; Node 1: 500GB
&gt;&gt;&gt; Node 2: 500GB
&gt;&gt;&gt; Node 3: 750GB
&gt;&gt;&gt; Node 4: 500GB
&gt;&gt;&gt; Node 5: 750GB
&gt;&gt;&gt;
&gt;&gt;&gt; In this case riak would make a parity of 500GB per node... so... how
&gt;&gt;&gt; could we scale up the HDs? Imagine I want to turn them into the following:
&gt;&gt;&gt;
&gt;&gt;&gt; Node 1: 1TB
&gt;&gt;&gt; Node 2: 1TB
&gt;&gt;&gt; Node 3: 1TB
&gt;&gt;&gt; Node 4: 1TB
&gt;&gt;&gt; Node 5: 1TB
&gt;&gt;&gt;
&gt;&gt;&gt; How can you rebalance the cluster in the way their partitions grow to
&gt;&gt;&gt; fit this new setup? (using Riak 2.1)
&gt;&gt;&gt;
&gt;&gt;&gt; Thanks,
&gt;&gt;&gt; Alex
&gt;&gt;&gt;
&gt;&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt; 
&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; --
&gt;&gt; Jon Meredith
&gt;&gt; Chief Architect
&gt;&gt; Basho Technologies, Inc.
&gt;&gt; jmered...@basho.com 
&gt;&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; 
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

