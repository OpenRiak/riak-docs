---
title: "Re: Unexpected stored value for multivalued field in riak search"
description: ""
project: community
lastmod: 2015-07-07T11:46:46-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16278"
mailinglist_parent_id: "msg16277"
author_name: "Zeeshan Lakhani"
project_section: "mailinglistitem"
sent_date: 2015-07-07T11:46:46-07:00
---


Hi Wendy, 

I realized that I first read this as crdt sets and not multivalued fields, 
haha. 

Nonetheless, via http again (\\*groups\\_s\\*), I’ve confirmed that it’s on the 
client:

```
 "response" : {
 "maxScore" : 0.30685282,
 "numFound" : 1,
 "docs" : [
 {
 "\\_yz\\_rt" : "multifunarray",
 "\\_yz\\_fpn" : "49",
 "groups\\_s" : [
 "3304cf79"
 ],
 "\\_yz\\_rk" : "multivalued\\_array",
 "\\_yz\\_id" : "1\\*multifunarray\\*b2\\*multivalued\\_array\\*49",
 "\\_yz\\_ed" : "2 49 bXVsdGlmdW5hcnJheQ== YjI= bXVsdGl2YWx1ZWRfYXJyYXk= 
g2IBnehH",
 "\\_yz\\_rb" : "b2",
 "\\_yz\\_pn" : "49"
 }
 ],
 "start" : 0
```

I’ll update the client ticket with this example, accordingly :). Thanks.

Zeeshan Lakhani
programmer | 
software engineer at @basho | 
org. member/founder of @papers\\_we\\_love | paperswelove.org
twitter =&gt; @zeeshanlakhani

&gt; On Jul 7, 2015, at 1:56 PM, Zeeshan Lakhani  wrote:
&gt; 
&gt; Hello Wendy,
&gt; 
&gt; This may be an issue with the Python client. Can you open this up as a bug at 
&gt; https://github.com/basho/riak-python-client 
&gt; , and our client team can take a 
&gt; look? I was not able to reproduce via http in an example (i.e. 
&gt; \\*interests\\_set\\*) I tried:
&gt; 
&gt; ```
&gt; "docs" : [
&gt; {
&gt; "\\_yz\\_rt" : "maps",
&gt; "name\\_register" : “3 Names",
&gt; "interests\\_set" : [
&gt; "thing"
&gt; ],
&gt; "\\_yz\\_id" : "1\\*maps\\*testbucket\\*3 Names\\*2",
&gt; "\\_yz\\_rk" : “3 Names",
&gt; "\\_yz\\_rb" : "testbucket"
&gt; }
&gt; ],...
&gt; ```
&gt; 
&gt; Zeeshan Lakhani
&gt; programmer | 
&gt; software engineer at @basho | 
&gt; org. member/founder of @papers\\_we\\_love | paperswelove.org 
&gt; 
&gt; twitter =&gt; @zeeshanlakhani
&gt; 
&gt;&gt; On Jul 1, 2015, at 11:47 AM, Wendy Liu &gt; &gt; wrote:
&gt;&gt; 
&gt;&gt; Hi all,
&gt;&gt; 
&gt;&gt; I'm having an issue with stored multiValued fields in Riak search not being 
&gt;&gt; stored the way I would expect.
&gt;&gt; 
&gt;&gt; If I use the default schema, and store the following JSON document (from the 
&gt;&gt; documentation 
&gt;&gt; )
&gt;&gt; 
&gt;&gt; {"people\\_ss": ["Ryan", "Eric", "Brett"]}
&gt;&gt; 
&gt;&gt; and then search with the query "people\\_ss:Ryan", the document that I get 
&gt;&gt; back contains "people\\_ss": ["Ryan", "Eric", "Brett"], as I would expect.
&gt;&gt; 
&gt;&gt; However, if I instead create the document
&gt;&gt; 
&gt;&gt; {"people\\_ss": ["Ryan"]}
&gt;&gt; 
&gt;&gt; then searching with the query "people\\_ss:Ryan" results in a document with 
&gt;&gt; "people\\_ss": "Ryan", where the value associated with "people\\_ss" is a 
&gt;&gt; string, not a list of strings as I would expect.
&gt;&gt; 
&gt;&gt; I couldn't find anything about this in any of the Github issue trackers or 
&gt;&gt; the mailing list. Is this a bug, or desired behaviour? Is there a way to 
&gt;&gt; ensure that lists with a single element are stored in Solr as lists, instead 
&gt;&gt; of as strings?
&gt;&gt; 
&gt;&gt; I'm using the official Riak Python client with Riak 2.1.1 and search enabled.
&gt;&gt; 
&gt;&gt; Thanks in advance!
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com 
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; 

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

