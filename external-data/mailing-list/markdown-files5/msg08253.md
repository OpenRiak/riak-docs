---
title: "Re: MapReduce paging result"
description: ""
project: community
lastmod: 2012-08-09T17:27:58-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08253"
mailinglist_parent_id: "msg08246"
author_name: "郎咸武"
project_section: "mailinglistitem"
sent_date: 2012-08-09T17:27:58-07:00
---


Who can answer me? thanks.

2012/8/10 郎咸武 

&gt; Hi guys,
&gt; How to do a paging in MapReduce queries?
&gt; I try to write some method in the module(trend\\_riak.erl, Add -pa
&gt; /home/jason/work/server/trunk/trend\\_riak to vm.args).
&gt; I thought it will well, but unfortunately it does not work. Becase the
&gt; "Reduce" ,the result is wrong.
&gt; Is there the other methods? Thanks.
&gt;
&gt; Cheers Jason
&gt;
&gt; 121 get\\_reduce\\_bucket\\_values(Records, {Start, Max}) -&gt;
&gt; 122 Skip = get\\_skip\\_num(Start, Max),
&gt; 123 io:format("get\\_reduce\\_bucket\\_values Records=~p Skip= ~p~n",
&gt; [length(Records), Skip]),
&gt;
&gt; 124 if length(Records) &gt;= Skip -&gt;
&gt; 125 %%NewList = lists:keysort(#pubsub\\_item.published, Records),
&gt; 126 F = fun(#pubsub\\_item{published=Published1, level=Level1},
&gt; 127 #pubsub\\_item{published=Published2, level=Level2})
&gt; -&gt;
&gt; 128 if Level1 &gt; Level2 -&gt; true;
&gt; 129 Level1 == Level2 -&gt;
&gt; 130 if Published1 &gt; Published2 -&gt; true;
&gt; 131 true -&gt; false
&gt; 132 end;
&gt; 133 true -&gt; false
&gt; 134 end
&gt; 135 end,
&gt; 136 NewList = lists:sort(F, Records),
&gt; 137 R = lists:sublist(NewList, Skip, Max),
&gt; 138 io:format("get\\_reduce\\_bucket\\_value R=~p Skip= ~p~n",
&gt; [length(R), skip]),
&gt; 139 R;
&gt; 140 true -&gt;
&gt; 141 []
&gt; 142 %Records
&gt; 143 end.
&gt;
&gt;
&gt; --
&gt; 只为成功找方法，不为失败找理由
&gt;



-- 
只为成功找方法，不为失败找理由
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

