---
title: "Re: Using $bucket index for listing keys"
description: ""
project: community
lastmod: 2016-03-11T09:01:00-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17160"
author_name: "Oleksiy Krivoshey"
project_section: "mailinglistitem"
sent_date: 2016-03-11T09:01:00-08:00
---


Because otherwise I have no ways to walk all the keys in some of my largest
buckets, paginated query not supported, RpbListKeysReq fails with Riak
'timeout' error. All hopes for Yokozuna then!

On 11 March 2016 at 18:49, Oleksiy Krivoshey  wrote:

&gt; Hi Magnus,
&gt;
&gt; Yes, thank you. Though I'm stuck a bit. When I experienced recursive
&gt; behaviour with paginated $bucket query I tried to create Yokozuna Solr
&gt; index with an empty schema (just \\_yz\\_\\* fields). Unfortunately querying
&gt; Yokozuna gives me inconsistent number of results as described in my another
&gt; email in this mailing list. Hopefully it will be solved as well :)
&gt;
&gt; On 11 March 2016 at 18:44, Magnus Kessler  wrote:
&gt;
&gt;&gt; Hi Oleksiy,
&gt;&gt;
&gt;&gt; As Russel pointed out, 2i queries, including $bucket queries, are only
&gt;&gt; supported when the backend supports ordered keys. This is currently not the
&gt;&gt; case with bitcask.
&gt;&gt;
&gt;&gt; It appears, though, that you have discovered a bug where the
&gt;&gt; multi-backend module accepts the query despite the fact that the actually
&gt;&gt; configured backend for the bucket(-type) cannot support the query. I'll
&gt;&gt; make the engineering team aware of this.
&gt;&gt;
&gt;&gt; At this point in time I can only recommend that you do not use the
&gt;&gt; $bucket query with your configuration and use an alternative, such as
&gt;&gt; Solr-based search instead.
&gt;&gt;
&gt;&gt; Kind Regards,
&gt;&gt;
&gt;&gt; Magnus
&gt;&gt;
&gt;&gt; --
&gt;&gt; Magnus Kessler
&gt;&gt; Client Services Engineer
&gt;&gt; Basho Technologies Limited
&gt;&gt;
&gt;&gt; Registered Office - 8 Lincolnâ€™s Inn Fields London WC2A 3BP Reg 07970431
&gt;&gt;
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

