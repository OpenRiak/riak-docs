---
title: "Riak 1.0 LevelDB issue"
description: ""
project: community
lastmod: 2011-10-07T12:25:17-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05097"
author_name: "Dan"
project_section: "mailinglistitem"
sent_date: 2011-10-07T12:25:17-07:00
---


Hi,

after storing more than one million keys (random key ids, 200 byte datas)
over http to a riak standalone node, i get an timeout.
It seems to me that riak is crashing after opening more than 1100 ???
LevelDB files.
I'm on OSX 10.7 and homebrew riak 1.0. The Riak settings are default with
enabled levedb and etc/vm.args ERL\\_MAX\\_PORTS are set to 32768.

$ ulimit -a
core file size (blocks, -c) 0
data seg size (kbytes, -d) unlimited
file size (blocks, -f) unlimited
max locked memory (kbytes, -l) unlimited
max memory size (kbytes, -m) unlimited
\\*open files (-n) 32768\\*
pipe size (512 bytes, -p) 1
stack size (kbytes, -s) 8192
cpu time (seconds, -t) unlimited
max user processes (-u) 2048
virtual memory (kbytes, -v) unlimited

$ launchctl limit
 cpu unlimited unlimited 
 filesize unlimited unlimited 
 data unlimited unlimited 
 stack 8388608 67104768 
 core 0 unlimited 
 rss unlimited unlimited 
 memlock unlimited unlimited 
 maxproc 2048 2500 
\\* maxfiles 32768 65536 \\* 

See some riak logs on http://pastie.org/2656767

Can anybody provide a solution, please?

Thanks,
Daniel.

--
View this message in context: 
http://riak-users.197444.n3.nabble.com/Riak-1-0-LevelDB-issue-tp3403785p3403785.html
Sent from the Riak Users mailing list archive at Nabble.com.

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

