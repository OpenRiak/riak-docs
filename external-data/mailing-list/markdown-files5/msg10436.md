---
title: "Re: Bigger data than disk space?"
description: ""
project: community
lastmod: 2013-03-14T13:51:41-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg10436"
mailinglist_parent_id: "msg10435"
author_name: "Alexander Sicular"
project_section: "mailinglistitem"
sent_date: 2013-03-14T13:51:41-07:00
---


Each vnode keeps \\_an entire copy\\_ of your data. There is no striping, which I 
think you are conflating with RAID. Default replication (also configured in 
etc/app.config) is set to three. In which case, three entire copies of your 
data are kept on three different vnodes and if you indeed have five physical 
nodes in your cluster you are guaranteed to have each of those three vnodes on 
different physical machines.

-Alexander Sicular

@siculars

On Mar 14, 2013, at 4:42 PM, "Kevin Burton"  wrote:

&gt; Thank you. Let me get it straight. I have a 4 node cluster (4 physical 
&gt; machines). If I have not made any changes to the ring size then I have 16 
&gt; (64/4) vnodes. Each physical node stores the actual data (the value) of about 
&gt; ¼ of the data size. So when querying the data with a key given the number of 
&gt; vnodes it can be determined which physical machine the data is on. There must 
&gt; be enough redundancy built in so that if one or more of the physical machines 
&gt; go down the remaining physical machines can reconstruct the values lost by 
&gt; the lost vnodes. Correct so far? Now where does replication some in? The 
&gt; documentation indicates that there are 3 copies of the data (default) made. 
&gt; How is this changed and how can this replication of the data be taken 
&gt; advantage of?
&gt; 
&gt; From: Alexander Sicular [mailto:sicul...@gmail.com] 
&gt; Sent: Thursday, March 14, 2013 3:28 PM
&gt; To: Kevin Burton
&gt; Cc: riak-users@lists.basho.com
&gt; Subject: Re: Bigger data than disk space?
&gt; 
&gt; Hi Kevin,
&gt; 
&gt; The Riak distribution model is not based on "buckets" but rather the hash of 
&gt; the bucket/key combination. That hash (and associated data) is then allocated 
&gt; against a "vnode". A vnode, in turn, is one of n where n is the 
&gt; ring\\_creation\\_size (default is 64, modify in etc/app.config). Each physical 
&gt; machine in a Riak cluster claims an equal share of the ring. For example, a 
&gt; cluster with five machines (the recommended minimum for a production cluster) 
&gt; and the default ring\\_creation\\_size will have 64/5 vnodes per physical machine 
&gt; (not sure if they round down or up but all machines will have about the same 
&gt; number of vnodes). What you would do to make more data available is either 
&gt; add a machine to the cluster whose available disk space is equal or greater 
&gt; than the cluster member with the least amount of total space or increase the 
&gt; space on all machines already in the cluster.
&gt; 
&gt; tl;dr add a machine to your cluster.
&gt; 
&gt; 
&gt; -Alexander Sicular
&gt; 
&gt; @siculars
&gt; 
&gt; On Mar 14, 2013, at 3:41 PM, Kevin Burton  wrote:
&gt; 
&gt; 
&gt; I am relatively new to Riak so forgive me if this has been asked before. I 
&gt; have a very thin understanding of a Riak cluster and understand somewhat 
&gt; about replication. In planning I foresee a time when the amount of data 
&gt; exceeds the disk space that is available to a single node. What facilities 
&gt; are there to essentially “split” a bucket across several servers? How is this 
&gt; handled?
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

