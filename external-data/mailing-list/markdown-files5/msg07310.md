---
title: "Re: preflist_exhausted error"
description: ""
project: community
lastmod: 2012-04-24T11:58:20-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07310"
mailinglist_parent_id: "msg07307"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2012-04-24T11:58:20-07:00
---


Mohit,

Be aware that key filters are just a thin layer on top of full-bucket key
listings. You'd be better off storing the field you want to filter in a
secondary index, which more efficiently supports range queries (note that
only the LevelDB storage engine currently supports secondary indexes).
Barring that, you could use the special "$key" index for a range query on
the key.

On Tue, Apr 24, 2012 at 1:07 PM, Sati, Mohit  wrote:

&gt; Hello All,
&gt;
&gt; I'm getting the below error in my queries. I'm using riak 1.1.1
&gt;
&gt; Riak Version:
&gt; ============
&gt; $rpm -qa | grep riak
&gt; riak-1.1.1-1.el6.x86\\_64
&gt;
&gt; Riak Error:
&gt; ========
&gt; HTTP/1.1 100 Continue
&gt; HTTP/1.1 500 Internal Server Error
&gt; Server: MochiWeb/1.1 WebMachine/1.9.0 (someone had painted it blue)
&gt; Date: Tue, 24 Apr 2012 16:58:53 GMT
&gt; Content-Type: application/json
&gt; Content-Length: 625
&gt; {"phase":0,"error":"[preflist\\_exhausted]"
&gt;
&gt; Query:
&gt; ==========
&gt; My query is doing a range scan. I can only get data for 1 day. For 2 or
&gt; more days it is throwing the error posted above.
&gt;
&gt; {"inputs":{ "bucket":"tagg\\_dsquery",
&gt; "key\\_filters":[["and",
&gt; [["starts\\_with", "dsquery-us\\_prm"]],
&gt; [["and",
&gt; [["tokenize", "-", 5], ["greater\\_than\\_eq",
&gt; "20120312"]],
&gt; [["tokenize", "-", 5], ["less\\_than\\_eq", "20120314"]]
&gt; ]]
&gt; ]]},
&gt; ...
&gt; ...
&gt;
&gt;
&gt; app.config changes:
&gt; =============
&gt; map\\_js\\_vm\\_count - increased to 32,64,128 and 256 but not helping
&gt; js\\_max\\_vm\\_mem - increased to 32,64,128,256,512 and 1024.
&gt; js\\_thread\\_stack - increased to 64,128,256,512,1024 and 2048 (cannot go
&gt; beyond) - riak would not start
&gt;
&gt; Can anyone help me to debug this issue. My queries cannot go beyond 1 day
&gt;
&gt; Thanks
&gt; Mohit
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;


-- 
Sean Cribbs 
Software Engineer
Basho Technologies, Inc.
http://basho.com/
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

