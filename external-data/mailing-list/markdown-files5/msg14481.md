---
title: "Re: riak-cs-gc won't start"
description: ""
project: community
lastmod: 2014-07-10T23:04:28-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14481"
mailinglist_parent_id: "msg14480"
author_name: "Adhi Priharmanto"
project_section: "mailinglistitem"
sent_date: 2014-07-10T23:04:28-07:00
---


Could you please specify the version of riak cs?


\\*root@riakcs:~# riak-cs version1.4.5\\*
riak-cs-gc batch just triggers GC and does not wait its completion.
After GC finishes, there will be a log in console.log, which looks like

 Finished garbage collection: 0 seconds, 1 batch\\_count, 0
batch\\_skips, 1 manif\\_count, 1 block\\_count

Are there such lines in your console.log?





\\*It's my console log2014-07-11 12:51:27.615 [info]
&lt;0.291.0&gt;@riak\\_cs\\_gc\\_d:fetching\\_next\\_batch:183 Finished garbage collection:
0 seconds, 0 batch\\_count, 0 batch\\_skips, 0 manif\\_count, 0
block\\_count2014-07-11 12:52:26.184 [info]
&lt;0.291.0&gt;@riak\\_cs\\_gc\\_d:fetching\\_next\\_batch:183 Finished garbage collection:
0 seconds, 0 batch\\_count, 0 batch\\_skips, 0 manif\\_count, 0
block\\_count2014-07-11 12:56:27.626 [info]
&lt;0.291.0&gt;@riak\\_cs\\_gc\\_d:fetching\\_next\\_batch:183 Finished garbage collection:
0 seconds, 0 batch\\_count, 0 batch\\_skips, 0 manif\\_count, 0
block\\_count2014-07-11 12:57:26.195 [info]
&lt;0.291.0&gt;@riak\\_cs\\_gc\\_d:fetching\\_next\\_batch:183 Finished garbage collection:
0 seconds, 0 batch\\_count, 0 batch\\_skips, 0 manif\\_count, 0
block\\_countroot@riakcs:~#\\*

GC collects deleted objects after leeway\\_seconds (default: 24 hours)
since deletion.
In case you deleted objects and run GC within 24 hours, objects will
not be collected.




\\*I'ts my leeway settingoot@riakcs:~# cat /etc/riak-cs/app.config |grep
leeway %% This leeway time is set to give the
delete %% {leeway\\_seconds, 86400},
{leeway\\_seconds, 600},\\*

Thanks,
Shino

On Fri, Jul 11, 2014 at 12:39 PM, Shunichi Shinohara 
wrote:

&gt; Hi Adhi,
&gt;
&gt; Could you please specify the version of riak cs?
&gt;
&gt; riak-cs-gc batch just triggers GC and does not wait its completion.
&gt; After GC finishes, there will be a log in console.log, which looks like
&gt;
&gt; Finished garbage collection: 0 seconds, 1 batch\\_count, 0
&gt; batch\\_skips, 1 manif\\_count, 1 block\\_count
&gt;
&gt; Are there such lines in your console.log?
&gt;
&gt; GC collects deleted objects after leeway\\_seconds (default: 24 hours)
&gt; since deletion.
&gt; In case you deleted objects and run GC within 24 hours, objects will
&gt; not be collected.
&gt;
&gt; Thanks,
&gt; Shino
&gt;
&gt; On Fri, Jul 11, 2014 at 1:34 PM, Adhi Priharmanto 
&gt; wrote:
&gt; &gt; Hi,
&gt; &gt; I'am new in riak-cs, so I try to follow the documentation on riak-cs web,
&gt; &gt; setup in single riak-cs node.
&gt; &gt; After successfully setup and store data via dragondisk S3 client,I try to
&gt; &gt; delete those file and check the size on the server won't reduce.
&gt; &gt; some search result on google suggest me to run the riak-cs-gc, but it
&gt; looks
&gt; &gt; like riak-cs-gc won't run
&gt; &gt;
&gt; &gt; root@riakcs:~# riak-cs-gc status
&gt; &gt; There is no garbage collection in progress
&gt; &gt; The current garbage collection interval is: 300
&gt; &gt; Last run started at: undefined
&gt; &gt; Next run scheduled for: 00440710T041127Z
&gt; &gt; root@riakcs:~# riak-cs-gc batch
&gt; &gt; Garbage collection batch started.
&gt; &gt; root@riakcs:~# riak-cs-gc status
&gt; &gt; There is no garbage collection in progress
&gt; &gt; The current garbage collection interval is: 300
&gt; &gt; Last run started at: undefined
&gt; &gt; Next run scheduled for: 00440710T041225Z
&gt; &gt; root@riakcs:~#
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; no error on log, any suggest ?
&gt; &gt;
&gt; &gt;
&gt; &gt; --
&gt; &gt; Cheers,
&gt; &gt;
&gt; &gt; Adhi Priharmanto
&gt; &gt;
&gt; &gt;
&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; &gt;
&gt;



-- 
Best Regards,

\\*Adhi Priharmanto\\*
+62-812-82121584
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

