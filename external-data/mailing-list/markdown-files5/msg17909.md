---
title: "Re: Reg:Continuous Periodic crashes after long operation"
description: ""
project: community
lastmod: 2017-02-01T14:01:52-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17909"
mailinglist_parent_id: "msg17908"
author_name: "Steven Joseph"
project_section: "mailinglistitem"
sent_date: 2017-02-01T14:01:52-08:00
---


Hi Luke,

Yes I am creating new client objects for each of my tasks.

Please see this github issuse against the python client for some
background as to why.

https://github.com/basho/riak-python-client/issues/497

Basicaly I ran into issues with concurrency when processes are forked.

I might experiment with using process ids as keys to access a process
specific riak client in forked child ?


Regards

Steven

Luke Bakken  writes:

&gt; Hi Steven,
&gt;
&gt; At this point I suspect you're using the Python client in such a way
&gt; that too many connections are being created. Are you re-using the
&gt; RiakClient object or repeatedly creating new ones? Can you provide any
&gt; code that reproduces your issue?
&gt;
&gt; --
&gt; Luke Bakken
&gt; Engineer
&gt; lbak...@basho.com
&gt;
&gt;
&gt; On Tue, Jan 31, 2017 at 7:47 PM, Steven Joseph  wrote:
&gt;&gt; Hi Luke,
&gt;&gt;
&gt;&gt; Here's the output of
&gt;&gt;
&gt;&gt; $ sysctl fs.file-max
&gt;&gt;
&gt;&gt; fs.file-max = 20000500
&gt;&gt;
&gt;&gt; Regards
&gt;&gt;
&gt;&gt; Steven
&gt;&gt;
&gt;&gt; On Wed, Feb 1, 2017 at 9:30 AM Luke Bakken  wrote:
&gt;&gt;&gt;
&gt;&gt;&gt; Hi Steven,
&gt;&gt;&gt;
&gt;&gt;&gt; What is the output of this command on your systems?
&gt;&gt;&gt;
&gt;&gt;&gt; $ sysctl fs.file-max
&gt;&gt;&gt;
&gt;&gt;&gt; Mine is:
&gt;&gt;&gt;
&gt;&gt;&gt; fs.file-max = 1620211
&gt;&gt;&gt;
&gt;&gt;&gt; --
&gt;&gt;&gt; Luke Bakken
&gt;&gt;&gt; Engineer
&gt;&gt;&gt; lbak...@basho.com
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; On Tue, Jan 31, 2017 at 12:22 PM, Steven Joseph 
&gt;&gt;&gt; wrote:
&gt;&gt;&gt; &gt; Hi Shaun,
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; Im having this issue again, this time I have captured the system limits,
&gt;&gt;&gt; &gt; while riak is still crashing.
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; Please note lsof and prlimit outputs at bottom.

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

