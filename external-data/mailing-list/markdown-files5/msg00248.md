---
title: "Re: node data migration"
description: ""
project: community
lastmod: 2010-05-04T13:52:08-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg00248"
mailinglist_parent_id: "msg00245"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2010-05-04T13:52:08-07:00
---


'riak stop' will only shutdown the node cleanly - it will not relinquish that 
node's portion of the ring. However, you should be able to safely take it 
down, upgrade your OS and restart the node. Hinted handoff will ensure that, 
when it comes back up, it receives the data it missed while down. If you are 
concerned about the safety of the data stored on that node, use 'riak-admin 
backup' to backup its contents, or copy the data directory to an external 
device or machine after a clean shutdown. Of course, in order to maintain 
normal operations, it makes sense to upgrade one machine at a time.

Sean Cribbs 
Developer Advocate
Basho Technologies, Inc.
http://basho.com/

On May 4, 2010, at 4:02 PM, Matthew Pflueger wrote:

&gt; Scenario: I need to upgrade the OS of my nodes in my cluster which
&gt; will result in a reboot of each node. What would be the process to
&gt; nicely migrate data away from each node?
&gt; 
&gt; If my understanding is correct, performing a nice shutdown of a riak
&gt; node via `riak stop` will migrate the data away from the node. Am I
&gt; correct? If so, approximately how long would it take to do the
&gt; migration if say each node represents 1 gig of data? Does that whole
&gt; gig get migrated away or only the data that is not replicated?
&gt; 
&gt; 
&gt; --Matthew
&gt; 
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com


\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

