---
title: "Re: Forming inputs to MR job"
description: ""
project: community
lastmod: 2015-12-30T12:33:07-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16897"
mailinglist_parent_id: "msg16896"
author_name: "Alex Moore"
project_section: "mailinglistitem"
sent_date: 2015-12-30T12:33:07-08:00
---


Hi Timur,

For your inputs line, try:

"inputs":["mybucket\\_type", "mybucket"]

Thanks,
Alex

On Wed, Dec 30, 2015 at 3:01 PM Timur Fayruzov 
wrote:

&gt; Hello,
&gt;
&gt; I'm trying to write a simple MR job using Javascript and hit a wall right
&gt; at start. I can't figure out how to specify "inputs". Here's the code:
&gt; curl -XPOST "my\\_riak\\_server:8098/mapred" -H "Content-Type:
&gt; application/json" -d @- &lt; {
&gt; "input": "my\\_bucket"
&gt; "query":[{
&gt; "map":{
&gt; "language":"javascript",
&gt; "source":"function(riakObject, keydata, arg) {
&gt; var m = riakObject.values[0].data;
&gt; return [m];
&gt; }"
&gt; }
&gt; }]
&gt; }
&gt; EOF
&gt;
&gt; this returns empty array.
&gt;
&gt; Aside: I know that listing all keys is slow but for now I can live with
&gt; this.
&gt;
&gt; Note, that I'm using non-default bucket type, so the actual location of my
&gt; keys is my\\_riak\\_server/types/my\\_bucket\\_type/buckets/my\\_bucket/my\\_key, but I
&gt; can't figure out how to communicate this location properly in the "input"
&gt; field. I have found this "documentation":
&gt; https://github.com/basho/riak\\_kv/blob/2.1/src/riak\\_kv\\_mapred\\_json.erl#L101,
&gt; but it does not explain how to specify bucket type and I'm not proficient
&gt; enough in Erlang to follow the code easily. I did not find any other
&gt; documentation on this field.
&gt;
&gt; Following returns all keys successfully, so data is there:
&gt; curl '
&gt; http://my\\_riak\\_cluster:8098/types/my\\_bucket\\_type/buckets/my\\_bucket/keys?keys=true
&gt; '
&gt;
&gt; Any pointers are highly appreciated.
&gt;
&gt; Thanks,
&gt; Timur
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

