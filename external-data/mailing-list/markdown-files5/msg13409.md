---
title: "Re: consistency impact on performance"
description: ""
project: community
lastmod: 2014-01-19T21:42:31-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13409"
mailinglist_parent_id: "msg13408"
author_name: "Luke Bakken"
project_section: "mailinglistitem"
sent_date: 2014-01-19T21:42:31-08:00
---


Hi Satoshi,

When using Riak, your object sizes should ideally be 1MB or less. A
330MB object will never result in acceptable Riak performance.

If you intend to store large objects like this I strongly recommend
using Riak CS, which will break up the object for you into chunks that
can be managed by Riak. It also provides an S3-compatible API.

Please read more about Riak CS here: http://docs.basho.com/riakcs/latest/

Thanks
--
Luke Bakken
CSE
lbak...@basho.com


On Sun, Jan 19, 2014 at 9:29 PM, Satoshi Yamada  wrote:
&gt; Hi, i'm Satoshi, new to riak.
&gt;
&gt; I would like to check how consistency changes impacts on the performance of
&gt; riak cluster. I used w=1 and w=3, and I expected at least two times more of
&gt; execution time, but there seems no significant change. I saw more difference
&gt; in Cassandra, so I wonder if it's normal in riak or there is something wrong
&gt; in my testing. Can anyone give me some advice on it?
&gt;
&gt; I simply checked as shown below.
&gt;
&gt; w=1
&gt; $ time curl -v -XPUT
&gt; http://mycluster.com:8098/buckets/w1/keys/data.tar.gz?w=1 -H "X-Riak-Vclock:
&gt; a85hYGB.........." -H "Content-Type: text/plain" --data-binary @data.tar.gz
&gt; ...
&gt; ...
&gt; ...
&gt; real 0m27.501s
&gt; user 0m0.378s
&gt; sys 0m0.674s
&gt;
&gt; w=3
&gt; $ time curl -v -XPUT
&gt; http://mycluster.com:8098/buckets/w3/keys/data.tar.gz?w=3 -H "X-Riak-Vclock:
&gt; a85hYGB.........." -H "Content-Type: text/plain" --data-binary @data.tar.gz
&gt; ...
&gt; ...
&gt; ...
&gt; real 0m29.278s
&gt; user 0m0.398s
&gt; sys 0m0.674s
&gt;
&gt; My cluster consists of 40, all active and healthy machines and running
&gt; riak-1.4.1.
&gt; The data I use is 330MB.
&gt;
&gt; Thanks in advance,
&gt; Satoshi
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

