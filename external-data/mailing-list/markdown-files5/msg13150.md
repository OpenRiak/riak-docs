---
title: "Re: Re[2]: Dont work SSL distribution"
description: ""
project: community
lastmod: 2013-12-04T07:48:38-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13150"
mailinglist_parent_id: "msg13149"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2013-12-04T07:48:38-08:00
---


Mike,

Your application should speak to Riak using the official client library (
github.com/basho/riak-erlang-client), not directly. That said, the option
you want is -proto\\_dist inet\\_tls, which was changed in R15 (or earlier, I
don't recall).


On Wed, Dec 4, 2013 at 7:18 AM, Игонин Михаил  wrote:

&gt;
&gt; Christian, thank you! It looks like the truth...
&gt;
&gt; Unfortunately, my application, that interacts with riak -- is already
&gt; heavy depends on the features of Erlang release 16. Maybe somebody knows a
&gt; some work-around?
&gt;
&gt; With best regards,
&gt; Mike
&gt;
&gt;
&gt; Среда, 4 декабря 2013, 12:26 UTC от Christian Dahlqvist &lt;
&gt; christ...@basho.com&gt;:
&gt;
&gt; Hi,
&gt;
&gt; It looks like you are trying to run Riak with Erlang R16B01. Version 1.4.2
&gt; of Riak does not support this and requires Erlang R15B01 [0].
&gt;
&gt; Best regards,
&gt;
&gt; Christian
&gt;
&gt; [0] http://docs.basho.com/riak/latest/ops/building/installing/rhel-centos/
&gt;
&gt;
&gt; On 4 Dec 2013, at 12:08, Игонин Михаил 
&gt; &gt;
&gt; wrote:
&gt;
&gt; Hi, colleagues, please tell me how to properly enable encryption between
&gt; nodes? I have only uncommented the following lines in vm.args:
&gt; -proto\\_dist inet\\_ssl
&gt; -ssl\\_dist\\_opt client\\_certfile "/etc/riak/cert.pem"
&gt; -ssl\\_dist\\_opt server\\_certfile "/etc/riak/cert.pem" ,
&gt;
&gt; and got the error:
&gt; ---------------------------------------
&gt;
&gt; [mike@srv riak]$ sudo riak console
&gt; [sudo] password for mike:
&gt; Node 
&gt; 'riak@127.0.0.1'
&gt; not responding to pings.
&gt; config is OK
&gt; !!!!
&gt; !!!! WARNING: ulimit -n is 1024; 4096 is the recommended minimum.
&gt; !!!!
&gt; Exec: /usr/lib64/riak/erts-5.9.1/bin/erlexec -boot
&gt; /usr/lib64/riak/releases/1.4.2/riak -config /etc/riak/app.config -pa
&gt; /usr/lib64/riak/lib/basho-patches -args\\_file /etc/riak/vm.args -- console
&gt; Root: /usr/lib64/riak
&gt; {error\\_logger,{{2013,12,4},{15,57,16}},"Protocol: ~p: not
&gt; supported~n",["inet\\_ssl"]}
&gt;
&gt; {error\\_logger,{{2013,12,4},{15,57,16}},crash\\_report,[[{initial\\_call,{net\\_kernel,init,['Argument\\_\\_1']}},{pid,&lt;0.20.0&gt;},{registered\\_name,[]},{error\\_info,{exit,{error,badarg},[{gen\\_server,init\\_it,6,[{file,"gen\\_server.erl"},{line,320}]},{proc\\_lib,init\\_p\\_do\\_apply,3,[{file,"proc\\_lib.erl"},{line,227}]}]}},{ancestors,[net\\_sup,kernel\\_sup,&lt;0.10.0&gt;]},{messages,[]},{links,[&lt;0.17.0&gt;]},{dictionary,[{longnames,true}]},{trap\\_exit,true},{status,running},{heap\\_size,610},{stack\\_size,24},{reductions,221}],[]]}
&gt;
&gt; {error\\_logger,{{2013,12,4},{15,57,16}},supervisor\\_report,[{supervisor,{local,net\\_sup}},{errorContext,start\\_error},{reason,{'EXIT',nodistribution}},{offender,[{pid,undefined},{name,net\\_kernel},{mfargs,{net\\_kernel,start\\_link,[['
&gt; riak@127.0.0.1 
&gt; ',longnames]]}},{restart\\_type,permanent},{shutdown,2000},{child\\_type,worker}]}]}
&gt;
&gt; {error\\_logger,{{2013,12,4},{15,57,16}},supervisor\\_report,[{supervisor,{local,kernel\\_sup}},{errorContext,start\\_error},{reason,shutdown},{offender,[{pid,undefined},{name,net\\_sup},{mfargs,{erl\\_distribution,start\\_link,[]}},{restart\\_type,permanent},{shutdown,infinity},{child\\_type,supervisor}]}]}
&gt;
&gt; {error\\_logger,{{2013,12,4},{15,57,16}},std\\_info,[{application,kernel},{exited,{shutdown,{kernel,start,[normal,[]]}}},{type,permanent}]}
&gt; {"Kernel pid
&gt; terminated",application\\_controller,"{application\\_start\\_failure,kernel,{shutdown,{kernel,start,[normal,[]]}}}"}
&gt;
&gt; Crash dump was written to: /var/log/riak/erl\\_crash.dump
&gt; Kernel pid terminated (application\\_controller)
&gt; ({application\\_start\\_failure,kernel,{shutdown,{kernel,start,[normal,[]]}}})
&gt; --------------------------------------------------
&gt; riak 1.4.2, Erlang R16B01, RHEL6
&gt;
&gt; Thanks a lot!
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
&gt;
&gt;
&gt; --
&gt; Михаил Игонин
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;


-- 
Sean Cribbs 
Software Engineer
Basho Technologies, Inc.
http://basho.com/
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

