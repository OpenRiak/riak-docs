---
title: "Re: riak-users Digest, Vol 61, Issue 12"
description: ""
project: community
lastmod: 2014-08-13T10:06:56-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14647"
author_name: "Bernard Otu"
project_section: "mailinglistitem"
sent_date: 2014-08-13T10:06:56-07:00
---


â€”
Sent from Mailbox

On Wed, Aug 13, 2014 at 12:02 PM, null 
wrote:

&gt; Send riak-users mailing list submissions to
&gt; riak-users@lists.basho.com
&gt; To subscribe or unsubscribe via the World Wide Web, visit
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; or, via email, send a message with subject or body 'help' to
&gt; riak-users-requ...@lists.basho.com
&gt; You can reach the person managing the list at
&gt; riak-users-ow...@lists.basho.com
&gt; When replying, please edit your Subject line so it is more specific
&gt; than "Re: Contents of riak-users digest..."
&gt; Today's Topics:
&gt; 1. Re: some problems with storage statistic calculation
&gt; (Stanislav Vlasov)
&gt; ----------------------------------------------------------------------
&gt; Message: 1
&gt; Date: Wed, 13 Aug 2014 15:00:21 +0600
&gt; From: Stanislav Vlasov 
&gt; To: riak-users 
&gt; Subject: Re: some problems with storage statistic calculation
&gt; Message-ID:
&gt; 
&gt; Content-Type: text/plain; charset=UTF-8
&gt; 2014-08-11 17:03 GMT+06:00 Stanislav Vlasov :
&gt;&gt; We have 8 nodes with riak+riak-cs, about 7 Tb data in cluster.
&gt;&gt; Some time riak process dead by OOM on several nodes when large
&gt;&gt; (~100Gb) file was writed via s3cmd, because riak-cs eated all memory.
&gt;&gt; After recovering we experiencing the following problems:
&gt;&gt;
&gt;&gt; 1) very slow storage statistic calculation (about two hour). Before
&gt;&gt; oom it was done in 40 minutes.
&gt; After total riak-cs restart statistic calculate fine (about 10 min
&gt; from begin to end). But 15 minutes after restart statstic calculation
&gt; slowing agan and we see in console log:
&gt; 2014-08-13 08:18:31.854 [warning]
&gt; &lt;0.4043.0&gt;@riak\\_cs\\_manifest:maybe\\_warn\\_bloated\\_manifests:145 Large
&gt; manifest size (54195024 bytes) for bucket=&lt;&lt;"test"&gt;&gt; key=
&gt; &lt;&lt;"u7850.netangels.ru-20140328-full.tar.lzo"&gt;&gt;
&gt; 2014-08-13 08:18:43.620 [warning]
&gt; &lt;0.4081.0&gt;@riak\\_cs\\_manifest:maybe\\_warn\\_bloated\\_manifests:145 Many
&gt; manifest siblings (21 siblings) for bucket=&lt;&lt;"test"&gt;&gt; key=
&gt; &lt;&lt;"u7850.netangels.ru-20140328-full.tar.lzo"&gt;&gt;
&gt; Filesize was ~120Gb, uploaded before OOM. File does not exists now
&gt; (deleted, uploaded with zero size and deleted again), but nothing
&gt; changed.
&gt; I guess it's a garbage collector issue, because it happen exactly
&gt; every 15 minutes ({gc\\_interval,900}) after restart.
&gt; What can i do with it?
&gt; -- 
&gt; Stanislav
&gt; ------------------------------
&gt; Subject: Digest Footer
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; ------------------------------
&gt; End of riak-users Digest, Vol 61, Issue 12
&gt; \\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

