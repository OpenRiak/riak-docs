---
title: "Re: Getting basho_bench to work."
description: ""
project: community
lastmod: 2013-03-20T16:02:30-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg10521"
mailinglist_parent_id: "msg10514"
author_name: "Eric Redmond"
project_section: "mailinglistitem"
sent_date: 2013-03-20T16:02:30-07:00
---


You are trying to start a new Erlang node, but another node with the same name 
is already running.

Make sure no other riak beam processes.

On Mar 20, 2013, at 2:41 PM, Kevin Burton  wrote:

&gt; Now I cannot get it going again. I seem to always get the error:
&gt; 
&gt; 16:38:10.032 [info] Protocol: "inet\\_tcp": register error: 
&gt; {{badmatch,{error,econnrefused}},[{inet\\_tcp\\_dist,listen,1,[{file,"inet\\_tcp\\_dist.erl"},{line,70}]},{net\\_kernel,start\\_protos,4,[{file,"net\\_kernel.erl"},{line,1314}]},{net\\_kernel,start\\_protos,3,[{file,"net\\_kernel.erl"},{line,1307}]},{net\\_kernel,init\\_node,2,[{file,"net\\_kernel.erl"},{line,1197}]},{net\\_kernel,init,1,[{file,"net\\_kernel.erl"},{line,357}]},{gen\\_server,init\\_it,6,[{file,"gen\\_server.erl"},{line,304}]},{proc\\_lib,init\\_p\\_do\\_apply,3,[{file,"proc\\_lib.erl"},{line,227}]}]}
&gt; 
&gt; 16:38:10.033 [error] Failed to start net\\_kernel for 
&gt; basho\\_bench\\_measurement\\_erlangvm: 
&gt; {shutdown,{child,undefined,net\\_sup\\_dynamic,{erl\\_distribution,start\\_link,[['basho\\_bench@127.0.0.1']]},permanent,1000,supervisor,[erl\\_distribution]}}
&gt; 
&gt; 
&gt; 
&gt; From: Dan Reverri [mailto:d...@basho.com] 
&gt; Sent: Wednesday, March 20, 2013 3:47 PM
&gt; To: Kevin Burton
&gt; Cc: Mark Phillips; riak-users@lists.basho.com
&gt; Subject: Re: Getting basho\\_bench to work.
&gt; 
&gt; Hi Kevin,
&gt; 
&gt; You've specified 3 workers in your config:
&gt; {concurrent, 3}.
&gt; 
&gt; Test results are stored in CSV files located in timestamped directories under 
&gt; a local "test" directory. The CSV files can be used to generate graphs using 
&gt; R. More information can be found here:
&gt; http://docs.basho.com/riak/latest/cookbooks/Benchmarking/#Generating-Benchmark-Graphs
&gt; 
&gt; 
&gt; 
&gt; Daniel Reverri
&gt; Client Architect
&gt; Basho Technologies, Inc.
&gt; d...@basho.com
&gt; 
&gt; 
&gt; On Wed, Mar 20, 2013 at 1:39 PM, Kevin Burton  
&gt; wrote:
&gt; I got rid of the “not enough results . . .” messages by adding 
&gt; {enforce\\_keyrange, 1000}. To the configuration. But this leaves two questions:
&gt; 
&gt; 1) I see messages like:
&gt; 
&gt; 
&gt; 15:27:06.175 [info] Using http target "172.16.33.221":8098 for worker 1
&gt; 15:27:06.175 [info] Using pb target "172.16.33.221":8087 for worker 1
&gt; 
&gt; Even though I listed 4 nodes I only see worker type messages for up to 3. I 
&gt; was expecting to see worker message for worker 4 but it is not there
&gt; 
&gt; 2) At the end I see:
&gt; 
&gt; 
&gt; 15:27:07.195 [info] Application basho\\_bench started on node 
&gt; 'basho\\_bench@127.0.0.1'
&gt; 15:28:08.214 [info] No Errors.
&gt; 15:28:08.219 [info] Application basho\\_bench exited with reason: stopped
&gt; 15:28:08.223 [info] Test completed after 1 mins.
&gt; 
&gt; Shouldn’t I see some kind of results? I only see that it ran with no errors. 
&gt; Are the results of the run put somewhere else?
&gt; 
&gt; From: Kevin Burton [mailto:rkevinbur...@charter.net] 
&gt; Sent: Wednesday, March 20, 2013 2:29 PM
&gt; To: 'Dan Reverri'
&gt; Cc: 'Mark Phillips'; 'riak-users@lists.basho.com'
&gt; Subject: RE: Getting basho\\_bench to work.
&gt; 
&gt; This is a major step forward. It actually is doing something. Thank you. Now 
&gt; the output is littered with messages like ‘not enough results . . . ‘, 
&gt; instead of results. Ideas?
&gt; 
&gt; From: Dan Reverri [mailto:d...@basho.com] 
&gt; Sent: Wednesday, March 20, 2013 2:17 PM
&gt; To: Kevin Burton
&gt; Cc: Mark Phillips; riak-users@lists.basho.com
&gt; 
&gt; Subject: Re: Getting basho\\_bench to work.
&gt; 
&gt; Actually, I think the config option needs to be:
&gt; 
&gt; "{mynode, ['basho\\_bench@127.0.0.1']}."
&gt; 
&gt; Daniel Reverri
&gt; Client Architect
&gt; Basho Technologies, Inc.
&gt; d...@basho.com
&gt; 
&gt; 
&gt; On Wed, Mar 20, 2013 at 12:12 PM, Kevin Burton  
&gt; wrote:
&gt; I am not sure what 'freenode' is. But I have some time now.
&gt; 
&gt; -----Original Message-----
&gt; From: Mark Phillips [mailto:m...@basho.com]
&gt; Sent: Wednesday, March 20, 2013 1:57 PM
&gt; To: Kevin Burton
&gt; 
&gt; Not enough results for query\\_pb: 904/913/[]
&gt; Not enough results for query\\_http: 100/109/[&lt;&lt;"107"&gt;&gt;]
&gt; Not enough results for query\\_http: 167/176/[&lt;&lt;"172"&gt;&gt;,&lt;&lt;"168"&gt;&gt;]
&gt; Not enough results for query\\_http: 614/623/[]
&gt; Not enough results for query\\_pb: 309/318/[]
&gt; Not enough results for query\\_pb: 605/614/[]
&gt; Not enough results for query\\_pb: 779/788/[]
&gt; Not enough results for query\\_http: 872/881/[&lt;&lt;"876"&gt;&gt;]
&gt; Not enough results for query\\_mr: 452/461/[[&lt;&lt;"mybucket"&gt;&gt;,&lt;&lt;"460"&gt;&gt;]]
&gt; Not enough results for query\\_http: 141/150/[&lt;&lt;"145"&gt;&gt;]
&gt; Not enough results for query\\_pb: 853/862/[]
&gt; Not enough results for query\\_mr: 922/931/[[&lt;&lt;"mybucket"&gt;&gt;,&lt;&lt;"927"&gt;&gt;]]
&gt; Not enough results for query\\_http: 880/889/[&lt;&lt;"889"&gt;&gt;]
&gt; Not enough results for query\\_mr: 365/374/[[&lt;&lt;"mybucket"&gt;&gt;,&lt;&lt;"374"&gt;&gt;]]
&gt; Not enough results for query\\_http: 194/203/[&lt;&lt;"198"&gt;&gt;]
&gt; Not enough results for query\\_mr: 621/630/[[&lt;&lt;"mybucket"&gt;&gt;,&lt;&lt;"626"&gt;&gt;]]
&gt; Not enough results for query\\_pb: 952/961/[]
&gt; Not enough results for query\\_http: 384/393/[&lt;&lt;"392"&gt;&gt;]
&gt; Not enough results for query\\_http: 371/380/[&lt;&lt;"374"&gt;&gt;]
&gt; Not enough results for query\\_pb: 359/368/[[&lt;&lt;"mybucket"&gt;&gt;,&lt;&lt;"363"&gt;&gt;],
&gt; [&lt;&lt;"mybucket"&gt;&gt;,&lt;&lt;"359"&gt;&gt;]]
&gt; 
&gt; Cc: Roberto Aloi; riak-users@lists.basho.com
&gt; 
&gt; Subject: Re: Getting basho\\_bench to work.
&gt; 
&gt; Hey Kevin,
&gt; 
&gt; Any chance you can pop into #riak on freenode? We can do this
&gt; trouble-shooting in real time. :)
&gt; 
&gt; Mark
&gt; 
&gt; On Wed, Mar 20, 2013 at 11:42 AM, Kevin Burton 
&gt; wrote:
&gt; &gt; So your theory is the the 'check the configuration' is not from
&gt; &gt; basho\\_bench but from erlang. What configuration needs to change? The
&gt; &gt; link mentions running a deamon that maps long names to short names. Do
&gt; &gt; I need that? As far as I can tell I am using the "standard" naming
&gt; &gt; convetion (r...@xxx.xxx.xxx.xxx). Do you think this is a 'long name'?
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; From: Roberto Aloi [mailto:prof...@gmail.com]
&gt; &gt; Sent: Wednesday, March 20, 2013 1:16 PM
&gt; &gt; To: Kevin Burton
&gt; &gt; Cc: riak-users@lists.basho.com
&gt; &gt;
&gt; &gt;
&gt; &gt; Subject: Re: Getting basho\\_bench to work.
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; Hi,
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; At a glance, it looks like the basho\\_bench node couldn't start
&gt; &gt; correctly with a longname.
&gt; &gt;
&gt; &gt; How are you starting basho\\_bench?
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; This issue could be due to a misconfiguration in the hostname for your
&gt; &gt; machine.
&gt; &gt;
&gt; &gt; How do your /etc/hosts and /etc/hostname look like?
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; For information about shortnames and longnames in Erlang:
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; http://www.snookles.com/erlang-docs/R15B03/doc/reference\\_manual/distri
&gt; &gt; buted.html
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; On Wed, Mar 20, 2013 at 6:36 PM, Kevin Burton
&gt; &gt; 
&gt; &gt; wrote:
&gt; &gt;
&gt; &gt; I reiterate the request to see what is wrong with my basho\\_bench
&gt; &gt; configuration. I have attached the configuration as well as the
&gt; &gt; output. Any ideas as to what is wrong would be greatly appreciated. I
&gt; &gt; basically used the templates in the 'examples' folder but apparently
&gt; &gt; there is something wrong.
&gt; &gt;
&gt; &gt;
&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; --
&gt; &gt; Roberto Aloi
&gt; &gt; ---
&gt; &gt; Website: http://roberto-aloi.com
&gt; &gt; Twitter: @robertoaloi
&gt; &gt;
&gt; &gt;
&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; &gt;
&gt; 
&gt; 
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; 
&gt; 
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

