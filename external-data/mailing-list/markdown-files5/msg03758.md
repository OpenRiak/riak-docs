---
title: "Re: Riak crash on 0.14.2 riak_kv_stat terminating"
description: ""
project: community
lastmod: 2011-06-21T08:15:52-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03758"
mailinglist_parent_id: "msg03755"
author_name: "Dan Reverri"
project_section: "mailinglistitem"
sent_date: 2011-06-21T08:15:52-07:00
---


Hi Jeremy,

The flow\\_timeout error would not cause a node to crash. Supervisor and error
reports are normal log entries and do not usually correspond to a node
crash. Can you provide all the log files from the crashing node? Also, can
you look for an erl\\_crash.dump file?

Thanks,
Dan

Daniel Reverri
Developer Advocate
Basho Technologies, Inc.
d...@basho.com


On Tue, Jun 21, 2011 at 6:50 AM, Jeremy Raymond  wrote:

&gt; Ok thanks. Where do I increase the timeout? Would the timeout cause the
&gt; node to crash?
&gt;
&gt; - Jeremy
&gt;
&gt;
&gt;
&gt; On Tue, Jun 21, 2011 at 9:27 AM, Mathias Meyer  wrote:
&gt;
&gt;&gt; Jeremy,
&gt;&gt;
&gt;&gt; looks like you're hitting the timeout for the MapReduce job you're
&gt;&gt; running, so the issue isn't memory-related. You could either increase the
&gt;&gt; timeout for the whole job, or split up the single MapReduce request in
&gt;&gt; multiple, ensuring a shorter runtime of a single job, then collecting the
&gt;&gt; results on your application's side.
&gt;&gt;
&gt;&gt; Mathias Meyer
&gt;&gt; Developer Advocate, Basho Technologies
&gt;&gt;
&gt;&gt;
&gt;&gt; On Dienstag, 21. Juni 2011 at 14:25, Jeremy Raymond wrote:
&gt;&gt;
&gt;&gt; &gt; I increased the memory to 3GB on the VMs I'm using for Riak and also
&gt;&gt; replaced a JavaScript reduce function I had missed converting to Erlang with
&gt;&gt; the Erlang version. Monitoring the memory on the machines indicates that
&gt;&gt; Riak is not running out of memory. There is lots of disk space on the
&gt;&gt; machines (~30GB free).
&gt;&gt; &gt;
&gt;&gt; &gt; Riak crashed again this morning with a {error, flow\\_timeout} (below). My
&gt;&gt; use case is I have ~75 map/reduce jobs that run about every 10 minutes over
&gt;&gt; about 8700 items in a bucket. Once an hour the 8700 items get updated with a
&gt;&gt; write to each item.
&gt;&gt; &gt;
&gt;&gt; &gt; =SUPERVISOR REPORT==== 21-Jun-2011::02:34:34 ===
&gt;&gt; &gt; Supervisor: {local,luke\\_phase\\_sup}
&gt;&gt; &gt; Context: child\\_terminated
&gt;&gt; &gt; Reason: {error,flow\\_timeout}
&gt;&gt; &gt; Offender:
&gt;&gt; [{pid,&lt;0.7243.26&gt;},{name,undefined},{mfa,{luke\\_phase,start\\_lin\\
&gt;&gt; &gt;
&gt;&gt; k,[riak\\_kv\\_reduce\\_phase,3,[accumulate,converge],undefined,&lt;0.7241.26&gt;,66000,[{e\\
&gt;&gt; &gt; rlang,{reduce, ...
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt; =ERROR REPORT==== 21-Jun-2011::02:34:34 ===
&gt;&gt; &gt; \\*\\* State machine &lt;0.7274.26&gt; terminating
&gt;&gt; &gt; \\*\\* Last message in was {'EXIT',&lt;0.7241.26&gt;,{error,flow\\_timeout}}
&gt;&gt; &gt; \\*\\* When State == waiting\\_kl
&gt;&gt; &gt; \\*\\* Data == {state,&lt;0.7241.26&gt;,mapred,&lt;&lt;&gt;&gt;,
&gt;&gt; &gt; [[{639406966332270026714112114313373821099470487552,
&gt;&gt; &gt; 'riak@x.x.x.x (mailto:riak@x.x.x.x)'},
&gt;&gt;
&gt;&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

