---
title: "Re: scaling up vertically upgrading HD"
description: ""
project: community
lastmod: 2015-04-23T08:02:27-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16066"
mailinglist_parent_id: "msg16064"
author_name: "Alexander Sicular"
project_section: "mailinglistitem"
sent_date: 2015-04-23T08:02:27-07:00
---


Hi Alex!

Yes, each node would use an even amount of space regardless of maximum disk 
space available. 

The "evenness" has to do with Riak's uniform data distribution due to the sha1 
consistent hashing algorithm. The output of sha1 is a number in the range of 0 
to 2^160. That range is partitioned into segments called "vnodes" in Riak 
parlance (see ring\\_size configuration option). Vnodes, or virtual nodes, in 
turn are equally allocated to physical machines in the cluster. Thus, each node 
in a Riak cluster can be thought of as being responsible for 1/n of data stored 
and 1/n performance where n is the number of machines in the cluster. 

I think I use some more and or better words to describe it here 
https://basho.com/why-riak-just-works/

-Alexander 

@siculars
http://siculars.posthaven.com

Sent from my iRotaryPhone

&gt; On Apr 23, 2015, at 10:42, Alex De la rosa  wrote:
&gt; 
&gt; Cool, thank you :) however, is true that if 4 nodes are 1TB and the other one 
&gt; is 2TB; the 5 nodes will act as having 1TB each, right? (I guess that's what 
&gt; you mean with "Riak allocates data to nodes evenly")
&gt; 
&gt; Thanks,
&gt; Alex
&gt; 
&gt;&gt; On Thu, Apr 23, 2015 at 4:40 PM, Jon Meredith  wrote:
&gt;&gt; Hi Alex,
&gt;&gt; 
&gt;&gt; Riak allocates data to nodes evenly - it doesn't take into account free 
&gt;&gt; space. You should just be able to upgrade all nodes to 1Tb and Riak will 
&gt;&gt; use the space, without needing to take any additional actions.
&gt;&gt; 
&gt;&gt; Jon
&gt;&gt; 
&gt;&gt;&gt; On Thu, Apr 23, 2015 at 7:17 AM, Alex De la rosa  
&gt;&gt;&gt; wrote:
&gt;&gt;&gt; Hi there,
&gt;&gt;&gt; 
&gt;&gt;&gt; I have the following question about scaling up vertically upgrading HDs to 
&gt;&gt;&gt; get more space. I have the understanding that if HDs are of different sizes 
&gt;&gt;&gt; on ring creation, they get the smallest size of them all and make all nodes 
&gt;&gt;&gt; even, for example:
&gt;&gt;&gt; 
&gt;&gt;&gt; Node 1: 500GB
&gt;&gt;&gt; Node 2: 500GB
&gt;&gt;&gt; Node 3: 750GB
&gt;&gt;&gt; Node 4: 500GB
&gt;&gt;&gt; Node 5: 750GB
&gt;&gt;&gt; 
&gt;&gt;&gt; In this case riak would make a parity of 500GB per node... so... how could 
&gt;&gt;&gt; we scale up the HDs? Imagine I want to turn them into the following:
&gt;&gt;&gt; 
&gt;&gt;&gt; Node 1: 1TB
&gt;&gt;&gt; Node 2: 1TB
&gt;&gt;&gt; Node 3: 1TB
&gt;&gt;&gt; Node 4: 1TB
&gt;&gt;&gt; Node 5: 1TB
&gt;&gt;&gt; 
&gt;&gt;&gt; How can you rebalance the cluster in the way their partitions grow to fit 
&gt;&gt;&gt; this new setup? (using Riak 2.1)
&gt;&gt;&gt; 
&gt;&gt;&gt; Thanks,
&gt;&gt;&gt; Alex
&gt;&gt;&gt; 
&gt;&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; -- 
&gt;&gt; Jon Meredith
&gt;&gt; Chief Architect
&gt;&gt; Basho Technologies, Inc.
&gt;&gt; jmered...@basho.com
&gt; 
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

