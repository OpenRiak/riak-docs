---
title: "Re: Is per-bucket auto-expiry possible?"
description: ""
project: community
lastmod: 2013-02-27T02:33:01-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg10272"
mailinglist_parent_id: "msg10271"
author_name: "Rune Skou Larsen"
project_section: "mailinglistitem"
sent_date: 2013-02-27T02:33:01-08:00
---



No and yes.
Bitcask is the only backend shipped with Riak that stores data on disk 
and supports expiry. When setting expiry in a bitcask backend, the 
setting goes for all buckets inside that backend.


What you can do, is to setup a multibackend system. For example 
configure one bitcask backend with expiry, and leave the default backend 
without expiry.
Then point the buckets, where you want keys to expire, to the expiry 
backend by setting the "backend" bucket property:


 curl -XPUT http://riaknode:8098/riak/bucketWherekeysShouldExpire \\
 -H "Content-Type: application/json" \\
 -d '{"props":{"backend":"my\\_backend\\_with\\_expiry"}}'



See:
http://docs.basho.com/riak/latest/tutorials/choosing-a-backend/Multi/

It can be tempting to set up many individual backends, but beware of the 
operational downsides of this, which includes more open files and other 
aspects discussed on the mailinglist some time ago.


BR Rune


--

Best regards / Venlig hilsen

\\*Rune Skou Larsen\\*
NoSQL Team Lead
Trifork Public A/S

Den 27-02-2013 11:12, Anton skrev:

I know I could configure the nodes to auto-expire items after a
certain time, but is it possible to do this on per-bucket basis only?

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com



\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

