---
title: "Re: Multiget java client performance"
description: ""
project: community
lastmod: 2015-01-20T09:49:54-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15532"
mailinglist_parent_id: "msg15529"
author_name: "Santi Kumar"
project_section: "mailinglistitem"
sent_date: 2015-01-20T09:49:54-08:00
---


Got it Brain, Thanks.

Any suggestions on the 2nd point.


On Tue, Jan 20, 2015 at 10:43 PM, Brian Roach  wrote:

&gt; Santi -
&gt;
&gt; The core of the 2.0 Java client uses Netty. There's a fixed number of
&gt; worker threads that process sockets using non-blocking IO ( w/
&gt; polling/select).
&gt;
&gt; Due to the synchronous nature of the Riak API, each fetch operation
&gt; requires its own socket connection and we can't pipeline.
&gt;
&gt; As noted in the Javadoc for MultiFetch
&gt; (
&gt; http://basho.github.io/riak-java-client/2.0.0/com/basho/riak/client/api/commands/kv/MultiFetch.html
&gt; )
&gt; there is a default of 10 simultaneous fetches in flight at once. This
&gt; is pretty conservative but ... that's what defaults are for :)
&gt;
&gt; How does it scale? Depends on the hardware, network latency, etc. In
&gt; the end ... you've only got so many threads and you prob don't want
&gt; 1000 sockets being created at once. Best suggestion is to adjust up
&gt; the number of simultaneous inflight and measure it.
&gt;
&gt; Thanks,
&gt; - Roach
&gt;
&gt;
&gt;
&gt; On Mon, Jan 19, 2015 at 6:43 PM, Santi Kumar  wrote:
&gt; &gt; Brain
&gt; &gt; I"m using Riak Client 2.0.0 and Riak 2.0.2.
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; On Tue, Jan 20, 2015 at 1:54 AM, Brian Roach  wrote:
&gt; &gt;&gt;
&gt; &gt;&gt; Santi -
&gt; &gt;&gt;
&gt; &gt;&gt; Which version of the Java client?
&gt; &gt;&gt;
&gt; &gt;&gt; Thanks,
&gt; &gt;&gt; - Roach
&gt; &gt;&gt;
&gt; &gt;&gt; On Mon, Jan 19, 2015 at 7:36 AM, Santi Kumar 
&gt; wrote:
&gt; &gt;&gt; &gt; Hi
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt; We are using java client for accessing Riak KV/Search. For some use
&gt; &gt;&gt; &gt; cases,
&gt; &gt;&gt; &gt; we go to search, get the keys and access the data from Riak. There
&gt; might
&gt; &gt;&gt; &gt; be
&gt; &gt;&gt; &gt; a case where we might get 1000's of keys. So want to understand what
&gt; is
&gt; &gt;&gt; &gt; the
&gt; &gt;&gt; &gt; impact of that on multiget and how does it scale.
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt; We were using RDBMS and Elastic search earlier. Now we moved all the
&gt; &gt;&gt; &gt; data to
&gt; &gt;&gt; &gt; Riak KV and Search. We used to query all the audit entries from ES as
&gt; we
&gt; &gt;&gt; &gt; used to store the complete data there. Applicaitons flows used to get
&gt; &gt;&gt; &gt; the
&gt; &gt;&gt; &gt; data from RDBMS. Now as we replaced everything with Riak KV and
&gt; search,
&gt; &gt;&gt; &gt; We
&gt; &gt;&gt; &gt; need to go to Riak Search for auditing reports. If we store all the
&gt; &gt;&gt; &gt; objects
&gt; &gt;&gt; &gt; in Riak Search, how does it impact ?
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt; Thanks
&gt; &gt;&gt; &gt; Santi
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt;&gt; &gt; riak-users mailing list
&gt; &gt;&gt; &gt; riak-users@lists.basho.com
&gt; &gt;&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; &gt;&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

