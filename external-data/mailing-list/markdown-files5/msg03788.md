---
title: "Re: Puppet Module for Riak"
description: ""
project: community
lastmod: 2011-06-22T09:28:36-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03788"
mailinglist_parent_id: "msg03765"
author_name: "Mark Phillips"
project_section: "mailinglistitem"
sent_date: 2011-06-22T09:28:36-07:00
---


If any of this ever officially makes it to a Bitbucket/GitHub repo,
let's make sure it gets added to the "Recipes...." section on the
wiki. :)

http://wiki.basho.com/Community-Developed-Libraries-and-Projects.html#Recipes%2C-Cookbooks%2C-and-Configurations

Thanks,

Mark

On Tue, Jun 21, 2011 at 1:23 PM, Jacques  wrote:
&gt; Oops, forgot to include list.  Sorry.
&gt;
&gt; ---------- Forwarded message ----------
&gt; From: Jacques 
&gt; Date: Tue, Jun 21, 2011 at 1:22 PM
&gt; Subject: Re: Puppet Module for Riak
&gt; To: Ken Perkins 
&gt;
&gt;
&gt; I'm very new to using puppet but I'll give you what I have.  It is just a
&gt; basic example.
&gt; The init references two erb files:
&gt; app.config.erb = Utilizes &lt;%= ipaddress %&gt; for http, https and pb addresses
&gt; vm.args.erb = Actually just a straight config right now.  Originally used
&gt; ipaddress for the the host part of the name but then realized that wasn't
&gt; necessary since I have dns setup correctly for each of the nodes.
&gt; Hopefully something to get you started.
&gt; Jacques
&gt;
&gt; modules/riak/manifests/init.pp
&gt; class riak::config {
&gt;   file { "/etc/riak":
&gt;     ensure =&gt; directory,
&gt;     mode =&gt; 0555,
&gt;   }
&gt;   file { "/etc/riak/app.config":
&gt;     ensure =&gt; present,
&gt;     owner =&gt; 'root',
&gt;     group =&gt; 'root',
&gt;     content =&gt; template("riak/app.config.erb"),
&gt;     require =&gt; [File["/etc/riak"], Class["riak::install"]],
&gt;     notify =&gt; Class["riak::service"],
&gt;   }
&gt;   file { "/etc/riak/vm.args":
&gt;     ensure =&gt; present,
&gt;     owner =&gt; 'root',
&gt;     group =&gt; 'root',
&gt;     content =&gt; template("riak/vm.args.erb"),
&gt;     require =&gt; [File["/etc/riak"], Class["riak::install"]],
&gt;     notify =&gt; Class["riak::service"],
&gt;   }
&gt;   file { "/export/riak":
&gt;     ensure =&gt; directory,
&gt;     owner =&gt; 'riak',
&gt;     group =&gt; 'riak',
&gt;     require =&gt; Class["riak::install"],
&gt;   }
&gt; }
&gt; class riak::install {
&gt;   package {"erlang":
&gt;     ensure =&gt; present,
&gt;     require =&gt; Class["repos"],
&gt;   }
&gt;   package {"riak":
&gt;     ensure =&gt; present,
&gt;     require =&gt; Package["erlang"],
&gt;   }
&gt; }
&gt;
&gt; class riak::service {
&gt;   service {"riak":
&gt;     ensure =&gt; running,
&gt;     hasstatus =&gt; false,
&gt;     hasrestart =&gt; true,
&gt;     enable =&gt; true,
&gt;     require =&gt; Class["riak::config"]
&gt;   }
&gt; }
&gt; class riak {
&gt;   require repos
&gt;   include riak::install, riak::config, riak::service
&gt; }
&gt;
&gt;
&gt;
&gt;
&gt; On Tue, Jun 21, 2011 at 9:44 AM, Ken Perkins  wrote:
&gt;&gt;
&gt;&gt; I've been searching and have had little success in finding a Riak Module
&gt;&gt; for puppet, so I wanted to turn to the community.
&gt;&gt; Are any of you using puppet to manage your riak boxes? Please share
&gt;&gt; anything if you do! It'd be great to have something to start from.
&gt;&gt; Thanks!
&gt;&gt; --Ken
&gt;&gt; clipboard, inc.
&gt;&gt;
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;
&gt;
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

