---
title: "Re: Riak crashed with MANIFEST not found"
description: ""
project: community
lastmod: 2012-05-25T17:38:15-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07535"
mailinglist_parent_id: "msg07534"
author_name: "jshoffstall"
project_section: "mailinglistitem"
sent_date: 2012-05-25T17:38:15-07:00
---


Hi, Nam, 

On the node that is reporting the LevelDB Manifest error, I would do the
following: 

1. Stop the node if it isn't down already. 

2. Backup
/var/lib/riak/leveldb/502391187832497878132516661246222288006726811648 to
another folder outside of /var/lib/riak/leveldb. 

3. Run the erl binary included with Riak (typically underneath
/usr/lib/riak/erts-\\*/bin or /usr/lib64/riak/erts-\\*/bin in Linux) to startup
an Erlang shell. 

4. Issue the following to open the node's LevelDB database: 
 [application:set\\_env(eleveldb, Var, Val) || {Var, Val} &lt;- 
 [{max\\_open\\_files, 2000}, 
 {block\\_size, 1048576}, 
 {cache\\_size, 20\\*1024\\*1024\\*1024}, 
 {sync, false}, 
 {data\\_root, "/var/lib/riak/leveldb"}]]. 

5. Run 
 eleveldb:repair("502391187832497878132516661246222288006726811648", []). 

6. After the repair has completed, run 
 q(). 
 or hit ^c twice to exit the shell. 

7. Restart Riak. 

Let us know how this goes. If you run into any more trouble, ping the list
and we'll give you a hand! 

Regards, 

Justin Shoffstall 
Developer Advocate | Basho Technologies, Inc. 


--
View this message in context: 
http://riak-users.197444.n3.nabble.com/Riak-crashed-with-MANIFEST-not-found-tp4015987p4016113.html
Sent from the Riak Users mailing list archive at Nabble.com.

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

