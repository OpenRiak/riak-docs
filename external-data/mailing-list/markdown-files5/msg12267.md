---
title: "Re: Riak and ec2 with vm.args - Node	'riak@ip-10-234-117-74.eu-west-1.compute.internal'	not responding to pings."
description: ""
project: community
lastmod: 2013-09-15T09:18:42-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12267"
mailinglist_parent_id: "msg12263"
author_name: "Jeremiah Peschka"
project_section: "mailinglistitem"
sent_date: 2013-09-15T09:18:42-07:00
---


Welp, here's what I did and it seemed to work for me:

Created a new VPC
Created a subnet in said VPC
Created a default route for SSH connectivity
Created a security group with the TCP/IP settings outline in the AWS PDF
Created two instances using the Riak AMI, both inside the VPC.

On each instance, I edited app.config to listen on the local IP address
(found using curl http://169.254.169.254/latest/meta-data/local-ipv4)

On the first instance, I started riak and was able to ping the node
successfully from the local host and from instance two.

On the second instance I started riak and then ran the following -
http://pastebin.com/CaHH3Eve

Each node's vm.args is using the IP address for the `-name` parameter.

If you're in a VPC, you may want to check the box for "Enable DNS hostname
support for instances launched in this VPC."

---
Jeremiah Peschka - Founder, Brent Ozar Unlimited
MCITP: SQL Server 2008, MVP
Cloudera Certified Developer for Apache Hadoop


On Sun, Sep 15, 2013 at 6:39 AM, David Montgomery  wrote:

&gt; Its both the fqdn or internal ip address. Either way,,,,same issue riak
&gt; refuses to work with ip address or fqdn....and I dont know why.
&gt;
&gt;
&gt;
&gt; on bash page the recommend using fqdn which adds to tbhe confusion
&gt;
&gt;
&gt; http://docs.basho.com/riak/latest/ops/building/basic-cluster-setup/
&gt;
&gt; \\*Node Names\\*
&gt;
&gt; Use fully qualified domain names (FQDNs) rather than IP addresses for the
&gt; cluster member node names. For example, “r...@cluster.example.com” and “
&gt; riak@192.168.1.10” are both acceptable node naming schemes, but using the
&gt; FQDN style is preferred.
&gt;
&gt; Once a node has been started, in order to change the name you must either
&gt; remove ring files from the data directory, riak-admin 
&gt; reipthe 
&gt; node, or riak-admin
&gt; cluster 
&gt; force-replacethe
&gt; node.
&gt;
&gt;
&gt;
&gt; On Sun, Sep 15, 2013 at 9:10 PM, Jeremiah Peschka &lt;
&gt; jeremiah.pesc...@gmail.com&gt; wrote:
&gt;
&gt;&gt; Starting on page 3, the Riak on AWS [1] whitepaper has some instructions
&gt;&gt; on getting things set up. In the docs, they recommend using the AWS
&gt;&gt; internal IP address instead of the FQDN.
&gt;&gt;
&gt;&gt; This advice is also repeated in the Riak wiki [2].
&gt;&gt;
&gt;&gt;
&gt;&gt; [1]: http://media.amazonwebservices.com/AWS\\_NoSQL\\_Riak.pdf
&gt;&gt; [2]:
&gt;&gt; http://docs.basho.com/riak/latest/ops/building/installing/aws-marketplace/
&gt;&gt;
&gt;&gt;
&gt;&gt; ---
&gt;&gt; Jeremiah Peschka - Founder, Brent Ozar Unlimited
&gt;&gt; MCITP: SQL Server 2008, MVP
&gt;&gt; Cloudera Certified Developer for Apache Hadoop
&gt;&gt;
&gt;&gt;
&gt;&gt; On Sun, Sep 15, 2013 at 1:06 AM, David Montgomery &lt;
&gt;&gt; davidmontgom...@gmail.com&gt; wrote:
&gt;&gt;
&gt;&gt;&gt; Hi,
&gt;&gt;&gt;
&gt;&gt;&gt; I am having a very difficult time installing riak on ec2.
&gt;&gt;&gt;
&gt;&gt;&gt; To start ...I cant get past using private ip address or private dns when
&gt;&gt;&gt; setting vm.args
&gt;&gt;&gt; -name riak@127.0.0.1
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; root@ip-10-234-117-74:/home/ubuntu# hostname --fqdn
&gt;&gt;&gt; ip-10-234-117-74.eu-west-1.compute.internal
&gt;&gt;&gt;
&gt;&gt;&gt; riak start
&gt;&gt;&gt; riak ping
&gt;&gt;&gt; Node 'r...@ip-10-234-117-74.eu-west-1.compute.internal' not responding
&gt;&gt;&gt; to pings.
&gt;&gt;&gt;
&gt;&gt;&gt; When I use 127.0.0.1 and then I run riak start then works.
&gt;&gt;&gt;
&gt;&gt;&gt; riak start
&gt;&gt;&gt; root@ip-10-234-117-74:/etc/riak# riak ping
&gt;&gt;&gt; pong
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; I am using m1.large on ubuntu 12.04 and the latest version of riak
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; How does one get past this point?
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;
&gt;&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

