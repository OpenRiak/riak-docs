---
title: "Re: Python Driver Write Times"
description: ""
project: community
lastmod: 2010-11-28T10:27:29-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01641"
mailinglist_parent_id: "msg01637"
author_name: "Daniel Lindsley"
project_section: "mailinglistitem"
sent_date: 2010-11-28T10:27:29-08:00
---


You're using the HTTP interface, which is slower than the Protocal
Buffers interface. You should change your code from:

 riak\\_conn = RiakClient()
 bucket = riak\\_conn.bucket("peopledb")
 for i in range(1,1000000):
 try:
 new\\_obj = bucket.new("p" + str(i),MakePerson())
 new\\_obj.store(return\\_body=False)
 except Exception as e:
 print e

To:

 from riak import RiakPbcTransport

 riak\\_conn = RiakClient(port=8087, transport\\_class=riak.RiakPbcTransport)
 bucket = riak\\_conn.bucket("peopledb")
 for i in range(1,1000000):
 try:
 new\\_obj = bucket.new("p" + str(i),MakePerson())
 new\\_obj.store(return\\_body=False)
 except Exception as e:
 print e

In my testing, I saw a 200-300% speedup when switching to PB. As
previously suggested, you should also spin up two more Riak nodes
(making a cluster size of 3). See
https://wiki.basho.com/display/RIAK/Basic+Cluster+Setup, specifically
the "Add a Second Node to Your Cluster" section.


Daniel

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

