---
title: "Re: CorrugatedIron batch get?"
description: ""
project: community
lastmod: 2013-02-10T14:44:00-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg10080"
mailinglist_parent_id: "msg10079"
author_name: "Jeremiah Peschka"
project_section: "mailinglistitem"
sent_date: 2013-02-10T14:44:00-08:00
---


It's all there in the source. ;)

Responses inline

[1]:
https://github.com/DistributedNonsense/CorrugatedIron/blob/master/CorrugatedIron/Models/RiakObjectId.cs
[2]:
https://github.com/DistributedNonsense/CorrugatedIron/blob/master/CorrugatedIron.Tests.Live/RiakClientTests.cs#L62

---
Jeremiah Peschka - Founder, Brent Ozar Unlimited
MCITP: SQL Server 2008, MVP
Cloudera Certified Developer for Apache Hadoop


On Sun, Feb 10, 2013 at 2:28 PM, Kevin Burton wrote:

&gt; So for [2] what is a RiakObjectID? The name of the argument is bucket-key
&gt; pairs? But I am confused what is the constructor that takes an array of
&gt; strings that is labeled object id? No relation to RiakBucketKeyInput.
&gt;

RiakObjectId is nothing more than a wrapper around a Bucket/Key pair [1]
that are wired up for easy JSON conversion for Get operations.
RiakBucketKeyInput is a sub-class of RiakPhaseInput for MR operations.


&gt; \\*\\*\\*\\*
&gt;
&gt; \\*\\* \\*\\*
&gt;
&gt; I hadn’t even known about IRiakBatchClient. Now I am intrigued. From the
&gt; source it seems to mimic all of the calls to IRiakClient. How is the setup
&gt; different? When does the “batch” start?
&gt;

There are examples of IRiakBatchClient in the test suite [2]

&gt; \\*\\*\\*\\*
&gt;
&gt; \\*\\* \\*\\*
&gt;
&gt; This is kind of off-topic but I notice that there is a property public int
&gt; RetryCount { get; set; }. What is the default value? How does it work? Is
&gt; the whole batch retried or individual calls within the batch?
&gt;

RetryCount is related to the cluster config that you set up in app.config -
it's the number of retries before CorrugatedIron marks a node as dead.

&gt; \\*\\*\\*\\*
&gt;
&gt; \\*\\* \\*\\*
&gt;
&gt; \\*From:\\* riak-users [mailto:riak-users-boun...@lists.basho.com] \\*On Behalf
&gt; Of \\*Jeremiah Peschka
&gt; \\*Sent:\\* Sunday, February 10, 2013 4:05 PM
&gt; \\*To:\\* riak-users
&gt; \\*Subject:\\* Re: CorrugatedIron batch get?\\*\\*\\*\\*
&gt;
&gt; \\*\\* \\*\\*
&gt;
&gt; My guess is that you're referring to the method Put(IEnumerable
&gt; values) [1]. If that's the case, yes there's also a Get that accepts an
&gt; IEnumerable of RiakObjectID [2]. Riak doesn't support multi-get so CI is
&gt; just wrapping a bunch of Gets in the background for you. MapReduce might be
&gt; more effective here.\\*\\*\\*\\*
&gt;
&gt; \\*\\* \\*\\*
&gt;
&gt; If you're talking about the IRiakBatchClient interface [3], all actions of
&gt; RiakClient can be handled through IRiakBatchClient. Keep in mind that CI's
&gt; batch operations are just a wrapper around making a large number of calls
&gt; at once. Nothing about Batch() is atomic - if you need a Unit of Work
&gt; pattern you'll have to implement it yourself.\\*\\*\\*\\*
&gt;
&gt; \\*\\* \\*\\*
&gt;
&gt; [1]:
&gt; https://github.com/DistributedNonsense/CorrugatedIron/blob/master/CorrugatedIron/RiakClient.cs#L306
&gt; \\*\\*\\*\\*
&gt;
&gt; [2]:
&gt; https://github.com/DistributedNonsense/CorrugatedIron/blob/master/CorrugatedIron/RiakClient.cs#L191
&gt; \\*\\*\\*\\*
&gt;
&gt; [3]:
&gt; https://github.com/DistributedNonsense/CorrugatedIron/blob/master/CorrugatedIron/IRiakBatchClient.cs
&gt; \\*\\*\\*\\*
&gt;
&gt;
&gt; \\*\\*\\*\\*
&gt;
&gt; ---\\*\\*\\*\\*
&gt;
&gt; Jeremiah Peschka - Founder, Brent Ozar Unlimited\\*\\*\\*\\*
&gt;
&gt; MCITP: SQL Server 2008, MVP\\*\\*\\*\\*
&gt;
&gt; Cloudera Certified Developer for Apache Hadoop\\*\\*\\*\\*
&gt;
&gt; \\*\\* \\*\\*
&gt;
&gt; On Sun, Feb 10, 2013 at 1:32 PM, Kevin Burton 
&gt; wrote:\\*\\*\\*\\*
&gt;
&gt; Looking at the method calls I can see that there is a batch Put. Where I
&gt; can form a list of RiakObject s and do one put that writes all of the
&gt; objects to the database. Is there an equivalent “batch get”? Examples?
&gt; Thank you.\\*\\*\\*\\*
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com\\*\\*\\*\\*
&gt;
&gt; \\*\\* \\*\\*
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

