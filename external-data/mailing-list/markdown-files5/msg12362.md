---
title: "Node not leaving cluster"
description: ""
project: community
lastmod: 2013-09-24T12:35:06-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12362"
author_name: "David Greenstein"
project_section: "mailinglistitem"
sent_date: 2013-09-24T12:35:06-07:00
---



I'm performing a rolling upgrade to 1.4.2 (from 1.3.1). The first two nodes 
that I replaced left the cluster without an issue and the new nodes joined 
without an issue. Now, the next node seams to be in a state where it won't 
leave the cluster. The status is leaving but it has been pending for several 
hours. Perhaps it is due to the pending ownership handoff from ring\\_status that 
also doesn't seem to be completing. Any insight or help on how to "kickstart" 
the leave would be greatly appreciated!

Dave

[user@ip-10-0-1-12 user]# /db/riak/bin/riak-admin ring\\_status
================================== Claimant ===================================
Claimant: 'riak@10.0.1.10'
Status: up
Ring Ready: true

============================== Ownership Handoff ==============================
Owner: riak@10.0.1.12
Next Owner: riak@10.0.1.16

Index: 456719261665907161938651510223838443642478919680
 Waiting on: [riak\\_kv\\_vnode]
 Complete: [riak\\_pipe\\_vnode]

-------------------------------------------------------------------------------

============================== Unreachable Nodes ==============================
All nodes are up and reachable





[user@ip-10-0-1-12 user]# /db/riak/bin/riak-admin member\\_status
================================= Membership ==================================
Status Ring Pending Node
-------------------------------------------------------------------------------
leaving 14.1% 14.1% 'riak@10.0.1.15'
valid 14.1% 14.1% 'riak@10.0.1.10'
valid 14.1% 14.1% 'riak@10.0.1.11'
valid 17.2% 15.6% 'riak@10.0.1.12'
valid 12.5% 14.1% 'riak@10.0.1.16'
valid 14.1% 14.1% 'riak@10.0.1.17'
valid 14.1% 14.1% 'riak@10.0.1.18'
-------------------------------------------------------------------------------
Valid:6 / Leaving:1 / Exiting:0 / Joining:0 / Down:0




\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

