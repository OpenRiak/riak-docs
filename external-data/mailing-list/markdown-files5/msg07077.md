---
title: "Re: Link or Secondary Indexes?"
description: ""
project: community
lastmod: 2012-03-29T07:51:22-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07077"
mailinglist_parent_id: "msg07076"
author_name: "Kresten Krab Thorup"
project_section: "mailinglistitem"
sent_date: 2012-03-29T07:51:22-07:00
---


It all depends on how you use it. At scale, the number of disk accesses and 
round trips may be quite different from what you'd expect.

If you "usually" would want to follow the links, then you're probably better 
off denormalizing the data in Riak so you can get the information you need in 
fewer round trips and disk reads. I.e. embed the linked to information directly 
in your objects. 

Ive seen comments here on the list that links are bad if you expect more than 
~1000 per object, ... If you need them followed often then you only want max 10 
... Remember that each individual link-following is another disk read. 
Secondary indexing scales much better to large numbers, but has the drawback 
that a query hits 1/N of your vnodes (typically all machines). For many kinds 
of indexing riak\\_search is fundamentally a superior solution, but it has some 
operational drawbacks in recovery from node crashes.

So Either way, a de-normalized "document oriented" or "pre-cooked" data model 
will perform better. Then secondary indexing or links can be used for more 
infrequent ad-hoc queries.

Kresten

On Mar 29, 2012, at 16:29, "Buri Arslon"  wrote:

&gt; Hi,
&gt; 
&gt; While developing my pet project few questions came to my mind and I decided 
&gt; to consult with you.
&gt; 
&gt; Which of them are more effective for recording relationships: Link or 
&gt; Secondary Indexes?
&gt; 
&gt; 1. Friend relationships: like Facebook friends?
&gt; 2. Followed/follower relationships like in Twitter?
&gt; 3. Member/Club relationship like fanpage in Facebook?
&gt; 4. Like in Facebook?
&gt; 
&gt; Thanks,
&gt; -- buriwoy
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

