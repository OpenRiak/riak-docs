---
title: "Re: Large map reduce query"
description: ""
project: community
lastmod: 2013-03-25T21:46:48-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg10597"
mailinglist_parent_id: "msg10596"
author_name: "Matt Black"
project_section: "mailinglistitem"
sent_date: 2013-03-25T21:46:48-07:00
---


Hi John, thanks for the response.

In my case this is a nightly process which will be farming older data out
of Riak for analysis elsewhere. I can certainly run a few tests with the
M/R as it is, and with a more simple version which does sequential gets.
Which metrics should I be interested in when measuring this do you think?

Thanks
Matt


On 26 March 2013 15:35, John Caprice  wrote:

&gt; Matt,
&gt;
&gt; (I'll finish this response this time!)
&gt;
&gt; How often is this MapReduce query being run? Is the execution of this
&gt; MapReduce query done in a controlled manner (for instance, not initiated by
&gt; users of your application)?
&gt;
&gt; The actual use case of MapReduce queries are important in determining the
&gt; sensibility of using MapReduce. A MapReduce query that has the potential
&gt; to be executed at an untested frequency can cause unintended load on the
&gt; cluster. If the frequency of the MapReduce query is known, it can be
&gt; tested under production load to determine the overall affect it has on the
&gt; cluster.
&gt;
&gt; You can also test this against your second suggestion, combining multiple
&gt; MapReduce queries with successive / concurrent GETs to determine which
&gt; method is more efficient in your situation.
&gt;
&gt; Thanks,
&gt;
&gt; John Caprice
&gt;
&gt;
&gt; On Mon, Mar 25, 2013 at 9:28 PM, John Caprice  wrote:
&gt;
&gt;&gt; Matt,
&gt;&gt;
&gt;&gt;
&gt;&gt; How often is this MapReduce query being run? Is the execution of this
&gt;&gt; MapReduce query done in a controlled manner (for instance, not initiated by
&gt;&gt; users of your application)?
&gt;&gt;
&gt;&gt; The actual use case of MapReduce queries are important in determining
&gt;&gt;
&gt;&gt; Thanks,
&gt;&gt;
&gt;&gt; John Caprice
&gt;&gt;
&gt;&gt;
&gt;&gt; On Mon, Mar 25, 2013 at 9:17 PM, Matt Black wrote:
&gt;&gt;
&gt;&gt;&gt; Hi list,
&gt;&gt;&gt;
&gt;&gt;&gt; I have a non-trivial map reduce query which traverses links between
&gt;&gt;&gt; objects across several map phases, constructing a composite object enroute.
&gt;&gt;&gt; One of our links is one-to-many, so I use a reduce phase to flatten my set
&gt;&gt;&gt; of objects at the end.
&gt;&gt;&gt;
&gt;&gt;&gt; Would a query of this type be better done as a smaller M/R query to get
&gt;&gt;&gt; the base set of objects, and then multiple concurrent gets for the related
&gt;&gt;&gt; objects? Is it sensible to do map reduce jobs with many map and reduce
&gt;&gt;&gt; phases?
&gt;&gt;&gt;
&gt;&gt;&gt; I appreciate this question is somewhat open ended, but any input would
&gt;&gt;&gt; be welcome.
&gt;&gt;&gt;
&gt;&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

