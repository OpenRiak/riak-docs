---
title: "Re: Upgrade path 1.4.0"
description: ""
project: community
lastmod: 2013-07-10T04:46:31-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11449"
mailinglist_parent_id: "msg11448"
author_name: "Toby Corkindale"
project_section: "mailinglistitem"
sent_date: 2013-07-10T04:46:31-07:00
---


Yeah, I didn't think 1.4.0 was into final release yet either -- yet it came 
through on the Debian and Ubuntu apt repositories automatically this evening.

----- Original Message -----
From: "Guido Medina" 
To: "riak-users" 
Sent: Wednesday, 10 July, 2013 9:39:02 PM
Subject: Re: Upgrade path 1.4.0

Hi Toby,

I'm sure someone from Basho will answer soon, I just pointed you to the 
"release notes" direction. I have only overlooked the release notes 
until we decide to migrate to 1.4.0 when is final (Right now on rc1)

HTH,

Guido.

On 10/07/13 12:29, Toby Corkindale wrote:
&gt; Thanks Guido.
&gt;
&gt; Looks like we've upgraded to 1.4.0 completely now and the cluster is back up.
&gt;
&gt; I'm not sure of the exact root cause, but what we were seeing was that too 
&gt; many nodes went down for the ring to be healthy, and then when nodes were 
&gt; restarted they waited for the ring to appear for a while, and then exited (or 
&gt; crashed) automatically.
&gt;
&gt; I \\*think\\* this is because after the package was upgraded, the Riak service 
&gt; didn't restart after the upgrade -- and our automated system to catch that 
&gt; and restart them wasn't kicking in quickly enough compared to the rate at 
&gt; which the servers were being upgraded.
&gt;
&gt; You mention in the release notes that the init scripts have been adjusted - 
&gt; maybe that has something to do with it?
&gt;
&gt; Cheers,
&gt; Toby
&gt;
&gt; ----- Original Message -----
&gt; From: "Guido Medina" 
&gt; To: "riak-users" 
&gt; Sent: Wednesday, 10 July, 2013 9:05:16 PM
&gt; Subject: Re: Upgrade path 1.4.0
&gt;
&gt; Release notes: https://github.com/basho/riak/blob/1.4/RELEASE-NOTES.md
&gt;
&gt; Maybe related to this?
&gt; Known Issues
&gt; leveldb 1.3 to 1.4 conversion
&gt;
&gt;
&gt; The first execution of 1.4.0 leveldb using a 1.3.x or 1.2.x dataset will 
&gt; initiate an automatic conversion that could pause the startup of each node by 
&gt; 3 to 7 minutes. The leveldb data in "level #1" is being adjusted such that 
&gt; "level #1" can operate as an overlapped data level instead of as a sorted 
&gt; data level. The conversion is simply the reduction of the number of files in 
&gt; "level #1" to being less than eight via normal compaction of data from "level 
&gt; #1" into "level #2". This is a one time conversion.
&gt; HTH,
&gt;
&gt; Guido.
&gt;
&gt; On 10/07/13 11:57, Toby Corkindale wrote:
&gt;
&gt;
&gt;
&gt; Hi,
&gt; some of our nodes upgraded to Riak 1.4.0, and are now refusing to start and 
&gt; join the cluster.
&gt; Is there documentation on the upgrade path from 1.3.2 to 1.4.0? It appears we 
&gt; have accidentally begun this journey, and I don't know if it's easier to go 
&gt; back or forwards now..
&gt;
&gt; PS. It would have been pleasant to receive a warning about the new version on 
&gt; the mailing list!
&gt;
&gt; Thanks,
&gt; Toby
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list riak-users@lists.basho.com 
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com


\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

