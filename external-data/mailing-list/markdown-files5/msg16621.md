---
title: "Re: Is storing billions of small files a good Riak-CS/KV usecase?"
description: ""
project: community
lastmod: 2015-10-07T06:58:30-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16621"
mailinglist_parent_id: "msg16620"
author_name: "Daniel Abrahamsson"
project_section: "mailinglistitem"
sent_date: 2015-10-07T06:58:30-07:00
---


Hi David,

If you don't use any level-db specific features, you could switch to
bitcask and use its expiry\\_secs option to handle deletes. That way you
don't have to worry about deleting data at all. Note that older bitcask
versions (prior to Riak 2.0) had issues with deleting data which could make
deleted data re-appear.

When it comes to level-db and deletes, you should be aware that mass
deletion may cause level db compaction, which might put strain on your
cluster. I don't have enough experience with leveldb to give you any
details, though.

//Daniel

On Wed, Oct 7, 2015 at 3:43 PM, David Heidt  wrote:

&gt;
&gt; Hi List,
&gt;
&gt; would you say that storing billions of very small (json) files is a good
&gt; usecase for riak kv or cs?
&gt;
&gt; here's what I would do:
&gt;
&gt; \\* create daily buckets ( i.e. 2015-10-07)
&gt; \\* up to 130 Million inserts per day
&gt; \\* about 150.000 read-ony accesses/day
&gt; \\* no updates on existing keys/files
&gt; \\* delete buckets (including keys/files) older than x days
&gt;
&gt;
&gt; I already have a working riak-kv/leveldb cluster (inserts and lookups are
&gt; going smoothly), but when it comes to mass deletion of keys I found no way
&gt; to do this.
&gt;
&gt;
&gt; Best,
&gt;
&gt; David
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

