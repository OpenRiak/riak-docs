---
title: "Re: Python library: Error with counters"
description: ""
project: community
lastmod: 2014-08-15T10:41:41-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14673"
mailinglist_parent_id: "msg14672"
author_name: "Luc Perkins"
project_section: "mailinglistitem"
sent_date: 2014-08-15T10:41:41-07:00
---


Alex,

Creating a bucket type does not also activate it. That is a separate step:

\\*riak-admin bucket-type activate likes\\*

If that returns \\*likes has been activated\\* or something along those lines,
then the bucket type is ready to be used.

Luc


On Fri, Aug 15, 2014 at 10:37 AM, Alex De la rosa 
wrote:

&gt; Hi Sean,
&gt;
&gt; I activated the bucket as follows:
&gt;
&gt;
&gt; riak-admin bucket-type create likes '{"props":{"datatype":"counter"}}'
&gt;
&gt; So in theory is good to go; seems I have version 2.0.3 installed instead
&gt; of 2.1.0rc1. It might be this. If I install it with your command, would I
&gt; have any compatibility issues once the final version is released?
&gt;
&gt; Thanks!
&gt; Alex
&gt;
&gt;
&gt; On Fri, Aug 15, 2014 at 7:07 PM, Sean Cribbs  wrote:
&gt;
&gt;&gt; Hi Alex,
&gt;&gt;
&gt;&gt; The published version is not a final release, so it won't be
&gt;&gt; automatically installed by pip. Try this: pip install riak==2.1.0rc1
&gt;&gt;
&gt;&gt; Also, did you activate your bucket-type using riak-admin? It won't be
&gt;&gt; usable until it's activated.
&gt;&gt;
&gt;&gt; On Fri, Aug 15, 2014 at 12:02 PM, Alex De la rosa
&gt;&gt;  wrote:
&gt;&gt; &gt; Hi, thanks for your suggestion, but I would prefer to use the official
&gt;&gt; &gt; packages, and for what I saw on the list some days ago, the new version
&gt;&gt; was
&gt;&gt; &gt; published, so I wonder why is not yet working.
&gt;&gt; &gt;
&gt;&gt; &gt; Thanks,
&gt;&gt; &gt; Alex
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt; On Fri, Aug 15, 2014 at 6:20 PM, tele  wrote:
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; Hi Alex,
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; Use the version from git and see if you get the same error:
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; git clone https://github.com/basho/riak-python-client.git
&gt;&gt; &gt;&gt; cd riak-python-client
&gt;&gt; &gt;&gt; python setup.py install
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; :tele
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; On Fri, 15 Aug 2014 18:12:09 +0200
&gt;&gt; &gt;&gt; Alex De la rosa  wrote:
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; &gt; Hi there,
&gt;&gt; &gt;&gt; &gt;
&gt;&gt; &gt;&gt; &gt; I created a "counter" bucket called "likes" with the following shell
&gt;&gt; &gt;&gt; &gt; script:
&gt;&gt; &gt;&gt; &gt;
&gt;&gt; &gt;&gt; &gt; riak-admin bucket-type create likes
&gt;&gt; '{"props":{"datatype":"counter"}}'
&gt;&gt; &gt;&gt; &gt;
&gt;&gt; &gt;&gt; &gt; When I try to follow the guide [
&gt;&gt; &gt;&gt; &gt; http://docs.basho.com/riak/2.0.0/dev/using/data-types ] to use this
&gt;&gt; &gt;&gt; &gt; bucket with Python, I found the following issue:
&gt;&gt; &gt;&gt; &gt;
&gt;&gt; &gt;&gt; &gt; Traceback (most recent call last):
&gt;&gt; &gt;&gt; &gt; File "x.py", line 17, in 
&gt;&gt; &gt;&gt; &gt; bucket = client.bucket\\_type('counter\\_bucket').bucket('likes')
&gt;&gt; &gt;&gt; &gt; AttributeError: 'RiakClient' object has no attribute 'bucket\\_type'
&gt;&gt; &gt;&gt; &gt;
&gt;&gt; &gt;&gt; &gt; Something wrong? Is a fresh install from "pip" so I thought the
&gt;&gt; Python
&gt;&gt; &gt;&gt; &gt; library would be in its last updated version?
&gt;&gt; &gt;&gt; &gt;
&gt;&gt; &gt;&gt; &gt; Thanks!
&gt;&gt; &gt;&gt; &gt; Alex
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; &gt; riak-users mailing list
&gt;&gt; &gt; riak-users@lists.basho.com
&gt;&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt; &gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; --
&gt;&gt; Sean Cribbs 
&gt;&gt; Software Engineer
&gt;&gt; Basho Technologies, Inc.
&gt;&gt; http://basho.com/
&gt;&gt;
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

