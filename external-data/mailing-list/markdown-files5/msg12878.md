---
title: "Re: LevelDB tuning questions."
description: ""
project: community
lastmod: 2013-11-07T10:09:26-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12878"
mailinglist_parent_id: "msg12877"
author_name: "Matthew Von-Maszewski"
project_section: "mailinglistitem"
sent_date: 2013-11-07T10:09:26-08:00
---


inserting replies in original text

On Nov 7, 2013, at 12:49 PM, kzhang  wrote:

&gt; Thanks again!
&gt; 
&gt; I have a few questions regarding the new spreadsheet.
&gt; 
&gt; 'percent reserved', in the spreadsheet, it is set at 10%, we should really
&gt; use 50%?
&gt; 
&gt; 'vnode count', it is 'vnode count per server'?
&gt; 
percent reserved and vnode count: there are two ways to populate the fields

 - set percent reserved in range of 50 to 75% (50 for small number of nodes 
&lt;10, 75 for &gt;10), 
 and set vnode count to your ring size divided by total number of nodes

 - set percent reserved to 10% 
 and set vnode count to your ring size divided by your worst case count of 
nodes after multiple server failures

The first way is the documented method. The second is what I have been using 
more recently.


&gt; E11 (max\\_open\\_file, with AAE), shows as a static value '10\\*4\\*1024\\*1024',
&gt; whereas D11(max\\_open\\_file calculations) is calculated as
&gt; (c11-10)\\*4\\*1024\\*1024, E11 looks a bit odd to me, should I use D11 instead?
&gt; 
No. AAE does not use your max\\_open\\_file count. It has a static allocation of 
10 to minimize impact.

&gt; I noticed 'avg value size' and 'avg key size' are missing from the new
&gt; compared to 1.2, is it intentional?
Yes. The two values in 1.2 were used to estimate overhead for bloom filters. 
Bloom filter sizes and accounting completely changed in 1.3. Made my life 
simpler.

&gt; 
&gt; Is the end goal to make:
&gt; working per vnode = ave for 2 write bufs + cache\\_size + max\\_open\\_files+20M
&gt; for LOG and for MANIFEST?
&gt; 
Yes. 

Side note: never mess with the write buffer min and max size … unless 
something is really, really wrong … or you have almost no RAM. There are 
several internal tunings based upon those assumed sizes.

&gt; Thanks,
&gt; 
&gt; Kathleen
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; --
&gt; View this message in context: 
&gt; http://riak-users.197444.n3.nabble.com/LevelDB-tuning-questions-tp4029246p4029719.html
&gt; Sent from the Riak Users mailing list archive at Nabble.com.
&gt; 
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com


\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

