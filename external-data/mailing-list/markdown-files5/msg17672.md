---
title: "Re: Seeking Backup solution for live nodes"
description: ""
project: community
lastmod: 2016-09-26T07:19:57-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17672"
mailinglist_parent_id: "msg17671"
author_name: "Outback Dingo"
project_section: "mailinglistitem"
sent_date: 2016-09-26T07:19:57-07:00
---


On Mon, Sep 26, 2016 at 10:13 AM, Matthew Von-Maszewski
 wrote:
&gt; Neither.
&gt;
&gt; The leveldb instance creates a snapshot of the current files and generates a
&gt; working MANIFEST to go with them. That means the snapshot is in “ready to
&gt; run” condition. This is based upon hard links for the .sst table files.
&gt;
&gt; The user can then choose to copy that snapshot elsewhere, point a backup
&gt; tool at it, and/or just leave it there for the five snapshot rotation.
&gt;
&gt; One line cron job can kick off the snapshot.
&gt;
&gt; Similar to using mySql hot backup. You have the system generate the backup
&gt; data, then you decide how to manage / store it.
&gt;
&gt; Matthew
&gt;
&gt;
&gt; On Sep 26, 2016, at 10:07 AM, DeadZen  wrote:
&gt;
&gt; there a backup tool that uses this yet? or is this meant more to be used
&gt; with snapshots provided through xfs/zfs?
&gt;
&gt; On Monday, September 26, 2016, Matthew Von-Maszewski 
&gt; wrote:
&gt;&gt;
&gt;&gt; Here are notes on the new hot backup:
&gt;&gt;
&gt;&gt; https://github.com/basho/leveldb/wiki/mv-hot-backup
&gt;&gt;
&gt;&gt; This sound like what you need?
&gt;&gt;
&gt;&gt; Matthew
&gt;&gt;
&gt;&gt; Sent from my iPad
&gt;&gt;
&gt;&gt; &gt; On Sep 26, 2016, at 5:39 AM, Niels Christian Sorensen
&gt;&gt; &gt;  wrote:
&gt;&gt; &gt;
&gt;&gt; &gt; Hi,
&gt;&gt; &gt;
&gt;&gt; &gt; We use Riak-kv Enterprise Edition as base for Riak CS to store files in.
&gt;&gt; &gt; Each customer has a separate bucket in the cluster(s) and all data is 
&gt;&gt; &gt; stored
&gt;&gt; &gt; multi site in 3 copies. Thus the "i lost a node" situation is fully 
&gt;&gt; &gt; covered.
&gt;&gt; &gt;
&gt;&gt; &gt; I need however, a solution for providing customers with a "single
&gt;&gt; &gt; instance" backup of their data.
&gt;&gt; &gt;
&gt;&gt; &gt; I am aware of the possibility of tar, cp, scp, what-ever-copy of the
&gt;&gt; &gt; data - but this require me to take system off-line according to this:
&gt;&gt; &gt;
&gt;&gt; &gt; https://docs.basho.com/riak/kv/2.1.4/using/cluster-operations/backing-up/
&gt;&gt; &gt;
&gt;&gt; &gt; Also I would still have to restore all customers data (and all involved
&gt;&gt; &gt; nodes) - this is not trivial!
&gt;&gt; &gt;
&gt;&gt; &gt; Also I realize that the "riak-admin backup" is deprecated and should be
&gt;&gt; &gt; avoided - It seemed like an easy solution to my problem but....
&gt;&gt; &gt;
&gt;&gt; &gt; The s3cmd will allow me to pull out the data and I could most likely
&gt;&gt; &gt; write a fantastic automatic script based system to use this - I do not have
&gt;&gt; &gt; the time for that and are therefor looking for a commercial or "pre-build -
&gt;&gt; &gt; adjustable" solution that will allow me to pull out a single copy of all
&gt;&gt; &gt; data stored in a bucket and keep it elsewhere.
&gt;&gt; &gt;
&gt;&gt; &gt; Any ideas / solutions / quotes (as external consultant) on a solution to
&gt;&gt; &gt; this problem?
&gt;&gt; &gt;
&gt;&gt; &gt; A plan for recovery is obviously also needed ;-)
&gt;&gt; &gt;

also note that there are S3 capable backup tools such as restic and
rclone ...... maybe simpler to have clients use them. Id steer away
from s3cmd.



&gt;&gt; &gt; Thanks in advance
&gt;&gt; &gt;
&gt;&gt; &gt; /Christian
&gt;&gt; &gt;
&gt;&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; &gt; riak-users mailing list
&gt;&gt; &gt; riak-users@lists.basho.com
&gt;&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

