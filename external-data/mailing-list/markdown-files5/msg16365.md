---
title: "Monitoring protobuffs and CPU usage on a Riak KV cluster"
description: ""
project: community
lastmod: 2015-08-05T16:18:06-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16365"
author_name: "Matthew Brender"
project_section: "mailinglistitem"
sent_date: 2015-08-05T16:18:06-07:00
---


Hey all, I'm practicing what I preach and asking a question to others
here. A community member pinged me with a couple questions:

"I'm looking into an issue with Riak on our test environment (we
basically let devs spin up a copy of our prod stack on a giant box in
ec2).

We've gotten some complaints that riak seems to be using a lot of CPU,
even when "nothing" is happening (something is always happening with
the # of apps and services on the box, even when no one is poking it).

Is there a way to turn on an "access" log, so I could see what
requests are being made against riak, to try and correlate with? It
would have to be able to tell me about pbuffs usage, not just http."

Could anyone help with these questions. I see a couple separate ones:

1. How to monitor what is causing higher CPU usage on a Riak cluster
2. How to view an access log of protobuff and http requests, or just
the \\*most helpful\\* counters for them

I know a ton of statistics are visible [1] through riak-admin, but I'd
like to hear what others recommend in particular.

[1] http://docs.basho.com/riak/latest/ops/running/stats-and-monitoring/

Thanks,

Matt Brender | Developer Advocacy Lead
Basho Technologies
t: @mjbrender

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

