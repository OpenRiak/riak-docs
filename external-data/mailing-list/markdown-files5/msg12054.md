---
title: "Re: Yokozuna 0.8.0 release on omnios - no Yokozuna, no Riak Control"
description: ""
project: community
lastmod: 2013-08-15T14:34:01-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12054"
mailinglist_parent_id: "msg12052"
author_name: "Chris Meiklejohn"
project_section: "mailinglistitem"
sent_date: 2013-08-15T14:34:01-07:00
---


It appears that Yokozuna is failing to start because it can't resolve the
local host name. Can you verify that /etc/hosts looks correct, and that
you have nameservers properly configured on that host?

- Chris


On Thu, Aug 15, 2013 at 2:05 PM, Dave Martorana  wrote:

&gt; Hi Chris,
&gt;
&gt; After waiting for about 5 minutes, this is the entirety of the output. I
&gt; never do get a console prompt (I tried hitting enter, etc.)
&gt;
&gt; riak% bin/riak console
&gt; Node 'riak@127.0.0.1' not responding to pings.
&gt; config is OK
&gt; Exec: /riak/riak/rel/riak/bin/../erts-5.9.2/bin/erlexec -boot
&gt; /riak/riak/rel/riak/bin/../releases/1.4.0/riak -config
&gt; /riak/riak/rel/riak/bin/../etc/app.config -pa
&gt; /riak/riak/rel/riak/bin/../lib/basho-patches -args\\_file
&gt; /riak/riak/rel/riak/bin/../etc/vm.args -- console
&gt; Root: /riak/riak/rel/riak/bin/..
&gt; Erlang R15B02 (erts-5.9.2) [source] [64-bit] [smp:1:1] [async-threads:64]
&gt; [kernel-poll:true]
&gt;
&gt;
&gt; So, I hit ctrl-c and printed the proc info, and found the following:
&gt;
&gt; Message queue: [{#Port&lt;0.7016&gt;,{data,"Error: Exception thrown by the agent
&gt; "}},{#Port&lt;0.7016&gt;,{data,": java.net.MalformedURLException: Local host name
&gt; unknown: java.net.UnknownHostException: riak: riak: node name or service
&gt; name not
&gt; known"}},{#Port&lt;0.7016&gt;,{data,"\\n"}},{#Port&lt;0.7016&gt;,{exit\\_status,1}},{'EXIT',#Port&lt;0.7016&gt;,normal}]
&gt;
&gt; So, maybe finally I have a clue. "Local host name unknown"? "hostname"
&gt; returns "riak"...
&gt;
&gt; Dave
&gt;
&gt;
&gt;
&gt;
&gt; On Thu, Aug 15, 2013 at 4:09 PM, Chris Meiklejohn 
&gt; wrote:
&gt;
&gt;&gt; Hi Dave,
&gt;&gt;
&gt;&gt; I just built Yokozuna 0.8.0 from the packages available, and noticed some
&gt;&gt; behavior which might be related. Because the Yokozuna OTP application
&gt;&gt; starts before Riak Control and it's dependencies, there is a short period
&gt;&gt; where Riak Control will be unavailable. Can you try the following:
&gt;&gt;
&gt;&gt; 1. Start riak via 'riak console'.
&gt;&gt; 2. Wait until you see the something similar to the following:
&gt;&gt; '13:06:08.553 [info] Application riak\\_control started on node '
&gt;&gt; dev1@127.0.0.1'
&gt;&gt; 3. Try accessing Riak Control.
&gt;&gt;
&gt;&gt; - Chris
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; On Wed, Aug 14, 2013 at 4:02 PM, Dave Martorana wrote:
&gt;&gt;
&gt;&gt;&gt; Also, not that this makes any difference, but I noticed that
&gt;&gt;&gt; http://localhost:8098/stats when in master has a "disks" entry in the
&gt;&gt;&gt; dictionary while the 0.8.0 Yokozuna build is missing that dictionary entry
&gt;&gt;&gt; from stats. Other than that, everything looks similar.
&gt;&gt;&gt;
&gt;&gt;&gt; Dave
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; On Wed, Aug 14, 2013 at 6:58 PM, Dave Martorana wrote:
&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Here is my build (make) log
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; https://gist.github.com/themartorana/6e9f8e49a50b70f56333
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; and "make rel" log
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; https://gist.github.com/themartorana/13dcb72306c9ab880c9f
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; using the 0.8.0 .tar.gz download of Yokozuna.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Thanks,
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Dave
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; On Wed, Aug 14, 2013 at 6:54 PM, Dave Martorana wrote:
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Hi Chris,
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; I've built from the "official" Yokozuna 0.8.0 download, as well
&gt;&gt;&gt;&gt;&gt; as rz-yz-merge-1.4.0 and rz-yz-merge-master branches off of the riak repo.
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; When I build from master, Riak Control works fine.
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Thanks!
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Dave
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; On Wed, Aug 14, 2013 at 6:52 PM, Christopher Meiklejohn &lt;
&gt;&gt;&gt;&gt;&gt; cmeiklej...@basho.com&gt; wrote:
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt; Hi Dave,
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt; Can you provide the tag, or SHA, that you've built Riak from?
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt; - Chris
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt; --
&gt;&gt;&gt;&gt;&gt;&gt; Christopher Meiklejohn
&gt;&gt;&gt;&gt;&gt;&gt; Software Engineer
&gt;&gt;&gt;&gt;&gt;&gt; Basho Technologies, Inc.
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt; On Wednesday, August 14, 2013 at 3:45 PM, Dave Martorana wrote:
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt; &gt; Hi all,
&gt;&gt;&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt;&gt;&gt; &gt; I have Riak building on omnios, with Erlang R15B02, and Oracle JDK
&gt;&gt;&gt;&gt;&gt;&gt; 1.7.0\\_25.
&gt;&gt;&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt;&gt;&gt; &gt; Everything appears to be building just fine. However... even though
&gt;&gt;&gt;&gt;&gt;&gt; I have Yokozuna and Riak Control enabled in my app.config, neither are 
&gt;&gt;&gt;&gt;&gt;&gt; able
&gt;&gt;&gt;&gt;&gt;&gt; to be used or - it seems - start up. I can confirm that kv is working 
&gt;&gt;&gt;&gt;&gt;&gt; fine.
&gt;&gt;&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt;&gt;&gt; &gt; app.config:
&gt;&gt;&gt;&gt;&gt;&gt; https://gist.github.com/themartorana/eb503f1d7fca798fc6c3
&gt;&gt;&gt;&gt;&gt;&gt; &gt; console.log:
&gt;&gt;&gt;&gt;&gt;&gt; https://gist.github.com/themartorana/7c517c0ba5549c35540a
&gt;&gt;&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt;&gt;&gt; &gt; Oddly, console.log doesn't show any mention of Riak Control. It
&gt;&gt;&gt;&gt;&gt;&gt; does show the startup line for Solr at the end. However, the webapp only
&gt;&gt;&gt;&gt;&gt;&gt; has the following links:
&gt;&gt;&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt;&gt;&gt; &gt; riak\\_kv\\_wm\\_buckets
&gt;&gt;&gt;&gt;&gt;&gt; &gt; riak\\_kv\\_wm\\_buckets
&gt;&gt;&gt;&gt;&gt;&gt; &gt; riak\\_kv\\_wm\\_counter
&gt;&gt;&gt;&gt;&gt;&gt; &gt; riak\\_kv\\_wm\\_index
&gt;&gt;&gt;&gt;&gt;&gt; &gt; riak\\_kv\\_wm\\_keylist
&gt;&gt;&gt;&gt;&gt;&gt; &gt; riak\\_kv\\_wm\\_link\\_walker
&gt;&gt;&gt;&gt;&gt;&gt; &gt; riak\\_kv\\_wm\\_link\\_walker
&gt;&gt;&gt;&gt;&gt;&gt; &gt; riak\\_kv\\_wm\\_mapred
&gt;&gt;&gt;&gt;&gt;&gt; &gt; riak\\_kv\\_wm\\_object
&gt;&gt;&gt;&gt;&gt;&gt; &gt; riak\\_kv\\_wm\\_object
&gt;&gt;&gt;&gt;&gt;&gt; &gt; riak\\_kv\\_wm\\_ping
&gt;&gt;&gt;&gt;&gt;&gt; &gt; riak\\_kv\\_wm\\_props
&gt;&gt;&gt;&gt;&gt;&gt; &gt; riak\\_kv\\_wm\\_stats
&gt;&gt;&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt;&gt;&gt; &gt; There is no admin/control, and no yz. Any attempt to link to /yz/\\*
&gt;&gt;&gt;&gt;&gt;&gt; or /admin results in a 404.
&gt;&gt;&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt;&gt;&gt; &gt; I'm at a bit of a loss. There is nothing in error.log or crash.log.
&gt;&gt;&gt;&gt;&gt;&gt; yokozuna.jar builds fine. Riak Control appears to be built fine.
&gt;&gt;&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt;&gt;&gt; &gt; Any thoughts?
&gt;&gt;&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt;&gt;&gt; &gt; Cheers,
&gt;&gt;&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt;&gt;&gt; &gt; Dave
&gt;&gt;&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt;&gt;&gt; &gt; P.S. - I have also built the git rz-yz-merge-1.4.0 branch of the
&gt;&gt;&gt;&gt;&gt;&gt; riak repo on github just to be sure. Same result. Building Riak from 
&gt;&gt;&gt;&gt;&gt;&gt; master
&gt;&gt;&gt;&gt;&gt;&gt; - while obviously not having Yokozuna - does have Riak Control enabled.
&gt;&gt;&gt;&gt;&gt;&gt; Thanks!
&gt;&gt;&gt;&gt;&gt;&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt;&gt;&gt;&gt;&gt; &gt; riak-users mailing list
&gt;&gt;&gt;&gt;&gt;&gt; &gt; riak-users@lists.basho.com (mailto:riak-users@lists.basho.com)
&gt;&gt;&gt;&gt;&gt;&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

