---
title: "Re: Yokozuna and Spatial Search"
description: ""
project: community
lastmod: 2013-09-08T17:39:32-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12208"
mailinglist_parent_id: "msg12207"
author_name: "Ryan Zezeski"
project_section: "mailinglistitem"
sent_date: 2013-09-08T17:39:32-07:00
---


Vincenzo,

I replied on the GitHub issue.

-Z


On Sun, Sep 8, 2013 at 8:23 AM, Vincenzo Vitale
wrote:

&gt; I got it working with this change to the default conf:
&gt; https://github.com/basho/yokozuna/pull/169
&gt;
&gt; Before doing this, I first tried creating my own schema but put was
&gt; hanging.
&gt;
&gt;
&gt; V.
&gt;
&gt;
&gt; On Sun, Sep 8, 2013 at 3:56 AM, Vincenzo Vitale  &gt; wrote:
&gt;
&gt;&gt; Hi,
&gt;&gt;
&gt;&gt; I'm trying to make SpatialSearch in my application working with Yokozuna.
&gt;&gt; (develop branch, hash 601560bf9ea0859e598957c13733fbbb0e656e17 of the 6th
&gt;&gt; september)
&gt;&gt;
&gt;&gt; The json object looks like this:
&gt;&gt;
&gt;&gt;
&gt;&gt; {"where":{"latitude":7430019,"longitude":4210023,"geolocation\\_p":"7.430019,4.210023"},"timestamp":"2013-09-08T01:10:07.752Z"}
&gt;&gt;
&gt;&gt; since there is already a dynamic field for \\*\\_p defined.
&gt;&gt;
&gt;&gt; But the query:
&gt;&gt;
&gt;&gt; http://127.0.0.1:8093/solr/my-index/select?q=\\*:\\*&fq={!geofilt}&spatial=true&pt=7.430019%2C4.210023&sfield=where\\_geolocation\\_p&d=1
&gt;&gt;
&gt;&gt; returns the error:
&gt;&gt; can not use FieldCache on multivalued field:
&gt;&gt; where\\_geolocation\\_p\\_0\\_coordinate
&gt;&gt;
&gt;&gt;
&gt;&gt; Looking at this:
&gt;&gt;
&gt;&gt; http://stackoverflow.com/questions/7068605/solr-spatial-search-can-not-use-fieldcache-on-multivalued-field
&gt;&gt;
&gt;&gt; it seems the problem is the missing parameter and the dynamic field
&gt;&gt; declaration for \\*\\_coordinates in the configuration file.
&gt;&gt;
&gt;&gt; Is this the cause of the problem?
&gt;&gt;
&gt;&gt; The \\_yz\\_default.xml files in the data directory seems overwritten every
&gt;&gt; time riak is restarted, is there a way to customize the solr configuration
&gt;&gt; per bucket?
&gt;&gt;
&gt;&gt;
&gt;&gt; Thanks in advance,
&gt;&gt; Vincenzo.
&gt;&gt;
&gt;&gt;
&gt;&gt; --
&gt;&gt; If your e-mail inbox is out of control, check out
&gt;&gt; http://sanebox.com/t/mmzve. I love it.
&gt;&gt;
&gt;
&gt;
&gt;
&gt; --
&gt; If your e-mail inbox is out of control, check out
&gt; http://sanebox.com/t/mmzve. I love it.
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

