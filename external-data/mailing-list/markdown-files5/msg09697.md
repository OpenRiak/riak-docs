---
title: "Re: strange behavior upgrading from riak-java-client 1.0.5 -> 1.0.6"
description: ""
project: community
lastmod: 2012-12-28T10:28:44-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg09697"
mailinglist_parent_id: "msg09680"
author_name: "Brian Roach"
project_section: "mailinglistitem"
sent_date: 2012-12-28T10:28:44-08:00
---


Dietrich -

I haven't seen this in testing or have had anyone report this; could I
get some more info?

What operations are timing out like this? Is that the complete message
in the riak error.log? Which version of Riak are you running?

Do you see this simply dropping in the 1.0.6 client to your existing
application, or is this after changing your code to use the new
'withoutFetch()' ?

Thanks,
Brian Roach

On Wed, Dec 26, 2012 at 7:28 PM, Dietrich Featherston  wrote:
&gt; I had rolled out an upgrade to a JVM app that uses rjc 1.0.5. We had
&gt; upgraded to 1.0.6 to take advantage of newly added abilities to do a
&gt; put without preceding it with a fetch in order to reduce operational
&gt; load on the cluster. However, after rolling out this change we
&gt; frequently see large rises in latency across the cluster (up to the
&gt; gen\\_fsm limit of 60s) and see the following in the riak logs
&gt;
&gt; [error] Unrecognized message {74392380,{error,timeout}}
&gt;
&gt; This is accompanied by repeated socket timeouts as seen by the 
&gt; riak-java-client.
&gt;
&gt; Also worth mentioning, one of our nodes got into a state that the rjc
&gt; was unable to establish a tcp connection on the protobuf port to riak
&gt; on localhost. We were only able to fix this by restarting the riak
&gt; process on that node and inducing a fair amount of handoff.
&gt;
&gt; Any thoughts?
&gt;
&gt; Thanks,
&gt; D
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

