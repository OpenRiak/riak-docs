---
title: "Re: Riak startup failing."
description: ""
project: community
lastmod: 2012-12-28T18:55:28-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg09707"
mailinglist_parent_id: "msg09704"
author_name: "Eric Redmond"
project_section: "mailinglistitem"
sent_date: 2012-12-28T18:55:28-08:00
---


It's not documented well, but hopefully these more specific steps will help.

https://github.com/basho/basho\\_docs/issues/28

Eric

On Dec 28, 2012, at 12:57 PM, rkevinbur...@charter.net wrote:

&gt; I am trying to get a cluster going and I have successfully renamed all of the 
&gt; listening addresses and the names of the riak nodes but it appears that none 
&gt; of the node will start. I get the following error in console.log. Any idea 
&gt; what this means?
&gt; 
&gt; 2012-12-28 14:41:29.912 [info] &lt;0.7.0&gt; Application lager started on node 
&gt; 'riak@172.16.33.107'
&gt; 2012-12-28 14:41:30.048 [info] 
&gt; &lt;0.151.0&gt;@riak\\_core\\_ring\\_manager:reload\\_ring:226 Upgrading legacy ring
&gt; 2012-12-28 14:41:30.281 [error] &lt;0.164.0&gt; gen\\_server riak\\_core\\_capability 
&gt; terminated with reason: no function clause matching 
&gt; orddict:fetch('riak@172.16.33.107', []) line 72
&gt; 
&gt; The crash.log
&gt; 
&gt; 2012-12-28 14:41:30 =ERROR REPORT====
&gt; \\*\\* Generic server riak\\_core\\_capability terminating
&gt; \\*\\* Last message in was 
&gt; {register,{riak\\_core,vnode\\_routing},{capability,[proxy,legacy],legacy,{riak\\_core,legacy\\_vnode\\_routing,[{true,legacy},{false,proxy}]}}}
&gt; \\*\\* When Server state == {state,[],[],[],[]}
&gt; \\*\\* Reason for termination ==
&gt; \\*\\* 
&gt; {function\\_clause,[{orddict,fetch,['riak@172.16.33.107',[]],[{file,"orddict.erl"},{line,72}]},{riak\\_core\\_capability,renegotiate\\_capabilities,1,[{file,"src/riak\\_core\\_capability.erl"},{line,415}]},{riak\\_core\\_capability,handle\\_call,3,[{file,"src/riak\\_core\\_capability.erl"},{line,208}]},{gen\\_server,handle\\_msg,5,[{file,"gen\\_server.erl"},{line,588}]},{proc\\_lib,init\\_p\\_do\\_apply,3,[{file,"proc\\_lib.erl"},{line,227}]}]}
&gt; 
&gt; Erlang,log.1
&gt; 
&gt; =====
&gt; ===== LOGGING STARTED Fri Dec 28 14:41:28 CST 2012
&gt; =====
&gt; Exec: /usr/lib/riak/erts-5.9.1/bin/erlexec -boot 
&gt; /usr/lib/riak/releases/1.2.1/riak -embedded -config 
&gt; /etc/riak/app.config -pa /usr/lib/riak/lib/basho-patches 
&gt; -args\\_file /etc/riak/vm.args -- console
&gt; 
&gt; Root: /usr/lib/riak
&gt; 
&gt; Erlang R15B01 (erts-5.9.1) [source] [64-bit] [async-threads:64] 
&gt; [kernel-poll:true]
&gt; 
&gt; 
&gt; 
&gt; \\*\\* /usr/lib/riak/lib/basho-patches/etop\\_txt.beam hides 
&gt; /usr/lib/riak/lib/observer-1.1/ebin/etop\\_txt.beam
&gt; 
&gt; \\*\\* Found 1 name clashes in code paths
&gt; 
&gt; 14:41:29.912 [info] Application lager started on node 'riak@172.16.33.107'
&gt; 
&gt; 14:41:30.048 [info] Upgrading legacy ring
&gt; 
&gt; 14:41:30.281 [error] gen\\_server riak\\_core\\_capability terminated with reason: 
&gt; no function clause matching orddict:fetch('riak@172.16.33.107', []) line 72
&gt; 
&gt; /usr/lib/riak/lib/os\\_mon-2.2.9/priv/bin/memsup: Erlang has closed.
&gt; Erlang has closed
&gt; {"Kernel pid 
&gt; terminated",application\\_controller,"{application\\_start\\_failure,riak\\_core,{bad\\_return,{{riak\\_core\\_app,start,[normal,[]]},{'EXIT',{{function\\_clause,[{orddict,fetch,['riak@172.16.33.107',[]],[{file,[111,114,100,100,105,99,116,46,101,114,108]},{line,72}]},{riak\\_core\\_capability,renegotiate\\_capabilities,1,[{file,[115,114,99,47,114,105,97,107,95,99,111,114,101,95,99,97,112,97,98,105,108,105,116,121,46,101,114,108]},{line,415}]},{riak\\_core\\_capability,handle\\_call,3,[{file,[115,114,99,47,114,105,97,107,95,99,111,114,101,95,99,97,112,97,98,105,108,105,116,121,46,101,114,108]},{line,208}]},{gen\\_server,handle\\_msg,5,[{file,[103,101,110,95,115,101,114,118,101,114,46,101,114,108]},{line,588}]},{proc\\_lib,init\\_p\\_do\\_apply,3,[{file,[112,114,111,99,95,108,105,98,46,101,114,108]},{line,227}]}]},{gen\\_server,call,[riak\\_core\\_capability,{register,{riak\\_core,vnode\\_routing},{capability,[proxy,legacy],legacy,{riak\\_core,legacy\\_vnode\\_routing,[{true,legacy},{false,proxy}]}}},infinity]}}}}}}"}
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; Crash dump was written to: /var/log/riak/erl\\_crash.dump
&gt; 
&gt; 
&gt; Kernel pid terminated (application\\_controller) 
&gt; ({application\\_start\\_failure,riak\\_core,{bad\\_return,{{riak\\_core\\_app,start,[normal,[]]},{'EXIT',{{function\\_clause,[{orddict,fetch,['riak@172.16.33.107',[]
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

