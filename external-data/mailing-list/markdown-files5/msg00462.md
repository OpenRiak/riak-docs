---
title: "Re: Riak changing the first two bytes of data?"
description: ""
project: community
lastmod: 2010-05-28T15:09:05-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg00462"
mailinglist_parent_id: "msg00460"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2010-05-28T15:09:05-07:00
---


I just wanted to be sure you weren't inadvertently sending it as a text/\\* type. 

None of the characters in your byte array seem to be special ones, either. It 
doesn't seem too odd that your bytes have negative values (two's complement and 
all), but perhaps the HTTP client doesn't like them. Can you normalize them to 
positive bytes and see if it works?

Sean Cribbs 
Developer Advocate
Basho Technologies, Inc.
http://basho.com/

On May 28, 2010, at 5:58 PM, Sam Tingleff wrote:

&gt; Yeah, you're right... I'm sending as application/octet-stream. Is there some 
&gt; special handling depending on content-type?
&gt; 
&gt; On Fri, May 28, 2010 at 2:56 PM, Sean Cribbs  wrote:
&gt; It seems more than just the first two bytes are changed. What content-type 
&gt; are you sending the data as?
&gt; 
&gt; Sean Cribbs 
&gt; Developer Advocate
&gt; Basho Technologies, Inc.
&gt; http://basho.com/
&gt; 
&gt; On May 28, 2010, at 5:46 PM, Sam Tingleff wrote:
&gt; 
&gt; &gt;
&gt; &gt; It sounds crazy, I know.
&gt; &gt;
&gt; &gt; I'm using the Java client with riak 0.10.1-1. Sending a byte array seems to 
&gt; &gt; work if it is a UTF-8 encoded string. But if I send serialized object data, 
&gt; &gt; or just compressed bytes, the first two bytes seem to come back modified on 
&gt; &gt; read.
&gt; &gt;
&gt; &gt; From the debugger... Sending:
&gt; &gt; [31, -117, 8, 0, 0, 0, 0, 0, 0, 0, -53, 72, -51, -55, -55, 87, 72, 41, 77, 
&gt; &gt; 73, 5, 0, 108, 24, 72, 30, 10, 0, 0, 0]
&gt; &gt;
&gt; &gt; I get back:
&gt; &gt; [31, 63, 8, 0, 0, 0, 0, 0, 0, 0, -24, 72, -22, -125, -125, 87, 72, 41, 77, 
&gt; &gt; 73, 5, 0, 108, 24, 72, 30, 10, 0, 0, 0]
&gt; &gt;
&gt; &gt; What's going on? Thanks!
&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; 
&gt; 
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

