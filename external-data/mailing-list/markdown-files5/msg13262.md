---
title: "Re: Error 500 while creating admin user in Riak-CS"
description: ""
project: community
lastmod: 2013-12-17T06:32:42-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13262"
mailinglist_parent_id: "msg13258"
author_name: "Hector Castro"
project_section: "mailinglistitem"
sent_date: 2013-12-17T06:32:42-08:00
---


Hello Holger,

If you are modifying `cs\\_root\\_host` from the default, it must be set
to the fully qualified domain name (FQDN) of your Riak CS endpoint.
More details on this can be found in the Direct subsection of the
Proxy vs. Direct Riak CS documentation. [0]

If that doesn't resolve the issue, please send over the Riak, Riak CS,
and Stanchion app.config files and any associated log output.

--
Hector

[0] 
http://docs.basho.com/riakcs/latest/cookbooks/configuration/Configuring-Riak-CS/#Proxy-vs-Direct-Configuration

On Tue, Dec 17, 2013 at 6:22 AM, Holger Amberg  wrote:
&gt; Hi,
&gt;
&gt; i am trying to install riak-cs according to your cookbook but i am now stuck
&gt; at the admin user creation. I checked all config files, all ips do match
&gt; against each other. All services responding to ping requests. I have no idea
&gt; at the moment, maybe someone is able to assist me.
&gt;
&gt; cat /etc/riak-cs/app.config | grep anonymous
&gt; %% specifically dictates letting anonymous users to
&gt; {anonymous\\_user\\_creation, true},
&gt;
&gt; riak ping
&gt; pong
&gt; riak-cs ping
&gt; pong
&gt; stanchion ping
&gt; pong
&gt;
&gt; curl -v -H 'Content-Type: application/json' -X POST
&gt; http://\\*\\*\\*.22.\\*\\*\\*.70:8080/riak-cs/user --data
&gt; '{"email":"riakad...@storage.test.org“, "name":"admin"}'
&gt; \\* About to connect() to \\*\\*\\*.22.\\*\\*\\*.70 port 8080 (#0)
&gt; \\* Trying \\*\\*\\*.22.\\*\\*\\*.70...
&gt; \\* connected
&gt; \\* Connected to \\*\\*\\*.22.\\*\\*\\*.70 (\\*\\*\\*.22.\\*\\*\\*.70) port 8080 (#0)
&gt;&gt; POST /riak-cs/user HTTP/1.1
&gt;&gt; User-Agent: curl/7.26.0
&gt;&gt; Host: \\*\\*\\*.22.\\*\\*\\*.70:8080
&gt;&gt; Accept: \\*/\\*
&gt;&gt; Content-Type: application/json
&gt;&gt; Content-Length: 58
&gt;&gt;
&gt; \\* upload completely sent off: 58 out of 58 bytes
&gt; \\* additional stuff not fine transfer.c:1037: 0 0
&gt; \\* HTTP 1.1 or later with persistent connection, pipelining supported
&gt; &lt; HTTP/1.1 500 Internal Server Error
&gt; &lt; Vary: Accept
&gt; &lt; Server: Riak CS
&gt; &lt; Location: http://\\*\\*\\*.22.\\*\\*\\*.70:8080/riak-cs/user
&gt; &lt; Date: Tue, 17 Dec 2013 11:04:54 GMT
&gt; &lt; Content-Type: text/html
&gt; &lt; Content-Length: 170
&gt; &lt;
&gt; \\* Connection #0 to host \\*\\*\\*.22.\\*\\*\\*.70 left intact
&gt; 500 Internal Server
&gt; ErrorInternal Server Error
=====================

The server
&gt; encountered an error while processing this request\\* Closing
&gt; connection #0
&gt;
&gt; Error.log:
&gt;
&gt; 2013-12-17 12:12:02.160 [error] &lt;0.123.0&gt; Lager event handler
&gt; error\\_logger\\_lager\\_h exited with reason
&gt; {'EXIT',{{badmatch,["/riak-cs/user",{error,{error,function\\_clause,[{riak\\_cs\\_json,get,[{error,decode\\_failed},[{&lt;&lt;"name"&gt;&gt;,&lt;&lt;"email"&gt;&gt;}]],[{file,"src/riak\\_cs\\_json.erl"},{line,62}]},{riak\\_cs\\_wm\\_user,accept\\_json,2,[{file,"src/riak\\_cs\\_wm\\_user.erl"},{line,117}]},{webmachine\\_resource,resource\\_call,3,[{file,"src/webmachine\\_resource.erl"},{line,186}]},{webmachine\\_resource,do,3,[{file,"src/webmachine\\_resource.erl"},{line,142}]},{webmachine\\_decision\\_core,resource\\_call,1,[{file,"src/webmachine\\_decisio..."},...]},...]}},...]},…}}
&gt;
&gt; Thank you very much!
&gt;
&gt; --
&gt; Holger
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

