---
title: "Riak One partition handoff stall"
description: ""
project: community
lastmod: 2018-05-28T00:31:23-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg18542"
author_name: "Gaurav Sood"
project_section: "mailinglistitem"
sent_date: 2018-05-28T00:31:23-07:00
---


Hi All - Good Day!

I have a 7 Node Raik\\_KV cluster. Recently I have upgraded this cluster from
1.4.2 to 1.4.12 on Ubuntu 16.04. After upgrading the cluster whenever I
leave a node from cluster one partition hand off stalled every time &
Active transfers shows 'waiting to handoff 1 partitions", to complete this
process I need to reboot the riak service on all nodes one by one.

I am not sure if it's configuration problem. Here is the current state of
cluster.

\\*#output of riak-admin member-status\\*
================================= Membership
==================================
Status Ring Pending Node
-------------------------------------------------------------------------------
leaving 0.0% -- 'riak@192.168.2.10'
valid 14.1% -- 'riak@192.168.2.11'
valid 14.1% -- 'riak@192.168.2.12'
valid 15.6% -- 'riak@192.168.2.13'
valid 14.1% -- 'riak@192.168.2.14'
valid 14.1% -- 'riak@192.168.2.15'
valid 14.1% -- 'riak@192.168.2.16'
valid 14.1% -- 'riak@192.168.2.17'
-------------------------------------------------------------------------------
Valid:7 / Leaving:1 / Exiting:0 / Joining:0 / Down:0

\\*#output of riak-admin transfers\\*

'riak@192.168.2.10' waiting to handoff 1 partitions

Active Transfers:

(nothing here)


\\*#Output of riak-admin ring\\_status\\*
================================== Claimant
===================================
Claimant: 'riak@192.168.2.10'
Status: up
Ring Ready: true

============================== Ownership Handoff
==============================
No pending changes.

============================== Unreachable Nodes
==============================
All nodes are up and reachable

\\*current Transfer Limit is 2.\\*

Thanks
Gaurav
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

