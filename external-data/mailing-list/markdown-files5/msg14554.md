---
title: "Issues with high node load and very slow response"
description: ""
project: community
lastmod: 2014-07-26T20:56:23-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14554"
author_name: "Chaim Solomon"
project_section: "mailinglistitem"
sent_date: 2014-07-26T20:56:23-07:00
---


Hi,

I've been having issues for some days with the cluster I am running (or now
- trying to run). The last major operation was going through all items of a
bucket and doing a read/update operation on them from Python code - nothing
fancy, just modifying some data.

I got issues with one node being VERY busy - 2 CPUs fully loaded - and the
requests were timing out or at least VERY slow.
I took the node out of the cluster and added another node - then after
clearing the node brought it back. After some days of waiting for AAE and
the migration of data to finish, I am still having one node at 2 CPUs at
100% and one node with one CPU at 100% and the requests are still VERY
slow. I am getting a lot of these in the console.log:

2014-07-26 23:37:33.459 [error] &lt;0.7427.266&gt;@yz\\_kv:index:206 failed to
index object {&lt;&lt;"linkmeta"&gt;&gt;,&lt;&lt;"..."&gt;&gt;} with error {"Failed to index
docs",{error,req\\_timedout}} because
[{yz\\_solr,index,3,[{file,"src/yz\\_solr.erl"},{line,192}]},{yz\\_kv,index,7,[{file,"src/yz\\_kv.erl"},{line,258}]},{yz\\_kv,index,3,[{file,"src/yz\\_kv.erl"},{line,193}]},{riak\\_kv\\_vnode,actual\\_put,6,[{file,"src/riak\\_kv\\_vnode.erl"},{line,1416}]},{riak\\_kv\\_vnode,perform\\_put,3,[{file,"src/riak\\_kv\\_vnode.erl"},{line,1404}]},{riak\\_kv\\_vnode,do\\_put,7,[{file,"src/riak\\_kv\\_vnode.erl"},{line,1199}]},{riak\\_kv\\_vnode,handle\\_command,3,[{file,"src/riak\\_kv\\_vnode.erl"},{line,485}]},{riak\\_core\\_vnode,vnode\\_command,3,[{file,"src/riak\\_core\\_vnode.erl"},{line,345}]}]

And on almost all other nodex I am getting a lot of these:
2014-07-26 23:50:58.796 [info] &lt;0.12268.221&gt;@yz\\_kv:should\\_handoff:157
waiting for bucket types prefix and indexes to agree between '
riak@10.128.138.25' and 'riak@10.128.137.185'

How can I get the cluster to work again?

It is a 2.0.0rc1 cluster.

Chaim Solomon
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

