---
title: "Error creating bucket with LevelDB bucket-type"
description: ""
project: community
lastmod: 2016-12-15T05:47:46-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17808"
author_name: "Felipe Esteves"
project_section: "mailinglistitem"
sent_date: 2016-12-15T05:47:46-08:00
---


Hi,

I'm running some tests with riak-kv official container (riak
version 2.1.4), to create a leveldb backend bucket-type.

I'm following riak and python riak client documentation, as follow:

Riak conf has:

storage\\_backend = multi
multi\\_backend.bitcask\\_mult.storage\\_backend = bitcask
multi\\_backend.bitcask\\_mult.bitcask.data\\_root = /var/lib/riak/bitcask\\_mult
multi\\_backend.leveldb\\_mult.storage\\_backend = leveldb
multi\\_backend.leveldb\\_mult.leveldb.data\\_root = /var/lib/riak/leveldb\\_mult
multi\\_backend.default = bitcask\\_mult

After riak start, I run:
riak-admin bucket-type create leveldb\\_backend
'{"props":{"backend":"leveldb"}}'
riak-admin bucket-type activate leveldb\\_backend

\\*riak-admin bucket-type status leveldb\\_backend\\*
\\*leveldb\\_backend is active\\*

\\*.....\\*

\\*backend: &lt;&lt;"leveldb"&gt;&gt;\\*
\\*.....\\*

\\*active: true\\*
\\*...\\*

In Python, I run:
myClient = riak.RiakClient(http\\_port=8098, protocol='http',
host='127.0.1.1')
myBucket = myClient.bucket('foo', bucket\\_type='leveldb\\_backend')
key1 = myBucket.new('barr', data='foobar')
key1.store()

However, I'm getting this error in riak:
2016-12-15 13:13:48.598 [error] &lt;0.1408.0&gt; gen\\_fsm &lt;0.1408.0&gt; in state
active terminated with reason: \\*no case clause matching {riak\\_kv\\_\\*
\\*multi\\_backend,undefined\\_backend,&lt;&lt;"leveldb"&gt;&gt;}\\* in
riak\\_core\\_vnode:vnode\\_command/3 line 346
2016-12-15 13:13:48.598 [error] &lt;0.1408.0&gt; CRASH REPORT Process &lt;0.1408.0&gt;
with 2 neighbours exited with reason: no case clause matchin
g {riak\\_kv\\_multi\\_backend,undefined\\_backend,&lt;&lt;"leveldb"&gt;&gt;} in
riak\\_core\\_vnode:vnode\\_command/3 line 346 in gen\\_fsm:terminate/7 line 622
2016-12-15 13:13:48.598 [error] &lt;0.165.0&gt; Supervisor riak\\_core\\_vnode\\_sup
had child undefined started with {riak\\_core\\_vnode,start\\_link,undefined} at
&lt;0.1408.0&gt; exit with reason no case clause matching
{riak\\_kv\\_multi\\_backend,undefined\\_backend,&lt;&lt;"leveldb"&gt;&gt;} in
riak\\_core\\_vnode:vnode\\_command/3 line 346 in context child\\_terminated

Am I missing some point in this configuration? Seems to me that I've
followed all the official docs but with no success.


Felipe Esteves

Tecnologia

felipe.este...@b2wdigital.com 

-- 

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

