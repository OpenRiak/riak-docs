---
title: "Re: [Help]Riak concurrency problem"
description: ""
project: community
lastmod: 2012-09-20T06:26:54-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08607"
mailinglist_parent_id: "msg08606"
author_name: "Douglas Muth"
project_section: "mailinglistitem"
sent_date: 2012-09-20T06:26:54-07:00
---


On Thu, Sep 20, 2012 at 1:06 AM, Hải Lưu Tuấn  wrote:
&gt;
&gt; If there are 2 (or more) threads use this function at a same time, it will
&gt; cause error. Assume that both thread A and thread B have retrieved the keys
&gt; list (use bucket.get\\_keys()), and thread A deleted all of the old passwords
&gt; in the bucket, then when thread B tried to execute:
&gt;
[snip]

It sounds like if you do it this way, you're going to run into
scalability issues down the road. (what happens when say, 10 users use
this function at the same time?)

Why not have a crontab (or a script daemonized with daemontools) run
this code every 5 minutes instead? It will completely sidestep the
current issue you're seeing, and should scale much better.

-- Doug

-- 
http://twitter.com/dmuth

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

