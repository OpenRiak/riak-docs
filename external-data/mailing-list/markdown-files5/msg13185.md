---
title: "Upgrade from 1.3.1 to 1.4.2 => high IO"
description: ""
project: community
lastmod: 2013-12-10T07:28:36-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13185"
author_name: "Simon Effenberg"
project_section: "mailinglistitem"
sent_date: 2013-12-10T07:28:36-08:00
---


Hi @list,

I'm trying to upgrade our Riak cluster from 1.3.1 to 1.4.2 .. after
upgrading the first node (out of 12) this node seems to do many merges.
the sst\\_\\* directories changes in size "rapidly" and the node is having
a disk utilization of 100% all the time.

I know that there is something like that:

"The first execution of 1.4.0 leveldb using a 1.3.x or 1.2.x dataset
will initiate an automatic conversion that could pause the startup of
each node by 3 to 7 minutes. The leveldb data in "level #1" is being
adjusted such that "level #1" can operate as an overlapped data level
instead of as a sorted data level. The conversion is simply the
reduction of the number of files in "level #1" to being less than eight
via normal compaction of data from "level #1" into "level #2". This is
a one time conversion."

but it looks much more invasive than explained here or doesn't have to
do anything with the (probably seen) merges.

Is this "normal" behavior or could I do anything about it?

At the moment I'm stucked with the upgrade procedure because this high
IO load would probably lead to high response times.

Also we have a lot of data (per node ~950 GB).

Cheers
Simon

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

