---
title: "Re: Cluster restarted and doesn’t respond	to queries"
description: ""
project: community
lastmod: 2013-12-23T10:43:04-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13328"
mailinglist_parent_id: "msg13326"
author_name: "Brian Sparrow"
project_section: "mailinglistitem"
sent_date: 2013-12-23T10:43:04-08:00
---


Just jumping in: 
 The issue is here: {&lt;&lt;"bitcask\\_mult"&gt;&gt;, riak\\_kv\\_bitcask\\_backend, [
 
{data\\_root, "./data/leveldb”}

The reason riak-admin test works is it uses the default backend in the case of 
multi-backend. Based on your config this is the eleveldb backend which already 
owns these directories and had no issue starting up. This should probably be 
checked during riak start as backend should \\*never\\* share a data\\_root.

If you wouldn’t mind making an issue against the riak repo with the details of 
your problem we can work out the best way to check this on startup.

The mitigation is to shut the node down, change the bitcask\\_mult data\\_root to 
the correct entry and restart.

Thanks! 

-- 
Brian Sparrow
Developer Advocate
Basho Technologies

Sent with Sparrow (http://www.sparrowmailapp.com/?sig)


On Monday, December 23, 2013 at 1:37 PM, Justin Lambert wrote:

&gt; Attached is my app.config. It is managed by puppet so I don’t think it 
&gt; changed at all. Again, this was just a Centos 6.4 -&gt; CentOS 6.5 upgrade - 
&gt; the riak package wasn’t touched at all.
&gt; 
&gt; Any thought as to why riak-admin test works but just getting a key with curl 
&gt; never returns?
&gt; 
&gt; 
&gt; On Mon, Dec 23, 2013 at 10:44 AM, Ryan Zezeski  (mailto:rzeze...@basho.com)&gt; wrote:
&gt; &gt; 
&gt; &gt; On Mon, Dec 23, 2013 at 12:35 PM, Justin Lambert  &gt; (mailto:jlamb...@letsevenup.com)&gt; wrote:
&gt; &gt; &gt; 
&gt; &gt; &gt; I do see some errors in the error.log, but the referenced directories 
&gt; &gt; &gt; don’t appear to exist: 
&gt; &gt; &gt; 2013-12-23 16:52:33.290 [error] 
&gt; &gt; &gt; &lt;0.1721.0&gt;@riak\\_kv\\_bitcask\\_backend:move\\_unused\\_dirs:607 Failed to move 
&gt; &gt; &gt; unused data directory 
&gt; &gt; &gt; "./data/leveldb/388211372416021087647853783690262677096107081728". 
&gt; &gt; &gt; Reason: eexist
&gt; &gt; &gt; 
&gt; &gt; 
&gt; &gt; This error is interesting. It is coming from the bitcask backend but trying 
&gt; &gt; to read a leveldb directory. My guess is something happened with your 
&gt; &gt; configuration when you upgraded. What does your app.config look like? 
&gt; &gt; 
&gt; &gt; -Z
&gt; 
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com (mailto:riak-users@lists.basho.com)
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; 
&gt; 
&gt; 
&gt; 
&gt; Attachments: 
&gt; - app.config
&gt; 


\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

