---
title: "Re: Solr indexes becomes broken after node replacement"
description: ""
project: community
lastmod: 2015-06-08T09:26:43-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16229"
mailinglist_parent_id: "msg16225"
author_name: "Alexander Popov"
project_section: "mailinglistitem"
sent_date: 2015-06-08T09:26:43-07:00
---


Does it require remove yz\\_anti\\_entropy directory on all nodes at same time?
Does it require to restart nodes?

On Mon, Jun 8, 2015 at 4:01 PM, Zeeshan Lakhani  wrote:

&gt; Hello Alexander,
&gt;
&gt; Can you send us the logs? I’d like to see the errors that occurred after
&gt; the time of the node name change.
&gt;
&gt; In terms of getting your data back into the indexes, I’d recommend letting
&gt; AAE handle the situation by removing the `yz\\_anti\\_entropy` directory and
&gt; letting the keys re-index. You can even remove the search index
&gt; directories, e.g.
&gt; https://github.com/basho/riak\\_test/blob/master/tests/yz\\_core\\_properties\\_create\\_unload.erl#L94,
&gt; and
&gt; let the them get recreated, which will still re-index via AAE.
&gt;
&gt; Nonetheless, we’d like to see the logs and try and reproduce the issue in
&gt; a test when the node name changes.
&gt;
&gt; Thanks.
&gt;
&gt; Zeeshan Lakhani
&gt; programmer |
&gt; software engineer at @basho
&gt;
&gt; On Jun 8, 2015, at 8:30 AM, Alexander Popov  wrote:
&gt;
&gt; I was perform all nodes upgrade in x6 nodes cluster
&gt; and at same time 4 of them was prooceed with node name changed by steps:
&gt;
&gt; http://docs.basho.com/riak/latest/ops/running/recovery/failed-node/#Node-Name-Changed
&gt;
&gt; after that search indexes becomes completely broken - many data missed,
&gt; returns different results on every requests.
&gt;
&gt; Does it have any options now except re-save entire data in bucket to fix
&gt; it?
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

