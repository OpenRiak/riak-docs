---
title: "Re: very slow write speed to riak-cs"
description: ""
project: community
lastmod: 2014-04-03T08:53:04-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13989"
mailinglist_parent_id: "msg13986"
author_name: "Anton Khalikov"
project_section: "mailinglistitem"
sent_date: 2014-04-03T08:53:04-07:00
---



Luke,

it would be quite difficult to connect directly to riak cs nodes because 
riak cs is set up to run in DMZ so it would take us to reconfigure the 
whole network. So let's assume you are right in your thinking and it is 
proxy (tengine) causing our problems. What would you recommend to use as 
a proxy instead? Original nginx? haproxy? May be specific version of them?


We decided to use tengine because of proxy\\_request\\_buffering feature 
which bypasses the original nginx behavior and allows it to pass PUT 
requests directly to backend nodes instead of buffering entire request 
body in a temp file before passing it to backend 
(http://wiki.nginx.org/HttpProxyModule). So tengine had twice as fast 
PUT performance comparing to nginx.


About pt\\_backlog value: got it, thank you.

--
Best regards
Anton Khalikov

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

