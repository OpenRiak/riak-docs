---
title: "Re: How many keys inside a bucket ?"
description: ""
project: community
lastmod: 2017-01-27T00:19:52-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17893"
mailinglist_parent_id: "msg17892"
author_name: "Alexander Sicular"
project_section: "mailinglistitem"
sent_date: 2017-01-27T00:19:52-08:00
---


Hello Alex,

As long as each bucket does not have its own properties but rather shares one 
or a handful of bucket types you should be fine and it wouldn't make a 
difference. 

One way to record data temporally, aka in a time series fashion, from a data 
model perspective is via a pattern called deterministic materialized keys. You 
basically record the sensor name (known id) and a base time at some granularity 
into the key name and push all data captured in that time frame into that key. 
This works well if you expect to record data at regular intervals. If, however, 
your data is sparse you'll need some additional model to know when you've 
recorded data. 

-Alexander 


@siculars
http://siculars.posthaven.com

Sent from my iRotaryPhone

&gt; On Jan 27, 2017, at 14:32, Alex Feng  wrote:
&gt; 
&gt; Hi Alexander,
&gt; 
&gt; Yes, I should consider the possibility of switching to Riak TS.
&gt; But I guess the question still valid, does it ? Should I divide millions of 
&gt; keys to different buckets, does it make any difference in performance, 
&gt; memory, space ?
&gt; 
&gt; 
&gt; Br,
&gt; Alex
&gt; 
&gt; 2017-01-27 2:50 GMT+01:00 Alexander Sicular :
&gt;&gt; Hi, you should consider using Riak TS for this use case.
&gt;&gt; 
&gt;&gt; -Alexander
&gt;&gt; 
&gt;&gt; 
&gt;&gt; @siculars
&gt;&gt; http://siculars.posthaven.com
&gt;&gt; 
&gt;&gt; Sent from my iRotaryPhone
&gt;&gt; 
&gt;&gt; &gt; On Jan 27, 2017, at 01:54, Alex Feng  wrote:
&gt;&gt; &gt;
&gt;&gt; &gt; Hi,
&gt;&gt; &gt;
&gt;&gt; &gt; I am wondering if there are some best practice or recommendation for how 
&gt;&gt; &gt; many keys inside a single bucket?
&gt;&gt; &gt;
&gt;&gt; &gt; Let's say I have some sensors reporting data every 5 seconds, I can put 
&gt;&gt; &gt; all these data under one single bucket, or I can dynamically generate a 
&gt;&gt; &gt; bucket every day.
&gt;&gt; &gt;
&gt;&gt; &gt; My question is, is there any performance difference for "insert", 
&gt;&gt; &gt; "query" etc. between them? for example, 1 million records under one 
&gt;&gt; &gt; bucket and 10k records under 100 buckets ?
&gt;&gt; &gt;
&gt;&gt; &gt; Thank you.
&gt;&gt; &gt;
&gt;&gt; &gt; Br,
&gt;&gt; &gt; Alex
&gt;&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; &gt; riak-users mailing list
&gt;&gt; &gt; riak-users@lists.basho.com
&gt;&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; 
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

