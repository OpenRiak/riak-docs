---
title: "Re: Java PB API: r-value exception"
description: ""
project: community
lastmod: 2012-07-23T10:17:44-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08034"
mailinglist_parent_id: "msg08032"
author_name: "Kaspar Thommen"
project_section: "mailinglistitem"
sent_date: 2012-07-23T10:17:44-07:00
---


Hi Brian,

Thanks for the clarification!

Kaspar
 On Jul 23, 2012 6:17 PM, "Brian Roach"  wrote:

&gt; Hi Kaspar,
&gt;
&gt; In your first example, you're trying to permanently change the bucket's r
&gt; parameter; createBucket() returns a WriteBucket which when executed writes
&gt; these values to Riak. We currently don't have support for this in the
&gt; protobuf API.
&gt;
&gt; In your DomainBucket example you're setting the r value for the individual
&gt; read operations (which is supported via PB), rather than bucket parameter
&gt; itself. It gets passed to the underlying StoreObject.
&gt;
&gt; Thanks,
&gt; Brian Roach
&gt;
&gt;
&gt; On Jul 21, 2012, at 6:45 AM, Kaspar Thommen wrote:
&gt;
&gt; &gt; Hi,
&gt; &gt;
&gt; &gt; I'm confused about the r-value when using the Java API. When I call:
&gt; &gt;
&gt; &gt; Bucket bucket =
&gt; RiakFactory.pbcClient().createBucket("myBucket").r(2).execute();
&gt; &gt;
&gt; &gt; I get the following exception:
&gt; &gt;
&gt; &gt; com.basho.riak.client.bucket.UnsupportedPropertyException: r not
&gt; supported for PB
&gt; &gt; at
&gt; com.basho.riak.client.bucket.WriteBucket.httpOnly(WriteBucket.java:539)
&gt; &gt; at com.basho.riak.client.bucket.WriteBucket.r(WriteBucket.java:332)
&gt; &gt;
&gt; &gt; However, when I run this:
&gt; &gt;
&gt; &gt; DomainBucket myDomainBucket =
&gt; DomainBucket.builder(RiakFactory.pbcClient().createBucket("myBucket").execute(),
&gt; MyDomainObject.class).r(2).build();
&gt; &gt;
&gt; &gt; and then later call any of the CRUT operations on that domain bucket I
&gt; get no exception. Why would I get it on the low-level Bucket API but not on
&gt; the high-level DomainBucket API?
&gt; &gt;
&gt; &gt; Thanks,
&gt; &gt; Kaspar
&gt; &gt;
&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

