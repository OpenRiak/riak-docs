---
title: "Re: Receiving ulimit warning despite setting it"
description: ""
project: community
lastmod: 2013-05-15T21:25:25-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11086"
mailinglist_parent_id: "msg11085"
author_name: "Jared Morrow"
project_section: "mailinglistitem"
sent_date: 2013-05-15T21:25:25-07:00
---


Well the riak-cs / riak / stanchion scripts all drop privileges using sudo.
 On RHEL/Centos this sudo exec carries the settings from the calling user
(in the case of init.d, root) so things are fine there. On Ubuntu/Debian
that does not always work. So if you set the ulimit for the root user, it
might not propagate through to the riak-cs / riak / stanchion users.

So to change that, you should try to change it in /etc/security/limits.conf.


Good luck.
-Jared



On Wed, May 15, 2013 at 9:54 PM, Toby Corkindale &lt;
toby.corkind...@strategicdata.com.au&gt; wrote:

&gt; I added some debugging to the /etc/init.d/riak-cs script.
&gt; As far as it's concerned the ulimit has been successfully increased in
&gt; there, right before it calls start-stop-daemon.
&gt;
&gt; Is it possible that part of the Debian infrastructure is dropping
&gt; privileges?
&gt;
&gt;
&gt; On 16/05/13 12:34, Toby Corkindale wrote:
&gt;
&gt;&gt; I'm confused -- I'm still seeing some warnings from Riak/RiakCS about
&gt;&gt; the ulimit being set too low, even though I \\*am\\* increasing it.
&gt;&gt;
&gt;&gt; What am I doing wrong here?
&gt;&gt;
&gt;&gt;
&gt;&gt; # cat /etc/default/riak-cs
&gt;&gt; ulimit -n 32000
&gt;&gt;
&gt;&gt; # ulimit -n 8192
&gt;&gt; # service riak-cs start
&gt;&gt; !!!!
&gt;&gt; !!!! WARNING: ulimit -n is 1024; 4096 is the recommended minimum.
&gt;&gt; !!!!
&gt;&gt;
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\*\\*\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/\\*\\*mailman/listinfo/riak-users\\_\\*\\*lists.basho.com
&gt;&gt;
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\*\\*\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/\\*\\*mailman/listinfo/riak-users\\_\\*\\*lists.basho.com
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

