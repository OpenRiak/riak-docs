---
title: "Re: failed get after successful put"
description: ""
project: community
lastmod: 2014-04-30T15:06:27-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14157"
mailinglist_parent_id: "msg14156"
author_name: "Oleksiy Krivoshey"
project_section: "mailinglistitem"
sent_date: 2014-04-30T15:06:27-07:00
---


The objects are really small (50 - 500 bytes).

It doesn't happen if the bucket was already created.
It also does't happen if I don't call SetBucket at all (so using default
backend and options).
And it seems it doesn't happen if I call SetBucket but don't set `backend`
property.



On 1 May 2014 00:51, Evan Vigil-McClanahan  wrote:

&gt; Does this continue if the bucket hasn't been created recently? Does
&gt; it matter how large the object is? Is it particularly large in this
&gt; case?
&gt;
&gt; On Wed, Apr 30, 2014 at 3:47 PM, Oleksiy Krivoshey 
&gt; wrote:
&gt; &gt; Hi guys,
&gt; &gt;
&gt; &gt; can someone please suggest what can be the reason for 'get' immediately
&gt; &gt; following successful 'put' to fail?
&gt; &gt;
&gt; &gt; I'm running a fully connected, healthy, 5 node Riak 2.0-beta1 cluster.
&gt; Using
&gt; &gt; a multiple backend feature, so the order of operations is:
&gt; &gt;
&gt; &gt; 1. 'SetBucket' for a new bucket with a backend name. Wait for successful
&gt; &gt; reply
&gt; &gt; 2. 'Put' object to bucket. Wait for successful reply (return\\_head: true,
&gt; so
&gt; &gt; I get clock, vtag, etc back)
&gt; &gt; 3. 'Get' object from step 2. Returns empty response (missing object)
&gt; &gt;
&gt; &gt; If I repeat 'Get' after just few moments - I will successfully retrieve
&gt; the
&gt; &gt; object.
&gt; &gt;
&gt; &gt; CAP options are all defaults (n: 3, etc). Happens with both custom
&gt; bitcask
&gt; &gt; and custom leveldb backends.
&gt; &gt;
&gt; &gt; There are no errors in riak logs, but a lot of the following:
&gt; &gt;
&gt; &gt; 2014-04-30 21:41:05.656 [info]
&gt; &gt; &lt;0.95.0&gt;@riak\\_core\\_sysmon\\_handler:handle\\_event:92 monitor large\\_heap
&gt; &gt; &lt;0.10689.74&gt;
&gt; &gt;
&gt; [{initial\\_call,{erlang,apply,2}},{almost\\_current\\_function,{eval\\_bits,expr\\_grp,4}},{message\\_queue\\_len,0}]
&gt; &gt;
&gt; [{old\\_heap\\_block\\_size,0},{heap\\_block\\_size,79467343},{mbuf\\_size,0},{stack\\_size,394},{old\\_heap\\_size,0},{heap\\_size,28858704}]
&gt; &gt;
&gt; &gt; --
&gt; &gt; Oleksiy
&gt; &gt;
&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; &gt;
&gt;



-- 
Oleksiy Krivoshey
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

