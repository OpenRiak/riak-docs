---
title: "Re: REST query returns JSON properties as strings?"
description: ""
project: community
lastmod: 2012-07-14T21:00:44-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07947"
mailinglist_parent_id: "msg07943"
author_name: "Gary Thomas"
project_section: "mailinglistitem"
sent_date: 2012-07-14T21:00:44-07:00
---


Thanks for the explanation Sean, will look closer at map/reduce.
I'm not sure how well it fits the Riak architecture, but when previously 
working with CouchDB+Lucene, the ability to pass "?include\\_docs=true" to 
retrieve the original JSON doc was mighty handy.

Best,
Gary




On Saturday, July 14, 2012 at 8:31 AM, Sean Cribbs wrote:

&gt; Hi (what's your name?),
&gt; 
&gt; What a search query returns to you is the "index document", or the result of 
&gt; transforming the input before adding it to the search indexes; this also 
&gt; means that deeply nested fields will be flattened. If you want the original, 
&gt; you can use MapReduce to retrieve the documents resulting from a search query.
&gt; 
&gt; On Fri, Jul 13, 2012 at 8:54 PM, 7zark7 &lt;7za...@gmail.com 
&gt; (mailto:7za...@gmail.com)&gt; wrote:
&gt; &gt; I would like to store JSON documents in a Riak 1.1.x bucket (using 
&gt; &gt; bitcask), and would like to search for them via REST using JSON property 
&gt; &gt; values.
&gt; &gt; 
&gt; &gt; E.g. JSON docs with typed properties like this: 
&gt; &gt; 
&gt; &gt; {
&gt; &gt; "type": "whatever",
&gt; &gt; "owner": 123456,
&gt; &gt; "text": "Blah blah blah",
&gt; &gt; "enabled": true
&gt; &gt; }
&gt; &gt; 
&gt; &gt; However, the query response (/solr/mybucket/select?q=enabled:true&wt=json) 
&gt; &gt; returns each doc's properties as JSON strings, and not the original JSON 
&gt; &gt; type:
&gt; &gt; 
&gt; &gt; {"responseHeader":{ 
&gt; &gt; "status":0,
&gt; &gt; "QTime":1,
&gt; &gt; "params":{
&gt; &gt; "q":"enabled:true",
&gt; &gt; "q.op":"or",
&gt; &gt; "filter":"",
&gt; &gt; "wt":"json"
&gt; &gt; }
&gt; &gt; },"response":{
&gt; &gt; "numFound":1,
&gt; &gt; "start":0,
&gt; &gt; "maxScore":"0.353553",
&gt; &gt; "docs":[
&gt; &gt; {
&gt; &gt; "id":"Obdoy3XbJe3kdh1T2bfxJgISCCL",
&gt; &gt; "index":"rest",
&gt; &gt; "fields":{
&gt; &gt; "enabled": "true",
&gt; &gt; "owner": "123456",
&gt; &gt; "text": "Blah blah blah",
&gt; &gt; "type": "whatever"
&gt; &gt; },
&gt; &gt; "props":{}
&gt; &gt; }
&gt; &gt; ]
&gt; &gt; }}
&gt; &gt; 
&gt; &gt; 
&gt; &gt; This makes the results unusable for me, and I'm concerned I'd have to fall 
&gt; &gt; back to N calls back to retrieve each original doc, which is not feasible. 
&gt; &gt; 
&gt; &gt; 
&gt; &gt; I'm used to CouchDB+Lucene which behaves "correctly" to me.
&gt; &gt; 
&gt; &gt; Is there some way to do what I'd like? E.g. another query method or option?
&gt; &gt; 
&gt; &gt; Thanks
&gt; &gt; 
&gt; &gt; 
&gt; &gt; 
&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com (mailto:riak-users@lists.basho.com)
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; &gt; 
&gt; 
&gt; 
&gt; 
&gt; -- 
&gt; Sean Cribbs 
&gt; Software Engineer
&gt; Basho Technologies, Inc.
&gt; http://basho.com/
&gt; 

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

