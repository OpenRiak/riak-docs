---
title: "Using Riak on systemd based Ubuntu"
description: ""
project: community
lastmod: 2015-09-30T16:26:21-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16576"
author_name: "Matthew Hall"
project_section: "mailinglistitem"
sent_date: 2015-09-30T16:26:21-07:00
---


Hello List,

Today I tried to get the following items to work in Ubuntu 15.04 Vivid with 
systemd based SysV compatibility to run the init scripts:

Riak 2.1.1
Stanchion 2.0.0
Riak CS 2.0.1
Riak CS Control 1.0.2

My app.config files are here for reference:

https://gist.github.com/megahall/676ca0410af4aacc4f74

When I attempted this, both Stanchion and Riak CS fail to stay running for the 
15 second expected time in the init scripts.

So I read through the "stanchion console" and "riak-cs console" output.

There were some backtraces there complaining about EACCES coming via mochiweb.

Upon modifying /usr/sbin/stanchion and /usr/sbin/riak-cs to add an strace -f 
to track the system calls, I determined that there is an EACCES error raised 
by attempting to bind some sub-process socket onto Port 80. It is hard to see 
what sub-thread or sub-process exactly was the cause.

This is very confusing because none of my configuration mentions Port 80 at 
all.

The configuration works OK in Ubuntu 14.10 without systemd. So now I am 
wondering if anybody has figured out how to get it to work right inside of 
systemd with some .service file examples and so on. It's really important for 
the project I am trying to get done.

Thanks,
Matthew.

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

