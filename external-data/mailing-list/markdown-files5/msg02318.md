---
title: "Re: Python client performance issue"
description: ""
project: community
lastmod: 2011-02-14T16:35:52-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02318"
mailinglist_parent_id: "msg02316"
author_name: "Mike Stoddart"
project_section: "mailinglistitem"
sent_date: 2011-02-14T16:35:52-08:00
---


Will do when I get time. Would the REST API be any faster?

Thanks
Mike

On Mon, Feb 14, 2011 at 7:01 PM, Thomas Burdick
 wrote:
&gt; I would highly recommend looking in to the cProfile and pstat module and
&gt; profile the code that is going slow. If your using the protocol buffer
&gt; client it could possibly be related to the fact that python protocol buffers
&gt; is extraordinarily slow and is well known to be slow. Profile until proven
&gt; guilty though.
&gt; Tom Burdick
&gt;
&gt; On Mon, Feb 14, 2011 at 7:09 AM, Mike Stoddart  wrote:
&gt;&gt;
&gt;&gt; I added some code to my system to test writing data into Riak. I'm
&gt;&gt; using the Python client library with protocol buffers. I'm writing a
&gt;&gt; snapshot of my current data, which is one json object containing on
&gt;&gt; average 60 individual json sub-objects. Each sub object contains about
&gt;&gt; 22 values.
&gt;&gt;
&gt;&gt;                # Archived entry. ts is a formatted timestamp.
&gt;&gt;                entry = self.\\_bucket.new(ts, data=data)
&gt;&gt;                entry.store()
&gt;&gt;
&gt;&gt;                # Now write the current entry.
&gt;&gt;                entry = self.\\_bucket.new("current", data=data)
&gt;&gt;                entry.store()
&gt;&gt;
&gt;&gt; I'm writing the same data twice; the archived copy and the current
&gt;&gt; copy, which I can easily retrieve later. Performance is lower than
&gt;&gt; expected; top is showing a constant cpu usage of 10-12%.
&gt;&gt;
&gt;&gt; I haven't decided to use Riak; this is to help me decide. But for now
&gt;&gt; are there any optimisations I can do here? A similiar test with
&gt;&gt; MongoDB shows a steady cpu usage of 1%. The cpu usages are for my
&gt;&gt; client, not Riak's own processes. The only differences in my test app
&gt;&gt; is the code that writes the data to the database. Otherwise all other
&gt;&gt; code is 100% the same between these two test apps.
&gt;&gt;
&gt;&gt; Any suggestions appreciated.
&gt;&gt; Thanks
&gt;&gt; Mike
&gt;&gt;
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

