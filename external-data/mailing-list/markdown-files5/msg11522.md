---
title: "Quickly deleting + recreating item in Riak deletes new item"
description: ""
project: community
lastmod: 2013-07-14T09:29:57-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11522"
author_name: "Matthew Dawson"
project_section: "mailinglistitem"
sent_date: 2013-07-14T09:29:57-07:00
---


Hello,

I've been playing around with Riak for a new app I'm building. I'm currently 
playing around with my own mini-cluster along with my test suite for the app. 
The Riak cluster is a four node cluster running across a laptop and a desktop 
(so two nodes per physical machine). I'm also running with the default 
setting for delete\\_mode, but I've tried both keep or immediate without any 
change for my problem.

In my test suite, at the end of every test I delete all the keys inside my 
Riak cluster (manually by listing keys then deleting them one by one). Also, 
some of my items share the same key name for testing. Usually this works just 
fine, and my tests all pass.

However, occasionally one of my newly created items disappears from the test 
clusters, and my test errors out complaining the object could not be found. 
This seems to happen especially often if a node has been stopped and started.

I'm pretty sure the system is successfully creating the item, so I'm wondering 
if this is expected behaviour from Riak, and if there some way for me to work 
around this.


Also, on another note I'm seeing read latencies from Riak of around 10-20ms 
per key. Is this typical? My write speeds seem to be significantly less then 
that.
-- 
Matthew

smime.p7s
Description: S/MIME cryptographic signature
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

