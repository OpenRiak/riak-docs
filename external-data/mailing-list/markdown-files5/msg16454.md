---
title: "Re: s3cmd error: access to bucket was denied"
description: ""
project: community
lastmod: 2015-08-24T06:49:20-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16454"
mailinglist_parent_id: "msg16442"
author_name: "changmao wang"
project_section: "mailinglistitem"
sent_date: 2015-08-24T06:49:20-07:00
---


I'm not sure who created it. This's a legacy production system.

Just now, I used another "s3cfg" file to access it. Below is my output:
root@cluster1-hd10:~# s3cmd -c s3cfg1 info
s3://stock/XSHE/0/000050/2008/XSHE-000050-20080102
s3://stock/XSHE/0/000050/2008/XSHE-000050-20080102 (object):
 File size: 397535
 Last mod: Thu, 05 Dec 2013 03:19:00 GMT
 MIME type: binary/octet-stream
 MD5 sum: feb2609ecfc9bb21549f2401a5c9477d
 ACL: stockwrite: FULL\\_CONTROL
 ACL: \\*anon\\*: READ
 URL:
http://stock.s3.amazonaws.com/XSHE/0/000050/2008/XSHE-000050-20080102
root@cluster1-hd10:~# s3cmd -c s3cfg1 ls
s3://stock/XSHE/0/000050/2008/XSHE-000050-20080102 -d
DEBUG: ConfigParser: Reading file 's3cfg1'
DEBUG: ConfigParser: access\\_key-&gt;TE...17\\_chars...0
DEBUG: ConfigParser: bucket\\_location-&gt;US
DEBUG: ConfigParser: cloudfront\\_host-&gt;cloudfront.amazonaws.com
DEBUG: ConfigParser: cloudfront\\_resource-&gt;/2010-07-15/distribution
DEBUG: ConfigParser: default\\_mime\\_type-&gt;binary/octet-stream
DEBUG: ConfigParser: delete\\_removed-&gt;False
DEBUG: ConfigParser: dry\\_run-&gt;False
DEBUG: ConfigParser: encoding-&gt;UTF-8
DEBUG: ConfigParser: encrypt-&gt;False
DEBUG: ConfigParser: follow\\_symlinks-&gt;False
DEBUG: ConfigParser: force-&gt;False
DEBUG: ConfigParser: get\\_continue-&gt;False
DEBUG: ConfigParser: gpg\\_command-&gt;/usr/bin/gpg
DEBUG: ConfigParser: gpg\\_decrypt-&gt;%(gpg\\_command)s -d --verbose
--no-use-agent --batch --yes --passphrase-fd %(passphrase\\_fd)s -o
%(output\\_file)s %(input\\_file)s
DEBUG: ConfigParser: gpg\\_encrypt-&gt;%(gpg\\_command)s -c --verbose
--no-use-agent --batch --yes --passphrase-fd %(passphrase\\_fd)s -o
%(output\\_file)s %(input\\_file)s
DEBUG: ConfigParser: gpg\\_passphrase-&gt;...-3\\_chars...
DEBUG: ConfigParser: guess\\_mime\\_type-&gt;True
DEBUG: ConfigParser: host\\_base-&gt;api2.cloud-datayes.com
DEBUG: ConfigParser: host\\_bucket-&gt;%(bucket)s.api2.cloud-datayes.com
DEBUG: ConfigParser: human\\_readable\\_sizes-&gt;False
DEBUG: ConfigParser: list\\_md5-&gt;False
DEBUG: ConfigParser: log\\_target\\_prefix-&gt;
DEBUG: ConfigParser: preserve\\_attrs-&gt;True
DEBUG: ConfigParser: progress\\_meter-&gt;True
DEBUG: ConfigParser: proxy\\_host-&gt;10.21.136.81
DEBUG: ConfigParser: proxy\\_port-&gt;8080
DEBUG: ConfigParser: recursive-&gt;False
DEBUG: ConfigParser: recv\\_chunk-&gt;4096
DEBUG: ConfigParser: reduced\\_redundancy-&gt;False
DEBUG: ConfigParser: secret\\_key-&gt;Hk...37\\_chars...=
DEBUG: ConfigParser: send\\_chunk-&gt;4096
DEBUG: ConfigParser: simpledb\\_host-&gt;sdb.amazonaws.com
DEBUG: ConfigParser: skip\\_existing-&gt;False
DEBUG: ConfigParser: socket\\_timeout-&gt;100
DEBUG: ConfigParser: urlencoding\\_mode-&gt;normal
DEBUG: ConfigParser: use\\_https-&gt;False
DEBUG: ConfigParser: verbosity-&gt;WARNING
DEBUG: Updating Config.Config encoding -&gt; UTF-8
DEBUG: Updating Config.Config follow\\_symlinks -&gt; False
DEBUG: Updating Config.Config verbosity -&gt; 10
DEBUG: Unicodising 'ls' using UTF-8
DEBUG: Unicodising 's3://stock/XSHE/0/000050/2008/XSHE-000050-20080102'
using UTF-8
DEBUG: Command: ls
DEBUG: Bucket 's3://stock':
DEBUG: String 'XSHE/0/000050/2008/XSHE-000050-20080102' encoded to
'XSHE/0/000050/2008/XSHE-000050-20080102'
DEBUG: SignHeaders: 'GET\\n\\n\\n\\nx-amz-date:Mon, 24 Aug 2015 01:36:01
+0000\\n/stock/'
DEBUG: CreateRequest: resource[uri]=/
DEBUG: SignHeaders: 'GET\\n\\n\\n\\nx-amz-date:Mon, 24 Aug 2015 01:36:01
+0000\\n/stock/'
DEBUG: Processing request, please wait...
DEBUG: get\\_hostname(stock): stock.api2.cloud-datayes.com
DEBUG: format\\_uri():
http://stock.api2.cloud-datayes.com/?prefix=XSHE/0/000050/2008/XSHE-000050-20080102&delimiter=/
WARNING: Retrying failed request:
/?prefix=XSHE/0/000050/2008/XSHE-000050-20080102&delimiter=/ ('')
WARNING: Waiting 3 sec...
DEBUG: SignHeaders: 'GET\\n\\n\\n\\nx-amz-date:Mon, 24 Aug 2015 01:37:05
+0000\\n/stock/'
DEBUG: Processing request, please wait...
DEBUG: get\\_hostname(stock): stock.api2.cloud-datayes.com
DEBUG: format\\_uri():
http://stock.api2.cloud-datayes.com/?prefix=XSHE/0/000050/2008/XSHE-000050-20080102&delimiter=/
WARNING: Retrying failed request:
/?prefix=XSHE/0/000050/2008/XSHE-000050-20080102&delimiter=/ ('')
WARNING: Waiting 6 sec...
....



On Mon, Aug 24, 2015 at 9:17 AM, Shunichi Shinohara  wrote:

&gt; The result of "s3cmd ls" (aka, GET Service API) indicates there
&gt; is no bucket with name "stock":
&gt;
&gt; &gt; root@cluster-s3-hd1:~# s3cmd ls
&gt; &gt; 2013-12-01 06:45 s3://test
&gt;
&gt; Have you created it?
&gt;
&gt; --
&gt; Shunichi Shinohara
&gt; Basho Japan KK
&gt;
&gt;
&gt; On Mon, Aug 24, 2015 at 10:14 AM, changmao wang 
&gt; wrote:
&gt; &gt; Shunichi,
&gt; &gt;
&gt; &gt; Thanks for your reply. Below is my command result:
&gt; &gt; root@cluster-s3-hd1:~# s3cmd ls
&gt; &gt; 2013-12-01 06:45 s3://test
&gt; &gt; root@cluster-s3-hd1:~# s3cmd info s3://stock
&gt; &gt; ERROR: Access to bucket 'stock' was denied
&gt; &gt; root@cluster-s3-hd1:~# s3cmd info s3://stock -d
&gt; &gt; DEBUG: ConfigParser: Reading file '/root/.s3cfg'
&gt; &gt; DEBUG: ConfigParser: access\\_key-&gt;M2...17\\_chars...K
&gt; &gt; DEBUG: ConfigParser: bucket\\_location-&gt;US
&gt; &gt; DEBUG: ConfigParser: cloudfront\\_host-&gt;cloudfront.amazonaws.com
&gt; &gt; DEBUG: ConfigParser: cloudfront\\_resource-&gt;/2010-07-15/distribution
&gt; &gt; DEBUG: ConfigParser: default\\_mime\\_type-&gt;binary/octet-stream
&gt; &gt; DEBUG: ConfigParser: delete\\_removed-&gt;False
&gt; &gt; DEBUG: ConfigParser: dry\\_run-&gt;False
&gt; &gt; DEBUG: ConfigParser: encoding-&gt;UTF-8
&gt; &gt; DEBUG: ConfigParser: encrypt-&gt;False
&gt; &gt; DEBUG: ConfigParser: follow\\_symlinks-&gt;False
&gt; &gt; DEBUG: ConfigParser: force-&gt;False
&gt; &gt; DEBUG: ConfigParser: get\\_continue-&gt;False
&gt; &gt; DEBUG: ConfigParser: gpg\\_command-&gt;/usr/bin/gpg
&gt; &gt; DEBUG: ConfigParser: gpg\\_decrypt-&gt;%(gpg\\_command)s -d --verbose
&gt; &gt; --no-use-agent --batch --yes --passphrase-fd %(passphrase\\_fd)s -o
&gt; &gt; %(output\\_file)s %(input\\_file)s
&gt; &gt; DEBUG: ConfigParser: gpg\\_encrypt-&gt;%(gpg\\_command)s -c --verbose
&gt; &gt; --no-use-agent --batch --yes --passphrase-fd %(passphrase\\_fd)s -o
&gt; &gt; %(output\\_file)s %(input\\_file)s
&gt; &gt; DEBUG: ConfigParser: gpg\\_passphrase-&gt;...-3\\_chars...
&gt; &gt; DEBUG: ConfigParser: guess\\_mime\\_type-&gt;True
&gt; &gt; DEBUG: ConfigParser: host\\_base-&gt;api2.cloud-datayes.com
&gt; &gt; DEBUG: ConfigParser: host\\_bucket-&gt;%(bucket)s.api2.cloud-datayes.com
&gt; &gt; DEBUG: ConfigParser: human\\_readable\\_sizes-&gt;False
&gt; &gt; DEBUG: ConfigParser: list\\_md5-&gt;False
&gt; &gt; DEBUG: ConfigParser: log\\_target\\_prefix-&gt;
&gt; &gt; DEBUG: ConfigParser: preserve\\_attrs-&gt;True
&gt; &gt; DEBUG: ConfigParser: progress\\_meter-&gt;True
&gt; &gt; DEBUG: ConfigParser: proxy\\_host-&gt;10.21.136.81
&gt; &gt; DEBUG: ConfigParser: proxy\\_port-&gt;8080
&gt; &gt; DEBUG: ConfigParser: recursive-&gt;False
&gt; &gt; DEBUG: ConfigParser: recv\\_chunk-&gt;4096
&gt; &gt; DEBUG: ConfigParser: reduced\\_redundancy-&gt;False
&gt; &gt; DEBUG: ConfigParser: secret\\_key-&gt;1u...37\\_chars...=
&gt; &gt; DEBUG: ConfigParser: send\\_chunk-&gt;4096
&gt; &gt; DEBUG: ConfigParser: simpledb\\_host-&gt;sdb.amazonaws.com
&gt; &gt; DEBUG: ConfigParser: skip\\_existing-&gt;False
&gt; &gt; DEBUG: ConfigParser: socket\\_timeout-&gt;10
&gt; &gt; DEBUG: ConfigParser: urlencoding\\_mode-&gt;normal
&gt; &gt; DEBUG: ConfigParser: use\\_https-&gt;False
&gt; &gt; DEBUG: ConfigParser: verbosity-&gt;WARNING
&gt; &gt; DEBUG: Updating Config.Config encoding -&gt; UTF-8
&gt; &gt; DEBUG: Updating Config.Config follow\\_symlinks -&gt; False
&gt; &gt; DEBUG: Updating Config.Config verbosity -&gt; 10
&gt; &gt; DEBUG: Unicodising 'info' using UTF-8
&gt; &gt; DEBUG: Unicodising 's3://stock' using UTF-8
&gt; &gt; DEBUG: Command: info
&gt; &gt; DEBUG: SignHeaders: 'GET\\n\\n\\n\\nx-amz-date:Mon, 24 Aug 2015 01:11:09
&gt; &gt; +0000\\n/stock/?location'
&gt; &gt; DEBUG: CreateRequest: resource[uri]=/?location
&gt; &gt; DEBUG: SignHeaders: 'GET\\n\\n\\n\\nx-amz-date:Mon, 24 Aug 2015 01:11:09
&gt; &gt; +0000\\n/stock/?location'
&gt; &gt; DEBUG: Processing request, please wait...
&gt; &gt; DEBUG: get\\_hostname(stock): stock.api2.cloud-datayes.com
&gt; &gt; DEBUG: format\\_uri(): http://stock.api2.cloud-datayes.com/?location
&gt; &gt; DEBUG: Response: {'status': 403, 'headers': {'date': 'Mon, 24 Aug 2015
&gt; &gt; 01:11:09 GMT', 'content-length': '160', 'content-type':
&gt; 'application/xml',
&gt; &gt; 'server': 'Riak CS'}, 'reason': 'Forbidden', 'data': 'xml version="1.0"
 &gt; encoding="UTF-8"?&gt;`AccessDenied`Access
&gt; &gt;
&gt; Denied/stock'}
&gt; &gt; DEBUG: S3Error: 403 (Forbidden)
&gt; &gt; DEBUG: HttpHeader: date: Mon, 24 Aug 2015 01:11:09 GMT
&gt; &gt; DEBUG: HttpHeader: content-length: 160
&gt; &gt; DEBUG: HttpHeader: content-type: application/xml
&gt; &gt; DEBUG: HttpHeader: server: Riak CS
&gt; &gt; DEBUG: ErrorXML: Code: 'AccessDenied'
&gt; &gt; DEBUG: ErrorXML: Message: 'Access Denied'
&gt; &gt; DEBUG: ErrorXML: Resource: '/stock'
&gt; &gt; DEBUG: ErrorXML: RequestId: None
&gt; &gt; ERROR: Access to bucket 'stock' was denied
&gt; &gt;
&gt; &gt; On Mon, Aug 24, 2015 at 9:04 AM, Shunichi Shinohara 
&gt; wrote:
&gt; &gt;&gt;
&gt; &gt;&gt; The error message in console.log shows no user with access\\_key in your
&gt; &gt;&gt; s3cfg.
&gt; &gt;&gt; Could you provide resutls following commands?
&gt; &gt;&gt;
&gt; &gt;&gt; - s3cmd ls
&gt; &gt;&gt; - s3cmd info s3://stock
&gt; &gt;&gt;
&gt; &gt;&gt; If error happens, debug print switch "-d" of s3cmd might help.
&gt; &gt;&gt;
&gt; &gt;&gt; [1]
&gt; &gt;&gt;
&gt; http://docs.basho.com/riakcs/latest/cookbooks/Account-Management/#Creating-a-User-Account
&gt; &gt;&gt;
&gt; &gt;&gt; --
&gt; &gt;&gt; Shunichi Shinohara
&gt; &gt;&gt; Basho Japan KK
&gt; &gt;&gt;
&gt; &gt;&gt;
&gt; &gt;&gt; On Fri, Aug 21, 2015 at 10:00 AM, changmao wang &lt;
&gt; wang.chang...@gmail.com&gt;
&gt; &gt;&gt; wrote:
&gt; &gt;&gt; &gt; Kazuhiro,
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt; Maybe that's not the key point. I'm using riak 1.4.2 and follow below
&gt; &gt;&gt; &gt; docs
&gt; &gt;&gt; &gt; to configure "s3cfg" file.
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;
&gt; http://docs.basho.com/riakcs/1.4.2/cookbooks/configuration/Configuring-an-S3-Client/#Sample-s3cmd-Configuration-File-for-Production-Use
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt; There's no "signature\\_v2" parameter in "s3cfg". However, I added this
&gt; &gt;&gt; &gt; parameter to "s3cfg" and tried again with same errors.
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt; On Thu, Aug 20, 2015 at 10:31 PM, Kazuhiro Suzuki 
&gt; wrote:
&gt; &gt;&gt; &gt;&gt;
&gt; &gt;&gt; &gt;&gt; Hi Changmao,
&gt; &gt;&gt; &gt;&gt;
&gt; &gt;&gt; &gt;&gt; It seems your s3cmd config should include 2 items:
&gt; &gt;&gt; &gt;&gt;
&gt; &gt;&gt; &gt;&gt; signature\\_v2 = True
&gt; &gt;&gt; &gt;&gt; host\\_base = api2.cloud-datayes.com
&gt; &gt;&gt; &gt;&gt;
&gt; &gt;&gt; &gt;&gt; Riak CS requires "signature\\_v2 = True" since Riak CS has not
&gt; supported
&gt; &gt;&gt; &gt;&gt; s3 authentication version 4 yet.
&gt; &gt;&gt; &gt;&gt; You can find a sample configuration of s3cmd here to interact with
&gt; Riak
&gt; &gt;&gt; &gt;&gt; CS
&gt; &gt;&gt; &gt;&gt; [1].
&gt; &gt;&gt; &gt;&gt;
&gt; &gt;&gt; &gt;&gt; [1]:
&gt; &gt;&gt; &gt;&gt;
&gt; &gt;&gt; &gt;&gt;
&gt; http://docs.basho.com/riakcs/2.0.1/cookbooks/configuration/Configuring-an-S3-Client/#Sample-s3cmd-Configuration-File-for-Production-Use
&gt; &gt;&gt; &gt;&gt;
&gt; &gt;&gt; &gt;&gt; Thanks,
&gt; &gt;&gt; &gt;&gt;
&gt; &gt;&gt; &gt;&gt; On Thu, Aug 20, 2015 at 7:44 PM, changmao wang
&gt; &gt;&gt; &gt;&gt; 
&gt; &gt;&gt; &gt;&gt; wrote:
&gt; &gt;&gt; &gt;&gt; &gt; Just now, I used "admin\\_key" and "admin\\_secret" from
&gt; &gt;&gt; &gt;&gt; &gt; /etc/riak-cs/app.config
&gt; &gt;&gt; &gt;&gt; &gt; to run "s3cmd -c s3-stock ls s3://stock/XSHE/0/000600"
&gt; &gt;&gt; &gt;&gt; &gt; and I got the below error:
&gt; &gt;&gt; &gt;&gt; &gt; ERROR: Access to bucket 'stock' was denied
&gt; &gt;&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;&gt; &gt; Below is abstract from "/var/log/riak-cs/console.log"
&gt; &gt;&gt; &gt;&gt; &gt; 2015-08-20 18:40:22.790 [debug]
&gt; &gt;&gt; &gt;&gt; &gt; &lt;0.28085.18&gt;@riak\\_cs\\_s3\\_auth:calculate\\_signature:129 STS:
&gt; &gt;&gt; &gt;&gt; &gt; ["GET","\\n",[],"\\n",[],"\\n","\\n",[["x-amz-date",":",&lt;&lt;"Thu, 20 Aug
&gt; &gt;&gt; &gt;&gt; &gt; 2015
&gt; &gt;&gt; &gt;&gt; &gt; 10:40:22 +0000"&gt;&gt;,"\\n"]],["/stock/",[]]]
&gt; &gt;&gt; &gt;&gt; &gt; 2015-08-20 18:40:32.861 [error]
&gt; &gt;&gt; &gt;&gt; &gt; &lt;0.28153.18&gt;@riak\\_cs\\_wm\\_common:maybe\\_create\\_user:223 Retrieval of
&gt; &gt;&gt; &gt;&gt; &gt; user
&gt; &gt;&gt; &gt;&gt; &gt; record for s3 failed. Reason: no\\_user\\_key
&gt; &gt;&gt; &gt;&gt; &gt; 2015-08-20 18:40:32.861 [debug]
&gt; &gt;&gt; &gt;&gt; &gt; &lt;0.28153.18&gt;@riak\\_cs\\_wm\\_common:post\\_authentication:452 No user key
&gt; &gt;&gt; &gt;&gt; &gt; 2015-08-20 18:40:32.969 [debug]
&gt; &gt;&gt; &gt;&gt; &gt; &lt;0.28189.18&gt;@riak\\_cs\\_get\\_fsm:prepare:406
&gt; &gt;&gt; &gt;&gt; &gt; Manifest:
&gt; &gt;&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;&gt; &gt;
&gt; {lfs\\_manifest\\_v3,3,1048576,{&lt;&lt;"pipeline"&gt;&gt;,&lt;&lt;100,97,116,97,121,101,115,47,112,105,112,101,108,105,110,101,47,100,97,116,97,47,114,101,112,111,114,116,47,115,122,47,83,90,48,48,50,49,55,53,67,78,47,50,48,49,48,95,50,48,49,48,45,48,52,45,50,52,95,229,133,172,229,143,184,231,171,160,231,168,139,239,188,136,50,48,49,48,229,185,180,52,230,156,136,239,188,137,46,80,68,70&gt;&gt;},[],"2013-12-16T23:01:12.000Z",&lt;&lt;192,71,150,153,181,181,77,61,186,41,100,32,5,91,197,166&gt;&gt;,255387,&lt;&lt;"application/pdf"&gt;&gt;,&lt;&lt;55,41,141,170,187,226,47,223,183,95,105,129,155,154,210,202&gt;&gt;,active,{1387,234872,598819},{1387,234872,918555},[],undefined,undefined,undefined,undefined,{acl\\_v2,{"pipelinewrite","ef38ca69e145a40c1f8378633994192dace4539339315e6b42d7d1e6e2d2de51","AVG2DHZ4UNUYFAZ8F4WR"},[{{"pipelinewrite","ef38ca69e145a40c1f8378633994192dace4539339315e6b42d7d1e6e2d2de51"},['FULL\\_CONTROL']},{'AllUsers',['READ']}],{1387,234872,598546}},[],undefined}
&gt; &gt;&gt; &gt;&gt; &gt; 2015-08-20 18:40:33.043 [debug]
&gt; &gt;&gt; &gt;&gt; &gt; &lt;0.28189.18&gt;@riak\\_cs\\_lfs\\_utils:range\\_blocks:118 InitialBlock: 0,
&gt; &gt;&gt; &gt;&gt; &gt; FinalBlock:
&gt; &gt;&gt; &gt;&gt; &gt; 0
&gt; &gt;&gt; &gt;&gt; &gt; 2015-08-20 18:40:33.043 [debug]
&gt; &gt;&gt; &gt;&gt; &gt; &lt;0.28189.18&gt;@riak\\_cs\\_lfs\\_utils:range\\_blocks:120 SkipInitial: 0,
&gt; &gt;&gt; &gt;&gt; &gt; KeepFinal:
&gt; &gt;&gt; &gt;&gt; &gt; 255387
&gt; &gt;&gt; &gt;&gt; &gt; 2015-08-20 18:40:33.050 [debug]
&gt; &gt;&gt; &gt;&gt; &gt; &lt;0.28189.18&gt;@riak\\_cs\\_get\\_fsm:waiting\\_continue\\_or\\_stop:229 Block
&gt; &gt;&gt; &gt;&gt; &gt; Servers:
&gt; &gt;&gt; &gt;&gt; &gt; [&lt;0.28191.18&gt;]
&gt; &gt;&gt; &gt;&gt; &gt; 2015-08-20 18:40:33.079 [debug]
&gt; &gt;&gt; &gt;&gt; &gt; &lt;0.28189.18&gt;@riak\\_cs\\_get\\_fsm:waiting\\_chunks:307 Retrieved block
&gt; &gt;&gt; &gt;&gt; &gt; {&lt;&lt;192,71,150,153,181,181,77,61,186,41,100,32,5,91,197,166&gt;&gt;,0}
&gt; &gt;&gt; &gt;&gt; &gt; 2015-08-20 18:40:33.079 [debug]
&gt; &gt;&gt; &gt;&gt; &gt; &lt;0.28189.18&gt;@riak\\_cs\\_get\\_fsm:perhaps\\_send\\_to\\_user:280 Returning
&gt; block
&gt; &gt;&gt; &gt;&gt; &gt; {&lt;&lt;192,71,150,153,181,181,77,61,186,41,100,32,5,91,197,166&gt;&gt;,0} to
&gt; &gt;&gt; &gt;&gt; &gt; client
&gt; &gt;&gt; &gt;&gt; &gt; 2015-08-20 18:40:38.218 [error]
&gt; &gt;&gt; &gt;&gt; &gt; &lt;0.28086.18&gt;@riak\\_cs\\_wm\\_common:maybe\\_create\\_user:223 Retrieval of
&gt; &gt;&gt; &gt;&gt; &gt; user
&gt; &gt;&gt; &gt;&gt; &gt; record for s3 failed. Reason: no\\_user\\_key
&gt; &gt;&gt; &gt;&gt; &gt; 2015-08-20 18:40:38.218 [debug]
&gt; &gt;&gt; &gt;&gt; &gt; &lt;0.28086.18&gt;@riak\\_cs\\_wm\\_common:post\\_authentication:452 No user key
&gt; &gt;&gt; &gt;&gt; &gt; 2015-08-20 18:40:38.226 [debug]
&gt; &gt;&gt; &gt;&gt; &gt; &lt;0.28210.18&gt;@riak\\_cs\\_get\\_fsm:prepare:406
&gt; &gt;&gt; &gt;&gt; &gt; Manifest:
&gt; &gt;&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;&gt; &gt;
&gt; {lfs\\_manifest\\_v3,3,1048576,{&lt;&lt;"pipeline"&gt;&gt;,&lt;&lt;100,97,116,97,121,101,115,47,112,105,112,101,108,105,110,101,47,100,97,116,97,47,114,101,112,111,114,116,47,115,104,47,83,72,54,48,48,55,53,48,67,78,47,50,48,48,55,95,50,48,48,55,45,49,49,45,50,49,95,230,177,159,228,184,173,232,141,175,228,184,154,229,133,179,228,186,142,73,66,69,95,53,232,141,175,229,147,129,232,142,183,229,190,151,228,186,140,230,156,159,228,184,180,229,186,138,230,137,185,230,150,135,231,154,132,229,133,172,229,145,138,229,143,138,233,163,142,233,153,169,230,143,144,231,164,186,46,112,100,102&gt;&gt;},[],"2013-12-15T09:04:48.000Z",&lt;&lt;201,247,249,158,95,22,64,242,161,118,253,64,120,187,205,105&gt;&gt;,89863,&lt;&lt;"application/pdf"&gt;&gt;,&lt;&lt;139,151,203,173,6,111,222,48,17,81,102,170,216,66,193,77&gt;&gt;,active,{1387,98288,545827},{1387,98288,618409},[],undefined,undefined,undefined,undefined,{acl\\_v2,{"pipelinewrite","ef38ca69e145a40c1f8378633994192dace4539339315e6b42d7d1e6e2d2de51","AVG2DHZ4UNUYFAZ8F4WR"},[{{"pipelinewrite","ef38ca69e145a40c1f8378633994192dace4539339315e6b42d7d1e6e2d2de51"},['FULL\\_CONTROL']},{'AllUsers',['READ']}],{1387,98288,545618}},[],undefined}
&gt; &gt;&gt; &gt;&gt; &gt; 2015-08-20 18:40:38.280 [debug]
&gt; &gt;&gt; &gt;&gt; &gt; &lt;0.28210.18&gt;@riak\\_cs\\_lfs\\_utils:range\\_blocks:118 InitialBlock: 0,
&gt; &gt;&gt; &gt;&gt; &gt; FinalBlock:
&gt; &gt;&gt; &gt;&gt; &gt; 0
&gt; &gt;&gt; &gt;&gt; &gt; 2015-08-20 18:40:38.280 [debug]
&gt; &gt;&gt; &gt;&gt; &gt; &lt;0.28210.18&gt;@riak\\_cs\\_lfs\\_utils:range\\_blocks:120 SkipInitial: 0,
&gt; &gt;&gt; &gt;&gt; &gt; KeepFinal:
&gt; &gt;&gt; &gt;&gt; &gt; 89863
&gt; &gt;&gt; &gt;&gt; &gt; 2015-08-20 18:40:38.280 [debug]
&gt; &gt;&gt; &gt;&gt; &gt; &lt;0.28210.18&gt;@riak\\_cs\\_get\\_fsm:waiting\\_continue\\_or\\_stop:229 Block
&gt; &gt;&gt; &gt;&gt; &gt; Servers:
&gt; &gt;&gt; &gt;&gt; &gt; [&lt;0.28212.18&gt;]
&gt; &gt;&gt; &gt;&gt; &gt; 2015-08-20 18:40:38.343 [debug]
&gt; &gt;&gt; &gt;&gt; &gt; &lt;0.28210.18&gt;@riak\\_cs\\_get\\_fsm:waiting\\_chunks:307 Retrieved block
&gt; &gt;&gt; &gt;&gt; &gt; {&lt;&lt;201,247,249,158,95,22,64,242,161,118,253,64,120,187,205,105&gt;&gt;,0}
&gt; &gt;&gt; &gt;&gt; &gt; 2015-08-20 18:40:38.344 [debug]
&gt; &gt;&gt; &gt;&gt; &gt; &lt;0.28210.18&gt;@riak\\_cs\\_get\\_fsm:perhaps\\_send\\_to\\_user:280 Returning
&gt; block
&gt; &gt;&gt; &gt;&gt; &gt; {&lt;&lt;201,247,249,158,95,22,64,242,161,118,253,64,120,187,205,105&gt;&gt;,0}
&gt; &gt;&gt; &gt;&gt; &gt; to
&gt; &gt;&gt; &gt;&gt; &gt; client
&gt; &gt;&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;&gt; &gt; On Thu, Aug 20, 2015 at 6:04 PM, Stanislav Vlasov
&gt; &gt;&gt; &gt;&gt; &gt; 
&gt; &gt;&gt; &gt;&gt; &gt; wrote:
&gt; &gt;&gt; &gt;&gt; &gt;&gt;
&gt; &gt;&gt; &gt;&gt; &gt;&gt; 2015-08-20 14:47 GMT+05:00 changmao wang  &gt;:
&gt; &gt;&gt; &gt;&gt; &gt;&gt;
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt; what's your meaning of domain name of /etc/riak-cs/app.config
&gt; and
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt; ~/.s3cfg?
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt; I guess it's cs\\_root\\_host parameter from /etc/riak-cs/app.config
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt; and
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt; host\\_base from '~/.s3cfg'.
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt; If so, there're same as "api2.cloud-datayes.com".
&gt; &gt;&gt; &gt;&gt; &gt;&gt;
&gt; &gt;&gt; &gt;&gt; &gt;&gt; Yes, is that i mean, but i see, it is not your case
&gt; &gt;&gt; &gt;&gt; &gt;&gt; Try to set {level, debug} in lager\\_file\\_backend section for
&gt; &gt;&gt; &gt;&gt; &gt;&gt; console.log.
&gt; &gt;&gt; &gt;&gt; &gt;&gt;
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt; However, I can not ping this host from localhost.
&gt; &gt;&gt; &gt;&gt; &gt;&gt;
&gt; &gt;&gt; &gt;&gt; &gt;&gt; It's ok, if you write proper proxy\\_host and proxy\\_port in .s3cfg
&gt; &gt;&gt; &gt;&gt; &gt;&gt;
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt; On Thu, Aug 20, 2015 at 5:23 PM, Stanislav Vlasov
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt; 
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt; wrote:
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt;
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; 2015-08-20 13:57 GMT+05:00 changmao wang
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; :
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt; somebody watching on this?
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt;
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; Do you set up same domain in riak-cs.conf and in .s3cfg?
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; I got such error in this case.
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt;
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt; On Wed, Aug 19, 2015 at 9:01 AM, changmao wang
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt; 
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt; wrote:
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt;
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; Matthew,
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt;
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; I used s3cmd --configure to generate ".s3cfg" config file
&gt; and
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; then
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; access
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; RIAK service by s3cmd.
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; The access\\_key and secret\\_key from ".s3cfg" is same as
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; admin\\_key
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; and
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; admin\\_secret from "/etc/riak-cs/app.config".
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt;
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; However, I got error as below using s3cmd to access one
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; bucket.
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt;
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; root@cluster-s3-hd1:~# s3cmd -c /root/.s3cfg ls
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; s3://pipeline/article/111.pdf
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; ERROR: Access to bucket 'pipeline' was denied
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt;
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; By the way, I used Riak and Riak-CS 1.4.2 on Ubuntu. Current
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; production
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; cluster is a legacy system without documents for co-workers.
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt;
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; Attached file is "s3cfg" generated by "s3cmd --configure".
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; --
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; Amao Wang
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; Best & Regards
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt; --
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt; Amao Wang
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt; Best & Regards
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt; riak-users mailing list
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt; riak-users@lists.basho.com
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt;
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt;
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt;
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; --
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; Stanislav
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt; --
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt; Amao Wang
&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt; Best & Regards
&gt; &gt;&gt; &gt;&gt; &gt;&gt;
&gt; &gt;&gt; &gt;&gt; &gt;&gt;
&gt; &gt;&gt; &gt;&gt; &gt;&gt;
&gt; &gt;&gt; &gt;&gt; &gt;&gt; --
&gt; &gt;&gt; &gt;&gt; &gt;&gt; Stanislav
&gt; &gt;&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;&gt; &gt; --
&gt; &gt;&gt; &gt;&gt; &gt; Amao Wang
&gt; &gt;&gt; &gt;&gt; &gt; Best & Regards
&gt; &gt;&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt;&gt; &gt;&gt; &gt; riak-users mailing list
&gt; &gt;&gt; &gt;&gt; &gt; riak-users@lists.basho.com
&gt; &gt;&gt; &gt;&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; &gt;&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;&gt;
&gt; &gt;&gt; &gt;&gt;
&gt; &gt;&gt; &gt;&gt;
&gt; &gt;&gt; &gt;&gt; --
&gt; &gt;&gt; &gt;&gt; Kazuhiro Suzuki | Basho Japan KK
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt; --
&gt; &gt;&gt; &gt; Amao Wang
&gt; &gt;&gt; &gt; Best & Regards
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt;&gt; &gt; riak-users mailing list
&gt; &gt;&gt; &gt; riak-users@lists.basho.com
&gt; &gt;&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; &gt;&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; --
&gt; &gt; Amao Wang
&gt; &gt; Best & Regards
&gt;



-- 
Amao Wang
Best & Regards
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

