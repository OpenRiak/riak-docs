---
title: "basho bench - custom value generator"
description: ""
project: community
lastmod: 2010-09-13T03:39:12-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01068"
author_name: "Joseph Lambert"
project_section: "mailinglistitem"
sent_date: 2010-09-13T03:39:12-07:00
---


Hi,

I'm trying to create a custom value generator for Basho Bench, but keep
getting this error:

escript: exception error: no match of right hand side value
 {error,
 {bad\\_return,
 {{basho\\_bench\\_app,start,[normal,[]]},
 {'EXIT',
 {{badmatch,{error,shutdown}},
 [{basho\\_bench\\_app,start,2},
 {application\\_master,start\\_it\\_old,4}]}}}}}
 in function basho\\_bench:main/1
 in call from escript:run/2
 in call from escript:start/1
 in call from init:start\\_it/1
 in call from init:start\\_em/1

=INFO REPORT==== 13-Sep-2010::18:21:50 ===
 application: basho\\_bench
 exited: {bad\\_return,{{basho\\_bench\\_app,start,[normal,[]]},
 {'EXIT',{{badmatch,{error,shutdown}},
 [{basho\\_bench\\_app,start,2},
 {application\\_master,start\\_it\\_old,4}]}}}}
 type: permanent

It seems to fail right when it calls erlang:apply() on the function, and
never seems to enter my custom function.

I have this in the basho bench config file:

{value\\_generator, {function, rpbc\\_thread\\_gen, new\\_thread, [{user\\_count,
10000}] } }.

Args is just passing in a tuple list, and my rpbc\\_thread\\_gen module looks
like this:

new\\_thread(Args) -&gt;
 fun() -&gt; do\\_new\\_thread(Args) end.

do\\_new\\_thread simply returns binary, but like I said, it never seems to
enter the new\\_thread() function.

I've also made sure to add my module to the modules list in the .app file
and all the example tests run fine.

I'm not sure what I am missing here, hopefully someone can point me in the
right direction.

Another question, is there anyway to pass the generated key to my custom
value generator, or do I also need to write a new driver as well?

Thanks!

- Joe Lambert

joseph.g.lamb...@gmail.com
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

