---
title: "Re: [Announcement] Riak 2.1 - Features & Release Notes"
description: ""
project: community
lastmod: 2015-04-16T20:22:09-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16022"
mailinglist_parent_id: "msg16020"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2015-04-16T20:22:09-07:00
---


Alex,

We require bucket types for the write-once feature for the same reason we
require them for datatypes or strong consistency: this is a property that
changing after data has been written could have undefined behavior. Making
there be an explicit creation/activation of the bucket-type ensures that
the behavior on the namespace created by the bucket-type never changes.
However, old or "default" buckets may be changed at any time -- meaning we
can't ensure safety of any property changes.

On Thu, Apr 16, 2015 at 3:50 PM, Alex De la rosa 
wrote:

&gt; "The write\\_once property is applied to a bucket type"... why only on
&gt; bucket types?
&gt;
&gt; ex: RIAK.bucket\\_type('my\\_type').bucket('my\\_bucket').get('my\\_key')
&gt;
&gt; Normally I use bucket types to use mutable data like Maps/Sets/Counters...
&gt; so I can update its contents (multiple writes) and when I have static data
&gt; I use a basic buckets:
&gt;
&gt; ex: RIAK.bucket('my\\_bucket').get('my\\_key')
&gt;
&gt; It makes much more sense to me to have write\\_once capabilities in this
&gt; kind of bucket that not in a bucket type bucket. I can imagine the use of a
&gt; bucket type just for indexing data in Solr and not change it... but I think
&gt; simple buckets would benefit of this feature even more.
&gt;
&gt; Thanks!
&gt; Alex
&gt;
&gt; On Thu, Apr 16, 2015 at 10:40 PM, Matthew Brender 
&gt; wrote:
&gt;
&gt;&gt; Riak 2.1 is available [1]! Let’s start with the most fun part.
&gt;&gt;
&gt;&gt;
&gt;&gt; ## New Feature
&gt;&gt; Riak 2.1 introduces the concept of “write once” buckets, buckets whose
&gt;&gt; entries are intended to be written exactly once, and never updated or
&gt;&gt; over-written. The write\\_once property is applied to a bucket type and
&gt;&gt; may only be set at bucket creation time. This allows Riak to avoid a
&gt;&gt; "read before write" for write\\_once buckets only. More information, as
&gt;&gt; always, is available in the docs [2]
&gt;&gt;
&gt;&gt;
&gt;&gt; ## Other updates
&gt;&gt; There are a number of GitHub Issues closed with the 2.1 release. Some
&gt;&gt; noteworthy updates:
&gt;&gt;
&gt;&gt; \\* A nice solution for a corner case that could result in data loss [3]
&gt;&gt; \\* A public API related to riak\\_core\\_ring\\_manager thanks to Darach Ennis!
&gt;&gt; [4]
&gt;&gt; \\* A JSON writer for a number of riak\\_admin commands - see commit for
&gt;&gt; details [5]
&gt;&gt; \\* Updates to Yokozuna (Riak’s Solr integration) that include
&gt;&gt; additional metrics thanks to Jon Anderson! [6]
&gt;&gt;
&gt;&gt; Be sure to see the full Release Notes here [7] and the Product Advisories
&gt;&gt; [8].
&gt;&gt;
&gt;&gt; ## Upgrading
&gt;&gt; Be sure to review documentation [7] before an upgrade. It’s worth
&gt;&gt; noting that all nodes in a cluster must be at 2.1 before you set the
&gt;&gt; write\\_once property on a bucket.
&gt;&gt;
&gt;&gt; It’s worth noting that there is a known issue with Yokozuna that
&gt;&gt; causes entry loss on AAE activity [9]. Please keep this in mind before
&gt;&gt; upgrading.
&gt;&gt;
&gt;&gt;
&gt;&gt; ## Feedback please
&gt;&gt; Do you have a use case where write\\_once could be helpful? Please reply
&gt;&gt; to me directly! I would love to learn about your environment and be
&gt;&gt; able to share more details with you.
&gt;&gt;
&gt;&gt; Thanks,
&gt;&gt; Matt
&gt;&gt; Developer Advocate
&gt;&gt; twitter.com/mjbrender
&gt;&gt;
&gt;&gt;
&gt;&gt; [1] http://docs.basho.com/riak/latest/downloads/
&gt;&gt; [2] http://docs.basho.com/riak/latest/dev/advanced/write-once
&gt;&gt; [3] https://github.com/basho/riak\\_kv/issues/679
&gt;&gt; [4] https://github.com/basho/riak\\_core/pull/716
&gt;&gt; [5]
&gt;&gt; https://github.com/basho/clique/commit/0560e7a135d9a1e77646384681ae88baf0cba31a
&gt;&gt; [6] https://github.com/basho/riak\\_kv/pull/855
&gt;&gt; [7] https://github.com/basho/riak/blob/develop/RELEASE-NOTES.md
&gt;&gt; [8] http://docs.basho.com/riak/latest/community/product-advisories/
&gt;&gt; [9] https://github.com/basho/yokozuna/issues/481
&gt;&gt; ᐧ
&gt;&gt;
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;


-- 
Sean Cribbs 
Technical Lead, Riak
Basho Technologies, Inc.
http://basho.com/
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

