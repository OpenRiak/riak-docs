---
title: "Re: What happens when a node goes down?"
description: ""
project: community
lastmod: 2014-03-24T10:45:07-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13905"
mailinglist_parent_id: "msg13904"
author_name: "Jeff Peck"
project_section: "mailinglistitem"
sent_date: 2014-03-24T10:45:07-07:00
---


Does that happen immediately? I am basically trying to understand: When a 
physical node goes down (let's say it is temporarily restarted, or down for 
even a couple hours due to some sort of failure), will that cause an increase 
in disk and network bandwidth at the moment that it goes down as data is 
re-shuffled across the cluster?

Thanks,
Jeff


On Mar 24, 2014, at 1:38 PM, Seth Thomas  wrote:

&gt; Data is redistributed temporarily (indefinitely) until the primary node comes 
&gt; back online. So primary ownership of data would not be changed but your keys 
&gt; could be living on another physical node if any of the primary replicas were 
&gt; down.
&gt; 
&gt; So to answer your question directly: Yes (in the narrowest definition)
&gt; 
&gt; 
&gt; On March 24, 2014 at 10:34:22, Jeff Peck (je...@tnrglobal.com) wrote:
&gt; 
&gt;&gt; Thank you. So, does that mean that no redistribution of data would occur 
&gt;&gt; unless the node is manually removed?
&gt;&gt; 
&gt;&gt; - Jeff
&gt;&gt; 
&gt;&gt; 
&gt;&gt; On Mar 24, 2014, at 1:31 PM, Seth Thomas  wrote:
&gt;&gt; 
&gt;&gt;&gt; Jeff,
&gt;&gt;&gt; 
&gt;&gt;&gt; When a node is no longer responding a process called hinted handoff[1] 
&gt;&gt;&gt; takes over and ensure that your N (replication) value is met by allowing 
&gt;&gt;&gt; other nodes to temporarily take responsibility for the vnodes of the downed 
&gt;&gt;&gt; node. This node can return to the cluster and will resume operations for 
&gt;&gt;&gt; the vnodes it’s primarily responsible for or you could remove the node[2] 
&gt;&gt;&gt; from the cluster which would redistribute the primary responsibly among the 
&gt;&gt;&gt; remaining nodes. I’d also give our docs on replication[3] a look for more 
&gt;&gt;&gt; information.
&gt;&gt;&gt; 
&gt;&gt;&gt; Seth Thomas
&gt;&gt;&gt; 
&gt;&gt;&gt; [1] 
&gt;&gt;&gt; http://docs.basho.com/riak/latest/theory/concepts/glossary/#Hinted-Handoff
&gt;&gt;&gt; [2] 
&gt;&gt;&gt; http://docs.basho.com/riak/latest/ops/running/nodes/adding-removing/#Removing-a-Node-From-a-Cluster
&gt;&gt;&gt; [3] http://docs.basho.com/riak/latest/theory/concepts/Replication/
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; On March 24, 2014 at 9:33:17, Jeff Peck (je...@tnrglobal.com) wrote:
&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; Is there a description of what happens internally when a node goes down? I 
&gt;&gt;&gt;&gt; am curious if any there would be any sort of reshuffling or redistribution 
&gt;&gt;&gt;&gt; of data in the remaining vnodes? Or would the node simply be unavailable 
&gt;&gt;&gt;&gt; until restarted? 
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; Thanks, 
&gt;&gt;&gt;&gt; Jeff 
&gt;&gt;&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_ 
&gt;&gt;&gt;&gt; riak-users mailing list 
&gt;&gt;&gt;&gt; riak-users@lists.basho.com 
&gt;&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

