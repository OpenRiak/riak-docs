---
title: "Re: Quering Riaksearch on Second Node"
description: ""
project: community
lastmod: 2011-07-11T00:59:27-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03979"
mailinglist_parent_id: "msg03958"
author_name: "Mathias Meyer"
project_section: "mailinglistitem"
sent_date: 2011-07-11T00:59:27-07:00
---


Muhammad,

can you see the merge\\_index directory fill with data on the second machine 
that's not responding to queries? Anything unusual showing up in the log?

Can you access the normal data you're indexing through Riak KV on both machines?

Mathias Meyer
Developer Advocate, Basho Technologies


On Donnerstag, 7. Juli 2011 at 20:28, Muhammad Yousaf wrote:

&gt; Hi,
&gt; 
&gt; I have 2 node Riaksearch cluster. My first node is working perfectly with 
&gt; that stats
&gt; 
&gt; curl -H "Accept: text/plain" http://192.168.1.182:8098/stats
&gt; {
&gt; "vnode\\_gets": 0,
&gt; "vnode\\_puts": 0,
&gt; "read\\_repairs": 0,
&gt; "vnode\\_gets\\_total": 480294,
&gt; "vnode\\_puts\\_total": 106564,
&gt; "node\\_gets": 0,
&gt; "node\\_gets\\_total": 341810,
&gt; "node\\_get\\_fsm\\_time\\_mean": "undefined",
&gt; "node\\_get\\_fsm\\_time\\_median": "undefined",
&gt; "node\\_get\\_fsm\\_time\\_95": "undefined",
&gt; "node\\_get\\_fsm\\_time\\_99": "undefined",
&gt; "node\\_get\\_fsm\\_time\\_100": "undefined",
&gt; "node\\_puts": 0,
&gt; "node\\_puts\\_total": 34671,
&gt; "node\\_put\\_fsm\\_time\\_mean": "undefined",
&gt; "node\\_put\\_fsm\\_time\\_median": "undefined",
&gt; "node\\_put\\_fsm\\_time\\_95": "undefined",
&gt; "node\\_put\\_fsm\\_time\\_99": "undefined",
&gt; "node\\_put\\_fsm\\_time\\_100": "undefined",
&gt; "read\\_repairs\\_total": 1711,
&gt; "cpu\\_nprocs": 472,
&gt; "cpu\\_avg1": 374,
&gt; "cpu\\_avg5": 479,
&gt; "cpu\\_avg15": 502,
&gt; "mem\\_total": 4002107392.0,
&gt; "mem\\_allocated": 3946246144.0,
&gt; "nodename": "riaksearch@192.168.1.182",
&gt; "connected\\_nodes": [
&gt; "riaksearch@192.168.1.167"
&gt; ],
&gt; "sys\\_driver\\_version": "1.5",
&gt; "sys\\_global\\_heaps\\_size": 0,
&gt; "sys\\_heap\\_type": "private",
&gt; "sys\\_logical\\_processors": 4,
&gt; "sys\\_otp\\_release": "R14B01",
&gt; "sys\\_process\\_count": 387,
&gt; "sys\\_smp\\_support": true,
&gt; "sys\\_system\\_version": "Erlang R14B01 (erts-5.8.2) [source] [64-bit] 
&gt; [smp:4:4] [rq:4] [async-threads:64] [hipe] [kernel-poll:true]",
&gt; "sys\\_system\\_architecture": "x86\\_64-unknown-linux-gnu",
&gt; "sys\\_threads\\_enabled": true,
&gt; "sys\\_thread\\_pool\\_size": 64,
&gt; "sys\\_wordsize": 8,
&gt; "ring\\_members": [
&gt; "riaksearch@192.168.1.167",
&gt; "riaksearch@192.168.1.182"
&gt; ],
&gt; "ring\\_num\\_partitions": 64,
&gt; "ring\\_ownership": 
&gt; "[{'riaksearch@192.168.1.182',32},{'riaksearch@192.168.1.167',32}]",
&gt; "ring\\_creation\\_size": 64,
&gt; "storage\\_backend": "riak\\_kv\\_bitcask\\_backend",
&gt; "pbc\\_connects\\_total": 505,
&gt; "pbc\\_connects": 0,
&gt; "pbc\\_active": 0,
&gt; "riak\\_err\\_version": "1.0.0",
&gt; "runtime\\_tools\\_version": "1.8.4.1",
&gt; "riak\\_search\\_version": "0.14.0",
&gt; "riak\\_search\\_core\\_version": "0.14.0",
&gt; "qilr\\_version": "0.14.0",
&gt; "riak\\_solr\\_version": "0.14.0",
&gt; "merge\\_index\\_version": "0.14.0",
&gt; "luwak\\_version": "1.0.0",
&gt; "skerl\\_version": "1.0.0",
&gt; "riak\\_kv\\_version": "0.14.0",
&gt; "bitcask\\_version": "1.1.5",
&gt; "riak\\_core\\_version": "0.14.0",
&gt; "luke\\_version": "0.2.3",
&gt; "erlang\\_js\\_version": "0.5.0",
&gt; "mochiweb\\_version": "1.7.1",
&gt; "webmachine\\_version": "1.8.0",
&gt; "crypto\\_version": "2.0.2",
&gt; "os\\_mon\\_version": "2.2.5",
&gt; "cluster\\_info\\_version": "1.0.0",
&gt; "sasl\\_version": "2.1.9.2",
&gt; "stdlib\\_version": "1.17.2",
&gt; "kernel\\_version": "2.14.2",
&gt; "executing\\_mappers": 0
&gt; 
&gt; my query from first node works fine
&gt; 
&gt; (riak1@127.0.0.1 (mailto:riak1@127.0.0.1))3&gt; {ok,Client} 
&gt; =riakc\\_pb\\_socket:start\\_link('192.168.1.182',8087).
&gt; {ok,&lt;0.46.0&gt;}
&gt; (riak1@127.0.0.1 (mailto:riak1@127.0.0.1))4&gt; riakc\\_pb\\_socket:search(Client, 
&gt; &lt;&lt;"player"&gt;&gt;, "playername:yousaf"). 
&gt; {ok,[[&lt;&lt;"player"&gt;&gt;,&lt;&lt;"yousaf"&gt;&gt;]]}
&gt; 
&gt; also 
&gt; 
&gt; curl http://192.168.1.182:8098/solr/player/select?q=playername:yousaf
&gt; xml version="1.0" encoding="UTF-8"?
&gt; 
&gt; 
&gt; 0
&gt; 2
&gt; 
&gt; on
&gt; 0
&gt; playername:yousaf
&gt; or
&gt; value
&gt; standard
&gt; 1.1
&gt; 1
&gt; 
&gt; 
&gt; 
&gt; 
&gt; yousaf
&gt; 
&gt; 1
&gt; 
&gt; 20110705
&gt; 
&gt; muhammad
&gt; 
&gt; 1
&gt; 
&gt; snowball
&gt; 
&gt; 100
&gt; 
&gt; yousaf
&gt; 
&gt; yousaf
&gt; 
&gt; world1
&gt; 
&gt; 100
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; but on my second node i can get list of keys but cannot search it 
&gt; 
&gt; (riak1@127.0.0.1)6&gt; {ok,Client} 
&gt; =riakc\\_pb\\_socket:start\\_link('192.168.1.167',8087).
&gt; {ok,&lt;0.53.0&gt;}
&gt; (riak1@127.0.0.1)7&gt; riakc\\_pb\\_socket:search(Client, &lt;&lt;"player"&gt;&gt;, 
&gt; "playername:yousaf").
&gt; {ok,[]}
&gt; 
&gt; and 
&gt; 
&gt; curl http://192.168.1.167:8098/solr/player/select?q=playername:yousaf.
&gt; xml version="1.0" encoding="UTF-8"?
&gt; 
&gt; 
&gt; 0
&gt; 1
&gt; 
&gt; on
&gt; 0
&gt; playername:yousaf.
&gt; or
&gt; value
&gt; standard
&gt; 1.1
&gt; 0
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; but data is replicating properly. Any idea's how to fix it only searching is 
&gt; causing problem??
&gt; 
&gt; 
&gt; 
&gt; Regards,
&gt; 
&gt; Muhammad Yousaf 
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com (mailto:riak-users@lists.basho.com)
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com



\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

