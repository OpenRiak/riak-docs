---
title: "Re: is it possible to start riak_kv as foreground process?"
description: ""
project: community
lastmod: 2015-07-09T11:29:05-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16285"
mailinglist_parent_id: "msg16284"
author_name: "ROMAN SHESTAKOV"
project_section: "mailinglistitem"
sent_date: 2015-07-09T11:29:05-07:00
---


hi Luke,

I am using the proprietary system deployed in our company, it allows to control 
the live cycle of the process, collect the logs centrally, etc. etc.

in any case - I extended bin/riak runner with extra command ‘foreground’ and it 
solved my problem. I am starting risk\\_kv (with bin/riak foreground) from my own 
shell wrapper in which I substitute existing bin/riak with my own version + 
setup some env variables. 

I think this command would be useful as a standard risk command 

Regards, Roman


&gt; On 8 Jul 2015, at 22:43, Luke Bakken  wrote:
&gt; 
&gt; Hi Roman,
&gt; 
&gt; Which "process management system" are you using? I have successfully run Riak 
&gt; using monit and the fact that Riak runs in the background does not cause 
&gt; issues.
&gt; 
&gt; For instance, this monit configuration will start/stop Riak as well as 
&gt; monitor it. You must disable your system's init script for Riak if you want 
&gt; monit to do the job instead.
&gt; 
&gt; check process riak
&gt; with pidfile /var/run/riak/riak.pid
&gt; start program = "/etc/init.d/riak start" with timeout 30 seconds
&gt; stop program = "/etc/init.d/riak stop" with timeout 60 seconds
&gt; alert riak-ale...@domain.com 
&gt; on { connection, timeout }
&gt; with mail-format {
&gt; subject: [ALERT] $HOST: Riak Service - $EVENT
&gt; message: $DATE
&gt; Problem:
&gt; $HOST: Riak raised the following event: $EVENT
&gt; $DESCRIPTION
&gt; }
&gt; with reminder on 10 cycles
&gt; if failed (url http://localhost:8098/ping 
&gt;  and content == '^OK$')
&gt; with timeout 15 seconds
&gt; for 2 times within 5 cycles
&gt; then alert
&gt; if 3 restarts within 5 cycles then alert
&gt; group riak
&gt; 
&gt; --
&gt; Luke Bakken
&gt; Engineer
&gt; lbak...@basho.com 
&gt; On Wed, Jul 8, 2015 at 2:17 PM, Roman Shestakov  &gt; wrote:
&gt; Thanks, but i meant to run as foreground hidden process, without console.
&gt; 
&gt; I need to run riak kv under specific process management system which controls 
&gt; process live cycle. It cant do it if the process is backgrounded. 
&gt; 
&gt; I really dont want ti hack the riak runner wrapper so though maybe there us 
&gt; sine trick. 
&gt; 
&gt; But in any case, it seems surprising that this option is missing as a standard
&gt; 
&gt; Regards, Roman 
&gt; 
&gt; Sent from my iPhone
&gt; 
&gt; On 8 Jul 2015, at 17:54, Cuyler Jones  &gt; wrote:
&gt; 
&gt;&gt; Hi Roman --
&gt;&gt; 
&gt;&gt; If riak is not currently running:
&gt;&gt; 
&gt;&gt; bin/riak console
&gt;&gt; 
&gt;&gt; If riak is currently running:
&gt;&gt; 
&gt;&gt; bin/riak attach
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; On Wed, Jul 8, 2015 at 9:41 AM, ROMAN SHESTAKOV &gt; &gt; wrote:
&gt;&gt; hello,
&gt;&gt; 
&gt;&gt; is there any way to start RIAK\\_KV as a foreground process instead of as a 
&gt;&gt; demon process, which is what "bin/riak start” does?
&gt;&gt; 
&gt;&gt; Regards, Roman
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com 
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com 
&gt;&gt; 
&gt;&gt; 
&gt; 
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com 
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com 
&gt; 
&gt; 
&gt; 

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

