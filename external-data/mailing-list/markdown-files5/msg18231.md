---
title: "Re: Search index partitioning in Riak-KV"
description: ""
project: community
lastmod: 2017-05-22T07:45:50-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg18231"
mailinglist_parent_id: "msg18225"
author_name: "Denis"
project_section: "mailinglistitem"
sent_date: 2017-05-22T07:45:50-07:00
---


Hello Fred

Thank you very much for your explanation. I'm trying to understand how this
scheme can work, but need some time... Let me come back to you after some
time.
Also you're referring to Ryan Zezeski slides, but i can't find it. Could
you please share me link if you have it? Thank you.


2017-05-19 19:00 GMT+03:00 :

&gt; Message: 5
&gt; Date: Fri, 19 May 2017 09:35:11 -0400
&gt; From: Fred Dushin 
&gt; To: riak-users 
&gt; Subject: Re: Search index partitioning in Riak-KV
&gt; Message-ID: &lt;9507f1b1-9b19-4c2b-948e-cd55a1f74...@dushin.net&gt;
&gt; Content-Type: text/plain; charset="us-ascii"
&gt;
&gt; There is a Solr instance per Riak node, and each Solr instance contains a
&gt; Solr core for the Riak index created. Every replica of a Riak k/v pair has
&gt; a corresponding document in the Solr instance on the same node as the vnode
&gt; that stores the replica (in fact for each sibling, if your objects admit
&gt; siblings). Each document in Solr contains not only the bucket and key as
&gt; indexed fields, but also the Riak partition (well, the partition ordinal,
&gt; actually). All of these fields are indexed, IIRC.
&gt;
&gt; When a query executed through Riak, a coverage plan is used to generate a
&gt; filter query (based on the node and partition in the cover set) that is
&gt; used with shard parameters on the local Solr instance in which the query
&gt; was executed. So technically every query is using (legacy) Solr
&gt; distributed query; it's just that all the shard parameters and Solr
&gt; deployment topology is hidden from the user and done internally by Riak.
&gt; It's really quite elegant and clever (IMO), but it can run into scaling
&gt; issues, as Solr/Lucene is quite a bit more demanding than Riak, in some
&gt; real-world use-cases.
&gt;
&gt; I made an attempt to explain how a lot of how this works at
&gt; https://www.youtube.com/watch?v=e1yVJqRuLSg  watch?v=e1yVJqRuLSg&gt;
&gt;
&gt; There are far better presentations on the topic by Ryan Zezeski and other
&gt; pioneers who did the initial implementation.
&gt;
&gt; -Fred
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

