---
title: "riak stats via http interface not working"
description: ""
project: community
lastmod: 2012-12-17T12:49:02-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg09606"
author_name: "Michael Johnson"
project_section: "mailinglistitem"
sent_date: 2012-12-17T12:49:02-08:00
---


For some reason, I am not able to get the riak stats via the http
interface. Here is what I get:

-bash-4.1$ curl -k https://127.0.0.1:8091/stats/ -E 'text/plain' -D -
HTTP/1.1 400 Bad Request
Server: MochiWeb/1.1 WebMachine/1.9.0 (someone had painted it blue)
Date: Mon, 17 Dec 2012 20:35:25 GMT
Content-Type: text/plain
Content-Length: 150

This resource accepts POSTs with bodies containing JSON of the form:
{
 "inputs":[...list of inputs...],
 "query":[...list of map/reduce phases...]
}

And here is the riak\\_kv section of my app.config:

 {riak\\_kv, [
 {hook\\_js\\_vm\\_count, 2},
 {http\\_url\\_encoding, on},
 {js\\_max\\_vm\\_mem, 8},
 {js\\_source\\_dir, "/tmp/js\\_source"},
 {js\\_thread\\_stack, 16},
 {legacy\\_keylisting, false},
 {legacy\\_stats, true},
 {listkeys\\_backpressure, true},
 {map\\_cache\\_size, 10000},
 {map\\_js\\_vm\\_count, 8},
 {mapper\\_batch\\_size, 5},
 {mapred\\_2i\\_pipe, true},
 {mapred\\_name, mapred},
 {mapred\\_queue\\_dir, "/var/lib/riak/mr\\_queue"},
 {mapred\\_system, pipe},
 {raw\\_name, "riak"},
 {reduce\\_js\\_vm\\_count, 6},
 {riak\\_kv\\_stat, true},
 {stats\\_urlpath, stats},
 {storage\\_backend, riak\\_kv\\_eleveldb\\_backend},
 {vnode\\_vclocks, true}
 ]},

I have tried single and double quoting 'stats' in the stats\\_urlpath value,
and I have tried commenting that out as well as setting legacy\\_stats to
false and simply commenting out the legacy\\_stats declaration. The result
is always the same. I originally was running riak 1.2.0. Thinking this
might be and issue that was resolved in riak 1.2.1, I upgraded and
restarted all the nodes, but continue the get the exact same results.

In all cases I can run 'riak-admin status' and get the data that way. Is
this a known issue, or am I missing something? I found some bug reports
that might be related be related, but nothing that I can say for sure.

If someone else can let me know if they have the same problem, that would
be immensely helpful as it would confirm I an not just missing something.
 I've read over the docs several times and have not been able to find
anything that indicates I am doing anything wrong, so I am at a bit of a
loss right now.

Thanks!
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

