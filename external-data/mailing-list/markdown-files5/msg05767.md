---
title: "Re: Multiple keys to fetch in a Java client"
description: ""
project: community
lastmod: 2011-11-28T16:14:37-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05767"
mailinglist_parent_id: "msg05759"
author_name: "Russell Brown"
project_section: "mailinglistitem"
sent_date: 2011-11-28T16:14:37-08:00
---



On 28 Nov 2011, at 20:16, suresh chandran wrote:

&gt; May be I can make my statement clear :) I store my devices values in buckets 
&gt; named after OS (say windows/ linux) with the device id's as keys. I want to 
&gt; get the devices for a list of device ids . From what I see, the fetch API 
&gt; signature takes in bucket name and key. (Client.fetch("windows", "D1"). Is 
&gt; there a way where I can get Client.fetch("windows", ?

There is no multi-fetch from Riak right now. You can either fetch your 
individual keys (serially on in parallel) or run a Map/Reduce. In most case the 
Map/Reduce will be slower (though the API is simpler, I suppose.)

Use IRiakClient.mapReduce().addInput(bucket, key).addInput(bucket, 
key2)â€¦(repeat!) I guess this is ripe for a convenience method that takes (as 
you suggest) addInputs(bucket, Collection keys), so I'll add that to 
the features list.

Or just fetch all your keys using fetch. 

I guess it would be possible to add a bulk fetch API to the Riak Java Client 
that spawns a configurable number of threads to fetch a bunch of keys in 
parallel, but right now that is left as an exercise for the reader :)

Cheers

Russell


&gt; 
&gt; Thanks
&gt; Suresh C Nair
&gt; From: suresh chandran 
&gt; To: "riak-users@lists.basho.com"  
&gt; Sent: Monday, November 28, 2011 2:53 PM
&gt; Subject: Multiple keys to fetch in a Java client
&gt; 
&gt; HI,
&gt; 
&gt; I am storing values of a devices under a particular OS. I want to fetch the 
&gt; list of all vallues, based on the key list. What I see if that, I can fetch 
&gt; the value one by one using the FETCH. Am using the HttpClient in Java. How do 
&gt; I go about this? Assume I am tryign to reach the same behavior like query 
&gt; that has "CONTAINS(key1, key2...). Is there a way to do this? or we can fetch 
&gt; the values only one by one. I do see that Map-reduce, makes use of the list 
&gt; fo keys, but am not sure if it is applicable in my case, as it ia simple 
&gt; fetch with collection of / list of keys.
&gt; 
&gt; Thanks
&gt; Suresh C Nair
&gt; 
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; 
&gt; 
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

