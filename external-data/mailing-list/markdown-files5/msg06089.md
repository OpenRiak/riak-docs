---
title: "Re: How to bind Riak to an interface rather than to IP address?"
description: ""
project: community
lastmod: 2011-12-29T09:16:54-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06089"
mailinglist_parent_id: "msg06091"
author_name: "Jeff Kirkell"
project_section: "mailinglistitem"
sent_date: 2011-12-29T09:16:54-08:00
---


Jeff,

I was thinking of a solution for the same issue. Since your hostname
changes with EC2. My thought was to have an automated script execute which
pulls the new hostname (or IP) and use SED or something to update the
app.config and vm.args followed by a Riak reip command. The only trick is
that you may need to store the current in a file so you know what to
replace later.

Jeff

On Thu, Dec 29, 2011 at 9:34 AM, jeffrey k eliasen  wrote:

&gt; This did't appear to work for me. I changed the line in app.config to:
&gt; {http, [ {"127.0.0.1", 8098 }, { "0.0.0.0", 8098 } ]},
&gt; … and the node wouldn't start. When I changed it to:
&gt; {http, [ {"127.0.0.1", 8098 }, { "192.168.1.238", 8098 } ]},
&gt; … the node started just fine.
&gt;
&gt; Idiot check… I realized it was trying to bind to localhost twice, once
&gt; when I specified 127.0.0.1 and again with 0.0.0.0. Just for anyone else
&gt; following the thread, the line should \\*just\\* specify 0.0.0.0:
&gt; {http, [ {"0.0.0.0", 8098 } ]},
&gt;
&gt; Another question with vm.args… Hostnames are allocated dynamically in my
&gt; network, so I don't specify the hostname in vm.args. The name option is set
&gt; with a name unique to the data drive holding all the riak state:
&gt; -name node1
&gt;
&gt; When the node starts, I see that the name is expanded to include the
&gt; hostname:
&gt; ring\\_members : ['no...@machinexyz.local.net']
&gt;
&gt; I don't know from boot to boot what the hostname was the last time I
&gt; booted (hence my other question a few days ago asking whether hostname
&gt; mattered). Do I need to construct a way to track this across boots? Or is
&gt; it enough that the name argument specifies a name that is unique on the
&gt; network and disregards the host name?
&gt;
&gt; jeff
&gt;
&gt;
&gt; On Dec 3, 2011, at 7:01 AM, Sean Cribbs wrote:
&gt;
&gt; Also make sure that your node names (-name in vm.args) do not include the
&gt; IP address, but use a hostname that is (hopefully) managed by the server
&gt; handing out IP addresses. If the node name includes the IP address, your
&gt; Riak node won't be reachable when the machine restarts (and it might not
&gt; even start up).
&gt;
&gt; On Sat, Dec 3, 2011 at 8:51 AM, Grant Schofield  wrote:
&gt;
&gt;&gt; The only way to do that is to bind to every current IP on the system by
&gt;&gt; using 0.0.0.0 as the setting.
&gt;&gt;
&gt;&gt; Grant
&gt;&gt;
&gt;&gt;
&gt;&gt; On Dec 3, 2011, at 7:43 AM, jeffrey eliasen wrote:
&gt;&gt;
&gt;&gt; My Riak cluster is on a network that uses dynamic IPs, so each node gets
&gt;&gt; a different IP address at reboot. How do I indicate in app.config that I
&gt;&gt; want to bind to an interface (such as 'eth0') regardless of it's IP address
&gt;&gt; rather than to a specific IP address?
&gt;&gt;
&gt;&gt; --
&gt;&gt;
&gt;&gt; jeffrey k eliasen
&gt;&gt;
&gt;&gt; Find and follow me on:
&gt;&gt; Blog: http://jeff.jke.net
&gt;&gt; Twitter: http://twitter.com/jeffreyeliasen
&gt;&gt; Facebook: http://facebook.com/jeffrey.eliasen
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;
&gt;&gt;
&gt;
&gt;
&gt; --
&gt; Sean Cribbs 
&gt; Developer Advocate
&gt; Basho Technologies, Inc.
&gt; http://www.basho.com/
&gt;
&gt;
&gt;
&gt; ===
&gt;
&gt; jeffrey k eliasen
&gt;
&gt; Find and follow me on:
&gt; Blog: http://jeff.jke.net
&gt; Twitter: http://twitter.com/jeffreyeliasen
&gt; Facebook: http://facebook.com/jeffrey.eliasen
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

