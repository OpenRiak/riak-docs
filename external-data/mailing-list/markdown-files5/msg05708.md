---
title: "Re: Counting the number of items in a bucket"
description: ""
project: community
lastmod: 2011-11-22T07:23:10-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05708"
mailinglist_parent_id: "msg05698"
author_name: "francisco treacy"
project_section: "mailinglistitem"
sent_date: 2011-11-22T07:23:10-08:00
---


I would probably stream keys to the client and count them there (it's the
most efficient method I can think of)

If you have node.js installed, do this:

npm install riak-js@latest
node -e "require('riak-js').getClient({ port: 8098 }).count('bucket');"


2011/11/21 Stephen Bennett 

&gt; I have a bucket which contains images refernced by a key which is made up
&gt; from a guid. I have a number of servers in my cluster and my bucket is set
&gt; up to store 3 versions of every item in the bucket across the servers in
&gt; the cluster. I'd like to understand a little bit more about how my cluster
&gt; is performing in terms of data storage. I can find out how much space each
&gt; bitcask is currently taking up on each server, but I'd like to compare
&gt; reference this against the number of unique keys that are being stored in
&gt; the system.
&gt;
&gt; I've tried to use map-reduce methods using the erlang methods defined in
&gt; the riak\\_kv\\_mapreduce, calling them against the HTTP interface but my
&gt; queries are timing out. I've tried to extend the timeout, but it's still
&gt; timing out.
&gt;
&gt; What's the most efficient way to find out how many keys exist in a
&gt; particular bucket?
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

