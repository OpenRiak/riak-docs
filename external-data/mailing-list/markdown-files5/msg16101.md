---
title: "Re: Different results to same queries"
description: ""
project: community
lastmod: 2015-05-04T10:42:24-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16101"
mailinglist_parent_id: "msg16061"
author_name: "Christopher Meiklejohn"
project_section: "mailinglistitem"
sent_date: 2015-05-04T10:42:24-07:00
---



&gt; On Apr 22, 2015, at 6:45 PM, Sadykov Rustem  wrote:
&gt; 
&gt; Hello.
&gt; I'm testing riak 1.4.10 on 2 node cluster (on different servers), but result 
&gt; is same on 3 nodes cluster and on single node also.
&gt; 
&gt; I try to count records in my bucket and always get 3-4 different results.
&gt; Query is:
&gt; 
&gt; curl -XPOST http://localhost:8098/mapred -H 'Content-Type: application/json' 
&gt; -d '{"inputs":"account", "query":[{"reduce":{"language":"erlang", 
&gt; "module":"riak\\_kv\\_mapreduce", "function":"reduce\\_count\\_inputs", 
&gt; "arg":{"reduce\\_phase\\_batch\\_size":1000} } }] }’

Hi Sadykov,

Map/Reduce chooses one replica for each value to execute the query on during a 
distributed Map/Reduce job. Given that, subsequent executions might occur on 
different replicas given the coverage plan chosen during that period.

That said, can you provide information on when you are writing the values you 
are running the job against? For example, are you writing to a quorum of nodes 
right before the query? It’s possible to see some staleness if you are using 
majority quorums and you are executing against replicas that are delayed due to 
network traffic.

- Chris

Christopher Meiklejohn
Senior Software Engineer
Basho Technologies, Inc.
cmeiklej...@basho.com


\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

