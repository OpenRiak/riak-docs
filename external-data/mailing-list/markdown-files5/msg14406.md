---
title: "Re: Help on bucket quorums"
description: ""
project: community
lastmod: 2014-06-28T11:43:29-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14406"
mailinglist_parent_id: "msg14400"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2014-06-28T11:43:29-07:00
---


On Sat, Jun 28, 2014 at 4:55 AM, Alex De la rosa 
wrote:

&gt; Hi there,
&gt;
&gt; Can somebody help me understand a bit better the bucket quorums? I will
&gt; use the Python API to write code examples:
&gt;
&gt; Imagine we are building a web app like twitter, and we want fast read
&gt; (although not need to be consistent) and safe writings, this R/W
&gt; combination is appropriate?
&gt;
&gt; bucket = client.bucket('twits')
&gt;
&gt; bucket.r = 1
&gt; bucket.w = 3
&gt;
&gt; # OR
&gt;
&gt; bucket.set\\_property('r', 1)
&gt; bucket.set\\_property('w', 3)
&gt;
&gt; Which method is better to use? or are just exactly the same?
&gt;
&gt;
The pseudo-properties in the first example are exactly the same as the
set\\_property() calls in the second, just a convenience. Generally I
wouldn't recommend W=3 because it will tend to create false negatives under
heavy load, W=2 (the default) should be sufficient. Keep in mind that R=1
with notfound\\_ok = true (the default) can tend to result in false negative
responses as well.


&gt; Imagine that in this new case, we want to focus on writing fast (normally
&gt; we will write more "twits" than read them)... which would be the most
&gt; appropriate/suggested quorums?
&gt;
&gt; Also, what's really the difference between "r" and "pr"? what is a
&gt; "primary replica"?
&gt;
&gt;
Primaries are the replicas (nodes) that are the canonical owners the data,
but Riak will let you read and write even if they are not available. If
they are not available, fallback replicas (non-owner nodes) will take over
in their place. Setting PR or PW &gt; 0 will result in failures if that many
primaries are not available (the node is down or partitioned from the node
that receives the request).


&gt; If i set up bucket.w = 1, it will still do the 3 copies (n\\_val) in the
&gt; background but will reply "true" once 1 copy is saved, right?
&gt;
&gt;
Yes. Keep in mind W is a fast-path response, i.e. "I received the request
to write", whereas DW is a "I saved the key to the storage engine". There
is no practical reason for DW ever to be 0, in fact I think it is
disallowed (or silently upgraded to 1).


&gt; Thanks,
&gt; Alex
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;


-- 
Sean Cribbs 
Software Engineer
Basho Technologies, Inc.
http://basho.com/
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

