---
title: "Re: Migrating to riak 2.1.4, selecting a specific multi-backend from	the Java Client"
description: ""
project: community
lastmod: 2016-08-10T00:52:23-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17582"
mailinglist_parent_id: "msg17581"
author_name: "Henning Verbeek"
project_section: "mailinglistitem"
sent_date: 2016-08-10T00:52:23-07:00
---


Hi Magnus,

On Wed, Aug 10, 2016 at 9:21 AM, Magnus Kessler  wrote:
&gt; On 9 August 2016 at 15:42, Henning Verbeek  wrote:
&gt;&gt;
&gt;&gt; We're slowly migrating our application from Riak KV 1.4 to Riak KV
&gt;&gt; 2.1.4, and at the same time riak-java-client 1.4.x to riak-java-client
&gt;&gt; 2.0.6. We are doing this by adding seven new Riak KV 2.1 nodes to the
&gt;&gt; ring, and later removing the seven Riak KV 1.4 nodes from the ring.
&gt;&gt; For a few days, the cluster will consist of a mix.
&gt;
&gt; This plan will generate a lot of unnecessary data shuffling in the entire
&gt; cluster. Each time a node is added or removed from the ring, the claim
&gt; algorithm will re-assign partitions to/from all nodes. Please consider
&gt; updating the existing nodes in place.

Thanks. We anticipated that, and it's basically two ring changes (add
all new nodes, remove all old nodes). The balancing takes about 12h
for the 15TB or so to get redistributed. We've taken this opportunity
to move our data onto newer, bigger machines that have become
available at our hosting provider.

Cheers,
Henning

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

