---
title: "Re: Rolling upgrade from 1.4.2 to 2.0.5"
description: ""
project: community
lastmod: 2015-08-26T18:35:03-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16464"
mailinglist_parent_id: "msg16404"
author_name: "Dmitri Zagidulin"
project_section: "mailinglistitem"
sent_date: 2015-08-26T18:35:03-07:00
---


Hi Sujay,

Checking into it, it seems like there is a bug with 'reip' in 1.4.2.

You have a couple of options, then.

1) Since you're just trying to verify the data, you can actually restore
all the files except for the 'ring' directory. And then just form a new
cluster of 5 nodes, with different IPs (don't forget about the cookie). The
new cluster would still have the data from the old cluster, though. It will
go through a lot of partition transfers, but the data should be preserved.

2) You can fix the 'reip' issue yourself, by doing the following:
Edit the 'riak-admin' shell script (you can see where it lives on your OS
by doing 'which riak-admin'.)
Change the following line:
https://github.com/basho/riak/blob/riak-1.4.2/rel/files/riak-admin#L382
(line 382) to read 'node\\_down\\_check' instead of 'node\\_up\\_check'.
Then save and re-try the 'reip' command.

3) Even better: upgrade the test cluster (that you're using to restore the
data) to version 1.4.12, it has the 'reip' problem fixed. And then follow
the same procedure.



On Wed, Aug 26, 2015 at 2:18 AM, Sujay Mansingh  wrote:

&gt; Thanks for your reply Dmitri.
&gt;
&gt; ubuntu@test-riak-products-hetzner-04:~$ sudo riak ping
&gt; Node 'riak@172.16.16.211' not responding to pings.
&gt; ubuntu@test-riak-products-hetzner-04:~$ ps -ef | grep erl
&gt; ubuntu 13786 13709 0 07:12 pts/0 00:00:00 grep --color=auto erl
&gt; ubuntu@test-riak-products-hetzner-04:~$ sudo riak-admin reip riak@192.168.3.8 
&gt; riak@172.16.16.211
&gt; Node is not running!
&gt; ubuntu@test-riak-products-hetzner-04:~$ riak version
&gt; 1.4.2
&gt;
&gt; It’s odd, because it looks like the reip command requires the node to be
&gt; running.
&gt;
&gt; Riak doesn’t seem to be running.
&gt;
&gt; Sujay
&gt; ​
&gt;
&gt;
&gt; On Tue, Aug 25, 2015 at 6:31 PM, Dmitri Zagidulin 
&gt; wrote:
&gt;
&gt;&gt; Can you paste me the command-line output of 'riak-admin reip', and the
&gt;&gt; error message? As far as I know, 'reip' requires the node to be not
&gt;&gt; running. (This was the case at least as far back as Riak 1.3, and probably
&gt;&gt; earlier).
&gt;&gt;
&gt;&gt; I don't think there are ways of verifying the backup while the nodes are
&gt;&gt; not running. I'm confident we can sort this out, though, and get them up
&gt;&gt; and running.
&gt;&gt;
&gt;&gt; On Tue, Aug 25, 2015 at 6:17 AM, Sujay Mansingh  wrote:
&gt;&gt;
&gt;&gt;&gt; Thanks Dmitri.
&gt;&gt;&gt;
&gt;&gt;&gt; I tried that, but with no luck. I replaced the ring and bitcask data
&gt;&gt;&gt; directories.
&gt;&gt;&gt;
&gt;&gt;&gt; But I can’t run riak-admin reip ... because it complains that riak
&gt;&gt;&gt; isn’t running.
&gt;&gt;&gt;
&gt;&gt;&gt; However, I can’t start riak (I get the following in
&gt;&gt;&gt; /var/log/riak/error.log).
&gt;&gt;&gt; (The existing cluster is the 192.168.3.x range, and the new one is the
&gt;&gt;&gt; 172.16.16.x range.)
&gt;&gt;&gt;
&gt;&gt;&gt; 2015-08-25 11:13:39.217 [error] &lt;0.161.0&gt; gen\\_server riak\\_core\\_capability 
&gt;&gt;&gt; terminated with reason: no function clause matching 
&gt;&gt;&gt; orddict:fetch('riak@172.16.16.211', 
&gt;&gt;&gt; [{'riak@192.168.3.5',[{{riak\\_control,member\\_info\\_version},[v1,v0]},{{riak\\_core,resizable\\_ring},...},...]},...])
&gt;&gt;&gt; line 72
&gt;&gt;&gt; 2015-08-25 11:13:39.217 [error] &lt;0.161.0&gt; CRASH REPORT Process 
&gt;&gt;&gt; riak\\_core\\_capability with 0 neighbours exited with reason: no function 
&gt;&gt;&gt; clause matching orddict:fetch('riak@172.16.16.211', 
&gt;&gt;&gt; [{'riak@192.168.3.5',[{{riak\\_control,member\\_info\\_version},[v1,v0]},{{riak\\_core,resizable\\_ring},...},...]},...])
&gt;&gt;&gt; line 72 in gen\\_server:terminate/6 line 747
&gt;&gt;&gt; 2015-08-25 11:13:39.219 [error] &lt;0.137.0&gt; Supervisor riak\\_core\\_sup had 
&gt;&gt;&gt; child riak\\_core\\_capability started with riak\\_core\\_capability:start\\_link() 
&gt;&gt;&gt; at &lt;0.161.0&gt; exit with reason no function clause matching 
&gt;&gt;&gt; orddict:fetch('riak@172.16.16.211', 
&gt;&gt;&gt; [{'riak@192.168.3.5',[{{riak\\_control,member\\_info\\_version},[v1,v0]},{{riak\\_core,resizable\\_ring},...},...]},...])
&gt;&gt;&gt; line 72 in context child\\_terminated
&gt;&gt;&gt; 2015-08-25 11:13:39.219 [error] &lt;0.135.0&gt; CRASH REPORT Process &lt;0.135.0&gt; 
&gt;&gt;&gt; with 0 neighbours exited with reason: 
&gt;&gt;&gt; {{function\\_clause,[{orddict,fetch,['riak@172.16.16.211',[{'riak@192.168.3.5',[{{riak\\_control,member\\_info\\_version},[v1,v0]},{{riak\\_core,resizable\\_ring},[true,false]},{{riak\\_core,staged\\_joins},[true,false]},{{riak\\_core,vnode\\_routing},[proxy,legacy]},{{riak\\_kv,anti\\_entropy},[enabled\\_v1,disabled]},{{riak\\_kv,crdt},[[pncounter],[]]},{{riak\\_kv,handoff\\_data\\_encoding},[encode\\_raw,encode\\_zlib]},{{riak\\_kv,index\\_backpressure},[true,false]},{{riak\\_kv,legacy\\_keylisting},[false]},{{riak\\_kv,listkeys\\_backpressure},...},...]},...]],...},...]},...}
&gt;&gt;&gt; in application\\_master:init/4 line 138
&gt;&gt;&gt;
&gt;&gt;&gt; At the moment, it looks like I can’t restore the cluster. Is there any
&gt;&gt;&gt; other way of verifying the backup? Perhaps I can simply pull out all the
&gt;&gt;&gt; keys in the bitcask data dump?
&gt;&gt;&gt;
&gt;&gt;&gt; Thanks,
&gt;&gt;&gt; Sujay
&gt;&gt;&gt; ​
&gt;&gt;&gt;
&gt;&gt;&gt; On Mon, Aug 24, 2015 at 1:43 PM, Dmitri Zagidulin 
&gt;&gt;&gt; wrote:
&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Hi Sujay,
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; This is where we get into the fact that maintaining docs across many
&gt;&gt;&gt;&gt; versions is a hard problem :)
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; You'll want to follow the instructions laid out in
&gt;&gt;&gt;&gt; http://docs.basho.com/riak/latest/ops/running/nodes/renaming/#Clusters-from-Backups
&gt;&gt;&gt;&gt; (the
&gt;&gt;&gt;&gt; Clusters from Backup section, specifically). That outlines the instructions
&gt;&gt;&gt;&gt; on renaming the ring on an existing new cluster from backup. (And keep in
&gt;&gt;&gt;&gt; mind what I said earlier about renaming the Erlang cookie in vm.args).
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Since it's written for Riak version 2, you'll want to cross-reference
&gt;&gt;&gt;&gt; it with the slightly older version of the doc, that you're looking at,
&gt;&gt;&gt;&gt; http://docs.basho.com/riak/1.4.2/ops/running/nodes/renaming/ . The
&gt;&gt;&gt;&gt; procedure should be largely the same, just the names of the config files
&gt;&gt;&gt;&gt; are different.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; On Monday, August 24, 2015, Sujay Mansingh  wrote:
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Hi guys
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; I am looking at the instructions here:
&gt;&gt;&gt;&gt;&gt; http://docs.basho.com/riak/1.4.2/ops/running/nodes/renaming/
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; However, these are instructions for renaming an existing cluster
&gt;&gt;&gt;&gt;&gt; ‘in-place’.
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; What I have is an existing 5 node cluster.
&gt;&gt;&gt;&gt;&gt; I have brought up a completely new (and separate) 5 node cluster.
&gt;&gt;&gt;&gt;&gt; I am copying over the bitcask data and /var/lib/riak/ring directories
&gt;&gt;&gt;&gt;&gt; from each existing node to the new cluster. (i.e. from existing-01 to
&gt;&gt;&gt;&gt;&gt; new-01, existing-02 to new-02, etc)
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; The instructions above mention to join the cluster, but I don’t wish
&gt;&gt;&gt;&gt;&gt; to do that (as it would join a new node to the existing cluster).
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; At the moment I have not formed the new cluster (all 5 riak nodes are
&gt;&gt;&gt;&gt;&gt; standalone).
&gt;&gt;&gt;&gt;&gt; What do I need to do in order to rename the ring on the nodes in the
&gt;&gt;&gt;&gt;&gt; new cluster?
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Sujay
&gt;&gt;&gt;&gt;&gt; ​
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; On Tue, Aug 11, 2015 at 4:47 PM, Dmitri Zagidulin &lt;
&gt;&gt;&gt;&gt;&gt; dzagidu...@basho.com&gt; wrote:
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt; Hi Sujay,
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt; Yes, riak.conf is a riak 2 thing. If you're running 1.4, you would
&gt;&gt;&gt;&gt;&gt;&gt; change the -setcookie in vm.args, exactly.
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt; And no, the node name doesn't have to match the cookie. The two are
&gt;&gt;&gt;&gt;&gt;&gt; independent.
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt; On Tue, Aug 11, 2015 at 3:22 PM, Sujay Mansingh 
&gt;&gt;&gt;&gt;&gt;&gt; wrote:
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt; Oh and also, does the first part of the riak node name have to match
&gt;&gt;&gt;&gt;&gt;&gt;&gt; the cookie?
&gt;&gt;&gt;&gt;&gt;&gt;&gt; I.e. If I change the cookie to riaktest, does the node name have to
&gt;&gt;&gt;&gt;&gt;&gt;&gt; be riaktest@{{ ip\\_addr }} ?
&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt; On Tuesday, August 11, 2015, Sujay Mansingh  wrote:
&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Thanks Dmitri
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; When you say the cookie must be modified in /etc/riak/riak.conf,
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; is that a riak 2 thing?
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; I can see a -setcookie riak line in /etc/riak/vm.args, is that
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; what you mean?
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Sujay
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; ​
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; On Thu, Aug 6, 2015 at 2:11 PM, Dmitri Zagidulin &lt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; dzagidu...@basho.com&gt; wrote:
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Sujay,
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; You're right - the best way to verify the backup is to bring up a
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; separate 5 node cluster, and restore it from the backup files.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; The procedure is slightly more involved than untar-ing, though.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; The backed up ring directories from the original cluster will contain 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; the
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; node ids (which rely on their IP addresses, etc). Since the new 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; re-hydrated
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; cluster is likely to have different IPs from the original one, 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; there's a
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; few more steps you need to take.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; The procedure of standing up a new cluster from backups is
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; outlined here:
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; http://docs.basho.com/riak/latest/ops/running/nodes/renaming/#Clusters-from-Backups
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; There is one other important step to remember. If, by any chance,
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; you're bringing up the new cluster on the same network as the old 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; cluster
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; is running on, be sure to modify the Erlang cookie in the new cluster 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; (so
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; that as far as Erlang is concerned, they're existing on different 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; networks).
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; The Erlang cookie must be modified in /etc/riak/riak.conf so the
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; new cluster does not conflict with any existing cluster.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Let us know if you have any further questions.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Dmitri
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; On Thu, Aug 6, 2015 at 8:40 AM, Sujay Mansingh 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; wrote:
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Thanks Magnus & John.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Yes certainly I will test it on a separate cluster first! Which
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; is related to another question I have.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; If I want to backup I can archive the directories on the nodes as
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; described here:
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; http://docs.basho.com/riak/latest/ops/running/backups/#OS-Specific-Directory-Locations
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; But in order to verify the backup (or perform operations on the
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; cluster in 'offline' mode), can I simply bring up a separate 5 node 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; cluster
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; and untar the backup files?
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; (Probably not the /etc/riak directory, but the data and ring
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; directories.)
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; I want to do that, and then try adding a riak 2.0.6 node to the
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; test riak 1.4.2 cluster and see if things are ok.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Thanks,
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Sujay
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; On Thu, Aug 6, 2015 at 9:31 AM, Magnus Kessler &lt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; mkess...@basho.com&gt; wrote:
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; On 5 August 2015 at 18:53, John Daily  wrote:
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; That’s correct: upgrades to either 2.0.x or 2.1.x are supported
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; from the 1.4 series.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Side note: I definitely recommend testing the upgrade process
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; in a QA environment first.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; -John
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Hi Sujay,
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; The latest release in the 2.0 series is 2.0.6 [0]. Please use
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; this version if you upgrade to 2.0.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Please also review the documentation about the new 'riak.conf'
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; configuration file [1][2]. 2.x installations should use the new 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; format, but
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; you can continue to use the 'app.config' format from Riak 1.x. To 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; maintain
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; complete backwards compatibility when using 'app.config', please add
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; [{default\\_bucket\\_props,
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; [{allow\\_mult,false}, %% have Riak resolve conflicts and do not 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; return siblings
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; {dvv\\_enabled,false}]}, %% use vector clocks for conflict 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; resolution
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; %% other settings
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; ]
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; to 'app.config'. This will ensure that your existing application
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; continues to work exactly as before. When using 'riak.conf', these 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; settings
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; will be applied automatically.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Magnus
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; [0] http://docs.basho.com/riak/2.0.6/downloads/
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; [1]
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; http://docs.basho.com/riak/latest/intro-v20/#Simplified-Configuration-Management
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; [2]
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; http://docs.basho.com/riak/latest/ops/advanced/configs/configuration-files/
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; On Aug 5, 2015, at 12:13 PM, Sujay Mansingh 
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; wrote:
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Hello all, I have a 5 node riak cluster, all nodes running
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 1.4.2.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; I want to upgrade to riak 2.x
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; According to this:
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; http://docs.basho.com/riak/latest/ops/upgrading/rolling-upgrades/
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; I can perform a rolling upgrade (a mixed cluster)
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; as long as the versions aren't more than 2 versions apart.
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; There is no riak 1.5 so would riak 1.4.2 -&gt; 2.0.5 count as 1
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; version apart?
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Sujay
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; --
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Magnus Kessler
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Client Services Engineer @ Basho
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Registered Office - 8 Lincoln’s Inn Fields London WC2A 3BP Reg
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 07970431
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

