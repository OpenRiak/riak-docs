---
title: "Re: Riak Cluster Behavior - Clarification"
description: ""
project: community
lastmod: 2016-05-24T13:08:37-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17406"
mailinglist_parent_id: "msg17404"
author_name: "Sargun Dhillon"
project_section: "mailinglistitem"
sent_date: 2016-05-24T13:08:37-07:00
---


What do you mean it's not returning? It's returning stale data? Or
it's erroring?

On Tue, May 24, 2016 at 7:34 AM, Vikram Lalit  wrote:
&gt; Hi - I'd appreciate if someone can opine on the below behavior of Riak that
&gt; I am observing... is that expected, or something wrong in my set-up /
&gt; understanding?
&gt;
&gt; To summarize, I have a 3-node Riak cluster (separate EC2 AWS instances) with
&gt; a separate chat server connecting to them. When I write data on the Riak
&gt; nodes, the process is successful and I can read all data correctly. However,
&gt; as part of my testing, if I deliberately bring down one node (and then
&gt; remove it from the cluster using riak-admin cluster force-remove / plan /
&gt; commit), the client API is not able to fetch all the written data. In fact,
&gt; there is an alternation of success and failure which happens rather
&gt; randomly.
&gt;
&gt; My initial suspicion was that it would be happening only during the time the
&gt; rebalancing is occurring (i.e. riak-admin ring-status is not fully settled)
&gt; but I've seen this sporadic behavior post the same too.
&gt;
&gt; Does this have to do with the n and r values for the cluster and given that
&gt; 1 node is down, the cluster does not succeed in returning results reliably?
&gt; Also, does this mean that during the time a cluster is being rebalanced
&gt; (even incl. addition of new nodes), the results could be arbitrary - that
&gt; doesn't sound correct to me?
&gt;
&gt; Appreciate if someone can throw some light here? Also, the HTTP API calls to
&gt; retrieve and set the n / r / w values for a specific bucket - couldn't
&gt; locate the same!
&gt;
&gt; Thanks much!
&gt; Vikram
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

