---
title: "Re: Link or Secondary Indexes?"
description: ""
project: community
lastmod: 2012-03-29T12:23:36-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07085"
mailinglist_parent_id: "msg07082"
author_name: "Buri Arslon"
project_section: "mailinglistitem"
sent_date: 2012-03-29T12:23:36-07:00
---


Oops! Accidentally send empty email :)

Thanks, Alexander. The metaphor was above my poor English, but I feel I got
the point. :)

-- buriwoy

On Thu, Mar 29, 2012 at 1:21 PM, Buri Arslon  wrote:

&gt;
&gt;
&gt;
&gt; On Thu, Mar 29, 2012 at 1:03 PM, Alexander Sicular wrote:
&gt;
&gt;&gt; Fat data is a dirty little secret amongst system architects. "nosql"
&gt;&gt; solutions are practically based on the concept. Denormalization leads to
&gt;&gt; data duplication all over the place. Disk is cheap. Like the kid at dunken
&gt;&gt; donuts handing munchkins out at closing time. Eat that shit up. Yes, you
&gt;&gt; might hate yourself the next day; there are costs to pay like
&gt;&gt; synchronizing/invalidation and everything is a tradeoff but often it is a
&gt;&gt; price worth paying... And munchkins are delicious.
&gt;&gt;
&gt;&gt; -alexander
&gt;&gt;
&gt;&gt; @siculars
&gt;&gt; http://siculars.posterous.com
&gt;&gt;
&gt;&gt; Sent from my rotary phone.
&gt;&gt; On Mar 29, 2012 11:51 AM, "Buri Arslon"  wrote:
&gt;&gt;
&gt;&gt;&gt; Kresten, Jeffrey: Thanks a lot for enlightenment!
&gt;&gt;&gt;
&gt;&gt;&gt; This link was very helpful to understand what to use when.
&gt;&gt;&gt; http://wiki.basho.com/MapReduce-Search-2i-Comparison.html
&gt;&gt;&gt;
&gt;&gt;&gt; The information I obtained pushed me to another question :) .
&gt;&gt;&gt;
&gt;&gt;&gt; Q: Is it a good (or at least 'ok') practice to duplicate information in
&gt;&gt;&gt; order to get cheaper/faster queries?
&gt;&gt;&gt;
&gt;&gt;&gt; i.e. If a user becomes a member of a group/fanpage I could store that
&gt;&gt;&gt; information both in 'users' and 'groups' bucket. If I want to get the
&gt;&gt;&gt; members of a particular group I query just one value/record in 'groups'
&gt;&gt;&gt; bucket. The only drawback that came to my mind is when you delete that
&gt;&gt;&gt; relationship you have to delete it from two buckets.
&gt;&gt;&gt;
&gt;&gt;&gt; Another scenario might be to get last 20 comments by a user. Instead of
&gt;&gt;&gt; searching all posts/comments by author\\_name, I could just store the post or
&gt;&gt;&gt; comment key in the user object as a secondary index and set some limit,
&gt;&gt;&gt; say, 20 for &lt;&lt;"index"&gt;&gt;, &lt;&lt;"last\\_posts\\_bin"&gt;&gt;.
&gt;&gt;&gt;
&gt;&gt;&gt; What do you think?
&gt;&gt;&gt;
&gt;&gt;&gt; Thanks again,
&gt;&gt;&gt; -- buriwoy
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; On Thu, Mar 29, 2012 at 8:52 AM, Jeffrey Massung  wrote:
&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Buriwoy,
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Neither is better (or worse) for "storing" those bits of information.
&gt;&gt;&gt;&gt; The question is how you expect to use that data once it is stored. Let's
&gt;&gt;&gt;&gt; take a look at friend relationships (note: I don't use Facebook, so I might
&gt;&gt;&gt;&gt; be missing a subtle feature with this example)...
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Do you merely plan on following a list of friends to other pages
&gt;&gt;&gt;&gt; quickly? For example, on your page, you see a list of your friends quickly,
&gt;&gt;&gt;&gt; be able to click them, and go to their page? If so, the links are quite
&gt;&gt;&gt;&gt; nice. Links are nice for being able to follow in a query as well. This is a
&gt;&gt;&gt;&gt; good example of using links to perform link walking:
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; http://basho.com/blog/technical/2010/02/24/link-walking-by-example/
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Or, do you plan on doing reverse lookups by friends? For example, do
&gt;&gt;&gt;&gt; you want to say "find every who has Tony as a friend" and get a list of
&gt;&gt;&gt;&gt; users? Note: this is not asking who is a friend of Tony (you'd just lookup
&gt;&gt;&gt;&gt; Tony and get his list of friends). In this case 2i works nicely, as do
&gt;&gt;&gt;&gt; other query methods: search, a general MapReduce, etc. But links would be
&gt;&gt;&gt;&gt; an extremely poor choice.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Does this help? This page might also be applicable to your question:
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; http://wiki.basho.com/MapReduce-Search-2i-Comparison.html
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; If you plan on just doing MapReduce queries without 2i, and don't care
&gt;&gt;&gt;&gt; about link walking, then just storing a typical JSON object and not using
&gt;&gt;&gt;&gt; either is perfectly fine as well.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; --
&gt;&gt;&gt;&gt; Jeffrey Massung
&gt;&gt;&gt;&gt; Software Engineer
&gt;&gt;&gt;&gt; j...@basho.com
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; On Mar 29, 2012, at 8:29 AM, Buri Arslon wrote:
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Hi,
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; While developing my pet project few questions came to my mind and I
&gt;&gt;&gt;&gt; decided to consult with you.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Which of them are more effective for recording relationships: Link or
&gt;&gt;&gt;&gt; Secondary Indexes?
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; 1. Friend relationships: like Facebook friends?
&gt;&gt;&gt;&gt; 2. Followed/follower relationships like in Twitter?
&gt;&gt;&gt;&gt; 3. Member/Club relationship like fanpage in Facebook?
&gt;&gt;&gt;&gt; 4. Like in Facebook?
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Thanks,
&gt;&gt;&gt;&gt; -- buriwoy
&gt;&gt;&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

