---
title: "Re: bucket props question"
description: ""
project: community
lastmod: 2013-12-11T12:40:45-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13218"
mailinglist_parent_id: "msg13215"
author_name: "Jordan West"
project_section: "mailinglistitem"
sent_date: 2013-12-11T12:40:45-08:00
---


Hi Bryce,

Unfortunately Riak 2.0 final is not yet available but I would be curious to
know if the upcoming Bucket Types [1] [2] feature would help you model your
problem. You could create a Bucket Type for your allow\\_mult=true projects
and another for lww=true. so you would have something like (extending the
notation you used in your email):

\\* bucket\\_types/allowsibs/buckets/project-year-month-day/keys/key
\\* bucket\\_types/nosibs/buckets/project-year-month-day/keys/key

where "allowsibs" and "nosibs" are the two bucket types, respectively.

Cheers,

Jordan

[1]
http://lists.basho.com/pipermail/riak-users\\_lists.basho.com/2013-November/013847.html
[2] https://github.com/basho/riak/issues/362


On Wed, Dec 11, 2013 at 11:45 AM, Tom Santero  wrote:

&gt; Hi Bryce,
&gt;
&gt; You generally want to avoid creating too many buckets with custom bucket
&gt; properties, as this gets stored in Riak's ring data. A large number of
&gt; custom buckets will degrade cluster performance.
&gt;
&gt; Is there any reason why you don't just create two buckets, with the
&gt; desired LWW/allow\\_mult=true settings and then prepend the timestamp to your
&gt; key?
&gt;
&gt; Tom
&gt;
&gt;
&gt; On Wed, Dec 11, 2013 at 1:47 PM, Bryce Verdier wrote:
&gt;
&gt;&gt; Hi All,
&gt;&gt;
&gt;&gt; Is it at all possible to have default bucket props be based on the bucket
&gt;&gt; names? I ask because I'm trying to use Riak to store key/value data and use
&gt;&gt; the buckets to separate the data based on day and for a couple of different
&gt;&gt; projects, for example:
&gt;&gt;
&gt;&gt; buckets/project-year-month-day/key
&gt;&gt;
&gt;&gt; The issue becomes I have one project that needs 'allow\\_mult' to true, and
&gt;&gt; another that needs 'last\\_write\\_wins' set to true (requiring that
&gt;&gt; 'allow\\_mult' be false). So using the default\\_buckets\\_props will only get me
&gt;&gt; half way there.
&gt;&gt;
&gt;&gt; Does anyone know of a way I can do this? The only solution I can think of
&gt;&gt; off the top of my head is to create a cron job that creates the bucket
&gt;&gt; sooner than when the clients start writing to it.
&gt;&gt;
&gt;&gt; Thank you in advance,
&gt;&gt;
&gt;&gt; Bryce
&gt;&gt;
&gt;&gt; PS -- can anyone tell me what:
&gt;&gt; {multi\\_backend\\_prefix\\_list, [{&lt;&lt;"0b:"&gt;&gt;, be\\_blocks}]}}
&gt;&gt; does?
&gt;&gt;
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

