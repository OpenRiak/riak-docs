---
title: "Re: Riak fails to start"
description: ""
project: community
lastmod: 2013-01-21T10:02:37-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg09857"
mailinglist_parent_id: "msg09856"
author_name: "Jon Meredith"
project_section: "mailinglistitem"
sent_date: 2013-01-21T10:02:37-08:00
---


We're very close to cutting the first release candidate so it should be
within a few weeks if all goes well. As for features, anybody following us
on github will have seen activity around active anti-entropy and work on
resolving interactions between the erlang VM and bitcask/leveldb to resolve
some performance issues. More information to come in the release notes.

Jon

On Mon, Jan 21, 2013 at 9:08 AM, Daniel Iwan  wrote:

&gt; Thanks Jon
&gt;
&gt; Is there any timeframe for 1.3 release with maybe a glimpse of what
&gt; features we may expect?
&gt;
&gt; Regards
&gt; Daniel
&gt;
&gt;
&gt; On 21 January 2013 14:42, Jon Meredith  wrote:
&gt;
&gt;&gt; Thanks for reporting the issue and sorry you got bitten by it. We have
&gt;&gt; committed a fix to master a couple of months ago and it will appear in the
&gt;&gt; 1.3 release.
&gt;&gt;
&gt;&gt; Jon
&gt;&gt;
&gt;&gt; On Jan 21, 2013, at 3:58 AM, Daniel Iwan  wrote:
&gt;&gt;
&gt;&gt; THe issue was that one of the ring snapshot files had size 0
&gt;&gt;
&gt;&gt; user@node1:~$ ls -la /var/lib/riak/ring/
&gt;&gt; total 32
&gt;&gt; drwxr-xr-x 2 riak riak 138 Jan 17 10:27 .
&gt;&gt; drwxr-xr-x 7 riak riak 129 Jan 17 13:22 ..
&gt;&gt; -rw-rw-r-- 1 riak riak 12584 Jan 15 17:19
&gt;&gt; riak\\_core\\_ring.default.20130115171955
&gt;&gt; -rw-rw-r-- 1 riak riak 12584 Jan 17 10:27
&gt;&gt; riak\\_core\\_ring.default.20130117102756
&gt;&gt; -rw-rw-r-- 1 riak riak 0 Jan 17 10:27
&gt;&gt; riak\\_core\\_ring.default.20130117102757
&gt;&gt;
&gt;&gt; After deleting it riak process started correctly.
&gt;&gt; I guess riak process should check if ring file is corrupted or 0 bytes
&gt;&gt; long, delete/rename it automatically
&gt;&gt; and use previous version?
&gt;&gt;
&gt;&gt; Regards
&gt;&gt; Daniel
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; On 17 January 2013 14:00, Daniel Iwan  wrote:
&gt;&gt;
&gt;&gt;&gt; One of our nodes fails to start
&gt;&gt;&gt;
&gt;&gt;&gt; $ sudo riak console
&gt;&gt;&gt; Attempting to restart script through sudo -H -u riak
&gt;&gt;&gt; Exec: /usr/lib/riak/erts-5.9.1/bin/erlexec -boot
&gt;&gt;&gt; /usr/lib/riak/releases/1.2.1/riak -embedded -config
&gt;&gt;&gt; /etc/riak/app.config -pa /usr/lib/riak/lib/basho-patches
&gt;&gt;&gt; -args\\_file /etc/riak/vm.args -- console
&gt;&gt;&gt; Root: /usr/lib/riak
&gt;&gt;&gt; Erlang R15B01 (erts-5.9.1) [source] [64-bit] [smp:4:4]
&gt;&gt;&gt; [async-threads:64] [kernel-poll:true]
&gt;&gt;&gt;
&gt;&gt;&gt; \\*\\* /usr/lib/riak/lib/basho-patches/etop\\_txt.beam hides
&gt;&gt;&gt; /usr/lib/riak/lib/observer-1.1/ebin/etop\\_txt.beam
&gt;&gt;&gt; \\*\\* Found 1 name clashes in code paths
&gt;&gt;&gt; 13:22:47.424 [info] Application lager started on node 'riak@10.173.240.1
&gt;&gt;&gt; '
&gt;&gt;&gt; 13:22:47.466 [error] CRASH REPORT Process &lt;0.149.0&gt; with 0 neighbours
&gt;&gt;&gt; exited with reason: bad argument in call to erlang:binary\\_to\\_term(&lt;&lt;&gt;&gt;) in
&gt;&gt;&gt; riak\\_core\\_ring\\_manager:read\\_ringfile/1 line 154 in
&gt;&gt;&gt; gen\\_server2:init\\_it/6 line 384
&gt;&gt;&gt; /usr/lib/riak/lib/os\\_mon-2.2.9/priv/bin/memsup: Erlang has closed.
&gt;&gt;&gt;
&gt;&gt;&gt; Erlang has closed
&gt;&gt;&gt;
&gt;&gt;&gt; {"Kernel pid terminated",application\\_
&gt;&gt;&gt; controller,"{application\\_start\\_failure,riak\\_core,{
&gt;&gt;&gt; shutdown,{riak\\_core\\_app,start,[normal,[]]}}}"}
&gt;&gt;&gt;
&gt;&gt;&gt; Crash dump was written to: /var/log/riak/erl\\_crash.dump
&gt;&gt;&gt; Kernel pid terminated (application\\_controller)
&gt;&gt;&gt; ({application\\_start\\_failure,riak\\_core,{shutdown,{riak\\_
&gt;&gt;&gt; core\\_app,start,[normal,[]]}}})
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; Which suggest that something happened to ring files?
&gt;&gt;&gt;
&gt;&gt;&gt; Any idea what and why it happened?
&gt;&gt;&gt;
&gt;&gt;&gt; Dump file available at:
&gt;&gt;&gt; http://www.filedropper.com/erlcrash
&gt;&gt;&gt;
&gt;&gt;&gt; Regards
&gt;&gt;&gt; Daniel
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;
&gt;&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;


-- 
Jon Meredith
VP, Engineering
Basho Technologies, Inc.
jmered...@basho.com
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

