---
title: "Re: Crash Error"
description: ""
project: community
lastmod: 2015-03-04T08:40:47-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15820"
mailinglist_parent_id: "msg15819"
author_name: "Jason Ryan"
project_section: "mailinglistitem"
sent_date: 2015-03-04T08:40:47-08:00
---


We're seeing regular errors around indexes trying to be created - but they
already exist - indexes are only ever created manually, and no new indexes
have been created in quite a while. We have however added new nodes and
removed other nodes due to some node failures.

We also have large object warnings, &gt;5MB (generally around 7MB) - which we
address each time we see them and mitigate the errors for the future...

Other than that we don't see many other errors, so we're unsure why the
cluster tends to fail.



[image: photo]
\\*Jason Ryan\\*
VP Engineering

Trustev
Real Time, Online Identity Verification

email: jason.r...@trustev.com
skype: jason\\_j\\_ryan
web: www.trustev.com

Trustev Ltd, 2100 Cork Airport Business Park, Cork, Ireland.

On 4 March 2015 at 16:14, Sean Cribbs  wrote:

&gt; Are there any other significant error messages in the logs? I find it hard
&gt; to believe that that specific crash would make your cluster unusable.
&gt;
&gt; On Wed, Mar 4, 2015 at 10:07 AM, Jason Ryan 
&gt; wrote:
&gt;
&gt;&gt; This is what we have on our haproxy right now:
&gt;&gt;
&gt;&gt; backend riak\\_rest\\_backend
&gt;&gt; mode http
&gt;&gt; option httplog
&gt;&gt; balance roundrobin
&gt;&gt; option httpchk GET /ping
&gt;&gt; server EU-RIAK-5 10.0.4.12:8098 weight 1 maxconn 1024 check
&gt;&gt; server EU-RIAK-6 10.0.4.13:8098 weight 1 maxconn 1024 check
&gt;&gt; server EU-RIAK-7 10.0.4.14:8098 weight 1 maxconn 1024 check
&gt;&gt; server EU-RIAK-8 10.0.4.15:8098 weight 1 maxconn 1024 check
&gt;&gt; server EU-RIAK-9 10.0.4.16:8098 weight 1 maxconn 1024 check
&gt;&gt; ·êß
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; [image: photo]
&gt;&gt; \\*Jason Ryan\\*
&gt;&gt; VP Engineering
&gt;&gt;
&gt;&gt; Trustev
&gt;&gt; Real Time, Online Identity Verification
&gt;&gt;
&gt;&gt; email: jason.r...@trustev.com
&gt;&gt; skype: jason\\_j\\_ryan
&gt;&gt; web: www.trustev.com
&gt;&gt;
&gt;&gt; Trustev Ltd, 2100 Cork Airport Business Park, Cork, Ireland.
&gt;&gt;
&gt;&gt; On 4 March 2015 at 15:58, Sean Cribbs  wrote:
&gt;&gt;
&gt;&gt;&gt; We recently saw this on the PB interface as well and have mitigated it
&gt;&gt;&gt; [1], but we have not addressed it on HTTP. In the meantime, I would
&gt;&gt;&gt; recommend changing your health check to use a regular request, for example:
&gt;&gt;&gt;
&gt;&gt;&gt; option httpchk /ping
&gt;&gt;&gt;
&gt;&gt;&gt; [1] https://github.com/basho/riak\\_api/pull/54
&gt;&gt;&gt;
&gt;&gt;&gt; On Wed, Mar 4, 2015 at 9:46 AM, Jason Ryan 
&gt;&gt;&gt; wrote:
&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Hi Sean - yes we are using HAProxy - and there are health checks.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; [image: photo]
&gt;&gt;&gt;&gt; \\*Jason Ryan\\*
&gt;&gt;&gt;&gt; VP Engineering
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Trustev
&gt;&gt;&gt;&gt; Real Time, Online Identity Verification
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; email: jason.r...@trustev.com
&gt;&gt;&gt;&gt; skype: jason\\_j\\_ryan
&gt;&gt;&gt;&gt; web: www.trustev.com
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Trustev Ltd, 2100 Cork Airport Business Park, Cork, Ireland.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; On 4 March 2015 at 15:41, Sean Cribbs  wrote:
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Are you using a load balancer in front of Riak, like HAProxy, with
&gt;&gt;&gt;&gt;&gt; health checks turned on?
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; On Wed, Mar 4, 2015 at 7:24 AM, Jason Ryan 
&gt;&gt;&gt;&gt;&gt; wrote:
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt; Hi all,
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt; We're getting the following crash report messages in the log very
&gt;&gt;&gt;&gt;&gt;&gt; regularly in the last day - it renders our Riak Cluster pretty much
&gt;&gt;&gt;&gt;&gt;&gt; unusable - until we restart Riak on each node. All nodes report the same
&gt;&gt;&gt;&gt;&gt;&gt; type of error.
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt; 2015-03-04 13:17:43.106 [error] &lt;0.31063.9&gt; CRASH REPORT Process
&gt;&gt;&gt;&gt;&gt;&gt; &lt;0.31063.9&gt; with 0 neighbours crashed with reason: no function clause
&gt;&gt;&gt;&gt;&gt;&gt; matching webmachine\\_request:peer\\_from\\_peername({error,enotconn},
&gt;&gt;&gt;&gt;&gt;&gt; {webmachine\\_request,{wm\\_reqstate,#Port&lt;0.89869&gt;,[],undefined,undefined,undefined,{wm\\_reqdata,'GET',...},...}})
&gt;&gt;&gt;&gt;&gt;&gt; line 150
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt; Anyone seen this before, know what the cause might be?
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt; Thanks,
&gt;&gt;&gt;&gt;&gt;&gt; Jason
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt; [image: photo]
&gt;&gt;&gt;&gt;&gt;&gt; \\*Jason Ryan\\*
&gt;&gt;&gt;&gt;&gt;&gt; VP Engineering
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt; Trustev
&gt;&gt;&gt;&gt;&gt;&gt; Real Time, Online Identity Verification
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt; email: jason.r...@trustev.com
&gt;&gt;&gt;&gt;&gt;&gt; skype: jason\\_j\\_ryan
&gt;&gt;&gt;&gt;&gt;&gt; web: www.trustev.com
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt; Trustev Ltd, 2100 Cork Airport Business Park, Cork, Ireland.
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt; This message is for the named person's use only. If you received this
&gt;&gt;&gt;&gt;&gt;&gt; message in error, please immediately delete it and all copies and notify
&gt;&gt;&gt;&gt;&gt;&gt; the sender. You must not, directly or indirectly, use, disclose,
&gt;&gt;&gt;&gt;&gt;&gt; distribute, print, or copy any part of this message if you are not the
&gt;&gt;&gt;&gt;&gt;&gt; intended recipient. Any views expressed in this message are those of the
&gt;&gt;&gt;&gt;&gt;&gt; individual sender and not Trustev Ltd. Trustev is registered in
&gt;&gt;&gt;&gt;&gt;&gt; Ireland No. 516425 and trades from 2100 Cork Airport Business Park, Cork,
&gt;&gt;&gt;&gt;&gt;&gt; Ireland.
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt;&gt;&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt;&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt;&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; --
&gt;&gt;&gt;&gt;&gt; Sean Cribbs 
&gt;&gt;&gt;&gt;&gt; Sr. Software Engineer
&gt;&gt;&gt;&gt;&gt; Basho Technologies, Inc.
&gt;&gt;&gt;&gt;&gt; http://basho.com/
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; This message is for the named person's use only. If you received this
&gt;&gt;&gt;&gt; message in error, please immediately delete it and all copies and notify
&gt;&gt;&gt;&gt; the sender. You must not, directly or indirectly, use, disclose,
&gt;&gt;&gt;&gt; distribute, print, or copy any part of this message if you are not the
&gt;&gt;&gt;&gt; intended recipient. Any views expressed in this message are those of the
&gt;&gt;&gt;&gt; individual sender and not Trustev Ltd. Trustev is registered in
&gt;&gt;&gt;&gt; Ireland No. 516425 and trades from 2100 Cork Airport Business Park, Cork,
&gt;&gt;&gt;&gt; Ireland.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; --
&gt;&gt;&gt; Sean Cribbs 
&gt;&gt;&gt; Sr. Software Engineer
&gt;&gt;&gt; Basho Technologies, Inc.
&gt;&gt;&gt; http://basho.com/
&gt;&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; This message is for the named person's use only. If you received this
&gt;&gt; message in error, please immediately delete it and all copies and notify
&gt;&gt; the sender. You must not, directly or indirectly, use, disclose,
&gt;&gt; distribute, print, or copy any part of this message if you are not the
&gt;&gt; intended recipient. Any views expressed in this message are those of the
&gt;&gt; individual sender and not Trustev Ltd. Trustev is registered in Ireland
&gt;&gt; No. 516425 and trades from 2100 Cork Airport Business Park, Cork, Ireland.
&gt;&gt;
&gt;
&gt;
&gt;
&gt; --
&gt; Sean Cribbs 
&gt; Sr. Software Engineer
&gt; Basho Technologies, Inc.
&gt; http://basho.com/
&gt;

-- 


This message is for the named person's use only. If you received this 
message in error, please immediately delete it and all copies and notify 
the sender. You must not, directly or indirectly, use, disclose, 
distribute, print, or copy any part of this message if you are not the 
intended recipient. Any views expressed in this message are those of the 
individual sender and not Trustev Ltd. Trustev is registered in Ireland No. 
516425 and trades from 2100 Cork Airport Business Park, Cork, Ireland.
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

