---
title: "Re: Mapred unable to find keys that use bucket types"
description: ""
project: community
lastmod: 2015-02-05T14:25:09-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15650"
mailinglist_parent_id: "msg15646"
author_name: "Christopher Meiklejohn"
project_section: "mailinglistitem"
sent_date: 2015-02-05T14:25:09-08:00
---



&gt; On Feb 5, 2015, at 12:47 PM, Mikhail Pustovalov  wrote:
&gt; 
&gt; Hi Chris,
&gt; 
&gt; Thank you for the prompt reply.
&gt; Although that is exactly what I do. I've noticed that bucket can now be both 
&gt; binary or a tuple {binary, binary} where the first element is bucket type and 
&gt; the second is bucket. And it works for put/get operations and for 
&gt; mapred\\_bucket which traverses the whole bucket. But what I am trying to 
&gt; achieve is traverse only specified keys and that doesn't seem to work for 
&gt; mapred queiries. Here are the commands that work:
&gt; simple get:
&gt; riakc\\_pb\\_socket:get(Pid,{&lt;&lt;"bucket\\_type"&gt;&gt;,&lt;&lt;"bucket"&gt;&gt;},&lt;&gt;).
&gt; mapred over the whole bucket:
&gt; riakc\\_pb\\_socket:mapred\\_bucket(Pid, {&lt;&lt;"bucket\\_type"&gt;&gt;,&lt;&lt;"bucket"&gt;&gt;}, [{map, 
&gt; {modfun, rc\\_mapred, map\\_kv\\_pairs}, none, true}]).
&gt; but this one fails with the result {ok,[{0,[{error,notfound}]}]}:
&gt; riakc\\_pb\\_socket:mapred(Pid, 
&gt; [{{&lt;&lt;"bucket\\_type"&gt;&gt;,&lt;&lt;"bucket"&gt;&gt;},&lt;&gt;}],[{map, {modfun, rc\\_mapred, 
&gt; map\\_kv\\_pairs}, none, true}]).
&gt; 
&gt; If you can run a mapred query over specified keys could you please show me an 
&gt; example?

I can try to put together an example.

Do you mind sharing what your map function is doing?

- Chris

Christopher Meiklejohn
Senior Software Engineer
Basho Technologies, Inc.
cmeiklej...@basho.com\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

