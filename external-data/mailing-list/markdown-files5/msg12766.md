---
title: "Re: Could not get response from python riak"
description: ""
project: community
lastmod: 2013-10-26T09:40:03-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12766"
mailinglist_parent_id: "msg12763"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2013-10-26T09:40:03-07:00
---


Naveen,

If you are using Riak 1.4, please upgrade to the 2.0.x package of the
client. Maintenance on the 1.5.x series has ceased.


On Fri, Oct 25, 2013 at 10:29 PM, Naveen Tamanam wrote:

&gt; Hi All,
&gt;
&gt; I am using the riak with python/django.
&gt;
&gt; Sometimes I am getting the error "Could not get response"
&gt;
&gt; I am using Djang\\*o 1.5
&gt; Python riak-1.5.2
&gt;
&gt; The error description is as follows;
&gt;
&gt;
&gt; \\*
&gt;
&gt; Django Version: 1.5
&gt; Python Version: 2.6.6
&gt; Installed Applications:
&gt; ('django.contrib.auth',
&gt; 'django.contrib.contenttypes',
&gt; 'django.contrib.sessions',
&gt; 'django.contrib.sites',
&gt; 'django.contrib.messages',
&gt; 'django.contrib.staticfiles',
&gt; )
&gt; Installed Middleware:
&gt; ('django.middleware.common.CommonMiddleware',
&gt; 'django.contrib.sessions.middleware.SessionMiddleware',
&gt; 'django.contrib.auth.middleware.AuthenticationMiddleware',
&gt; 'django.contrib.messages.middleware.MessageMiddleware')
&gt;
&gt; Traceback:
&gt; File
&gt; "/usr/lib/python2.6/site-packages/Django-1.5-py2.6.egg/django/core/handlers/base.py"
&gt; in get\\_response
&gt; 115. response = callback(request, \\*callback\\_args, \\*\\*callback\\_kwargs)
&gt; File "/opt/backend/mobichat/userapp/edit\\_views.py" in editCamp
&gt; 100. campinfo = helpers.getCampinfoForTemplating(request, url=key)
&gt; File "/opt/backend/mobichat/userapp/helpers.py" in getCampinfoForTemplating
&gt; 213. campinfo['logo\\_url'], campinfo['logo\\_name'] =
&gt; CampaignLogoPath.get(url)
&gt; File "/opt/backend/mobichat/common/riak\\_backend/riak\\_backend.py" in get
&gt; 1806. obj = cls.bucket.get(camp\\_uid)
&gt; File
&gt; "/usr/lib/python2.6/site-packages/riak-1.5.2-py2.6.egg/riak/bucket.py" in
&gt; get
&gt; 326. return obj.reload(r=r, pr=pr)
&gt; File
&gt; "/usr/lib/python2.6/site-packages/riak-1.5.2-py2.6.egg/riak/riak\\_object.py"
&gt; in reload
&gt; 459. Result = t.get(self, r=r, pr=pr, vtag=vtag)
&gt; File
&gt; "/usr/lib/python2.6/site-packages/riak-1.5.2-py2.6.egg/riak/transports/http.py"
&gt; in get
&gt; 152. response = self.http\\_request('GET', url)
&gt; File
&gt; "/usr/lib/python2.6/site-packages/riak-1.5.2-py2.6.egg/riak/transports/http.py"
&gt; in http\\_request
&gt; 626. raise RiakError("could not get a response")
&gt;
&gt; Exception Type: RiakError at /manager/camp-edit/EHbo24hFYDZGsg8ujpY9itDtM2a
&gt; Exception Value: 'could not get a response'
&gt;
&gt;
&gt;
&gt; Any body please help me out to fix the above issue.
&gt;
&gt; I see the riak source code
&gt;
&gt; Moudle is at riak-1.5.2-py2.6.egg/riak/transports/http.py
&gt;
&gt; The function where that is coming is as follows
&gt;
&gt; def http\\_request(self, method, uri, headers=None, body=''):
&gt; """
&gt; Given a Method, URL, Headers, and Body, perform and HTTP request,
&gt; and return a 2-tuple containing a dictionary of response headers
&gt; and the response body.
&gt; """
&gt; if headers is None:
&gt; headers = {}
&gt; # Run the request...
&gt; for retry in range(self.RETRY\\_COUNT):
&gt; with self.\\_conns.withconn() as conn:
&gt; ### should probably build this try/except into a custom
&gt; ### contextmanager for the connection.
&gt; try:
&gt; conn.request(method, uri, body, headers)
&gt; response = conn.getresponse()
&gt;
&gt; try:
&gt; # Get the response headers...
&gt; response\\_headers = {'http\\_code': response.status}
&gt; for (key, value) in response.getheaders():
&gt; response\\_headers[key.lower()] = value
&gt;
&gt; # Get the body...
&gt; response\\_body = response.read()
&gt; finally:
&gt; response.close()
&gt;
&gt; return response\\_headers, response\\_body
&gt; except socket.error, e:
&gt; conn.close()
&gt; if e[0] == errno.ECONNRESET:
&gt; # Grab another connection and try again.
&gt; continue
&gt; # Don't know how to handle this.
&gt; raise
&gt; except httplib.HTTPException:
&gt; # Just close the connection and try again.
&gt; conn.close()
&gt; continue
&gt;
&gt; # No luck, even with retrying.
&gt; raise RiakError("could not get a response")
&gt;
&gt;
&gt; At line number 626 in riak/transport/http.py
&gt; where http\\_requst is at http.RiakHttpTransport.http\\_request
&gt;
&gt;
&gt; This is error is coming very often. For what reason it is coming and how
&gt; to get permanent solution for this error .
&gt;
&gt; --
&gt; Thanks & Regards,
&gt; Naveen Tamanam
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;


-- 
Sean Cribbs 
Software Engineer
Basho Technologies, Inc.
http://basho.com/
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

