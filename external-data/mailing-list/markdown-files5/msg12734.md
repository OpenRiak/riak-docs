---
title: "Re: Updating Counters on Riak 2.0 pre whatever"
description: ""
project: community
lastmod: 2013-10-22T12:38:58-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12734"
mailinglist_parent_id: "msg12733"
author_name: "Jeremiah Peschka"
project_section: "mailinglistitem"
sent_date: 2013-10-22T12:38:58-07:00
---


As a follow up - typically when I'm asking questions about weird Riak
behavior, it's because I'm:

1) testing pre-production features of Riak for inclusion in the C# driver
2) testing features too scary to even be generously labeled as
pre-production
3) actively trying to break Riak to understand what happens when users do
crazy things with the C# client

Since I'm not a Basho FTE, you can expect these things to happen on the
public mailing list rather than in the privacy of a Basho engineering chat
room.

---
Jeremiah Peschka - Founder, Brent Ozar Unlimited
MCITP: SQL Server 2008, MVP
Cloudera Certified Developer for Apache Hadoop


On Tue, Oct 22, 2013 at 2:32 PM, Jared Morrow  wrote:

&gt; Darren,
&gt;
&gt; Yes we do, we are actively testing our pre builds as we speak. This code
&gt; was early pre-release and was stated as such. It is also on the 'develop'
&gt; branch which we advertise as development code and not necessarily fully
&gt; integration tested.
&gt;
&gt; Thanks for your concern.
&gt; -Jared
&gt;
&gt;
&gt; On Tue, Oct 22, 2013 at 1:21 PM, darren  wrote:
&gt;
&gt;&gt; Don't you guys do regression testing?
&gt;&gt;
&gt;&gt;
&gt;&gt; Sent from my Verizon Wireless 4G LTE Smartphone
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; -------- Original message --------
&gt;&gt; From: Russell Brown 
&gt;&gt; Date: 10/22/2013 3:07 PM (GMT-05:00)
&gt;&gt; To: Jeremiah Peschka 
&gt;&gt; Cc: riak-users 
&gt;&gt; Subject: Re: Updating Counters on Riak 2.0 pre whatever
&gt;&gt;
&gt;&gt;
&gt;&gt; Yes! Sorry!
&gt;&gt;
&gt;&gt; We broke backwards compatibility during development. We merged the patch
&gt;&gt; today[1]. The develop branch works right now. It will get into the next pre
&gt;&gt; (or whatever the next tag is called.)
&gt;&gt;
&gt;&gt; Apologies again, it was easier for me to do the new work without thinking
&gt;&gt; about backwards compatibility, then re-add old counters when the 2.0 stuff
&gt;&gt; was done.
&gt;&gt;
&gt;&gt; Let me know if you have any more issues going forward, please.
&gt;&gt;
&gt;&gt; Cheers
&gt;&gt;
&gt;&gt; Russell
&gt;&gt;
&gt;&gt; [1] https://github.com/basho/riak\\_kv/pull/697
&gt;&gt; On 22 Oct 2013, at 19:56, Jeremiah Peschka 
&gt;&gt; wrote:
&gt;&gt;
&gt;&gt; &gt; I'm attempting to create a counter on Riak 2.0 built from the develop
&gt;&gt; on Sunday. When I send a counter increment message using
&gt;&gt; RpbCounterUpdateReq, I get the following back from Riak:
&gt;&gt; &gt;
&gt;&gt; &gt; Riak returned an error. Code '0'. Message: Error processing incoming
&gt;&gt; message: error:undef:[{riak\\_kv\\_counter,supported,
&gt;&gt; &gt; [],[]},
&gt;&gt; &gt;
&gt;&gt; {riak\\_kv\\_pb\\_counter,process,
&gt;&gt; &gt; 2,
&gt;&gt; &gt; [{file,
&gt;&gt; &gt;
&gt;&gt; "src/riak\\_kv\\_pb\\_counter.erl"},
&gt;&gt; &gt; {line,114}]},
&gt;&gt; &gt; {riak\\_api\\_pb\\_server,
&gt;&gt; &gt; process\\_message,4,
&gt;&gt; &gt; [{file,
&gt;&gt; &gt;
&gt;&gt; "src/riak\\_api\\_pb\\_server.erl"},
&gt;&gt; &gt; {line,386}]},
&gt;&gt; &gt; {riak\\_api\\_pb\\_server,
&gt;&gt; &gt; connected,2,
&gt;&gt; &gt; [{file,
&gt;&gt; &gt;
&gt;&gt; "src/riak\\_api\\_pb\\_server.erl"},
&gt;&gt; &gt; {line,228}]},
&gt;&gt; &gt; {riak\\_api\\_pb\\_server,
&gt;&gt; &gt; decode\\_buffer,2,
&gt;&gt; &gt; [{file,
&gt;&gt; &gt;
&gt;&gt; "src/riak\\_api\\_pb\\_server.erl"},
&gt;&gt; &gt; {line,362}]},
&gt;&gt; &gt; {gen\\_fsm,handle\\_msg,7,
&gt;&gt; &gt; [{file,"gen\\_fsm.erl"},
&gt;&gt; &gt; {line,505}]},
&gt;&gt; &gt;
&gt;&gt; {proc\\_lib,init\\_p\\_do\\_apply,3,
&gt;&gt; &gt; [{file,"proc\\_lib.erl"},
&gt;&gt; &gt; {line,239}]}]
&gt;&gt; &gt; ---
&gt;&gt; &gt; Jeremiah Peschka - Founder, Brent Ozar Unlimited
&gt;&gt; &gt; MCITP: SQL Server 2008, MVP
&gt;&gt; &gt; Cloudera Certified Developer for Apache Hadoop
&gt;&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; &gt; riak-users mailing list
&gt;&gt; &gt; riak-users@lists.basho.com
&gt;&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;
&gt;&gt;
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;
&gt;&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

