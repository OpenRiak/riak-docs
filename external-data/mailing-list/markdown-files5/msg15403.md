---
title: "Re: Weird RIAK behavior"
description: ""
project: community
lastmod: 2014-12-22T18:57:39-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15403"
mailinglist_parent_id: "msg15402"
author_name: "Alexander Sicular"
project_section: "mailinglistitem"
sent_date: 2014-12-22T18:57:39-08:00
---


Same client code writing to all 5 clusters? 

How does the config of the 5th cluster differ from the first 4?

Quick notes:
Minimum of 5 nodes for a production deployment to ensure the default 3 replicas 
are all on different physical nodes. Which is a good segue into the fact that 
you shouldn't run multiple Riak nodes on the same physical hardware. 
Performance aside, if you lose that physical machine you lose all your data. 


@siculars
http://siculars.posthaven.com

Sent from my iRotaryPhone

&gt; On Dec 22, 2014, at 18:59, Claudio Cesar Sanchez Tejeda 
&gt;  wrote:
&gt; 
&gt; I'm a sysadmin and I managing 5 cluster of RIAK:
&gt; 
&gt; - two of them are LXC containers on the same physical machine (3 nodes
&gt; per cluster)
&gt; - one of them are LXC containers located on different physical
&gt; machines (6 nodes)
&gt; - one of them are LXC containers located on different physical
&gt; machines and XEN VMs (6 nodes)
&gt; - and the last of them are VMware ESX VMs (3 nodes)
&gt; 
&gt; Our application works correctly on the first four clusters, but it
&gt; doesn't work as we expected on the last one.
&gt; 
&gt; When we update a key and we retrieve this key in order to write it
&gt; again, it has an old value (it doesn't have the first value that we
&gt; wrote), for example:
&gt; 
&gt; The key has: lalala
&gt; We retrieve the key, and add lololo, so it should be lalala,lololo
&gt; We retrieve the key again, and try to add lelele, so it should be now:
&gt; lalala,lololo,lelele, but when we retrieve it again, we only have:
&gt; lalala,lelele
&gt; 
&gt; In the second write action, when we retrieve the key, we obtained a
&gt; key with the old value. We set r, w, pr and rw to 3 to the REST
&gt; requests, but it doesn't help.
&gt; 
&gt; All the configuration files are very similiar and we don't have any
&gt; major differences in the disk I/O and network performance of the nodes
&gt; of the clusters.
&gt; 
&gt; Did anyone have a similar issue?
&gt; 
&gt; Regards.
&gt; 
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

