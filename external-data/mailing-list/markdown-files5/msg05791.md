---
title: "Re: Question: {error,{error,insufficient_vnodes_available}}"
description: ""
project: community
lastmod: 2011-11-29T11:32:51-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05791"
mailinglist_parent_id: "msg05765"
author_name: "Dan Reverri"
project_section: "mailinglistitem"
sent_date: 2011-11-29T11:32:51-08:00
---


Hi Walter,

It is not recommended to run more than 1 node per machine. Also, creating a
new node by copying/pasting an existing node is not a good idea.

Were you seeing "insufficient vnodes" before you tried adding nodes?
Was the node under any load? MapReduce, ListKeys, etc.
What does "riak-admin status" return on the original node?
What does "riak-admin ring\\_status" return on the original node?
What does "riak-admin "member\\_status" return on the original node?

I am concerned that the addition of copied nodes may be creating additional
issues. I would recommend getting the cluster back to a steady state with a
single node. Once this is complete we can review the issues and determine
what the problem might be.

Thanks,
Dan

Daniel Reverri
Developer Advocate
Basho Technologies, Inc.
d...@basho.com


On Mon, Nov 28, 2011 at 3:06 PM, Chung-Hung (Walter) Tsai &lt;
waltert...@gmail.com&gt; wrote:

&gt; Hi Dan,
&gt;
&gt; Yes, I use non-default name parameter and reip it.
&gt;
&gt; Please find my setting and setup info as below:
&gt;
&gt; Version: 1.0.2, .deb
&gt; Linux: Unbuntu 10.4, 64bits
&gt; Vnode: I didn't specify the other 2 nodes specifically, just used
&gt; default setting and did riak start.
&gt; The DB has a bumping due to insufficient file descriptor and got
&gt; resolved after I set ulimit and sysctl for system-wide parameters.
&gt; It ran ok for several days but since yesterday, it gave us the error
&gt; message regarding insufficient vnodes errors.
&gt;
&gt; I'm trying to setup 2 additional nodes by copying and modding
&gt; necessary files (e.g. /usr/sbin/riak to /usr/sbin/riakN) manually now.
&gt; But they each become a single cluster with just a single member in it
&gt; and doesn't allow other vnodes to join.
&gt; When I launch "riak-admin", it shows something like " ... 100% ...
&gt; riak@MY-IP-ADDRESS"
&gt;
&gt;
&gt; Thanks,
&gt; Walter
&gt;
&gt; 2011/11/29 Dan Reverri :
&gt; &gt; Hi Walter,
&gt; &gt; Have you made any changes to your configuration recently such as changing
&gt; &gt; the "-name" parameter in vm.args?
&gt; &gt; Thanks,
&gt; &gt; Dan
&gt; &gt; Daniel Reverri
&gt; &gt; Developer Advocate
&gt; &gt; Basho Technologies, Inc.
&gt; &gt; d...@basho.com
&gt; &gt;
&gt; &gt;
&gt; &gt; On Mon, Nov 28, 2011 at 1:04 AM, Chung-Hung (Walter) Tsai
&gt; &gt;  wrote:
&gt; &gt;&gt;
&gt; &gt;&gt; Hello everyone,
&gt; &gt;&gt;
&gt; &gt;&gt; We just saw many errors like this:
&gt; &gt;&gt;
&gt; &gt;&gt; 2011-11-27 23:02:01.129 [error] &lt;0.700.0&gt; webmachine error:
&gt; &gt;&gt; path="/buckets/.. (SKIPPED).....ui"
&gt; &gt;&gt; {error,{error,insufficient\\_vnodes\\_available}}
&gt; &gt;&gt;
&gt; &gt;&gt; The DB went well for several days, but now our riak cannot be
&gt; &gt;&gt; connected from our code since the errors appear.
&gt; &gt;&gt; Does anyone know how to resolve the issue?
&gt; &gt;&gt;
&gt; &gt;&gt;
&gt; &gt;&gt; Thanks,
&gt; &gt;&gt; Walter
&gt; &gt;&gt;
&gt; &gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt;&gt; riak-users mailing list
&gt; &gt;&gt; riak-users@lists.basho.com
&gt; &gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; &gt;
&gt; &gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

