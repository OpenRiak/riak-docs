---
title: "Re: Quickly deleting + recreating item in Riak deletes new item"
description: ""
project: community
lastmod: 2013-07-17T07:58:49-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11572"
mailinglist_parent_id: "msg11562"
author_name: "Kelly McLaughlin"
project_section: "mailinglistitem"
sent_date: 2013-07-17T07:58:49-07:00
---


Matthew,

I find it really surprising that you don't see any difference in behavior
when you set delete\\_mode to keep. I think it would be helpful if you could
outline your specific setup and give the steps to reproduce what you're
seeing to be able to make a determination if this represents a bug or not.
Thanks.

Kelly


On Tue, Jul 16, 2013 at 11:33 PM, Matthew Dawson wrote:

&gt; On July 16, 2013 12:00:36 PM Gabriel Littman wrote:
&gt; &gt; Please correct me if I'm wrong, but I think the right answer is doing a
&gt; GET
&gt; &gt; first so you have a vector clock that is after the delete. Then you
&gt; should
&gt; &gt; be able to be sure your new write wins in any sibling resolution.
&gt; &gt;
&gt; &gt; Gabe
&gt; &gt;
&gt; I would assume this to be the case. I've even made sure my delete requests
&gt; all have vclocks attached (by doing a GET first). However I still see
&gt; missing
&gt; keys every so often.
&gt;
&gt; By making each key unique across runs of the test suite seems to solve
&gt; things,
&gt; but I don't like that as a solution. And I'm not sure if this is an actual
&gt; bug or not. If this behaviour is considered a bug, I can try making a
&gt; minimal
&gt; reproducible test case and file a bug using that.
&gt; --
&gt; Matthew
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

