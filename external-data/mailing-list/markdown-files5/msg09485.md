---
title: "RE: Second of multi-node setup on Azure is invisible"
description: ""
project: community
lastmod: 2012-12-08T21:34:23-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg09485"
mailinglist_parent_id: "msg09482"
author_name: "Kevin Burton"
project_section: "mailinglistitem"
sent_date: 2012-12-08T21:34:23-08:00
---


If this request for clarification falls on the right ears I have two more
requests:

 

Could some clarification in the instructions be made for the statement:

 

riak-admin cluster plan

If this looks good:

 

It is unclear to me and maybe other beginners what 'good' looks like.

 

Also:

 

Load test data

Execute on any one of the nodes:

curl -s http://rekon.basho.com | sh

Visit DNS address listed on the dashboard, at the port we opened as an
endpoint:

http://testlinuxvm.cloudapp.net:8098/riak/rekon/go

 

We just loaded test data onto one of the Azure nodes. Was this necessary?
What did it do? What "tests" does the web page run? Is this kind of a
'ping'?

 

Thank you for your patience.

 

From: Michael Johnson [mailto:m...@mediatemple.net] 
Sent: Saturday, December 08, 2012 6:09 PM
To: Kevin Burton
Subject: Re: Second of multi-node setup on Azure is invisible

 

By functional, I simply mean that the vms are up and running, have internet
connectivity, and you have a way to get onto the console or ssh into them.

 

What you describe could work assuming the the public ip has some sort of
load balancing in front of it. That is fine as long as you have a way to
get connected to both boxes and you configure riake to utilize the private
ip addresses.

 

You will need to find out how to ssh into the second node which is going to
depend on a lot of things specific to Windows Azure. Perhaps you can ssh
into the public ip to get connected to node1 and then ssh from there to the
private ip of node2?

 

Until you can get to a command line on both nodes, you are not going to be
able to go any further. If the way to do that is not evident, then you may
need to contact support for Windows Azure to figure this out.

 

As to why the instructions you linked to didn't work, I can only guess that
either something has changed on the Windows Azure side of things or perhaps
something went wrong on their side of things which isn't immediately
evident. Or perhaps the instructions simply are wrong. I have no way
confirm any of these things.

 

Hopefully, either the person who wrote those instructions or someone else
who has used them can chime in and provide some insight.

 

On Sat, Dec 8, 2012 at 4:29 AM, Kevin Burton 
wrote:

Again the public IPs are the same. The internal IPs are different. Is that
the way it is supposed to be?



On Dec 8, 2012, at 1:05 AM, Michael Johnson  wrote:

I just looked at the instructions and they do seem to step you through
creating the virtual machines and clearly that didn't work for you. Maybe
someone else on this list is familiar with that the Windows Azure setup, but
if you figure out how to give the vms different ips, you should be good to
go. 

On Dec 7, 2012 10:56 PM, "Michael Johnson"  wrote:

You say both nodes have the same ip address? If I am reading that right,
this is your problem. There may be other issues as well, but the same ip on
two machines is always a problem.

Well, that's not entirely true, but in case of most things including riak,
it is.

The instructions assume that you have two functional machines to start with,
but it sounds like this us not the case. 

On Dec 7, 2012 9:18 PM, "Kevin Burton"  wrote:

I tried to restart the VMs and when I log back in to node1 I get

 

[azureuser@node1 ~]$ sudo riak-admin cluster join riak@
 

Attempting to restart script through sudo -H -u riak

sudo: unable to change directory to /var/lib/riak: No such file or directory

sudo: unable to execute /bin/bash: No such file or directory

 

From: Kevin Burton [mailto:rkevinbur...@charter.net] 
Sent: Friday, December 07, 2012 11:03 PM
To: riak-users@lists.basho.com
Subject: RE: Second of multi-node setup on Azure is invisible

 

Also I get the following error when trying to join ('node1') to the cluster:

 

[root@node1 ~]# riak-admin cluster join riak@
 

 

Attempting to restart script through sudo -H -u riak

Join failed. Try again in a few moments.

 

From: Kevin Burton [mailto:rkevinbur...@charter.net] 
Sent: Friday, December 07, 2012 10:54 PM
To: riak-users@lists.basho.com
Subject: Second of multi-node setup on Azure is invisible

 

I am trying to follow the instructions at
http://docs.basho.com/riak/latest/tutorials/installation/Installing-on-Windo
ws-Azure/. For now I am setting up two nodes. The first node works fine. But
with the second node I am not able to specify a DNS name (since it is not
stand alone). So effectively what I call 'node2' doesn't exist. It shows up
in the portal but PuTTY opening to node2.cloudapp.net does not exist (at
least I cannot connect). They both have the same public IP address. The
instructions indicate that I should install riak on both machines:

 

1. On each node, once you've connected using the steps above:

Execute:

sudo su -

 

curl -s
https://raw.github.com/glickbot/riak\\_on\\_azure/master/azure\\_install\\_riak.sh |
sh

 

But since I cannot SSH to the second node I cannot do this. Am I missing
something in the instructions?

 


\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

 

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

