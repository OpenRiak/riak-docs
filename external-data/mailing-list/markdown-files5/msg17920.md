---
title: "Re: Secondary indexes or Riak search ?"
description: ""
project: community
lastmod: 2017-02-06T03:04:36-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17920"
mailinglist_parent_id: "msg17919"
author_name: "Alex Feng"
project_section: "mailinglistitem"
sent_date: 2017-02-06T03:04:36-08:00
---


Hi Russell,

It is really helpful, thank you a lot.
We are suffering from solr crash now, are considering to switch to 2i.

Br,
Alex

2017-02-06 16:53 GMT+08:00 Russell Brown :

&gt; It’s worth noting that secondary indexes (2i) has some other advantages
&gt; over solr search. If you \\_can\\_ model your queries in 2i then I'd recommend
&gt; it.
&gt;
&gt; Secondary indexes have a richer API than is currently documented, if you
&gt; look at https://docs.basho.com/riak/1.4.7/dev/using/2i/ you’ll see that
&gt; documents a feature that allows the index terms to be filtered via reg ex.
&gt; There is also the feature that can return the actual riak objects for a
&gt; $keys index search,
&gt; You can pack the index terms with data and return the terms in a query so
&gt; that you don’t need a further object fetch (see return\\_terms in docs.)
&gt; Secondary indexes are written atomically with the object they index.
&gt; Operationally they don’t require you run a JVM and Solr alongside your
&gt; riak nodes.
&gt;
&gt; You have the tools with basho\\_bench to answer the question about
&gt; performance and overhead for your workload. I suspect for “overhead” 2i
&gt; wins, as there is no JVM-per-node.
&gt;
&gt; Modelling for 2i is perhaps harder, in the classical nosql way, you have
&gt; to do more work upfront when designing your querying.
&gt;
&gt; I hope that helps a little. I worked quite a lot on 2i and never really
&gt; understood why riak-search was seen as a replacment, imo they’re
&gt; complementary, and you pick the one that best fits.
&gt;
&gt; Cheers
&gt;
&gt; Russell
&gt;
&gt; On 2 Feb 2017, at 09:43, Alex Feng  wrote:
&gt;
&gt; &gt; Hello Riak-users,
&gt; &gt;
&gt; &gt; I am currently using Riak search to do some queries, since my queries
&gt; are very simple, it should be fulfilled by secondary indexes as well.
&gt; &gt; So, my question is which one has better performance and less overhead,
&gt; let's say both can fulfill the query requirement.
&gt; &gt;
&gt; &gt; Many thanks in advance.
&gt; &gt;
&gt; &gt; Br,
&gt; &gt; Alex
&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

