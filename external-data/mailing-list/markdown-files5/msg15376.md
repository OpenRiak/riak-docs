---
title: "Re: RiakSearch with java-client"
description: ""
project: community
lastmod: 2014-12-17T07:08:01-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15376"
mailinglist_parent_id: "msg15367"
author_name: "Luke Bakken"
project_section: "mailinglistitem"
sent_date: 2014-12-17T07:08:01-08:00
---


Hi Santi,

Do you have any error in your Riak log files? They'll be located in
/var/log/riak or dev\\*/log (if you're using a devrel). In particular,
look in the solr.log file.
--
Luke Bakken
Engineer / CSE
lbak...@basho.com


On Mon, Dec 15, 2014 at 2:08 AM, Santi Kumar  wrote:
&gt; Hi
&gt; I'm tying to use Riak Search 2.0 with java client. Couldn't find any good
&gt; documentation around that so I'm trying on my own. I've created my own
&gt; custom schema and want to setup this to my index. While executing the
&gt; StoreSchema command, was getting below error with some message bits.
&gt;
&gt; com.basho.riak.client.core.netty.RiakResponseException: Error processing
&gt; incoming message: error:function\\_clause:xxxxxxx
&gt;
&gt;
&gt; Here is how I'm adding the Custom schema and adding index. Let me know If
&gt; I'm doing something wrong
&gt;
&gt; public static void buildSearchIndex(String bucketName,String indexName)
&gt; throws Exception{
&gt;
&gt; InputStream systemResourceAsStream =
&gt; ClassLoader.getSystemResourceAsStream("./veradocs-solr-schema.xml");
&gt;
&gt; String schema = IOUtils.toString(systemResourceAsStream,"UTF-8");
&gt;
&gt; RiakClient client = RiakClientUtil.getClient();
&gt;
&gt; YokozunaSchema yschema = new YokozunaSchema("veradocs-rs", schema);
&gt;
&gt; StoreSchema storeSchemaOp = new StoreSchema.Builder(yschema).build();
&gt;
&gt; client.execute(storeSchemaOp);
&gt;
&gt; YokozunaIndex vdIndex = new YokozunaIndex(indexName,schema);
&gt;
&gt; StoreIndex storeIndex =
&gt;
&gt; new StoreIndex.Builder(vdIndex).build();
&gt;
&gt; client.execute(storeIndex);
&gt;
&gt; Namespace catsBucket = new Namespace(bucketName);
&gt;
&gt; StoreBucketProperties storeBucketProps = new
&gt; StoreBucketProperties.Builder(catsBucket)
&gt;
&gt; .withSearchIndex(indexName)
&gt;
&gt; .build();
&gt;
&gt; RiakFuture executeAsync =
&gt; client.executeAsync(storeBucketProps);
&gt;
&gt; executeAsync.get();
&gt;
&gt; }
&gt;
&gt; Thanks
&gt; Santi
&gt;
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

