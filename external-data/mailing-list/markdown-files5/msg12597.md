---
title: "Re: Bucket properties not updated"
description: ""
project: community
lastmod: 2013-10-10T15:38:31-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12597"
mailinglist_parent_id: "msg12595"
author_name: "Jordan West"
project_section: "mailinglistitem"
sent_date: 2013-10-10T15:38:31-07:00
---


On Thu, Oct 10, 2013 at 2:09 PM, Daniel Iwan  wrote:

&gt; There is no coordination between servers so concurrent update of
&gt; properties is possible.
&gt; That would certainly explain a lot.
&gt;
&gt; In my case though I'm setting allow\\_mult back to true so eventually that
&gt; should win? Or would propagation through ring potentially break that logic
&gt; and allow\\_multi = false could win?
&gt;

It really depends on when the writes occur, if they are all to the same
node, etc. Things are a bit busy right now but if you could make a sample
application I'd be happy to run it and take a look when I get a chance.
I've also been meaning to look at Jeremiah's issue.


&gt; Also could clock drift on the servers be problematic here?
&gt;

Yes


&gt; It's good to hear you plan to solve that. I'm assuming it's going to be
&gt; some sort of vclock causality applied to properties?
&gt;

Pretty much. In the next release, buckets defined under non-default types
[1] will be resolved with some sort of conflict resolver built into Riak
(e.g. if there is a conflict resolve to allow\\_mult to be safe). Buckets in
the default type will be addressed in a subsequent release.

[1] https://github.com/basho/riak/issues/362

Jordan


&gt; D.
&gt;
&gt;
&gt; On 10 October 2013 21:06, Jordan West  wrote:
&gt;
&gt;&gt; Hi Daniel,
&gt;&gt;
&gt;&gt; You mentioned this was running on three servers simultaneously. Is it
&gt;&gt; possible that two of the bucket property updates were truly concurrent? If
&gt;&gt; so, an implementation detail of bucket properties: they are last-write-wins
&gt;&gt; (and unfortunately the resolution is in milliseconds)\\*. So its feasible
&gt;&gt; that in some cases the allow\\_mult=false would win.
&gt;&gt;
&gt;&gt; Cheers,
&gt;&gt; Jordan
&gt;&gt;
&gt;&gt; \\*this is something we plan to address in future releases.
&gt;&gt;
&gt;&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

