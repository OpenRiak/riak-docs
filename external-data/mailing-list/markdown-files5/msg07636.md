---
title: "Re: Node will not leave cluster"
description: ""
project: community
lastmod: 2012-06-07T10:21:29-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07636"
mailinglist_parent_id: "msg07626"
author_name: "David Greenstein"
project_section: "mailinglistitem"
sent_date: 2012-06-07T10:21:29-07:00
---



As it turns out, this is a known issue with 1.0.x. It is documented with a 
workaround in the release note named riak-1.0.org under "Ownership Handoff 
Stall".

Dave

\\_\\_\\_\\_
David Greenstein : Founder & CTO : Kibits Labs : d...@kibits.com : 617-901-9473 
: www.kibits.com
Get the iPhone or Android app now: http://www.kibits.com/app



On Jun 6, 2012, at 12:50 PM, David Greenstein wrote:

&gt; 
&gt; Thanks Austin.
&gt; 
&gt; Interestingâ€¦ after running the ring\\_status command it seems there are several 
&gt; handoffs that are either hung or not completing. The database is fairly small 
&gt; and running the ring\\_status command over several minutes reveals the same 
&gt; output.
&gt; 
&gt; The member\\_status is 25% for ring and pending for the node leaving.
&gt; 
&gt; So, I think something is wrong with the handoff, but, as far as I can tell, 
&gt; there's no indication as to what is wrong in the logs or in the output of 
&gt; these commands.
&gt; 
&gt; ============================== Ownership Handoff 
&gt; ==============================
&gt; Owner: riak@10.0.1.14
&gt; Next Owner: riak@10.0.1.15
&gt; 
&gt; Index: 479555224749202520035584085735030365824602865664
&gt; Waiting on: []
&gt; Complete: [riak\\_kv\\_vnode,riak\\_pipe\\_vnode]
&gt; 
&gt; Index: 1027618338748291114361965898003636498195577569280
&gt; Waiting on: []
&gt; Complete: [riak\\_kv\\_vnode,riak\\_pipe\\_vnode]
&gt; 
&gt; Index: 1301649895747835411525156804137939564381064921088
&gt; Waiting on: []
&gt; Complete: [riak\\_kv\\_vnode,riak\\_pipe\\_vnode]
&gt; 
&gt; -------------------------------------------------------------------------------
&gt; Owner: riak@10.0.1.15
&gt; Next Owner: riak@10.0.1.14
&gt; 
&gt; Index: 913438523331814323877303020447676887284957839360
&gt; Waiting on: []
&gt; Complete: [riak\\_kv\\_vnode,riak\\_pipe\\_vnode]
&gt; 
&gt; -------------------------------------------------------------------------------
&gt; Owner: riak@10.0.1.16
&gt; Next Owner: riak@10.0.1.15
&gt; 
&gt; Index: 936274486415109681974235595958868809467081785344
&gt; Waiting on: []
&gt; Complete: [riak\\_kv\\_vnode,riak\\_pipe\\_vnode]
&gt; 
&gt; -------------------------------------------------------------------------------
&gt; 
&gt; 
&gt; ============================== Unreachable Nodes 
&gt; ==============================
&gt; All nodes are up and reachable
&gt; 
&gt; [root@ip-10-0-1-20 ec2-user]# /db/riak/bin/riak-admin member\\_status
&gt; ================================= Membership 
&gt; ==================================
&gt; Status Ring Pending Node
&gt; -------------------------------------------------------------------------------
&gt; leaving 25.0% 25.0% 'riak@10.0.1.20'
&gt; valid 28.1% 25.0% 'riak@10.0.1.14'
&gt; valid 20.3% 25.0% 'riak@10.0.1.15'
&gt; valid 26.6% 25.0% 'riak@10.0.1.16'
&gt; -------------------------------------------------------------------------------
&gt; Valid:3 / Leaving:1 / Exiting:0 / Joining:0 / Down:0
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; Any other clues would be appreciated. Thank you!
&gt; 
&gt; Dave
&gt; 

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

