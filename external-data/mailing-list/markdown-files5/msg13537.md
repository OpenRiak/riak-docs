---
title: "Re: last_write_wins"
description: ""
project: community
lastmod: 2014-01-30T02:47:04-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13537"
mailinglist_parent_id: "msg13536"
author_name: "Russell Brown"
project_section: "mailinglistitem"
sent_date: 2014-01-30T02:47:04-08:00
---



On 30 Jan 2014, at 10:37, Edgar Veiga  wrote:

&gt; Also,
&gt; 
&gt; Using last\\_write\\_wins = true, do I need to always send the vclock while on a 
&gt; PUT request? In the official documention it says that riak will look only at 
&gt; the timestamp of the requests.

Ok, from what youâ€™ve said it sounds like you are always wanting to replace what 
is at a key with the new information you are putting. If that is the case, then 
you have the perfect use case for LWW=true. And indeed, you do not need to pass 
a vclock with your put request. And it sounds like there is no need for you to 
fetch-before-put since that is only to get context /resolve siblings. Curious 
about your use case if you can share more.

Cheers

Russell


&gt; 
&gt; Best regards,
&gt; 
&gt; 
&gt; On 29 January 2014 10:29, Edgar Veiga  wrote:
&gt; Hi Russel,
&gt; 
&gt; No, it doesn't depend. It's always a new value.
&gt; 
&gt; Best regards
&gt; 
&gt; 
&gt; On 29 January 2014 10:10, Russell Brown  wrote:
&gt; 
&gt; On 29 Jan 2014, at 09:57, Edgar Veiga  wrote:
&gt; 
&gt;&gt; tl;dr
&gt;&gt; 
&gt;&gt; If I guarantee that the same key is only written with a 5 second interval, 
&gt;&gt; is last\\_write\\_wins=true profitable?
&gt; 
&gt; It depends. Does the value you write depend in anyway on the value you read, 
&gt; or is it always that you are just getting a totally new value that replaces 
&gt; what is in Riak (regardless what is in Riak)?
&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; On 27 January 2014 23:25, Edgar Veiga  wrote:
&gt;&gt; Hi there everyone!
&gt;&gt; 
&gt;&gt; I would like to know, if my current application is a good use case to set 
&gt;&gt; last\\_write\\_wins to true.
&gt;&gt; 
&gt;&gt; Basically I have a cluster of node.js workers reading and writing to riak. 
&gt;&gt; Each node.js worker is responsible for a set of keys, so I can guarantee 
&gt;&gt; some kind of non distributed cache... 
&gt;&gt; The real deal here is that the writing operation is not run evertime an 
&gt;&gt; object is changed but each 5 seconds in a "batch insertion/update" style. 
&gt;&gt; This brings the guarantee that the same object cannot be write to riak at 
&gt;&gt; the same time, not event at the same seconds, there's always a 5 second 
&gt;&gt; window between each insertion/update.
&gt;&gt; 
&gt;&gt; That said, is it profitable to me if I set last\\_write\\_wins to true? I've 
&gt;&gt; been facing some massive writting delays under high loads and it would be 
&gt;&gt; nice if I have some kind of way to tune riak.
&gt;&gt; 
&gt;&gt; Thanks a lot and keep up the good work!
&gt;&gt; 
&gt;&gt; 
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; 
&gt; 
&gt; 

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

