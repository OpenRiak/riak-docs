---
title: "Riak replication and quorum"
description: ""
project: community
lastmod: 2011-05-13T08:29:47-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03326"
author_name: "Peter Fales"
project_section: "mailinglistitem"
sent_date: 2011-05-13T08:29:47-07:00
---



I'm a Riak newbie, trying to get some familiarity with the system by
runing some tests on Amazon EC2. I'm seeing some behavior that I don't 
understand...

I've set up a test where I create a 4-node cluster using 4 EC2 machines.
I've created a bucket with n\\_val=4, r=quorum, and w=quorum. For
n\\_val=4, the quorum should be 3, so I thought I would have to have at
least 3 nodes in service for my read and write operations to succeed.
During my test, I start sending read/write requests to two of the nodes
(and I see the CPU load go up on all four nodes, so I know they are
talking to each other). Then I reboot the other two nodes. At that 
point, I was expecting the reads and writes to start failing, but in 
fact I usually don't see any problems. (sometimes the query that is 
in progress at the time may fail or timeout, but if I establish a new
connection to the server, and start sending read/write requests again,
those requests will go through, even with only two of the 4 nodes in service)

I suspect I'm just missing something obvious, but I don't understand how
I can run with just two nodes. What am I missing?

-- 
Peter Fales
Alcatel-Lucent
Member of Technical Staff
1960 Lucent Lane
Room: 9H-505
Naperville, IL 60566-7033
Email: peter.fa...@alcatel-lucent.com
Phone: 630 979 8031

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

