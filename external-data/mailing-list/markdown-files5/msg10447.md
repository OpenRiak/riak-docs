---
title: "RE: Binary data"
description: ""
project: community
lastmod: 2013-03-14T15:16:32-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg10447"
mailinglist_parent_id: "msg10444"
author_name: "Kevin Burton"
project_section: "mailinglistitem"
sent_date: 2013-03-14T15:16:32-07:00
---


Good. Is this the correct way to do it? Basically it is a modification of
the program that I have been using for the JSON data. Here is the modified
code:

 string fileName = "..\\\\..\\\\test.jpg";

 string bucket = "images";

 byte[] buffer = File.ReadAllBytes(fileName);

 Debug.WriteLine("number of bytes read: " + buffer.Length);

 

 IRiakEndPoint cluster = RiakCluster.FromConfig("riakConfig");

 IRiakClient riakClient = cluster.CreateClient();

 RiakResult pingResult = riakClient.Ping();

 if (pingResult.IsSuccess)

 {

 RiakObject value = new RiakObject(bucket,

 "1.jpg",

 buffer,

 
RiakConstants.ContentTypes.ImageJpg,

 
RiakConstants.CharSets.Utf8);

 RiakResult response = riakClient.Put(value);

 if (!response.IsSuccess)

 {

 Debug.WriteLine(string.Format("Error ('{0}' - {1}:
Writing {2}",

 response.ErrorMessage,

 response.ResultCode,

 "1.jpg"));

 }

 }

 }

 

From: Jeremiah Peschka [mailto:jeremiah.pesc...@gmail.com] 
Sent: Thursday, March 14, 2013 4:57 PM
To: Kevin Burton
Cc: riak-users
Subject: Re: Binary data

 

How are you reading the JPEG and saving it to Riak? A code sample would be
lovely.

 

CorrugatedIron doesn't need a `--data-binary` option. All operations are
performed over the protocol buffers interface (barring several bucket
properties operations) - we don't alter any data that comes in to CI, we
just send and receive bytes on a socket. Much like curl, though, if you send
in junk data, CI is happily going to return that junk data back to you.




---

Jeremiah Peschka - Founder, Brent Ozar Unlimited

MCITP: SQL Server 2008, MVP

Cloudera Certified Developer for Apache Hadoop

 

On Thu, Mar 14, 2013 at 2:12 PM, Kevin Burton 
wrote:

I read on the FAQ how to get the same number of bytes as was stored:

When storing a non-text object like a PNG file in Riak and then retrieving
it with curl, it comes back a different size. For Example:

curl -i -X PUT --data @g005.PNG\\_L -H "Content-Type: image/png"
http://sfdev02:8098/luwak/g005.PNG\\_L

Curl will try to convert non-ASCII characters in PUT and POST bodies. Use
the --data-binary flag to turn this off:

curl -i -X PUT --data-binary @g005.PNG\\_L -H "Content-Type: image/png"
http://sfdev02:8098/luwak/g005.PNG\\_L

 

Is there an option like '-data-binary' for CorrugatedIron? I am 'put'ing
what should be binary data but if I retrieve the data with curl I get a
different size and if the binary data is a jpeg image it comes back as
corrupted?

 


\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

 

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

