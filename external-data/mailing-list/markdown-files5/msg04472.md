---
title: "Re: odd error on mapreduce"
description: ""
project: community
lastmod: 2011-08-26T04:11:31-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg04472"
mailinglist_parent_id: "msg04471"
author_name: "Bryan Fink"
project_section: "mailinglistitem"
sent_date: 2011-08-26T04:11:31-07:00
---


On Fri, Aug 26, 2011 at 6:32 AM, Giancarlo Frison  wrote:
&gt; If i serialize the body as Json I catch errors any more instead of protobuf
&gt; object representation (application/octet-stream).
&gt; Would be an mapreduce bug?
&gt; Is it possibile to skirt any body parsing during the mapreduce? Just for
&gt; evaluating headers values?

All objects passed through Javascript map or reduce phases must be
valid UTF-8-encoded JSON. There is no way to change that at this
time. Erlang map/reduce phases do not have such requirements.

The fact that your earlier ProtocolBuffer-encoded object made it
through a Javascript phase was probably a fluke, based on the encoding
containing nothing that was completely invalid UTF-8. It probably
came through as a string, maybe with one or two odd characters
prepended.

Hope that helps,
Bryan

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

