---
title: "Re: reducing n_val"
description: ""
project: community
lastmod: 2013-07-16T06:25:48-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11551"
mailinglist_parent_id: "msg11550"
author_name: "Christopher Meiklejohn"
project_section: "mailinglistitem"
sent_date: 2013-07-16T06:25:48-07:00
---


On Tuesday, July 16, 2013 at 8:32 AM, Simon Effenberg wrote:
&gt; is it possible to reduce the n\\_val? I mean you can change it but what
&gt; happens then?
&gt; 
&gt; - is old data removed or is it laying around? (or maybe deleted after
&gt; some time thanks to AAE?)

Changing the n\\_val setting in the default bucket properties will only affect 
new PUT operations moving forward. Older replicas will not be removed, and the 
AAE process will not purge older, unneeded replicas.

&gt; 
&gt; - is it causing problems like:
&gt; - reducing n\\_val from 3 to 2
&gt; - update data
&gt; - sleep 10minutes
&gt; - read data but second primary is borked =&gt; is the first fallback
&gt; vnode on the place where the 3rd n\\_val vnode was before? So is this
&gt; reading old crappy data (maybe the vclock is rescuing there but
&gt; that's only one edge case I can think off right now)?

It's possible that the fallback virtual node will be started on the same 
physical node that originally hosted the third primary, however, it will be a 
different virtual node and backend directory as these are parameterized based 
on partition identifier and node.

- Chris

-- 
Christopher Meiklejohn
Software Engineer

Basho Technologies, Inc. 


\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

