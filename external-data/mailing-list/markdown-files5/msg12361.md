---
title: "Re: Riak won't start when configured for Riak-CS"
description: ""
project: community
lastmod: 2013-09-24T07:08:45-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12361"
mailinglist_parent_id: "msg12358"
author_name: "Darren Govoni"
project_section: "mailinglistitem"
sent_date: 2013-09-24T07:08:45-07:00
---



Brian,
    Thanks. I will try that again. Perhaps there is a way for the
 package scripts or build scripts to detect this situation in the
 future?

 thanks,
 Darren

 On 09/24/2013 09:42 AM, Brian Sparrow wrote:


Hey Darren,
 

As Dave said, the reason for a bad file error is the beam
 was compiled with one version of the Erlang VM and it is not
 being run in a different version. My suggestion would be to
 completely remove all RiakCS installations you have(from
 source and from package) and re-install from the .deb package.
 This has the correct version of Erlang packaged within it so
 you shouldn't have a problem.


Thanks!
Brian




-- 
Brian Sparrow
Developer Advocate
Basho Technologies


Sent with Sparrow



On Tuesday, September 24, 2013 at 5:14
 AM, Darren Govoni wrote:




Hi!

 I did build Riak-CS from source, but there is no
 'install' target in the make so I wasn't sure how that
 got done.
 There was no 'install' readme also.

 I then installed the .deb instead.

 I installed erlang from ubuntu 13.04 repo. 

 On 09/23/2013 11:16 PM, Dave Parfitt wrote:



Hello -


Sounds like you have an older version of Erlang
 trying to load code compiled with a newer version of
 Erlang.


Cheers,
Dave

 On Sep 23, 2013, at 10:48 PM, Darren Govoni 

 wrote:





 
 Hi,
   I am following the directions for configuring
 Riak with Riak-CS.

http://docs.basho.com/riakcs/latest/cookbooks/configuration/Configuring-Riak/

 When I follow the directions, riak console gives
 a problem when starting:

 22:43:33.174 [error] Loading of
 /usr/lib/riak-cs/lib/riak\\_cs-1.4.1/ebin/riak\\_cs\\_kv\\_multi\\_backend.beam
 failed: badfile

 22:43:33.174 [error] Failed to start
 riak\\_cs\\_kv\\_multi\\_backend Reason:
{undef,[{riak\\_cs\\_kv\\_multi\\_backend,start,[0,[{async\\_folds,true},[{vnode\\_vclocks,true},{included\\_applications,[]},{allow\\_strfun,false},{reduce\\_js\\_vm\\_count,6},{storage\\_backend,riak\\_cs\\_kv\\_multi\\_backend},{legacy\\_keylisting,false},{pb\\_ip,"127.0.0.1"},{hook\\_js\\_vm\\_count,2},{listkeys\\_backpressure,true},{mapred\\_name,"mapred"},{stats\\_urlpath,"stats"},{legacy\\_stats,true},{js\\_thread\\_stack,16},{multi\\_backend,[{be\\_default,riak\\_kv\\_eleveldb\\_backend,[{max\\_open\\_files,50},{data\\_root,"/var/lib/riak/leveldb"}]},{be\\_blocks,riak\\_kv\\_bitcask\\_backend,[{data\\_root,"/var/lib/riak/bitcask"}]}]},{multi\\_backend\\_prefix\\_list,[{&lt;&lt;"0b:"&gt;&gt;,be\\_blocks}]},{riak\\_kv\\_stat,true},{add\\_paths,["/usr/lib/riak-cs/lib/riak\\_cs-1.4.1/ebin"]},{http\\_url\\_encoding,on},{map\\_js\\_vm\\_count,8},{pb\\_port,8087},{multi\\_backend\\_default,be\\_default},{mapred\\_2i\\_pipe,true},{mapred\\_system,pipe},{js\\_max\\_vm\\_mem,8}]]]},{riak\\_kv\\_vnode,init,1},{riak\\_core\\_vnode,init,1},{gen\\_fsm,init\\_it,6},{proc\\_lib,init\\_p\\_do\\_apply,3}]}
 22:43:33.250 [error] beam/beam\\_load.c(1365):
 Error loading module riak\\_cs\\_kv\\_multi\\_backend:
   use of opcode 153; this emulator supports only
 up to 152


 22:43:33.330 [notice] "backend module failed to
 start."


 I am on Ubuntu 13.04

 thanks for any tips.




\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com








\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com


 
 



\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

