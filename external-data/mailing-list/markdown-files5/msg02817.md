---
title: "Re: Banging head against wall with erlang pb client"
description: ""
project: community
lastmod: 2011-03-31T16:18:13-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02817"
mailinglist_parent_id: "msg02816"
author_name: "Dan Reverri"
project_section: "mailinglistitem"
sent_date: 2011-03-31T16:18:13-07:00
---


Hi Jon,

The value for content-type should be a string.

For custom meta data the client expects a proplist of custom headers under
the &lt;&lt;"X-Riak-Meta"&gt;&gt; key. Check out the following test to get an idea of
what the metadata would look like:
https://github.com/basho/riak-erlang-client/blob/master/src/riakc\\_pb.erl#L311

Thanks,
Dan

Daniel Reverri
Developer Advocate
Basho Technologies, Inc.
d...@basho.com


On Thu, Mar 31, 2011 at 3:58 PM, Jon Brisbin  wrote:

&gt; I know I'm doing something obvious wrong, but I can't seem to make this:
&gt;
&gt; {riakc\\_obj,&lt;&lt;"riak"&gt;&gt;,&lt;&lt;"test"&gt;&gt;,undefined,[],
&gt; {dict,2,16,16,8,80,48,
&gt; {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
&gt; {{[],[],
&gt; [[&lt;&lt;"test"&gt;&gt;|&lt;&lt;"header"&gt;&gt;]],
&gt; [],[],[],[],[],[],[],
&gt; [[&lt;&lt;"content-type"&gt;&gt;|&lt;&lt;"text/plain"&gt;&gt;]],
&gt; [],[],[],[],[]}}},
&gt; &lt;&lt;"Hello World!"&gt;&gt;}
&gt;
&gt; appear correctly in the database. It has the wrong content-type:
&gt;
&gt; HTTP/1.1 200 OK
&gt; X-Riak-Vclock: a85hYGBgzGDKBVIsDJYbJTOYEhnzWBkymjiP82UBAA==
&gt; Vary: Accept-Encoding
&gt; Server: MochiWeb/1.1 WebMachine/1.7.3 (participate in the frantic)
&gt; Link: ; rel="up"
&gt; Last-Modified: Thu, 31 Mar 2011 22:55:36 GMT
&gt; Etag: "5Pkvq3UKB5dl5ltv1YtcdD"
&gt; Date: Thu, 31 Mar 2011 22:55:43 GMT
&gt; Content-Type: application/octet-stream
&gt; Content-Length: 12
&gt;
&gt; Hello World!
&gt;
&gt; The custom headers are also not showing up.
&gt;
&gt; What am I not doing here?
&gt;
&gt; Thanks!
&gt;
&gt; Jon Brisbin
&gt;
&gt; http://jbrisbin.com
&gt; Twitter: @j\\_brisbin
&gt;
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

