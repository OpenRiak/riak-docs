---
title: "Re: Import/Export and Bulk operations"
description: ""
project: community
lastmod: 2013-02-26T12:53:28-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg10258"
mailinglist_parent_id: "msg10253"
author_name: "Dmitri Zagidulin"
project_section: "mailinglistitem"
sent_date: 2013-02-26T12:53:28-08:00
---


Hi Kevin,

Good questions, all.

1) The warning about app.config values being the same only applies to
things like "if you're using secondary indices on one cluster, you better
also turn them on on the second cluster, and also be running leveldb, etc"
or "if you're using custom quorum values in your config, you better also
have the same values in the other cluster you're migrating to". They don't
literally need to be the same app.config files -- maybe I can clarify that
in the docs. So basically, it's fine, as long as you use common sense, and
turn on the same things in the other cluster that you need for your app
code.

2) If you're running the export on one of the nodes of your source cluster,
I think you might have better luck using localhost instead of the
public-facing hostname. So, try something like:
java -jar riak-data-migrator-0.1.3.jar -d -a -r ~/riak-dump -h
riak@127.0.0.1 

I don't know your networking environment or firewall rules, but it may
easily be the case that port 8087 might not be open from the outside (via
the public IP), even from inside the node. Anyhow, try the localhost route,
and if that doesn't work, do make sure that the port is actually open in
the firewall (and accessible locally).

Hope that helps.

Dmitri

On Tue, Feb 26, 2013 at 3:04 PM, Kevin Burton wrote:

&gt; I have a question about the usage of this tool. I have data locally that I
&gt; would like to export to another riak server to test the dataset. The local
&gt; “server” is a cluster and the machine I want to transfer to is just a
&gt; single machine. I notice in the documentation that there is a “warning”
&gt; about the app.config values must be the same on the two machines before
&gt; this tool can be used. Naturally since I have a cluster of 4 machines as
&gt; the source and only one machine as the destination the app.config will be
&gt; different. Is this a problem. \\*\\*\\*\\*
&gt;
&gt; The cluster of machines all have basically private addresses the
&gt; destination server has a public IP address. So I want to transfer from the
&gt; source to the destination. I am assuming that I would run the tool on one
&gt; of the source clusters and the –h option (for the host) would be the public
&gt; IP address of the single Riak server. Right?\\*\\*\\*\\*
&gt;
&gt; When I run it from the source to create file dumps with:\\*\\*\\*\\*
&gt;
&gt; \\*\\* \\*\\*
&gt;
&gt; java -jar riak-data-migrator-0.1.3.jar -d -a -r ~/riak-dump -h
&gt; riak@172.16.33.107\\*\\*\\*\\*
&gt;
&gt; \\*\\* \\*\\*
&gt;
&gt; I get the following output:\\*\\*\\*\\*
&gt;
&gt; \\*\\* \\*\\*
&gt;
&gt; Port not specified, using the default: 8087\\*\\*\\*\\*
&gt;
&gt; HTTP port not specified, using the default: 8098\\*\\*\\*\\*
&gt;
&gt; Could not connect to Riak on PB port 8087\\*\\*\\*\\*
&gt;
&gt; \\*\\* \\*\\*
&gt;
&gt; So apparently it throw an error. If I look in the app.config it seems that
&gt; the port is enabled. Any idea what the problem is?\\*\\*\\*\\*
&gt;
&gt; \\*\\* \\*\\*
&gt;
&gt; {riak\\_api, [\\*\\*\\*\\*
&gt;
&gt; . . . .\\*\\*\\*\\*
&gt;
&gt; {pb\\_port, 8087 }\\*\\*\\*\\*
&gt;
&gt; ]},\\*\\*\\*\\*
&gt;
&gt; \\*\\* \\*\\*
&gt;
&gt; \\*From:\\* riak-users [mailto:riak-users-boun...@lists.basho.com] \\*On Behalf
&gt; Of \\*Dmitri Zagidulin
&gt; \\*Sent:\\* Friday, February 22, 2013 10:02 AM
&gt; \\*To:\\* riak-users
&gt; \\*Subject:\\* Re: Import/Export and Bulk operations\\*\\*\\*\\*
&gt;
&gt; \\*\\* \\*\\*
&gt;
&gt; Ok, the 0.1.4 binary download link should be working now.\\*\\*\\*\\*
&gt;
&gt; On Fri, Feb 22, 2013 at 9:13 AM, Chris Read  wrote:\\*
&gt; \\*\\*\\*
&gt;
&gt; The README on the git repo refers to version 0.1.4, but the link to the
&gt; download is broken...\\*\\*\\*\\*
&gt;
&gt; \\*\\* \\*\\*
&gt;
&gt; On Wed, Feb 20, 2013 at 12:07 PM, Hector Castro  wrote:\\*
&gt; \\*\\*\\*
&gt;
&gt; Hi Kevin,\\*\\*\\*\\*
&gt;
&gt; \\*\\* \\*\\*
&gt;
&gt; The riak-data-migrator [0] is a tool used by our own professional services
&gt; team for bulk data import/export. The prebuilt JAR can be downloaded here
&gt; [1].\\*\\*\\*\\*
&gt;
&gt; \\*\\* \\*\\*
&gt;
&gt; [0] https://github.com/dankerrigan/riak-data-migrator\\*\\*\\*\\*
&gt;
&gt; [1]
&gt; http://ps-tools.data.riakcs.net:8080/riak-data-migrator-0.1.3-bin.tar.gz\\*\\*
&gt; \\*\\*
&gt;
&gt; \\*\\* \\*\\*
&gt;
&gt; --\\*\\*\\*\\*
&gt;
&gt; Hector\\*\\*\\*\\*
&gt;
&gt; \\*\\* \\*\\*
&gt;
&gt; On Wed, Feb 20, 2013 at 5:33 AM, Kevin Burton 
&gt; wrote:\\*\\*\\*\\*
&gt;
&gt; \\*\\*\\*\\*
&gt;
&gt; I was wondering if there were any import/export or bulk data operations
&gt; that I was missing? I would like to “clone” a bucket from one machine to
&gt; another but I would like to avoid having to do it one item at a time.\\*\\*\\*\\*
&gt;
&gt; \\*\\* \\*\\*
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com\\*\\*\\*\\*
&gt;
&gt; \\*\\* \\*\\*
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com\\*\\*\\*\\*
&gt;
&gt; \\*\\* \\*\\*
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com\\*\\*\\*\\*
&gt;
&gt; \\*\\* \\*\\*
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

