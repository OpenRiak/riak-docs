---
title: "Re: Corruption of leveldb database files"
description: ""
project: community
lastmod: 2012-01-16T08:52:50-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06290"
mailinglist_parent_id: "msg06289"
author_name: "David Smith"
project_section: "mailinglistitem"
sent_date: 2012-01-16T08:52:50-08:00
---


Thomas,

Thanks for the heads up -- I saw that bug report on the Level repo this morning.

D.

On Mon, Jan 16, 2012 at 9:50 AM, Thomas Bakketun
 wrote:
&gt; Hello,
&gt;
&gt; We have found a bug in leveldb that causes corruption of the CURRENT
&gt; file of leveldb databases. A bug report has been filed:
&gt; http://code.google.com/p/leveldb/issues/detail?id=68
&gt;
&gt; This bug can easily be reproduced by restarting restarting Riak and
&gt; force of the computer within 30 to 60 seconds. After reboot at least one
&gt; corrupt leveldb database can be expected. When this happens Riak fails
&gt; to start and logs this message:
&gt;
&gt; Failed to start riak\\_kv\\_eleveldb\\_backend Reason: {db\\_open,"Corruption:
&gt; CURRENT file does not end with newline"}
&gt;
&gt; Switching on the sync flag for leveldb has no effect.
&gt;
&gt; --
&gt; Thomas Bakketun, Senior software developer
&gt; T. +47 21 53 69 40
&gt; Copyleft Solutions
&gt; www.copyleftsolutions.com
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com



-- 
Dave Smith
Director, Engineering
Basho Technologies, Inc.
diz...@basho.com

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

