---
title: "Re: Puppet Module for Riak"
description: ""
project: community
lastmod: 2011-06-21T13:24:00-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03765"
mailinglist_parent_id: "msg03762"
author_name: "Jacques"
project_section: "mailinglistitem"
sent_date: 2011-06-21T13:24:00-07:00
---


Oops, forgot to include list. Sorry.

---------- Forwarded message ----------
From: Jacques 
Date: Tue, Jun 21, 2011 at 1:22 PM
Subject: Re: Puppet Module for Riak
To: Ken Perkins 


I'm very new to using puppet but I'll give you what I have. It is just a
basic example.

The init references two erb files:
app.config.erb = Utilizes &lt;%= ipaddress %&gt; for http, https and pb addresses
vm.args.erb = Actually just a straight config right now. Originally used
ipaddress for the the host part of the name but then realized that wasn't
necessary since I have dns setup correctly for each of the nodes.

Hopefully something to get you started.

Jacques

modules/riak/manifests/init.pp
class riak::config {
 file { "/etc/riak":
 ensure =&gt; directory,
 mode =&gt; 0555,
 }

 file { "/etc/riak/app.config":
 ensure =&gt; present,
 owner =&gt; 'root',
 group =&gt; 'root',
 content =&gt; template("riak/app.config.erb"),
 require =&gt; [File["/etc/riak"], Class["riak::install"]],
 notify =&gt; Class["riak::service"],
 }

 file { "/etc/riak/vm.args":
 ensure =&gt; present,
 owner =&gt; 'root',
 group =&gt; 'root',
 content =&gt; template("riak/vm.args.erb"),
 require =&gt; [File["/etc/riak"], Class["riak::install"]],
 notify =&gt; Class["riak::service"],
 }

 file { "/export/riak":
 ensure =&gt; directory,
 owner =&gt; 'riak',
 group =&gt; 'riak',
 require =&gt; Class["riak::install"],
 }

}

class riak::install {
 package {"erlang":
 ensure =&gt; present,
 require =&gt; Class["repos"],
 }

 package {"riak":
 ensure =&gt; present,
 require =&gt; Package["erlang"],
 }
}


class riak::service {
 service {"riak":
 ensure =&gt; running,
 hasstatus =&gt; false,
 hasrestart =&gt; true,
 enable =&gt; true,
 require =&gt; Class["riak::config"]
 }
}

class riak {
 require repos
 include riak::install, riak::config, riak::service
}





On Tue, Jun 21, 2011 at 9:44 AM, Ken Perkins  wrote:

&gt; I've been searching and have had little success in finding a Riak Module
&gt; for puppet, so I wanted to turn to the community.
&gt;
&gt; Are any of you using puppet to manage your riak boxes? Please share
&gt; anything if you do! It'd be great to have something to start from.
&gt;
&gt; Thanks!
&gt;
&gt; --Ken
&gt; clipboard, inc.
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

