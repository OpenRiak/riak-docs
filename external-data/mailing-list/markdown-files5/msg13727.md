---
title: "Re: Resources needed ot hanlde a 12TB cluster, and replication factor	with RAID"
description: ""
project: community
lastmod: 2014-02-27T11:34:49-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13727"
mailinglist_parent_id: "msg13723"
author_name: "Marco"
project_section: "mailinglistitem"
sent_date: 2014-02-27T11:34:49-08:00
---


Hi Ector,


\\*RAID 1 would cut your per node disk capacity in half (1.5TB), so at 4
nodes, your overall cluster capacity would only be 6TB.\\*

As I mentioned every server has two 3TB HDD (total 6TB), so the cluster
size would effectively be 12TB in a Raid 1 configuration.

The biggest issue here is that with both Raid 1 and a replication factor of
2, every piece of data is going to be stored four times the cluster.
Another solution could be a replication factor of 2 with Raid 0. If an HDD
fails I will lose the machine, but I can safely bring it up again since the
data has been already stored in the other nodes.

On Thu, Feb 27, 2014 at 6:18 AM, Hector Castro  wrote:

&gt; Hi Marco,
&gt;
&gt; Please see my responses inline below.
&gt;
&gt; --
&gt; Hector
&gt;
&gt;
&gt; On Thu, Feb 27, 2014 at 3:04 AM, Marco  wrote:
&gt; &gt; Hi everybody,
&gt; &gt;
&gt; &gt; I have a couple of questions regarding the performance requirements for a
&gt; &gt; 12TB Riak cluster, specifically:
&gt;
&gt; Have you taken the default replication factor of 3 here, or is this
&gt; the sum of your data?
&gt;
&gt; &gt; 1) I wonder if four servers, each one with the following spec, can handle
&gt; &gt; it: 6 cores at 2.20GHz (15MB cache), 16GB of memory, and two 3TB HDD in a
&gt; &gt; Raid 1 configuration. And if not, what would be the recommended number of
&gt; &gt; machines we should provision. These machines are physical machines. We
&gt; &gt; execute one or two M/R jobs per day, the scripts are written in Erlang.
&gt;
&gt; For production Riak deployments, we generally recommend a cluster with
&gt; 5 nodes or greater. [0]
&gt;
&gt; Beyond that, some decisions around backend, overall capacity, and
&gt; access patterns (anything outside of M/R) need to be taken into
&gt; consideration before validating a set of hardware specifications. A
&gt; high level guide of the decisions in the process are outlined here:
&gt;
&gt; - http://docs.basho.com/riak/latest/ops/building/planning/system-planning/
&gt; - http://docs.basho.com/riak/latest/ops/building/planning/cluster/
&gt;
&gt; &gt; 2) Since we have two HDD per server in a Raid 1 configuration, I also
&gt; wonder
&gt; &gt; if we can safely set the replication factor to one, since the data is
&gt; &gt; already stored twice: if we lose an HDD, we still got the data on the
&gt; other
&gt; &gt; one thanks to the Raid 1 conf.
&gt;
&gt; RAID 1 would cut your per node disk capacity in half (1.5TB), so at 4
&gt; nodes, your overall cluster capacity would only be 6TB.
&gt;
&gt; For the N=1 question, I guess the best way to answer it is that Riak
&gt; maintains replicas within the system to facilitate high availability.
&gt; Any node or disk outage (or even scheduled maintenance) is going to
&gt; cause replicas to be unavailable in your cluster. This is generally
&gt; not desirable in any clustered configuration.
&gt;
&gt; &gt; Thanks
&gt;
&gt; [0]
&gt; http://basho.com/why-your-riak-cluster-should-have-at-least-five-nodes/
&gt;
&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; &gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

