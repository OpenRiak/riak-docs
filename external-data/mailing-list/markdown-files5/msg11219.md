---
title: "Re: Understanding riak storage & querying/searching relationships	between buckets"
description: ""
project: community
lastmod: 2013-06-04T18:07:36-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11219"
mailinglist_parent_id: "msg11218"
author_name: "Kartik Thakore"
project_section: "mailinglistitem"
sent_date: 2013-06-04T18:07:36-07:00
---


That is what I was thinking. But denormalizing the subject field would
mean when I update the subject field the data stuff won't be updated.
Is there a solution for that? Or should I handle that with the
application code?

On Tue, Jun 4, 2013 at 8:49 PM, Alexander Sicular  wrote:
&gt; You don't. Riak is not a relational system. As you've noted, you should 
&gt; demoralize your data.
&gt;
&gt;
&gt; @siculars
&gt; http://siculars.posthaven.com
&gt;
&gt; Sent from my iRotaryPhone
&gt;
&gt; On Jun 4, 2013, at 20:43, Kartik Thakore  wrote:
&gt;
&gt;&gt; Hi,
&gt;&gt;
&gt;&gt; I have spent the last couple hours trying to understand how to store
&gt;&gt; and/or search relationships between buckets of information. Currently,
&gt;&gt; I have two buckets (will have more with more relationships) 'subjects'
&gt;&gt; and 'data'. In subjects I store data such as:
&gt;&gt;
&gt;&gt; http://.../riak/subjects/001 has { "name" : "First Last", "age\\_int": 25 },
&gt;&gt; http://.../riak/subjects/002 has { "name" : "First Last", "age\\_int": 55 }
&gt;&gt;
&gt;&gt; so on.
&gt;&gt;
&gt;&gt; and in 'data' I have :
&gt;&gt;
&gt;&gt; { "subject" : "001", "complication": [0, 1] },
&gt;&gt; { "subject" : "002", "complication": [1] }
&gt;&gt;
&gt;&gt;
&gt;&gt; Now my question is how do I query information like:
&gt;&gt;
&gt;&gt; Where Subject has age\\_int between 20 to 100 & complication includes 1?
&gt;&gt;
&gt;&gt; I thought I could accomplish this with map reduce, but I can access
&gt;&gt; only one bucket at a time. Is there a different way I should be
&gt;&gt; storing data like this? Or should I denormalize the subject into
&gt;&gt; 'data'?
&gt;&gt;
&gt;&gt; Regards,
&gt;&gt; Kartik
&gt;&gt;
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

