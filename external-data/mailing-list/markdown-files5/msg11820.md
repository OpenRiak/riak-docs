---
title: "Re: question about java client"
description: ""
project: community
lastmod: 2013-07-30T13:40:49-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11820"
mailinglist_parent_id: "msg11816"
author_name: "Paul Ingalls"
project_section: "mailinglistitem"
sent_date: 2013-07-30T13:40:49-07:00
---


Hey Brian,

After a bit of messing around, I'm now dropping objects into the correct bucket 
using the links annotation. However, I am noticing that the json is including 
the metadata from the domain object, i.e. things tagged with @RiakKey, 
@RiakIndex or @RiakLinks. I was under the impression this data would be left 
out. I wouldn't care a whole lot, but when I'm getting data back in via a 
fetch, the JSONConverter is crashing saying it doesn't know how to convert the 
RiakLink object since there isn't an appropriate constructor for it.

Do I need to specifically @JsonIgnore fields tagged with one of the Riak tags?

Thanks!

Paul


Paul Ingalls
Founder & CEO Fanzo
p...@fanzo.me
@paulingalls
http://www.linkedin.com/in/paulingalls



On Jul 30, 2013, at 11:20 AM, Paul Ingalls  wrote:

&gt; Ok, thats perfect. I totally missed the annotation for links…
&gt; 
&gt; Will give that a shot…
&gt; 
&gt; Thanks!
&gt; 
&gt; Paul Ingalls
&gt; Founder & CEO Fanzo
&gt; p...@fanzo.me
&gt; @paulingalls
&gt; http://www.linkedin.com/in/paulingalls
&gt; 
&gt; 
&gt; 
&gt; On Jul 30, 2013, at 11:16 AM, Brian Roach  wrote:
&gt; 
&gt;&gt; Paul,
&gt;&gt; 
&gt;&gt; I'm not quite sure I understand what you're asking.
&gt;&gt; 
&gt;&gt; If you do a fetch and have siblings each one is converted to your
&gt;&gt; domain object using the Converter and then passed as a Collection to
&gt;&gt; the ConflictResolver. Each sibling is going to include its links
&gt;&gt; and/or indexes as long as the Converter is injecting them into the
&gt;&gt; domain object and you can resolve them in the ConflictResolver.
&gt;&gt; 
&gt;&gt; The default JSONConverter, for example, injects them into your domain
&gt;&gt; object via annotations from the com.basho.riak.client.convert[1]
&gt;&gt; package.
&gt;&gt; 
&gt;&gt; Thanks,
&gt;&gt; Brian Roach
&gt;&gt; 
&gt;&gt; http://basho.github.io/riak-java-client/1.4.0/com/basho/riak/client/convert/package-summary.html
&gt;&gt; 
&gt;&gt; 
&gt;&gt; On Tue, Jul 30, 2013 at 11:41 AM, Paul Ingalls  wrote:
&gt;&gt;&gt; Newbie with Riak, and looking at the java client.
&gt;&gt;&gt; 
&gt;&gt;&gt; Specifically, I've been digging into the domain mapping apis. Looking into
&gt;&gt;&gt; the code, it appears to me that, if I'm using links a bunch or even
&gt;&gt;&gt; secondary indexes, that I could lose some data during the conflict
&gt;&gt;&gt; resolution phase. I see where links and other relevant user data gets
&gt;&gt;&gt; cached during the conversion phase from the fetch and then patched back in
&gt;&gt;&gt; during the conversion phase for the store. However, it doesn't look like
&gt;&gt;&gt; you have the opportunity during the resolution phase to merge metadata.
&gt;&gt;&gt; Should I focus on using the raw client, or am I missing something?
&gt;&gt;&gt; 
&gt;&gt;&gt; Thanks!
&gt;&gt;&gt; 
&gt;&gt;&gt; Paul
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; Paul Ingalls
&gt;&gt;&gt; Founder & CEO Fanzo
&gt;&gt;&gt; p...@fanzo.me
&gt;&gt;&gt; @paulingalls
&gt;&gt;&gt; http://www.linkedin.com/in/paulingalls
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;&gt; 
&gt; 

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

