---
title: "Re: How to add a secondary index with the Java client"
description: ""
project: community
lastmod: 2013-04-08T15:07:41-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg10768"
mailinglist_parent_id: "msg10767"
author_name: "Brian Roach"
project_section: "mailinglistitem"
sent_date: 2013-04-08T15:07:41-07:00
---


Jeff -

Yup, that should work perfectly.

You will have a secondary index in Riak named "status\\_bin" and the
value you set in your String 'status' will be the index key for that
object.

Thanks,
\\_Roach

On Mon, Apr 8, 2013 at 4:02 PM, Jeff Peck  wrote:
&gt; Brian,
&gt;
&gt; Thank you for explaining that and suggesting to extend HashMap. I did exactly 
&gt; that. Here is what it looks like:
&gt;
&gt; class DocMap extends HashMap {
&gt; /\\*\\*
&gt; \\* Generated id
&gt; \\*/
&gt; private static final long serialVersionUID = 5807773481499313384L;
&gt;
&gt; @RiakIndex(name="status") private String status;
&gt;
&gt; public String getStatus() {
&gt; return status;
&gt; }
&gt;
&gt; public void setStatus(String status) {
&gt; this.status = status;
&gt; }
&gt; }
&gt;
&gt; I am about to try it, but I first need to make a few more changes in the code 
&gt; to adapt this new object. In the meantime, would you say that this looks 
&gt; correct and that it would be able to effectively write a status field to a 
&gt; secondary index if I were to use "setStatus"?
&gt;
&gt; Thanks,
&gt; Jeff
&gt;
&gt;
&gt; On Apr 8, 2013, at 5:48 PM, Brian Roach  wrote:
&gt;
&gt;&gt; Jeff,
&gt;&gt;
&gt;&gt; If you're just passing in an instance of the core Java HashMap ... you can't.
&gt;&gt;
&gt;&gt; The way the default JSONConverter works for metadata (such as indexes)
&gt;&gt; is via annotations.
&gt;&gt;
&gt;&gt; The object being passed in needs to have a field annotated with
&gt;&gt; @RiakIndex("index\\_name"). That field can be a Long/Set or
&gt;&gt; String/Set (for \\_int and \\_bin indexes respectively).
&gt;&gt;
&gt;&gt; These are not converted to JSON so they won't affect your serialized
&gt;&gt; data. You can have multiple fields for multiple indexes.
&gt;&gt;
&gt;&gt; You don't have to append "\\_int" or "\\_bin" to the index name in the
&gt;&gt; annotation - it's done automatically based on the type.
&gt;&gt;
&gt;&gt; Easiest thing to do woud be to extend HashMap and simply add the
&gt;&gt; annotated field(s).
&gt;&gt;
&gt;&gt; Thanks,
&gt;&gt; \\_Roach
&gt;&gt;
&gt;&gt; On Mon, Apr 8, 2013 at 2:56 PM, Jeff Peck  wrote:
&gt;&gt;&gt; Hello,
&gt;&gt;&gt;
&gt;&gt;&gt; I have been looking through the documentation for an example of how to add 
&gt;&gt;&gt; a secondary index in Riak, using the Java client.
&gt;&gt;&gt;
&gt;&gt;&gt; I am currently storing my object (which is a HashMap) like this:
&gt;&gt;&gt;
&gt;&gt;&gt; bucket.store(key, docHashMap).execute();
&gt;&gt;&gt;
&gt;&gt;&gt; What would I need to do to add an index to that object before it gets 
&gt;&gt;&gt; stored?
&gt;&gt;&gt;
&gt;&gt;&gt; Thanks,
&gt;&gt;&gt; Jeff
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

