---
title: "Re: riak search and solr/lucene"
description: ""
project: community
lastmod: 2010-11-04T11:15:53-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01461"
mailinglist_parent_id: "msg01454"
author_name: "Rusty Klophaus"
project_section: "mailinglistitem"
sent_date: 2010-11-04T11:15:53-07:00
---


Hi Joseph,

Answers inline below.

On Thu, Nov 4, 2010 at 12:49 AM, Joseph Lambert
wrote:

&gt; I am using the PHP library for a project and was looking through the code
&gt; to see what differentiates the Solr HTTP interface query versus the Lucene
&gt; search (besides the syntax and the interface, etc) as paging is very useful
&gt; for my code. From the PHP library with lucene I can do a search with lucene,
&gt; then a reduce job to sort, then another reduce to slice the results. With
&gt; Solr, we can just do a cURL with the parameters to do the same thing.
&gt;
&gt; I scanned the Erlang code, and in the end, both call stream\\_search(), but
&gt; the Lucene query will pass the results back to luke for possibly another MR
&gt; phase, and the Solr query simply sorts and truncates the list. So:
&gt;
&gt; 1. Does anyone have a general idea at what point the Solr query will start
&gt; to get really slow as far as number of keys in a bucket and other factors? I
&gt; know this is dependent on many things, just looking for a rough idea of when
&gt; it's a bad idea to use the Solr interface.
&gt;

The Solr interface works by running the query to find your list of keys
(limited based on the "start" and "rows" parameters) and then looking up the
keys in Riak KV. So if you execute a Solr request with "rows=100", your
request will take a certain amount of time to execute the query, plus
however long it takes to retrieve 100 objects in your cluster.


&gt; 2. Also, I see that Riak will cache the map phase of a map reduce, so will
&gt; it cache the initial search? Or does it use some other mechanism I'm not
&gt; seeing to cache search results?
&gt;

The system does not cache Search results, though the operating system's disk
caching does make repeated search results execute more quickly.


&gt; 3. Finally, for the Solr query, why not automatically add a sort and/or
&gt; slice phase if the user passes in sort, start or count parameters in the
&gt; Solr query?
&gt;

Not sure I understand the question here, can you clarify/elaborate? The
system does support sort and slice parameters. (
https://wiki.basho.com/display/RIAK/Riak+Search+-+Querying)


&gt;
&gt; Please correct me if any of the assumptions I made are wrong, as usually
&gt; when I ask these questions I end up with my foot in my mouth.
&gt;
&gt; - Joe Lambert
&gt;
&gt; joseph.g.lamb...@gmail.com
&gt; +86 13656213284
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

