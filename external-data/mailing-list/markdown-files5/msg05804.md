---
title: "Re: Incorect Input to Reduce"
description: ""
project: community
lastmod: 2011-11-30T07:01:47-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05804"
mailinglist_parent_id: "msg05802"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2011-11-30T07:01:47-08:00
---


Hi Yehuda,

Your reduce function is not guaranteed to run across all inputs in the
first application, but may be applied many times as new inputs come in.
Riak will batch up reduce inputs until a certain number or timeout is
reached, then apply the function and take its output to be part of the
inputs for the next application. If it is absolutely necessary to run the
reduce function only once, use "reduce\\_phase\\_only\\_1" as the "arg" (only
works on Riak 1.0.x, example in Ruby):

mr.reduce("function(v){...}", :arg =&gt; {:reduce\\_phase\\_only\\_1 =&gt; true}, :keep
=&gt; true)

Hope that helps!

On Wed, Nov 30, 2011 at 9:03 AM, Yehuda Zargrov  wrote:

&gt; Hi,\\*\\*\\*\\*
&gt;
&gt; \\*\\* \\*\\*
&gt;
&gt; I’ve posted a mail on this few days ago, but went a bit further since then.
&gt; \\*\\*\\*\\*
&gt;
&gt; \\*\\* \\*\\*
&gt;
&gt; I’m using ripple, running a map function on some input and getting a list
&gt; of about 50 items.\\*\\*\\*\\*
&gt;
&gt; \\*\\* \\*\\*
&gt;
&gt; Right after that, I’m running a reduce function. The first thing I do in
&gt; it is putting the length of v (the input) as an item in a list.\\*\\*\\*\\*
&gt;
&gt; \\*\\* \\*\\*
&gt;
&gt; When printing the result I see that the length is 13.\\*\\*\\*\\*
&gt;
&gt; \\*\\* \\*\\*
&gt;
&gt; It’s like something has happened between the map and reduce phases.\\*\\*\\*\\*
&gt;
&gt; \\*\\* \\*\\*
&gt;
&gt; Any ideas?\\*\\*\\*\\*
&gt;
&gt; \\*\\* \\*\\*
&gt;
&gt; \\*\\*\\*\\*
&gt;
&gt; [image: Description:
&gt; C:\\Users\\Yehuda\\AppData\\Roaming\\Microsoft\\Signatures\\logo.gif]\\*\\*\\*\\*
&gt;
&gt; \\*Yehuda Zargrov\\*\\*
&gt; \\*Software Engineer\\*\\*\\*\\*
&gt;
&gt; \\*Conduit Your Site\\* \\*\\*\\*\\*
&gt;
&gt; \\*t:\\* 972.8.9461713 ext +314 | \\*m:\\* +972503473119 | \\*f:\\* +97286382140
&gt; \\*\\*\\*\\*
&gt;
&gt;
&gt; This message may contain confidential and/or privileged information. It is
&gt; intended to be read only by the individual or entity to whom it is
&gt; addressed or by their designee.
&gt; If the reader of this message is not the intended recipient, you are on
&gt; notice that any uses, copy, disclose or distribution of this message, in
&gt; any form, is strictly prohibited.
&gt; If you have received this message in error, please notify the sender by
&gt; reply email or by telephone and delete or destroy any copy of this message.
&gt; Thank you.
&gt;
&gt; \\*\\*\\*\\*
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;


-- 
Sean Cribbs 
Developer Advocate
Basho Technologies, Inc.
http://www.basho.com/
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

