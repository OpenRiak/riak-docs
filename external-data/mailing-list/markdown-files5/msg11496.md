---
title: "Re: Can't start Riak. Erlang crashes immediately. Memory problem?"
description: ""
project: community
lastmod: 2013-07-12T06:34:33-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11496"
mailinglist_parent_id: "msg11495"
author_name: "Richard Shaw"
project_section: "mailinglistitem"
sent_date: 2013-07-12T06:34:33-07:00
---


Additionally, you've only got 2GB of RAM so you could reduce the ring size
to 16 and disable AAE to bring that memory usage down

/etc/riak/app.config =&gt; {ring\\_creation\\_size, 16},

/etc/riak/app.config =&gt; {anti\\_entropy, {off, []}},

Thanks




On Fri, Jul 12, 2013 at 4:26 PM, Richard Shaw  wrote:

&gt; Hi,
&gt;
&gt; Please can you provide the following:
&gt;
&gt; 1.) Output from $ ulimit -a
&gt; 2.) Output from $ uname -a
&gt; 3.) Confirm which version of Riak you're installing and whether from
&gt; package or source
&gt; 4.) Output from $ lsof | wc -l
&gt; 5.) Output from $ ps auwx
&gt;
&gt; Please revert your configs to defaults, make sure for this session that
&gt; ulimit is set correctly with $ ulimit -n 4096, then start Riak again
&gt;
&gt; You can permanently set the correct ulimit here [0]
&gt;
&gt; [0] http://docs.basho.com/riak/latest/cookbooks/Open-Files-Limit/
&gt;
&gt; Thanks
&gt;
&gt;
&gt; On Fri, Jul 12, 2013 at 11:58 AM, prog112  wrote:
&gt;
&gt;&gt; Oh well, looks like after second try of startng up riak the first error
&gt;&gt; returns as well:
&gt;&gt;
&gt;&gt; [root@s16976525 ~]# riak console
&gt;&gt; Node 'r...@s16976525.onlinehome-server.info' not responding to pings.
&gt;&gt; config is OK
&gt;&gt; Exec: /usr/lib64/riak/erts-5.9.1/bin/erlexec -boot
&gt;&gt; /usr/lib64/riak/releases/1.4.0/riak -config
&gt;&gt; /etc/riak/app.config -pa /usr/lib64/riak/lib/basho-patches
&gt;&gt; -args\\_file /etc/riak/vm.args -- console
&gt;&gt; Root: /usr/lib64/riak
&gt;&gt; Failed to create thread: Resource temporarily unavailable (11)
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; --
&gt;&gt; View this message in context:
&gt;&gt; http://riak-users.197444.n3.nabble.com/Can-t-start-Riak-Erlang-crashes-immediately-Memory-problem-tp4028271p4028294.html
&gt;&gt; Sent from the Riak Users mailing list archive at Nabble.com.
&gt;&gt;
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

