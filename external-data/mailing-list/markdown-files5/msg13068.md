---
title: "Re: Search Crashes"
description: ""
project: community
lastmod: 2013-11-22T20:26:30-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13068"
mailinglist_parent_id: "msg13067"
author_name: "Gabriel Littman"
project_section: "mailinglistitem"
sent_date: 2013-11-22T20:26:30-08:00
---


PS: The searching that should include this element that failed before now
succeeds as well.

&gt;&gt;&gt; r.fulltext\\_search('ctv\\_tvdata', "searchable\\_key:monstersvsaliens")
{'max\\_score': 0.353553, 'num\\_found': 1, 'docs': [{'date': '2013-11-23',
'expires': '9999999999', 'subject\\_name': 'Monsters vs. Aliens', 'sub\\_type':
'Series', 'topic':
'\\_\\_ref--/data/v2/topic/TMS.Show.9838380:r1384276501.854346', 'person':
'\\_\\_None\\_\\_', 'searchable\\_key': 'aliens vs monstersvsaliens monsters',
'genre': 'Children', 'sport': '\\_\\_None\\_\\_', 'type': 'show', u'id':
'/data/v2/search\\_show/TMS.Show.9838380'}]}


On Fri, Nov 22, 2013 at 8:07 PM, Gabriel Littman  wrote:

&gt; Hi Ryan,
&gt;
&gt; You are a rock star. I owe you $5.
&gt;
&gt; The bucket had allow\\_mult set to true:
&gt; $ curl 'http://10.1.2.95:8098/buckets/\\_rsid\\_ctv\\_tvdata/props'
&gt;
&gt; {"props":{"name":"\\_rsid\\_ctv\\_tvdata","allow\\_mult":true,"basic\\_quorum":false,"big\\_vclock":50,"chash\\_keyfun":{"mod":"riak\\_core\\_util","fun":"chash\\_std\\_keyfun"},"dw":0,"last\\_write\\_wins":false,"linkfun":{"mod":"riak\\_kv\\_wm\\_link\\_walker","fun":"mapreduce\\_linkfun"},"n\\_val":3,"notfound\\_ok":false,"old\\_vclock":86400,"postcommit":[],"pr":0,"precommit":[],"pw":0,"r":1,"rw":1,"small\\_vclock":50,"w":1,"young\\_vclock":20}}
&gt;
&gt; I fixed it in the python console since that is where I'm more comfortable.
&gt; And just to be sure I attempted the same riak PUT both before and after.
&gt;
&gt; &gt;&gt;&gt; import riak
&gt; &gt;&gt;&gt; r = riak.RiakClient()
&gt; &gt;&gt;&gt; b = r.bucket('ctv\\_tvdata')
&gt; &gt;&gt;&gt; o = b.get('/data/v2/search\\_show/TMS.Show.9838380')
&gt; &gt;&gt;&gt; o.store()
&gt; Traceback (most recent call last):
&gt; File "", line 1, in 
&gt; File "/usr/local/lib/python2.7/dist-packages/riak/riak\\_object.py", line
&gt; 281, in store
&gt; timeout=timeout)
&gt; File "/usr/local/lib/python2.7/dist-packages/riak/client/transport.py",
&gt; line 127, in wrapper
&gt; return self.\\_with\\_retries(pool, thunk)
&gt; File "/usr/local/lib/python2.7/dist-packages/riak/client/transport.py",
&gt; line 69, in \\_with\\_retries
&gt; return fn(transport)
&gt; File "/usr/local/lib/python2.7/dist-packages/riak/client/transport.py",
&gt; line 125, in thunk
&gt; return fn(self, transport, \\*args, \\*\\*kwargs)
&gt; File "/usr/local/lib/python2.7/dist-packages/riak/client/operations.py",
&gt; line 289, in put
&gt; timeout=timeout)
&gt; File
&gt; "/usr/local/lib/python2.7/dist-packages/riak/transports/http/transport.py",
&gt; line 144, in put
&gt; return self.\\_parse\\_body(robj, response, [200, 201, 204, 300])
&gt; File
&gt; "/usr/local/lib/python2.7/dist-packages/riak/transports/http/codec.py",
&gt; line 64, in \\_parse\\_body
&gt; self.check\\_http\\_code(status, expected\\_statuses)
&gt; File
&gt; "/usr/local/lib/python2.7/dist-packages/riak/transports/http/transport.py",
&gt; line 446, in check\\_http\\_code
&gt; (expected\\_statuses, status))
&gt; Exception: Expected status [200, 201, 204, 300], received 500
&gt; &gt;&gt;&gt; b2 = r.bucket('\\_rsid\\_ctv\\_tvdata')
&gt; &gt;&gt;&gt; b2.get\\_properties()
&gt; {'old\\_vclock': 86400, 'pr': 0, 'allow\\_mult': True, 'big\\_vclock': 50,
&gt; 'name': '\\_rsid\\_ctv\\_tvdata', 'chash\\_keyfun': {'fun': 'chash\\_std\\_keyfun',
&gt; 'mod': 'riak\\_core\\_util'}, 'n\\_val': 3, 'notfound\\_ok': False, 'linkfun':
&gt; {'fun': 'mapreduce\\_linkfun', 'mod': 'riak\\_kv\\_wm\\_link\\_walker'}, 'pw': 0,
&gt; 'last\\_write\\_wins': False, 'r': 1, 'small\\_vclock': 50, 'rw': 1,
&gt; 'basic\\_quorum': False, 'postcommit': [], 'dw': 0, 'w': 1, 'young\\_vclock':
&gt; 20, 'precommit': []}
&gt; &gt;&gt;&gt; b2.set\\_property('allow\\_mult', False)
&gt; &gt;&gt;&gt; o = b.get('/data/v2/search\\_show/TMS.Show.9838380')
&gt; &gt;&gt;&gt; o.store()
&gt; 
&gt;
&gt; As you can see it worked like a charm. Thank you so much for your help.
&gt; I never would have figured this out on my own.
&gt;
&gt; Once again, you rock,
&gt;
&gt; Gabe
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

