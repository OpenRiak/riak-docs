---
title: "Re: Multiple disks"
description: ""
project: community
lastmod: 2011-03-21T16:52:18-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02693"
mailinglist_parent_id: "msg02692"
author_name: "Alexander Sicular"
project_section: "mailinglistitem"
sent_date: 2011-03-21T16:52:18-07:00
---


In short, no. Vnodes can not be pointed to individual disks. Whichever 
backend you use for riak, all the files will live in one directory.


Your only option is raid and to select the raid that is appropriate 
for your application. You basically have 3 options when it comes to 
raid levels:


Striped (raid 0)

Mirrored (raid 1)

Striped + Parity (raid 5)

There are all sorts of extra/other raid levels but those 3 are the 
basic and virtually all hardware raid solutions will offer them. The 
other more exotic ones depend on the raid card.


My recommendation to people who don't know any better or don't care is 
to just use raid 5 and forget about it. Possibly raid 5 + hot spare 
(again depending on card support).


The one thing I do recommend on top of that is to align your chunk or 
block size with the chunk/block size options of your file system and 
to make them large if you are dedicating disk specifically for 
database usage. A block size of 64KB or even 128KB would not be 
outrageous.


Of course, a lot of this is moot if you are using a virtual machine 
service.


Cheers, Alexander


@siculars on twitter
http://siculars.posterous.com

Sent from my iPhone

On Mar 21, 2011, at 16:29, Greg Nelson  wrote:


Hello,

We are currently evaluating Riak for an application that will store 
large amounts of data in a write-heavy pattern. We'd like to pack 
many disks into each machine. Currently, it appears that Bitcask 
uses exactly one directory to store data. What is the best way to 
have it use multiple disks? Is this something Innostore would 
handle better?


We'd like to avoid RAID since we'll be paying for redundancy at a 
higher level with Riak (N=3, etc.).


We'd also like to avoid a JBOD type setup where a single disk 
failure brings the whole node down, as we'll obviously be increasing 
those odds with each disk.


What I'm wondering is, can each node distribute its vnodes across 
many disks? And if one of those disks fails, will Riak handle that 
appropriately (i.e., the other vnodes continue to operate normally 
and hand-off data when the new disk comes online)?


Thanks!

Greg
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com


\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

