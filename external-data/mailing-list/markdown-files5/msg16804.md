---
title: "Re: Memory Errors when using RiakCS"
description: ""
project: community
lastmod: 2015-11-24T09:02:25-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16804"
mailinglist_parent_id: "msg16801"
author_name: "Charlie Voiselle"
project_section: "mailinglistitem"
sent_date: 2015-11-24T09:02:25-08:00
---


Ben:

Awesome! Happy that that got you sorted out. 

-cv

 
&gt; On Nov 24, 2015, at 11:57 AM, Ben Rudolph  wrote:
&gt; 
&gt; Right you are:
&gt; 2015-11-23 18:11:19.260 [warning] 
&gt; &lt;0.142.0&gt;@riak\\_cs\\_app:check\\_bucket\\_props:128 Unable to verify moss.access 
&gt; bucket settings (disconnected).
&gt; 2015-11-23 18:11:19.261 [warning] 
&gt; &lt;0.142.0&gt;@riak\\_cs\\_app:check\\_bucket\\_props:128 Unable to verify moss.storage 
&gt; bucket settings (disconnected).
&gt; 2015-11-23 18:11:19.261 [warning] 
&gt; &lt;0.142.0&gt;@riak\\_cs\\_app:check\\_bucket\\_props:128 Unable to verify moss.buckets 
&gt; bucket settings (disconnected).
&gt; 2015-11-23 18:11:19.261 [error] &lt;0.142.0&gt;@riak\\_cs\\_app:sanity\\_check:70 Could 
&gt; not verify bucket properties. Error was disconnected.
&gt; 2015-11-23 18:11:19.261 [error] &lt;0.141.0&gt; CRASH REPORT Process &lt;0.141.0&gt; with 
&gt; 0 neighbours exited with reason: 
&gt; {error\\_verifying\\_props,{riak\\_cs\\_app,start,[normal,[]]}} in 
&gt; application\\_master:init/4 line 133
&gt; 2015-11-23 18:11:19.262 [info] &lt;0.7.0&gt; Application riak\\_cs exited with 
&gt; reason: {error\\_verifying\\_props,{riak\\_cs\\_app,start,[normal,[]]}}
&gt; 
&gt; Dang, sorry I think I was misled by the `config OK` signal at the beginning 
&gt; of the error.
&gt; 
&gt; On Tue, Nov 24, 2015 at 11:40 AM, Charlie Voiselle  &gt; wrote:
&gt; Ben:
&gt; 
&gt; It is not uncommon to see the 
&gt;&gt; [os\\_mon] memory supervisor port (memsup): Erlang has closed 
&gt; message when the Erlang VM shuts down. Would it be possible for you to 
&gt; share your console.log file to the list? There is probably another 
&gt; configuration error causing your riak-cs nodes to shut down automatically. 
&gt; Misconfigured default bucket types is one such problem that will cause a 
&gt; riak-cs node to start and then stop immediately.
&gt; 
&gt; Thanks,
&gt; Charlie Voiselle
&gt; Basho, Client Services.
&gt; 
&gt; 
&gt;&gt; On Nov 23, 2015, at 1:30 PM, Ben Rudolph &gt; &gt; wrote:
&gt;&gt; 
&gt;&gt; Hi,
&gt;&gt; 
&gt;&gt; We've been trying to setup RiakCS for storing files on our website, 
&gt;&gt; http://commcarehq.org/ . It's been difficult for us 
&gt;&gt; to deploy because we've been having issues with our servers not being able 
&gt;&gt; to start Riak due to memory errors. Here's what a traceback looks like when 
&gt;&gt; I try and start Riak with `riak-console`:
&gt;&gt; 
&gt;&gt; config is OK
&gt;&gt; -config /var/lib/riak-cs/generated.configs/app.2015.11.23.18.11.17.config 
&gt;&gt; -args\\_file /var/lib/riak-cs/generated.configs/vm.2015.11.23.18.11.17.args 
&gt;&gt; -vm\\_args /var/lib/riak-cs/generated.configs/vm.2015.11.23.18.11.17.args
&gt;&gt; Exec: /usr/lib/riak-cs/erts-5.10.3/bin/erlexec -boot 
&gt;&gt; /usr/lib/riak-cs/releases/2.0.1/riak-cs -config 
&gt;&gt; /var/lib/riak-cs/generated.configs/app.2015.11.23.18.11.17.config -args\\_file 
&gt;&gt; /var/lib/riak-cs/generated.configs/vm.2015.11.23.18.11.17.args -vm\\_args 
&gt;&gt; /var/lib/riak-cs/generated.configs/vm.2015.11.23.18.11.17.args 
&gt;&gt; -pa /usr/lib/riak-cs/lib/basho-patches -- console
&gt;&gt; Root: /usr/lib/riak-cs
&gt;&gt; Erlang R16B02\\_basho8 (erts-5.10.3) [source] [64-bit] [smp:8:8] 
&gt;&gt; [async-threads:64] [kernel-poll:true] [frame-pointer]
&gt;&gt; 
&gt;&gt; =INFO REPORT==== 23-Nov-2015::18:11:18 ===
&gt;&gt; alarm\\_handler: {set,{system\\_memory\\_high\\_watermark,[]}}
&gt;&gt; =INFO REPORT==== 23-Nov-2015::18:11:18 ===
&gt;&gt; opening log file: "/var/log/riak-cs/access.log.2015\\_11\\_23\\_18"
&gt;&gt; Eshell V5.10.3 (abort with ^G)
&gt;&gt; (\\*\\*)1&gt; [os\\_mon] memory supervisor port (memsup): Erlang has closed 
&gt;&gt; 
&gt;&gt; The machines we are trying to deploy to have 8GB of RAM and also running a 
&gt;&gt; few other services, but have 3-4GB of RAM available. Are there any 
&gt;&gt; configuration params we can use so it consumes less memory? I've taken a 
&gt;&gt; look at the `system\\_memory\\_high\\_watermark` which is the error we see 
&gt;&gt; (http://docs.basho.com/riak/latest/ops/running/recovery/errors/ 
&gt;&gt; ). Our 
&gt;&gt; configs can be found here in case that's useful:
&gt;&gt; 
&gt;&gt; https://github.com/dimagi/commcarehq-ansible/tree/riak/ansible/roles/riakcs/templates
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; Any insight would be useful! Thank you!
&gt;&gt; 
&gt;&gt; Ben
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com 
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com 
&gt;&gt; 
&gt; 
&gt; 

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

