---
title: "Re: Lots of sparse columns. Efficient like Cassandra? Some measures	of my dataset"
description: ""
project: community
lastmod: 2013-07-17T05:56:37-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11568"
mailinglist_parent_id: "msg11566"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2013-07-17T05:56:37-07:00
---


Just to add to Jeremiah's comments, I think you should consider whether you
will be mostly retrieving:

1) all 1000 columns
2) some subset of columns
3) single columns

That will greatly influence how you design your keyspace. Remember, with
Riak it's just key-value in the end. This is one of my favorite examples of
building a column-like system on top of pure key-value, Boundary's
"Kobayashi" system: https://vimeo.com/42902962


On Wed, Jul 17, 2013 at 7:25 AM, Jeremiah Peschka &lt;
jeremiah.pesc...@gmail.com&gt; wrote:

&gt;
&gt;
&gt; --
&gt; Jeremiah Peschka - Founder, Brent Ozar Unlimited
&gt; MCITP: SQL Server 2008, MVP
&gt; Cloudera Certified Developer for Apache Hadoop
&gt;
&gt; On Jul 17, 2013, at 4:38 AM, gbrits  wrote:
&gt;
&gt; &gt; Somewhere (can't find it now) I've read that Riak, like Cassandra could
&gt; be
&gt; &gt; classified as a column store.
&gt;
&gt; That is incorrect. Riak is a key value database where the value is an
&gt; opaque blob.
&gt;
&gt; &gt;
&gt; &gt; This is just a name of course but what I understand from Cassandra is
&gt; that
&gt; &gt; this allows for space-efficient encoding of column-values. Basically
&gt; storage
&gt; &gt; is surrounded around columns instead of rows, allowing for different
&gt; &gt; persistence strategies on a per-column, or column-family, basis.
&gt; Moreover,
&gt; &gt; it would allow for zero storage overhead for non-existent column values.
&gt; &gt; I.e: basically allowing for efficient storage of sparse data-sets.
&gt; &gt;
&gt; &gt; Does Riak have this property as well?
&gt;
&gt; No. Riak will happily store whatever you throw at it. That being said,
&gt; most good serialization libraries will leave off nullable properties.
&gt;
&gt; &gt;
&gt; &gt; More specifically, I've got a datastructure on paper with the following
&gt; &gt; properties, when mapped to riak nomenclature:
&gt; &gt;
&gt; &gt; - ~ 1.000.000 keys (will not grow)
&gt; &gt; - ~ 1.000 columns. (may grow)
&gt; &gt; - 1 particular key has a median of ~50 columns. In other words the entire
&gt; &gt; set is ~ 95% sparse.
&gt; &gt; - Wherever a key has a value for a particular column, that value is
&gt; always
&gt; &gt; exactly a String (base 255) of 4KB length.
&gt; &gt; - the 4KB values themselves are pretty 'sparse' so would benefit a lot
&gt; from
&gt; &gt; run-length encoding. Is this supported out of the box?
&gt;
&gt; See above.
&gt;
&gt; &gt;
&gt; &gt; Given these properties how would Riak hold up? Hard to say of course, but
&gt; &gt; I'm looking for some general advice.
&gt;
&gt; Riak objects should be no more than ~10MB for performance reasons. You
&gt; should be safe.
&gt;
&gt; &gt;
&gt; &gt; Thanks.
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; --
&gt; &gt; View this message in context:
&gt; http://riak-users.197444.n3.nabble.com/Lots-of-sparse-columns-Efficient-like-Cassandra-Some-measures-of-my-dataset-tp4028367.html
&gt; &gt; Sent from the Riak Users mailing list archive at Nabble.com.
&gt; &gt;
&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;



-- 
Sean Cribbs 
Software Engineer
Basho Technologies, Inc.
http://basho.com/
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

