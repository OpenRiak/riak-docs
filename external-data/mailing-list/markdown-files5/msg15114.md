---
title: "Re: update schema without reindex all data"
description: ""
project: community
lastmod: 2014-11-04T01:46:10-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15114"
mailinglist_parent_id: "msg15112"
author_name: "Eric Redmond"
project_section: "mailinglistitem"
sent_date: 2014-11-04T01:46:10-08:00
---


Alexander,

I'm sorry to say, currently, the way to update a schema is to update the 
schema, and update all of the objects.

This is actually a feature we're working on (aiming for 2.1), but it doesn't 
exist right now. What will happen with this change is that AAE will be able to 
repair indexes when a schema has changed.

https://github.com/basho/yokozuna/compare/feature-er-schema-update

Eric


On Nov 2, 2014, at 8:11 AM, Alexander Popov  wrote:

&gt; does it possible?
&gt; 
&gt; now I use flow:
&gt; 
&gt; curl -XPUT "http://localhost:8098/buckets/some\\_bucket/props" 
&gt; -H'content-type: application/json' 
&gt; -d'{"props":{"search\\_index":"\\_dont\\_index\\_", "search":false}}' 
&gt; 
&gt; curl -XDELETE "http://localhost:8098/search/index/some\\_index"
&gt; curl -XPUT "http://localhost:8098/search/schema/some\\_schema" 
&gt; -H'content-type:application/xml' --data-binary @ some\\_schema.xml
&gt; curl -XPUT "http://localhost:8098/search/index/some\\_index" 
&gt; -H'content-type:application/json' -d"{\\"schema\\":\\"some\\_schema\\"}"
&gt; curl -XPUT "http://localhosy:8098/buckets/some\\_bucket/props" 
&gt; -H'content-type: application/json' 
&gt; -d"{\\"props\\":{\\"search\\_index\\":\\"some\\_index\\"}}"
&gt; 
&gt; 
&gt; after that All indexed data removed, and I need resave all data.
&gt; It works when there is mid size bucket. but how I should update schema in 
&gt; production when it have millions records.
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

