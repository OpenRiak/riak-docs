---
title: "Re: LevelDB Question"
description: ""
project: community
lastmod: 2015-08-05T07:11:03-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16360"
mailinglist_parent_id: "msg16359"
author_name: "Matthew Von-Maszewski"
project_section: "mailinglistitem"
sent_date: 2015-08-05T07:11:03-07:00
---


All,

The “Implementation Details” section of the referenced webpage is about 2 years 
behind Basho’s changes to leveldb. I already have the action item to rewrite 
it. Apologies for any confusion. The tiered storage section has an accurate, 
cumulative table.

Matthew


&gt; On Aug 5, 2015, at 10:04 AM, xia...@xiaclo.net wrote:
&gt; 
&gt; From the Riak docs 
&gt; (http://docs.basho.com/riak/latest/ops/advanced/backends/leveldb/#Tiered-Storage),
&gt; under "selecting a level", it appears ‎the 10x rule doesn't apply to the 
&gt; lower levels, and oddly looks more like 20x for the higher ones. Keep in 
&gt; mind that data can exist in multiple levels at the same time and there is 
&gt; overhead for metadata and headers. Also, having AAE enabled greatly 
&gt; increases those storage sizes.
&gt; 
&gt; I would judge the ideal level based on that table, as well as the maximum 
&gt; number of vnodes you will have on a single node since those numbers are for a 
&gt; single vnode.
&gt; 
&gt; I hope this helps.
&gt; 
&gt; PS. level 6 is unlimited, and only bound by the amount of data you store in 
&gt; Riak.
&gt; 
&gt; From: Joe Olson
&gt; Sent: Wednesday, 5 August 2015 23:33
&gt; To: riak-users@lists.basho.com
&gt; Subject: LevelDB Question
&gt; 
&gt; 
&gt; Suppose I have come to the conclusion each of my LevelDB backed Riak nodes 
&gt; needs to hold 2TB of data.
&gt; 
&gt; Also suppose I have the ability to store data on more expensive SSD drives, 
&gt; and less expensive magnetic drives.
&gt; 
&gt; My question: What should leveldb.tiered be set to in /etc/riak/riak.conf?
&gt; 
&gt; I know from the LevelDB docs on the Basho Riak site 
&gt; (http://docs.basho.com/riak/latest/ops/advanced/backends/leveldb/), each 
&gt; level holds 10x the data the level above it holds, starting at level 1 with 
&gt; 10MB.
&gt; 
&gt; If this is correct, the data capacities of each level should be:
&gt; 
&gt; Level 1: 10MB
&gt; Level 2: 100 MB
&gt; Level 3: 1 GB
&gt; Level 4: 10 GB
&gt; Level 5: 100 GB
&gt; Level 6: 1 TB
&gt; 
&gt; If this is this case, I would assume using leveldb.tiered = 5 (100GB) or 
&gt; leveldb.tiered = 6 (1 TB) of SSD capacity needed. The remainder (either 1.9 
&gt; TB or 1 TB) will be stored on the magnetic drives on a different mount point.
&gt; 
&gt; Am I reasoning this out correctly?
&gt; 
&gt; If so, will my SSD drives ever \\*exceed\\* 100GB or 1TB of data? Not that I'd 
&gt; just it that close, anyway....
&gt; 
&gt; 
&gt; 
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

