---
title: "Re: Core Claim and Property-Based Tests"
description: ""
project: community
lastmod: 2017-05-16T12:28:58-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg18212"
mailinglist_parent_id: "msg18211"
author_name: "Christopher Meiklejohn"
project_section: "mailinglistitem"
sent_date: 2017-05-16T12:28:58-07:00
---


We're looking at mainly leveraging partisan for changing the
underlying communication structure -- we hope to have via support in
Partisan soon along with connection multiplexing, so we hope to avoid
bottlenecks related to head-of-line-blocking in distributed Erlang, be
able to support SSL/TLS easier for intra-cluster communication and
have more robust visibility into how the cluster is operating.

One thing we learned from Riak MDC is that the single connection's
used in distributed Erlang are a bottleneck and difficult to apply
flow and congestion control to -- where, we believe a solution based
completely on gen\\_tcp would be more flexible.

[Keep in mind this is a ~1 year vision at the moment.]

Thanks,
- Christopher

On Tue, May 16, 2017 at 9:20 PM, Martin Sumner
 wrote:
&gt; Chris,
&gt;
&gt; Is this only the communications part, so the core concepts like the Ring,
&gt; preflists, the Claimant role, the claim algo etc will remain the same?
&gt;
&gt; Where's the best place to start reading about Partisan, I'm interested in
&gt; the motivation for changing that part of Core. Is there a special use case
&gt; or problem you're focused on (e,g. gossip problems in much larger clusters)?
&gt;
&gt; Ta
&gt;
&gt; Martin
&gt;
&gt; On 16 May 2017 at 20:06, Christopher Meiklejohn
&gt;  wrote:
&gt;&gt;
&gt;&gt; For what it's worth, the Lasp community is looking at doing a fork of
&gt;&gt; Riak Core replacing all communication with our Partisan library and
&gt;&gt; moving it completely off of distributed Erlang. We'd love to hear
&gt;&gt; from more folks that are interested in this work.
&gt;&gt;
&gt;&gt; - Christopher
&gt;&gt;
&gt;&gt; On Tue, May 16, 2017 at 6:53 PM, Tom Santero  wrote:
&gt;&gt; &gt; I'm aware of a few other companies and individuals who are interested in
&gt;&gt; &gt; continued development and support in a post-Basho world. Ideally the
&gt;&gt; &gt; community can come together and contribute to a single, canonical fork.
&gt;&gt; &gt;
&gt;&gt; &gt; Semi-related, there's a good chance this mailing list won't last much
&gt;&gt; &gt; longer, either. I'm happy to personally contribute time and resources to
&gt;&gt; &gt; help maintain the community.
&gt;&gt; &gt;
&gt;&gt; &gt; Tom
&gt;&gt; &gt;
&gt;&gt; &gt; On Tue, May 16, 2017 at 11:51 AM, Martin Sumner
&gt;&gt; &gt;  wrote:
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; I've raised an issue with Core today
&gt;&gt; &gt;&gt; (https://github.com/basho/riak\\_core/issues/908), related to the claim
&gt;&gt; &gt;&gt; algorithms.
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; There's a long-read associated with this, which provides a broader
&gt;&gt; &gt;&gt; analysis of how claim works with the ring:
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; https://github.com/martinsumner/riak\\_core/blob/mas-claimv2issues/docs/ring\\_claim.md
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; I believe the long-read explains some of the common mysterious issues
&gt;&gt; &gt;&gt; which can occur with claim.
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; We're in the process of fixing up the property-based tests for
&gt;&gt; &gt;&gt; riak\\_core\\_claim.erl, and will then be looking to make some improvements
&gt;&gt; &gt;&gt; to
&gt;&gt; &gt;&gt; claim v2 to try and pass the improved tests.
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; Big question is though, how can we progress any contribution we make
&gt;&gt; &gt;&gt; into
&gt;&gt; &gt;&gt; the Riak codebase? What is the plan going forward for open-source
&gt;&gt; &gt;&gt; contributions to Riak? Do Basho have any contingency plans for
&gt;&gt; &gt;&gt; smoothly
&gt;&gt; &gt;&gt; handing over open-source code to the community, before the list of
&gt;&gt; &gt;&gt; Basho's
&gt;&gt; &gt;&gt; Github people (https://github.com/orgs/basho/people) who still work at
&gt;&gt; &gt;&gt; Basho
&gt;&gt; &gt;&gt; is reduced to zero?
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; Is this something of concern to others?
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; Regards
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; Martin
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; &gt;&gt; riak-users mailing list
&gt;&gt; &gt;&gt; riak-users@lists.basho.com
&gt;&gt; &gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; &gt; riak-users mailing list
&gt;&gt; &gt; riak-users@lists.basho.com
&gt;&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt; &gt;
&gt;
&gt;

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

