---
title: "Re: Ripple one Association Troubles"
description: ""
project: community
lastmod: 2011-02-08T10:37:54-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02220"
mailinglist_parent_id: "msg02219"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2011-02-08T10:37:54-08:00
---


Stephen,

Sounds like you've either found a bug. When you have saved the journal entry 
in irb, what is the output of this command?

puts journal\\_entry.robject.links.inspect

Sean Cribbs 
Developer Advocate
Basho Technologies, Inc.
http://basho.com/

On Feb 8, 2011, at 1:23 PM, Stephen Allred wrote:

&gt; Hi all,
&gt; 
&gt; I'm having trouble setting up a one association in a ripple document. I'm 
&gt; trying to setup an association between a user and a journal entry, such that 
&gt; the journal has one user, that the user created.
&gt; 
&gt; My JournalEntry document:
&gt; 
&gt; --- journal\\_entry.rb ---
&gt; require 'ripple'
&gt; 
&gt; class JournalEntry
&gt; include Ripple::Document
&gt; 
&gt; property :short\\_title, String, :presence =&gt; true
&gt; property :title, String, :presence =&gt; true
&gt; property :entry, String, :presence =&gt; true
&gt; 
&gt; timestamps!
&gt; 
&gt; one :user
&gt; 
&gt; key\\_on :short\\_title
&gt; end
&gt; ---
&gt; 
&gt; My User document:
&gt; 
&gt; --- user.rb ---
&gt; require 'ripple'
&gt; require 'digest'
&gt; 
&gt; class User
&gt; include Ripple::Document
&gt; 
&gt; devise :registerable, :confirmable, :database\\_authenticatable, :recoverable, 
&gt; :validatable
&gt; 
&gt; property :email, String, :presence =&gt; true
&gt; property :password, String
&gt; property :password\\_confirmation, String
&gt; timestamps!
&gt; 
&gt; key\\_on :email
&gt; 
&gt; def key
&gt; email
&gt; end
&gt; 
&gt; def id
&gt; email
&gt; end
&gt; end
&gt; ---
&gt; 
&gt; I've tried in the rails console to associate a user with journal\\_entry 
&gt; (journal\\_entry.user = user), save it and reload it. The resulting reloaded 
&gt; journal\\_entry does not have a user (calling journal\\_entry.user prints 
&gt; "(Object doesn't support #inspect)").
&gt; 
&gt; My journal entry in riak loaded via the browser looks like:
&gt; 
&gt; {"short\\_title":"test","title":"test","entry":"test","created\\_at":"Mon, 07 Feb 
&gt; 2011 22:47:17 -0000","updated\\_at":"Tue, 08 Feb 2011 18:08:47 
&gt; -0000","\\_type":"JournalEntry"}
&gt; 
&gt; Does anyone know what I'm doing wrong?
&gt; Cheers!
&gt; Steve
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com


\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

