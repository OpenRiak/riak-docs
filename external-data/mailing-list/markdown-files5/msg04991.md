---
title: "Re: Retreiving data from an index"
description: ""
project: community
lastmod: 2011-10-03T08:24:49-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg04991"
mailinglist_parent_id: "msg04747"
author_name: "Ryan Zezeski"
project_section: "mailinglistitem"
sent_date: 2011-10-03T08:24:49-07:00
---


Antonio,

The reason the lowercase search doesn't work is because the default analyzer
(whitespace analyzer) is case sensitive [1]. You could use the "standard"
analyzer which will lowercase all terms but beware it's based off the
standard Lucene analyzer which is really meant for full text search.
 Another option, if you are comfortable with Erlang, is to augment the
whitespace analyzer to normalize all terms and add that module to your code
path. Otherwise, your best bet is to probably normalize in
your application.

Looking at your data it seems like you may be using Search as a secondary
index method. You should know that in 1.0 Riak now has native secondary
index support which may fit your problem better.

-Ryan

[1]: http://wiki.basho.com/Riak-Search---Schema.html#Analyzers

2011/9/15 Antonio Fernández Vara 

&gt; Hi all,
&gt;
&gt; I'm performing queries to an index using riak client, indexing data from
&gt; models for a new Rails app. Making the first tests on the search I have
&gt; found that those queries must match the case that was used.
&gt;
&gt; Is there some option for make the queries indiferent of the case? Or, must
&gt; I take care of case indexing? (just downcase them or whatever) I saw at the
&gt; source code for search and just the options are for format of answer, sort,
&gt; start row and number of rows.
&gt;
&gt;
&gt; Just a sample I'm telling:
&gt;
&gt; ruby-1.9.2-p136 :049 &gt; client.search("users", "name:ant\\*")
&gt; =&gt; {"responseHeader"=&gt;{"status"=&gt;0, "QTime"=&gt;6,
&gt; "params"=&gt;{"q"=&gt;"name:ant\\*", "q.op"=&gt;"or", "filter"=&gt;"", "wt"=&gt;"json"}},
&gt; "response"=&gt;{"numFound"=&gt;0, "start"=&gt;0, "maxScore"=&gt;"0.0", "docs"=&gt;[]}}
&gt; ruby-1.9.2-p136 :050 &gt; client.search("users", "name:Ant\\*")
&gt; =&gt; {"responseHeader"=&gt;{"status"=&gt;0, "QTime"=&gt;6,
&gt; "params"=&gt;{"q"=&gt;"name:Ant\\*", "q.op"=&gt;"or", "filter"=&gt;"", "df"=&gt;"value",
&gt; "wt"=&gt;"json", "version"=&gt;"1.1", "rows"=&gt;1}}, "response"=&gt;{"numFound"=&gt;1,
&gt; "start"=&gt;0, "maxScore"=&gt;"0.00000e+0", "docs"=&gt;[{"id"=&gt;"1326d69a3bb001001",
&gt; "index"=&gt;"users", "fields"=&gt;{"name"=&gt;"Antonio Fernández",
&gt; "slug"=&gt;"antonio-fernandez"}, "props"=&gt;{}}]}}
&gt; ruby-1.9.2-p136 :051 &gt;
&gt;
&gt;
&gt; Also there is another question, since look for keys in buckets is just a
&gt; mistake, it could be nice to be able to query all the objects from an index,
&gt; just I could using 2 letters and \\* as minimum. (I used sunspot gem that
&gt; works with solr and without any query term it allows you to get all the
&gt; results. not sure is there is an option for that here)
&gt;
&gt; Thank you in advance,
&gt;
&gt; Antonio
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

