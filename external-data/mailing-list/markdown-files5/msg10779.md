---
title: "Re: Using Fog with Ruby"
description: ""
project: community
lastmod: 2013-04-08T17:01:12-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg10779"
mailinglist_parent_id: "msg10776"
author_name: "Christopher Meiklejohn"
project_section: "mailinglistitem"
sent_date: 2013-04-08T17:01:12-07:00
---


On Monday, April 8, 2013 at 7:32 PM, Christopher Meiklejohn wrote:
&gt; On Monday, April 8, 2013 at 7:08 PM, Hector Castro wrote:
&gt; &gt; Hi Michael,
&gt; &gt; 
&gt; &gt; I believe that you are seeing this error because the `cs\\_root\\_host`
&gt; &gt; Riak CS configuration option and `:host` (in the script's
&gt; &gt; configuration map) are not the same. Once you update `cs\\_root\\_host`,
&gt; &gt; make sure that you restart Riak CS for the changes to take effect.
&gt; 
&gt; 
&gt; 
&gt; Hi Michael,
&gt; 
&gt; Another alternative is to configure proxy\\_port and proxy\\_host in your Fog 
&gt; connection setup to point to your Riak CS instance, and use the default host 
&gt; of RiakCS which is s3.amazonaws.com (http://s3.amazonaws.com).
&gt; 
&gt; The reason this is failing is because the host is used to generate the HMAC 
&gt; which authenticates each request.
&gt; 
&gt; Please let me know if you have any other questions
Eek, I confused s3 client and fog. 

Here's a correct example of how to use the proxy in Fog.

@client = Fog::RiakCS::Provisioning.new(
 :riakcs\\_access\\_key\\_id =&gt; KEY
 :riakcs\\_secret\\_access\\_key =&gt; SECRET
 :host =&gt; 's3.amazonaws.com',
 :port =&gt; 80,
 :connection\\_options =&gt; {
 :proxy =&gt; 'http://localhost:8080',
 }
)



- Chris

 --
Christopher Meiklejohn
Software Engineer
Basho Technologies, Inc.



\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

