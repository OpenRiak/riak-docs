---
title: "Re: vclock, vtag, entity tag"
description: ""
project: community
lastmod: 2012-12-27T14:19:18-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg09683"
mailinglist_parent_id: "msg09675"
author_name: "Pavan Venkatesh"
project_section: "mailinglistitem"
sent_date: 2012-12-27T14:19:18-08:00
---


Hi Shuhao,

Lets say, two clients update the same object at the same time (through
http or protobuf),then a sibling is created, but with the same vector
clock.They merge into single object with one vector clock, but these
siblings live in the same object.
User intervention is required and one can pick the correct value and issue
a put request with that vector clock in order to resolve the conflict.
Hope this helps.

Pavan

On 12/25/12 10:08 PM, "Shuhao"  wrote:

&gt;Hi,
&gt;
&gt;I'm just browsing through the API documentations for Riak and I just
&gt;noticed a couple of things that's pretty confusing:
&gt;
&gt;It's my understanding that with the HTTP fetch request, each
&gt;object/sibling returned will have its own vclock in the form of the HTTP
&gt;header `X-Riak-Vclock` and an entity tag under the header `ETag`. There
&gt;is also a vtag url parameter specified by the HTTP fetch request which I
&gt;assume fetches specific sibling with that entity tag. [1]
&gt;
&gt;[1]: 
&gt;http://docs.basho.com/riak/latest/references/apis/http/HTTP-Fetch-Object/
&gt;
&gt;However, the protobuf client will return a list of siblings but only
&gt;with 1 vclock with `optional bytes vclock = 2;` for all the siblings
&gt;returned under `content`. For each sibling, there will be a `vtag`
&gt;attribute, which I assume is the entity tag as specified in the HTTP
&gt;document. [2]
&gt;
&gt;[2]: 
&gt;http://docs.basho.com/riak/latest/references/apis/protocol-buffers/PBC-Fet
&gt;ch
&gt;-Object/
&gt;
&gt;So the confusion is that why is it that in the HTTP request, each
&gt;sibling has its own vclock and entity tag/vtag while in the PBC request,
&gt;the entire response only has 1 vclock and each object has its own
&gt;vtag/entity tag. I'm not too sure if my understanding is complete.
&gt;
&gt;Thanks,
&gt;
&gt;Shuhao
&gt;
&gt;\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;riak-users mailing list
&gt;riak-users@lists.basho.com
&gt;http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;



\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

