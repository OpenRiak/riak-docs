---
title: "Re: reads/writes during node replacement"
description: ""
project: community
lastmod: 2016-11-14T19:14:41-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17750"
mailinglist_parent_id: "msg17741"
author_name: "Johnny Tan"
project_section: "mailinglistitem"
sent_date: 2016-11-14T19:14:41-08:00
---


Thank you Magnus.

On Mon, Nov 14, 2016 at 7:06 AM, Magnus Kessler  wrote:

&gt; On 12 November 2016 at 00:08, Johnny Tan  wrote:
&gt;
&gt;&gt; When doing a node replace (http://docs.basho.com/riak/1.
&gt;&gt; 4.12/ops/running/nodes/replacing/), after commit-ing the plan, how does
&gt;&gt; the cluster handle reads/writes? Do I include the new node in my app's
&gt;&gt; config as soon as I commit, and let riak internally handle which node(s)
&gt;&gt; will do the reads/writes? Or do I wait until the ringready on the new node
&gt;&gt; before being able to do reads/writes to it?
&gt;&gt;
&gt;&gt; johnny
&gt;&gt;
&gt;&gt;
&gt; Hi Johnny,
&gt;
&gt; As soon as a node has been joined to the cluster it is capable of taking
&gt; on requests. `riak-admin ringready` returns true after a join or leave
&gt; operation when the new ring state has been communicated successfully to all
&gt; nodes in the cluster.
&gt;
&gt; During a replacement operation, the leaving node will hand off [0] all its
&gt; partitions to the joining node. Both nodes can handle requests during this
&gt; phase and store data in the partitions they own. Once the leaving node has
&gt; handed off all its partitions, it will automatically shut down. Please keep
&gt; this in mind when configuring your clients or load balancers. Clients
&gt; should deal with nodes being temporarily or permanently unavailable.
&gt;
&gt; Kind Regards,
&gt;
&gt; Magnus
&gt;
&gt; [0]: http://docs.basho.com/riak/kv/2.1.4/using/reference/handoff/
&gt;
&gt; --
&gt; Magnus Kessler
&gt; Client Services Engineer
&gt; Basho Technologies Limited
&gt;
&gt; Registered Office - 8 Lincolnâ€™s Inn Fields London WC2A 3BP Reg 07970431
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

