---
title: "Javascript count of keys using mapreduce gives different counts"
description: ""
project: community
lastmod: 2013-07-19T18:50:28-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11647"
author_name: "kpandey"
project_section: "mailinglistitem"
sent_date: 2013-07-19T18:50:28-07:00
---


I'm using javascript map reduce to count keys on a bucket with memory
backend. Count seem to randomly increase or decrease on subsequent call
when no new data is inserted. Call is hitting the same instance in a
cluster.
Any idea why this might be happening

Each count request is made in few seconds interval using http post like so

curl -XPOST http://xxxxxxxxxx:8098/mapred -H 'Content-Type:
application/json' -d '
{"inputs":"TEST\\_BUCKET",
 "query":[{"map":{"language":"javascript",
 "keep":false,
 "source":"function(riakobj) {return [1]; }"}},
 {"reduce":{"language":"javascript",
 "keep":true,
 "name":"Riak.reduceSum"}}]}'


Thanks
Kumar



--
View this message in context: 
http://riak-users.197444.n3.nabble.com/Javascript-count-of-keys-using-mapreduce-gives-different-counts-tp4028455.html
Sent from the Riak Users mailing list archive at Nabble.com.

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

