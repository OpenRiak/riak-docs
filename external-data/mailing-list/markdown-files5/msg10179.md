---
title: "Re: 405 when PUTting a new object"
description: ""
project: community
lastmod: 2013-02-21T07:36:57-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg10179"
mailinglist_parent_id: "msg10174"
author_name: "Age Mooij"
project_section: "mailinglistitem"
sent_date: 2013-02-21T07:36:57-08:00
---


You are adding an extra illegal path element (/bbb) between the name of your 
bucket (/aaa) and the key.

If you are using the old url schema, you can either do a PUT on 
/riak/bucket/key or a POST on /riak/bucket. 

Age

On Feb 17, 2013, at 22:35, Simon Majou  wrote:

&gt; Hello,
&gt; 
&gt; It don't understand how to create new objects in an empty database.
&gt; 
&gt; The dcumentation says we can create objects with or without key :
&gt; http://docs.basho.com/riak/1.2.1/references/apis/http/HTTP-Store-Object/
&gt; 
&gt; But at the same time we don't need to create the buckets, they are created 
&gt; automatically :
&gt; http://docs.basho.com/riak/latest/tutorials/fast-track/Basic-Riak-API-Operations/
&gt; 
&gt; So how does Riak determine if we are creating an object with a key or we are 
&gt; creating an object without a key ?
&gt; 
&gt; I am trying to create an object (with a key) in version 1.2.1 and it fails :
&gt; 
&gt; $ curl -XPUT -d '{"bar":"b"}' -H "Content-Type: application/json" -v 
&gt; http://127.0.0.1:8091/riak/aaa/bbb/key
&gt; \\* About to connect() to 127.0.0.1 port 8091 (#0)
&gt; \\* Trying 127.0.0.1... connected
&gt; &gt; PUT /riak/aaa/bbb/key HTTP/1.1
&gt; &gt; User-Agent: curl/7.22.0 (x86\\_64-pc-linux-gnu) libcurl/7.22.0 OpenSSL/1.0.1 
&gt; &gt; zlib/1.2.3.4 libidn/1.23 librtmp/2.3
&gt; &gt; Host: 127.0.0.1:8091
&gt; &gt; Accept: \\*/\\*
&gt; &gt; Content-Type: application/json
&gt; &gt; Content-Length: 11
&gt; &gt;
&gt; \\* upload completely sent off: 11out of 11 bytes
&gt; &lt; HTTP/1.1 405 Method Not Allowed
&gt; &lt; Server: MochiWeb/1.1 WebMachine/1.9.0 (someone had painted it blue)
&gt; &lt; Date: Sun, 17 Feb 2013 21:32:59 GMT
&gt; &lt; Content-Length: 0
&gt; &lt; Allow: GET, HEAD, POST
&gt; &lt;
&gt; \\* Connection #0 to host 127.0.0.1 left intact
&gt; \\* Closing connection #0
&gt; 
&gt; (the bucket /riak/aaa/bbb doesn't exist but it should be created 
&gt; automatically)
&gt; 
&gt; Simon
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

