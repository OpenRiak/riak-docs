---
title: "Re: status of signature version 4 requests"
description: ""
project: community
lastmod: 2015-08-05T23:45:04-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16366"
mailinglist_parent_id: "msg16350"
author_name: "Kota Uenishi"
project_section: "mailinglistitem"
sent_date: 2015-08-05T23:45:04-07:00
---


Henrik,
Thank you for trying Riak CS. Besides, current status of v4
authentication is not yet GA, not all features implemented, and only
partially tested with boto (Python AWS library). I'm not sure what's
going on in your cluster, but can you find any error or warning logs
simaltenously happning your 500?

On Tue, Aug 4, 2015 at 7:14 PM, Henrik Lund Kramshøj  wrote:
&gt; Hi There
&gt;
&gt; I am researching self-hosted alternatives to S3, and found Riak CS.
&gt; Setup was OK, and I currently can access the server fine with s3cmd
&gt;
&gt; Unfortunately I cannot make it work with AWS SDK PHP version 3, since it
&gt; uses signature version 4.
&gt;
&gt; I have done lots of trial and error, using PHP
&gt; define('AWS\\_KEY', 'xxx');
&gt; define('AWS\\_SECRET\\_KEY', 'xxx');
&gt; $client = new S3Client([
&gt; 'credentials' =&gt; [
&gt; 'key' =&gt; AWS\\_KEY,
&gt; 'secret' =&gt; AWS\\_SECRET\\_KEY
&gt; ],
&gt; 'region' =&gt; 'local',
&gt; 'version' =&gt; '2006-03-01',
&gt; 'endpoint' =&gt; '172.xx.x.xx:8080',
&gt; // 'signature\\_version' =&gt; 'v4'
&gt; ]);
&gt;
&gt; signature\\_version can only be v4 or anonymous.
&gt;
&gt; What is the expectation with v4 requests?
&gt;
&gt; I did find the option, auth\\_v4\\_enabled:
&gt; root@riaks2:/etc/riak-cs# cat advanced.config
&gt; [
&gt; {riak\\_cs, [
&gt; %% {auth\\_v4\\_enabled, true}
&gt; ]}
&gt; ].
&gt;
&gt; but it ends up in error 500
&gt; ""Internal Server Error
=====================

""
&gt;
&gt; Do I need more configuration, or is it not ready.
&gt;
&gt;
&gt;
&gt; root@riaks2:/etc/riak-cs# lsb\\_release -a
&gt; No LSB modules are available.
&gt; Distributor ID: Ubuntu
&gt; Description: Ubuntu 14.04.2 LTS
&gt; Release: 14.04
&gt; Codename: trusty
&gt; root@riaks2:/etc/riak-cs# dpkg -l | egrep "riak|stanchion"
&gt; ii riak 2.0.5-1
&gt; amd64 Riak is a distributed data store
&gt; ii riak-cs 2.0.1-1
&gt; amd64 Riak CS
&gt; ii stanchion 2.0.0-1
&gt; amd64 Request Serialization Application
&gt;
&gt; Best regards
&gt;
&gt; Henrik
&gt; --
&gt; Henrik Lund Kramshøj, Follower of the Great Way of Unix
&gt; internet samurai cand.scient CISSP
&gt; h...@krugercorp.dk +45 2678 1919
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com



-- 
Kota UENISHI / @kuenishi
Basho Japan KK

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

