---
title: "Re: Connection multiplexing in the Erlang client"
description: ""
project: community
lastmod: 2016-01-02T05:32:34-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16912"
mailinglist_parent_id: "msg16906"
author_name: "Paulo Almeida"
project_section: "mailinglistitem"
sent_date: 2016-01-02T05:32:34-08:00
---


Hi Russell,

Thanks for the confirmation.

I'll take a look at the riak\\_api. I suspect the protobuf messages would
also need to be changed to include a token/correlation id in order to allow
async request/replies.

Regards,

Paulo

On Thu, Dec 31, 2015 at 10:16 AM, Russell Brown 
wrote:

&gt; Hi Paulo,
&gt; You’ll need more than client work. If you’re interested in exploring the
&gt; server side code riak\\_api (https://github.com/basho/riak\\_api) is probably
&gt; where you want to look.
&gt;
&gt; I’m happy to help/advise on this if you want to get stuck in :D
&gt;
&gt; Cheers
&gt;
&gt; Russell
&gt;
&gt; On 31 Dec 2015, at 08:47, Paulo Almeida 
&gt; wrote:
&gt;
&gt; &gt; Hi,
&gt; &gt;
&gt; &gt; A poolboy or other connection pool based solution still means 1 open tcp
&gt; connection per worker. I'm exploring the option of having a single TCP
&gt; connection (actually 1 for each Riak node) and then multiplex concurrent
&gt; requests to a DB node in a single TCP connection (think HTTP/2 TCP
&gt; connection multiplexing).
&gt; &gt;
&gt; &gt; Thanks.
&gt; &gt;
&gt; &gt; Paulo
&gt; &gt;
&gt; &gt; On Thu, Dec 31, 2015 at 2:59 AM, Bryan Hunt 
&gt; wrote:
&gt; &gt; Paulo,
&gt; &gt;
&gt; &gt; You can find a list of community maintained PBC pooling ‎libraries in
&gt; the Erlang sub-section of this page:
&gt; &gt;
&gt; &gt; ‎
&gt; http://docs.basho.com/riak/latest/dev/using/libraries/#Community-Libraries
&gt; &gt;
&gt; &gt; II was under the impression that Riak Erlang client ships with poolboy
&gt; ‎so I'm uncertain of the distinction between the different libraries listed.
&gt; &gt;
&gt; &gt; Perhaps someone could comment to clarify?
&gt; &gt;
&gt; &gt; Bryan
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; From: Paulo Almeida
&gt; &gt; Sent: Wednesday, December 30, 2015 10:40 PM
&gt; &gt; To: riak-users@lists.basho.com
&gt; &gt; Subject: Connection multiplexing in the Erlang client
&gt; &gt;
&gt; &gt; Hi,
&gt; &gt;
&gt; &gt; Does the Erlang Riak client support multiplexing multiple concurrent
&gt; calls in a single TCP connection? Specifically when using the PB interface
&gt; (riakc\\_pb\\_socket:start\\_link).
&gt; &gt;
&gt; &gt; Thanks.
&gt; &gt;
&gt; &gt; Regards,
&gt; &gt;
&gt; &gt; Paulo
&gt; &gt;
&gt; &gt;
&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

