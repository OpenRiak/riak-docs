---
title: "Re: Installed Riak via ssh. Now can/should I test *remotely* from a	browser?"
description: ""
project: community
lastmod: 2010-12-01T18:58:20-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01692"
mailinglist_parent_id: "msg01691"
author_name: "Andrew Stone"
project_section: "mailinglistitem"
sent_date: 2010-12-01T18:58:20-08:00
---


Hi Stefan,

You need to configure Riak to listen on the right interface. You are trying
to hit it from 127.0.0.1 which is only available from the local machine.

If you set web\\_ip to 0.0.0.0 in app.config for riak\\_core it will listen on
all interfaces. Then you can try to hit it with a curl remotely using
myhost.com from your browser.

-Andrew

On Wed, Dec 1, 2010 at 9:27 PM, Stefan Scott Alexander &lt;
stefanscottal...@gmail.com&gt; wrote:

&gt; Hi -
&gt;
&gt; SUMMARY:
&gt; This may be a silly question but... after installing Riak via ssh, can I
&gt; (or should I) test \\*remotely\\* it from a browser?
&gt;
&gt; I'm very excited about being able to learn how to use MapReduce with Riak.
&gt;
&gt; I installed Riak on my remote VPS server (running Debian 5.0 Lenny) - via
&gt; Putty & SSH on my Windows laptop.
&gt;
&gt; So... if I PUT some data into Riak using curl, it seems to show up.
&gt;
&gt; But I can't see it in my browser if I go to my server, eg:
&gt;
&gt; http://myhost.com/riak/images/img001.jpg
&gt;
&gt; returns "Error 101" - webpage not available.
&gt;
&gt; Of course, since my 3 nodes are all at 127.0.0.1, then maybe I \\*shouldn't\\*
&gt; be able to access them remotely from a browser.
&gt;
&gt; (By the way, I did open up my firewall on ports 8091, 8092, and 8093 -
&gt; incoming and outgoing).
&gt;
&gt; Anyways... I was just wondering if anyone had any pointers.
&gt;
&gt; +++++
&gt;
&gt; DETAILS:
&gt;
&gt; (0) I followed the steps here:
&gt;
&gt; https://wiki.basho.com/display/RIAK/Building+a+Development+Environment
&gt;
&gt; and everything worked fine.
&gt;
&gt;
&gt; (1) I ran a test:
&gt;
&gt; curl -H "Accept: text/plain" http://127.0.0.1:8091/stats
&gt;
&gt; and got the output:
&gt;
&gt; curl -H "Accept: text/plain" http://127.0.0.1:8091/stats
&gt; {
&gt; "vnode\\_gets": 0,
&gt; "vnode\\_puts": 0,
&gt; "read\\_repairs": 0,
&gt; "vnode\\_gets\\_total": 2,
&gt; "vnode\\_puts\\_total": 1,
&gt; "node\\_gets": 0,
&gt; "node\\_gets\\_total": 2,
&gt; "node\\_get\\_fsm\\_time\\_mean": "undefined",
&gt; "node\\_get\\_fsm\\_time\\_median": "undefined",
&gt; "node\\_get\\_fsm\\_time\\_95": "undefined",
&gt; "node\\_get\\_fsm\\_time\\_99": "undefined",
&gt; "node\\_get\\_fsm\\_time\\_100": "undefined",
&gt; "node\\_puts": 0,
&gt; "node\\_puts\\_total": 1,
&gt; "node\\_put\\_fsm\\_time\\_mean": "undefined",
&gt; "node\\_put\\_fsm\\_time\\_median": "undefined",
&gt; "node\\_put\\_fsm\\_time\\_95": "undefined",
&gt; "node\\_put\\_fsm\\_time\\_99": "undefined",
&gt; "node\\_put\\_fsm\\_time\\_100": "undefined",
&gt; "read\\_repairs\\_total": 0,
&gt; "cpu\\_nprocs": 291,
&gt; "cpu\\_avg1": 0,
&gt; "cpu\\_avg5": 0,
&gt; "cpu\\_avg15": 0,
&gt; "mem\\_total": 537100288,
&gt; "mem\\_allocated": 520372224,
&gt; "nodename": "d...@127.0.0.1",
&gt; "connected\\_nodes": [
&gt; "d...@127.0.0.1",
&gt; "d...@127.0.0.1"
&gt; ],
&gt; "sys\\_driver\\_version": "1.5",
&gt; "sys\\_global\\_heaps\\_size": 0,
&gt; "sys\\_heap\\_type": "private",
&gt; "sys\\_logical\\_processors": 2,
&gt; "sys\\_otp\\_release": "R14B",
&gt; "sys\\_process\\_count": 155,
&gt; "sys\\_smp\\_support": true,
&gt; "sys\\_system\\_version": "Erlang R14B (erts-5.8.1) [source] [smp:2:2]
&gt; [rq:2] [async-threads:64] [kernel-poll:true]",
&gt; "sys\\_system\\_architecture": "i686-pc-linux-gnu",
&gt; "sys\\_threads\\_enabled": true,
&gt; "sys\\_thread\\_pool\\_size": 64,
&gt; "sys\\_wordsize": 4,
&gt; "ring\\_members": [
&gt; "d...@127.0.0.1",
&gt; "d...@127.0.0.1",
&gt; "d...@127.0.0.1"
&gt; ],
&gt; "ring\\_num\\_partitions": 64,
&gt; "ring\\_ownership": "[{'d...@127.0.0.1',21},{'d...@127.0.0.1',21},{'
&gt; d...@127.0.0.1',22}]",
&gt; "ring\\_creation\\_size": 64,
&gt; "storage\\_backend": "riak\\_kv\\_bitcask\\_backend",
&gt; "pbc\\_connects\\_total": 0,
&gt; "pbc\\_connects": 0,
&gt; "pbc\\_active": 0,
&gt; "riak\\_err\\_version": "0.1.0",
&gt; "runtime\\_tools\\_version": "1.8.4.1",
&gt; "luwak\\_version": "1.0",
&gt; "skerl\\_version": "0.1",
&gt; "riak\\_kv\\_version": "0.13.0",
&gt; "riak\\_core\\_version": "0.13.0",
&gt; "luke\\_version": "0.2.2",
&gt; "erlang\\_js\\_version": "0.4.1",
&gt; "bitcask\\_version": "1.1.4",
&gt; "mochiweb\\_version": "1.7.1",
&gt; "webmachine\\_version": "1.7.3",
&gt; "crypto\\_version": "2.0.1",
&gt; "os\\_mon\\_version": "2.2.5",
&gt; "sasl\\_version": "2.1.9.2",
&gt; "stdlib\\_version": "1.17.1",
&gt; "kernel\\_version": "2.14.1"
&gt;
&gt; So that looked good.
&gt;
&gt;
&gt; (2) To do a test involving an image, I copied an image (myimg.jpg) into my
&gt; current directory, and then PUT the image into Riak (at
&gt; riak/images/img001.jpg) using curl:
&gt;
&gt; curl -X PUT HTTP://127.0.0.1:8091/riak/images/img001.jpg -H "Content-type:
&gt; image/jpeg" --data-binary @myimg.jpg
&gt;
&gt; Now the image seems to be stored properly in Riak, because it seems that I
&gt; can GET it with curl:
&gt;
&gt; curl -v http://127.0.0.1:8091/riak/images/img001.jpg
&gt;
&gt; (This sends a bunch of garbled text to my Putty/SSH window. I assume this
&gt; means "success" because it's just the binary data of the jpg file.)
&gt;
&gt;
&gt; (3) I also PUT some text, and it seems to work:
&gt;
&gt; curl -v -d 'this is a test' -H "Content-Type: text/plain"
&gt; http://127.0.0.1:8091/riak/test
&gt;
&gt; \\* About to connect() to 127.0.0.1 port 8091 (#0)
&gt; \\* Trying 127.0.0.1... connected
&gt; \\* Connected to 127.0.0.1 (127.0.0.1) port 8091 (#0)
&gt; &gt; POST /riak/test HTTP/1.1
&gt; &gt; User-Agent: curl/7.18.2 (i486-pc-linux-gnu) libcurl/7.18.2 OpenSSL/0.9.8g
&gt; zlib/1.2.3.3 libidn/1.8 libssh2/0.18
&gt; &gt; Host: 127.0.0.1:8091
&gt; &gt; Accept: \\*/\\*
&gt; &gt; Content-Type: text/plain
&gt; &gt; Content-Length: 14
&gt; &gt;
&gt; &lt; HTTP/1.1 201 Created
&gt; &lt; Vary: Accept-Encoding
&gt; &lt; Server: MochiWeb/1.1 WebMachine/1.7.3 (participate in the frantic)
&gt; &lt; Location: /riak/test/QTPs0B1zeu9I1WXtJnaAJpQyOee
&gt; &lt; Date: Thu, 02 Dec 2010 02:12:27 GMT
&gt; &lt; Content-Type: application/json
&gt; &lt; Content-Length: 0
&gt; &lt;
&gt; \\* Connection #0 to host 127.0.0.1 left intact
&gt; \\* Closing connection #0
&gt;
&gt; Then I GET the test (using the location key generated above):
&gt;
&gt; curl -v http://127.0.0.1:8091/riak/test/QTPs0B1zeu9I1WXtJnaAJpQyOee
&gt;
&gt; \\* About to connect() to 127.0.0.1 port 8091 (#0)
&gt; \\* Trying 127.0.0.1... connected
&gt; \\* Connected to 127.0.0.1 (127.0.0.1) port 8091 (#0)
&gt; &gt; GET /riak/test/QTPs0B1zeu9I1WXtJnaAJpQyOee HTTP/1.1
&gt; &gt; User-Agent: curl/7.18.2 (i486-pc-linux-gnu) libcurl/7.18.2 OpenSSL/0.9.8g
&gt; zlib/1.2.3.3 libidn/1.8 libssh2/0.18
&gt; &gt; Host: 127.0.0.1:8091
&gt; &gt; Accept: \\*/\\*
&gt; &gt;
&gt; &lt; HTTP/1.1 200 OK
&gt; &lt; X-Riak-Vclock: a85hYGBgzGDKBVIsbGvXVWcwJTLmsTJ012Qf48sCAA==
&gt; &lt; Vary: Accept-Encoding
&gt; &lt; Server: MochiWeb/1.1 WebMachine/1.7.3 (participate in the frantic)
&gt; &lt; Link: ; rel="up"
&gt; &lt; Last-Modified: Thu, 02 Dec 2010 02:12:27 GMT
&gt; &lt; ETag: 35XAETNjfRGZJESsKwuMvB
&gt; &lt; Date: Thu, 02 Dec 2010 02:12:47 GMT
&gt; &lt; Content-Type: text/plain
&gt; &lt; Content-Length: 14
&gt; &lt;
&gt; \\* Connection #0 to host 127.0.0.1 left intact
&gt; \\* Closing connection #0
&gt; this is a test
&gt;
&gt;
&gt; OK, so that's the silly question I have: If I'm connecting to this server
&gt; remotely, is there any point in trying to see that data from a browser?
&gt;
&gt; If I do the following:
&gt;
&gt; http://myhost.com:8091/riak/images/img001.jpg
&gt; http://myhost.com:8091/riak/test/QTPs0B1zeu9I1WXtJnaAJpQyOee
&gt;
&gt; the browser just says "web page unavailable".
&gt;
&gt; +++++
&gt;
&gt; Anyways, everything probably \\*is\\* working fine - and I probably just
&gt; shouldn't be trying to test it from a remote browser - because normally I
&gt; wouldn't access "raw" Riak data directly from a browser, right? Eventually
&gt; I'll have some sort of web application framework set up (eg, Nitrogen), and
&gt; in the source of a web page I'll be using a Riak URL as a datasource - say,
&gt; to send out some JSON to populate a control on the web page, right?
&gt;
&gt; Sorry about this newbie question! Thanks for any pointers.
&gt;
&gt; - Scott
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

