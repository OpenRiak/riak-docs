---
title: "Re: X-Riak-Meta-* and Solr"
description: ""
project: community
lastmod: 2015-08-11T16:54:43-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16408"
mailinglist_parent_id: "msg16407"
author_name: "Dmitri Zagidulin"
project_section: "mailinglistitem"
sent_date: 2015-08-11T16:54:43-07:00
---


Here's some more examples / writeups on indexing custom metadata fields, in
addition to Zeeshan's links:

https://github.com/basho/yokozuna/issues/5
https://github.com/basho/yokozuna/blob/develop/docs/TAGGING.md

On Wed, Aug 12, 2015 at 12:25 AM, Zeeshan Lakhani 
wrote:

&gt; Hey Joe,
&gt;
&gt; Yes, you are able to index with meta/tag fields. Hereâ€™s an example in one
&gt; of our erlang tests using the riak\\_erlang pb client:
&gt; https://github.com/basho/yokozuna/blob/32d71135644a579943799ff9a70b67dee0201f80/riak\\_test/yokozuna\\_essential.erl#L306
&gt; .
&gt;
&gt; `user\\_s` is indexed, for example, b/c of
&gt; https://github.com/basho/yokozuna/blob/develop/priv/default\\_schema.xml#L36 in
&gt; the default schema.
&gt;
&gt; Hope this helps. Thanks.
&gt;
&gt;
&gt; Zeeshan Lakhani
&gt; programmer |
&gt; software engineer at @basho |
&gt; org. member/founder of @papers\\_we\\_love | paperswelove.org
&gt; twitter =&gt; @zeeshanlakhani
&gt;
&gt; On Aug 11, 2015, at 5:34 PM, Joe Olson  wrote:
&gt;
&gt;
&gt; Is it possible to automatically index custom X-Riak-Meta-\\* fields with
&gt; Solr? Do I have to create a custom extractor or modify the default search
&gt; schema as outlined at
&gt; http://docs.basho.com/riak/latest/dev/search/custom-extractors/ ?
&gt;
&gt; Here is my python code I am using to test:
&gt;
&gt; # Create search index
&gt; client = RiakClient(protocol='pbc',nodes=[{ 'host': 'xxx.yyy.zzz.www',
&gt; 'pb\\_port': 8087 }])
&gt; client.create\\_search\\_index('testindex1', '\\_yz\\_default')
&gt;
&gt; # On cluster: create bucket type, assign index
&gt; # riak-admin bucket-type create solrindexed
&gt; '{"props":{"search\\_index":"testindex1"}}'
&gt; # riak-admin bucket-type activate solrindexed
&gt;
&gt; # Create instance of bucket using bucket type
&gt; bucket = client.bucket\\_type('solrindexed').bucket('myBucket')
&gt;
&gt; # Create new key in bucket
&gt; obj = RiakObject(client, bucket, 'myKey')
&gt;
&gt; # Create metadata in headers, integers not allowed here???
&gt; obj.usermeta = {"startTime":"1443506400000", "endTime":"1443507000000"}
&gt;
&gt; # Jam some random bytes in there
&gt; obj.encoded\\_data = open("/dev/urandom","rb").read(int(1258291))
&gt; obj.content\\_type = 'application/octet-stream'
&gt;
&gt; # Write it
&gt; obj.store()
&gt;
&gt; # Now see if we can find it..what is the syntax here? Always returns
&gt; 'num\\_found': 0
&gt; results = client.fulltext\\_search('testindex1',
&gt; 'X-Riak-Meta-startTime:1443506400000')
&gt; print results
&gt;
&gt; Also, according to the documentation at
&gt; http://basho.github.io/riak-python-client/object.html, 'usermeta' can
&gt; only have strings on the value side. Is there an explanation why integers
&gt; aren't allowed?
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

