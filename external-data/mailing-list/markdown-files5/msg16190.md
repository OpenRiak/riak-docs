---
title: "Re: my cluster spontaneously loses a node after ~48hrs"
description: ""
project: community
lastmod: 2015-06-03T12:12:07-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16190"
mailinglist_parent_id: "msg16129"
author_name: "Matthew Brender"
project_section: "mailinglistitem"
sent_date: 2015-06-03T12:12:07-07:00
---


Hi Jason,

Given the unique event you had here, I'm curious to hear whether you saw
further restarts. This kind of spontaneousness is the polar opposite of
what most users report from Riak, which is why I want to follow up.

Thanks,
Matt


\\*Matt Brender | Developer Advocacy Lead\\*
Basho Technologies
t: @mjbrender 


On Tue, May 12, 2015 at 2:30 PM, Jason Golubock 
wrote:

&gt;
&gt; Bryan- thanks for this tip,
&gt; i probably wouldn't have suspected ulimit.
&gt;
&gt; It's been 4 days now since my last restart, which i've never reached
&gt; before.
&gt; so i'm cautious to say that the problem has gone away.
&gt;
&gt; i suspect this progress is due to some library updates
&gt; we performed on the hosts. it turns out some of them were out
&gt; of date, which i wan't aware of. we updated them all at once,
&gt; so there's no way to identify which one(s) caused the problem,
&gt; assuming that was the problem. hopeful now,
&gt;
&gt; ~ Jason
&gt;
&gt;
&gt;
&gt;
&gt; On 12.05.2015 05:37, Bryan Hunt wrote:
&gt;
&gt;&gt; Also ensure ulimit is set according to the recommendations on
&gt;&gt; docs.basho.com. ulimit set too low is a common cause of node termination.
&gt;&gt; On 5 May 2015 21:23, "Jason Golubock"  wrote:
&gt;&gt;
&gt;&gt;
&gt;&gt;&gt; Scott - thanks for the response,
&gt;&gt;&gt; yes i've used all those tools at one point, but i'm not sure
&gt;&gt;&gt; exactly what i'm looking for or what to do with the output.
&gt;&gt;&gt;
&gt;&gt;&gt; i've restarted my cluster again but next time it happens,
&gt;&gt;&gt; i'll attach some output/snapshot files.
&gt;&gt;&gt;
&gt;&gt;&gt; ~ Jason
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; On 04.05.2015 19:32, Scott Lystig Fritchie wrote:
&gt;&gt;&gt;
&gt;&gt;&gt; Hi, Jason. Have you tried using the system inspection utilities bundled
&gt;&gt;&gt;&gt; with Riak?
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; http://docs.basho.com/riak/latest/ops/running/tools/riak-admin/#top
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; http://docs.basho.com/riak/latest/ops/running/tools/riak-admin/#cluster-info
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; http://docs.basho.com/riak/latest/ops/upgrading/production-checklist/#Confirming-Configuration-with-Riaknostic
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; The "top" utility can show very quickly the most active processes within
&gt;&gt;&gt;&gt; the virtual machine.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; -Scott
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

