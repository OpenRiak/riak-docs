---
title: "Fetch request to Riak returns 204 No Content"
description: ""
project: community
lastmod: 2013-10-07T09:42:53-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12524"
author_name: "Михаил Яшков"
project_section: "mailinglistitem"
sent_date: 2013-10-07T09:42:53-07:00
---


Hello.
I have a little problem with Riak. I have wrote Riak-client script via Erlang. 
My code here:

---------------------- Code ----------------------
%% @doc Method to get object by bucket and key
get\\_object(Bucket, Key)-&gt;
 
do\\_get\\_request(lists:concat(["/buckets/",binary\\_to\\_list(Bucket),"/keys/",binary\\_to\\_list(Key)])).


%% @doc Make GET request by request url. Response returns.
do\\_get\\_request(RequestString)-&gt;
 do\\_request(get, RequestString).


%% @doc Make request by method and request url without body value
do\\_request(Method, RequestString)-&gt;
 inets:start(temporary),
 URL = lists:concat([shared\\_config:get\\_riak\\_destination(), 
RequestString]),
 % shared\\_config:get\\_riak\\_destination() returns http-path to Riak.
 Resp = httpc:request(Method, {URL, []}, [], []),
 process\\_response(Resp).


%% @doc Method that processes response
process\\_response(Resp)-&gt;
 case Resp of 
 {ok, {{Version, ResponseCode, ReasonPhrase}, Headers, Body}}-&gt;
 case ResponseCode of 
 200-&gt;%ok
 {ok, Body};
 201-&gt;%created response (when riak generates key)
 {ok, Body};
 204-&gt;%if key has no content
 {ok, nocontent};
 300-&gt;%multiple content
 {error, Body};
 400-&gt;%when request parameters are invalid
 {error, badrequest};
 404-&gt;
 {error, notfound};
 412-&gt;%if one of the conditional request headers 
failed to match
 {error, precondition\\_failed};
 \\_-&gt;
 {error, "Unknown error: "++ResponseCode}
 end;
 {error, ErrorMsg} -&gt;
 {error, ErrorMsg}
 end.
----------------- End of code -----------------
This code properly worked till today. But today function get\\_object(Bucket, 
Key) returns {ok, nocontent}. Response code was 204, I saw it in logs. Can 
anyone tell me about this behavior of Riak? This problem fixed by restarting 
Riak. 

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

