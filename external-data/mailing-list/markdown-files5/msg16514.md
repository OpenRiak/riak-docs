---
title: "Re: Running out of disk space"
description: ""
project: community
lastmod: 2015-09-13T20:19:41-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16514"
mailinglist_parent_id: "msg16513"
author_name: "Sargun Dhillon"
project_section: "mailinglistitem"
sent_date: 2015-09-13T20:19:41-07:00
---


Are you using bitcask, or LevelDB? What version of Riak are you using?
Bitcask will lazily merge files in the background in order to reclaim
space. This is pretty aggressive, and it should show up pretty quickly. On
the other hand, LevelDB deletes files at compaction time. Compactions
aren't quite as aggressive as Bitcask, although in 2.X, some of this was
made better.

As to your other question, if you add a 6th node, ideally, it should
handoff vnodes and receive an equal share of the load as the remaining 5
nodes in your cluster, but disk usage may not look the same, as only live
data, and tombstones are moved over. The recommendation in this scenario is
to add nodes to your cluster. If handoffs don't occur quickly enough, it
may be wise to bump the handoff limits.

On Sun, Sep 13, 2015 at 7:40 PM, ender  wrote:

&gt; I have a 5 node Riak cluster running on AWS. I noticed that disk usage is
&gt; now at 80% for all nodes. I started deleting content but it doesn't appear
&gt; to be making much of a dent. If I add a 6th node, will it start receiving
&gt; all new content until it has approximately the same usage as the original 5
&gt; nodes, or will they also continue to grow? What is the recommended approach
&gt; in this situation?
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

