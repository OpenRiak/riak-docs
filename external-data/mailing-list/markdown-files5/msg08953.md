---
title: "Re: riak-erlang segfault"
description: ""
project: community
lastmod: 2012-10-17T10:07:51-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08953"
mailinglist_parent_id: "msg08844"
author_name: "Jared Morrow"
project_section: "mailinglistitem"
sent_date: 2012-10-17T10:07:51-07:00
---


Tomas,

Maybe I'm not following, but what in Riak is trying to access files in
`/sys`? Although we don't test on Gentoo, I'd like to enable you to
install it without having to modify your kernel settings.

Thanks,
Jared

On Tue, Oct 9, 2012 at 9:46 AM, Tomas Charvat  wrote:

&gt; We have manage to fix mentioned segfault byt disabling sysfs restriction
&gt; in hardened Gentoo kernel.
&gt; It has fixed segfault issues.
&gt; Sysfs/debugfs restriction
&gt;
&gt; \\*Configuration option: CONFIG\\_GRKERNSEC\\_SYSFS\\_RESTRICT\\*
&gt; If you say Y here, sysfs (the pseudo-filesystem mounted at /sys) and any
&gt; filesystem normally mounted under it (e.g. debugfs) will only be accessible
&gt; by root. These filesystems generally provide access to hardware and debug
&gt; information that isn't appropriate for unprivileged users of the system.
&gt; Sysfs and debugfs have also become a large source of new vulnerabilities,
&gt; ranging from infoleaks to local compromise.
&gt;
&gt; There has been very little oversight with an eye toward security involved
&gt; in adding new exporters of information to these filesystems, so their use
&gt; is discouraged.
&gt;
&gt; This option is equivalent to a chmod 0700 of the mount paths.
&gt; cheers
&gt; Tomas
&gt;
&gt;
&gt; On 10/07/2012 08:50 PM, Evan Vigil-McClanahan wrote:
&gt;
&gt; The first thing that strikes me is that you have HIPE enabled on your
&gt; erlang, and the version isn't the one we build with. This isn't
&gt; something riak is usually happy with.
&gt;
&gt; If you're doing 1.2, try rebuilding riak with R15B01 compiled with
&gt; --diable-hipe.
&gt;
&gt; The config file is usually called app.config, as well, but that might
&gt; have been a typo on your part.
&gt;
&gt; On Sun, Oct 7, 2012 at 3:28 AM, Tomas Charvat  
&gt;  wrote:
&gt;
&gt; Hallo, I have fresh system and Im getting segfaults with riak/erlang.
&gt; erl\\_crash.dump attached
&gt; Any tip what could be possible wrong ?
&gt; Bin /usr/lib64/riak/erts-5.9/bin/erlexec has same problem as
&gt; /usr/lib64/erlang/erts-5.9/bin/erlexec
&gt; Result is that riak cant find /etc/riak/app.conf
&gt; erl, erlc are working without any problem
&gt;
&gt; cheers
&gt; Tomas
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing 
&gt; listriak-users@lists.basho.comhttp://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

