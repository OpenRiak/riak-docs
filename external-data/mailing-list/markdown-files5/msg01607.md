---
title: "Re: upgrade process?"
description: ""
project: community
lastmod: 2010-11-23T07:18:55-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01607"
mailinglist_parent_id: "msg01606"
author_name: "David Smith"
project_section: "mailinglistitem"
sent_date: 2010-11-23T07:18:55-08:00
---


On Tue, Nov 23, 2010 at 7:43 AM, Colin Surprenant
 wrote:
&gt; Are there any restrictions, incompatibilities between versions which
&gt; could break a rolling upgrade?

Good question. In our internal testing we have started verifying that
sequential releases (i.e. 0.12 -&gt; 0.13) support the rolling upgrades
cleanly. We've endeavored to do this in the past, but in releases
prior to 0.12 didn't have automated verification of this property. I
believe (speaking personally) that the Riak project is at a point now
where breaking changes between releases are just not going to work --
the upgrade process should be smooth and transparent.

There is an outstanding question of how smooth the upgrade process
should be across non-sequential versions (i.e. 0.10 -&gt; 0.13). It's
very easy to do this sort of testing superficially and miss important
edge cases.

&gt; For example, I am still running 0.10 + innostore on a 3 nodes cluster
&gt; and I would like to upgrade to 0.13. What would be my best upgrade
&gt; option? do a rolling upgrade directly from 0.10 to .13 or do it
&gt; incrementally for all versions between 0.10 and 0.13?

Given the leap of the upgrade you are describing, I would \\_strongly\\_
recommend setting up a test environment that's as similar to your
production as possible (load, data set, etc). As I noted in my
previous email, it should work, but I can't guarantee it. :)

&gt; For me a rolling upgrade would be best but I could manage a few hours
&gt; downtime for a faster and/or easier process by taking the cluster down
&gt; for the upgrade. Like Mark, performing a backup/restore is not really
&gt; an option.

Yes, I definitely agree that a backup/restore is onerous and
unrealistic for most deployments. We should annotate that doing a
backup is strongly recommended but optional.

I'd note that if you're using bitcask, you can do such a backup
without ever stopping the server. Innostore is less straightforward,
unfortunately.

&gt; (David Smith gave me some hints about the compatibility of 0.10 vs
&gt; 0.13 
&gt; http://lists.basho.com/pipermail/riak-users\\_lists.basho.com/2010-November/002435.html
&gt; but this is mostly a "it \\_should\\_ work" which is rather vague)

My vagueness re: 0.10 -&gt; 0.13 was driven by the simple reality that we
haven't tested it formally and we don't have a policy of testing an
upgrade across that many versions.

&gt; The upgrade process documentation between versions should definitely
&gt; be improved.

Agreed -- we'll be working on that.

Thanks for the feedback!

D.

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

