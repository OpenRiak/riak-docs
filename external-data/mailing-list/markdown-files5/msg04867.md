---
title: "Re: Why can I not set all bucket settings with the PB interface"
description: ""
project: community
lastmod: 2011-09-26T07:19:24-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg04867"
mailinglist_parent_id: "msg04861"
author_name: "Ryan Zezeski"
project_section: "mailinglistitem"
sent_date: 2011-09-26T07:19:24-07:00
---


It's the protocol/server that limits the set of properties you can set.

https://github.com/basho/riak\\_kv/blob/1.0/src/riak\\_kv\\_pb\\_socket.erl#L441

https://github.com/basho/riak-erlang-client/blob/1.2.0/src/riakc\\_pb.erl#L260

https://github.com/basho/riak-erlang-client/blob/1.2.0/src/riakclient.proto#L262

I can see how always returning `ok` is confusing and wasted your time.
 Sorry about that. I'm not sure why it is the way it is, but I'm sure it
just happens to be this way and wasn't the result of any deep thought.


On Mon, Sep 26, 2011 at 3:52 AM, Roland Karlsson &lt;
roland.karls...@erlang-solutions.com&gt; wrote:

&gt; Is it only the client that limits the settings you can see/set,
&gt; or is the RIAK server also ignoring all other settings on the PB
&gt; protocol?
&gt;
&gt; If it is only the client, then it looks fairly easy to fix.
&gt;
&gt; ......
&gt;
&gt; Yeah - I see that not supported settings are simply ignored
&gt; in the code. I just wondered why that choice :) I lost some hours
&gt; on that choice I can tell you :P
&gt;
&gt;
&gt; /Roland
&gt;
&gt;
&gt;
&gt; ----- Original Message -----
&gt; From: "Ryan Zezeski" 
&gt; To: "Roland Karlsson" 
&gt; Cc: riak-users@lists.basho.com
&gt; Sent: Friday, September 23, 2011 5:06:16 PM
&gt; Subject: Re: Why can I not set all bucket settings with the PB interface
&gt;
&gt; Roland,
&gt;
&gt;
&gt; You've happen to hit on one of the sore spots of the riakc client. We very
&gt; much plan to rectify this but it seems to have eluded us for 1.0. As you
&gt; said I think the best alternative is to use the HTTP interface.
&gt;
&gt;
&gt; As for your final question. Taking a quick peek at the code it looks like
&gt; it the setbucketreq simply ignores properties it doesn't understand.
&gt;
&gt;
&gt; -Ryan
&gt;
&gt;
&gt; On Fri, Sep 23, 2011 at 10:44 AM, Roland Karlsson &lt;
&gt; roland.karls...@erlang-solutions.com &gt; wrote:
&gt;
&gt;
&gt; Hi Basho,
&gt;
&gt; With the Erlang riakc client API I can only set two settings for the
&gt; bucket.
&gt; Why is that? And will it be fixed?
&gt;
&gt; And if you dont plan to fix it - whats your recommendation for creating a
&gt; bucket
&gt; with non standard settings? To use the HTTP interface?
&gt;
&gt; Another question may be why the call riakc\\_pb:set\\_bucket returns ok when I
&gt; try
&gt; to set last\\_write\\_wins, which is one of the settings that you cant set.
&gt;
&gt;
&gt; /Roland
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

