---
title: "Re: Upgrade procedure from 0.12 to 0.13"
description: ""
project: community
lastmod: 2010-10-13T10:26:43-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01271"
mailinglist_parent_id: "msg01270"
author_name: "Jesse Newland"
project_section: "mailinglistitem"
sent_date: 2010-10-13T10:26:43-07:00
---


I just used the new `riak-admin wait-for-service` command and some capistrano 
magic trick to do a rolling restart of all my nodes in production after 
installing the new debs. Worked like a charm.

https://gist.github.com/48529d7eb1a9a69935fd

Regards -

Jesse Newland
---
je...@railsmachine.com
404.216.1093

On Oct 13, 2010, at 1:23 PM, Wilson MacGyver wrote:

&gt; I thought it's possible to do "rolling upgrade". ie, shutdown 1 node,
&gt; upgrade it, and reconnect the
&gt; node to the cluster.
&gt; 
&gt; otherwise you'd need 2X of the nodes in production.
&gt; 
&gt; On Wed, Oct 13, 2010 at 1:21 PM, Alexander Sicular  wrote:
&gt;&gt; I'm pretty sure that Baho would recommend that all nodes in a cluster should 
&gt;&gt; be running the same version. An upgrade would probably require doing a full 
&gt;&gt; database backup and a full database restore on a \\*new\\* cluster.
&gt;&gt; 
&gt;&gt; -Alexander
&gt;&gt; 
&gt;&gt; On Oct 13, 2010, at 10:06 AM, SKester wrote:
&gt;&gt; 
&gt;&gt;&gt; Hey folks,
&gt;&gt;&gt; 
&gt;&gt;&gt; What is the proper way to upgrade a cluster from 0.12 to 0.13? Our 4 node 
&gt;&gt;&gt; cluster was originally created by installing the 0.12 rpms. Is the process 
&gt;&gt;&gt; as simple as stopping riak on a node, installing the new rpm and 
&gt;&gt;&gt; re-starting? Is it possible to roll through each node one at a time while 
&gt;&gt;&gt; the others are still available, or do all nodes need to be halted and 
&gt;&gt;&gt; upgraded at the same time? I have backed up the /etc/riak directory to 
&gt;&gt;&gt; save the initial config data. Are the 0.12 config files fully compatible 
&gt;&gt;&gt; with 0.13?
&gt;&gt;&gt; 
&gt;&gt;&gt; Thanks,
&gt;&gt;&gt; Scott
&gt;&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt; 
&gt;&gt; 
&gt;&gt; -Alexander Sicular
&gt;&gt; 
&gt;&gt; @siculars
&gt;&gt; 
&gt;&gt; 
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt; 
&gt; 
&gt; 
&gt; 
&gt; -- 
&gt; Omnem crede diem tibi diluxisse supremum.
&gt; 
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com


\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

