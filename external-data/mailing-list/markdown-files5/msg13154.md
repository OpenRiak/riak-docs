---
title: "Re: Timeout on Streaming all keys"
description: ""
project: community
lastmod: 2013-12-05T09:49:02-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13154"
mailinglist_parent_id: "msg13116"
author_name: "Luke Bakken"
project_section: "mailinglistitem"
sent_date: 2013-12-05T09:49:02-08:00
---


Hi Shimon,

I spoke with a member of the Java client team and the timeout is set to 60
seconds. In the 2.0 version of the client this will be user-settable.

To make sure there's not a crash or other issue causing the long list keys,
feel free to run "riak-debug" on nodes in your cluster and provide the
generated archives. We can discuss that off-list.

--
Luke Bakken
CSE
lbak...@basho.com


On Wed, Dec 4, 2013 at 12:43 AM, Shimon Benattar  wrote:

&gt; Hi Luke,
&gt; We're using v1.4
&gt; On Dec 3, 2013 6:19 PM, "Luke Bakken"  wrote:
&gt;
&gt;&gt; Hi Shimon,
&gt;&gt;
&gt;&gt; What version of Riak and the Java client are you using?
&gt;&gt;
&gt;&gt; Thanks
&gt;&gt; --
&gt;&gt; Luke Bakken
&gt;&gt; CSE
&gt;&gt; lbak...@basho.com
&gt;&gt;
&gt;&gt;
&gt;&gt; On Thu, Nov 28, 2013 at 4:00 AM, Shimon Benattar wrote:
&gt;&gt;
&gt;&gt;&gt; Hi Riak users,
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; Unfortunately for me I need to implement the get all keys method in our
&gt;&gt;&gt; system (I know it is not recommended)
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; I am developing classes with the Java Api and using the streaming option
&gt;&gt;&gt; as following
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; StreamingOperation keys = riakBucket.keys();
&gt;&gt;&gt;
&gt;&gt;&gt; while (keys.hasNext()) {
&gt;&gt;&gt;
&gt;&gt;&gt; final String next = keys.next();
&gt;&gt;&gt;
&gt;&gt;&gt; out.write(next);
&gt;&gt;&gt;
&gt;&gt;&gt; out.newLine();
&gt;&gt;&gt;
&gt;&gt;&gt; }
&gt;&gt;&gt;
&gt;&gt;&gt; riakBucket.keys().cancel();
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; My problem here is that for a simple class I inserted in Riak, after
&gt;&gt;&gt; ~4.7 million keys I am getting a timeout from Riak.
&gt;&gt;&gt;
&gt;&gt;&gt; Is there any way to configure the read operation timeout or to somehow
&gt;&gt;&gt; catch the timeout and continue to receive the next keys (Can I somehow bulk
&gt;&gt;&gt; read the keys)?
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; Thanks,
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; Shimon
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

