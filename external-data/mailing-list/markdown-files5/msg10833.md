---
title: "Re: Measuring Riak disk usage"
description: ""
project: community
lastmod: 2013-04-10T11:46:55-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg10833"
mailinglist_parent_id: "msg10828"
author_name: "Matthew Von-Maszewski"
project_section: "mailinglistitem"
sent_date: 2013-04-10T11:46:55-07:00
---


Paul,

There is a "tool" that will dump statistics for a given .sst file, including 
compression ratio. It is really designed for in-house usage, so it can be a 
pain to build (just being honest, and setting expectations).

1. you have download and install libsnappy. Just having it embedded within 
Riak is not enough. It needs to be installed on your system like other 
libraries.

2. you have go into the leveldb source directory (maybe download that too) and 
execute "make tools"

You are looking for the "sst\\_stat" program. You would execute something like 
this using your local paths:

./sst\\_stat /var/lib/riak/leveldb/\\*/sst\\_\\*/\\*.sst

The output can be loaded into a spreadsheet for analysis.

This is the only think I know to offer for your question. Maybe others better 
alternatives.

Matthew



On Apr 10, 2013, at 2:25 PM, Paul Wagner  wrote:

&gt; So as far as profiling disk usage of certain newly created objects for future 
&gt; planning is there a specific query that might return recently created objects 
&gt; and their size on disk?
&gt; 
&gt; Looking at the contents of .../riak/leveldb I can see each of the nodes and 
&gt; the sorted string tables. I can follow the performance [du- h] of the leveldb 
&gt; folder overall as data is added but the feature/command we're looking for is 
&gt; how we're going to profile now in order to plan for future disk usage. 
&gt; Something like http://fqdn.hostname.com:8098/riak/usage perhaps...
&gt; 
&gt; Is this something that limited to Riak Enterprise?
&gt; 
&gt; P
&gt; 
&gt; On Wed, Apr 10, 2013 at 2:17 PM, Ben McCann  wrote:
&gt; Cool. Thanks for the explanation.
&gt; 
&gt; 
&gt; On Wed, Apr 10, 2013 at 10:55 AM, Reid Draper  wrote:
&gt; 
&gt; On Apr 10, 2013, at 1:45 PM, Jeremiah Peschka  
&gt; wrote:
&gt; 
&gt;&gt; If you've installed from the apt/yum repository you've installed a single 
&gt;&gt; Riak node on your machine. Riak, though, is configured by default to write 
&gt;&gt; data to three servers. If some of those servers aren't available, Riak is 
&gt;&gt; going to write to a different server via hinted handoff[1]. Since you are 
&gt;&gt; only running one node, that single node receives all copies of your data in 
&gt;&gt; the hopes that some day the other Riak servers in the cluster will come back 
&gt;&gt; for their data.
&gt; 
&gt; This isn't quite true. A single node cluster is just going to simply store 
&gt; three copies on 3 of its local vnodes. No hinted handoff is involved. If you 
&gt; add nodes to the cluster, as Evan said, data will be distributed amongst them.
&gt; 
&gt; Ben,
&gt; 
&gt; tl;dr, Riak will store three copies on your data, by default, even if you're 
&gt; using a single server.
&gt; 
&gt; Reid
&gt; 
&gt; 
&gt; 
&gt; 
&gt; -- 
&gt; about.me/benmccann
&gt; 
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; 
&gt; 
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

