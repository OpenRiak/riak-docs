---
title: "Re: MapReduce with 2i input filters"
description: ""
project: community
lastmod: 2013-08-24T18:30:35-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12129"
mailinglist_parent_id: "msg12127"
author_name: "Jeremiah Peschka"
project_section: "mailinglistitem"
sent_date: 2013-08-24T18:30:35-07:00
---


There is no way to do this directly. If you need joins (2, 3) or unions
(1), the easiest thing that you can do is use Riak Search/Yokozuna to feed
your MapReduce query instead of using a 2i input.

In response to your specific examples:

For #1 you could use an input where index1\\_bin in range [1,30] and then
have the first map remove 11-21.

For #2 and #3 you could pick one of the conditions that you know to be the
more selective condition, use that as the MapReduce input and then use the
first MR phase to perform the other search.

But, as I mentioned in the first paragraph - Riak Search or Yokozuna seem
like a far more effective fit.


---
Jeremiah Peschka - Founder, Brent Ozar Unlimited
MCITP: SQL Server 2008, MVP
Cloudera Certified Developer for Apache Hadoop


On Sat, Aug 24, 2013 at 8:49 AM, Gints Gailītis wrote:

&gt; I guess it's bit hard to read the 3 samples I asked for, I'll spell them
&gt; out like this:
&gt; 1) index1\\_bin in range[1,10] OR in range [21:30]
&gt; 2) index1\\_bin in range [1;50] AND index2\\_bin in range[5;10]
&gt; 3) key in range[aaa,zzz] AND index1\\_bin in range[1,10] (where key is the
&gt; actual key from the objects key-value)
&gt;
&gt; Thanks,
&gt; Gints
&gt;
&gt;
&gt;
&gt; On Sat, Aug 24, 2013 at 6:35 PM, Gints Gailītis 
&gt; wrote:
&gt;
&gt;&gt; Hi Riak users!
&gt;&gt;
&gt;&gt; I'm looking at the sample here:
&gt;&gt; http://docs.basho.com/riak/latest/dev/using/2i/ and wondering if there
&gt;&gt; is a way to use more complicated logic when using 2i input filters to limit
&gt;&gt; the input to a MapReduce function.
&gt;&gt;
&gt;&gt; For example, can I do stuff like "index1\\_bin in range[1,10] OR in range
&gt;&gt; [21:30]", or "index1\\_bin in range [1;50] AND index2\\_bin in range[5;10]" or
&gt;&gt; maybe even "key in range[aaa,zzz] AND index1\\_bin in range[1,10]" (where key
&gt;&gt; is the actual key from the objects key-value)]? And can I specify if the
&gt;&gt; start/end values should be included? If so, where can I read about this?
&gt;&gt;
&gt;&gt; Thanks,
&gt;&gt; Gints
&gt;&gt;
&gt;&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

