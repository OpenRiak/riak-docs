---
title: "Re: error: undef done()"
description: ""
project: community
lastmod: 2012-02-01T08:43:47-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06486"
mailinglist_parent_id: "msg06485"
author_name: "Matthew A. Brown"
project_section: "mailinglistitem"
sent_date: 2012-02-01T08:43:47-08:00
---


Hi Bryan,

Thanks much for the info. We're running Riak 1.0.3. I think in our
case what would've made this easier to track down would have been not
having the error output cut off in the log -- since the inputs to the
reduce comprised a pretty large set, the output cut off before the
call trace, which appears after the dump of the inputs. It was pretty
easy to track down once I narrowed down the inputs to a manageable
size that still reproduced the error.

Thanks!
Mat

On Wed, Feb 1, 2012 at 10:53, Bryan Fink  wrote:
&gt; On Tue, Jan 31, 2012 at 1:46 PM, Matthew A. Brown  
&gt; wrote:
&gt;&gt; [error] error:undef done()
&gt;&gt;
&gt;&gt; The error message is followed by a dump of the reduce inputs which is,
&gt;&gt; sadly, truncated before the bit where it would give the call trace.
&gt;&gt;
&gt;&gt; Our Erlang reduce code does not define or reference a function done(),
&gt;&gt; but I do note that this function is defined in riak\\_kv:
&gt;&gt;
&gt;&gt; https://github.com/basho/riak\\_kv/blob/master/src/riak\\_kv\\_w\\_reduce.erl#L163
&gt;
&gt; The "done()" you're seeing comes from 6 lines below where you were looking:
&gt;
&gt; https://github.com/basho/riak\\_kv/blob/master/src/riak\\_kv\\_w\\_reduce.erl#L169
&gt;
&gt; It is intended to give an idea of what stage the reduce fitting was in
&gt; when the error happened. Other strings you'll find are "reducing",
&gt; "riak\\_kv\\_w\\_reduce init", and "reducing handoff".
&gt;
&gt; I would be interested in knowing what version of Riak you were using
&gt; when you encountered this error message. Â Improving MapReduce errors
&gt; is something we're always working on.
&gt;
&gt; -Bryan

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

