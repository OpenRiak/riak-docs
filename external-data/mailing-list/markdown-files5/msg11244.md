---
title: "Re: setting n_val"
description: ""
project: community
lastmod: 2013-06-10T10:22:28-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11244"
mailinglist_parent_id: "msg11242"
author_name: "Alexander Ilyin"
project_section: "mailinglistitem"
sent_date: 2013-06-10T10:22:28-07:00
---


John, Eric,

thank you for your answers.
I understood that running Riak on one node is a bad idea. But having 5
nodes in cluster is too expensive for us right now.
Which settings I have to tune to get a decent performance on 3 node
cluster? 100% availability is not necessary for us but
small response time of get requests is "must have". I think I can set
n\\_val=2, r=1 and w=1 to achieve this. Is there something else?

On 10 June 2013 20:25, Eric Redmond  wrote:

&gt; Alexander,
&gt;
&gt; The simplest answer is that we never recommend running Riak on one node.
&gt; The recommended minimum is 5, but you could possibly get away with 3 (the
&gt; default repl value).
&gt;
&gt; There is a blog post about this from last year, explaining why:
&gt; http://basho.com/why-your-riak-cluster-should-have-at-least-five-nodes/
&gt;
&gt; Eric
&gt;
&gt; On Jun 10, 2013, at 9:01 AM, Alexander Ilyin 
&gt; wrote:
&gt;
&gt; Hi all,
&gt;
&gt; I have a question regarding setting the n\\_val.
&gt; In the documentation (
&gt; http://docs.basho.com/riak/latest/tutorials/fast-track/Tunable-CAP-Controls-in-Riak/)
&gt; it is stated that:
&gt;
&gt; n\\_val must be greater than 0 and less than or equal to the number of
&gt; actual nodes in your cluster to get all the benefits of replication.
&gt; And, we advise against modifying the n\\_val of a bucket after its initial
&gt; creation as this may result in failed reads because the new
&gt; value may not be replicated to all the appropriate partitions.
&gt;
&gt; But this seems contradictory to me. Which value I have to set if I'm
&gt; setting up one node right now but planning to add second one later?
&gt; Setting n\\_val=2 means this value will be greater than actual number of
&gt; nodes. But setting n\\_val=1 is also not advisable since
&gt; I will have to change it later to n\\_val=2 (I'm planning to have two
&gt; replicas in the end).
&gt;
&gt; I'm also concerned about the performance in case of one node and n\\_val=2.
&gt; Will it degrade since both replicas are stored on the same server?
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

