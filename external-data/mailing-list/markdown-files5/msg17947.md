---
title: "Re: cluster clear without stopping node"
description: ""
project: community
lastmod: 2017-02-09T09:42:18-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17947"
mailinglist_parent_id: "msg17945"
author_name: "Magnus Kessler"
project_section: "mailinglistitem"
sent_date: 2017-02-09T09:42:18-08:00
---


On 9 February 2017 at 14:46, Daniel Miller  wrote:

&gt; Hi Magnus,
&gt;
&gt; Thanks, this is great news! I was worried that clearing a planned node
&gt; removal would stop the node from which I was issuing the clear command,
&gt; which would be bad. Sounds like I have nothing to worry about in that case.
&gt;
The behaviour of `riak-admin cluster plan` is quite complex, depending on
the staged changes. If a `leave` operation has been staged, it will just
undo the staged change; no node will be stopped. However, if a `join`
operation has been staged, the joining node will be shut down after its
ring has been cleared. When this node restarts, it will behave like a fresh
unjoined node and can be joined again. If `riak-admin cluster clear` was
run from a node that remains in the cluster, this node will be unaffected.


&gt; On running cluster plan multiple times to generate a new plan: this is a
&gt; little surprising since I think I’ve done that before but I haven’t
&gt; observed it generating a new plan. I’ll try it again.
&gt;
You may see the effect more pronounced if you use `claim\\_v3`, which is more
aggressive. For a discussion about how to rebalance the ring without adding
or removing nodes, please see
http://lists.basho.com/pipermail/riak-users\\_lists.basho.com/2016-November/018815.html


&gt; Thanks for very quick response.
&gt; Daniel
&gt; ​
&gt;

Kind Regards,

Magnus


-- 
Magnus Kessler
Client Services Engineer
Basho Technologies Limited

Registered Office - 8 Lincoln’s Inn Fields London WC2A 3BP Reg 07970431
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

