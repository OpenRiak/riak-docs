---
title: "Re: RIAK 1.4.6 - Mass key deletion"
description: ""
project: community
lastmod: 2014-02-21T07:48:40-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13691"
mailinglist_parent_id: "msg13683"
author_name: "Matthew Von-Maszewski"
project_section: "mailinglistitem"
sent_date: 2014-02-21T07:48:40-08:00
---


Toby,

At some point, yes the "missing" space is recovered. But that does not mean 
the deletes will be found immediately upon 2.0 upgrade.

2.0 adds statistical data to each newly generated .sst table file so that it 
"knows" where delete entries are hidden. The statistical data drives the 
aggressive delete removal. 

Normal compaction grooming will find the deletes in 1.4 generated files over 
time. Time here could be measured in months. It all depends upon how fast 
your data is filling "levels".

Matthew


On Feb 20, 2014, at 10:32 PM, Toby Corkindale  wrote:

&gt; On 19 February 2014 03:18, Matthew Von-Maszewski  wrote:
&gt;&gt; Riak 2.0 is coming. Hold your mass delete until then. The "bug" is within
&gt;&gt; Google's original leveldb architecture. Riak 2.0 sneaks around to get the
&gt;&gt; disk space freed.
&gt; 
&gt; I'm interested to know what happens if someone deletes a lot of data
&gt; on Riak 1.4.x, and then later upgrades to Riak 2.0.
&gt; Will the "missing" space be recovered at that point?
&gt; 
&gt; Toby
&gt; 
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com


\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

