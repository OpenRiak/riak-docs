---
title: "Re: 330 Errors"
description: ""
project: community
lastmod: 2010-12-05T19:27:23-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01727"
mailinglist_parent_id: "msg01726"
author_name: "David Smith"
project_section: "mailinglistitem"
sent_date: 2010-12-05T19:27:23-08:00
---


This was discussed earlier today:

http://lists.basho.com/pipermail/riak-users\\_lists.basho.com/2010-December/002602.html

D.

On Sun, Dec 5, 2010 at 7:26 PM, Jeremiah Peschka
 wrote:
&gt; Just a quick update - this works beautifully in 0.13.0, so I'm even more
&gt; confused than ever before. I realize, too, that you'd probably like to see
&gt; the output of riak-admin status:
&gt; 1-minute stats for 'd...@127.0.0.1'
&gt; -------------------------------------------
&gt; vnode gets : 0
&gt; vnode\\_puts : 0
&gt; read\\_repairs : 0
&gt; vnode\\_gets\\_total : 0
&gt; vnode\\_puts\\_total : 0
&gt; node\\_gets : 0
&gt; node\\_gets\\_total : 0
&gt; node\\_get\\_fsm\\_time\\_mean : undefined
&gt; node\\_get\\_fsm\\_time\\_median : undefined
&gt; node\\_get\\_fsm\\_time\\_95 : undefined
&gt; node\\_get\\_fsm\\_time\\_99 : undefined
&gt; node\\_get\\_fsm\\_time\\_100 : undefined
&gt; node\\_puts : 0
&gt; node\\_puts\\_total : 0
&gt; node\\_put\\_fsm\\_time\\_mean : undefined
&gt; node\\_put\\_fsm\\_time\\_median : undefined
&gt; node\\_put\\_fsm\\_time\\_95 : undefined
&gt; node\\_put\\_fsm\\_time\\_99 : undefined
&gt; node\\_put\\_fsm\\_time\\_100 : undefined
&gt; read\\_repairs\\_total : 0
&gt; cpu\\_nprocs : 116
&gt; cpu\\_avg1 : 108
&gt; cpu\\_avg5 : 95
&gt; cpu\\_avg15 : 90
&gt; mem\\_total : 6809560000
&gt; mem\\_allocated : 4084760000
&gt; disk : [{"/",249723184,35},
&gt;         {"/Volumes/InternalStorage",379584512,64},
&gt;         {"/Volumes/XStorage",488050672,61}]
&gt; nodename : 'd...@127.0.0.1'
&gt; connected\\_nodes : []
&gt; sys\\_driver\\_version : &lt;&lt;"1.5"&gt;&gt;
&gt; sys\\_global\\_heaps\\_size : 0
&gt; sys\\_heap\\_type : private
&gt; sys\\_logical\\_processors : 4
&gt; sys\\_otp\\_release : &lt;&lt;"R14B"&gt;&gt;
&gt; sys\\_process\\_count : 169
&gt; sys\\_smp\\_support : true
&gt; sys\\_system\\_version : &lt;&lt;"Erlang R14B (erts-5.8.1) [source] [64-bit] [smp:4:4]
&gt; [rq:4] [async-threads:64] [hipe] [kernel-poll:true]"&gt;&gt;
&gt; sys\\_system\\_architecture : &lt;&lt;"i386-apple-darwin10.5.0"&gt;&gt;
&gt; sys\\_threads\\_enabled : true
&gt; sys\\_thread\\_pool\\_size : 64
&gt; sys\\_wordsize : 8
&gt; ring\\_members : ['d...@127.0.0.1','d...@127.0.0.1','d...@127.0.0.1']
&gt; ring\\_num\\_partitions : 64
&gt; ring\\_ownership :
&gt; &lt;&lt;"[{'d...@127.0.0.1',21},{'d...@127.0.0.1',21},{'d...@127.0.0.1',22}]"&gt;&gt;
&gt; ring\\_creation\\_size : 64
&gt; storage\\_backend : riak\\_kv\\_bitcask\\_backend
&gt; pbc\\_connects\\_total : 0
&gt; pbc\\_connects : 0
&gt; pbc\\_active : 0
&gt; riak\\_err\\_version : &lt;&lt;"0.1.0"&gt;&gt;
&gt; runtime\\_tools\\_version : &lt;&lt;"1.8.4.1"&gt;&gt;
&gt; luwak\\_version : &lt;&lt;"1.0"&gt;&gt;
&gt; skerl\\_version : &lt;&lt;"0.1"&gt;&gt;
&gt; riak\\_kv\\_version : &lt;&lt;"0.13.0"&gt;&gt;
&gt; bitcask\\_version : &lt;&lt;"1.1.4"&gt;&gt;
&gt; riak\\_core\\_version : &lt;&lt;"0.13.0"&gt;&gt;
&gt; luke\\_version : &lt;&lt;"0.2.2"&gt;&gt;
&gt; erlang\\_js\\_version : &lt;&lt;"0.4.1"&gt;&gt;
&gt; mochiweb\\_version : &lt;&lt;"1.7.1"&gt;&gt;
&gt; webmachine\\_version : &lt;&lt;"1.7.3"&gt;&gt;
&gt; crypto\\_version : &lt;&lt;"2.0.1"&gt;&gt;
&gt; os\\_mon\\_version : &lt;&lt;"2.2.5"&gt;&gt;
&gt; sasl\\_version : &lt;&lt;"2.1.9.2"&gt;&gt;
&gt; stdlib\\_version : &lt;&lt;"1.17.1"&gt;&gt;
&gt; kernel\\_version : &lt;&lt;"2.14.1"&gt;&gt;
&gt; executing\\_mappers : 0
&gt; Jeremiah Peschka
&gt; Microsoft SQL Server MVP
&gt; MCITP: Database Developer, DBA
&gt;
&gt;
&gt; On Sun, Dec 5, 2010 at 9:09 PM, Jeremiah Peschka
&gt;  wrote:
&gt;&gt;
&gt;&gt; I recently switched from 0.12 to the latest and greatest from github and
&gt;&gt; I'm running into an HTTP 330 error when I attempt to read from a bucket. I
&gt;&gt; uploaded this picture using `curl -X PUT
&gt;&gt; HTTP://127.0.0.1:8091/riak/images/1.jpg -H "Content-type: image/jpeg"
&gt;&gt; --data-binary @nixon.jpg`
&gt;&gt; when I go to view the image, I get "Error 330
&gt;&gt; (net::ERR\\_CONTENT\\_DECODING\\_FAILED): Unknown error."
&gt;&gt; When I use `riak attach` to take a look at what's going on, I can see that
&gt;&gt; the image is in there:
&gt;&gt; (d...@127.0.0.1)5&gt; C:get(&lt;&lt;"images"&gt;&gt;, &lt;&lt;"1.jpg"&gt;&gt;, 1).
&gt;&gt; {ok,{r\\_object,&lt;&lt;"images"&gt;&gt;,&lt;&lt;"1.jpg"&gt;&gt;,
&gt;&gt;               [{r\\_content,{dict,5,16,16,8,80,48,
&gt;&gt;                                 {[],[],[],[],[],[],[],[],[],[],[],[],...},
&gt;&gt;                                 {{[],[],
&gt;&gt;                                   [[&lt;&lt;"Links"&gt;&gt;]],
&gt;&gt;                                   [],[],
&gt;&gt;                                   [[&lt;&lt;"X-Riak-T"...&gt;&gt;,49,75|...]],
&gt;&gt;                                   [],[],[],[],...}}},
&gt;&gt;
&gt;&gt;  &lt;&lt;255,216,255,224,0,16,74,70,73,70,0,1,2,1,0,72,0,
&gt;&gt;                             72,0,...&gt;&gt;}],
&gt;&gt;               [{&lt;&lt;5,249,52,160&gt;&gt;,{1,63458817684}},
&gt;&gt;                {&lt;&lt;131,98,5,150,94,114&gt;&gt;,{1,63458818215}},
&gt;&gt;                {&lt;&lt;5,248,163,2&gt;&gt;,{1,63458818215}},
&gt;&gt;                {&lt;&lt;4,211,21,247&gt;&gt;,{1,63458818516}},
&gt;&gt;                {&lt;&lt;131,98,7,237,200,144&gt;&gt;,{1,63458818532}},
&gt;&gt;                {&lt;&lt;131,98,4,225,148,161&gt;&gt;,{1,63458818532}},
&gt;&gt;                {&lt;&lt;131,98,0,18,233,187&gt;&gt;,{1,63458818532}},
&gt;&gt;                {&lt;&lt;5,113,110,142&gt;&gt;,{1,63458819383}},
&gt;&gt;                {&lt;&lt;131,98,5,43,155,126&gt;&gt;,{1,63458819383}}],
&gt;&gt;               {dict,1,16,16,8,80,48,
&gt;&gt;                     {[],[],[],[],[],[],[],[],[],[],[],[],[],...},
&gt;&gt;                     {{[],[],[],[],[],[],[],[],[],[],[],...}}},
&gt;&gt;               undefined}}
&gt;&gt;
&gt;&gt; However, I end up with this error streaming across the console:
&gt;&gt; =ERROR REPORT==== 5-Dec-2010::21:04:25 ===
&gt;&gt; webmachine error: path="/riak/images/1.jpg"
&gt;&gt; [{webmachine\\_util,escape\\_quotes,
&gt;&gt;      [{error,
&gt;&gt;           {error,badarg,
&gt;&gt;               [{dict,fetch,
&gt;&gt;                    [&lt;&lt;"X-Riak-VTag"&gt;&gt;,
&gt;&gt;                     {dict,5,16,16,8,80,48,
&gt;&gt;                         {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
&gt;&gt;                         {{[],[],
&gt;&gt;                           [[&lt;&lt;"Links"&gt;&gt;]],
&gt;&gt;                           [],[],
&gt;&gt;
&gt;&gt;  [[&lt;&lt;"X-Riak-Tag"&gt;&gt;,49,75,109,90,107,122,79,79,120,
&gt;&gt;                             86,102,56,75,110,53,68,80,82,68,70,101,49]],
&gt;&gt;                           [],[],[],[],
&gt;&gt;
&gt;&gt;  [[&lt;&lt;"content-type"&gt;&gt;,105,109,97,103,101,47,106,112,
&gt;&gt;                             101,103]],
&gt;&gt;                           [],[],
&gt;&gt;
&gt;&gt;  [[&lt;&lt;"X-Riak-Last-Modified"&gt;&gt;|{1291,600183,525348}]],
&gt;&gt;                           [],
&gt;&gt;                           [[&lt;&lt;"X-Riak-Meta"&gt;&gt;]]}}}]},
&gt;&gt;                {riak\\_kv\\_wm\\_raw,generate\\_etag,2},
&gt;&gt;                {webmachine\\_resource,resource\\_call,3},
&gt;&gt;                {webmachine\\_resource,do,3},
&gt;&gt;                {webmachine\\_decision\\_core,resource\\_call,1},
&gt;&gt;                {webmachine\\_decision\\_core,decision,1},
&gt;&gt;                {webmachine\\_decision\\_core,handle\\_request,2},
&gt;&gt;                {webmachine\\_mochiweb,loop,1}]}},
&gt;&gt;       "\\""]},
&gt;&gt;  {webmachine\\_decision\\_core,decision,1},
&gt;&gt;  {webmachine\\_decision\\_core,handle\\_request,2},
&gt;&gt;  {webmachine\\_mochiweb,loop,1},
&gt;&gt;  {mochiweb\\_http,headers,5},
&gt;&gt;  {proc\\_lib,init\\_p\\_do\\_apply,3}]
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; Jeremiah Peschka
&gt;&gt; Microsoft SQL Server MVP
&gt;&gt; MCITP: Database Developer, DBA
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

