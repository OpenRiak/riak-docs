---
title: "Re: is there auto-increment functionality in riak??"
description: ""
project: community
lastmod: 2011-03-22T14:13:07-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02712"
mailinglist_parent_id: "msg02711"
author_name: "Eric Moritz"
project_section: "mailinglistitem"
sent_date: 2011-03-22T14:13:07-07:00
---


I have been meaning to get familiar with Riak's allow\\_mult setting so I used
this thread as an excuse to mess with it.

I created a class in python call RiakCounter that stores a value into a key
that makes conflict resolution easier when reading the value.

Here's the code. I'm sure there's probably some fatal flaw in it that Basho
and friends will quickly point out.

https://gist.github.com/882055

It's very likely that Redis is a better fit for your use case. My
implementation is pretty nasty and more complex than you expect. There seems
to be a growing trend of pairing Redis with Riak because they're
complementary. Riak = elastic scale, Redis = easy data structures, pub/sub
and speed.

Eric.

PS, Here's a related thread
http://lists.basho.com/pipermail/riak-users\\_lists.basho.com/2011-January/002756.html


On Tue, Mar 22, 2011 at 4:09 PM, Wilson Tuladhar wrote:

&gt; thank you all for the help. I will definitely try out redis and hope this
&gt; will solve my problem :-)
&gt;
&gt; //Wilson
&gt;
&gt;
&gt; On Tue, Mar 22, 2011 at 3:06 PM, matthew hawthorne 
&gt; wrote:
&gt;
&gt;&gt; If you find a way to generate keys in this way, I'd also suggest that
&gt;&gt; you provide the "If-None-Match: \\*" HTTP header on your PUTs in order
&gt;&gt; to detect the usage of duplicate keys.
&gt;&gt;
&gt;&gt; I'm not sure if there is something similar in the protobuffs interface.
&gt;&gt;
&gt;&gt; -matt
&gt;&gt;
&gt;&gt;
&gt;&gt; On Tue, Mar 22, 2011 at 9:41 AM, Alexander Sicular 
&gt;&gt; wrote:
&gt;&gt; &gt; No there is not. Riak does not expose any data structures and is
&gt;&gt; generally
&gt;&gt; &gt; opaque to values.
&gt;&gt; &gt;
&gt;&gt; &gt; Check out redis or what Twitter is doing with Cassandra re. distributed
&gt;&gt; &gt; counters.
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt; @siculars on twitter
&gt;&gt; &gt; http://siculars.posterous.com
&gt;&gt; &gt;
&gt;&gt; &gt; Sent from my iPhone
&gt;&gt; &gt;
&gt;&gt; &gt; On Mar 22, 2011, at 2:37, Wilson Tuladhar 
&gt;&gt; wrote:
&gt;&gt; &gt;
&gt;&gt; &gt;&gt; hi,
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; I was wondering if there is some functionality to define the key such
&gt;&gt; that
&gt;&gt; &gt;&gt; it is auto-incremented during the insert process.
&gt;&gt; &gt;&gt; If not, what may be the elegant solution to achieve this??
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; //Wilson
&gt;&gt; &gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; &gt;&gt; riak-users mailing list
&gt;&gt; &gt;&gt; riak-users@lists.basho.com
&gt;&gt; &gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt; &gt;
&gt;&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; &gt; riak-users mailing list
&gt;&gt; &gt; riak-users@lists.basho.com
&gt;&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt; &gt;
&gt;&gt;
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

