---
title: "Riak 2.0.0pre20 Set bucket type problem"
description: ""
project: community
lastmod: 2014-04-14T10:31:34-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14075"
author_name: "Michael Duergner"
project_section: "mailinglistitem"
sent_date: 2014-04-14T10:31:34-07:00
---


Hi there,

I tried getting the Riak 2.0.0pre20 example to run.

I’m running on Mac OS X, downloaded the source package, did a make rel and 
started Riak with all default values.

After set, I created the new bucket-type: riak-admin bucket-type create 
set\\_bucket '{"props":{"datatype":"set"}}’

and activated it: riak-admin bucket-type activate set\\_bucket

Running riak-admin bucket-type status set\\_bucket results in:

set\\_bucket is active

young\\_vclock: 20
w: quorum
small\\_vclock: 50
rw: quorum
r: quorum
pw: 0
precommit: []
pr: 0
postcommit: []
old\\_vclock: 86400
notfound\\_ok: true
n\\_val: 3
linkfun: {modfun,riak\\_kv\\_wm\\_link\\_walker,mapreduce\\_linkfun}
last\\_write\\_wins: false
dw: quorum
chash\\_keyfun: {riak\\_core\\_util,chash\\_std\\_keyfun}
big\\_vclock: 50
basic\\_quorum: false
allow\\_mult: true
datatype: set
active: true
claimant: 'riak@127.0.0.1’

But when I try to insert data with: 

curl -XPOST \\
&gt; -H "Content-Type: application/json" \\
&gt; -d '{"add\\_all":["Toronto", "Montreal"]}' \\
&gt; http://localhost:8098/types/set\\_bucket/buckets/travel/datatypes/cities

I get the following error back:

500 Internal Server ErrorInternal 
Server Error
======================

The server encountered an error while processing this 
request:  

```
{error,
    {error,undef,
        [{application,get_env,[riak_dt,binary_compression,true],[]},
         {riak_dt_orswot,to_binary,1,
             [{file,"src/riak_dt_orswot.erl"},{line,331}]},
         {riak_kv_crdt,to_binary,1,[{file,"src/riak_kv_crdt.erl"},{line,400}]},
         {riak_kv_crdt,new,3,[{file,"src/riak_kv_crdt.erl"},{line,390}]},
         {riak_kv_wm_crdt,process_post,2,
             [{file,"src/riak_kv_wm_crdt.erl"},{line,367}]},
         {webmachine_resource,resource_call,3,
             [{file,"src/webmachine_resource.erl"},{line,186}]},
         {webmachine_resource,do,3,
             [{file,"src/webmachine_resource.erl"},{line,142}]},
         {webmachine_decision_core,resource_call,1,
             
[{file,"src/webmachine_decision_core.erl"},{line,48}]}]}}
```


---

mochiweb+webmachine
 web server



Any hints what I’m missing?

Thanks
Michael



signature.asc
Description: Message signed with OpenPGP using GPGMail
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

