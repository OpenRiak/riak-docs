---
title: "Re: performance"
description: ""
project: community
lastmod: 2013-08-01T21:00:07-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11862"
mailinglist_parent_id: "msg11861"
author_name: "Jared Morrow"
project_section: "mailinglistitem"
sent_date: 2013-08-01T21:00:07-07:00
---


Also, are you generating the load from the same VMs that Riak is running on
or do you have separate machines generating load?



On Thursday, August 1, 2013, Jeremy Ong wrote:

&gt; What erlang version did you build with? How are you load balancing
&gt; between the nodes? What kind of disks are you using?
&gt;
&gt; On Thu, Aug 1, 2013 at 7:53 PM, Paul Ingalls  wrote:
&gt; &gt; FYI, 2 more nodes died with the end of the last test. Storm, which I'm
&gt; &gt; using to put data in, kills the topology a bit abruptly, perhaps the
&gt; nodes
&gt; &gt; don't like a client going away like that?
&gt; &gt;
&gt; &gt; log from one of the nodes:
&gt; &gt;
&gt; &gt; 2013-08-02 02:27:23 =ERROR REPORT====
&gt; &gt; Error in process &lt;0.4959.0&gt; on node 'riak@riak004' with exit value:
&gt; &gt;
&gt; {badarg,[{riak\\_core\\_stat,vnodeq\\_len,1,[{file,"src/riak\\_core\\_stat.erl"},{line,181}]},{riak\\_core\\_stat,'-vnodeq\\_stats/0-lc$^0/1-0-',1,[{file,"src/riak\\_core\\_stat.erl"},{line,172}]},{riak\\_core\\_stat,'-vnodeq\\_stats/0-lc$^0/1-0-',1,[...
&gt; &gt;
&gt; &gt; 2013-08-02 02:27:33 =ERROR REPORT====
&gt; &gt; Error in process &lt;0.5055.0&gt; on node 'riak@riak004' with exit value:
&gt; &gt;
&gt; {badarg,[{riak\\_core\\_stat,vnodeq\\_len,1,[{file,"src/riak\\_core\\_stat.erl"},{line,181}]},{riak\\_core\\_stat,'-vnodeq\\_stats/0-lc$^0/1-0-',1,[{file,"src/riak\\_core\\_stat.erl"},{line,172}]},{riak\\_core\\_stat,'-vnodeq\\_stats/0-lc$^0/1-0-',1,[...
&gt; &gt;
&gt; &gt; 2013-08-02 02:27:51 =ERROR REPORT====
&gt; &gt; Error in process &lt;0.5228.0&gt; on node 'riak@riak004' with exit value:
&gt; &gt;
&gt; {badarg,[{riak\\_core\\_stat,vnodeq\\_len,1,[{file,"src/riak\\_core\\_stat.erl"},{line,181}]},{riak\\_core\\_stat,'-vnodeq\\_stats/0-lc$^0/1-0-',1,[{file,"src/riak\\_core\\_stat.erl"},{line,172}]},{riak\\_core\\_stat,'-vnodeq\\_stats/0-lc$^0/1-0-',1,[...
&gt; &gt;
&gt; &gt; and the log from the other node:
&gt; &gt;
&gt; &gt; 2013-08-02 00:09:39 =ERROR REPORT====
&gt; &gt; Error in process &lt;0.4952.0&gt; on node 'riak@riak007' with exit value:
&gt; &gt;
&gt; {badarg,[{riak\\_core\\_stat,vnodeq\\_len,1,[{file,"src/riak\\_core\\_stat.erl"},{line,181}]},{riak\\_core\\_stat,'-vnodeq\\_stats/0-lc$^0/1-0-',1,[{file,"src/riak\\_core\\_stat.erl"},{line,172}]},{riak\\_core\\_stat,'-vnodeq\\_stats/0-lc$^0/1-0-',1,[...
&gt; &gt;
&gt; &gt; 2013-08-02 00:09:44 =ERROR REPORT====
&gt; &gt; \\*\\* State machine &lt;0.2368.0&gt; terminating
&gt; &gt; \\*\\* Last event in was unregistered
&gt; &gt; \\*\\* When State == active
&gt; &gt; \\*\\* Data ==
&gt; &gt;
&gt; {state,114179815416476790484662877555959610910619729920,riak\\_kv\\_vnode,{deleted,{state,114179815416476790484662877555959610910619729920,riak\\_kv\\_eleveldb\\_backend,{state,&lt;&lt;&gt;&gt;,"/mnt/datadrive/riak/data/leveldb/114179815416476790484662877555959610910619729920",[{create\\_if\\_missing,true},{max\\_open\\_files,128},{use\\_bloomfilter,true},{write\\_buffer\\_size,58858594}],[{add\\_paths,[]},{allow\\_strfun,false},{anti\\_entropy,{on,[]}},{anti\\_entropy\\_build\\_limit,{1,3600000}},{anti\\_entropy\\_concurrency,2},{anti\\_entropy\\_data\\_dir,"/mnt/datadrive/riak/data/anti\\_entropy"},{anti\\_entropy\\_expire,604800000},{anti\\_entropy\\_leveldb\\_opts,[{write\\_buffer\\_size,4194304},{max\\_open\\_files,20}]},{anti\\_entropy\\_tick,15000},{create\\_if\\_missing,true},{data\\_root,"/mnt/datadrive/riak/data/leveldb"},{fsm\\_limit,50000},{hook\\_js\\_vm\\_count,2},{http\\_url\\_encoding,on},{included\\_applications,[]},{js\\_max\\_vm\\_mem,8},{js\\_thread\\_stack,16},{legacy\\_stats,true},{listkeys\\_backpressure,true},{map\\_js\\_vm\\_count,8},{mapred\\_2i\\_pipe,true},{mapred\\_name,"mapred"},{max\\_open\\_files,128},{object\\_format,v1},{reduce\\_js\\_vm\\_count,6},{stats\\_urlpath,"stats"},{storage\\_backend,riak\\_kv\\_eleveldb\\_backend},{use\\_bloomfilter,true},{vnode\\_vclocks,true},{write\\_buffer\\_size,58858594}],[],[],[{fill\\_cache,false}],true,false},{dict,0,16,16,8,80,48,{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},{{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}},undefined,3000,1000,100,100,true,true,undefined}},riak@riak003
&gt; ,none,undefined,undefined,undefined,{pool,riak\\_kv\\_worker,10,[]},undefined,107615}
&gt; &gt; \\*\\* Reason for termination =
&gt; &gt; \\*\\*
&gt; &gt;
&gt; {badarg,[{eleveldb,close,[&lt;&lt;&gt;&gt;],[]},{riak\\_kv\\_eleveldb\\_backend,stop,1,[{file,"src/riak\\_kv\\_eleveldb\\_backend.erl"},{line,149}]},{riak\\_kv\\_vnode,terminate,2,[{file,"src/riak\\_kv\\_vnode.erl"},{line,836}]},{riak\\_core\\_vnode,terminate,3,[{file,"src/riak\\_core\\_vnode.erl"},{line,847}]},{gen\\_fsm,terminate,7,[{file,"gen\\_fsm.erl"},{line,586}]},{proc\\_lib,init\\_p\\_do\\_apply,3,[{file,"
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

