---
title: "Re: Should content-type not be required?"
description: ""
project: community
lastmod: 2013-09-10T19:23:45-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12229"
mailinglist_parent_id: "msg12227"
author_name: "Sam Elliott"
project_section: "mailinglistitem"
sent_date: 2013-09-10T19:23:45-07:00
---


I'm interested to know why you're trying to store an empty body in Riak. Surely 
just don't even make the request to Riak? I guess I could be overlooking 
something obvious.

Sam
-- 
Sam Elliott
Engineer
sam.elli...@basho.com
--


On Tuesday, 10 September 2013 at 6:29PM, Vincenzo Vitale wrote:

&gt; Hi Sam,
&gt; thanks for the fast reply.
&gt; 
&gt; In my company we normally use your third suggestion and indeed it's a robust 
&gt; strategy.
&gt; 
&gt; At the moment we are relying on a riak client based on spray 
&gt; (https://github.com/agemooij/riak-scala-client) so even if we set the 
&gt; Content-Type - when the body is empty - it doesn't get to the final request 
&gt; being dispatched. 
&gt; 
&gt; Our workaround is to have a content body equal to the one byte carriage 
&gt; return.
&gt; It's not a big deal...
&gt; 
&gt; Writing to the mailing list was mainly because curious to know your thoughts 
&gt; about this :)
&gt; 
&gt; 
&gt; Have a good day,
&gt; V.
&gt; 
&gt; 
&gt; 
&gt; On Wed, Sep 11, 2013 at 12:03 AM, Sam Elliott  (mailto:sam.elli...@basho.com)&gt; wrote:
&gt; &gt; The content-type is important for Riak KV: Various clients will use it to 
&gt; &gt; identify the difference between a response where the whole body is the key, 
&gt; &gt; or a response that contains siblings (if you have allow\\_mult=true).
&gt; &gt; 
&gt; &gt; I suggest finding or creating a content type, so that this is clearer to 
&gt; &gt; your app. It will also allow you to version your objects better. Here are a 
&gt; &gt; few suggestions (of course replace the text between the &lt; &gt;):
&gt; &gt; - application/octet-stream - this is usually used for binary data, and is 
&gt; &gt; the easiest thing to set the content-type to.
&gt; &gt; - application/vnd.. - a 
&gt; &gt; vendor-specific type, which you can create yourself
&gt; &gt; - application/vnd...v 
&gt; &gt; - another vendor-specific type, which supports versioning.
&gt; &gt; 
&gt; &gt; You don't have to use the information in your final app, but it is used by 
&gt; &gt; riak and riak clients, so that's why we require it.
&gt; &gt; 
&gt; &gt; --
&gt; &gt; Sam Elliott
&gt; &gt; Engineer
&gt; &gt; sam.elli...@basho.com (mailto:sam.elli...@basho.com)
&gt; &gt; --
&gt; &gt; 
&gt; &gt; 
&gt; &gt; On Tuesday, 10 September 2013 at 5:03PM, Vincenzo Vitale wrote:
&gt; &gt; 
&gt; &gt; &gt; Suppose I want to just store keys in a bucket without any body, this make 
&gt; &gt; &gt; sense in scenarios where the key completely identify the entity. Is it 
&gt; &gt; &gt; possible to use the riak http api without including the content-type 
&gt; &gt; &gt; header?
&gt; &gt; &gt; Looking at the http specifications, content–type is not mandatory or 
&gt; &gt; &gt; suggested when the body is empty:
&gt; &gt; &gt; http://www.w3.org/Protocols/rfc2616/rfc2616-sec7.html#sec7.2.1
&gt; &gt; &gt; and it's probably a good argument to say that if the entity message is 
&gt; &gt; &gt; empty then the content type doesn't really make sense.
&gt; &gt; &gt; Personally I think that just the existence of an http entity - body or 
&gt; &gt; &gt; not body – is sufficient to justify a "type"; it's unfortunate that any 
&gt; &gt; &gt; other higher type (entity type maybe?) - decoupled from what is defined 
&gt; &gt; &gt; as content - exist in the spec.
&gt; &gt; &gt; Framework like spray are quite strict about this, not setting any content 
&gt; &gt; &gt; type when the content is empty:
&gt; &gt; &gt; https://github.com/spray/spray/blob/master/spray-http/src/main/scala/spray/http/HttpEntity.scala#L74
&gt; &gt; &gt; how to deal with such situation? Adding a fake content because of this 
&gt; &gt; &gt; data store constraint doesn't seems right.
&gt; &gt; &gt; 
&gt; &gt; &gt; 
&gt; &gt; &gt; Thanks,
&gt; &gt; &gt; Vincenzo.
&gt; &gt; &gt; 
&gt; &gt; &gt; --
&gt; &gt; &gt; If your e-mail inbox is out of control, check out 
&gt; &gt; &gt; http://sanebox.com/t/mmzve. I love it.
&gt; &gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt; &gt; riak-users mailing list
&gt; &gt; &gt; riak-users@lists.basho.com (mailto:riak-users@lists.basho.com) 
&gt; &gt; &gt; (mailto:riak-users@lists.basho.com)
&gt; &gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; &gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; -- 
&gt; If your e-mail inbox is out of control, check out http://sanebox.com/t/mmzve. 
&gt; I love it.




\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

