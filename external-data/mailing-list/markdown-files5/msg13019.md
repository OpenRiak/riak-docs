---
title: "Re: Hard time with Riak 2.0.0pre5 features"
description: ""
project: community
lastmod: 2013-11-19T07:57:53-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13019"
mailinglist_parent_id: "msg13018"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2013-11-19T07:57:53-08:00
---


Valter,

Apologies for the issue with data types, that decoding bug has been fixed
since. If you pull down the latest riak\\_pb from the 'develop' branch, the
bug should be gone. We'll have further prerelease builds until code freeze
that you could try.

I hope the other engineers can address the other problems you ran into.


On Tue, Nov 19, 2013 at 9:33 AM, Valter Balegas  wrote:

&gt; Hello,
&gt; I’ve been trying to use a couple features of Riak 2, but i cannot get
&gt; things to work.
&gt; I’m kinda new to Riak, but i’d like to try these features for a project.
&gt;
&gt; CRDTs:
&gt; I’m trying to run this code:
&gt; https://gist.github.com/russelldb/5da7d895cebc77dd38b8
&gt;
&gt; First i create the type, which i do not exactly understand what it means,
&gt; but i believe i’m creating a bucket that supports maps.
&gt;
&gt; ./riak-admin bucket-type create maps '{"props": {"datatype":"map",
&gt; "allow\\_mult":true}}'
&gt; ./riak-admin bucket-type activate maps
&gt;
&gt; and then i run the following operations:
&gt;
&gt; f(Pid), {ok, Pid} = riakc\\_pb\\_socket:start\\_link("localhost", 8087).
&gt; user:create\\_user(Pid, &lt;&lt;"Key"&gt;&gt;, &lt;&lt;"Bob"&gt;&gt;, &lt;&lt;"Dobalina"&gt;&gt;, &lt;&lt;"bodo"&gt;&gt;).
&gt;
&gt; but always receive the error:
&gt; \\*\\* exception exit: function\\_clause
&gt; in function riak\\_pb\\_dt\\_codec:decode\\_map\\_field/2
&gt; called as riak\\_pb\\_dt\\_codec:decode\\_map\\_field({mapentry,
&gt;
&gt; {mapfield,&lt;&lt;"views"&gt;&gt;,
&gt; 'COUNTER'},
&gt;
&gt; 0,[],undefined,undefined,
&gt; []},
&gt; [])
&gt; in call from
&gt; riak\\_pb\\_dt\\_codec:'-decode\\_update\\_response/3-lc$^0/1-0-'/1
&gt; (src/riak\\_pb\\_dt\\_codec.erl, line 500)
&gt; in call from riak\\_pb\\_dt\\_codec:decode\\_update\\_response/3
&gt; (src/riak\\_pb\\_dt\\_codec.erl, line 500)
&gt; in call from riakc\\_pb\\_socket:process\\_response/3
&gt; (src/riakc\\_pb\\_socket.erl, line 1770)
&gt; in call from riakc\\_pb\\_socket:handle\\_info/2
&gt; (src/riakc\\_pb\\_socket.erl, line 1303)
&gt; in call from gen\\_server:handle\\_msg/5 (gen\\_server.erl, line
&gt; 607)
&gt; in call from proc\\_lib:init\\_p\\_do\\_apply/3 (proc\\_lib.erl, line
&gt; 227)
&gt;
&gt;
&gt; Strong consistency:
&gt; How does one activate this? As i understand, either the pb or the http
&gt; clients do not accept the consistent property.
&gt;
&gt; Details about my environment:
&gt; -I’m running Mac OSX 10.9
&gt; -Erlang R15B01
&gt; -Compiling riak “develop” branch, from basho github
&gt; -Compiling riak-erlang-client “master” branch, from basho github.
&gt; -recompiled the latest versions of the branches just before writing this
&gt; email.
&gt;
&gt;
&gt; Thank you for your help,
&gt; Valter
&gt;
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;



-- 
Sean Cribbs 
Software Engineer
Basho Technologies, Inc.
http://basho.com/
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

