---
title: "Yokozuna indexes too slow"
description: ""
project: community
lastmod: 2015-10-01T07:35:39-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16586"
mailinglist_parent_id: "msg16581"
author_name: "ilyas"
project_section: "mailinglistitem"
sent_date: 2015-10-01T07:35:39-07:00
---





Hello Ilyas, I’ve got a few questions for you to help diagnose the 
performance problem.



Hi and thank you for the answer


\\* What Riak version are you running?

2.1.1 from debian package


\\* Are you using the default solrconfig on the index, or a custom 
configuration?

default solrconfig


\\* You say that there is a 200x slow down when Yokozuna indexing is 
enabled. Do you have any specific numbers? A graph would be helpful if 
you can generate one.
about 50 put operations per second to bucket with solr indexes, about 
1000 put operations per second to bucket without indexes


\\* When you say that Yokozuna takes up 100% of one core, have you been 
able to narrow that down to specific process within Yokozuna or Riak? 
Using “riak-admin top” might help here.



Load: cpu 1 Memory: total 166760 
binary 16351

procs 1199 processes 105055 code 16407
runq 0 atom 687 ets 7961

Pid Name or Initial Func Time Reds 
Memory MsgQ Current Function

-------------------------------------------------------------------------------------------------------------------------------
&lt;6420.625.0&gt; yz\\_cover '-' 398302 
34320 0 gen\\_server:loop/6
&lt;6420.25.0&gt; code\\_server '-' 128520 
230360 0 code\\_server:loop/1
&lt;6420.242.0&gt; riak\\_ensemble\\_storage '-' 47481 
3848 0 gen\\_server:loop/6
&lt;6420.244.0&gt; riak\\_ensemble\\_manager '-' 41886 
612216 0 gen\\_server:loop/6
&lt;6420.852.0&gt; riak\\_core\\_vnode:init/1 '-' 5772 
35016 0 gen:do\\_call/4
&lt;6420.847.0&gt; riak\\_core\\_vnode:init/1 '-' 5440 
55712 0 gen:do\\_call/4
&lt;6420.96.0&gt; riak\\_sysmon\\_filter '-' 4228 
8776 0 gen\\_server:loop/6
&lt;6420.24.0&gt; file\\_server\\_2 '-' 2899 
2744 0 gen\\_server:loop/6
&lt;6420.107.0&gt; erlang:apply/2 '-' 2351 
2600 0 cpu\\_sup:measurement\\_server\\_loop/1
&lt;6420.1298.0&gt; riak\\_ensemble\\_peer:init/1 '-' 1905 
9344 0 gen\\_fsm:loop/7


\\* Can you provide your JVM configuration (heap settings, etc.)?


-server -d64 -Xms2g -Xmx4g -XX:+UseStringCache 
-XX:+UseCompressedOopsriak-users mailing list




\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

