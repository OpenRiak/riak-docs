---
title: "Re: Riak nodes constantly crashing"
description: ""
project: community
lastmod: 2016-10-25T10:36:19-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17712"
mailinglist_parent_id: "msg17711"
author_name: "Ricardo Mayerhofer"
project_section: "mailinglistitem"
sent_date: 2016-10-25T10:36:19-07:00
---


What's weird is that the node crashes every minute at the same second. Is
there anything Riak may be running every minute?

On Mon, Oct 24, 2016 at 8:28 PM, Ricardo Mayerhofer 
wrote:

&gt; I'm also pasting the free -m:
&gt;
&gt; total used free shared buffers cached
&gt; Mem: 15039 14557 482 0 37 4594
&gt; -/+ buffers/cache: 9925 5114
&gt; Swap: 0 0 0
&gt;
&gt; On Mon, Oct 24, 2016 at 8:24 PM, Ricardo Mayerhofer  &gt; wrote:
&gt;
&gt;&gt; Hi Alexander,
&gt;&gt; Thanks for your response. We use multi-backend with bitcask and leveldb.
&gt;&gt;
&gt;&gt; - File descriptors seems to be ok, at least the config.
&gt;&gt;
&gt;&gt; ubuntu@ip-10-2-58-5:/var/log/riak$ sudo su riak
&gt;&gt; sudo: unable to resolve host ip-10-2-58-5
&gt;&gt; riak@ip-10-2-58-5:/var/log/riak$ ulimit -n
&gt;&gt; 65535
&gt;&gt;
&gt;&gt; - Memory seems to be ok as well:
&gt;&gt;
&gt;&gt; KiB Mem: \\* 15400916 \\*total,\\* 14493744 \\*used,\\* 907172 \\*free,\\* 36244 \\*
&gt;&gt; buffers
&gt;&gt;
&gt;&gt; - Disk is ok
&gt;&gt;
&gt;&gt; /dev/xvda1 20G 4.1G 15G 22% / # root device
&gt;&gt; /dev/xvdb 148G 69G 72G 49% /mnt/riak-data # bitcask and riak
&gt;&gt; data disk
&gt;&gt; /dev/xvdc 296G 23G 258G 8% /mnt/riak-data/leveldb #leveldb disk
&gt;&gt;
&gt;&gt; Any other idea? Thanks.
&gt;&gt;
&gt;&gt; On Mon, Oct 24, 2016 at 8:06 PM, Alexander Sicular 
&gt;&gt; wrote:
&gt;&gt;
&gt;&gt;&gt; Disk, memory or file descriptors would be my guess. Bitcask?
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; On Monday, October 24, 2016, Ricardo Mayerhofer 
&gt;&gt;&gt; wrote:
&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Hi all,
&gt;&gt;&gt;&gt; I have a Riak 1.4 where the nodes seems to be constantly crashing. All
&gt;&gt;&gt;&gt; 5 nodes are affected.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; However it seems Riak manage to get them up again.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Any idea on whats going on? Erros logs below.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Thanks.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; error.log
&gt;&gt;&gt;&gt; ...
&gt;&gt;&gt;&gt; 2016-10-24 21:57:29.185 [error] &lt;0.24570.1174&gt; CRASH REPORT Process
&gt;&gt;&gt;&gt; &lt;0.24570.1174&gt; with 0 neighbours crashed with reason: no case clause
&gt;&gt;&gt;&gt; matching {ok,{http\\_error,"exit\\r\\n"},&lt;&lt;&gt;&gt;} in mochiweb\\_http:request/3
&gt;&gt;&gt;&gt; line 107
&gt;&gt;&gt;&gt; 2016-10-24 21:58:29.187 [error] &lt;0.7109.1175&gt; CRASH REPORT Process
&gt;&gt;&gt;&gt; &lt;0.7109.1175&gt; with 0 neighbours crashed with reason: no case clause
&gt;&gt;&gt;&gt; matching {ok,{http\\_error,"exit\\r\\n"},&lt;&lt;&gt;&gt;} in mochiweb\\_http:request/3
&gt;&gt;&gt;&gt; line 107
&gt;&gt;&gt;&gt; 2016-10-24 21:59:29.228 [error] &lt;0.19612.1175&gt; CRASH REPORT Process
&gt;&gt;&gt;&gt; &lt;0.19612.1175&gt; with 0 neighbours crashed with reason: no case clause
&gt;&gt;&gt;&gt; matching {ok,{http\\_error,"exit\\r\\n"},&lt;&lt;&gt;&gt;} in mochiweb\\_http:request/3
&gt;&gt;&gt;&gt; line 107
&gt;&gt;&gt;&gt; 2016-10-24 22:00:29.218 [error] &lt;0.1356.1176&gt; CRASH REPORT Process
&gt;&gt;&gt;&gt; &lt;0.1356.1176&gt; with 0 neighbours crashed with reason: no case clause
&gt;&gt;&gt;&gt; matching {ok,{http\\_error,"exit\\r\\n"},&lt;&lt;&gt;&gt;} in mochiweb\\_http:request/3
&gt;&gt;&gt;&gt; line 107
&gt;&gt;&gt;&gt; 2016-10-24 22:01:29.197 [error] &lt;0.11380.1176&gt; CRASH REPORT Process
&gt;&gt;&gt;&gt; &lt;0.11380.1176&gt; with 0 neighbours crashed with reason: no case clause
&gt;&gt;&gt;&gt; matching {ok,{http\\_error,"exit\\r\\n"},&lt;&lt;&gt;&gt;} in mochiweb\\_http:request/3
&gt;&gt;&gt;&gt; line 107
&gt;&gt;&gt;&gt; 2016-10-24 22:02:29.231 [error] &lt;0.24279.1176&gt; CRASH REPORT Process
&gt;&gt;&gt;&gt; &lt;0.24279.1176&gt; with 0 neighbours crashed with reason: no case clause
&gt;&gt;&gt;&gt; matching {ok,{http\\_error,"exit\\r\\n"},&lt;&lt;&gt;&gt;} in mochiweb\\_http:request/3
&gt;&gt;&gt;&gt; line 107
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; crash.log
&gt;&gt;&gt;&gt; 2016-10-24 21:51:56 =CRASH REPORT====
&gt;&gt;&gt;&gt; crasher:
&gt;&gt;&gt;&gt; initial call: mochiweb\\_acceptor:init/3
&gt;&gt;&gt;&gt; pid: &lt;0.28136.1621&gt;
&gt;&gt;&gt;&gt; registered\\_name: []
&gt;&gt;&gt;&gt; exception error: {{case\\_clause,{ok,{http\\_error,
&gt;&gt;&gt;&gt; "exit\\r\\n"},&lt;&lt;&gt;&gt;}},[{mochiweb\\_http,request,3,[{file,"src/moc
&gt;&gt;&gt;&gt; hiweb\\_http.erl"},{line,107}]},{proc\\_lib,init\\_p\\_do\\_apply,3,[{
&gt;&gt;&gt;&gt; file,"proc\\_lib.erl"},{line,227}]}]}
&gt;&gt;&gt;&gt; ancestors: ['http\\_0.0.0.0:8098\\_mochiweb',riak\\_core\\_sup,&lt;0.148.0&gt;]
&gt;&gt;&gt;&gt; messages: []
&gt;&gt;&gt;&gt; links: [&lt;0.201.0&gt;,#Port&lt;0.235869290&gt;]
&gt;&gt;&gt;&gt; dictionary: []
&gt;&gt;&gt;&gt; trap\\_exit: false
&gt;&gt;&gt;&gt; status: running
&gt;&gt;&gt;&gt; heap\\_size: 377
&gt;&gt;&gt;&gt; stack\\_size: 24
&gt;&gt;&gt;&gt; reductions: 423
&gt;&gt;&gt;&gt; neighbours:
&gt;&gt;&gt;&gt; 2016-10-24 21:52:56 =CRASH REPORT====
&gt;&gt;&gt;&gt; crasher:
&gt;&gt;&gt;&gt; initial call: mochiweb\\_acceptor:init/3
&gt;&gt;&gt;&gt; pid: &lt;0.7845.1622&gt;
&gt;&gt;&gt;&gt; registered\\_name: []
&gt;&gt;&gt;&gt; exception error: {{case\\_clause,{ok,{http\\_error,
&gt;&gt;&gt;&gt; "exit\\r\\n"},&lt;&lt;&gt;&gt;}},[{mochiweb\\_http,request,3,[{file,"src/moc
&gt;&gt;&gt;&gt; hiweb\\_http.erl"},{line,107}]},{proc\\_lib,init\\_p\\_do\\_apply,3,[{
&gt;&gt;&gt;&gt; file,"proc\\_lib.erl"},{line,227}]}]}
&gt;&gt;&gt;&gt; ancestors: ['http\\_0.0.0.0:8098\\_mochiweb',riak\\_core\\_sup,&lt;0.148.0&gt;]
&gt;&gt;&gt;&gt; messages: []
&gt;&gt;&gt;&gt; links: [&lt;0.201.0&gt;,#Port&lt;0.235879110&gt;]
&gt;&gt;&gt;&gt; dictionary: []
&gt;&gt;&gt;&gt; trap\\_exit: false
&gt;&gt;&gt;&gt; status: running
&gt;&gt;&gt;&gt; heap\\_size: 377
&gt;&gt;&gt;&gt; stack\\_size: 24
&gt;&gt;&gt;&gt; reductions: 406
&gt;&gt;&gt;&gt; --
&gt;&gt;&gt;&gt; Ricardo Mayerhofer
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; --
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; Alexander Sicular
&gt;&gt;&gt; Solutions Architect
&gt;&gt;&gt; Basho Technologies
&gt;&gt;&gt; 9175130679
&gt;&gt;&gt; @siculars
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; --
&gt;&gt; Ricardo Mayerhofer
&gt;&gt;
&gt;
&gt;
&gt;
&gt; --
&gt; Ricardo Mayerhofer
&gt;



-- 
Ricardo Mayerhofer
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

