---
title: "Re: Start up problem talking to Riak"
description: ""
project: community
lastmod: 2017-02-16T04:16:56-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17992"
mailinglist_parent_id: "msg17991"
author_name: "sean mcevoy"
project_section: "mailinglistitem"
sent_date: 2017-02-16T04:16:56-08:00
---


Hi David,
I vaguely remember the same problem from a previous setup I did, a while
ago now.
IIRC, the original configured IP gets written to disk on the initial start
and then the next start fails due to the mis-match.
Try deleting your data directory and restarting, so this will be like the
initial startup again.
//Sean.


On Thu, Feb 16, 2017 at 10:31 AM, AWS  wrote:

&gt; OK, I took the machine down intending to write my own quick and easy key
&gt; value db (I have done this before) but I have told my uni that I am using
&gt; Riak so I thought that I ought to have another go.
&gt;
&gt; I have reinstalled Ubuntu and Riak. The computer now has an internal IP
&gt; (192.168.1.94) rather than an external fixed IP. I started up Riak and got
&gt; a pong. I then tried to connect with my software from that already works
&gt; with the Riak I have running on Amazon AWS so I know that the software
&gt; works - just a request for a list of buckets.
&gt;
&gt; I got a "Connection refused error. I checked and 8098 was closed. I edited
&gt; Riak.conf as advices from 127.0.0.0 to 0.0.0.0 but now Riak won't start
&gt; (Riak failed to start in 15 seconds).
&gt;
&gt; I really want to get this working and, given I have an assignment due in a
&gt; few days, sooner rather than later. It is working fine on AWS but it is
&gt; such a faff getting onto that using ssh as I am never sure of my key to use
&gt; so I can't check the config there.
&gt;
&gt; This can't be hard, can it?
&gt;
&gt; Please help.
&gt;
&gt; David
&gt;
&gt;
&gt;
&gt; --------- Original Message ---------
&gt; \\*From:\\* "Alex Moore" 
&gt; \\*To:\\* "Alexander Sicular" 
&gt; \\*Cc:\\* "AWS" , "riak-users@lists.basho.com" &lt;
&gt; riak-users@lists.basho.com&gt;
&gt; \\*Subject:\\* Re: Start up problem talking to Riak
&gt; \\*Date:\\* 02/13/2017 15:45:28 (Mon)
&gt;
&gt; Yeah, what Alex said. You can't see it with your application because it's
&gt; currently bound to the localhost loopback address, but
&gt; it's bad to just expose everything publicly.
&gt;
&gt; 1. Where is this cluster running? (AWS or local dev cluster?)
&gt; 2. What are you trying to connect to Riak with? Is it one of our clients
&gt; or just raw HTTP requests?
&gt;
&gt; Thanks,
&gt; Alex
&gt;
&gt; On Mon, Feb 13, 2017 at 10:33 AM, Alexander Sicular 
&gt; wrote:
&gt;
&gt;&gt; Please don't do that. Don't point the internet at your database. Have
&gt;&gt; them communicate amongst each other on internal ips and route the public
&gt;&gt; through a proxy / middleware.
&gt;&gt;
&gt;&gt; -Alexander
&gt;&gt;
&gt;&gt; @siculars
&gt;&gt; http://siculars.posthaven.com
&gt;&gt;
&gt;&gt; Sent from my iRotaryPhone
&gt;&gt;
&gt;&gt; &gt; On Feb 13, 2017, at 04:00, AWS  wrote:
&gt;&gt; &gt;
&gt;&gt; &gt; I know that this isn't directly a Riak issue but I am sure that some
&gt;&gt; of you have met this before and can maybe help me. I am used to Macs and
&gt;&gt; Windows but have now set up an Ubuntu 14.04LTS server on my home network. I
&gt;&gt; have 5 fixed IP addresses so the server has its own external address. I
&gt;&gt; have opened port 8098 on my router to point at the server and checked that
&gt;&gt; ufw isn't running. I have tested with it running ufw and with 'allow 8098'
&gt;&gt; applied. I still cannot connect to Riak. On the same computer I get a pong
&gt;&gt; back to a ping so Riak seems to be OK.
&gt;&gt; &gt;
&gt;&gt; &gt; I have a Riak server running on AWS and had trouble setting that up
&gt;&gt; until I, eventually, opened all ports.
&gt;&gt; &gt;
&gt;&gt; &gt; Can anyone please suggest some steps that I might take? I need this
&gt;&gt; running for an Open University course that I am studying. My AWS free
&gt;&gt; server runs out before the course finishes so I have to get this up and
&gt;&gt; running soon.
&gt;&gt; &gt; Thanks in advance.
&gt;&gt; &gt; David
&gt;&gt; &gt;
&gt;&gt; &gt; Message sent using Winmail Mail Server
&gt;&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; &gt; riak-users mailing list
&gt;&gt; &gt; riak-users@lists.basho.com
&gt;&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;
&gt;
&gt;
&gt; ------------------------------
&gt;
&gt; Message sent using Winmail Mail Server
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

