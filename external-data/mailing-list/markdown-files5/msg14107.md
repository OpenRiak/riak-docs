---
title: "Riak.filterNotFound and Riak.reduceSort in reduce phase dramaticaly	decrease performance"
description: ""
project: community
lastmod: 2014-04-17T02:31:32-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14107"
author_name: "Alexander Popov"
project_section: "mailinglistitem"
sent_date: 2014-04-17T02:31:32-07:00
---


query1.sh:
=====
curl -w %{time\\_connect}:%{time\\_starttransfer}:%{time\\_total} -X POST \\
-H "content-type: application/json" \\
-d @- \\
http://localhost:8098/mapred \\
&lt; 0.005:1.468:1.468


query2.sh:
========
curl -w %{time\\_connect}:%{time\\_starttransfer}:%{time\\_total} -X POST \\
-H "content-type: application/json" \\
-d @- \\
http://localhost:8098/mapred \\
&lt;0.005:1.439:1.439



query3.sh:
========
curl -w %{time\\_connect}:%{time\\_starttransfer}:%{time\\_total} -X POST \\
-H "content-type: application/json" \\
-d @- \\
http://localhost:8098/mapred \\
&lt; 0.005:0.218:0.218

As for me, this is not so fast too. because currently it is very simple and
 if I add some logic or users data is grow, all things will be much
slower.



Total number of keys in bucket: 3703
Keys matched with index: 299

Environment: cluster of 3 ec2 c3.xlarge instances(debian).
storage\\_backend : riak\\_kv\\_eleveldb\\_backend
erlydtl\\_version : &lt;&lt;"0.7.0"&gt;&gt;
riak\\_control\\_version : &lt;&lt;"1.4.4-0-g9a74e57"&gt;&gt;
cluster\\_info\\_version : &lt;&lt;"1.2.4"&gt;&gt;
riak\\_search\\_version : &lt;&lt;"1.4.8-0-gbe6e4ed"&gt;&gt;
merge\\_index\\_version : &lt;&lt;"1.3.2-0-gcb38ee7"&gt;&gt;
riak\\_kv\\_version : &lt;&lt;"1.4.8-0-g7545390"&gt;&gt;
sidejob\\_version : &lt;&lt;"0.2.0"&gt;&gt;
riak\\_api\\_version : &lt;&lt;"1.4.4-0-g395e6fd"&gt;&gt;
riak\\_pipe\\_version : &lt;&lt;"1.4.4-0-g7f390f3"&gt;&gt;
riak\\_core\\_version : &lt;&lt;"1.4.4"&gt;&gt;
bitcask\\_version : &lt;&lt;"1.6.6-0-g230b6d6"&gt;&gt;
basho\\_stats\\_version : &lt;&lt;"1.0.3"&gt;&gt;
webmachine\\_version : &lt;&lt;"1.10.4-0-gfcff795"&gt;&gt;
mochiweb\\_version : &lt;&lt;"1.5.1p6"&gt;&gt;
inets\\_version : &lt;&lt;"5.9"&gt;&gt;
erlang\\_js\\_version : &lt;&lt;"1.2.2"&gt;&gt;
runtime\\_tools\\_version : &lt;&lt;"1.8.8"&gt;&gt;
os\\_mon\\_version : &lt;&lt;"2.2.9"&gt;&gt;
riak\\_sysmon\\_version : &lt;&lt;"1.1.3"&gt;&gt;
ssl\\_version : &lt;&lt;"5.0.1"&gt;&gt;
public\\_key\\_version : &lt;&lt;"0.15"&gt;&gt;
crypto\\_version : &lt;&lt;"2.1"&gt;&gt;
sasl\\_version : &lt;&lt;"2.2.1"&gt;&gt;
lager\\_version : &lt;&lt;"2.0.1"&gt;&gt;
goldrush\\_version : &lt;&lt;"0.1.5"&gt;&gt;
compiler\\_version : &lt;&lt;"4.8.1"&gt;&gt;
syntax\\_tools\\_version : &lt;&lt;"1.6.8"&gt;&gt;
stdlib\\_version : &lt;&lt;"1.18.1"&gt;&gt;
kernel\\_version : &lt;&lt;"2.15.1"&gt;&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

