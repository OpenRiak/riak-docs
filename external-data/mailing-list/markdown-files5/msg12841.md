---
title: "Re: Fetching Object Info"
description: ""
project: community
lastmod: 2013-11-04T23:37:19-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12841"
mailinglist_parent_id: "msg12838"
author_name: "Daniele Testa"
project_section: "mailinglistitem"
sent_date: 2013-11-04T23:37:19-08:00
---


Hi,

All you say is valid and I understand the reasons. However, if you
have limited bandwidth between your servers, say 100mbit, which at the
same time is shared with the Internet connection, things will be slow.

There are cases where you want the client to do the quorum instead of
the server to minimize bandwidth usage. Of course this will sacrify
some availability as some requests might fail.

As Riak targets high availability, I understand that this might not be
something you want to do. Like I said, I am just looking around for
options :)

I have seen that WeedFS seems to do something close to what I want.
Apparently it is modelled after Facebook's Haystack.

Regards,
Daniele

2013/11/5 Tom Santero :
&gt; Hi Daniele,
&gt;
&gt; responses are inline.
&gt;
&gt; -Tom
&gt;
&gt; On Tue, Oct 29, 2013 at 4:31 PM, Daniele Testa 
&gt; wrote:
&gt;&gt;
&gt;&gt; Hi,
&gt;&gt;
&gt;&gt; I am looking around for different solutions for a good file-store and
&gt;&gt; the posibility to use Riak for that purpose.
&gt;&gt;
&gt;&gt; As far as I understand, if I have a 10 node cluster with 2 replicas,
&gt;&gt; an object will be stored on a total of 3 nodes.
&gt;
&gt;
&gt; Assuming from the rest of your email, I assume "2 replicas" is a typo and
&gt; you mean't to say 3. If this is the case, then yes.
&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; If I query a node where the object is NOT stored, the node will act as
&gt;&gt; a proxy and fetch the object from one of the 3 resposible nodes and
&gt;&gt; send it to the client. I do not want this. I prefer that the client
&gt;&gt; fetches the object directly from the responsible node(s) without
&gt;&gt; wasting traffic between the Riak nodes.
&gt;
&gt;
&gt; The node you hit with your query will act as a coordinating node, and a
&gt; request will be sent to all 3 nodes where your replica is stored. Whatever
&gt; your R quorum value is set to will determine how many responses the
&gt; coordinating node will wait for before acknowledging your request.
&gt;
&gt; This model is at the core of Riak's promise to provide high-availability and
&gt; low latency requests. You cannot always assume one of your N nodes will be
&gt; available to even accept your request, so randomizing which node accepts any
&gt; given query is quite common for most Riak deployments and helps in providing
&gt; a predictable latency profile. Furthermore, while it might not be intuitive,
&gt; it turns out that redundant requests in distributed systems can have the
&gt; effect of decreased tail latencies. For a good primer of some of the
&gt; research in this field I point you toward a blog post written by Peter
&gt; Bailis [0].
&gt;
&gt; More info about quorums are on the docs [1] and in a series blog posts [2]
&gt; written by John Daily
&gt;
&gt; [0]
&gt; http://www.bailis.org/blog/doing-redundant-work-to-speed-up-distributed-queries/
&gt; [1] http://docs.basho.com/riak/latest/dev/advanced/cap-controls
&gt; [2] http://basho.com/riaks-config-behaviors-epilogue/
&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; Is there a way to make the node do a "http location" response back to
&gt;&gt; the client with a redirect to one of the responsible nodes, so that
&gt;&gt; the client can fetch direcly from the node where the object resides? I
&gt;&gt; assume not.
&gt;
&gt;
&gt; No.
&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; However, I was hoping there is a way to query Riak about on which
&gt;&gt; nodes a specific object resides? Maybe there is a "info request" that
&gt;&gt; only returns metadata and location info about an object?
&gt;&gt;
&gt;&gt; Something like "where is object X?" and Riak responds with a list of
&gt;&gt; the 3 responsible nodes. Is this possible?
&gt;
&gt;
&gt; The vnodes responsible for persisting a riak object are known as the
&gt; preference list (or preflist for short). Technically you \\_can\\_ attach to a
&gt; console and ask Riak for the preflist for any object, and then determine
&gt; which nodes that key currently resides on, but you don't want to do that.
&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; Regards,
&gt;&gt; Daniele
&gt;&gt;
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

