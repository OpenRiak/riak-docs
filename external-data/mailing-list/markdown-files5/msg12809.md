---
title: "Re: multi-get optimisation"
description: ""
project: community
lastmod: 2013-10-31T01:39:19-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12809"
mailinglist_parent_id: "msg12798"
author_name: "Vincent Chavelle"
project_section: "mailinglistitem"
sent_date: 2013-10-31T01:39:19-07:00
---


&gt; We will consider this for a future release of Riak. In the meantime, have
&gt; you considered JRuby for your app? It has much better multi-threaded
&gt; behavior than MRI.

Amazing news! Thank you so much.
I haven't considered to use JRuby because of some incompatibilities.

&gt; If the requests from the clients are not so frequent, there might be
&gt; another option, to emulate multiget by running mapreduce with keylist
&gt; input. This will make Riak run cover operation internally, so the
&gt; throughput won't improve but latency would improve, because it runs
&gt; inside the server in parallel. Hope this helps.

I've thought about it, but because MapReduce query is sent to all nodes, I
prefer to avoid it :-)
Thank you anyway for the example that may be useful to others.

Now I am very impatient. Have a good day.

Vincent Chavelle


On Wed, Oct 30, 2013 at 5:00 AM, Kota Uenishi  wrote:

&gt; If the requests from the clients are not so frequent, there might be
&gt; another option, to emulate multiget by running mapreduce with keylist
&gt; input. This will make Riak run cover operation internally, so the
&gt; throughput won't improve but latency would improve, because it runs
&gt; inside the server in parallel. Hope this helps.
&gt;
&gt; https://gist.github.com/kuenishi/7226938
&gt;
&gt; Thanks,
&gt;
&gt; On Tue, Oct 29, 2013 at 10:49 PM, Sean Cribbs  wrote:
&gt; &gt; Vincent,
&gt; &gt;
&gt; &gt; We will consider this for a future release of Riak. In the meantime, have
&gt; &gt; you considered JRuby for your app? It has much better multi-threaded
&gt; &gt; behavior than MRI.
&gt; &gt;
&gt; &gt;
&gt; &gt; On Tue, Oct 29, 2013 at 5:24 AM, Vincent Chavelle
&gt; &gt;  wrote:
&gt; &gt;&gt;
&gt; &gt;&gt; Hi,
&gt; &gt;&gt;
&gt; &gt;&gt; I fell in love with riak and riak-cs, I have migrated all my stack on it
&gt; &gt;&gt; (originally from mongodb).
&gt; &gt;&gt; But I have one big issue. I have a lot of key to request simultaneously
&gt; &gt;&gt; and thanks for multi\\_get implementation (ruby) it's already optimised
&gt; for
&gt; &gt;&gt; the client side (concurrent requests). But I would like to know if any
&gt; &gt;&gt; server implementation to come because, in my case, it is very very slow
&gt; to
&gt; &gt;&gt; request 1000 objects (unlike mongodb).
&gt; &gt;&gt;
&gt; &gt;&gt; You will make me the happiest man in the world. And I could take off my
&gt; &gt;&gt; hideous memory caching solution :-)
&gt; &gt;&gt;
&gt; &gt;&gt; Thanks
&gt; &gt;&gt;
&gt; &gt;&gt; Vincent Chavelle
&gt; &gt;&gt;
&gt; &gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt;&gt; riak-users mailing list
&gt; &gt;&gt; riak-users@lists.basho.com
&gt; &gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; &gt;&gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; --
&gt; &gt; Sean Cribbs 
&gt; &gt; Software Engineer
&gt; &gt; Basho Technologies, Inc.
&gt; &gt; http://basho.com/
&gt; &gt;
&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; &gt;
&gt;
&gt;
&gt;
&gt; --
&gt; Kota UENISHI / @kuenishi
&gt; Basho Japan KK
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

