---
title: "Re: CorrugatedIron call to delete a bucket."
description: ""
project: community
lastmod: 2013-02-06T04:58:02-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg10012"
mailinglist_parent_id: "msg10010"
author_name: "Kevin Burton"
project_section: "mailinglistitem"
sent_date: 2013-02-06T04:58:02-08:00
---


Sorry. Being a beginner I am not aware of "alternative" methods. I have not 
read enough to use Erlang. I don't know what "querying a 2i" is. I also wasn't 
aware that I needed to manage my keys. Perhaps this question could turn into a 
kind of poll for best practices? All suggestions are greatly appreciated.

On Feb 6, 2013, at 6:44 AM, OJ Reeves  wrote:

&gt; Kevin,
&gt; 
&gt; No I'm not saying that bucket's can't be deleted. I'm saying that you should 
&gt; choose an alternative method. For example, manage your keys in another way 
&gt; perhaps by querying a 2i and using the result to delete the values. This 
&gt; could be done via an Erlang map reduce job. You could store the keys 
&gt; elsewhere for later retrieval then delete each object via the key.
&gt; 
&gt; The problem here isn't deleting buckets, the problem is listing keys. I do 
&gt; think that other Riak users, Basho people in particular, would be better 
&gt; positioned to offer alternative approaches than me.
&gt; 
&gt; OJ
&gt; 
&gt; 
&gt; On Wed, Feb 6, 2013 at 10:37 PM, Kevin Burton  
&gt; wrote:
&gt;&gt; I see the warning and I would love to heed it. You are saying buckets can 
&gt;&gt; never be deleted? Rename has the same problem?
&gt;&gt; 
&gt;&gt; On Feb 6, 2013, at 6:15 AM, OJ Reeves  wrote:
&gt;&gt; 
&gt;&gt;&gt; Deleting a bucket takes forever in any Riak client if the bucket has a lot 
&gt;&gt;&gt; of values in it. This is because a bucket isn't an object that is any way 
&gt;&gt;&gt; analogous to a "table" like you'd see in an RDBMS and to delete a bucket 
&gt;&gt;&gt; the keys in that bucket need to be listed first (please correct me if I'm 
&gt;&gt;&gt; wrong people!). This operation is known to be slow and using it is not 
&gt;&gt;&gt; recommended.
&gt;&gt;&gt; 
&gt;&gt;&gt; CorrugatedIron outputs warning messages to the debug console whenever 
&gt;&gt;&gt; ListKeys or DeleteBucket are called. I'd recommend heeding those warnings 
&gt;&gt;&gt; and look to take a different approach.
&gt;&gt;&gt; 
&gt;&gt;&gt; OJ
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; On Wed, Feb 6, 2013 at 8:11 AM, Jeremiah Peschka 
&gt;&gt;&gt;  wrote:
&gt;&gt;&gt;&gt; No.
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; Deleting a bucket requires deleting all keys in the bucket. It will be 
&gt;&gt;&gt;&gt; slow.
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; ---
&gt;&gt;&gt;&gt; Jeremiah Peschka - Founder, Brent Ozar Unlimited
&gt;&gt;&gt;&gt; MCITP: SQL Server 2008, MVP
&gt;&gt;&gt;&gt; Cloudera Certified Developer for Apache Hadoop
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; On Tue, Feb 5, 2013 at 1:58 PM, Kevin Burton  
&gt;&gt;&gt;&gt; wrote:
&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt; I am trying to remove a bucket. So I call client.DeleteBucket(&gt;&gt;&gt;&gt; bucket&gt;) but this takes \\*forever\\*. Is there a faster way to simply remove 
&gt;&gt;&gt;&gt;&gt; a bucket?
&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt;&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; -- 
&gt;&gt;&gt; 
&gt;&gt;&gt; OJ Reeves
&gt;&gt;&gt; +61 431 952 586
&gt;&gt;&gt; http://buffered.io/
&gt; 
&gt; 
&gt; 
&gt; -- 
&gt; 
&gt; OJ Reeves
&gt; +61 431 952 586
&gt; http://buffered.io/
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

