---
title: "Re: Read Before Writes on Distributed Counters"
description: ""
project: community
lastmod: 2013-10-17T07:24:40-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12656"
mailinglist_parent_id: "msg12655"
author_name: "Russell Brown"
project_section: "mailinglistitem"
sent_date: 2013-10-17T07:24:40-07:00
---


Hi Wes,

The client application does not need to perform a read before a write, the riak 
server must read from disk before updating the counter. Or at least it must 
with our current implementation.

What PRs did you have in mind? I'm curious.

Oh, it looks like Sam beat me to itâ€¦to elaborate on his "not idempotent" line, 
that means when riak tells you "error" for some counter increment, it may only 
be a partial failure, and re-running the operation may lead to over counting.

Cheers

Russell

On 17 Oct 2013, at 16:03, Weston Jossey  wrote:

&gt; In the context of using distributed counters (introduced in 1.4), is it 
&gt; strictly necessary to perform a read prior to issue a write for a given key? 
&gt; A la, if I want to blindly increment a value by 1, regardless of what its 
&gt; current value is, is it sufficient to issue the write without previously 
&gt; having read the object?
&gt; 
&gt; I ask because looking at some of the implementations for counters in the open 
&gt; source community, it's common to perform a read before a write, which impacts 
&gt; performance ceilings on clusters with high volume reads / writes. I want to 
&gt; verify before issuing some PRs that this is in fact safe behavior.
&gt; 
&gt; Thank you!
&gt; -Wes Jossey
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com


\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

