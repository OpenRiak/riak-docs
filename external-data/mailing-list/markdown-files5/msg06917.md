---
title: "Re: Blog riak design"
description: ""
project: community
lastmod: 2012-03-07T11:31:35-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06917"
mailinglist_parent_id: "msg06916"
author_name: "Buri Arslon"
project_section: "mailinglistitem"
sent_date: 2012-03-07T11:31:35-08:00
---


Thanks, Jeff:

I really appreciate your answer. The second option (separate buckets) looks
more effective for my pet project as I hope each post will have a lot of
comments.

Thanks again,
-- Buriwoy

On Wed, Mar 7, 2012 at 10:41 AM, Jeff Kirkell wrote:

&gt; Buriwoy,
&gt;
&gt; I apologize in advance as I tend to write daily long replies. You have a
&gt; couple options and I can provide some of the insight I have learned up till
&gt; now but confusing answer is you can do both of what you wrote.
&gt;
&gt; You can have a bucket which is just called posts that also contains the
&gt; comments or threads of comments (bad example as this could nest) like so
&gt;
&gt; {data : "'name':'My Blog Post', 'detail':'my long blog post information',
&gt; 'comments': [{'from': 'someone', text:'test'}], {'from': 'someone else',
&gt; 'text': 'more comments'} "}
&gt;
&gt; As long as you can format it, you can store it. In talking with people
&gt; that deal with large amounts of data who are general NoSQL experts
&gt; (Cassandra which is also a Dynamo derivative) they strongly push to not
&gt; keep relationships in the same object. I will say that it really depends on
&gt; what you are trying to do since, if you just have simple data, it is fine.
&gt;
&gt; The better approach is to have a separate bucket called "posts" and
&gt; another called "comments" You can then use secondary indexes as an option
&gt; to link the two together. Basically, you take the unique identifier of the
&gt; post object and you make it a index header so you can get the comments
&gt; based on the post object. With the comments bucket, I would probably just
&gt; store the chain of comments together so if someone replies the a comment,
&gt; all that goes into the actual comment's object instead of having to manage
&gt; some form of hierarchy data.
&gt;
&gt; At the end of the day I basically built a solution that uses both of your
&gt; original options at the same time.
&gt;
&gt; Hopefully that provides some insight into the flexibility.
&gt;
&gt; Jeff
&gt;
&gt; On Wed, Mar 7, 2012 at 12:03 PM, Buri Arslon  wrote:
&gt;
&gt;&gt; I have another crazy idea :) What if I create a bucket for each blog's
&gt;&gt; comments? So, riak/blog\\_bucket/blog\\_01 and comments go to
&gt;&gt; riak/blog\\_01\\_comments?
&gt;&gt;
&gt;&gt; Any ideas?
&gt;&gt; -- Buriwoy
&gt;&gt;
&gt;&gt; On Tue, Mar 6, 2012 at 10:07 AM, Buri Arslon  wrote:
&gt;&gt;
&gt;&gt;&gt; Hi,
&gt;&gt;&gt;
&gt;&gt;&gt; I'm very new to NoSQL/KV database systems. Sean's webinar "Schema Design
&gt;&gt;&gt; for Riak" http://vimeo.com/17604126 gave me some idea about how to move
&gt;&gt;&gt; to kv database, but I feel I need some more advice/docs to fully grasp this
&gt;&gt;&gt; new concept for me.
&gt;&gt;&gt;
&gt;&gt;&gt; I was thinking about developing a blog application using Riak. Which
&gt;&gt;&gt; schema would be most effective for that kind of application (regular blog:
&gt;&gt;&gt; content + comments):
&gt;&gt;&gt;
&gt;&gt;&gt; bucket\\_blogs -&gt; blog content;
&gt;&gt;&gt; bucket\\_blogs\\_comments -&gt; comments for the blogs in the bucket\\_blogs
&gt;&gt;&gt;
&gt;&gt;&gt; or,
&gt;&gt;&gt;
&gt;&gt;&gt; bucket\\_blogs -&gt; JSON("blog": &lt;&gt;, "comments":
&gt;&gt;&gt; &lt;&gt;)?
&gt;&gt;&gt;
&gt;&gt;&gt; The second option seems less effective if number of comments grow
&gt;&gt;&gt; significantly. But I'm not sure. Any hints? Ideas?
&gt;&gt;&gt;
&gt;&gt;&gt; Thanks!
&gt;&gt;&gt; -- Buriwoy
&gt;&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;
&gt;&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

