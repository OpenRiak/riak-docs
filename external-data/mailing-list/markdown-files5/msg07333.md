---
title: "riak querying error"
description: ""
project: community
lastmod: 2012-04-26T22:00:04-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07333"
author_name: "Sangeetha.PattabiRaman2"
project_section: "mailinglistitem"
sent_date: 2012-04-26T22:00:04-07:00
---



Dear team,


My doubt is I have loaded goog.csv on riak using load\\_data script such as

#!/usr/local/bin/escript
main([Filename]) -&gt;
 {ok, Data} = file:read\\_file(Filename),
 Lines = tl(re:split(Data, "\\r?\\n", [{return, binary},trim])),
 lists:foreach(fun(L) -&gt; LS = re:split(L, ","), format\\_and\\_insert(LS) end, 
Lines).

format\\_and\\_insert(Line) -&gt;
 JSON = 
io\\_lib:format("{\\"Date\\":\\"~s\\",\\"Open\\":~s,\\"High\\":~s,\\"Low\\":~s,\\"Close\\":~s,\\"Volume\\":~s,\\"Adj.
 Close\\":~s}", Line),
 Command = io\\_lib:format("curl -X PUT http://127.0.0.1:8091/riak/goog/~s -d 
'~s' -H 'content-type: application/json'", [hd(Line),JSON]),
 io:format("Inserting: ~s~n", [hd(Line)]),
 os:cmd(Command).





 fYIP: goog.csv is this


Date,Open,High,Low,Close,Volume,Adj Close
2010-05-05,500.98,515.72,500.47,509.76,4566900,509.76
2010-05-04,526.52,526.74,504.21,506.37,6076300,506.37
2010-05-03,526.50,532.92,525.08,530.60,1857800,530.60
2010-04-30,531.13,537.68,525.44,525.70,2435400,525.70
2010-04-29,533.37,536.50,526.67,532.00,3058900,532.00
2010-04-28,532.10,534.83,521.03,529.19,3406100,529.19
2010-04-27,528.95,538.33,527.23,529.06,3844700,529.06
2010-04-26,544.97,544.99,529.21,531.64,4368800,531.64
2010-04-23,547.25,549.32,542.27,544.99,2089400,544.99
|Please clarify wit hteh same !!!!!!!!!!!!!!!!!!!!!!!!!!!|

My quest is :
When I query over date its returning the values but when I query on other than 
date column like volume etc... it shows the following error ...please do help 
me out with the same in resolving the following error :

[{"not\\_found":{"bucket":"goog","key":"1956200","keydata":"undefined"}}]


curl -X POST http://10.232.5.169:8098/mapred -H "Content-Type: 
application/json" -d @-
{"inputs":[["goog","2010-01-04"]],
"query":[{"map":{"language":"javascript","name":"Riak.mapValues","keep":true}}]
}
["{\\"Date\\":\\"2010-01-04\\",\\"Open\\":626.95,\\"High\\":629.51,\\"Low\\":624.24,\\"Close\\":626.75,\\"Volume\\":1956200,\\"Adj.
 Close\\":626.75}"]



curl -X POST http://10.232.5.169:8098/mapred -H "Content-Type: 
application/json" -d @-
{"inputs":[["goog","2010-01-04"]],
"query":[{"map":{"language":"javascript","name":"Riak.mapValues","keep":true}}]
}
["{\\"Date\\":\\"2010-01-04\\",\\"Open\\":626.95,\\"High\\":629.51,\\"Low\\":624.24,\\"Close\\":626.75,\\"Volume\\":1956200,\\"Adj.
 Close\\":626.75}"][ha^C
[hadoop@CTSINGMRGTO dev]$ curl -X POST http://10.232.5.169:8098/mapred -H 
"Content-Type: application/json" -d @-
{"inputs":[["goog","1956200"]],
"query":[{"map":{"language":"javascript","name":"Riak.mapValues","keep":true}}]
}
[{"not\\_found":{"bucket":"goog","key":"1956200","keydata":"undefined"}}]
Thanks & regards
sangeetha


This e-mail and any files transmitted with it are for the sole use of the 
intended recipient(s) and may contain confidential and privileged information. 
If you are not the intended recipient(s), please reply to the sender and 
destroy all copies of the original message. Any unauthorized review, use, 
disclosure, dissemination, forwarding, printing or copying of this email, 
and/or any action taken in reliance on the contents of this e-mail is strictly 
prohibited and may be unlawful.
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

