---
title: "Re: RIAK all_nodes_down error"
description: ""
project: community
lastmod: 2012-01-30T07:15:28-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06455"
mailinglist_parent_id: "msg06454"
author_name: "Marcel Müller"
project_section: "mailinglistitem"
sent_date: 2012-01-30T07:15:28-08:00
---


hi Sean, 

[root@prd-uk-ras-002 ~]# riak-admin member\\_status
Attempting to restart script through sudo -u riak
================================= Membership ==================================
Status Ring Pending Node
-------------------------------------------------------------------------------
joining 0.0% -- 'riak@10.10.13.4'
joining 0.0% -- 'riak@10.10.13.5'
-------------------------------------------------------------------------------
Valid:0 / Leaving:0 / Exiting:0 / Joining:2 / Down:0

[root@prd-uk-ras-002 ~]# riak-admin ring\\_status
Attempting to restart script through sudo -u riak
================================== Claimant ===================================
Claimant: 'riak@127.0.0.1'
Status: down
Ring Ready: unknown

============================== Ownership Handoff ==============================
No pending changes.

============================== Unreachable Nodes ==============================
The following nodes are unreachable: ['riak@127.0.0.1']

WARNING: The cluster state will not converge until all nodes
are up. Once the above nodes come back online, convergence
will continue. If the outages are long-term or permanent, you
can either mark the nodes as down (riak-admin down NODE) or
forcibly remove the nodes from the cluster (riak-admin
force-remove NODE) to allow the remaining nodes to settle.
[root@prd-uk-ras-002 ~]# 

Thanks
Marcel 

Am 30.01.2012 um 16:04 schrieb Sean Cribbs:

&gt; Marcel,
&gt; 
&gt; What is the output of `riak-admin member\\_status` and `riak-admin ring\\_status`?
&gt; 
&gt; On Mon, Jan 30, 2012 at 10:02 AM, Marcel Müller  
&gt; wrote:
&gt; Hi,
&gt; 
&gt; i had install riak via rpm -i riak-1.0.3-1.el5.x86\\_64.rpm.
&gt; Start riak without any problems. Cool !
&gt; 
&gt; When i try to insert something via PUT:
&gt; 
&gt; [prd-uk-ras-002 ~]# curl -v -X PUT -d 'data1' 
&gt; http://10.10.13.4:8098/buckets/persons/keys/bosse
&gt; \\* About to connect() to 10.10.13.4 port 8098
&gt; \\* Trying 10.10.13.4... connected
&gt; \\* Connected to 10.10.13.4 (10.10.13.4) port 8098
&gt; &gt; PUT /buckets/persons/keys/bosse HTTP/1.1
&gt; &gt; User-Agent: curl/7.15.5 (x86\\_64-redhat-linux-gnu) libcurl/7.15.5 
&gt; &gt; OpenSSL/0.9.8b zlib/1.2.3 libidn/0.6.5
&gt; &gt; Host: 10.10.13.4:8098
&gt; &gt; Accept: \\*/\\*
&gt; &gt; Content-Length: 5
&gt; &gt; Content-Type: application/x-www-form-urlencoded
&gt; &gt;
&gt; &gt; data1HTTP/1.1 500 Internal Server Error
&gt; &lt; Vary: Accept-Encoding
&gt; &lt; Server: MochiWeb/1.1 WebMachine/1.9.0 (someone had painted it blue)
&gt; &lt; Date: Mon, 30 Jan 2012 14:57:36 GMT
&gt; &lt; Content-Type: text/plain
&gt; &lt; Content-Length: 22
&gt; Error:
&gt; all\\_nodes\\_down
&gt; \\* Connection #0 to host 10.10.13.4 left intact
&gt; \\* Closing connection #0
&gt; 
&gt; I receive the error: all\\_nodes\\_down
&gt; 
&gt; but risk-admin status told me
&gt; 
&gt; nodename : 'riak@10.10.13.4'
&gt; connected\\_nodes : ['riak@10.10.13.5','riak@10.10.13.3']
&gt; sys\\_driver\\_version : &lt;&lt;"1.5"&gt;&gt;
&gt; sys\\_global\\_heaps\\_size : 0
&gt; sys\\_heap\\_type : private
&gt; sys\\_logical\\_processors : 1
&gt; sys\\_otp\\_release : &lt;&lt;"R14B03"&gt;&gt;
&gt; sys\\_process\\_count : 223
&gt; sys\\_smp\\_support : false
&gt; sys\\_system\\_version : &lt;&lt;"Erlang R14B03 (erts-5.8.4) [source] [64-bit] [rq:1] 
&gt; [async-threads:64] [hipe] [kernel-poll:true]"&gt;&gt;
&gt; sys\\_system\\_architecture : &lt;&lt;"x86\\_64-unknown-linux-gnu"&gt;&gt;
&gt; sys\\_threads\\_enabled : true
&gt; sys\\_thread\\_pool\\_size : 64
&gt; sys\\_wordsize : 8
&gt; ring\\_members : ['riak@10.10.13.4','riak@10.10.13.5']
&gt; 
&gt; Can you help me ? What is wrong ?
&gt; 
&gt; Thanks
&gt; Marcel
&gt; 
&gt; 
&gt; 
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; 
&gt; 
&gt; 
&gt; -- 
&gt; Sean Cribbs 
&gt; Software Engineer
&gt; Basho Technologies, Inc.
&gt; http://basho.com/
&gt; 

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

