---
title: "Re: 1.4.8, memory_backend max_memory not honored?"
description: ""
project: community
lastmod: 2014-06-24T09:31:29-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14365"
mailinglist_parent_id: "msg14364"
author_name: "Allen Landsidel"
project_section: "mailinglistitem"
sent_date: 2014-06-24T09:31:29-07:00
---



Sure Luke.

The app.config is attached.

Does that riak\\_kv/940 sound like it could be responsible?

On 6/24/2014 12:15, Luke Bakken wrote:

Hi Allen,

There were some fixes to the memory backend in 1.4.9:
https://github.com/basho/riak/blob/1.4/RELEASE-NOTES.md

Could you please provide your app.config file? I'd like to check it and
test out your scenario locally.

--
Luke Bakken
CSE
lbak...@basho.com 


On Tue, Jun 24, 2014 at 8:59 AM, Allen Landsidel
&gt; wrote:

 Test cluster with 2 machines running 1.4.8 with the memory backend.
 app\\_config has ring\\_creation\\_size 64, max\\_memory 4. If I understand
 the documentation correctly this should result in a maximum memory
 footprint (minus overhead) of 256M. Each node has 2G RAM, 2G of
 swap. After running for a while constantly adding data, without
 ever explicitly removing any, the memory footprint outstrips
 physical ram and will eventually consume all available swap space
 and be killed.

 Is this a known issue in 1.4.8 that's fixed in 1.4.9, or is there
 other configuration settings that need adjusted to reduce the footprint?

 Initially I had set it up to top out at 1GB but when it started
 exhausting swap, I progressively reduced max\\_memory until I arrived
 where I am now, with no difference at all.

 \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
 riak-users mailing list
 riak-users@lists.basho.com 
 http://lists.basho.com/\\_\\_mailman/listinfo/riak-users\\_\\_\\_lists.basho.com
 




app.config
Description: XML document
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

