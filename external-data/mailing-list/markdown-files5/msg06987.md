---
title: "Re: Ruby eventmachine async client"
description: ""
project: community
lastmod: 2012-03-16T12:55:20-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06987"
mailinglist_parent_id: "msg06981"
author_name: "graphex"
project_section: "mailinglistitem"
sent_date: 2012-03-16T12:55:20-07:00
---



Elias Levy wrote
&gt; 
&gt; If you look at the list archive's you'll see that a while ago I posted
&gt; some
&gt; code to monkey patch the Ruby client to use EM Synchrony's TCPSocket so as
&gt; to support EM.
&gt; 
&gt; You'll find it at
&gt; http://lists.basho.com/pipermail/riak-users\\_lists.basho.com/2011-November/006308.html
&gt; 

Ah, I had read that before but didn't notice it was on synchrony. My issue
is that I've had trouble with riak-ruby-client using PBC with 2i, so I sort
of wrote it off (see: https://github.com/basho/riak-ruby-client/issues/17
https://github.com/basho/riak-ruby-client/issues/17 )

That combined with the short reads issue sort of put me off on that front.


Mathias Meyer wrote
&gt; 
&gt; I'd recommend looking at #2, it looks like an easy path and should make
&gt; for a great addition to the riak-ruby-client too. In my ideal world,
&gt; there'd be a backend based on Faraday [2], so that the Ruby client
&gt; wouldn't even have to worry about the underlying implementation, but you
&gt; need to punch Sean Cribbs (very nicely) about that. Or you could just use
&gt; Faraday instead of em-synchrony all along, since Faraday has a backend for
&gt; em-http/synchrony already.
&gt; 

That would certainly be nice though I'm unfortunately too low on time to
take a stab... and I've only looked at Faraday a bit... and synchrony is
kind of hurting my mind (actually more comfortable with callbacks and -gasp-
curly braces!) Sounds like the best solution, though, and hopefully I can
circle back on that once I can delegate some of my other tasks to someone.
For now, i will try out a fiber/iterator approach and fall back to a defer
if it doesn't go well.

I'm also secretly hoping that someone at basho can hook up the client to an
em-style backend so it just works like -cough- mongo does.

Thanks for the help guys!

--
View this message in context: 
http://riak-users.197444.n3.nabble.com/Ruby-eventmachine-async-client-tp3830975p3832985.html
Sent from the Riak Users mailing list archive at Nabble.com.

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

