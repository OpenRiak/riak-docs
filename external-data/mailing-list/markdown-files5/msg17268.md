---
title: "Re: Very slow acquisition time (99 percentile) while fast median times"
description: ""
project: community
lastmod: 2016-05-02T07:16:10-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17268"
mailinglist_parent_id: "msg17267"
author_name: "Luke Bakken"
project_section: "mailinglistitem"
sent_date: 2016-05-02T07:16:10-07:00
---


Hi Guillaume -

What are the "objsize" stats for your cluster?
--
Luke Bakken
Engineer
lbak...@basho.com


On Mon, May 2, 2016 at 4:45 AM, Guillaume Boddaert
 wrote:
&gt; Hi,
&gt;
&gt; I'm trying to setup a production environment with Riak as backend.
&gt; Unfortunately I have very slow write times that bottleneck my whole system.
&gt;
&gt; Here is a sample of one of my node (riak-admin status | grep -e
&gt; '^node\\_put\\_fsm\\_time'):
&gt; node\\_put\\_fsm\\_time\\_100 : 3305516
&gt; node\\_put\\_fsm\\_time\\_95 : 230589
&gt; node\\_put\\_fsm\\_time\\_99 : 1694593
&gt; node\\_put\\_fsm\\_time\\_mean : 79864
&gt; node\\_put\\_fsm\\_time\\_median : 14973
&gt;
&gt; As you can see, I have really good times for most of my writes, yet the mean
&gt; time is not so good because a few writes are taking long (Up to 3 seconds)
&gt; How can I get rid of those slow insert ? Is that intended/normal ?
&gt;
&gt; My setup is the following:
&gt; 5 hosts (2CPU, %Cpu(s): 47,1 us, 1,3 sy, 0,0 ni, 51,3 id, 0,0 wa, 0,0
&gt; hi, 0,2 si, 0,0 st) , ring\\_size: 128, aae disabled.
&gt; Writes are w=1 dw=0
&gt; each host has 32go of ram, that is almost used for system caching only.
&gt; My data are stored on an openstack volume that support up to 3000IOPS.
&gt;
&gt; Here is an iostat sample for 1 minute:
&gt; avg-cpu: %user %nice %system %iowait %steal %idle
&gt; 38.00 0.00 1.81 0.03 0.08 60.07
&gt;
&gt; Device: tps kB\\_read/s kB\\_wrtn/s kB\\_read kB\\_wrtn
&gt; vda 0.37 0.00 2.27 0 136
&gt; vdb 9.60 0.00 294.53 0 17672
&gt;
&gt; Thanks,
&gt;
&gt; Guilaume BODDAERT
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

