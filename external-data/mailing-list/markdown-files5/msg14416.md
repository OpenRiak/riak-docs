---
title: "Re: Question about counters"
description: ""
project: community
lastmod: 2014-06-30T01:34:23-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14416"
mailinglist_parent_id: "msg14415"
author_name: "Alex De la rosa"
project_section: "mailinglistitem"
sent_date: 2014-06-30T01:34:23-07:00
---


Hi Alexander,

Very nice answer, interesting! Can you explain how to do this with Riak
Search? I had to admit I never used it in the past (Riak 0.14 and Riak
1.x), and once installed Riak 2.0 and tried to enable it my Riak cluster
was not starting (I guess I missed something in the configuration).

Cheers,
Alex


On Mon, Jun 30, 2014 at 10:28 AM, Christian Dahlqvist 
wrote:

&gt; Hi Alex,
&gt;
&gt; In Riak 2.0 you can create a map data type that can contain a number of
&gt; related counters. If you have a limited number of named counters, e.g. for
&gt; scorers in the World Cup, this would allow you to update multiple counters
&gt; using a single operation and read all of then as a single key retrieval.
&gt;
&gt; If you however have a large number of counters that can not fit into a
&gt; single value, this approach will not work. Instead of trying to retrieve
&gt; the top values through MapReduce, you could instead enable Riak Search 2.0
&gt; for the bucket and query the largest values through Solr, which should be
&gt; more efficient and flexible than using MapReduce.
&gt;
&gt; Best regards,
&gt;
&gt; Christian
&gt;
&gt;
&gt; On Mon, Jun 30, 2014 at 7:17 AM, Alex De la rosa 
&gt; wrote:
&gt;
&gt;&gt; A "set" may not be a good solution if you have many counters getting
&gt;&gt; updated at once and you should do the sorting (if possible) before saving
&gt;&gt; the "set" back into RIAK.
&gt;&gt;
&gt;&gt; The goal scoring was a very simple/small example... but imagine you want
&gt;&gt; to do Twitter's Trending Topics counting which twits has more comments (if
&gt;&gt; we have a "comments" counter)... will be too massive to save it all in a
&gt;&gt; "set".
&gt;&gt;
&gt;&gt; I guess that MapReduce will be the way in this case.
&gt;&gt;
&gt;&gt; Cheers,
&gt;&gt; Alex
&gt;&gt;
&gt;&gt;
&gt;&gt; On Mon, Jun 30, 2014 at 12:14 AM, Alexander Sicular 
&gt;&gt; wrote:
&gt;&gt;
&gt;&gt;&gt; Not that I know of. I believe keys are independent in this regard. Basho
&gt;&gt;&gt; is introducing sets in riak 2.0 but I don't think they will bee sorted sets
&gt;&gt;&gt; like in redis.
&gt;&gt;&gt;
&gt;&gt;&gt; -Alexander
&gt;&gt;&gt;
&gt;&gt;&gt; @siculars
&gt;&gt;&gt; http://siculars.posthaven.com
&gt;&gt;&gt;
&gt;&gt;&gt; Sent from my iRotaryPhone
&gt;&gt;&gt;
&gt;&gt;&gt; On Jun 29, 2014, at 15:54, Alex De la rosa 
&gt;&gt;&gt; wrote:
&gt;&gt;&gt;
&gt;&gt;&gt; Hi there,
&gt;&gt;&gt;
&gt;&gt;&gt; I have a question about something that just came up to my mind... can we
&gt;&gt;&gt; determine which counter is higher in a bucket? For example:
&gt;&gt;&gt;
&gt;&gt;&gt; # Taking the FIFA World Cup as example:
&gt;&gt;&gt;
&gt;&gt;&gt; bucket = client.bucket\\_type('counter\\_bucket').bucket('goals')
&gt;&gt;&gt; counter = bucket.new('Neymar')
&gt;&gt;&gt; counter.increment(4)
&gt;&gt;&gt; counter = bucket.new('Messi')
&gt;&gt;&gt; counter.increment(4)
&gt;&gt;&gt; counter = bucket.new('JamesRodriguez')
&gt;&gt;&gt; counter.increment(5)
&gt;&gt;&gt;
&gt;&gt;&gt; Is there any way (without using MapReduce) to get the top scorer of the
&gt;&gt;&gt; World Cup? or a descendent ordered list of the keys by its value?
&gt;&gt;&gt;
&gt;&gt;&gt; Cheers,
&gt;&gt;&gt; Alex
&gt;&gt;&gt;
&gt;&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;
&gt;&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

