---
title: "reg. storageon Localfile system"
description: ""
project: community
lastmod: 2012-07-11T23:23:55-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07913"
mailinglist_parent_id: "msg07911"
author_name: "Sangeetha.PattabiRaman2"
project_section: "mailinglistitem"
sent_date: 2012-07-11T23:23:55-07:00
---





Thanks Sicular,

Supervisor riak\\_core\\_vnode\\_sup had child undefined started with 
riak\\_core\\_vnode:start\\_link() at undefined exit with reason 
{timeout,{gen\\_server,call,[&lt;0.1164.0&gt;,stop]}} in context shutdown\\_error...


trying to insert csv data of 434 MB onto 2 node riak cluster....iam getting the 
following error ..could you please share the reason for the same
...Thanks In advance . attached app.config for your reference .



This is my another quest need your valuable suggestion please

Dear team,

&gt;

&gt;

&gt;

&gt;

&gt; FYI:we have a 4 quad core intel processor on each server on 2 node cluster 
&gt; with more than 1 TB of storage

&gt;

&gt;

&gt; I Ihave constructed the 2 node physical machine riak cluster with n\\_val 2 and 
&gt; my app.config ,vm.args are attached for your reference..

&gt;

&gt;

&gt;

&gt;

&gt; Please tell me where the bulk inserted data onto riak db gets stored on Local 
&gt; file system...its taking huge time to load small size itself...how to tune it 
&gt; to perform to large scale since we deal wit hbigdata of in few hungred 
&gt; GB's?????????????????

&gt;

&gt;

&gt;

&gt;

&gt; Cmd used:time ./load\\_data1m Customercalls1m.csv

&gt;

&gt;

&gt;

&gt;

&gt; ./load\\_data100m CustomerCalls100m(got this error so changed default config of 
&gt; app.config...from 8 MB to 3072 MB

&gt;

&gt;

&gt; escript: exception error: no match of right hand side value {error,enoent}

&gt;

&gt;

&gt;

&gt;

&gt;

&gt;

&gt; size

&gt;

&gt;

&gt;

&gt; Load time

&gt;

&gt;

&gt;

&gt; No of mappersonapp.config

&gt;

&gt;

&gt;

&gt; Js-max-vm-mem on app.config

&gt;

&gt;

&gt;

&gt; Js-thread-stack

&gt;

&gt;

&gt; y this much time for small data

&gt;

&gt; 100k(10,lakhrows)-5 MB takes

&gt;

&gt;

&gt;

&gt; 20m39.625 seconds

&gt;

&gt;

&gt;

&gt; 48

&gt;

&gt;

&gt;

&gt; 3 GB 3072MB(changedfromdefault 8MB)since i/p data is large)

&gt;

&gt;

&gt;

&gt; 3 GB 3072MB(changedfromdefault 8MB)since i/p data is large)

&gt;

&gt;

&gt;

&gt;

&gt; 1millionrows---54 MB takes

&gt;

&gt;

&gt;

&gt; 198m42.375seconds

&gt;

&gt;

&gt;

&gt; 48

&gt;

&gt;

&gt;

&gt; 3 GB 3072MB(changedfromdefault 8MB)since i/p data is large)

&gt;

&gt;

&gt;

&gt; 3 GB 3072MB(changedfromdefault 8MB)since i/p data is large)

&gt;

&gt;

&gt;

&gt;

&gt;

&gt;

&gt; .

&gt;

&gt;

&gt;

&gt;

&gt;

&gt;

&gt; ./load\\_data script used:

&gt;

&gt;

&gt;

&gt;

&gt; #!/usr/local/bin/escript

&gt;

&gt;

&gt; main([Filename]) -&gt;

&gt;

&gt;

&gt; {ok, Data} = file:read\\_file(Filename),

&gt;

&gt;

&gt; Lines = tl(re:split(Data, "\\r?\\n", [{return, binary},trim])),

&gt;

&gt;

&gt; lists:foreach(fun(L) -&gt; LS = re:split(L, ","), format\\_and\\_insert(LS) end, 
&gt; Lines).

&gt;

&gt;

&gt;

&gt;

&gt; format\\_and\\_insert(Line) -&gt;

&gt;

&gt;

&gt; JSON = 
&gt; io\\_lib:format("{\\"id\\":\\"~s\\",\\"phonenumber\\":~s,\\"callednumber\\":~s,\\"starttime\\":~s,\\"endtime\\":~s,\\"status\\":~s}",
&gt; Line),

&gt;

&gt;

&gt; Command = io\\_lib:format("curl -X PUT 
&gt; http://10.232.5.169:8098/riak/CustomerCalls100k/~s -d '~s' -H 'content-type: 
&gt; application/json'", [hd(Line),JSON]),

&gt;

&gt;

&gt; io:format("Inserting: ~s~n", [hd(Line)]),

&gt;

&gt;

&gt; os:cmd(Command).

&gt;

&gt;

&gt;

&gt;

&gt;

&gt;

&gt;

&gt;

&gt; Thanks in advance!!!!!!!!!!waiting fr the reply...plz anyone help..struck u 
&gt; pwit hbulk loading.....and make me clear how riak splits the data and gets 
&gt; loaded on cluster

&gt;

&gt;

&gt; Thanks & regards

&gt;

&gt;

&gt; sangeetha

&gt;

&gt;

&gt;

&gt;

&gt; This e-mail and any files transmitted with it are for the sole use of the 
&gt; intended recipient(s) and may contain confidential and privileged 
&gt; information. If you are not the intended recipient(s), please reply to the 
&gt; sender and destroy all copies of the original message. Any unauthorized 
&gt; review, use, disclosure, dissemination, forwarding, printing or copying of 
&gt; this email, and/or any action taken in reliance on the contents of this 
&gt; e-mail is strictly prohibited and may be unlawful.

&gt;

&gt;


Regards
Sangeetha

From: Alexander Sicular [mailto:sicul...@gmail.com]
Sent: Thursday, July 12, 2012 11:30 AM
To: Pattabi Raman, Sangeetha (Cognizant)
Cc: riak-users@lists.basho.com
Subject: Re: reg. storageon Localfile system


check your installations app.config file in the etc folder.

@siculars
http://siculars.posterous.com

Sent from my rotary phone.
On Jul 11, 2012 11:18 PM, 
&gt;
 wrote:



Hi team,

 Iam very new to riak ,can anyone say on loading onto riak db 2 
node cluster ...where does it puts the data on the Local file system.like we 
see on autosharding of mongodb or hadoop-hdfs over shards in the cluster mode 
....as in which of riak........................
FYI:
I use curl in loading the same

-module(time).
-export([starttime/0]).
-export([main/1]).
-export([format\\_and\\_insert/1]).
-export([endtime/0]).
starttime() -&gt;
starttime = {{Year,Month,Day},{Hour,Min,Sec}} = erlang:localtime().
main([Filename]) -&gt;
 {ok, Data} = file:read\\_file(Filename),
 Lines = tl(re:split(Data, "\\r?\\n", [{return, binary},trim])),
 lists:foreach(fun(L) -&gt; LS = re:split(L, ","), format\\_and\\_insert(LS) end, 
Lines).

format\\_and\\_insert(Line) -&gt;
 JSON = 
io\\_lib:format("{\\"id\\":\\"~s\\",\\"phonenumber\\":~s,\\"callednumber\\":~s,\\"starttime\\":~s,\\"endtime\\":~s,\\"status\\":~s}",
 Line),
 Command = io\\_lib:format("curl -X PUT http://10.232.5.169:8098/riak/goog1/~s 
-d '~s' -H 'content-type: application/json'", [hd(Line),JSON]),
 io:format("Inserting: ~s~n", [hd(Line)]),
 os:cmd(Command).


Thanks & regards
sangeetha

This e-mail and any files transmitted with it are for the sole use of the 
intended recipient(s) and may contain confidential and privileged information. 
If you are not the intended recipient(s), please reply to the sender and 
destroy all copies of the original message. Any unauthorized review, use, 
disclosure, dissemination, forwarding, printing or copying of this email, 
and/or any action taken in reliance on the contents of this e-mail is strictly 
prohibited and may be unlawful.

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
This e-mail and any files transmitted with it are for the sole use of the 
intended recipient(s) and may contain confidential and privileged information. 
If you are not the intended recipient(s), please reply to the sender and 
destroy all copies of the original message. Any unauthorized review, use, 
disclosure, dissemination, forwarding, printing or copying of this email, 
and/or any action taken in reliance on the contents of this e-mail is strictly 
prohibited and may be unlawful.


app.config
Description: app.config
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

