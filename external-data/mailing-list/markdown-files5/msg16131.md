---
title: "Re: Clarifying withoutFetch() with LevelDB and"
description: ""
project: community
lastmod: 2015-05-13T06:47:48-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16131"
mailinglist_parent_id: "msg16130"
author_name: "Luke Bakken"
project_section: "mailinglistitem"
sent_date: 2015-05-13T06:47:48-07:00
---


Hi Daniel,

What version of the Java client are you using?

Any reason you're on such an old version of Riak?

What is the size of each object written?
--
Luke Bakken
Engineer
lbak...@basho.com


On Wed, May 13, 2015 at 4:48 AM, Daniel Iwan  wrote:
&gt; Hi
&gt;
&gt; I'm using 4 node Riak cluster v1.3.1
&gt;
&gt; I wanted to know a little bit more about using withoutFetch() option when
&gt; used with levelDB.
&gt; I'm trying to write to a single key as fast as I can with n=3.
&gt; I deliberately create siblings by writing with stale vclock. I'm limiting
&gt; number of writes to 1000 per key to keep size of Riak object under control
&gt; and then I switch to another key. Siblings will probably never be resolved
&gt; (or resolved in realtime during sporadic reads)
&gt;
&gt; Single write operation is about 250 bytes, rate 10-80 events per sec which
&gt; gives 3-20kB per second per node. So roughly 100kB / s for the cluster.
&gt;
&gt; During the test I see activity on the on disk via iostat and it's between
&gt; 20-30 MB/s on each node.
&gt; Even taking into account multiple copies and overhead of Riak (vclocks etc)
&gt; this seems to be pretty high rate.
&gt; I don't see any read activity which suggest withoutFetch() works as
&gt; expected.
&gt; After 2 mins of tests leveldb on each node is 250MB is size, before test
&gt; (11MB)
&gt;
&gt; Am I using it incorrectly?
&gt; Is writing in this way to a single key a good idea or will I be bitten by
&gt; something?
&gt; How to explain high number of MB written to disks?
&gt;
&gt; Regards
&gt; Daniel
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt; --
&gt; View this message in context: 
&gt; http://riak-users.197444.n3.nabble.com/Clarifying-withoutFetch-with-LevelDB-and-tp4033051.html
&gt; Sent from the Riak Users mailing list archive at Nabble.com.
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

