---
title: "Re: OSX Riak 1.4 Internal Server Error on all map reduce jobs"
description: ""
project: community
lastmod: 2013-09-27T07:57:30-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12424"
mailinglist_parent_id: "msg12402"
author_name: "Luke Bakken"
project_section: "mailinglistitem"
sent_date: 2013-09-27T07:57:30-07:00
---


&gt; The query:
&gt; curl -X POST http://localhost:8098/mapred -H 'Content-Type:
&gt; application/json' -d
&gt; '{"inputs":"testfs","query":[{"map":{"language":"javascript","name":"Riak.mapValuesJson","keep":true}}]}'

Since you're using mapValuesJson, the data over which you're iterating
must be valid JSON. Do you have an example (or two) of the data you're
using?

This is the part of the output that I'm interested in - you'll notice
that it's not a valid string representation of JSON data:

{\\"items\\": {\\"one": null, \\"two": null}, \\"status\\": {\\"time\\":
1379469049, \\"size\\": 0}}

Try changing "mapValuesJson" to just "mapValues" and check the output
there. I ran this query and saw the set of test data in my local
cluster:

curl -X POST http://localhost:10018/mapred -H 'Content-Type:
application/json' -d
'{"inputs":"test","query":[{"map":{"language":"javascript","name":"Riak.mapValues","keep":true}}]}'

--
Luke Bakken
CSE
lbak...@basho.com

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

