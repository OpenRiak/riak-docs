---
title: "Re: No of buckets limitation in riak"
description: ""
project: community
lastmod: 2014-02-04T06:39:49-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13580"
mailinglist_parent_id: "msg13579"
author_name: "Luke Bakken"
project_section: "mailinglistitem"
sent_date: 2014-02-04T06:39:49-08:00
---


Satya,

In general, you always want to be querying Riak using a specific key value
to retrieve or update a specific value. Following this guideline, method
one is the correct data design. Please ensure that the default bucket
properties apply to all of these buckets as you do not want to have any
custom properties for such a large number of buckets.

Method two will result in slow performance and most likely an object size
exceeding the recommended 1MB value.

--
Luke Bakken
CSE
lbak...@basho.com


On Tue, Feb 4, 2014 at 4:58 AM, Satya Ranjan  wrote:

&gt; Hi Riak experts,
&gt;
&gt; I am designing a simple message box feature for a web application using
&gt; riak where an user can send messages to other registered users. So each
&gt; user will have a Inbox and Outbox just like an email system.
&gt;
&gt; Also users can search messages in their message box. Here I am providing
&gt; two different data model design. Could you please let me know if it makes
&gt; sense.
&gt;
&gt; 1) Each user will have a separate bucket for their messages. So user u1
&gt; will have a bucket u1\\_messages and u2 will have u2\\_messages. All messages
&gt; for an user will be added to his/her bucket. This will simplify search
&gt; operation as the search operation will only operate on user's bucket.
&gt;
&gt; With this approach there will be lot many buckets in riak. So for 10000
&gt; registered users, there will be 10000 buckets.
&gt;
&gt; So does this approach makes sense ? Is there any limitation or drawback
&gt; when there are too many buckets in riak ?
&gt;
&gt; 2) Common message bucket for all the users. The messages in the bucket
&gt; will be tagged with the user id. So one big bucket for all the messages.
&gt; Search operation will operate on that big bucket.
&gt;
&gt; Please suggest which of the above approach makes sense. I would really
&gt; appreciate any help on this.
&gt;
&gt; Thanks for your help.
&gt;
&gt; Cheers,
&gt; Satya
&gt;
&gt;
&gt;
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

