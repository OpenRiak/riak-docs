---
title: "Re: Riak Yokozuna and a schema"
description: ""
project: community
lastmod: 2013-11-15T09:29:42-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12993"
mailinglist_parent_id: "msg12992"
author_name: "Ryan Zezeski"
project_section: "mailinglistitem"
sent_date: 2013-11-15T09:29:42-08:00
---


Leif,

I quickly wrote up a gist to show how you can use a custom schema with your
index and associate it with multiple buckets. Be warned that the current
version of Riak/Yokozuna uses bucket properties for storing the index
association. These are stored in the ring and have a known limitation. The
next version (0.12.0) will use a much more efficient mechanism for storing
association but will also change some of the steps outlined in that gist.
The Yokozuna API is still a bit of a moving target leading up to the Riak
2.0 Final release.

https://gist.github.com/rzezeski/7488192

-Z


On Fri, Nov 15, 2013 at 7:11 AM, Leif Gensert  wrote:

&gt; Hello everyone,
&gt;
&gt; I am currently evaluating Riak for a project of ours.
&gt;
&gt; Here are the requirements in a nutshell:
&gt;
&gt; - We get various customer data as json with different field names (let’s
&gt; just pretend that we have books).
&gt; - We need to store these data as it comes (JSON with the original field
&gt; names).
&gt; - We need to have a consistent search index with fields specified by us.
&gt;
&gt; Example:
&gt;
&gt; Customer A:
&gt;
&gt; {
&gt; book\\_title: ‘Alice in wonderland’,
&gt; num\\_of\\_pages: 314,
&gt; }
&gt;
&gt; Customer B:
&gt;
&gt; {
&gt; book\\_name: ’Sherlock Holmes in the Hound of the Baskervilles’,
&gt; number\\_of\\_pages: 164,
&gt; }
&gt;
&gt; So far so good.
&gt;
&gt; This data need to be stored for example like this:
&gt;
&gt; {
&gt; title: ‘Alice in wonderland’,
&gt; pages: 314,
&gt; }
&gt; {
&gt; title: ’Sherlock Holmes in the Hound of the Baskervilles’,
&gt; pages: 164,
&gt; }
&gt;
&gt; My thought was this:
&gt;
&gt; - Store data from each customer to a different bucket.
&gt; - Index the data from the document to Yokozuna (after all, Solr has a
&gt; schema so we could utilize that)
&gt;
&gt; My question concerning this would be:
&gt;
&gt; What’s the best way to do this?
&gt;
&gt; So far the only tutorials I found concerning Yokozuna index the documents
&gt; without a schema.
&gt;
&gt; best
&gt; Leif
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

