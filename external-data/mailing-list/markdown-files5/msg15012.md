---
title: "Re: Interesting issue with Ruby Riak client not finding keys in a	cluster configuration"
description: ""
project: community
lastmod: 2014-10-10T16:05:41-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15012"
mailinglist_parent_id: "msg14620"
author_name: "Luke Bakken"
project_section: "mailinglistitem"
sent_date: 2014-10-10T16:05:41-07:00
---


Hi Chaim,

What is the output of "riak-admin member-status" in this cluster?

Thanks -
--
Luke Bakken
Engineer / CSE
lbak...@basho.com


On Thu, Aug 7, 2014 at 12:30 AM, Chaim Solomon
 wrote:
&gt; Hi,
&gt;
&gt; I just found an interesting issue (debugging mystery):
&gt; On the development node I connect through a SSH tunnel to one node of the
&gt; cluster
&gt;
&gt; riak\\_client = Riak::Client.new(http\\_port: 9198, pb\\_port: 9187, protocol:
&gt; 'pbc')
&gt;
&gt; and on the staging server, I had the client set up for using a list of nodes
&gt; to allow automatic failover if needed:
&gt;
&gt; riak\\_client = Riak::Client.new(:nodes =&gt; [
&gt; {pb\\_port: 8087, host: 'ip\\_of\\_node1', protocol: 'pbc'},
&gt; {pb\\_port: 8087, host: 'ip\\_of\\_node2', protocol: 'pbc'},
&gt; {pb\\_port: 8087, host: 'ip\\_of\\_node3', protocol: 'pbc'}])
&gt;
&gt; But in this configuration some keys that are available when I connect with
&gt; the "simple" configuration are just not found. I changed it on the same
&gt; server to use only one node
&gt; riak\\_client = Riak::Client.new(pb\\_port: 8087, host: 'ip\\_of\\_node1', protocol:
&gt; 'pbc')
&gt;
&gt; and the key is found. I tried it with the other riak nodes and for each of
&gt; them it workes.
&gt;
&gt; What is going on?
&gt;
&gt; riak-client (1.4.4.1)
&gt;
&gt; Chaim Solomon
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

