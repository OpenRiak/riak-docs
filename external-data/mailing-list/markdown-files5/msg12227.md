---
title: "Re: Should content-type not be required?"
description: ""
project: community
lastmod: 2013-09-10T15:32:17-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg12227"
mailinglist_parent_id: "msg12226"
author_name: "Vincenzo Vitale"
project_section: "mailinglistitem"
sent_date: 2013-09-10T15:32:17-07:00
---


Hi Sam,
thanks for the fast reply.

In my company we normally use your third suggestion and indeed it's a
robust strategy.

At the moment we are relying on a riak client based on spray (
https://github.com/agemooij/riak-scala-client) so even if we set the
Content-Type - when the body is empty - it doesn't get to the final request
being dispatched.

Our workaround is to have a content body equal to the one byte carriage
return.
It's not a big deal...

Writing to the mailing list was mainly because curious to know your
thoughts about this :)


Have a good day,
V.


On Wed, Sep 11, 2013 at 12:03 AM, Sam Elliott  wrote:

&gt; The content-type is important for Riak KV: Various clients will use it to
&gt; identify the difference between a response where the whole body is the key,
&gt; or a response that contains siblings (if you have allow\\_mult=true).
&gt;
&gt; I suggest finding or creating a content type, so that this is clearer to
&gt; your app. It will also allow you to version your objects better. Here are a
&gt; few suggestions (of course replace the text between the &lt; &gt;):
&gt; - application/octet-stream - this is usually used for binary data, and is
&gt; the easiest thing to set the content-type to.
&gt; - application/vnd.. - a
&gt; vendor-specific type, which you can create yourself
&gt; - application/vnd...v
&gt; - another vendor-specific type, which supports versioning.
&gt;
&gt; You don't have to use the information in your final app, but it is used by
&gt; riak and riak clients, so that's why we require it.
&gt;
&gt; --
&gt; Sam Elliott
&gt; Engineer
&gt; sam.elli...@basho.com
&gt; --
&gt;
&gt;
&gt; On Tuesday, 10 September 2013 at 5:03PM, Vincenzo Vitale wrote:
&gt;
&gt; &gt; Suppose I want to just store keys in a bucket without any body, this
&gt; make sense in scenarios where the key completely identify the entity. Is it
&gt; possible to use the riak http api without including the content-type header?
&gt; &gt; Looking at the http specifications, content–type is not mandatory or
&gt; suggested when the body is empty:
&gt; &gt; http://www.w3.org/Protocols/rfc2616/rfc2616-sec7.html#sec7.2.1
&gt; &gt; and it's probably a good argument to say that if the entity message is
&gt; empty then the content type doesn't really make sense.
&gt; &gt; Personally I think that just the existence of an http entity - body or
&gt; not body – is sufficient to justify a "type"; it's unfortunate that any
&gt; other higher type (entity type maybe?) - decoupled from what is defined as
&gt; content - exist in the spec.
&gt; &gt; Framework like spray are quite strict about this, not setting any
&gt; content type when the content is empty:
&gt; &gt;
&gt; https://github.com/spray/spray/blob/master/spray-http/src/main/scala/spray/http/HttpEntity.scala#L74
&gt; &gt; how to deal with such situation? Adding a fake content because of this
&gt; data store constraint doesn't seems right.
&gt; &gt;
&gt; &gt;
&gt; &gt; Thanks,
&gt; &gt; Vincenzo.
&gt; &gt;
&gt; &gt; --
&gt; &gt; If your e-mail inbox is out of control, check out
&gt; http://sanebox.com/t/mmzve. I love it.
&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com (mailto:riak-users@lists.basho.com)
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
&gt;
&gt;


-- 
If your e-mail inbox is out of control, check out http://sanebox.com/t/mmzve.
I love it.
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

