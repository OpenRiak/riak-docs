---
title: "Map Reduce with Data Types"
description: ""
project: community
lastmod: 2014-12-10T17:36:34-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg15347"
author_name: "Kyle Patterson"
project_section: "mailinglistitem"
sent_date: 2014-12-10T17:36:34-08:00
---


I can't get map reduce to work with the new data types.
I have a bucket type as defined below:
riak-admin bucket-type create map '{"props":{"datatype":"map"}}

There seems to be a problem going from the input phase to the map/reduce.
I'm getting notfound errors for objects that exist.

While the normal list of input tuples might look like [{&lt;&lt;"bucket"&gt;&gt;,
&lt;&lt;"key"&gt;&gt;}],
for data-type lookups I'm guessing (based on the src and how bucket/key
pairs for data types are defined elsewhere) should look like:
[{{&lt;&lt;"type"&gt;&gt;, &lt;&lt;"bucket"&gt;&gt;}, &lt;&lt;"key"&gt;&gt;}]?


mapred(Pid, [{{&lt;&lt;"map"&gt;&gt;, &lt;&lt;"articles"&gt;&gt;},
&lt;&lt;"7bdbd2da-1463-46f8-b750-6f813700b28b"&gt;&gt;}], [{map, {modfun,
'riak\\_kv\\_mapreduce', 'map\\_object\\_value'}, none, true}]).

Anyone have any insight or have a working example of mapred with data types?

Thanks!

-- 
Kyle Patterson
Full Stack Maniac
https://sqor.com/users/kisp
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

