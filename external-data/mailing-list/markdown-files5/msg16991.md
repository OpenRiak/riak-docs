---
title: "Re: Undiagnosed High FSM Time"
description: ""
project: community
lastmod: 2016-01-27T01:24:12-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16991"
mailinglist_parent_id: "msg16990"
author_name: "Richard Jonas"
project_section: "mailinglistitem"
sent_date: 2016-01-27T01:24:12-08:00
---


You may want to monitor
- node\\_put\\_fsm\\_rejected (and get, too) to if overload protection rejected
put or get requests
- node\\_put\\_fsm\\_active, node\\_put\\_fsm\\_active\\_60s (to see how many active put
requests are being served now and in the last minute) there is metrics for
get, too. A spike of those metrics can show you a hint that something
unusual happens.

A big object can cause a lot of put fsms, since big object can cause
head-of-line-blocking inside the cluster. So the problem is not with
serving the get/put for the big objects, but the puts/gets coming after
that. Like during driving pushing a hard brake won't cause you traffic jam,
but the others behind you.

On Tue, Jan 26, 2016 at 10:43 PM, Alex Wolfe 
wrote:

&gt; Thanks for your reply.
&gt;
&gt; We are. We sort of expected an anomaly in the object size, but there was
&gt; none. We found the root cause. It was a large number of additions to a
&gt; single set. It’s not clear to me which metric reveals that problem, but it
&gt; appears as though object size doesn’t.
&gt;
&gt; Alex
&gt;
&gt;
&gt; &gt; On Jan 26, 2016, at 3:40 PM, Luke Bakken  wrote:
&gt; &gt;
&gt; &gt; Hi Alex -
&gt; &gt;
&gt; &gt; Are you monitoring any of Riak's statistics? Specifically object size
&gt; &gt; and sibling count, though all of the stats are useful.
&gt; &gt;
&gt; &gt; --
&gt; &gt; Luke Bakken
&gt; &gt; Engineer
&gt; &gt; lbak...@basho.com
&gt; &gt;
&gt; &gt; On Tue, Jan 26, 2016 at 11:40 AM, Alex Wolfe 
&gt; wrote:
&gt; &gt;&gt; We have a 5 node Riak cluster running 2.1.1. This morning FSM Time
&gt; (99th percentile) went way up. We couldn't find any clear signs of trouble
&gt; with the cluster and ultimately chose to move the data files and restart
&gt; the nodes. Once we started with an empty DB, the FSM Time normalized. But
&gt; now it's headed back up again. We're stumped on how to trouble shoot this
&gt; issue. Any suggestions?
&gt; &gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt;&gt; riak-users mailing list
&gt; &gt;&gt; riak-users@lists.basho.com
&gt; &gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;



-- 
Richard Jonas
Erlang Solutions Hungary Kft

Address:
 Riverpark Office K.32
 Közraktár street 32. 3/1.
 1093 Budapest
 Hungary
Phone/fax:
 +36-1-7000-654
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

