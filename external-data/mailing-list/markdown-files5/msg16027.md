---
title: "Re: riak 2.0 + riak-cs 2.0 trouble"
description: ""
project: community
lastmod: 2015-04-17T05:32:40-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16027"
mailinglist_parent_id: "msg16026"
author_name: "John Daily"
project_section: "mailinglistitem"
sent_date: 2015-04-17T05:32:40-07:00
---


Thanks, that helps. You’re right that the documentation is a bit buggy, or at 
least incomplete.

The problem is that the example provided in the docs is just a snippet. To make 
a fully-functional advanced.config file requires a bit more syntactical 
structure.

You’ll need to wrap what you provided in an Erlang array, with square brackets 
and a period terminating it.

See http://pastebin.com/90gh6amg.

-John

On Apr 17, 2015, at 8:24 AM, Stanislav Vlasov  wrote:

&gt; 2015-04-17 17:04 GMT+05:00 John Daily :
&gt;&gt; Unfortunately it’s very easy to introduce syntax errors into Erlang 
&gt;&gt; configuration files (and tricky to diagnose them without Erlang experience), 
&gt;&gt; which is why we’re moving toward the newer sysctl-style files like riak.conf.
&gt;&gt; 
&gt;&gt; The example in the documentation looks ok; can we see a copy of your 
&gt;&gt; advanced.config file? Please redact any sensitive information, and I’d 
&gt;&gt; suggest Pastebin or a GitHub gist.
&gt; 
&gt; It was copied from site by cut-n-paste, no any additions:
&gt; http://pastebin.com/Hyv3tvMS
&gt; 
&gt; Last comma in line before second '%%' removed by me.
&gt; 
&gt;&gt; -John
&gt;&gt; 
&gt;&gt; On Apr 17, 2015, at 7:57 AM, Stanislav Vlasov  
&gt;&gt; wrote:
&gt;&gt; 
&gt;&gt;&gt; I have troubles setting up a test riak node for riak-cs. Here's how to
&gt;&gt;&gt; reproduce my problem:
&gt;&gt;&gt; 
&gt;&gt;&gt; 1) install on Debian 7 riak 2.0.5 and riak 2.0.0 from apt repository
&gt;&gt;&gt; as in 
&gt;&gt;&gt; http://docs.basho.com/riak/latest/ops/building/installing/debian-ubuntu/
&gt;&gt;&gt; and 
&gt;&gt;&gt; http://docs.basho.com/riakcs/latest/cookbooks/installing/Installing-Riak-CS/
&gt;&gt;&gt; 2) create advanced.config in /etc/riak as in
&gt;&gt;&gt; http://docs.basho.com/riakcs/latest/cookbooks/configuration/Configuring-Riak/#Setting-up-the-Proper-Riak-Backend
&gt;&gt;&gt; 
&gt;&gt;&gt; After that I get an error in advanced.config
&gt;&gt;&gt; 
&gt;&gt;&gt; last lines of 'riak config generate -l debug':
&gt;&gt;&gt; 10:54:47.488 [info] /etc/riak/advanced.config detected, overlaying proplists
&gt;&gt;&gt; 10:54:47.488 [error] Error parsing /etc/riak/advanced.config: 17:
&gt;&gt;&gt; syntax error before: ']'
&gt;&gt;&gt; 
&gt;&gt;&gt; If i remove last comma in advanced.config, I get another error:
&gt;&gt;&gt; 
&gt;&gt;&gt; 10:58:21.398 [info] /etc/riak/advanced.config detected, overlaying proplists
&gt;&gt;&gt; 10:58:21.399 [error] Error parsing /etc/riak/advanced.config: 17:
&gt;&gt;&gt; syntax error before:
&gt;&gt;&gt; 
&gt;&gt;&gt; I think, it is a bug either in documentation or in config generator
&gt;&gt;&gt; 
&gt;&gt;&gt; --
&gt;&gt;&gt; Stanislav
&gt;&gt;&gt; 
&gt;&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt; 
&gt; 
&gt; 
&gt; 
&gt; -- 
&gt; Stanislav


\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

