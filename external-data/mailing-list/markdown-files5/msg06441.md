---
title: "Re: error compiling cpp driver for riak"
description: ""
project: community
lastmod: 2012-01-26T14:28:38-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06441"
mailinglist_parent_id: "msg06440"
author_name: "Andres Jaan Tack"
project_section: "mailinglistitem"
sent_date: 2012-01-26T14:28:38-08:00
---


Another thought, though I don't have gcc4.5 handy just now to verify:

The errors in message.hxx may have come from a rearrangement of headers in
the gcc4.5 C++0x implementation. Try adding #include  to the
top of message.hxx. That ought to get rid of a few of these.

Again, I'll try to give it a shot tomorrow (I'm in Europe); if you're able
to massage it in line before me, definitely send me a pull request. :)

--
Andres

2012/1/27 Andres Jaan Tack 

&gt; (from the correct e-mail address…)
&gt;
&gt; Hi there.
&gt;
&gt;
&gt; Just as a starting note, Riak-Cpp is still a work in progress, with no
&gt; versioned release to date. Thus, I haven't gotten to the point of testing
&gt; many generations of compilers, yet. In the next month or so, I should get
&gt; sibling resolution finished, and then this will make it on my radar.
&gt;
&gt; That said, I've been using MSVC v10 and GCC 4.4 for development, so I'm a
&gt; bit surprised that GCC 4.5 isn't able to handle it. The first error (about
&gt; std::error\\_code) suggests that you're not getting C++11/C++0x support when
&gt; you compile.
&gt;
&gt; Can you verify your GCC version when compiling? SCons has a nasty habit of
&gt; resetting environment variables where it shouldn't, so if gcc4.3 is
&gt; installed in /usr/local/bin, it may be defaulting to that.
&gt;
&gt; If that reveals nothing, I'll try o reproduce and fix on my system
&gt; tomorrow.
&gt;
&gt; Lähetetty iPhonesta
&gt;
&gt; 2012/1/26 David Montgomery 
&gt;
&gt;&gt; I tried to compile the cpp driver code on gitbub and the below are the
&gt;&gt; erros.
&gt;&gt;
&gt;&gt; I am on Ubuntu 64 using gcc 4.5. At the prompt I typed &gt;scons
&gt;&gt;
&gt;&gt; So...what do I do?
&gt;&gt;
&gt;&gt; Thanks
&gt;&gt;
&gt;&gt;
&gt;&gt; test@test:~/Downloads/riak-cpp$ scons
&gt;&gt; scons: Reading SConscript files ...
&gt;&gt; scons: done reading SConscript files.
&gt;&gt; scons: Building targets ...
&gt;&gt; protoc build/riak/riakclient.proto --cpp\\_out=.
&gt;&gt; (compile) build/riak/client.cxx
&gt;&gt; In file included from ./riak/client.hxx:2:0,
&gt;&gt; from build/riak/client.cxx:1:
&gt;&gt; ./riak/message.hxx:29:28: error: ‘error\\_code’ is not a member of ‘std’
&gt;&gt; ./riak/message.hxx:29:76: error: functional cast expression list
&gt;&gt; treated as compound expression
&gt;&gt; ./riak/message.hxx:29:77: error: template argument 1 is invalid
&gt;&gt; ./riak/message.hxx:29:86: error: invalid type in declaration before ‘;’
&gt;&gt; token
&gt;&gt; build/riak/client.cxx: In member function ‘void
&gt;&gt; riak::client::delete\\_object(const riak::key&, const riak::key&,
&gt;&gt; riak::delete\\_response\\_handler)’:
&gt;&gt; build/riak/client.cxx:95:105: error: cannot convert ‘std::\\_Bind&gt; (\\*(std::function&gt; std::basic\\_string&, const std::basic\\_string&)&gt;,
&gt;&gt; std::basic\\_string, std::basic\\_string,
&gt;&gt; std::\\_Placeholder&lt;1&gt;, std::\\_Placeholder&lt;2&gt;,
&gt;&gt; std::\\_Placeholder&lt;3&gt;))(std::function&gt; const std::basic\\_string&, const std::basic\\_string&)&gt;,
&gt;&gt; const std::basic\\_string&, const std::basic\\_string&, const
&gt;&gt; std::error\\_code&, long unsigned int, const std::basic\\_string&)&gt;’
&gt;&gt; to ‘riak::message::handler’ in initialization
&gt;&gt; build/riak/client.cxx: In member function ‘void
&gt;&gt; riak::client::get\\_object(const riak::key&, const riak::key&,
&gt;&gt; riak::get\\_response\\_handler)’:
&gt;&gt; build/riak/client.cxx:171:70: error: cannot convert ‘std::\\_Bind&gt; (\\*(std::basic\\_string, std::basic\\_string,
&gt;&gt; std::function(const
&gt;&gt; google::protobuf::RepeatedPtrField&)&gt;,
&gt;&gt; riak::::delivery\\_arguments, std::function&gt; std::error\\_code&, std::shared\\_ptr&,
&gt;&gt; std::function&,
&gt;&gt; std::function&)&gt;&)&gt;,
&gt;&gt; std::\\_Placeholder&lt;1&gt;, std::\\_Placeholder&lt;2&gt;,
&gt;&gt; std::\\_Placeholder&lt;3&gt;))(const std::basic\\_string&, const
&gt;&gt; std::basic\\_string&,
&gt;&gt; std::function(const
&gt;&gt; google::protobuf::RepeatedPtrField&)&gt;&,
&gt;&gt; riak::::delivery\\_arguments&, std::function&gt; std::error\\_code&, std::shared\\_ptr&,
&gt;&gt; std::function&,
&gt;&gt; std::function&)&gt;&)&gt;, const
&gt;&gt; std::error\\_code&, long unsigned int, const std::basic\\_string&)&gt;’
&gt;&gt; to ‘riak::message::handler’ in initialization
&gt;&gt; build/riak/client.cxx: In function ‘riak::message::handler
&gt;&gt;
&gt;&gt; riak::::make\\_resolution\\_response\\_handler(std::shared\\_ptr&,
&gt;&gt; riak::::resolution\\_response\\_handler\\_for\\_object)’:
&gt;&gt; build/riak/client.cxx:246:63: error: cannot convert
&gt;&gt; ‘std::\\_Bind&, const
&gt;&gt; std::error\\_code&, long unsigned int, const
&gt;&gt; std::basic\\_string&)&gt;(std::shared\\_ptr,
&gt;&gt; std::\\_Placeholder&lt;1&gt;, std::\\_Placeholder&lt;2&gt;, std::\\_Placeholder&lt;3&gt;)&gt;’ to
&gt;&gt; ‘riak::message::handler’ in return
&gt;&gt; build/riak/client.cxx: In function ‘void
&gt;&gt; riak::::put\\_cold(const riak::key&, const riak::key&, const
&gt;&gt; std::shared\\_ptr&, riak::::delivery\\_arguments&,
&gt;&gt; riak::put\\_response\\_handler&)’:
&gt;&gt; build/riak/client.cxx:350:107: error: cannot convert ‘std::\\_Bind&gt; (\\*(std::function, std::\\_Placeholder&lt;1&gt;,
&gt;&gt; std::\\_Placeholder&lt;2&gt;, std::\\_Placeholder&lt;3&gt;))(std::function&gt; std::error\\_code&)&gt;, const std::error\\_code&, long unsigned int, const
&gt;&gt; std::basic\\_string&)&gt;’ to ‘riak::message::handler’ for argument
&gt;&gt; ‘3’ to ‘void riak::::send\\_put\\_request(RpbPutReq&,
&gt;&gt; riak::::delivery\\_arguments&, riak::message::handler)’
&gt;&gt; scons: \\*\\*\\* [build/riak/client.o] Error 1
&gt;&gt; scons: building terminated because of errors.
&gt;&gt;
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

