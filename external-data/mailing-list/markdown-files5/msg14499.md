---
title: "RE: Timeout when accessing a key in a strongly consistent bucket.	Please help."
description: ""
project: community
lastmod: 2014-07-15T14:36:13-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14499"
mailinglist_parent_id: "msg14394"
author_name: "Zsolt Laky"
project_section: "mailinglistitem"
sent_date: 2014-07-15T14:36:13-07:00
---


Hello there,



The problem was caused by a wrong erlang installation. Most probable cause is 
the SSL part on OSX.



Fetched the dmg file from erlang solutions’ webpage and installed it. Riak then 
compiled perfectly from source.



Zsolt



Feladó: Zsolt Laky [mailto:zsolt.l...@lamardan.com]
Küldve: Saturday, June 28, 2014 1:13 PM
Címzett: 'Riak Users Mailing List'
Tárgy: Timeout when accessing a key in a strongly consistent bucket. Please 
help.



Hello there,



Installed new 2.0beta, fired up 1 node. Config and status is attached. Strongly 
consistent bucket type seems to have timeouts.



Host is Mac OSX. Also tried on ubuntu with virtualbox. Same behavior.



Commands are bold, important replies are underlined for readability.



Please help.



Thanks and kind regards

Zsolt



bash-3.2$ ./riak-admin member-status

================================= Membership ==================================

Status Ring Pending Node

-------------------------------------------------------------------------------

valid 100.0% -- 'riak@127.0.0.1'

-------------------------------------------------------------------------------

Valid:1 / Leaving:0 / Exiting:0 / Joining:0 / Down:0

bash-3.2$ ./riak-admin bucket-type list

default (active)

strong (active)

bash-3.2$ ./riak-admin bucket-type status strong

strong is active



young\\_vclock: 20

w: quorum

small\\_vclock: 50

rw: quorum

r: quorum

pw: 0

precommit: []

pr: 0

postcommit: []

old\\_vclock: 86400

notfound\\_ok: true

n\\_val: 3

linkfun: {modfun,riak\\_kv\\_wm\\_link\\_walker,mapreduce\\_linkfun}

last\\_write\\_wins: false

dw: quorum

dvv\\_enabled: true

chash\\_keyfun: {riak\\_core\\_util,chash\\_std\\_keyfun}

big\\_vclock: 50

basic\\_quorum: false

allow\\_mult: true

consistent: true

active: true

claimant: 'riak@127.0.0.1'

bash-3.2$ curl -v -XPOST -H 'Content-Type: text/plain' -d 'haho' 
http://127.0.0.1:8098/types/default/buckets/test1/keys/user1?returnbody=true

\\* About to connect() to 127.0.0.1 port 8098 (#0)

\\* Trying 127.0.0.1...

\\* Adding handle: conn: 0x7f95d3004400

\\* Adding handle: send: 0

\\* Adding handle: recv: 0

\\* Curl\\_addHandleToPipeline: length: 1

\\* - Conn 0 (0x7f95d3004400) send\\_pipe: 1, recv\\_pipe: 0

\\* Connected to 127.0.0.1 (127.0.0.1) port 8098 (#0)

&gt; POST /types/default/buckets/test1/keys/user1?returnbody=true HTTP/1.1

&gt; User-Agent: curl/7.30.0

&gt; Host: 127.0.0.1:8098

&gt; Accept: \\*/\\*

&gt; Content-Type: text/plain

&gt; Content-Length: 4

&gt;

\\* upload completely sent off: 4 out of 4 bytes

&lt; HTTP/1.1 200 OK

&lt; X-Riak-Vclock: a85hYGBgzGDKBVIcypz/fgavmz0/gymRKY+VYaak8lm+LAA=

&lt; Vary: Accept-Encoding

\\* Server MochiWeb/1.1 WebMachine/1.10.5 (jokes are better explained) is not 
blacklisted

&lt; Server: MochiWeb/1.1 WebMachine/1.10.5 (jokes are better explained)

&lt; Link: ; rel="up"

&lt; Last-Modified: Sat, 28 Jun 2014 10:48:57 GMT

&lt; ETag: "4Cd4ejclOJPXjES2m3nxPi"

&lt; Date: Sat, 28 Jun 2014 10:48:57 GMT

&lt; Content-Type: text/plain

&lt; Content-Length: 4

&lt;

\\* Connection #0 to host 127.0.0.1 left intact

hahobash-3.2$

bash-3.2$ curl -v -XPOST -H 'Content-Type: text/plain' -d 'haho' 
http://127.0.0.1:8098/types/strong/buckets/test1/keys/user1

\\* About to connect() to 127.0.0.1 port 8098 (#0)

\\* Trying 127.0.0.1...

\\* Adding handle: conn: 0x7fbee3804400

\\* Adding handle: send: 0

\\* Adding handle: recv: 0

\\* Curl\\_addHandleToPipeline: length: 1

\\* - Conn 0 (0x7fbee3804400) send\\_pipe: 1, recv\\_pipe: 0

\\* Connected to 127.0.0.1 (127.0.0.1) port 8098 (#0)

&gt; POST /types/strong/buckets/test1/keys/user1 HTTP/1.1

&gt; User-Agent: curl/7.30.0

&gt; Host: 127.0.0.1:8098

&gt; Accept: \\*/\\*

&gt; Content-Type: text/plain

&gt; Content-Length: 4

&gt;

\\* upload completely sent off: 4 out of 4 bytes

&lt; HTTP/1.1 503 Service Unavailable

&lt; Vary: Accept-Encoding

\\* Server MochiWeb/1.1 WebMachine/1.10.5 (jokes are better explained) is not 
blacklisted

&lt; Server: MochiWeb/1.1 WebMachine/1.10.5 (jokes are better explained)

&lt; Date: Sat, 28 Jun 2014 10:49:25 GMT

&lt; Content-Type: text/plain

&lt; Content-Length: 18

&lt;

request timed out

\\* Connection #0 to host 127.0.0.1 left intact

bash-3.2$ curl -v 
http://127.0.0.1:8098/types/default/buckets/test1/keys/?keys=true

\\* About to connect() to 127.0.0.1 port 8098 (#0)

\\* Trying 127.0.0.1...

\\* Adding handle: conn: 0x7f8df1801800

\\* Adding handle: send: 0

\\* Adding handle: recv: 0

\\* Curl\\_addHandleToPipeline: length: 1

\\* - Conn 0 (0x7f8df1801800) send\\_pipe: 1, recv\\_pipe: 0

\\* Connected to 127.0.0.1 (127.0.0.1) port 8098 (#0)

&gt; GET /types/default/buckets/test1/keys/?keys=true HTTP/1.1

&gt; User-Agent: curl/7.30.0

&gt; Host: 127.0.0.1:8098

&gt; Accept: \\*/\\*

&gt;

&lt; HTTP/1.1 200 OK

&lt; Vary: Accept-Encoding

\\* Server MochiWeb/1.1 WebMachine/1.10.5 (jokes are better explained) is not 
blacklisted

&lt; Server: MochiWeb/1.1 WebMachine/1.10.5 (jokes are better explained)

&lt; Date: Sat, 28 Jun 2014 11:03:44 GMT

&lt; Content-Type: application/json

&lt; Content-Length: 18

&lt;

\\* Connection #0 to host 127.0.0.1 left intact

{"keys":["user1"]}bash-3.2$ curl -v 
http://127.0.0.1:8098/types/strong/buckets/test1/keys/?keys=true

\\* About to connect() to 127.0.0.1 port 8098 (#0)

\\* Trying 127.0.0.1...

\\* Adding handle: conn: 0x7fa1b0819400

\\* Adding handle: send: 0

\\* Adding handle: recv: 0

\\* Curl\\_addHandleToPipeline: length: 1

\\* - Conn 0 (0x7fa1b0819400) send\\_pipe: 1, recv\\_pipe: 0

\\* Connected to 127.0.0.1 (127.0.0.1) port 8098 (#0)

&gt; GET /types/strong/buckets/test1/keys/?keys=true HTTP/1.1

&gt; User-Agent: curl/7.30.0

&gt; Host: 127.0.0.1:8098

&gt; Accept: \\*/\\*

&gt;

&lt; HTTP/1.1 200 OK

&lt; Vary: Accept-Encoding

\\* Server MochiWeb/1.1 WebMachine/1.10.5 (jokes are better explained) is not 
blacklisted

&lt; Server: MochiWeb/1.1 WebMachine/1.10.5 (jokes are better explained)

&lt; Date: Sat, 28 Jun 2014 11:03:58 GMT

&lt; Content-Type: application/json

&lt; Content-Length: 11

&lt;

\\* Connection #0 to host 127.0.0.1 left intact

{"keys":[]}bash-3.2$

bash-3.2$



---
This email is free from viruses and malware because avast! Antivirus protection 
is active.
http://www.avast.com
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

