---
title: "Re: Cluster security"
description: ""
project: community
lastmod: 2014-06-30T03:10:32-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg14419"
mailinglist_parent_id: "msg14418"
author_name: "Sargun Dhillon"
project_section: "mailinglistitem"
sent_date: 2014-06-30T03:10:32-07:00
---


You really should have some level of IP filtering to prevent people
from connecting directly to your BEAM / EPM instances, but even if
they do have the ability to make a TCP/IP connection, they have to
know the distributed Erlang cookie in order to connect. More on this:
http://www.erlang.org/doc/reference\\_manual/distributed.html - See,
section 13.7. You can actually use inet\\_tls for communication between
your VMs to ensure authenticity of clients, as well as
confidentiality.

On Mon, Jun 30, 2014 at 2:47 AM, Alex De la rosa
 wrote:
&gt; Hi there,
&gt;
&gt; Imaging the following IP configuration for Riak 2.0:
&gt;
&gt; # /etc/riak/riak.conf
&gt;
&gt; nodename = riak@111.222.333.1
&gt; listener.http.internal = 127.0.0.1:8098
&gt; listener.protobuf.internal = 127.0.0.1:8087
&gt; listener.https.internal = 127.0.0.1:8098
&gt;
&gt; I put the server's real IP in the nodename so they can join/communicate with
&gt; each other but then I limit any HTTP/PB communication to the localhost so
&gt; nobody can mess with the node from outside (we assume I have an own Python
&gt; API in each node doing the security and being a middleman between the
&gt; cluster and the webapp).
&gt;
&gt; But how can I avoid 3rd-parties to just build a Riak server themselves and
&gt; join my cluster without permission... they can freely join like this:
&gt;
&gt; # riak-admin join riak@111.222.333.1
&gt;
&gt; Of course, they will have to find out the IP address, but if they do, they
&gt; can simply put a server themselves in the cluster and do whatever they want
&gt; with it.
&gt;
&gt; Maybe a solution is creating subdomains on my domain just for the riak-ring
&gt; in a way that is extremely hard to find out to be able to do the JOIN,
&gt; something like: nodename = r...@rk001blahblahblah.mydomain.com
&gt;
&gt; Is this approach reasonable? Am I doing/thinking something very wrong? What
&gt; would be the suggested way to prevent undesired JOINs?
&gt;
&gt; Cheers,
&gt; Alex
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

