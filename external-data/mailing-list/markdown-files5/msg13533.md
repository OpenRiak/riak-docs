---
title: "Re: Basho Product Alert: Active Anti-Entropy in Riak 1.4.4 - 1.4.7"
description: ""
project: community
lastmod: 2014-01-29T09:52:08-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13533"
mailinglist_parent_id: "msg13531"
author_name: "Dave Martorana"
project_section: "mailinglistitem"
sent_date: 2014-01-29T09:52:08-08:00
---


While nowhere near as important, does this bug also exist in the current
2.0 pre-releases?

Thanks,

Dave


On Wed, Jan 29, 2014 at 11:38 AM, Tom Santero  wrote:

&gt; Hello,
&gt;
&gt; Basho Engineering has uncovered a bug in the Active Anti-Entropy (AAE)
&gt; code in Riak versions 1.4.4 through 1.4.7, inclusive. This code incorrectly
&gt; generates hashes resulting in AAE failing to repair data. Data will
&gt; continue to be repaired via the standard read repair mechanisms. As the
&gt; incorrect hash generation will utilize system resources with no useful
&gt; result, our official recommendation is that you should not use AAE until a
&gt; fix is released in 1.4.8.
&gt;
&gt; To disable AAE on a running cluster, perform a `riak attach`, then:
&gt;
&gt; a.
&gt; rpc:multicall(riak\\_kv\\_entropy\\_manager, disable, []).
&gt; rpc:multicall(riak\\_kv\\_entropy\\_manager, cancel\\_exchanges, []).
&gt; z.
&gt;
&gt;
&gt; then Press Ctrl-c a, then Enter to quit.
&gt;
&gt; Next, you'll want to disable AAE on restart. Adjust your the app.config
&gt; file on all nodes in the cluster in the following manner:
&gt;
&gt; % Before
&gt; {anti\\_entropy, {on, []}}
&gt;
&gt; % After
&gt; {anti\\_entropy, {off, []}}
&gt;
&gt;
&gt; Once again, this issue only affects Riak versions 1.4.4, 1.4.5, 1.4.6, and
&gt; 1.4.7. There is no need to make changes to your cluster due to this bug if
&gt; you are not running one of those versions, or if you are not using AAE. A
&gt; forthcoming Riak 1.4.8 release will address this problem and be released in
&gt; the next few days.
&gt;
&gt;
&gt; Thank you,
&gt; Basho
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

