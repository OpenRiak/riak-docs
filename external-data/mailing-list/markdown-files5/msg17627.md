---
title: "Re: Spaces in the search string"
description: ""
project: community
lastmod: 2016-09-07T02:13:00-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17627"
mailinglist_parent_id: "msg17622"
author_name: "sean mcevoy"
project_section: "mailinglistitem"
sent_date: 2016-09-07T02:13:00-07:00
---


Hi Jason,

Thanks for the kick, I just needed to look closer!
Yes, had tried escaping but one of my utility functions for dynamically
building the search string had been stripping it out again. D'oh!

Curiously, just escaping the space doesn't work as in the example in the
stackoverflow post.
Putting the search term in an inner string and escaping its quotes both
feels more natural and does work so I'm going with something more like:

409&gt;
409&gt;
409&gt; riakc\\_pb\\_socket:search(Pid, &lt;&lt;"test\\_index"&gt;&gt;, &lt;&lt;"name\\_s:\\"we rt\\" AND
age\\_i:0"&gt;&gt;, []).
{ok,{search\\_results,[],0.0,0}}
410&gt;
410&gt;
410&gt; riakc\\_pb\\_socket:search(Pid, &lt;&lt;"test\\_index"&gt;&gt;, &lt;&lt;"name\\_s:we\\ rt AND
age\\_i:0"&gt;&gt;, []).
{error,&lt;&lt;"Query unsuccessful check the logs."&gt;&gt;}
411&gt;
411&gt;

Cheers,
//Sean.


On Tue, Sep 6, 2016 at 2:48 PM, Jason Voegele  wrote:

&gt; Hi Sean,
&gt;
&gt; Have you tried escaping the space in your query?
&gt;
&gt; http://stackoverflow.com/questions/10023133/solr-
&gt; wildcard-query-with-whitespace
&gt;
&gt;
&gt; On Sep 5, 2016, at 6:24 PM, sean mcevoy  wrote:
&gt;
&gt; Hi List,
&gt;
&gt; We have a solr index where we store something like:
&gt; &lt;&lt;"{\\"key\\_s\\":\\"ID\\",\\"body\\_s\\":\\"some test string\\"}"&gt;&gt;}],
&gt;
&gt; Then we try to do a riakc\\_pb\\_socket:search with the pattern:
&gt; &lt;&lt;"body\\_s:\\*test str\\*"&gt;&gt;
&gt;
&gt; The request will fail with an error message telling us to check the logs
&gt; and in there we find:
&gt;
&gt; 2016-09-05 13:37:29.271 [error] &lt;0.12067.10&gt;@yz\\_pb\\_search:maybe\\_process:107
&gt; {solr\\_error,{400,"http://localhost:10014/internal\\_solr/
&gt; crm\\_db.campaign\\_index/select",&lt;&lt;"{\\"error\\":{\\"msg\\":\\"no field name
&gt; specified in query and no default specified via 'df'
&gt; param\\",\\"code\\":400}}\\n"&gt;&gt;}} [{yz\\_solr,search,3,[{file,"
&gt; src/yz\\_solr.erl"},{line,284}]},{yz\\_pb\\_search,maybe\\_process,
&gt; 3,[{file,"src/yz\\_pb\\_search.erl"},{line,78}]},{riak\\_api\\_
&gt; pb\\_server,process\\_message,4,[{file,"src/riak\\_api\\_pb\\_server.
&gt; erl"},{line,388}]},{riak\\_api\\_pb\\_server,connected,2,[{file,"
&gt; src/riak\\_api\\_pb\\_server.erl"},{line,226}]},{riak\\_api\\_pb\\_
&gt; server,decode\\_buffer,2,[{file,"src/riak\\_api\\_pb\\_server.erl"},
&gt; {line,364}]},{gen\\_fsm,handle\\_msg,7,[{file,"gen\\_fsm.erl"},{
&gt; line,505}]},{proc\\_lib,init\\_p\\_do\\_apply,3,[{file,"proc\\_lib.
&gt; erl"},{line,239}]}]
&gt;
&gt;
&gt; Through experiment I've figured out that it doesn't like the space as it
&gt; seems to think the part of the search string after that space is a new key
&gt; to search for. Which seems fair enough.
&gt;
&gt; Anyone know of a work-around? Or am I formatting my request incorrectly?
&gt;
&gt; Thanks in advance.
&gt; //Sean.
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

