---
title: "Re: admin_key_undefined creating user with riak-cs escript"
description: ""
project: community
lastmod: 2015-09-23T18:07:46-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg16566"
mailinglist_parent_id: "msg16560"
author_name: "Shunichi Shinohara"
project_section: "mailinglistitem"
sent_date: 2015-09-23T18:07:46-07:00
---


Hi Gautam,

Sorry for late response.
The function riak\\_cs\\_user:create\\_user() should be executed on riak cs node.
If you want to call it by escript, you can use rpc:call to execute it.

Shino

On Sat, Sep 19, 2015 at 7:43 AM, Gautam Pulla
 wrote:
&gt; Hello,
&gt;
&gt;
&gt;
&gt; I’d like to create a riak-cs user with a pre-set key/secret and am following
&gt; the workaround from https://github.com/basho/riak\\_cs/issues/565. This is
&gt; works when I type it into the interactive riak-cs console, however I want to
&gt; script this in a non-interactive fashion.
&gt;
&gt;
&gt;
&gt; I’ve created a small erlang script and am using riak-cs escript to run it (I
&gt; don’t know erlang at all so there are probably basic errors).
&gt;
&gt;
&gt;
&gt; This is what I get when I run the script:
&gt;
&gt;
&gt;
&gt; # riak-cs escript /tmp/createuser.erl
&gt;
&gt; {error,admin\\_key\\_undefined}
&gt;
&gt;
&gt;
&gt; Here is my script:
&gt;
&gt;
&gt;
&gt; # cat /tmp/createuser.erl
&gt;
&gt; #!/usr/bin/env escript
&gt;
&gt; -import(riak\\_cs\\_user, [create\\_user/4]).
&gt;
&gt;
&gt;
&gt; main(\\_) -&gt;
&gt;
&gt; R = riak\\_cs\\_user:create\\_user("test", "t...@ttd.com", "blah", "foo"),
&gt;
&gt; Rs=lists:flatten(io\\_lib:format("~p", [R])),
&gt;
&gt; io:format(Rs),
&gt;
&gt; io:format("\\n").
&gt;
&gt;
&gt;
&gt; Any pointers?
&gt;
&gt;
&gt;
&gt; Thanks!
&gt;
&gt; Gautam
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

