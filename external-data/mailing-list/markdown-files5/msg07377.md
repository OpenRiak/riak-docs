---
title: "Riak Join is Screwed Up"
description: ""
project: community
lastmod: 2012-05-02T23:42:10-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07377"
author_name: "Rebecca Meritz"
project_section: "mailinglistitem"
sent_date: 2012-05-02T23:42:10-07:00
---


I'm testing a script that joins my riak ring on all machines. There is no
data in the database yet but I have repeated joined the ring
an separated it while working on the script that sets up the environment on
my machines. The ring is now in a bizarre state:

[rebecca]$ riak-admin member\\_status
Attempting to restart script through sudo -u riak
================================= Membership
==================================
Status Ring Pending Node
-------------------------------------------------------------------------------
valid 50.0% -- 'r...@xx.xxx.xx.10'
valid 50.0% -- 'r...@xx.xxx.xx.12'
-------------------------------------------------------------------------------
Valid:2 / Leaving:0 / Exiting:0 / Joining:0 / Down:0
[pay@payment-testing-gw2 ~]$ riak-admin join r...@xx.xxx.xx.14
Attempting to restart script through sudo -u riak
\\*Failed: This node is already a member of a cluster\\*
[pay@payment-testing-gw2 ~]$ riak-admin force-remove r...@xx.xxx.xx.14
Attempting to restart script through sudo -u riak
\\*Failed: "r...@xx.xxx.xx.14" is not a member of the cluster.\\*

I cannot join a new member nor can I remove it.

I've tried stop them all get them to leave, if they wouldn't leave I forced
their removal. I stopped them all. I even deleted the whole old ring file
before restarting.

How can I fix this situations. What causes the above error?

Thanks,
Rebecca
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

