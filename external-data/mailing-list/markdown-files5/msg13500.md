---
title: "Re: Timeouts on Riak Search"
description: ""
project: community
lastmod: 2014-01-27T14:21:31-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg13500"
mailinglist_parent_id: "msg13487"
author_name: "Ryan Zezeski"
project_section: "mailinglistitem"
sent_date: 2014-01-27T14:21:31-08:00
---


On Sun, Jan 26, 2014 at 7:41 PM, ender  wrote:

&gt; I am continuously getting the following types of errors in my riak logs:
&gt;
&gt; 2014-01-27 00:06:39.735 [error] &lt;0.220.0&gt; Supervisor riak\\_pipe\\_builder\\_sup
&gt; had child undefined started with {riak\\_pipe\\_builder,start\\_link,undefined}
&gt; at &lt;0.18590.125&gt; exit with reason
&gt; {{modfun,riak\\_search,mapred\\_search,[&lt;&lt;"Mediastream"&gt;&gt;,&lt;&lt;"(type:image
&gt; type:video type:FacebookPost) AND (teamSlug:nba.san-antonio-spurs
&gt; home\\_teamSlug:nba.san-antonio-spurs
&gt; away\\_teamSlug:nba.san-antonio-spurs)"&gt;&gt;]},error,{badmatch,{error,timeout}},[{riak\\_search,mapred\\_search,3,[{file,"src/riak\\_search.erl"},{line,55}]},{riak\\_kv\\_mrc\\_pipe,send\\_inputs,3,[{file,"src/riak\\_kv\\_mrc\\_pipe.erl"},{line,627}]},{riak\\_kv\\_mrc\\_pipe,'-send\\_inputs\\_async/3-fun-0-',3,[{file,"src/riak\\_kv\\_mrc\\_pipe.erl"},{line,557}]}]}
&gt; in context child\\_terminated
&gt;
&gt; I have just started using Riak last week, so most likely it's user error
&gt; on my part. Would be grateful for any assistance!
&gt;
&gt; I have also attached some additional info (app.config, log files etc) to
&gt; this email.
&gt;
&gt; Thanks,
&gt;
&gt; Satish
&gt;
&gt;
Satish,

I see you are doing a disjunction search across the type field `(type:image
type:video type:FacebookPost)`. How many documents match that sub-query? If
it is over 100k then legacy Riak Search will fail to return on the query
causing it to timeout. In general, legacy Riak Search has issues with
larger result sets. In 2.0 there is a new version of Riak Search (code name
Yokozuna) which should have much less issues with larger result sets. You
can try playing with it via the 2.0.0pre11 download.

http://docs.basho.com/riak/2.0.0pre11/downloads/

http://docs.basho.com/riak/2.0.0pre11/downloads/

-Z
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

