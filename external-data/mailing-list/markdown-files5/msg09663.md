---
title: "Re: Erlang API for MapReduce"
description: ""
project: community
lastmod: 2012-12-21T01:14:23-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg09663"
mailinglist_parent_id: "msg09660"
author_name: "Christian Dahlqvist"
project_section: "mailinglistitem"
sent_date: 2012-12-21T01:14:23-08:00
---


Hi,

The client you are trying to use is the internal Riak client. This will work if 
you attach [1] to the Riak console and want to query Riak. If you are writing 
an application to be run from outside Riak, you should instead use the Riak PB 
Erlang Client [2].

Best regards,

Christian

[1] 
http://docs.basho.com/riak/1.0.0/references/Command-Line-Tools---riak/#attach
[2] https://github.com/basho/riak-erlang-client


On 20 Dec 2012, at 18:52, Shaan Sapra  wrote:

&gt; I am trying to understand the Erlang API for Map/Reduce queries, but I'm not 
&gt; sure what I'm doing. 
&gt; 
&gt; I have 4 nodes made by the command 'make devrel'. I started all 4 and joined 
&gt; them into a cluster. Now when I try to follow the documentation here.
&gt; 
&gt; 1&gt; {ok, Client} = riak:local\\_client().
&gt; 
&gt; I receive : \\*\\* exception error: undefined function riak:local\\_client/0
&gt; 
&gt; I looked around for the erlang files and found them in riak/deps/riak\\_kv/src. 
&gt; 
&gt; Realizing my shell didn't know about these files, I ran the erlang shell in ^ 
&gt; directory, but then I received this:
&gt; 
&gt; \\*\\* exception error: undefined function riak\\_core\\_util:mkclientid/1
&gt; in function riak:client\\_connect/2 (riak.erl, line 120)
&gt; 
&gt; Can someone please help me understand how I should be calling these functions 
&gt; and where?
&gt; 
&gt; Also, if someone could explain how to run M/R queries as a script instead of 
&gt; in the shell and provide some example code, that would be great!
&gt; 
&gt; Thanks,
&gt; Shaan Sapra
&gt; 
&gt; 
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

