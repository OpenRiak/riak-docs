---
title: "Re: Help with local restore for dev enviroment"
description: ""
project: community
lastmod: 2013-07-11T18:25:02-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg11486"
mailinglist_parent_id: "msg11453"
author_name: "Mark Phillips"
project_section: "mailinglistitem"
sent_date: 2013-07-11T18:25:02-07:00
---


Hi Mark,

If you need to get the structure the data, your best bet is to pull the
content type. You'll need to list-keys [1] on that bucket and then parse
the header for each key with a HEAD request, paying special attention to
the content-type for the key [2]. Keep in mind we don't recommend using
list-keys for production, but if it's for test data and an offline-cluster,
it's fine. Make sure to use the "?keys=stream" option if the client you're
using supports it.

The biggest caveat here is that you're trusting the client that stored the
data initially to have specified the correct content type. Riak doesn't
 validate it proactively on the way in.

Hope that helps.

Mark


[1] http://docs.basho.com/riak/latest/references/apis/http/HTTP-List-Keys/
[2]
http://docs.basho.com/riak/latest/references/apis/http/HTTP-Fetch-Object/#Response


On Wed, Jul 10, 2013 at 7:37 AM, Mark Wagner  wrote:

&gt; Thanks for the info!!! I appreciate the help and I am glad to know that
&gt; it should just work!
&gt;
&gt; I don't really need the data from the whole cluster while developing the
&gt; script. I just need to get my queries working etc...
&gt;
&gt; One issue I am facing is I don't know the structure of the data. So I am
&gt; trying to browse it (http://localhost:8098/riak?buckets=true) and I
&gt; getting content decode error.
&gt;
&gt; Any ideas? thoughts on how to troubleshoot this? Or different approaches
&gt; to determining the structure?
&gt;
&gt;
&gt; Thanks AGAIN!!!
&gt;
&gt;
&gt; Mark
&gt;
&gt;
&gt; On Wed, Jul 10, 2013 at 7:59 AM, Justin Sheehy  wrote:
&gt;
&gt;&gt; Hi, Mark.
&gt;&gt;
&gt;&gt; You've already received a little advice generally so I won't pile on that
&gt;&gt; part, but one thing stood out to me:
&gt;&gt;
&gt;&gt; &gt; My client has sent me a backup from one of their cluster nodes. bitcask
&gt;&gt; data,. rings and config.
&gt;&gt;
&gt;&gt; Unless I'm misunderstanding what you're doing, what you're working on
&gt;&gt; will not get you the data from the whole cluster, but the fraction of the
&gt;&gt; data that was stored on the one node that you have a backup from. Just a
&gt;&gt; warning, in case you hadn't realized this.
&gt;&gt;
&gt;&gt; -Justin
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;
&gt;
&gt; --
&gt; Mark Wagner, Web & Mobile Developer
&gt; \\*:coderow\\*
&gt; \\*Web & mobile application development for business\\*
&gt; m: 480.580.1261 | o: 612.293.9090
&gt; www.coderow.com | m...@coderow.com | @thesociableme
&gt;
&gt;
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

