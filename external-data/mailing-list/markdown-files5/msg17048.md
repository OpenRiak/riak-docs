---
title: "Re: riak crash"
description: ""
project: community
lastmod: 2016-02-22T07:45:06-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17048"
mailinglist_parent_id: "msg17040"
author_name: "Matthew Von-Maszewski"
project_section: "mailinglistitem"
sent_date: 2016-02-22T07:45:06-08:00
---


Raviraj,

Please run 'riak-debug'. This is in the bin directory along with 'riak start' 
and 'riak-admin'.

riak-debug will produce a file named similar to 
/home/user/r...@10.0.0.15-riak-debug.tar.gz 


You should email that file to me directly, or post it to dropbox or similar and 
send me a link. You do not want to send that file to the entire mailing list.

I will review the file and suggest next steps.

Matthew

&gt; On Feb 22, 2016, at 5:13 AM, Raviraj Vaishampayan  
&gt; wrote:
&gt; 
&gt; Hi,
&gt; 
&gt; We have been using riak to gather our test data and analyze results after 
&gt; test completes.
&gt; Recently we have observed riak crash in riak console logs.
&gt; This causes our tests failing to record data to riak and bailing out :-(
&gt; 
&gt; The crash logs are as follow:
&gt; 2016-02-19 16:25:26.255 [error] &lt;0.2160.0&gt; gen\\_fsm &lt;0.2160.0&gt; in state active 
&gt; terminated with reason: no function clause matching 
&gt; riak\\_kv\\_vnode:handle\\_info({#Ref&lt;0.0.482.161540&gt;,{ok,&lt;0.11042.842&gt;}}, 
&gt; {state,268322566228720457638957762256505085639956365312,riak\\_kv\\_eleveldb\\_backend,true,{state,&lt;&lt;&gt;&gt;,...},...})
&gt; line 1195
&gt; 2016-02-19 16:25:26.260 [error] &lt;0.2160.0&gt; CRASH REPORT Process &lt;0.2160.0&gt; 
&gt; with 2 neighbours exited with reason: no function clause matching 
&gt; riak\\_kv\\_vnode:handle\\_info({#Ref&lt;0.0.482.161540&gt;,{ok,&lt;0.11042.842&gt;}}, 
&gt; {state,268322566228720457638957762256505085639956365312,riak\\_kv\\_eleveldb\\_backend,true,{state,&lt;&lt;&gt;&gt;,...},...})
&gt; line 1195 in gen\\_fsm:terminate/7 line 622
&gt; 2016-02-19 16:25:26.260 [error] &lt;0.172.0&gt; Supervisor riak\\_core\\_vnode\\_sup had 
&gt; child undefined started with {riak\\_core\\_vnode,start\\_link,undefined} at 
&gt; &lt;0.2160.0&gt; exit with reason no function clause matching 
&gt; riak\\_kv\\_vnode:handle\\_info({#Ref&lt;0.0.482.161540&gt;,{ok,&lt;0.11042.842&gt;}}, 
&gt; {state,268322566228720457638957762256505085639956365312,riak\\_kv\\_eleveldb\\_backend,true,{state,&lt;&lt;&gt;&gt;,...},...})
&gt; line 1195 in context child\\_terminated
&gt; 2016-02-19 16:25:26.261 [error] &lt;0.4319.0&gt; gen\\_fsm &lt;0.4319.0&gt; in state ready 
&gt; terminated with reason: no function clause matching 
&gt; riak\\_kv\\_vnode:handle\\_info({#Ref&lt;0.0.482.161540&gt;,{ok,&lt;0.11042.842&gt;}}, 
&gt; {state,268322566228720457638957762256505085639956365312,riak\\_kv\\_eleveldb\\_backend,true,{state,&lt;&lt;&gt;&gt;,...},...})
&gt; line 1195
&gt; 2016-02-19 16:25:26.275 [error] &lt;0.4319.0&gt; CRASH REPORT Process &lt;0.4319.0&gt; 
&gt; with 10 neighbours exited with reason: no function clause matching 
&gt; riak\\_kv\\_vnode:handle\\_info({#Ref&lt;0.0.482.161540&gt;,{ok,&lt;0.11042.842&gt;}}, 
&gt; {state,268322566228720457638957762256505085639956365312,riak\\_kv\\_eleveldb\\_backend,true,{state,&lt;&lt;&gt;&gt;,...},...})
&gt; line 1195 in gen\\_fsm:terminate/7 line 622
&gt; 2016-02-19 16:25:26.278 [error] &lt;0.4320.0&gt; Supervisor 
&gt; {&lt;0.4320.0&gt;,poolboy\\_sup} had child riak\\_core\\_vnode\\_worker started with 
&gt; riak\\_core\\_vnode\\_worker:start\\_link([{worker\\_module,riak\\_core\\_vnode\\_worker},{worker\\_args,[268322566228720457638957762256505085639956365312,...]},...])
&gt; at undefined exit with reason no function clause matching 
&gt; riak\\_kv\\_vnode:handle\\_info({#Ref&lt;0.0.482.161540&gt;,{ok,&lt;0.11042.842&gt;}}, 
&gt; {state,268322566228720457638957762256505085639956365312,riak\\_kv\\_eleveldb\\_backend,true,{state,&lt;&lt;&gt;&gt;,...},...})
&gt; line 1195 in context shutdown\\_error
&gt; 2016-02-19 16:25:26.278 [error] &lt;0.4320.0&gt; gen\\_server &lt;0.4320.0&gt; terminated 
&gt; with reason: no function clause matching 
&gt; riak\\_kv\\_vnode:handle\\_info({#Ref&lt;0.0.482.161540&gt;,{ok,&lt;0.11042.842&gt;}}, 
&gt; {state,268322566228720457638957762256505085639956365312,riak\\_kv\\_eleveldb\\_backend,true,{state,&lt;&lt;&gt;&gt;,...},...})
&gt; line 1195
&gt; 2016-02-19 16:25:26.278 [error] &lt;0.4320.0&gt; CRASH REPORT Process &lt;0.4320.0&gt; 
&gt; with 0 neighbours exited with reason: no function clause matching 
&gt; riak\\_kv\\_vnode:handle\\_info({#Ref&lt;0.0.482.161540&gt;,{ok,&lt;0.11042.842&gt;}}, 
&gt; {state,268322566228720457638957762256505085639956365312,riak\\_kv\\_eleveldb\\_backend,true,{state,&lt;&lt;&gt;&gt;,...},...})
&gt; line 1195 in gen\\_server:terminate/6 line 744
&gt; 2016-02-19 16:25:26.806 [error] &lt;0.2157.0&gt; gen\\_fsm &lt;0.2157.0&gt; in state active 
&gt; terminated with reason: {timeout,{gen\\_server,call,[&lt;0.5141.0&gt;,stop]}}
&gt; 2016-02-19 16:25:26.808 [error] &lt;0.2157.0&gt; CRASH REPORT Process &lt;0.2157.0&gt; 
&gt; with 2 neighbours exited with reason: 
&gt; {timeout,{gen\\_server,call,[&lt;0.5141.0&gt;,stop]}} in gen\\_fsm:terminate/7 line 600
&gt; 2016-02-19 16:25:26.809 [error] &lt;0.5450.0&gt; gen\\_fsm &lt;0.5450.0&gt; in state ready 
&gt; terminated with reason: {timeout,{gen\\_server,call,[&lt;0.5141.0&gt;,stop]}}
&gt; 2016-02-19 16:25:26.809 [error] &lt;0.172.0&gt; Supervisor riak\\_core\\_vnode\\_sup had 
&gt; child undefined started with {riak\\_core\\_vnode,start\\_link,undefined} at 
&gt; &lt;0.2157.0&gt; exit with reason {timeout,{gen\\_server,call,[&lt;0.5141.0&gt;,stop]}} in 
&gt; context child\\_terminated
&gt; 2016-02-19 16:25:26.809 [error] &lt;0.5450.0&gt; CRASH REPORT Process &lt;0.5450.0&gt; 
&gt; with 10 neighbours exited with reason: 
&gt; {timeout,{gen\\_server,call,[&lt;0.5141.0&gt;,stop]}} in gen\\_fsm:terminate/7 line 622
&gt; 2016-02-19 16:25:26.809 [error] &lt;0.5451.0&gt; Supervisor 
&gt; {&lt;0.5451.0&gt;,poolboy\\_sup} had child riak\\_core\\_vnode\\_worker started with 
&gt; riak\\_core\\_vnode\\_worker:start\\_link([{worker\\_module,riak\\_core\\_vnode\\_worker},{worker\\_args,[211232658520482062396626323478525280184646500352,...]},...])
&gt; at undefined exit with reason {timeout,{gen\\_server,call,[&lt;0.5141.0&gt;,stop]}} 
&gt; in context shutdown\\_error
&gt; 2016-02-19 16:25:26.809 [error] &lt;0.5451.0&gt; gen\\_server &lt;0.5451.0&gt; terminated 
&gt; with reason: {timeout,{gen\\_server,call,[&lt;0.5141.0&gt;,stop]}}
&gt; 2016-02-19 16:25:26.809 [error] &lt;0.5451.0&gt; CRASH REPORT Process &lt;0.5451.0&gt; 
&gt; with 0 neighbours exited with reason: 
&gt; {timeout,{gen\\_server,call,[&lt;0.5141.0&gt;,stop]}} in gen\\_server:terminate/6 line 
&gt; 744
&gt; 
&gt; Our setup is as follow:
&gt; We have a riak cluster with 10 nodes, configuration of each node is as follow:
&gt; RAM: 48GB
&gt; Disk:
&gt; 80GB (/)
&gt; 504GB (separate riak partition)
&gt; Riak Version: 2.1.3-1 (2.1.3)
&gt; Data in riak: After observing crash, total data in riak partition was ~50GB
&gt; 
&gt; Riak config is as follow:
&gt; riak.conf
&gt; [Attached with this email]
&gt; 
&gt; advanced.config:
&gt; [
&gt; {riak\\_kv, [{add\\_paths, ["/usr/local/lib/scale\\_riak/ebin"]}]},
&gt; {webmachine, [{backlog, 511}, {nodelay, true}]},
&gt; {yokozuna, [{solr\\_request\\_timeout, 120000}]}
&gt; ].
&gt; 
&gt; We have observed this a few times now, and after this crash we observed 
&gt; latency increases and our application starts timing out.
&gt; We would really like to understand what might be causing this crash and if it 
&gt; is something due to missing config on our nodes we would like to fix it.
&gt; 
&gt; Thanks for your help in advanced :-)
&gt; 
&gt; Regards,
&gt; Raviraj
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

