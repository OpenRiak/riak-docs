---
title: "Re: Riak One partition handoff stall"
description: ""
project: community
lastmod: 2018-05-28T04:29:17-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg18543"
mailinglist_parent_id: "msg18542"
author_name: "Bryan Hunt"
project_section: "mailinglistitem"
sent_date: 2018-05-28T04:29:17-07:00
---


Are you constantly executing a particular riak command, in your system 
monitoring scripts, for example: `riak-admin vnode-status` ? 

What size is your data per server ? 

How many objects are you storing ? 

---
Erlang Solutions cares about your data and privacy; please find all details 
about the basis for communicating with you and the way we process your data in 
our Privacy Policy.You can update your email preferences or opt-out from 
receiving Marketing emails here.

&gt; On 28 May 2018, at 08:29, Gaurav Sood  
&gt; wrote:
&gt; 
&gt; Hi All - Good Day!
&gt; 
&gt; I have a 7 Node Raik\\_KV cluster. Recently I have upgraded this cluster from 
&gt; 1.4.2 to 1.4.12 on Ubuntu 16.04. After upgrading the cluster whenever I 
&gt; leave a node from cluster one partition hand off stalled every time & Active 
&gt; transfers shows 'waiting to handoff 1 partitions", to complete this process I 
&gt; need to reboot the riak service on all nodes one by one. 
&gt; 
&gt; I am not sure if it's configuration problem. Here is the current state of 
&gt; cluster.
&gt; 
&gt; #output of riak-admin member-status
&gt; ================================= Membership 
&gt; ==================================
&gt; Status Ring Pending Node
&gt; -------------------------------------------------------------------------------
&gt; leaving 0.0% -- 'riak@192.168.2.10 '
&gt; valid 14.1% -- 'riak@192.168.2.11 '
&gt; valid 14.1% -- 'riak@192.168.2.12 '
&gt; valid 15.6% -- 'riak@192.168.2.13 '
&gt; valid 14.1% -- 'riak@192.168.2.14 '
&gt; valid 14.1% -- 'riak@192.168.2.15 '
&gt; valid 14.1% -- 'riak@192.168.2.16 '
&gt; valid 14.1% -- 'riak@192.168.2.17 '
&gt; -------------------------------------------------------------------------------
&gt; Valid:7 / Leaving:1 / Exiting:0 / Joining:0 / Down:0
&gt; 
&gt; #output of riak-admin transfers
&gt; 
&gt; 'riak@192.168.2.10 ' waiting to handoff 1 partitions
&gt; 
&gt; Active Transfers:
&gt; 
&gt; (nothing here)
&gt; 
&gt; 
&gt; #Output of riak-admin ring\\_status
&gt; ================================== Claimant 
&gt; ===================================
&gt; Claimant: 'riak@192.168.2.10 '
&gt; Status: up
&gt; Ring Ready: true
&gt; 
&gt; ============================== Ownership Handoff 
&gt; ==============================
&gt; No pending changes.
&gt; 
&gt; ============================== Unreachable Nodes 
&gt; ==============================
&gt; All nodes are up and reachable
&gt; 
&gt; current Transfer Limit is 2.
&gt; 
&gt; Thanks
&gt; Gaurav
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

