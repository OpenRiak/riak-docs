---
title: "Riak Cluster Behavior - Clarification"
description: ""
project: community
lastmod: 2016-05-24T07:35:59-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg17404"
author_name: "Vikram Lalit"
project_section: "mailinglistitem"
sent_date: 2016-05-24T07:35:59-07:00
---


Hi - I'd appreciate if someone can opine on the below behavior of Riak that
I am observing... is that expected, or something wrong in my set-up /
understanding?

To summarize, I have a 3-node Riak cluster (separate EC2 AWS instances)
with a separate chat server connecting to them. When I write data on the
Riak nodes, the process is successful and I can read all data correctly.
However, as part of my testing, if I deliberately bring down one node (and
then remove it from the cluster using riak-admin cluster force-remove /
plan / commit), the client API is not able to fetch all the written data.
In fact, there is an alternation of success and failure which happens
rather randomly.

My initial suspicion was that it would be happening only during the time
the rebalancing is occurring (i.e. riak-admin ring-status is not fully
settled) but I've seen this sporadic behavior post the same too.

Does this have to do with the n and r values for the cluster and given that
1 node is down, the cluster does not succeed in returning results reliably?
Also, does this mean that during the time a cluster is being rebalanced
(even incl. addition of new nodes), the results could be arbitrary - that
doesn't sound correct to me?

Appreciate if someone can throw some light here? Also, the HTTP API calls
to retrieve and set the n / r / w values for a specific bucket - couldn't
locate the same!

Thanks much!
Vikram
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

