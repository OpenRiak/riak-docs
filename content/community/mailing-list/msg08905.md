---
title: "Re: setting search schema"
description: ""
project: community
lastmod: 2012-10-13T15:40:44-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08905"
mailinglist_parent_id: "msg08904"
author_name: "Alexander Sicular"
project_section: "mailinglistitem"
sent_date: 2012-10-13T15:40:44-07:00
---


Hi David, I'm thinking that you should write some bash-fu and use the 
search-cmd tool. You could do a search-cmd show-schema to check for a schema 
match. If you have to run search-cmd as root it stands to reason that you are 
running riak as root which I don't think is a good idea in general.

-Alexander Sicular

@siculars

On Oct 13, 2012, at 3:32 PM, David Lowell wrote:

&gt; My software needs to be able to set a custom schema in Riak for indexing json 
&gt; objects. To make deploying my software easy, what I think I'd like to be able 
&gt; to do is:
&gt; 
&gt; - on app startup, test whether the schema has been added for index already
&gt; - if not, set the schema for my index
&gt; 
&gt; It does appear that I can test whether a schema exists for my index with 
&gt; (from python):
&gt; 
&gt; client.bucket('\\_rs\\_schema').get(INDEX\\_NAME).exists()
&gt; 
&gt; However, the docs warn against writing any schemas into the \\_rs\\_schema bucket 
&gt; directly. The only other interface documented for assigning schemas is the 
&gt; "search-cmd" command line tool. I conclude there does not appear to be a 
&gt; supported way to assign schemas to indexes from code.
&gt; 
&gt; I could have my code invoke the command line tools to assign this schema, but 
&gt; then my code would have to run as root.
&gt; 
&gt; So, am I missing something? How do other people manage to manage the schemas 
&gt; for their indexes?
&gt; 
&gt; Thanks for the help,
&gt; 
&gt; Dave
&gt; 
&gt; --
&gt; Dave Lowell
&gt; d...@connectv.com
&gt; 

