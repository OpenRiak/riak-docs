---
title: "Re: locating an object"
description: ""
project: community
lastmod: 2012-05-10T13:01:10-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07424"
mailinglist_parent_id: "msg07423"
author_name: "Bogunov"
project_section: "mailinglistitem"
sent_date: 2012-05-10T13:01:10-07:00
---


Look here.
https://github.com/basho/riak\\_kv/blob/master/src/riak\\_kv\\_get\\_fsm.erl

prepare(timeout, StateData=#state{bkey=BKey={Bucket,\\_Key}}) -&gt;
 {ok, Ring} = riak\\_core\\_ring\\_manager:get\\_my\\_ring(),
 BucketProps = riak\\_core\\_bucket:get\\_bucket(Bucket, Ring),
 DocIdx = riak\\_core\\_util:chash\\_key(BKey),
 N = proplists:get\\_value(n\\_val,BucketProps),
 UpNodes = riak\\_core\\_node\\_watcher:nodes(riak\\_kv),
 Preflist2 = riak\\_core\\_apl:get\\_apl\\_ann(DocIdx, N, Ring, UpNodes).


Just do riak attach and enter the code b hand.

Preflist2 is what you need. Actually it have vnode names, but correspondign
vnodes are trivial to locate.




On Thu, May 10, 2012 at 11:48 PM, Sam Lang  wrote:

&gt;
&gt; Hello,
&gt;
&gt; Is there a way to query a riak object to get its current locations, i.e.
&gt; which nodes/vnodes in the ring own the object?
&gt;
&gt; Thanks,
&gt; -sam
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;


-- 
email: bogu...@gmail.com
skype: i.bogunov
phone: +7 903 131 8499
Regards, Bogunov Ilya
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

