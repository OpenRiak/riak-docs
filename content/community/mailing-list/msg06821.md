---
title: "Re: Is it possible to express JOIN and GROUP in Riak?"
description: ""
project: community
lastmod: 2012-03-01T10:26:02-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06821"
mailinglist_parent_id: "msg06652"
author_name: "Mark Phillips"
project_section: "mailinglistitem"
sent_date: 2012-03-01T10:26:02-08:00
---


Hi Sergei,

Sean Cribbs gave a presentation last year at Strage Loop wherein he
talked about going from SQL -&gt; Riak MapReduce.

http://strangeloop-riak-mapred.heroku.com/#1

Specifically, there is some info on doing the equivalent of JOIN and
GROUP (and others) starting around slide #24.

Hope that helps.

Mark

On Mon, Feb 20, 2012 at 5:53 AM, Sergei Tulentsev
 wrote:
&gt; Let's say, I have events and users. I want to group events by properties of
&gt; users. In SQL it looks like this:
&gt;
&gt; SELECT u.gender,
&gt;        u.age,
&gt;        u.nfr,
&gt;        u.nafr,
&gt;        e.event\\_id,
&gt;        COUNT(e.id) ecount,
&gt;        SUM(e.event\\_value) esum
&gt; FROM sn\\_users u
&gt; JOIN daily\\_events e on e.sn\\_user\\_id = u.sn\\_id
&gt; GROUP BY u.gender, u.age, u.nfr, u.nafr, e.event\\_id;
&gt;
&gt; I understand that link walking with mapreduce may help me with this.
&gt; However, all examples of link walking I've seen so far substitute the
&gt; original document. That is, if I were to link-walk event document I'd get a
&gt; bunch of users, without events.
&gt;
&gt; How it ideally should be (in my imagination).
&gt;
&gt; - Links are walked on event documents and corresponding users are embedded
&gt; into events.
&gt; - Map function now acts on a "joined" document and can emit appropriate
&gt; values.
&gt; - Reduce - nothing fancy here.
&gt;
&gt; Is it possible at all?
&gt;
&gt; --
&gt; Best regards,
&gt; Sergei Tulentsev
&gt;
