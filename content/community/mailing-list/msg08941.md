---
title: "Re: epmd daemon runs after riak stops"
description: ""
project: community
lastmod: 2012-10-16T14:05:17-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08941"
mailinglist_parent_id: "msg08940"
author_name: "Jared Morrow"
project_section: "mailinglistitem"
sent_date: 2012-10-16T14:05:17-07:00
---


David,

You can always add a line to any script you use to stop riak that is
something like

/riak/%ERTS\\_PATH%/bin/epmd -kill

It should be trivial to add that to 'riak stop' if you indeed want that.

-Jared


On Tue, Oct 16, 2012 at 10:49 AM, Ciprian Dorin Craciun &lt;
ciprian.crac...@gmail.com&gt; wrote:

&gt; On Tue, Oct 9, 2012 at 12:31 AM, David Lowell  wrote:
&gt; &gt; I would like to understand better why '/etc/init.d/riak stop' stops riak,
&gt; &gt; but the 'epmd' daemon continues to run. I would have hoped that when I
&gt; &gt; administratively stop riak on a node that all its various cogs would stop
&gt; &gt; turning.
&gt; &gt;
&gt; &gt; Furthermore, I'm not clear on how the lifecycle of epmd is controled. Is
&gt; it
&gt; &gt; started by any Erlang process that runs, and never stopped?
&gt; &gt;
&gt; &gt; I would appreciate any insights folks could offer. Thanks!
&gt;
&gt; Indeed this is a very annoying Erlang behaviour, especially when
&gt; running in container environments or highly controlled / automated
&gt; ones.
&gt;
&gt; If you are interested in finding more about both the "details" and
&gt; possible hacks, please see my previous posts (both here and on Erlang
&gt; mailing list):
&gt;
&gt; http://lists.freedesktop.org/archives/systemd-devel/2012-August/006273.html
&gt;
&gt; http://lists.basho.com/pipermail/riak-users\\_lists.basho.com/2012-June/008608.html
&gt; http://erlang.org/pipermail/erlang-questions/2011-October/062004.html
&gt; http://erlang.org/pipermail/erlang-questions/2011-October/061893.html
&gt;
&gt; In short the solution is:
&gt; \\* trick the erlang process not to start epmd itself; (see the last
&gt; link above;)
&gt; \\* run epmd yourself as a separate service;
&gt;
&gt; Ciprian.
&gt;

