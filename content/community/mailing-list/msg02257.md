---
title: "Re: Map Function in Erlang with PBC"
description: ""
project: community
lastmod: 2011-02-09T23:18:42-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02257"
mailinglist_parent_id: "msg02243"
author_name: "Ryan Maclear"
project_section: "mailinglistitem"
sent_date: 2011-02-09T23:18:42-08:00
---


After giving this a bit more thought, the "TrapExit" method is not going to 
work for me. The rpc:multicall() function evaluates the function on all visible 
nodes. My client app is not on the riak cluster, so cannot access the cluster 
directly. I will have to follow the method of creating the function in a string.

Cheers,
Ryan

 
On 09 Feb 2011, at 4:42 PM, Kresten Krab Thorup wrote:

&gt; It looks like your problem is that the code is not on the server, so yes, ... 
&gt; I think that your guess is right. Here's a blg I wrote a while back on this 
&gt; topic
&gt; 
&gt; http://www.javalimit.com/2010/05/passing-funs-to-other-erlang-nodes.html
&gt; 
&gt; ... which also describes why it works for the case where you enter the code 
&gt; in the shell; it creates an interpreted function structure which \\*is\\* usable 
&gt; across erlang nodes.
&gt; 
&gt; Kresten
&gt; 
&gt; 
&gt; On Feb 9, 2011, at 9:22 , Ryan Maclear wrote:
&gt; 
&gt; If I copy the function body, line for line into the erlang shell, replacing 
&gt; values as I go along, the code works fine, and I get results back correctly.
&gt; 
&gt; However, If I call the function, in the same shell, I get the following error:
&gt; 
&gt; {error,&lt;&lt;"{error,\\n {error,undef,\\n 
&gt; [{#Fun,\\n 
&gt; [{r\\_object,&lt;&lt;\\"family\\"&gt;&gt;,&lt;&lt;"...&gt;&gt;}
&gt; 
&gt; This is not what I expected to happen. Has this got something to do with the 
&gt; nature of the anonymous function, one being defined in the shell and the 
&gt; other in a module? I've seen this link:
&gt; 
&gt; 
