---
title: "Re: Easier to use Java Client"
description: ""
project: community
lastmod: 2011-03-29T00:32:50-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02776"
mailinglist_parent_id: "msg02775"
author_name: "Rexxe"
project_section: "mailinglistitem"
sent_date: 2011-03-29T00:32:50-07:00
---


Yes, Jackson is being used to do the marshalling if it's a bean, but I am
using Spring's RestTemplate, which decides whether to use Jackson or some
other basic marshalling (e.g. byte[] or String, etc.). This allows me to
deal with responses that come back from Riak that are not in JSON (e.g.
mixed/multipart).

It looks like you haven't gotten very far yet, which is good and bad I guess
:-). You are definitely taking a different approach than me. I pretty much
used the Spring templates (e.g. JDBCTemplate, HibernateTemplate, etc.) as my
guides since I found them incredibly useful and time-saving. Take a look at
my tests, the one for the RiakRestClient is pretty complete, and you can see
how to use the client API. The template API is just another abstraction on
top of the client for common operations so that the developer doesn't have
to deal with more low level objects. The template API is not totally done
as I want to add a couple more common ops that people might need (e.g.
count), but everything should work in it.

Thanks for checking it out! Please share any thoughts you might have on the
code!

On Tue, Mar 29, 2011 at 12:15 AM, Russell Brown wrote:

&gt;
&gt; On 29 Mar 2011, at 06:28, Rexxe wrote:
&gt;
&gt; Hello,
&gt;
&gt; I am new to Riak and the mailing list. I started to use Riak using the
&gt; spring-data project but found that their API was lacking and had serious
&gt; issues with strict typing. It turns out that the Java API they've built is
&gt; pretty much being built just so it works in Grails/Groovy. So, I started to
&gt; look at the Riak Java API. I found it to be a bit complicated and I didn't
&gt; like how it still forced the user to know about a lot of specifics of Riak,
&gt; especially query params and other properties, and didn't provide a layer of
&gt; abstraction on top of the actual client (so I could say go switch between
&gt; the REST and PBC client).
&gt;
&gt;
&gt; Here here. I'm working on that, too. There is a draft of the API here
&gt; https://github.com/russelldb/riak-java-client-api/tree/fluent
&gt;
&gt; So, I decided to write my own client and semi-ORM layer. I am still
&gt; working on some of the details, I need to write more tests, and I need to
&gt; document it, but the bulk of the code is done. I have only implemented the
&gt; REST client so far, but I plan on implementing PB in the future.
&gt;
&gt; You can check it out here: https://github.com/aberman/spring-riak
&gt;
&gt; It's pretty easy to use:
&gt;
&gt; If you want the client, you would do: RiakManager mgr = new
&gt; RiakRestClient(...);
&gt;
&gt; The ORM layer (still working a bit on this): RiakTemplate template = new
&gt; RiakTemplate(new RiakRestClient(...));
&gt;
&gt;
&gt; What are you using to marshall to java objects? Jackson?
&gt;
&gt;
&gt; The APIs to look at are RiakManager and RiakTemplate and you should see
&gt; some familiar methods with more typed signatures to help out the average
&gt; user.
&gt;
&gt; Let me know your thoughts, if any, and if there is any interest in me
&gt; donating this to the Riak project.
&gt;
&gt;
&gt; I've only had a brief look but I like it very much, thanks for making it
&gt; and sharing it. We seem to have covered a lot of the same ground but it is
&gt; great to have a diverse range of clients for different use cases. I'll pull
&gt; the repo and have a more detailed look, I'm hoping you may have solved some
&gt; of the problems I'm looking at already ;)
&gt;
&gt;
&gt; Andrew

