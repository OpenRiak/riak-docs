---
title: "Riak 1.2.1 memory usage"
description: ""
project: community
lastmod: 2012-11-14T10:49:48-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg09325"
author_name: "David Lowell"
project_section: "mailinglistitem"
sent_date: 2012-11-14T10:49:48-08:00
---


What major factors drive memory usage in Riak? As users of Riak 1.2.1 with 
eleveldb back-end, I had figured that the dominant source of memory use would 
be the eleveldb cache. However, we're using the default 8 MB of cache per 
vnode, which would therefore max out at 4 GB of cache for our 512 vnodes (when 
all partitions are on a single server). However, we see Riak's beam.smp process 
taking much more than 4 GB of memory. Running a heavy workload on top of riak, 
we see resident set size of 23 GB on our single server Riak cluster as I type.

So I haven't come across much in the Riak docs that describe other factors that 
can drive up memory usage. What could be adding up to so many gigs of memory? 
Queues? Caches other than leveldb?

Given the other thread about our issues with mysterious problems in riak (with 
some evidence of memory stress), I'd like to understand better what could be 
driving what seems to be excessive memory usage by Riak.

Thanks,

Dave

--
Dave Lowell
d...@connectv.com

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

