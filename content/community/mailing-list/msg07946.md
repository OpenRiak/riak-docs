---
title: "SV: riak doesn't start on new Macbook Pro Retina"
description: ""
project: community
lastmod: 2012-07-14T09:41:01-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07946"
mailinglist_parent_id: "msg07939"
author_name: "Erik Søe Sørensen"
project_section: "mailinglistitem"
sent_date: 2012-07-14T09:41:01-07:00
---


If I remember correctly, this may be a symptom that the pipe file on /tmp which 
Riak wants to use does already exists but is owned by another user. This 
happens if Riak has previously been run by a different user.
If it's not that, I suggest you provide the logs from the failed "riak start" 
attempt for further diagnosis...

----- Reply message -----
Fra: "Steve Hull" 
Dato: lør., jul. 14, 2012 03:10
Emne: riak doesn't start on new Macbook Pro Retina
Til: "Alvaro Videla" 
Cc: "riak-users@lists.basho.com" 

Hi Alvaro!

Thanks for your quick response.

Well after trying `riak start`, I do notice some processes hanging around:


 0 [07-13 18:08] (master)~/Dev/prodar
! ps aux | grep riak
shull 19538 0.0 0.0 2434892 512 s006 R+ 6:08PM 0:00.00 
grep --color riak

 0 [07-13 18:08] (master)~/Dev/prodar
! riak-1.1.4/bin/riak start
Riak failed to start within 15 seconds,
see the output of 'riak console' for more information.
If you want to wait longer, set the environment variable
WAIT\\_FOR\\_ERLANG to the number of seconds to wait.

 0 [07-13 18:08] (master)~/Dev/prodar
! ps aux | grep riak
shull 19585 0.5 0.2 2564380 36508 s008 Ss+ 6:08PM 0:02.45 
/Users/shull/Dev/prodar/riak-1.1.4/erts-5.8.5/bin/beam.smp -K true -A 64 -W w 
-- -root /Users/shull/Dev/prodar/riak-1.1.4 -progname riak -- -home 
/Users/shull -- -boot /Users/shull/Dev/prodar/riak-1.1.4/releases/1.1.4/riak 
-embedded -config /Users/shull/Dev/prodar/riak-1.1.4/etc/app.config -pa 
./lib/basho-patches -name riak@127.0.0.1 -setcookie riak 
-- console
shull 19829 0.0 0.0 2434892 572 s006 R+ 6:09PM 0:00.00 
grep --color riak
shull 19584 0.0 0.0 2434816 248 ?? S 6:08PM 0:00.00 
/Users/shull/Dev/prodar/riak-1.1.4/erts-5.8.5/bin/run\\_erl -daemon 
/tmp//Users/shull/Dev/prodar/riak-1.1.4/ /Users/shull/Dev/prodar/riak-1.1.4/log 
exec /Users/shull/Dev/prodar/riak-1.1.4/bin/riak console
shull 19569 0.0 0.0 2434840 244 ?? S 6:08PM 0:00.00 
/Users/shull/Dev/prodar/riak-1.1.4/erts-5.8.5/bin/epmd -daemon

If I kill these processes, `riak console` will start ok, but riak start never 
does. :(

-S

On Fri, Jul 13, 2012 at 6:04 PM, Alvaro Videla 
&gt; wrote:
You seem to be running Riak already or something in the same port.

See the "duplicate name" part of the error.

Regards,

Alvaro

Sent from my iPhone

On Jul 14, 2012, at 2:53 AM, Steve Hull 
&gt; wrote:

Hi everyone!

I recently attended a users' group / conference at the Basho offices in SF, led 
by Casey.

Everything was working fine on my 2011 MBP, but when I got this new Retina MBP, 
I found that riak would not start properly.

! riak-1.1.4/bin/riak start
Riak failed to start within 15 seconds,
see the output of 'riak console' for more information.
If you want to wait longer, set the environment variable
WAIT\\_FOR\\_ERLANG to the number of seconds to wait.

! riak-1.1.4/bin/riak console
Exec: /Users/shull/Dev/prodar/riak-1.1.4/erts-5.8.5/bin/erlexec -boot 
/Users/shull/Dev/prodar/riak-1.1.4/releases/1.1.4/riak -embedded 
-config /Users/shull/Dev/prodar/riak-1.1.4/etc/app.config -pa 
./lib/basho-patches -args\\_file 
/Users/shull/Dev/prodar/riak-1.1.4/etc/vm.args -- console
Root: /Users/shull/Dev/prodar/riak-1.1.4
{error\\_logger,{{2012,7,13},{14,8,56}},"Protocol: ~p: register error: 
~p~n",["inet\\_tcp",{{badmatch,{error,duplicate\\_name}},[{inet\\_tcp\\_dist,listen,1},{net\\_kernel,start\\_protos,4},{net\\_kernel,start\\_protos,3},{net\\_kernel,init\\_node,2},{net\\_kernel,init,1},{gen\\_server,init\\_it,6},{proc\\_lib,init\\_p\\_do\\_apply,3}]}]}
{error\\_logger,{{2012,7,13},{14,8,56}},crash\\_report,[[{initial\\_call,{net\\_kernel,init,['Argument\\_\\_1']}},{pid,&lt;0.20.0&gt;},{registered\\_name,[]},{error\\_info,{exit,{error,badarg},[{gen\\_server,init\\_it,6},{proc\\_lib,init\\_p\\_do\\_apply,3}]}},{ancestors,[net\\_sup,kernel\\_sup,&lt;0.10.0&gt;]},{messages,[]},{links,[#Port&lt;0.216&gt;,&lt;0.17.0&gt;]},{dictionary,[{longnames,true}]},{trap\\_exit,true},{status,running},{heap\\_size,233},{stack\\_size,24},{reductions,484}],[]]}
{error\\_logger,{{2012,7,13},{14,8,56}},supervisor\\_report,[{supervisor,{local,net\\_sup}},{errorContext,start\\_error},{reason,{'EXIT',nodistribution}},{offender,[{pid,undefined},{name,net\\_kernel},{mfargs,{net\\_kernel,start\\_link,[['riak@127.0.0.1',longnames]]}},{restart\\_type,permanent},{shutdown,2000},{child\\_type,worker}]}]}
{error\\_logger,{{2012,7,13},{14,8,56}},supervisor\\_report,[{supervisor,{local,kernel\\_sup}},{errorContext,start\\_error},{reason,shutdown},{offender,[{pid,undefined},{name,net\\_sup},{mfargs,{erl\\_distribution,start\\_link,[]}},{restart\\_type,permanent},{shutdown,infinity},{child\\_type,supervisor}]}]}
{error\\_logger,{{2012,7,13},{14,8,56}},std\\_info,[{application,kernel},{exited,{shutdown,{kernel,start,[normal,[]]}}},{type,permanent}]}
{"Kernel pid 
terminated",application\\_controller,"{application\\_start\\_failure,kernel,{shutdown,{kernel,start,[normal,[]]}}}"}

Crash dump was written to: ./log/erl\\_crash.dump
Kernel pid terminated (application\\_controller) 
({application\\_start\\_failure,kernel,{shutdown,{kernel,start,[normal,[]]}}})


Any ideas? I tried with `brew install riak` but same outcome.

-S

--
Steve Hull | TaskRabbit |Software Engineer
P: 510.928.4719
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com



--
Steve Hull | TaskRabbit |Software Engineer
P: 510.928.4719


\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

