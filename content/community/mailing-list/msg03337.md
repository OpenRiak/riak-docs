---
title: "Re: Riak Search \"And\" Queries inconsistency with Lucene"
description: ""
project: community
lastmod: 2011-05-14T11:40:41-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03337"
mailinglist_parent_id: "msg03336"
author_name: "Dan Reverri"
project_section: "mailinglistitem"
sent_date: 2011-05-14T11:40:41-07:00
---


Hi Tejus,

The boolean operators must be capitalized (AND, OR, NOT). If you retry your
searches with "AND" they will return the expected results.

Also, thank you for the very well put together examples.

Thanks,
Dan

Daniel Reverri
Developer Advocate
Basho Technologies, Inc.
d...@basho.com


On Sat, May 14, 2011 at 9:28 AM, Tejus Parikh  wrote:

&gt; I am considering using Riaksearch to replace a project that currently makes
&gt; use of lucene. This project extensively uses 'AND' queries to return a very
&gt; small subset of the total document store. Given that riaksearch provides a
&gt; "solr" endpoint, I would have expected the queries to return the same
&gt; results, but that does not appear to be the case.
&gt;
&gt; I created a simple test containing three documents (described here as xml):
&gt; 
&gt; 1
&gt; strawberry
&gt; pastry
&gt; 
&gt; 
&gt; 2
&gt; blueberry
&gt; waffle
&gt; 
&gt; 
&gt; 3
&gt; strawberry
&gt; pancake
&gt; 
&gt;
&gt; I ran a few queries against this set of docs:
&gt; search-cmd search menu\\_index "topping\\_text:\\"strawberry\\""
&gt; \\*\\* This returns 2 documents
&gt;
&gt; search-cmd search menu\\_index "topping\\_text:\\"strawberry\\" and
&gt; base\\_text:\\"pastry\\""
&gt; \\*\\* This returns 2 documents, I think it should only return menu\\_index/1
&gt;
&gt; search-cmd search menu\\_index "topping\\_text:\\"strawberry\\" and
&gt; base\\_text:\\"waffles\\""
&gt; \\*\\* This returns 3 documents, it shouldn't return any
&gt;
&gt; For comparions sake, I ran the same queries against lucene and retrieved
&gt; the results I expected.
&gt;
&gt; I've uploaded my documents, the commands I used to create an index, and the
&gt; sample lucene java code to:
&gt; https://github.com/vijedi/Riak-Search--And--Query-Test
&gt;
&gt; Have I misinterpreted what is happening or is there a real difference here?
&gt;
&gt; Thanks!
&gt;
&gt; Tejus Parikh
&gt; tejusparikh.com | @vi\\_jedi
&gt;
&gt;

