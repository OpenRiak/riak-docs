---
title: "Re: Riak 1.x with Secondary Indexes"
description: ""
project: community
lastmod: 2011-10-29T08:46:15-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05365"
mailinglist_parent_id: "msg05359"
author_name: "Jeremiah Peschka"
project_section: "mailinglistitem"
sent_date: 2011-10-29T08:46:15-07:00
---


The protocol buffers API already makes it easy to store the indexes. Querying 
them is annoying, but there's an Erlang client method to query an index that's 
pretty easy to use. Have a look at the get\\_index functions in 
riakc\\_pb\\_socket.erl. They're around line 700 or so.
---
Jeremiah Peschka - Founder, Brent Ozar PLF, LLC
Microsoft SQL Server MVP

On Oct 28, 2011, at 6:26 PM, Mike Oxford wrote:

&gt; On Fri, Oct 28, 2011 at 5:36 PM, Sean Cribbs  wrote:
&gt;&gt; You can already store indexes with pbufs. Use a mapreduce with a single 
&gt;&gt; reduce phase of riak\\_kv\\_mapreduce:t if you want the equivalent of the http 
&gt;&gt; query. This is what the Erlang client does.
&gt; 
&gt; Ew. That's not very friendly.
&gt; 
&gt; Why did you not just extend the protocol buffer to have another set of
&gt; fields for the (optional) secondary indexes...?
&gt; 
&gt; Guess I'm digging into the Erlang client. =(
&gt; 
&gt; -mox
&gt; 
