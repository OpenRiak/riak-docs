---
title: "Re: Error building Riak, skerl(compile), Ubuntu 10.04 64-bit,	Erlang R14B02"
description: ""
project: community
lastmod: 2011-03-19T08:15:07-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02685"
mailinglist_parent_id: "msg02682"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2011-03-19T08:15:07-07:00
---


Chris,

Because of changes to the NIF implementation, not all sub-projects are 
compatible with R14B02 yet. For now you should use a clone of the root "riak" 
repository, or use the binary version from downloads.basho.com.

Sean Cribbs 
Developer Advocate
Basho Technologies, Inc.
http://basho.com/

On Mar 18, 2011, at 6:31 PM, Chris Laskey wrote:

&gt; Hey All,
&gt; 
&gt; Having trouble compiling Riak from source on a Ubuntu 10.04 64-bit box. I'm 
&gt; using the most recent Riak commit from GitHub, and have a working 
&gt; installation of Erlang R14B02 from source. Previously this machine had a 
&gt; working install of Riak using the riak\\_0.14.0-1\\_amd64.deb and Erlang R13B03 
&gt; packages. Both packages were dpkg --purge 'd prior to updating to Erlang to 
&gt; R14B02.
&gt; 
&gt; Any thoughts appreciated,
&gt; 
&gt; Cheers,
&gt; 
&gt; Chris
&gt; 
&gt; 
&gt; #: /opt/riak$ make rel
&gt; ./rebar get-deps
&gt; ==&gt; rel (get-deps)
&gt; ==&gt; riak\\_0.14.0.1 (get-deps)
&gt; Pulling cluster\\_info from {git,"git://github.com/basho/cluster\\_info",
&gt; {branch,"master"}}
&gt; Initialized empty Git repository in /opt/riak\\_0.14.0.1/deps/cluster\\_info/.git/
&gt; Pulling luwak from {git,"git://github.com/basho/luwak",{branch,"master"}}
&gt; Initialized empty Git repository in /opt/riak\\_0.14.0.1/deps/luwak/.git/
&gt; Pulling riak\\_kv from {git,"git://github.com/basho/riak\\_kv",{branch,"master"}}
&gt; Initialized empty Git repository in /opt/riak\\_0.14.0.1/deps/riak\\_kv/.git/
&gt; Pulling riak\\_err from {git,"git://github.com/basho/riak\\_err",
&gt; {branch,"master"}}
&gt; Initialized empty Git repository in /opt/riak\\_0.14.0.1/deps/riak\\_err/.git/
&gt; ==&gt; cluster\\_info (get-deps)
&gt; ==&gt; riak\\_kv (get-deps)
&gt; Pulling riak\\_core from {git,"git://github.com/basho/riak\\_core",
&gt; {branch,"master"}}
&gt; Initialized empty Git repository in /opt/riak\\_0.14.0.1/deps/riak\\_core/.git/
&gt; Pulling riakc from {git,"git://github.com/basho/riak-erlang-client",
&gt; {tag,"riakc-1.0.2"}}
&gt; Initialized empty Git repository in /opt/riak\\_0.14.0.1/deps/riakc/.git/
&gt; Pulling luke from {git,"git://github.com/basho/luke",{tag,"luke-0.2.3"}}
&gt; Initialized empty Git repository in /opt/riak\\_0.14.0.1/deps/luke/.git/
&gt; Pulling erlang\\_js from {git,"git://github.com/basho/erlang\\_js",
&gt; {tag,"erlang\\_js-0.5.0"}}
&gt; Initialized empty Git repository in /opt/riak\\_0.14.0.1/deps/erlang\\_js/.git/
&gt; Pulling bitcask from {git,"git://github.com/basho/bitcask",{branch,"master"}}
&gt; Initialized empty Git repository in /opt/riak\\_0.14.0.1/deps/bitcask/.git/
&gt; Pulling ebloom from {git,"git://github.com/basho/ebloom",{branch,"master"}}
&gt; Initialized empty Git repository in /opt/riak\\_0.14.0.1/deps/ebloom/.git/
&gt; Pulling eper from {git,"git://github.com/dizzyd/eper.git",{branch,"master"}}
&gt; Initialized empty Git repository in /opt/riak\\_0.14.0.1/deps/eper/.git/
&gt; ==&gt; riak\\_core (get-deps)
&gt; Pulling protobuffs from {git,"git://github.com/basho/erlang\\_protobuffs",
&gt; {tag,"protobuffs-0.5.1"}}
&gt; Initialized empty Git repository in /opt/riak\\_0.14.0.1/deps/protobuffs/.git/
&gt; Pulling basho\\_stats from {git,"git://github.com/basho/basho\\_stats","HEAD"}
&gt; Initialized empty Git repository in /opt/riak\\_0.14.0.1/deps/basho\\_stats/.git/
&gt; Pulling riak\\_sysmon from {git,"git://github.com/basho/riak\\_sysmon",
&gt; {branch,"master"}}
&gt; Initialized empty Git repository in /opt/riak\\_0.14.0.1/deps/riak\\_sysmon/.git/
&gt; Pulling webmachine from {git,"git://github.com/basho/webmachine",
&gt; {tag,"webmachine-1.8.0"}}
&gt; Initialized empty Git repository in /opt/riak\\_0.14.0.1/deps/webmachine/.git/
&gt; ==&gt; protobuffs (get-deps)
&gt; ==&gt; basho\\_stats (get-deps)
&gt; ==&gt; riak\\_sysmon (get-deps)
&gt; ==&gt; webmachine (get-deps)
&gt; Pulling mochiweb from {git,"git://github.com/basho/mochiweb",
&gt; {tag,"mochiweb-1.7.1"}}
&gt; Initialized empty Git repository in /opt/riak\\_0.14.0.1/deps/mochiweb/.git/
&gt; ==&gt; mochiweb (get-deps)
&gt; ==&gt; riakc (get-deps)
&gt; ==&gt; luke (get-deps)
&gt; ==&gt; erlang\\_js (get-deps)
&gt; ==&gt; ebloom (get-deps)
&gt; ==&gt; bitcask (get-deps)
&gt; ==&gt; eper (get-deps)
&gt; ==&gt; luwak (get-deps)
&gt; Pulling skerl from {git,"git://github.com/basho/skerl",{tag,"skerl-1.0.0"}}
&gt; Initialized empty Git repository in /opt/riak\\_0.14.0.1/deps/skerl/.git/
&gt; ==&gt; skerl (get-deps)
&gt; ==&gt; riak\\_err (get-deps)
&gt; ./rebar compile generate
&gt; ==&gt; cluster\\_info (compile)
&gt; Compiled src/cluster\\_info\\_ex.erl
&gt; Compiled src/cluster\\_info.erl
&gt; ==&gt; skerl (compile)
&gt; Compiled src/skerl.erl
&gt; Compiled src/hex.erl
&gt; Compiling c\\_src/skein.c
&gt; Compiling c\\_src/skein\\_api.c
&gt; Compiling c\\_src/skein\\_block.c
&gt; Compiling c\\_src/skein\\_debug.c
&gt; Compiling c\\_src/skerl\\_nifs.c
&gt; c\\_src/skerl\\_nifs.c:2:21: error: erl\\_nif.h: No such file or directory
&gt; c\\_src/skerl\\_nifs.c:7: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘\\_\\_attribute\\_\\_’ 
&gt; before ‘\\*’ token
&gt; c\\_src/skerl\\_nifs.c:14: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or 
&gt; ‘\\_\\_attribute\\_\\_’ before ‘skein\\_init’
&gt; c\\_src/skerl\\_nifs.c:15: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or 
&gt; ‘\\_\\_attribute\\_\\_’ before ‘skein\\_update’
&gt; c\\_src/skerl\\_nifs.c:16: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or 
&gt; ‘\\_\\_attribute\\_\\_’ before ‘skein\\_final’
&gt; c\\_src/skerl\\_nifs.c:17: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or 
&gt; ‘\\_\\_attribute\\_\\_’ before ‘skein\\_hash’
&gt; c\\_src/skerl\\_nifs.c:19: error: expected ‘)’ before ‘\\*’ token
&gt; c\\_src/skerl\\_nifs.c:21: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or 
&gt; ‘\\_\\_attribute\\_\\_’ before ‘nif\\_funcs’
&gt; c\\_src/skerl\\_nifs.c:29: error: expected ‘)’ before ‘(’ token
&gt; c\\_src/skerl\\_nifs.c:33: error: expected ‘)’ before ‘\\*’ token
&gt; c\\_src/skerl\\_nifs.c:39: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or 
&gt; ‘\\_\\_attribute\\_\\_’ before ‘skein\\_init’
&gt; c\\_src/skerl\\_nifs.c:58: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or 
&gt; ‘\\_\\_attribute\\_\\_’ before ‘skein\\_update’
&gt; c\\_src/skerl\\_nifs.c:73: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or 
&gt; ‘\\_\\_attribute\\_\\_’ before ‘skein\\_final’
&gt; c\\_src/skerl\\_nifs.c:89: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or 
&gt; ‘\\_\\_attribute\\_\\_’ before ‘skein\\_hash’
&gt; ERROR: $CC -c $CFLAGS $DRV\\_CFLAGS c\\_src/skerl\\_nifs.c -o c\\_src/skerl\\_nifs.o 
&gt; failed with error: 1
&gt; make: \\*\\*\\* [rel] Error 1

