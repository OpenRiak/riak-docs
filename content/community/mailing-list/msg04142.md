---
title: "Re: Getting a value: get vs map"
description: ""
project: community
lastmod: 2011-07-29T07:59:49-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg04142"
mailinglist_parent_id: "msg04141"
author_name: "Jonathan Langevin"
project_section: "mailinglistitem"
sent_date: 2011-07-29T07:59:49-07:00
---


And it's a bit ironic that having data spread over more servers results in
slower performance. Usually more servers = greater performance.
...black is white, up is down...
\\*


Jonathan Langevin
Systems Administrator
Loom Inc.
Wilmington, NC: (910) 241-0433 - jlange...@loomlearning.com -
www.loomlearning.com - Skype: intel352
\\*


On Fri, Jul 29, 2011 at 10:27 AM, Jeremiah Peschka &lt;
jeremiah.pesc...@gmail.com&gt; wrote:

&gt; I would have suspected that an MR job where you supply a Bucket, Key pair
&gt; would be just as fast as a Get request. Shows what I know.
&gt; ---
&gt; Jeremiah Peschka
&gt; Founder, Brent Ozar PLF, LLC
&gt;
&gt; On Jul 29, 2011, at 1:37 AM, Antonio Rohman Fernandez wrote:
&gt;
&gt; &gt; MapReduce ( or a simply Map ) gets really slow when database has a
&gt; significant amount of data ( or distributed over several servers ). Get
&gt; instead is always faster as Riak doesn't have to search for the key ( you
&gt; tell Riak exactly where to GET the data in your url )
&gt; &gt;
&gt; &gt; Rohman
&gt; &gt;
&gt; &gt; On Thu, 28 Jul 2011 23:43:06 +0400, m...@mawhrin.net wrote:
&gt; &gt;
&gt; &gt;&gt; Hi,
&gt; &gt;&gt;
&gt; &gt;&gt; (I looked at various places for the information, however I could not
&gt; &gt;&gt; find anything that would answer the question. It's not completely ruled
&gt; &gt;&gt; out that not all places were checked though :))
&gt; &gt;&gt;
&gt; &gt;&gt; I use PB erlang interface to access the database. Given a bucket name
&gt; &gt;&gt; and a key, the value can easily be extracted using:
&gt; &gt;&gt;
&gt; &gt;&gt; {ok, Object} = riakc\\_pb\\_socket:get(Conn, Bucket, Key),
&gt; &gt;&gt; Value = riakc\\_obj:get\\_value(Object)
&gt; &gt;&gt;
&gt; &gt;&gt; Alternatively, a mapred (actually, just map) request could be issued:
&gt; &gt;&gt;
&gt; &gt;&gt; {ok, [{\\_, Value}]} = riakc\\_pb\\_socket:mapred(Conn, [
&gt; &gt;&gt; {Bucket, Key}
&gt; &gt;&gt; ], [
&gt; &gt;&gt; {map, {modfun, riak\\_kv, map\\_object\\_value}, none, true}
&gt; &gt;&gt; ])
&gt; &gt;&gt;
&gt; &gt;&gt; I would expect that the result is the same while in the second case, the
&gt; &gt;&gt; amount of data transferred to the client is smaller (which might be good
&gt; &gt;&gt; for certain situations).
&gt; &gt;&gt;
&gt; &gt;&gt; So the [open] question is: are there any reasons for using the first
&gt; &gt;&gt; approach over the second?
&gt; &gt;&gt;
&gt; &gt;&gt; --
&gt; &gt;&gt; Misha
&gt; &gt;&gt;
&gt; &gt; --
&gt; &gt;
&gt; &gt; Antonio Rohman Fernandez
&gt; &gt; CEO, Founder & Lead Engineer
&gt; &gt; roh...@mahalostudio.com Projects
&gt; &gt; MaruBatsu.es
&gt; &gt; PupCloud.com
&gt; &gt; Wedding Album

