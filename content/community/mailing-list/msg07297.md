---
title: "Re: riak-users Digest, Vol 33, Issue 29"
description: ""
project: community
lastmod: 2012-04-23T16:26:44-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07297"
mailinglist_parent_id: "msg07260"
author_name: "Ryan Zezeski"
project_section: "mailinglistitem"
sent_date: 2012-04-23T16:26:44-07:00
---


Elias, comments inline.

On Fri, Apr 20, 2012 at 12:15 PM, Elias Levy wrote:
&gt;
&gt; I disagree. Yes, Riak is in general a simple system from an architecture
&gt; standpoint. But often the that simplicity is an obstacle, as you must
&gt; solve more complex problem using Riak as a base.
&gt;

I agree, distributed systems are hard, even when they are simple.


&gt; How to trade off between secondary indexes and search?
&gt;

This is an area I am actively working on, it just isn't too visible to the
outside world yet. I've recently started a prototype to fuse the 2i
interface on top of Search's engine.


&gt; How to configure search indexes so it does not blow up when you got very
&gt; high volume low cardinality or very high cardinality terms (faking
&gt; multicolumn indexes and bucketing)?
&gt;

I'm also doing work on this to make conjunction queries safer, do less
work, and have better latencies. A query that produces a "large" result
set is still problematic but a conjunction of small and large result sets
will be much, much better. I saw very significant improvement on a
particular work load but I need to do more benchmarking on "real" hardware.

https://github.com/rzezeski/riak\\_search/tree/rz-conjunction
https://github.com/rzezeski/riak\\_search/tree/rz-no-unnecessary-work


&gt; How to reindex data in the store?
&gt; How to repair data in the store if you loose a node without the Enterprise
&gt; version?
&gt;

These are two HUGE pain points in Search. Currently it is my #1 problem to
address and it will be a multi-faceted approach. The first thing I'm doing
is building a repair cmd which will allow you to specify a broken partition
and it will smartly rebuild it based on the surrounding partitions. I've
already done a prototype that passes some basic tests but it has diverged
into some riak\\_core work to help support it. These are the prototype
branches:

https://github.com/basho/riak\\_search/tree/rz-repair-cmd
https://github.com/basho/riak\\_core/tree/rz-repair-cmd

-Z
