---
title: "Re: Java PB API: r-value exception"
description: ""
project: community
lastmod: 2012-07-23T09:17:11-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08032"
mailinglist_parent_id: "msg08013"
author_name: "Brian Roach"
project_section: "mailinglistitem"
sent_date: 2012-07-23T09:17:11-07:00
---


Hi Kaspar,

In your first example, you're trying to permanently change the bucket's r 
parameter; createBucket() returns a WriteBucket which when executed writes 
these values to Riak. We currently don't have support for this in the protobuf 
API.

In your DomainBucket example you're setting the r value for the individual read 
operations (which is supported via PB), rather than bucket parameter itself. It 
gets passed to the underlying StoreObject.

Thanks,
Brian Roach


On Jul 21, 2012, at 6:45 AM, Kaspar Thommen wrote:

&gt; Hi,
&gt; 
&gt; I'm confused about the r-value when using the Java API. When I call:
&gt; 
&gt; Bucket bucket = 
&gt; RiakFactory.pbcClient().createBucket("myBucket").r(2).execute();
&gt; 
&gt; I get the following exception:
&gt; 
&gt; com.basho.riak.client.bucket.UnsupportedPropertyException: r not supported 
&gt; for PB
&gt; at 
&gt; com.basho.riak.client.bucket.WriteBucket.httpOnly(WriteBucket.java:539)
&gt; at com.basho.riak.client.bucket.WriteBucket.r(WriteBucket.java:332)
&gt; 
&gt; However, when I run this:
&gt; 
&gt; DomainBucket myDomainBucket = 
&gt; DomainBucket.builder(RiakFactory.pbcClient().createBucket("myBucket").execute(),
&gt; MyDomainObject.class).r(2).build();
&gt; 
&gt; and then later call any of the CRUT operations on that domain bucket I get no 
&gt; exception. Why would I get it on the low-level Bucket API but not on the 
&gt; high-level DomainBucket API?
&gt; 
&gt; Thanks,
&gt; Kaspar
&gt; 
