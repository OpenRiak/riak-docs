---
title: "2i with the riakc client"
description: ""
project: community
lastmod: 2012-07-22T13:49:37-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08023"
author_name: "Jeremy Ong"
project_section: "mailinglistitem"
sent_date: 2012-07-22T13:49:37-07:00
---


I am trying to store objects with indexed metadata but am running into
various difficulties (commands in bold).

\\*Obj = riakc\\_obj:new(&lt;&lt;"foo"&gt;&gt;, &lt;&lt;"bar"&gt;&gt;, &lt;&lt;"zing"&gt;&gt;).\\*
{riakc\\_obj,&lt;&lt;"foo"&gt;&gt;,&lt;&lt;"bar"&gt;&gt;,undefined,[],undefined,
 &lt;&lt;"zing"&gt;&gt;}
\\*
\\*
\\*MetaData = dict:store(&lt;&lt;"index"&gt;&gt;, [{"afield", "avalue"}], dict:new()).\\*
{dict,1,16,16,8,80,48,
 {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
 {{[],[],[],[],[],[],[],[],[],[],[],
 [[&lt;&lt;"index"&gt;&gt;,{"afield","avalue"}]],
 [],[],[],[]}}}

\\*Obj1 = riakc\\_obj:update\\_metadata(Obj, MetaData).\\*
{riakc\\_obj,&lt;&lt;"foo"&gt;&gt;,&lt;&lt;"bar"&gt;&gt;,undefined,[],
 {dict,1,16,16,8,80,48,
 {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],...},
 {{[],[],[],[],[],[],[],[],[],[],[],[[...]],[],...}}},
 &lt;&lt;"zing"&gt;&gt;}

\\*{ok, Pid} = riakc\\_pb\\_socket:start\\_link("127.0.0.1", 8087).\\*
{ok,&lt;0.103.0&gt;}

\\*riakc\\_pb\\_socket:put(Pid, Obj1).\\*
\\*
\\*
{error,{0,
 &lt;&lt;"{precommit\\_fail,[{unknown\\_field\\_type,&lt;&lt;\\"afield\\"&gt;&gt;}]}"&gt;&gt;}}


I get this error when I try other things for the field name too. Any ideas?
I tried to look for documentation but nothing seems to be coming up.

Thanks,
Jeremy
