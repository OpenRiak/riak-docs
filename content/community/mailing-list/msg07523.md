---
title: "Re: Riak Client Resources,	Deleting a Key Doesn't Remove it from bucket.keys"
description: ""
project: community
lastmod: 2012-05-23T14:22:08-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07523"
mailinglist_parent_id: "msg07522"
author_name: "Reid Draper"
project_section: "mailinglistitem"
sent_date: 2012-05-23T14:22:08-07:00
---


Steve, Kyle,

In order to track it down, I'd like to be able to reproduce this issue.
Can you provide some minimal Java code to reproduce, from an empty
Riak cluster? Please include any changes to the Riak app.config as well.

Some things to think about in writing code to reproduce:

\\* Are you connecting to a single node? Using a load-balancer? Using
RJC to connect to multiple nodes?

\\* Are you overriding any default bucket properties? Either
for a specific bucket or changing the defaults in the app.confg?

Kyle, are you seeing the same issue where some small number ~200 / 20K
are remaining, or a smaller/larger percent?

Thanks,
Reid Draper

On May 23, 2012, at 4:43 PM, Steve Warren wrote:

&gt; Whew! I was afraid I was the only one!
&gt; 
&gt; On Wed, May 23, 2012 at 1:37 PM, Kyle Kingsbury  wrote:
&gt; On 05/23/2012 01:08 PM, Steve Warren wrote:
&gt; I'm seeing this pretty consistently and have no explanation for it. I
&gt; delete a large number of keys (20k to 100k), but when I then search on
&gt; the keys ($key/0/g) anywhere from 0-200 or so of the deleted keys show
&gt; up in the results. It doesn't matter how long I wait after completing
&gt; the deletion step, the keys stay in the list until I try to access the
&gt; object and then it goes away. I'm using 1.1.2 and the riak-java client,
&gt; and getting no errors on the deletion step.
&gt; 
&gt; We're \\*also\\* seeing this problem: residual keys that persist in 2I for days 
&gt; after deletion, and disappear on get. Using Java client, Riak 1.1.1. If you 
&gt; figure this out I'd like to hear about it.
&gt; 
&gt; --Kyle
&gt; 
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

