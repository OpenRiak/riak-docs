---
title: "Re: Troubleshoot failure to add a node?"
description: ""
project: community
lastmod: 2011-11-09T07:49:54-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05502"
mailinglist_parent_id: "msg05501"
author_name: "Jonathan Langevin"
project_section: "mailinglistitem"
sent_date: 2011-11-09T07:49:54-08:00
---


Had a moment of clarity :-)

\\*
So, telnet failed. Double-checked firewall rules, I had set up the firewall
to allow 192.168.0.0/24, but I needed it to be 192.168.1.0/24. Fun typo.

Checking further, even though I had not previously started Riak on these
servers (at least, not to my knowledge?), riak-admin member\\_status was
still showing the name as riak@127.0.0.1. So I issued a reip on each
server, and then issued join on 2 of the nodes, all 3 are in the cluster
now :-)

Sorry for the trouble, thanks for the assistance!

Cheers

 
 Jonathan Langevin
Manager, Information Technology
Loom Inc.
Wilmington, NC: (910) 241-0433 - jlange...@loomlearning.com -
www.loomlearning.com - Skype: intel352
\\*


On Wed, Nov 9, 2011 at 10:00 AM, Jonathan Langevin &lt;
jlange...@loomlearning.com&gt; wrote:

&gt; Verified ping from cli. In riak console, ping fails with pang response.
&gt; Epmd -names only returns the local instance. Haven't tested telnet yet,
&gt; will shortly.
&gt;
&gt; Join syntax is correct, says node isn't reachable.
&gt; On Nov 9, 2011 9:53 AM, "Rusty Klophaus"  wrote:
&gt;
&gt;&gt; Hi Jonathan,
&gt;&gt;
&gt;&gt; Can you verify that the machines otherwise see each other? (Can you ping
&gt;&gt; or ssh between the three machines?)
&gt;&gt;
&gt;&gt; Can you verify that you can use telnet to connect to the different open
&gt;&gt; ports from each machine?
&gt;&gt;
&gt;&gt; If so, can you double check your usage of `riak-admin join NODENAME`? How
&gt;&gt; does it respond?
&gt;&gt;
&gt;&gt; Finally, can you run `riak attach` to attach to an Erlang shell on one of
&gt;&gt; the nodes, and run \\*net\\_adm:ping('rdevX@192.168.1.Y').\\* for each of the
&gt;&gt; three node names?
&gt;&gt;
&gt;&gt; Hopefully that tells us where things are failing.
&gt;&gt;
&gt;&gt; Best,
&gt;&gt; Rusty
&gt;&gt;
&gt;&gt;
&gt;&gt; On Wed, Nov 9, 2011 at 9:32 AM, Jonathan Langevin &lt;
&gt;&gt; jlange...@loomlearning.com&gt; wrote:
&gt;&gt;
&gt;&gt;&gt; I'm setting up a Riak cluster, I've configured 3 fresh nodes for this
&gt;&gt;&gt; cluster.
&gt;&gt;&gt; The node name per is unique (format of rdevX@192.168.1.Y), firewall is
&gt;&gt;&gt; configured to allow traffic on 8097:8099, 6000:7999, 4369 tcp, 4369 udp
&gt;&gt;&gt;
&gt;&gt;&gt; \\*
&gt;&gt;&gt; Each is configured with the same config aside from names & ips to bind
&gt;&gt;&gt; to.
&gt;&gt;&gt;
&gt;&gt;&gt; I've attempted a ping from riak console, comes back pang.
&gt;&gt;&gt;
&gt;&gt;&gt; Any suggestions?
&gt;&gt;&gt;
&gt;&gt;&gt; 
&gt;&gt;&gt; Jonathan Langevin
&gt;&gt;&gt; Manager, Information Technology
&gt;&gt;&gt; Loom Inc.
&gt;&gt;&gt; Wilmington, NC: (910) 241-0433 - jlange...@loomlearning.com -
&gt;&gt;&gt; www.loomlearning.com - Skype: intel352
&gt;&gt;&gt; \\*
&gt;&gt;&gt;
&gt;&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; --
&gt;&gt; Rusty Klophaus (@rustyio)
&gt;&gt; \\*Basho Technologies, Inc.\\*
&gt;&gt; www.basho.com
&gt;&gt;
&gt;&gt;
&gt;&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

