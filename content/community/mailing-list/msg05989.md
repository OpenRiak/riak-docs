---
title: "Re: Are X-Riak-ClientId and RpbSetClientId deprecated?"
description: ""
project: community
lastmod: 2011-12-18T23:11:53-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05989"
mailinglist_parent_id: "msg05984"
author_name: "Kresten Krab Thorup"
project_section: "mailinglistitem"
sent_date: 2011-12-18T23:11:53-08:00
---


The new vnode vector clock system is far superior IMHO, I can't see a good use 
case for the old one; because there are so many ways to use them incorrectly. 
The new system removes a complication for that needs to be understood by 
"everyone" writing code interacting with a Riak system, and that is the most 
important one I think. With the old system, an inexperienced developer 
(perhaps forgetting to pass in a client id, or generating new ones all the 
time) would eventually cause vector clock pruning, which also causes objects to 
have siblings. We've had several cases where we were thinking that we were 
perhaps using it incorrectly, and that whole worry goes away now.

Kresten


Mobile: + 45 2343 4626 | Skype: krestenkrabthorup | Twitter: @drkrab
Trifork A/S | Margrethepladsen 4 | DK- 8000 Aarhus C | Phone : +45 8732 
8787 | www.trifork.com

On Dec 18, 2011, at 7:32 PM, Andres Jaan Tack wrote:

Sean,

I understand that they are still used when provided. The more fundamental 
question is: as good Riak citizens, should we consider Client IDs deprecated, 
and stop using them in new projects?

--
Andres

2011/12/18 Sean Cribbs &gt;
Andres

Client IDs are still used if the riak\\_kv / vnode\\_vclocks setting is false. If 
it is true, the client ID will simply be ignored. For compatibility's sake, 
it's best to send/set them still.

On Sun, Dec 18, 2011 at 11:12 AM, Andres Jaan Tack 
&gt; wrote:
I guess the fundamental question is: In new clusters unaffected by pre-1.0 
shenanigans, should we ever be using client-provided ClientIds in our vector 
clocks, or is this method deprecated?

I ask because I was deep into figuring out how to do this efficiently with the 
Riak PBC API for PUT requests, when I realized that the documentation for HTTP 
PUT no longer even mentions it.

If client-id isn't totally deprecated, I will probably start finding a way to 
shoehorn it into individual PBC PUT requests, as keeping a per-connection 
client id is very onwieldy. Please advise. :)

--
Andres

--
Sean Cribbs &gt;
Developer Advocate
Basho Technologies, Inc.
http://www.basho.com/

