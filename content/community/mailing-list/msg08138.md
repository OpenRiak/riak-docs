---
title: "Re: Cant remote write to riak"
description: ""
project: community
lastmod: 2012-07-31T11:21:04-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08138"
mailinglist_parent_id: "msg08125"
author_name: "Mark Phillips"
project_section: "mailinglistitem"
sent_date: 2012-07-31T11:21:04-07:00
---


On Mon, Jul 30, 2012 at 5:55 PM, Mark Phillips  wrote:

&gt; Hey David,
&gt;
&gt; On Thu, Jul 26, 2012 at 9:52 PM, David Montgomery &lt;
&gt; davidmontgom...@gmail.com&gt; wrote:
&gt;
&gt;&gt; I found what the problem was. As a newbie I followed the instructions
&gt;&gt; for a basic cluster setup to the T. Then meant I did not change the
&gt;&gt; defualt {pb\\_ip, "127.0.0.1" }.
&gt;&gt;
&gt;&gt; Great if that would be added in the wiki to change both http and pb\\_ip
&gt;&gt; if desired.
&gt;&gt;
&gt;&gt;
&gt; Would you mind opening an issue for that against the wiki repo[1]? Bonus
&gt; points for sending us a pull request.
&gt;
&gt; Thanks for your help.
&gt;
&gt; Mark
&gt;
&gt; [1] https://github.com/basho/riak\\_wiki
&gt;
&gt;
&gt;
Actually, no need. Clint Shryock took care of it.

https://github.com/basho/riak\\_wiki/pull/334

Thanks, Clint. Put another drink on the Basho tab :)

Mark


&gt;
&gt;
&gt;&gt; thanks
&gt;&gt;
&gt;&gt;
&gt;&gt; On Fri, Jul 27, 2012 at 11:59 AM, David Montgomery
&gt;&gt;  wrote:
&gt;&gt; &gt; As a note, from a remote machine, this command worked curl -v
&gt;&gt; &gt; http://111.222.333.444:8098/riak/test and returned the expected
&gt;&gt; &gt; output.
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt; \\* About to connect() to 111.222.333.444 port 8098 (#0)
&gt;&gt; &gt; \\* Trying 111.222.333.444... connected
&gt;&gt; &gt; \\* Connected to 111.222.333.444 (111.222.333.444) port 8098 (#0)
&gt;&gt; &gt;&gt; GET /riak/test HTTP/1.1
&gt;&gt; &gt;&gt; User-Agent: curl/7.21.3 (x86\\_64-pc-linux-gnu) libcurl/7.21.3
&gt;&gt; OpenSSL/0.9.8o zlib/1.2.3.4 libidn/1.18
&gt;&gt; &gt;&gt; Host: 111.222.333.444:8098
&gt;&gt; &gt;&gt; Accept: \\*/\\*
&gt;&gt; &gt;&gt;
&gt;&gt; &gt; &lt; HTTP/1.1 200 OK
&gt;&gt; &gt; &lt; Vary: Accept-Encoding
&gt;&gt; &gt; &lt; Server: MochiWeb/1.1 WebMachine/1.9.0 (someone had painted it blue)
&gt;&gt; &gt; &lt; Date: Fri, 27 Jul 2012 03:58:22 GMT
&gt;&gt; &gt; &lt; Content-Type: application/json
&gt;&gt; &gt; &lt; Content-Length: 422
&gt;&gt; &gt; &lt;
&gt;&gt; &gt; \\* Connection #0 to host 111.222.333.444 left intact
&gt;&gt; &gt; \\* Closing connection #0
&gt;&gt; &gt;
&gt;&gt; {"props":{"name":"test","allow\\_mult":false,"basic\\_quorum":false,"big\\_vclock":50,"chash\\_keyfun":{"mod":"riak\\_core\\_util","fun":"chash\\_std\\_keyfun"},"dw":"quorum","last\\_write\\_wins":false,"linkfun":{"mod":"riak\\_kv\\_wm\\_link\\_walker","fun":"mapreduce\\_linkfun"},"n\\_val":3,"notfound\\_ok":true,"old\\_vclock":86400,"postcommit":[],"pr":0,"precommit":[],"pw":0,"r":"quorum","rw":"quorum","small\\_vclock":50,"w":"quorum","young\\_vclock":20}}
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt; On Fri, Jul 27, 2012 at 11:40 AM, David Montgomery
&gt;&gt; &gt;  wrote:
&gt;&gt; &gt;&gt; Hi,
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; I have one node installed on my cloud provider and tried to remote
&gt;&gt; &gt;&gt; write using a python client but I get a connection failure.
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; On the riak node:
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; riak-admin status | grep ring\\_members
&gt;&gt; &gt;&gt; ring\\_members : ['r...@xxx.xxx.xxx.xxx]
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; service riak ping
&gt;&gt; &gt;&gt; Attempting to restart script through sudo -u riak
&gt;&gt; &gt;&gt; pong
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; So, I did update the vm.args and app.config with the nodes ip address,
&gt;&gt; &gt;&gt; restarted and set the seed as a ring member.
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; Services are running. I can also telnet into other open ports e.g.
&gt;&gt; &gt;&gt; 22. I have all ports open to the appropriate servers..
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; I am also able to write when using localhost to a bucket on the node.
&gt;&gt; &gt;&gt; I just cant use a remote client.
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; Is there a step I missed with being able to remote write?
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; On the riak node, this works:
&gt;&gt; &gt;&gt; client =
&gt;&gt; riak.RiakClient(host='127.0.0.1',port=8087,transport\\_class=riak.transports.pbc.RiakPbcTransport)
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; This does not work when I write to a bucket on the riak node or any
&gt;&gt; other node:
&gt;&gt; &gt;&gt; client =
&gt;&gt; riak.RiakClient(host='111.222.333.444',port=8087,transport\\_class=riak.transports.pbc.RiakPbcTransport)

&gt;
&gt;
