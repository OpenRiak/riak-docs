---
title: "2i API Questions"
description: ""
project: community
lastmod: 2011-09-29T13:29:23-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg04927"
author_name: "bill robertson"
project_section: "mailinglistitem"
sent_date: 2011-09-29T13:29:23-07:00
---


Love the new feature, I have a couple of questions though.

First is the URL to PUT to, The example from the oscon presentation says to
PUT to

http://whatever:port/buckets/bucket\\_name/keys/key\\_name

rather than the old style URL e.g.

http://whatever:port/riak/bucket\\_name/key\\_name

I've noticed that after doing the put to the new style URL I can still get
from the old style URL, can I still PUT to the old style URL with an index?
I can easily accept that doing a query on an index would involve a different
URL, but having the PUT URL be potentially different from the GET URL is an
inconstancy I'd like to avoid if possible.

Second is the return value of get\\_index in the erlang pb client. It returns
in the format of...

[[&lt;&lt;"bucket"&gt;&gt;,&lt;&lt;"key1"&gt;&gt;],
 [&lt;&lt;"bucket"&gt;&gt;,&lt;&lt;"key2"&gt;&gt;],
 [&lt;&lt;"bucket"&gt;&gt;,&lt;&lt;"key3"&gt;&gt;],
...

But map reduce takes keys in a different format:

[{&lt;&lt;"bucket"&gt;&gt;,&lt;&lt;"key1"&gt;&gt;},
 {&lt;&lt;"bucket"&gt;&gt;,&lt;&lt;"key2"&gt;&gt;},
 {&lt;&lt;"bucket"&gt;&gt;,&lt;&lt;"key3"&gt;&gt;}
...

Its not that its difficult to convert from one format to the other, but its
inconsistent, and it seems like a waste of time (i.e. have to run through
list of keys to convert). My first question is, am I missing something?
 i.e. will the first format work anyway?

If not, then can get\\_index() be changed to generate its results as a list of
bucket/key tuples instead of a list of lists in the first place?

Thanks!
