---
title: "Re: strange behavior upgrading from riak-java-client 1.0.5 -> 1.0.6"
description: ""
project: community
lastmod: 2012-12-28T10:40:24-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg09699"
mailinglist_parent_id: "msg09697"
author_name: "Dietrich Featherston"
project_section: "mailinglistitem"
sent_date: 2012-12-28T10:40:24-08:00
---


On Dec 28, 2012, at 11:28 AM, Brian Roach  wrote:

&gt; Dietrich -
&gt; 
&gt; I haven't seen this in testing or have had anyone report this; could I
&gt; get some more info?
&gt; 
&gt; What operations are timing out like this? Is that the complete message
&gt; in the riak error.log?

That is the complete message in the riak logs. It occurs a number of times each 
with a different number as the first element in the tuple.


&gt; Which version of Riak are you running?
&gt; 
&gt; Do you see this simply dropping in the 1.0.6 client to your existing
&gt; application, or is this after changing your code to use the new
&gt; 'withoutFetch()' ?
&gt; 
&gt; Thanks,
&gt; Brian Roach
&gt; 
&gt; On Wed, Dec 26, 2012 at 7:28 PM, Dietrich Featherston  wrote:
&gt;&gt; I had rolled out an upgrade to a JVM app that uses rjc 1.0.5. We had
&gt;&gt; upgraded to 1.0.6 to take advantage of newly added abilities to do a
&gt;&gt; put without preceding it with a fetch in order to reduce operational
&gt;&gt; load on the cluster. However, after rolling out this change we
&gt;&gt; frequently see large rises in latency across the cluster (up to the
&gt;&gt; gen\\_fsm limit of 60s) and see the following in the riak logs
&gt;&gt; 
&gt;&gt; [error] Unrecognized message {74392380,{error,timeout}}
&gt;&gt; 
&gt;&gt; This is accompanied by repeated socket timeouts as seen by the 
&gt;&gt; riak-java-client.
&gt;&gt; 
&gt;&gt; Also worth mentioning, one of our nodes got into a state that the rjc
&gt;&gt; was unable to establish a tcp connection on the protobuf port to riak
&gt;&gt; on localhost. We were only able to fix this by restarting the riak
&gt;&gt; process on that node and inducing a fair amount of handoff.
&gt;&gt; 
&gt;&gt; Any thoughts?
&gt;&gt; 
&gt;&gt; Thanks,
&gt;&gt; D
&gt;&gt; 

