---
title: "Re: Automatic replacement of dead nodes"
description: ""
project: community
lastmod: 2012-09-13T11:01:26-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08531"
mailinglist_parent_id: "msg08530"
author_name: "Reid Draper"
project_section: "mailinglistitem"
sent_date: 2012-09-13T11:01:26-07:00
---



On Sep 13, 2012, at 1:54 PM, Jonas Tehler  wrote:

&gt; 
&gt; Hi
&gt; 
&gt; The plan was to use autoscaling for replacing a node that had failed for some 
&gt; reason, not for scaling it up and down based on load. If a node fails I would 
&gt; like it replaced as soon as possible and without manual intervention. 

Ah, cool.

&gt; 
&gt; But perhaps you are right in that I should do this manually until I am more 
&gt; familiar with Riak. 

Yes, and for now anyway, you will have to write your own scripts to do this. 
For this specific scenario,
you should look into the replace [1] command.

[1] http://wiki.basho.com/Replacing-a-Node.html (note that this requires Riak 
&gt;= 1.2.0)

Reid

&gt; 
&gt; / Jonas
&gt; 
&gt; 
&gt; On 13 sep 2012, at 19:50, Reid Draper  wrote:
&gt; 
&gt;&gt; Jonas,
&gt;&gt; 
&gt;&gt; I'd be weary of 'autoscaling' a cluster. While it seems nice in theory, 
&gt;&gt; rebalancing
&gt;&gt; data when a node is added or removed from the cluster can be expensive.
&gt;&gt; I'd recommend having a human involved, at least until you have a bit more
&gt;&gt; experience administering a cluster.
&gt;&gt; 
&gt;&gt; To answer your question, yes, you'll have to write the code yourself to 
&gt;&gt; remove
&gt;&gt; the node.
&gt;&gt; 
&gt;&gt; Reid
&gt;&gt; 
&gt;&gt; 
&gt;&gt; On Sep 13, 2012, at 1:30 PM, Jonas Tehler  wrote:
&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; Hi
&gt;&gt;&gt; 
&gt;&gt;&gt; I'm setting up a Riak cluster on some EC2 servers running Ubuntu. The goal 
&gt;&gt;&gt; is to use autoscaling to make sure that I always have the right number of 
&gt;&gt;&gt; nodes online. 
&gt;&gt;&gt; 
&gt;&gt;&gt; When I kill one node (shut down the server, it's gone permanently) and then 
&gt;&gt;&gt; start a new server to replace it (with a new name) the new server can't 
&gt;&gt;&gt; join the cluster because it can't communicate with the dead node. It works 
&gt;&gt;&gt; if I manually mark the dead node as down and remove it form the cluster but 
&gt;&gt;&gt; I would like that to happen automatically (perhaps after a timeout). 
&gt;&gt;&gt; 
&gt;&gt;&gt; Do I have to write my own code that detects this situation and removes the 
&gt;&gt;&gt; dead node from the cluster or is there a way to configure Riak to do this 
&gt;&gt;&gt; for me?
&gt;&gt;&gt; 
&gt;&gt;&gt; / Jonas
&gt;&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; --
&gt;&gt; 
&gt;&gt; CronLab scanned this message. We don't think it was spam. If it was,
&gt;&gt; please report by copying this link into your browser: 
&gt;&gt; https://swe02.antispam.cronlab.com/mail/index.php?id=95E2DADE0B9.A747C-&learn=spam&host=212.91.140.36
&gt;&gt; 
&gt; 

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

