---
title: "Re: Riak Sort on MapReduce"
description: ""
project: community
lastmod: 2012-03-18T11:28:29-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06998"
mailinglist_parent_id: "msg06997"
author_name: "Daniel Reverri"
project_section: "mailinglistitem"
sent_date: 2012-03-18T11:28:29-07:00
---


Hi James 

Based on your stackexchange post it looks like the values passed to the reduce 
function look like [key, data]. This means the sort function would have to 
access the second element of the array and then access the timestamp. 

return b[1]['timestamp'] - a[1]['timestamp'];

Let us know if that works for you. 

Thanks
Dan

Sent from my iPad

On Mar 17, 2012, at 3:09 PM, James Proud  wrote:

&gt; function(values) { 
&gt; 
&gt; 
&gt; return values.sort(
&gt; function(a, b) {
&gt; 
&gt; 
&gt; return b['timestamp'] - a['timestamp'];
&gt; 
&gt; 
&gt; }
&gt; );
&gt; }
&gt; I'm currently executing the above code for the reduce phase of a Riak 
&gt; MapReduce query but it is not correctly sorting by the value of timestamp 
&gt; key. Any ideas why?
&gt; 
&gt; Stackoverflow: 
&gt; http://stackoverflow.com/questions/9752931/riak-sort-on-map-reduce
&gt; 
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

