---
title: "Re: Riak riak_kv_vnode worker pool crashed"
description: ""
project: community
lastmod: 2012-10-12T09:29:55-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08895"
mailinglist_parent_id: "msg08876"
author_name: "Kelly McLaughlin"
project_section: "mailinglistitem"
sent_date: 2012-10-12T09:29:55-07:00
---


Mikhail,

I am familiar with this error. I need to understand more of your situation 
before I can make any recommendations. Can you describe more about what you are 
doing when this happens? How often are you running secondary index queries? How 
many objects are in the bucket you're querying against? What's the size of your 
cluster (both nodes and vnodes)? 

Kelly




On Oct 10, 2012, at 10:29 PM, Mikhail Kuznetsov  
wrote:

&gt; I deploy a test stand for server app demo for clients. Riak 1.2.0 on debian 
&gt; compiled and run with erlang 15b01. Client uses riak erlang protobuf client 
&gt; 1.2. I have to use only one node with almost default config. For storage 
&gt; backend I use eleveldb\\_backend (we use second indexing very often). After 
&gt; several dais of mostly standby wiating (demo application showed once in day 
&gt; or two) riak server start dropping connections (erlang pb client is not 
&gt; notified and show that connection is ok). I look at riak log and find that 
&gt; entries:
&gt; 
&gt; 2012-09-20 00:10:10.976 [error] &lt;0.803.0&gt;@riak\\_core\\_vnode:handle\\_info:510 
&gt; 296867520082839655260123481645494988367611297792 riak\\_kv\\_vnode worker pool 
&gt; crashed 
&gt; {timeout,{gen\\_server,call,[&lt;0.819.0&gt;,{work,&lt;0.806.0&gt;,{fold,#Fun,#Fun},{raw,59205031,&lt;0.28969.11&gt;}}]}}
&gt; 2012-09-20 00:10:10.976 [error] &lt;0.862.0&gt;@riak\\_core\\_vnode:handle\\_info:510 
&gt; 365375409332725729550921208179070754913983135744 riak\\_kv\\_vnode worker pool 
&gt; crashed 
&gt; {timeout,{gen\\_fsm,sync\\_send\\_event,[&lt;0.866.0&gt;,{checkout,false,5000},5000]}}
&gt; 
&gt; ...
&gt; 
&gt; 2012-09-20 00:17:14.234 [error] &lt;0.1645.0&gt; CRASH REPORT Process &lt;0.1645.0&gt; 
&gt; with 0 neighbours exited with reason: 
&gt; {timeout,{gen\\_fsm,sync\\_send\\_event,[&lt;0.1646.0&gt;,{checkout,false,5000},5000]}} 
&gt; in gen\\_fsm:terminate/7 line 611 2012-09-20 00:17:14.639 [error] 
&gt; &lt;0.2337.0&gt;@riak\\_api\\_pb\\_server:handle\\_info:171 Unrecognized message 
&gt; {pipe\\_log,#Ref&lt;0.0.17.19772&gt;,index,{trace,[error],{vnode,{fitting\\_died,1118962191081472546749696200048404186924073353216}}}}
&gt; 2012-09-20 00:17:15.106 [error] &lt;0.1596.0&gt; gen\\_fsm &lt;0.1596.0&gt; in state ready 
&gt; terminated with reason: 
&gt; {timeout,{gen\\_fsm,sync\\_send\\_event,[&lt;0.1597.0&gt;,{checkout,false,5000},5000]}}
&gt; 
&gt; If client make request it gets {error, disconnected}. If we try reconnect it 
&gt; successfully connected and work.
&gt; 
&gt; What should I change in config file or tune client connection to make it work 
&gt; stable? I fully understand that ring is good and haproxy can check nodes(and 
&gt; maybe break connection in this case), but I have only one node for riak on 
&gt; demo server and haproxy is not installed. Can you advise something?
&gt; 
&gt; 
&gt; 
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

