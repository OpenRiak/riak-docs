---
title: "Re: bitcask 42?"
description: ""
project: community
lastmod: 2010-09-30T16:17:00-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01163"
mailinglist_parent_id: "msg01162"
author_name: "Dan Reverri"
project_section: "mailinglistitem"
sent_date: 2010-09-30T16:17:00-07:00
---


Hi Michael,

There is no hard coded limit to the number of nodes that can belong to a
cluster. Depending on how quickly you are adding nodes to the cluster you
may be running into an issue with the ring not converging on a single state.

Can you try using the "riak-admin ringready" command between each join of a
node? This command will return TRUE if the nodes all agree on a particular
ring state. You should run this command until it returns TRUE after each
join.

Also, Alexander is correct; you should deploy your nodes with an increased
value for the "ring\\_creation\\_size" parameter in app.config. The typical
recommendation is to have a minimum of 10 partitions per node and the value
should be a power of 2 (64, 128, 256, 512, 1024). For a 63 node cluster a
value of 1024 would work well.

Thanks,
Dan

Daniel Reverri
Developer Advocate
Basho Technologies, Inc.
d...@basho.com


On Thu, Sep 30, 2010 at 12:02 PM, Alexander Sicular wrote:

&gt; The default vnode number is 64. If you are connecting 63 physical nodes
&gt; togeter in one riak cluster than you really want to increase the number of
&gt; vnodes. There is some recommended metric for physical nodes to vnodes. I
&gt; think it's like a minimum of 4 vnodes per physical node. But I could be
&gt; totally making that up.
&gt;
&gt; -Alexander.
&gt;
&gt;
&gt; @siculars on twitter
&gt; http://siculars.posterous.com
&gt;
&gt; Sent from my iPhone
&gt;
&gt; On Sep 30, 2010, at 14:26, Michael Colussi  wrote:
&gt;
&gt; Hey guys,
&gt;
&gt; My team was trying to launch a 63 node Riak cluster yesterday, using
&gt; version 0.13rc3 and the bitcask backend.
&gt;
&gt; All 63 nodes agreed that the ring consisted of nodes 1-42 only.
&gt;
&gt; Any ideas? Is there a hardcoded limit to the number of nodes allowed?
&gt;
 \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
