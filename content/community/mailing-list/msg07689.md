---
title: "Re: riak_core nodes on Heroku?"
description: ""
project: community
lastmod: 2012-06-14T06:37:39-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07689"
mailinglist_parent_id: "msg07683"
author_name: "Samuel Elliott"
project_section: "mailinglistitem"
sent_date: 2012-06-14T06:37:39-07:00
---


It's actually very much not possible.

Erlang nodes need to listen on one port for the EPMD, and then another
for HTTP (and maybe more for other coordination). Heroku only lets you
listen on a single node per process, and you can't guarantee scaled
processes occur on the same dyno or even machine to another, so you
can't explicitly run epmd separately.

Yes, distribution via other means seems sensible.

As for the routing mesh issues, they seem to have support for
websockets etc in the proxy, so presumably it is possible somehow to
route TCP messages through.

Sam

On Wed, Jun 13, 2012 at 9:51 PM, Jonathan Baudanza  wrote:
&gt; Getting dynos to communicate might be tricky.  When you make an HTTP request
&gt; to heroku, the request first hits the heroku "routing mesh".  The mesh is
&gt; responsible for deciding which dyno will service the request. I don't know
&gt; of any way to explicitly send a request to a specific dyno.
&gt;
&gt; Dynos are also expected to use no more than 512MB of memory.
&gt;
&gt; This article gives more information on how dynos operate and their
&gt; restrictions.
&gt; https://devcenter.heroku.com/articles/dynos
&gt;
&gt; Despite all of this, it might be fun to try anyway just to see the results!
&gt; Let us know how it goes.
&gt;
&gt; On Wed, Jun 13, 2012 at 1:01 PM, Jon Brisbin  wrote:
&gt;&gt;
&gt;&gt; So long as the dynos can communicate with one another and cooperate via
&gt;&gt; node communication, the stateless nature of the application doesn't really
&gt;&gt; matter. I don't need to persist anything once a dyno is shut down.
&gt;&gt;
&gt;&gt; The thing that makes me curious is whether the things riak\\_core (not
&gt;&gt; riak\\_kv) depends on (handoff particularly) could be shoehorned into this
&gt;&gt; environment using the stock tools. I suspect not but wanted to scratch an
&gt;&gt; intellectual itch. :)
&gt;&gt;
&gt;&gt; Thanks!
&gt;&gt;
&gt;&gt; Jon Brisbin
&gt;&gt; http://about.me/jbrisbin
&gt;&gt;
&gt;&gt; On Jun 13, 2012, at 2:44 PM, Jonathan Baudanza wrote:
&gt;&gt;
&gt;&gt; Hi Jeff,
&gt;&gt;
&gt;&gt; Dynos on Heroku don't have access to any permanent disk storage.  They can
&gt;&gt; read and write to /tmp, but that is not guaranteed to stick around.
&gt;&gt;
&gt;&gt; Dynos are also restricted to only accept HTTP connections.  This would
&gt;&gt; rule out any ProtocolBuffer connections.
&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; Curious if anyone is able to use clustered nodes on Heroku using the
&gt;&gt;&gt; Erlang buildpack [1]? Seems like it should at least be theoretically
&gt;&gt;&gt; possible to launch new dynos that become part of your node cluster. How
&gt;&gt;&gt; reliable/easy/hard is node communication on EC2?
&gt;&gt;&gt; [1] - https://github.com/heroku/heroku-buildpack-erlang
&gt;&gt;
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;
&gt;
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;



-- 
Samuel Elliott
s...@lenary.co.uk
http://lenary.co.uk/
+44 (0)7891 993 664

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

