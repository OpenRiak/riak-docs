---
title: "Re: Number of replica for Luwak"
description: ""
project: community
lastmod: 2011-02-18T16:34:31-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02383"
mailinglist_parent_id: "msg02380"
author_name: "Ryan Zezeski"
project_section: "mailinglistitem"
sent_date: 2011-02-18T16:34:31-08:00
---


I realized what I just said is confusing. I start out saying there is no
N/W/R in Luwak and end by saying essentially the opposite. Maybe I
shouldn't reply on my iPhone while drinking a beer on my front stoop? Such
a nice night in Baltimore.

Luwak has no \\_direct\\_ notion of N/W/R. You can't call a Luwak specific URL
or Luwak Erlang API and pass it those properties. No. However, underneath
the surface, Luwak uses two Riak buckets to store all it's data. They are
'luwak\\_tld' and 'luwak\\_node'. Without getting into much detail, the first
stores the file metadata object (Top Level Document), and the later stores
the actual data chunks. That said, if you want all objects stored in Luwak
to have a N=4 then you should first set the bucket props accordingly on the
two luwak buckets.

Maybe it would be nice to have these properties available via the app.config
to make it more obvious? Then again, I've been drinking.

-Ryan

On Fri, Feb 18, 2011 at 6:44 PM, Ryan Zezeski  wrote:

&gt; Hi Aditya,
&gt;
&gt; There are no concepts of N, W, or R in Luwak. This is because Luwak is
&gt; built \\_on top\\_ of Riak. To be more specific, Luwak takes a large file and
&gt; chunks it into smaller pieces. These smaller pieces are then hashed, and
&gt; stored under a key equal to the hash value. That is, Luwak uses something
&gt; called a hash tree to store data. This has the nice benefit that you don't
&gt; take a storage hit for redundant data because Luwak files will share data
&gt; they have in common. However, it has the drawback that deleting something
&gt; is non-trivial, and currently Luwak does not actually remove the data when
&gt; you delete a file.
&gt;
&gt; If you want to change the N/W/R props of Luwak (as a whole) then you can do
&gt; so by setting the luwak\\_node and luwak\\_tld bucket props appropriately.
&gt;
&gt; -Ryan
&gt;
&gt; [Sent from my iPhone]
&gt;
&gt; On Feb 18, 2011, at 4:31 PM, Aditya Patadia  wrote:
&gt;
&gt; &gt; How can I set the number of replica for the Luwak ?? I want to store
&gt; atleast 4 replica of my files uploaded to luwak. One more thing.. how to set
&gt; 'r' value and 'w' value for the luwak??
&gt; &gt;
