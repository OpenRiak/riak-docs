---
title: "Slow performance on getting via 2i"
description: ""
project: community
lastmod: 2012-03-09T05:34:19-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06924"
author_name: "ivenhov"
project_section: "mailinglistitem"
sent_date: 2012-03-09T05:34:19-08:00
---


Hi
I'm using Riak Java client in 3-node configuration with protocols buf.
I have 3000 keys in a bucket, the other buckets are almost empty
When I grab all the keys in a bucket (discouraged listing)

like this
 Bucket b = \\_iclient.fetchBucket(BUCKET\\_NAME).execute();
 Iterator iterator = b.keys().iterator();

I can get them in under 300ms, which is good

But when I do this:
 final Bucket b = \\_iclient.createBucket(BUCKET\\_NAME).execute();
 List keys =
b.fetchIndex(BinIndex.named("idx\\_key")).withValue(filter.toString()).execute();

It's 10 times slower, it takes about 2700ms.
All entries are tagged with the same index value and I'm getting all 3000
keys, but why is it so much slower? Am I doing something wrong? Is it some
MapReduce going on somewhere that kills the performance?


Thanks
Daniel


--
View this message in context: 
http://riak-users.197444.n3.nabble.com/Slow-performance-on-getting-via-2i-tp3812663p3812663.html
Sent from the Riak Users mailing list archive at Nabble.com.

