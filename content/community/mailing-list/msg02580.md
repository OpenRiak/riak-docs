---
title: "Re: Advices for cluster optimal configuration"
description: ""
project: community
lastmod: 2011-03-08T14:58:07-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02580"
mailinglist_parent_id: "msg02579"
author_name: "Alexander Sicular"
project_section: "mailinglistitem"
sent_date: 2011-03-08T14:58:07-08:00
---


Return body = false has no impact on the consistency of your data. It will just 
lighten your network traffic.


On Mar 8, 2011, at 2:10 PM, Thibault Dory wrote:

&gt; Thank you for your input Jeremiah,
&gt; 
&gt; I would like to keep the strong consistency when I'm writing data, so I will 
&gt; keep the current setting. 
&gt; I'm not benchmarking the bulk load part but random read/update and MapReduce 
&gt; performances, can I turn off the returnbody and still keep my strong 
&gt; consistency and still see the errors?
&gt; 
&gt; As I'm benchmarking MapReduce performances I cannot set the number of reduce 
&gt; VM to zero. 
&gt; 
&gt; 2011/3/8 Jeremiah Peschka 
&gt; There are a few things that you can do to speed up your load. When you're 
&gt; writing your data, you can set both W and DW to 0 (as long as you have a way 
&gt; to check for errors). This will shave a bit of time off of each write because 
&gt; you'll be throwing writes against the database and hoping that they stick. 
&gt; You can also set the returnbody to false. Returnbody defaults to true IIRC. 
&gt; When returnbody enabled, Riak will return the object you wrote and also 
&gt; include the Riak specific info (vclock, etc). I don't care about these things 
&gt; when I'm doing a bulk load, so I turn that sort of thing off.
&gt; 
&gt; Depending on the type of querying you're doing, you can adjust the JavaScript 
&gt; VM settings. For example, if you aren't doing any reduce phases in your 
&gt; queries, then you can set the number of reduce VMs to 0. Since you're 
&gt; probably only doing key lookups, you can probably kill off all of the 
&gt; JavaScript VMs.
&gt; 
&gt; I suspect somebody smarter will have better input and will correct me, but 
&gt; that's my 2 cents worth.
&gt; 
&gt; -- 
&gt; Jeremiah Peschka
&gt; Microsoft SQL Server MVP
&gt; MCITP: Database Developer, DBA
&gt; On Tuesday, March 8, 2011 at 8:34 AM, Thibault Dory wrote:
&gt; 
&gt;&gt; Hello,
&gt;&gt; 
&gt;&gt; I'm benchmarking various noSQL databases (see www.nosqlbenchmarking.com for 
&gt;&gt; current results and configurations used) for my master's thesis and I'm 
&gt;&gt; going to apply this benchmark on bigger clusters. Indeed for the moment I 
&gt;&gt; have only used a small cluster of 8 servers with a very small data set 
&gt;&gt; (20000 articles from Wikipedia) to conduct those tests. 
&gt;&gt; 
&gt;&gt; I will use up to 100 servers (2Gb, 4 CPU, 80Gb hdd) from the Rackspace cloud 
&gt;&gt; and the new data set is the entire English version of Wikipedia. Each 
&gt;&gt; article is store as a single document with a unique ID based on a integer, 
&gt;&gt; you can see the implementation here : 
&gt;&gt; https://github.com/toflames/Wikipedia-noSQL-Benchmark/blob/master/src/implementations/riakDB.java
&gt;&gt; and the benchmark methodology here : 
&gt;&gt; http://www.slideshare.net/ThibaultDory/a-new-methodology-for-large
&gt;&gt; 
&gt;&gt; I would like to know if some of you have advice on how I could take the best 
&gt;&gt; out of Riak for this specific use case and on this kind of server. For 
&gt;&gt; example I would like to know if there are some memory/cache tunings that 
&gt;&gt; could be useful to match this server size. 
&gt;&gt; 
&gt;&gt; Any other input or critic is welcome,
&gt;&gt; 
&gt;&gt; Thank you,
&gt;&gt; 
&gt;&gt; 
&gt;&gt; Thibault Dory 
&gt; 
&gt; 
