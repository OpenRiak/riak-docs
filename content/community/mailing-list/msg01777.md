---
title: "Re: Ordered index in Riak"
description: ""
project: community
lastmod: 2010-12-11T14:00:34-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01777"
mailinglist_parent_id: "msg01776"
author_name: "Alexander Sicular"
project_section: "mailinglistitem"
sent_date: 2010-12-11T14:00:34-08:00
---


@siculars on twitter
http://siculars.posterous.com

Sent from my iPhone

On Dec 11, 2010, at 16:44, Sean Cribbs  wrote:

As with all multi-object retrievals, you'll need to use MapReduce. 
Make the last phase of your query a "sort" phase. If the result of 
your map phase is a JSON object that contains the "timestamp" field, 
the reduce phase might look like this:


function(values){
 return values.sort(function(a,b){ return a.timestamp - 
b.timestamp; });

}

Date.parse(a.timestamp) - Date.parse(b.timestamp)

If timestamp is a string value that javascript's Date.parse can parse 
into an int. Otherwise standard JavaScript sorts sorts by alpha 
ascending and you won't get the date sort you're looking for.


If your key includes the timestamp, you could return the whole 
object from the map phase, and sort by the key instead. This will 
be even easier if your timestamp is in a reasonable format, e.g. 
ISO8601, where lexical and numeric sorting are essentially 
equivalent. The function above assumes you're using a numerical 
timestamp value, like UNIX epoch time.


Sean Cribbs 
Developer Advocate
Basho Technologies, Inc.
http://basho.com/

On Dec 11, 2010, at 4:17 PM, Joshua Partogi wrote:


Hi there,

As I have been told, there is no ordered index in riak. So my 
question is, how do you guys implement an ordered index or how do 
you order a set of data in riak i.e by timestamps?


Thanks for sharing.

--
http://twitter.com/jpartogi
