---
title: "problem with Riak search while searching with ruby client."
description: ""
project: community
lastmod: 2010-12-29T17:18:52-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01855"
author_name: "Krishna Krishnamaneni"
project_section: "mailinglistitem"
sent_date: 2010-12-29T17:18:52-08:00
---


Hi, 
 I am using Riak search and I am trying to run a search using ruby client but 
i get back an error : 

 &gt;&gt; c.search("tipdt", "t:restaurant")
Riak::FailedRequest: Expected 200 from Riak but received 500. 
500 Internal Server ErrorInternal 
Server Error
======================

The server encountered an error while processing this 
request:  

```
{error,{throw,{unhandled_type,date},
              [{riak_solr_output,convert_type,2},
               {riak_indexed_doc,'-to_mochijson2/2-lc$^0/1-0-',2},
               {riak_indexed_doc,'-to_mochijson2/2-lc$^0/1-0-',2},
               {riak_indexed_doc,to_mochijson2,2},
               {riak_solr_output,'-json_response/7-lc$^0/1-0-',2},
               {riak_solr_output,json_response,7},
               {riak_solr_searcher_wm,to_json,2},
               
{webmachine_resource,resource_call,3}]}}
```


---

mochiweb+webmachine
 web server


 from 
/Library/Ruby/Gems/1.8/gems/riak-client-0.8.2/lib/riak/client/curb\\_backend.rb:70:in
 `perform'
 from 
/Library/Ruby/Gems/1.8/gems/riak-client-0.8.2/lib/riak/client/http\\_backend.rb:72:in
 `get'
 from 
/Library/Ruby/Gems/1.8/gems/riak-client-0.8.2/lib/riak/search.rb:53:in `search'
 from (irb):3

 Did anyone see this before, when i run a query through http it works with xml 
response, but if i ask for json format it gives me the same error as above, I 
have 4 fields in the document, 2 of them are string type and 1 of them is date 
type and the other one if of number type. any thoughts?

Thanks in advance, 
Krishna.

