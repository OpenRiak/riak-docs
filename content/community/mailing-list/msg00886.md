---
title: "Re: value not_found - error"
description: ""
project: community
lastmod: 2010-08-15T08:33:31-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg00886"
mailinglist_parent_id: "msg00885"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2010-08-15T08:33:31-07:00
---


Malka,

If you want to throw away not\\_found results (and not do anything with them), 
then add a reduce phase in-between your map phases that uses the function 
Riak.filterNotFounds. That will remove any not\\_found objects produced by the 
previous map phase.

Sean Cribbs 
Developer Advocate
Basho Technologies, Inc.
http://basho.com/

On Aug 15, 2010, at 5:33 AM, malka feldman wrote:

&gt; Hi, 
&gt; I have a node.js app with riak-js.
&gt; I wrote a map job that collect pairs of [bucket, key] and send them to 
&gt; another map phase. Some of the keys may not found.
&gt; So,I try to use the Riak.mapByFields method(in the second map), but it 
&gt; doesn't work for me and it has strange behavior too.
&gt; 
&gt; 
&gt; For some keys I get this error : 
&gt; {"message":"500 Internal Server 
&gt; ErrorInternal Server Error
=====================

The server 
&gt; encountered an error while processing this 
&gt; request:  

```
{error,{error,{case_clause,no_vnodes},\\n              
&gt; [{riak_kv_wm_mapred,process_post,2},\\n               
&gt; {webmachine_resource,resource_call,3},\\n               
&gt; {webmachine_resource,do,3},\\n               
&gt; {webmachine_decision_core,resource_call,1},\\n               
&gt; {webmachine_decision_core,decision,1},\\n               
&gt; {webmachine_decision_core,handle_request,2},\\n               
&gt; {webmachine_mochiweb,loop,1},\\n               
&gt; {mochiweb_http,headers,5}]}}
```


---

mochiweb+webmachine web 
&gt; server

","stack":"Error: 500 
&gt; Internal Server ErrorInternal Server Error
=====================

The 
&gt; server encountered an error while processing this 
&gt; request:  

```
{error,{error,{case_clause,no_vnodes},\\n              
&gt; [{riak_kv_wm_mapred,process_post,2},\\n               
&gt; {webmachine_resource,resource_call,3},\\n               
&gt; {webmachine_resource,do,3},\\n               
&gt; {webmachine_decision_core,resource_call,1},\\n               
&gt; {webmachine_decision_core,decision,1},\\n               
&gt; {webmachine_decision_core,handle_request,2},\\n               
&gt; {webmachine_mochiweb,loop,1},\\n               
&gt; {mochiweb_http,headers,5}]}}
```


---

mochiweb+webmachine web 
&gt; server

\\n at IncomingMessage. 
&gt; (/usr/local/lib/node/riak-js/lib/riak-node.js:68:44)\\n at 
&gt; IncomingMessage.emit (events:43:20)\\n at HTTPParser.onMessageComplete 
&gt; (http:107:23)\\n at Client.ondata (http:871:22)\\n at IOWatcher.callback 
&gt; (net:517:29)\\n at node.js:265:9"}
&gt; and for other keys:
&gt; [{"not\\_found":{"bucket":"user\\_apps","key":"156","keydata":"undefined"}}]
&gt; If I understood right - I have to get an empty array when the key is not 
&gt; found, but I never get it.
&gt; I hope you can help me.
&gt; thanks, Malka
&gt; 
&gt; 
&gt; 
&gt; -- 
&gt; Sincerely,
&gt; Malka Feldman
&gt; Tribase LTD.
&gt; 41 Shimon Hatzadik St.
&gt; Elad, Israel
&gt; Tel. 074-7122736 Fax. 03-9075211
&gt; mal...@3basegroup.com
&gt; www.tribasesoft.com
&gt; 
&gt; 
&gt; 
&gt; 
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

