---
title: "Re: Question about Content-Type"
description: ""
project: community
lastmod: 2011-09-12T08:11:31-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg04668"
mailinglist_parent_id: "msg04650"
author_name: "Rusty Klophaus"
project_section: "mailinglistitem"
sent_date: 2011-09-12T08:11:31-07:00
---


Hi Greg,

Good catch, this appears to be a bug that affects 0.14.\\*. It only happens
when you rely on the server to generate an object's key. If you provide the
key yourself, then the content type header acts as expected.

This is actually already fixed in the master branch, and the fix will be
included in the next release of Riak. (Just a few weeks away!)

I've filed a ticket for it here:
https://issues.basho.com/show\\_bug.cgi?id=1182

Best,
Rusty


On Sun, Sep 11, 2011 at 1:39 AM, Greg Stein  wrote:

&gt; Hey all,
&gt;
&gt; I just ran into a questionable situation. On the following doc page:
&gt; http://wiki.basho.com/HTTP-Store-Object.html
&gt;
&gt; It says:
&gt;
&gt; "
&gt; Important headers:
&gt; Content-Type must be set for the stored object. Set what you expect to
&gt; receive back when next requesting it.
&gt; "
&gt;
&gt; So I ran the following test via telnet against a 0.14.0 server. Note
&gt; the Content-Length is 5 given invisible characters: "def\\r\\n".
&gt;
&gt; ----
&gt; $ telnet 127.0.0.1 8098
&gt; Trying 127.0.0.1...
&gt; Connected to localhost.
&gt; Escape character is '^]'.
&gt; POST /riak/test?returnbody=true HTTP/1.0
&gt; Content-Length: 5
&gt; Content-Type: application/octet-stream
&gt;
&gt; def
&gt; HTTP/1.0 201 Created
&gt; X-Riak-Vclock: a85hYGBgzGDKBVIsbI0n/DOYEhnzWBmKDz84zpcFAA==
&gt; Vary: Accept-Encoding
&gt; Server: MochiWeb/1.1 WebMachine/1.7.3 (participate in the frantic)
&gt; Location: /riak/test/F9uE8Heo6v0wtXY2rMKOktQbPGH
&gt; Link: ; rel="up"
&gt; Date: Sun, 11 Sep 2011 05:30:27 GMT
&gt; Content-Type: application/json
&gt; Content-Length: 5
&gt;
&gt; def
&gt; Connection closed by foreign host.
&gt; ----
&gt;
&gt; My question is why the response says application/json when I gave the
&gt; server application/octet-stream. Did I miss some RTFM documentation?
&gt;
&gt; Thanks,
&gt; -g
&gt;

