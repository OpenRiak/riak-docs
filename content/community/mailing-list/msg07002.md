---
title: "Possible handoff stalls"
description: ""
project: community
lastmod: 2012-03-19T11:24:05-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07002"
author_name: "Armon Dadgar"
project_section: "mailinglistitem"
sent_date: 2012-03-19T11:24:05-07:00
---


I wanted to ping the mailing list and see if anybody else has encounteredstalls in the partition handoffs on Riak 1.1. We added a new node to our clusterlast Friday, but noticed that the partition handoffs appear to have stopped after about 7-8 hours. Most of the handoffs completed, and the only handoffs that remained were from node 3 to node 2.The ring claimant (node 1), indicated that node 3 was unreachable (via ring\\_status).However, Riak control did not indicate that node 3 was unreachable, and in fact it wasactually live and continuing to serve request.To resolve this, I tried to just restart node 3. I ran "riak stop" multiple times, but this didnot actually seem to do anything (The node was continuing to run and serve requests).Next, I attached to the node and ran "init:stop()." This started to shut down varioussub-systems, but the node was still running. Sending a SIGTERM signal to the beam vmfinally killed it. Restarting the node with "riak start" worked as expected,and the node promptly resumed the handoffs, and finished in a few hours.I'm not sure exactly what the issue was, but something seemed to cause astalling of the handoffs.I've attached the contents of our console.log, erlang.log, error.log and crash.logfrom the relevant times if that is useful.
Best Regards,Armon Dadgar

logs.tar.gz
Description: GNU Zip compressed data
