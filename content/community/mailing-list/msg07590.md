---
title: "Java Client: Connection pool recovery."
description: ""
project: community
lastmod: 2012-06-01T01:46:47-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07590"
mailinglist_parent_id: "msg07587"
author_name: "Guido Medina"
project_section: "mailinglistitem"
sent_date: 2012-06-01T01:46:47-07:00
---

Hi,

 We have a 4 nodes cluster and it works like a charm, our issue on 
development (this is not happening in production but we are afraid it 
might) is that when we are doing several concurrent store, if one thread 
gives an exception (timeout getting connection from the pool or 
connection refused), the thread seems to stay waiting forever for some 
background tasks, so when the thread reaches the last line of code, it 
never returns back, lets say, using a ThreadPool, so we basically end up 
with our ThreadPool full with unfinished tasks:


More details, we are catching the Bucket and calling the operation 
directly from it, so the bucket will use his respective Riak client.


Regards,

Guido.

