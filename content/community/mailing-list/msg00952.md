---
title: "Re: propagation of bucket properties to new nodes"
description: ""
project: community
lastmod: 2010-08-25T15:16:06-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg00952"
mailinglist_parent_id: "msg00950"
author_name: "Dan Reverri"
project_section: "mailinglistitem"
sent_date: 2010-08-25T15:16:06-07:00
---


Hi David,

Alexander is correct, bucket properties are gossiped across the cluster. If
the backend property has been set for a bucket, any new nodes added to the
cluster will learn about that backend setting.

A few notes about multi backend:
1. I found a couple of issues with the current multi backend functionality:
Nodes don't store data if a backend is not defined on the node:
https://issues.basho.com/show\\_bug.cgi?id=670

Nodes can't find data if the backend property of a bucket is changed after
adding data:
https://issues.basho.com/show\\_bug.cgi?id=671


Until these issues are fixed I would suggest:
1. Define a consistent "multi\\_backend" configuration in all nodes
2. Do not change the "backend" property of a bucket once set


I also filed a feature request proposing an alternate method for managing
multiple backends, you can remove this request here:
https://issues.basho.com/show\\_bug.cgi?id=672

Thanks,
Dan

Daniel Reverri
Developer Advocate
Basho Technologies, Inc.
d...@basho.com


On Tue, Aug 24, 2010 at 4:01 PM, Alexander Sicular wrote:

&gt; Hi David,
&gt;
&gt; AFAIK, bucket properties are shared via gossip chatter. That is why it is
&gt; recommended that you modify the bucket defaults via the config file if you
&gt; are going to have a lot of buckets with different params from the default.
&gt; Bucket properties and the backends that buckets use are different.
&gt; Properties play at the ring/gossip level and backends play at the node
&gt; level. So, for instance you can have the same logical 'bucket' have two
&gt; different backends on two different physical nodes, afaik.
&gt;
&gt; -Alexander
&gt;
&gt; On Aug 24, 2010, at 6:46 PM, David Weldon wrote:
&gt;
&gt; &gt; Do bucket properties get propagated to new riak nodes? For example, if
&gt; &gt; I have 3 nodes, and on each I called riak\\_client:set\\_bucket/2, then I
&gt; &gt; add a 4th node - does the new node know all of the existing bucket
&gt; &gt; properties (n\\_val, allow\\_mult, etc.)? In particular, I'd like to know
&gt; &gt; if the 'backend' property gets propagated to new nodes. If it does
&gt; &gt; not, I should probably run my bucket setup every time I start my
&gt; &gt; application.
&gt; &gt;
&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

