---
title: "Re: Cluster basics: N-val and distribution between nodes"
description: ""
project: community
lastmod: 2010-04-17T17:39:55-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg00069"
author_name: "Curtis Caravone"
project_section: "mailinglistitem"
sent_date: 2010-04-17T17:39:55-07:00
---


I have the same question. According to the comments in riak\\_claim.erl, the
claims will be arranged so that partition sequences of length at most
target\\_n\\_val will have no repeated nodes, if possible, but that there will
be cases where there may be repeats. Is the sequence of N partitions taken
verbatim as the replica list, or is there some logic to ensure that we
actually get N distinct nodes?

I think in the original Dynamo paper, they said they had some extra logic to
make sure the N virtual nodes they chose for replication actually
corresponded to N distinct physical nodes.

Curtis


On Mon, Mar 8, 2010 at 10:20 AM, Victor Martinez wrote:

&gt; I'm sorry if I'm adding more confusion to a question that seemed closed.
&gt;
&gt; Is this true even if the number of virtual nodes is not a multiple of N?
&gt;
&gt; So for example ( I know it is a very degenerate case ) if the size of the
&gt; ring is 4, and there are 3 riak instances and N is set to 3 for a given
&gt; bucket, a given entry could end up not being stored on the three nodes.
&gt;
&gt; The way I understand it, this could happen for any size of the ring which
&gt; is not a multiple of N, not only in a ring with 4 partitions.
&gt;
&gt; I'm basing this on the comments in riak\\_claim.erl
&gt;
&gt; Is this correct?
&gt;
&gt;

