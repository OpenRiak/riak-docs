---
title: "Data Modeling Question - Large Relationship Sets"
description: ""
project: community
lastmod: 2012-07-05T14:18:02-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07870"
author_name: "Alex Thompson"
project_section: "mailinglistitem"
sent_date: 2012-07-05T14:18:02-07:00
---


I have a category of data in my riak application that I can't figure out how to 
model efficiently. For most of my data, inter-item relationships are relatively 
compact, and stored solely for the purpose of being provided back to the user 
as additional information transformed into api and view page links), so I don't 
need to emulate SQL joins or anything fancy. For these relationships, I'm 
simply storing the relation directly into the riak object and that works fine. 
Data is mainly added in batch with the relations and backwards relations 
precomputed, and data items are very rarely deleted, so i don't have to do lots 
of updates to change relations.

However, I currently have a data type which has many, many (10k-1mil+) items 
for a specific relation type, and could potentially have items added and 
removed from it with relative frequency. I know I'll have other very similar 
data types soon if I can figure out a way to implement them efficiently. My 
current model involves using a relational database to store just these 
relations, but thats the only part of my application that needs a database, so 
I'd rather ditch the added complexity and find some way to do this in riak. 
Another ideal property would be to either fetch the whole relation set very 
quickly (fast-than map/reduce would allow), or to have the ability to 
efficiently and reliably page through results (sending a million+ items in a 
single JSON request starts to get pretty unwieldy).

Any Ideas? I hope I've stated my problem clearly enough while being generic, I 
tried to avoid getting domain specific, but I can just lay out the complete 
domain model if that would be more helpful.

Thanks,
Alex Thompson
www.idigbio.org
www.acis.ufl.edu

