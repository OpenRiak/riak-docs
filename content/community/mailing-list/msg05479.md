---
title: "Re: 2i for single-result lookup"
description: ""
project: community
lastmod: 2011-11-08T10:48:25-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05479"
mailinglist_parent_id: "msg05468"
author_name: "Greg Pascale"
project_section: "mailinglistitem"
sent_date: 2011-11-08T10:48:25-08:00
---


Thanks for all the suggestions. 

Let's not worry about the problem of ensuring uniqueness right now - I have 
that part solved separately.

Rohman, this approach is what I described as a "manual index". It adds a good 
deal of code that I'm hoping to avoid by using 2i or search. This whole thing 
is a balancing act between performance, code complexity and to some extent disk 
space. I'm trying to evaluate which approach gives me the best of all 3.

Manual Index:
 - Adds lots of code complexity
 - Requires only 2 gets look up a user - one to the index to retrieve the 
primary key, then the lookup of the primary key
 - Not much extra space used.

Search:
 - Barely any extra code
 - Have to index user objects, so about 2x as much space is required
 - Since search uses term-based partitioning, querying should be pretty fast 
in theory. Write performance will take a hit due to indexing.

2i:
 - Barely any extra code
 - Unsure of amount of extra space required - think it won't be too much
 - Because of document-based partitioning, there is overhead in talking to a 
coverage set when only one machine will have the result I'm looking for. The 
significance of this overhead is what I'm really trying to evaluate.

-- 
Greg
Clipboard

On Monday, November 7, 2011 at 8:38 PM, Antonio Rohman Fernandez wrote:

&gt; Instead of using 2i, you could do the following when saving:
&gt; 
&gt; POST http://{IP}:8098/riak/users/rohman
&gt; {"email":"roh...@mahalostudio.com 
&gt; (mailto:roh...@mahalostudio.com)","otherdata":"...."}
&gt; 
&gt; POST http://{IP}:8098/riak/emails/roh...@mahalostudio.com 
&gt; (mailto:roh...@mahalostudio.com)
&gt; {"owner":"rohman"}
&gt; 
&gt; So checking if an email address exists is only a GET 
&gt; http://{IP}:8098/riak/emails/roh...@mahalostudio.com 
&gt; (mailto:roh...@mahalostudio.com) ( and you can even know who is the user 
&gt; owner -&gt; rohman )
&gt; 
&gt; Just you need to create a simple new bucket/key for it... but is worth the 
&gt; effort... not much work... no big key arrays, no loops, etc... instant 
&gt; response ; ) 
&gt; Rohman
&gt; 
&gt; 
&gt; Antonio Rohman Fernandez
&gt; CEO, Founder & Lead Engineer
&gt; roh...@mahalostudio.com (mailto:roh...@mahalostudio.com) 
&gt; 
&gt; Projects
&gt; MaruBatsu.es (http://marubatsu.es)
&gt; PupCloud.com (http://pupcloud.com)
&gt; Wedding Album (http://wedding.mahalostudio.com) 
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com (mailto:riak-users@lists.basho.com)
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

