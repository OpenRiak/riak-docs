---
title: "Re: Secondary Index Query across multiple buckets"
description: ""
project: community
lastmod: 2011-12-15T08:08:36-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05961"
mailinglist_parent_id: "msg05958"
author_name: "Jeremy Raymond"
project_section: "mailinglistitem"
sent_date: 2011-12-15T08:08:36-08:00
---


Thanks Rusty. What would perform better, running multiple queries across
several buckets or a single query under one large one? I'd guess the later
because of whatever overhead is involved in setting up the connection to
Riak and whatever Riak does to setup and run a mapred/index query.

--
Jeremy


On Thu, Dec 15, 2011 at 10:59 AM, Rusty Klophaus  wrote:

&gt; Hi Jeremy,
&gt;
&gt; Currently, Secondary Indexes are scoped per bucket. There is no good way
&gt; to run a Secondary Index query across multiple buckets, short of running
&gt; multiple queries.
&gt;
&gt; You are correct in that you could store the items in a single bucket
&gt; provided that they all have unique keys. In the LevelDB backend (and most
&gt; backends), buckets are a logical separation, not a physical separation, so
&gt; either approach will use the same amount of resources. (The Innostore
&gt; backend is the exception to this rule, it splits buckets into separate
&gt; files.)
&gt;
&gt; Best,
&gt; Rusty
&gt;
&gt; On Thu, Dec 15, 2011 at 8:29 AM, Jeremy Raymond wrote:
&gt;
&gt;&gt; Let me pose the question a different way. What is a good way to pull out
&gt;&gt; objects across multiple buckets based upon some secondary data that is not
&gt;&gt; their key?
&gt;&gt;
&gt;&gt; The items in the buckets all have unique keys. Maybe move them all into a
&gt;&gt; single bucket (millions of items) and then I could use secondary indexes to
&gt;&gt; pull the find them?
&gt;&gt;
&gt;&gt; If the keys of my objects are unique does organizing them into buckets
&gt;&gt; really gain me anything over just putting them all in a single bucket and
&gt;&gt; using secondary indexes to find them?
&gt;&gt;
&gt;&gt; --
&gt;&gt; Jeremy
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; On Sat, Dec 10, 2011 at 2:05 PM, Jeremy Raymond wrote:
&gt;&gt;
&gt;&gt;&gt; Hello,
&gt;&gt;&gt;
&gt;&gt;&gt; Is it possible to run an index query across multiple buckets at once?
&gt;&gt;&gt; Something similar to how you can feed a map query with bucket/key pairs,
&gt;&gt;&gt; I'm looking to run an index query with bucket/index pairs.
&gt;&gt;&gt;
&gt;&gt;&gt; --
&gt;&gt;&gt; Jeremy
&gt;&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;
&gt;&gt;
&gt;
&gt;
&gt; --
&gt; Rusty Klophaus (@rustyio)
&gt; \\*Basho Technologies, Inc.\\*
&gt; www.basho.com
&gt;
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

