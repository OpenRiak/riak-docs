---
title: "Re: riak-admin member_status ambiguous with Riak 1.0.2"
description: ""
project: community
lastmod: 2011-12-18T11:28:37-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05986"
mailinglist_parent_id: "msg05982"
author_name: "Jeffrey Massung"
project_section: "mailinglistitem"
sent_date: 2011-12-18T11:28:37-08:00
---


Zheng,

A 'down' status for a node is different from "unreachable" or "partitioned". 
It's quite possible (to the node you are running riak-admin from) that dev2 and 
dev3 are still actively up and running, but not partitioned from the rest of 
the cluster due to other networking reasons.

When at least one node is partitioned from the rest of the cluster, various 
ring membership actions cannot be performed. For example, you can't add or 
remove a node from the cluster. When you - the admin - know that a node has 
crashed, gone offline, or will be partitioned from the rest of the ring for a 
prolonged period of time, you can mark a given node as 'down' using riak-admin:

$ riak-admin down dev2@127.0.0.1
Success: "dev2@127.0.0.1" marked as down

$ riak-admin member\\_status
Status Ring Pending Node
--------------------------
down 100.0% -- 'dev2@127.0.0.1'
valid 0.0% -- 'dev1@127.0.0.1'
---------------------------
Valid:1 / Leaving:0 / Exiting:0 / Joining:0 / Down:1

Notice now how there is one node 'valid' and another 'down'. Once dev2 is no 
longer partitioned from the rest of the cluster, it will automatically have its 
status changed back to 'valid'.

Hope this helps,

--
Jeff Massung
Basho Technologies, Inc.

On Dec 18, 2011, at 9:21 AM, Zheng Zhibin wrote:

&gt; Dear all,
&gt; 
&gt; There is a problem of riak-admin member\\_status I found, please find my 
&gt; actions below:
&gt; 
&gt; [一 12 19 zhengzhibin@ZhengmatoMacBook-Air ~/riak/dev]$dev1/bin/riak-admin 
&gt; member\\_status
&gt; ================================= Membership 
&gt; ==================================
&gt; Status Ring Pending Node
&gt; -------------------------------------------------------------------------------
&gt; valid 34.4% -- 'dev1@127.0.0.1'
&gt; valid 32.8% -- 'dev2@127.0.0.1'
&gt; valid 32.8% -- 'dev3@127.0.0.1'
&gt; -------------------------------------------------------------------------------
&gt; Valid:3 / Leaving:0 / Exiting:0 / Joining:0 / Down:0
&gt; [一 12 19 zhengzhibin@ZhengmatoMacBook-Air ~/riak/dev]$dev2/bin/riak ping
&gt; Node 'dev2@127.0.0.1' not responding to pings.
&gt; [一 12 19 zhengzhibin@ZhengmatoMacBook-Air ~/riak/dev]$dev3/bin/riak ping
&gt; Node 'dev3@127.0.0.1' not responding to pings.
&gt; [一 12 19 zhengzhibin@ZhengmatoMacBook-Air ~/riak/dev]$dev1/bin/riak-admin 
&gt; member\\_status
&gt; ================================= Membership 
&gt; ==================================
&gt; Status Ring Pending Node
&gt; -------------------------------------------------------------------------------
&gt; valid 34.4% -- 'dev1@127.0.0.1'
&gt; valid 32.8% -- 'dev2@127.0.0.1'
&gt; valid 32.8% -- 'dev3@127.0.0.1'
&gt; -------------------------------------------------------------------------------
&gt; Valid:3 / Leaving:0 / Exiting:0 / Joining:0 / Down:0
&gt; [一 12 19 zhengzhibin@ZhengmatoMacBook-Air ~/riak/dev]$
&gt; 
&gt; 
&gt; 
&gt; Can anyone tell me why there is no 'Down' Count in the riak-admin 
&gt; member\\_status? Actually there aretwo down node in this cluster 'dev2' and 
&gt; 'dev3'.
&gt; 
&gt; Best Regards,
&gt; Witeman Zheng
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com


\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

