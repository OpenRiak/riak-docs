---
title: "Re: Javascript errors in reduce phases seen as {error,	javascript_reduce_timeout}?"
description: ""
project: community
lastmod: 2011-05-10T06:43:27-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03295"
mailinglist_parent_id: "msg03294"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2011-05-10T06:43:27-07:00
---


You might see an error in the log, but there are a lot of things about the JS 
VM that are too opaque. It's on our list of things to improve, for sure.

Sean Cribbs 
Developer Advocate
Basho Technologies, Inc.
http://basho.com/

On May 10, 2011, at 9:30 AM, Jeremy Raymond wrote:

&gt; Okay thanks. I figure something like this was going on. Besides the timeout 
&gt; return value is there any way to tell what happened or at what phase of some 
&gt; chained map reduce operations things failed? Would I see errors in the logs 
&gt; that indicated a crash of the Javascript engine or something along those 
&gt; lines?
&gt; 
&gt; - Jeremy
&gt; 
&gt; 
&gt; On Tue, May 10, 2011 at 9:27 AM, Sean Cribbs  wrote:
&gt; For large numbers of objects, your JavaScript functions will become 
&gt; bottlenecks, largely because the data has to be converted to and from JSON 
&gt; for every application of the function. If your reduce function isn't actually 
&gt; coalescing a value (e.g. sort doesn't), then you will run into this problem. 
&gt; See if you can reimplement the functions in Erlang or decrease the quantity 
&gt; of values being passed to and returned from the reduce functions.
&gt; 
&gt; Sean Cribbs 
&gt; Developer Advocate
&gt; Basho Technologies, Inc.
&gt; http://basho.com/
&gt; 
&gt; On May 10, 2011, at 9:20 AM, Jeremy Raymond wrote:
&gt; 
&gt;&gt; Hello,
&gt;&gt; 
&gt;&gt; In a MapReduce job I have filtering through about 6500 items if I filter out 
&gt;&gt; enough items my m/r job completes successfully. If I loosen the filtering 
&gt;&gt; such that a large number of items would be included in the results the m/r 
&gt;&gt; fails with error {error,javascript\\_reduce\\_timeout}. This error occurs after 
&gt;&gt; about 10 seconds of processing. Would Javascript errors such as the 
&gt;&gt; Javascript process running out of memory and crashing result in this timeout 
&gt;&gt; error? I also noticed that after this error is returned, the riak node I 
&gt;&gt; made the request on chugs along at ~100% CPU for about another minute but 
&gt;&gt; the other two nodes quite down almost immediately after the error is 
&gt;&gt; returned. How might I go about debugging this?
&gt;&gt; 
&gt;&gt; - Jeremy
&gt;&gt; 
&gt;&gt; --------------------------------------------------------------------- 
&gt;&gt; This transmission (including any attachments) may contain confidential 
&gt;&gt; information, privileged material (including material protected by the 
&gt;&gt; solicitor-client or other applicable privileges), or constitute non-public 
&gt;&gt; information. Any use of this information by anyone other than the intended 
&gt;&gt; recipient is prohibited. If you have received this transmission in error, 
&gt;&gt; please immediately reply to the sender and delete this information from your 
&gt;&gt; system. Use, dissemination, distribution, or reproduction of this 
&gt;&gt; transmission by unintended recipients is not authorized and may be 
&gt;&gt; unlawful.\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; 
&gt; 
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; 
&gt; 

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

