---
title: "Re: Help! Make suddenly is failing : {'EXIT', {{badmatch, {ok,	{pokemon_pb, [{abstract_code, no_abstract_code}]}}}"
description: ""
project: community
lastmod: 2011-10-07T16:33:19-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05104"
mailinglist_parent_id: "msg05090"
author_name: "Bryan Hughes"
project_section: "mailinglistitem"
sent_date: 2011-10-07T16:33:19-07:00
---

 
 
 Hi Jared,

 Sorry for not responding earlier - we are doing a push today and bit
 crazy.  I will work on getting the output to you via pastbin over
 the weekend after things have settled down a bit.

 Just to give you a recap - here is the rebar.config we are using
 that resulted in the situation on two dev machines and our test
 instance.  We have since rolled back.  We are using rebar get-deps
 to do the pulling, so whatever these configs (which I think are
 common) pull is what we are pulling.  We are not pulling directly. 
 The issue is with the protobuffs repo that the riak-erlang-client is
 subsequently pulling when it is being made.

 Still, as soon as I can, I will get you the logs.


 %% -\\*- erlang -\\*-

 {compile\\_pre\\_script, "scripts/generate-include.sh"}.
 {erl\\_opts, [debug\\_info, {parse\\_transform, lager\\_transform}]}.
 {deps, [{riakc, ".\\*", {git, "git://github.com/basho/riak-erlang-client.git",
 {branch, "HEAD"}}},
        {mochiweb, ".\\*", {git, "git://github.com/mochi/mochiweb.git",
 {branch, "HEAD"}}},
        {lager, ".\\*", {git, "git://github.com/basho/lager.git",
 {branch, "HEAD"}}},
        {erlydtl, ".\\*", {git, "git://github.com/evanmiller/erlydtl.git",
 {branch, "HEAD"}}}
       ]}.
 {cover\\_enabled, true}.
 {eunit\\_opts, [verbose, {report,{eunit\\_surefire,[{dir,"."}]}}]}.

 Thanks again!

 Bryan

 On 10/6/11 7:23 PM, Jared Morrow wrote:
 Bryan,
 

I've tried both clean clones and builds of riak and
 riak-erlang-client and haven't seen any issue.   Can you put
 your entire output in a gist or pastebin and link it in an email
 so I can try to see what is happening?
 


Thanks,
Jared

On Thu, Oct 6, 2011 at 7:00 PM, Bryan
 Hughes 
 wrote:

 Was able to isolate that the problem is in the protobuffs
 repo that riak-erlang-client pulls down in its rebar.  Its
 broken or something.  I was able to copy over an older
 version of that code and it now builds.

 Cheers,

 Bryan


 On 10/6/11 5:36 PM, Bryan Hughes wrote:

 Help!  I did a make clean and got new deps

 ./rebar get-deps

 and then did a make

 =INFO REPORT==== 6-Oct-2011::17:29:21 ===
 Writing header file to "riakclient\\_pb.hrl"
 ERROR: compile failed while processing
 /Users/bryan/projects/git/wobblesoft/engineering/herd\\_server/deps/riakc:
 {'EXIT',{{badmatch,{ok,{pokemon\\_pb,[{abstract\\_code,no\\_abstract\\_code}]}}},
         [{protobuffs\\_compile,output,4},
          {rebar\\_protobuffs\\_compiler,compile\\_each,1},
          {rebar\\_core,run\\_modules,4},
          {rebar\\_core,execute,4},
          {rebar\\_core,process\\_dir,4},
          {rebar\\_core,process\\_each,5},
          {rebar\\_core,process\\_dir,4},
          {rebar\\_core,process\\_commands,1}]}}
 make: \\*\\*\\* [all] Error 1


 Here is my rebar.config

 %% -\\*- erlang -\\*-

 {compile\\_pre\\_script, "scripts/generate-include.sh"}.
 {erl\\_opts, [debug\\_info, {parse\\_transform,
 lager\\_transform}]}.
 {deps, [{riakc, ".\\*", {git, "git://github.com/basho/riak-erlang-client.git",
 {branch, "HEAD"}}},
        {mochiweb, ".\\*", {git, "git://github.com/mochi/mochiweb.git",
 {branch, "HEAD"}}},
        {lager, ".\\*", {git, "git://github.com/basho/lager.git",
 {branch, "HEAD"}}},
        {erlydtl, ".\\*", {git, "git://github.com/evanmiller/erlydtl.git",
 {branch, "HEAD"}}}
       ]}.
 {cover\\_enabled, true}.
 {eunit\\_opts, [verbose,
 {report,{eunit\\_surefire,[{dir,"."}]}}]}.


 Thanks!
 Bryan

 \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
 riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
