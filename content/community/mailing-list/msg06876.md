---
title: "Re: Questions on configuring public and private ips for riak on ubuntu"
description: ""
project: community
lastmod: 2012-03-05T05:18:40-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06876"
mailinglist_parent_id: "msg06869"
author_name: "Tim Robinson"
project_section: "mailinglistitem"
sent_date: 2012-03-05T05:18:40-08:00
---


That'll do it - thanks!

Tim

-----Original Message-----
From: "Aphyr" 
Sent: Sunday, March 4, 2012 10:57pm
To: 
Cc: riak-users@lists.basho.com
Subject: Re: Questions on configuring public and private ips for riak on ubuntu

ssh -NL 8098:localhost:8098 your.vps.com

--Kyle

On 03/04/2012 09:55 PM, Tim Robinson wrote:
&gt; Yeah, I read your blog post when it first came out. I liked it.
&gt;
&gt; I appreciate the warning, but practically speaking I'm really just not 
&gt; worried about it. It's a test environment on an external VPS that no one 
&gt; knows the info for. Demo to the company means show image/content-type load, 
&gt; JSON via browser with proper indentation, and Riak Control. SSH isn't going 
&gt; to do that for me.
&gt;
&gt; I'm using public data for the testing. I can blow the whole thing away any 
&gt; time.
&gt;
&gt; Aside from warnings does anyone want to help with the question.
&gt;
&gt; Thanks,
&gt; Tim
&gt;
&gt;
&gt; -----Original Message-----
&gt; From: "Aphyr"
&gt; Sent: Sunday, March 4, 2012 10:41pm
&gt; To: "Tim Robinson"
&gt; Subject: Re: Questions on configuring public and private ips for riak on 
&gt; ubuntu
&gt;
&gt; I can get SSH access over Riak's HTTP and protobufs interfaces in about
&gt; five seconds, and can root a box shortly after that, depending on
&gt; kernel. Please don't do it. Just don't.
&gt;
&gt; http://aphyr.com/posts/224-do-not-expose-riak-to-the-internet
&gt; http://aphyr.com/posts/218-systems-security-a-primer
&gt;
&gt; --Kyle
&gt;
&gt; On 03/04/2012 09:38 PM, Tim Robinson wrote:
&gt;&gt; Right now I am just loading data for test purposes. It's nice to be able to 
&gt;&gt; do some benchmarks against the private network (which is @1Gbit/s)... while 
&gt;&gt; being able to poke a hole in the firewall when I want to do a test/demo.
&gt;&gt;
&gt;&gt; Tim
&gt;&gt;
&gt;&gt; -----Original Message-----
&gt;&gt; From: "Alexander Sicular"
&gt;&gt; Sent: Sunday, March 4, 2012 9:15pm
&gt;&gt; To: "Tim Robinson"
&gt;&gt; Cc: "riak-users@lists.basho.com"
&gt;&gt; Subject: Re: Questions on configuring public and private ips for riak on 
&gt;&gt; ubuntu
&gt;&gt;
&gt;&gt; this is a "Very Bad" idea. do not expose your riak instance over a public ip 
&gt;&gt; address. riak has no internal security mechanism to keep people from doing 
&gt;&gt; very bad things to your data, configuration, etc.
&gt;&gt;
&gt;&gt; -Alexander Sicular
&gt;&gt;
&gt;&gt; @siculars
&gt;&gt;
&gt;&gt; On Mar 5, 2012, at 12:43 AM, Tim Robinson wrote:
&gt;&gt;
&gt;&gt;&gt; Hello all,
&gt;&gt;&gt;
&gt;&gt;&gt; I have a few questions on networking configs for riak.
&gt;&gt;&gt;
&gt;&gt;&gt; I have both a public ip and a private ip for each riak node. I want Riak to 
&gt;&gt;&gt; communicate over the private ip addresses to take advantage of free 
&gt;&gt;&gt; bandwidth, but I would also like the option to interface with riak using 
&gt;&gt;&gt; the public ip's if need be (i.e. for testing / demo's etc).
&gt;&gt;&gt;
&gt;&gt;&gt; I'm gathering that the way people to this is by setting up app.config to 
&gt;&gt;&gt; use ip "0.0.0.0" to listen for all ip's. I'm also gathering vm.args needs 
&gt;&gt;&gt; to have a unique name in the cluster so I would need to use the hostname 
&gt;&gt;&gt; for the -name option (i.e. r...@www.fake-node-domain-name-1.com).
&gt;&gt;&gt;
&gt;&gt;&gt; My hosts file would contain:
&gt;&gt;&gt;
&gt;&gt;&gt; 127.0.0.1 localhost.localdomain localhost
&gt;&gt;&gt; x.x.x.x www.fake-node-domain-name-1.com mynode-1
&gt;&gt;&gt; ....
&gt;&gt;&gt;
&gt;&gt;&gt; where x.x.x.x is the public ip not the private.
&gt;&gt;&gt;
&gt;&gt;&gt; This is where I start to get lost.
&gt;&gt;&gt;
&gt;&gt;&gt; As it sits, if I attempt to join using the private ip's i will get the 
&gt;&gt;&gt; unreachable error - yet I can telnet connect to/from the equivalent nodes.
&gt;&gt;&gt;
&gt;&gt;&gt; So I could add a second IP to the hosts file, but since I need to keep the 
&gt;&gt;&gt; public one as well, how is that riak is going to use the private ips for 
&gt;&gt;&gt; gissip ring, hinted hand-off, ... etc etc.
&gt;&gt;&gt;
&gt;&gt;&gt; There's obviously some networking basics I am missing.
&gt;&gt;&gt;
&gt;&gt;&gt; Any guidance from those of you who have done this?
&gt;&gt;&gt;
&gt;&gt;&gt; Thanks.
&gt;&gt;&gt; Tim
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;

&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; Tim Robinson
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; Tim Robinson
&gt;&gt;
&gt;&gt;

&gt;
&gt;
&gt; Tim Robinson
&gt;
&gt;
&gt;
&gt; Tim Robinson
&gt;
&gt;
&gt;

Tim Robinson

