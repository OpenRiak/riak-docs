---
title: "Re: Pros/Cons to not storing JSON"
description: ""
project: community
lastmod: 2011-06-09T14:51:30-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03630"
mailinglist_parent_id: "msg03625"
author_name: "Andrew Berman"
project_section: "mailinglistitem"
sent_date: 2011-06-09T14:51:30-07:00
---


Cool, I've looked at BSON before for another project, and it might make
sense in this case as well.

Thanks!

On Thu, Jun 9, 2011 at 2:26 PM, Will Moss  wrote:

&gt; Hey Andrew,
&gt;
&gt; We're using BSON (bsonspec.org), because it stores binary (and other) data
&gt; types better than JSON and is also faster and more wire efficient (sounds
&gt; like about the same reasons you're considering leaving JSON). There are also
&gt; libraries to parse BSON it in just about every language.
&gt;
&gt; I haven't tried using it in a Erlang map-reduce yet (we don't do
&gt; map-reduces for any of our production work), but there is a library out
&gt; there so it shouldn't be too hard.
&gt;
&gt; Will
&gt;
&gt;
&gt; On Thu, Jun 9, 2011 at 2:24 PM, Sean Cribbs  wrote:
&gt;
&gt;&gt; Andrew,
&gt;&gt;
&gt;&gt; I think you're on the right track here, but I might add that you'll want
&gt;&gt; to have upgrade paths available if you're using records -- that is, version
&gt;&gt; them -- so that you can evolve their structure over time. That could be a
&gt;&gt; little hairy unless done carefully.
&gt;&gt;
&gt;&gt; That said, you could use BERT as the serialization format, making
&gt;&gt; implementing JavaScript M/R functions a little easier, and interop with
&gt;&gt; other languages.
&gt;&gt;
&gt;&gt; Sean Cribbs 
&gt;&gt; Developer Advocate
&gt;&gt; Basho Technologies, Inc.
&gt;&gt; http://basho.com/
&gt;&gt;
&gt;&gt; On Jun 9, 2011, at 5:14 PM, Andrew Berman wrote:
&gt;&gt;
&gt;&gt; &gt; I am using Riak using the Erlang Client API (PB) and I was storing my
&gt;&gt; documents as JSON and then converting them to records when I pull them out
&gt;&gt; of Riak, but I got to thinking that maybe this isn't the greatest approach.
&gt;&gt; I'm thinking that maybe it's better to store documents just as the record
&gt;&gt; itself (Erlang binary) and then just converting the binary back to the
&gt;&gt; record when I pull them from Riak. I was wondering what the pros/cons are
&gt;&gt; to this approach. Here's my list so far:
&gt;&gt; &gt;
&gt;&gt; &gt; Pros:
&gt;&gt; &gt;
&gt;&gt; &gt; Native Erlang is stored, so less time to convert to the record
&gt;&gt; &gt; Better support for nested records
&gt;&gt; &gt; Smaller storage requirements and hence faster on the wire (?)
&gt;&gt; &gt;
&gt;&gt; &gt; Cons:
&gt;&gt; &gt;
&gt;&gt; &gt; Not readable through Rekon (or other utils) without modification
&gt;&gt; &gt; Can't use standard M/R functions which analyze the document (have to
&gt;&gt; write all custom functions using Erlang)
&gt;&gt; &gt; Not portable across languages
&gt;&gt; &gt;
&gt;&gt; &gt; Thanks,
&gt;&gt; &gt;
&gt;&gt; &gt; Andrew
&gt;&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; &gt; riak-users mailing list
&gt;&gt; &gt; riak-users@lists.basho.com
&gt;&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;

&gt;
&gt;
