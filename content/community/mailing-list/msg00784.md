---
title: "RE: Reduce phase only on one node?"
description: ""
project: community
lastmod: 2010-07-24T06:21:02-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg00784"
mailinglist_parent_id: "msg00780"
author_name: "John Butler"
project_section: "mailinglistitem"
sent_date: 2010-07-24T06:21:02-07:00
---



Thank you.
-John

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; Date: Fri, 23 Jul 2010 17:14:51 -0700
&gt; Subject: Re: Reduce phase only on one node?
&gt; From: d...@basho.com
&gt; To: m...@jdrowell.com
&gt; CC: php\\_j...@hotmail.com; riak-users@lists.basho.com
&gt;
&gt; Currently, reduce functions run on the coordinating node. The coordinating 
&gt; node runs 2 processes per reduce phase to achieve some parallelism. There are 
&gt; two features requests open to improve the implementation:
&gt;
&gt;
&gt; Allow users to toggle the number of processes used during reduce
&gt; https://issues.basho.com/148
&gt;
&gt; Distribute reduce phases across the cluster
&gt;
&gt; https://issues.basho.com/149
&gt;
&gt; There is no target release set for either issue but you should be able to add 
&gt; yourself to the CC list in Bugzilla to receive notifications.
&gt;
&gt;
&gt; Thanks,
&gt; Dan
&gt;
&gt; Daniel Reverri
&gt; Developer Advocate
&gt; Basho Technologies, Inc.
&gt; d...@basho.com
&gt;
&gt;
&gt;
&gt; On Fri, Jul 23, 2010 at 2:34 PM, John D. Rowell&gt; wrote:
&gt;
&gt; +1 to this, my understanding is that you can use the same reduce funcion to 
&gt; re-reduce a stream of data and still get the same results. Is this what 
&gt; actually happens in Riak internally (i.e. the coordinating node only 
&gt; re-reduces each node's reduce) or does the reduce function only run on the 
&gt; coordinating node, which receives the raw map data?
&gt;
&gt;
&gt;
&gt; 2010/7/23 John Butler&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt; Hello,
&gt;
&gt; I went through the Riak Fast Track and overall I'm excited about the 
&gt; possibilities of Riak. However, I did see one thing that concerns me in 
&gt; regard to MapReduce jobs. From the Riak docs and this page here: 
&gt; http://seancribbs.com/tech/2010/02/06/why-riak-should-power-your-next-rails-app/
&gt; it seems to suggest that while Map jobs are performed in parallel Reduce 
&gt; jobs are not.
&gt;
&gt;
&gt;
&gt; Wouldn't be better if each node performed the reduce function on it's own set 
&gt; of data before sending it to the main coordinator? Imagine if you are mapping 
&gt; over a high number of objects (millions) and are trying to aggregate the data 
&gt; grouped by some demographic (such as state). If all the mappers send the data 
&gt; to coordinating node to be reduced then you are going to send millions of 
&gt; items from each data node all to one coordinating node. If instead each node 
&gt; called reduce first, then sent it to the coordinating node, then each node 
&gt; would be at most sending over 50 objects (for 50 states). Not only would this 
&gt; greatly reduce network traffic, it would be able to execute in parallel 
&gt; greatly improving performance. Since all reduce jobs are communicative, 
&gt; associative and idempotent I see no reason why this couldn't happen (of 
&gt; course I'm not familiar with the Riak internals to strongly assert this).
&gt;
&gt;
&gt;
&gt; Maybe I misunderstood and this is already happening. If it's not happening, 
&gt; why and is that on the roadmap to be added later?
&gt;
&gt; -John
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;
&gt; Hotmail is redefining busy with tools for the New Busy. Get more from your 
&gt; inbox.
&gt;
&gt; http://www.windowslive.com/campaign/thenewbusy?ocid=PID28326::T:WLMTAGL:ON:WL:en-US:WM\\_HMP:042010\\_2
&gt;
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;
&gt; riak-users mailing list
&gt;
&gt; riak-users@lists.basho.com
&gt;
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;
&gt; riak-users mailing list
&gt;
&gt; riak-users@lists.basho.com
&gt;
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
&gt;
 
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
Hotmail is redefining busy with tools for the New Busy. Get more from your 
inbox.
http://www.windowslive.com/campaign/thenewbusy?ocid=PID28326::T:WLMTAGL:ON:WL:en-US:WM\\_HMP:042010\\_2
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

