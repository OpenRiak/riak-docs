---
title: "Re: applications inside the same VM as Riak"
description: ""
project: community
lastmod: 2012-09-26T08:07:50-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08704"
mailinglist_parent_id: "msg08693"
author_name: "Anthony Molinaro"
project_section: "mailinglistitem"
sent_date: 2012-09-26T08:07:50-07:00
---


I've been successfully running a monitoring application (to gather stats
from riak) inside of the riak application for over a year with no issues.

I also know of another company which uses the internal client because
of performance issues with the PB client, so its completely possible
to run an application inside riak.

The only issue I've ever run into was having to bounce riak when my
application needs to be updated (which is very infrequent in this case),
because I need to bounce riak.

For actual client applications of riak I've found a better pattern (even
if running on the same machine), is your app pointing to haproxy, haproxy
pointing to all the riak nodes. You can configure haproxy to prefer the
local connection and only use the others as fall backs. This way you
can perform a rolling restart of riak followed by a restart of haproxy,
or a restart of your client application, and never have any downtime.

-Anthony

On Tue, Sep 25, 2012 at 01:56:40PM -0700, Mike Oxford wrote:
&gt; I am stacking my application and Riak on the same machine.
&gt; It seems wasteful to use 127.0.0.1 or even AF\\_UNIX sockets. Is there
&gt; anything that precludes me from running it directly within the same VM as
&gt; Riak, to cut down/eliminate the impedance mismatch/marshalling of going
&gt; through the external client protocols like HTTP/Protobuf?
&gt; Instead of building on riak\\_core, I'd be building on Riak(\\_kv?) itself.
&gt; 
&gt; Here be dragons?
&gt; 
&gt; Thanks!
&gt; 
&gt; -mox

&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com


-- 
------------------------------------------------------------------------
Anthony Molinaro 

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

