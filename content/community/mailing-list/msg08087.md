---
title: "Re: Trying to connect to riak from python client"
description: ""
project: community
lastmod: 2012-07-26T12:46:27-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08087"
mailinglist_parent_id: "msg08086"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2012-07-26T12:46:27-07:00
---


David,

Make sure you set the transport class properly when connecting. 8087 is the
default port for Protocol Buffers, whereas the default transport in the
client is HTTP. Something like this might work:

client = riak.RiakClient(host='127.0.0.1', port=8087,
transport\\_class=riak.transports.pbc.RiakPbcTransport)

On Thu, Jul 26, 2012 at 3:24 PM, David Montgomery  wrote:

&gt; I have riak installed on my local machine. I am not trying to do a
&gt; cluster simulation on my local machine, a simple node node locally is
&gt; fine.
&gt;
&gt; when I do a service ping I get a pong. When I run the below python
&gt; client it just hangs.
&gt;
&gt; Below is the code. So...rather confused on where to go at this point.
&gt;
&gt; So...how to I write to riak?
&gt;
&gt; import riak
&gt;
&gt; client = riak.RiakClient(host='127.0.0.1',port=8087)
&gt; bucket = client.bucket('test')
&gt; # Supply a key to store data under.
&gt; # The ``data`` can be any data Python's ``json`` encoder can handle.
&gt; person = bucket.new('riak\\_developer\\_1', data={
&gt; 'name': 'John Smith',
&gt; 'age': 28,
&gt; 'company': 'Mr. Startup!',
&gt; })
&gt; # Save the object to Riak.
&gt; person.store()
&gt;


-- 
Sean Cribbs 
Software Engineer
Basho Technologies, Inc.
http://basho.com/
