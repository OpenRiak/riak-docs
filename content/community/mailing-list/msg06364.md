---
title: "Re: What is this...?"
description: ""
project: community
lastmod: 2012-01-22T11:55:15-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06364"
mailinglist_parent_id: "msg06363"
author_name: "Mike Oxford"
project_section: "mailinglistitem"
sent_date: 2012-01-22T11:55:15-08:00
---


So stupid it hurts, and though it's embarrassing I should close the loop...

Env change on upgrade to 1.0.2 moved ports.
Tested 1.0.3 on the 1.0.2 bad config...then tested 1.0.0 against that
same bad config.
Intermittent success were due to the config not being 100% incorrect.

PB client doesn't work so well when running again a handoff port. /shame

Taunts/jeers accepted off-list. Thanks.

-mox

On Sat, Jan 21, 2012 at 8:29 PM, Mike Oxford  wrote:
&gt; I get this on a riakc\\_pb\\_socket:ping() ...
&gt;
&gt; 20:24:04.361 [error] Handoff receiver for partition undefined exited
&gt; abnormally after processing 0 objects:
&gt; {noproc,{gen\\_fsm,sync\\_send\\_all\\_state\\_event,[undefined,{handoff\\_data,&lt;&lt;&gt;&gt;},60000]}}
&gt;
&gt; -mox
&gt;
&gt; On Sat, Jan 21, 2012 at 8:43 AM, Mike Oxford  wrote:
&gt;&gt; 3 node cluster of 1.0.2, level\\_db backend, pb interface. Build up a
&gt;&gt; store of 9 connections (3 to each node) and pull one out randomly.
&gt;&gt;
&gt;&gt; --snip
&gt;&gt; 62&gt; 
&gt;&gt; riakc\\_pb\\_socket:list\\_keys(gen\\_server:call(forum\\_store:get\\_random\\_pid(alliance),
&gt;&gt; get\\_connector\\_pid), &lt;&lt;"alliance\\_overview"&gt;&gt;
&gt;&gt; {ok,[]}
&gt;&gt;
&gt;&gt; 63&gt; 
&gt;&gt; riakc\\_pb\\_socket:list\\_keys(gen\\_server:call(forum\\_store:get\\_random\\_pid(alliance),
&gt;&gt; get\\_connector\\_pid), &lt;&lt;"alliance\\_overview"&gt;&gt;).
&gt;&gt; {ok,[]}
&gt;&gt;
&gt;&gt; 64&gt; 
&gt;&gt; riakc\\_pb\\_socket:list\\_keys(gen\\_server:call(forum\\_store:get\\_random\\_pid(alliance),
&gt;&gt; get\\_connector\\_pid), "alliance\\_overview").
&gt;&gt; {ok,[]}
&gt;&gt;
&gt;&gt; 65&gt; 
&gt;&gt; riakc\\_pb\\_socket:list\\_keys(gen\\_server:call(forum\\_store:get\\_random\\_pid(alliance),
&gt;&gt; get\\_connector\\_pid), "alliance\\_overview").
&gt;&gt; =ERROR REPORT==== 21-Jan-2012::08:23:11 ===
&gt;&gt; \\*\\* Generic server &lt;0.24647.5&gt; terminating
&gt;&gt; \\*\\* Last message in was {tcp,#Port&lt;0.5820&gt;,[255|&lt;&lt;"unknown\\_msg"&gt;&gt;]}
&gt;&gt; \\*\\* When Server state == {state,"127.0.0.1",2010,false,false,#Port&lt;0.5820&gt;,
&gt;&gt;                            {request,#Ref&lt;0.0.4.159143&gt;,
&gt;&gt;                                {rpblistkeysreq,"alliance\\_overview"},
&gt;&gt;                                undefined,
&gt;&gt;                                {106931976,&lt;0.25063.5&gt;},
&gt;&gt;                                60000,#Ref&lt;0.0.4.159144&gt;},
&gt;&gt;                            {[],[]},
&gt;&gt;                            1,[],infinity,100}
&gt;&gt; \\*\\* Reason for termination ==
&gt;&gt; \\*\\* {function\\_clause,[{riakclient\\_pb,decode,[undefined,&lt;&lt;"unknown\\_msg"&gt;&gt;]},
&gt;&gt;                     {riakc\\_pb\\_socket,handle\\_info,2},
&gt;&gt;                     {gen\\_server,handle\\_msg,5},
&gt;&gt;                     {proc\\_lib,init\\_p\\_do\\_apply,3}]}
&gt;&gt; {error,{timeout,[]}}
&gt;&gt;
&gt;&gt; 66&gt; 
&gt;&gt; riakc\\_pb\\_socket:list\\_keys(gen\\_server:call(forum\\_store:get\\_random\\_pid(alliance),
&gt;&gt; get\\_connector\\_pid), "alliance\\_overview").
&gt;&gt; {ok,[]}
&gt;&gt; --end snip
&gt;&gt;
&gt;&gt; Riak console spits out the following at the same time...
&gt;&gt;
&gt;&gt; --snip
&gt;&gt; nodes().08:23:11.154 [info] Handoff receiver for partition undefined
&gt;&gt; exited after processing 0 objects
&gt;&gt; --end snip
&gt;&gt;
&gt;&gt; Error condition does not seem to follow any specific node and the
&gt;&gt; connections die when the error is thrown so its constantly building
&gt;&gt; new ones.
&gt;&gt;
&gt;&gt; TIA.
&gt;&gt;
&gt;&gt; -mox

