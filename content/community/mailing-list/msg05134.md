---
title: "Re: Riak 1.0 LevelDB issue"
description: ""
project: community
lastmod: 2011-10-12T06:17:46-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05134"
mailinglist_parent_id: "msg05097"
author_name: "David Smith"
project_section: "mailinglistitem"
sent_date: 2011-10-12T06:17:46-07:00
---


A couple of questions...

1. What does your app.config look like?
2. Can you capture an output of lsof on the riak process?

Thanks,

D.

On Fri, Oct 7, 2011 at 1:10 PM, Dan  wrote:
&gt; Hi,
&gt;
&gt; after storing more than one million keys (random key ids, 200 byte datas)
&gt; over http to a riak standalone node, i get an timeout.
&gt; It seems to me that riak is crashing after opening more than 1100 ???
&gt; LevelDB files.
&gt; I'm on OSX 10.7 and homebrew riak 1.0. The Riak settings are default with
&gt; enabled levedb and etc/vm.args ERL\\_MAX\\_PORTS are set to 32768.
&gt;
&gt; $ ulimit -a
&gt; core file size          (blocks, -c) 0
&gt; data seg size           (kbytes, -d) unlimited
&gt; file size               (blocks, -f) unlimited
&gt; max locked memory       (kbytes, -l) unlimited
&gt; max memory size         (kbytes, -m) unlimited
&gt; \\*open files                      (-n) 32768\\*
&gt; pipe size            (512 bytes, -p) 1
&gt; stack size              (kbytes, -s) 8192
&gt; cpu time               (seconds, -t) unlimited
&gt; max user processes              (-u) 2048
&gt; virtual memory          (kbytes, -v) unlimited
&gt;
&gt; $ launchctl limit
&gt;        cpu         unlimited      unlimited
&gt;        filesize    unlimited      unlimited
&gt;        data        unlimited      unlimited
&gt;        stack       8388608        67104768
&gt;        core        0              unlimited
&gt;        rss         unlimited      unlimited
&gt;        memlock     unlimited      unlimited
&gt;        maxproc     2048           2500
&gt; \\*       maxfiles    32768          65536      \\*
&gt;
&gt; See some riak logs on http://pastie.org/2656767
&gt;
&gt; Can anybody provide a solution, please?
&gt;
&gt; Thanks,
&gt; Daniel.
&gt;
&gt; --
&gt; View this message in context: 
&gt; http://riak-users.197444.n3.nabble.com/Riak-1-0-LevelDB-issue-tp3403785p3403785.html
&gt; Sent from the Riak Users mailing list archive at Nabble.com.
&gt;


-- 
Dave Smith
Director, Engineering
Basho Technologies, Inc.
diz...@basho.com

