---
title: "Re: indexing tags with Riak Search"
description: ""
project: community
lastmod: 2011-01-29T16:38:19-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02152"
mailinglist_parent_id: "msg02149"
author_name: "Eric Moritz"
project_section: "mailinglistitem"
sent_date: 2011-01-29T16:38:19-08:00
---


That makes sense. Thanks!
On Jan 29, 2011 11:59 AM, "Gordon Tillman"  wrote:
&gt; Hi Eric,
&gt;
&gt; Yes you can do this, but you need to "encode" your information
appropriately. Using the example that you provided, you would store your
JSON object as follows:
&gt;
&gt; {
&gt; "title": "Hello, World!"
&gt; "tags": "greetings first%20program"
&gt; }
&gt;
&gt; Make sure that the search schema for your bucket is indexing your tags
field using whitespace\\_analyzer\\_factory (I think that is the new default
anyway).
&gt;
&gt; The key here is that you quote the tags before storing your object and
unquote the tags after retrieving your object. If you create models that
represent the things that you store in Riak then you automate that process
pretty easily.
&gt;
&gt; You will still store tags in a list (or better yet, a set) in your model,
but you will quote each one and save it as a whitespace-delimited string
before storing in Riak. When you read it in from Riak you can split and
unquote to restore to a list or set in your model.
&gt;
&gt; By using whitespace\\_analyzer\\_factory for the tags field (instead of say
the standard\\_analyzer\\_factory) the code that parses that field for indexing
will do the right thing.
&gt;
&gt;
&gt; Be sure and read the notes about escaping special characters in search
terms here:
&gt;
&gt; http://lucene.apache.org/java/2\\_4\\_0/queryparsersyntax.html#EscapingSpecial 
&gt; Characters&lt;
http://lucene.apache.org/java/2\\_4\\_0/queryparsersyntax.html#Escaping%20Special%20Characters
&gt;
&gt;
&gt;
&gt; --gordon
&gt;
&gt; On Jan 28, 2011, at 19:14, Eric Moritz wrote:
&gt;
&gt; Is there a way to index tags in Riak Search? For example, say I have the
following data structure:
&gt;
&gt; hello.json
&gt;
&gt; {
&gt; "title": "Hello, World!"
&gt; "tags": ["greetings", "first program"]
&gt; }
&gt;
&gt; I noticed the result from Solr returns fielded data that resembles this:
&gt;
&gt; GET /solr/tagtest/select?q=tags:greetings&wt=json
&gt;
&gt; {
&gt; "title": "Hello, World",
&gt; "tags": "greetings first programs
&gt; }
&gt;
&gt; Now if I use "q=tags:program", the same document is returned. Is there an
analyzer that will treat each item in that list as a single term?
&gt;
&gt; Thanks,
&gt; Eric.
&gt;
&gt; 
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

