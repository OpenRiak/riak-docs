---
title: "Re: Accessing existing obj in pre commit?"
description: ""
project: community
lastmod: 2011-04-23T02:28:39-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03137"
mailinglist_parent_id: "msg03135"
author_name: "Kresten Krab Thorup"
project_section: "mailinglistitem"
sent_date: 2011-04-23T02:28:39-07:00
---


You can see how I have done it in the riak\\_link\\_index project. In most cases, 
the "old" value is available as the part of the object which is not 
update\\_value/metadata, but in some cases you'll have to get the old value.

--
301 Moved Permanently
Email: Kresten Krab Thorup 

On 23/04/2011, at 07.27, "Jeffpk"  wrote:

&gt; Well, I worked around my last issue and I'm looking at risk again, in order 
&gt; to use the disambiguating logic I want I need to do a pre commit validation 
&gt; that involves the new state that is being committed and the old state that is 
&gt; currently stored. I believe couch gives you both of these in pre commit but 
&gt; it seemed from the docs that risk only hand you the candidate state? Is 
&gt; there an efficient way to access the existing state from inside the pre 
&gt; commit hook?
&gt; 
&gt; Sent from my iPa

