---
title: "Re: error compiling cpp driver for riak"
description: ""
project: community
lastmod: 2012-01-26T14:25:49-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06440"
mailinglist_parent_id: "msg06439"
author_name: "Andres Jaan Tack"
project_section: "mailinglistitem"
sent_date: 2012-01-26T14:25:49-08:00
---


(from the correct e-mail address…)

Hi there.

Just as a starting note, Riak-Cpp is still a work in progress, with no
versioned release to date. Thus, I haven't gotten to the point of testing
many generations of compilers, yet. In the next month or so, I should get
sibling resolution finished, and then this will make it on my radar.

That said, I've been using MSVC v10 and GCC 4.4 for development, so I'm a
bit surprised that GCC 4.5 isn't able to handle it. The first error (about
std::error\\_code) suggests that you're not getting C++11/C++0x support when
you compile.

Can you verify your GCC version when compiling? SCons has a nasty habit of
resetting environment variables where it shouldn't, so if gcc4.3 is
installed in /usr/local/bin, it may be defaulting to that.

If that reveals nothing, I'll try o reproduce and fix on my system tomorrow.

Lähetetty iPhonesta

2012/1/26 David Montgomery 

&gt; I tried to compile the cpp driver code on gitbub and the below are the
&gt; erros.
&gt;
&gt; I am on Ubuntu 64 using gcc 4.5. At the prompt I typed &gt;scons
&gt;
&gt; So...what do I do?
&gt;
&gt; Thanks
&gt;
&gt;
&gt; test@test:~/Downloads/riak-cpp$ scons
&gt; scons: Reading SConscript files ...
&gt; scons: done reading SConscript files.
&gt; scons: Building targets ...
&gt; protoc build/riak/riakclient.proto --cpp\\_out=.
&gt; (compile) build/riak/client.cxx
&gt; In file included from ./riak/client.hxx:2:0,
&gt; from build/riak/client.cxx:1:
&gt; ./riak/message.hxx:29:28: error: ‘error\\_code’ is not a member of ‘std’
&gt; ./riak/message.hxx:29:76: error: functional cast expression list
&gt; treated as compound expression
&gt; ./riak/message.hxx:29:77: error: template argument 1 is invalid
&gt; ./riak/message.hxx:29:86: error: invalid type in declaration before ‘;’
&gt; token
&gt; build/riak/client.cxx: In member function ‘void
&gt; riak::client::delete\\_object(const riak::key&, const riak::key&,
&gt; riak::delete\\_response\\_handler)’:
&gt; build/riak/client.cxx:95:105: error: cannot convert ‘std::\\_Bind (\\*(std::function std::basic\\_string&, const std::basic\\_string&)&gt;,
&gt; std::basic\\_string, std::basic\\_string,
&gt; std::\\_Placeholder&lt;1&gt;, std::\\_Placeholder&lt;2&gt;,
&gt; std::\\_Placeholder&lt;3&gt;))(std::function const std::basic\\_string&, const std::basic\\_string&)&gt;,
&gt; const std::basic\\_string&, const std::basic\\_string&, const
&gt; std::error\\_code&, long unsigned int, const std::basic\\_string&)&gt;’
&gt; to ‘riak::message::handler’ in initialization
&gt; build/riak/client.cxx: In member function ‘void
&gt; riak::client::get\\_object(const riak::key&, const riak::key&,
&gt; riak::get\\_response\\_handler)’:
&gt; build/riak/client.cxx:171:70: error: cannot convert ‘std::\\_Bind (\\*(std::basic\\_string, std::basic\\_string,
&gt; std::function(const
&gt; google::protobuf::RepeatedPtrField&)&gt;,
&gt; riak::::delivery\\_arguments, std::function std::error\\_code&, std::shared\\_ptr&,
&gt; std::function&,
&gt; std::function&)&gt;&)&gt;,
&gt; std::\\_Placeholder&lt;1&gt;, std::\\_Placeholder&lt;2&gt;,
&gt; std::\\_Placeholder&lt;3&gt;))(const std::basic\\_string&, const
&gt; std::basic\\_string&,
&gt; std::function(const
&gt; google::protobuf::RepeatedPtrField&)&gt;&,
&gt; riak::::delivery\\_arguments&, std::function std::error\\_code&, std::shared\\_ptr&,
&gt; std::function&,
&gt; std::function&)&gt;&)&gt;, const
&gt; std::error\\_code&, long unsigned int, const std::basic\\_string&)&gt;’
&gt; to ‘riak::message::handler’ in initialization
&gt; build/riak/client.cxx: In function ‘riak::message::handler
&gt;
&gt; riak::::make\\_resolution\\_response\\_handler(std::shared\\_ptr&,
&gt; riak::::resolution\\_response\\_handler\\_for\\_object)’:
&gt; build/riak/client.cxx:246:63: error: cannot convert
&gt; ‘std::\\_Bind&, const
&gt; std::error\\_code&, long unsigned int, const
&gt; std::basic\\_string&)&gt;(std::shared\\_ptr,
&gt; std::\\_Placeholder&lt;1&gt;, std::\\_Placeholder&lt;2&gt;, std::\\_Placeholder&lt;3&gt;)&gt;’ to
&gt; ‘riak::message::handler’ in return
&gt; build/riak/client.cxx: In function ‘void
&gt; riak::::put\\_cold(const riak::key&, const riak::key&, const
&gt; std::shared\\_ptr&, riak::::delivery\\_arguments&,
&gt; riak::put\\_response\\_handler&)’:
&gt; build/riak/client.cxx:350:107: error: cannot convert ‘std::\\_Bind (\\*(std::function, std::\\_Placeholder&lt;1&gt;,
&gt; std::\\_Placeholder&lt;2&gt;, std::\\_Placeholder&lt;3&gt;))(std::function std::error\\_code&)&gt;, const std::error\\_code&, long unsigned int, const
&gt; std::basic\\_string&)&gt;’ to ‘riak::message::handler’ for argument
&gt; ‘3’ to ‘void riak::::send\\_put\\_request(RpbPutReq&,
&gt; riak::::delivery\\_arguments&, riak::message::handler)’
&gt; scons: \\*\\*\\* [build/riak/client.o] Error 1
&gt; scons: building terminated because of errors.
&gt;

