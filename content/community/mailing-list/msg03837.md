---
title: "Re: Controlling order of results from link phase"
description: ""
project: community
lastmod: 2011-06-27T00:04:30-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03837"
mailinglist_parent_id: "msg03831"
author_name: "Andrew Berman"
project_section: "mailinglistitem"
sent_date: 2011-06-27T00:04:30-07:00
---


Nevermind on the lists:sort issue below as I realized that list:umerge
requires that the lists be sorted.

Thanks anyway,

Andrew


On Sun, Jun 26, 2011 at 3:36 PM, Andrew Berman  wrote:
&gt; I think I found the answer and it is no, I cannot control the sort.  I
&gt; found the code here in riak\\_kv\\_wm\\_link\\_walker.erl:
&gt;
&gt; links(Object) -&gt;
&gt;    MDs = riak\\_object:get\\_metadatas(Object),
&gt;    lists:umerge(
&gt;      [ case dict:find(?MD\\_LINKS, MD) of
&gt;            {ok, L} -&gt;
&gt;                [ [B,K,T] || {{B,K},T} &lt;- lists:sort(L) ];
&gt;            error -&gt; []
&gt;        end
&gt;        || MD &lt;- MDs ]).
&gt;
&gt; Why run lists:sort?  Shouldn't the sort be up to the user after he
&gt; gets the actual object?  I don't understand why the sort processing is
&gt; necessary at the link phase.  Thoughts?
&gt;
&gt; --Andrew
&gt;
&gt; On Sun, Jun 26, 2011 at 3:15 PM, Andrew Berman  wrote:
&gt;&gt; I've noticed that when I run the link function, it automatically
&gt;&gt; orders the links based on Id.  Is there a way to tell it not to sort
&gt;&gt; the links?  In other words, I want the links in the order in which
&gt;&gt; they were put in the list (most recent at the head of the list) and I
&gt;&gt; see from Rekon that that is how they are being stored.  Basically, I'm
&gt;&gt; running a reduce\\_slice on the result of the link phase so that Riak
&gt;&gt; doesn't load up all the objects with which the links are pointing.  If
&gt;&gt; the answer is no, I cannot control the order of the links, is the only
&gt;&gt; option to prepend something like the time (e.g. millis since
&gt;&gt; 1-1-1970)?
&gt;&gt;
&gt;&gt; Thanks,
&gt;&gt;
&gt;&gt; Andrew
&gt;&gt;
&gt;

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

