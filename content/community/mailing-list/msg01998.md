---
title: "Re: Re: Re: too_many_results error"
description: ""
project: community
lastmod: 2011-01-16T06:06:23-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01998"
mailinglist_parent_id: "msg01997"
author_name: "Rusty Klophaus"
project_section: "mailinglistitem"
sent_date: 2011-01-16T06:06:23-08:00
---


That's one way of looking at it. The other viewpoint is that given the
choice between returning a partial (a.k.a. incorrect) result set vs. failing
loudly, the safest option is to fail loudly.

Ideally there would be a way to return a partial result set with an
indication in Solr that the result set is partial, but:

1) The Solr spec doesn't indicate a way to include such a message (at least
none that I could find)
2) This is the first iteration of this feature, so we decided to keep it
simple until we have more detailed information on what people need.

So with that in mind, how would you prefer this be handled? I'm open to
rethinking the behavior.

Best,
Rusty


On Sun, Jan 16, 2011 at 8:53 AM, Eric Moritz wrote:

&gt; That sounds like a bug rather that a feature to me. For instance if I wrote
&gt; 100,001 blog entries, the search engine breaks hard for a query trying to
&gt; find my latest tweets.
&gt;
&gt; Is that what would happen?
&gt; ---------- Forwarded message ----------
&gt; From: "Rusty Klophaus" 
&gt; Date: Jan 16, 2011 8:42 AM
&gt; Subject: Re: Re: too\\_many\\_results error
&gt; To: "Eric Moritz" 
&gt; Cc: "riak-users@lists.basho.com" 
&gt;
&gt; Hi Eric,
&gt;
&gt; This is a failsafe that is applied prior to the 'rows' parameter.
&gt;
&gt; It is applied separately to provide a hard system limit, intended to allow
&gt; the cluster administrator to guard against a malicious user, a client
&gt; application that accidentally requests too much data, etc.
&gt;
&gt; Best,
&gt; Rusty
&gt;
&gt;
&gt; On Sun, Jan 16, 2011 at 8:38 AM, Eric Moritz wrote:
&gt;
&gt;&gt; Would using the rows URL parameter fix this or is the error occurring
&gt;&gt; prior to the result being limited?
&gt;&gt; ---------- Forwarded message ----------
&gt;&gt; From: "Rusty Klophaus" 
&gt;&gt; Date: Jan 16, 2011 8:34 AM
&gt;&gt; Subject: Re: too\\_many\\_results error
&gt;&gt; To: "Malka Feldman" 
&gt;&gt; Cc: 
&gt;&gt;
&gt;&gt; Hi Malka,
&gt;&gt;
&gt;&gt; The error you see is caused by a protective configuration setting that is
&gt;&gt; new in the 0.14 release. By default, the system will stop the query after
&gt;&gt; 100,000 results and return an error to the system. It is intended to prevent
&gt;&gt; Riak Search from grabbing all available memory when faced with a large
&gt;&gt; result set.
&gt;&gt;
&gt;&gt; You can override this by setting the 'max\\_search\\_results' setting in the
&gt;&gt; etc/app.config file.
&gt;&gt;
&gt;&gt; Best,
&gt;&gt; Rusty
&gt;&gt;
&gt;&gt; On Sun, Jan 16, 2011 at 7:11 AM, Malka Feldman wrote:
&gt;&gt;
&gt;&gt;&gt; Hi
&gt;&gt;&gt; I try to get results from query through solr , but I get the error of too
&gt;&gt;&gt; many results
&gt;&gt;&gt; the query is :
&gt;&gt;&gt; http://79.125.59.136:8098/solr/user\\_profile/select?q=country:USA
&gt;&gt;&gt; I know I can have hundreds of thousands of answers, can it hold them?
&gt;&gt;&gt;
&gt;&gt;&gt; the error :
&gt;&gt;&gt;
&gt;&gt;&gt; {error,
&gt;&gt;&gt; {throw,
&gt;&gt;&gt; {too\\_many\\_results,
&gt;&gt;&gt; {scope,#Ref&lt;0.0.78.140604&gt;,"user\\_profile","value",
&gt;&gt;&gt; {scope,#Ref&lt;0.0.78.140603&gt;,undefined,"country",
&gt;&gt;&gt; {term,#Ref&lt;0.0.78.140609&gt;,&lt;&lt;"USA"&gt;&gt;,
&gt;&gt;&gt; [{'riak@10.230.7.111',28438},
&gt;&gt;&gt; {'riak@10.230.21.243',28438},
&gt;&gt;&gt; {'riak@10.230.45.195',28438}],
&gt;&gt;&gt; 28438.0,1.0,
&gt;&gt;&gt; #Fun}}}},
&gt;&gt;&gt; [{riak\\_search\\_client,'-search/5-fun-0-',4},
&gt;&gt;&gt; {riak\\_search\\_client,fold\\_results,5},
&gt;&gt;&gt; {riak\\_search\\_client,search,6},
&gt;&gt;&gt; {riak\\_search\\_client,search\\_doc,6},
&gt;&gt;&gt; {riak\\_solr\\_searcher\\_wm,run\\_query,1},
&gt;&gt;&gt; {riak\\_solr\\_searcher\\_wm,to\\_xml,2},
&gt;&gt;&gt; {webmachine\\_resource,resource\\_call,3},
&gt;&gt;&gt; {webmachine\\_resource,do,3}]}}
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; thanks,
&gt;&gt;&gt; --
&gt;&gt;&gt;
&gt;&gt;&gt; \\*Malka Feldman\\*
&gt;&gt;&gt; Tribase LTD.
&gt;&gt;&gt;
&gt;&gt;&gt; 41 Shimon Hatzadik St.
&gt;&gt;&gt;
&gt;&gt;&gt; Elad, Israel
&gt;&gt;&gt;
&gt;&gt;&gt; Tel. 074-7122736 Fax. 03-9075211 Cell. 972-54-8370828
&gt;&gt;&gt;
&gt;&gt;&gt; m al...@3basegroup.com
&gt;&gt;&gt;
&gt;&gt;&gt; www.3basegroup.com 
&gt;&gt;&gt;
&gt;&gt;&gt; [image: cid:image001.jpg@01CB2DDB.3AC492C0]
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;
&gt;&gt;
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;
&gt;&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

