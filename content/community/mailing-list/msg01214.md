---
title: "Ping: Using Erlang funs for map reduce via the REST API and protocol	buffers client"
description: ""
project: community
lastmod: 2010-10-06T12:52:27-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01214"
author_name: "Seth Falcon"
project_section: "mailinglistitem"
sent_date: 2010-10-06T12:52:27-07:00
---


Hey all,

I have a patch that allows you to specify Erlang funs as strings for
use in map/reduce via both the REST and protocol buffer APIs. So you
can do things like:

## For REST

{"reduce":{"language":"erlang",
 "source":"
fun(ValueList, \\_Arg) -&gt;
 [lists:foldl(fun erlang:'+'/2, 0, ValueList)]
end.",
"keep":true}}

## For pb

Mapper = "fun(G, \\_X, \\_Y) -&gt;
 O = riak\\_object:get\\_value(G),
 [proplists:get\\_value(blah, O)]
 end.".

riakc\\_pb\\_socket:mapred(Pid, Input, [{map, {strfun, Mapper}, unset, true}]).


I posted a note about this to the list a month ago, but haven't
received any response. Curious if this is of interest to other users.
Basho team, comments?

Link to original post:
http://lists.basho.com/pipermail/riak-users\\_lists.basho.com/2010-September/001918.html

Thanks,

+ seth

-- 
Seth Falcon | @sfalcon | http://userprimary.net/

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

