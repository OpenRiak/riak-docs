---
title: "Re: Lager issue"
description: ""
project: community
lastmod: 2013-01-10T10:22:39-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg09792"
mailinglist_parent_id: "msg09791"
author_name: "Andrew Thompson"
project_section: "mailinglistitem"
sent_date: 2013-01-10T10:22:39-08:00
---


On Thu, Jan 10, 2013 at 01:11:18PM -0500, John Kemp wrote:
&gt; Hi,
&gt; 
&gt; I don't usually have issues with lager, but in logging for my application, I 
&gt; feel like I've done all the right things:
&gt; 
&gt; i) Put lager\\_transform in my rebar config:
&gt; 
&gt; {erl\\_opts, [debug\\_info, warnings\\_as\\_errors, {parse\\_transform, 
&gt; lager\\_transform}]}.
&gt; 
&gt; ii) Lager is started when my app starts, and I know by asking at the console:
&gt; 
&gt; (lilith@127.0.0.1)3&gt; application:which\\_applications().
&gt; [{lilith,[],"1"},
&gt; {lager,"Erlang logging framework","0.9.4"},
&gt; {crypto,"CRYPTO version 2","2.2"},
&gt; {sasl,"SASL CXC 138 11","2.2.1"},
&gt; {stdlib,"ERTS CXC 138 10","1.18.3"},
&gt; {kernel,"ERTS CXC 138 10","2.15.3"}]
&gt; 
&gt; Then:
&gt; 
&gt; (lilith@127.0.0.1)4&gt; application:start(lager).
&gt; {error,{already\\_started,lager}}
&gt; 
&gt; And yet... 
&gt; 
&gt; (lilith@127.0.0.1)5&gt; lager:info("foo ~s", [bar]). 
&gt; \\*\\* exception error: undefined function lager:info/2
&gt; (lilith@127.0.0.1)6&gt; lager:error("foo ~s", [bar]).
&gt; \\*\\* exception error: undefined function lager:error/2
&gt; (lilith@127.0.0.1)7&gt; lager:warning("foo ~s", [bar]).
&gt; \\*\\* exception error: undefined function lager:warning/2
&gt; (lilith@127.0.0.1)8&gt; lager:info("Hello!"). 
&gt; \\*\\* exception error: undefined function lager:info/1
&gt; 
&gt; Can anyone tell me why lager continues to give me 'undef'?
&gt; 
Lager doesn't actually define lager:info/3, the parse transform walks
the AST of the module and replaces any calls to
lager:(debug|info|notice|...) with some different code. So, since you're
calling lager from the shell, the parse transform isn't involved and you
get undef. If you want to log from the shell, you can use use
lager:log(info, self(), "foo ~s", [bar]), or whatever.

Andrew

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

