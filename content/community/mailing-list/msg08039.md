---
title: "Merge problems in multi-backend with bitcask..."
description: ""
project: community
lastmod: 2012-07-24T01:32:29-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08039"
author_name: "Denis Barishev"
project_section: "mailinglistitem"
sent_date: 2012-07-24T01:32:29-07:00
---

Hello!

We use multibackend where each backend is a bitcask backend. A few days 
ago riak began to merge and it seems that it got into eternal cycle. Cuz 
it's trying to merge unreasonably long:


look
 1.2G /var/lib/riak/kv\\_bitcask/exp\\_2month
 69M /var/lib/riak/kv\\_bitcask/exp\\_1day

And these to backends are being merged already for 1 day!!! It seems 
that riak stuck. What can we do?


(riak@192.168.152.86)1&gt; 08:20:17.554 [info] Merged 
["/var/lib/riak/kv\\_bitcask/exp\\_2month/519518160144969396705216092879616229643319771136",[],["/var/lib/riak/kv\\_bitcask/exp\\_2month/519518160144969396705216092879616229643319771136/1341241781.bitcask.data"]] 
in 1.584775 seconds.


(riak@192.168.152.86)1&gt; 08:20:18.823 [info] Merged 
["/var/lib/riak/kv\\_bitcask/exp\\_1day/890602560248518965780370444936484965102833893376",[],["/var/lib/riak/kv\\_bitcask/exp\\_1day/890602560248518965780370444936484965102833893376/1341246223.bitcask.data"]] 
in 0.063074 seconds.


(riak@192.168.152.86)1&gt; 08:20:19.857 [info] Merged 
["/var/lib/riak/kv\\_bitcask/exp\\_2month/890602560248518965780370444936484965102833893376",[],["/var/lib/riak/kv\\_bitcask/exp\\_2month/890602560248518965780370444936484965102833893376/1341241804.bitcask.data"]] 
in 0.994357 seconds.


(riak@192.168.152.86)1&gt; 08:20:20.298 [info] Merged 
["/var/lib/riak/kv\\_bitcask/exp\\_1day/176978713895539025251227460211737396911460581376",[],["/var/lib/riak/kv\\_bitcask/exp\\_1day/176978713895539025251227460211737396911460581376/1341246181.bitcask.data"]] 
in 0.057028 seconds.


(riak@192.168.152.86)1&gt; 08:20:22.106 [info] Merged 
["/var/lib/riak/kv\\_bitcask/exp\\_2month/176978713895539025251227460211737396911460581376",[],["/var/lib/riak/kv\\_bitcask/exp\\_2month/176978713895539025251227460211737396911460581376/1341241773.bitcask.data"]] 
in 1.768717 seconds.


(riak@192.168.152.86)1&gt; 08:20:23.108 [info] Merged 
["/var/lib/riak/kv\\_bitcask/exp\\_1day/1233142006497949337234359077604363797834693083136",[],["/var/lib/riak/kv\\_bitcask/exp\\_1day/1233142006497949337234359077604363797834693083136/1341246813.bitcask.data"]] 
in 0.06311 seconds.

Regards,
Denis
