---
title: "Re: N val nad W - can write ever fail??"
description: ""
project: community
lastmod: 2012-11-13T00:51:57-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg09296"
mailinglist_parent_id: "msg09291"
author_name: "kamiseq"
project_section: "mailinglistitem"
sent_date: 2012-11-13T00:51:57-08:00
---


yes, that was my conclusion thats why my question was 'it is possible to
fail write'.
in a simple scenario you can use R val to ensure that you have enough nodes
to read from and riak will fail if you have less and this could be nice
sometimes. my point was that you cannot fail write, riak will never
complain.

anyway thanks for response


pozdrawiam
Paweł Kamiński

kami...@gmail.com
pkaminski....@gmail.com
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_


On 13 November 2012 00:21, Eric Redmond  wrote:

&gt; Pawel,
&gt;
&gt; I think you've wandered into a real disconnect between how we communicate
&gt; Riak replication, and how it actually works.
&gt;
&gt; Although we say that N="nodes to replicate to", in reality, N="vnodes
&gt; replicated to with every attempt to ensure they are different nodes with no
&gt; guarantee". This is why you can have 3 nodes with 64 vnodes, and still set
&gt; N&gt;3.
&gt;
&gt; Now W is just the number of successful responses for a write to be
&gt; considered a success. W can be any number less than or equal to N, but the
&gt; difference will still be replicated as well, just asynchronously. For
&gt; example, if N=3, W=2, once two nodes (well, vnodes) have responded, your
&gt; write is considered a success. In the background, Riak will still ensure
&gt; that third node is replicated to, giving you three total replicas.
&gt;
&gt; Hope that helps,
&gt; Eric
&gt;
&gt;
&gt;
&gt; On Nov 12, 2012, at 3:01 PM, kamiseq  wrote:
&gt;
&gt; this is funny but recently I started to think again about how riak works
&gt; and I thought I know more or less the basics ;]
&gt;
&gt; but I start digging and again I read
&gt; http://docs.basho.com/riak/latest/tutorials/fast-track/Tunable-CAP-Controls-in-Riak/and
&gt; then made few tests with riak bucket configured as follows
&gt;
&gt; N = 3
&gt; W = 3
&gt;
&gt; I have 2 nodes running in my cluster so far (only 2 are connected) for
&gt; test and I can still write with hinted handoff. I updated the data and I
&gt; wrote again with same key - I got success.
&gt;
&gt; I changed properties on per request basis and I set w=1 I stopped first
&gt; node (so I had only one running) and put new key and value. I started first
&gt; node and query for the key and I got data from both nodes. I did the same
&gt; with new key again this time with w=3. and again it was successful.
&gt;
&gt; what is the real difference between N and W. if hinted handoff always save
&gt; data for later synchronisation can write ever fail. are there any
&gt; differences between first write and later updates.
&gt;
&gt; I hope it is not really stupid question
&gt;
&gt; pozdrawiam
&gt; Paweł Kamiński
&gt;
&gt; kami...@gmail.com
&gt; pkaminski....@gmail.com
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

