---
title: "Re: Riak Join is Screwed Up"
description: ""
project: community
lastmod: 2012-05-03T00:05:29-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07378"
mailinglist_parent_id: "msg07377"
author_name: "Rebecca Meritz"
project_section: "mailinglistitem"
sent_date: 2012-05-03T00:05:29-07:00
---


I figured out a way to fix the problem. But I don't understand why the
solution works.

Before A sent a join request to B and then B to C and the second request
failed.

Now A sends a join request to B and then C to B and the second
request succeeds.

Must a node that is the only member of its cluster always ask to join the
larger cluster for the request to succeed? Why is this?

Thanks,
Rebecca

On Thu, May 3, 2012 at 8:41 AM, Rebecca Meritz wrote:

&gt; I'm testing a script that joins my riak ring on all machines. There is no
&gt; data in the database yet but I have repeated joined the ring
&gt; an separated it while working on the script that sets up the environment on
&gt; my machines. The ring is now in a bizarre state:
&gt;
&gt; [rebecca]$ riak-admin member\\_status
&gt; Attempting to restart script through sudo -u riak
&gt; ================================= Membership
&gt; ==================================
&gt; Status Ring Pending Node
&gt;
&gt; -------------------------------------------------------------------------------
&gt; valid 50.0% -- 'r...@xx.xxx.xx.10'
&gt; valid 50.0% -- 'r...@xx.xxx.xx.12'
&gt;
&gt; -------------------------------------------------------------------------------
&gt; Valid:2 / Leaving:0 / Exiting:0 / Joining:0 / Down:0
&gt; [pay@payment-testing-gw2 ~]$ riak-admin join r...@xx.xxx.xx.14
&gt; Attempting to restart script through sudo -u riak
&gt; \\*Failed: This node is already a member of a cluster\\*
&gt; [pay@payment-testing-gw2 ~]$ riak-admin force-remove r...@xx.xxx.xx.14
&gt; Attempting to restart script through sudo -u riak
&gt; \\*Failed: "r...@xx.xxx.xx.14" is not a member of the cluster.\\*
&gt;
&gt; I cannot join a new member nor can I remove it.
&gt;
&gt; I've tried stop them all get them to leave, if they wouldn't leave I
&gt; forced their removal. I stopped them all. I even deleted the whole old ring
&gt; file before restarting.
&gt;
&gt; How can I fix this situations. What causes the above error?
&gt;
&gt; Thanks,
&gt; Rebecca
&gt;
