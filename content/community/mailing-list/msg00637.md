---
title: "Re: basho_bench results"
description: ""
project: community
lastmod: 2010-06-23T04:21:10-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg00637"
mailinglist_parent_id: "msg00636"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2010-06-23T04:21:10-07:00
---


Change 'update' to 'put' in your list of operations and it should work.

Sean Cribbs 
Developer Advocate
Basho Technologies, Inc.
http://basho.com/

On Jun 23, 2010, at 4:40 AM, Germain Maurice wrote:

&gt; Hi Sean,
&gt; 
&gt; Thank you for your answer, i'm relieved by reading your first impression.
&gt; I tried to use the null driver as you advised, but {driver, null} and 
&gt; {driver, basho\\_bench\\_driver\\_null} didn't work.
&gt; 
&gt; INFO: Est. data size: 37.25 GB
&gt; INFO: Starting max worker: &lt;0.64.0&gt;
&gt; INFO: Starting max worker: &lt;0.62.0&gt;
&gt; INFO: Starting max worker: &lt;0.60.0&gt;
&gt; INFO: Starting max worker: &lt;0.58.0&gt;
&gt; DEBUG:Driver basho\\_bench\\_driver\\_null crashed: {function\\_clause,
&gt; [{basho\\_bench\\_driver\\_null,run,
&gt; [update,
&gt; 
&gt; #Fun,
&gt; 
&gt; #Fun,
&gt; 51974]},
&gt; {basho\\_bench\\_worker,
&gt; worker\\_next\\_op,1},
&gt; {basho\\_bench\\_worker,
&gt; max\\_worker\\_run\\_loop,1}]}
&gt; INFO: Starting max worker: &lt;0.56.0&gt;
&gt; DEBUG:Driver basho\\_bench\\_driver\\_null crashed: {function\\_clause,
&gt; [{basho\\_bench\\_driver\\_null,run,
&gt; [update,
&gt; 
&gt; #Fun,
&gt; 
&gt; #Fun,
&gt; 98189]},
&gt; {basho\\_bench\\_worker,
&gt; worker\\_next\\_op,1},
&gt; {basho\\_bench\\_worker,
&gt; max\\_worker\\_run\\_loop,1}]}
&gt; ....
&gt; 
&gt; Any explanation ?
&gt; 
&gt; Thanks
&gt; 
&gt; Le 22/06/10 23:53, Sean Cribbs a écrit :
&gt;&gt; 
&gt;&gt; Germain,
&gt;&gt; 
&gt;&gt; Sorry for not getting back to you sooner. Your graphs are slightly 
&gt;&gt; disconcerting to me for a few reasons.
&gt;&gt; 
&gt;&gt; 1) The throughput graphs have consistent upward trends, which says to me 
&gt;&gt; that something - cache, buffer pools, whatever - aren't "warmed up" until 
&gt;&gt; the end of the test. There might also be something external to the test 
&gt;&gt; going on.
&gt;&gt; 
&gt;&gt; 2) You have a lot of concurrent workers. 5 should be more than enough to 
&gt;&gt; saturate your cluster when there's no throttling ({mode,max}). Be sure your 
&gt;&gt; client machine is not the limiting factor here (and that you're not running 
&gt;&gt; basho\\_bench on the same machine as a node).
&gt;&gt; 
&gt;&gt; 3) Your payload size is really large (fixed size of 400K). If this is 
&gt;&gt; representative of your application's workload, that's fine. But you might 
&gt;&gt; try running the test with the "null" driver, which will detect how well the 
&gt;&gt; key and value generators perform in combination (doesn't actually hit Riak). 
&gt;&gt; It should give you an idea of how costly the generation is, and thus what 
&gt;&gt; the upper limits of throughput are.
&gt;&gt; 
&gt;&gt; Sean Cribbs 
&gt;&gt; Developer Advocate
&gt;&gt; Basho Technologies, Inc.
&gt;&gt; http://basho.com/
&gt;&gt; 
&gt;&gt; On Jun 22, 2010, at 4:38 PM, Germain Maurice wrote:
&gt;&gt; 
&gt;&gt;&gt; No one ?
&gt;&gt;&gt; 
&gt;&gt;&gt; Le 18/06/2010 18:47, Germain Maurice a écrit :
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; Hi all,
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; We led some tests with basho\\_bench and we got some results here : 
&gt;&gt;&gt;&gt; http://erralt.wordpress.com/2010/06/18/benching-riak-with-basho\\_bench/
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; I put inside the pictures the content of each configuration file we used 
&gt;&gt;&gt;&gt; to launch the benchmarks (easier to compare).
&gt;&gt;&gt;&gt; When looking at the last benchmark and after 3000 seconds elapsed, can we 
&gt;&gt;&gt;&gt; considered that more than 2500 operations are done in one second ? On each 
&gt;&gt;&gt;&gt; second can we expect to get the same quantity of read and write requests 
&gt;&gt;&gt;&gt; throughout the benchmark ?
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; Regards,
&gt;&gt;&gt;&gt; Germain
&gt;&gt;&gt;&gt; -- 
&gt;&gt;&gt;&gt; Germain Maurice
&gt;&gt;&gt;&gt; Administrateur Système/Réseau
&gt;&gt;&gt;&gt; Tel : +33.(0)1.42.43.54.33
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; http://www.linkfluence.net
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt; 
&gt; 
&gt; 
&gt; -- 
&gt; Germain Maurice
&gt; Administrateur Système/Réseau
&gt; Tel : +33.(0)1.42.43.54.33
&gt; 
&gt; http://www.linkfluence.net

