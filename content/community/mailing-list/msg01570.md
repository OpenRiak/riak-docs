---
title: "Re: riak hangs"
description: ""
project: community
lastmod: 2010-11-18T12:49:47-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01570"
mailinglist_parent_id: "msg01569"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2010-11-18T12:49:47-08:00
---


{error,emfile} generally means that you don't have enough file descriptors 
available to the process. Set `ulimit -n` higher when starting Riak or use 
sysctl to increase the limit.

Sean Cribbs 
Developer Advocate
Basho Technologies, Inc.
http://basho.com/

On Nov 18, 2010, at 3:47 PM, Andrea Campolonghi wrote:

&gt; Hi,
&gt; 
&gt; I am testing riak on an ubuntu 64 bit (10.10).
&gt; After few operations riak hangs and I find this log report:
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; application: mochiweb
&gt; "Accept failed error"
&gt; "{error,emfile}"
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; application: mochiweb
&gt; "Accept failed error"
&gt; "{error,emfile}"
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; application: mochiweb
&gt; "Accept failed error"
&gt; "{error,emfile}"
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; application: mochiweb
&gt; "Accept failed error"
&gt; "{error,emfile}"
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; application: mochiweb
&gt; "Accept failed error"
&gt; "{error,emfile}"
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; application: mochiweb
&gt; "Accept failed error"
&gt; "{error,emfile}"
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; application: mochiweb
&gt; "Accept failed error"
&gt; "{error,emfile}"
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; application: mochiweb
&gt; "Accept failed error"
&gt; "{error,emfile}"
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; application: mochiweb
&gt; "Accept failed error"
&gt; "{error,emfile}"
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; application: mochiweb
&gt; "Accept failed error"
&gt; "{error,emfile}"
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; application: mochiweb
&gt; "Accept failed error"
&gt; "{error,emfile}"
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; application: mochiweb
&gt; "Accept failed error"
&gt; "{error,emfile}"
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; application: mochiweb
&gt; "Accept failed error"
&gt; "{error,emfile}"
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; application: mochiweb
&gt; "Accept failed error"
&gt; "{error,emfile}"
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; application: mochiweb
&gt; "Accept failed error"
&gt; "{error,emfile}"
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; application: mochiweb
&gt; "Accept failed error"
&gt; "{error,emfile}"
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; {mochiweb\\_socket\\_server,256,{acceptor\\_error,{error,accept\\_failed}}}
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; File operation error: emfile. Target: ./lib.beam. Function: get\\_file. 
&gt; Process: code\\_server.
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; File operation error: emfile. Target: 
&gt; /usr/lib/riak/lib/kernel-2.13.5/ebin/lib.beam. Function: get\\_file. Process: 
&gt; code\\_server.
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; File operation error: emfile. Target: 
&gt; /usr/lib/riak/lib/stdlib-1.16.5/ebin/lib.beam. Function: get\\_file. Process: 
&gt; code\\_server.
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; File operation error: emfile. Target: 
&gt; /usr/lib/riak/lib/sasl-2.1.9/ebin/lib.beam. Function: get\\_file. Process: 
&gt; code\\_server.
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; File operation error: emfile. Target: 
&gt; /usr/lib/riak/lib/os\\_mon-2.2.5/ebin/lib.beam. Function: get\\_file. Process: 
&gt; code\\_server.
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; File operation error: emfile. Target: 
&gt; /usr/lib/riak/lib/crypto-1.6.4/ebin/lib.beam. Function: get\\_file. Process: 
&gt; code\\_server.
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; File operation error: emfile. Target: 
&gt; /usr/lib/riak/lib/runtime\\_tools-1.8.3/ebin/lib.beam. Function: get\\_file. 
&gt; Process: code\\_server.
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; File operation error: emfile. Target: 
&gt; /usr/lib/riak/lib/erlang\\_js-0.4.1/ebin/lib.beam. Function: get\\_file. Process: 
&gt; code\\_server.
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; File operation error: emfile. Target: 
&gt; /usr/lib/riak/lib/mochiweb-1.7.1/ebin/lib.beam. Function: get\\_file. Process: 
&gt; code\\_server.
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; File operation error: emfile. Target: 
&gt; /usr/lib/riak/lib/webmachine-1.7.2/ebin/lib.beam. Function: get\\_file. 
&gt; Process: code\\_server.
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; File operation error: emfile. Target: 
&gt; /usr/lib/riak/lib/luke-0.2.1/ebin/lib.beam. Function: get\\_file. Process: 
&gt; code\\_server.
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; File operation error: emfile. Target: 
&gt; /usr/lib/riak/lib/bitcask-1.1.4/ebin/lib.beam. Function: get\\_file. Process: 
&gt; code\\_server.
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; File operation error: emfile. Target: 
&gt; /usr/lib/riak/lib/riak\\_core-0.13.0/ebin/lib.beam. Function: get\\_file. 
&gt; Process: code\\_server.
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; File operation error: emfile. Target: 
&gt; /usr/lib/riak/lib/riak\\_kv-0.13.0/ebin/lib.beam. Function: get\\_file. Process: 
&gt; code\\_server.
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; File operation error: emfile. Target: 
&gt; /usr/lib/riak/lib/skerl-0.1/ebin/lib.beam. Function: get\\_file. Process: 
&gt; code\\_server.
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; File operation error: emfile. Target: 
&gt; /usr/lib/riak/lib/luwak-1.0/ebin/lib.beam. Function: get\\_file. Process: 
&gt; code\\_server.
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; File operation error: emfile. Target: 
&gt; /usr/lib/riak/lib/xmerl-1.2.4/ebin/lib.beam. Function: get\\_file. Process: 
&gt; code\\_server.
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; File operation error: emfile. Target: 
&gt; /usr/lib/riak/lib/webtool-0.8.6/ebin/lib.beam. Function: get\\_file. Process: 
&gt; code\\_server.
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; File operation error: emfile. Target: 
&gt; /usr/lib/riak/lib/tools-2.6.5.1/ebin/lib.beam. Function: get\\_file. Process: 
&gt; code\\_server.
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; File operation error: emfile. Target: 
&gt; /usr/lib/riak/lib/syntax\\_tools-1.6.5/ebin/lib.beam. Function: get\\_file. 
&gt; Process: code\\_server.
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; File operation error: emfile. Target: 
&gt; /usr/lib/riak/lib/ssl-3.10.8/ebin/lib.beam. Function: get\\_file. Process: 
&gt; code\\_server.
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; File operation error: emfile. Target: 
&gt; /usr/lib/riak/lib/snmp-4.16/ebin/lib.beam. Function: get\\_file. Process: 
&gt; code\\_server.
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; File operation error: emfile. Target: 
&gt; /usr/lib/riak/lib/riakc-1.0.1/ebin/lib.beam. Function: get\\_file. Process: 
&gt; code\\_server.
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; File operation error: emfile. Target: 
&gt; /usr/lib/riak/lib/public\\_key-0.5/ebin/lib.beam. Function: get\\_file. Process: 
&gt; code\\_server.
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; File operation error: emfile. Target: 
&gt; /usr/lib/riak/lib/protobuffs-0.5.0/ebin/lib.beam. Function: get\\_file. 
&gt; Process: code\\_server.
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; File operation error: emfile. Target: 
&gt; /usr/lib/riak/lib/otp\\_mibs-1.0.6/ebin/lib.beam. Function: get\\_file. Process: 
&gt; code\\_server.
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; File operation error: emfile. Target: 
&gt; /usr/lib/riak/lib/mnesia-4.4.13/ebin/lib.beam. Function: get\\_file. Process: 
&gt; code\\_server.
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; File operation error: emfile. Target: 
&gt; /usr/lib/riak/lib/inets-5.3/ebin/lib.beam. Function: get\\_file. Process: 
&gt; code\\_server.
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; File operation error: emfile. Target: 
&gt; /usr/lib/riak/lib/hipe-3.7.5/ebin/lib.beam. Function: get\\_file. Process: 
&gt; code\\_server.
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; File operation error: emfile. Target: 
&gt; /usr/lib/riak/lib/eunit-2.1.5/ebin/lib.beam. Function: get\\_file. Process: 
&gt; code\\_server.
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; File operation error: emfile. Target: 
&gt; /usr/lib/riak/lib/erts-5.7.5/ebin/lib.beam. Function: get\\_file. Process: 
&gt; code\\_server.
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; File operation error: emfile. Target: 
&gt; /usr/lib/riak/lib/ebloom-1.0.2/ebin/lib.beam. Function: get\\_file. Process: 
&gt; code\\_server.
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; File operation error: emfile. Target: 
&gt; /usr/lib/riak/lib/compiler-4.6.5/ebin/lib.beam. Function: get\\_file. Process: 
&gt; code\\_server.
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; File operation error: emfile. Target: lib.beam. Function: get\\_file. Process: 
&gt; code\\_server.
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; \\*\\* gen\\_event handler sasl\\_report\\_file\\_h crashed.
&gt; \\*\\* Was installed in error\\_logger
&gt; \\*\\* Last event was: {error\\_report,&lt;0.95.0&gt;,
&gt; {&lt;0.1703.0&gt;,crash\\_report,
&gt; [[{initial\\_call,
&gt; {mochiweb\\_acceptor,init,
&gt; ['Argument\\_\\_1','Argument\\_\\_2',
&gt; 'Argument\\_\\_3']}},
&gt; {pid,&lt;0.1703.0&gt;},
&gt; {registered\\_name,[]},
&gt; {error\\_info,
&gt; {exit,
&gt; {error,accept\\_failed},
&gt; [{mochiweb\\_acceptor,init,3},
&gt; {proc\\_lib,init\\_p\\_do\\_apply,3}]}},
&gt; {ancestors,
&gt; [webmachine\\_mochiweb,riak\\_core\\_sup,&lt;0.96.0&gt;]},
&gt; {messages,[]},
&gt; {links,[&lt;0.108.0&gt;]},
&gt; {dictionary,[]},
&gt; {trap\\_exit,false},
&gt; {status,running},
&gt; {heap\\_size,233},
&gt; {stack\\_size,24},
&gt; {reductions,207}],
&gt; []]}}
&gt; \\*\\* When handler state == {&lt;0.40.0&gt;,"/var/log/riak/sasl-error.log",error}
&gt; \\*\\* Reason == {'module could not be loaded',
&gt; [{lib,format\\_exception,
&gt; [5,exit,
&gt; {error,accept\\_failed},
&gt; [{mochiweb\\_acceptor,init,3},
&gt; {proc\\_lib,init\\_p\\_do\\_apply,3}],
&gt; #Fun,#Fun]},
&gt; {proc\\_lib,format\\_exception,3},
&gt; {proc\\_lib,format\\_rep,1},
&gt; {proc\\_lib,format\\_rep,1},
&gt; {proc\\_lib,format\\_rep,1},
&gt; {proc\\_lib,format,1},
&gt; {sasl\\_report,write\\_report2,5},
&gt; {sasl\\_report\\_file\\_h,handle\\_event,2}]}
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; {mochiweb\\_socket\\_server,256,{acceptor\\_error,{error,accept\\_failed}}}
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; {mochiweb\\_socket\\_server,256,{acceptor\\_error,{error,accept\\_failed}}}
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; {mochiweb\\_socket\\_server,256,{acceptor\\_error,{error,accept\\_failed}}}
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; {mochiweb\\_socket\\_server,256,{acceptor\\_error,{error,accept\\_failed}}}
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:04 ===
&gt; {mochiweb\\_socket\\_server,256,{acceptor\\_error,{error,accept\\_failed}}}
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:05 ===
&gt; {mochiweb\\_socket\\_server,256,{acceptor\\_error,{error,accept\\_failed}}}
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:05 ===
&gt; {mochiweb\\_socket\\_server,256,{acceptor\\_error,{error,accept\\_failed}}}
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:05 ===
&gt; {mochiweb\\_socket\\_server,256,{acceptor\\_error,{error,accept\\_failed}}}
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:05 ===
&gt; {mochiweb\\_socket\\_server,256,{acceptor\\_error,{error,accept\\_failed}}}
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:05 ===
&gt; {mochiweb\\_socket\\_server,256,{acceptor\\_error,{error,accept\\_failed}}}
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:05 ===
&gt; {mochiweb\\_socket\\_server,256,{acceptor\\_error,{error,accept\\_failed}}}
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:05 ===
&gt; {mochiweb\\_socket\\_server,256,{acceptor\\_error,{error,accept\\_failed}}}
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:05 ===
&gt; {mochiweb\\_socket\\_server,256,{acceptor\\_error,{error,accept\\_failed}}}
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:05 ===
&gt; {mochiweb\\_socket\\_server,256,{acceptor\\_error,{error,accept\\_failed}}}
&gt; 
&gt; =ERROR REPORT==== 18-Nov-2010::21:42:05 ===
&gt; {mochiweb\\_socket\\_server,256,{acceptor\\_error,{error,accept\\_failed}}}
&gt; 
&gt; 
&gt; Any suggestion?
&gt; 
&gt; Thanks
&gt; 
&gt; Andrea
&gt; 
&gt; -- 
&gt; Andrea Campolonghi
&gt; 
&gt; Cell : +39 347 2298435
&gt; acampolon...@gmail.com
&gt; and...@andreacfm.com
&gt; http://www.andreacfm.com
&gt; 
&gt; Railo Team
&gt; and...@getrailo.org
&gt; http://getrailo.org
&gt; 
&gt; 

