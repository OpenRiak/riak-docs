---
title: "Re: No message in sasl-error.log for wrong post commit erlang hook"
description: ""
project: community
lastmod: 2012-02-06T12:33:26-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06550"
mailinglist_parent_id: "msg06549"
author_name: "Alin Popa"
project_section: "mailinglistitem"
sent_date: 2012-02-06T12:33:26-08:00
---


Wow, thanks Ryan,

It's really something that I would expect from a decent logging framework.
For sure, that'll (lager) be something that I'll be using in my
applications in the future.

Alin.

On Mon, Feb 6, 2012 at 10:00 PM, Ryan Zezeski  wrote:

&gt; Alin,
&gt;
&gt; Lager is flexible like that. If you notice the error counts incrementing
&gt; then you can do something like the following at the Riak console.
&gt;
&gt; {ok, Trace} = lager:trace\\_file("/failing-postcommits", [{module,
&gt; riak\\_kv\\_put\\_fsm}, {function, decode\\_postcommit}], debug).
&gt;
&gt; That should send any debug msgs originating from that module + function to
&gt; the /failing-postcommits file. To stop the trace run the following:
&gt;
&gt; lager:stop\\_trace(Trace).
&gt;
&gt; -Ryan
&gt;
&gt;
&gt; On Sat, Feb 4, 2012 at 1:04 AM, Alin Popa  wrote:
&gt;
&gt;&gt; Ok, that makes sense; but, what if another approach is picked up, like
&gt;&gt; being able to tune this specific logging separately ? Or have the lager
&gt;&gt; being able to log messages on different files per module/function - that
&gt;&gt; way the logging flood would be isolated only to this...
&gt;&gt; Sorry for being so insistent regarding this matter, but it seems that
&gt;&gt; post commits are a pretty neat feature which we're not able to use because
&gt;&gt; of this exception/error handling inconvenient.
&gt;&gt;
&gt;&gt; Thanks,
&gt;&gt; Alin
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; On 4 Feb 2012, at 00:12, Andrew Thompson  wrote:
&gt;&gt;
&gt;&gt; &gt; On Fri, Feb 03, 2012 at 11:44:49PM +0200, Alin Popa wrote:
&gt;&gt; &gt;&gt; Ryan,
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; I would say that having those informations into the log files,
&gt;&gt; especially
&gt;&gt; &gt;&gt; the reason why it failed, is very useful, so, would you say it would be
&gt;&gt; &gt;&gt; helpful if I'm going to open a pull request which will increase the log
&gt;&gt; &gt;&gt; level usage from debug to error for pre/post commit hooks execution
&gt;&gt; errors
&gt;&gt; &gt;&gt; (as it seems to be pretty straight forward) ?
&gt;&gt; &gt;&gt;
&gt;&gt; &gt; The reason we put it at the debug level is to avoid logging flood when
&gt;&gt; &gt; you break a postcommit hook in production and all your postcommits start
&gt;&gt; &gt; to fail. If you're doing thousands of writes per second, that would
&gt;&gt; &gt; obviously be bad.
&gt;&gt; &gt;
&gt;&gt; &gt; Andrew
&gt;&gt; &gt;
&gt;&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; &gt; riak-users mailing list
&gt;&gt; &gt; riak-users@lists.basho.com
&gt;&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

&gt;
&gt;
