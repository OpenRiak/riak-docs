---
title: "Re: Riak Search index repair and"
description: ""
project: community
lastmod: 2012-11-20T17:38:24-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg09360"
mailinglist_parent_id: "msg08687"
author_name: "Mark Phillips"
project_section: "mailinglistitem"
sent_date: 2012-11-20T17:38:24-08:00
---


Hi Andrew,

On Mon, Sep 24, 2012 at 10:22 PM, Andrew Stone  wrote:
&gt; Hi,
&gt;
&gt; I've been reading up on Riak search and am very pleased to see the new index
&gt; repair command in 1.2. However, it seems that in order to use it you must be
&gt; able to somehow detect when there are inconsistencies in your search indexes
&gt; across vnodes. While it's likely the inconsistencies would be spotted by a
&gt; user, it certainly wouldn't be good to wait for that before trying to
&gt; correct the issue. Is there any technique that can be used to automatically
&gt; detect replica loss?
&gt;

Riak Search 1.2.1 only has the manual repair command. We aren't going
to do much work on adding active anti entropy to Riak Search for a few
reasons, primarily because its term-based partitioning makes it
impractical. However Yokozuna [1], the Riak and Solr work that Ryan
and others are doing, already has this capability. Yokozuna is still a
few Riak releases away from being official but it's coming along at a
rapid pace and it worth your time to investigate and test.

Thanks,

Mark

[1] https://github.com/rzezeski/yokozuna
[2] 
http://lists.basho.com/pipermail/riak-users\\_lists.basho.com/2012-November/010042.html

&gt; Thanks,
&gt; Andrew
&gt;
