---
title: "Re: problem with RiakClient streamBucket method"
description: ""
project: community
lastmod: 2011-03-04T03:11:08-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02558"
mailinglist_parent_id: "msg02557"
author_name: "santhosh venkat"
project_section: "mailinglistitem"
sent_date: 2011-03-04T03:11:08-08:00
---


Hi Russell ,
 I am using RiakClient of version 0.14 .You are
absolutely right,I had a older version of JSON package in my classpath.
Thanks a ton.

--
Santhosh

On Fri, Mar 4, 2011 at 2:46 PM, Russell Brown  wrote:

&gt; Hi Santosh,
&gt; On Fri, 2011-03-04 at 12:46 +0530, santhosh venkat wrote:
&gt; &gt; Hi ,
&gt; &gt; streamBucket method of RiakClient throws this exception when i
&gt; &gt; tried using it .
&gt; &gt;
&gt; &gt; Exception in thread "main" java.lang.NoSuchMethodError:
&gt; &gt; org.json.JSONTokener.end()
&gt;
&gt; &gt; I used it exactly in the same way as said in github wiki .
&gt; &gt;
&gt; &gt; Later reading the source Code of riak , Later reading the source Code
&gt; &gt; of riak , I found that the problem lies in StreamedKeysCollection
&gt; &gt; Class of package com.basho.riak.client.response.
&gt;
&gt; &gt; while (!tokens.end()) { // -&gt; Method end() is not defined in
&gt; &gt; JSONTokener Class
&gt; &gt;
&gt; &gt; There is a method named more() defined in JSONTokener Class , I was
&gt; &gt; able to successfully retrieve all the keys when i replaced end()
&gt; &gt; method with more() .
&gt; &gt;
&gt; &gt; Please throw some light if i am using the api's wrongly .
&gt; &gt;
&gt;
&gt; This looks like a classpath thing.
&gt;
&gt; Do you have another version of JSON-java on your classpath?
&gt;
&gt; There is an older version of JSON-java available from maven central (eg
&gt; json-20090211.jar) in which JSONTokener has the more() method.
&gt;
&gt; The riak-java-client actually bundles a more recent set of JSON-java
&gt; classes (from Douglas Crockford's githb repo) with the riak client jar,
&gt; this version of JSONTokener has the end() method.
&gt;
&gt; Just to be sure, please can you let me know which version of the
&gt; RiakClient you are using? (And just for good measure, Java version?)
&gt;
&gt; Going forward, I'm debating whether to use maven to manage this
&gt; dependency, or to stay the way things are. Including the JSON classes in
&gt; the jar makes it more standalone, but of course it can lead to exactly
&gt; this sort of issue. Opinions appreciated.
&gt;
&gt;
&gt; &gt;
&gt; &gt; --
&gt; &gt; Santhosh
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;
