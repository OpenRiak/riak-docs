---
title: "Re: Change bucket properties - allow_mult"
description: ""
project: community
lastmod: 2012-01-22T13:55:29-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06367"
mailinglist_parent_id: "msg06366"
author_name: "Kresten Krab Thorup"
project_section: "mailinglistitem"
sent_date: 2012-01-22T13:55:29-08:00
---


My recommendation would be to create a new bucket with the wanted properties, 
and then move all objects, lazily if need be. You could do it with a kind of 
read-repair: if an item is not in the new bucket (on lookup), then look it up 
in the old bucket and move it.

To work effectively with allow\\_mult=true you generally need a single point of 
entry in your code for reading values (because you only want conflict 
resolution code in one place anyway), and this place in your code might as well 
also be the place to do application-level read repair such as what you're 
asking about, but also the place to do lazy schema upgrades.

With such a setup in place, you can of course start a slow batch job that does 
all the conversion/moving in the background. But if you have a lot of data is 
it probably impossible to do with no downtime any other way.

Kresten


On Jan 22, 2012, at 10:38 PM, Vishal Shah wrote:

We might have a need to change some bucket properties such as allow\\_mult in the 
near future.
What is the recommended approach to change these for an existing non-empty 
bucket.

I found good doc on changing back ends and requiring read repair. Didn't find 
anything on other bucket props.

Thanks.
V


\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com



Mobile: + 45 2343 4626 | Skype: krestenkrabthorup | Twitter: @drkrab
Trifork A/S | Margrethepladsen 4 | DK- 8000 Aarhus C | Phone : +45 8732 
8787 | www.trifork.com





\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

