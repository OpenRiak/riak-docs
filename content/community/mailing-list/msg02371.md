---
title: "0.14 OSX riaksearch in inconsistent state"
description: ""
project: community
lastmod: 2011-02-18T08:26:23-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02371"
author_name: "Gary William Flake"
project_section: "mailinglistitem"
sent_date: 2011-02-18T08:26:23-08:00
---


I just ran a script on a my dev machine to remove everything in the
local riaksearch instance. In the process, I found something very
strange. Specifically, there exists objects in my instance that
cannot be deleted (I get an error whenever I try) and that always
appear with their data intact.

Here's a specific example:

&gt; curl 
&gt; 'http://localhost:8098/riak/clips/9ce2532a8d53b6335b1c4d3955d1267345905cac:4c8a0a1d8ef83af4be6a9aa170d6323ecba22b2f'
{"user":"9ce2532a8d53b6335b1c4d3955d1267345905cac","blob":"4c8a0a1d8ef83af4be6a9aa170d6323ecba22b2f","ctime":1297550238922,"mtime":1297550238922,"text":"something
matter gop imgur imgur com","title":"Something the matter, GOP? -
Imgur 
","url":"http://imgur.com/Ir34G","domain":"imgur.com","tags":"","annote":"","private":1,"width":"625","height":"332","version":"0.1"}

&gt; curl -X DELETE 
&gt; 'http://localhost:8098/riak/clips/9ce2532a8d53b6335b1c4d3955d1267345905cac:4c8a0a1d8ef83af4be6a9aa170d6323ecba22b2f'
500 Internal Server
ErrorInternal Server Error
=====================

The server
encountered an error while processing this
request:  

```
{error,badarg,
       [{erlang,iolist_to_binary,[notfound]},
        {wrq,append_to_response_body,2},
        {riak_kv_wm_raw,delete_resource,2},
        {webmachine_resource,resource_call,3},
        {webmachine_resource,do,3},
        {webmachine_decision_core,resource_call,1},
        {webmachine_decision_core,decision,1},
        
{webmachine_decision_core,handle_request,2}]}
```


---

mochiweb+webmachine
web server

Meanwhile, sasl-error.log shows for that last command:


=ERROR REPORT==== 18-Feb-2011::08:24:18 ===
webmachine error:
path="/riak/clips/9ce2532a8d53b6335b1c4d3955d1267345905cac:4c8a0a1d8ef83af4be6a9aa170d6323ecba22b2f"
{error,badarg,
 [{erlang,iolist\\_to\\_binary,[notfound]},
 {wrq,append\\_to\\_response\\_body,2},
 {riak\\_kv\\_wm\\_raw,delete\\_resource,2},
 {webmachine\\_resource,resource\\_call,3},
 {webmachine\\_resource,do,3},
 {webmachine\\_decision\\_core,resource\\_call,1},
 {webmachine\\_decision\\_core,decision,1},
 {webmachine\\_decision\\_core,handle\\_request,2}]}

Does anyone have any ideas what is going on and how best to avoid it?
It stuff like this that terrifies me.

Thanks,
-- GWF

