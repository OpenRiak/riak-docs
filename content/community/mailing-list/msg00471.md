---
title: "Re: cannot query bucket when a node is down"
description: ""
project: community
lastmod: 2010-05-31T10:46:55-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg00471"
mailinglist_parent_id: "msg00470"
author_name: "Johan Harjono"
project_section: "mailinglistitem"
sent_date: 2010-05-31T10:46:55-07:00
---


Hi,

Thanks for the tip! Using keys=false work (though r=1 does not work). So I
gather that if I want to figure out all the keys a bucket has I'm not
supposed to GET bucket/? In that case, how does one figure out which keys a
bucket contains in riak?

thanks,
Johan

On Mon, May 31, 2010 at 1:00 PM, Alexander Sicular wrote:

&gt; Mabe it's tring to get all keys? Try with keys=false... Mabe try with r=1?
&gt;
&gt; On 2010-05-31, Johan Harjono  wrote:
&gt; &gt; Hi,
&gt; &gt;
&gt; &gt; I'm having a trouble querying a bucket when one of the nodes in the
&gt; cluster
&gt; &gt; is down. This is what I did
&gt; &gt;
&gt; &gt; 1. Set up a cluster of two nodes, call them node1 and node2
&gt; &gt; 2. Use curl to create a bucket "users" and key "user1" with value "Hello
&gt; &gt; World"
&gt; &gt; 3. Test that I can use curl to fetch the bucket and key from both node1
&gt; and
&gt; &gt; node2 (i.e. GET /bucket/ and GET /bucket/key)
&gt; &gt; 4. use `riak stop` to stop one of the nodes from running
&gt; &gt; 5. Use curl to GET bucket/key - this works (and of course, the request is
&gt; &gt; directed at the node that is still running)
&gt; &gt; 6. Use curl to GET bucket/ - at this point it just hangs
&gt; &gt;
&gt; &gt; What I do not understand is how it is possible that when one of the nodes
&gt; is
&gt; &gt; down, GET on a bucket/key works, but GET on a bucket/ does not. Any
&gt; thoughts
&gt; &gt; on this?
&gt; &gt;
&gt; &gt; thank you,
&gt; &gt; Johan
&gt; &gt;
&gt;
&gt; --
&gt; Sent from my mobile device
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

