---
title: "Re: Riak 1.0 pre2 legacy_keylisting crash"
description: ""
project: community
lastmod: 2011-09-11T07:32:40-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg04652"
mailinglist_parent_id: "msg04651"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2011-09-11T07:32:40-07:00
---


AFAIK you need to make sure that all nodes are upgraded first, and then turn
legacy\\_keylisting off. The crash you see is not (necessarily) related to
keylisting, but MapReduce. I hope to push out a new version of the Ruby
client in the next few weeks to support the new features.

On Sun, Sep 11, 2011 at 3:38 AM, Ryan Caught  wrote:

&gt; Hi,
&gt; I'm testing out a rolling upgrade with 1.0 pre2 and found that when I turn
&gt; off legacy\\_keylisting Riak crashes on me. Things work fine when
&gt; legacy\\_keylisting is turned on.
&gt;
&gt; Here is what I found in the crash log.
&gt;
&gt; 2011-09-11 07:15:44 =SUPERVISOR REPORT====
&gt;&gt; Supervisor: {local,riak\\_pipe\\_fitting\\_sup}
&gt;&gt; Context: child\\_terminated
&gt;&gt; Reason: killed
&gt;&gt; Offender:
&gt;&gt; [{pid,&lt;0.2725.0&gt;},{name,undefined},{mfargs,{riak\\_pipe\\_fitting,start\\_link,undefined}},{restart\\_type,temporary},{shutdown,2000},{child\\_type,worker}]
&gt;
&gt;
&gt; I'm using Ubuntu with Ripple (0.9.5).
&gt;
&gt;
&gt; Ryan
&gt;

-- 
Sean Cribbs 
Developer Advocate
Basho Technologies, Inc.
http://www.basho.com/
