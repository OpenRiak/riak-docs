---
title: "Re: PB problems with 1.0.0 (and now 1.1.1)"
description: ""
project: community
lastmod: 2012-04-12T14:43:07-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07198"
mailinglist_parent_id: "msg07197"
author_name: "Peter Fales"
project_section: "mailinglistitem"
sent_date: 2012-04-12T14:43:07-07:00
---


Ryan,

Thanks! That helped. I must have copied something from my 1.0.0 build
to the 1.1.1 directory. I'm not sure what it was but starting with 
a freshly un-tarred copy of 1.1.1 fixed the problem. 

Thanks for your time to look at this.

On Thu, Apr 12, 2012 at 05:05:54PM -0400, Ryan Zezeski wrote:
&gt; Replies inline...
&gt; 
&gt; On Thu, Apr 12, 2012 at 11:32 AM, Peter Fales &lt;
&gt; peter.fa...@alcatel-lucent.com&gt; wrote:
&gt; 
&gt; &gt; Thanks for your help.
&gt; &gt;
&gt; &gt; Obviously, I'm sort of stumbling around here, and I didn't realize
&gt; &gt; that there was a dependency on protobuffs within erlang.
&gt; &gt;
&gt; 
&gt; You don't need to have protobuffs installed on the Erlang VM. I'm saying
&gt; that you \\_shouldn't\\_ have a protobuffs version globally installed as my
&gt; guess is that could be picked up by reltool which is responsible for
&gt; building the Riak release. You will want to uninstall erlang-protobuffs.
&gt; 
&gt; code:which(protobuffs).
&gt; &gt; I get
&gt; &gt; non\\_existing
&gt; &gt;
&gt; &gt;
&gt; This is good, that's what you want in this case.
&gt; 
&gt; 
&gt; &gt; After I ran "yum install erlang-protobuffs", I now get:
&gt; &gt;
&gt; &gt; "/usr/lib/erlang/lib/protobuffs-0/ebin/protobuffs.beam"
&gt; &gt;
&gt; &gt;
&gt; &gt; That sounded promising, but even after "make distclean" and "make rel"
&gt; &gt; the file "./rel/riak/lib/protobuffs-0/ebin/protobuffs.beam" is still
&gt; &gt; the smaller size and does not include the symbol next\\_field\\_num
&gt; &gt;
&gt; 
&gt; I'm not sure how but when you run `make rel` it is picking up a different
&gt; protobuffs version from somewhere in your environment. Try doing something
&gt; like `sudo find / -name 'protobuffs.beam'` and see what turns up.
&gt; 
&gt; -Z

-- 
Peter Fales
Alcatel-Lucent
Member of Technical Staff
1960 Lucent Lane
Room: 9H-505
Naperville, IL 60566-7033
Email: peter.fa...@alcatel-lucent.com
Phone: 630 979 8031

