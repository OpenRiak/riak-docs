---
title: "RE: Social network data / Graph properties of Riak"
description: ""
project: community
lastmod: 2011-11-18T11:51:43-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05670"
mailinglist_parent_id: "msg05667"
author_name: "Jeroen van Dijk"
project_section: "mailinglistitem"
sent_date: 2011-11-18T11:51:43-08:00
---


And I also didn't include the riak user list for this reply:


On Fri, Nov 18, 2011 at 7:04 PM, Aphyr  wrote:

&gt; Depending on whether you think it will be more efficient to store the
&gt; graph or its dual, consider each node a vertex and write the adjacency list
&gt; as a part of its data. You can store whatever weights, etc. you need on the
&gt; edges there.
&gt;
&gt; Don't use links; they're just a thin layer on top of mapreduce, so there's
&gt; really not much advantage to using them. Links are subject to the HTTP
&gt; header lengths too, so storing more than a thousand on any node is likely
&gt; to break down.
&gt;
&gt;
Thank you for this suggestion. Also thanks for the warning on not using
links for what I want. So you are saying each vertex will have a list of
the other vertices that it is connected to? And save each edge as key/value
pair? Or are you saying each vertex should embed the adjacent edges,
meaning duplicated edges?

I'm guessing you mean the former, because that makes sense to me. So you
would save a graph assuming users and items like the following key/value
pairs:

//Vertices
user1: properties
user2: properties
item1: properties

//Edges
user1-owns-item1: properties
user1-follows-user2: properties
user2-follows-user1: properties

To be able to find the available edges, each vertices would need to
reference the keys of the edges. Is this what you mean?

If so, one more question about a possible problem. Say I have an item with
many many outgoing edges, so it needs to embed these references. This would
make it really costly to fetch this item from Riak I assume, even if you
are only interested in normal properties. Wouldn't that mean you will have
to save the properties seperately from the edges references to it feasible?

Did I grasp what you were proposing Kyle?

Thanks,
Jeroen

&gt; --Kyle
&gt;
&gt;
&gt; On 11/18/2011 07:38 AM, Jeroen van Dijk wrote:
&gt;
&gt;&gt; Hi all,
&gt;&gt;
&gt;&gt; I'm currently evaluating whether Riak would fit as the main storage of
&gt;&gt; my current project, a social network. The reason I am attracted to Riak
&gt;&gt; and less to a Graph database as main storage is that I want the easy
&gt;&gt; horizontal scalability and multi-site replication that Riak provides.
&gt;&gt; The only thing I doubt is whether the key-value/link model of Riak is
&gt;&gt; flexible enough to be able to store a property graph
&gt;&gt; (http://arxiv.org/abs/1006.\\*\\*2361 ). I
&gt;&gt; am not asking whether the
&gt;&gt; querying/graph traversing will be easy; I'm probably going to use a
&gt;&gt; graph database or a Pregel like platform (e.g.
&gt;&gt; http://www.goldenorbos.org/) for that problem. I guess my main question
&gt;&gt; is whether it would be easy/feasible to import and export a property
&gt;&gt; graph in and from Riak? Has someone done this before?
&gt;&gt;
&gt;&gt; I realize the above might be too specific, so here are two more
&gt;&gt; questions that I think are relevant:
&gt;&gt;
&gt;&gt; - Is there a known upper limit of links that can be stored (I don't want
&gt;&gt; to add them all at once so 1000 per request is fine,
&gt;&gt; http://lists.basho.com/\\*\\*pipermail/riak-users\\_lists.\\*\\*
&gt;&gt; basho.com/2010-March/000786.\\*\\*html
&gt;&gt; )
&gt;&gt; - Is there a way to add meta data to links (edges)? E.g. weigths and
&gt;&gt; other attributes.
&gt;&gt;
&gt;&gt; Any other ideas or advise are also highly appreciated.
&gt;&gt;
&gt;&gt; Cheers,
&gt;&gt;
&gt;&gt; Jeroen
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\*\\*\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/\\*\\*mailman/listinfo/riak-users\\_\\*\\*lists.basho.com
&gt;&gt;
&gt;
