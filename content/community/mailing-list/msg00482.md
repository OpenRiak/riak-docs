---
title: "Strange Replication Behavior in 2-node Cluster?"
description: ""
project: community
lastmod: 2010-06-01T18:44:29-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg00482"
author_name: "Alan McConnell"
project_section: "mailinglistitem"
sent_date: 2010-06-01T18:44:29-07:00
---


Saw what I think is strange replication/failover behavior while testing out
a cluster with two nodes. My cluster is running defaults and maps simple
keys to byte payloads. I saw this sequence of events:

1) Query for key "X". Receive the correct value "Y" as expected.

2) Shut down node #1. Query for key "X" on node #2. Get a timeout. Based
on my knowledge of Riak this is expected. Defaults are N=3 and R=2, so two
or even all three of the replicas may be on the downed node #1. R=2
constraint can't be met.

3) Set R=1. Query for key "X" again on node #2. Get a response that key
"X" doesn't exist. This behavior I don't fully understand. My expectation
is that if node #1 contains no replicas it would timeout, and if it
contained 1 it would return the correct value "Y".

Is this expected behavior?
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

