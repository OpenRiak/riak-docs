---
title: "Re: riak-admin status & /stats very slow"
description: ""
project: community
lastmod: 2012-08-03T16:38:39-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08182"
mailinglist_parent_id: "msg08113"
author_name: "Sebastian Cohnen"
project_section: "mailinglistitem"
sent_date: 2012-08-03T16:38:39-07:00
---


I still get this error with the latest 1.2 rc6 (1.2.0rc6-osx-i386).

On 29.07.2012, at 13:56, Sebastian Cohnen  wrote:

&gt; Hey list,
&gt; 
&gt; I just noticed that riak-admin status is very slow on my local machine and 
&gt; contains "{error,timeout}" for cpu\\_\\* fields. To verify that my homebrew 
&gt; installation isn't messed up, I downloaded riak-1.1.4 for OS X in 32 and 64 
&gt; bit and started riak from there without changing anything in the config 
&gt; files. Everything seems to work fine (e.g. riak-admin test) and the node 
&gt; seems to be accessible.
&gt; 
&gt; riak-admin status however takes up to 50-60sec to complete (see [0] for its 
&gt; output), and the http://localhost:8098/stats times out every single time 
&gt; (also see [0]). The logs (and also the riak-admin status output) indicate 
&gt; that there is a problem reading the CPU usage, see [1].
&gt; 
&gt; I'm on OS X (10.8), MacBook Pro Retina (MacBookPro10,1), 16GB RAM and, as I 
&gt; said, riak 1.1.4. As far as I can tell, I get the same error from the 32 and 
&gt; 64bit version.
&gt; 
&gt; 
&gt; 
&gt; Best
&gt; 
&gt; Sebastian
&gt; 
&gt; 
&gt; [0] https://gist.github.com/3197626
&gt; 
&gt; [1] crash.log
&gt; 
&gt; 2012-07-29 13:12:39 =ERROR REPORT====
&gt; Error in process &lt;0.3246.0&gt; on node 'riak@127.0.0.1' with exit value: 
&gt; {{badmatch,{error,{fread,float}}},[{cpu\\_sup,get\\_uint32\\_measurement,2},{cpu\\_sup,measurement\\_server\\_loop,1}]}
&gt; 
&gt; console.log
&gt; 
&gt; 2012-07-29 13:12:59.068 [error] &lt;0.1748.0&gt; webmachine error: path="/stats"
&gt; {error,{exit,{json\\_encode,{bad\\_term,{error,timeout}}},[{mochijson2,json\\_encode,2},{mochijson2,'-json\\_encode\\_proplist/2-fun-0-',3},{lists,foldl,3},{mochijson2,json\\_encode\\_proplist,2},{riak\\_kv\\_wm\\_stats,produce\\_body,2},{webmachine\\_resource,resource\\_call,3},{webmachine\\_resource,do,3},{webmachine\\_decision\\_core,resource\\_call,1}]}}
