---
title: "Re: Migrating cluster from 1.1.1 to 1.2.1"
description: ""
project: community
lastmod: 2012-10-29T19:47:29-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg09080"
mailinglist_parent_id: "msg09079"
author_name: "Matt Black"
project_section: "mailinglistitem"
sent_date: 2012-10-29T19:47:29-07:00
---


Following up on my own email, minutes after I sent it...

The node join appeared stalled before I wrote the below - much like I
needed to issue the "cluster commit" command. However, I just checked
"member\\_status" and partitions are actually being transferred to my new
node.


On 30 October 2012 13:42, Matt Black  wrote:

&gt; Hello list,
&gt;
&gt; I just started a cluster migration, and encountered a problem with
&gt; introducing the first replacement node :)
&gt;
&gt; I'm not able to either "cluster plan" or "cluster commit" with the new
&gt; node:
&gt;
&gt; root@ip-10-138-x-221:~# riak-admin cluster join riak@10.130.x.125
&gt; Attempting to restart script through sudo -H -u riak
&gt; Success: staged join request for 'riak@10.138.x.221' to 'riak@10.130.x.125
&gt; '
&gt;
&gt; root@ip-10-138-x-221:~# riak-admin cluster plan
&gt; Attempting to restart script through sudo -H -u riak
&gt; RPC to 'riak@10.138.x.221' failed: {'EXIT',
&gt; {noproc,
&gt; {gen\\_server,call,
&gt; [{riak\\_core\\_claimant,
&gt; 'riak@10.128.x.82'},
&gt; plan,infinity]}}}
&gt;
&gt; root@ip-10-138-x-221:~# riak-admin cluster commit
&gt; Attempting to restart script through sudo -H -u riak
&gt; RPC to 'riak@10.138.x.221' failed: {'EXIT',
&gt; {noproc,
&gt; {gen\\_server,call,
&gt; [{riak\\_core\\_claimant,
&gt; 'riak@10.128.x.82'},
&gt; commit,infinity]}}}
&gt;
&gt; Now, since the cluster group of commands were new in 1.2 - should I be
&gt; using the older join commands for this migration?
&gt;
&gt; Thanks
&gt;
