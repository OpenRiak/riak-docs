---
title: "Re: Ideal Backend for keys that frequently get overwritten"
description: ""
project: community
lastmod: 2011-09-14T07:24:30-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg04700"
mailinglist_parent_id: "msg04696"
author_name: "Jeremy Raymond"
project_section: "mailinglistitem"
sent_date: 2011-09-14T07:24:30-07:00
---


Maybe I just need to tweak the Bitcask parameters to merge more often?

I have approx 17000 keys which get overwritten once an hour. After each
updated the /var/lib/riak/bitcask folder grows by 20 MB (so about 1200 bytes
per key). With the default frag\\_merge\\_trigger at 60 I should get a merge
every 3 hours as I would have &gt; 60% of the keys being dead? This would also
meet the default frag\\_threshold of 40 since &gt; 40% of the keys are dead? I'm
not seeing the merging happening.

- Jeremy


On Wed, Sep 14, 2011 at 9:28 AM, Jeremiah Peschka &lt;
jeremiah.pesc...@gmail.com&gt; wrote:

&gt; I would think that the InnoDB backend would be a better backend for the use
&gt; case you're describing.
&gt; ---
&gt; Jeremiah Peschka - Founder, Brent Ozar PLF, LLC
&gt; Microsoft SQL Server MVP
&gt;
&gt; On Sep 14, 2011, at 8:09 AM, Jeremy Raymond wrote:
&gt;
&gt; &gt; Hi,
&gt; &gt;
&gt; &gt; I store data in Riak whose keys constantly get overwritten with new data.
&gt; I'm currently using Bitcask as the back-end and recently noticed the Bitcask
&gt; data folder grow to 24GB. After restarting the nodes, which I think
&gt; triggered Bitcask merge, the data went down to 96MB. Today the data dirs are
&gt; back up to around 500MB. Would an alternate backend better suit this type of
&gt; use case where keys are constantly being overwritten?
&gt; &gt;
&gt; &gt; - Jeremy
