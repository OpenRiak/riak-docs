---
title: "Re: tuning riak for 100s of concurrent connections"
description: ""
project: community
lastmod: 2011-02-24T20:05:29-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02448"
mailinglist_parent_id: "msg02428"
author_name: "Wilson MacGyver"
project_section: "mailinglistitem"
sent_date: 2011-02-24T20:05:29-08:00
---


Sadly, the caching solution doesn't work for us. We have too much
data, and the access pattern is fairly
random. Making cache not a viable option.


On Wed, Feb 23, 2011 at 6:38 PM, Ryan Zezeski  wrote:
&gt; May I also suggest in a heavy GET scenario where the data doesn't change 
&gt; often or can be slightly stale that you also make use of some sort of shortly 
&gt; lived, in-memory cache. Â You could also make use of HTTPs conditional GET 
&gt; which avoids passing the data over the wire if it hasn't changed.
&gt;
&gt; -Ryan
&gt;
&gt; [Sent from my iPhone]
&gt;
&gt; On Feb 23, 2011, at 3:08 PM, Bob Feldbauer  wrote:
&gt;
&gt;&gt; After importing data into Riak, I'm in a basically 100% GET scenario. I 
&gt;&gt; haven't done much load testing other than throwing live traffic at it, but 
&gt;&gt; with that I've seen ~150 concurrent connections.
&gt;&gt;
&gt;&gt; I'm using Jetty app servers (Riak Java client) which are using protobufs to 
&gt;&gt; hit an HAProxy server, which load balances my 7 Riak nodes. I really haven't 
&gt;&gt; done anything special, other than using protobufs and fronting Riak with 
&gt;&gt; HAProxy.
&gt;&gt;
&gt;&gt; Other than that, I would just say "use fast disks" and/or add nodes as 
&gt;&gt; needed to hit your capacity targets -- because with that traffic and 7 nodes 
&gt;&gt; with 1 1TB disk per node, I'm seeing ~0.5-&lt;1.0 load average on Riak nodes as 
&gt;&gt; iowait.
&gt;&gt;
&gt;&gt; Feel free to hop on the #riak IRC channel and I'd be happy to try to answer 
&gt;&gt; any other questions about our setup.
&gt;&gt;
&gt;&gt; - Bob Feldbauer
&gt;&gt;
&gt;&gt;&gt; ---------- Forwarded message ----------
&gt;&gt;&gt; From: Wilson MacGyver
&gt;&gt;&gt; Date: Tue, Feb 22, 2011 at 7:15 PM
&gt;&gt;&gt; Subject: tuning riak for 100s of concurrent connections
&gt;&gt;&gt; To: riak-users Users
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; Are there any guidelines/howtos on tuning riak nodes for 100s
&gt;&gt;&gt; (200-500) of concurrent connections
&gt;&gt;&gt; which are 99.9% HTTP GET?
&gt;&gt;&gt;
&gt;&gt;&gt; Thanks,
&gt;&gt;&gt;
&gt;&gt;&gt; --
&gt;&gt;&gt; Omnem crede diem tibi diluxisse supremum.
&gt;&gt;&gt;

&gt;&gt;
&gt;


-- 
Omnem crede diem tibi diluxisse supremum.

