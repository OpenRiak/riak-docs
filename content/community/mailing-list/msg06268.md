---
title: "Re: Keep Crashing"
description: ""
project: community
lastmod: 2012-01-12T23:43:56-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06268"
mailinglist_parent_id: "msg06266"
author_name: "Russell Brown"
project_section: "mailinglistitem"
sent_date: 2012-01-12T23:43:56-08:00
---


Hi,

This line in your log suggests that your hitting the limit for open file 
handles.

&gt; 2012-01-13 02:33:18.706 [error] &lt;0.1953.0&gt;@riak\\_kv\\_vnode:init:245 Failed to 
&gt; start riak\\_kv\\_bitcask\\_backend Reason: {{badmatch,{error,emfile}}


This knowledge base article [1] and this wiki page [2] should help.

Cheers

Russell

[1] 
https://help.basho.com/entries/477233-i-see-errors-in-the-riak-logs-that-contain-error-emfile-in-the-message-what-do-they-mean
[2] http://wiki.basho.com/Open-Files-Limit.html
On 13 Jan 2012, at 01:35, kser wrote:

&gt; The riak db had been running fine for more than 1 month.
&gt; But today it keep crashing.
&gt; Here is the log
&gt; 
&gt; 
&gt; 2012-01-13 02:30:37.015 [error] &lt;0.116.0&gt; webmachine error:
&gt; path="/riak/contexts"
&gt; {error,{error,{badmatch,{error,insufficient\\_vnodes\\_available}},[{riak\\_kv\\_wm\\_keylist,produce\\_bucket\\_body,2},{webmachine\\_resource,resource\\_call,3},{webmachine\\_resour,resource\\_call,1},{webmachine\\_decision\\_core,decision,1},{webmachine\\_decision\\_core,handle\\_request,2},{webmachine\\_mochiweb,loop,1},{mochiweb\\_http,headers,5}]}}
&gt; 2012-01-13 02:30:37.056 [error] &lt;0.118.0&gt; webmachine error:
&gt; path="/riak/contexts"
&gt; {error,{error,{badmatch,{error,insufficient\\_vnodes\\_available}},[{riak\\_kv\\_wm\\_keylist,produce\\_bucket\\_body,2},{webmachine\\_resource,resource\\_call,3},{webmachine\\_resour,resource\\_call,1},{webmachine\\_decision\\_core,decision,1},{webmachine\\_decision\\_core,handle\\_request,2},{webmachine\\_mochiweb,loop,1},{mochiweb\\_http,headers,5}]}}
&gt; 2012-01-13 02:30:37.078 [error] &lt;0.120.0&gt; webmachine error:
&gt; path="/riak/contexts"
&gt; {error,{error,{badmatch,{error,insufficient\\_vnodes\\_available}},[{riak\\_kv\\_wm\\_keylist,produce\\_bucket\\_body,2},{webmachine\\_resource,resource\\_call,3},{webmachine\\_resour,resource\\_call,1},{webmachine\\_decision\\_core,decision,1},{webmachine\\_decision\\_core,handle\\_request,2},{webmachine\\_mochiweb,loop,1},{mochiweb\\_http,headers,5}]}}
&gt; 2012-01-13 02:33:18.706 [error] &lt;0.1953.0&gt;@riak\\_kv\\_vnode:init:245 Failed to
&gt; start riak\\_kv\\_bitcask\\_backend Reason:
&gt; {{badmatch,{error,emfile}},[{bitcask,scan\\_key\\_files,3},{bitcask,init\\_keydir,2},{bitcask,open,2},{riak\\_kv\\_bitcask\\_backend,start,2},{riak\\_kv\\_vnode,init,1},{riak\\_core\\_vnode,init,1},{gen\\_fsm,init\\_it,6},{proc\\_lib,init\\_p\\_do\\_apply,3}]}
&gt; 2012-01-13 02:33:18.707 [error] &lt;0.174.0&gt; gen\\_server riak\\_kv\\_vnode\\_master
&gt; terminated with reason: no match of right hand value
&gt; {error,{{case\\_clause,ok},[{riak\\_core\\_vnode,init,1},{gen\\_fsm,init\\_it,6},{proc\\_lib,init\\_p\\_do\\_apply,3}]}}
&gt; in riak\\_core\\_vnode\\_master:get\\_vnode/2
&gt; 2012-01-13 02:33:18.708 [error] &lt;0.1953.0&gt; CRASH REPORT Process &lt;0.1953.0&gt;
&gt; with 0 neighbours crashed with reason: no case clause matching ok in
&gt; riak\\_core\\_vnode:init/1
&gt; 2012-01-13 02:33:18.709 [error] &lt;0.174.0&gt; CRASH REPORT Process
&gt; riak\\_kv\\_vnode\\_master with 0 neighbours crashed with reason: no match of
&gt; right hand value
&gt; {error,{{case\\_clause,ok},[{riak\\_core\\_vnode,init,1},{gen\\_fsm,init\\_it,6},{proc\\_lib,init\\_p\\_do\\_apply,3}]}}
&gt; in riak\\_core\\_vnode\\_master:get\\_vnode/2
&gt; 2012-01-13 02:33:18.710 [error] &lt;0.95.0&gt; Supervisor riak\\_core\\_vnode\\_sup had
&gt; child undefined started with {riak\\_core\\_vnode,start\\_link,undefined} at
&gt; &lt;0.1953.0&gt; exit with reason no case clause matching ok in
&gt; riak\\_core\\_vnode:init/1 in context child\\_terminated
&gt; 2012-01-13 02:33:18.710 [error] &lt;0.170.0&gt; Supervisor riak\\_kv\\_sup had child
&gt; riak\\_kv\\_vnode\\_master started with
&gt; riak\\_core\\_vnode\\_master:start\\_link(riak\\_kv\\_vnode, riak\\_kv\\_legacy\\_vnode) at
&gt; &lt;0.174.0&gt; exit with reason no match of right hand value
&gt; {error,{{case\\_clause,ok},[{riak\\_core\\_vnode,init,1},{gen\\_fsm,init\\_it,6},{proc\\_lib,init\\_p\\_do\\_apply,3}]}}
&gt; in riak\\_core\\_vnode\\_master:get\\_vnode/2 in context child\\_terminated
&gt; 
&gt; 
&gt; --
&gt; View this message in context: 
&gt; http://riak-users.197444.n3.nabble.com/Keep-Crashing-tp3655458p3655458.html
&gt; Sent from the Riak Users mailing list archive at Nabble.com.
&gt; 

