---
title: "Re: REST query returns JSON properties as strings?"
description: ""
project: community
lastmod: 2012-07-14T08:41:09-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07945"
mailinglist_parent_id: "msg07944"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2012-07-14T08:41:09-07:00
---


That is not currently configurable, no. However, you can implement your own
extractor to do so. I think the original reasoning for '\\_' over '.' was
that Lucene query syntax allows '.' to specify the index name. Having
multiple '.' in a field name might break the query parser.

On Sat, Jul 14, 2012 at 11:35 AM, Andrew Zeneski
wrote:

&gt; Sean,
&gt;
&gt; One thing I have been meaning to ask is if we can change the character
&gt; used when flattening the fields. I'd like to use a character besides \\_ so
&gt; that I can identify the parent from a field that has \\_ in its name. I would
&gt; probably change it to '.' personally.
&gt;
&gt; Is this configurable?
&gt;
&gt; Andrew
&gt;
&gt; On Jul 14, 2012, at 11:31 AM, Sean Cribbs wrote:
&gt;
&gt; Hi (what's your name?),
&gt;
&gt; What a search query returns to you is the "index document", or the result
&gt; of transforming the input before adding it to the search indexes; this also
&gt; means that deeply nested fields will be flattened. If you want the
&gt; original, you can use MapReduce to retrieve the documents resulting from a
&gt; search query.
&gt;
&gt; On Fri, Jul 13, 2012 at 8:54 PM, 7zark7 &lt;7za...@gmail.com&gt; wrote:
&gt;
&gt;&gt; I would like to store JSON documents in a Riak 1.1.x bucket (using
&gt;&gt; bitcask), and would like to search for them via REST using JSON property
&gt;&gt; values.
&gt;&gt;
&gt;&gt; E.g. JSON docs with typed properties like this:
&gt;&gt;
&gt;&gt; {
&gt;&gt; "type": "whatever",
&gt;&gt; "owner": 123456,
&gt;&gt; "text": "Blah blah blah",
&gt;&gt; "enabled": true
&gt;&gt; }
&gt;&gt;
&gt;&gt; However, the query response
&gt;&gt; (/solr/mybucket/select?q=enabled:true&wt=json) returns each doc's
&gt;&gt; properties as JSON strings, and not the original JSON type:
&gt;&gt;
&gt;&gt; {"responseHeader":{
&gt;&gt; "status":0,
&gt;&gt; "QTime":1,
&gt;&gt; "params":{
&gt;&gt; "q":"enabled:true",
&gt;&gt; "q.op":"or",
&gt;&gt; "filter":"",
&gt;&gt; "wt":"json"
&gt;&gt; }
&gt;&gt; },"response":{
&gt;&gt; "numFound":1,
&gt;&gt; "start":0,
&gt;&gt; "maxScore":"0.353553",
&gt;&gt; "docs":[
&gt;&gt; {
&gt;&gt; "id":"Obdoy3XbJe3kdh1T2bfxJgISCCL",
&gt;&gt; "index":"rest",
&gt;&gt; \\* "fields":{\\*
&gt;&gt; \\* "enabled": "true",\\*
&gt;&gt; \\* "owner": "123456",\\*
&gt;&gt; \\* "text": "Blah blah blah",\\*
&gt;&gt; \\* "type": "whatever"\\*
&gt;&gt; \\* },\\*
&gt;&gt; "props":{}
&gt;&gt; }
&gt;&gt; ]
&gt;&gt; }}
&gt;&gt;
&gt;&gt; This makes the results unusable for me, and I'm concerned I'd have to
&gt;&gt; fall back to N calls back to retrieve each original doc, which is not
&gt;&gt; feasible.
&gt;&gt;
&gt;&gt;
&gt;&gt; I'm used to CouchDB+Lucene which behaves "correctly" to me.
&gt;&gt;
&gt;&gt; Is there some way to do what I'd like? E.g. another query method or
&gt;&gt; option?
&gt;&gt;
&gt;&gt; Thanks
&gt;&gt;
&gt;&gt;
&gt;
&gt;
&gt; --
&gt; Sean Cribbs 
&gt; Software Engineer
&gt; Basho Technologies, Inc.
&gt; http://basho.com/
&gt;

-- 
Sean Cribbs 
Software Engineer
Basho Technologies, Inc.
http://basho.com/
