---
title: "Re: Riak Client Resources,	Deleting a Key Doesn't Remove it from bucket.keys"
description: ""
project: community
lastmod: 2011-05-26T11:31:03-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03434"
mailinglist_parent_id: "msg03433"
author_name: "Mike Oxford"
project_section: "mailinglistitem"
sent_date: 2011-05-26T11:31:03-07:00
---


On Thu, May 26, 2011 at 11:21 AM, Sean Cribbs  wrote:

&gt; With all of this discussion it has been pointed out to me there are two
&gt; issues at hand, possibly conflated as one:
&gt;
&gt; \\* Which is the least surprise, caching the key list or the incurring the
&gt; large cost of the operation? Or is it that it is apparently performant in
&gt; development (small numbers of keys) but not in production (large numbers of
&gt; keys)?
&gt; \\* How can we better discourage use of list-keys while still exposing to
&gt; developers who can handle the performance hit (or enjoy holes in their
&gt; feet)?
&gt;
&gt;
1) I would rather be hit by a large cost that I can see and feel instead of
trying to run down hidden keys from a stale cache (reflect on chasing memory
corruptions...)
2) Make a riak-configuration value to enable or disable it. You have to
explicitly go turn it on to use it. It's more of an "if you turn this on,
you implicitly accept the penalties and issues surrounding actually using
it."

-mox
