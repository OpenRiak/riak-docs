---
title: "Re: map reduce -> JSON.parse error"
description: ""
project: community
lastmod: 2010-08-29T08:20:13-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg00973"
mailinglist_parent_id: "msg00972"
author_name: "Nils Petersohn"
project_section: "mailinglistitem"
sent_date: 2010-08-29T08:20:13-07:00
---


yes :)

i removed the comment entry, which indeed had some \\r chars in it 
now i am able to let the mapreduce function run.

hope you can fix this issue 525 soon.

nils

On Aug 29, 2010, at 5:01 PM, Sean Cribbs wrote:

&gt; I have found that error comes from json2.js, and in the future we should just 
&gt; use Spidermonkey's builtin. https://issues.basho.com/show\\_bug.cgi?id=525
&gt; 
&gt; Sean Cribbs 
&gt; Developer Advocate
&gt; Basho Technologies, Inc.
&gt; http://basho.com/
&gt; 
&gt; On Aug 29, 2010, at 10:05 AM, James Sadler wrote:
&gt; 
&gt;&gt; Hi Nils,
&gt;&gt; 
&gt;&gt; I ran into a similar problem last week. It seems that certain
&gt;&gt; characters can cause the JSON parser that ships as part of the
&gt;&gt; Spidermonkey JavaScript interpreter that Riak uses to throw an
&gt;&gt; exception. Off the top of my head, I think I managed to make it barf
&gt;&gt; with a \\r embedded within a string.
&gt;&gt; 
&gt;&gt; I don't have the links handy, but I do believe that this is fixed in
&gt;&gt; Spidermonkey, and it's a simple matter of waiting until the fixes are
&gt;&gt; merged into Riak.
&gt;&gt; 
&gt;&gt; Hope that helps :)
&gt;&gt; 
&gt;&gt; James.
&gt;&gt; 
&gt;&gt; On 29 August 2010 23:31, Nils Petersohn  wrote:
&gt;&gt;&gt; hello,
&gt;&gt;&gt; 
&gt;&gt;&gt; when i have a simple json bucket entry like this: 
&gt;&gt;&gt; http://pastebin.com/XcWcvmYe
&gt;&gt;&gt; than i always get an error:
&gt;&gt;&gt; 
&gt;&gt;&gt; {"lineno":483,"message":"JSON.parse","source":"unknown"}
&gt;&gt;&gt; 
&gt;&gt;&gt; the stacktrace is here: http://pastebin.com/EGzUKqps
&gt;&gt;&gt; 
&gt;&gt;&gt; when i try to use a much simpler JSON string than there is no error.
&gt;&gt;&gt; 
&gt;&gt;&gt; this must be some fault of the JSON.parse method ...
&gt;&gt;&gt; 
&gt;&gt;&gt; thx for pointing me in the right direction ...
&gt;&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; 
&gt;&gt; -- 
&gt;&gt; James
&gt;&gt; 
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; 

Nils M. Petersohn
xing.com/profile/Nils\\_Petersohn
blog.srvme.de
twitter.com/snackycracky
facebook.com/nils.petersohn
myspace.com/electrash

p...@berlin.de
0049 (0)151 40 511 351
skype: nilz\\_berlin

Ebertystr. 47
10249 Berlin


\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

