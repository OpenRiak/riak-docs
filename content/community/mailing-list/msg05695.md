---
title: "Re: slow 2 node cluster"
description: ""
project: community
lastmod: 2011-11-20T13:59:43-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05695"
mailinglist_parent_id: "msg05694"
author_name: "Aphyr"
project_section: "mailinglistitem"
sent_date: 2011-11-20T13:59:43-08:00
---

On 11/20/2011 01:34 PM, Catalin Constantin wrote:

To make it simple. No more networking. Just one node (with n = 1) and
local tests.

The producing of data is a simple CSV file read (ruled out too cause
this is fast).


Read from the same disk? If you're interleaving every write with a read 
from this file, how many back-forth seeks do you think your disk is doing?

HDD: 2 x 750 GB SATA 2 (RAID1)


Hint hint hint.


What insert rate should i expect on a normal Debian 6.0 64 bit
installation (no tweaks) ?


450 inserts/second. Or, if you address some of the points I mentioned 
earlier, perhaps 2000-4000/sec, depending on write characteristics. Most 
people find performance improves linearly with nodes, so long as the 
network is not the bottleneck.


Our six-node cluster (bitcask-dedicated SSDs, 2x bonded gige, 2:1 
read:write ratio, median value ~10 kB, n\\_val 3, typical r/w: quorum) 
tops out at about 3,000 aggregate ops/sec while maintaining reasonable 
(~10ms 99%) latencies. I can push it higher if I relax latency constraints.

I can only compare it with other DBs i have tested on the same machine:
ex: mongodb, kyototycoon


These databases solve different problems in different ways. You should 
expect them to perform differently. The question is: for your workload, 
what balance of raw IOPS, redundancy, availability, latency, and 
conflict handling model fits best? Riak trades IOPS for availability and 
redundancy, and trades MVCC/locking for vclock resolution.


--Kyle

