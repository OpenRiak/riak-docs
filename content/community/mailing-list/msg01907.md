---
title: "webmachine error"
description: ""
project: community
lastmod: 2011-01-06T07:51:12-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01907"
author_name: "BOG BOG"
project_section: "mailinglistitem"
sent_date: 2011-01-06T07:51:12-08:00
---


Hello Riak Users, 

After a failed attempt to 'put' an object witk riakc\\_pb\\_socket api, into a 
bucket enabled for indexing and the retrying the same operation with erlang 
http 
client I get the following error. 


It seems to me that this error does not even suppose to appear here. 
webmachine error: path="/riak/noi/0000159876/" 
{error,{error,badarg, 
 [{erlang,iolist\\_to\\_binary,[{error,missing\\_field,&lt;&lt;"value"&gt;&gt;}]}, 
 {wrq,append\\_to\\_response\\_body,2}, 
 {riak\\_kv\\_wm\\_raw,accept\\_doc\\_body,2}, 
 {webmachine\\_resource,resource\\_call,3}, 
 {webmachine\\_resource,do,3}, 
 {webmachine\\_decision\\_core,resource\\_call,1}, 
 {webmachine\\_decision\\_core,accept\\_helper,0}, 
 {webmachine\\_decision\\_core,decision,1}]}} 


The schema I am working with lokks like: 

{ 
 schema, 
 [ 
 {version, "1.1"}, 
 {default\\_field, "index"}, 
 {default\\_op, "or"}, 
 {n\\_val, 3}, 
 {analyzer\\_factory, "com.basho.search.analysis.DefaultAnalyzerFactory"} 
 ], 
 [ 
 {field, [{name, "index"},{type, string}]}, 
 
 {field, [{name, "period"},{type, integer}]}, 
 {field, [{name, "request\\_date"},{type, string}]}, 
 {field, [{name, "comment"},{type, string}]}, 
 {field, [{name, "operator"},{type, string}]}, 
 {field, [{name, "last\\_update"},{type, string}]}, 

 {field, [{name, "worker\\_name"},{type, string}]}, 
 {field, [{name, "worker\\_street1"},{type, string}]}, 
 {field, [{name, "worker\\_street2"},{type, string}]}, 
 {field, [{name, "worker\\_street3"},{type, string}]}, 
 {field, [{name, "worker\\_city"},{type, string}]}, 
 {field, [{name, "worker\\_sp"},{type, string}]}, 
 {field, [{name, "worker\\_pc"},{type, string}]}, 
 {field, [{name, "worker\\_cc"},{type, string}]}, 
 {field, [{name, "worker\\_phone"},{type, string}]}, 
 {field, [{name, "worker\\_fax"},{type, string}]}, 
 {field, [{name, "worker\\_email"},{type, string}]} 
}. 

A working document would look like: 
[{"index",&lt;&lt;"0000314871"&gt;&gt;}, 
 
 

 {"period",1}, 
 
 

 {"request\\_date",&lt;&lt;"2011-01-05 15:06:41"&gt;&gt;}, 
 
 

 {"comment",&lt;&lt;&gt;&gt;}, 
 
 

 {"operator",&lt;&lt;"requests\\_new"&gt;&gt;}, 
 

 {"last\\_update",&lt;&lt;"2011-01-05 15:06:41"&gt;&gt;}, 
 

 {"worker", 
 

 {struct,[{"name",&lt;&gt;}, 
 
 

 
 

 {"street1",&lt;&lt;"Str. Muzeul Zambaccian 22B, Ap.1, Sector 1"&gt;&gt;}, 
 
 

 {"street2",&lt;&lt;&gt;&gt;}, 
 
 

 {"street3",&lt;&lt;&gt;&gt;}, 
 
 

 {"city",&lt;&lt;"Bucuresti"&gt;&gt;}, 
 
 

 {"sp",&lt;&lt;&gt;&gt;}, 
 

 {"pc",&lt;&lt;&gt;&gt;}, 
 

 {"cc",&lt;&lt;"RO"&gt;&gt;}, 
 

 {"phone",&lt;&lt;"+40.723454529"&gt;&gt;}, 
 

 {"fax",&lt;&lt;&gt;&gt;}, 
 
 

 {"email",&lt;&lt;"ileana...@yahoo.com"&gt;&gt;}]}}] 

and I am using riak\\_search-0.13 

Best Wishes, 
Bogdan 

 

