---
title: "Re: ideas on how to implement a page refresh to pull geo location	data stored in riak"
description: ""
project: community
lastmod: 2012-02-28T08:07:22-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06780"
mailinglist_parent_id: "msg06779"
author_name: "Jeremiah Peschka"
project_section: "mailinglistitem"
sent_date: 2012-02-28T08:07:22-08:00
---


You can create a secondary index 
(https://wiki.basho.com/Secondary-Indexes.html) on the timestamp and perform a 
secondary index query to pull back a range of data that matches what you are 
looking for. 

As far as the node.js portions, I have just as much of an idea as you. Perhaps 
someone else on this list can point you in the appropriate directino.
---
Jeremiah Peschka - Managing Director, Brent Ozar PLF, LLC
Microsoft SQL Server MVP

On Feb 28, 2012, at 7:57 AM, Norman Khine wrote:

&gt; Hello,
&gt; Not sure if this is the right forum to post this, but i am hoping you can 
&gt; help.
&gt; I have a livestats nodejs tracking site, code for it is here:
&gt; 
&gt; https://github.com/nkhine/livestats
&gt; 
&gt; which is based on the peepcode screencast, with some updates.
&gt; 
&gt; i am planning to extend the
&gt; https://github.com/nkhine/livestats/blob/master/lib/livestats.js to
&gt; include the riak-js library so as to store the data, something like:
&gt; 
&gt; var db = require('riak-js').getClient({host: "riak.myhost", port: "8098" });
&gt; db.save('user', 'lat', 'lon', 'city', 'timestamp'});
&gt; 
&gt; but, i was wondering how to implement a page refresh and for the map
&gt; to load all entries within a set period of elapsed time. and place the
&gt; entries within the map.
&gt; 
&gt; any pointers much appreciated.
&gt; 
&gt; norman
&gt; 
&gt; -- 
&gt; %&gt;&gt;&gt; "".join( [ {'\\*':'@','^':'.'}.get(c,None) or
&gt; chr(97+(ord(c)-83)%26) for c in ",adym,\\*)&uzq^zqf" ] )
&gt; 
