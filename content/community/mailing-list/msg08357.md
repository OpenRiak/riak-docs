---
title: "Re: can't uninstall pre-commit hook"
description: ""
project: community
lastmod: 2012-08-24T07:20:01-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08357"
mailinglist_parent_id: "msg08227"
author_name: "Ryan Zezeski"
project_section: "mailinglistitem"
sent_date: 2012-08-24T07:20:01-07:00
---


Mark,

This email slipped through the cracks but Mark Phillips kindly brought it
to my attention. The uninstall command works just fine for me against
master. What version of Riak are you running?

Lightbulb...have you by any chance upgraded from older versions over time?
 If so can you show me the JSON returned for a bucket that you've had
enabled since \\_before\\_ upgrading to 1.0.0? Or could you just humor me and
look at the JSON for all your search enabled buckets and see if you have a
"search":true attribute?

-Z

On Wed, Aug 8, 2012 at 2:39 PM, Mark Volkmann wrote:

&gt; On Wed, Aug 8, 2012 at 1:22 PM, Mark Volkmann 
&gt; wrote:
&gt;
&gt;&gt; I have a bucket named "users".
&gt;&gt; When I run "curl http://localhost:8091/riak/users", I get
&gt;&gt; {
&gt;&gt; "props": {
&gt;&gt; . . .
&gt;&gt; "precommit": [ {
&gt;&gt; "mod": "riak\\_search\\_kv\\_hook",
&gt;&gt; "fun": "precommit"
&gt;&gt; }
&gt;&gt; ],
&gt;&gt; . . .
&gt;&gt; }
&gt;&gt; }
&gt;&gt;
&gt;&gt; I have four nodes in my cluster. For each one I cd to the bin directory
&gt;&gt; of the cluster and enter "./search-cmd uninstall users". Then I rerun the
&gt;&gt; command above to see the properties of the user bucket and it still has the
&gt;&gt; same precommit hook!
&gt;&gt;
&gt;&gt; What do I need to do to remove that?
&gt;&gt;
&gt;
&gt; I still don't know why "./search-cmd uninstall users" doesn't work, but I
&gt; found another way to remove the pre-commit hook.
&gt;
&gt; curl http://localhost:8091/riak/{bucket-name} | apto json &gt; props.json
&gt; # edit props.jsoncurl -XPUT http://localhost:8091/riak/{bucket-name} -H 
&gt; "Content-Type: application/json" -d @props.json
&gt;
&gt; --
&gt; R. Mark Volkmann
&gt; Object Computing, Inc.
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

