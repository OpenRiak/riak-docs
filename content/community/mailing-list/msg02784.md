---
title: "Re: PBC client doesn't stop"
description: ""
project: community
lastmod: 2011-03-29T11:37:10-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02784"
mailinglist_parent_id: "msg02774"
author_name: "Keith Dreibelbis"
project_section: "mailinglistitem"
sent_date: 2011-03-29T11:37:10-07:00
---


Hi Russel,

I know a System.exit() would work, but I always feel like that's overkill
for working around rogue threads. A shutdown/stop/close on the client would
be better, or mark the timer thread as a daemon thread like Kresten
suggested.

Keith

On Tue, Mar 29, 2011 at 12:01 AM, Russell Brown wrote:

&gt; On 29 Mar 2011, at 03:17, Keith Dreibelbis wrote:
&gt;
&gt; &gt; Hi riak-users,
&gt; &gt;
&gt; &gt; I'm trying out the java protocol buffers client, and it works fine.
&gt; However, it is preventing my process from exiting. When I used the http
&gt; client from the same spot in code, the process exited, but switching to PBC
&gt; caused it to hang on exit. Usually this behavior means there is a thread
&gt; being spawned that is still running in the background. I wonder if there's
&gt; a way to tell the PBC RiakClient that I'm done with it, and it can close? I
&gt; don't see anything like that in the available methods.
&gt;
&gt; There is a Timer that shuts down any open and inactive sockets. It will
&gt; stop if you issue a System.exit(0) at the end of your program. I could add
&gt; an explicit "shutdown" method to the protocol buffers client, too.
&gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; Keith
&gt; &gt;
