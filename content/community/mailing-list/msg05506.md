---
title: "Re: Nodes neither leaving nor joining the cluster"
description: ""
project: community
lastmod: 2011-11-09T08:55:06-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05506"
mailinglist_parent_id: "msg05504"
author_name: "Alexandre Ravey"
project_section: "mailinglistitem"
sent_date: 2011-11-09T08:55:06-08:00
---


Hi Nitish,

Did you change the node name or IP at any point?
If so, you need to reip your node(s).

Run riak-admin status and check the node name in ring\\_members, must be
the same as your actual node. (ie, same ip and node name).
Check also that you are not using xxx@127.0.0.1 if your nodes aren't
on the same physical box.

If it's a test cluster you may just rm /var/lib/riak/ring/\\* (node
down) and join again.

Regards

Alexandre

On Wed, Nov 9, 2011 at 5:38 PM, Nitish Sharma
 wrote:
&gt; Hi,
&gt; I've installed riak using pre-compiled Debian binary. I setup a Riak cluster
&gt; consisting of 3 nodes (name of each node in format: riak@). The
&gt; configuration file for all the nodes is same.
&gt; Just to clarify my problem, I'll be using node names as A, B, and C.
&gt; Initially, all three nodes were successfully able to form a cluster ( B and
&gt; C joined node A). To perform some tests, node A rebooted and after that its
&gt; ``status" is not showing all three nodes as ring\\_members. While, running
&gt; ``riak-admin status" on nodes B and C was still stating ring\\_members as A,
&gt; B, C.
&gt; Running ``riak-admin leave" on nodes B and C didnt help, since
&gt; running join command again was throwing "Failed: This node is already a
&gt; member of a cluster". Force removal of nodes also didnt do any good; still
&gt; the same inconsistent ring members status.
&gt; Any suggestions ?
&gt; Regards
&gt; Nitish
&gt;
