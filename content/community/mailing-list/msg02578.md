---
title: "Re: Advices for cluster optimal configuration"
description: ""
project: community
lastmod: 2011-03-08T09:36:15-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02578"
mailinglist_parent_id: "msg02577"
author_name: "Jeremiah Peschka"
project_section: "mailinglistitem"
sent_date: 2011-03-08T09:36:15-08:00
---


There are a few things that you can do to speed up your load. When you're 
writing your data, you can set both W and DW to 0 (as long as you have a way to 
check for errors). This will shave a bit of time off of each write because 
you'll be throwing writes against the database and hoping that they stick. You 
can also set the returnbody to false. Returnbody defaults to true IIRC. When 
returnbody enabled, Riak will return the object you wrote and also include the 
Riak specific info (vclock, etc). I don't care about these things when I'm 
doing a bulk load, so I turn that sort of thing off.

Depending on the type of querying you're doing, you can adjust the JavaScript 
VM settings. For example, if you aren't doing any reduce phases in your 
queries, then you can set the number of reduce VMs to 0. Since you're probably 
only doing key lookups, you can probably kill off all of the JavaScript VMs.

I suspect somebody smarter will have better input and will correct me, but 
that's my 2 cents worth. 
-- 
Jeremiah Peschka
Microsoft SQL Server MVP
MCITP: Database Developer, DBA
On Tuesday, March 8, 2011 at 8:34 AM, Thibault Dory wrote: 
&gt; Hello,
&gt; 
&gt; I'm benchmarking various noSQL databases (see www.nosqlbenchmarking.com for 
&gt; current results and configurations used) for my master's thesis and I'm going 
&gt; to apply this benchmark on bigger clusters. Indeed for the moment I have only 
&gt; used a small cluster of 8 servers with a very small data set (20000 articles 
&gt; from Wikipedia) to conduct those tests. 
&gt; 
&gt; I will use up to 100 servers (2Gb, 4 CPU, 80Gb hdd) from the Rackspace cloud 
&gt; and the new data set is the entire English version of Wikipedia. Each article 
&gt; is store as a single document with a unique ID based on a integer, you can 
&gt; see the implementation here : 
&gt; https://github.com/toflames/Wikipedia-noSQL-Benchmark/blob/master/src/implementations/riakDB.java
&gt; and the benchmark methodology here : 
&gt; http://www.slideshare.net/ThibaultDory/a-new-methodology-for-large 
&gt; 
&gt; I would like to know if some of you have advice on how I could take the best 
&gt; out of Riak for this specific use case and on this kind of server. For 
&gt; example I would like to know if there are some memory/cache tunings that 
&gt; could be useful to match this server size. 
&gt; 
&gt; Any other input or critic is welcome,
&gt; 
&gt; Thank you,
&gt; 
&gt; 
&gt; Thibault Dory 
 
