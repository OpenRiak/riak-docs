---
title: "Re: Running multiple Riak instances."
description: ""
project: community
lastmod: 2010-07-25T09:29:50-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg00786"
mailinglist_parent_id: "msg00785"
author_name: "Grant Schofield"
project_section: "mailinglistitem"
sent_date: 2010-07-25T09:29:50-07:00
---


Does the second vm.args have the same -name setting as the first node? Each 
node will need to have a unique name configured.

Grant Schofield
Developer Advocate
Basho Technologies, Inc.


On Jul 25, 2010, at 9:00 AM, Misha Gorodnitzky wrote:

&gt; Hi all,
&gt; 
&gt; I'm trying to run multiple instances of Riak on my server with the
&gt; goal to run both the staging environment and eventually the production
&gt; environment on the same server (I only have one for this project).
&gt; This is an Ubuntu server and if at all possible I'd prefer not to
&gt; build Riak from source, although I understand that it would be easier
&gt; to have multiple instances running that way. I would rather keep
&gt; software managed with the package manager here.
&gt; 
&gt; What I've done is I've modified /usr/sbin/riak to allow specifying the
&gt; config files to use (app.config, vm.args), the log dir, run dir (for
&gt; the pipe) and the home dir, and I can startup an instance of Riak
&gt; using my "staging" environment. However, when I try to start up the
&gt; second Riak instance, it fails with just a couple of things
&gt; out-of-the-ordinary in it's logs:
&gt; 
&gt; =INFO REPORT==== 25-Jul-2010::13:54:35 ===
&gt; application: riak\\_kv
&gt; exited: {shutdown,{riak\\_kv\\_app,start,[normal,[]]}}
&gt; type: permanent
&gt; =INFO REPORT==== 25-Jul-2010::13:54:35 ===
&gt; alarm\\_handler: {clear,system\\_memory\\_high\\_watermark}
&gt; {"Kernel pid 
&gt; terminated",application\\_controller,"{application\\_start\\_failure,riak\\_kv,{shutdown,{riak\\_kv\\_app,start,[normal,[]]}}}"}^M
&gt; Kernel pid terminated (application\\_controller)
&gt; ({application\\_start\\_failure,riak\\_kv,{shutdown,{riak\\_kv\\_app,start,[normal,[]]}}})^M
&gt; 
&gt; And the Riak process that's already running logs this:
&gt; 
&gt; \\*\\* Connection attempt from disallowed node 'riak\\_stag...@127.0.0.1' \\*\\*
&gt; 
&gt; Any ideas what this might be? Has anyone managed to do this using the
&gt; Riak .deb package?
&gt; 
&gt; Thanks,
&gt; 
&gt; --Misha
&gt; 
