---
title: "Re: Retrying requests to Riak"
description: ""
project: community
lastmod: 2011-04-07T20:27:35-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02926"
mailinglist_parent_id: "msg02925"
author_name: "Greg Nelson"
project_section: "mailinglistitem"
sent_date: 2011-04-07T20:27:35-07:00
---


I don't want to have a single load balancer because I want to avoid a single 
point of failure. And we'll be pushing enough data that it would be a huge 
bottleneck.

A failed node will not receive new requests, but when the requests that were 
sent to it fail I'd like to retry those automatically instead of having errors 
bubble up to our application.
On Thursday, April 7, 2011 at 8:17 PM, Wilson MacGyver wrote: 
&gt; use haproxy to ping each of the riak node. and remove nodes that
&gt; aren't responding is
&gt; what we did.
&gt; 
&gt; we use a single haproxy instead of 1 per application server.
&gt; 
&gt; On Thu, Apr 7, 2011 at 9:47 PM, Greg Nelson  wrote:
&gt; &gt; Hello,
&gt; &gt; I have a simple three node cluster that I have been using for testing and
&gt; &gt; benchmarking Riak. Lately I've been simulating various failure scenarios --
&gt; &gt; like a node going down, disk going bad, etc.
&gt; &gt; My application talks to Riak through an haproxy instance running locally on
&gt; &gt; each application server. It's configured to round-robin over the nodes in
&gt; &gt; the cluster for both HTTP and PBC interfaces, and uses the HTTP /ping health
&gt; &gt; check. I assume this is a rather typical setup.
&gt; 
&gt; -- 
&gt; Omnem crede diem tibi diluxisse supremum.
&gt; 
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

