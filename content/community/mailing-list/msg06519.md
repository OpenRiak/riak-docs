---
title: "RE: Pending transfers when joining 1.0.3 node to 1.0.0 cluster"
description: ""
project: community
lastmod: 2012-02-03T03:21:38-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06519"
mailinglist_parent_id: "msg06314"
author_name: "Fredrik Lindstr√∂m"
project_section: "mailinglistitem"
sent_date: 2012-02-03T03:21:38-08:00
---


For future reference here is how we backed out of a search enabled 1.0.0 
cluster and moved to 1.0.3

Step 1
Disable search on each of the 1.0.0 and restart them
Note that disabling search and still having the search pre-commit hook active 
in a bucket will result in write failures.

Step 2:
Execute riak-admin leave on a 1.0.0 node
Witness wonderous partition transfers

Step 3:
Execute riak-admin join on a fresh 1.0.3 node.
Do make sure your app.config and vm.args files are the way they should be
Witness wonderous partition transfers

Step 4:
Repeat until you run out of 1.0.0 nodes

Step 5:
If you left the search pre-commit hooks intact in step one I highly recommend 
that you do not forget to re-enable search on your shiny new 1.0.3 nodes.
I did. I also noticed that you can not remove search pre-commit hooks if you 
have disabled search, something I found a bit strange.

Thanks again for the help!

/F
