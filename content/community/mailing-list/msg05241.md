---
title: "Re: riak-erlang-client unit tests fail with most recent tag"
description: ""
project: community
lastmod: 2011-10-21T16:44:39-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05241"
mailinglist_parent_id: "msg05240"
author_name: "Anthony Molinaro"
project_section: "mailinglistitem"
sent_date: 2011-10-21T16:44:39-07:00
---


Sigh, nevermind, the real issue here is that I had a previous version
of the client installed and rebar doesn't play well with centrally
installed deps. Once I uninstalled that the unit tests worked.

Still would like to know whether 1.2.0 is the current recommended version
to use?

Thanks,

-Anthony

On Fri, Oct 21, 2011 at 04:40:52PM -0700, Anthony Molinaro wrote:
&gt; Hi,
&gt; 
&gt; So I was getting ready to start updating riak from 0.14.2 to 1.0.1 and
&gt; thought I should probably update my client as well (although from what I
&gt; can tell this is not a requirement to upgrade). Unfortunately the most
&gt; recent tag of riak-erlang-client (1.2.0) fails its unit tests
&gt; 
&gt; ==&gt; basho (eunit)
&gt; Compiled src/riakc\\_obj.erl
&gt; Compiled src/riakc\\_pb.erl
&gt; Compiled src/riakc\\_pb\\_socket.erl
&gt; 
&gt; =ERROR REPORT==== 21-Oct-2011::16:33:23 ===
&gt; \\*\\* Generic server &lt;0.410.0&gt; terminating 
&gt; \\*\\* Last message in was {tcp\\_closed,#Port&lt;0.7488&gt;}
&gt; \\*\\* When Server state == {state,"127.0.0.1",51982,false,false,undefined,
&gt; undefined,
&gt; {[],[]},
&gt; 1,[],infinity,100}
&gt; \\*\\* Reason for termination == 
&gt; \\*\\* disconnected
&gt; riakc\\_pb:330: pb\\_test\\_ (content encode decode)...\\*failed\\*
&gt; ::error:function\\_clause
&gt; in function riakclient\\_pb:encode\\_rpbcontent/1
&gt; called as encode\\_rpbcontent({rpbcontent,&lt;&lt;"test 
&gt; value"&gt;&gt;,"ctype","charset","encoding","vtag",
&gt; [{rpblink,&lt;&lt;"b1"&gt;&gt;,&lt;&lt;"k1"&gt;&gt;,&lt;&lt;"v1"&gt;&gt;},
&gt; {rpblink,&lt;&lt;"b2"&gt;&gt;,&lt;&lt;"k2"&gt;&gt;,&lt;&lt;"v2"&gt;&gt;}],
&gt; 1000002,3,
&gt; [{rpbpair,"X-Riak-Meta-MyMetaData1",[...]},{rpbpair,[...],...}],
&gt; undefined})
&gt; in call from riakc\\_pb:'-pb\\_test\\_/0-fun-2-'/0
&gt; 
&gt; 
&gt; riakc\\_pb:355: pb\\_test\\_ (empty content encode decode)...\\*failed\\*
&gt; ::error:function\\_clause
&gt; in function riakclient\\_pb:encode\\_rpbcontent/1
&gt; called as encode\\_rpbcontent({rpbcontent,&lt;&lt;"test 
&gt; value"&gt;&gt;,undefined,undefined,undefined,undefined,
&gt; undefined,undefined,undefined,undefined,undefined})
&gt; in call from riakc\\_pb:'-pb\\_test\\_/0-fun-4-'/0
&gt; 
&gt; 
&gt; =======================================================
&gt; Failed: 2. Skipped: 0. Passed: 24.
&gt; Cover analysis: 
&gt; /home/molinaro/projects/opensource/riak-erlang-client/basho/.eunit/index.html
&gt; ERROR: One or more eunit tests failed.
&gt; 
&gt; Is there currently a recommended version of the client?
&gt; 
&gt; Thanks,
&gt; 
&gt; -Anthony
&gt; 
&gt; -- 
&gt; ------------------------------------------------------------------------
&gt; Anthony Molinaro 
&gt; 

-- 
------------------------------------------------------------------------
Anthony Molinaro 

