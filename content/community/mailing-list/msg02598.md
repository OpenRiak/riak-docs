---
title: "Re: annoying javascript problem in Reduce phases"
description: ""
project: community
lastmod: 2011-03-10T05:50:00-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02598"
mailinglist_parent_id: "msg02597"
author_name: "Antonio Rohman Fernandez"
project_section: "mailinglistitem"
sent_date: 2011-03-10T05:50:00-08:00
---


Riak is NOT an SQL-like system -&gt; yep, i know that and its query limitations, 
however, i thought that doing a pagination would be a piece of cake :P
thanks for the reply : )

Rohman


 Antonio Rohman Fernandez
CEO, Founder & Lead Engineer
roh...@mahalostudio.com
 Projects
MaruBatsu.es
PupCloud.com
Wedding Album
 

On Mar 10, 2011, at 9:37 PM, Sean Cribbs wrote:

&gt; 
&gt; On Mar 10, 2011, at 8:26 AM, Antonio Rohman Fernandez wrote:
&gt; 
&gt;&gt; Dear Sean,
&gt;&gt; thank you for your quick reply.
&gt;&gt; 
&gt;&gt; "Your reduce function can (almost) never assume that it is operating on the 
&gt;&gt; entire result set." -&gt; wow! that totally kills my implementation... i wanted 
&gt;&gt; to use the Reduce phase to cut the array as a Limit + Pagination ( like 
&gt;&gt; LIMIT 10 PAGE 2 in SQL )... but if i don't have the full result set is 
&gt;&gt; impossible and useless. I will have to get all the rows and then process it 
&gt;&gt; outside Riak for that.
&gt;&gt; 
&gt; 
&gt; Note I said "(almost)". In the case where the reduce phase is preceded by 
&gt; another reduce phase, you can generally assume that it will only be executed 
&gt; once. So, pagination is hard to do but not impossible - do a sorting phase 
&gt; before your limit/slice.
&gt; 
&gt;&gt; "you must structure your reduce function such that it can receive as inputs 
&gt;&gt; anything that it outputs" -&gt; what do you mean with that? can i merge Reduce 
&gt;&gt; phases? any example?
&gt;&gt; 
&gt; 
&gt; What that means is any data you return might again become inputs to the same 
&gt; function as I described. The properties we say are needed for reduce 
&gt; functions are "commutative, associative, and idempotent". Commutative - it 
&gt; can be applied in any order and produce the same result. Associative - any 
&gt; grouping of the same inputs will produce the same result. Idempotent - given 
&gt; the same inputs, you will get the same result every time (i.e. it has no 
&gt; side-effects).
&gt; 
&gt;&gt; i'm building a php MVC framework in top of Riak, and i would like to clone 
&gt;&gt; from my SQL implementation as much functionality as i can, so people can 
&gt;&gt; easily use Riak as if they were using MySQL/PostgreSQL/etc without noticing.
&gt;&gt; thanks.
&gt; 
&gt; I can understand the desire to provide similar functionality, but Riak is NOT 
&gt; an SQL-like system. Having tried some similar things in Ruby, I believe it's 
&gt; ok to provide your users a nice interface, but don't delude them about having 
&gt; the same querying capabilities -- it's just NOT the same. It's better to 
&gt; craft the features in a way that exposes tradeoffs to them rather than hiding 
&gt; them.
&gt; 
&gt; Sean Cribbs 
&gt; Developer Advocate
&gt; Basho Technologies, Inc.
&gt; http://basho.com/
&gt; 

