---
title: "Re: Is this a silly design?"
description: ""
project: community
lastmod: 2010-09-30T08:14:08-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01160"
mailinglist_parent_id: "msg01159"
author_name: "Tyler Weir"
project_section: "mailinglistitem"
sent_date: 2010-09-30T08:14:08-07:00
---


Hi Dan,

Thanks for the response and thank you for the additional MR snippet.
That is helpful.

Cheers,
Tyler

-------------------------------------
http://www.tylerweir.ca

On Wed, Sep 29, 2010 at 5:48 PM, Dan Reverri  wrote:
&gt; Hi Tyler,
&gt; You're proposed design would work well with Riak. Buckets in Riak, by
&gt; default, are "free" meaning 100 buckets wouldn't consume any more resources
&gt; than 1 bucket.
&gt; Also, by using the date as the key you could map/reduce over a user's data
&gt; for set periods of time. For instance, consider the following entries:
&gt; /riak/user1/20100929
&gt; /riak/user1/20100930
&gt; /riak/user1/20101001
&gt; /riak/user1/20101002
&gt; /riak/user1/20101003
&gt; /riak/user1/20101004
&gt; To map/reduce over the first 3 days of October you can specify your
&gt; map/reduce inputs as:
&gt; {"inputs":[["user1","20101001"],["user1","20101002"],["user1","20101003"]],
&gt; ...query goes here... }
&gt;
&gt; Daniel Reverri
&gt; Developer Advocate
&gt; Basho Technologies, Inc.
&gt; d...@basho.com
&gt;
&gt;
&gt; On Wed, Sep 29, 2010 at 9:30 AM, Tyler Weir  wrote:
&gt;&gt;
&gt;&gt; Hello,
&gt;&gt;
&gt;&gt; I'm working on a side project and I don't know much about reasonable
&gt;&gt; design for a Riak schema.
&gt;&gt;
&gt;&gt; I'll have a hybrid model, with user profiles sitting in Postgres and
&gt;&gt; their data in Riak.
&gt;&gt;
&gt;&gt; If I were to store a blob of info per user per day (3 text blobs, a
&gt;&gt; date, a URL and tags), does it make sense to have one bucket per user?
&gt;&gt; If so, the key for the daily blob is simple, the date (unless that is
&gt;&gt; also silly).
&gt;&gt;
&gt;&gt; I'm guessing 100 users, with maybe 400 RiakObjects per user per year.
&gt;&gt;
&gt;&gt; Does that design seem sound, or am I breaking some fundamental rules?
&gt;&gt;
&gt;&gt; Sorry for naivety,
&gt;&gt; Tyler
&gt;&gt;
&gt;&gt;
&gt;&gt; -------------------------------------
&gt;&gt; http://www.tylerweir.ca
&gt;
&gt;

