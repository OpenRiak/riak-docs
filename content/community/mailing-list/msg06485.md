---
title: "Re: error: undef done()"
description: ""
project: community
lastmod: 2012-02-01T07:53:32-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06485"
mailinglist_parent_id: "msg06476"
author_name: "Bryan Fink"
project_section: "mailinglistitem"
sent_date: 2012-02-01T07:53:32-08:00
---


On Tue, Jan 31, 2012 at 1:46 PM, Matthew A. Brown  wrote:
&gt; [error] error:undef done()
&gt;
&gt; The error message is followed by a dump of the reduce inputs which is,
&gt; sadly, truncated before the bit where it would give the call trace.
&gt;
&gt; Our Erlang reduce code does not define or reference a function done(),
&gt; but I do note that this function is defined in riak\\_kv:
&gt;
&gt; https://github.com/basho/riak\\_kv/blob/master/src/riak\\_kv\\_w\\_reduce.erl#L163

The "done()" you're seeing comes from 6 lines below where you were looking:

https://github.com/basho/riak\\_kv/blob/master/src/riak\\_kv\\_w\\_reduce.erl#L169

It is intended to give an idea of what stage the reduce fitting was in
when the error happened. Other strings you'll find are "reducing",
"riak\\_kv\\_w\\_reduce init", and "reducing handoff".

I would be interested in knowing what version of Riak you were using
when you encountered this error message. Improving MapReduce errors
is something we're always working on.

-Bryan

