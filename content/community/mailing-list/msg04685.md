---
title: "Re: Riak Search in python: how to extend into complex objects?"
description: ""
project: community
lastmod: 2011-09-13T09:53:48-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg04685"
mailinglist_parent_id: "msg04683"
author_name: "Eric Moritz"
project_section: "mailinglistitem"
sent_date: 2011-09-13T09:53:48-07:00
---


I maybe wrong but I believe nested values use underscores. So the field
would be address\\_state:NY
On Sep 13, 2011 12:10 PM, "Denis Papathanasiou" &lt;
denis.papathanas...@gmail.com&gt; wrote:
&gt; I'm using the latest version of riak (0.14.2-1) with the
&gt; riak-python-client (v. 1.3.0).
&gt;
&gt; I want to run the Riak Search example shown in the documentation
&gt; (https://bitbucket.org/basho/riak-python-client), but the json docs
&gt; I've added to my bucket are more complex than the example.
&gt;
&gt; I.e., instead of this:
&gt;
&gt; {'first\\_name': 'Anna', 'last\\_name': 'Body', 'is\\_active': True}
&gt;
&gt; my docs look like this:
&gt;
&gt; { firstName: "Mike", lastName: "Bloomberg", address: { city: "New
&gt; York", state: "NY" }, teams: [ 'Giants', 'Jets', 'Yankees', 'Mets' ] }
&gt;
&gt; So how do I search for state = NY ?
&gt;
&gt; I tried this:
&gt;
&gt; search\\_query = client.search('formd', 'address.state:NY')
&gt;
&gt; for result in search\\_query.run():
&gt; # You get ``RiakLink`` objects back.
&gt; person = result.get()
&gt; person\\_data = person.get\\_data()
&gt; print "%s %s" % (person\\_data['firstName'], user\\_data['lastName'])
&gt;
&gt; but I got this stack trace:
&gt;
&gt; Traceback (most recent call last):
&gt; File "query\\_test.py", line 9, in 
&gt; for result in search\\_query.run():
&gt; File "build/bdist.linux-x86\\_64/egg/riak/mapreduce.py", line 211, in run
&gt; File "build/bdist.linux-x86\\_64/egg/riak/transports/pbc.py", line
&gt; 311, in mapred
&gt; File "build/bdist.linux-x86\\_64/egg/riak/transports/pbc.py", line
&gt; 365, in recv\\_msg
&gt; File "build/bdist.linux-x86\\_64/egg/riak/transports/pbc.py", line
&gt; 410, in recv\\_pkt
&gt; riak.RiakError: 'Socket returned short packet length - expected 4'
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

