---
title: "Re: Copying data between clusters"
description: ""
project: community
lastmod: 2010-05-09T04:12:51-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg00291"
mailinglist_parent_id: "msg00289"
author_name: "Mårten Gustafson"
project_section: "mailinglistitem"
sent_date: 2010-05-09T04:12:51-07:00
---

N-val is configurable through default bucket props.

AFAIK there's currently no way change server defaults for R, W and DW.

/Mårten

On 8 maj 2010, at 20.27, Alan McConnell  wrote:


Thanks Kevin,
Is there a way to set a default N (and R/W) value across a cluster 
via configuration? I know there's a default\\_props feature in 
configuration but I don't know if it's possible to use that for 
default N/R/W values and I don't know what the syntax is.


In case anyone was wondering I went ahead and tried a backup/restore 
between production and test and it worked just fine. Restoring from 
a backup file will work across different clusters.


On Fri, May 7, 2010 at 9:17 PM, Kevin Smith  wrote:
Alan -

I can't answer your replication questions -- don't have a lot of 
experience with it yet -- but I can take a stab at setting the 
global replication setting.


If I'm understanding correctly I believe you're referring to the N 
value. N controls how many replicas of an entry Riak stores, in 
total, around the cluster. Docs on tuning this value can be found 
here: http://wiki.basho.com/display/RIAK/Replication


--Kevin


On May 7, 2010, at 10:06 PM, Alan McConnell wrote:

&gt; • Is it possible to use the built-in backup/restore function 
s of riak-admin to copy data between clusters? The scenario is that 
 we have separate test and production environments, each with separa 
te riak clusters of different sizes and configurations. Every so of 
ten we'd like to copy the data from production into test. Can I run 
 'backup all' in prod, then run restore on the resultant file in tes 
t, and have everything work? Or does restore only work on the same 
cluster configuration that the backup was performed on? What's the 
easiest way of doing this?
&gt; • I've noticed that backup takes a very long time, and resul 
ts in a file that is much larger than the actual cluster data direct 
ories of the cluster. Is this normal?
&gt; • Not related to backups, but how do I configure the global 
replication count of the cluster?
