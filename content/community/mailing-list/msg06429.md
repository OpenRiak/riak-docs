---
title: "Re: Fastest way to count number of items in Secondary Index query"
description: ""
project: community
lastmod: 2012-01-26T09:54:28-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06429"
mailinglist_parent_id: "msg06374"
author_name: "Elias Levy"
project_section: "mailinglistitem"
sent_date: 2012-01-26T09:54:28-08:00
---


On Thu, Jan 26, 2012 at 6:27 AM,  wrote:

&gt; Input = {index, Bucket, Index, Key},
&gt; IdentityQuery = [{reduce,
&gt; {modfun, riak\\_kv\\_mapreduce, reduce\\_identity},
&gt; [{reduce\\_phase\\_only\\_1, true}],
&gt; true}],
&gt;
&gt; My queries can return hundreds of thousands of keys.
&gt;

Using reduce\\_phase\\_only\\_1 is probably not the best of ideas with hundreds
of thousands of keys. You are better off distributing the count to each
node, then summing the results in a final reduce.
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

