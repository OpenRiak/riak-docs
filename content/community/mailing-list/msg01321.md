---
title: "Re: Non-default padding on integer type not working. And only integer	type only works with signed 32-bit ints?"
description: ""
project: community
lastmod: 2010-10-18T08:55:12-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01321"
mailinglist_parent_id: "msg01258"
author_name: "Rusty Klophaus"
project_section: "mailinglistitem"
sent_date: 2010-10-18T08:55:12-07:00
---


Hi JD,

Unfortunately we discovered some last minute regression bugs that affect
integer querying. A workaround, as you discovered, is to pad the integers
yourself.

This is tracked as https://issues.basho.com/show\\_bug.cgi?id=729, and is
currently scheduled for the next release.

Best,
Rusty

On Tue, Oct 12, 2010 at 1:14 AM, JD Maturen  wrote:

&gt; I set a custom schema with a 20 digit (~64-bit) integer field:
&gt;
&gt; {field, [
&gt; {name, "account"},
&gt; {type, integer},
&gt; {padding\\_size, 20}
&gt; ]},
&gt;
&gt; But I can only query with a 10 digit padded string:
&gt;
&gt; &gt;&gt;&gt; [l.get\\_key() for l in client.search('answers', 'account:%010d' %
&gt; (12345678)).run()]
&gt; [u'test']
&gt; &gt;&gt;&gt; [l.get\\_key() for l in client.search('answers', 'account:%d' %
&gt; (12345678)).run()]
&gt; []
&gt; &gt;&gt;&gt; [l.get\\_key() for l in client.search('answers', 'account:%020d' %
&gt; (12345678)).run()]
&gt; []
&gt;
&gt; Additionally, I can't search for any ints larger than signed 32-bit.
&gt;
&gt; &gt;&gt;&gt; client.bucket('answers').new('2\\*\\*31', {'account': 2\\*\\*31}).store()
&gt; 
&gt; &gt;&gt;&gt; client.bucket('answers').new('2\\*\\*31-1', {'account': 2\\*\\*31-1}).store()
&gt; 
&gt; &gt;&gt;&gt; [l.get\\_key() for l in client.search('answers', 'account:{%010d TO
&gt; %010d}' % (0, 2\\*\\*33)).run()]
&gt; [u'test', u'2%2A%2A31-1']
&gt;
&gt; General work-around seems to be to just use the string type and manage
&gt; padding on my own [example on a bucket with the default schema]:
&gt;
&gt; &gt;&gt;&gt; client.bucket('questions').new('2\\*\\*64', {'account': '%020d' %
&gt; 2\\*\\*64}).store()
&gt; 
&gt; &gt;&gt;&gt; client.bucket('questions').new('2\\*\\*32', {'account': '%020d' %
&gt; 2\\*\\*32}).store()
&gt; 
&gt; &gt;&gt;&gt; [l.get\\_key() for l in client.search('questions', 'account:{%020d TO
&gt; %020d}' % (2\\*\\*32-1, 2\\*\\*64+1)).run()]
&gt; [u'2%2A%2A64', u'2%2A%2A32']
&gt; &gt;&gt;&gt; [l.get\\_key() for l in client.search('questions', 'account:%020d' %
&gt; 2\\*\\*64).run()]
&gt; [u'2%2A%2A64']
&gt; &gt;&gt;&gt; [l.get\\_key() for l in client.search('questions', 'account:%020d' %
&gt; 2\\*\\*32).run()]
&gt; [u'2%2A%2A32']
&gt;
&gt; -JD
&gt;

