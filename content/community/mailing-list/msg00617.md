---
title: "Re: riak stats maintenance?"
description: ""
project: community
lastmod: 2010-06-18T03:40:10-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg00617"
mailinglist_parent_id: "msg00611"
author_name: "Germain Maurice"
project_section: "mailinglistitem"
sent_date: 2010-06-18T03:40:10-07:00
---

Hi Gareth, and all,

I got the same error, with the latest Riak release 0.11.0, but only one 
time...
Mostly, when i requested "/stats" the host crashed (i have two hosts, 
the both crashed)


The problem ? I think it's a memory issue, because it took memory and 
memory and after, swap space and swap space...

When all is full, the host goes down :(


Le 18/06/10 05:40, Gareth Stokes a écrit :

hey guys,

so i have a cluster of 4 physical machines with a load balancer 
sitting in front to handle requests going into riak.
i thought it would be a good idea (not anymore) to use the /stats url 
to ping the machines the cluster for their health. this is what i've 
noticed in the logs every few days or so


=ERROR REPORT==== 16-Jun-2010::03:48:37 ===
webmachine error: path="/stats"
{error,{exit,{timeout,{gen\\_server2,call,[riak\\_kv\\_stat,get\\_stats]}},
 [{gen\\_server2,call,2},
 {riak\\_kv\\_wm\\_stats,get\\_stats,0},
 {riak\\_kv\\_wm\\_stats,produce\\_body,2},
 {webmachine\\_resource,resource\\_call,3},
 {webmachine\\_resource,do,3},
 {webmachine\\_decision\\_core,resource\\_call,1},
 {webmachine\\_decision\\_core,decision,1},
 {webmachine\\_decision\\_core,handle\\_request,2}]}}

it lasts anywhere between 5 - 40 minutes.
what im thinking is that a riak machine will enter "maintenance" mode 
every now and then, when it does it turns the /stats url off.


am i correct in thinking this, or should i be worried?

regards,
gareth stokes

--
Germain Maurice
Administrateur Système/Réseau
Tel : +33.(0)1.42.43.54.33

http://www.linkfluence.net

