---
title: "Re: Mal Reduce Exception: {\"phase\":0,\"error\":\"[timeout]\",\"input\":\""
description: ""
project: community
lastmod: 2012-12-10T03:24:50-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg09494"
mailinglist_parent_id: "msg09492"
author_name: "Shane McEwan"
project_section: "mailinglistitem"
sent_date: 2012-12-10T03:24:50-08:00
---

G'day David,

It looks like you might be hitting this bug: 
https://github.com/basho/riak\\_kv/issues/290


It doesn't look like there's an easy fix unless you want to backport the 
patch into your current system. :-(


Shane.

On 10/12/12 04:03, David Montgomery wrote:

Hi,

I am having an issues with getting data out of MR......


If I run on a few particular days I get the below error and returns
almost immediate. On other days returns valid data. I am using a key
filter to select by day when I noticed that a date range was failing.
key\\_filter.starts\\_with('20121207'). I am running on a three node
cluster with 2 cores each an 4 gigs of ram. When it works it returns
data pretty fast. So..per the below error..a key did exist from that day.

Even further, I can get the values of that key in the error.

Why the time out error? I have a generous timeout.

for result in query.run(timeout=300000):
 #print pprint(result)
 for k,v in result.iteritems():
 print k,v

Traceback (most recent call last):
 File
"/home/ubuntu/workspace/rtbopsConfig/rtbServers/rtbWorkerServer/riak/mapreduce\\_v1.py",
line 61, in 
 main()
 File
"/home/ubuntu/workspace/rtbopsConfig/rtbServers/rtbWorkerServer/riak/mapreduce\\_v1.py",
line 57, in main
 for result in query.run(timeout=30000):
 File
"/usr/local/lib/python2.7/dist-packages/riak-1.5.0-py2.7.egg/riak/mapreduce.py",
line 232, in run
 result = t.mapred(self.\\_inputs, query, timeout)
 File
"/usr/local/lib/python2.7/dist-packages/riak-1.5.0-py2.7.egg/riak/transports/pbc.py",
line 454, in mapred
 \\_handle\\_response)
 File
"/usr/local/lib/python2.7/dist-packages/riak-1.5.0-py2.7.egg/riak/transports/pbc.py",
line 548, in send\\_msg\\_multi
 msg\\_code, resp = self.recv\\_msg(conn, expect)
 File
"/usr/local/lib/python2.7/dist-packages/riak-1.5.0-py2.7.egg/riak/transports/pbc.py",
line 589, in recv\\_msg
 raise Exception(msg.errmsg)
Exception:
{"phase":0,"error":"[timeout]","input":"{&lt;&lt;\\"impressions\\"&gt;&gt;,&lt;&lt;\\"0109d84f-20d9-48cd-b098-716e016cae9b:cid6587015966:agid5748040653:2012120107:SG\\"&gt;&gt;}","type":"forward\\_preflist","stack":"[]"}


So....how do I get data out without causing an exception? Otherwise I
have to write a loop that skips a day which does not quite seem right.

Thanks
