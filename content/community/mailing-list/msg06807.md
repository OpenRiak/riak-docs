---
title: "Re: building riak on FreeBSD9"
description: ""
project: community
lastmod: 2012-03-01T05:52:03-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06807"
mailinglist_parent_id: "msg06803"
author_name: "Norman Khine"
project_section: "mailinglistitem"
sent_date: 2012-03-01T05:52:03-08:00
---


from the IRC #riak i managed to get this fixed.

as i was using zsh i had not installed bash, this is now done and then
following this blog
http://blog.harperdog.com/2010/12/17/riak-on-freebsd/

@hfalk said that the eleveldb build\\_deps.sh script assume 'make' is gnu make

On Thu, Mar 1, 2012 at 1:29 PM, Peta Bogdan  wrote:
&gt; Hello,
&gt;
&gt; I had a similar issue with OpenBSD 5.0/amd64/riak-1.1.0
&gt;
&gt; But I have took a manual approach on this situation, namely:
&gt;
&gt; 1. got to riak top level dir
&gt; 2. cd deps/eleveldb/c\\_src/leveldb
&gt; 3. sh build\\_detect\\_platform
&gt;     this will generate build\\_config.mk for your platform
&gt; 4. edit build\\_config.mk and add -fPIC to the end of the first line unless is
&gt; not there
&gt; 5. comment out all lines in Makefile that generate those errors - we don't
&gt; need them as they try to detect other platforms, and try to figure out if
&gt; snappy is there or not - i ignored snappy altogether, but that depends on
&gt; your needs
&gt; 6. gmake
&gt; 7. and see what happens next
&gt;
&gt; I might have had done some other things (apart form OpenBSD specific ones)
&gt; but I should remember them as the problems arise.
&gt;
&gt; hope this helps,
&gt;
&gt; Bogdan
&gt; On Thu, Mar 1, 2012 at 1:22 PM, Norman Khine  wrote:
&gt;&gt;
&gt;&gt; Hello again,
&gt;&gt; sorry to keep posting new threads, but i don't see the original post i
&gt;&gt; made for this.
&gt;&gt;
&gt;&gt; anyhow, i followed couple of suggestions from the mailing list and
&gt;&gt; this blog post: http://blog.harperdog.com/2010/12/17/riak-on-freebsd/,
&gt;&gt; make rel work, but now get this error after doing:
&gt;&gt;
&gt;&gt;  282  git clone git://github.com/basho/riak.git
&gt;&gt;  283  cd riak
&gt;&gt;  292  git branch adt-bsd-support origin/adt-bsd-support
&gt;&gt;  293  git checkout adt-bsd-support
&gt;&gt;  294  git log
&gt;&gt;  295  make rel
&gt;&gt;
&gt;&gt; ./rebar compile generate
&gt;&gt; ==&gt; cluster\\_info (compile)
&gt;&gt; ==&gt; skerl (compile)
&gt;&gt; ERROR: OTP release R14B04 does not match required regex R14B0[23]
&gt;&gt;
&gt;&gt; i changed the rebar.config so that:
&gt;&gt;
&gt;&gt; diff --git a/rebar.config b/rebar.config
&gt;&gt; index 9a4890a..11eca1d 100644
&gt;&gt; --- a/rebar.config
&gt;&gt; +++ b/rebar.config
&gt;&gt; @@ -1,6 +1,6 @@
&gt;&gt;  {sub\\_dirs, ["rel"]}.
&gt;&gt;
&gt;&gt; -{require\\_otp\\_vsn, "R14B0[23]"}.
&gt;&gt; +{require\\_otp\\_vsn, "R14B0[234]"}.
&gt;&gt;
&gt;&gt; then run again the make rel, but hit
&gt;&gt;
&gt;&gt; ==&gt; eleveldb (compile)
&gt;&gt; exec: c\\_src/build\\_deps.sh: not found
&gt;&gt; ERROR: Command [compile] failed!
&gt;&gt; make: \\*\\*\\* [rel] Error 1
&gt;&gt;
&gt;&gt; any pointers, much appreciated
&gt;&gt;
&gt;&gt;
&gt;&gt; --
&gt;&gt; %&gt;&gt;&gt; "".join( [ {'\\*':'@','^':'.'}.get(c,None) or
&gt;&gt; chr(97+(ord(c)-83)%26) for c in ",adym,\\*)&uzq^zqf" ] )
&gt;
&gt;

-- 
%&gt;&gt;&gt; "".join( [ {'\\*':'@','^':'.'}.get(c,None) or
chr(97+(ord(c)-83)%26) for c in ",adym,\\*)&uzq^zqf" ] )

