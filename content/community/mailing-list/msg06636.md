---
title: "Re: Bucket properties persist across crash/restart?"
description: ""
project: community
lastmod: 2012-02-18T11:47:45-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06636"
mailinglist_parent_id: "msg06628"
author_name: "Anthony Molinaro"
project_section: "mailinglistitem"
sent_date: 2012-02-18T11:47:45-08:00
---


Yeah I definitely forgot to run the script I have not straightened things out 
because I was waiting to hear if there was a safe way to do so without losing 
data. So do you happen to know one? I would think that maybe leaving, 
reconfig and join or maybe backup, reconfig and restore, but I don't know the 
feasibility or safety of either, any idea?

Thanks,
-Anthony

On Feb 17, 2012, at 2:06 PM, Mark Phillips  wrote:

&gt; As far as I know we have never seen anything like this in testing or have we 
&gt; had it reported. For that reason I'm inclined to say that you forget to run 
&gt; your script. Any chance you straightened things out? Or are you still trying 
&gt; to rectify things?
&gt; 
&gt; Mark 
&gt; 
&gt; 
&gt; On Tue, Feb 14, 2012 at 4:00 PM, Anthony Molinaro 
&gt;  wrote:
&gt; Hi,
&gt; 
&gt; I have a system running riak 0.14.2 (I've kept from updating it based
&gt; on all the bugs around adding of new nodes which I have to do fairly
&gt; regularly, and which I hope are fixed in the upcoming 1.1).
&gt; 
&gt; I noticed something peculiar going on. I use the multi backend with
&gt; several different bitcask backends. I do this so I can have different
&gt; expirations on them. I also have a default completely separate backend.
&gt; I had a script I could run the first time I bring a node up to set the
&gt; bucket properties.
&gt; 
&gt; However, I've noticed that now some nodes point to the default
&gt; backends, others point to the specific backends. Basically it's
&gt; all jumbled up. So, I'm not sure what happened. Either
&gt; 
&gt; 1. riak forgets bucket properties on restart/crash and restart
&gt; 2. I forgot to run my script when setting up new machines
&gt; 
&gt; So is it 1 or 2? And how can I get myself out of this mess? Can I
&gt; do something like remove a node, then re-add it? I'd prefer not to
&gt; lose data if possible, so any hints would be great.
&gt; 
&gt; -Anthony
&gt; 
&gt; --
&gt; ------------------------------------------------------------------------
&gt; Anthony Molinaro 
&gt; 
 
