---
title: "Re: how to calculate cache's size properly"
description: ""
project: community
lastmod: 2012-12-16T09:55:11-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg09596"
mailinglist_parent_id: "msg09595"
author_name: "Mikhail Tyamin"
project_section: "mailinglistitem"
sent_date: 2012-12-16T09:55:11-08:00
---


Ok, if N=3 does it mean that each physical node in cluster with 3 nodes and 64 
partitions have to store his own data and copy from another node?

So if copy from another node can be stored in memory we should calculate 
cache's size using 42-44 vnodes for each physical node.

So it was a question, does risk use cache to store copy from another node?

Thank you.

On Dec 16, 2012, at 7:29 PM, Eric Redmond  wrote:

&gt; N is the number of nodes a write is replicated to, not the total number of 
&gt; nodes. The N=3 is not relevant to this calculation, just the number if 
&gt; physical nodes.
&gt; 
&gt; Eric
&gt; 
&gt; On Dec 16, 2012, at 9:01 AM, Mikhail Tyamin  wrote:
&gt; 
&gt;&gt; Hello guys, 
&gt;&gt; 
&gt;&gt; currently I am reading documentation about LevelDB backend on the site. 
&gt;&gt; Can you explain me one thing, in your example of calculation cache size you 
&gt;&gt; suppose that if we use cluster with 4 physical nodes and with 64 partitions 
&gt;&gt; each node has 16 partitions.
&gt;&gt; 
&gt;&gt; For example, take a cluster with 64 partitions running on 4 physical nodes 
&gt;&gt; with 16GB of RAM free on each. In a best case scenario, all the nodes are 
&gt;&gt; running, so a good cache size would be half the available RAM (8GB) divided 
&gt;&gt; by the number of expected active vnodes on each node, which would be 64/4 = 
&gt;&gt; 16. That's 536870912 bytes (512MB) per vnode.
&gt;&gt; 
&gt;&gt; But if we have N=3 then each node has more than 16 vnodes is not it?
&gt;&gt; 
&gt;&gt; Best,
&gt;&gt; Mikhail
&gt;&gt; 

