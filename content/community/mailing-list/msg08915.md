---
title: "Re: OpenLDAP MDB backend for riak"
description: ""
project: community
lastmod: 2012-10-15T07:10:34-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08915"
mailinglist_parent_id: "msg08755"
author_name: "Howard Chu"
project_section: "mailinglistitem"
sent_date: 2012-10-15T07:10:34-07:00
---

Kresten Krab Thorup wrote:

Howard,

I took a look at MDB, and it does look quite promising!

Perhaps you can enlighten us a bit on these aspects of MDB:

- How do you back up an MDB instance? Can you do that while it is actively

updating, or do you need to stop it? I'm asking because the operational ease
of the log-structured stores is one of the features that many Riak'ers like
quite a lot.

The current mdb.master branch in git now has an mdb\\_env\\_copy() function for 
making a backup of an MDB instance (live or not). Also an mdb\\_copy program for 
invoking it.

- What is the typical response-time distribution for inserts? I've tried
to

work with BDB some time back, and one of the issues with that is that every
once in a while it slows down quite significantly as B-tree rebalancing makes
some requests unreasonably slow.

This post on memcacheDB with MDB may be illuminating:
https://groups.google.com/d/msg/memcached/dxU8iO27ce4/c7YEBegnAlMJ

You can see the response time distribution for BerkeleyDB 4.7, MDB, and the 
original Memcached 1.2.0 code on which MemcacheDB was based. An interesting 
data point is the 4-threaded case, in which MDB average reads are faster even 
than the pure-memory memcached and overall runs with much faster maximum 
duration and much narrower variance.


--
 -- Howard Chu
 CTO, Symas Corp. http://www.symas.com
 Director, Highland Sun http://highlandsun.com/hyc/
 Chief Architect, OpenLDAP http://www.openldap.org/project/

