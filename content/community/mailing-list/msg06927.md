---
title: "Re: Solving \"bad_utf8_character_code\" error returned by Riak MR"
description: ""
project: community
lastmod: 2012-03-09T10:38:23-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06927"
mailinglist_parent_id: "msg06926"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2012-03-09T10:38:23-08:00
---


Matthew,

Even if your map function doesn't use the object, the Erlang side doesn't
know that (Javascript funargs are exceptionally lazy anyway). It will still
try to serialize the object into JSON to send marshal it into the VM.
That's where the error is generated.

On Fri, Mar 9, 2012 at 12:20 PM, Matthew Tovbin  wrote:

&gt; Good day!
&gt;
&gt; As previously discussed here (
&gt; https://github.com/basho/riak\\_kv/pull/252#issuecomment-4415767) I am
&gt; unable to perform MR on my cluster due to wrong encoding in some of my
&gt; values.
&gt;
&gt; What are the suggestions for solving this issue, except of cleaning data
&gt; before putting it to Riak?
&gt;
&gt; Why does even this map function fail "function map () { return [1]; }" ? It's
&gt; not supposed to parse the value.
&gt;
&gt;
&gt; Thanks in advance for any tips.
&gt;
&gt; -Matthew
&gt;
&gt;

-- 
Sean Cribbs 
Software Engineer
Basho Technologies, Inc.
http://basho.com/
