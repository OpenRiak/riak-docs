---
title: "Re: Riak 1.0 pre2 legacy_keylisting crash"
description: ""
project: community
lastmod: 2011-09-11T11:40:03-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg04657"
mailinglist_parent_id: "msg04654"
author_name: "Ryan Caught"
project_section: "mailinglistitem"
sent_date: 2011-09-11T11:40:03-07:00
---


console.log and error.log at that time:


&gt; 2011-09-11 07:15:44.043 [error] &lt;0.142.0&gt; Supervisor riak\\_pipe\\_builder\\_sup
&gt; had child at module undefined at &lt;0.2724.0&gt; exit with reason killed in
&gt; context child\\_terminated
&gt; 2011-09-11 07:15:44.051 [error] &lt;0.143.0&gt; Supervisor riak\\_pipe\\_fitting\\_sup
&gt; had child at module undefined at &lt;0.2726.0&gt; exit with reason killed in
&gt; context child\\_terminated
&gt; 2011-09-11 07:15:44.053 [error] &lt;0.143.0&gt; Supervisor riak\\_pipe\\_fitting\\_sup
&gt; had child at module undefined at &lt;0.2725.0&gt; exit with reason killed in
&gt; context child\\_terminated


On Sun, Sep 11, 2011 at 1:49 PM, Daniel Reverri  wrote:

&gt; Hi Ryan
&gt;
&gt; Were there any errors in the error.log or console.log files?
&gt;
&gt; Thanks
&gt; Dan
&gt;
&gt; Sent from my iPad
&gt;
&gt; On Sep 11, 2011, at 10:43 AM, Ryan Caught  wrote:
&gt;
&gt; Yeah, I did upgrade all nodes first, then changed the setting.
&gt;
&gt; On Sun, Sep 11, 2011 at 10:32 AM, Sean Cribbs &lt; 
&gt; s...@basho.com&gt; wrote:
&gt;
&gt;&gt; AFAIK you need to make sure that all nodes are upgraded first, and then
&gt;&gt; turn legacy\\_keylisting off. The crash you see is not (necessarily) related
&gt;&gt; to keylisting, but MapReduce. I hope to push out a new version of the Ruby
&gt;&gt; client in the next few weeks to support the new features.
&gt;&gt;
&gt;&gt; On Sun, Sep 11, 2011 at 3:38 AM, Ryan Caught &lt; 
&gt;&gt; rcau...@gmail.com&gt; wrote:
&gt;&gt;
&gt;&gt;&gt; Hi,
&gt;&gt;&gt; I'm testing out a rolling upgrade with 1.0 pre2 and found that when I
&gt;&gt;&gt; turn off legacy\\_keylisting Riak crashes on me. Things work fine when
&gt;&gt;&gt; legacy\\_keylisting is turned on.
&gt;&gt;&gt;
&gt;&gt;&gt; Here is what I found in the crash log.
&gt;&gt;&gt;
&gt;&gt;&gt; 2011-09-11 07:15:44 =SUPERVISOR REPORT====
&gt;&gt;&gt;&gt; Supervisor: {local,riak\\_pipe\\_fitting\\_sup}
&gt;&gt;&gt;&gt; Context: child\\_terminated
&gt;&gt;&gt;&gt; Reason: killed
&gt;&gt;&gt;&gt; Offender:
&gt;&gt;&gt;&gt; [{pid,&lt;0.2725.0&gt;},{name,undefined},{mfargs,{riak\\_pipe\\_fitting,start\\_link,undefined}},{restart\\_type,temporary},{shutdown,2000},{child\\_type,worker}]
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; I'm using Ubuntu with Ripple (0.9.5).
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; Ryan
&gt;&gt;&gt;
&gt;&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt; 
&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; --
&gt;&gt; Sean Cribbs &lt; s...@basho.com&gt;
&gt;&gt; Developer Advocate
&gt;&gt; Basho Technologies, Inc.
&gt;&gt; http://www.basho.com/
&gt;&gt;
&gt;&gt;

