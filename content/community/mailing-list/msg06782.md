---
title: "Re: ideas on how to implement a page refresh to pull geo location	data stored in riak"
description: ""
project: community
lastmod: 2012-02-28T09:08:28-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06782"
mailinglist_parent_id: "msg06781"
author_name: "Nicholas Young"
project_section: "mailinglistitem"
sent_date: 2012-02-28T09:08:28-08:00
---


Norman,

Could you explain what you're attempting to do? I can probably help, but I'm 
not exactly sure what problem you're trying to solve, or what feature you're 
looking to implement. 

You mentioned a "page refresh" and "map". Do you need to construct a web page 
to display the results from your analytics system?

Nicholas

\\_\\_\\_

Nicholas Young 
http://nicholaswyoung.com

On Feb 28, 2012, at 10:48 AM, Norman Khine  wrote:

&gt; thanks for the advise.
&gt; 
&gt; On Tue, Feb 28, 2012 at 5:07 PM, Jeremiah Peschka
&gt;  wrote:
&gt;&gt; You can create a secondary index 
&gt;&gt; (https://wiki.basho.com/Secondary-Indexes.html) on the timestamp and perform 
&gt;&gt; a secondary index query to pull back a range of data that matches what you 
&gt;&gt; are looking for.
&gt;&gt; 
&gt;&gt; As far as the node.js portions, I have just as much of an idea as you. 
&gt;&gt; Perhaps someone else on this list can point you in the appropriate directino.
&gt;&gt; ---
&gt;&gt; Jeremiah Peschka - Managing Director, Brent Ozar PLF, LLC
&gt;&gt; Microsoft SQL Server MVP
&gt;&gt; 
&gt;&gt; On Feb 28, 2012, at 7:57 AM, Norman Khine wrote:
&gt;&gt; 
&gt;&gt;&gt; Hello,
&gt;&gt;&gt; Not sure if this is the right forum to post this, but i am hoping you can 
&gt;&gt;&gt; help.
&gt;&gt;&gt; I have a livestats nodejs tracking site, code for it is here:
&gt;&gt;&gt; 
&gt;&gt;&gt; https://github.com/nkhine/livestats
&gt;&gt;&gt; 
&gt;&gt;&gt; which is based on the peepcode screencast, with some updates.
&gt;&gt;&gt; 
&gt;&gt;&gt; i am planning to extend the
&gt;&gt;&gt; https://github.com/nkhine/livestats/blob/master/lib/livestats.js to
&gt;&gt;&gt; include the riak-js library so as to store the data, something like:
&gt;&gt;&gt; 
&gt;&gt;&gt; var db = require('riak-js').getClient({host: "riak.myhost", port: "8098" });
&gt;&gt;&gt; db.save('user', 'lat', 'lon', 'city', 'timestamp'});
&gt;&gt;&gt; 
&gt;&gt;&gt; but, i was wondering how to implement a page refresh and for the map
&gt;&gt;&gt; to load all entries within a set period of elapsed time. and place the
&gt;&gt;&gt; entries within the map.
&gt;&gt;&gt; 
&gt;&gt;&gt; any pointers much appreciated.
&gt;&gt;&gt; 
&gt;&gt;&gt; norman
&gt;&gt;&gt; 
&gt;&gt;&gt; --
&gt;&gt;&gt; %&gt;&gt;&gt; "".join( [ {'\\*':'@','^':'.'}.get(c,None) or
&gt;&gt;&gt; chr(97+(ord(c)-83)%26) for c in ",adym,\\*)&uzq^zqf" ] )
&gt;&gt;&gt; 
&gt;&gt; 
&gt; 
&gt; 
&gt; 
&gt; -- 
&gt; %&gt;&gt;&gt; "".join( [ {'\\*':'@','^':'.'}.get(c,None) or
&gt; chr(97+(ord(c)-83)%26) for c in ",adym,\\*)&uzq^zqf" ] )
&gt; 

