---
title: "Re: Python client and allow_mult"
description: ""
project: community
lastmod: 2011-04-01T10:29:06-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02847"
mailinglist_parent_id: "msg02843"
author_name: "Eric Moritz"
project_section: "mailinglistitem"
sent_date: 2011-04-01T10:29:06-07:00
---


I'm just tinkering; familiarizing myself with Riak's concurrency
control. I wrote something a while back to explore allow\\_mult and I
thought it felt awkward. I've been meaning to ask about it.

Here's the demo:
https://gist.github.com/882055

Eric.

On Fri, Apr 1, 2011 at 1:21 PM, Mark Phillips  wrote:
&gt; Hey Eric,
&gt;
&gt; Can I ask what you're using/trying to use the Riak Python lib for? Is
&gt; this a paid gig or are you just tinkering?
&gt;
&gt; Mark
&gt;
&gt; On Fri, Apr 1, 2011 at 10:08 AM, Eric Moritz  wrote:
&gt;&gt; Does anyone have a standard pattern for working with allow\\_mult with
&gt;&gt; the Python library?  I feels a bit awkward to me.  I assume I need to
&gt;&gt; do the following:
&gt;&gt;
&gt;&gt; data = {"foo": "bar"}
&gt;&gt; obj = bucket.get("mykey")
&gt;&gt;
&gt;&gt; if not obj.exists():
&gt;&gt;      obj = bucket.new("mykey", data=data)
&gt;&gt; else:
&gt;&gt;   if obj.has\\_siblings():
&gt;&gt;       # do conflict resolution
&gt;&gt;   else:
&gt;&gt;       obj.set\\_data(data)
&gt;&gt;
&gt;&gt; obj.store()
&gt;&gt;
&gt;&gt; Is the the way to do it?  If so, that seems like a lot of boiler plating to 
&gt;&gt; me.
&gt;&gt;
&gt;&gt; Eric.

&gt;

