---
title: "Re: indices with large number of objects on same key"
description: ""
project: community
lastmod: 2012-03-06T02:09:23-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06892"
mailinglist_parent_id: "msg06882"
author_name: "Telmo Menezes"
project_section: "mailinglistitem"
sent_date: 2012-03-06T02:09:23-08:00
---


&gt;&gt; So I have the situation where Riak objects contain a list of keys
&gt;&gt; referencing other objects. There are cases where objects contain a
&gt;&gt; very high number of such references. At some point, it becomes
&gt;&gt; unreasonable to just store this entire list in the object.
&gt;&gt;
&gt;&gt; Is there some way of dealing with this problem in Riak that I'm missing?
&gt;&gt;
&gt;&gt; Secondary indicies seem like a possible solution: I could just tag the
&gt;&gt; referenced objets with the id of the referrer. The problem is that the
&gt;&gt; documentation is very unclear about what happens when a large number
&gt;&gt; of values have the same tag. If a query for this tag, is there a
&gt;&gt; reasonable way to get a high number of results? Any sort of pagination
&gt;&gt; or streaming?
&gt;&gt;
&gt;
&gt; Riak doesn't support pagination, but it does support streaming. You can 
&gt; perform streaming MR operations to consume the results of the last phase of 
&gt; the MapReduce job. I have no idea which clients support this functionality 
&gt; (outside of the C# client). Although I would suspect most would support it.
&gt;
&gt; From [1]:
&gt;
&gt; Q: Although streams weren't mentioned, do you have any recommendations on 
&gt; when to use streaming map/reduce versus normal map/reduce?
&gt;
&gt; Streaming MapReduce sends results back as they get produced from the last 
&gt; phase, in a multipart/mixedformat. To invoke this, add ?chunked=true to the 
&gt; URL when you submit the job. Streaming might be appropriate when you expect 
&gt; the result set to be very large and have constructed your application such 
&gt; that incomplete results are useful to it. For example, in an AJAX web 
&gt; application, it might make sense to send some results to the browser before 
&gt; the entire query is complete.
&gt;
&gt; [1]: 
&gt; http://basho.com/blog/technical/2010/07/27/webinar-recap---mapreduce-querying-in-riak/

Great, this should do it.
I'm using the Java driver with Scala and it does seem to support streaming.

Thanks!
Telmo.

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

