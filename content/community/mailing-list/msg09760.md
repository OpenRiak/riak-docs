---
title: "Re: LevelDB compaction and timeouts"
description: ""
project: community
lastmod: 2013-01-08T05:00:38-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg09760"
mailinglist_parent_id: "msg09755"
author_name: "Matthew Von-Maszewski"
project_section: "mailinglistitem"
sent_date: 2013-01-08T05:00:38-08:00
---


Parnell,

Would appreciate some configuration info:

- what version of Riak are you running?

- would you copy/paste the eleveldb section of your app.config?

- how many vnodes and physical servers are you running?

- what is hardware? cpu, memory, disk arrays

- are you seeing the work "waiting" in your LOG files?


Not sure that the above info will lead to a solution. But it is a start.

Matthew

On Jan 7, 2013, at 8:08 PM, Parnell Springmeyer  wrote:

&gt; I've had a few situations arise where one or two nodes (all it needs is
&gt; one node) will begin a heavy compaction cycle (determined by using gstat
&gt; + looking at leveldb LOG files) and ALL queries put through the cluster
&gt; (it doesn't matter which node) return a timeout.
&gt; 
&gt; I can fix this situation by killing the node(s) in question then marking
&gt; them as down; but the minute I bring them up the take everything down
&gt; again until they complete.
&gt; 
&gt; Is there a process by which I can keep queries being issued to certain
&gt; nodes while having them live and dealing with their compaction? It seems
&gt; highly inconvenient that I have to pick some time at night to bring them
&gt; up so my users experience as few of the timeout errors are possible...
&gt; 
