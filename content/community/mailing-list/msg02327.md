---
title: "Re: redundant writers"
description: ""
project: community
lastmod: 2011-02-15T12:44:34-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02327"
mailinglist_parent_id: "msg02326"
author_name: "John E. Vincent"
project_section: "mailinglistitem"
sent_date: 2011-02-15T12:44:34-08:00
---


Les,

This is pretty much Dynamo 101 territory at this point and one of the
tradeoffs with a distributed model.

If you aren't familiar with Dynamo, Andy Gross (from Basho) gives an
AWESOME walkthrough in an episode of TheNoSQLTapes:

http://nosqltapes.com/video/understanding-dynamo-with-andy-gross

Concurrent writes really do behave the same way they would during a
network partition event. You can just stick your riak cluster behind a
load balancer and go to town.

On Tue, Feb 15, 2011 at 3:38 PM, Les Mikesell  wrote:
&gt; In this scenario, the behavior I would want would be to only see one copy
&gt; for each unique key, but to always have one even if one of the feeds or
&gt; writers fails or the cluster is partitioned, then re-joined. This sounds
&gt; good in theory, but what about the details? Is there likely to be a big
&gt; performance hit from the normally-colliding writes?  Will it take twice the
&gt; disk space, the eventually clean up the duplicates? Would it be reasonable
&gt; to do this to riak-search with something like news stories?
&gt;
&gt;
&gt; On 2/15/2011 2:02 PM, Alexander Sicular wrote:
&gt;&gt;
&gt;&gt; What about siblings? http://wiki.basho.com/REST-API.html (seach for
&gt;&gt; sibling)
&gt;&gt;
&gt;&gt; On Tue, Feb 15, 2011 at 14:57, Dan Reverri  wrote:
&gt;&gt;&gt;
&gt;&gt;&gt; Riak maintains a single value per key and provides mechanisms (vector
&gt;&gt;&gt; clocks) to detect/resolve conflicting values. In the proposed use case
&gt;&gt;&gt; the
&gt;&gt;&gt; multiple copies would overwrite each other and Riak, by default, would
&gt;&gt;&gt; return a single value for a requested key.
&gt;&gt;&gt; Behind the scenes Riak determines the appropriate value per key using
&gt;&gt;&gt; vector
&gt;&gt;&gt; clocks. More information about vector clocks is available here:
&gt;&gt;&gt; http://blog.basho.com/2010/01/29/why-vector-clocks-are-easy/
&gt;&gt;&gt; http://blog.basho.com/2010/04/05/why-vector-clocks-are-hard/
&gt;&gt;&gt; Thanks,
&gt;&gt;&gt; Dan
&gt;&gt;&gt; Daniel Reverri
&gt;&gt;&gt; Developer Advocate
&gt;&gt;&gt; Basho Technologies, Inc.
&gt;&gt;&gt; d...@basho.com
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; On Tue, Feb 15, 2011 at 10:11 AM, Les Mikesell
&gt;&gt;&gt; wrote:
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Is riak suitable as a very reliable store where you have multiple feeds
&gt;&gt;&gt;&gt; of
&gt;&gt;&gt;&gt; streaming data that are at least theoretically identical?  That is, can
&gt;&gt;&gt;&gt; you
&gt;&gt;&gt;&gt; count on writing multiple copies with the same keys at the same time to
&gt;&gt;&gt;&gt; do
&gt;&gt;&gt;&gt; something reasonable regardless of cluster partitioning?  And is this a
&gt;&gt;&gt;&gt; common usage scenario?
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; --
&gt;&gt;&gt;&gt;  Les Mikesell
&gt;&gt;&gt;&gt;   lesmikes...@gmail.com
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;

&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;
&gt;
