---
title: "Re: multiple map phases"
description: ""
project: community
lastmod: 2010-06-11T04:30:37-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg00554"
mailinglist_parent_id: "msg00550"
author_name: "Thomas Heller"
project_section: "mailinglistitem"
sent_date: 2010-06-11T04:30:37-07:00
---


Hi,

so if I understand that right (and the erlang api seems a little
easier to understand in that regard):

If I want multiple map phases, the "previous" map phase basically just
acts as a filter/expansion for the input data. If I emit a {Bucket,
Key} term Riak will then load this document and pass it into the next
phase. So if I have a Document with multiple references to others I
may expand the input data running a map phase which basically just
emits those links as {Buckey, Key} terms. Basically a (huge)
optimization over doing something similar on the client side.

Dont have a great example right now, but I get the idea (I think).

Thanks,
/thomas

