---
title: "RE: Quering Riaksearch on Second Node"
description: ""
project: community
lastmod: 2011-07-11T05:58:44-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03982"
mailinglist_parent_id: "msg03979"
author_name: "Muhammad Yousaf"
project_section: "mailinglistitem"
sent_date: 2011-07-11T05:58:44-07:00
---


Thanks Mathias & Sylvain,
Everything works fine on second node except riakc\\_pb\\_socket:search command. 
Yes, Normal data can be accessed.

Upgrading riaksearch to 0.14.2 solves that problem. 1 Question though, Copying 
Data folder which includes bitcask,merge\\_index,mr\\_queue and ring to new version 
of riak search Data folder will it work or not ?. If yes, do i have to reindex 
my data ? 
 


Regards,
Muhammad Yousaf

&gt; Date: Mon, 11 Jul 2011 09:59:09 +0200
&gt; From: math...@basho.com
&gt; To: muhammad.you...@live.com
&gt; CC: riak-users@lists.basho.com
&gt; Subject: Re: Quering Riaksearch on Second Node
&gt; 
&gt; Muhammad,
&gt; 
&gt; can you see the merge\\_index directory fill with data on the second machine 
&gt; that's not responding to queries? Anything unusual showing up in the log?
&gt; 
&gt; Can you access the normal data you're indexing through Riak KV on both 
&gt; machines?
&gt; 
&gt; Mathias Meyer
&gt; Developer Advocate, Basho Technologies
&gt; 
&gt; 
&gt; On Donnerstag, 7. Juli 2011 at 20:28, Muhammad Yousaf wrote:
&gt; 
&gt; &gt; Hi,
&gt; &gt; 
&gt; &gt; I have 2 node Riaksearch cluster. My first node is working perfectly with 
&gt; &gt; that stats
&gt; &gt; 
&gt; &gt; curl -H "Accept: text/plain" http://192.168.1.182:8098/stats
&gt; &gt; {
&gt; &gt; "vnode\\_gets": 0,
&gt; &gt; "vnode\\_puts": 0,
&gt; &gt; "read\\_repairs": 0,
&gt; &gt; "vnode\\_gets\\_total": 480294,
&gt; &gt; "vnode\\_puts\\_total": 106564,
&gt; &gt; "node\\_gets": 0,
&gt; &gt; "node\\_gets\\_total": 341810,
&gt; &gt; "node\\_get\\_fsm\\_time\\_mean": "undefined",
&gt; &gt; "node\\_get\\_fsm\\_time\\_median": "undefined",
&gt; &gt; "node\\_get\\_fsm\\_time\\_95": "undefined",
&gt; &gt; "node\\_get\\_fsm\\_time\\_99": "undefined",
&gt; &gt; "node\\_get\\_fsm\\_time\\_100": "undefined",
&gt; &gt; "node\\_puts": 0,
&gt; &gt; "node\\_puts\\_total": 34671,
&gt; &gt; "node\\_put\\_fsm\\_time\\_mean": "undefined",
&gt; &gt; "node\\_put\\_fsm\\_time\\_median": "undefined",
&gt; &gt; "node\\_put\\_fsm\\_time\\_95": "undefined",
&gt; &gt; "node\\_put\\_fsm\\_time\\_99": "undefined",
&gt; &gt; "node\\_put\\_fsm\\_time\\_100": "undefined",
&gt; &gt; "read\\_repairs\\_total": 1711,
&gt; &gt; "cpu\\_nprocs": 472,
&gt; &gt; "cpu\\_avg1": 374,
&gt; &gt; "cpu\\_avg5": 479,
&gt; &gt; "cpu\\_avg15": 502,
&gt; &gt; "mem\\_total": 4002107392.0,
&gt; &gt; "mem\\_allocated": 3946246144.0,
&gt; &gt; "nodename": "riaksearch@192.168.1.182",
&gt; &gt; "connected\\_nodes": [
&gt; &gt; "riaksearch@192.168.1.167"
&gt; &gt; ],
&gt; &gt; "sys\\_driver\\_version": "1.5",
&gt; &gt; "sys\\_global\\_heaps\\_size": 0,
&gt; &gt; "sys\\_heap\\_type": "private",
&gt; &gt; "sys\\_logical\\_processors": 4,
&gt; &gt; "sys\\_otp\\_release": "R14B01",
&gt; &gt; "sys\\_process\\_count": 387,
&gt; &gt; "sys\\_smp\\_support": true,
&gt; &gt; "sys\\_system\\_version": "Erlang R14B01 (erts-5.8.2) [source] [64-bit] 
&gt; &gt; [smp:4:4] [rq:4] [async-threads:64] [hipe] [kernel-poll:true]",
&gt; &gt; "sys\\_system\\_architecture": "x86\\_64-unknown-linux-gnu",
&gt; &gt; "sys\\_threads\\_enabled": true,
&gt; &gt; "sys\\_thread\\_pool\\_size": 64,
&gt; &gt; "sys\\_wordsize": 8,
&gt; &gt; "ring\\_members": [
&gt; &gt; "riaksearch@192.168.1.167",
&gt; &gt; "riaksearch@192.168.1.182"
&gt; &gt; ],
&gt; &gt; "ring\\_num\\_partitions": 64,
&gt; &gt; "ring\\_ownership": 
&gt; &gt; "[{'riaksearch@192.168.1.182',32},{'riaksearch@192.168.1.167',32}]",
&gt; &gt; "ring\\_creation\\_size": 64,
&gt; &gt; "storage\\_backend": "riak\\_kv\\_bitcask\\_backend",
&gt; &gt; "pbc\\_connects\\_total": 505,
&gt; &gt; "pbc\\_connects": 0,
&gt; &gt; "pbc\\_active": 0,
&gt; &gt; "riak\\_err\\_version": "1.0.0",
&gt; &gt; "runtime\\_tools\\_version": "1.8.4.1",
&gt; &gt; "riak\\_search\\_version": "0.14.0",
&gt; &gt; "riak\\_search\\_core\\_version": "0.14.0",
&gt; &gt; "qilr\\_version": "0.14.0",
&gt; &gt; "riak\\_solr\\_version": "0.14.0",
&gt; &gt; "merge\\_index\\_version": "0.14.0",
&gt; &gt; "luwak\\_version": "1.0.0",
&gt; &gt; "skerl\\_version": "1.0.0",
&gt; &gt; "riak\\_kv\\_version": "0.14.0",
&gt; &gt; "bitcask\\_version": "1.1.5",
&gt; &gt; "riak\\_core\\_version": "0.14.0",
&gt; &gt; "luke\\_version": "0.2.3",
&gt; &gt; "erlang\\_js\\_version": "0.5.0",
&gt; &gt; "mochiweb\\_version": "1.7.1",
&gt; &gt; "webmachine\\_version": "1.8.0",
&gt; &gt; "crypto\\_version": "2.0.2",
&gt; &gt; "os\\_mon\\_version": "2.2.5",
&gt; &gt; "cluster\\_info\\_version": "1.0.0",
&gt; &gt; "sasl\\_version": "2.1.9.2",
&gt; &gt; "stdlib\\_version": "1.17.2",
&gt; &gt; "kernel\\_version": "2.14.2",
&gt; &gt; "executing\\_mappers": 0
&gt; &gt; 
&gt; &gt; my query from first node works fine
&gt; &gt; 
&gt; &gt; (riak1@127.0.0.1 (mailto:riak1@127.0.0.1))3&gt; {ok,Client} 
&gt; &gt; =riakc\\_pb\\_socket:start\\_link('192.168.1.182',8087).
&gt; &gt; {ok,&lt;0.46.0&gt;}
&gt; &gt; (riak1@127.0.0.1 (mailto:riak1@127.0.0.1))4&gt; riakc\\_pb\\_socket:search(Client, 
&gt; &gt; &lt;&lt;"player"&gt;&gt;, "playername:yousaf"). 
&gt; &gt; {ok,[[&lt;&lt;"player"&gt;&gt;,&lt;&lt;"yousaf"&gt;&gt;]]}
&gt; &gt; 
&gt; &gt; also 
&gt; &gt; 
&gt; &gt; curl http://192.168.1.182:8098/solr/player/select?q=playername:yousaf
&gt; &gt; xml version="1.0" encoding="UTF-8"?
&gt; &gt; 
&gt; &gt; 
&gt; &gt; 0
&gt; &gt; 2
&gt; &gt; 
&gt; &gt; on
&gt; &gt; 0
&gt; &gt; playername:yousaf
&gt; &gt; or
&gt; &gt; value
&gt; &gt; standard
&gt; &gt; 1.1
&gt; &gt; 1
&gt; &gt; 
&gt; &gt; 
&gt; &gt; 
&gt; &gt; 
&gt; &gt; yousaf
&gt; &gt; 
&gt; &gt; 1
&gt; &gt; 
&gt; &gt; 20110705
&gt; &gt; 
&gt; &gt; muhammad
&gt; &gt; 
&gt; &gt; 1
&gt; &gt; 
&gt; &gt; snowball
&gt; &gt; 
&gt; &gt; 100
&gt; &gt; 
&gt; &gt; yousaf
&gt; &gt; 
&gt; &gt; yousaf
&gt; &gt; 
&gt; &gt; world1
&gt; &gt; 
&gt; &gt; 100
&gt; &gt; 
&gt; &gt; 
&gt; &gt; 
&gt; &gt; 
&gt; &gt; 
&gt; &gt; 
&gt; &gt; 
&gt; &gt; but on my second node i can get list of keys but cannot search it 
&gt; &gt; 
&gt; &gt; (riak1@127.0.0.1)6&gt; {ok,Client} 
&gt; &gt; =riakc\\_pb\\_socket:start\\_link('192.168.1.167',8087).
&gt; &gt; {ok,&lt;0.53.0&gt;}
&gt; &gt; (riak1@127.0.0.1)7&gt; riakc\\_pb\\_socket:search(Client, &lt;&lt;"player"&gt;&gt;, 
&gt; &gt; "playername:yousaf").
&gt; &gt; {ok,[]}
&gt; &gt; 
&gt; &gt; and 
&gt; &gt; 
&gt; &gt; curl http://192.168.1.167:8098/solr/player/select?q=playername:yousaf.
&gt; &gt; xml version="1.0" encoding="UTF-8"?
&gt; &gt; 
&gt; &gt; 
&gt; &gt; 0
&gt; &gt; 1
&gt; &gt; 
&gt; &gt; on
&gt; &gt; 0
&gt; &gt; playername:yousaf.
&gt; &gt; or
&gt; &gt; value
&gt; &gt; standard
&gt; &gt; 1.1
&gt; &gt; 0
&gt; &gt; 
&gt; &gt; 
&gt; &gt; 
&gt; &gt; 
&gt; &gt; 
&gt; &gt; 
&gt; &gt; but data is replicating properly. Any idea's how to fix it only searching 
&gt; &gt; is causing problem??
&gt; &gt; 
&gt; &gt; 
&gt; &gt; 
&gt; &gt; Regards,
&gt; &gt; 
&gt; &gt; Muhammad Yousaf 
&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com (mailto:riak-users@lists.basho.com)
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; 
&gt; 
 

