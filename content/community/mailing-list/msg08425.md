---
title: "Re: Riak behind a Load Balancer"
description: ""
project: community
lastmod: 2012-08-31T10:46:17-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08425"
author_name: "Armon Dadgar"
project_section: "mailinglistitem"
sent_date: 2012-08-31T10:46:17-07:00
---


&gt; Message: 2
&gt; Date: Fri, 31 Aug 2012 10:07:01 +0100
&gt; From: Guido Medina 
&gt; To: riak-users  (mailto:riak-users@lists.basho.com)&gt;
&gt; Subject: Re: Riak behind a Load Balancer
&gt; Message-ID:  (mailto:blu0-smtp26a5bb00d2b81d336444e19d...@phx.gbl)&gt;
&gt; Content-Type: text/plain; charset="iso-8859-1"; Format="flowed"
&gt; 
&gt; Hi,
&gt; 
&gt; We use HA proxy on a 4 nodes cluster for a J2EE application, before 
&gt; using HA proxy we delegated on the Java Riak cluster client config to 
&gt; handle the 4 nodes, but too many errors were generated, once we switched 
&gt; to HA proxy and a single Java Riak client config, the errors were 
&gt; reduced dramatically.
&gt; 
&gt; I don't know how accurate an article can be, but my experience comes 
&gt; from transferring 10+ millions records from PostgreSQL to Riak several 
&gt; times, running processes for 48 to 72 hours continuously, so IMHO, HA 
&gt; proxy + new client client (The one that comes with Protobuf 2.4.1+, not 
&gt; the old 2.3.0) is the way to go. To add more, we have autossh tunnels on 
&gt; the Java application server connected to each Riak node and behind it, 
&gt; HA proxy.
&gt; 
&gt; With the new protobuf I have the transferring running for the last 48 
&gt; hours and not a single error.
&gt; 
&gt; Regards,
&gt; 
&gt; Guido.
We have been running Riak behind HAProxy since day one, using the
Protocol Buffers interface. Hasn't ever been a problem, and makes cluster
changes transparent to the application.

Best Regards,

Armon Dadgar
 

