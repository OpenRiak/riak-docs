---
title: "Re: Upgrade procedure from 0.12 to 0.13"
description: ""
project: community
lastmod: 2010-10-13T13:46:39-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01276"
mailinglist_parent_id: "msg01274"
author_name: "Mojito Sorbet"
project_section: "mailinglistitem"
sent_date: 2010-10-13T13:46:39-07:00
---


To me, inability to upgrade a large Riak cluster incrementally would be
a major factor against choosing it. The evolution of the protocols must
be constrained so that this is possible. Now is the time to work that
out, while the version number still starts with "0".

On Wed, 2010-10-13 at 11:34 -0600, David Smith wrote:
&gt; To the best of my knowledge, there are no changes between 0.12-&gt;0.13
&gt; that would prevent a rolling upgrade. That said, we have not tested
&gt; that specific use-case yet -- it's in the pipeline to be part of our
&gt; pre-release automated testing.
&gt; 
&gt; I'd recommend you'd try it on a QA cluster before doing it live...but
&gt; it should generally work. :)
&gt; 
&gt; D.
&gt; 
&gt; On Wed, Oct 13, 2010 at 11:30 AM, Alexander Sicular  
&gt; wrote:
&gt; &gt; Well it sounds to me that there are three primary considerations. 
&gt; &gt; Riak\\_core, Riak\\_kv and bitcask (assuming you are using that backend). If 
&gt; &gt; either of those change in some incompatible way you could end up doing 
&gt; &gt; damage to your data. I dunno, sounds possible to me. That said, rolling 
&gt; &gt; upgrades would be ... desirable. Personally I would not do it unless Basho 
&gt; &gt; said it was kosher.
&gt; &gt;
&gt; &gt; -Alexander
&gt; &gt;
&gt; &gt;
&gt; &gt; On Oct 13, 2010, at 1:23 PM, Wilson MacGyver wrote:
&gt; &gt;
&gt; &gt;&gt; I thought it's possible to do "rolling upgrade". ie, shutdown 1 node,
&gt; &gt;&gt; upgrade it, and reconnect the
&gt; &gt;&gt; node to the cluster.
&gt; &gt;&gt;
&gt; &gt;&gt; otherwise you'd need 2X of the nodes in production.
&gt; &gt;&gt;
&gt; &gt;&gt; On Wed, Oct 13, 2010 at 1:21 PM, Alexander Sicular  
&gt; &gt;&gt; wrote:
&gt; &gt;&gt;&gt; I'm pretty sure that Baho would recommend that all nodes in a cluster 
&gt; &gt;&gt;&gt; should be running the same version. An upgrade would probably require 
&gt; &gt;&gt;&gt; doing a full database backup and a full database restore on a \\*new\\* 
&gt; &gt;&gt;&gt; cluster.
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; -Alexander
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; On Oct 13, 2010, at 10:06 AM, SKester wrote:
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt;&gt; Hey folks,
&gt; &gt;&gt;&gt;&gt;
&gt; &gt;&gt;&gt;&gt; What is the proper way to upgrade a cluster from 0.12 to 0.13? Our 4 
&gt; &gt;&gt;&gt;&gt; node cluster was originally created by installing the 0.12 rpms. Is the 
&gt; &gt;&gt;&gt;&gt; process as simple as stopping riak on a node, installing the new rpm 
&gt; &gt;&gt;&gt;&gt; and re-starting? Is it possible to roll through each node one at a time 
&gt; &gt;&gt;&gt;&gt; while the others are still available, or do all nodes need to be halted 
&gt; &gt;&gt;&gt;&gt; and upgraded at the same time? I have backed up the /etc/riak directory 
&gt; &gt;&gt;&gt;&gt; to save the initial config data. Are the 0.12 config files fully 
&gt; &gt;&gt;&gt;&gt; compatible with 0.13?
&gt; &gt;&gt;&gt;&gt;
&gt; &gt;&gt;&gt;&gt; Thanks,
&gt; &gt;&gt;&gt;&gt; Scott
&gt; &gt;&gt;&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt;&gt;&gt;&gt; riak-users mailing list
&gt; &gt;&gt;&gt;&gt; riak-users@lists.basho.com
&gt; &gt;&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; -Alexander Sicular
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; @siculars
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt;&gt;&gt; riak-users mailing list
&gt; &gt;&gt;&gt; riak-users@lists.basho.com
&gt; &gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;
&gt; &gt;&gt;
&gt; &gt;&gt;
&gt; &gt;&gt; --
&gt; &gt;&gt; Omnem crede diem tibi diluxisse supremum.
&gt; &gt;&gt;
&gt; &gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt;&gt; riak-users mailing list
&gt; &gt;&gt; riak-users@lists.basho.com
&gt; &gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; &gt;
&gt; &gt;
&gt; &gt; -Alexander Sicular
&gt; &gt;
&gt; &gt; @siculars
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; 

