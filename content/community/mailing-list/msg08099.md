---
title: "Re: Cant remote write to riak"
description: ""
project: community
lastmod: 2012-07-26T21:52:33-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08099"
mailinglist_parent_id: "msg08098"
author_name: "David Montgomery"
project_section: "mailinglistitem"
sent_date: 2012-07-26T21:52:33-07:00
---


I found what the problem was. As a newbie I followed the instructions
for a basic cluster setup to the T. Then meant I did not change the
defualt {pb\\_ip, "127.0.0.1" }.

Great if that would be added in the wiki to change both http and pb\\_ip
if desired.

thanks


On Fri, Jul 27, 2012 at 11:59 AM, David Montgomery
 wrote:
&gt; As a note, from a remote machine, this command worked curl -v
&gt; http://111.222.333.444:8098/riak/test and returned the expected
&gt; output.
&gt;
&gt;
&gt; \\* About to connect() to 111.222.333.444 port 8098 (#0)
&gt; \\* Trying 111.222.333.444... connected
&gt; \\* Connected to 111.222.333.444 (111.222.333.444) port 8098 (#0)
&gt;&gt; GET /riak/test HTTP/1.1
&gt;&gt; User-Agent: curl/7.21.3 (x86\\_64-pc-linux-gnu) libcurl/7.21.3 OpenSSL/0.9.8o 
&gt;&gt; zlib/1.2.3.4 libidn/1.18
&gt;&gt; Host: 111.222.333.444:8098
&gt;&gt; Accept: \\*/\\*
&gt;&gt;
&gt; &lt; HTTP/1.1 200 OK
&gt; &lt; Vary: Accept-Encoding
&gt; &lt; Server: MochiWeb/1.1 WebMachine/1.9.0 (someone had painted it blue)
&gt; &lt; Date: Fri, 27 Jul 2012 03:58:22 GMT
&gt; &lt; Content-Type: application/json
&gt; &lt; Content-Length: 422
&gt; &lt;
&gt; \\* Connection #0 to host 111.222.333.444 left intact
&gt; \\* Closing connection #0
&gt; {"props":{"name":"test","allow\\_mult":false,"basic\\_quorum":false,"big\\_vclock":50,"chash\\_keyfun":{"mod":"riak\\_core\\_util","fun":"chash\\_std\\_keyfun"},"dw":"quorum","last\\_write\\_wins":false,"linkfun":{"mod":"riak\\_kv\\_wm\\_link\\_walker","fun":"mapreduce\\_linkfun"},"n\\_val":3,"notfound\\_ok":true,"old\\_vclock":86400,"postcommit":[],"pr":0,"precommit":[],"pw":0,"r":"quorum","rw":"quorum","small\\_vclock":50,"w":"quorum","young\\_vclock":20}}
&gt;
&gt;
&gt;
&gt;
&gt;
&gt; On Fri, Jul 27, 2012 at 11:40 AM, David Montgomery
&gt;  wrote:
&gt;&gt; Hi,
&gt;&gt;
&gt;&gt; I have one node installed on my cloud provider and tried to remote
&gt;&gt; write using a python client but I get a connection failure.
&gt;&gt;
&gt;&gt; On the riak node:
&gt;&gt;
&gt;&gt; riak-admin status | grep ring\\_members
&gt;&gt; ring\\_members : ['r...@xxx.xxx.xxx.xxx]
&gt;&gt;
&gt;&gt; service riak ping
&gt;&gt; Attempting to restart script through sudo -u riak
&gt;&gt; pong
&gt;&gt;
&gt;&gt; So, I did update the vm.args and app.config with the nodes ip address,
&gt;&gt; restarted and set the seed as a ring member.
&gt;&gt;
&gt;&gt; Services are running. I can also telnet into other open ports e.g.
&gt;&gt; 22. I have all ports open to the appropriate servers..
&gt;&gt;
&gt;&gt; I am also able to write when using localhost to a bucket on the node.
&gt;&gt; I just cant use a remote client.
&gt;&gt;
&gt;&gt; Is there a step I missed with being able to remote write?
&gt;&gt;
&gt;&gt; On the riak node, this works:
&gt;&gt; client = 
&gt;&gt; riak.RiakClient(host='127.0.0.1',port=8087,transport\\_class=riak.transports.pbc.RiakPbcTransport)
&gt;&gt;
&gt;&gt; This does not work when I write to a bucket on the riak node or any other 
&gt;&gt; node:
&gt;&gt; client = 
&gt;&gt; riak.RiakClient(host='111.222.333.444',port=8087,transport\\_class=riak.transports.pbc.RiakPbcTransport)

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

