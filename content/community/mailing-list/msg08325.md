---
title: "Re: Riak Search. Indexing special chars. Internal Server Error."
description: ""
project: community
lastmod: 2012-08-20T06:50:33-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08325"
mailinglist_parent_id: "msg08324"
author_name: "Ryan Zezeski"
project_section: "mailinglistitem"
sent_date: 2012-08-20T06:50:33-07:00
---


On Mon, Aug 20, 2012 at 6:24 AM, Vladimir Shapovalov
wrote:

&gt; Hi all,
&gt;
&gt; I'm trying to put some data in a bucket, witch has indexing enabled.
&gt; One key value has a special char ß (geman 
&gt; S-sharp).
&gt; It is UTF-8 encoded.
&gt;
&gt; The errror message i get:
&gt;
&gt; ---------------------------------------------------------------------------------------------
&gt;
&gt; Internal Server ErrorThe server encountered an error while processing this 
&gt; request:
&gt;
&gt; {error,
&gt; {error,badarg,
&gt; [{erlang,iolist\\_to\\_binary,
&gt; [{hook\\_crashed,
&gt; {riak\\_search\\_kv\\_hook,precommit,error,function\\_clause}}]},
&gt; {wrq,append\\_to\\_response\\_body,2},
&gt; {riak\\_kv\\_wm\\_object,handle\\_common\\_error,3},
&gt; {webmachine\\_resource,resource\\_call,3},
&gt; {webmachine\\_resource,do,3},
&gt; {webmachine\\_decision\\_core,resource\\_call,1},
&gt; {webmachine\\_decision\\_core,accept\\_helper,0},
&gt; {webmachine\\_decision\\_core,decision,1}]}}
&gt;
&gt; ------------------------------
&gt; mochiweb+webmachine web server
&gt;
&gt;
&gt; ---------------------------------------------------------------------------------------------
&gt;
&gt; Could anyone tell me please, how to store data special chars included 
&gt; correctly?
&gt;
&gt; How to deal with non ASCII chars in Riak, say coming from Russian or German 
&gt; languages?
&gt;
&gt; And why it causes riak\\_search\\_kv\\_hook to crash?
&gt;
&gt;
&gt; Thanks in Advance!
&gt;
&gt; Vladimir
&gt;
&gt;
Valdimir,

I tried different combinations of things to reproduce your error: key
containing ß, bucket containing ß, plain text value with ß, JSON with ß,
etc. Everything worked fine for me and I got the expected number of
results.

However, I tested on master (essentially version 1.2.0). What version of
Riak are you using?

-Z
