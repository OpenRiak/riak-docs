---
title: "Re: Riak 1.0 pre2 legacy_keylisting crash"
description: ""
project: community
lastmod: 2011-09-11T10:44:27-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg04653"
mailinglist_parent_id: "msg04652"
author_name: "Ryan Caught"
project_section: "mailinglistitem"
sent_date: 2011-09-11T10:44:27-07:00
---


Yeah, I did upgrade all nodes first, then changed the setting.

On Sun, Sep 11, 2011 at 10:32 AM, Sean Cribbs  wrote:

&gt; AFAIK you need to make sure that all nodes are upgraded first, and then
&gt; turn legacy\\_keylisting off. The crash you see is not (necessarily) related
&gt; to keylisting, but MapReduce. I hope to push out a new version of the Ruby
&gt; client in the next few weeks to support the new features.
&gt;
&gt; On Sun, Sep 11, 2011 at 3:38 AM, Ryan Caught  wrote:
&gt;
&gt;&gt; Hi,
&gt;&gt; I'm testing out a rolling upgrade with 1.0 pre2 and found that when I turn
&gt;&gt; off legacy\\_keylisting Riak crashes on me. Things work fine when
&gt;&gt; legacy\\_keylisting is turned on.
&gt;&gt;
&gt;&gt; Here is what I found in the crash log.
&gt;&gt;
&gt;&gt; 2011-09-11 07:15:44 =SUPERVISOR REPORT====
&gt;&gt;&gt; Supervisor: {local,riak\\_pipe\\_fitting\\_sup}
&gt;&gt;&gt; Context: child\\_terminated
&gt;&gt;&gt; Reason: killed
&gt;&gt;&gt; Offender:
&gt;&gt;&gt; [{pid,&lt;0.2725.0&gt;},{name,undefined},{mfargs,{riak\\_pipe\\_fitting,start\\_link,undefined}},{restart\\_type,temporary},{shutdown,2000},{child\\_type,worker}]
&gt;&gt;
&gt;&gt;
&gt;&gt; I'm using Ubuntu with Ripple (0.9.5).
&gt;&gt;
&gt;&gt;
&gt;&gt; Ryan
&gt;&gt;
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;
&gt;&gt;
&gt;
&gt;
&gt; --
&gt; Sean Cribbs 
&gt; Developer Advocate
&gt; Basho Technologies, Inc.
&gt; http://www.basho.com/
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

