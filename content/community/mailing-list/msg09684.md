---
title: "Re: vclock, vtag, entity tag"
description: ""
project: community
lastmod: 2012-12-27T14:22:13-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg09684"
mailinglist_parent_id: "msg09683"
author_name: "Shuhao Wu"
project_section: "mailinglistitem"
sent_date: 2012-12-27T14:22:13-08:00
---


Wait. So with 2 siblings, I should get 2 different vclock and 2 etags from
http.

But the specification from pbc tells me it will only return 1 vclock and 2
vtags

Shuhao
Sent from my phone.
On 2012-12-27 5:19 PM, "Pavan Venkatesh"  wrote:

&gt; Hi Shuhao,
&gt;
&gt; Lets say, two clients update the same object at the same time (through
&gt; http or protobuf),then a sibling is created, but with the same vector
&gt; clock.They merge into single object with one vector clock, but these
&gt; siblings live in the same object.
&gt; User intervention is required and one can pick the correct value and issue
&gt; a put request with that vector clock in order to resolve the conflict.
&gt; Hope this helps.
&gt;
&gt; Pavan
&gt;
&gt; On 12/25/12 10:08 PM, "Shuhao"  wrote:
&gt;
&gt; &gt;Hi,
&gt; &gt;
&gt; &gt;I'm just browsing through the API documentations for Riak and I just
&gt; &gt;noticed a couple of things that's pretty confusing:
&gt; &gt;
&gt; &gt;It's my understanding that with the HTTP fetch request, each
&gt; &gt;object/sibling returned will have its own vclock in the form of the HTTP
&gt; &gt;header `X-Riak-Vclock` and an entity tag under the header `ETag`. There
&gt; &gt;is also a vtag url parameter specified by the HTTP fetch request which I
&gt; &gt;assume fetches specific sibling with that entity tag. [1]
&gt; &gt;
&gt; &gt;[1]:
&gt; &gt;http://docs.basho.com/riak/latest/references/apis/http/HTTP-Fetch-Object/
&gt; &gt;
&gt; &gt;However, the protobuf client will return a list of siblings but only
&gt; &gt;with 1 vclock with `optional bytes vclock = 2;` for all the siblings
&gt; &gt;returned under `content`. For each sibling, there will be a `vtag`
&gt; &gt;attribute, which I assume is the entity tag as specified in the HTTP
&gt; &gt;document. [2]
&gt; &gt;
&gt; &gt;[2]:
&gt; &gt;
&gt; http://docs.basho.com/riak/latest/references/apis/protocol-buffers/PBC-Fet
&gt; &gt;ch
&gt; &gt;-Object/
&gt; &gt;
&gt; &gt;So the confusion is that why is it that in the HTTP request, each
&gt; &gt;sibling has its own vclock and entity tag/vtag while in the PBC request,
&gt; &gt;the entire response only has 1 vclock and each object has its own
&gt; &gt;vtag/entity tag. I'm not too sure if my understanding is complete.
&gt; &gt;
&gt; &gt;Thanks,
&gt; &gt;
&gt; &gt;Shuhao
&gt; &gt;
&gt; &gt;\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt;riak-users mailing list
&gt; &gt;riak-users@lists.basho.com
&gt; &gt;http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; &gt;
&gt;
&gt;
&gt;
