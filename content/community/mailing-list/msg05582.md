---
title: "RE: List keys and multiple buckets"
description: ""
project: community
lastmod: 2011-11-15T08:18:06-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05582"
mailinglist_parent_id: "msg05581"
author_name: "Fredrik Lindstr√∂m"
project_section: "mailinglistitem"
sent_date: 2011-11-15T08:18:06-08:00
---


Personally I would tag the objects with 2i (secondary index) headers containing 
a unique value to identify a user. That would would make it quite trivial to 
retrieve all the keys belonging to one user without having to do a full bucket 
scan. I would also store the objects in one bucket, or possibly one bucket per 
object type if that is something that fits your use case.

I have no idea how 2i would work out with 200m keys. From personal experience I 
can say that querying an index of tens of thousands of objects and returning a 
list of keys made up of several thousand is very fast.

/F
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
From: riak-users-boun...@lists.basho.com [riak-users-boun...@lists.basho.com] 
on behalf of Izhar Ravid [iz...@conduit.com]
Sent: Tuesday, November 15, 2011 5:07 PM
To: riak-users
Subject: List keys and multiple buckets

Hi,

Does the bucket name have any affect on the list-keys process?

Assuming I wish to store user information for some 200M users, and create a 
bucket per user. Each user bucket will contain several dozen objects.
- Will list-keys on such a user bucket be a reasonable action?
- Is list-keys isolated to a bucket?
- Is it reasonable to expect Riak to hold 200M buckets?

Kind regards,
Izhar.

