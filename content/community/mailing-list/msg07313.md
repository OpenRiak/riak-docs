---
title: "Re: Facets?"
description: ""
project: community
lastmod: 2012-04-24T13:37:45-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07313"
mailinglist_parent_id: "msg07308"
author_name: "Ryan Zezeski"
project_section: "mailinglistitem"
sent_date: 2012-04-24T13:37:45-07:00
---


On Tue, Apr 24, 2012 at 1:29 PM, Elias Levy wrote:

&gt; On Mon, Apr 23, 2012 at 6:26 PM, wrote:
&gt;
&gt;&gt; I'm also doing work on this to make conjunction queries safer, do less
&gt;&gt; work, and have better latencies. A query that produces a "large" result
&gt;&gt; set is still problematic but a conjunction of small and large result sets
&gt;&gt; will be much, much better. I saw very significant improvement on a
&gt;&gt; particular work load but I need to do more benchmarking on "real"
&gt;&gt; hardware.
&gt;&gt;
&gt;&gt; https://github.com/rzezeski/riak\\_search/tree/rz-conjunction
&gt;&gt; https://github.com/rzezeski/riak\\_search/tree/rz-no-unnecessary-work
&gt;&gt;
&gt;
&gt; I saw some code in there about term frequency. Does that mean that some
&gt; day we may see a faceting API?
&gt;
&gt; That sort of thing would be incredibly useful for generating statistics
&gt; without having to compute them on our own.
&gt;
&gt;
Elias,

I would love to see faceting support in Search. It would be good for
generating statistics, as you say, and dynamic toplogies. The term
frequency in Search currently is an estimation (sometimes it is exact). I
did toy around with a pure Erlang term-frequency index but haven't done
much with it. It's my intention to explore this more in the future as I
think an efficient term-freq index is very important. I'd also like to
look at any C search libs out there to potentially augment/replace merge
index with. I haven't spent much time thinking about how to implement
facets. I imagine you also need an efficient field-&gt;unique terms mapping
and since Riak Search is distributed a covering query is needed to collate
everything. Like everything else, it's just a matter of throwing together
some code ;)

-Z
