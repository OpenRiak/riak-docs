---
title: "Re: how do i link the riak-erlang-client to the Erland node?"
description: ""
project: community
lastmod: 2010-05-02T12:52:07-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg00225"
mailinglist_parent_id: "msg00222"
author_name: "Dan Reverri"
project_section: "mailinglistitem"
sent_date: 2010-05-02T12:52:07-07:00
---


Hi Norman,

I'm not sure why riakc\\_pb\\_socket was available when starting Erlang home
directory. The only possibility I can think of is maybe you ran "./rebar
install" from the riakc directory. The "./rebar install" command will
install an application to your Erlang system libs which means the
application will be available anytime you start "erl".

On Sat, May 1, 2010 at 2:06 PM, Norman Khine  wrote:

&gt; hi dan, ok i got it to work, but i am a little confused.
&gt;
&gt; here is my procedure:
&gt; araweelo:~ khinester$ cd ~/
&gt; araweelo:~ khinester$ riak start
&gt; araweelo:~ khinester$ erl -pa ebin/ deps/\\*/ebin
&gt; Erlang R13B04 (erts-5.7.5) [source] [64-bit] [smp:2:2] [rq:2]
&gt; [async-threads:0] [hipe] [kernel-poll:false]
&gt;
&gt; Eshell V5.7.5 (abort with ^G)
&gt; 1&gt; {ok, RiakcSocket} = riakc\\_pb\\_socket:start\\_link({127,0,0,1}, 8087).
&gt; {ok,&lt;0.34.0&gt;}
&gt; 2&gt; q().
&gt; ok
&gt; 3&gt; araweelo:~ khinester$
&gt;
&gt; On Sat, May 1, 2010 at 8:48 PM, Dan Reverri  wrote:
&gt; &gt; Hi Norman,
&gt; &gt; The documentation is incorrect. Here is a quick session I just ran to use
&gt; &gt; riakc:
&gt; &gt; [~/Projects/riakc]$ erl -pa ebin/ deps/\\*/ebin
&gt;
&gt; as i executed the above code in my home directory, how did erlang know
&gt; how to link the ebin and deps/\\*/ebin?
&gt; is it because i have setup in my .profile
&gt;
&gt; # webmachine erlang files
&gt; export PATH=$HOME/Sandboxes/webmachine-read-only/ebin:$PATH
&gt; # Erlang and Riak
&gt; export PATH=$HOME/Sandboxes/riak/rel/riak/bin:$PATH
&gt; export RIAKC=$HOME/Sandboxes/riak/client\\_lib/riak-erlang-client
&gt;
&gt; sorry for the noob questions.
&gt;
&gt; thanks
&gt;
&gt; &gt; Erlang R13B04 (erts-5.7.5) [source] [64-bit] [smp:2:2] [rq:2]
&gt; &gt; [async-threads:0] [hipe] [kernel-poll:false]
&gt; &gt; Eshell V5.7.5 (abort with ^G)
&gt; &gt; 1&gt; {ok, RiakcSocket} = riakc\\_pb\\_socket:start\\_link({127,0,0,1}, 8087).
&gt; &gt; {ok,&lt;0.34.0&gt;}
&gt; &gt; 2&gt; O = riakc\\_obj:new(&lt;&lt;"bucket"&gt;&gt;, &lt;&lt;"key"&gt;&gt;, &lt;&lt;"Hello World"&gt;&gt;,
&gt; &gt; "text/plain").
&gt; &gt; {riakc\\_obj,&lt;&lt;"bucket"&gt;&gt;,&lt;&lt;"key"&gt;&gt;,undefined,undefined,
&gt; &gt; {dict,1,16,16,8,80,48,
&gt; &gt; {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],...},
&gt; &gt;
&gt; &gt; {{[],[],[],[],[],[],[],[],[],[],[[&lt;&lt;...&gt;&gt;|...]],[],[],...}}},
&gt; &gt; &lt;&lt;"Hello World"&gt;&gt;}
&gt; &gt; 3&gt; O = riakc\\_obj:new(&lt;&lt;"bucket"&gt;&gt;, &lt;&lt;"key"&gt;&gt;, &lt;&lt;"Hello World"&gt;&gt;,
&gt; &gt; "text/plain").
&gt; &gt; {riakc\\_obj,&lt;&lt;"bucket"&gt;&gt;,&lt;&lt;"key"&gt;&gt;,undefined,undefined,
&gt; &gt; {dict,1,16,16,8,80,48,
&gt; &gt; {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],...},
&gt; &gt;
&gt; &gt; {{[],[],[],[],[],[],[],[],[],[],[[&lt;&lt;...&gt;&gt;|...]],[],[],...}}},
&gt; &gt; &lt;&lt;"Hello World"&gt;&gt;}
&gt; &gt; 4&gt; riakc\\_pb\\_socket:put(RiakcSocket, O, [return\\_body]).
&gt; &gt; {ok,{riakc\\_obj,&lt;&lt;"bucket"&gt;&gt;,&lt;&lt;"key"&gt;&gt;,
&gt; &gt; &lt;&lt;107,206,97,96,96,96,204,96,202,5,82,44,108,223,42,215,
&gt; &gt; 101,48,37,50,230,177,50,...&gt;&gt;,
&gt; &gt; [{{dict,3,16,16,8,80,48,
&gt; &gt; {[],[],[],[],[],[],[],[],[],[],[],[],...},
&gt; &gt; {{[],[],[],[],[],[],[],[],[],[],...}}},
&gt; &gt; &lt;&lt;"Hello World"&gt;&gt;}],
&gt; &gt; {dict,0,16,16,8,80,48,
&gt; &gt; {[],[],[],[],[],[],[],[],[],[],[],[],[],...},
&gt; &gt; {{[],[],[],[],[],[],[],[],[],[],[],...}}},
&gt; &gt; undefined}}
&gt; &gt; 5&gt;
&gt; &gt;
&gt; &gt; You'll notice I had to include "ebin" and "deps/\\*/ebin". The deps ebin
&gt; was
&gt; &gt; necessary for the protobuffs dependency. You'll also notice I didn't
&gt; &gt; reference the client at all.
&gt; &gt; Thanks,
&gt; &gt; Dan
&gt; &gt; On Sat, May 1, 2010 at 4:20 AM, Norman Khine  wrote:
&gt; &gt;&gt;
&gt; &gt;&gt; hi
&gt; &gt;&gt;
&gt; &gt;&gt; On Sat, May 1, 2010 at 12:30 AM, Dan Reverri  wrote:
&gt; &gt;&gt; &gt; Can you try running "make clean && make all"?
&gt; &gt;&gt;
&gt; &gt;&gt; yes i did this but still unable to link the library to Erlang?
&gt; &gt;&gt;
&gt; &gt;&gt; araweelo:riak khinester$ erl -version
&gt; &gt;&gt; Erlang (SMP,ASYNC\\_THREADS,HIPE) (BEAM) emulator version 5.7.5
&gt; &gt;&gt; araweelo:~ khinester$ erl -pa $RIAKC/ebinErlang R13B04 (erts-5.7.5)
&gt; &gt;&gt; [source] [64-bit] [smp:2:2] [rq:2] [async-threads:0] [hipe]
&gt; &gt;&gt; [kernel-poll:false]
&gt; &gt;&gt;
&gt; &gt;&gt; Eshell V5.7.5 (abort with ^G)
&gt; &gt;&gt; 1&gt; code:which(riakc\\_pb\\_client).
&gt; &gt;&gt; non\\_existing
&gt; &gt;&gt; 2&gt;
&gt; &gt;&gt;
&gt; &gt;&gt;
&gt; &gt;&gt; &gt; It should fetch the protobuffs dependency and compile everything. Once
&gt; &gt;&gt; &gt; this
&gt; &gt;&gt; &gt; is complete run:
&gt; &gt;&gt; &gt; erl -pa $RIAKC/ebin
&gt; &gt;&gt; &gt; Make sure $RIAKC points to the path where you have cloned the
&gt; &gt;&gt; &gt; riak-erlang-client repo.
&gt; &gt;&gt;
&gt; &gt;&gt; araweelo:riak khinester$ echo $RIAKC
&gt; &gt;&gt; /Users/khinester/Sandboxes/riak/client\\_lib/riak-erlang-client
&gt; &gt;&gt; araweelo:riak khinester$ tree -L 2
&gt; &gt;&gt; /Users/khinester/Sandboxes/riak/client\\_lib/riak-erlang-client/
&gt; &gt;&gt; /Users/khinester/Sandboxes/riak/client\\_lib/riak-erlang-client/
&gt; &gt;&gt; |-- LICENSE
&gt; &gt;&gt; |-- Makefile
&gt; &gt;&gt; |-- README
&gt; &gt;&gt; |-- deps
&gt; &gt;&gt; | `-- protobuffs
&gt; &gt;&gt; |-- docs
&gt; &gt;&gt; | `-- pb-client.txt
&gt; &gt;&gt; |-- ebin
&gt; &gt;&gt; | |-- riakc.app
&gt; &gt;&gt; | |-- riakc\\_obj.beam
&gt; &gt;&gt; | |-- riakc\\_pb.beam
&gt; &gt;&gt; | |-- riakc\\_pb\\_socket.beam
&gt; &gt;&gt; | `-- riakclient\\_pb.beam
&gt; &gt;&gt; |-- include
&gt; &gt;&gt; | |-- riakc\\_obj.hrl
&gt; &gt;&gt; | |-- riakc\\_pb.hrl
&gt; &gt;&gt; | `-- riakclient\\_pb.hrl
&gt; &gt;&gt; |-- rebar
&gt; &gt;&gt; |-- rebar.config
&gt; &gt;&gt; `-- src
&gt; &gt;&gt; |-- riakc\\_obj.erl
&gt; &gt;&gt; |-- riakc\\_pb.erl
&gt; &gt;&gt; |-- riakc\\_pb\\_socket.erl
&gt; &gt;&gt; `-- riakclient.proto
&gt; &gt;&gt;
&gt; &gt;&gt; 6 directories, 18 files
&gt; &gt;&gt;
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt; On Fri, Apr 30, 2010 at 2:16 PM, Norman Khine 
&gt; wrote:
&gt; &gt;&gt; &gt;&gt;
&gt; &gt;&gt; &gt;&gt; hello,
&gt; &gt;&gt; &gt;&gt; i am following the
&gt; &gt;&gt; &gt;&gt; riak/client\\_lib/riak-erlang-client/docs/pb-client.txt
&gt; &gt;&gt; &gt;&gt; but am stuck on this point:
&gt; &gt;&gt; &gt;&gt;
&gt; &gt;&gt; &gt;&gt; $ erl -pa $RIAKC/ebin
&gt; &gt;&gt; &gt;&gt; Erlang R13B04 (erts-5.7.5) [source] [64-bit] [smp:2:2] [rq:2]
&gt; &gt;&gt; &gt;&gt; [async-threads:0] [hipe] [kernel-poll:false]
&gt; &gt;&gt; &gt;&gt;
&gt; &gt;&gt; &gt;&gt; Eshell V5.7.5 (abort with ^G)
&gt; &gt;&gt; &gt;&gt; 1&gt; code:which(riakc\\_pb\\_client).
&gt; &gt;&gt; &gt;&gt; non\\_existing
&gt; &gt;&gt; &gt;&gt; 2&gt;
&gt; &gt;&gt; &gt;&gt; User switch command
&gt; &gt;&gt; &gt;&gt; --&gt; q
&gt; &gt;&gt; &gt;&gt;
&gt; &gt;&gt; &gt;&gt; i also tried:
&gt; &gt;&gt; &gt;&gt;
&gt; &gt;&gt; &gt;&gt; $ sudo ./rebar install
&gt; &gt;&gt; &gt;&gt; Password:
&gt; &gt;&gt; &gt;&gt; ==&gt; protobuffs (install)
&gt; &gt;&gt; &gt;&gt; Installing: protobuffs-4 to /opt/local/lib/erlang/lib
&gt; &gt;&gt; &gt;&gt; ==&gt; riak-erlang-client (install)
&gt; &gt;&gt; &gt;&gt; Installing: riakc-1 to /opt/local/lib/erlang/lib
&gt; &gt;&gt; &gt;&gt; aqoon:riak-erlang-client khinester$ erl
&gt; &gt;&gt; &gt;&gt; Erlang R13B04 (erts-5.7.5) [source] [64-bit] [smp:2:2] [rq:2]
&gt; &gt;&gt; &gt;&gt; [async-threads:0] [hipe] [kernel-poll:false]
&gt; &gt;&gt; &gt;&gt;
&gt; &gt;&gt; &gt;&gt; Eshell V5.7.5 (abort with ^G)
&gt; &gt;&gt; &gt;&gt; 1&gt; code:which(riakc\\_pb\\_client).
&gt; &gt;&gt; &gt;&gt; non\\_existing
&gt; &gt;&gt; &gt;&gt; 2&gt;
&gt; &gt;&gt; &gt;&gt;
&gt; &gt;&gt; &gt;&gt; how do i link the client correctly?
&gt; &gt;&gt; &gt;&gt; any help much appreciated
&gt; &gt;&gt; &gt;&gt;
&gt; &gt;&gt; &gt;&gt; norman
&gt; &gt;&gt; &gt;&gt;
&gt; &gt;&gt; &gt;&gt; --
&gt; &gt;&gt; &gt;&gt; ¿noʎ uɐɔ uʍop ǝpısdn ǝʇıɹʍ uɐɔ ı - %&gt;&gt;&gt; "".join( [
&gt; &gt;&gt; &gt;&gt; {'\\*':'@','^':'.'}.get(c,None) or chr(97+(ord(c)-83)%26) for c in
&gt; &gt;&gt; &gt;&gt; ",adym,\\*)&uzq^zqf" ] )
&gt; &gt;&gt; &gt;&gt;
&gt; &gt;&gt; &gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt;&gt; &gt;&gt; riak-users mailing list
&gt; &gt;&gt; &gt;&gt; riak-users@lists.basho.com
&gt; &gt;&gt; &gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;
&gt; &gt;&gt; &gt;
&gt; &gt;&gt;
&gt; &gt;&gt;
&gt; &gt;&gt;
&gt; &gt;&gt; --
&gt; &gt;&gt; ¿noʎ uɐɔ uʍop ǝpısdn ǝʇıɹʍ uɐɔ ı - %&gt;&gt;&gt; "".join( [
&gt; &gt;&gt; {'\\*':'@','^':'.'}.get(c,None) or chr(97+(ord(c)-83)%26) for c in
&gt; &gt;&gt; ",adym,\\*)&uzq^zqf" ] )
&gt; &gt;
&gt; &gt;
&gt;
&gt;
&gt;
&gt; --
&gt; ¿noʎ uɐɔ uʍop ǝpısdn ǝʇıɹʍ uɐɔ ı - %&gt;&gt;&gt; "".join( [
&gt; {'\\*':'@','^':'.'}.get(c,None) or chr(97+(ord(c)-83)%26) for c in
&gt; ",adym,\\*)&uzq^zqf" ] )
&gt;
