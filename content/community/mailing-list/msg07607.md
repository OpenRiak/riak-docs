---
title: "How to tell when all riak_core vnodes are up?"
description: ""
project: community
lastmod: 2012-06-04T12:51:45-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07607"
author_name: "Will Hutchinson"
project_section: "mailinglistitem"
sent_date: 2012-06-04T12:51:45-07:00
---


Hi, we are using riak\\_core and our own custom vnode type (call it foo) that
implements the riak\\_core\\_vnode behaviour.

We are seeing the following:

1) We start up in our supervisor a processes called foo\\_vnode\\_master that
uses the riak\\_core\\_vnode\\_master module
2) After the supervisor has started all its processes, in our application's
start we call riak\\_core:register(foo, [{vnode\\_module, foo\\_vnode}])
3) Shortly after that I need to send an asynchronous command to all of our
32 vnodes

The problem: Not all of the vnode processes have been created and
initialized yet.

How can I reliably tell whether all of our vnode processes have been
created? I've tried a variety of riak\\_core\\_status and riak\\_core\\_ring
functions and not found anything that seems to return what I need.

The best I can see at this point is to
call riak\\_core\\_vnode\\_manager:all\\_vnodes(foo\\_vnode) until I get back a list
of length 32.

Thanks,
Will Hutchinson

-- 
 

\\*CONFIDENTIALITY NOTICE\\*

THE INFORMATION CONTAINED IN THIS COMMUNICATION IS INTENDED FOR THE NAMED 
RECEIVER ONLY. THE TRANSMISSION MAY CONTAIN PRIVILEGED AND CONFIDENTIAL 
MATERIAL. IF YOU ARE NOT THE NAMED RECIPIENT, PLEASE BE ADVISED THAT ANY 
USE, DISSEMINATION OR UNAUTHORIZED COPYING OF THE MATERIAL IS STRICTLY 
PROHIBITED. IF YOU HAVE RECEIVED THIS TRANSMISSION IN ERROR, PLEASE NOTIFY 
supp...@trueex.com AND DESTROY THE RECEIVED COPY. THANK YOU.
