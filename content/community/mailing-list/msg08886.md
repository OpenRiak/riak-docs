---
title: "Fastest write to riak"
description: ""
project: community
lastmod: 2012-10-11T10:48:37-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08886"
author_name: "David Montgomery"
project_section: "mailinglistitem"
sent_date: 2012-10-11T10:48:37-07:00
---


Hi,


I am using the python riak api and upon stress testing I would have
had a death spiral but my riak cluster was not tuned.

I will now set the bucket N to 2 e.g. test\\_bucket.set\\_n\\_val(2)

Now what is left is w and dw. I would like the option as least
getting that is most 1 write occurred. Also want the option to write
and dump. I can afford data loss.

I am using levelDB.

if I want an ack for one write, do I use test\\_bucket.set\\_dw(1)? How
do I use test\\_bucket.set\\_w(0)?

Is there any other tweaks I can do to write with extreme speed? I
feel I have levelDB tuned.


I have 10 workers each one core in a gevent loop popping a redis
queue. When I pop the queue if I dont write to redis, the queue is at
most 1. If I write to to riak....death spiral and the redis queue
will grow till death. Granted that I did not optimize riak.

I expect 5K qps and I am hoping that I can get a clear picture on how
to set bucket properties optimally.

Thanks

