---
title: "Re: mapreduce timeout error"
description: ""
project: community
lastmod: 2011-09-21T02:35:01-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg04812"
mailinglist_parent_id: "msg04811"
author_name: "raghwani sohil"
project_section: "mailinglistitem"
sent_date: 2011-09-21T02:35:01-07:00
---


thanks Russell .

On Wed, Sep 21, 2011 at 12:22 PM, Russell Brown  wrote:

&gt; Hi Sohil,
&gt;
&gt; On 21 Sep 2011, at 07:07, raghwani sohil wrote:
&gt;
&gt; Hi ,
&gt;
&gt; I am using \\*mapreduce \\*technique\\* \\*to access all keys between perticular
&gt; period .
&gt;
&gt; This is my \\*keys.json\\* file .
&gt;
&gt; {"inputs":{"bucket":"test",
&gt; "key\\_filters":[["matches" ,"2011\\_09\\_11"]]},
&gt; "query":[{"map":{"language":"javascript",
&gt; "source":"function(v) {
&gt; return [v.key] ;
&gt; }",
&gt; "keep":true} } ]
&gt; }
&gt;
&gt; I am invoking mapreduce call using curl
&gt;
&gt; curl -X POST -H "content-type: application/json"
&gt; http://127.0.0.1:8098/mapred --data @keys.json
&gt;
&gt; but it gives me timeout error :- \\*{"error":"timeout"}\\*
&gt;
&gt; so Is there any way to resolve this problem ??
&gt;
&gt;
&gt; Map reduce over an entire bucket is not recommended and can be slow. To
&gt; lessen the likelihood of a timeout error you can add a 'timeout' parameter
&gt; to the map reduce JSON.
&gt;
&gt; {"inputs":{"bucket":"test", "key\\_filters":[["matches" ,"2011\\_09\\_11"]]},
&gt; "query":[{"map":{"language":"javascript", "source":"function(v) { return
&gt; [v.key] ;}", "keep":true} } ], "timeout" : 60000}
&gt;
&gt; You can read more about it on the wiki
&gt; http://wiki.basho.com/MapReduce.html#MapReduce-via-the-HTTP-API
&gt;
&gt; However, it might be a better strategy to write to a new bucket per time
&gt; period, or take advantage of riak search, or secondary indexes and use a
&gt; range query.
&gt;
&gt; Cheers
&gt;
&gt; Russell
&gt;
&gt;
&gt; thanks ,
&gt; Sohil Raghwani .
&gt;

