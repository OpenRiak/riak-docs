---
title: "Re: Load Balancing With Riak Ruby Client"
description: ""
project: community
lastmod: 2011-05-27T12:37:54-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03464"
mailinglist_parent_id: "msg03461"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2011-05-27T12:37:54-07:00
---


This is one thing I desperately want to refactor. The Ruby client still 
contains some things that reflect my earlier, less astute understanding of how 
a Riak client should behave and doesn't include obvious things like retrying 
requests (possibly on other nodes), conflict resolution strategies, and 
mutators.

In the past, I have recommended that users put a lightweight load-balancer 
(e.g. haproxy, pound) between their application and Riak, and simply have the 
app connect to the locally-running instance of the LB. I realize this is not a 
great solution, but it also avoids a little NIH for now.

Sean Cribbs 
Developer Advocate
Basho Technologies, Inc.
http://basho.com/

On May 27, 2011, at 3:20 PM, Keith Bennett wrote:

&gt; Hi, all. If I have several riak servers on a cluster, and want to distribute 
&gt; load fairly evenly, and am using the Ruby Riak client, what is the best way 
&gt; to balance load?
&gt; 
&gt; With the HTTP interface, I can randomize the choice of host for a request. 
&gt; How would I do the same with the ruby client? Would I create a Riak::Client 
&gt; for each host, and then just randomize the selection of those for a given 
&gt; call? Do the clients contain any state that would make this a bad idea? Or 
&gt; is there a better way to do this?
&gt; 
&gt; Thanks,
&gt; Keith
&gt; 
&gt; 
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com


\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

