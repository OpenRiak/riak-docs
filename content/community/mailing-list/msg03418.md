---
title: "Re: Clarification on key filters"
description: ""
project: community
lastmod: 2011-05-26T06:51:56-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03418"
mailinglist_parent_id: "msg03415"
author_name: "Jeremiah Peschka"
project_section: "mailinglistitem"
sent_date: 2011-05-26T06:51:56-07:00
---


Thanks for the clarification. I'll use Ripple to generate some 'canonical' 
strings to work with while I do other, more nefarious, things with them.

Much appreciated. 
--- 
Jeremiah Peschka
Founder, Brent Ozar PLF


On Thursday, May 26, 2011 at 2:42 AM, Mathias Meyer wrote:

&gt; Jeremiah,
&gt; 
&gt; I sure hope you have not been drinking mouthwas.
&gt; 
&gt; The wiki is indeed showing single key filters, and that's confusing. In 
&gt; hindsight, it confused me too when I worked with key filters from the wiki 
&gt; page for the first time. I'll make sure we put some proper examples on that 
&gt; page to clarify how they should end up looking when multiple are put 
&gt; together. 
&gt; 
&gt; The bottom line is that Ripple does produce proper key filter code with 
&gt; conditions and that you are absolutely correct in bringing up this slight 
&gt; confusion.
&gt; 
&gt; Mathias Meyer
&gt; Developer Advocate, Basho Technologies
&gt; 
&gt; On Donnerstag, 26. Mai 2011 at 03:34, Jeremiah Peschka wrote:
&gt; 
&gt; &gt; An MR job has 0 or more key filters. Adding a few transforms generates a 
&gt; &gt; lovely list of lists:
&gt; &gt; { "inputs":{ "bucket":"invoices" "key\\_filters":[["tokenize", "-", 1], 
&gt; &gt; ["to\\_lower"], ["matches", "solutions"]] }, // ... }
&gt; &gt; That makes sense: we've got a list of key filters. And a key filter is, in 
&gt; &gt; effect, a list of arguments.
&gt; &gt; 
&gt; &gt; The complex predicates are throwing me off. Looking at the spec from Ripple 
&gt; &gt; in filter\\_builder\\_spec.rb [1] and it's showing that 
&gt; &gt; 
&gt; &gt; subject.OR do
&gt; &gt; starts\\_with "foo"
&gt; &gt; ends\\_with "bar"
&gt; &gt; end
&gt; &gt; 
&gt; &gt; 
&gt; &gt; becomes
&gt; &gt; 
&gt; &gt; [[:or, [[:starts\\_with, "foo"],[:ends\\_with, "bar"]]]]
&gt; &gt; 
&gt; &gt; Which is not at all the same as what the wiki says an OR should look like: 
&gt; &gt; 
&gt; &gt; ["or", [["eq", "google"]], [["less\\_than", "g"]]]
&gt; &gt; 
&gt; &gt; Apart from the obvious difference in syntax, have I been drinking mouthwash 
&gt; &gt; or did the wiki suddenly switch from showing a complete key filter 
&gt; &gt; condition to showing an individual key filter command for AND, OR, and NOT? 
&gt; &gt; 
&gt; &gt; Jeremiah
&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com (mailto:riak-users@lists.basho.com)
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

