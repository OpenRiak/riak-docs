---
title: "Re: Riak behind a Load Balancer"
description: ""
project: community
lastmod: 2012-09-08T09:02:54-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08474"
mailinglist_parent_id: "msg08473"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2012-09-08T09:02:54-07:00
---


Sebastian,

There are plans to have client-driven request routing (that is, at
least sending the request to a member of the preflist) in the future,
but that is currently vaporware. An interim solution we have discussed
was to send the client a "hint" as to where to send a request for that
key on the next time around, but that is also unimplemented. On
well-performing client and Riak machines, the difference will be
small-to-negligible anyway; the primary effect of sending a request to
the member of the preflist would be reduced network traffic between
the Riak nodes themselves.

On Sat, Sep 8, 2012 at 10:08 AM, Sebastian Cohnen
 wrote:
&gt; AFAIK Riak does not expose these data via API in order to implement a
&gt; "client-driven coordination", right?
&gt;
&gt; This sounds quite interesting and would be a nice way to reduce latencies
&gt; when talking to Riak.
&gt;
&gt; Best
&gt;
&gt; Sebastian
&gt;
&gt;
&gt; On 31.08.2012, at 10:55, Dave Brady  wrote:
&gt;
&gt; There's a reference to an article on Basho's site, written by Amazon, about
&gt; Dynamo:
&gt;
&gt; http://features.basho.com/entries/20535121-weighted-nodes
&gt;
&gt; Section 6.4 explains why they do not use load balancers.
&gt;
&gt; The rest of the article is good reading, too.
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; From: "Sean Carey" 
&gt; To: "Matt Black" 
&gt; Cc: "riak-users" 
&gt; Sent: Thursday, August 30, 2012 11:09:00 PM
&gt; Subject: Re: Riak behind a Load Balancer
&gt;
&gt; Matt,
&gt; Haproxy is my load balancer of choice. You can always run multiple copies of
&gt; haproxy and use some type of dynamic dns with it.
&gt;
&gt; We do this in many cases. Haproxy scales well. I've seen a single node
&gt; sustain multiple gigabits per second with almost no sweat.
&gt;
&gt;
&gt; Thanks.
&gt;
&gt;
&gt; Sean
&gt; On Monday, June 25, 2012 at 7:36 AM, Matt Black wrote:
&gt;
&gt; Dear list,
&gt;
&gt; Does anyone have an opinion on the concept of putting a Riak cluster behind
&gt; a load balancer?
&gt;
&gt; We wish to be able to automatically add/remove nodes from the cluster, so
&gt; adding an extra layer at the front is desirable. We should also benefit for
&gt; incoming requests behind shared across all nodes.
&gt;
&gt; Can anyone see any drawbacks / problems with doing this?
&gt;
&gt; Thanks
&gt; Matt
&gt;

-- 
Sean Cribbs 
Software Engineer
Basho Technologies, Inc.
http://basho.com/

