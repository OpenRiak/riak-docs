---
title: "Re: New to Riak, hitting a connection limit"
description: ""
project: community
lastmod: 2012-08-01T23:02:31-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08155"
mailinglist_parent_id: "msg08035"
author_name: "Mark Phillips"
project_section: "mailinglistitem"
sent_date: 2012-08-01T23:02:31-07:00
---


Hi Douglas,

I think you're problem here is that you're front-loading requests.
You're better off to issue them serially and wait for one to finish
before issuing the next. Rumor has there's an example of how one might
do this somewhere in Riaktant [1], a somewhat dusty but useful sample
app. I'll dig through it tomorrow if I remember.

Mark


[1] https://github.com/basho/riaktant

On Mon, Jul 23, 2012 at 11:15 AM, Douglas Muth  wrote:
&gt; Hi everyone,
&gt;
&gt; I'm new to Riak, and have been playing around with it the last few
&gt; days. The first thing I did to become familiar with Riak was to write
&gt; a benchmarking utility that uses node.js to write as many key/value
&gt; pairs as it can, as quick as it can. I'm using node\\_riak
&gt; (https://github.com/mranney/node\\_riak) for this, over the HTTP
&gt; interface.
&gt;
&gt; Anyway, after I go just past 1,000 inserts, I start seeing errors like these:
&gt;
&gt; riak response error too many pending requests, get
&gt; bucket\\_key="test-benchmark/test\\_1007"
&gt;
&gt; And here is the JSON that I get back from Riak:
&gt;
&gt; { reason: 'full',
&gt; delay: true,
&gt; attempt:
&gt; { options:
&gt; { path: '/riak/test-benchmark/test\\_1007',
&gt; headers: [Object],
&gt; retry\\_not\\_found: true,
&gt; method: 'GET',
&gt; retryDelay: 20,
&gt; retryFilter: [Function],
&gt; stream: false,
&gt; success: false } },
&gt; message: 'too many pending requests' }
&gt;
&gt; This seems like too low a number to be having issues like this, so I'd
&gt; like to ask if there are any parameters I could check or change, or
&gt; any troubleshooting I can try?
&gt;
&gt; Thanks,
&gt;
&gt; -- Doug
&gt;
&gt;
&gt; --
&gt; http://twitter.com/dmuth
&gt;

