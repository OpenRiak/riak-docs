---
title: "Re: Whole cluster times out if one node is gone"
description: ""
project: community
lastmod: 2010-11-22T18:00:21-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01603"
mailinglist_parent_id: "msg01602"
author_name: "Jay Adkisson"
project_section: "mailinglistitem"
sent_date: 2010-11-22T18:00:21-08:00
---


Hey Dan,

Thanks for the response! I tried it again while watching `riak-admin
status` - basically, it takes about 30 seconds of node C being down before
riak realizes it's gone. During that time, if I'm writing to the cluster at
all (I throttled it to 2 writes per second for testing), both writes and
reads hang indefinitely, and sometimes time out.

I'm using Ripple to do the writes, and wget to test reads, all on node A for
now, since I know it'll be up. I'm using the default R and W options for
now.

Thanks for the help and clarification around ringready.

--Jay

On Mon, Nov 22, 2010 at 5:15 PM, Dan Reverri  wrote:

&gt; Your HTTP calls should not being timing out. Are you sending requests
&gt; directly to the Riak node or are you using a load balancer? How much load
&gt; are you placing on node A? Is it a write only load or are there reads as
&gt; well? Can you confirm "all" requests time out or is it a large subset of the
&gt; requests? How large are the objects being written? Are you setting R and W
&gt; in the request? Are you using a particular client (Ruby, Python, etc.)? Can
&gt; you provide the output of "riak-admin status" from node A?
&gt;
&gt; Regarding the ringready command; that is behaving as I would expect
&gt; considering a node is down.
&gt;
&gt; Thanks,
&gt; Dan
&gt;
&gt; Daniel Reverri
&gt; Developer Advocate
&gt; Basho Technologies, Inc.
&gt; d...@basho.com
&gt;
&gt;
&gt; On Mon, Nov 22, 2010 at 4:55 PM, Jay Adkisson  wrote:
&gt;
&gt;&gt; Hey all,
&gt;&gt;
&gt;&gt; Here's what I'm seeing: I have four nodes A, B, C, and D. I'm loading
&gt;&gt; lots of data into node A, which is being distributed evenly across the
&gt;&gt; nodes. If I physically reboot node D, all my HTTP calls time out, and
&gt;&gt; `riak-admin ringready` complains that not all nodes are up. Is this
&gt;&gt; intended behavior? Is there a configuration option I can set so it fails
&gt;&gt; more gracefully?
&gt;&gt;
&gt;&gt; --Jay
&gt;
