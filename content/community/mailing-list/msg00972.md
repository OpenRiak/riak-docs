---
title: "Re: map reduce -> JSON.parse error"
description: ""
project: community
lastmod: 2010-08-29T08:01:38-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg00972"
mailinglist_parent_id: "msg00970"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2010-08-29T08:01:38-07:00
---


I have found that error comes from json2.js, and in the future we should just 
use Spidermonkey's builtin. https://issues.basho.com/show\\_bug.cgi?id=525

Sean Cribbs 
Developer Advocate
Basho Technologies, Inc.
http://basho.com/

On Aug 29, 2010, at 10:05 AM, James Sadler wrote:

&gt; Hi Nils,
&gt; 
&gt; I ran into a similar problem last week. It seems that certain
&gt; characters can cause the JSON parser that ships as part of the
&gt; Spidermonkey JavaScript interpreter that Riak uses to throw an
&gt; exception. Off the top of my head, I think I managed to make it barf
&gt; with a \\r embedded within a string.
&gt; 
&gt; I don't have the links handy, but I do believe that this is fixed in
&gt; Spidermonkey, and it's a simple matter of waiting until the fixes are
&gt; merged into Riak.
&gt; 
&gt; Hope that helps :)
&gt; 
&gt; James.
&gt; 
&gt; On 29 August 2010 23:31, Nils Petersohn  wrote:
&gt;&gt; hello,
&gt;&gt; 
&gt;&gt; when i have a simple json bucket entry like this: 
&gt;&gt; http://pastebin.com/XcWcvmYe
&gt;&gt; than i always get an error:
&gt;&gt; 
&gt;&gt; {"lineno":483,"message":"JSON.parse","source":"unknown"}
&gt;&gt; 
&gt;&gt; the stacktrace is here: http://pastebin.com/EGzUKqps
&gt;&gt; 
&gt;&gt; when i try to use a much simpler JSON string than there is no error.
&gt;&gt; 
&gt;&gt; this must be some fault of the JSON.parse method ...
&gt;&gt; 
&gt;&gt; thx for pointing me in the right direction ...
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt; 
&gt; 
&gt; 
&gt; 
&gt; -- 
&gt; James
&gt; 
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com


\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

