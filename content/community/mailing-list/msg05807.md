---
title: "Re: Incorect Input to Reduce"
description: ""
project: community
lastmod: 2011-11-30T07:11:30-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05807"
mailinglist_parent_id: "msg05804"
author_name: "Jonathan Langevin"
project_section: "mailinglistitem"
sent_date: 2011-11-30T07:11:30-08:00
---


Excellent tip Sean, works great for a similar issue I was having.
If I already had args being passed to my reduce phase though (such as when
calling Riak.reduceSlice), is it possible to specify only\\_1 and still
ensure that my regular args pass through to the function as expected? For
instance, reduceSlice expects [int,int], which conflicts with
{"somearg":blah}.
My thought is to now encapsulate my original function call, but I want to
make sure I'm not missing something in Riak that already handles this issue.

 
\\* Jonathan Langevin
Manager, Information Technology
Loom Inc.
Wilmington, NC: (910) 241-0433 - jlange...@loomlearning.com -
www.loomlearning.com - Skype: intel352 \\*

On Wed, Nov 30, 2011 at 10:01 AM, Sean Cribbs  wrote:

&gt; Hi Yehuda,
&gt;
&gt; Your reduce function is not guaranteed to run across all inputs in the
&gt; first application, but may be applied many times as new inputs come in.
&gt; Riak will batch up reduce inputs until a certain number or timeout is
&gt; reached, then apply the function and take its output to be part of the
&gt; inputs for the next application. If it is absolutely necessary to run the
&gt; reduce function only once, use "reduce\\_phase\\_only\\_1" as the "arg" (only
&gt; works on Riak 1.0.x, example in Ruby):
&gt;
&gt; mr.reduce("function(v){...}", :arg =&gt; {:reduce\\_phase\\_only\\_1 =&gt; true},
&gt; :keep =&gt; true)
&gt;
&gt; Hope that helps!
&gt;
&gt; On Wed, Nov 30, 2011 at 9:03 AM, Yehuda Zargrov wrote:
&gt;
&gt;&gt; Hi,\\*\\*\\*\\*
&gt;&gt;
&gt;&gt; \\*\\* \\*\\*
&gt;&gt;
&gt;&gt; I’ve posted a mail on this few days ago, but went a bit further since
&gt;&gt; then.\\*\\*\\*\\*
&gt;&gt;
&gt;&gt; \\*\\* \\*\\*
&gt;&gt;
&gt;&gt; I’m using ripple, running a map function on some input and getting a list
&gt;&gt; of about 50 items.\\*\\*\\*\\*
&gt;&gt;
&gt;&gt; \\*\\* \\*\\*
&gt;&gt;
&gt;&gt; Right after that, I’m running a reduce function. The first thing I do in
&gt;&gt; it is putting the length of v (the input) as an item in a list.\\*\\*\\*\\*
&gt;&gt;
&gt;&gt; \\*\\* \\*\\*
&gt;&gt;
&gt;&gt; When printing the result I see that the length is 13.\\*\\*\\*\\*
&gt;&gt;
&gt;&gt; \\*\\* \\*\\*
&gt;&gt;
&gt;&gt; It’s like something has happened between the map and reduce phases.\\*\\*\\*\\*
&gt;&gt;
&gt;&gt; \\*\\* \\*\\*
&gt;&gt;
&gt;&gt; Any ideas?\\*\\*\\*\\*
&gt;&gt;
&gt;&gt; \\*\\* \\*\\*
&gt;&gt;
&gt;&gt; \\*\\*\\*\\*
&gt;&gt;
&gt;&gt; [image: Description:
&gt;&gt; C:\\Users\\Yehuda\\AppData\\Roaming\\Microsoft\\Signatures\\logo.gif]\\*\\*\\*\\*
&gt;&gt;
&gt;&gt; \\*Yehuda Zargrov\\*\\*
&gt;&gt; \\*Software Engineer\\*\\*\\*\\*
&gt;&gt;
&gt;&gt; \\*Conduit Your Site\\* \\*\\*\\*\\*
&gt;&gt;
&gt;&gt; \\*t:\\* 972.8.9461713 ext +314 | \\*m:\\* +972503473119 | \\*f:\\*
&gt;&gt; +97286382140 \\*\\*\\*\\*
&gt;&gt;
&gt;&gt;
&gt;&gt; This message may contain confidential and/or privileged information. It
&gt;&gt; is intended to be read only by the individual or entity to whom it is
&gt;&gt; addressed or by their designee.
&gt;&gt; If the reader of this message is not the intended recipient, you are on
&gt;&gt; notice that any uses, copy, disclose or distribution of this message, in
&gt;&gt; any form, is strictly prohibited.
&gt;&gt; If you have received this message in error, please notify the sender by
&gt;&gt; reply email or by telephone and delete or destroy any copy of this message.
&gt;&gt; Thank you.
&gt;&gt;
&gt;&gt; \\*\\*\\*\\*
&gt;
&gt;
&gt; --
&gt; Sean Cribbs 
&gt; Developer Advocate
&gt; Basho Technologies, Inc.
&gt; http://www.basho.com/
&gt;
&gt;

