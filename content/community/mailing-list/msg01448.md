---
title: "java client out of memory"
description: ""
project: community
lastmod: 2010-11-03T12:50:55-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01448"
author_name: "Andrea Campolonghi"
project_section: "mailinglistitem"
sent_date: 2010-11-03T12:50:55-07:00
---


Hi,

I am trying to use the riak-java-pb-client.
Sample very very basic code

public static void main(String[] args) {
 try{
RiakClient rc = new RiakClient("localhost",8098);
 String bucket = "bucket";
String key = "key";
 String val = "test";
RiakObject ro = new RiakObject(bucket,key,val);
 rc.store(ro);

RiakObject[] ros = rc.fetch(bucket, key);
 for(RiakObject r : ros){
System.out.println(r.toString());
 }

}catch(IOException e){
 e.printStackTrace();
}


Running this simple test code form eclipse rerquire at least 1.5 GB ram.
Lower than this I get an out of memory exception.

While If I run the code with that huge memory I get this error:

 java.io.EOFException

at java.io.DataInputStream.readFully(DataInputStream.java:180)

at java.io.DataInputStream.readFully(DataInputStream.java:152)

at com.trifork.riak.RiakConnection.receive(RiakConnection.java:89)

at com.trifork.riak.RiakClient.store(RiakClient.java:384)

at com.trifork.riak.RiakClient.store(RiakClient.java:363)

at Runner.main(Runner.java:22)



Any suggestion???


Andrea



-- 
Andrea Campolonghi

Cell : +39 347 2298435
and...@andreacfm.com
http://www.andreacfm.com

Railo Team
and...@getrailo.org
http://getrailo.org
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

