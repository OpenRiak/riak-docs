---
title: "Re: Link or Secondary Indexes?"
description: ""
project: community
lastmod: 2012-03-29T08:51:34-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07079"
mailinglist_parent_id: "msg07078"
author_name: "Buri Arslon"
project_section: "mailinglistitem"
sent_date: 2012-03-29T08:51:34-07:00
---


Kresten, Jeffrey: Thanks a lot for enlightenment!

This link was very helpful to understand what to use when.
http://wiki.basho.com/MapReduce-Search-2i-Comparison.html

The information I obtained pushed me to another question :) .

Q: Is it a good (or at least 'ok') practice to duplicate information in
order to get cheaper/faster queries?

i.e. If a user becomes a member of a group/fanpage I could store that
information both in 'users' and 'groups' bucket. If I want to get the
members of a particular group I query just one value/record in 'groups'
bucket. The only drawback that came to my mind is when you delete that
relationship you have to delete it from two buckets.

Another scenario might be to get last 20 comments by a user. Instead of
searching all posts/comments by author\\_name, I could just store the post or
comment key in the user object as a secondary index and set some limit,
say, 20 for &lt;&lt;"index"&gt;&gt;, &lt;&lt;"last\\_posts\\_bin"&gt;&gt;.

What do you think?

Thanks again,
-- buriwoy

On Thu, Mar 29, 2012 at 8:52 AM, Jeffrey Massung  wrote:

&gt; Buriwoy,
&gt;
&gt; Neither is better (or worse) for "storing" those bits of information. The
&gt; question is how you expect to use that data once it is stored. Let's take a
&gt; look at friend relationships (note: I don't use Facebook, so I might be
&gt; missing a subtle feature with this example)...
&gt;
&gt; Do you merely plan on following a list of friends to other pages quickly?
&gt; For example, on your page, you see a list of your friends quickly, be able
&gt; to click them, and go to their page? If so, the links are quite nice. Links
&gt; are nice for being able to follow in a query as well. This is a good
&gt; example of using links to perform link walking:
&gt;
&gt; http://basho.com/blog/technical/2010/02/24/link-walking-by-example/
&gt;
&gt; Or, do you plan on doing reverse lookups by friends? For example, do you
&gt; want to say "find every who has Tony as a friend" and get a list of users?
&gt; Note: this is not asking who is a friend of Tony (you'd just lookup Tony
&gt; and get his list of friends). In this case 2i works nicely, as do other
&gt; query methods: search, a general MapReduce, etc. But links would be an
&gt; extremely poor choice.
&gt;
&gt; Does this help? This page might also be applicable to your question:
&gt;
&gt; http://wiki.basho.com/MapReduce-Search-2i-Comparison.html
&gt;
&gt; If you plan on just doing MapReduce queries without 2i, and don't care
&gt; about link walking, then just storing a typical JSON object and not using
&gt; either is perfectly fine as well.
&gt;
&gt; --
&gt; Jeffrey Massung
&gt; Software Engineer
&gt; j...@basho.com
&gt;
&gt; On Mar 29, 2012, at 8:29 AM, Buri Arslon wrote:
&gt;
&gt; Hi,
&gt;
&gt; While developing my pet project few questions came to my mind and I
&gt; decided to consult with you.
&gt;
&gt; Which of them are more effective for recording relationships: Link or
&gt; Secondary Indexes?
&gt;
&gt; 1. Friend relationships: like Facebook friends?
&gt; 2. Followed/follower relationships like in Twitter?
&gt; 3. Member/Club relationship like fanpage in Facebook?
&gt; 4. Like in Facebook?
&gt;
&gt; Thanks,
&gt; -- buriwoy

