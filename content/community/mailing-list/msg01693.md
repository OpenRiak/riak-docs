---
title: "Re: Installed Riak via ssh. Now can/should I test *remotely* from a	browser?"
description: ""
project: community
lastmod: 2010-12-01T19:34:08-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01693"
mailinglist_parent_id: "msg01692"
author_name: "Alexander Sicular"
project_section: "mailinglistitem"
sent_date: 2010-12-01T19:34:08-08:00
---


Testing aside, I would not bind a production riak to an external
interface. The recommended method is to access riak via an
intermediary like nginx.

-alexander

On 2010-12-01, Andrew Stone  wrote:
&gt; Hi Stefan,
&gt;
&gt; You need to configure Riak to listen on the right interface. You are trying
&gt; to hit it from 127.0.0.1 which is only available from the local machine.
&gt;
&gt; If you set web\\_ip to 0.0.0.0 in app.config for riak\\_core it will listen on
&gt; all interfaces. Then you can try to hit it with a curl remotely using
&gt; myhost.com from your browser.
&gt;
&gt; -Andrew
&gt;
&gt; On Wed, Dec 1, 2010 at 9:27 PM, Stefan Scott Alexander &lt;
&gt; stefanscottal...@gmail.com&gt; wrote:
&gt;
&gt;&gt; Hi -
&gt;&gt;
&gt;&gt; SUMMARY:
&gt;&gt; This may be a silly question but... after installing Riak via ssh, can I
&gt;&gt; (or should I) test \\*remotely\\* it from a browser?
&gt;&gt;
&gt;&gt; I'm very excited about being able to learn how to use MapReduce with Riak.
&gt;&gt;
&gt;&gt; I installed Riak on my remote VPS server (running Debian 5.0 Lenny) - via
&gt;&gt; Putty & SSH on my Windows laptop.
&gt;&gt;
&gt;&gt; So... if I PUT some data into Riak using curl, it seems to show up.
&gt;&gt;
&gt;&gt; But I can't see it in my browser if I go to my server, eg:
&gt;&gt;
&gt;&gt; http://myhost.com/riak/images/img001.jpg
&gt;&gt;
&gt;&gt; returns "Error 101" - webpage not available.
&gt;&gt;
&gt;&gt; Of course, since my 3 nodes are all at 127.0.0.1, then maybe I \\*shouldn't\\*
&gt;&gt; be able to access them remotely from a browser.
&gt;&gt;
&gt;&gt; (By the way, I did open up my firewall on ports 8091, 8092, and 8093 -
&gt;&gt; incoming and outgoing).
&gt;&gt;
&gt;&gt; Anyways... I was just wondering if anyone had any pointers.
&gt;&gt;
&gt;&gt; +++++
&gt;&gt;
&gt;&gt; DETAILS:
&gt;&gt;
&gt;&gt; (0) I followed the steps here:
&gt;&gt;
&gt;&gt; https://wiki.basho.com/display/RIAK/Building+a+Development+Environment
&gt;&gt;
&gt;&gt; and everything worked fine.
&gt;&gt;
&gt;&gt;
&gt;&gt; (1) I ran a test:
&gt;&gt;
&gt;&gt; curl -H "Accept: text/plain" http://127.0.0.1:8091/stats
&gt;&gt;
&gt;&gt; and got the output:
&gt;&gt;
&gt;&gt; curl -H "Accept: text/plain" http://127.0.0.1:8091/stats
&gt;&gt; {
&gt;&gt; "vnode\\_gets": 0,
&gt;&gt; "vnode\\_puts": 0,
&gt;&gt; "read\\_repairs": 0,
&gt;&gt; "vnode\\_gets\\_total": 2,
&gt;&gt; "vnode\\_puts\\_total": 1,
&gt;&gt; "node\\_gets": 0,
&gt;&gt; "node\\_gets\\_total": 2,
&gt;&gt; "node\\_get\\_fsm\\_time\\_mean": "undefined",
&gt;&gt; "node\\_get\\_fsm\\_time\\_median": "undefined",
&gt;&gt; "node\\_get\\_fsm\\_time\\_95": "undefined",
&gt;&gt; "node\\_get\\_fsm\\_time\\_99": "undefined",
&gt;&gt; "node\\_get\\_fsm\\_time\\_100": "undefined",
&gt;&gt; "node\\_puts": 0,
&gt;&gt; "node\\_puts\\_total": 1,
&gt;&gt; "node\\_put\\_fsm\\_time\\_mean": "undefined",
&gt;&gt; "node\\_put\\_fsm\\_time\\_median": "undefined",
&gt;&gt; "node\\_put\\_fsm\\_time\\_95": "undefined",
&gt;&gt; "node\\_put\\_fsm\\_time\\_99": "undefined",
&gt;&gt; "node\\_put\\_fsm\\_time\\_100": "undefined",
&gt;&gt; "read\\_repairs\\_total": 0,
&gt;&gt; "cpu\\_nprocs": 291,
&gt;&gt; "cpu\\_avg1": 0,
&gt;&gt; "cpu\\_avg5": 0,
&gt;&gt; "cpu\\_avg15": 0,
&gt;&gt; "mem\\_total": 537100288,
&gt;&gt; "mem\\_allocated": 520372224,
&gt;&gt; "nodename": "d...@127.0.0.1",
&gt;&gt; "connected\\_nodes": [
&gt;&gt; "d...@127.0.0.1",
&gt;&gt; "d...@127.0.0.1"
&gt;&gt; ],
&gt;&gt; "sys\\_driver\\_version": "1.5",
&gt;&gt; "sys\\_global\\_heaps\\_size": 0,
&gt;&gt; "sys\\_heap\\_type": "private",
&gt;&gt; "sys\\_logical\\_processors": 2,
&gt;&gt; "sys\\_otp\\_release": "R14B",
&gt;&gt; "sys\\_process\\_count": 155,
&gt;&gt; "sys\\_smp\\_support": true,
&gt;&gt; "sys\\_system\\_version": "Erlang R14B (erts-5.8.1) [source] [smp:2:2]
&gt;&gt; [rq:2] [async-threads:64] [kernel-poll:true]",
&gt;&gt; "sys\\_system\\_architecture": "i686-pc-linux-gnu",
&gt;&gt; "sys\\_threads\\_enabled": true,
&gt;&gt; "sys\\_thread\\_pool\\_size": 64,
&gt;&gt; "sys\\_wordsize": 4,
&gt;&gt; "ring\\_members": [
&gt;&gt; "d...@127.0.0.1",
&gt;&gt; "d...@127.0.0.1",
&gt;&gt; "d...@127.0.0.1"
&gt;&gt; ],
&gt;&gt; "ring\\_num\\_partitions": 64,
&gt;&gt; "ring\\_ownership": "[{'d...@127.0.0.1',21},{'d...@127.0.0.1',21},{'
&gt;&gt; d...@127.0.0.1',22}]",
&gt;&gt; "ring\\_creation\\_size": 64,
&gt;&gt; "storage\\_backend": "riak\\_kv\\_bitcask\\_backend",
&gt;&gt; "pbc\\_connects\\_total": 0,
&gt;&gt; "pbc\\_connects": 0,
&gt;&gt; "pbc\\_active": 0,
&gt;&gt; "riak\\_err\\_version": "0.1.0",
&gt;&gt; "runtime\\_tools\\_version": "1.8.4.1",
&gt;&gt; "luwak\\_version": "1.0",
&gt;&gt; "skerl\\_version": "0.1",
&gt;&gt; "riak\\_kv\\_version": "0.13.0",
&gt;&gt; "riak\\_core\\_version": "0.13.0",
&gt;&gt; "luke\\_version": "0.2.2",
&gt;&gt; "erlang\\_js\\_version": "0.4.1",
&gt;&gt; "bitcask\\_version": "1.1.4",
&gt;&gt; "mochiweb\\_version": "1.7.1",
&gt;&gt; "webmachine\\_version": "1.7.3",
&gt;&gt; "crypto\\_version": "2.0.1",
&gt;&gt; "os\\_mon\\_version": "2.2.5",
&gt;&gt; "sasl\\_version": "2.1.9.2",
&gt;&gt; "stdlib\\_version": "1.17.1",
&gt;&gt; "kernel\\_version": "2.14.1"
&gt;&gt;
&gt;&gt; So that looked good.
&gt;&gt;
&gt;&gt;
&gt;&gt; (2) To do a test involving an image, I copied an image (myimg.jpg) into my
&gt;&gt; current directory, and then PUT the image into Riak (at
&gt;&gt; riak/images/img001.jpg) using curl:
&gt;&gt;
&gt;&gt; curl -X PUT HTTP://127.0.0.1:8091/riak/images/img001.jpg -H "Content-type:
&gt;&gt; image/jpeg" --data-binary @myimg.jpg
&gt;&gt;
&gt;&gt; Now the image seems to be stored properly in Riak, because it seems that I
&gt;&gt; can GET it with curl:
&gt;&gt;
&gt;&gt; curl -v http://127.0.0.1:8091/riak/images/img001.jpg
&gt;&gt;
&gt;&gt; (This sends a bunch of garbled text to my Putty/SSH window. I assume this
&gt;&gt; means "success" because it's just the binary data of the jpg file.)
&gt;&gt;
&gt;&gt;
&gt;&gt; (3) I also PUT some text, and it seems to work:
&gt;&gt;
&gt;&gt; curl -v -d 'this is a test' -H "Content-Type: text/plain"
&gt;&gt; http://127.0.0.1:8091/riak/test
&gt;&gt;
&gt;&gt; \\* About to connect() to 127.0.0.1 port 8091 (#0)
&gt;&gt; \\* Trying 127.0.0.1... connected
&gt;&gt; \\* Connected to 127.0.0.1 (127.0.0.1) port 8091 (#0)
&gt;&gt; &gt; POST /riak/test HTTP/1.1
&gt;&gt; &gt; User-Agent: curl/7.18.2 (i486-pc-linux-gnu) libcurl/7.18.2
&gt;&gt; &gt; OpenSSL/0.9.8g
&gt;&gt; zlib/1.2.3.3 libidn/1.8 libssh2/0.18
&gt;&gt; &gt; Host: 127.0.0.1:8091
&gt;&gt; &gt; Accept: \\*/\\*
&gt;&gt; &gt; Content-Type: text/plain
&gt;&gt; &gt; Content-Length: 14
&gt;&gt; &gt;
&gt;&gt; &lt; HTTP/1.1 201 Created
&gt;&gt; &lt; Vary: Accept-Encoding
&gt;&gt; &lt; Server: MochiWeb/1.1 WebMachine/1.7.3 (participate in the frantic)
&gt;&gt; &lt; Location: /riak/test/QTPs0B1zeu9I1WXtJnaAJpQyOee
&gt;&gt; &lt; Date: Thu, 02 Dec 2010 02:12:27 GMT
&gt;&gt; &lt; Content-Type: application/json
&gt;&gt; &lt; Content-Length: 0
&gt;&gt; &lt;
&gt;&gt; \\* Connection #0 to host 127.0.0.1 left intact
&gt;&gt; \\* Closing connection #0
&gt;&gt;
&gt;&gt; Then I GET the test (using the location key generated above):
&gt;&gt;
&gt;&gt; curl -v http://127.0.0.1:8091/riak/test/QTPs0B1zeu9I1WXtJnaAJpQyOee
&gt;&gt;
&gt;&gt; \\* About to connect() to 127.0.0.1 port 8091 (#0)
&gt;&gt; \\* Trying 127.0.0.1... connected
&gt;&gt; \\* Connected to 127.0.0.1 (127.0.0.1) port 8091 (#0)
&gt;&gt; &gt; GET /riak/test/QTPs0B1zeu9I1WXtJnaAJpQyOee HTTP/1.1
&gt;&gt; &gt; User-Agent: curl/7.18.2 (i486-pc-linux-gnu) libcurl/7.18.2
&gt;&gt; &gt; OpenSSL/0.9.8g
&gt;&gt; zlib/1.2.3.3 libidn/1.8 libssh2/0.18
&gt;&gt; &gt; Host: 127.0.0.1:8091
&gt;&gt; &gt; Accept: \\*/\\*
&gt;&gt; &gt;
&gt;&gt; &lt; HTTP/1.1 200 OK
&gt;&gt; &lt; X-Riak-Vclock: a85hYGBgzGDKBVIsbGvXVWcwJTLmsTJ012Qf48sCAA==
&gt;&gt; &lt; Vary: Accept-Encoding
&gt;&gt; &lt; Server: MochiWeb/1.1 WebMachine/1.7.3 (participate in the frantic)
&gt;&gt; &lt; Link: ; rel="up"
&gt;&gt; &lt; Last-Modified: Thu, 02 Dec 2010 02:12:27 GMT
&gt;&gt; &lt; ETag: 35XAETNjfRGZJESsKwuMvB
&gt;&gt; &lt; Date: Thu, 02 Dec 2010 02:12:47 GMT
&gt;&gt; &lt; Content-Type: text/plain
&gt;&gt; &lt; Content-Length: 14
&gt;&gt; &lt;
&gt;&gt; \\* Connection #0 to host 127.0.0.1 left intact
&gt;&gt; \\* Closing connection #0
&gt;&gt; this is a test
&gt;&gt;
&gt;&gt;
&gt;&gt; OK, so that's the silly question I have: If I'm connecting to this server
&gt;&gt; remotely, is there any point in trying to see that data from a browser?
&gt;&gt;
&gt;&gt; If I do the following:
&gt;&gt;
&gt;&gt; http://myhost.com:8091/riak/images/img001.jpg
&gt;&gt; http://myhost.com:8091/riak/test/QTPs0B1zeu9I1WXtJnaAJpQyOee
&gt;&gt;
&gt;&gt; the browser just says "web page unavailable".
&gt;&gt;
&gt;&gt; +++++
&gt;&gt;
&gt;&gt; Anyways, everything probably \\*is\\* working fine - and I probably just
&gt;&gt; shouldn't be trying to test it from a remote browser - because normally I
&gt;&gt; wouldn't access "raw" Riak data directly from a browser, right? Eventually
&gt;&gt; I'll have some sort of web application framework set up (eg, Nitrogen),
&gt;&gt; and
&gt;&gt; in the source of a web page I'll be using a Riak URL as a datasource -
&gt;&gt; say,
&gt;&gt; to send out some JSON to populate a control on the web page, right?
&gt;&gt;
&gt;&gt; Sorry about this newbie question! Thanks for any pointers.
&gt;&gt;
&gt;&gt; - Scott
&gt;&gt;
&gt;

-- 
Sent from my mobile device

