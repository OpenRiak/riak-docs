---
title: "Re: Riak Recap for Dec. 13 - 14"
description: ""
project: community
lastmod: 2010-12-16T01:10:38-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01804"
mailinglist_parent_id: "msg01801"
author_name: "Daniel Woo"
project_section: "mailinglistitem"
sent_date: 2010-12-16T01:10:38-08:00
---


Hi guys,

If we have 64 partitions with 4 nodes, each of the nodes has 16 partitions
like this

Node1: p1 ~ p16
Node2: p17 ~ p32
Node3: p33 ~ p48
Node4: p49 ~ p64

Now if I add a new node Node 5, each node should handle 12.8 partitions, so
the partitions should look like this

Node1: p1 ~ p13
Node2: p14 ~ p26
Node3: p27 ~ p39
Node4: p40 ~ p52
Node5: p53 ~ p64

So, I guess Riak would have to re-hash the whole partitions into all the 5
nodes, right? Is this done lazily when the node finds the requested data is
missing?
Or is there a way to handle this with consistent re-hashing so we can avoid
moving data around when new nodes added?

Thanks,
Daniel
