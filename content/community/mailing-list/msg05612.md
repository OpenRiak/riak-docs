---
title: "Re: Secondary Indexes - Feedback?"
description: ""
project: community
lastmod: 2011-11-16T12:20:35-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05612"
mailinglist_parent_id: "msg05611"
author_name: "Alexander Sicular"
project_section: "mailinglistitem"
sent_date: 2011-11-16T12:20:35-08:00
---


Because of the way riak stores a key's value as basically one big blob in one 
place on disk, I don't think it is possible. This is akin to the often 
requested ability to update a keys meta data independent of its "value". But as 
far as riak storage is concerned there is no real difference between meta data 
and "value". Well either way, for the record, I like you idea, Paul, and second 
it. 

-Alexander Sicular

@siculars
http://siculars.posterous.com

On Nov 16, 2011, at 3:12 PM, Paul Gross wrote:

&gt; 
&gt;&gt; - What is your wish list for the future of Secondary Indexes?
&gt;&gt; 
&gt; One thing that I would like to see is the ability to add secondary indexes 
&gt; after the fact to existing objects. The use case I'm thinking of is:
&gt; 
&gt; 1. I have a bucket of users, where the key is generated and the value is a 
&gt; hash of email, first name, last name, company, etc.
&gt; 2. I add a secondary index on email so I can look up users by their email 
&gt; address.
&gt; 3. Two months down the line, I want to add a feature where I can look up 
&gt; users by their company.
&gt; 
&gt; Right now, I would have to read every document and update it with the new 
&gt; secondary index. It would be nice to have this feature built in, so I could 
&gt; just tell riak that I want create a secondary index on company. Riak would 
&gt; internally update all of the objects and add the index.
&gt; 
&gt; Alternatively, riak could be more generic and take a function that would run 
&gt; in riak and update the documents without having to return them all to the 
&gt; client.
&gt; 
&gt; Basically, before I deploy the next version of my code, I want to somehow add 
&gt; a secondary index to all existing objects.
&gt; 
&gt; I hope this makes sense. I can clarify if needed.
&gt; 
&gt; Thanks,
&gt; Paul

