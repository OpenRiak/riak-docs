---
title: "Re: How to enabled a riak-search KV bucket from the erlang library"
description: ""
project: community
lastmod: 2010-12-14T19:56:52-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01791"
mailinglist_parent_id: "msg01790"
author_name: "Alexander Sicular"
project_section: "mailinglistitem"
sent_date: 2010-12-14T19:56:52-08:00
---


The bucket specific settings like nval and hooks live in the ring 
state, afaik. So yes, you can set without having an actual key in that 
"bucket".


-Alexander


@siculars on twitter
http://siculars.posterous.com

Sent from my iPhone

On Dec 14, 2010, at 20:44, Bryan Nagle 
 wrote:

Hi,

Quick question on this: Does using the code you provided for 
enabling search also create the bucket if it does not exist? Does 
this matter? I understand the general idea is that you never need 
to specifically create buckets, but am wondering if setting the 
properties on a non-existant bucket will work. Basically we want to 
be sure that riak search is enabled for a bucket before we start 
putting any K,V's into it.


Bryan Nagle
Liquid Analytics
bryan.na...@liquidanalytics.com


On Tue, Dec 14, 2010 at 2:22 PM, Sean Cribbs  wrote:
Carson,

Unfortunately the PB interface, as you discovered, doesn't support 
all the bucket properties. You could, however, also use the riak- 
erlang-http-client which has full support for all bucket properties. 
We realize this is a pain point and will be working to improve the 
PB interface in the near future. To enable the precommit hook, do 
something like this with the HTTP client:


Client = rhc:create(), %% use create/4 if you're not connecting to 
localhost

rhc:set\\_bucket(Client, "my\\_bucket", [{&lt;&lt;"precommit"&gt;&gt;, [
 {struct, [{&lt;&lt;"mod"&gt;&gt;, &lt;&lt;"riak\\_search\\_kv\\_hook"&gt;&gt;}, {&lt;&lt;"fun"&gt;&gt;, 
&lt;&lt;"precommit"&gt;&gt;}]}

 ]}]).

Sean Cribbs 
Developer Advocate
Basho Technologies, Inc.
http://basho.com/

On Dec 14, 2010, at 12:39 PM, carson li wrote:


hey everyone,

i'm trying to figure out if it's possible to enable the precommit 
hook for a riak bucket using the erlang library. i know you can do 
it from a curl statement, or using the "search-cmd install". it 
also states on the pb-client that there's only suport for modifying 
2 bucket properties, which is n\\_val, and allow\\_multi.


i was just wondering if you guys know of, or have found any work 
arounds to turn on riak search for a KV bucket. (i'm trying to 
create a bucket and then turn on the indexing from my application)


Please let me know. Thanks in advance.

--
Carson Li
Liquid Analytics
carson...@liquidanalytics.com
647-273-1024

