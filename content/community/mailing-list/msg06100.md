---
title: "Re: Best practices for using the PB client"
description: ""
project: community
lastmod: 2011-12-30T11:38:16-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06100"
mailinglist_parent_id: "msg06099"
author_name: "Marc Campbell"
project_section: "mailinglistitem"
sent_date: 2011-12-30T11:38:16-08:00
---


Great, thanks for the feedback. I'll check out pooly, for sure. 

I was thinking about using HAProxy/Zeus (I'm currently using Riak Smartmachines 
@ Joyent). I really like this idea, the logic for node failures shouldn't be 
in my code. I'll give this a try!

Thanks,
Marc


On Dec 30, 2011, at 11:31 AM, Andrew Berman wrote:

&gt; You should look into using HAProxy in front of your nodes. Let HAProxy load 
&gt; balance between all your nodes and then if one goes down, HAProxy just pulls 
&gt; it out of the load balancing cluster automatically until it is restored. 
&gt; Then your pooler can just pool connections from HAProxy instead so it doesn't 
&gt; have to worry at all about failed nodes.
&gt; 
&gt; Also, shameless plug, I have a pooler as well which has a few more options 
&gt; than pooler. You can check it out here: https://github.com/aberman/pooly
&gt; 
&gt; --Andrew
&gt; 
&gt; On Fri, Dec 30, 2011 at 9:58 AM, Marc Campbell  wrote:
&gt; Hey all,
&gt; 
&gt; I'm looking for some best practices in handling connections when using the 
&gt; protocol buffer client. Specifically, I have 3 nodes in my cluster, and need 
&gt; to figure out how to handle the situation when one of the nodes is down.
&gt; 
&gt; I'm currently using a pooler app (https://github.com/seth/pooler) and this 
&gt; helps me distribute the load to all of the nodes, but when one goes down, the 
&gt; app doesn't recover nicely.
&gt; 
&gt; I'm about to write some code in my app to handle this, but before I do, I 
&gt; thought I'd check for existing solutions and best practices:
&gt; 
&gt; - Is there an existing connection pooling mechanism that someone has created 
&gt; which handles node failures automatically?
&gt; 
&gt; If not, then I'm looking forward to writing it!
&gt; 
&gt; Thank in advance,
&gt; Marc
&gt; 
 
&gt; 

