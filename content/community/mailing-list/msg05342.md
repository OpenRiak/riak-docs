---
title: "Fwd: multiple map functions query"
description: ""
project: community
lastmod: 2011-10-28T07:32:19-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05342"
mailinglist_parent_id: "msg05338"
author_name: "Lyes zaiko"
project_section: "mailinglistitem"
sent_date: 2011-10-28T07:32:19-07:00
---


So! I think that I have to be more explicit

I have run a test mapred query using two simple map functions, each one
returns the input object (in a list). but by runnin the query I get a
badmatch error

Map1 = fun(O,\\_,\\_) -&gt; [O] end.
Map2 = fun(O, \\_,\\_) -&gt; [O] end.


C:mapred\\_bucket(&lt;&lt;"b7bc1418-198d-44a3-8835-8aa9cb416d5b"&gt;&gt;, [{map, {qfun,
Map1}, none, false}, {map, {qfun, Map2}, none, true}]).

{{badmatch,{r\\_object,&lt;&lt;"b7bc1418-198d-44a3-8835-8aa9cb416d5b"&gt;&gt;,

&lt;&lt;255,230,193,167,254,7,246,64,154,190,36,236,32,232,189,
 169,161,124,23,86&gt;&gt;,
 [{r\\_content,{dict,2,16,16,8,80,48,

{[],[],[],[],[],[],[],[],[],[],[],...},
 {{[],[],[],[],[],[],[],[],[],...}}},

&lt;&lt;"12d33872-4c92-4da5-9d16-5036a8059253"&gt;&gt;}],
 [{&lt;&lt;5,215,86,61&gt;&gt;,{1,63487018636}}],
 {dict,1,16,16,8,80,48,
 {[],[],[],[],[],[],[],[],[],[],[],[],...},
 {{[],[],[],[],[],[],[],[],[],[],...}}},
 undefined}},
 [{riak\\_kv\\_map\\_phase,build\\_input,2},
 {riak\\_kv\\_map\\_phase,'-handle\\_input/3-lc$^0/1-0-',2},
 {riak\\_kv\\_map\\_phase,handle\\_input,3},
 {luke\\_phase,executing,2},
 {gen\\_fsm,handle\\_msg,7},
 {proc\\_lib,init\\_p\\_do\\_apply,3}]}

I'm using riak\\_search-0.14.2

Erlang R14B03 (erts-5.8.4)

On Fri, Oct 28, 2011 at 3:02 PM, Jeremiah Peschka &lt;
jeremiah.pesc...@gmail.com&gt; wrote:

&gt; A list.
&gt; ---
&gt; Jeremiah Peschka - Founder, Brent Ozar PLF, LLC
&gt; Microsoft SQL Server MVP
&gt;
&gt; On Oct 28, 2011, at 6:59 AM, Lyes zaiko wrote:
&gt;
&gt; &gt; Hi all!
&gt; &gt;
&gt; &gt; I want to execute a mapreduce query, in erlang, that contains two map
&gt; phases such that the Map2 function takes the result of the Map1 function as
&gt; input. Is it possible and if, what must be the return value of each map
&gt; phase
&gt; &gt;
&gt; &gt; Thank you!
&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

