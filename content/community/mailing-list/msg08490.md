---
title: "Re: REST API: Deleting key vs. marking as deleted."
description: ""
project: community
lastmod: 2012-09-11T04:35:46-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08490"
mailinglist_parent_id: "msg08489"
author_name: "Guido Medina"
project_section: "mailinglistitem"
sent_date: 2012-09-11T04:35:46-07:00
---

Hi,

 Just an idea, you could have a batch number incrementing once a 
minute (Integers won't run out of range for at least 20 years) and have 
your marking be an index name "delete\\_batch\\_number", and have a 
scheduled job to delete once a minute or something where it will just 
delete the keys with such index, you need of course a JSON object to 
store the status of your scheduled job (where you were left at on your 
last delete), it could fail safe if something goes wrong and in the 
worst scenario it will try to delete twice the same keys.


Regards,

Guido.

On 11/09/12 11:08, Vladimir Shapovalov wrote:

HI all,

Is deleting a key more expensive operation then just marking it as 
deleted?


I noticed that delete a bunch of keys is quite expensive. All CPUs are 
fully utilized.


I can imagine that I can mark the key first and delete them some time 
later, e.q. not in rush hours.
What is actually the best way from your point of view to delete a 
key/keys?


Thanks in advance!
Vladimir

