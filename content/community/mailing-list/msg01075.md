---
title: "Re: basho bench - custom value generator"
description: ""
project: community
lastmod: 2010-09-13T20:05:30-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01075"
mailinglist_parent_id: "msg01068"
author_name: "Joseph Lambert"
project_section: "mailinglistitem"
sent_date: 2010-09-13T20:05:30-07:00
---


I found that changing

erlang:apply(Module, Function, [Id] ++ Args);

to

Module:Function([Id] ++ Args);

in basho\\_bench\\_valgen, got rid of the error. I'm not sure the reason why.


- Joe Lambert

joseph.g.lamb...@gmail.com


On Mon, Sep 13, 2010 at 6:38 PM, Joseph Lambert
wrote:

&gt; Hi,
&gt;
&gt; I'm trying to create a custom value generator for Basho Bench, but keep
&gt; getting this error:
&gt;
&gt; escript: exception error: no match of right hand side value
&gt; {error,
&gt; {bad\\_return,
&gt; {{basho\\_bench\\_app,start,[normal,[]]},
&gt; {'EXIT',
&gt; {{badmatch,{error,shutdown}},
&gt; [{basho\\_bench\\_app,start,2},
&gt; {application\\_master,start\\_it\\_old,4}]}}}}}
&gt; in function basho\\_bench:main/1
&gt; in call from escript:run/2
&gt; in call from escript:start/1
&gt; in call from init:start\\_it/1
&gt; in call from init:start\\_em/1
&gt;
&gt; =INFO REPORT==== 13-Sep-2010::18:21:50 ===
&gt; application: basho\\_bench
&gt; exited: {bad\\_return,{{basho\\_bench\\_app,start,[normal,[]]},
&gt; {'EXIT',{{badmatch,{error,shutdown}},
&gt; [{basho\\_bench\\_app,start,2},
&gt; {application\\_master,start\\_it\\_old,4}]}}}}
&gt; type: permanent
&gt;
&gt; It seems to fail right when it calls erlang:apply() on the function, and
&gt; never seems to enter my custom function.
&gt;
&gt; I have this in the basho bench config file:
&gt;
&gt; {value\\_generator, {function, rpbc\\_thread\\_gen, new\\_thread, [{user\\_count,
&gt; 10000}] } }.
&gt;
&gt; Args is just passing in a tuple list, and my rpbc\\_thread\\_gen module looks
&gt; like this:
&gt;
&gt; new\\_thread(Args) -&gt;
&gt; fun() -&gt; do\\_new\\_thread(Args) end.
&gt;
&gt; do\\_new\\_thread simply returns binary, but like I said, it never seems to
&gt; enter the new\\_thread() function.
&gt;
&gt; I've also made sure to add my module to the modules list in the .app file
&gt; and all the example tests run fine.
&gt;
&gt; I'm not sure what I am missing here, hopefully someone can point me in the
&gt; right direction.
&gt;
&gt; Another question, is there anyway to pass the generated key to my custom
&gt; value generator, or do I also need to write a new driver as well?
&gt;
&gt; Thanks!
&gt;
&gt; - Joe Lambert
&gt;
&gt; joseph.g.lamb...@gmail.com
&gt;
