---
title: "Re: Questions about Riak Enterprise"
description: ""
project: community
lastmod: 2012-05-10T11:09:41-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07421"
mailinglist_parent_id: "msg07395"
author_name: "Ahmed Bashir"
project_section: "mailinglistitem"
sent_date: 2012-05-10T11:09:41-07:00
---


Hey Andrew,

Can you elaborate on how EDS replication does this mirroring? Does
each vnode have the ability to connect to the other cluster, or is
there a coordinator that sends data to the other cluster, etc?

Thanks,
Ahmed

On Mon, May 7, 2012 at 6:25 PM, Andrew Thompson  wrote:
&gt; On Tue, May 01, 2012 at 03:49:02PM -0400, Mark Rose wrote:
&gt;&gt; I've got some questions about Riak Enterprise I haven't been able to find
&gt;&gt; the answers to.
&gt;
&gt; Hi Mark, I'm the riak EDS 'maintainer'. Sorry I didn't reply earlier, I
&gt; was travelling all week.
&gt;
&gt;&gt; I understand that the open source version of Riak's replication is designed
&gt;&gt; for single data center usage only, but I'm unsure about how Riak Entreprise
&gt;&gt; handles replication. Specifically, I'm curious about locality and high
&gt;&gt; availability.
&gt;&gt;
&gt;&gt; Our setup is already running in multiple availability zones on EC2. We're
&gt;&gt; running Galera across the zones to provide both redundancy and a local copy
&gt;&gt; of the data to avoid the network latency of going to another zone. However,
&gt;&gt; Galera, as nice as it is, doesn't scale writes. We're going to be using
&gt;&gt; Riak to store a lot of information going forward, and may eventually move
&gt;&gt; our existing data to it as well.
&gt;&gt;
&gt;&gt; The only thing holding us back from going to multiple regions on Amazon is
&gt;&gt; our datastore.
&gt;&gt;
&gt;&gt; How well does Riak handle layered topologies, such as EC2?
&gt;&gt;
&gt;&gt; Is it possible to configure Riak Enterprise to store two copies of the data
&gt;&gt; in each EC2 region, ensuring that the two copies are in different zones
&gt;&gt; when there are more than one Riak servers in a zone?
&gt;
&gt; Current EDS replication is pretty simple, it will just try to
&gt; (eventually) ensure that data on one cluster is mirrored on another. It
&gt; won't forward reads and riak doesn't have anything like 'rack
&gt; awareness', at least not yet.
&gt;
&gt;&gt; When a query is run, is it run in one region only? Would Riak prefer copies
&gt;&gt; of the data in the local zone?
&gt;
&gt; Riak only queries the local cluster, yes.
&gt;&gt;
&gt;&gt; For what it's worth, our current datastore load is roughly half and half
&gt;&gt; writes and reads. We heavily cache reads with memcache (99%). We may drop
&gt;&gt; memcache if reads on Riak prove fast enough (thus avoiding the issues of
&gt;&gt; invalidating remote caches).
&gt;
&gt; Given the current limitations, you'd probably be best off with N
&gt; clusters in different regions and/or zones. Don't try to span a single
&gt; cluster across a zone, or even worse, a region. Then hook them together
&gt; with replication.
&gt;
&gt; There's also some fun with NAT on EC2, but it can be made to work.
&gt;
&gt; Let me know if that helps,
&gt;
&gt; Andrew
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

