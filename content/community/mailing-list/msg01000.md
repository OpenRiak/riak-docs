---
title: "Re: Failed to load spidermonkey_drv.so when starting Riak"
description: ""
project: community
lastmod: 2010-09-01T06:47:04-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01000"
mailinglist_parent_id: "msg00998"
author_name: "朱轩印"
project_section: "mailinglistitem"
sent_date: 2010-09-01T06:47:04-07:00
---


Thanks for reply.

I googled this error message:
\\*"cannot restore segment prot after reloc: Permission denied"\\*

Found this trick from here:
http://www.appistry.com/community/forums/content/cannot-restore-segment-prot-after-reloc-permission-denied

Where it said that CentOS 5 has the SE Linux feature set to "enforcing"

Riak is started successfully after running /usr/sbin/setenforce 0

Thanks again!

On Wed, Sep 1, 2010 at 4:48 PM, Dan Reverri  wrote:

&gt; You might consider installing a later release. The most recent version
&gt; available is 0.12:
&gt; https://downloads.basho.com/riak/
&gt;
&gt; Thanks,
&gt; Dan
&gt;
&gt; Daniel Reverri
&gt; Developer Advocate
&gt; Basho Technologies, Inc.
&gt; d...@basho.com
&gt;
&gt;
&gt; On Tue, Aug 31, 2010 at 9:16 AM, 朱轩印  wrote:
&gt;
&gt;&gt; Dear users,
&gt;&gt;
&gt;&gt; I'm trying to install Riak on my centos 5.5 (i386).
&gt;&gt;
&gt;&gt; I installed riak 0.10 in rpm, but can't start riak. When I ran ./riak
&gt;&gt; start, it happens to me that nothing printed out in the console, but a dump
&gt;&gt; file under the riak directory.
&gt;&gt; Then I reviewed the erlang.log.1 and found the following report:
&gt;&gt;
&gt;&gt; =====
&gt;&gt; ===== LOGGING STARTED Tue Aug 31 15:28:27 CST 2010
&gt;&gt; =====
&gt;&gt; Exec: /usr/lib/riak/erts-5.7.5/bin/erlexec -boot
&gt;&gt; /usr/lib/riak/releases/0.10.1/riak -embedded -config /etc/riak/app.config
&gt;&gt; -args\\_file /etc/riak/vm.args -- console
&gt;&gt; Root: /usr/lib/riak
&gt;&gt; Erlang R13B04 (erts-5.7.5) [source] [smp:1:1] [rq:1] [async-threads:5]
&gt;&gt; [hipe] [kernel-poll:true]
&gt;&gt;
&gt;&gt;
&gt;&gt; =ERROR REPORT==== 31-Aug-2010::15:28:28 ===
&gt;&gt; Error loading "erlang\\_js\\_drv": "cannot restore segment prot after reloc:
&gt;&gt; Permission denied"
&gt;&gt;
&gt;&gt; =INFO REPORT==== 31-Aug-2010::15:28:28 ===
&gt;&gt; application: erlang\\_js
&gt;&gt; exited: {{bad\\_return\\_value,
&gt;&gt; {error,{load\\_error,"\\*Failed to load spidermonkey\\_drv.so\\*
&gt;&gt; "}}},
&gt;&gt; {erlang\\_js,start,[normal,[]]}}
&gt;&gt; type: permanent
&gt;&gt; {"Kernel pid
&gt;&gt; terminated",application\\_controller,"{application\\_start\\_failure,erlang\\_js,{{bad\\_return\\_value,{error,{load\\_error,[70,97,105,108,101,100,32,116,111,32,108,111,97,100,32,115,112,105,100,101,114,109,111,110,107,101,121,95,100,114,118,46,115,111]}}},{erlang\\_js,start,[normal,[]]}}}"}
&gt;&gt; Kernel pid terminated (application\\_controller)
&gt;&gt; ({application\\_start\\_failure,erlang\\_js,{{bad\\_return\\_value,{error,{load\\_error,[70,97,105,108,101,100,32,116,111,32,108,111,97,100,32,115,112,105,100,101,
&gt;&gt;
&gt;&gt; Can anyone of you help me to figure out what the issue is? Thanks very
&gt;&gt; much!
&gt;&gt;
&gt;&gt; --
&gt;&gt;
&gt;


-- 
朱可
http://www.netvibes.com/shawnzhu
