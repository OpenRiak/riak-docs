---
title: "Re: Running the python client's test suite"
description: ""
project: community
lastmod: 2011-10-03T11:00:08-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg04999"
mailinglist_parent_id: "msg04998"
author_name: "Reid Draper"
project_section: "mailinglistitem"
sent_date: 2011-10-03T11:00:08-07:00
---


There have been some changes in Riak 1.0 with regard to how deletes work,
and the python client has not been updated appropriately yet. In the
meantime, you can add the option:
{delete\\_mode, immediate} to the riak\\_kv section of app.config of Riak. This
should allow all of the tests to pass. You can read more about the changes
in the release notes here
https://github.com/basho/riak/blob/master/RELEASE-NOTES.org under the Delete
Changes heading.

Hope this helps.

On Mon, Oct 3, 2011 at 1:41 PM, Honza Král  wrote:

&gt; On Mon, Oct 3, 2011 at 7:31 PM, Greg Stein  wrote:
&gt; &gt; Your search/luwak tests are failing, presumably because those options
&gt; &gt; are not enabled in your Riak installation. You can disable them in the
&gt; &gt; test suite by doing:
&gt; &gt;
&gt; &gt; $ SKIP\\_SEARCH=1 SKIP\\_LUWAK=1 python setup.py test
&gt;
&gt; Thanks, I tried this right after I sent the email. It helped some (17
&gt; skipped tests) but it's still failing
&gt;
&gt; &gt;
&gt; &gt; You also seem to be running into a problem with leftover keys in one
&gt; &gt; of the test buckets. That problem is fixed by pull request #67, which
&gt; &gt; has not been merged :-( ... if you grab that fix, then a couple of
&gt; &gt; your errors will go away.
&gt;
&gt; yep, some of them did, thanks. I updated the log at the same url,
&gt; after these two changes I still have
&gt;
&gt; FAILED (failures=6, errors=2, skipped=17)
&gt;
&gt; &gt; I see some additional failures based on extra siblings... I don't know
&gt; &gt; what is happening there.
&gt; &gt;
&gt; &gt; Cheers,
&gt; &gt; -g
&gt; &gt;
&gt; &gt; On Mon, Oct 3, 2011 at 13:22, Honza Král  wrote:
&gt; &gt;&gt; Hi everybody,
&gt; &gt;&gt;
&gt; &gt;&gt; I cannot get the test suite in the python client to run, I have tried
&gt; &gt;&gt; on Arch Linux on my notebook and then on an Ubunty Natty system on EC2
&gt; &gt;&gt; with riak 1.0.0:
&gt; &gt;&gt;
&gt; &gt;&gt; wget http://downloads.basho.com/riak/riak-1.0.0/riak\\_1.0.0-1\\_amd64.deb
&gt; &gt;&gt; sudo dpkg -i riak\\_1.0.0-1\\_amd64.deb
&gt; &gt;&gt; sudo /etc/init.d/riak start
&gt; &gt;&gt;
&gt; &gt;&gt; sudo apt-get install python-protobuf
&gt; &gt;&gt; git clone git://github.com/basho/riak-python-client.git
&gt; &gt;&gt;
&gt; &gt;&gt; virtualenv riak
&gt; &gt;&gt; . riak/bin/activate
&gt; &gt;&gt; cd riak-python-client
&gt; &gt;&gt; python setup.py install
&gt; &gt;&gt; python setup.py test
&gt; &gt;&gt;
&gt; &gt;&gt; and I get:
&gt; &gt;&gt; FAILED (failures=6, errors=19)
&gt; &gt;&gt;
&gt; &gt;&gt; The full test output can be found at:
&gt; &gt;&gt; http://www.honzakral.com/riak\\_python\\_test.out
&gt; &gt;&gt;
&gt; &gt;&gt; If anybody can point out what I did wrong or how to make the tests
&gt; &gt;&gt; work I would be most grateful.
&gt; &gt;&gt;
&gt; &gt;&gt; Thanks!
&gt; &gt;&gt;
&gt; &gt;&gt; Honza Král
&gt; &gt;&gt; E-Mail: honza.k...@gmail.com
&gt; &gt;&gt;
&gt; &gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt;&gt; riak-users mailing list
&gt; &gt;&gt; riak-users@lists.basho.com
&gt; &gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; &gt;&gt;
&gt; &gt;
&gt;

