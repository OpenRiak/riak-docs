---
title: "Re: Extracting data during link walking using PBC"
description: ""
project: community
lastmod: 2011-05-01T16:30:10-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03174"
mailinglist_parent_id: "msg03153"
author_name: "OJ Reeves"
project_section: "mailinglistitem"
sent_date: 2011-05-01T16:30:10-07:00
---


Hi Russell,

Thanks for the response. Pardon my tardiness in responding, I've had lots of
fun at home with sick kids of late.

Responses inline.

On 28 April 2011 16:46, Russell Brown  wrote:

&gt; Hi OJ!
&gt;
&gt; I'm just working through this myself at the moment as I'm trying to make
&gt; the Java PB client behave the same way as the REST client .
&gt;
&gt; On 28 Apr 2011, at 04:23, OJ Reeves wrote:
&gt;
&gt; So my question: Is this how link walking should work when using the PBC? Or
&gt; is there some way of getting the PBC to return the content at the same time
&gt; as doing the link walking?
&gt;
&gt;
&gt; I asked yesterday and the answer I received was: no.
&gt;

Cool, so I'm not barking mad then! Excellent :) Did you get any feedback as
to whether or not there would be future work done to enable this?


&gt;
&gt;
&gt; In practice, what I have it a relationship between three entities (\\*a\\*, \\*b
&gt; \\* and \\*c\\*) that live in different buckets (\\*A\\*, \\*B\\* and \\*C\\*). \\*a\\* has a
&gt; link to \\*b\\*, and \\*b\\* has a link to \\*c\\*. What I want to do is walk from \\*a\\*to
&gt; \\*c\\* while taking the following information:
&gt;
&gt; - The value stored in \\*a\\*.
&gt; - The key of \\*b\\* and, if \\*b\\* still exists in \\*B\\*, the value stored in \\*
&gt; b\\*, otherwise nothing/false/failure.
&gt; - The key of \\*c\\* and an indication of whether \\*c\\* currently exists in \\*
&gt; C\\*.
&gt;
&gt; Currently I link walk and do each step manually and I was wondering if
&gt; there was a better or more optimal way of performing these actions.
&gt;
&gt;
&gt; At the moment the plan is running an initial m/r job for the link phases
&gt; then making a second m/r job with all the intermediate results as inputs. So
&gt; maximum 2 jobs is my target.
&gt;
&gt; I should think this is a common problem so if you come up with an optimal
&gt; solution you'll make a few friends!
&gt;

Off the top of my head with the current implementation I can't see how you
would do this any better. In fact, for link walks where the levels &gt; 2 this
is really the only option (IMHO). For 2 levels or less you can easily fetch
based on ID and you end up with the data faster with the same number of
calls.

I will think about it a bit more and see what I can come up with (as soon as
this sickness clears!).


&gt;
&gt; How do you satisfy your requirement with the REST link walker? Specifically
&gt; how do you get the value of \\*a\\* returned as part of the result?
&gt;

With the REST link walker I'm not able to do this, so I have to make another
call to get to this info. It'd be nice if the link walking mechanism also
had a flag that said "please give me the link source value too". I realise
that might be pie in the sky though :)

Cheers mate, thanks for the response.
OJ
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

