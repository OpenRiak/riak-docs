---
title: "Re: Cluster setup"
description: ""
project: community
lastmod: 2012-12-10T12:00:41-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg09511"
mailinglist_parent_id: "msg09510"
author_name: "Sean Carey"
project_section: "mailinglistitem"
sent_date: 2012-12-10T12:00:41-08:00
---


Kevin, 
Send us more detailed logs of the startup error. Also a copy 
/etc/riak/app.config on the machine where the error is happening, and also the 
output of `netstat -tln`

-Sean 


On Monday, December 10, 2012 at 2:56 PM, Kevin Burton wrote:

&gt; Each node is on a separate machine. This not a development build. The 
&gt; instructions just indicate that I should start the Riak Server but does not 
&gt; indicate what should be done when it doesn't start.
&gt; 
&gt; On Dec 10, 2012, at 1:52 PM, Jared Morrow  (mailto:ja...@basho.com)&gt; wrote:
&gt; 
&gt; &gt; Are you trying to start all nodes on the same machine/vm? Each riak "node" 
&gt; &gt; needs to be on its own machine, unless you are simply trying to test out a 
&gt; &gt; development environment. In that case, you need to look at 
&gt; &gt; http://docs.basho.com/riak/latest/tutorials/fast-track/Building-a-Development-Environment/
&gt; &gt; for those instructions. It will help in starting multiple nodes per 
&gt; &gt; machine.
&gt; &gt; 
&gt; &gt; -Jared
&gt; &gt; 
&gt; &gt; 
&gt; &gt; On Mon, Dec 10, 2012 at 12:43 PM, Kevin Burton  &gt; (mailto:rkevinbur...@charter.net)&gt; wrote:
&gt; &gt; &gt; The first node started up without error (/etc/init.d/riak start). But 
&gt; &gt; &gt; nodes 2 and 3 failed to start. I looked in /var/log/riak/error.log and 
&gt; &gt; &gt; found about three lines with {error,eaddrnotavail} in the error message. 
&gt; &gt; &gt; What does this mean? Is there a work around? I don't understand why this 
&gt; &gt; &gt; address is "not available". 'ifconfig' confirms that this is the machines 
&gt; &gt; &gt; address.
&gt; &gt; &gt; 
&gt; &gt; &gt; 
&gt; &gt; &gt; On Dec 10, 2012, at 12:33 PM, Jared Morrow  &gt; &gt; (mailto:ja...@basho.com)&gt; wrote:
&gt; &gt; &gt; 
&gt; &gt; &gt; &gt; The init.d script for RIak is included in the RPM. If you list the 
&gt; &gt; &gt; &gt; file contained in the RPM do you see the init.d/riak script? If you do 
&gt; &gt; &gt; &gt; have that file, you'll need to add the rc.d scripts by hand to 
&gt; &gt; &gt; &gt; auto-start / auto-stop on startup / shutdown or use a tool like 
&gt; &gt; &gt; &gt; `chkconfig` http://linux.die.net/man/8/chkconfig
&gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; -Jared
&gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; On Mon, Dec 10, 2012 at 11:17 AM, Kevin Burton 
&gt; &gt; &gt; &gt;  wrote:
&gt; &gt; &gt; &gt; &gt; I did these steps and while I see that Riak has been added to the 
&gt; &gt; &gt; &gt; &gt; system files (like /etc/riak). I don't see any links to auto start 
&gt; &gt; &gt; &gt; &gt; like in init.d. Do I add these links manually?
&gt; &gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; &gt; On Dec 10, 2012, at 11:32 AM, Jared Morrow  &gt; &gt; &gt; &gt; (mailto:ja...@basho.com)&gt; wrote:
&gt; &gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; &gt; &gt; If you are looking install and /etc/init.d support, you should 
&gt; &gt; &gt; &gt; &gt; &gt; really just be installing the packages. 
&gt; &gt; &gt; &gt; &gt; &gt; http://s3.amazonaws.com/downloads.basho.com/riak/CURRENT/rhel/6/riak-1.2.1-1.el6.x86\\_64.rpm
&gt; &gt; &gt; &gt; &gt; &gt; is the package for Centos 6 found here 
&gt; &gt; &gt; &gt; &gt; &gt; http://basho.com/resources/downloads/. Building from source is 
&gt; &gt; &gt; &gt; &gt; &gt; there for those who need a feature not currently in a release, want 
&gt; &gt; &gt; &gt; &gt; &gt; to make additions to Riak, or are on an unsupported platform.
&gt; &gt; &gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; &gt; &gt; -Jared
&gt; &gt; &gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; &gt; &gt; On Mon, Dec 10, 2012 at 10:25 AM,  &gt; &gt; &gt; &gt; &gt; (mailto:rkevinbur...@charter.net)&gt; wrote:
&gt; &gt; &gt; &gt; &gt; &gt; &gt; I am looking at 
&gt; &gt; &gt; &gt; &gt; &gt; &gt; http://docs.basho.com/riak/latest/cookbooks/Basic-Cluster-Setup/ 
&gt; &gt; &gt; &gt; &gt; &gt; &gt; which provides me with a lot of information. But I have one 
&gt; &gt; &gt; &gt; &gt; &gt; &gt; question. I have a source distribution and I have already done 
&gt; &gt; &gt; &gt; &gt; &gt; &gt; 'make rel'. Once I have performed all of the steps outlined in 
&gt; &gt; &gt; &gt; &gt; &gt; &gt; setting up a cluster how do I make sure that this configuration 
&gt; &gt; &gt; &gt; &gt; &gt; &gt; is restored when the machine reboots. I am assuming that it will 
&gt; &gt; &gt; &gt; &gt; &gt; &gt; involve something with /etc/init.d. Is there something like 'make 
&gt; &gt; &gt; &gt; &gt; &gt; &gt; install' that would shorten the process? How is the cluster 
&gt; &gt; &gt; &gt; &gt; &gt; &gt; information persisted so that each node will join the cluster 
&gt; &gt; &gt; &gt; &gt; &gt; &gt; when the respective machine comes up after a reboot? Thank you.
&gt; &gt; &gt; &gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; &gt; &gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt; &gt; &gt; &gt; &gt; &gt; riak-users mailing list
&gt; &gt; &gt; &gt; &gt; &gt; &gt; riak-users@lists.basho.com (mailto:riak-users@lists.basho.com)
&gt; &gt; &gt; &gt; &gt; &gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; &gt; &gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; 
&gt; &gt; 
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com (mailto:riak-users@lists.basho.com)
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; 
&gt; 
