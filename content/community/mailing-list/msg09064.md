---
title: "Re: Deleting items from search index increases disk usage"
description: ""
project: community
lastmod: 2012-10-26T05:40:47-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg09064"
mailinglist_parent_id: "msg09063"
author_name: "Vladimir Shapovalov"
project_section: "mailinglistitem"
sent_date: 2012-10-26T05:40:47-07:00
---


Hi Jeremy,

As far I'm concerned, delete operation doesn't delete the data physically,
just mark it as deleted. I've encountered that problem a while ago and was
also surprised about that fact that the data grows instead of reduce.

Cheers
Vladimir

On Fri, Oct 26, 2012 at 2:26 PM, Jeremy Raymond  wrote:

&gt; Hello,
&gt;
&gt; I had Riak search enabled on a bucket containing millions of items. I
&gt; no longer need these items to be searchable so I uninstalled search on
&gt; the bucket via search-cmd. I'm looking to free the space consumed by
&gt; the search index for this bucket. Following a previous post [1] on
&gt; this list I'm deleting the items from the search index by running
&gt; search:delete\\_docs/1. After getting through about 1 million items I'm
&gt; seeing a noticeable increase in disk usage across the 3 node cluster,
&gt; an increase of about 7GB per node.
&gt;
&gt; Any ideas on why my disk usage would be increasing rather than
&gt; decreasing? The data in the cluster is static, the only activity is me
&gt; deleting the items from the search index.
&gt;
&gt; I'm running riak 1.1.2 with leveldb as the backend.
&gt;
&gt; [1]:
&gt; http://lists.basho.com/pipermail/riak-users\\_lists.basho.com/2011-September/005696.html
&gt;
&gt; --
&gt; Jeremy
&gt;

