---
title: "Re: tools for debugging clients?"
description: ""
project: community
lastmod: 2011-01-18T02:01:42-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02019"
mailinglist_parent_id: "msg02018"
author_name: "Nico Meyer"
project_section: "mailinglistitem"
sent_date: 2011-01-18T02:01:42-08:00
---


Hi Gary,

this is a known bug in the python client. See
https://issues.basho.com/show\\_bug.cgi?id=695

The fix is fairly simple and also mentioned in the bug report.

Cheers,
Nico

Am Montag, den 17.01.2011, 21:18 -0800 schrieb Gary William Flake:
&gt; I am using the python client api and in some of my runs python was crashing. 
&gt; My gut reaction was that it was probably some untested corner case (I am 
&gt; doing millions of insertions) or that the python client was buggy and that I 
&gt; would eventually just switch over to another client need be.
&gt; 
&gt; But I am now wondering if the fault is actually in the riak instance and not 
&gt; the client. Here's why: the error is now occurring with much higher 
&gt; frequency (after thousands of insertions instead of millions), but the really 
&gt; suspicious thing is that independent of the data, the error is reporting a 
&gt; short read of exactly the same size.
&gt; 
&gt; For example, here is the error from the crash.
&gt; 
&gt; Traceback (most recent call last):
&gt; File "wikipedia.py", line 730, in 
&gt; main()
&gt; File "wikipedia.py", line 715, in main
&gt; item.add\\_link(bucket.get(link), 'link') 
&gt; File "build/bdist.macosx-10.6-universal/egg/riak/bucket.py", line 245, in 
&gt; get
&gt; File "build/bdist.macosx-10.6-universal/egg/riak/riak\\_object.py", line 290, 
&gt; in reload
&gt; File "build/bdist.macosx-10.6-universal/egg/riak/transports/pbc.py", line 
&gt; 157, in get
&gt; File "build/bdist.macosx-10.6-universal/egg/riak/transports/pbc.py", line 
&gt; 349, in recv\\_msg
&gt; File "build/bdist.macosx-10.6-universal/egg/riak/transports/pbc.py", line 
&gt; 399, in recv\\_pkt
&gt; riak.RiakError: 'Socket returned short read 7928 - expected 8192'
&gt; 
&gt; I am guessing the 8192 is just an 8K buffer, but the short read of 7928 -- 
&gt; that's the number that keeps popping up. Different data, short read, 
&gt; expected 8192, but got 7928 bytes.
&gt; 
&gt; While typing all of the above, it happened again... this time after 1124 
&gt; writes. And my python code gets restarted each time, so the odds of its 
&gt; internal structures causing the problems seems low.
&gt; 
&gt; Thoughts?
&gt; 
&gt; -- GWF
&gt; 
&gt; 
&gt; 
&gt; 

