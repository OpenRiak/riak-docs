---
title: "Re: Compile error"
description: ""
project: community
lastmod: 2012-06-06T06:51:42-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07621"
mailinglist_parent_id: "msg07620"
author_name: "Jared Morrow"
project_section: "mailinglistitem"
sent_date: 2012-06-06T06:51:42-07:00
---


Theo,

In 1.1.2 we unfortunately had a bug where the source for leveldb was not 
fetched properly when making the source distribution. This has been fixed and 
will not cause problems in the next release. To fix your issue, you will need 
to get the original source of leveldb from github. To make things easier, the 
file in question that fetches the source should be changed to fetch the source 
via http.

Unpack the riak source as you already did then:

$ cd deps/eleveldb

And then make the following changes to 'c\\_src/build\\_deps.sh':

--- c\\_src/build\\_deps.sh.orig 2012-04-27 22:06:31.000000000 -0600
+++ c\\_src/build\\_deps.sh 2012-04-27 22:07:49.000000000 -0600
@@ -37,7 +37,7 @@
 export LD\\_LIBRARY\\_PATH="$BASEDIR/system/lib:$LD\\_LIBRARY\\_PATH"
 
 if [ ! -d leveldb ]; then
- git clone git://github.com/basho/leveldb
+ git clone http://github.com/basho/leveldb
 (cd leveldb && git checkout $LEVELDB\\_VSN)
 fi
 
Then return to the top-level source directory for Riak and run 'make' and the 
leveldb source will be fetched over http.
If you need a truly offline source distribution that doesn't do any source 
fetching, you can do the steps in `c\\_src/build\\_deps.sh` by hand and tar up the 
entire riak directory again to distribute.

Sorry for the bad behavior of the build on that release.

-Jared


On Jun 6, 2012, at 3:58 AM, Theo Bot wrote:

&gt; Hi
&gt; 
&gt; I'm try-ing to compile riak from source on a 32-bit centos 6.2 system without 
&gt; direct internet access. All required tools are installed, however, somewehere 
&gt; I get the following message:
&gt; make[2]: Leaving directory 
&gt; `/home/theob/basho/riak-1.1.2/deps/eleveldb/c\\_src/snappy-1.0.4'
&gt; make[1]: Leaving directory 
&gt; `/home/theob/basho/riak-1.1.2/deps/eleveldb/c\\_src/snappy-1.0.4'
&gt; github.com[0: 207.97.227.239]: errno=Connection refused
&gt; fatal: unable to connect a socket (Connection refused)
&gt; Initialized empty Git repository in 
&gt; /home/theob/basho/riak-1.1.2/deps/eleveldb/c\\_src/leveldb/.git/
&gt; ERROR: Command [compile] failed!
&gt; make: \\*\\*\\* [compile] Error 1
&gt; 
&gt; Somehow it's try-ing to get something from github. Can this be disabled or 
&gt; someting?
&gt; 
&gt; -- 
&gt; Regards
&gt; 
&gt; Theo Bot
&gt; LinkedIn: http://www.linkedin.com/in/theobot
&gt; 
&gt; 

