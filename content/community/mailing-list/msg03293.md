---
title: "Re: Javascript errors in reduce phases seen as {error,	javascript_reduce_timeout}?"
description: ""
project: community
lastmod: 2011-05-10T06:26:02-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03293"
mailinglist_parent_id: "msg03292"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2011-05-10T06:26:02-07:00
---


For large numbers of objects, your JavaScript functions will become 
bottlenecks, largely because the data has to be converted to and from JSON for 
every application of the function. If your reduce function isn't actually 
coalescing a value (e.g. sort doesn't), then you will run into this problem. 
See if you can reimplement the functions in Erlang or decrease the quantity of 
values being passed to and returned from the reduce functions.

Sean Cribbs 
Developer Advocate
Basho Technologies, Inc.
http://basho.com/

On May 10, 2011, at 9:20 AM, Jeremy Raymond wrote:

&gt; Hello,
&gt; 
&gt; In a MapReduce job I have filtering through about 6500 items if I filter out 
&gt; enough items my m/r job completes successfully. If I loosen the filtering 
&gt; such that a large number of items would be included in the results the m/r 
&gt; fails with error {error,javascript\\_reduce\\_timeout}. This error occurs after 
&gt; about 10 seconds of processing. Would Javascript errors such as the 
&gt; Javascript process running out of memory and crashing result in this timeout 
&gt; error? I also noticed that after this error is returned, the riak node I made 
&gt; the request on chugs along at ~100% CPU for about another minute but the 
&gt; other two nodes quite down almost immediately after the error is returned. 
&gt; How might I go about debugging this?
&gt; 
&gt; - Jeremy
&gt; 
&gt; --------------------------------------------------------------------- 
&gt; This transmission (including any attachments) may contain confidential 
&gt; information, privileged material (including material protected by the 
&gt; solicitor-client or other applicable privileges), or constitute non-public 
&gt; information. Any use of this information by anyone other than the intended 
&gt; recipient is prohibited. If you have received this transmission in error, 
&gt; please immediately reply to the sender and delete this information from your 
&gt; system. Use, dissemination, distribution, or reproduction of this 
&gt; transmission by unintended recipients is not authorized and may be 
&gt; unlawful.\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

