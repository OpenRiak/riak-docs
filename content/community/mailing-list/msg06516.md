---
title: "Re: Operations: Commodity hardware OK, or does Riak need ECC memory?"
description: ""
project: community
lastmod: 2012-02-03T00:36:17-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06516"
mailinglist_parent_id: "msg06510"
author_name: "Runar Jordahl"
project_section: "mailinglistitem"
sent_date: 2012-02-03T00:36:17-08:00
---


As far as I know, Riak does not provide any checksum on your data. I
hope I am wrong.

Riak does a SHA1 of the bucket – key value (
http://lists.basho.com/pipermail/riak-users\\_lists.basho.com/2011-January/002820.html
), but this is not done for data integrity checking, only to get hash
values to spread objects among the nodes.

You can do checksums yourself (MD5, SHA) on your data, but how do you
handle an error? Can you get data from the other replicas? Do you want
to complicate client code with this?

Wouldn’t it be best if Riak had checksums built-in, and would consider
only data with correct checksums? Of course this can get complicated,
as not only object reads can get corrupt: Other data, like indexes,
can get corrupted too. Also, for small objects check-sums would take a
lot of additional space.

Google mentions the problem with data integrity in various papers:
http://www.odbms.org/download/dean-keynote-ladis2009.pdf
http://www.morganclaypool.com/doi/pdf/10.2200/S00193ED1V01Y200905CAC006

Runar
blog.epigent.com

