---
title: "Re: C++ Riak client?"
description: ""
project: community
lastmod: 2011-04-09T09:41:14-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02956"
mailinglist_parent_id: "msg02955"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2011-04-09T09:41:14-07:00
---


Yes, that's correct (LTV). The wiki page should explain this fairly well.

Sean Cribbs 
Developer Advocate
Basho Technologies, Inc.
http://basho.com/

On Apr 9, 2011, at 12:35 PM, Mike Oxford wrote:

&gt; So you have Google protocol buffers wrapped in a TLV-type (LTV?) format.
&gt; 
&gt; Good to know, thanks for the clarification!
&gt; 
&gt; For anyone writing a basic client: 
&gt; http://code.google.com/apis/protocolbuffers/docs/cpptutorial.html
&gt; Substitute with iostreams fed from the network and there you go.
&gt; 
&gt; -mox
&gt; 
&gt; 
&gt; 
&gt; On Sat, Apr 9, 2011 at 8:47 AM, Sean Cribbs  wrote:
&gt; I didn't permanently abandon it, but it was much more fiddly than doing the 
&gt; same thing in pure Ruby. I have plans to deliver separate "native" Protocol 
&gt; Buffers libraries for MRI and JRuby (at least) in 1.0 of the Ruby client.
&gt; 
&gt; Because it's being confused in this conversation, I think it merits 
&gt; clarification -- the "protocol" that is used to talk to Riak and Google's 
&gt; Protocol Buffers are NOT the same thing. Riak uses a simple length- and 
&gt; message-code-prefixed binary protocol, in which the complex messages (ones 
&gt; that have bodies and not just the message code) are serialized via Google's 
&gt; Protocol Buffers. So, while we don't use the RPC facilities in Google's 
&gt; library, the \\*serialization format\\* DOES use Protocol Buffers.
&gt; 
&gt; Sorry for the confusion, we'll work to make that clearer in the wiki.
&gt; 
&gt; Sean Cribbs 
&gt; Developer Advocate
&gt; Basho Technologies, Inc.
&gt; http://basho.com/
&gt; 
&gt; On Apr 8, 2011, at 9:17 PM, Scott Gonyea wrote:
&gt; 
&gt;&gt; They are the same and you can actually see me plugging into the C++ code 
&gt;&gt; here:
&gt;&gt; 
&gt;&gt; https://github.com/sgonyea/pabst/tree/master/ext
&gt;&gt; 
&gt;&gt; But as part of an Objective-C library (called ObjFW). So, the code is 
&gt;&gt; actually an Objective-C++ wrapper around the C++ PB code, that exchanges 
&gt;&gt; messages with Objective-C code (that hooks into Ruby).
&gt;&gt; 
&gt;&gt; I believe Sean Cribbs has some initial C++-wrapper code in his Ripple 
&gt;&gt; repo... Though he eventually abandoned it after C++ left him permanently 
&gt;&gt; cross-eyed (I think that's why).
&gt;&gt; 
&gt;&gt; Scott
&gt;&gt; 
&gt;&gt; On Apr 8, 2011, at 5:20 PM, Mike Oxford wrote:
&gt;&gt; 
&gt;&gt;&gt; Be careful here..
&gt;&gt;&gt; 
&gt;&gt;&gt; I do not thing Riak's "protocol buffers" are the same as Google's protocol 
&gt;&gt;&gt; buffers.
&gt;&gt;&gt; Google's does bit-level packing and some other tricks that Riak does not 
&gt;&gt;&gt; do, even though they both use the ".proto" file extension and very very 
&gt;&gt;&gt; similar proto semantics.
&gt;&gt;&gt; 
&gt;&gt;&gt; That said, if they ARE the same, then you can take the .proto files and 
&gt;&gt;&gt; generate C++ classes, and use the secondary library "protobuf-c" to 
&gt;&gt;&gt; generate C structs for the wire format.
&gt;&gt;&gt; 
&gt;&gt;&gt; -mox
&gt;&gt;&gt; 
&gt;&gt;&gt; On Fri, Apr 8, 2011 at 4:43 PM, David Leimbach  wrote:
&gt;&gt;&gt; Spent a little time poking at this today... Kind of surprised that there 
&gt;&gt;&gt; was no message defined for PingReq or for listing buckets.
&gt;&gt;&gt; 
&gt;&gt;&gt; I realize these messages really have no usable payload, and just sort of 
&gt;&gt;&gt; have a tag and length, but for completeness it kind of feels like they 
&gt;&gt;&gt; should be there.
&gt;&gt;&gt; 
&gt;&gt;&gt; Of course I'm not a Protocol Buffers expert in any sense, so I can't say 
&gt;&gt;&gt; whether this is a normal kind of choice or not.
&gt;&gt;&gt; 
&gt;&gt;&gt; Dave
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; On Fri, Apr 8, 2011 at 2:49 PM, Scott Gonyea  wrote:
&gt;&gt;&gt; If we had this then a C-wrapper would be that much more attainable. So, the 
&gt;&gt;&gt; author of such a lib would be a superstar in my book :).
&gt;&gt;&gt; 
&gt;&gt;&gt; Sent from my iPhone
&gt;&gt;&gt; 
&gt;&gt;&gt; On Apr 8, 2011, at 1:46 PM, David Leimbach  wrote:
&gt;&gt;&gt; 
&gt;&gt;&gt; &gt; I've been writing a bit of code in Haskell to push data to Riak, and the 
&gt;&gt;&gt; &gt; bindings are pretty easy to use (Thanks Brian!), but getting penetration 
&gt;&gt;&gt; &gt; at my company for Haskell is going to take a little time.
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; As such I'm just wondering if anyone knows of anyone working on a 
&gt;&gt;&gt; &gt; protocol buffers version of a Riak client in C++, or if this is going to 
&gt;&gt;&gt; &gt; be something I'll have to take on.
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; I've found a few generic looking C++ projects that use Boost's 
&gt;&gt;&gt; &gt; asynchronous IO stuff with protocol buffers to make an RPC system, but 
&gt;&gt;&gt; &gt; I'm not sure if any of those are implicitly compatible.
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; Guess I'm just looking for a pointer...
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; Dave
&gt;&gt;&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt;&gt; &gt; riak-users mailing list
&gt;&gt;&gt; &gt; riak-users@lists.basho.com
&gt;&gt;&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt; 
&gt; 
&gt; 

