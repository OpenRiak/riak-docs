---
title: "Re: mapreduce"
description: ""
project: community
lastmod: 2010-11-09T11:40:38-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01514"
mailinglist_parent_id: "msg01511"
author_name: "Andrea Campolonghi"
project_section: "mailinglistitem"
sent_date: 2010-11-09T11:40:38-08:00
---


Thanks Kevin.

I am testing in this way and I submit this:

{

 "inputs": "bucket",

 "query": [

 {

 "map": {

 "language": "javascript",

 "source": "function(value, keyData, arg){var data =
Riak.mapValuesJson(value)[0];if(data.expires == 0){return [value.key];}}",

"keep":true

 }

 }

 ]

}


As result I get a generic error like :


{"lineno":483,"message":"JSON.parse","source":"unknown"}


I am having hard time to find a way to debug this.


Any suggestion?


Thanks


Andrea


2010/11/9 Kevin Smith 

&gt; That is the JSON format for a MapReduce job. You need to POST it to the
&gt; mapred end point like so:
&gt;
&gt; curl -XPOST -H"content-type=application/json" -d -
&gt; http://localhost:8098/mapred
&gt;
&gt; --Kevin
&gt; On Nov 9, 2010, at 5:54 AM, Andrea Campolonghi wrote:
&gt;
&gt; &gt; I am testing the riak mapreduce syntax.
&gt; &gt;
&gt; &gt; I am using the default bucket and I am sure I have something inside in
&gt; json format.
&gt; &gt;
&gt; &gt; curl -v GET http://localhost:8098/riak/bucket/susi
&gt; &gt;
&gt; &gt; get me back :
&gt; &gt;
&gt; &gt;
&gt; {"idleTime":0,"expires":0,"timeIdle":0,"created":1289247328234,"hits":0,"lastModified":1289247328234,"exprires":1289247328234,"value":"'Susanne'","lifeSpan":0}
&gt; &gt;
&gt; &gt; Now When I try to run this from the riak console I do not get any
&gt; result:
&gt; &gt;
&gt; &gt;
&gt; {"input":"bucket","query":[{"map":{"language":"javascript","source":"function(v)
&gt; { return [v]; }","keep":true}}]};
&gt; &gt;
&gt; &gt; Any suggestion?
&gt; &gt;
&gt; &gt; Thanks
&gt; &gt;
&gt; &gt; --
&gt; &gt; Andrea Campolonghi
&gt; &gt;
&gt; &gt; Cell : +39 347 2298435
&gt; &gt; and...@andreacfm.com
&gt; &gt; http://www.andreacfm.com
&gt; &gt;
&gt; &gt; Railo Team
&gt; &gt; and...@getrailo.org
&gt; &gt; http://getrailo.org
&gt; &gt;
&gt; &gt;
&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;


-- 
Andrea Campolonghi

Cell : +39 347 2298435
and...@andreacfm.com
http://www.andreacfm.com

Railo Team
and...@getrailo.org
http://getrailo.org
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

