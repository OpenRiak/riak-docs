---
title: "Re: Solr Sorting Bug in Riak Search?"
description: ""
project: community
lastmod: 2011-04-01T07:07:03-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02831"
mailinglist_parent_id: "msg02823"
author_name: "Rusty Klophaus"
project_section: "mailinglistitem"
sent_date: 2011-04-01T07:07:03-07:00
---


Hi Eric,

Yes, you are correct. This is a known bug, tracked here:
https://issues.basho.com/show\\_bug.cgi?id=867

Best,
Rusty

On Fri, Apr 1, 2011 at 8:44 AM, Eric Moritz wrote:

&gt; Hi, I was just digging through the riak search code and I think there
&gt; may be a bug, but I may be mistaken (my Erlang isn't that great).
&gt;
&gt; It appears that the search is performed, sorted by score, sliced using
&gt; the start and rows values. After that happens, if there is a sort
&gt; param, the results are then sorted by
&gt; the sort param.
&gt;
&gt; If this is correct, then there appears to be a bug that will provide
&gt; unexpected sorting. For instance. Let's say we have the results:
&gt;
&gt; a, 0
&gt; d, 1
&gt; c, 2
&gt; b, 3
&gt; e, 4
&gt;
&gt; where index 0 is the value and index 1 is the score. Here the result
&gt; is sorted by the score. If we limit the result to 3 items we have:
&gt;
&gt; a, 0
&gt; d, 1
&gt; c, 1
&gt;
&gt; Then we sort by the value:
&gt;
&gt; a, c, d
&gt;
&gt; I would expect that sorting by the value would return the following list:
&gt;
&gt; a, b, c
&gt;
&gt; because that is the order of the entire search result not the limited
&gt; set. By limiting the query set before the sort is performed, it is
&gt; possible to not receive values that should be in the list.
&gt;
&gt; Is this correct?
&gt;
&gt; Eric.
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

