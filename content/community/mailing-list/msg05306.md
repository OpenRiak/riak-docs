---
title: "Re: Riak Search Solr API rows and sort interaction"
description: ""
project: community
lastmod: 2011-10-25T09:35:38-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05306"
mailinglist_parent_id: "msg05304"
author_name: "Elias Levy"
project_section: "mailinglistitem"
sent_date: 2011-10-25T09:35:38-07:00
---


Rusty,

Thanks for the reply. Glad to hear its documented. BTW, I am attempting to
sort on an inline field, so that partial solution would at least be useful
to me. But for the time being we'll go with a MR job.

Cheers,

On Tue, Oct 25, 2011 at 9:24 AM, Rusty Klophaus  wrote:

&gt; Hi Elias,
&gt;
&gt; Yes, you've encountered a known bug, tracked here:
&gt; https://issues.basho.com/show\\_bug.cgi?id=867
&gt;
&gt; MapReduce is one way to solve this issue. Another approach, depending on
&gt; how frequently the query changes, would be to read and cache the result set
&gt; somewhere, and then paginate from there.
&gt;
&gt; Best,
&gt; Rusty
&gt;
&gt; On Mon, Oct 24, 2011 at 8:44 PM, Elias Levy 
&gt; wrote:
&gt;
&gt;&gt; In what order are the sort and rows options of search via the Solr API
&gt;&gt; applied?
&gt;&gt;
&gt;&gt; It would appear that rows is applied first, with the cluster waiting just
&gt;&gt; long enough to receive enough answers to to fulfill the rows requirement,
&gt;&gt; and only then sorting the result set. Alas, if that is the case, then the
&gt;&gt; sort and rows parameters are useless for pagination.
&gt;&gt;
&gt;&gt; I got a query that matching around 420 objects with indexed timestamps.
&gt;&gt; I'd like to return the latest 10 objects. Thus, I use sort="ts desc" and
&gt;&gt; rows="10", but the result set I get, while sorted, does not represent the
&gt;&gt; latest objects. The only way I can get the latest objects is to make rows
&gt;&gt; as large the the number of results, use sort="ts desc" to get Riak to do the
&gt;&gt; sort, then perform the slice at the client. This will become wasteful and
&gt;&gt; slow with queries that match many more objects.
&gt;&gt;
&gt;&gt; Is this expected behavior?
&gt;&gt;
&gt;&gt; Looks like I'll have to resort to MR jobs to get the behavior I want.
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; riak-users mailing list
&gt;&gt; riak-users@lists.basho.com
&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;
&gt;&gt;
&gt;
&gt;
&gt; --
&gt; Rusty Klophaus
&gt;
&gt; \\*Basho Technologies, Inc.\\*
&gt; 11921 Freedom Drive, Suite 550
&gt; Reston, VA 20190
&gt; www.basho.com
&gt;
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

