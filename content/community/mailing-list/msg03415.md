---
title: "Re: Clarification on key filters"
description: ""
project: community
lastmod: 2011-05-26T02:43:12-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03415"
mailinglist_parent_id: "msg03412"
author_name: "Mathias Meyer"
project_section: "mailinglistitem"
sent_date: 2011-05-26T02:43:12-07:00
---


Jeremiah,

I sure hope you have not been drinking mouthwas.

The wiki is indeed showing single key filters, and that's confusing. In 
hindsight, it confused me too when I worked with key filters from the wiki page 
for the first time. I'll make sure we put some proper examples on that page to 
clarify how they should end up looking when multiple are put together. 

The bottom line is that Ripple does produce proper key filter code with 
conditions and that you are absolutely correct in bringing up this slight 
confusion.

Mathias Meyer
Developer Advocate, Basho Technologies

On Donnerstag, 26. Mai 2011 at 03:34, Jeremiah Peschka wrote:

&gt; An MR job has 0 or more key filters. Adding a few transforms generates a 
&gt; lovely list of lists:
&gt; { "inputs":{ "bucket":"invoices" "key\\_filters":[["tokenize", "-", 1], 
&gt; ["to\\_lower"], ["matches", "solutions"]] }, // ... }
&gt; That makes sense: we've got a list of key filters. And a key filter is, in 
&gt; effect, a list of arguments.
&gt; 
&gt; The complex predicates are throwing me off. Looking at the spec from Ripple 
&gt; in filter\\_builder\\_spec.rb [1] and it's showing that 
&gt; 
&gt; subject.OR do
&gt; starts\\_with "foo"
&gt; ends\\_with "bar"
&gt; end
&gt; 
&gt; 
&gt; becomes
&gt; 
&gt; [[:or, [[:starts\\_with, "foo"],[:ends\\_with, "bar"]]]]
&gt; 
&gt; Which is not at all the same as what the wiki says an OR should look like: 
&gt; 
&gt; ["or", [["eq", "google"]], [["less\\_than", "g"]]]
&gt; 
&gt; Apart from the obvious difference in syntax, have I been drinking mouthwash 
&gt; or did the wiki suddenly switch from showing a complete key filter condition 
&gt; to showing an individual key filter command for AND, OR, and NOT? 
&gt; 
&gt; Jeremiah
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com (mailto:riak-users@lists.basho.com)
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com



\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

