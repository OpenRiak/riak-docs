---
title: "Re: QUERY: riaksearch"
description: ""
project: community
lastmod: 2011-04-14T11:07:48-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03044"
mailinglist_parent_id: "msg02991"
author_name: "khyqo"
project_section: "mailinglistitem"
sent_date: 2011-04-14T11:07:48-07:00
---


thank you so much for the help.. i do really appreciate it.. now i could move 
on to my testing...

--- On Wed, 4/13/11, Mathias Meyer  wrote:

&gt; From: Mathias Meyer 
&gt; Subject: Re: QUERY: riaksearch
&gt; To: "khyqo" 
&gt; Cc: riak-users@lists.basho.com
&gt; Date: Wednesday, April 13, 2011, 6:15 PM
&gt; Hi,
&gt; 
&gt; Riak Search somewhat denormalizes nested structures in a
&gt; JSON-ish structure, which the PHP client creates from the
&gt; associative array, unless you specify a different content
&gt; type. The dot notation below actually dereferences a Riak
&gt; Search index called contact1, not the nested property
&gt; contact1.
&gt; 
&gt; You can query the separate fields by using an underscore
&gt; instead, so you would run this instead:
&gt; 
&gt; $client-&gt;search("bucket","contact\\_phone1:9999999")-&gt;run()
&gt; 
&gt; Mathias Meyer
&gt; Developer Advocate, Basho Technologies
&gt; 
&gt; On Mittwoch, 13. April 2011 at 10:23, khyqo wrote: 
&gt; &gt; good day everyone.. i am new to riak.. while i am
&gt; doing some testing, i 
&gt; &gt; encountered a problem when retrieving data using
&gt; riaksearch.. i am not 
&gt; &gt; sure if im doing it the right way.. i am using php
&gt; (from 
&gt; &gt; https://github.com/basho/riak-php-client)
&gt; to test..
&gt; &gt; 
&gt; &gt; sample data:
&gt; &gt; 
&gt; &gt; array(
&gt; &gt;  "fname"=&gt;"test",
&gt; &gt;  "lname"=&gt;"yadda",
&gt; &gt;  "contact"=&gt;array(
&gt; &gt;  "phone1"=&gt;"9999999",
&gt; &gt;  "phone2"=&gt;"8888888"
&gt; &gt;  )
&gt; &gt; )
&gt; &gt; 
&gt; &gt; 
&gt; &gt; i was able to retrieve data using
&gt; &gt; 
&gt; &gt; $client-&gt;search("bucket","fname:test")-&gt;run()
&gt; &gt; $client-&gt;search("bucket","lname:yadda")-&gt;run()
&gt; &gt; 
&gt; &gt; but the problem is that i cant get phone1 and/or
&gt; phone2 values.. i tried
&gt; &gt; 
&gt; &gt;
&gt; $client-&gt;search("bucket","contact.phone1:9999999")-&gt;run()
&gt; &gt;
&gt; $client-&gt;search("bucket","contact-&gt;phone1:9999999")-&gt;run()
&gt; &gt; 
&gt; &gt; but to no avail.. suggestions/recommendations would be
&gt; highly appreciated..
&gt; &gt; 
&gt; &gt; thank you in advance..
&gt; &gt; 
&gt; &gt; 
&gt; 
&gt; 

