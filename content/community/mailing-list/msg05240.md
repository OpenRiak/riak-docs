---
title: "riak-erlang-client unit tests fail with most recent tag"
description: ""
project: community
lastmod: 2011-10-21T16:41:09-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05240"
author_name: "Anthony Molinaro"
project_section: "mailinglistitem"
sent_date: 2011-10-21T16:41:09-07:00
---


Hi,

 So I was getting ready to start updating riak from 0.14.2 to 1.0.1 and
thought I should probably update my client as well (although from what I
can tell this is not a requirement to upgrade). Unfortunately the most
recent tag of riak-erlang-client (1.2.0) fails its unit tests

==&gt; basho (eunit)
Compiled src/riakc\\_obj.erl
Compiled src/riakc\\_pb.erl
Compiled src/riakc\\_pb\\_socket.erl

=ERROR REPORT==== 21-Oct-2011::16:33:23 ===
\\*\\* Generic server &lt;0.410.0&gt; terminating 
\\*\\* Last message in was {tcp\\_closed,#Port&lt;0.7488&gt;}
\\*\\* When Server state == {state,"127.0.0.1",51982,false,false,undefined,
 undefined,
 {[],[]},
 1,[],infinity,100}
\\*\\* Reason for termination == 
\\*\\* disconnected
riakc\\_pb:330: pb\\_test\\_ (content encode decode)...\\*failed\\*
::error:function\\_clause
 in function riakclient\\_pb:encode\\_rpbcontent/1
 called as encode\\_rpbcontent({rpbcontent,&lt;&lt;"test 
value"&gt;&gt;,"ctype","charset","encoding","vtag",
 [{rpblink,&lt;&lt;"b1"&gt;&gt;,&lt;&lt;"k1"&gt;&gt;,&lt;&lt;"v1"&gt;&gt;},
 {rpblink,&lt;&lt;"b2"&gt;&gt;,&lt;&lt;"k2"&gt;&gt;,&lt;&lt;"v2"&gt;&gt;}],
 1000002,3,
 [{rpbpair,"X-Riak-Meta-MyMetaData1",[...]},{rpbpair,[...],...}],
 undefined})
 in call from riakc\\_pb:'-pb\\_test\\_/0-fun-2-'/0


riakc\\_pb:355: pb\\_test\\_ (empty content encode decode)...\\*failed\\*
::error:function\\_clause
 in function riakclient\\_pb:encode\\_rpbcontent/1
 called as encode\\_rpbcontent({rpbcontent,&lt;&lt;"test 
value"&gt;&gt;,undefined,undefined,undefined,undefined,
 undefined,undefined,undefined,undefined,undefined})
 in call from riakc\\_pb:'-pb\\_test\\_/0-fun-4-'/0


=======================================================
 Failed: 2. Skipped: 0. Passed: 24.
Cover analysis: 
/home/molinaro/projects/opensource/riak-erlang-client/basho/.eunit/index.html
ERROR: One or more eunit tests failed.

Is there currently a recommended version of the client?

Thanks,

-Anthony

-- 
------------------------------------------------------------------------
Anthony Molinaro 

