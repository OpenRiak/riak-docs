---
title: "Re: riaksearch: using index docs in place of real objects"
description: ""
project: community
lastmod: 2011-05-26T12:59:41-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03442"
mailinglist_parent_id: "msg03441"
author_name: "Mathias Meyer"
project_section: "mailinglistitem"
sent_date: 2011-05-26T12:59:41-07:00
---


That is correct, Greg. It's either determined by the key used to store the 
object in Riak KV (given the precommit hook is used), or by a key specified 
when indexing directly into Riak Search, using e.g. the Solr or the Erlang API. 
There'll always be a key required, and that'll be used to look up the 
serialized document in Riak KV.

Mathias Meyer
Developer Advocate, Basho Technologies


On Donnerstag, 26. Mai 2011 at 21:56, Greg Pascale wrote:

&gt; Eric, I believe the key is the document id, which will be the same as the key 
&gt; of the corresponding object in .
&gt; 
&gt; -Greg
&gt; 
&gt; On Thu, May 26, 2011 at 12:41 PM, Eric Moritz  (mailto:e...@themoritzfamily.com)&gt; wrote:
&gt; &gt; Out of curiosity what is the key in this URL?
&gt; &gt; http://riak.host:8098/riak/\\_rsid\\_/key
&gt; &gt; 
&gt; &gt; On Thu, May 26, 2011 at 9:42 AM, Mathias Meyer  &gt; (mailto:math...@basho.com)&gt; wrote:
&gt; &gt; &gt; Greg,
&gt; &gt; &gt; 
&gt; &gt; &gt; Riak Search stores indexed documents in Riak KV too, as serialized Erlang 
&gt; &gt; &gt; terms. You can easily verify that by requesting a document from 
&gt; &gt; &gt; http://riak.host:8098/riak/\\_rsid\\_/key.
&gt; &gt; &gt; 
&gt; &gt; &gt; So whenever you query something through the Solr interface the documents 
&gt; &gt; &gt; you get back are fetched from these buckets, and therefore the same 
&gt; &gt; &gt; distribution and consistency properties apply to them as to objects 
&gt; &gt; &gt; stored directly in Riak KV. Bottom line is there's nothing wrong with 
&gt; &gt; &gt; just using them instead of fetching them again from Riak KV.
&gt; &gt; &gt; 
&gt; &gt; &gt; Mathias Meyer
&gt; &gt; &gt; Developer Advocate, Basho Technologies
&gt; &gt; &gt; 
&gt; &gt; &gt; 
&gt; &gt; &gt; On Mittwoch, 25. Mai 2011 at 00:34, Greg Pascale wrote:
&gt; &gt; &gt; 
&gt; &gt; &gt; &gt; Hi,
&gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; In our data model, our riak objects are flat JSON objects, and thus 
&gt; &gt; &gt; &gt; their corresponding index documents are nearly identical - the only 
&gt; &gt; &gt; &gt; difference is that a few fields which are ints in the riak objects are 
&gt; &gt; &gt; &gt; strings in the index doc.
&gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; Since they are so similar, we are directly using the index docs 
&gt; &gt; &gt; &gt; returned from our search call, skipping the second step of doing gets 
&gt; &gt; &gt; &gt; on the returned keys to retrieve the real objects.
&gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; Is this advisable? Are there any circumstances under which we might run 
&gt; &gt; &gt; &gt; into consistency issues?
&gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; Thanks,
&gt; &gt; &gt; &gt; -Greg
&gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt; &gt; &gt; riak-users mailing list
&gt; &gt; &gt; &gt; riak-users@lists.basho.com (mailto:riak-users@lists.basho.com) 
&gt; &gt; &gt; &gt; (mailto:riak-users@lists.basho.com)
&gt; &gt; &gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; &gt; &gt; 
&gt; &gt; &gt; 
&gt; &gt; &gt; 
&gt; &gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt; &gt; riak-users mailing list
&gt; &gt; &gt; riak-users@lists.basho.com (mailto:riak-users@lists.basho.com)
&gt; &gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; &gt; 
&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com (mailto:riak-users@lists.basho.com)
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com



\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

