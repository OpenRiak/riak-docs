---
title: "Link walking and keep field"
description: ""
project: community
lastmod: 2011-10-17T11:21:24-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05180"
author_name: "Anton Podviaznikov"
project_section: "mailinglistitem"
sent_date: 2011-10-17T11:21:24-07:00
---


Hi,

I had question about Link walking.
I need to walk links in few levels and keep results from previous steps.
I managed to achieve this using URL syntax
/users/userid/projects,\\*,1/parts,\\*,1/units,\\*,\\*
Here I find all user's projects than parts and finally units.

However I couldn't achieve the same results using map-reduce and link
phases.

curl -X POST -H "content-type: application/json"
http://localhost:8098/mapred --data @-&lt;&lt;\\EOF
{"inputs":[["users","userid"]],"query":[{"link":{"bucket":"projects","keep":true}},{"link":{"bucket":"parts","keep":true}},{"link":{"bucket":"units"}},{"map":{"language":"javascript","source":"function(v)
{ return [v]; }"}}]}
EOF


I got full documents from last step but for projects and parts I got only
bucket, key and tag (there was no document body and metadata).

Is it some problem in map function? Any hints, advises?

Best regards,
Anton Podviaznikov
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

