---
title: "Re: Cluster start problem"
description: ""
project: community
lastmod: 2012-09-11T05:19:59-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08492"
mailinglist_parent_id: "msg08488"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2012-09-11T05:19:59-07:00
---


Hi Wolf,

eaddrnotavail in that error means that it can't bind to the network
interface you specified. Verify that your HTTP and PB interfaces are
bound to real IPs assigned to the machine and that the ports are not
in the privileged range (1-1024).

On Tue, Sep 11, 2012 at 4:08 AM, Wolf Iem  wrote:
&gt; Hi all,
&gt;
&gt; We have 4 nodes Riak installation. They are running on Ubuntu 12.04 LTS
&gt; Precise installed servers.
&gt; We have installed 1.1.4 at August 1st 2012 and upgraded 1.2.0 when its
&gt; available.
&gt;
&gt;
&gt; Server names are:
&gt;
&gt; f1 - 10.10.0.12 - This is the first installed server. We have joined other
&gt; ones to this server. This also serves Riak control.
&gt; s2 - 10.10.0.22 -
&gt; s3 - 10.10.0.23 -
&gt; s4 - 10.10.0.24 - This server also serves Riak control.
&gt;
&gt; This morning we've seen "insufficient nodes available" error at our
&gt; applications log and restarted all nodes. 3 of them became available except
&gt; "f1"
&gt;
&gt; UPDATE : while I prepare this message live 3 nodes became unavailable and
&gt; need restart Riak.
&gt;
&gt; wolfiem@f01:~$ sudo /etc/init.d/riak start
&gt; Riak failed to start within 15 seconds,
&gt; see the output of 'riak console' for more information.
&gt; If you want to wait longer, set the environment variable
&gt; WAIT\\_FOR\\_ERLANG to the number of seconds to wait.
&gt;
&gt; I've tried to set WAIT\\_FOR\\_ERLANG value to 60 seconds but I can't.
&gt;
&gt; adding this line in vm.args didn't work:
&gt; -env WAIT\\_FOR\\_ERLANG 60
&gt;
&gt; I also tried to set this from terminal but it didn't work either.
&gt; wofliem@f01:~$ export WAIT\\_FOR\\_ERLANG=60
&gt;
&gt; It still says "Riak failed to start within 15 seconds"
&gt;
&gt; This is the console.log output:
&gt;
&gt; 2012-09-11 10:58:02.532 [info] &lt;0.7.0&gt; Application lager started on node
&gt; 'riak@10.10.0.12'
&gt; 2012-09-11 10:58:02.560 [warning]
&gt; &lt;0.148.0&gt;@riak\\_core\\_ring\\_manager:reload\\_ring:231 No ring file available.
&gt; 2012-09-11 10:58:02.585 [error] &lt;0.164.0&gt; CRASH REPORT Process &lt;0.164.0&gt;
&gt; with 0 neighbours exited with reason: eaddrnotavail in gen\\_server:init\\_it/6
&gt; line 320
&gt;
&gt; This is the error.log output
&gt; 2012-09-11 10:58:02.585 [error] &lt;0.164.0&gt; CRASH REPORT Process &lt;0.164.0&gt;
&gt; with 0 neighbours exited with reason: eaddrnotavail in gen\\_server:init\\_it/6
&gt; line 320
&gt;
&gt; This is the crash.log output:
&gt; 2012-09-11 10:58:02 =CRASH REPORT====
&gt; crasher:
&gt; initial call: mochiweb\\_socket\\_server:init/1
&gt; pid: &lt;0.164.0&gt;
&gt; registered\\_name: []
&gt; exception exit:
&gt; {eaddrnotavail,[{gen\\_server,init\\_it,6,[{file,"gen\\_server.erl"},{line,320}]},{proc\\_lib,init\\_p\\_do\\_apply,3,[{file,"proc\\_lib.erl"},{line,227}]}]}
&gt; ancestors: [riak\\_core\\_sup,&lt;0.135.0&gt;]
&gt; messages: []
&gt; links: [&lt;0.136.0&gt;]
&gt; dictionary: []
&gt; trap\\_exit: true
&gt; status: running
&gt; heap\\_size: 377
&gt; stack\\_size: 24
&gt; reductions: 403
&gt; neighbours:
&gt;
&gt;
&gt; You can find the riak console output below:
&gt;
&gt; wolfiem@f01:~$ riak console
&gt; Attempting to restart script through sudo -H -u riak
&gt; Exec: /usr/lib/riak/erts-5.9.1/bin/erlexec -boot
&gt; /usr/lib/riak/releases/1.2.0/riak -embedded -config
&gt; /etc/riak/app.config -pa /usr/lib/riak/basho-patches
&gt; -args\\_file /etc/riak/vm.args -- console
&gt; Root: /usr/lib/riak
&gt; Erlang R15B01 (erts-5.9.1) [source] [64-bit] [smp:8:8] [async-threads:64]
&gt; [kernel-poll:true]
&gt;
&gt;
&gt; =INFO REPORT==== 11-Sep-2012::10:44:18 ===
&gt; alarm\\_handler: {set,{system\\_memory\\_high\\_watermark,[]}}
&gt; \\*\\* /usr/lib/riak/lib/observer-1.1/ebin/etop\\_txt.beam hides
&gt; /usr/lib/riak/lib/basho-patches/etop\\_txt.beam
&gt; \\*\\* Found 1 name clashes in code paths
&gt; 10:44:19.099 [info] Application lager started on node 'riak@10.10.0.12'
&gt; 10:44:19.130 [warning] No ring file available.
&gt; 10:44:19.158 [error] CRASH REPORT Process &lt;0.164.0&gt; with 0 neighbours exited
&gt; with reason: eaddrnotavail in gen\\_server:init\\_it/6 line 320
&gt; /usr/lib/riak/lib/os\\_mon-2.2.9/priv/bin/memsup: Erlang has closed.
&gt;
&gt; =INFO REPORT==== 11-Sep-2012::10:44:19 ===
&gt; alarm\\_handler: {clear,system\\_memory\\_high\\_watermark}
&gt; Erlang has closed
&gt; {"Kernel pid
&gt; terminated",application\\_controller,"{application\\_start\\_failure,riak\\_core,{shutdown,{riak\\_core\\_app,start,[normal,[]]}}}"}
&gt;
&gt; Crash dump was written to: /var/log/riak/erl\\_crash.dump
&gt; Kernel pid terminated (application\\_controller)
&gt; ({application\\_start\\_failure,riak\\_core,{shutdown,{riak\\_core\\_app,start,[normal,[]]}}})
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;



-- 
Sean Cribbs 
Software Engineer
Basho Technologies, Inc.
http://basho.com/

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

