---
title: "Re: Listing keys again"
description: ""
project: community
lastmod: 2012-10-12T01:58:51-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08892"
mailinglist_parent_id: "msg08882"
author_name: "Olav Frengstad"
project_section: "mailinglistitem"
sent_date: 2012-10-12T01:58:51-07:00
---


Listing keys is - in my experience - fast when you only have 100K
keys, try inserting 10 million and see if you get the same results.
I don't know how the Java client handles listing keys but I always
found doing a range query on the $key index to be faster than listing
keys.

Cheers,
Olav

2012/10/11, Daniel Iwan :
&gt; I hope someone could shed some light on this issue
&gt;
&gt; Part of our dev code is using Java RiakClient like this
&gt;
&gt; KeySource fetched = getRiakClient().listKeys(bucket);
&gt; while (fetched.hasNext()) {
&gt; result.add(fetched.next().toStringUtf8());
&gt; }
&gt;
&gt; where getRiakClient() returns instance of com.basho.riak.pbc.RiakClient
&gt;
&gt; Aside of not using IRiakClient this lists keys in all keyspace and
&gt; filters them to get those falling into the bucket.
&gt; We are using Riak 1.2 and Riak client 1.0.5 and LevelDB
&gt;
&gt; Now, I'm trying to see how this listing (which is done only when
&gt; machine boots) behaves when there is lots of keys in Riak
&gt; I load some keys into it - 100k per node (3 servers) and I'm rebooting
&gt; nodes to see what's the loading time.
&gt; Surprisingly it's always under 50ms per bucket (I have dozen of those)
&gt;
&gt; Is there some automatic 2i creation to speed up listing keys or
&gt; something? Some improvements in 1.2?
&gt; Or is Riak is that quick and I should expect to fall apart on listing
&gt; keys once I reach certain number of keys in Riak?
&gt; Or is there other explanation for this?
&gt;
&gt; It is quite a surprise especially that as far as I know Riak client
&gt; still have some features missing (native support of 2i?)
&gt;
&gt; Regards
&gt; Daniel
&gt;

-- 
Med Vennlig Hilsen
Olav Frengstad

Systemutvikler // FWT
+47 920 42 090

