---
title: "Re: riak erlang doubt"
description: ""
project: community
lastmod: 2012-04-20T12:09:38-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07267"
mailinglist_parent_id: "msg07262"
author_name: "Wes James"
project_section: "mailinglistitem"
sent_date: 2012-04-20T12:09:38-07:00
---


Probably you want

#!/usr/local/bin/escript

or

#!/usr/bin/env escript

at the top.

Wes

On Tue, Apr 17, 2012 at 2:15 AM, wrote:

&gt; Dear Team,\\*\\*\\*\\*
&gt;
&gt; \\*\\* \\*\\*
&gt;
&gt; Please do me the needful In resolving the same ..\\*\\*\\*\\*
&gt;
&gt; \\*\\* \\*\\*
&gt;
&gt; I have installed erlang and riak cluster seprrately its working
&gt; fine....ran some sample program on erlang it was running fine ...now i am
&gt; trying to run erlang script to load teh data onto riak DB using
&gt; load\\_data.erl and goog.csv....\\*\\*\\*\\*
&gt;
&gt; 1 #!/usr/local/bin escript\\*\\*\\*\\*
&gt;
&gt; 2 %% -\\*- erlang -\\*-\\*\\*\\*\\*
&gt;
&gt; 3 main([Filename]) -&gt;\\*\\*\\*\\*
&gt;
&gt; 4 {ok, Data} = file:read\\_file(Filename),\\*\\*\\*\\*
&gt;
&gt; 5 Lines = tl(re:split(Data, "\\r?\\n", [{return, binary},trim])),\\*\\*\\*\\*
&gt;
&gt; 6 lists:foreach(fun(L) -&gt; LS = re:split(L, ","), format\\_and\\_inser
&gt; t(LS) end, Lines).\\*\\*\\*\\*
&gt;
&gt; 7\\*\\*\\*\\*
&gt;
&gt; 8 format\\_and\\_insert(Line) -&gt;\\*\\*\\*\\*
&gt;
&gt; 9 JSON = io\\_lib:format("{\\"Date\\":\\"~s\\",\\"Open\\":~s,\\"High\\":~s,
&gt; \\"Low\\":~s,\\"Close\\":~s,\\"Volume\\":~s,\\"Adj. Close\\":~s}", Line),\\*\\*\\*\\*
&gt;
&gt; 10 Command = io\\_lib:format("curl -X PUT http://127.0.0.1:8098/riak
&gt; /goog/~s -d '~s' -H 'content-type: application/json'", [hd(Line),JS ON]),
&gt; \\*\\*\\*\\*
&gt;
&gt; 11 io:format("Inserting: ~s~n", [hd(Line)]),\\*\\*\\*\\*
&gt;
&gt; 12 os:cmd(Command).\\*\\*\\*\\*
&gt;
&gt; this is my load\\_data.erl...i have placed goog.csv and load\\_data.erl onto
&gt; /home/hadoop/erlangdwnloadamazon/otp\\_src\\_R14B03/bin ...and trying to run
&gt; the same on erl shell,c(load\\_data).on erlang shell ..struck up with teh
&gt; following error\\*\\*\\*\\*
&gt;
&gt; \\*\\* \\*\\*
&gt;
&gt; Eshell V5.8.4 (abort with ^G)\\*\\*\\*\\*
&gt;
&gt; 1&gt; c(load\\_data).\\*\\*\\*\\*
&gt;
&gt; ./load\\_data.erl:1: syntax error before: '#'\\*\\*\\*\\*
&gt;
&gt; ./load\\_data.erl:8: no module definition\\*\\*\\*\\*
&gt;
&gt; ./load\\_data.erl:8: Warning: function format\\_and\\_insert/1 is unused\\*\\*\\*\\*
&gt;
&gt; error\\*\\*\\*\\*
&gt;
&gt; 2&gt; halt().\\*\\*\\*\\*
&gt;
&gt; \\*\\* \\*\\*
&gt;
&gt; \\*\\* \\*\\*
&gt;
&gt; \\*\\* \\*\\*
&gt;
&gt; Thanks & regards\\*\\*\\*\\*
&gt;
&gt; sangeetha\\*\\*\\*\\*
&gt;
&gt; \\*\\* \\*\\*
&gt;
&gt; This e-mail and any files transmitted with it are for the sole use of the 
&gt; intended recipient(s) and may contain confidential and privileged 
&gt; information. If you are not the intended recipient(s), please reply to the 
&gt; sender and destroy all copies of the original message. Any unauthorized 
&gt; review, use, disclosure, dissemination, forwarding, printing or copying of 
&gt; this email, and/or any action taken in reliance on the contents of this 
&gt; e-mail is strictly prohibited and may be unlawful.
&gt;
&gt;

