---
title: "Re: riak_search: custom extractor syntax"
description: ""
project: community
lastmod: 2011-07-19T10:40:49-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg04032"
mailinglist_parent_id: "msg04028"
author_name: "Greg Pascale"
project_section: "mailinglistitem"
sent_date: 2011-07-19T10:40:49-07:00
---


I've been debugging through the riak code, and it looks like the
riak\\_search\\_js\\_extract process is not running, so it's not even getting to
the point of executing my JS. Has this feature ever worked?

=ERROR REPORT==== 19-Jul-2011::10:25:24 ===
problem invoking hook riak\\_search\\_kv\\_hook:precommit -&gt; exit:{noproc,
 {gen\\_server,
 call,

[riak\\_search\\_js\\_extract,
 reserve\\_vm,
 infinity]}}
[{gen\\_server,call,3},
 {riak\\_kv\\_js\\_manager,blocking\\_dispatch,4},
 {riak\\_search\\_kv\\_hook,run\\_extract,3},
 {riak\\_search\\_kv\\_hook,make\\_indexed\\_doc,4},
 {riak\\_search\\_kv\\_hook,index\\_object,2},
 {riak\\_search\\_kv\\_hook,precommit,1},
 {riak\\_kv\\_put\\_fsm,invoke\\_hook,4},
 {riak\\_kv\\_put\\_fsm,precommit,2}]

-Greg


On Mon, Jul 18, 2011 at 6:22 PM, Greg Pascale  wrote:

&gt; Hi,
&gt;
&gt; I'm trying to use a custom extractor, but I can't for the life of me seem
&gt; to get the syntax right. Even the simplest thing I can think to try won't
&gt; work.
&gt;
&gt; I've tried setting the rs\\_extractfun property as described in the
&gt; documentation - both of these methods
&gt;
&gt;
&gt; - {jsanon, {Bucket, Key}}, where Bucket and Key name a Riak object that
&gt; contains the source of a Javascript function to call for extraction.
&gt; - {jsanon, Source}, where Source is the source of a Javascript function
&gt; to call for extraction.
&gt;
&gt; &gt; Client:set\\_bucket(&lt;&lt;"extractTest"&gt;&gt;, [{rs\\_extractfun, {jsanon,
&gt; &lt;&lt;"function(){return{'name':'greg', 'login':'gpascale'};}"&gt;&gt;}}]).
&gt; &gt; Client:set\\_bucket(&lt;&lt;"extractTest"&gt;&gt;, [{rs\\_extractfun, {jsanon,
&gt; {&lt;&lt;"extractors"&gt;&gt;, &lt;&lt;"myextractor"&gt;&gt;}}}]).
&gt;
&gt; but neither of these work.
&gt;
&gt; Can somebody point out where I'm going wrong?
&gt;
&gt; --
&gt; Greg
&gt; Clipboard  is hiring
&gt; !
&gt;
&gt;


-- 
Greg
Clipboard  is hiring
!
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

