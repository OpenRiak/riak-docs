---
title: "Re: \"..including key filters ... is an expensive operation that	should not be used in production\""
description: ""
project: community
lastmod: 2011-08-23T07:25:16-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg04421"
mailinglist_parent_id: "msg04414"
author_name: "Jonathan Langevin"
project_section: "mailinglistitem"
sent_date: 2011-08-23T07:25:16-07:00
---


What are the recommended alternatives to:
1. Bucket-level m/r
2. List keys

Thinking of a standard usage case where an application would typically allow
pagination of all objects in a bucket, in which case there is often sorting
and filtering included as well (which necessitates m/r).

I use list keys directly if I have to "drop" or "truncate" a bucket, as I
know no alternative to that as well.

While each situation I describe above may be enough to justify my usage of
Riak, I'm building tools around Riak and would rather avoid pushing or
implementing functionality that can directly affect performance in such a
way (if it can be helped).
\\*


Jonathan Langevin
Systems Administrator
Loom Inc.
Wilmington, NC: (910) 241-0433 - jlange...@loomlearning.com -
www.loomlearning.com - Skype: intel352
\\*


On Mon, Aug 22, 2011 at 11:23 PM, Sean Cribbs  wrote:

&gt; Craig,
&gt;
&gt; The warning is there to discourage users from using list-keys, but it
&gt; doesn't prevent the operation from performing. Generally, list-keys can spam
&gt; a lot of your cluster, potentially blocking other operations (until some
&gt; upcoming changes land, and always on 0.14.x). You should still plan for the
&gt; day when list-keys will be too inconvenient even for the occasional query.
&gt;
&gt; Nevertheless, you can disable that warning message using:
&gt;
&gt; Riak.disable\\_list\\_keys\\_warnings = true
&gt;
&gt;
&gt; On Mon, Aug 22, 2011 at 11:10 PM, Craig Muth  wrote:
&gt;
&gt;&gt; Seeing this in the log:
&gt;&gt;
&gt;&gt; "Full-bucket MapReduce, including key filters, invokes list-keys which is
&gt;&gt; an expensive operation that should not be used in production"
&gt;&gt;
&gt;&gt; Assuming one is ok with having a query take a few seconds it's acceptable
&gt;&gt; to use a key filter in production, correct?
&gt;&gt;
&gt;&gt; --Craig
&gt;&gt;
&gt;
&gt;
&gt; --
&gt; Sean Cribbs 
&gt; Developer Advocate
&gt; Basho Technologies, Inc.
&gt; http://www.basho.com/
&gt;
&gt;

