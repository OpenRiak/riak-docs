---
title: "Re: Reduce phase only on one node?"
description: ""
project: community
lastmod: 2010-07-23T14:34:46-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg00779"
mailinglist_parent_id: "msg00778"
author_name: "John D. Rowell"
project_section: "mailinglistitem"
sent_date: 2010-07-23T14:34:46-07:00
---


+1 to this, my understanding is that you can use the same reduce funcion to
re-reduce a stream of data and still get the same results. Is this what
actually happens in Riak internally (i.e. the coordinating node only
re-reduces each node's reduce) or does the reduce function only run on the
coordinating node, which receives the raw map data?

2010/7/23 John Butler 

&gt;
&gt; Hello,
&gt; I went through the Riak Fast Track and overall I'm excited about the
&gt; possibilities of Riak. However, I did see one thing that concerns me in
&gt; regard to MapReduce jobs. From the Riak docs and this page here:
&gt; http://seancribbs.com/tech/2010/02/06/why-riak-should-power-your-next-rails-app/it
&gt; seems to suggest that while Map jobs are performed in parallel Reduce
&gt; jobs are not.
&gt; Wouldn't be better if each node performed the reduce function on it's own
&gt; set of data before sending it to the main coordinator? Imagine if you are
&gt; mapping over a high number of objects (millions) and are trying to aggregate
&gt; the data grouped by some demographic (such as state). If all the mappers
&gt; send the data to coordinating node to be reduced then you are going to send
&gt; millions of items from each data node all to one coordinating node. If
&gt; instead each node called reduce first, then sent it to the coordinating
&gt; node, then each node would be at most sending over 50 objects (for 50
&gt; states). Not only would this greatly reduce network traffic, it would be
&gt; able to execute in parallel greatly improving performance. Since all reduce
&gt; jobs are communicative, associative and idempotent I see no reason why this
&gt; couldn't happen (of course I'm not familiar with the Riak internals to
&gt; strongly assert this).
&gt; Maybe I misunderstood and this is already happening. If it's not happening,
&gt; why and is that on the roadmap to be added later?
&gt; -John
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; Hotmail is redefining busy with tools for the New Busy. Get more from your
&gt; inbox.
&gt;
&gt; http://www.windowslive.com/campaign/thenewbusy?ocid=PID28326::T:WLMTAGL:ON:WL:en-US:WM\\_HMP:042010\\_2
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

