---
title: "Re: Riak Recap for Jan. 12 - 13."
description: ""
project: community
lastmod: 2011-01-14T15:25:16-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01978"
mailinglist_parent_id: "msg01977"
author_name: "Ryan Zezeski"
project_section: "mailinglistitem"
sent_date: 2011-01-14T15:25:16-08:00
---


On Fri, Jan 14, 2011 at 6:21 PM, Ryan Zezeski  wrote:

&gt;
&gt; On Fri, Jan 14, 2011 at 5:46 PM, Mark Phillips  wrote:
&gt;&gt;
&gt;&gt;
&gt;&gt; 2) seancribbs and jiboumans had a quick chat about Read Repair in
&gt;&gt; action (via #riak)
&gt;&gt;
&gt;&gt; \\* Gist here ---&gt; https://gist.github.com/780363
&gt;&gt;
&gt;&gt; \\* More on Read Repair on the wiki -
&gt;&gt; http://wiki.basho.com/Riak-Glossary.html#Read-Repair
&gt;&gt;
&gt;&gt;
&gt; Sean, could you please clarify two points for me.
&gt;
&gt; 1) Read Repair
&gt;
&gt; Quote from the wiki -- "Read repair 
&gt; occurs
&gt; when a successful read occurs — that is, the quorum was met — but not all
&gt; replicas from which the object was requested agreed on the value"
&gt;
&gt; However, the OP said his get did not work the first time, so wouldn't that
&gt; mean the quorum wasn't met and therefore no read repair should have
&gt; occurred? That doesn't seem right but that's what I take away from the wiki
&gt; definition.
&gt;

Crap, the second after I hit "send" the lightbulb goes on! Why is that?

The quorum \\_was\\_ met (all vnodes just migrated to the one machine) but since
some of them were fail-overs they didn't have the value yet (or the wrong
value)? In this case a read repair happened and subsequent gets worked.

I'm still dark on the second question.


&gt; 2) Why doesn't r=1 work?
&gt;
&gt; In the IRC session, you claimed that r=1 would not have helped this
&gt; problem. Just like the OP, this confused me. You then went on to say it
&gt; was because of some optimization and then mentioned a "basic quorum."
&gt;
&gt; I took a few minutes to think about this and the only conclusion I came to
&gt; is that when r=1 you will treat the first response as the final response,
&gt; and in this case the notfound response will always come back first? I'm not
&gt; sure if what I just said makes sense but I would have expected r=1 to work,
&gt; just like the OP. I'll admit that I still haven't read all the wiki docs
&gt; yet (but I've read Read Repair 3 times now), so I'd be happy to hear RTFM.
&gt;
&gt; -Ryan
&gt;
