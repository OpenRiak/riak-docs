---
title: "Re: Problem when parsing query"
description: ""
project: community
lastmod: 2011-06-28T17:36:04-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03852"
mailinglist_parent_id: "msg03851"
author_name: "Mark Phillips"
project_section: "mailinglistitem"
sent_date: 2011-06-28T17:36:04-07:00
---


Here you go:

https://issues.basho.com/show\\_bug.cgi?id=1092

Mark


On Jun 28, 2011, at 4:06 PM, Ryan Zezeski  wrote:

&gt; I would expect the first one to fail. IIRC, there is a bug when following a 
&gt; single char with a wildcard
&gt; 
&gt; -Ryan
&gt; 
&gt; [Sent from my iPhone]
&gt; 
&gt; On Jun 27, 2011, at 4:25 PM, Germain Maurice 
&gt;  wrote:
&gt; 
&gt;&gt; Hello everybody,
&gt;&gt; 
&gt;&gt; I have a problem with riaksearch 0.14.2 when searching the document i have 
&gt;&gt; in my bucket "affinities" :
&gt;&gt; {
&gt;&gt; "start" : "20110417",
&gt;&gt; "end" : "20110510",
&gt;&gt; "data" : {
&gt;&gt; ...
&gt;&gt; }
&gt;&gt; }
&gt;&gt; 
&gt;&gt; When i request the index with this query (without escaping special 
&gt;&gt; characters) :
&gt;&gt; curl -vv 'http://localhost:8098/solr/affinities/select?q=nsid:83786678@N00 
&gt;&gt; AND start:[2\\* TO 20110501]&wt=json&rows=1'
&gt;&gt; it returns the document.
&gt;&gt; 
&gt;&gt; When i request the index with this query :
&gt;&gt; curl -vv 'http://localhost:8098/solr/affinities/select?q=nsid:83786678@N00 
&gt;&gt; AND start:[20\\* TO 20110501]&wt=json&rows=1'
&gt;&gt; i get a Bad Request error (HTTP 400) and this error in the riak console :
&gt;&gt; 
&gt;&gt; =ERROR REPORT==== 27-Jun-2011::22:05:04 ===
&gt;&gt; Unable to parse request: {badmatch,
&gt;&gt; {error,
&gt;&gt; {lucene\\_parse,
&gt;&gt; "syntax error before: [50,48,42]"}}}
&gt;&gt; [{riak\\_search\\_client,parse\\_query,3},
&gt;&gt; {riak\\_solr\\_searcher\\_wm,malformed\\_request,2},
&gt;&gt; {webmachine\\_resource,resource\\_call,3},
&gt;&gt; {webmachine\\_resource,do,3},
&gt;&gt; {webmachine\\_decision\\_core,resource\\_call,1},
&gt;&gt; {webmachine\\_decision\\_core,decision,1},
&gt;&gt; {webmachine\\_decision\\_core,handle\\_request,2},
&gt;&gt; {webmachine\\_mochiweb,loop,1}]
&gt;&gt; 
&gt;&gt; I think there is an error in parsing the query, am i wrong ?
&gt;&gt; 
&gt;&gt; Germain
&gt;&gt; 
&gt;&gt; 
&gt; 

