---
title: "Cannot set index headers to object via erlang client"
description: ""
project: community
lastmod: 2011-08-12T11:22:51-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg04365"
author_name: "Dimitry D"
project_section: "mailinglistitem"
sent_date: 2011-08-12T11:22:51-07:00
---


I've pushed last version from github, set backend to index and tried this
code:


Obj =
riakc\\_obj:new(&lt;&lt;"test"&gt;&gt;, &lt;&lt;"1.1"&gt;&gt;, &lt;&lt;"1312.23"&gt;&gt;, &lt;&lt;"application/json"&gt;&gt;),
Obj1 =
riakc\\_obj:update\\_metadata(Obj, dict:store(&lt;&lt;"x-riak-index-amount\\_bin"&gt;&gt;,
&lt;&lt;"1312.23"&gt;&gt;, dict:new())),
{ok, Pid} = riakc\\_pb\\_socket:start\\_link("127.0.0.1", 8081),
Result = riakc\\_pb\\_socket:put(Pid, Obj1, [{w, 1}, return\\_head]),
error\\_logger:info\\_msg("Result ~p~n",[Result]).


And nothing happens, just content-type switched to octet-stream. Header
field has not been added and object has been stored without it.

1) Is this means that secondary index feature doesn't work with erlang
client yet?
2) By the way, in some docs they say that in riakc\\_pb\\_socket:put in options
it is possible to set r parameter, but it is not true.


Thank you for attention.
