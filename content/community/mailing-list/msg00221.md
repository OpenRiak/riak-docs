---
title: "Re: how do i link the riak-erlang-client to the Erland node?"
description: ""
project: community
lastmod: 2010-05-01T11:48:51-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg00221"
mailinglist_parent_id: "msg00220"
author_name: "Dan Reverri"
project_section: "mailinglistitem"
sent_date: 2010-05-01T11:48:51-07:00
---


Hi Norman,

The documentation is incorrect. Here is a quick session I just ran to use
riakc:

[~/Projects/riakc]$ erl -pa ebin/ deps/\\*/ebin
Erlang R13B04 (erts-5.7.5) [source] [64-bit] [smp:2:2] [rq:2]
[async-threads:0] [hipe] [kernel-poll:false]

Eshell V5.7.5 (abort with ^G)
1&gt; {ok, RiakcSocket} = riakc\\_pb\\_socket:start\\_link({127,0,0,1}, 8087).
{ok,&lt;0.34.0&gt;}
2&gt; O = riakc\\_obj:new(&lt;&lt;"bucket"&gt;&gt;, &lt;&lt;"key"&gt;&gt;, &lt;&lt;"Hello World"&gt;&gt;,
"text/plain").
{riakc\\_obj,&lt;&lt;"bucket"&gt;&gt;,&lt;&lt;"key"&gt;&gt;,undefined,undefined,
 {dict,1,16,16,8,80,48,
 {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],...},

{{[],[],[],[],[],[],[],[],[],[],[[&lt;&lt;...&gt;&gt;|...]],[],[],...}}},
 &lt;&lt;"Hello World"&gt;&gt;}
3&gt; O = riakc\\_obj:new(&lt;&lt;"bucket"&gt;&gt;, &lt;&lt;"key"&gt;&gt;, &lt;&lt;"Hello World"&gt;&gt;,
"text/plain").
{riakc\\_obj,&lt;&lt;"bucket"&gt;&gt;,&lt;&lt;"key"&gt;&gt;,undefined,undefined,
 {dict,1,16,16,8,80,48,
 {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],...},

{{[],[],[],[],[],[],[],[],[],[],[[&lt;&lt;...&gt;&gt;|...]],[],[],...}}},
 &lt;&lt;"Hello World"&gt;&gt;}
4&gt; riakc\\_pb\\_socket:put(RiakcSocket, O, [return\\_body]).
{ok,{riakc\\_obj,&lt;&lt;"bucket"&gt;&gt;,&lt;&lt;"key"&gt;&gt;,
 &lt;&lt;107,206,97,96,96,96,204,96,202,5,82,44,108,223,42,215,
 101,48,37,50,230,177,50,...&gt;&gt;,
 [{{dict,3,16,16,8,80,48,
 {[],[],[],[],[],[],[],[],[],[],[],[],...},
 {{[],[],[],[],[],[],[],[],[],[],...}}},
 &lt;&lt;"Hello World"&gt;&gt;}],
 {dict,0,16,16,8,80,48,
 {[],[],[],[],[],[],[],[],[],[],[],[],[],...},
 {{[],[],[],[],[],[],[],[],[],[],[],...}}},
 undefined}}
5&gt;


You'll notice I had to include "ebin" and "deps/\\*/ebin". The deps ebin was
necessary for the protobuffs dependency. You'll also notice I didn't
reference the client at all.

Thanks,
Dan

On Sat, May 1, 2010 at 4:20 AM, Norman Khine  wrote:

&gt; hi
&gt;
&gt; On Sat, May 1, 2010 at 12:30 AM, Dan Reverri  wrote:
&gt; &gt; Can you try running "make clean && make all"?
&gt;
&gt; yes i did this but still unable to link the library to Erlang?
&gt;
&gt; araweelo:riak khinester$ erl -version
&gt; Erlang (SMP,ASYNC\\_THREADS,HIPE) (BEAM) emulator version 5.7.5
&gt; araweelo:~ khinester$ erl -pa $RIAKC/ebinErlang R13B04 (erts-5.7.5)
&gt; [source] [64-bit] [smp:2:2] [rq:2] [async-threads:0] [hipe]
&gt; [kernel-poll:false]
&gt;
&gt; Eshell V5.7.5 (abort with ^G)
&gt; 1&gt; code:which(riakc\\_pb\\_client).
&gt; non\\_existing
&gt; 2&gt;
&gt;
&gt;
&gt; &gt; It should fetch the protobuffs dependency and compile everything. Once
&gt; this
&gt; &gt; is complete run:
&gt; &gt; erl -pa $RIAKC/ebin
&gt; &gt; Make sure $RIAKC points to the path where you have cloned the
&gt; &gt; riak-erlang-client repo.
&gt;
&gt; araweelo:riak khinester$ echo $RIAKC
&gt; /Users/khinester/Sandboxes/riak/client\\_lib/riak-erlang-client
&gt; araweelo:riak khinester$ tree -L 2
&gt; /Users/khinester/Sandboxes/riak/client\\_lib/riak-erlang-client/
&gt; /Users/khinester/Sandboxes/riak/client\\_lib/riak-erlang-client/
&gt; |-- LICENSE
&gt; |-- Makefile
&gt; |-- README
&gt; |-- deps
&gt; | `-- protobuffs
&gt; |-- docs
&gt; | `-- pb-client.txt
&gt; |-- ebin
&gt; | |-- riakc.app
&gt; | |-- riakc\\_obj.beam
&gt; | |-- riakc\\_pb.beam
&gt; | |-- riakc\\_pb\\_socket.beam
&gt; | `-- riakclient\\_pb.beam
&gt; |-- include
&gt; | |-- riakc\\_obj.hrl
&gt; | |-- riakc\\_pb.hrl
&gt; | `-- riakclient\\_pb.hrl
&gt; |-- rebar
&gt; |-- rebar.config
&gt; `-- src
&gt; |-- riakc\\_obj.erl
&gt; |-- riakc\\_pb.erl
&gt; |-- riakc\\_pb\\_socket.erl
&gt; `-- riakclient.proto
&gt;
&gt; 6 directories, 18 files
&gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; On Fri, Apr 30, 2010 at 2:16 PM, Norman Khine  wrote:
&gt; &gt;&gt;
&gt; &gt;&gt; hello,
&gt; &gt;&gt; i am following the riak/client\\_lib/riak-erlang-client/docs/pb-client.txt
&gt; &gt;&gt; but am stuck on this point:
&gt; &gt;&gt;
&gt; &gt;&gt; $ erl -pa $RIAKC/ebin
&gt; &gt;&gt; Erlang R13B04 (erts-5.7.5) [source] [64-bit] [smp:2:2] [rq:2]
&gt; &gt;&gt; [async-threads:0] [hipe] [kernel-poll:false]
&gt; &gt;&gt;
&gt; &gt;&gt; Eshell V5.7.5 (abort with ^G)
&gt; &gt;&gt; 1&gt; code:which(riakc\\_pb\\_client).
&gt; &gt;&gt; non\\_existing
&gt; &gt;&gt; 2&gt;
&gt; &gt;&gt; User switch command
&gt; &gt;&gt; --&gt; q
&gt; &gt;&gt;
&gt; &gt;&gt; i also tried:
&gt; &gt;&gt;
&gt; &gt;&gt; $ sudo ./rebar install
&gt; &gt;&gt; Password:
&gt; &gt;&gt; ==&gt; protobuffs (install)
&gt; &gt;&gt; Installing: protobuffs-4 to /opt/local/lib/erlang/lib
&gt; &gt;&gt; ==&gt; riak-erlang-client (install)
&gt; &gt;&gt; Installing: riakc-1 to /opt/local/lib/erlang/lib
&gt; &gt;&gt; aqoon:riak-erlang-client khinester$ erl
&gt; &gt;&gt; Erlang R13B04 (erts-5.7.5) [source] [64-bit] [smp:2:2] [rq:2]
&gt; &gt;&gt; [async-threads:0] [hipe] [kernel-poll:false]
&gt; &gt;&gt;
&gt; &gt;&gt; Eshell V5.7.5 (abort with ^G)
&gt; &gt;&gt; 1&gt; code:which(riakc\\_pb\\_client).
&gt; &gt;&gt; non\\_existing
&gt; &gt;&gt; 2&gt;
&gt; &gt;&gt;
&gt; &gt;&gt; how do i link the client correctly?
&gt; &gt;&gt; any help much appreciated
&gt; &gt;&gt;
&gt; &gt;&gt; norman
&gt; &gt;&gt;
&gt; &gt;&gt; --
&gt; &gt;&gt; ¿noʎ uɐɔ uʍop ǝpısdn ǝʇıɹʍ uɐɔ ı - %&gt;&gt;&gt; "".join( [
&gt; &gt;&gt; {'\\*':'@','^':'.'}.get(c,None) or chr(97+(ord(c)-83)%26) for c in
&gt; &gt;&gt; ",adym,\\*)&uzq^zqf" ] )
&gt; &gt;&gt;
&gt; &gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt;&gt; riak-users mailing list
&gt; &gt;&gt; riak-users@lists.basho.com
&gt; &gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt;
&gt;
&gt;
&gt; --
&gt; ¿noʎ uɐɔ uʍop ǝpısdn ǝʇıɹʍ uɐɔ ı - %&gt;&gt;&gt; "".join( [
&gt; {'\\*':'@','^':'.'}.get(c,None) or chr(97+(ord(c)-83)%26) for c in
&gt; ",adym,\\*)&uzq^zqf" ] )
&gt;
