---
title: "Re: Cluster setup"
description: ""
project: community
lastmod: 2012-12-10T11:56:55-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg09510"
mailinglist_parent_id: "msg09509"
author_name: "Kevin Burton"
project_section: "mailinglistitem"
sent_date: 2012-12-10T11:56:55-08:00
---


Each node is on a separate machine. This not a development build. The 
instructions just indicate that I should start the Riak Server but does not 
indicate what should be done when it doesn't start.

On Dec 10, 2012, at 1:52 PM, Jared Morrow  wrote:

&gt; Are you trying to start all nodes on the same machine/vm? Each riak "node" 
&gt; needs to be on its own machine, unless you are simply trying to test out a 
&gt; development environment. In that case, you need to look at 
&gt; http://docs.basho.com/riak/latest/tutorials/fast-track/Building-a-Development-Environment/
&gt; for those instructions. It will help in starting multiple nodes per machine.
&gt; 
&gt; -Jared
&gt; 
&gt; 
&gt; On Mon, Dec 10, 2012 at 12:43 PM, Kevin Burton  
&gt; wrote:
&gt;&gt; The first node started up without error (/etc/init.d/riak start). But nodes 
&gt;&gt; 2 and 3 failed to start. I looked in /var/log/riak/error.log and found about 
&gt;&gt; three lines with {error,eaddrnotavail} in the error message. What does this 
&gt;&gt; mean? Is there a work around? I don't understand why this address is "not 
&gt;&gt; available". 'ifconfig' confirms that this is the machines address.
&gt;&gt; 
&gt;&gt; 
&gt;&gt; On Dec 10, 2012, at 12:33 PM, Jared Morrow  wrote:
&gt;&gt; 
&gt;&gt;&gt; The init.d script for RIak is included in the RPM. If you list the file 
&gt;&gt;&gt; contained in the RPM do you see the init.d/riak script? If you do have 
&gt;&gt;&gt; that file, you'll need to add the rc.d scripts by hand to auto-start / 
&gt;&gt;&gt; auto-stop on startup / shutdown or use a tool like `chkconfig` 
&gt;&gt;&gt; http://linux.die.net/man/8/chkconfig
&gt;&gt;&gt; 
&gt;&gt;&gt; -Jared
&gt;&gt;&gt; 
&gt;&gt;&gt; 
&gt;&gt;&gt; On Mon, Dec 10, 2012 at 11:17 AM, Kevin Burton  
&gt;&gt;&gt; wrote:
&gt;&gt;&gt;&gt; I did these steps and while I see that Riak has been added to the system 
&gt;&gt;&gt;&gt; files (like /etc/riak). I don't see any links to auto start like in 
&gt;&gt;&gt;&gt; init.d. Do I add these links manually?
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt; On Dec 10, 2012, at 11:32 AM, Jared Morrow  wrote:
&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt; If you are looking install and /etc/init.d support, you should really 
&gt;&gt;&gt;&gt;&gt; just be installing the packages. 
&gt;&gt;&gt;&gt;&gt; http://s3.amazonaws.com/downloads.basho.com/riak/CURRENT/rhel/6/riak-1.2.1-1.el6.x86\\_64.rpm
&gt;&gt;&gt;&gt;&gt; is the package for Centos 6 found here 
&gt;&gt;&gt;&gt;&gt; http://basho.com/resources/downloads/. Building from source is there for 
&gt;&gt;&gt;&gt;&gt; those who need a feature not currently in a release, want to make 
&gt;&gt;&gt;&gt;&gt; additions to Riak, or are on an unsupported platform.
&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt; -Jared
&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt; On Mon, Dec 10, 2012 at 10:25 AM,  wrote:
&gt;&gt;&gt;&gt;&gt;&gt; I am looking at 
&gt;&gt;&gt;&gt;&gt;&gt; http://docs.basho.com/riak/latest/cookbooks/Basic-Cluster-Setup/ which 
&gt;&gt;&gt;&gt;&gt;&gt; provides me with a lot of information. But I have one question. I have a 
&gt;&gt;&gt;&gt;&gt;&gt; source distribution and I have already done 'make rel'. Once I have 
&gt;&gt;&gt;&gt;&gt;&gt; performed all of the steps outlined in setting up a cluster how do I 
&gt;&gt;&gt;&gt;&gt;&gt; make sure that this configuration is restored when the machine reboots. 
&gt;&gt;&gt;&gt;&gt;&gt; I am assuming that it will involve something with /etc/init.d. Is there 
&gt;&gt;&gt;&gt;&gt;&gt; something like 'make install' that would shorten the process? How is the 
&gt;&gt;&gt;&gt;&gt;&gt; cluster information persisted so that each node will join the cluster 
&gt;&gt;&gt;&gt;&gt;&gt; when the respective machine comes up after a reboot? Thank you.
&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt;&gt;&gt;&gt;&gt; 
&gt;&gt; 
