---
title: "Re: Problem with deleting keys"
description: ""
project: community
lastmod: 2011-06-16T12:23:24-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03735"
mailinglist_parent_id: "msg03732"
author_name: "Alexander Sicular"
project_section: "mailinglistitem"
sent_date: 2011-06-16T12:23:24-07:00
---


However this problem does get solved it needs to be backend agnostic
and function at the riak level. -Alexander

On Thu, Jun 16, 2011 at 14:02, Nico Meyer  wrote:
&gt; Expiry time in bitcask is a global setting at the moment, not per key. But
&gt; even if it where different, this should behave exactly the same as outright
&gt; deletion (what else is expires now supposed to mean?). Hence the same
&gt; problems as David observed in the first place.
&gt;
&gt; Which makes me think, actually. Andrew, if riak only reaps the tombstone if
&gt; all primary vnodes are up, why did David see the behaviour he did?
&gt; Is it not working correctly in 0.14? Or does list key ignore the values, and
&gt; therefore the tombstone? I'm guessing the latter, which would be another
&gt; reason to avoid key listing for any real world usage.
&gt;
&gt; Cheers,
&gt; Nico
&gt;
&gt; Am 16.06.2011 19:33, schrieb Greg Nelson:
&gt;
&gt; In 0.14, would it be reasonable for the application to write its own special
&gt; tombstone marker while at the same time setting an expiry time (== now) on
&gt; the object? Â (Assuming bitcask backend...)
&gt;
&gt; On Thursday, June 16, 2011 at 10:24 AM, Andrew Thompson wrote:
&gt;
&gt; On Thu, Jun 16, 2011 at 09:24:28AM -0700, David Leimbach wrote:
&gt;
&gt; Riak doesn't have tombstones (as far as I know) so, you have to make sure
&gt; all your nodes are up to do a delete. This, to me, seems like a misfeature.
&gt;
&gt; Please read my other responses in this thread, riak absolutely \\*does\\*
&gt; have tombstones. And if you don't have all the primary nodes for a key
&gt; up at the time of a delete, you'll write tombstones they just won't be
&gt; able to trigger an actual removal of the key.
&gt;
&gt; Now, that said. 0.14 has several bugs in how delete works and so the
&gt; behaviour is probably going to be unpredictable. To be perfectly honest,
&gt; I recommend avoiding deletes where possible on 0.14. As you suggested,
&gt; implementing tombstones at the application layer might be a better
&gt; strategy until the next major riak release. Unfortunately, the changes
&gt; were too extensive to be backported into the 0.14 branch.
&gt;
&gt; Andrew
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

