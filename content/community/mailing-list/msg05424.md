---
title: "Re: documentation for allow_mult=false"
description: ""
project: community
lastmod: 2011-11-02T11:58:24-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05424"
mailinglist_parent_id: "msg05420"
author_name: "Jeremiah Peschka"
project_section: "mailinglistitem"
sent_date: 2011-11-02T11:58:24-07:00
---


Please add this explanation to the wiki. I'd do it, but i'm working with an 
RDBMS right now and I am neither distributed nor eventually consistent.
---
Jeremiah Peschka - Founder, Brent Ozar PLF, LLC
Microsoft SQL Server MVP

On Nov 2, 2011, at 8:18 AM, Ryan Zezeski wrote:

&gt; On Tue, Nov 1, 2011 at 5:51 PM, Justin Karneges  wrote:
&gt; Are you saying that allow\\_mult=false + last\\_write\\_win=false is the same as
&gt; allow\\_mult=false + last\\_write\\_win=true ?
&gt; 
&gt; False/false may be the default behavior, but I want to know what that behavior
&gt; is. :)
&gt; 
&gt; 
&gt; Justin,
&gt; 
&gt; No, last\\_write\\_wins=true doesn't care about the value of allow\\_mult. Only 
&gt; one should be true at the same time, and the default is to have both set to 
&gt; false. Perhaps making an imaginary setting to displace these two would help. 
&gt; Lets call this imaginary setting "conflict\\_resolution\\_method" which can take 
&gt; on the three mutually exclusive values "stomp", "most\\_recent" and "siblings".
&gt; 
&gt; stomp - overwrite the current value with the new value regardless of vector 
&gt; clocks, just mutate the value with no regard, thus "stomp"
&gt; 
&gt; most\\_recent - use vclocks to monitor for conflicts, create siblings, and pick 
&gt; the most recent write when a conflict does occur (i.e. let Riak handle the 
&gt; conflict for you based on time)
&gt; 
&gt; siblings - use vclocks to monitor for conflicts, create siblings, and return 
&gt; the siblings to the client when a conflict occurs for it to be resolved by 
&gt; some application dependent logic
&gt; 
&gt; Now lets map my imaginary field to the actual fields
&gt; 
&gt; stomp = last\\_write\\_wins=true + allow\\_mult=false
&gt; 
&gt; most\\_recent = last\\_write\\_wins=false + allow\\_mult=false
&gt; 
&gt; siblings = last\\_write\\_wins=false + allow\\_mult=true
&gt; 
&gt; Notice that setting both to true has undefined semantics as they are 
&gt; necessarily mutually exclusive.
&gt; 
&gt; Also notice that stomp and most\\_recent might seem like the same thing on the 
&gt; surface but they may have different outcomes in different situations. For 
&gt; example, stomp would prove to be non-deterministic during the healing of a 
&gt; split-brain because it will depend on the order of the hinted handoff 
&gt; transfers. Honestly, you're best avoiding last\\_write\\_wins at this point 
&gt; because it can cause non-obvious behavior and there is potential it may be 
&gt; removed in the future.
&gt; 
&gt; HTH,
&gt; -Ryan 
&gt; 
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com


\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

