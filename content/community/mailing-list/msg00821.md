---
title: "riak postcommit hooks"
description: ""
project: community
lastmod: 2010-08-02T03:05:39-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg00821"
author_name: "Joseph Lambert"
project_section: "mailinglistitem"
sent_date: 2010-08-02T03:05:39-07:00
---


Hi,

I've been trying to work with postcommit hooks to try a method for creating
indexes. I've added to the bucket properties "mod" : "post\\_commit\\_index" and
"fun" : "index\\_value" and verified those properties are set.

I then attach to riak, and make sure the module is loaded. Then, when I try
to insert some data into the bucket, I get an error with the postcommit that
shows this:

\\*\\* Reason for termination =
\\*\\* {{case\\_clause,{struct,[{&lt;&lt;"mod"&gt;&gt;,&lt;&lt;"post\\_commit\\_index"&gt;&gt;},
 &lt;&lt;"fun"&gt;&gt;,&lt;&lt;"index\\_value"&gt;&gt;}]}},
 [{riak\\_kv\\_put\\_fsm,invoke\\_hook,3},
 {riak\\_kv\\_put\\_fsm,waiting\\_vnode\\_dw,2},
 {gen\\_fsm,handle\\_msg,7},
 {proc\\_lib,init\\_p\\_do\\_apply,3}]}

If I attach the console and run m(). I can see the module is loaded, and can
test that the function index\\_value actually works.

In actuality, this function currently does nothing, it is just an attempt to
test triggering the postcommit hook function. Any insights into what I may
be doing wrong?

- Joe Lambert

joseph.g.lamb...@gmail.com
