---
title: "Re: embedding riak_core into RabbitMQ"
description: ""
project: community
lastmod: 2011-05-24T06:05:17-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03395"
mailinglist_parent_id: "msg03387"
author_name: "Jon Brisbin"
project_section: "mailinglistitem"
sent_date: 2011-05-24T06:05:17-07:00
---


----- Original Message -----

&gt; From: "Ryan Zezeski" 
&gt; To: "Jon Brisbin" 
&gt; Cc: "riak-users Users" 
&gt; Sent: Monday, May 23, 2011 12:47:09 PM
&gt; Subject: Re: embedding riak\\_core into RabbitMQ

&gt; Jon,

&gt; Sounds like a neat project. Out of curiosity, what use cases do you
&gt; imagine for something like this?
We already have RabbitMQ integration with a riak\\_core application where vnodes 
are called in response to messages. This embedding would simply be an extension 
of that. 

&gt; In regards to riak\\_err you shouldn't have any troubles leaving it
&gt; out. It's purpose is to protect your VM from OOM issues related to
&gt; error logging. What's the warning you see?
I thought it would be okay. 

It says: \\*WARNING\\* Undefined function riak\\_err\\_handler:limited\\_fmt/4 

jb 

&gt; -Ryan

&gt; On Thu, May 19, 2011 at 2:49 PM, Jon Brisbin &lt; j...@jbrisbin.com &gt;
&gt; wrote:

&gt; &gt; I've mentioned this a couple places, but I'm toying with embedding
&gt; &gt; riak\\_core into RabbitMQ as a plugin. I already have a consumer that
&gt; &gt; invokes vnodes but I'm wondering (in code) whether or not it would
&gt; &gt; be more efficient to implement this behaviour as a custom exchange.
&gt; &gt; This is also an exercise for my Erlang Factory presentation.
&gt; 
&gt; &gt; To that end, I've got riak\\_core running as a plugin with a special
&gt; &gt; script I call from my Makefile to patch the riak\\_core distro so it
&gt; &gt; will go into RabbitMQ's VM without complaining about extra .beam
&gt; &gt; files (for things already inside RabbitMQ).
&gt; 
&gt; &gt; I'm getting a couple warnings related to cluster\\_info and riak\\_err
&gt; &gt; not being available. I've included cluster\\_info to get rid of that
&gt; &gt; warning, but I'm not sure I want to include riak\\_err because it
&gt; &gt; seems to put my logging output back into the console (I run my
&gt; &gt; RabbitMQ broker in a terminal so I can get an Erlang shell with
&gt; &gt; it).
&gt; &gt; It makes a mess in my terminal window, so I'm considering leaving
&gt; &gt; that out of my plugins directory.
&gt; 
&gt; &gt; Will leaving riak\\_err out cause problems with riak\\_core? Other than
&gt; &gt; this, riak\\_core was relatively easy to embed.
&gt; 
&gt; &gt; Thanks!
&gt; 
&gt; &gt; Jon Brisbin
&gt; 
&gt; &gt; http://jbrisbin.com
&gt; 
&gt; &gt; Twitter: @j\\_brisbin
&gt; 
&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; 
&gt; &gt; riak-users mailing list
&gt; 
&gt; &gt; riak-users@lists.basho.com
&gt; 
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; 
