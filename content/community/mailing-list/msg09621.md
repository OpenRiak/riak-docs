---
title: "Re: Trying to revamp the clj-riak driver"
description: ""
project: community
lastmod: 2012-12-18T13:05:07-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg09621"
mailinglist_parent_id: "msg09620"
author_name: "bgp2396"
project_section: "mailinglistitem"
sent_date: 2012-12-18T13:05:07-08:00
---


Thanks! I did check out both of those, but as far as I could tell neither one 
supported conflict resolution, or at least it's not documented. If it is 
supported, do you think you could give an example of how to do it with sumo? I 
tried passing in the :vector-clock with in the map you pass into put, but that 
didn't yield any results.

My use case right now is that I'm writing a little proxy server in clojure to 
interact with riak. The client will be getting (possibly multiple) values out 
of riak, and passing in the one that it wants to be correct (possibly changing 
that correct one in some way was well before sending it back).

--- On Tue, 12/18/12, Reid Draper  wrote:

&gt; From: Reid Draper 
&gt; Subject: Re: Trying to revamp the clj-riak driver
&gt; To: "bgp2396" 
&gt; Cc: riak-users@lists.basho.com
&gt; Date: Tuesday, December 18, 2012, 3:44 PM
&gt; For a more up-to-date Clojure client,
&gt; I'd recommend looking at Welle [1] or Sumo [2]. Not to
&gt; discourage you from doing some hacking, just throwing some
&gt; other options out there.
&gt; 
&gt; [1] http://clojureriak.info/
&gt; [2] https://github.com/reiddraper/sumo
&gt; 
&gt; Reid
&gt; 
&gt; On Dec 18, 2012, at 3:12 PM, bgp2396 
&gt; wrote:
&gt; 
&gt; &gt; I'm working on updating this driver to be in some kind
&gt; of working state:
&gt; &gt; https://github.com/mmcgrana/clj-riak
&gt; &gt; 
&gt; &gt; I've actually made some good progress, you can find my
&gt; fork of it here:
&gt; &gt; https://github.com/mediocregopher/clj-riak
&gt; &gt; 
&gt; &gt; I've gotten all the dependencies and such updated, and
&gt; (afaik) all of the old functionality is working again
&gt; (although I haven't tested mapreduce).
&gt; &gt; 
&gt; &gt; Right now I'm trying to add in support for vclocks and
&gt; conflict resolution. As it stands the driver always passes
&gt; in the vclock as blank. I've switched to using one of the
&gt; RiakObject constructors which has a vclock passed in as
&gt; well, but now the code throws a
&gt; "NullPointerException   clojure.lang.Reflector.invokeNoArgInstanceMember"
&gt; when calling buildContent() on it. I wanted to check on the
&gt; mailing list to see if anyone might know why this is before
&gt; I started diving into the java code and trying to debug that
&gt; to figure out where exactly in buildContent() it's failing.
&gt; &gt; 
&gt; &gt; Here's a gist with relevant the relevant code:
&gt; &gt; https://gist.github.com/4331526
&gt; &gt; 
&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; &gt; riak-users mailing list
&gt; &gt; riak-users@lists.basho.com
&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt; 
&gt; 

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

