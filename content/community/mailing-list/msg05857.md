---
title: "Re: Dead node not leaving with force-remove"
description: ""
project: community
lastmod: 2011-12-05T11:33:26-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05857"
mailinglist_parent_id: "msg05754"
author_name: "Paul Armstrong"
project_section: "mailinglistitem"
sent_date: 2011-12-05T11:33:26-08:00
---


At 2011-11-28T17:19+0000, Paul Armstrong wrote:
&gt; We have a 1.0.2 cluster with a node that's gone but still listed in
&gt; member\\_status (as legacy):
&gt; 
&gt; riak-admin member\\_status
&gt; Attempting to restart script through sudo -u riak
&gt; ================================= Membership
&gt; ==================================
&gt; Status Ring Pending Node
&gt; -------------------------------------------------------------------------------
&gt; (legacy) 7.8% -- 'riak@10.115.13.51'
&gt; valid 7.8% -- 'riak@10.119.82.164'
&gt; valid 7.8% -- 'riak@10.13.22.183'
&gt; valid 7.8% -- 'riak@10.13.51.171'
&gt; valid 7.8% -- 'riak@10.37.46.7'
&gt; valid 7.6% -- 'riak@10.76.45.111'
&gt; valid 7.6% -- 'riak@10.76.62.122'
&gt; valid 7.6% -- 'riak@10.78.197.82'
&gt; valid 7.6% -- 'riak@10.79.69.234'
&gt; valid 7.6% -- 'riak@10.80.157.112'
&gt; valid 7.6% -- 'riak@10.82.155.202'
&gt; valid 7.6% -- 'riak@10.82.25.84'
&gt; valid 7.6% -- 'riak@10.84.5.68'
&gt; -------------------------------------------------------------------------------
&gt; Valid:13 / Leaving:0 / Exiting:0 / Joining:0 / Down:0

Many thanks to the Basho team (Dan Reverri and Mark Phillips in
particular) for helping to solve this. The ring was corrupted and there
was an interesting bug around legacy gossip and forced removal (see
Bug 1298: Legacy gossip / force-remove troubles ---&gt;
https://issues.basho.com/show\\_bug.cgi?id=1298 )

After some erlang console work, our ring no longer had the ghost hosts
in it, was able to settle into the new gossip mode and we were able to
shrink it.

Paul

