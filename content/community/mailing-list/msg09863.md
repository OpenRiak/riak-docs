---
title: "Re: Error when inserting lots of records"
description: ""
project: community
lastmod: 2013-01-21T11:37:51-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg09863"
mailinglist_parent_id: "msg09862"
author_name: "Jared Morrow"
project_section: "mailinglistitem"
sent_date: 2013-01-21T11:37:51-08:00
---


That is the /etc/riak directory you are looking at most likely, if it is a
linux system, '/etc' on the root level will have many more files /
directories than that.



On Mon, Jan 21, 2013 at 12:27 PM, Daniel Gerep wrote:

&gt; I can't find the file /etc/security/limits.conf
&gt;
&gt; Inside my /etc I have this:
&gt;
&gt; \\*app.config cert.pem key.pem vm.args\\*
&gt;
&gt;
&gt; On 21 January 2013 17:22, Evan Vigil-McClanahan wrote:
&gt;
&gt;&gt; On linux, add the lines
&gt;&gt;
&gt;&gt; riak soft core unlimited
&gt;&gt; riak hard core unlimited
&gt;&gt; riak soft nofile 65536
&gt;&gt; riak hard nofile 65536
&gt;&gt;
&gt;&gt; to the file /etc/security/limits.conf
&gt;&gt;
&gt;&gt; (cores aren't totally germane to your question, but it's a good idea,
&gt;&gt; since they tend to be disabled by default on modern linux systems).
&gt;&gt;
&gt;&gt; You may also want to raise the ERL\\_MAX\\_PORTS value in your vm.args
&gt;&gt;
&gt;&gt;
&gt;&gt; On Mon, Jan 21, 2013 at 12:14 PM, Daniel Gerep 
&gt;&gt; wrote:
&gt;&gt; &gt; Can you tell me how? I have no idea and thanks for your answer.
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt; On 21 January 2013 16:13, Evan Vigil-McClanahan 
&gt;&gt; &gt; wrote:
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; Daniel,
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; You need to raise the number of file handles that riak is allowed to
&gt;&gt; use.
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; On Mon, Jan 21, 2013 at 11:03 AM, Daniel Gerep 
&gt;&gt; &gt;&gt; wrote:
&gt;&gt; &gt;&gt; &gt; Hi all.
&gt;&gt; &gt;&gt; &gt;
&gt;&gt; &gt;&gt; &gt; I'm inserting 2.000 values at a time.
&gt;&gt; &gt;&gt; &gt;
&gt;&gt; &gt;&gt; &gt; It inserts something around 730 - 783 record and start showing this
&gt;&gt; &gt;&gt; &gt; error on
&gt;&gt; &gt;&gt; &gt; riak console
&gt;&gt; &gt;&gt; &gt;
&gt;&gt; &gt;&gt; &gt; I have checked the file several times and there are no errors, no
&gt;&gt; &gt;&gt; &gt; special
&gt;&gt; &gt;&gt; &gt; characters, no spaces, the file is 100% correct.
&gt;&gt; &gt;&gt; &gt;
&gt;&gt; &gt;&gt; &gt; Any ideas?
&gt;&gt; &gt;&gt; &gt;
&gt;&gt; &gt;&gt; &gt;
&gt;&gt; &gt;&gt; &gt; 15:56:48.013 [error] CRASH REPORT Process &lt;0.4470.0&gt; with 0
&gt;&gt; neighbours
&gt;&gt; &gt;&gt; &gt; crashed with reason: {error,accept\\_failed}
&gt;&gt; &gt;&gt; &gt;
&gt;&gt; &gt;&gt; &gt; 15:56:48.291 [error]
&gt;&gt; &gt;&gt; &gt; {mochiweb\\_socket\\_server,310,{acceptor\\_error,{error,accept\\_failed}}}
&gt;&gt; &gt;&gt; &gt;
&gt;&gt; &gt;&gt; &gt; 15:57:22.363 [error] application: mochiweb, "Accept failed error",
&gt;&gt; &gt;&gt; &gt; "{error,emfile}"
&gt;&gt; &gt;&gt; &gt;
&gt;&gt; &gt;&gt; &gt; --
&gt;&gt; &gt;&gt; &gt;
&gt;&gt; &gt;&gt; &gt; Att
&gt;&gt; &gt;&gt; &gt; Daniel Gerep
&gt;&gt; &gt;&gt; &gt;
&gt;&gt; &gt;&gt; &gt; Live long and prosper
&gt;&gt; &gt;&gt; &gt;
&gt;&gt; &gt;&gt; &gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt; &gt;&gt; &gt; riak-users mailing list
&gt;&gt; &gt;&gt; &gt; riak-users@lists.basho.com
&gt;&gt; &gt;&gt; &gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt; &gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt;
&gt;&gt; &gt; --
&gt;&gt; &gt;
&gt;&gt; &gt; Att
&gt;&gt; &gt; Daniel Gerep
&gt;&gt; &gt;
&gt;&gt; &gt; Live long and prosper
&gt;&gt;
&gt;
&gt;
&gt;
&gt; --
&gt; \\*
&gt; \\*
&gt; \\*Att\\*
&gt; \\*Daniel Gerep\\*
&gt; \\*
&gt; \\*
&gt; Live long and prosper
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

