---
title: "Re: Alternative to Post-Commit in EDS"
description: ""
project: community
lastmod: 2012-04-04T07:10:35-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07132"
mailinglist_parent_id: "msg07131"
author_name: "Jon Meredith"
project_section: "mailinglistitem"
sent_date: 2012-04-04T07:10:35-07:00
---


Hi Anthony,

Riak does have a last modified field, but it's last modified by client so
is deliberately left untouched on replication. Similarly the vclock is not
incremented either (the vclocks/siblings from both sides are resolved using
the two vclocks).

There are no obvious mechanisms for doing what you want currently. I'll
think about options and somebody will get back to you.

Jon.

On Wed, Apr 4, 2012 at 12:06 AM, Anthony Molinaro &lt;
antho...@alumni.caltech.edu&gt; wrote:

&gt; Also pinging on this one, maybe if I rephrase the questions I'll get
&gt; an answer.
&gt;
&gt; Does riak have a last modified field which can be used in a map reduce
&gt; job, to say get updated values from a timestamp?
&gt;
&gt; Are last modified times copied when replicating a K/V across data centers
&gt; with EDS?
&gt;
&gt; Is there some other scheme I could use to determine what has been
&gt; replicated?
&gt;
&gt; Thanks,
&gt;
&gt; -Anthony
&gt;
&gt; On Mon, Apr 02, 2012 at 06:37:17PM -0700, Anthony Molinaro wrote:
&gt; &gt; Hi,
&gt; &gt;
&gt; &gt; I'm evaluating Riak EDS for a system where I'd like to have data
&gt; &gt; replicated between several colo's. The replication would be
&gt; &gt; bidirectional, but the flow would only reverse if a colo goes down
&gt; &gt; (ie, normally all writes to a bucket go to one colo and are replicated
&gt; &gt; to others, but if that colo goes down the writes will go somewhere
&gt; &gt; else). This seems relatively straight forward I'm sure, now the
&gt; &gt; wrinkle.
&gt; &gt;
&gt; &gt; I'd like to get a signal when data shows up in a colo across the
&gt; &gt; replication channel. Ideally via some sort of post-replication-commit
&gt; &gt; hook but I guess this is not currently possible (2nd hand from Basho
&gt; &gt; sales). So my question is, is there any alternate way to do this?
&gt; &gt;
&gt; &gt; I assume that maybe internal update time would be modified so my
&gt; &gt; first thought would be a map reduce job which determined recently
&gt; &gt; changed values, but I'm not sure if that would work correctly or not.
&gt; &gt;
&gt; &gt; Does anyone else have any idea of a way to do this sort of thing?
&gt; &gt;
&gt; &gt; Thanks,
&gt; &gt;
&gt; &gt; -Anthony
&gt; &gt;
&gt; &gt; --
&gt; &gt; ------------------------------------------------------------------------
&gt; &gt; Anthony Molinaro 
&gt; &gt;
&gt; --
&gt; ------------------------------------------------------------------------
&gt; Anthony Molinaro 
&gt;


-- 
Jon Meredith
Platform Engineering Manager
Basho Technologies, Inc.
jmered...@basho.com
