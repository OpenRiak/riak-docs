---
title: "riak_err starts writing to stdout/stderr"
description: ""
project: community
lastmod: 2011-07-18T12:10:27-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg04026"
author_name: "Anthony Molinaro"
project_section: "mailinglistitem"
sent_date: 2011-07-18T12:10:27-07:00
---


Hi,

 I've been using riak\\_err for a while in an otp application and have
noticed that when I initially start the system up, the stdout/stderr
is redirected to the log I specify, at least for all PROGRESS REPORT
messages. However, if anything calls error\\_logger:error\\_msg, the message
goes to both the alternate log and to the stdout log, so it ends up
in 2 places.

Here's what one of the systems shows (this one happends to be R13B04, but
I also have R14B03 systems which exhibit the same behavior).

Erlang R13B04 (erts-5.7.5) [source] [64-bit] [smp:16:16] [rq:16]
[async-threads:0] [kernel-poll:false]

Eshell V5.7.5 (abort with ^G)
(erlang@host)1&gt; gen\\_event:which\\_handlers(error\\_logger).
[riak\\_err\\_handler]
(erlang@host)2&gt; application:get\\_all\\_env(sasl).
[{errlog\\_type,all},
 {sasl\\_error\\_logger,{file,"/mnt/erlang/sasl.log"}},
 {included\\_applications,[]}]
(erlang@host)3&gt; application:get\\_all\\_env(riak\\_err).
[{included\\_applications,[]}]

Also, I start with
 -boot start \\
 -sasl sasl\\_error\\_logger "{file,\\"/mnt/erlang/sasl.log\\"}"

and sasl is started prior to riak\\_err.

So is this expected behavior? I assume somehow sasl\\_report\\_tty\\_h is still
going somewhere, but I don't quite understand how.

Anyone have any ideas?

Thanks,

-Anthony

-- 
------------------------------------------------------------------------
Anthony Molinaro 

