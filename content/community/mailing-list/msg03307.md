---
title: "Re: Millions of buckets?"
description: ""
project: community
lastmod: 2011-05-11T12:25:58-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03307"
mailinglist_parent_id: "msg03304"
author_name: "Jared Morrow"
project_section: "mailinglistitem"
sent_date: 2011-05-11T12:25:58-07:00
---


It seems like what you are needing is a lot what the Yammer guys needed for
their streamie application. They have a video here:
http://vimeo.com/21598799 about how they modeled their data. It might be
pretty helpful for your application. If not, no harm done, you still get
to watch a video from some pretty smart people!

Hope it helps,
Jared

On Wed, May 11, 2011 at 12:39 PM, alexeypro  wrote:

&gt; I have a need to keep "notifications" for "users", where each user has
&gt; folders "a", "b" and "c". Also every note has "read" status
&gt; Original thought was to create bucket "notifications" which will have the
&gt; key user\\_id, and the value will be JSON object in some structure like this:
&gt; {
&gt; user\\_id: "3ds78df7df8d7f8df7",
&gt; folder: "a",
&gt; read: 0,
&gt; note: "my note here",
&gt; timestamp: 18298329329
&gt; }
&gt; I am using Riak Search, so say, if I need to find all unread notes in
&gt; folder
&gt; "a" for user\\_id "3ds78df7df8d7f8df7" I am doing:
&gt;
&gt; select?q=..
&gt;
&gt; user\\_id:3ds78df7df8d7f8df7 AND read:0
&gt;
&gt; This works ugly slow -- takes about 12 secs for my case with only 5mln of
&gt; records bringing 5 results back.
&gt; My next idea was to create buckets per every user. Say user
&gt; "3ds78df7df8d7f8df7" will get bucket: "3ds78df7df8d7f8df7\\_notes" and we
&gt; search within it, which should be faster.
&gt;
&gt; Please advise!
&gt;
&gt; --
&gt; View this message in context:
&gt; http://riak-users.197444.n3.nabble.com/Millions-of-buckets-tp2928567p2928567.html
&gt; Sent from the Riak Users mailing list archive at Nabble.com.
&gt;

