---
title: "Riak for Messaging Project Question"
description: ""
project: community
lastmod: 2012-02-22T14:11:00-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06688"
mailinglist_parent_id: "msg06687"
author_name: "charles"
project_section: "mailinglistitem"
sent_date: 2012-02-22T14:11:00-08:00
---

I'm building an online tool/app that is heavily dependent on messaging. This 
messaging is simple text, nothing complicated, and it will take place between 
my server back-end and the desktop/device. These messages would be very easy 
to store in Riak.
 
Each message is created after a specific user event e.g. a user posts a 
request, etc. In turn, each message created could spawn another 200 to 3,000 
messages (based on some other social networking features I can't say too much 
about to keep this short). I believe, in this case, we can assume each message 
will be a Riak Object.
 
All tolled, from my estimation, I'm looking at 400,000 messages/objects 
generated per user per year. With an estimated active user base of 20 million 
(I hope some day), that would be 8 billion keys generated each year. The size 
of each object is about 2Kb max. So that works out about 16 Terabytes of data 
generated per year.
 
1. Is Riak a good fit for this solution going up to and beyond 20 million users 
(i.e. terabytes upon terabytes added per year)?
 
2. I plan to use 2i, which means I would be using the LevelDB backend. Will 
this be reasonably performant for billions of keys added each year?
 
3. I'm using what I have here 
(http://wiki.basho.com/Cluster-Capacity-Planning.html) as my guide for 
capacity planning. I plan on using Rackspace Cloud Servers for this specific 
project. Can I just keep adding servers as the size of my data grows?!
 
4. From the guide mentioned in 3 above, it appears I will need about 400 
[4GbRAM 160GbHDD] servers for 20 million users (assuming an n\\_val of 4). This 
means I would need to add 20 servers annually for each million active users I 
add. Is it plausible to have an n\\_val of 4 for this many servers?! Wouldn't 
going higher just mean I'd have to add many more servers needlessly?!
 
5. Should I put all my keys in one bucket (considering I'm using 2i, does it 
matter)?!
 
I'd appreciate some assistance with this.
 
Thanks.
 
 

