---
title: "Re: Absolute consistency"
description: ""
project: community
lastmod: 2012-01-05T13:12:06-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06143"
mailinglist_parent_id: "msg06140"
author_name: "Aphyr"
project_section: "mailinglistitem"
sent_date: 2012-01-05T13:12:06-08:00
---



On 01/05/2012 12:53 PM, Tim Robinson wrote:

So with the original thread where with N=3 on 3 nodes. The developer
believed each node was getting a copy. When in fact 2 copies went to
a single node. So yes, there's redundancy and the "shock" value can
go away :) My apologies.

That said, I have no ability to assess how much data space that is
wasting, but it seems like potentially 1/3 - correct?

Another way to look at it, using the above noted case, is that I need
to double[1] the amount of hardware needed to achieve a single amount
of redundancy.

[1] not specifically, but effectively.


For the third time, no. Please read
http://wiki.basho.com/What-is-Riak%3F.html.

For 256 partitions, N=3:

Part Node
0 0
1 1
2 2
3 0
4 1
...
253 1
254 2
255 0

With n = 3, a key assigned to partition 0 will be stored on partition 0,
1, and 2.

Key Preflist Nodes
0 0,1,2 0,1,2
1 1,2,3 1,2,0
...
253 253,254,255 1,2,0
254 254,255,0 2,0,0 &lt;-- overlap!
255 255,0,1 0,0,1 &lt;-- overlap!

Only 1/128 of the data will reside on only two nodes. 127/128 of the
data will be distributed to three nodes. No data resides on only one
node. Data loss requires the simultaneous destruction of:

a. Any three nodes
b. Node 0 and 1
c. Node 0 and 2

This is true regardless of the number of nodes, so long as n does not
evenly divide N AND you are not using the workaround I linked to in my
previous post. If you do either of those things (use 4, 8, 16, or 32 
nodes instead of 3, or use the n\\_val workaround), the distribution will 
be even.


--Kyle

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

