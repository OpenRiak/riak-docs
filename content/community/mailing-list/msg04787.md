---
title: "Riak Search Precommit Hook in 1.0"
description: ""
project: community
lastmod: 2011-09-19T17:37:36-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg04787"
author_name: "Greg Pascale"
project_section: "mailinglistitem"
sent_date: 2011-09-19T17:37:36-07:00
---


Hi,

I've noticed that the Riak Search precommit hook behaves in a really odd and
non-standard way in Riak 1.0. It seems that setting search:true on a bucket
automatically causes the precommit hook to be installed, and setting
search:false automatically uninstalls it.

Ok, but if I set search true and then set precommit to [], it still shows
the search hook. Weird. And now if I set precommit to some other hook that I
wrote, it just slots it in before the search hook.

I find this really lame. I've been working on a precommit hook that needs to
come after the search hook, but that seems to be impossible now. Prior to
1.0, I could just issue the command

\\*curl -X PUT -d
'{"props":{"precommit":[{"mod":"riak\\_search\\_kv\\_hook","fun":"precommit"},
{}]}}' \\*

to install the hooks in the right order.

-- 
Greg
Clipboard
