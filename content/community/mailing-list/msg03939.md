---
title: "db.save() vs. db.update()"
description: ""
project: community
lastmod: 2011-07-05T15:31:03-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03939"
author_name: "Claus Guttesen"
project_section: "mailinglistitem"
sent_date: 2011-07-05T15:31:03-07:00
---


Hi.

When saving a new record using db.update() getting the record using
curl has alot more info:

curl "localhost:8098/riak/users/RQC6seqRIKkBNKQt65QMko3W66"
{"props":{"w":"quorum","r":"quorum","big\\_vclock":50,"old\\_vclock":86400,"n\\_val":3,"postcommit":[],"last\\_write\\_wins":false,"small\\_vclock":10,"allow\\_mult":false,"young\\_vclock":20,"rw":"quorum","pw":0,"dw":"quorum","linkfun":{"mod":"riak\\_kv\\_wm\\_link\\_walker","fun":"mapreduce\\_linkfun"},"name":"users","chash\\_keyfun":{"mod":"riak\\_core\\_util","fun":"chash\\_std\\_keyfun"},"basic\\_quorum":true,"notfound\\_ok":false,"pr":0,"precommit":[]},"club":"BBIL","mname":"","year":"1967","gender":"male","fname":"Claus","lname":"Guttesen"}%

When doing a db.save() with the same data I get:

curl "localhost:8098/riak/users/RQC6seqRIKkBNKQt65QMko3W66"
{"fname":"Claus","mname":"","lname":"Guttesen","year":"1967","club":"BBIL","gender":"male"}

If I do a db.save() first and then a db.update() the information is
also terse. Why is db.update() more verbose?

I'm using riak-js v. 0.4.0.

My idea was to add more information in addtion to name, club, year
born, gender. But when I edit the user and save it the previous data
gets overwritten. So I changed db.save() to db.update(), saved a new
user and noticed alot more info.

-- 
regards
Claus

When lenity and cruelty play for a kingdom,
the gentler gamester is the soonest winner.

Shakespeare

twitter.com/kometen

