---
title: "Re: Secondary Indexes with ProtoBuff"
description: ""
project: community
lastmod: 2012-01-19T10:14:43-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06329"
mailinglist_parent_id: "msg06322"
author_name: "Gal Barnea"
project_section: "mailinglistitem"
sent_date: 2012-01-19T10:14:43-08:00
---


Hi Russel
Thanks for the quick response and detailed explanation
I am using 1.0.2, so I will give it a try soon

Thanks
Gal

On Thu, Jan 19, 2012 at 6:01 PM, Russell Brown  wrote:

&gt; Hi Gal,
&gt; Which version of the client are you using?
&gt;
&gt; On 19 Jan 2012, at 08:19, Gal Barnea wrote:
&gt;
&gt; &gt; Hi
&gt; &gt; Is there a way to insert 2i fields using the PB Java client?
&gt; Yes, if you're using the current 1.0.x version.
&gt;
&gt; The way to do it is to add the indexes to the object you're storing. So if
&gt; you're storing an IRiakObject then using the builder, or straight on the
&gt; IRiakObject, just call
&gt;
&gt; addIndex(name, value);
&gt;
&gt; If you're storing some domain object (using the JSON converter) then you
&gt; can annotate fields with the @RiakIndex annotation.
&gt;
&gt; There's an example of both in the tests for the client[1][2].
&gt;
&gt; Cheers
&gt;
&gt; Russell
&gt;
&gt; [1]
&gt; https://github.com/basho/riak-java-client/blob/master/src/test/java/com/basho/riak/client/itest/ITestBucket.java#L186
&gt; [2]
&gt; https://github.com/basho/riak-java-client/blob/master/src/test/java/com/megacorp/commerce/Customer.java#L37and
&gt;
&gt; https://github.com/basho/riak-java-client/blob/master/src/test/java/com/basho/riak/client/itest/ITestORM.java#L176
&gt;
&gt; &gt; It seems that this is not possible, so I'm wondering what kind of
&gt; workarounds exists
&gt; &gt;
&gt; &gt; Is this something that can be done in a Post-Commit hook? if so, will
&gt; inserts still be faster than the HTTP interface?
&gt; &gt;
&gt; &gt; Thanks
&gt; &gt; Gal
&gt; &gt;
&gt; &gt;
