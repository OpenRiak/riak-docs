---
title: "Having N replicas more than nodes in the cluster"
description: ""
project: community
lastmod: 2010-05-11T08:07:50-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg00311"
author_name: "Germain Maurice"
project_section: "mailinglistitem"
sent_date: 2010-05-11T08:07:50-07:00
---

Hi,

I'd like to know how works Riak when my bucket has n\\_val = 3 and only 2 
physical nodes.
Does Riak make 3 copies of the bucket over the 2 nodes or it maintains 
only 2 copies of my bucket on the cluster ?


I'm doing tests of riak and i find some things weird.

I have a two nodes cluster and a bucket with n\\_val = 3.
I put more than 1 600 000 documents in the bucket and it takes less than 
200 GB with Innostore.

I shut down the second node with "q()." in a "riak console".
Firstly, there was no synchronisation of data on the first node, i 
assume it's better because very similar to a node crash.

Secondly, when i did a read request on a document with :
- ?r=1 -&gt; success
- ?r=2 -&gt; success
- ?r=3 -&gt; fail

An other question, "n replicas" means "1 + n copies" or "n copies" of 
the bucket ?


I really appreciate if you can explain me this behavior ?

Thank you
Best Regards,
--
Germain Maurice
Administrateur Système/Réseau
Tel : +33.(0)1.42.43.54.33

http://www.linkfluence.net
