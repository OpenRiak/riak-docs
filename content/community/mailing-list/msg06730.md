---
title: "Re: weakest link"
description: ""
project: community
lastmod: 2012-02-24T07:25:43-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06730"
mailinglist_parent_id: "msg06727"
author_name: "Jeremiah Peschka"
project_section: "mailinglistitem"
sent_date: 2012-02-24T07:25:43-08:00
---


---
Jeremiah Peschka
Managing Director, Brent Ozar PLF, LLC


On Fri, Feb 24, 2012 at 5:36 AM, gibraltar  wrote:

&gt; Hello,
&gt;
&gt; I'm founder of a very small startup (a.k.a one man show). Although I did
&gt; roll out a lot of critical piece of software to production environment
&gt; before, I was never responsible of the database or systems that it depended
&gt; on. Now, I'm responsible of those layers as well. Unlike many in this user
&gt; list I do not have any scaleability problem, nor huge data to deal with, at
&gt; least yet, and hopefully one day very soon. (It will have social aspect as
&gt; well, but later). However easy horizontal replication allows me to deploy
&gt; couple of Riak servers on a hosting site (to an environment I have no
&gt; control at all) so that I will have (relatively) peace of mind if I lose
&gt; one of the servers somehow. I am trying to relieve myself from admin work
&gt; as much as I if I can set up environment with correct choice of data
&gt; storage. This is the reason I have been considering riak seriously, since
&gt; my admin experience with any traditional databases are limited I am at the
&gt; same distance to SQL or NoSQL. I already developed my solution to almost
&gt; completion with Riak but now having doubts.
&gt;
&gt; 1) What should be the bare minimum number of Riak server to have that
&gt; security. (Sky is the limit for redundancy but I will limit myself only to
&gt; one site, multiple servers for now).
&gt;

You should have a minimum of 4 servers. When you increase the number of
servers, it's best practice to increase by powers of 2. You'll need to be
careful with your default ring size, though - see
https://wiki.basho.com/Cluster-Capacity-Planning.html#Ring-Size-Number-of-Partitionsfor
more info. Planning this initial ring size is critical for long term
success - otherwise you'll end up migrating to a new ring (although this
isn't the worst thing in the world).

&gt;
&gt; 2) Would anyone in the list recommend setting up Mysql or Postgresql
&gt; instead a NoSQL given current small size of my venture. Am I optimizing
&gt; prematurely. Again I am looking for security, ease of administration, and a
&gt; future proof architecture. I am losing a lot (SQL) but it's ok. I do need
&gt; transactions here and there but I mitigated it storing all in one object
&gt; for atomicity.
&gt;

This depends entirely on your querying structure. If you're performing a
lot of ad hoc queries, performing ad hoc reporting, require referential
integrity, require ACID properties, or are building complex aggregations
then MySQL or PostgreSQL is going to offer you a lot. If you're mainly
doing primary key look-ups, then Riak is a better choice. An RDBMS is a
very tried and true solution (especially PostgreSQL).

If your application doesn't need any RDBMS style features, then Riak is a
good fit.

I can tell you that a knowledgeable expert can make an RDBMS scale to
stupefying levels - both in terms of utilization and raw data stored. It's
a question of how and where you want to scale. Riak makes this easy. Need
more performance? Add a node. Need more storage? Add a node.


&gt;
&gt; 3) I read that people in this list mostly store secondary/derivative data
&gt; or data that they can load again. Is Riak mature enough to store
&gt; critical/primary data? A chain is as strong as its weakest link. So in
&gt; Riak's case what is that weakest link? Backend storage choice? bitcask?
&gt; leveldb? or riak-js? (I need 2i so my only option is leveldb.) Is Riak
&gt; (NoSQL in general) for storing (lots of) secondary data and processing it?
&gt; I will be storing data for other institutions whose customers will
&gt; generate. Although it does not involve money it does mean monetary
&gt; transaction.
&gt;

I think some folks on this list store primary data in Riak, too. In Riak's
case, the weakest link is going to be your storage subsystem. Storage is
usually the bottleneck in most data intensive applications and Riak is no
exception.

Your ability to manipulate, process, and aggregated data is only limited by
your imagination. Riak is a solid data store. I don't think I'd go running
multi-hour MapReduce queries across a Riak cluster, but there aren't really
a lot of situations I can think of where you'd be running gigantic MR jobs.


&gt;
&gt; 4) I tried writing 500K objects to both Postgresql and Riak. I used
&gt; nodejs/riak-js(http). My experience is that a) Postgresql is storing faster
&gt; than Riak b) Riak interface sometimes reporting EADDRINUSE(see below) and
&gt; some other errors randomly. Postgresql test did not generate even one
&gt; error. This blemished my sense of security towards Riak a bit but it could
&gt; be library stack I used. I wonder if this experience unique to me, or are
&gt; there anyone else who had similar experience in the list? (This could also
&gt; be due to node.js, so I am not sure where exactly to put the blame).
&gt;
&gt; { [Error: connect EADDRINUSE] code: 'EADDRINUSE', errno: 'EADDRINUSE',
&gt; syscall: 'connect' }
&gt;
&gt; In brief, I am trying to understand where Riak will likely fail me in
&gt; production, if it does.
&gt;

If you're running all of your Riak tests on one node, then Riak may very
well be slower. Riak's performance and stability benefits come from having
multiple nodes running at the same time.

I have no idea about your specific error message, though.


&gt;
&gt; Sorry for the long post/questions and I appreciate if I could pick your
&gt; mind.
&gt;
&gt; Thanks,
&gt; Gibraltar
&gt;
&gt;

