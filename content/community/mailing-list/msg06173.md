---
title: "Newbie question 3/3"
description: ""
project: community
lastmod: 2012-01-08T21:33:42-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06173"
author_name: "John DeTreville"
project_section: "mailinglistitem"
sent_date: 2012-01-08T21:33:42-08:00
---


(An earlier post seems not to have gone through. My apologies in the eventual 
case of a duplicate.)

I'm thinking of using Riak to replace a large Oracle system, and I'm trying to 
understand its guarantees. I have a few introductory questions; this is the 
third of three.

I would like to do two updates atomically, but of course I cannot. I imagine I 
could construct my own redo log, and perform a sequence of operations something 
like:

 write redo log entry (timestamp, A's update, B's update) to redo log
 update A
 update B
 delete redo log entry from redo log

Asynchronously, I could read dangling entries from the redo log and repeat 
them, deleting them upon success. (Let's imagine for simplicity that the 
updates are idempotent and commutative.) This seems doable, but it's not 
pretty. Is this the best I can do? Or should I think about the problem 
differently?

(BTW, I believe that secondary indexes won't help me.)

Cheers,
John
