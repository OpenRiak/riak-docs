---
title: "Re: riak-erlang-client mapred returns wrong object"
description: ""
project: community
lastmod: 2012-03-03T05:06:21-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06854"
mailinglist_parent_id: "msg06853"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2012-03-03T05:06:21-08:00
---


This is because the internal representation (record named riak\\_object) in
Riak is not identical to the external representation (record named
riakc\\_obj) in the client. Naturally, the functions in riakc\\_obj won't work
on the internal record of a different name. There's also no way to convert
a riak\\_object record directly to a riakc\\_obj record currently. However, if
you're already using internal modules to riak\\_kv (as is indicated in your
sample), simply use the riak\\_object module on those results.

Alternatively, you can use the riakc\\_pb\\_socket:get\\_index/\\* functions to
retrieve just the keys and then fetch the bucket/key pairs using the get/\\*
path.

On Sat, Mar 3, 2012 at 4:16 AM, Senthilkumar Peelikkampatti &lt;
senthilkumar.peelikkampa...@gmail.com&gt; wrote:

&gt; riak-erlang-client mapred with riak\\_kv\\_mapreduce:map\\_identity(true) is
&gt; returning riak\\_object instead of riakc\\_obj -- I tried multiple times and I
&gt; am not seeing riakc\\_obj.
&gt;
&gt; IndexSpec = {index, bucket(), &lt;&lt;"some\\_bin"&gt;&gt;, Bin}
&gt;
&gt; riakc\\_pb\\_socket:mapred(Pid, IndexSpec,
&gt; [riak\\_kv\\_mapreduce:map\\_identity(true)])
&gt;
&gt;
&gt; Note: It is very late night [03:10 AM CST] and I am fiddling with native
&gt; and riak pb client's so I may be wrong. However I crosschecked again and it
&gt; is still returning riak\\_object but not riakc\\_obj.
&gt;
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;


-- 
Sean Cribbs 
Software Engineer
Basho Technologies, Inc.
http://basho.com/
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

