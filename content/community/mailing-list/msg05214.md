---
title: "Re: List keys, new format, keys=stream"
description: ""
project: community
lastmod: 2011-10-20T11:01:49-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05214"
mailinglist_parent_id: "msg05210"
author_name: "Mark Steele"
project_section: "mailinglistitem"
sent_date: 2011-10-20T11:01:49-07:00
---


Here's a way to properly deal with streaming chunked HTTP encoding...

http://www.control-alt-del.org/2011/09/09/streaming-results-from-riak-over-http-in-php/

Just sayin'....

Mark

On Thursday 20 October 2011 12:40:00 Jonathan Langevin wrote:
&gt; Thanks Gordon.
&gt; 
&gt; So what is the recommended answer to this? Just skip the empty arrays?
&gt; 
&gt; I'm asking, as I'm extending my php client to support streaming, and want to
&gt; make sure we code for this properly.
&gt; 
&gt; Thanks!
&gt; On Oct 20, 2011 12:27 PM, "Gordon Tillman"  wrote:
&gt; 
&gt; &gt; Jonathan that is correct - it is just a result of the chunked encoding.
&gt; &gt;
&gt; &gt; --gordon
&gt; &gt;
&gt; &gt; On Oct 20, 2011, at 11:02 , Jonathan Langevin wrote:
&gt; &gt;
&gt; &gt; If I run a curl request to pull back a list of keys, streamed, the output
&gt; &gt; has multiple empty arrays, like so:
&gt; &gt;
&gt; &gt; $ curl -i http://localhost:8098/buckets/User/keys?keys=stream
&gt; &gt; HTTP/1.1 200 OK
&gt; &gt; Vary: Accept-Encoding
&gt; &gt; Transfer-Encoding: chunked
&gt; &gt; Server: MochiWeb/1.1 WebMachine/1.9.0 (participate in the frantic)
&gt; &gt; Date: Thu, 20 Oct 2011 15:58:54 GMT
&gt; &gt; Content-Type: application/json
&gt; &gt;
&gt; &gt;
&gt; &gt; {"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":["hmay"]}{"keys":[]}{"keys":["jlangevin"]}{"keys":["student"]}{"keys":[]}{"keys":[]}{"keys":
["rmay"]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":["eturner"]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":["kbrintle"]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}
{"keys":[]}{"keys":[]}{"keys":[]}{"keys":["admin"]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":["instructor"]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}
&gt; &gt;
&gt; &gt;
&gt; &gt; I assume this is a result of the chunked encoding? Or is this reflecting
&gt; &gt; empty results for keys that were deleted in the past?
&gt; &gt;
&gt; &gt; Just a note, this is a single-node cluster, with r,w,dw,nval=1
&gt; &gt;
&gt; &gt; 
&gt; &gt; \\* Jonathan Langevin
&gt; &gt; Manager, Information Technology
&gt; &gt; Loom Inc.
&gt; &gt; Wilmington, NC: (910) 241-0433 - jlange...@loomlearning.com -
&gt; &gt; www.loomlearning.com - Skype: intel352 \\*
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;

signature.asc
Description: This is a digitally signed message part.
