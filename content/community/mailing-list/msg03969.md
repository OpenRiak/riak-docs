---
title: "Re: riak-0.14.2 memory crash"
description: ""
project: community
lastmod: 2011-07-08T16:42:31-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg03969"
mailinglist_parent_id: "msg03968"
author_name: "Daniel Reverri"
project_section: "mailinglistitem"
sent_date: 2011-07-08T16:42:31-07:00
---


Can you check if an erl\\_crash.dump file was created? The crash dump should give 
some indication of which processes were taking up memory. 

The crashdump\\_viewer built into Erlang is very useful for reviewing crash 
dumps. 

Thanks
Dan

Sent from my iPhone

On Jul 8, 2011, at 4:18 PM, Sylvain Niles  wrote:

&gt; Our system had been humming along fine for a week and crashed today
&gt; with almost no load. This is the only thing in the erlang.log:
&gt; 
&gt; 
&gt; =INFO REPORT==== 8-Jul-2011::16:46:14 ===
&gt; [{alarm\\_handler,{clear,system\\_memory\\_high\\_watermark}}]
&gt; =INFO REPORT==== 8-Jul-2011::16:50:14 ===
&gt; [{alarm\\_handler,{set,{system\\_memory\\_high\\_watermark,[]}}}]
&gt; =INFO REPORT==== 8-Jul-2011::16:51:14 ===
&gt; [{alarm\\_handler,{clear,system\\_memory\\_high\\_watermark}}]/usr/local/src/riak-0.14.2/rel/riak/lib/os\\_mon-2.2.5/priv/bin/memsup:
&gt; Erlang has closed.
&gt; Erlang has closed
&gt; 
&gt; Crash dump was written to: erl\\_crash.dump
&gt; eheap\\_alloc: Cannot allocate 1824525600 bytes of memory (of type "heap").
&gt; 
&gt; 
&gt; Looking in the sasl-error log I see that an erlang function I wrote
&gt; was crashing in some cases:
&gt; 
&gt; \\*\\* Reason for termination = \\*\\* {error, {phase\\_error,
&gt; {error, {error,undef,
&gt; [{get\\_erl,past\\_events, [{r\\_object,&lt;&lt;"events"&gt;&gt;,
&gt; &lt;&lt;"LRs2PibmMZknPm44IMzoZflCHUP"&gt;&gt;,
&gt; [{r\\_content,
&gt; ...ETC
&gt; 
&gt; 
&gt; So I definitely need to fix my code, but I'm wondering if this is
&gt; expected behavior that this would cause a memory leak that eventually
&gt; brings down riak? I thought if the process running my module crashed
&gt; everything would just be garbage collected and that'd be the end of
&gt; it. Any advice on the right way to approach this would be great,
&gt; thanks!
&gt; 
&gt; -Sylvain
&gt; 
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

