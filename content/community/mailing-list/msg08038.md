---
title: "Best way of versioning POJOs/'schemas'"
description: ""
project: community
lastmod: 2012-07-23T23:49:15-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08038"
author_name: "Tim Pedersen"
project_section: "mailinglistitem"
sent_date: 2012-07-23T23:49:15-07:00
---


Hi All,

I'm working on a Riak-based Java project that involves creating a central 
repository of data (in Riak) aggregated from a number of other databases (SQL). 
Right now the approach I'm taking is to build a set of 'aggregate-root' style 
Java classes (e.g. a Person) that has lots of aggregate/list classes hanging 
off it (e.g. KnownAddresses, Offences, Charges, etc).

I'm using the Java client and am currently simply relying on the out-of-the-box 
DomainBuckets and POJO/Jackson/JSON serialisation when storing and retrieving 
these objects in Riak.

This app is likely to undergo (re)development over the next few years - with 
plenty of changes to the Java class 'schemas', and thus a need to deal with 
different versions of java classes over time.

&gt;From what I can see the standard DomainBucket/JSON deserialisation relies on 
&gt;the target class not changing (is this right?)

I watched a video with Kresten Krab Thorup talking about the work with the 
Danish Health dept; in his talk he mentioned they used Protocol Buffers with a 
line about this enabling them to deal with versions?? I'm a n00b wrt Protocol 
Buffers - is this perhaps the way we should be handling serialisation and 
versioning - instead of DomainBuckets??

Has anyone else tackled the problem of versioning of schemas/classes/POJOs? 
What approaches have you taken (and did it work)?

Cheers,

Tim


---------------------------------------------------------------------------------
Tim Pedersen

Senior Developer
Information Technology Services
Department of Police and Emergency Management

47 Liverpool St, Hobart, Tasmania, 7000

Phone 03 6230 2465
Mobile 0428 336 670
Email tim.peder...@police.tas.gov.au
----------------------------------------------------------------------------------

