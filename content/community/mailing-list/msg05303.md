---
title: "Re: secondary indexes: how fast they are?"
description: ""
project: community
lastmod: 2011-10-25T09:02:49-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05303"
mailinglist_parent_id: "msg05291"
author_name: "Rusty Klophaus"
project_section: "mailinglistitem"
sent_date: 2011-10-25T09:02:49-07:00
---


Hi Antonio,

Yes, a Secondary Index query is much faster than using a bucket input or key
filter. This is one of the reasons why we built Secondary Indexes, so this
is definitely a recommended use case.

Behind the scenes, the bucket input or key filter must examine all keys in
the system to pick out matching keys. Some backends do this more efficiently
than others, but in the general case it's an expensive operation in terms of
CPU and possibly disk, and not one we recommend you run frequently.

A Secondary Index query, on the other hand, simply needs to read from the
index. This operation generally takes a few disk seeks, less if that section
of disk is cached in memory, and it is an operation you can run within web
response time.

Best,
Rusty

On Tue, Oct 25, 2011 at 2:14 AM, Antonio Rohman Fernandez &lt;
roh...@mahalostudio.com&gt; wrote:

&gt; \\*\\*
&gt;
&gt; Hi all,
&gt;
&gt; I remember a previous discussion in the mailing-list about doing mapreduce
&gt; over an entire bucket '{"inputs":"products","query":[...]}' being very slow
&gt; independently of how many items that bucket would have stored in as Riak
&gt; would have to scan all memory in search for the keys, etc... so... how about
&gt; secondary indexes? are they a good alternative? faster? slow too?
&gt;
&gt; if I want to get all products with category "sport" using secondary indexes
&gt; like this:
&gt; http://xx.xx.xx.xx:8098/buckets/products/index/category\\_bin/sport
&gt; =&gt; {"keys": ["productA","productB",...,"productN"]}
&gt;
&gt; Will the keys array come in an speed-decent result? or wouldn't it be
&gt; recommended?
&gt; Thanks,
&gt; Rohman
&gt; [image: line] [image: logo]  \\*Antonio Rohman
&gt; Fernandez\\*
&gt; CEO, Founder & Lead Engineer
&gt; roh...@mahalostudio.com \\*Projects\\*
&gt; MaruBatsu.es 
&gt; PupCloud.com 
&gt; Wedding Album  [image: line]
&gt;

-- 
Rusty Klophaus

\\*Basho Technologies, Inc.\\*
11921 Freedom Drive, Suite 550
Reston, VA 20190
www.basho.com
