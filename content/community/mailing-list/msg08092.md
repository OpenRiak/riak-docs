---
title: "Re: LevelDB read performance"
description: ""
project: community
lastmod: 2012-07-26T15:39:39-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08092"
mailinglist_parent_id: "msg08088"
author_name: "John D. Rowell"
project_section: "mailinglistitem"
sent_date: 2012-07-26T15:39:39-07:00
---


Why not push the data (or references to it) to a queue (e.g. RabbitMQ) and
then run single-threaded consumers that work well with PBC? That would also
decouple the processes and allow you to scale them independently.

-jd

2012/7/26 Parnell Springmeyer 

&gt; I'm using Riak in a 5 node cluster with LevelDB for the backend (we store
&gt; A LOT of archivable data) on FreeBSD.
&gt;
&gt; The data is mapped out as follows: I have a set of database objects that
&gt; are closely linked to user accounts - I needed to be able to compose
&gt; complex queries on these objects including joins with the user data; so it
&gt; made sense to keep those objects in MySQL.
&gt;
&gt; I have software that takes those database objects and produces DAILY stats
&gt; for each object (so we have months/years of data for each database object).
&gt; These stats are what we store in Riak.
&gt;
&gt; Now, that application also updates the MySQL database object with the key
&gt; under which the stat object is stored in Riak for quick and easy compiling
&gt; of the "latest" data (since it's just a GET operation and not a M/R job).
&gt;
&gt; Mashing up this data for small sets of MySQL database objects is quick and
&gt; painless. But once it starts approaching &gt; 1000 objects I notice it slows
&gt; to a crawl and i notice Riak being pegged pretty hard (IOW it is Riak's
&gt; response).
&gt;
&gt; Now; here's the issue: with my web application I haven't figured out how
&gt; to use the RiakPBC connector - so we are going through the HTTP API. I have
&gt; a feeling this is where that bottle neck is occurring.
&gt;
&gt; Why do you ask? Because our Python web app is multi-threaded and the PBC
&gt; sockets don't play nice here. I'm not finding my experiments to solve this
&gt; very successful. So I wanted to ask the greater community if anyone HAS or
&gt; is willing to HELP me solve it!
&gt;
&gt; Thanks :)

