---
title: "Re: Upgrading 0.14.2 cluster to 1.2"
description: ""
project: community
lastmod: 2012-08-09T05:09:07-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08238"
mailinglist_parent_id: "msg08224"
author_name: "Sebastian Cohnen"
project_section: "mailinglistitem"
sent_date: 2012-08-09T05:09:07-07:00
---


I'm actually thinking about taking the risk. We only have a small 3-node 
cluster with ~50GB of data with relatively little traffic (and we don't have 
any 2i, nor do we use search or MR).

I'll backup the data files, the ring state and everything else I find and give 
it a try. If anything strange happens, we roll back and do the additional 1.1.4 
step.

Thanks for the information and help so far!

On 08.08.2012, at 19:57, Jon Meredith  wrote:

&gt; Only test coverage. We didn't run direct testing to 0.14.2 - we also 
&gt; deliberately made the decision not to remove some older code that would have 
&gt; broken 0.14 upgrades until the next major release. 
&gt; 
&gt; It all depends on your risk tolerance - we didn't make any file format 
&gt; changes to bitcask so your data should be safe. If you wanted to try it, I 
&gt; would take a backup of the ring directory in case you had to downgrade the 
&gt; node again for any reason.
&gt; 
&gt; On the newly upgraded node you could run riak\\_core\\_capability:all(). on the 
&gt; riak console, that would double-check that the settings matched the required 
&gt; rolling upgrade settings, and make sure you do a diff of your 
&gt; app.config/vm.args against the new package to check there aren't any settings 
&gt; missing.
&gt; 
&gt; Jon.
&gt; 
&gt; On Wed, Aug 8, 2012 at 11:39 AM, Sebastian Cohnen 
&gt;  wrote:
&gt; I'm curious, are there any special reasons for your recommendation?
&gt; 
&gt; On 08.08.2012, at 19:38, Jon Meredith  wrote:
&gt; 
&gt; &gt; I would recommend going 0.14.2 -&gt; 1.1.4 -&gt; 1.2, making sure you follow the 
&gt; &gt; pre-1.0 upgrade instructions on http://wiki.basho.com/Rolling-Upgrades.html
&gt; &gt;
&gt; &gt; Once you do the upgrade from 1.2, the capabilities system will kick in and 
&gt; &gt; the old legacy settings mentioned in the rolling upgrade will no longer be 
&gt; &gt; used (if you need to you can override them with the new capability override 
&gt; &gt; mechanism).
&gt; &gt;
&gt; &gt; Jon.
&gt; &gt;
&gt; &gt; On Wed, Aug 8, 2012 at 10:23 AM, Nathan Wilken  wrote:
&gt; &gt; Is an intermediate upgrade recommended? 0.14.2 --&gt; 1.0/1.1 --&gt; 1.2?
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; From: riak-users-boun...@lists.basho.com 
&gt; &gt; [riak-users-boun...@lists.basho.com] on behalf of Sean Cribbs 
&gt; &gt; [s...@basho.com]
&gt; &gt; Sent: Wednesday, August 08, 2012 6:35 AM
&gt; &gt; To: Sebastian Cohnen
&gt; &gt; Cc: riak-users@lists.basho.com
&gt; &gt; Subject: Re: Upgrading 0.14.2 cluster to 1.2
&gt; &gt;
&gt; &gt; Sebastian,
&gt; &gt;
&gt; &gt; While it might work, we did not specifically test upgrades from 0.14.2, 
&gt; &gt; only 1.0 and 1.1.
&gt; &gt;
&gt; &gt; On Wed, Aug 8, 2012 at 7:08 AM, Sebastian Cohnen 
&gt; &gt;  wrote:
&gt; &gt; Hey list,
&gt; &gt;
&gt; &gt; is it a good idea to upgrade a small (3 node) cluster straight to 1.2 from 
&gt; &gt; 0.14.2. Especially with riak's 1.2 capabilities negotiation, it feels like 
&gt; &gt; the upgrade process should be much simpler now? We don't do any M/R jobs 
&gt; &gt; currently and we are only using bitcask right now.
&gt; &gt;
&gt; &gt;
&gt; &gt; Best
&gt; &gt;
&gt; &gt; Sebastian
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; --
&gt; &gt; Sean Cribbs 
&gt; &gt; Software Engineer
&gt; &gt; Basho Technologies, Inc.
&gt; &gt; http://basho.com/
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; --
&gt; &gt; Jon Meredith
&gt; &gt; Platform Engineering Manager
&gt; &gt; Basho Technologies, Inc.
&gt; &gt; jmered...@basho.com
&gt; &gt;
&gt; 
&gt; 
&gt; 
&gt; 
&gt; -- 
&gt; Jon Meredith
&gt; Platform Engineering Manager
&gt; Basho Technologies, Inc.
&gt; jmered...@basho.com
&gt; 
