---
title: "Re: odd error on mapreduce"
description: ""
project: community
lastmod: 2011-08-31T06:20:32-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg04534"
mailinglist_parent_id: "msg04472"
author_name: "Giancarlo Frison"
project_section: "mailinglistitem"
sent_date: 2011-08-31T06:20:32-07:00
---


Thanks Bryan,

I skirt the problem using base64.

Giancarlo Frison

On Fri, Aug 26, 2011 at 1:11 PM, Bryan Fink  wrote:

&gt; On Fri, Aug 26, 2011 at 6:32 AM, Giancarlo Frison 
&gt; wrote:
&gt; &gt; If i serialize the body as Json I catch errors any more instead of
&gt; protobuf
&gt; &gt; object representation (application/octet-stream).
&gt; &gt; Would be an mapreduce bug?
&gt; &gt; Is it possibile to skirt any body parsing during the mapreduce? Just for
&gt; &gt; evaluating headers values?
&gt;
&gt; All objects passed through Javascript map or reduce phases must be
&gt; valid UTF-8-encoded JSON. There is no way to change that at this
&gt; time. Erlang map/reduce phases do not have such requirements.
&gt;
&gt; The fact that your earlier ProtocolBuffer-encoded object made it
&gt; through a Javascript phase was probably a fluke, based on the encoding
&gt; containing nothing that was completely invalid UTF-8. It probably
&gt; came through as a string, maybe with one or two odd characters
&gt; prepended.
&gt;
&gt; Hope that helps,
&gt; Bryan
&gt;
