---
title: "Re: Riak search and secondary indices in 1.0 clarification"
description: ""
project: community
lastmod: 2011-09-23T11:35:58-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg04849"
mailinglist_parent_id: "msg04846"
author_name: "Artem Kozarezov"
project_section: "mailinglistitem"
sent_date: 2011-09-23T11:35:58-07:00
---

&gt; - or enable multiple backends in the config file
&gt; - or specifically indicate the backend in the bucket prop
&gt; (which still requires the backend to be made available in app.config)


Your last two points there are the same thing - multi\\_backend. Either 
way, whichever backend receives the object, only the items stored in 
LevelDB will be available via indexes.


There seems to be a problem using indexes via multi\\_backend:

---
2011-09-23 22:28:11.205 [error] &lt;0.766.0&gt; gen\\_fsm &lt;0.766.0&gt; in state 
waiting\\_results terminated with reason: 
{error,{indexes\\_not\\_supported,riak\\_kv\\_multi\\_backend}}
2011-09-23 22:28:11.207 [error] &lt;0.766.0&gt; CRASH REPORT Process [] with 0 
neighbours crashed with reason: 
{error,{indexes\\_not\\_supported,riak\\_kv\\_multi\\_backend}}
2011-09-23 22:28:11.394 [error] &lt;0.306.0&gt; Supervisor 
riak\\_kv\\_index\\_fsm\\_sup had child undefined started with 
{riak\\_core\\_coverage\\_fsm,start\\_link,undefined} at &lt;0.766.0&gt; exit with 
reason {error,{indexes\\_not\\_supported,riak\\_kv\\_multi\\_backend}} in context 
child\\_terminated
2011-09-23 22:28:11.395 [error] &lt;0.539.0&gt; webmachine error: 
path="/buckets/phpSession/index/expires\\_int/0/1316802491"

{error,{error,{indexes\\_not\\_supported,riak\\_kv\\_multi\\_backend}}}
---

My configuration:

 {riak\\_kv, [
 %% Storage\\_backend specifies the Erlang module defining the 
storage

 %% mechanism that will be used on this node.
 {storage\\_backend, riak\\_kv\\_multi\\_backend},
 {multi\\_backend\\_default, &lt;&lt;"leveldb"&gt;&gt;},
 {multi\\_backend, [
 {&lt;&lt;"bitcask"&gt;&gt;, riak\\_kv\\_bitcask\\_backend, [
 {data\\_root, "/var/lib/riak/bitcask"}
 ]},
 {&lt;&lt;"leveldb"&gt;&gt;, riak\\_kv\\_eleveldb\\_backend, [
 {data\\_root, "/var/lib/riak/leveldb"}
 ]}
 ]},
