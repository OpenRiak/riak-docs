---
title: "Re: Re-building a dev riak tree"
description: ""
project: community
lastmod: 2012-02-16T08:24:52-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg06622"
mailinglist_parent_id: "msg06621"
author_name: "Jeremiah Peschka"
project_section: "mailinglistitem"
sent_date: 2012-02-16T08:24:52-08:00
---


Cool! Thanks for your help on this. Now I can keep breaking future versions
of Riak.
---
Jeremiah Peschka
Managing Director, Brent Ozar PLF, LLC


On Thu, Feb 16, 2012 at 7:30 AM, Sean Cribbs  wrote:

&gt; Shoot. That make target should probably have its dependencies changed so
&gt; it doesn't rebuild devrel unless necessary. Anyway, here's an equivalent
&gt; bash script that does what you want. Run it from the top-level directory of
&gt; your clone.
&gt;
&gt; for i in 1 2 3 4; do for dep in deps/\\*; do rm -rf dev/dev$i/lib/`basename
&gt; $dep`-\\* && ln -sf `pwd -P`/$dep dev/dev$i/lib; done; done
&gt;
&gt; Yes, you should be sure to run get-deps and update-deps to get
&gt; riak\\_control and such, before running the previous command.
&gt;
&gt; On Thu, Feb 16, 2012 at 1:51 AM, Jeremiah Peschka &lt;
&gt; jeremiah.pesc...@gmail.com&gt; wrote:
&gt;
&gt;&gt; I think I am tired or something, `make stagedevrel` produces an error:
&gt;&gt;
&gt;&gt; $ make stagedevrel
&gt;&gt; mkdir -p dev
&gt;&gt; (cd rel && ../rebar generate target\\_dir=../dev/dev1
&gt;&gt; overlay\\_vars=vars/dev1\\_vars.config)
&gt;&gt; ==&gt; rel (generate)
&gt;&gt; ERROR: Release target directory
&gt;&gt; "/Users/jeremiah/Projects/riak/rel/../dev/dev1" already exists!
&gt;&gt; make: \\*\\*\\* [dev1] Error 1
&gt;&gt;
&gt;&gt; ---
&gt;&gt; Jeremiah Peschka
&gt;&gt; Managing Director, Brent Ozar PLF, LLC
&gt;&gt;
&gt;&gt;
&gt;&gt; On Wed, Feb 15, 2012 at 10:42 PM, Jeremiah Peschka &lt;
&gt;&gt; jeremiah.pesc...@gmail.com&gt; wrote:
&gt;&gt;
&gt;&gt;&gt; Thanks!
&gt;&gt;&gt;
&gt;&gt;&gt; I assume, too, that since riak control is now a requirement I should do
&gt;&gt;&gt; `make deps`, `make all`, `make stagedevrel` ?
&gt;&gt;&gt;
&gt;&gt;&gt; ---
&gt;&gt;&gt; Jeremiah Peschka
&gt;&gt;&gt; Managing Director, Brent Ozar PLF, LLC
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; On Wed, Feb 15, 2012 at 10:31 PM, Sean Cribbs  wrote:
&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Jeremiah,
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; `make stagedevrel` is what you want.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; On Thu, Feb 16, 2012 at 1:23 AM, Jeremiah Peschka &lt;
&gt;&gt;&gt;&gt; jeremiah.pesc...@gmail.com&gt; wrote:
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Let's say that I have a copy of the riak 1.0.0 source in
&gt;&gt;&gt;&gt;&gt; ~/src/basho/riak and that I've built a local 4 node clustering using `make
&gt;&gt;&gt;&gt;&gt; devrel`. I've gone through and made some configuration changes for working
&gt;&gt;&gt;&gt;&gt; on the .NET client. Now that 1.1 is out, I'd like to test the 1.1 branch
&gt;&gt;&gt;&gt;&gt; against my current client code.
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Is there a way to rebuild my 4 node cluster without wiping out my
&gt;&gt;&gt;&gt;&gt; configuration?
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; I spoke with Ryan about this at Surge and he showed me a trick, but I
&gt;&gt;&gt;&gt;&gt; can't recall how to get this working. Any help would be appreciated.
&gt;&gt;&gt;&gt;&gt; ---
&gt;&gt;&gt;&gt;&gt; Jeremiah Peschka
&gt;&gt;&gt;&gt;&gt; Managing Director, Brent Ozar PLF, LLC
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt;&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; --
&gt;&gt;&gt;&gt; Sean Cribbs 
&gt;&gt;&gt;&gt; Software Engineer
&gt;&gt;&gt;&gt; Basho Technologies, Inc.
&gt;&gt;&gt;&gt; http://basho.com/
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;
&gt;
&gt;
&gt; --
&gt; Sean Cribbs 
&gt; Software Engineer
&gt; Basho Technologies, Inc.
&gt; http://basho.com/
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

