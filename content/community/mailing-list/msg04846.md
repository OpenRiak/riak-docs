---
title: "Riak search and secondary indices in 1.0 clarification"
description: ""
project: community
lastmod: 2011-09-23T09:18:36-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg04846"
author_name: "Alexander Sicular"
project_section: "mailinglistitem"
sent_date: 2011-09-23T09:18:36-07:00
---


Hello All,

I've been fumbling through the wiki and the various blog posts, emails, 
announcements and want to just outline my understanding of search/indices in 
1.0. Let me outline them:

- Riak search is not enabled by default 
- To enable riak search set enabled to true here: 
https://github.com/basho/riak/blob/riak-1.0.0rc1/rel/files/app.config#L145
- To enable search on a bucket you must augment the bucket properties by 
sending the bucket the following json: { "search" : true }
- Riak search will work regardless of which backend your data is in because it 
keeps its data in a separate bucket which uses merge\\_index as the backend

(this is where it gets fuzzy)
- Riak search and secondary indices may be used in the same cluster at the same 
time and even on the same bucket at the same time.
- Secondary indices are "enabled" on a per key basis by utilizing the correct 
header syntax.
- In order for data to have a secondary index the backend for that bucket needs 
to be leveldb because index data is kept in the same bucket as key/value data[0]
- in order for you to be able to use leveldb, you need to do one of the 
following:
 - either direct riak to use leveldb as the default backend here: 
https://github.com/basho/riak/blob/riak-1.0.0rc1/rel/files/app.config#L46 
 - or enable multiple backends in the config file 
 - or specifically indicate the backend in the bucket prop (which still 
requires the backend to be made available in app.config)


In short, is there a canonical reference somewhere that I'm jut missing? 

Thanks gang,

-Alexander Sicular

@siculars
http://siculars.posterous.com

[0] "LevelDB stores data in a defined order, exactly what Secondary Indexes 
needed, and it is actually versatile enough to manage both the index data AND 
the object's value."
http://blog.basho.com/2011/09/14/Secondary-Indexes-in-Riak/

