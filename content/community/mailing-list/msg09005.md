---
title: "Re: riakc doesn't save metadata properly?"
description: ""
project: community
lastmod: 2012-10-22T14:08:05-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg09005"
author_name: "David Parfitt"
project_section: "mailinglistitem"
sent_date: 2012-10-22T14:08:05-07:00
---


Hello Metin -

 Sorry for the delay. At the moment, all metadata needs to be stored
under the &lt;&lt;"X-Riak-Meta"&gt;&gt; dict key. The following example
illustrates how this works:

%% To store metadata:
Object = riakc\\_obj:new(&lt;&lt;"groceries"&gt;&gt;, &lt;&lt;"mine"&gt;&gt;, &lt;&lt;"eggs & bacon"&gt;&gt;).
MetaData = dict:from\\_list([{&lt;&lt;"X-Riak-Meta"&gt;&gt;, [{"Foo", "Bar"}]}]),
Object2 = riakc\\_obj:update\\_metadata(Object, MetaData).
riakc\\_pb\\_socket:put(Pid, Object2).

%% To retrieve metadata:
{ok, O} = riakc\\_pb\\_socket:get(Pid, &lt;&lt;"groceries"&gt;&gt;, &lt;&lt;"mine"&gt;&gt;).
{ok, MD} = dict:find(&lt;&lt;"X-Riak-Meta"&gt;&gt;, riakc\\_obj:get\\_metadata(O)).

We're kicking around ways to improve this in the future.

Cheers -
Dave

On Fri, Oct 19, 2012 at 8:31 AM, Metin Akat  wrote:
&gt; I am trying to do something like:
&gt;
&gt; Meta1 = dict:store(&lt;&lt;"ver"&gt;&gt;, Ver, Meta0),
&gt; Obj1 = riakc\\_obj:update\\_metadata(Obj, Meta1),
&gt;
&gt; and then save the object. But on a subsequent read, the metadata k/v pair is
&gt; not there.
&gt;
&gt; Is there anything special that needs to be done for this to work, or is this
&gt; illegal way to use Riak?
&gt;
