---
title: "Re: Dynamic default bucket props"
description: ""
project: community
lastmod: 2011-10-03T14:18:52-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05006"
mailinglist_parent_id: "msg05003"
author_name: "Andy Skelton"
project_section: "mailinglistitem"
sent_date: 2011-10-03T14:18:52-07:00
---


While writing a detailed reply I realized that a single default
post-commit hook will do. The hook would get the bucket name from the
object and then decide what to do. Thanks for the nudge. :-)

Andy

On Mon, Oct 3, 2011 at 3:44 PM, Ryan Zezeski  wrote:
&gt; Andy,
&gt; Not crazy at all.  Another issue with adding the hook for each foo\\* bucket
&gt; is that you increase the size of the ring which must be gossiped between
&gt; nodes.  We recently added something called "bucket fixups" to 1.0 that sorta
&gt; do what you want but only for buckets with custom properties.  ATM, there is
&gt; no way to do this for all buckets across the board.
&gt; If you're just talking about a precommit hook you could put the logic in the
&gt; hook itself and match against the bucket name there.  Care to elaborate more
&gt; on your use case?  Maybe there is another way.
&gt; -Ryan
&gt;
&gt; On Fri, Sep 23, 2011 at 5:22 PM, Andy Skelton  wrote:
&gt;&gt;
&gt;&gt; I would like to use bucket names to determine default bucket props
&gt;&gt; such as hooks. For example, if all buckets matching foo\\* should have a
&gt;&gt; certain post-commit hook, I don't want to have to set those bucket
&gt;&gt; props before I can put keys in the buckets.
&gt;&gt;
&gt;&gt; My preferred solution would be a config option that takes a mod/fun
&gt;&gt; instead of a proplist.
&gt;&gt;
&gt;&gt; In riak\\_core\\_bucket, instead of always treating
&gt;&gt; app\\_helper:get\\_env(riak\\_core, default\\_bucket\\_props) as a list it would
&gt;&gt; also look for a tuple {M, F} and in that case call M:F(Name) which
&gt;&gt; would return a list.
&gt;&gt;
&gt;&gt; Sound crazy? :)
&gt;&gt;
&gt;&gt; Andy Skelton
&gt;&gt; Automattic
&gt;
&gt;

