---
title: "Re: badarg ets delete"
description: ""
project: community
lastmod: 2010-09-16T16:38:39-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg01090"
mailinglist_parent_id: "msg01089"
author_name: "Andy Gross"
project_section: "mailinglistitem"
sent_date: 2010-09-16T16:38:39-07:00
---


Hi Michael,

These errors are almost certainly harmless and being thrown when empty,
non-owned vnodes get shut down.

It appears that in some cases, the underlying ets table might already be
deleted/GC'd by the time BackendModule:stop tries to explicitly delete it.
 I've opened this bug to track the issue:
http://issues.basho.com/show\\_bug.cgi?id=723

- Andy

--
Andy Gross 
VP, Engineering
Basho Technologies, Inc.
http://basho.com




On Thu, Sep 16, 2010 at 3:59 PM, Michael Colussi  wrote:

&gt;
&gt; Hey guys I have an application using Riak 0.12 that does puts, gets, and
&gt; updates. It works fine but I get these random error reports in my logs.
&gt; Any ideas?
&gt;
&gt; ERROR &lt;0.149.0&gt; \\*\\* Generic server &lt;0.149.0&gt; terminating
&gt; \\*\\* Last message in was stop
&gt; \\*\\* When Server state == {state,139315}
&gt; \\*\\* Reason for termination ==
&gt; \\*\\* {badarg,[{ets,delete,[139315]},
&gt; {riak\\_kv\\_ets\\_backend,srv\\_stop,1},
&gt; {riak\\_kv\\_ets\\_backend,handle\\_call,3},
&gt; {gen\\_server,handle\\_msg,5},
&gt; {proc\\_lib,init\\_p\\_do\\_apply,3}]}
&gt; ERROR &lt;0.149.0&gt; crash\\_report [[{initial\\_call,
&gt;
&gt; {riak\\_kv\\_ets\\_backend,init,['Argument\\_\\_1']}},
&gt; {pid,&lt;0.149.0&gt;},
&gt; {registered\\_name,[]},
&gt; {error\\_info,
&gt; {exit,
&gt; {badarg,
&gt; [{ets,delete,[139315]},
&gt; {riak\\_kv\\_ets\\_backend,srv\\_stop,1},
&gt; {riak\\_kv\\_ets\\_backend,handle\\_call,3},
&gt; {gen\\_server,handle\\_msg,5},
&gt; {proc\\_lib,init\\_p\\_do\\_apply,3}]},
&gt; [{gen\\_server,terminate,6},
&gt; {proc\\_lib,init\\_p\\_do\\_apply,3}]}},
&gt; {ancestors,
&gt;
&gt; [&lt;0.148.0&gt;,riak\\_core\\_vnode\\_sup,riak\\_core\\_sup,
&gt; &lt;0.58.0&gt;]},
&gt; {messages,[]},
&gt; {links,[&lt;0.148.0&gt;]},
&gt; {dictionary,[]},
&gt; {trap\\_exit,false},
&gt; {status,running},
&gt; {heap\\_size,377},
&gt; {stack\\_size,24},
&gt; {reductions,243}],
&gt; []]
&gt; ERROR &lt;0.148.0&gt; \\*\\* State machine &lt;0.148.0&gt; terminating
&gt; \\*\\* Last event in was timeout
&gt; \\*\\* When State == active
&gt; \\*\\* Data == {state,159851741583067506678528028578343455274867621888,
&gt; riak\\_kv\\_vnode,
&gt;
&gt; {state,159851741583067506678528028578343455274867621888,
&gt; riak\\_kv\\_ets\\_backend,&lt;0.149.0&gt;,
&gt; {kv\\_lru,100,147509,143412,151606},
&gt; {dict,0,16,16,8,80,48,
&gt;
&gt; {[],[],[],[],[],[],[],[],[],[],[],[],[],
&gt; [],[],[]},
&gt;
&gt; {{[],[],[],[],[],[],[],[],[],[],[],[],[],
&gt; [],[],[]}}},
&gt; true},
&gt; undefined,none}
&gt; \\*\\* Reason for termination =
&gt; \\*\\* {{badarg,[{ets,delete,[139315]},
&gt; {riak\\_kv\\_ets\\_backend,srv\\_stop,1},
&gt; {riak\\_kv\\_ets\\_backend,handle\\_call,3},
&gt; {gen\\_server,handle\\_msg,5},
&gt; {proc\\_lib,init\\_p\\_do\\_apply,3}]},
&gt; {gen\\_server,call,[&lt;0.149.0&gt;,stop]}}
&gt; ERROR &lt;0.148.0&gt; crash\\_report [[{initial\\_call,
&gt; {riak\\_core\\_vnode,init,['Argument\\_\\_1']}},
&gt; {pid,&lt;0.148.0&gt;},
&gt; {registered\\_name,[]},
&gt; {error\\_info,
&gt; {exit,
&gt; {{badarg,
&gt; [{ets,delete,[139315]},
&gt; {riak\\_kv\\_ets\\_backend,srv\\_stop,1},
&gt; {riak\\_kv\\_ets\\_backend,handle\\_call,3},
&gt; {gen\\_server,handle\\_msg,5},
&gt; {proc\\_lib,init\\_p\\_do\\_apply,3}]},
&gt; {gen\\_server,call,[&lt;0.149.0&gt;,stop]}},
&gt; [{gen\\_fsm,terminate,7},
&gt; {proc\\_lib,init\\_p\\_do\\_apply,3}]}},
&gt; {ancestors,
&gt;
&gt; [riak\\_core\\_vnode\\_sup,riak\\_core\\_sup,&lt;0.58.0&gt;]},
&gt; {messages,
&gt; [{'EXIT',&lt;0.149.0&gt;,
&gt; {badarg,
&gt; [{ets,delete,[139315]},
&gt; {riak\\_kv\\_ets\\_backend,srv\\_stop,1},
&gt; {riak\\_kv\\_ets\\_backend,handle\\_call,3},
&gt; {gen\\_server,handle\\_msg,5},
&gt; {proc\\_lib,init\\_p\\_do\\_apply,3}]}}]},
&gt; {links,[&lt;0.60.0&gt;]},
&gt; {dictionary,[]},
&gt; {trap\\_exit,true},
&gt; {status,running},
&gt; {heap\\_size,377},
&gt; {stack\\_size,24},
&gt; {reductions,952}],
&gt; []]
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

