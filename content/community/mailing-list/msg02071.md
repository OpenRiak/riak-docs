---
title: "Re: Getting all the Keys"
description: ""
project: community
lastmod: 2011-01-22T18:46:20-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg02071"
mailinglist_parent_id: "msg02065"
author_name: "Thomas Burdick"
project_section: "mailinglistitem"
sent_date: 2011-01-22T18:46:20-08:00
---


I mistakenly didn't send a reply to the whole list, but given what everyone
is saying I think I "get it" now and the reasoning.

Given all of that it seems pretty clear that if I wanted to do what I'm
talking about purely in the context of riak using links might work or a
bucket containing keys and values that represent a data structure like a
list or btree might work. But either way I guess its up to me if I want to
make a index/faster method of traversal of keys. Thats fine, I accept thats
the cost of using a dynamo database for now :-)

Thanks for all the insights and comments.

Cheers,
Tom Burdick

On Sat, Jan 22, 2011 at 7:22 PM, Sean Cribbs  wrote:

&gt; On Jan 22, 2011, at 4:15 PM, Thomas Burdick wrote:
&gt;
&gt; &gt; \\* Why is key listing so slow?
&gt;
&gt; It is slow because, even if the keys are in RAM, you have to scan roughly
&gt; all of the keys in the cluster to get a listing for a single bucket. As a
&gt; certain person is fond of saying, "full table scan is full table scan".
&gt; There are ways to improve this, but without single-arbiters of state (and
&gt; points of failure) it is very costly.
&gt;
&gt; &gt; \\* What do people do in the context of purely using riak to do what I
&gt; want, have a big set of keys to iterate over?
&gt;
&gt; As others have said so eloquently, they don't, they use something else. Or
&gt; they try to minimize how frequently they do it. Part of the current
&gt; revolution in data storage is about realizing that no one tool is going to
&gt; completely fit your needs, and that that's good and right. Anyone who tells
&gt; you otherwise is selling you a bill of goods.
&gt;
&gt; To understand why listing keys is difficult, you have to understand Riak's
&gt; (and Dynamo's) original design motivations:
&gt;
&gt; \\* To be basically available at all times for reads and writes, which in
&gt; turn means to be tolerant of machine and network failures.
&gt; \\* To provide low-latency random access to large data sets. (Note I didn't
&gt; say an entire data set.)
&gt; \\* To scale linearly with minimal operational complexity.
&gt;
&gt; Everything has tradeoffs - these are the ones we chose with Riak. Now, we
&gt; (Basho) are actively trying to create ways to make discovering your data
&gt; easier (key-filters are one of them, as Justin mentioned we're discussing
&gt; counters and indices), but the majority of people who use Riak have ways of
&gt; discovering or knowing keys ahead of time. If that's not your case, you
&gt; should look into other solutions; some good ones have been mentioned in this
&gt; thread. That said, we hear your pain and are working hard to improve
&gt; usability while maintaining the properties discussed above.
&gt;
&gt; Cheers,
&gt;
&gt; Sean Cribbs 
&gt; Developer Advocate
&gt; Basho Technologies, Inc.
&gt; http://basho.com/
&gt;
&gt;
\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

