---
title: "Re: List keys, new format, keys=stream"
description: ""
project: community
lastmod: 2011-10-20T09:51:24-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05211"
mailinglist_parent_id: "msg05210"
author_name: "Jonathan Langevin"
project_section: "mailinglistitem"
sent_date: 2011-10-20T09:51:24-07:00
---


Perfect, thanks!
On Oct 20, 2011 12:48 PM, "Gordon Tillman"  wrote:

&gt; On Oct 20, 2011, at 11:40 , Jonathan Langevin wrote:
&gt;
&gt; Thanks Gordon.
&gt;
&gt; So what is the recommended answer to this? Just skip the empty arrays?
&gt;
&gt; That is exactly what I am doing with my "dump bucket" code - I have not
&gt; noticed so large a percentage of empty keys arrays coming back in the
&gt; chuncked encoding, however, I often do get some and that is even w/o having
&gt; done any deletions.
&gt;
&gt; --gordon
&gt;
&gt; I'm asking, as I'm extending my php client to support streaming, and want
&gt; to make sure we code for this properly.
&gt;
&gt; Thanks!
&gt; On Oct 20, 2011 12:27 PM, "Gordon Tillman"  wrote:
&gt;
&gt;&gt; Jonathan that is correct - it is just a result of the chunked encoding.
&gt;&gt;
&gt;&gt; --gordon
&gt;&gt;
&gt;&gt; On Oct 20, 2011, at 11:02 , Jonathan Langevin wrote:
&gt;&gt;
&gt;&gt; If I run a curl request to pull back a list of keys, streamed, the output
&gt;&gt; has multiple empty arrays, like so:
&gt;&gt;
&gt;&gt; $ curl -i http://localhost:8098/buckets/User/keys?keys=stream
&gt;&gt; HTTP/1.1 200 OK
&gt;&gt; Vary: Accept-Encoding
&gt;&gt; Transfer-Encoding: chunked
&gt;&gt; Server: MochiWeb/1.1 WebMachine/1.9.0 (participate in the frantic)
&gt;&gt; Date: Thu, 20 Oct 2011 15:58:54 GMT
&gt;&gt; Content-Type: application/json
&gt;&gt;
&gt;&gt;
&gt;&gt; {"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":["hmay"]}{"keys":[]}{"keys":["jlangevin"]}{"keys":["student"]}{"keys":[]}{"keys":[]}{"keys":["rmay"]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":["eturner"]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":["kbrintle"]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":["admin"]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":["instructor"]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}{"keys":[]}
&gt;&gt;
&gt;&gt;
&gt;&gt; I assume this is a result of the chunked encoding? Or is this reflecting
&gt;&gt; empty results for keys that were deleted in the past?
&gt;&gt;
&gt;&gt; Just a note, this is a single-node cluster, with r,w,dw,nval=1
&gt;&gt;
&gt;&gt; 
&gt;&gt; \\* Jonathan Langevin
&gt;&gt; Manager, Information Technology
&gt;&gt; Loom Inc.
&gt;&gt; Wilmington, NC: (910) 241-0433 - jlange...@loomlearning.com -
&gt;&gt; www.loomlearning.com - Skype: intel352 \\*
&gt;&gt;
&gt;
