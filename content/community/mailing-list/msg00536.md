---
title: "Re: ripple link bug"
description: ""
project: community
lastmod: 2010-06-08T14:00:16-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg00536"
mailinglist_parent_id: "msg00535"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2010-06-08T14:00:16-07:00
---


Creating tags and using the wildcard when doing a link-walking query are two 
different operations. There is no default tag.

Sean Cribbs 
Developer Advocate
Basho Technologies, Inc.
http://basho.com/

On Jun 8, 2010, at 4:58 PM, francisco treacy wrote:

&gt; IIRC Riak requires a tag and otherwise client libraries just provide
&gt; "\\_" (right?)
&gt; 
&gt; So probably @robject.to\\_link should return a "\\_" in the tag field by
&gt; default - instead of nil.
&gt; 
&gt; I'm sorry i have 0 time to provide a patch :(
&gt; 
&gt; Francisco
&gt; 
&gt; 2010/6/8 Sean Cribbs :
&gt;&gt; Francisco,
&gt;&gt; 
&gt;&gt; Thanks for that, I'll either make it be required or raise an exception. The 
&gt;&gt; Ruby API should better guide you down the golden path - tags are required on 
&gt;&gt; the Riak side, so they should on the Ruby side.
&gt;&gt; 
&gt;&gt; Sean Cribbs 
&gt;&gt; Developer Advocate
&gt;&gt; Basho Technologies, Inc.
&gt;&gt; http://basho.com/
&gt;&gt; 
&gt;&gt; On Jun 8, 2010, at 4:48 PM, francisco treacy wrote:
&gt;&gt; 
&gt;&gt;&gt; The following code yields an exception
&gt;&gt;&gt; 
&gt;&gt;&gt; item = client['items']['item']
&gt;&gt;&gt; catalog = client['catalogs']['test']
&gt;&gt;&gt; link = item.to\\_link
&gt;&gt;&gt; catalog.links &lt;&lt; link
&gt;&gt;&gt; catalog.store
&gt;&gt;&gt; 
&gt;&gt;&gt; (...)
&gt;&gt;&gt; /Users/ftreacy/.rvm/gems/ruby-1.9.1-p378/gems/riak-client-0.7.0/lib/riak/client/curb\\_backend.rb:63:in
&gt;&gt;&gt; `perform': Expected [200, 204, 300] from Riak but received 400.
&gt;&gt;&gt; Invalid Link header. Links must be of the form (Riak::FailedRequest)
&gt;&gt;&gt; ; riaktag="TAG"
&gt;&gt;&gt; from 
&gt;&gt;&gt; /Users/ftreacy/.rvm/gems/ruby-1.9.1-p378/gems/riak-client-0.7.0/lib/riak/client/http\\_backend.rb:92:in
&gt;&gt;&gt; `put'
&gt;&gt;&gt; from 
&gt;&gt;&gt; /Users/ftreacy/.rvm/gems/ruby-1.9.1-p378/gems/riak-client-0.7.0/lib/riak/robject.rb:122:in
&gt;&gt;&gt; `store'
&gt;&gt;&gt; 
&gt;&gt;&gt; This is because a 'tag' is not set, but tags shouldn't be required.
&gt;&gt;&gt; 
&gt;&gt;&gt; (Consider setting link.tag = "something" before line 4, and it will
&gt;&gt;&gt; work correctly).
&gt;&gt;&gt; 
&gt;&gt;&gt; Francisco
&gt;&gt;&gt; 
&gt;&gt;&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt;&gt;&gt; riak-users mailing list
&gt;&gt;&gt; riak-users@lists.basho.com
&gt;&gt;&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;&gt; 
&gt;&gt; 


\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

