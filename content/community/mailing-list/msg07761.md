---
title: "Re: JSON-Encoding from riakc"
description: ""
project: community
lastmod: 2012-06-24T07:46:03-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg07761"
mailinglist_parent_id: "msg07760"
author_name: "Sean Cribbs"
project_section: "mailinglistitem"
sent_date: 2012-06-24T07:46:03-07:00
---


Florian,

Also if your value is a proplist and you use the content-type of
"application/x-erlang-binary", then Search will automatically extract the
values as it does for JSON and XML. See
https://github.com/basho/riak\\_search/blob/master/src/riak\\_search\\_kv\\_erlang\\_extractor.erl

On Sun, Jun 24, 2012 at 6:11 AM, Erik Søe Sørensen  wrote:

&gt; One answer is: dict:to\\_list/1 and dict:from\\_list may be your friends.
&gt; Another is: Are you sure that dict is appropriate for your data? If the
&gt; number of entries is bounded and does not exceed around a dozen, then a
&gt; property list might be faster.
&gt; (Although I'd advice you to use lists:keyfind(Key, 1, PropList) rather
&gt; than proplist:get\\_value(); there's a significant speed difference.)
&gt; Thirdly, you can of course translate to JSON and back, but keeping the
&gt; data on Erlang term form is probably both simpler and faster.
&gt;
&gt; /Erik
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; From: riak-users-boun...@lists.basho.com [
&gt; riak-users-boun...@lists.basho.com] On Behalf Of Florian Odronitz [
&gt; f...@twofloats.com]
&gt; Sent: 23 June 2012 16:39
&gt; To: riak-users@lists.basho.com
&gt; Subject: JSON-Encoding from riakc
&gt;
&gt; Hello List,
&gt;
&gt; I am using the riak-erlang-client and I am trying to store JSON. Now the
&gt; riak\\_pb\\_kv\\_codec module assumes that when using the erlang client one would
&gt; always like to encode data in erlang binaries. Which is ok with me \\_until\\_
&gt; riak\\_search needs to index this data.
&gt; I know the indexing also works on erlang data but only until one uses
&gt; proplists. But I use dicts in all my data structures...
&gt; Any ideas about how to best proceed?
&gt;
&gt; Thanks,
&gt; Florian
 \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;

-- 
Sean Cribbs 
Software Engineer
Basho Technologies, Inc.
http://basho.com/
