---
title: "Re: Riak & Zotonic"
description: ""
project: community
lastmod: 2011-12-13T09:25:09-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05931"
mailinglist_parent_id: "msg05928"
author_name: "Anthony Molinaro"
project_section: "mailinglistitem"
sent_date: 2011-12-13T09:25:09-08:00
---



Hi,

 It almost sounds like you might just want to investigate use riak\\_core
instead of full blown riak. The riak\\_core component only deals with
ring management and messaging. We've used it to create a completely
different distributed store with a thrift frontend and custom C database
backend. You could probably swap out your home-grown Dynamo software
with just riak\\_core?

HTH,

-Anthony

On Tue, Dec 13, 2011 at 11:17:05AM +0100, Marc Worrell wrote:
&gt; Hi,
&gt; 
&gt; We are working on the distributed version of Zotonic (the Erlang CMS), as 
&gt; some know.
&gt; 
&gt; We have some home-grown Dynamo like software for the ring-management.
&gt; Still I want to do a reality check, as I much prefer to go with more 
&gt; "standard" software.
&gt; 
&gt; For Riak we bumped into the following problems with some Zotonic use-cases:
&gt; 
&gt; 1. It must be safe out of the box. This means:
&gt; - Only ports open that are controlled by the Zotonic access control.
&gt; - So no Riak APIs (webmachine, protocol buffers, handoff listeners etc.)
&gt; Are there configurations for Riak to disable those ports?
&gt; 
&gt; 2. A very common install is a single machine/node, growing when needed.
&gt; We don't want to store three copies of all data on a single machine when 
&gt; that is so common.
&gt; Is it possible to tune the riak put/get FSMs to group requests to vnodes 
&gt; on the same node?
&gt; Do the vnodes 
&gt; In that case we might be able to use a special storage engine per node.
&gt; 
&gt; 3. We have many sites with many tables in a single install.
&gt; Think of 20+ sites with 30+ tables.
&gt; It must be possible to:
&gt; - keeps these tables/data separated
&gt; - move all data for one site between servers
&gt; How can this be done without having a too big gossip state and how can we 
&gt; keep the data partitioned?
&gt; 
&gt; 4. We need ad-hoc queries. 
&gt; I have the impression that the full text and 2i indexing of Riak is 
&gt; problematic for us because:
&gt; - we have document based queries (Riak full text is term based)
&gt; - many documents have the same terms (think categories etc)
&gt; - 
&gt; As a solution I think of implementing a SQL backend (PostgreSQL and 
&gt; Sqlite3) with its own commands.
&gt; We are doing that already in our own Dynamo trials.
&gt; What problems should I expect when following that route?
&gt; 
&gt; 5. We have services per site, not only per node.
&gt; - Is it possible to use more complex service names than just an atom?
&gt; 
&gt; 6. We are using a Webmachine clone, which is much faster for our use case.
&gt; I understand to use our version I need to clone the whole Riak repo and 
&gt; modify rebar.config files, is that correct?
&gt; 
&gt; 
&gt; Guess I will have more questions when we do decide to take the Riak route.
&gt; 
&gt; 
&gt; Marc Worrell
&gt; 
&gt; 
&gt; 
&gt; 
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

-- 
------------------------------------------------------------------------
Anthony Molinaro 

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

