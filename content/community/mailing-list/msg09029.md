---
title: "Re: Riak secondary indexing 'Unknown field type for field' error"
description: ""
project: community
lastmod: 2012-10-23T13:58:35-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg09029"
mailinglist_parent_id: "msg09028"
author_name: "Brian Roach"
project_section: "mailinglistitem"
sent_date: 2012-10-23T13:58:35-07:00
---


How, exactly, are you creating 'indexes' ?

A secondary index in Riak has to be an integer or a string.

Thanks,
Brian Roach

On Tue, Oct 23, 2012 at 2:42 PM, Hrishikesh More
 wrote:
&gt; Hi,
&gt;
&gt; Using following JSON I am trying to create secondary indexes in Riak.
&gt;
&gt; {
&gt; “Id” : “xxxx”,
&gt; “login” : “xxx”,
&gt; “context” : “xxx”,
&gt; “creationDate” : “xxxx”,
&gt; ...........
&gt; ...........
&gt; “sku1” : {
&gt; quantity : 1,
&gt; },
&gt; “sku2” : {
&gt; quantity : 2,
&gt; },
&gt; }
&gt;
&gt; I prepare RiakIndexes by using above JSON and looping over it. When I try
&gt; to store (the same json string) it in following way I get 'Unknown field
&gt; type for field: 'sku1' error.
&gt;
&gt; IRiakObject riakObj = RiakObjectBuilder.newBuilder(bucketName, id)
&gt; .withIndexes(indexes)
&gt; .withValue(json)
&gt; .withContentType('application/json')
&gt; .build();
&gt;
&gt; IRiakObject returnObject = bucket.store(riakObj);
&gt;
&gt; Error:
&gt; com.basho.riak.client.http.response.RiakResponseRuntimeException:
&gt; Unknown field type for field: 'sku1'.
&gt; Unknown field type for field: 'sku2'.
&gt;
&gt; 1. If I don't define nested JSON it works, however it I put 'skuid' using
&gt; objectMapper.createObjectNode() and add to parent object node (while
&gt; preparing JSON for testing), it gives above error.
&gt; Do I have to write custom serializer here?
&gt; 2. Is there a way to ignore this error through config in Riak?
&gt;
&gt; thanx.
&gt;
&gt; \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
&gt; riak-users mailing list
&gt; riak-users@lists.basho.com
&gt; http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com
&gt;

\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

