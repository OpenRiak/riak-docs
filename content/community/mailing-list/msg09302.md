---
title: "Re: Ruby Riak client -- threadsafe?"
description: ""
project: community
lastmod: 2012-11-13T07:44:16-08:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg09302"
mailinglist_parent_id: "msg09299"
author_name: "Scott Hyndman"
project_section: "mailinglistitem"
sent_date: 2012-11-13T07:44:16-08:00
---


Great. Thanks Sean.

On 13 November 2012 10:37, Sean Cribbs  wrote:

&gt; Scott,
&gt;
&gt; It is generally safe to use the Ruby client from multiple threads. A
&gt; few items that are infrequently touched (memoized buckets and their
&gt; properties) are not, but normal requests are all handled by a
&gt; thread-safe connection pool. Ripple historically kept a client in the
&gt; thread-locals in order to have a sort of globally-referrable Client
&gt; instance; similar to how ActiveRecord's connections work, but not as
&gt; sophisticated. This could be improved in the future, perhaps
&gt; instantiating it in the Railtie instead to be used by all threads.
&gt;
&gt; On Mon, Nov 12, 2012 at 5:01 PM, Scott Hyndman 
&gt; wrote:
&gt; &gt; Hi there,
&gt; &gt;
&gt; &gt; I noticed this post from a bit over a year ago
&gt; &gt; (
&gt; http://lists.basho.com/pipermail/riak-users\\_lists.basho.com/2011-June/004592.html
&gt; ),
&gt; &gt; and wondered whether this was still the case. I've noticed one detail
&gt; &gt; suggesting that it may be (the fact that Ripple creates a client per
&gt; &gt; thread), and one that contradicts (the existence of HTTP and PB
&gt; connection
&gt; &gt; pools on the client).
&gt; &gt;
&gt; &gt; Can anyone shed some insight?
&gt; &gt;
&gt; &gt; Scott
&gt; &gt;
&gt; &gt;
&gt;
&gt;
&gt;
&gt; --
&gt; Sean Cribbs 
&gt; Software Engineer
&gt; Basho Technologies, Inc.
&gt; http://basho.com/
&gt;
