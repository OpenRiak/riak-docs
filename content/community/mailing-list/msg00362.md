---
title: "Re: CAP controls"
description: ""
project: community
lastmod: 2010-05-13T14:11:55-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg00362"
mailinglist_parent_id: "msg00360"
author_name: "Jon Meredith"
project_section: "mailinglistitem"
sent_date: 2010-05-13T14:11:55-07:00
---



Hi Jeremy,

If it were me I would start off with the simplest set up possible - one 
riak node per physical machine. It'll be easier to see what is going on 
and reason about performance if there are less moving parts.


For the storage configuration - if you are using innostore then keep one 
for disk for logging (or use the drive the o/s is on if it is doing 
little else) and create a RAID0 disk out of the remaining disks. 
Similar set up for bitcask except you don't need to worry about the log 
data.


Try that as a baseline and benchmark it. If it isn't up to the task 
then you can explore more complex options.


Jon.


On 5/13/10 2:57 PM, Jeremy Hinegardner wrote:

I am thinking about how to possibly replace an existing system that has heavy
I/O load, low CPU usage, with riak. Its a file storage system, with smallish
files, a few K normally, but billions of them.

The architecture, I think, would be one riak node per disk on the hardware,
and probably run about 16 riak nodes per physical machine. Say I had
4 of these machines, which would be 64 riak nodes.

With something like this, if I set W=3 as a CAP tuning, I would want to make
sure that at least 2 of those writes where on 2 physically different machines,
so in case I had a hardware failure, and it took out a physical machine, I could
still operate with the other 3 machines.

Is something like this possible with riak?

enjoy,

-jeremy





\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_
riak-users mailing list
riak-users@lists.basho.com
http://lists.basho.com/mailman/listinfo/riak-users\\_lists.basho.com

