---
title: "Postcommit hook and storing json object"
description: ""
project: community
lastmod: 2012-08-25T12:56:42-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg08362"
author_name: "Yousuf Fauzan"
project_section: "mailinglistitem"
sent_date: 2012-08-25T12:56:42-07:00
---


Hello,

In a postcommit hook, I am storing an object in another bucket where data
is equal to
 Data = iolist\\_to\\_binary(mochijson2:encode({struct, [
 {&lt;&lt;"status"&gt;&gt;, list\\_to\\_binary(Status)},
 {&lt;&lt;"recorddate"&gt;&gt;, list\\_to\\_binary(Recorddate)},
 {&lt;&lt;"memberlogin"&gt;&gt;, list\\_to\\_binary(User)}
 ]})
and the content type is json.

Now when I run map reduce using JS, mapValuesJSON is actually giving me a
string instead of a dictionary.
I tried doing a JSON.parse of that with no luck.
can somebody help me figure out the right way to store JSON data in post
commit hook?

I tried without iolist\\_to\\_binary and then Riak.mapValuesJSON starts
throwing error.


--
Yousuf
http://fauzism.com
