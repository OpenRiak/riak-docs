---
title: "Lager error_logger formatting issue?"
description: ""
project: community
lastmod: 2011-11-05T15:17:23-07:00
sitemap:
  priority: 0.2
layout: mailinglistitem
mailinglist_id: "msg05446"
author_name: "Bryan Hughes"
project_section: "mailinglistitem"
sent_date: 2011-11-05T15:17:23-07:00
---

Hello,

I did an update on my Lager deps and am now experiencing some formatting 
issues with error\\_log:error\\_report(Report). Here is my code in my 
mochiweb loop:


 try
 ...
 catch
 Type:What -&gt;
 Report = ["web request failed",
 {method, Req:get(method)},
 {path, Path},
 {type, Type},
 {what, What},
 {trace, erlang:get\\_stacktrace()},
 {request, Req}],
 error\\_logger:error\\_report(Report),
 ...
 end.

And this is what is printed to the console log (truncated for 
readability) - the issue is that now, the lists are being printed as lists:


14:52:47.685 [error] 
[119,101,98,32,114,101,113,117,101,115,116,32,102,97,105,108,101,100], 
method: 'POST', path: [115,101,115,115,105,111,110], type: error, what: 
function\\_clause, trace: [{'mochijson2','-json\\_encode\\_proplist/2-fun-0-', 

It used to print correctly.

I did a little more investigating and discovered that if you call 
error\\_report with just a string, you get the correct formatting:


1&gt; error\\_logger:error\\_report(["Hello World"]).
ok
15:09:09.640 [error] Hello World

Now, if you add in a term:

1&gt; error\\_logger:error\\_report(["Hello world!",{method, foo}]).
ok
15:12:15.297 [error] [72,101,108,108,111,32,119,111,114,108,100,33], 
method: foo


The string is now a literal list and not human readable.

Now, if I use the native error\\_logger without Lager:

2&gt; error\\_logger:error\\_report(["Hello world"]).

=ERROR REPORT==== 5-Nov-2011::15:14:35 ===
Hello world
ok
3&gt; error\\_logger:error\\_report(["Hello world", {method, foo}]).
ok
4&gt;
=ERROR REPORT==== 5-Nov-2011::15:14:44 ===
 "Hello world"
 method: foo

Which does the correct thing.

Cheers,
Bryan

